var tj=Object.defineProperty;var A0=n=>{throw TypeError(n)};var nj=(n,e,t)=>e in n?tj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var j0=(n,e,t)=>nj(n,typeof e!="symbol"?e+"":e,t),og=(n,e,t)=>e.has(n)||A0("Cannot "+t);var oe=(n,e,t)=>(og(n,e,"read from private field"),t?t.call(n):e.get(n)),yt=(n,e,t)=>e.has(n)?A0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),et=(n,e,t,r)=>(og(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),kn=(n,e,t)=>(og(n,e,"access private method"),t);var Nh=(n,e,t,r)=>({set _(i){et(n,e,i,t)},get _(){return oe(n,e,r)}});function rj(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function R1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ag={exports:{}},eu={},lg={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0;function sj(){if(P0)return ot;P0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function y(B){return B===null||typeof B!="object"?null:(B=v&&B[v]||B["@@iterator"],typeof B=="function"?B:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,_={};function w(B,X,he){this.props=B,this.context=X,this.refs=_,this.updater=he||T}w.prototype.isReactComponent={},w.prototype.setState=function(B,X){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,X,"setState")},w.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function A(){}A.prototype=w.prototype;function I(B,X,he){this.props=B,this.context=X,this.refs=_,this.updater=he||T}var O=I.prototype=new A;O.constructor=I,N(O,w.prototype),O.isPureReactComponent=!0;var U=Array.isArray,$=Object.prototype.hasOwnProperty,W={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function k(B,X,he){var Ie,Le={},Ae=null,ge=null;if(X!=null)for(Ie in X.ref!==void 0&&(ge=X.ref),X.key!==void 0&&(Ae=""+X.key),X)$.call(X,Ie)&&!D.hasOwnProperty(Ie)&&(Le[Ie]=X[Ie]);var _e=arguments.length-2;if(_e===1)Le.children=he;else if(1<_e){for(var Te=Array(_e),De=0;De<_e;De++)Te[De]=arguments[De+2];Le.children=Te}if(B&&B.defaultProps)for(Ie in _e=B.defaultProps,_e)Le[Ie]===void 0&&(Le[Ie]=_e[Ie]);return{$$typeof:n,type:B,key:Ae,ref:ge,props:Le,_owner:W.current}}function j(B,X){return{$$typeof:n,type:B.type,key:X,ref:B.ref,props:B.props,_owner:B._owner}}function P(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function F(B){var X={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(he){return X[he]})}var M=/\/+/g;function L(B,X){return typeof B=="object"&&B!==null&&B.key!=null?F(""+B.key):X.toString(36)}function J(B,X,he,Ie,Le){var Ae=typeof B;(Ae==="undefined"||Ae==="boolean")&&(B=null);var ge=!1;if(B===null)ge=!0;else switch(Ae){case"string":case"number":ge=!0;break;case"object":switch(B.$$typeof){case n:case e:ge=!0}}if(ge)return ge=B,Le=Le(ge),B=Ie===""?"."+L(ge,0):Ie,U(Le)?(he="",B!=null&&(he=B.replace(M,"$&/")+"/"),J(Le,X,he,"",function(De){return De})):Le!=null&&(P(Le)&&(Le=j(Le,he+(!Le.key||ge&&ge.key===Le.key?"":(""+Le.key).replace(M,"$&/")+"/")+B)),X.push(Le)),1;if(ge=0,Ie=Ie===""?".":Ie+":",U(B))for(var _e=0;_e<B.length;_e++){Ae=B[_e];var Te=Ie+L(Ae,_e);ge+=J(Ae,X,he,Te,Le)}else if(Te=y(B),typeof Te=="function")for(B=Te.call(B),_e=0;!(Ae=B.next()).done;)Ae=Ae.value,Te=Ie+L(Ae,_e++),ge+=J(Ae,X,he,Te,Le);else if(Ae==="object")throw X=String(B),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return ge}function ie(B,X,he){if(B==null)return B;var Ie=[],Le=0;return J(B,Ie,"","",function(Ae){return X.call(he,Ae,Le++)}),Ie}function re(B){if(B._status===-1){var X=B._result;X=X(),X.then(function(he){(B._status===0||B._status===-1)&&(B._status=1,B._result=he)},function(he){(B._status===0||B._status===-1)&&(B._status=2,B._result=he)}),B._status===-1&&(B._status=0,B._result=X)}if(B._status===1)return B._result.default;throw B._result}var ae={current:null},K={transition:null},ne={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:K,ReactCurrentOwner:W};function ce(){throw Error("act(...) is not supported in production builds of React.")}return ot.Children={map:ie,forEach:function(B,X,he){ie(B,function(){X.apply(this,arguments)},he)},count:function(B){var X=0;return ie(B,function(){X++}),X},toArray:function(B){return ie(B,function(X){return X})||[]},only:function(B){if(!P(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},ot.Component=w,ot.Fragment=t,ot.Profiler=i,ot.PureComponent=I,ot.StrictMode=r,ot.Suspense=f,ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,ot.act=ce,ot.cloneElement=function(B,X,he){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Ie=N({},B.props),Le=B.key,Ae=B.ref,ge=B._owner;if(X!=null){if(X.ref!==void 0&&(Ae=X.ref,ge=W.current),X.key!==void 0&&(Le=""+X.key),B.type&&B.type.defaultProps)var _e=B.type.defaultProps;for(Te in X)$.call(X,Te)&&!D.hasOwnProperty(Te)&&(Ie[Te]=X[Te]===void 0&&_e!==void 0?_e[Te]:X[Te])}var Te=arguments.length-2;if(Te===1)Ie.children=he;else if(1<Te){_e=Array(Te);for(var De=0;De<Te;De++)_e[De]=arguments[De+2];Ie.children=_e}return{$$typeof:n,type:B.type,key:Le,ref:Ae,props:Ie,_owner:ge}},ot.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},ot.createElement=k,ot.createFactory=function(B){var X=k.bind(null,B);return X.type=B,X},ot.createRef=function(){return{current:null}},ot.forwardRef=function(B){return{$$typeof:d,render:B}},ot.isValidElement=P,ot.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:re}},ot.memo=function(B,X){return{$$typeof:m,type:B,compare:X===void 0?null:X}},ot.startTransition=function(B){var X=K.transition;K.transition={};try{B()}finally{K.transition=X}},ot.unstable_act=ce,ot.useCallback=function(B,X){return ae.current.useCallback(B,X)},ot.useContext=function(B){return ae.current.useContext(B)},ot.useDebugValue=function(){},ot.useDeferredValue=function(B){return ae.current.useDeferredValue(B)},ot.useEffect=function(B,X){return ae.current.useEffect(B,X)},ot.useId=function(){return ae.current.useId()},ot.useImperativeHandle=function(B,X,he){return ae.current.useImperativeHandle(B,X,he)},ot.useInsertionEffect=function(B,X){return ae.current.useInsertionEffect(B,X)},ot.useLayoutEffect=function(B,X){return ae.current.useLayoutEffect(B,X)},ot.useMemo=function(B,X){return ae.current.useMemo(B,X)},ot.useReducer=function(B,X,he){return ae.current.useReducer(B,X,he)},ot.useRef=function(B){return ae.current.useRef(B)},ot.useState=function(B){return ae.current.useState(B)},ot.useSyncExternalStore=function(B,X,he){return ae.current.useSyncExternalStore(B,X,he)},ot.useTransition=function(){return ae.current.useTransition()},ot.version="18.3.1",ot}var R0;function Wv(){return R0||(R0=1,lg.exports=sj()),lg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function ij(){if(k0)return eu;k0=1;var n=Wv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,f,m){var g,v={},y=null,T=null;m!==void 0&&(y=""+m),f.key!==void 0&&(y=""+f.key),f.ref!==void 0&&(T=f.ref);for(g in f)r.call(f,g)&&!a.hasOwnProperty(g)&&(v[g]=f[g]);if(d&&d.defaultProps)for(g in f=d.defaultProps,f)v[g]===void 0&&(v[g]=f[g]);return{$$typeof:e,type:d,key:y,ref:T,props:v,_owner:i.current}}return eu.Fragment=t,eu.jsx=c,eu.jsxs=c,eu}var O0;function oj(){return O0||(O0=1,ag.exports=ij()),ag.exports}var l=oj();let cf=!1,aj=[],uu=0;const D0=3,nc=n=>{cf!==n&&(cf=n,console.log(`🔄 Firebase mode changed: ${n?"OFFLINE":"ONLINE"}`),aj.forEach(e=>e()))},L0=n=>{uu++,console.log(`🚨 Firebase error ${uu}/${D0}:`,n.message),uu>=D0&&(console.log("🔄 Too many Firebase errors - switching to global offline mode"),nc(!0))};if(!window.fetch.__firebasePatched){const n=window.fetch,e=(...t)=>{var a;const r=typeof t[0]=="string"?t[0]:(a=t[0])==null?void 0:a.url;if(!(!!r&&(r.includes("firestore.googleapis.com")||r.includes("firebase.googleapis.com")||r.includes("identitytoolkit.googleapis.com"))))try{return n(...t)}catch(c){return Promise.reject(c)}if(cf){const c=new Error("Firebase offline mode - request blocked");return c.isFirebaseOfflineError=!0,Promise.reject(c)}try{const c=n(...t);return Promise.resolve(c).then(d=>(d.ok&&(uu=0,cf&&(console.log("🟢 Firebase connection restored"),nc(!1))),d)).catch(d=>{throw console.log("🔴 Firebase request failed:",(d==null?void 0:d.message)||String(d)),navigator.onLine&&L0(d),d})}catch(c){return console.log("🔴 Firebase request threw synchronously:",(c==null?void 0:c.message)||String(c)),navigator.onLine&&L0(c),Promise.reject(c)}};e.__firebasePatched=!0,window.fetch=e}console.log("🔄 Initializing Firebase monitoring...");navigator.onLine||(console.log("🚫 No internet connection - starting in offline mode"),nc(!0));window.addEventListener("online",()=>{console.log("🟢 Internet connection restored"),uu=0,nc(!1)});window.addEventListener("offline",()=>{console.log("🔴 Internet connection lost"),nc(!0)});console.log("🔄 Starting Firebase monitoring in ONLINE mode");window.addEventListener("unhandledrejection",n=>{var r;const e=String(((r=n==null?void 0:n.reason)==null?void 0:r.message)||(n==null?void 0:n.reason)||""),t=String((n==null?void 0:n.reason)&&(n.reason.stack||"")||"");e.includes("Failed to fetch")&&(t.includes("chrome-extension://")||t.includes("fullstory.com"))&&n.preventDefault()});const lj=console.error,cj=console.warn,uj=console.log;console.error=(...n)=>{const e=n.join(" ");["Firebase offline mode - request blocked","FirebaseError: [code=unavailable]","Could not reach Cloud Firestore backend","Connection failed","The operation could not be completed","device does not have a healthy Internet connection","client will operate in offline mode","Most recent error: FirebaseError","@firebase/firestore: Firestore","chrome-extension://","fullstory.com","TypeError: Failed to fetch (edge.fullstory.com)"].some(r=>e.includes(r))||lj.apply(console,n)};console.warn=(...n)=>{const e=n.join(" ");e.includes("Firebase")&&e.includes("offline")||cj.apply(console,n)};console.log=(...n)=>{const e=n.join(" ");e.includes("@firebase/firestore")&&e.includes("offline")||uj.apply(console,n)};setTimeout(()=>{navigator.onLine?console.log("🌐 Internet available - Firebase enabled and ready"):(console.log("🚫 No internet connection detected - switching to offline mode"),nc(!0))},100);var E=Wv();const we=R1(E),k1=rj({__proto__:null,default:we},[E]),dj=1,hj=1e6;let cg=0;function fj(){return cg=(cg+1)%Number.MAX_SAFE_INTEGER,cg.toString()}const ug=new Map,M0=n=>{if(ug.has(n))return;const e=setTimeout(()=>{ug.delete(n),du({type:"REMOVE_TOAST",toastId:n})},hj);ug.set(n,e)},mj=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,dj)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?M0(t):n.toasts.forEach(r=>{M0(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Wh=[];let Hh={toasts:[]};function du(n){Hh=mj(Hh,n),Wh.forEach(e=>{e(Hh)})}function pj({...n}){const e=fj(),t=i=>du({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>du({type:"DISMISS_TOAST",toastId:e});return du({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function gj(){const[n,e]=E.useState(Hh);return E.useEffect(()=>(Wh.push(e),()=>{const t=Wh.indexOf(e);t>-1&&Wh.splice(t,1)}),[n]),{...n,toast:pj,dismiss:t=>du({type:"DISMISS_TOAST",toastId:t})}}var dg={exports:{}},rr={},hg={exports:{}},fg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function vj(){return F0||(F0=1,function(n){function e(K,ne){var ce=K.length;K.push(ne);e:for(;0<ce;){var B=ce-1>>>1,X=K[B];if(0<i(X,ne))K[B]=ne,K[ce]=X,ce=B;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ne=K[0],ce=K.pop();if(ce!==ne){K[0]=ce;e:for(var B=0,X=K.length,he=X>>>1;B<he;){var Ie=2*(B+1)-1,Le=K[Ie],Ae=Ie+1,ge=K[Ae];if(0>i(Le,ce))Ae<X&&0>i(ge,Le)?(K[B]=ge,K[Ae]=ce,B=Ae):(K[B]=Le,K[Ie]=ce,B=Ie);else if(Ae<X&&0>i(ge,ce))K[B]=ge,K[Ae]=ce,B=Ae;else break e}}return ne}function i(K,ne){var ce=K.sortIndex-ne.sortIndex;return ce!==0?ce:K.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var f=[],m=[],g=1,v=null,y=3,T=!1,N=!1,_=!1,w=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(K){for(var ne=t(m);ne!==null;){if(ne.callback===null)r(m);else if(ne.startTime<=K)r(m),ne.sortIndex=ne.expirationTime,e(f,ne);else break;ne=t(m)}}function U(K){if(_=!1,O(K),!N)if(t(f)!==null)N=!0,re($);else{var ne=t(m);ne!==null&&ae(U,ne.startTime-K)}}function $(K,ne){N=!1,_&&(_=!1,A(k),k=-1),T=!0;var ce=y;try{for(O(ne),v=t(f);v!==null&&(!(v.expirationTime>ne)||K&&!F());){var B=v.callback;if(typeof B=="function"){v.callback=null,y=v.priorityLevel;var X=B(v.expirationTime<=ne);ne=n.unstable_now(),typeof X=="function"?v.callback=X:v===t(f)&&r(f),O(ne)}else r(f);v=t(f)}if(v!==null)var he=!0;else{var Ie=t(m);Ie!==null&&ae(U,Ie.startTime-ne),he=!1}return he}finally{v=null,y=ce,T=!1}}var W=!1,D=null,k=-1,j=5,P=-1;function F(){return!(n.unstable_now()-P<j)}function M(){if(D!==null){var K=n.unstable_now();P=K;var ne=!0;try{ne=D(!0,K)}finally{ne?L():(W=!1,D=null)}}else W=!1}var L;if(typeof I=="function")L=function(){I(M)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ie=J.port2;J.port1.onmessage=M,L=function(){ie.postMessage(null)}}else L=function(){w(M,0)};function re(K){D=K,W||(W=!0,L())}function ae(K,ne){k=w(function(){K(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){N||T||(N=!0,re($))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(K){switch(y){case 1:case 2:case 3:var ne=3;break;default:ne=y}var ce=y;y=ne;try{return K()}finally{y=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,ne){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ce=y;y=K;try{return ne()}finally{y=ce}},n.unstable_scheduleCallback=function(K,ne,ce){var B=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?B+ce:B):ce=B,K){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ce+X,K={id:g++,callback:ne,priorityLevel:K,startTime:ce,expirationTime:X,sortIndex:-1},ce>B?(K.sortIndex=ce,e(m,K),t(f)===null&&K===t(m)&&(_?(A(k),k=-1):_=!0,ae(U,ce-B))):(K.sortIndex=X,e(f,K),N||T||(N=!0,re($))),K},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(K){var ne=y;return function(){var ce=y;y=ne;try{return K.apply(this,arguments)}finally{y=ce}}}}(fg)),fg}var V0;function yj(){return V0||(V0=1,hg.exports=vj()),hg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function xj(){if(U0)return rr;U0=1;var n=Wv(),e=yj();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){c(s,o),c(s+"Capture",o)}function c(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function y(s){return f.call(v,s)?!0:f.call(g,s)?!1:m.test(s)?v[s]=!0:(g[s]=!0,!1)}function T(s,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function N(s,o,u,p){if(o===null||typeof o>"u"||T(s,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function _(s,o,u,p,x,S,R){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=x,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=S,this.removeEmptyString=R}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){w[s]=new _(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];w[o]=new _(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){w[s]=new _(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){w[s]=new _(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){w[s]=new _(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){w[s]=new _(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){w[s]=new _(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){w[s]=new _(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){w[s]=new _(s,5,!1,s.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function I(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(A,I);w[o]=new _(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(A,I);w[o]=new _(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(A,I);w[o]=new _(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){w[s]=new _(s,1,!1,s.toLowerCase(),null,!1,!1)}),w.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){w[s]=new _(s,1,!1,s.toLowerCase(),null,!0,!0)});function O(s,o,u,p){var x=w.hasOwnProperty(o)?w[o]:null;(x!==null?x.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(N(o,u,x,p)&&(u=null),p||x===null?y(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):x.mustUseProperty?s[x.propertyName]=u===null?x.type===3?!1:"":u:(o=x.attributeName,p=x.attributeNamespace,u===null?s.removeAttribute(o):(x=x.type,u=x===3||x===4&&u===!0?"":""+u,p?s.setAttributeNS(p,o,u):s.setAttribute(o,u))))}var U=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),W=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),F=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),K=Symbol.iterator;function ne(s){return s===null||typeof s!="object"?null:(s=K&&s[K]||s["@@iterator"],typeof s=="function"?s:null)}var ce=Object.assign,B;function X(s){if(B===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+s}var he=!1;function Ie(s,o){if(!s||he)return"";he=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Z){var p=Z}Reflect.construct(s,[],o)}else{try{o.call()}catch(Z){p=Z}s.call(o.prototype)}else{try{throw Error()}catch(Z){p=Z}s()}}catch(Z){if(Z&&p&&typeof Z.stack=="string"){for(var x=Z.stack.split(`
`),S=p.stack.split(`
`),R=x.length-1,z=S.length-1;1<=R&&0<=z&&x[R]!==S[z];)z--;for(;1<=R&&0<=z;R--,z--)if(x[R]!==S[z]){if(R!==1||z!==1)do if(R--,z--,0>z||x[R]!==S[z]){var q=`
`+x[R].replace(" at new "," at ");return s.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",s.displayName)),q}while(1<=R&&0<=z);break}}}finally{he=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?X(s):""}function Le(s){switch(s.tag){case 5:return X(s.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return s=Ie(s.type,!1),s;case 11:return s=Ie(s.type.render,!1),s;case 1:return s=Ie(s.type,!0),s;default:return""}}function Ae(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case W:return"Portal";case j:return"Profiler";case k:return"StrictMode";case L:return"Suspense";case J:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case F:return(s.displayName||"Context")+".Consumer";case P:return(s._context.displayName||"Context")+".Provider";case M:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ie:return o=s.displayName||null,o!==null?o:Ae(s.type)||"Memo";case re:o=s._payload,s=s._init;try{return Ae(s(o))}catch{}}return null}function ge(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(o);case 8:return o===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function _e(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Te(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function De(s){var o=Te(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),p=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var x=u.get,S=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return x.call(this)},set:function(R){p=""+R,S.call(this,R)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(R){p=""+R},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function tt(s){s._valueTracker||(s._valueTracker=De(s))}function nt(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return s&&(p=Te(s)?s.checked?"true":"false":s.value),s=p,s!==u?(o.setValue(s),!0):!1}function fe(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ye(s,o){var u=o.checked;return ce({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function qt(s,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=_e(o.value!=null?o.value:u),s._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ot(s,o){o=o.checked,o!=null&&O(s,"checked",o,!1)}function Fe(s,o){Ot(s,o);var u=_e(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?be(s,o.type,u):o.hasOwnProperty("defaultValue")&&be(s,o.type,_e(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Un(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function be(s,o,u){(o!=="number"||fe(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var ct=Array.isArray;function wn(s,o,u,p){if(s=s.options,o){o={};for(var x=0;x<u.length;x++)o["$"+u[x]]=!0;for(u=0;u<s.length;u++)x=o.hasOwnProperty("$"+s[u].value),s[u].selected!==x&&(s[u].selected=x),x&&p&&(s[u].defaultSelected=!0)}else{for(u=""+_e(u),o=null,x=0;x<s.length;x++){if(s[x].value===u){s[x].selected=!0,p&&(s[x].defaultSelected=!0);return}o!==null||s[x].disabled||(o=s[x])}o!==null&&(o.selected=!0)}}function lr(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function In(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(ct(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:_e(u)}}function Wt(s,o){var u=_e(o.value),p=_e(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),p!=null&&(s.defaultValue=""+p)}function kr(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function Ct(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?Ct(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var zn,bt=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,x){MSApp.execUnsafeLocalFunction(function(){return s(o,u,p,x)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(zn=zn||document.createElement("div"),zn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=zn.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function Or(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var zs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ls=["Webkit","ms","Moz","O"];Object.keys(zs).forEach(function(s){ls.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),zs[o]=zs[s]})});function Ei(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||zs.hasOwnProperty(s)&&zs[s]?(""+o).trim():o+"px"}function Lo(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,x=Ei(u,o[u],p);u==="float"&&(u="cssFloat"),p?s.setProperty(u,x):s[u]=x}}var Bs=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qn(s,o){if(o){if(Bs[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Mo(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Be=null;function gt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var mt=null,Vt=null,Gt=null;function Dr(s){if(s=Vc(s)){if(typeof mt!="function")throw Error(t(280));var o=s.stateNode;o&&(o=zd(o),mt(s.stateNode,s.type,o))}}function wr(s){Vt?Gt?Gt.push(s):Gt=[s]:Vt=s}function gc(){if(Vt){var s=Vt,o=Gt;if(Gt=Vt=null,Dr(s),o)for(s=0;s<o.length;s++)Dr(o[s])}}function Fo(s,o){return s(o)}function vc(){}var $s=!1;function yc(s,o,u){if($s)return s(o,u);$s=!0;try{return Fo(s,o,u)}finally{$s=!1,(Vt!==null||Gt!==null)&&(vc(),gc())}}function Qt(s,o){var u=s.stateNode;if(u===null)return null;var p=zd(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Ma=!1;if(d)try{var Lr={};Object.defineProperty(Lr,"passive",{get:function(){Ma=!0}}),window.addEventListener("test",Lr,Lr),window.removeEventListener("test",Lr,Lr)}catch{Ma=!1}function Vo(s,o,u,p,x,S,R,z,q){var Z=Array.prototype.slice.call(arguments,3);try{o.apply(u,Z)}catch(de){this.onError(de)}}var Uo=!1,Fa=null,Mr=!1,xc=null,Om={onError:function(s){Uo=!0,Fa=s}};function Va(s,o,u,p,x,S,R,z,q){Uo=!1,Fa=null,Vo.apply(Om,arguments)}function hd(s,o,u,p,x,S,R,z,q){if(Va.apply(this,arguments),Uo){if(Uo){var Z=Fa;Uo=!1,Fa=null}else throw Error(t(198));Mr||(Mr=!0,xc=Z)}}function Fr(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function zo(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Vr(s){if(Fr(s)!==s)throw Error(t(188))}function fd(s){var o=s.alternate;if(!o){if(o=Fr(s),o===null)throw Error(t(188));return o!==s?null:s}for(var u=s,p=o;;){var x=u.return;if(x===null)break;var S=x.alternate;if(S===null){if(p=x.return,p!==null){u=p;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===u)return Vr(x),s;if(S===p)return Vr(x),o;S=S.sibling}throw Error(t(188))}if(u.return!==p.return)u=x,p=S;else{for(var R=!1,z=x.child;z;){if(z===u){R=!0,u=x,p=S;break}if(z===p){R=!0,p=x,u=S;break}z=z.sibling}if(!R){for(z=S.child;z;){if(z===u){R=!0,u=S,p=x;break}if(z===p){R=!0,p=S,u=x;break}z=z.sibling}if(!R)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:o}function wc(s){return s=fd(s),s!==null?Ua(s):null}function Ua(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Ua(s);if(o!==null)return o;s=s.sibling}return null}var za=e.unstable_scheduleCallback,_c=e.unstable_cancelCallback,md=e.unstable_shouldYield,Dm=e.unstable_requestPaint,It=e.unstable_now,pd=e.unstable_getCurrentPriorityLevel,Bo=e.unstable_ImmediatePriority,bi=e.unstable_UserBlockingPriority,_r=e.unstable_NormalPriority,Ec=e.unstable_LowPriority,gd=e.unstable_IdlePriority,$o=null,cr=null;function vd(s){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot($o,s,void 0,(s.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:xd,bc=Math.log,yd=Math.LN2;function xd(s){return s>>>=0,s===0?32:31-(bc(s)/yd|0)|0}var Ba=64,$a=4194304;function Ti(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function qo(s,o){var u=s.pendingLanes;if(u===0)return 0;var p=0,x=s.suspendedLanes,S=s.pingedLanes,R=u&268435455;if(R!==0){var z=R&~x;z!==0?p=Ti(z):(S&=R,S!==0&&(p=Ti(S)))}else R=u&~x,R!==0?p=Ti(R):S!==0&&(p=Ti(S));if(p===0)return 0;if(o!==0&&o!==p&&(o&x)===0&&(x=p&-p,S=o&-o,x>=S||x===16&&(S&4194240)!==0))return o;if((p&4)!==0&&(p|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=p;0<o;)u=31-Bn(o),x=1<<u,p|=s[u],o&=~x;return p}function Lm(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qs(s,o){for(var u=s.suspendedLanes,p=s.pingedLanes,x=s.expirationTimes,S=s.pendingLanes;0<S;){var R=31-Bn(S),z=1<<R,q=x[R];q===-1?((z&u)===0||(z&p)!==0)&&(x[R]=Lm(z,o)):q<=o&&(s.expiredLanes|=z),S&=~z}}function ur(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Wo(){var s=Ba;return Ba<<=1,(Ba&4194240)===0&&(Ba=64),s}function Si(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function Ni(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-Bn(o),s[o]=u}function Tt(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<u;){var x=31-Bn(u),S=1<<x;o[x]=0,p[x]=-1,s[x]=-1,u&=~S}}function Ci(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var p=31-Bn(u),x=1<<p;x&o|s[p]&o&&(s[p]|=o),u&=~x}}var ut=0;function Ii(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var wd,qa,_d,Ed,bd,Tc=!1,cs=[],_n=null,Ur=null,zr=null,Ai=new Map,Er=new Map,us=[],Mm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Td(s,o){switch(s){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":Ai.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Er.delete(o.pointerId)}}function Yn(s,o,u,p,x,S){return s===null||s.nativeEvent!==S?(s={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:S,targetContainers:[x]},o!==null&&(o=Vc(o),o!==null&&qa(o)),s):(s.eventSystemFlags|=p,o=s.targetContainers,x!==null&&o.indexOf(x)===-1&&o.push(x),s)}function Fm(s,o,u,p,x){switch(o){case"focusin":return _n=Yn(_n,s,o,u,p,x),!0;case"dragenter":return Ur=Yn(Ur,s,o,u,p,x),!0;case"mouseover":return zr=Yn(zr,s,o,u,p,x),!0;case"pointerover":var S=x.pointerId;return Ai.set(S,Yn(Ai.get(S)||null,s,o,u,p,x)),!0;case"gotpointercapture":return S=x.pointerId,Er.set(S,Yn(Er.get(S)||null,s,o,u,p,x)),!0}return!1}function Sd(s){var o=Yo(s.target);if(o!==null){var u=Fr(o);if(u!==null){if(o=u.tag,o===13){if(o=zo(u),o!==null){s.blockedOn=o,bd(s.priority,function(){_d(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ws(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Wa(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var p=new u.constructor(u.type,u);Be=p,u.target.dispatchEvent(p),Be=null}else return o=Vc(u),o!==null&&qa(o),s.blockedOn=u,!1;o.shift()}return!0}function Ho(s,o,u){Ws(s)&&u.delete(o)}function Nd(){Tc=!1,_n!==null&&Ws(_n)&&(_n=null),Ur!==null&&Ws(Ur)&&(Ur=null),zr!==null&&Ws(zr)&&(zr=null),Ai.forEach(Ho),Er.forEach(Ho)}function Br(s,o){s.blockedOn===o&&(s.blockedOn=null,Tc||(Tc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Nd)))}function $r(s){function o(x){return Br(x,s)}if(0<cs.length){Br(cs[0],s);for(var u=1;u<cs.length;u++){var p=cs[u];p.blockedOn===s&&(p.blockedOn=null)}}for(_n!==null&&Br(_n,s),Ur!==null&&Br(Ur,s),zr!==null&&Br(zr,s),Ai.forEach(o),Er.forEach(o),u=0;u<us.length;u++)p=us[u],p.blockedOn===s&&(p.blockedOn=null);for(;0<us.length&&(u=us[0],u.blockedOn===null);)Sd(u),u.blockedOn===null&&us.shift()}var Hs=U.ReactCurrentBatchConfig,ji=!0;function Dt(s,o,u,p){var x=ut,S=Hs.transition;Hs.transition=null;try{ut=1,Sc(s,o,u,p)}finally{ut=x,Hs.transition=S}}function Vm(s,o,u,p){var x=ut,S=Hs.transition;Hs.transition=null;try{ut=4,Sc(s,o,u,p)}finally{ut=x,Hs.transition=S}}function Sc(s,o,u,p){if(ji){var x=Wa(s,o,u,p);if(x===null)Ym(s,o,p,Ko,u),Td(s,p);else if(Fm(x,s,o,u,p))p.stopPropagation();else if(Td(s,p),o&4&&-1<Mm.indexOf(s)){for(;x!==null;){var S=Vc(x);if(S!==null&&wd(S),S=Wa(s,o,u,p),S===null&&Ym(s,o,p,Ko,u),S===x)break;x=S}x!==null&&p.stopPropagation()}else Ym(s,o,p,null,u)}}var Ko=null;function Wa(s,o,u,p){if(Ko=null,s=gt(p),s=Yo(s),s!==null)if(o=Fr(s),o===null)s=null;else if(u=o.tag,u===13){if(s=zo(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Ko=s,null}function Nc(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pd()){case Bo:return 1;case bi:return 4;case _r:case Ec:return 16;case gd:return 536870912;default:return 16}default:return 16}}var dr=null,Ha=null,Xn=null;function Cc(){if(Xn)return Xn;var s,o=Ha,u=o.length,p,x="value"in dr?dr.value:dr.textContent,S=x.length;for(s=0;s<u&&o[s]===x[s];s++);var R=u-s;for(p=1;p<=R&&o[u-p]===x[S-p];p++);return Xn=x.slice(s,1<p?1-p:void 0)}function Ka(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function ds(){return!0}function Ic(){return!1}function En(s){function o(u,p,x,S,R){this._reactName=u,this._targetInst=x,this.type=p,this.nativeEvent=S,this.target=R,this.currentTarget=null;for(var z in s)s.hasOwnProperty(z)&&(u=s[z],this[z]=u?u(S):S[z]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?ds:Ic,this.isPropagationStopped=Ic,this}return ce(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),o}var qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ga=En(qr),hs=ce({},qr,{view:0,detail:0}),Um=En(hs),Qa,Ks,Pi,Go=ce({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Pi&&(Pi&&s.type==="mousemove"?(Qa=s.screenX-Pi.screenX,Ks=s.screenY-Pi.screenY):Ks=Qa=0,Pi=s),Qa)},movementY:function(s){return"movementY"in s?s.movementY:Ks}}),Ya=En(Go),Ac=ce({},Go,{dataTransfer:0}),Cd=En(Ac),Xa=ce({},hs,{relatedTarget:0}),Ja=En(Xa),Id=ce({},qr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gs=En(Id),Ad=ce({},qr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),jd=En(Ad),Pd=ce({},qr,{data:0}),jc=En(Pd),Za={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kd(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Rd[s])?!!o[s]:!1}function fs(){return kd}var h=ce({},hs,{key:function(s){if(s.key){var o=Za[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Ka(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?$n[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fs,charCode:function(s){return s.type==="keypress"?Ka(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ka(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),b=En(h),C=ce({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),V=En(C),G=ce({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fs}),te=En(G),xe=ce({},qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),_t=En(xe),cn=ce({},Go,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ht=En(cn),mn=[9,13,27,32],en=d&&"CompositionEvent"in window,br=null;d&&"documentMode"in document&&(br=document.documentMode);var hr=d&&"TextEvent"in window&&!br,Qo=d&&(!en||br&&8<br&&11>=br),el=" ",bx=!1;function Tx(s,o){switch(s){case"keyup":return mn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sx(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var tl=!1;function JI(s,o){switch(s){case"compositionend":return Sx(o);case"keypress":return o.which!==32?null:(bx=!0,el);case"textInput":return s=o.data,s===el&&bx?null:s;default:return null}}function ZI(s,o){if(tl)return s==="compositionend"||!en&&Tx(s,o)?(s=Cc(),Xn=Ha=dr=null,tl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Qo&&o.locale!=="ko"?null:o.data;default:return null}}var eA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nx(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!eA[s.type]:o==="textarea"}function Cx(s,o,u,p){wr(p),o=Fd(o,"onChange"),0<o.length&&(u=new Ga("onChange","change",null,u,p),s.push({event:u,listeners:o}))}var Pc=null,Rc=null;function tA(s){Wx(s,0)}function Od(s){var o=ol(s);if(nt(o))return s}function nA(s,o){if(s==="change")return o}var Ix=!1;if(d){var zm;if(d){var Bm="oninput"in document;if(!Bm){var Ax=document.createElement("div");Ax.setAttribute("oninput","return;"),Bm=typeof Ax.oninput=="function"}zm=Bm}else zm=!1;Ix=zm&&(!document.documentMode||9<document.documentMode)}function jx(){Pc&&(Pc.detachEvent("onpropertychange",Px),Rc=Pc=null)}function Px(s){if(s.propertyName==="value"&&Od(Rc)){var o=[];Cx(o,Rc,s,gt(s)),yc(tA,o)}}function rA(s,o,u){s==="focusin"?(jx(),Pc=o,Rc=u,Pc.attachEvent("onpropertychange",Px)):s==="focusout"&&jx()}function sA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Od(Rc)}function iA(s,o){if(s==="click")return Od(o)}function oA(s,o){if(s==="input"||s==="change")return Od(o)}function aA(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Wr=typeof Object.is=="function"?Object.is:aA;function kc(s,o){if(Wr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var x=u[p];if(!f.call(o,x)||!Wr(s[x],o[x]))return!1}return!0}function Rx(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function kx(s,o){var u=Rx(s);s=0;for(var p;u;){if(u.nodeType===3){if(p=s+u.textContent.length,s<=o&&p>=o)return{node:u,offset:o-s};s=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Rx(u)}}function Ox(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Ox(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Dx(){for(var s=window,o=fe();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=fe(s.document)}return o}function $m(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function lA(s){var o=Dx(),u=s.focusedElem,p=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&Ox(u.ownerDocument.documentElement,u)){if(p!==null&&$m(u)){if(o=p.start,s=p.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var x=u.textContent.length,S=Math.min(p.start,x);p=p.end===void 0?S:Math.min(p.end,x),!s.extend&&S>p&&(x=p,p=S,S=x),x=kx(u,S);var R=kx(u,p);x&&R&&(s.rangeCount!==1||s.anchorNode!==x.node||s.anchorOffset!==x.offset||s.focusNode!==R.node||s.focusOffset!==R.offset)&&(o=o.createRange(),o.setStart(x.node,x.offset),s.removeAllRanges(),S>p?(s.addRange(o),s.extend(R.node,R.offset)):(o.setEnd(R.node,R.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var cA=d&&"documentMode"in document&&11>=document.documentMode,nl=null,qm=null,Oc=null,Wm=!1;function Lx(s,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Wm||nl==null||nl!==fe(p)||(p=nl,"selectionStart"in p&&$m(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Oc&&kc(Oc,p)||(Oc=p,p=Fd(qm,"onSelect"),0<p.length&&(o=new Ga("onSelect","select",null,o,u),s.push({event:o,listeners:p}),o.target=nl)))}function Dd(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var rl={animationend:Dd("Animation","AnimationEnd"),animationiteration:Dd("Animation","AnimationIteration"),animationstart:Dd("Animation","AnimationStart"),transitionend:Dd("Transition","TransitionEnd")},Hm={},Mx={};d&&(Mx=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function Ld(s){if(Hm[s])return Hm[s];if(!rl[s])return s;var o=rl[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in Mx)return Hm[s]=o[u];return s}var Fx=Ld("animationend"),Vx=Ld("animationiteration"),Ux=Ld("animationstart"),zx=Ld("transitionend"),Bx=new Map,$x="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(s,o){Bx.set(s,o),a(o,[s])}for(var Km=0;Km<$x.length;Km++){var Gm=$x[Km],uA=Gm.toLowerCase(),dA=Gm[0].toUpperCase()+Gm.slice(1);Ri(uA,"on"+dA)}Ri(Fx,"onAnimationEnd"),Ri(Vx,"onAnimationIteration"),Ri(Ux,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(zx,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dc));function qx(s,o,u){var p=s.type||"unknown-event";s.currentTarget=u,hd(p,o,void 0,s),s.currentTarget=null}function Wx(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var p=s[u],x=p.event;p=p.listeners;e:{var S=void 0;if(o)for(var R=p.length-1;0<=R;R--){var z=p[R],q=z.instance,Z=z.currentTarget;if(z=z.listener,q!==S&&x.isPropagationStopped())break e;qx(x,z,Z),S=q}else for(R=0;R<p.length;R++){if(z=p[R],q=z.instance,Z=z.currentTarget,z=z.listener,q!==S&&x.isPropagationStopped())break e;qx(x,z,Z),S=q}}}if(Mr)throw s=xc,Mr=!1,xc=null,s}function jt(s,o){var u=o[np];u===void 0&&(u=o[np]=new Set);var p=s+"__bubble";u.has(p)||(Hx(o,s,2,!1),u.add(p))}function Qm(s,o,u){var p=0;o&&(p|=4),Hx(u,s,p,o)}var Md="_reactListening"+Math.random().toString(36).slice(2);function Lc(s){if(!s[Md]){s[Md]=!0,r.forEach(function(u){u!=="selectionchange"&&(hA.has(u)||Qm(u,!1,s),Qm(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Md]||(o[Md]=!0,Qm("selectionchange",!1,o))}}function Hx(s,o,u,p){switch(Nc(o)){case 1:var x=Dt;break;case 4:x=Vm;break;default:x=Sc}u=x.bind(null,o,u,s),x=void 0,!Ma||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(x=!0),p?x!==void 0?s.addEventListener(o,u,{capture:!0,passive:x}):s.addEventListener(o,u,!0):x!==void 0?s.addEventListener(o,u,{passive:x}):s.addEventListener(o,u,!1)}function Ym(s,o,u,p,x){var S=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var R=p.tag;if(R===3||R===4){var z=p.stateNode.containerInfo;if(z===x||z.nodeType===8&&z.parentNode===x)break;if(R===4)for(R=p.return;R!==null;){var q=R.tag;if((q===3||q===4)&&(q=R.stateNode.containerInfo,q===x||q.nodeType===8&&q.parentNode===x))return;R=R.return}for(;z!==null;){if(R=Yo(z),R===null)return;if(q=R.tag,q===5||q===6){p=S=R;continue e}z=z.parentNode}}p=p.return}yc(function(){var Z=S,de=gt(u),me=[];e:{var ue=Bx.get(s);if(ue!==void 0){var Se=Ga,Pe=s;switch(s){case"keypress":if(Ka(u)===0)break e;case"keydown":case"keyup":Se=b;break;case"focusin":Pe="focus",Se=Ja;break;case"focusout":Pe="blur",Se=Ja;break;case"beforeblur":case"afterblur":Se=Ja;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Ya;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=Cd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=te;break;case Fx:case Vx:case Ux:Se=Gs;break;case zx:Se=_t;break;case"scroll":Se=Um;break;case"wheel":Se=ht;break;case"copy":case"cut":case"paste":Se=jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=V}var Re=(o&4)!==0,Yt=!Re&&s==="scroll",Q=Re?ue!==null?ue+"Capture":null:ue;Re=[];for(var H=Z,Y;H!==null;){Y=H;var pe=Y.stateNode;if(Y.tag===5&&pe!==null&&(Y=pe,Q!==null&&(pe=Qt(H,Q),pe!=null&&Re.push(Mc(H,pe,Y)))),Yt)break;H=H.return}0<Re.length&&(ue=new Se(ue,Pe,null,u,de),me.push({event:ue,listeners:Re}))}}if((o&7)===0){e:{if(ue=s==="mouseover"||s==="pointerover",Se=s==="mouseout"||s==="pointerout",ue&&u!==Be&&(Pe=u.relatedTarget||u.fromElement)&&(Yo(Pe)||Pe[Qs]))break e;if((Se||ue)&&(ue=de.window===de?de:(ue=de.ownerDocument)?ue.defaultView||ue.parentWindow:window,Se?(Pe=u.relatedTarget||u.toElement,Se=Z,Pe=Pe?Yo(Pe):null,Pe!==null&&(Yt=Fr(Pe),Pe!==Yt||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(Se=null,Pe=Z),Se!==Pe)){if(Re=Ya,pe="onMouseLeave",Q="onMouseEnter",H="mouse",(s==="pointerout"||s==="pointerover")&&(Re=V,pe="onPointerLeave",Q="onPointerEnter",H="pointer"),Yt=Se==null?ue:ol(Se),Y=Pe==null?ue:ol(Pe),ue=new Re(pe,H+"leave",Se,u,de),ue.target=Yt,ue.relatedTarget=Y,pe=null,Yo(de)===Z&&(Re=new Re(Q,H+"enter",Pe,u,de),Re.target=Y,Re.relatedTarget=Yt,pe=Re),Yt=pe,Se&&Pe)t:{for(Re=Se,Q=Pe,H=0,Y=Re;Y;Y=sl(Y))H++;for(Y=0,pe=Q;pe;pe=sl(pe))Y++;for(;0<H-Y;)Re=sl(Re),H--;for(;0<Y-H;)Q=sl(Q),Y--;for(;H--;){if(Re===Q||Q!==null&&Re===Q.alternate)break t;Re=sl(Re),Q=sl(Q)}Re=null}else Re=null;Se!==null&&Kx(me,ue,Se,Re,!1),Pe!==null&&Yt!==null&&Kx(me,Yt,Pe,Re,!0)}}e:{if(ue=Z?ol(Z):window,Se=ue.nodeName&&ue.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ue.type==="file")var ke=nA;else if(Nx(ue))if(Ix)ke=oA;else{ke=sA;var Ve=rA}else(Se=ue.nodeName)&&Se.toLowerCase()==="input"&&(ue.type==="checkbox"||ue.type==="radio")&&(ke=iA);if(ke&&(ke=ke(s,Z))){Cx(me,ke,u,de);break e}Ve&&Ve(s,ue,Z),s==="focusout"&&(Ve=ue._wrapperState)&&Ve.controlled&&ue.type==="number"&&be(ue,"number",ue.value)}switch(Ve=Z?ol(Z):window,s){case"focusin":(Nx(Ve)||Ve.contentEditable==="true")&&(nl=Ve,qm=Z,Oc=null);break;case"focusout":Oc=qm=nl=null;break;case"mousedown":Wm=!0;break;case"contextmenu":case"mouseup":case"dragend":Wm=!1,Lx(me,u,de);break;case"selectionchange":if(cA)break;case"keydown":case"keyup":Lx(me,u,de)}var Ue;if(en)e:{switch(s){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else tl?Tx(s,u)&&(He="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(He="onCompositionStart");He&&(Qo&&u.locale!=="ko"&&(tl||He!=="onCompositionStart"?He==="onCompositionEnd"&&tl&&(Ue=Cc()):(dr=de,Ha="value"in dr?dr.value:dr.textContent,tl=!0)),Ve=Fd(Z,He),0<Ve.length&&(He=new jc(He,s,null,u,de),me.push({event:He,listeners:Ve}),Ue?He.data=Ue:(Ue=Sx(u),Ue!==null&&(He.data=Ue)))),(Ue=hr?JI(s,u):ZI(s,u))&&(Z=Fd(Z,"onBeforeInput"),0<Z.length&&(de=new jc("onBeforeInput","beforeinput",null,u,de),me.push({event:de,listeners:Z}),de.data=Ue))}Wx(me,o)})}function Mc(s,o,u){return{instance:s,listener:o,currentTarget:u}}function Fd(s,o){for(var u=o+"Capture",p=[];s!==null;){var x=s,S=x.stateNode;x.tag===5&&S!==null&&(x=S,S=Qt(s,u),S!=null&&p.unshift(Mc(s,S,x)),S=Qt(s,o),S!=null&&p.push(Mc(s,S,x))),s=s.return}return p}function sl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Kx(s,o,u,p,x){for(var S=o._reactName,R=[];u!==null&&u!==p;){var z=u,q=z.alternate,Z=z.stateNode;if(q!==null&&q===p)break;z.tag===5&&Z!==null&&(z=Z,x?(q=Qt(u,S),q!=null&&R.unshift(Mc(u,q,z))):x||(q=Qt(u,S),q!=null&&R.push(Mc(u,q,z)))),u=u.return}R.length!==0&&s.push({event:o,listeners:R})}var fA=/\r\n?/g,mA=/\u0000|\uFFFD/g;function Gx(s){return(typeof s=="string"?s:""+s).replace(fA,`
`).replace(mA,"")}function Vd(s,o,u){if(o=Gx(o),Gx(s)!==o&&u)throw Error(t(425))}function Ud(){}var Xm=null,Jm=null;function Zm(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ep=typeof setTimeout=="function"?setTimeout:void 0,pA=typeof clearTimeout=="function"?clearTimeout:void 0,Qx=typeof Promise=="function"?Promise:void 0,gA=typeof queueMicrotask=="function"?queueMicrotask:typeof Qx<"u"?function(s){return Qx.resolve(null).then(s).catch(vA)}:ep;function vA(s){setTimeout(function(){throw s})}function tp(s,o){var u=o,p=0;do{var x=u.nextSibling;if(s.removeChild(u),x&&x.nodeType===8)if(u=x.data,u==="/$"){if(p===0){s.removeChild(x),$r(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=x}while(u);$r(o)}function ki(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Yx(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var il=Math.random().toString(36).slice(2),ms="__reactFiber$"+il,Fc="__reactProps$"+il,Qs="__reactContainer$"+il,np="__reactEvents$"+il,yA="__reactListeners$"+il,xA="__reactHandles$"+il;function Yo(s){var o=s[ms];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Qs]||u[ms]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=Yx(s);s!==null;){if(u=s[ms])return u;s=Yx(s)}return o}s=u,u=s.parentNode}return null}function Vc(s){return s=s[ms]||s[Qs],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ol(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function zd(s){return s[Fc]||null}var rp=[],al=-1;function Oi(s){return{current:s}}function Pt(s){0>al||(s.current=rp[al],rp[al]=null,al--)}function At(s,o){al++,rp[al]=s.current,s.current=o}var Di={},An=Oi(Di),Jn=Oi(!1),Xo=Di;function ll(s,o){var u=s.type.contextTypes;if(!u)return Di;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var x={},S;for(S in u)x[S]=o[S];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=x),x}function Zn(s){return s=s.childContextTypes,s!=null}function Bd(){Pt(Jn),Pt(An)}function Xx(s,o,u){if(An.current!==Di)throw Error(t(168));At(An,o),At(Jn,u)}function Jx(s,o,u){var p=s.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var x in p)if(!(x in o))throw Error(t(108,ge(s)||"Unknown",x));return ce({},u,p)}function $d(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Di,Xo=An.current,At(An,s),At(Jn,Jn.current),!0}function Zx(s,o,u){var p=s.stateNode;if(!p)throw Error(t(169));u?(s=Jx(s,o,Xo),p.__reactInternalMemoizedMergedChildContext=s,Pt(Jn),Pt(An),At(An,s)):Pt(Jn),At(Jn,u)}var Ys=null,qd=!1,sp=!1;function ew(s){Ys===null?Ys=[s]:Ys.push(s)}function wA(s){qd=!0,ew(s)}function Li(){if(!sp&&Ys!==null){sp=!0;var s=0,o=ut;try{var u=Ys;for(ut=1;s<u.length;s++){var p=u[s];do p=p(!0);while(p!==null)}Ys=null,qd=!1}catch(x){throw Ys!==null&&(Ys=Ys.slice(s+1)),za(Bo,Li),x}finally{ut=o,sp=!1}}return null}var cl=[],ul=0,Wd=null,Hd=0,Tr=[],Sr=0,Jo=null,Xs=1,Js="";function Zo(s,o){cl[ul++]=Hd,cl[ul++]=Wd,Wd=s,Hd=o}function tw(s,o,u){Tr[Sr++]=Xs,Tr[Sr++]=Js,Tr[Sr++]=Jo,Jo=s;var p=Xs;s=Js;var x=32-Bn(p)-1;p&=~(1<<x),u+=1;var S=32-Bn(o)+x;if(30<S){var R=x-x%5;S=(p&(1<<R)-1).toString(32),p>>=R,x-=R,Xs=1<<32-Bn(o)+x|u<<x|p,Js=S+s}else Xs=1<<S|u<<x|p,Js=s}function ip(s){s.return!==null&&(Zo(s,1),tw(s,1,0))}function op(s){for(;s===Wd;)Wd=cl[--ul],cl[ul]=null,Hd=cl[--ul],cl[ul]=null;for(;s===Jo;)Jo=Tr[--Sr],Tr[Sr]=null,Js=Tr[--Sr],Tr[Sr]=null,Xs=Tr[--Sr],Tr[Sr]=null}var fr=null,mr=null,Lt=!1,Hr=null;function nw(s,o){var u=Ar(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function rw(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,fr=s,mr=ki(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,fr=s,mr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Jo!==null?{id:Xs,overflow:Js}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Ar(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,fr=s,mr=null,!0):!1;default:return!1}}function ap(s){return(s.mode&1)!==0&&(s.flags&128)===0}function lp(s){if(Lt){var o=mr;if(o){var u=o;if(!rw(s,o)){if(ap(s))throw Error(t(418));o=ki(u.nextSibling);var p=fr;o&&rw(s,o)?nw(p,u):(s.flags=s.flags&-4097|2,Lt=!1,fr=s)}}else{if(ap(s))throw Error(t(418));s.flags=s.flags&-4097|2,Lt=!1,fr=s}}}function sw(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;fr=s}function Kd(s){if(s!==fr)return!1;if(!Lt)return sw(s),Lt=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!Zm(s.type,s.memoizedProps)),o&&(o=mr)){if(ap(s))throw iw(),Error(t(418));for(;o;)nw(s,o),o=ki(o.nextSibling)}if(sw(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){mr=ki(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}mr=null}}else mr=fr?ki(s.stateNode.nextSibling):null;return!0}function iw(){for(var s=mr;s;)s=ki(s.nextSibling)}function dl(){mr=fr=null,Lt=!1}function cp(s){Hr===null?Hr=[s]:Hr.push(s)}var _A=U.ReactCurrentBatchConfig;function Uc(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,s));var x=p,S=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===S?o.ref:(o=function(R){var z=x.refs;R===null?delete z[S]:z[S]=R},o._stringRef=S,o)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Gd(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function ow(s){var o=s._init;return o(s._payload)}function aw(s){function o(Q,H){if(s){var Y=Q.deletions;Y===null?(Q.deletions=[H],Q.flags|=16):Y.push(H)}}function u(Q,H){if(!s)return null;for(;H!==null;)o(Q,H),H=H.sibling;return null}function p(Q,H){for(Q=new Map;H!==null;)H.key!==null?Q.set(H.key,H):Q.set(H.index,H),H=H.sibling;return Q}function x(Q,H){return Q=qi(Q,H),Q.index=0,Q.sibling=null,Q}function S(Q,H,Y){return Q.index=Y,s?(Y=Q.alternate,Y!==null?(Y=Y.index,Y<H?(Q.flags|=2,H):Y):(Q.flags|=2,H)):(Q.flags|=1048576,H)}function R(Q){return s&&Q.alternate===null&&(Q.flags|=2),Q}function z(Q,H,Y,pe){return H===null||H.tag!==6?(H=eg(Y,Q.mode,pe),H.return=Q,H):(H=x(H,Y),H.return=Q,H)}function q(Q,H,Y,pe){var ke=Y.type;return ke===D?de(Q,H,Y.props.children,pe,Y.key):H!==null&&(H.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===re&&ow(ke)===H.type)?(pe=x(H,Y.props),pe.ref=Uc(Q,H,Y),pe.return=Q,pe):(pe=yh(Y.type,Y.key,Y.props,null,Q.mode,pe),pe.ref=Uc(Q,H,Y),pe.return=Q,pe)}function Z(Q,H,Y,pe){return H===null||H.tag!==4||H.stateNode.containerInfo!==Y.containerInfo||H.stateNode.implementation!==Y.implementation?(H=tg(Y,Q.mode,pe),H.return=Q,H):(H=x(H,Y.children||[]),H.return=Q,H)}function de(Q,H,Y,pe,ke){return H===null||H.tag!==7?(H=aa(Y,Q.mode,pe,ke),H.return=Q,H):(H=x(H,Y),H.return=Q,H)}function me(Q,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return H=eg(""+H,Q.mode,Y),H.return=Q,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case $:return Y=yh(H.type,H.key,H.props,null,Q.mode,Y),Y.ref=Uc(Q,null,H),Y.return=Q,Y;case W:return H=tg(H,Q.mode,Y),H.return=Q,H;case re:var pe=H._init;return me(Q,pe(H._payload),Y)}if(ct(H)||ne(H))return H=aa(H,Q.mode,Y,null),H.return=Q,H;Gd(Q,H)}return null}function ue(Q,H,Y,pe){var ke=H!==null?H.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return ke!==null?null:z(Q,H,""+Y,pe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case $:return Y.key===ke?q(Q,H,Y,pe):null;case W:return Y.key===ke?Z(Q,H,Y,pe):null;case re:return ke=Y._init,ue(Q,H,ke(Y._payload),pe)}if(ct(Y)||ne(Y))return ke!==null?null:de(Q,H,Y,pe,null);Gd(Q,Y)}return null}function Se(Q,H,Y,pe,ke){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Q=Q.get(Y)||null,z(H,Q,""+pe,ke);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case $:return Q=Q.get(pe.key===null?Y:pe.key)||null,q(H,Q,pe,ke);case W:return Q=Q.get(pe.key===null?Y:pe.key)||null,Z(H,Q,pe,ke);case re:var Ve=pe._init;return Se(Q,H,Y,Ve(pe._payload),ke)}if(ct(pe)||ne(pe))return Q=Q.get(Y)||null,de(H,Q,pe,ke,null);Gd(H,pe)}return null}function Pe(Q,H,Y,pe){for(var ke=null,Ve=null,Ue=H,He=H=0,vn=null;Ue!==null&&He<Y.length;He++){Ue.index>He?(vn=Ue,Ue=null):vn=Ue.sibling;var vt=ue(Q,Ue,Y[He],pe);if(vt===null){Ue===null&&(Ue=vn);break}s&&Ue&&vt.alternate===null&&o(Q,Ue),H=S(vt,H,He),Ve===null?ke=vt:Ve.sibling=vt,Ve=vt,Ue=vn}if(He===Y.length)return u(Q,Ue),Lt&&Zo(Q,He),ke;if(Ue===null){for(;He<Y.length;He++)Ue=me(Q,Y[He],pe),Ue!==null&&(H=S(Ue,H,He),Ve===null?ke=Ue:Ve.sibling=Ue,Ve=Ue);return Lt&&Zo(Q,He),ke}for(Ue=p(Q,Ue);He<Y.length;He++)vn=Se(Ue,Q,He,Y[He],pe),vn!==null&&(s&&vn.alternate!==null&&Ue.delete(vn.key===null?He:vn.key),H=S(vn,H,He),Ve===null?ke=vn:Ve.sibling=vn,Ve=vn);return s&&Ue.forEach(function(Wi){return o(Q,Wi)}),Lt&&Zo(Q,He),ke}function Re(Q,H,Y,pe){var ke=ne(Y);if(typeof ke!="function")throw Error(t(150));if(Y=ke.call(Y),Y==null)throw Error(t(151));for(var Ve=ke=null,Ue=H,He=H=0,vn=null,vt=Y.next();Ue!==null&&!vt.done;He++,vt=Y.next()){Ue.index>He?(vn=Ue,Ue=null):vn=Ue.sibling;var Wi=ue(Q,Ue,vt.value,pe);if(Wi===null){Ue===null&&(Ue=vn);break}s&&Ue&&Wi.alternate===null&&o(Q,Ue),H=S(Wi,H,He),Ve===null?ke=Wi:Ve.sibling=Wi,Ve=Wi,Ue=vn}if(vt.done)return u(Q,Ue),Lt&&Zo(Q,He),ke;if(Ue===null){for(;!vt.done;He++,vt=Y.next())vt=me(Q,vt.value,pe),vt!==null&&(H=S(vt,H,He),Ve===null?ke=vt:Ve.sibling=vt,Ve=vt);return Lt&&Zo(Q,He),ke}for(Ue=p(Q,Ue);!vt.done;He++,vt=Y.next())vt=Se(Ue,Q,He,vt.value,pe),vt!==null&&(s&&vt.alternate!==null&&Ue.delete(vt.key===null?He:vt.key),H=S(vt,H,He),Ve===null?ke=vt:Ve.sibling=vt,Ve=vt);return s&&Ue.forEach(function(ej){return o(Q,ej)}),Lt&&Zo(Q,He),ke}function Yt(Q,H,Y,pe){if(typeof Y=="object"&&Y!==null&&Y.type===D&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case $:e:{for(var ke=Y.key,Ve=H;Ve!==null;){if(Ve.key===ke){if(ke=Y.type,ke===D){if(Ve.tag===7){u(Q,Ve.sibling),H=x(Ve,Y.props.children),H.return=Q,Q=H;break e}}else if(Ve.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===re&&ow(ke)===Ve.type){u(Q,Ve.sibling),H=x(Ve,Y.props),H.ref=Uc(Q,Ve,Y),H.return=Q,Q=H;break e}u(Q,Ve);break}else o(Q,Ve);Ve=Ve.sibling}Y.type===D?(H=aa(Y.props.children,Q.mode,pe,Y.key),H.return=Q,Q=H):(pe=yh(Y.type,Y.key,Y.props,null,Q.mode,pe),pe.ref=Uc(Q,H,Y),pe.return=Q,Q=pe)}return R(Q);case W:e:{for(Ve=Y.key;H!==null;){if(H.key===Ve)if(H.tag===4&&H.stateNode.containerInfo===Y.containerInfo&&H.stateNode.implementation===Y.implementation){u(Q,H.sibling),H=x(H,Y.children||[]),H.return=Q,Q=H;break e}else{u(Q,H);break}else o(Q,H);H=H.sibling}H=tg(Y,Q.mode,pe),H.return=Q,Q=H}return R(Q);case re:return Ve=Y._init,Yt(Q,H,Ve(Y._payload),pe)}if(ct(Y))return Pe(Q,H,Y,pe);if(ne(Y))return Re(Q,H,Y,pe);Gd(Q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,H!==null&&H.tag===6?(u(Q,H.sibling),H=x(H,Y),H.return=Q,Q=H):(u(Q,H),H=eg(Y,Q.mode,pe),H.return=Q,Q=H),R(Q)):u(Q,H)}return Yt}var hl=aw(!0),lw=aw(!1),Qd=Oi(null),Yd=null,fl=null,up=null;function dp(){up=fl=Yd=null}function hp(s){var o=Qd.current;Pt(Qd),s._currentValue=o}function fp(s,o,u){for(;s!==null;){var p=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),s===u)break;s=s.return}}function ml(s,o){Yd=s,up=fl=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(er=!0),s.firstContext=null)}function Nr(s){var o=s._currentValue;if(up!==s)if(s={context:s,memoizedValue:o,next:null},fl===null){if(Yd===null)throw Error(t(308));fl=s,Yd.dependencies={lanes:0,firstContext:s}}else fl=fl.next=s;return o}var ea=null;function mp(s){ea===null?ea=[s]:ea.push(s)}function cw(s,o,u,p){var x=o.interleaved;return x===null?(u.next=u,mp(o)):(u.next=x.next,x.next=u),o.interleaved=u,Zs(s,p)}function Zs(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Mi=!1;function pp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uw(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ei(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Fi(s,o,u){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(pt&2)!==0){var x=p.pending;return x===null?o.next=o:(o.next=x.next,x.next=o),p.pending=o,Zs(s,u)}return x=p.interleaved,x===null?(o.next=o,mp(p)):(o.next=x.next,x.next=o),p.interleaved=o,Zs(s,u)}function Xd(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=s.pendingLanes,u|=p,o.lanes=u,Ci(s,u)}}function dw(s,o){var u=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var x=null,S=null;if(u=u.firstBaseUpdate,u!==null){do{var R={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};S===null?x=S=R:S=S.next=R,u=u.next}while(u!==null);S===null?x=S=o:S=S.next=o}else x=S=o;u={baseState:p.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:p.shared,effects:p.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function Jd(s,o,u,p){var x=s.updateQueue;Mi=!1;var S=x.firstBaseUpdate,R=x.lastBaseUpdate,z=x.shared.pending;if(z!==null){x.shared.pending=null;var q=z,Z=q.next;q.next=null,R===null?S=Z:R.next=Z,R=q;var de=s.alternate;de!==null&&(de=de.updateQueue,z=de.lastBaseUpdate,z!==R&&(z===null?de.firstBaseUpdate=Z:z.next=Z,de.lastBaseUpdate=q))}if(S!==null){var me=x.baseState;R=0,de=Z=q=null,z=S;do{var ue=z.lane,Se=z.eventTime;if((p&ue)===ue){de!==null&&(de=de.next={eventTime:Se,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var Pe=s,Re=z;switch(ue=o,Se=u,Re.tag){case 1:if(Pe=Re.payload,typeof Pe=="function"){me=Pe.call(Se,me,ue);break e}me=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Re.payload,ue=typeof Pe=="function"?Pe.call(Se,me,ue):Pe,ue==null)break e;me=ce({},me,ue);break e;case 2:Mi=!0}}z.callback!==null&&z.lane!==0&&(s.flags|=64,ue=x.effects,ue===null?x.effects=[z]:ue.push(z))}else Se={eventTime:Se,lane:ue,tag:z.tag,payload:z.payload,callback:z.callback,next:null},de===null?(Z=de=Se,q=me):de=de.next=Se,R|=ue;if(z=z.next,z===null){if(z=x.shared.pending,z===null)break;ue=z,z=ue.next,ue.next=null,x.lastBaseUpdate=ue,x.shared.pending=null}}while(!0);if(de===null&&(q=me),x.baseState=q,x.firstBaseUpdate=Z,x.lastBaseUpdate=de,o=x.shared.interleaved,o!==null){x=o;do R|=x.lane,x=x.next;while(x!==o)}else S===null&&(x.shared.lanes=0);ra|=R,s.lanes=R,s.memoizedState=me}}function hw(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var p=s[o],x=p.callback;if(x!==null){if(p.callback=null,p=u,typeof x!="function")throw Error(t(191,x));x.call(p)}}}var zc={},ps=Oi(zc),Bc=Oi(zc),$c=Oi(zc);function ta(s){if(s===zc)throw Error(t(174));return s}function gp(s,o){switch(At($c,o),At(Bc,s),At(ps,zc),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:wt(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=wt(o,s)}Pt(ps),At(ps,o)}function pl(){Pt(ps),Pt(Bc),Pt($c)}function fw(s){ta($c.current);var o=ta(ps.current),u=wt(o,s.type);o!==u&&(At(Bc,s),At(ps,u))}function vp(s){Bc.current===s&&(Pt(ps),Pt(Bc))}var Ut=Oi(0);function Zd(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var yp=[];function xp(){for(var s=0;s<yp.length;s++)yp[s]._workInProgressVersionPrimary=null;yp.length=0}var eh=U.ReactCurrentDispatcher,wp=U.ReactCurrentBatchConfig,na=0,zt=null,un=null,pn=null,th=!1,qc=!1,Wc=0,EA=0;function jn(){throw Error(t(321))}function _p(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!Wr(s[u],o[u]))return!1;return!0}function Ep(s,o,u,p,x,S){if(na=S,zt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,eh.current=s===null||s.memoizedState===null?NA:CA,s=u(p,x),qc){S=0;do{if(qc=!1,Wc=0,25<=S)throw Error(t(301));S+=1,pn=un=null,o.updateQueue=null,eh.current=IA,s=u(p,x)}while(qc)}if(eh.current=sh,o=un!==null&&un.next!==null,na=0,pn=un=zt=null,th=!1,o)throw Error(t(300));return s}function bp(){var s=Wc!==0;return Wc=0,s}function gs(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?zt.memoizedState=pn=s:pn=pn.next=s,pn}function Cr(){if(un===null){var s=zt.alternate;s=s!==null?s.memoizedState:null}else s=un.next;var o=pn===null?zt.memoizedState:pn.next;if(o!==null)pn=o,un=s;else{if(s===null)throw Error(t(310));un=s,s={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},pn===null?zt.memoizedState=pn=s:pn=pn.next=s}return pn}function Hc(s,o){return typeof o=="function"?o(s):o}function Tp(s){var o=Cr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=un,x=p.baseQueue,S=u.pending;if(S!==null){if(x!==null){var R=x.next;x.next=S.next,S.next=R}p.baseQueue=x=S,u.pending=null}if(x!==null){S=x.next,p=p.baseState;var z=R=null,q=null,Z=S;do{var de=Z.lane;if((na&de)===de)q!==null&&(q=q.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),p=Z.hasEagerState?Z.eagerState:s(p,Z.action);else{var me={lane:de,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};q===null?(z=q=me,R=p):q=q.next=me,zt.lanes|=de,ra|=de}Z=Z.next}while(Z!==null&&Z!==S);q===null?R=p:q.next=z,Wr(p,o.memoizedState)||(er=!0),o.memoizedState=p,o.baseState=R,o.baseQueue=q,u.lastRenderedState=p}if(s=u.interleaved,s!==null){x=s;do S=x.lane,zt.lanes|=S,ra|=S,x=x.next;while(x!==s)}else x===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Sp(s){var o=Cr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=u.dispatch,x=u.pending,S=o.memoizedState;if(x!==null){u.pending=null;var R=x=x.next;do S=s(S,R.action),R=R.next;while(R!==x);Wr(S,o.memoizedState)||(er=!0),o.memoizedState=S,o.baseQueue===null&&(o.baseState=S),u.lastRenderedState=S}return[S,p]}function mw(){}function pw(s,o){var u=zt,p=Cr(),x=o(),S=!Wr(p.memoizedState,x);if(S&&(p.memoizedState=x,er=!0),p=p.queue,Np(yw.bind(null,u,p,s),[s]),p.getSnapshot!==o||S||pn!==null&&pn.memoizedState.tag&1){if(u.flags|=2048,Kc(9,vw.bind(null,u,p,x,o),void 0,null),gn===null)throw Error(t(349));(na&30)!==0||gw(u,o,x)}return x}function gw(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=zt.updateQueue,o===null?(o={lastEffect:null,stores:null},zt.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function vw(s,o,u,p){o.value=u,o.getSnapshot=p,xw(o)&&ww(s)}function yw(s,o,u){return u(function(){xw(o)&&ww(s)})}function xw(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!Wr(s,u)}catch{return!0}}function ww(s){var o=Zs(s,1);o!==null&&Yr(o,s,1,-1)}function _w(s){var o=gs();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hc,lastRenderedState:s},o.queue=s,s=s.dispatch=SA.bind(null,zt,s),[o.memoizedState,s]}function Kc(s,o,u,p){return s={tag:s,create:o,destroy:u,deps:p,next:null},o=zt.updateQueue,o===null?(o={lastEffect:null,stores:null},zt.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(p=u.next,u.next=s,s.next=p,o.lastEffect=s)),s}function Ew(){return Cr().memoizedState}function nh(s,o,u,p){var x=gs();zt.flags|=s,x.memoizedState=Kc(1|o,u,void 0,p===void 0?null:p)}function rh(s,o,u,p){var x=Cr();p=p===void 0?null:p;var S=void 0;if(un!==null){var R=un.memoizedState;if(S=R.destroy,p!==null&&_p(p,R.deps)){x.memoizedState=Kc(o,u,S,p);return}}zt.flags|=s,x.memoizedState=Kc(1|o,u,S,p)}function bw(s,o){return nh(8390656,8,s,o)}function Np(s,o){return rh(2048,8,s,o)}function Tw(s,o){return rh(4,2,s,o)}function Sw(s,o){return rh(4,4,s,o)}function Nw(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Cw(s,o,u){return u=u!=null?u.concat([s]):null,rh(4,4,Nw.bind(null,o,s),u)}function Cp(){}function Iw(s,o){var u=Cr();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&_p(o,p[1])?p[0]:(u.memoizedState=[s,o],s)}function Aw(s,o){var u=Cr();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&_p(o,p[1])?p[0]:(s=s(),u.memoizedState=[s,o],s)}function jw(s,o,u){return(na&21)===0?(s.baseState&&(s.baseState=!1,er=!0),s.memoizedState=u):(Wr(u,o)||(u=Wo(),zt.lanes|=u,ra|=u,s.baseState=!0),o)}function bA(s,o){var u=ut;ut=u!==0&&4>u?u:4,s(!0);var p=wp.transition;wp.transition={};try{s(!1),o()}finally{ut=u,wp.transition=p}}function Pw(){return Cr().memoizedState}function TA(s,o,u){var p=Bi(s);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},Rw(s))kw(o,u);else if(u=cw(s,o,u,p),u!==null){var x=Wn();Yr(u,s,p,x),Ow(u,o,p)}}function SA(s,o,u){var p=Bi(s),x={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(Rw(s))kw(o,x);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=o.lastRenderedReducer,S!==null))try{var R=o.lastRenderedState,z=S(R,u);if(x.hasEagerState=!0,x.eagerState=z,Wr(z,R)){var q=o.interleaved;q===null?(x.next=x,mp(o)):(x.next=q.next,q.next=x),o.interleaved=x;return}}catch{}finally{}u=cw(s,o,x,p),u!==null&&(x=Wn(),Yr(u,s,p,x),Ow(u,o,p))}}function Rw(s){var o=s.alternate;return s===zt||o!==null&&o===zt}function kw(s,o){qc=th=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function Ow(s,o,u){if((u&4194240)!==0){var p=o.lanes;p&=s.pendingLanes,u|=p,o.lanes=u,Ci(s,u)}}var sh={readContext:Nr,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useInsertionEffect:jn,useLayoutEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useMutableSource:jn,useSyncExternalStore:jn,useId:jn,unstable_isNewReconciler:!1},NA={readContext:Nr,useCallback:function(s,o){return gs().memoizedState=[s,o===void 0?null:o],s},useContext:Nr,useEffect:bw,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,nh(4194308,4,Nw.bind(null,o,s),u)},useLayoutEffect:function(s,o){return nh(4194308,4,s,o)},useInsertionEffect:function(s,o){return nh(4,2,s,o)},useMemo:function(s,o){var u=gs();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var p=gs();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},p.queue=s,s=s.dispatch=TA.bind(null,zt,s),[p.memoizedState,s]},useRef:function(s){var o=gs();return s={current:s},o.memoizedState=s},useState:_w,useDebugValue:Cp,useDeferredValue:function(s){return gs().memoizedState=s},useTransition:function(){var s=_w(!1),o=s[0];return s=bA.bind(null,s[1]),gs().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var p=zt,x=gs();if(Lt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),gn===null)throw Error(t(349));(na&30)!==0||gw(p,o,u)}x.memoizedState=u;var S={value:u,getSnapshot:o};return x.queue=S,bw(yw.bind(null,p,S,s),[s]),p.flags|=2048,Kc(9,vw.bind(null,p,S,u,o),void 0,null),u},useId:function(){var s=gs(),o=gn.identifierPrefix;if(Lt){var u=Js,p=Xs;u=(p&~(1<<32-Bn(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=Wc++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=EA++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},CA={readContext:Nr,useCallback:Iw,useContext:Nr,useEffect:Np,useImperativeHandle:Cw,useInsertionEffect:Tw,useLayoutEffect:Sw,useMemo:Aw,useReducer:Tp,useRef:Ew,useState:function(){return Tp(Hc)},useDebugValue:Cp,useDeferredValue:function(s){var o=Cr();return jw(o,un.memoizedState,s)},useTransition:function(){var s=Tp(Hc)[0],o=Cr().memoizedState;return[s,o]},useMutableSource:mw,useSyncExternalStore:pw,useId:Pw,unstable_isNewReconciler:!1},IA={readContext:Nr,useCallback:Iw,useContext:Nr,useEffect:Np,useImperativeHandle:Cw,useInsertionEffect:Tw,useLayoutEffect:Sw,useMemo:Aw,useReducer:Sp,useRef:Ew,useState:function(){return Sp(Hc)},useDebugValue:Cp,useDeferredValue:function(s){var o=Cr();return un===null?o.memoizedState=s:jw(o,un.memoizedState,s)},useTransition:function(){var s=Sp(Hc)[0],o=Cr().memoizedState;return[s,o]},useMutableSource:mw,useSyncExternalStore:pw,useId:Pw,unstable_isNewReconciler:!1};function Kr(s,o){if(s&&s.defaultProps){o=ce({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function Ip(s,o,u,p){o=s.memoizedState,u=u(p,o),u=u==null?o:ce({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var ih={isMounted:function(s){return(s=s._reactInternals)?Fr(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var p=Wn(),x=Bi(s),S=ei(p,x);S.payload=o,u!=null&&(S.callback=u),o=Fi(s,S,x),o!==null&&(Yr(o,s,x,p),Xd(o,s,x))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var p=Wn(),x=Bi(s),S=ei(p,x);S.tag=1,S.payload=o,u!=null&&(S.callback=u),o=Fi(s,S,x),o!==null&&(Yr(o,s,x,p),Xd(o,s,x))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=Wn(),p=Bi(s),x=ei(u,p);x.tag=2,o!=null&&(x.callback=o),o=Fi(s,x,p),o!==null&&(Yr(o,s,p,u),Xd(o,s,p))}};function Dw(s,o,u,p,x,S,R){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,S,R):o.prototype&&o.prototype.isPureReactComponent?!kc(u,p)||!kc(x,S):!0}function Lw(s,o,u){var p=!1,x=Di,S=o.contextType;return typeof S=="object"&&S!==null?S=Nr(S):(x=Zn(o)?Xo:An.current,p=o.contextTypes,S=(p=p!=null)?ll(s,x):Di),o=new o(u,S),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=ih,s.stateNode=o,o._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=x,s.__reactInternalMemoizedMaskedChildContext=S),o}function Mw(s,o,u,p){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==s&&ih.enqueueReplaceState(o,o.state,null)}function Ap(s,o,u,p){var x=s.stateNode;x.props=u,x.state=s.memoizedState,x.refs={},pp(s);var S=o.contextType;typeof S=="object"&&S!==null?x.context=Nr(S):(S=Zn(o)?Xo:An.current,x.context=ll(s,S)),x.state=s.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(Ip(s,o,S,u),x.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(o=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),o!==x.state&&ih.enqueueReplaceState(x,x.state,null),Jd(s,u,x,p),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308)}function gl(s,o){try{var u="",p=o;do u+=Le(p),p=p.return;while(p);var x=u}catch(S){x=`
Error generating stack: `+S.message+`
`+S.stack}return{value:s,source:o,stack:x,digest:null}}function jp(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function Pp(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var AA=typeof WeakMap=="function"?WeakMap:Map;function Fw(s,o,u){u=ei(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){hh||(hh=!0,Hp=p),Pp(s,o)},u}function Vw(s,o,u){u=ei(-1,u),u.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var x=o.value;u.payload=function(){return p(x)},u.callback=function(){Pp(s,o)}}var S=s.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(u.callback=function(){Pp(s,o),typeof p!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var R=o.stack;this.componentDidCatch(o.value,{componentStack:R!==null?R:""})}),u}function Uw(s,o,u){var p=s.pingCache;if(p===null){p=s.pingCache=new AA;var x=new Set;p.set(o,x)}else x=p.get(o),x===void 0&&(x=new Set,p.set(o,x));x.has(u)||(x.add(u),s=$A.bind(null,s,o,u),o.then(s,s))}function zw(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function Bw(s,o,u,p,x){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ei(-1,1),o.tag=2,Fi(u,o,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=x,s)}var jA=U.ReactCurrentOwner,er=!1;function qn(s,o,u,p){o.child=s===null?lw(o,null,u,p):hl(o,s.child,u,p)}function $w(s,o,u,p,x){u=u.render;var S=o.ref;return ml(o,x),p=Ep(s,o,u,p,S,x),u=bp(),s!==null&&!er?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~x,ti(s,o,x)):(Lt&&u&&ip(o),o.flags|=1,qn(s,o,p,x),o.child)}function qw(s,o,u,p,x){if(s===null){var S=u.type;return typeof S=="function"&&!Zp(S)&&S.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=S,Ww(s,o,S,p,x)):(s=yh(u.type,null,p,o,o.mode,x),s.ref=o.ref,s.return=o,o.child=s)}if(S=s.child,(s.lanes&x)===0){var R=S.memoizedProps;if(u=u.compare,u=u!==null?u:kc,u(R,p)&&s.ref===o.ref)return ti(s,o,x)}return o.flags|=1,s=qi(S,p),s.ref=o.ref,s.return=o,o.child=s}function Ww(s,o,u,p,x){if(s!==null){var S=s.memoizedProps;if(kc(S,p)&&s.ref===o.ref)if(er=!1,o.pendingProps=p=S,(s.lanes&x)!==0)(s.flags&131072)!==0&&(er=!0);else return o.lanes=s.lanes,ti(s,o,x)}return Rp(s,o,u,p,x)}function Hw(s,o,u){var p=o.pendingProps,x=p.children,S=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(yl,pr),pr|=u;else{if((u&1073741824)===0)return s=S!==null?S.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,At(yl,pr),pr|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=S!==null?S.baseLanes:u,At(yl,pr),pr|=p}else S!==null?(p=S.baseLanes|u,o.memoizedState=null):p=u,At(yl,pr),pr|=p;return qn(s,o,x,u),o.child}function Kw(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Rp(s,o,u,p,x){var S=Zn(u)?Xo:An.current;return S=ll(o,S),ml(o,x),u=Ep(s,o,u,p,S,x),p=bp(),s!==null&&!er?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~x,ti(s,o,x)):(Lt&&p&&ip(o),o.flags|=1,qn(s,o,u,x),o.child)}function Gw(s,o,u,p,x){if(Zn(u)){var S=!0;$d(o)}else S=!1;if(ml(o,x),o.stateNode===null)ah(s,o),Lw(o,u,p),Ap(o,u,p,x),p=!0;else if(s===null){var R=o.stateNode,z=o.memoizedProps;R.props=z;var q=R.context,Z=u.contextType;typeof Z=="object"&&Z!==null?Z=Nr(Z):(Z=Zn(u)?Xo:An.current,Z=ll(o,Z));var de=u.getDerivedStateFromProps,me=typeof de=="function"||typeof R.getSnapshotBeforeUpdate=="function";me||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(z!==p||q!==Z)&&Mw(o,R,p,Z),Mi=!1;var ue=o.memoizedState;R.state=ue,Jd(o,p,R,x),q=o.memoizedState,z!==p||ue!==q||Jn.current||Mi?(typeof de=="function"&&(Ip(o,u,de,p),q=o.memoizedState),(z=Mi||Dw(o,u,z,p,ue,q,Z))?(me||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(o.flags|=4194308)):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=q),R.props=p,R.state=q,R.context=Z,p=z):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{R=o.stateNode,uw(s,o),z=o.memoizedProps,Z=o.type===o.elementType?z:Kr(o.type,z),R.props=Z,me=o.pendingProps,ue=R.context,q=u.contextType,typeof q=="object"&&q!==null?q=Nr(q):(q=Zn(u)?Xo:An.current,q=ll(o,q));var Se=u.getDerivedStateFromProps;(de=typeof Se=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(z!==me||ue!==q)&&Mw(o,R,p,q),Mi=!1,ue=o.memoizedState,R.state=ue,Jd(o,p,R,x);var Pe=o.memoizedState;z!==me||ue!==Pe||Jn.current||Mi?(typeof Se=="function"&&(Ip(o,u,Se,p),Pe=o.memoizedState),(Z=Mi||Dw(o,u,Z,p,ue,Pe,q)||!1)?(de||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(p,Pe,q),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(p,Pe,q)),typeof R.componentDidUpdate=="function"&&(o.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof R.componentDidUpdate!="function"||z===s.memoizedProps&&ue===s.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&ue===s.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=Pe),R.props=p,R.state=Pe,R.context=q,p=Z):(typeof R.componentDidUpdate!="function"||z===s.memoizedProps&&ue===s.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||z===s.memoizedProps&&ue===s.memoizedState||(o.flags|=1024),p=!1)}return kp(s,o,u,p,S,x)}function kp(s,o,u,p,x,S){Kw(s,o);var R=(o.flags&128)!==0;if(!p&&!R)return x&&Zx(o,u,!1),ti(s,o,S);p=o.stateNode,jA.current=o;var z=R&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,s!==null&&R?(o.child=hl(o,s.child,null,S),o.child=hl(o,null,z,S)):qn(s,o,z,S),o.memoizedState=p.state,x&&Zx(o,u,!0),o.child}function Qw(s){var o=s.stateNode;o.pendingContext?Xx(s,o.pendingContext,o.pendingContext!==o.context):o.context&&Xx(s,o.context,!1),gp(s,o.containerInfo)}function Yw(s,o,u,p,x){return dl(),cp(x),o.flags|=256,qn(s,o,u,p),o.child}var Op={dehydrated:null,treeContext:null,retryLane:0};function Dp(s){return{baseLanes:s,cachePool:null,transitions:null}}function Xw(s,o,u){var p=o.pendingProps,x=Ut.current,S=!1,R=(o.flags&128)!==0,z;if((z=R)||(z=s!==null&&s.memoizedState===null?!1:(x&2)!==0),z?(S=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(x|=1),At(Ut,x&1),s===null)return lp(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(R=p.children,s=p.fallback,S?(p=o.mode,S=o.child,R={mode:"hidden",children:R},(p&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=R):S=xh(R,p,0,null),s=aa(s,p,u,null),S.return=o,s.return=o,S.sibling=s,o.child=S,o.child.memoizedState=Dp(u),o.memoizedState=Op,s):Lp(o,R));if(x=s.memoizedState,x!==null&&(z=x.dehydrated,z!==null))return PA(s,o,R,p,z,x,u);if(S){S=p.fallback,R=o.mode,x=s.child,z=x.sibling;var q={mode:"hidden",children:p.children};return(R&1)===0&&o.child!==x?(p=o.child,p.childLanes=0,p.pendingProps=q,o.deletions=null):(p=qi(x,q),p.subtreeFlags=x.subtreeFlags&14680064),z!==null?S=qi(z,S):(S=aa(S,R,u,null),S.flags|=2),S.return=o,p.return=o,p.sibling=S,o.child=p,p=S,S=o.child,R=s.child.memoizedState,R=R===null?Dp(u):{baseLanes:R.baseLanes|u,cachePool:null,transitions:R.transitions},S.memoizedState=R,S.childLanes=s.childLanes&~u,o.memoizedState=Op,p}return S=s.child,s=S.sibling,p=qi(S,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=u),p.return=o,p.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=p,o.memoizedState=null,p}function Lp(s,o){return o=xh({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function oh(s,o,u,p){return p!==null&&cp(p),hl(o,s.child,null,u),s=Lp(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function PA(s,o,u,p,x,S,R){if(u)return o.flags&256?(o.flags&=-257,p=jp(Error(t(422))),oh(s,o,R,p)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(S=p.fallback,x=o.mode,p=xh({mode:"visible",children:p.children},x,0,null),S=aa(S,x,R,null),S.flags|=2,p.return=o,S.return=o,p.sibling=S,o.child=p,(o.mode&1)!==0&&hl(o,s.child,null,R),o.child.memoizedState=Dp(R),o.memoizedState=Op,S);if((o.mode&1)===0)return oh(s,o,R,null);if(x.data==="$!"){if(p=x.nextSibling&&x.nextSibling.dataset,p)var z=p.dgst;return p=z,S=Error(t(419)),p=jp(S,p,void 0),oh(s,o,R,p)}if(z=(R&s.childLanes)!==0,er||z){if(p=gn,p!==null){switch(R&-R){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(p.suspendedLanes|R))!==0?0:x,x!==0&&x!==S.retryLane&&(S.retryLane=x,Zs(s,x),Yr(p,s,x,-1))}return Jp(),p=jp(Error(t(421))),oh(s,o,R,p)}return x.data==="$?"?(o.flags|=128,o.child=s.child,o=qA.bind(null,s),x._reactRetry=o,null):(s=S.treeContext,mr=ki(x.nextSibling),fr=o,Lt=!0,Hr=null,s!==null&&(Tr[Sr++]=Xs,Tr[Sr++]=Js,Tr[Sr++]=Jo,Xs=s.id,Js=s.overflow,Jo=o),o=Lp(o,p.children),o.flags|=4096,o)}function Jw(s,o,u){s.lanes|=o;var p=s.alternate;p!==null&&(p.lanes|=o),fp(s.return,o,u)}function Mp(s,o,u,p,x){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:x}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=p,S.tail=u,S.tailMode=x)}function Zw(s,o,u){var p=o.pendingProps,x=p.revealOrder,S=p.tail;if(qn(s,o,p.children,u),p=Ut.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Jw(s,u,o);else if(s.tag===19)Jw(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(At(Ut,p),(o.mode&1)===0)o.memoizedState=null;else switch(x){case"forwards":for(u=o.child,x=null;u!==null;)s=u.alternate,s!==null&&Zd(s)===null&&(x=u),u=u.sibling;u=x,u===null?(x=o.child,o.child=null):(x=u.sibling,u.sibling=null),Mp(o,!1,x,u,S);break;case"backwards":for(u=null,x=o.child,o.child=null;x!==null;){if(s=x.alternate,s!==null&&Zd(s)===null){o.child=x;break}s=x.sibling,x.sibling=u,u=x,x=s}Mp(o,!0,u,null,S);break;case"together":Mp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ah(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function ti(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),ra|=o.lanes,(u&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,u=qi(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=qi(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function RA(s,o,u){switch(o.tag){case 3:Qw(o),dl();break;case 5:fw(o);break;case 1:Zn(o.type)&&$d(o);break;case 4:gp(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,x=o.memoizedProps.value;At(Qd,p._currentValue),p._currentValue=x;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(At(Ut,Ut.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Xw(s,o,u):(At(Ut,Ut.current&1),s=ti(s,o,u),s!==null?s.sibling:null);At(Ut,Ut.current&1);break;case 19:if(p=(u&o.childLanes)!==0,(s.flags&128)!==0){if(p)return Zw(s,o,u);o.flags|=128}if(x=o.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),At(Ut,Ut.current),p)break;return null;case 22:case 23:return o.lanes=0,Hw(s,o,u)}return ti(s,o,u)}var e0,Fp,t0,n0;e0=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Fp=function(){},t0=function(s,o,u,p){var x=s.memoizedProps;if(x!==p){s=o.stateNode,ta(ps.current);var S=null;switch(u){case"input":x=Ye(s,x),p=Ye(s,p),S=[];break;case"select":x=ce({},x,{value:void 0}),p=ce({},p,{value:void 0}),S=[];break;case"textarea":x=lr(s,x),p=lr(s,p),S=[];break;default:typeof x.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=Ud)}Qn(u,p);var R;u=null;for(Z in x)if(!p.hasOwnProperty(Z)&&x.hasOwnProperty(Z)&&x[Z]!=null)if(Z==="style"){var z=x[Z];for(R in z)z.hasOwnProperty(R)&&(u||(u={}),u[R]="")}else Z!=="dangerouslySetInnerHTML"&&Z!=="children"&&Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(i.hasOwnProperty(Z)?S||(S=[]):(S=S||[]).push(Z,null));for(Z in p){var q=p[Z];if(z=x!=null?x[Z]:void 0,p.hasOwnProperty(Z)&&q!==z&&(q!=null||z!=null))if(Z==="style")if(z){for(R in z)!z.hasOwnProperty(R)||q&&q.hasOwnProperty(R)||(u||(u={}),u[R]="");for(R in q)q.hasOwnProperty(R)&&z[R]!==q[R]&&(u||(u={}),u[R]=q[R])}else u||(S||(S=[]),S.push(Z,u)),u=q;else Z==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,z=z?z.__html:void 0,q!=null&&z!==q&&(S=S||[]).push(Z,q)):Z==="children"?typeof q!="string"&&typeof q!="number"||(S=S||[]).push(Z,""+q):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&(i.hasOwnProperty(Z)?(q!=null&&Z==="onScroll"&&jt("scroll",s),S||z===q||(S=[])):(S=S||[]).push(Z,q))}u&&(S=S||[]).push("style",u);var Z=S;(o.updateQueue=Z)&&(o.flags|=4)}},n0=function(s,o,u,p){u!==p&&(o.flags|=4)};function Gc(s,o){if(!Lt)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Pn(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,p=0;if(o)for(var x=s.child;x!==null;)u|=x.lanes|x.childLanes,p|=x.subtreeFlags&14680064,p|=x.flags&14680064,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)u|=x.lanes|x.childLanes,p|=x.subtreeFlags,p|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=p,s.childLanes=u,o}function kA(s,o,u){var p=o.pendingProps;switch(op(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(o),null;case 1:return Zn(o.type)&&Bd(),Pn(o),null;case 3:return p=o.stateNode,pl(),Pt(Jn),Pt(An),xp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Kd(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Hr!==null&&(Qp(Hr),Hr=null))),Fp(s,o),Pn(o),null;case 5:vp(o);var x=ta($c.current);if(u=o.type,s!==null&&o.stateNode!=null)t0(s,o,u,p,x),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return Pn(o),null}if(s=ta(ps.current),Kd(o)){p=o.stateNode,u=o.type;var S=o.memoizedProps;switch(p[ms]=o,p[Fc]=S,s=(o.mode&1)!==0,u){case"dialog":jt("cancel",p),jt("close",p);break;case"iframe":case"object":case"embed":jt("load",p);break;case"video":case"audio":for(x=0;x<Dc.length;x++)jt(Dc[x],p);break;case"source":jt("error",p);break;case"img":case"image":case"link":jt("error",p),jt("load",p);break;case"details":jt("toggle",p);break;case"input":qt(p,S),jt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!S.multiple},jt("invalid",p);break;case"textarea":In(p,S),jt("invalid",p)}Qn(u,S),x=null;for(var R in S)if(S.hasOwnProperty(R)){var z=S[R];R==="children"?typeof z=="string"?p.textContent!==z&&(S.suppressHydrationWarning!==!0&&Vd(p.textContent,z,s),x=["children",z]):typeof z=="number"&&p.textContent!==""+z&&(S.suppressHydrationWarning!==!0&&Vd(p.textContent,z,s),x=["children",""+z]):i.hasOwnProperty(R)&&z!=null&&R==="onScroll"&&jt("scroll",p)}switch(u){case"input":tt(p),Un(p,S,!0);break;case"textarea":tt(p),kr(p);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(p.onclick=Ud)}p=x,o.updateQueue=p,p!==null&&(o.flags|=4)}else{R=x.nodeType===9?x:x.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Ct(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=R.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=R.createElement(u,{is:p.is}):(s=R.createElement(u),u==="select"&&(R=s,p.multiple?R.multiple=!0:p.size&&(R.size=p.size))):s=R.createElementNS(s,u),s[ms]=o,s[Fc]=p,e0(s,o,!1,!1),o.stateNode=s;e:{switch(R=Mo(u,p),u){case"dialog":jt("cancel",s),jt("close",s),x=p;break;case"iframe":case"object":case"embed":jt("load",s),x=p;break;case"video":case"audio":for(x=0;x<Dc.length;x++)jt(Dc[x],s);x=p;break;case"source":jt("error",s),x=p;break;case"img":case"image":case"link":jt("error",s),jt("load",s),x=p;break;case"details":jt("toggle",s),x=p;break;case"input":qt(s,p),x=Ye(s,p),jt("invalid",s);break;case"option":x=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},x=ce({},p,{value:void 0}),jt("invalid",s);break;case"textarea":In(s,p),x=lr(s,p),jt("invalid",s);break;default:x=p}Qn(u,x),z=x;for(S in z)if(z.hasOwnProperty(S)){var q=z[S];S==="style"?Lo(s,q):S==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&bt(s,q)):S==="children"?typeof q=="string"?(u!=="textarea"||q!=="")&&Or(s,q):typeof q=="number"&&Or(s,""+q):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?q!=null&&S==="onScroll"&&jt("scroll",s):q!=null&&O(s,S,q,R))}switch(u){case"input":tt(s),Un(s,p,!1);break;case"textarea":tt(s),kr(s);break;case"option":p.value!=null&&s.setAttribute("value",""+_e(p.value));break;case"select":s.multiple=!!p.multiple,S=p.value,S!=null?wn(s,!!p.multiple,S,!1):p.defaultValue!=null&&wn(s,!!p.multiple,p.defaultValue,!0);break;default:typeof x.onClick=="function"&&(s.onclick=Ud)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Pn(o),null;case 6:if(s&&o.stateNode!=null)n0(s,o,s.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(u=ta($c.current),ta(ps.current),Kd(o)){if(p=o.stateNode,u=o.memoizedProps,p[ms]=o,(S=p.nodeValue!==u)&&(s=fr,s!==null))switch(s.tag){case 3:Vd(p.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Vd(p.nodeValue,u,(s.mode&1)!==0)}S&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[ms]=o,o.stateNode=p}return Pn(o),null;case 13:if(Pt(Ut),p=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Lt&&mr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)iw(),dl(),o.flags|=98560,S=!1;else if(S=Kd(o),p!==null&&p.dehydrated!==null){if(s===null){if(!S)throw Error(t(318));if(S=o.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(t(317));S[ms]=o}else dl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Pn(o),S=!1}else Hr!==null&&(Qp(Hr),Hr=null),S=!0;if(!S)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(Ut.current&1)!==0?dn===0&&(dn=3):Jp())),o.updateQueue!==null&&(o.flags|=4),Pn(o),null);case 4:return pl(),Fp(s,o),s===null&&Lc(o.stateNode.containerInfo),Pn(o),null;case 10:return hp(o.type._context),Pn(o),null;case 17:return Zn(o.type)&&Bd(),Pn(o),null;case 19:if(Pt(Ut),S=o.memoizedState,S===null)return Pn(o),null;if(p=(o.flags&128)!==0,R=S.rendering,R===null)if(p)Gc(S,!1);else{if(dn!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(R=Zd(s),R!==null){for(o.flags|=128,Gc(S,!1),p=R.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)S=u,s=p,S.flags&=14680066,R=S.alternate,R===null?(S.childLanes=0,S.lanes=s,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=R.childLanes,S.lanes=R.lanes,S.child=R.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=R.memoizedProps,S.memoizedState=R.memoizedState,S.updateQueue=R.updateQueue,S.type=R.type,s=R.dependencies,S.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return At(Ut,Ut.current&1|2),o.child}s=s.sibling}S.tail!==null&&It()>xl&&(o.flags|=128,p=!0,Gc(S,!1),o.lanes=4194304)}else{if(!p)if(s=Zd(R),s!==null){if(o.flags|=128,p=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Gc(S,!0),S.tail===null&&S.tailMode==="hidden"&&!R.alternate&&!Lt)return Pn(o),null}else 2*It()-S.renderingStartTime>xl&&u!==1073741824&&(o.flags|=128,p=!0,Gc(S,!1),o.lanes=4194304);S.isBackwards?(R.sibling=o.child,o.child=R):(u=S.last,u!==null?u.sibling=R:o.child=R,S.last=R)}return S.tail!==null?(o=S.tail,S.rendering=o,S.tail=o.sibling,S.renderingStartTime=It(),o.sibling=null,u=Ut.current,At(Ut,p?u&1|2:u&1),o):(Pn(o),null);case 22:case 23:return Xp(),p=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(pr&1073741824)!==0&&(Pn(o),o.subtreeFlags&6&&(o.flags|=8192)):Pn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function OA(s,o){switch(op(o),o.tag){case 1:return Zn(o.type)&&Bd(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return pl(),Pt(Jn),Pt(An),xp(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return vp(o),null;case 13:if(Pt(Ut),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));dl()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Pt(Ut),null;case 4:return pl(),null;case 10:return hp(o.type._context),null;case 22:case 23:return Xp(),null;case 24:return null;default:return null}}var lh=!1,Rn=!1,DA=typeof WeakSet=="function"?WeakSet:Set,je=null;function vl(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){Ht(s,o,p)}else u.current=null}function Vp(s,o,u){try{u()}catch(p){Ht(s,o,p)}}var r0=!1;function LA(s,o){if(Xm=ji,s=Dx(),$m(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var x=p.anchorOffset,S=p.focusNode;p=p.focusOffset;try{u.nodeType,S.nodeType}catch{u=null;break e}var R=0,z=-1,q=-1,Z=0,de=0,me=s,ue=null;t:for(;;){for(var Se;me!==u||x!==0&&me.nodeType!==3||(z=R+x),me!==S||p!==0&&me.nodeType!==3||(q=R+p),me.nodeType===3&&(R+=me.nodeValue.length),(Se=me.firstChild)!==null;)ue=me,me=Se;for(;;){if(me===s)break t;if(ue===u&&++Z===x&&(z=R),ue===S&&++de===p&&(q=R),(Se=me.nextSibling)!==null)break;me=ue,ue=me.parentNode}me=Se}u=z===-1||q===-1?null:{start:z,end:q}}else u=null}u=u||{start:0,end:0}}else u=null;for(Jm={focusedElem:s,selectionRange:u},ji=!1,je=o;je!==null;)if(o=je,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,je=s;else for(;je!==null;){o=je;try{var Pe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Re=Pe.memoizedProps,Yt=Pe.memoizedState,Q=o.stateNode,H=Q.getSnapshotBeforeUpdate(o.elementType===o.type?Re:Kr(o.type,Re),Yt);Q.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var Y=o.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(pe){Ht(o,o.return,pe)}if(s=o.sibling,s!==null){s.return=o.return,je=s;break}je=o.return}return Pe=r0,r0=!1,Pe}function Qc(s,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var x=p=p.next;do{if((x.tag&s)===s){var S=x.destroy;x.destroy=void 0,S!==void 0&&Vp(o,u,S)}x=x.next}while(x!==p)}}function ch(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function Up(s){var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof o=="function"?o(s):o.current=s}}function s0(s){var o=s.alternate;o!==null&&(s.alternate=null,s0(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[ms],delete o[Fc],delete o[np],delete o[yA],delete o[xA])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function i0(s){return s.tag===5||s.tag===3||s.tag===4}function o0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||i0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function zp(s,o,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ud));else if(p!==4&&(s=s.child,s!==null))for(zp(s,o,u),s=s.sibling;s!==null;)zp(s,o,u),s=s.sibling}function Bp(s,o,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(Bp(s,o,u),s=s.sibling;s!==null;)Bp(s,o,u),s=s.sibling}var bn=null,Gr=!1;function Vi(s,o,u){for(u=u.child;u!==null;)a0(s,o,u),u=u.sibling}function a0(s,o,u){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount($o,u)}catch{}switch(u.tag){case 5:Rn||vl(u,o);case 6:var p=bn,x=Gr;bn=null,Vi(s,o,u),bn=p,Gr=x,bn!==null&&(Gr?(s=bn,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):bn.removeChild(u.stateNode));break;case 18:bn!==null&&(Gr?(s=bn,u=u.stateNode,s.nodeType===8?tp(s.parentNode,u):s.nodeType===1&&tp(s,u),$r(s)):tp(bn,u.stateNode));break;case 4:p=bn,x=Gr,bn=u.stateNode.containerInfo,Gr=!0,Vi(s,o,u),bn=p,Gr=x;break;case 0:case 11:case 14:case 15:if(!Rn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){x=p=p.next;do{var S=x,R=S.destroy;S=S.tag,R!==void 0&&((S&2)!==0||(S&4)!==0)&&Vp(u,o,R),x=x.next}while(x!==p)}Vi(s,o,u);break;case 1:if(!Rn&&(vl(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(z){Ht(u,o,z)}Vi(s,o,u);break;case 21:Vi(s,o,u);break;case 22:u.mode&1?(Rn=(p=Rn)||u.memoizedState!==null,Vi(s,o,u),Rn=p):Vi(s,o,u);break;default:Vi(s,o,u)}}function l0(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new DA),o.forEach(function(p){var x=WA.bind(null,s,p);u.has(p)||(u.add(p),p.then(x,x))})}}function Qr(s,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var x=u[p];try{var S=s,R=o,z=R;e:for(;z!==null;){switch(z.tag){case 5:bn=z.stateNode,Gr=!1;break e;case 3:bn=z.stateNode.containerInfo,Gr=!0;break e;case 4:bn=z.stateNode.containerInfo,Gr=!0;break e}z=z.return}if(bn===null)throw Error(t(160));a0(S,R,x),bn=null,Gr=!1;var q=x.alternate;q!==null&&(q.return=null),x.return=null}catch(Z){Ht(x,o,Z)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)c0(o,s),o=o.sibling}function c0(s,o){var u=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Qr(o,s),vs(s),p&4){try{Qc(3,s,s.return),ch(3,s)}catch(Re){Ht(s,s.return,Re)}try{Qc(5,s,s.return)}catch(Re){Ht(s,s.return,Re)}}break;case 1:Qr(o,s),vs(s),p&512&&u!==null&&vl(u,u.return);break;case 5:if(Qr(o,s),vs(s),p&512&&u!==null&&vl(u,u.return),s.flags&32){var x=s.stateNode;try{Or(x,"")}catch(Re){Ht(s,s.return,Re)}}if(p&4&&(x=s.stateNode,x!=null)){var S=s.memoizedProps,R=u!==null?u.memoizedProps:S,z=s.type,q=s.updateQueue;if(s.updateQueue=null,q!==null)try{z==="input"&&S.type==="radio"&&S.name!=null&&Ot(x,S),Mo(z,R);var Z=Mo(z,S);for(R=0;R<q.length;R+=2){var de=q[R],me=q[R+1];de==="style"?Lo(x,me):de==="dangerouslySetInnerHTML"?bt(x,me):de==="children"?Or(x,me):O(x,de,me,Z)}switch(z){case"input":Fe(x,S);break;case"textarea":Wt(x,S);break;case"select":var ue=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!S.multiple;var Se=S.value;Se!=null?wn(x,!!S.multiple,Se,!1):ue!==!!S.multiple&&(S.defaultValue!=null?wn(x,!!S.multiple,S.defaultValue,!0):wn(x,!!S.multiple,S.multiple?[]:"",!1))}x[Fc]=S}catch(Re){Ht(s,s.return,Re)}}break;case 6:if(Qr(o,s),vs(s),p&4){if(s.stateNode===null)throw Error(t(162));x=s.stateNode,S=s.memoizedProps;try{x.nodeValue=S}catch(Re){Ht(s,s.return,Re)}}break;case 3:if(Qr(o,s),vs(s),p&4&&u!==null&&u.memoizedState.isDehydrated)try{$r(o.containerInfo)}catch(Re){Ht(s,s.return,Re)}break;case 4:Qr(o,s),vs(s);break;case 13:Qr(o,s),vs(s),x=s.child,x.flags&8192&&(S=x.memoizedState!==null,x.stateNode.isHidden=S,!S||x.alternate!==null&&x.alternate.memoizedState!==null||(Wp=It())),p&4&&l0(s);break;case 22:if(de=u!==null&&u.memoizedState!==null,s.mode&1?(Rn=(Z=Rn)||de,Qr(o,s),Rn=Z):Qr(o,s),vs(s),p&8192){if(Z=s.memoizedState!==null,(s.stateNode.isHidden=Z)&&!de&&(s.mode&1)!==0)for(je=s,de=s.child;de!==null;){for(me=je=de;je!==null;){switch(ue=je,Se=ue.child,ue.tag){case 0:case 11:case 14:case 15:Qc(4,ue,ue.return);break;case 1:vl(ue,ue.return);var Pe=ue.stateNode;if(typeof Pe.componentWillUnmount=="function"){p=ue,u=ue.return;try{o=p,Pe.props=o.memoizedProps,Pe.state=o.memoizedState,Pe.componentWillUnmount()}catch(Re){Ht(p,u,Re)}}break;case 5:vl(ue,ue.return);break;case 22:if(ue.memoizedState!==null){h0(me);continue}}Se!==null?(Se.return=ue,je=Se):h0(me)}de=de.sibling}e:for(de=null,me=s;;){if(me.tag===5){if(de===null){de=me;try{x=me.stateNode,Z?(S=x.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(z=me.stateNode,q=me.memoizedProps.style,R=q!=null&&q.hasOwnProperty("display")?q.display:null,z.style.display=Ei("display",R))}catch(Re){Ht(s,s.return,Re)}}}else if(me.tag===6){if(de===null)try{me.stateNode.nodeValue=Z?"":me.memoizedProps}catch(Re){Ht(s,s.return,Re)}}else if((me.tag!==22&&me.tag!==23||me.memoizedState===null||me===s)&&me.child!==null){me.child.return=me,me=me.child;continue}if(me===s)break e;for(;me.sibling===null;){if(me.return===null||me.return===s)break e;de===me&&(de=null),me=me.return}de===me&&(de=null),me.sibling.return=me.return,me=me.sibling}}break;case 19:Qr(o,s),vs(s),p&4&&l0(s);break;case 21:break;default:Qr(o,s),vs(s)}}function vs(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if(i0(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var x=p.stateNode;p.flags&32&&(Or(x,""),p.flags&=-33);var S=o0(s);Bp(s,S,x);break;case 3:case 4:var R=p.stateNode.containerInfo,z=o0(s);zp(s,z,R);break;default:throw Error(t(161))}}catch(q){Ht(s,s.return,q)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function MA(s,o,u){je=s,u0(s)}function u0(s,o,u){for(var p=(s.mode&1)!==0;je!==null;){var x=je,S=x.child;if(x.tag===22&&p){var R=x.memoizedState!==null||lh;if(!R){var z=x.alternate,q=z!==null&&z.memoizedState!==null||Rn;z=lh;var Z=Rn;if(lh=R,(Rn=q)&&!Z)for(je=x;je!==null;)R=je,q=R.child,R.tag===22&&R.memoizedState!==null?f0(x):q!==null?(q.return=R,je=q):f0(x);for(;S!==null;)je=S,u0(S),S=S.sibling;je=x,lh=z,Rn=Z}d0(s)}else(x.subtreeFlags&8772)!==0&&S!==null?(S.return=x,je=S):d0(s)}}function d0(s){for(;je!==null;){var o=je;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Rn||ch(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!Rn)if(u===null)p.componentDidMount();else{var x=o.elementType===o.type?u.memoizedProps:Kr(o.type,u.memoizedProps);p.componentDidUpdate(x,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var S=o.updateQueue;S!==null&&hw(o,S,p);break;case 3:var R=o.updateQueue;if(R!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}hw(o,R,u)}break;case 5:var z=o.stateNode;if(u===null&&o.flags&4){u=z;var q=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":q.autoFocus&&u.focus();break;case"img":q.src&&(u.src=q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Z=o.alternate;if(Z!==null){var de=Z.memoizedState;if(de!==null){var me=de.dehydrated;me!==null&&$r(me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Rn||o.flags&512&&Up(o)}catch(ue){Ht(o,o.return,ue)}}if(o===s){je=null;break}if(u=o.sibling,u!==null){u.return=o.return,je=u;break}je=o.return}}function h0(s){for(;je!==null;){var o=je;if(o===s){je=null;break}var u=o.sibling;if(u!==null){u.return=o.return,je=u;break}je=o.return}}function f0(s){for(;je!==null;){var o=je;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{ch(4,o)}catch(q){Ht(o,u,q)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var x=o.return;try{p.componentDidMount()}catch(q){Ht(o,x,q)}}var S=o.return;try{Up(o)}catch(q){Ht(o,S,q)}break;case 5:var R=o.return;try{Up(o)}catch(q){Ht(o,R,q)}}}catch(q){Ht(o,o.return,q)}if(o===s){je=null;break}var z=o.sibling;if(z!==null){z.return=o.return,je=z;break}je=o.return}}var FA=Math.ceil,uh=U.ReactCurrentDispatcher,$p=U.ReactCurrentOwner,Ir=U.ReactCurrentBatchConfig,pt=0,gn=null,tn=null,Tn=0,pr=0,yl=Oi(0),dn=0,Yc=null,ra=0,dh=0,qp=0,Xc=null,tr=null,Wp=0,xl=1/0,ni=null,hh=!1,Hp=null,Ui=null,fh=!1,zi=null,mh=0,Jc=0,Kp=null,ph=-1,gh=0;function Wn(){return(pt&6)!==0?It():ph!==-1?ph:ph=It()}function Bi(s){return(s.mode&1)===0?1:(pt&2)!==0&&Tn!==0?Tn&-Tn:_A.transition!==null?(gh===0&&(gh=Wo()),gh):(s=ut,s!==0||(s=window.event,s=s===void 0?16:Nc(s.type)),s)}function Yr(s,o,u,p){if(50<Jc)throw Jc=0,Kp=null,Error(t(185));Ni(s,u,p),((pt&2)===0||s!==gn)&&(s===gn&&((pt&2)===0&&(dh|=u),dn===4&&$i(s,Tn)),nr(s,p),u===1&&pt===0&&(o.mode&1)===0&&(xl=It()+500,qd&&Li()))}function nr(s,o){var u=s.callbackNode;qs(s,o);var p=qo(s,s===gn?Tn:0);if(p===0)u!==null&&_c(u),s.callbackNode=null,s.callbackPriority=0;else if(o=p&-p,s.callbackPriority!==o){if(u!=null&&_c(u),o===1)s.tag===0?wA(p0.bind(null,s)):ew(p0.bind(null,s)),gA(function(){(pt&6)===0&&Li()}),u=null;else{switch(Ii(p)){case 1:u=Bo;break;case 4:u=bi;break;case 16:u=_r;break;case 536870912:u=gd;break;default:u=_r}u=b0(u,m0.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function m0(s,o){if(ph=-1,gh=0,(pt&6)!==0)throw Error(t(327));var u=s.callbackNode;if(wl()&&s.callbackNode!==u)return null;var p=qo(s,s===gn?Tn:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||o)o=vh(s,p);else{o=p;var x=pt;pt|=2;var S=v0();(gn!==s||Tn!==o)&&(ni=null,xl=It()+500,ia(s,o));do try{zA();break}catch(z){g0(s,z)}while(!0);dp(),uh.current=S,pt=x,tn!==null?o=0:(gn=null,Tn=0,o=dn)}if(o!==0){if(o===2&&(x=ur(s),x!==0&&(p=x,o=Gp(s,x))),o===1)throw u=Yc,ia(s,0),$i(s,p),nr(s,It()),u;if(o===6)$i(s,p);else{if(x=s.current.alternate,(p&30)===0&&!VA(x)&&(o=vh(s,p),o===2&&(S=ur(s),S!==0&&(p=S,o=Gp(s,S))),o===1))throw u=Yc,ia(s,0),$i(s,p),nr(s,It()),u;switch(s.finishedWork=x,s.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:oa(s,tr,ni);break;case 3:if($i(s,p),(p&130023424)===p&&(o=Wp+500-It(),10<o)){if(qo(s,0)!==0)break;if(x=s.suspendedLanes,(x&p)!==p){Wn(),s.pingedLanes|=s.suspendedLanes&x;break}s.timeoutHandle=ep(oa.bind(null,s,tr,ni),o);break}oa(s,tr,ni);break;case 4:if($i(s,p),(p&4194240)===p)break;for(o=s.eventTimes,x=-1;0<p;){var R=31-Bn(p);S=1<<R,R=o[R],R>x&&(x=R),p&=~S}if(p=x,p=It()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*FA(p/1960))-p,10<p){s.timeoutHandle=ep(oa.bind(null,s,tr,ni),p);break}oa(s,tr,ni);break;case 5:oa(s,tr,ni);break;default:throw Error(t(329))}}}return nr(s,It()),s.callbackNode===u?m0.bind(null,s):null}function Gp(s,o){var u=Xc;return s.current.memoizedState.isDehydrated&&(ia(s,o).flags|=256),s=vh(s,o),s!==2&&(o=tr,tr=u,o!==null&&Qp(o)),s}function Qp(s){tr===null?tr=s:tr.push.apply(tr,s)}function VA(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var x=u[p],S=x.getSnapshot;x=x.value;try{if(!Wr(S(),x))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function $i(s,o){for(o&=~qp,o&=~dh,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-Bn(o),p=1<<u;s[u]=-1,o&=~p}}function p0(s){if((pt&6)!==0)throw Error(t(327));wl();var o=qo(s,0);if((o&1)===0)return nr(s,It()),null;var u=vh(s,o);if(s.tag!==0&&u===2){var p=ur(s);p!==0&&(o=p,u=Gp(s,p))}if(u===1)throw u=Yc,ia(s,0),$i(s,o),nr(s,It()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,oa(s,tr,ni),nr(s,It()),null}function Yp(s,o){var u=pt;pt|=1;try{return s(o)}finally{pt=u,pt===0&&(xl=It()+500,qd&&Li())}}function sa(s){zi!==null&&zi.tag===0&&(pt&6)===0&&wl();var o=pt;pt|=1;var u=Ir.transition,p=ut;try{if(Ir.transition=null,ut=1,s)return s()}finally{ut=p,Ir.transition=u,pt=o,(pt&6)===0&&Li()}}function Xp(){pr=yl.current,Pt(yl)}function ia(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,pA(u)),tn!==null)for(u=tn.return;u!==null;){var p=u;switch(op(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Bd();break;case 3:pl(),Pt(Jn),Pt(An),xp();break;case 5:vp(p);break;case 4:pl();break;case 13:Pt(Ut);break;case 19:Pt(Ut);break;case 10:hp(p.type._context);break;case 22:case 23:Xp()}u=u.return}if(gn=s,tn=s=qi(s.current,null),Tn=pr=o,dn=0,Yc=null,qp=dh=ra=0,tr=Xc=null,ea!==null){for(o=0;o<ea.length;o++)if(u=ea[o],p=u.interleaved,p!==null){u.interleaved=null;var x=p.next,S=u.pending;if(S!==null){var R=S.next;S.next=x,p.next=R}u.pending=p}ea=null}return s}function g0(s,o){do{var u=tn;try{if(dp(),eh.current=sh,th){for(var p=zt.memoizedState;p!==null;){var x=p.queue;x!==null&&(x.pending=null),p=p.next}th=!1}if(na=0,pn=un=zt=null,qc=!1,Wc=0,$p.current=null,u===null||u.return===null){dn=1,Yc=o,tn=null;break}e:{var S=s,R=u.return,z=u,q=o;if(o=Tn,z.flags|=32768,q!==null&&typeof q=="object"&&typeof q.then=="function"){var Z=q,de=z,me=de.tag;if((de.mode&1)===0&&(me===0||me===11||me===15)){var ue=de.alternate;ue?(de.updateQueue=ue.updateQueue,de.memoizedState=ue.memoizedState,de.lanes=ue.lanes):(de.updateQueue=null,de.memoizedState=null)}var Se=zw(R);if(Se!==null){Se.flags&=-257,Bw(Se,R,z,S,o),Se.mode&1&&Uw(S,Z,o),o=Se,q=Z;var Pe=o.updateQueue;if(Pe===null){var Re=new Set;Re.add(q),o.updateQueue=Re}else Pe.add(q);break e}else{if((o&1)===0){Uw(S,Z,o),Jp();break e}q=Error(t(426))}}else if(Lt&&z.mode&1){var Yt=zw(R);if(Yt!==null){(Yt.flags&65536)===0&&(Yt.flags|=256),Bw(Yt,R,z,S,o),cp(gl(q,z));break e}}S=q=gl(q,z),dn!==4&&(dn=2),Xc===null?Xc=[S]:Xc.push(S),S=R;do{switch(S.tag){case 3:S.flags|=65536,o&=-o,S.lanes|=o;var Q=Fw(S,q,o);dw(S,Q);break e;case 1:z=q;var H=S.type,Y=S.stateNode;if((S.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Ui===null||!Ui.has(Y)))){S.flags|=65536,o&=-o,S.lanes|=o;var pe=Vw(S,z,o);dw(S,pe);break e}}S=S.return}while(S!==null)}x0(u)}catch(ke){o=ke,tn===u&&u!==null&&(tn=u=u.return);continue}break}while(!0)}function v0(){var s=uh.current;return uh.current=sh,s===null?sh:s}function Jp(){(dn===0||dn===3||dn===2)&&(dn=4),gn===null||(ra&268435455)===0&&(dh&268435455)===0||$i(gn,Tn)}function vh(s,o){var u=pt;pt|=2;var p=v0();(gn!==s||Tn!==o)&&(ni=null,ia(s,o));do try{UA();break}catch(x){g0(s,x)}while(!0);if(dp(),pt=u,uh.current=p,tn!==null)throw Error(t(261));return gn=null,Tn=0,dn}function UA(){for(;tn!==null;)y0(tn)}function zA(){for(;tn!==null&&!md();)y0(tn)}function y0(s){var o=E0(s.alternate,s,pr);s.memoizedProps=s.pendingProps,o===null?x0(s):tn=o,$p.current=null}function x0(s){var o=s;do{var u=o.alternate;if(s=o.return,(o.flags&32768)===0){if(u=kA(u,o,pr),u!==null){tn=u;return}}else{if(u=OA(u,o),u!==null){u.flags&=32767,tn=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{dn=6,tn=null;return}}if(o=o.sibling,o!==null){tn=o;return}tn=o=s}while(o!==null);dn===0&&(dn=5)}function oa(s,o,u){var p=ut,x=Ir.transition;try{Ir.transition=null,ut=1,BA(s,o,u,p)}finally{Ir.transition=x,ut=p}return null}function BA(s,o,u,p){do wl();while(zi!==null);if((pt&6)!==0)throw Error(t(327));u=s.finishedWork;var x=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var S=u.lanes|u.childLanes;if(Tt(s,S),s===gn&&(tn=gn=null,Tn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||fh||(fh=!0,b0(_r,function(){return wl(),null})),S=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||S){S=Ir.transition,Ir.transition=null;var R=ut;ut=1;var z=pt;pt|=4,$p.current=null,LA(s,u),c0(u,s),lA(Jm),ji=!!Xm,Jm=Xm=null,s.current=u,MA(u),Dm(),pt=z,ut=R,Ir.transition=S}else s.current=u;if(fh&&(fh=!1,zi=s,mh=x),S=s.pendingLanes,S===0&&(Ui=null),vd(u.stateNode),nr(s,It()),o!==null)for(p=s.onRecoverableError,u=0;u<o.length;u++)x=o[u],p(x.value,{componentStack:x.stack,digest:x.digest});if(hh)throw hh=!1,s=Hp,Hp=null,s;return(mh&1)!==0&&s.tag!==0&&wl(),S=s.pendingLanes,(S&1)!==0?s===Kp?Jc++:(Jc=0,Kp=s):Jc=0,Li(),null}function wl(){if(zi!==null){var s=Ii(mh),o=Ir.transition,u=ut;try{if(Ir.transition=null,ut=16>s?16:s,zi===null)var p=!1;else{if(s=zi,zi=null,mh=0,(pt&6)!==0)throw Error(t(331));var x=pt;for(pt|=4,je=s.current;je!==null;){var S=je,R=S.child;if((je.flags&16)!==0){var z=S.deletions;if(z!==null){for(var q=0;q<z.length;q++){var Z=z[q];for(je=Z;je!==null;){var de=je;switch(de.tag){case 0:case 11:case 15:Qc(8,de,S)}var me=de.child;if(me!==null)me.return=de,je=me;else for(;je!==null;){de=je;var ue=de.sibling,Se=de.return;if(s0(de),de===Z){je=null;break}if(ue!==null){ue.return=Se,je=ue;break}je=Se}}}var Pe=S.alternate;if(Pe!==null){var Re=Pe.child;if(Re!==null){Pe.child=null;do{var Yt=Re.sibling;Re.sibling=null,Re=Yt}while(Re!==null)}}je=S}}if((S.subtreeFlags&2064)!==0&&R!==null)R.return=S,je=R;else e:for(;je!==null;){if(S=je,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Qc(9,S,S.return)}var Q=S.sibling;if(Q!==null){Q.return=S.return,je=Q;break e}je=S.return}}var H=s.current;for(je=H;je!==null;){R=je;var Y=R.child;if((R.subtreeFlags&2064)!==0&&Y!==null)Y.return=R,je=Y;else e:for(R=H;je!==null;){if(z=je,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:ch(9,z)}}catch(ke){Ht(z,z.return,ke)}if(z===R){je=null;break e}var pe=z.sibling;if(pe!==null){pe.return=z.return,je=pe;break e}je=z.return}}if(pt=x,Li(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot($o,s)}catch{}p=!0}return p}finally{ut=u,Ir.transition=o}}return!1}function w0(s,o,u){o=gl(u,o),o=Fw(s,o,1),s=Fi(s,o,1),o=Wn(),s!==null&&(Ni(s,1,o),nr(s,o))}function Ht(s,o,u){if(s.tag===3)w0(s,s,u);else for(;o!==null;){if(o.tag===3){w0(o,s,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ui===null||!Ui.has(p))){s=gl(u,s),s=Vw(o,s,1),o=Fi(o,s,1),s=Wn(),o!==null&&(Ni(o,1,s),nr(o,s));break}}o=o.return}}function $A(s,o,u){var p=s.pingCache;p!==null&&p.delete(o),o=Wn(),s.pingedLanes|=s.suspendedLanes&u,gn===s&&(Tn&u)===u&&(dn===4||dn===3&&(Tn&130023424)===Tn&&500>It()-Wp?ia(s,0):qp|=u),nr(s,o)}function _0(s,o){o===0&&((s.mode&1)===0?o=1:(o=$a,$a<<=1,($a&130023424)===0&&($a=4194304)));var u=Wn();s=Zs(s,o),s!==null&&(Ni(s,o,u),nr(s,u))}function qA(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),_0(s,u)}function WA(s,o){var u=0;switch(s.tag){case 13:var p=s.stateNode,x=s.memoizedState;x!==null&&(u=x.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),_0(s,u)}var E0;E0=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||Jn.current)er=!0;else{if((s.lanes&u)===0&&(o.flags&128)===0)return er=!1,RA(s,o,u);er=(s.flags&131072)!==0}else er=!1,Lt&&(o.flags&1048576)!==0&&tw(o,Hd,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;ah(s,o),s=o.pendingProps;var x=ll(o,An.current);ml(o,u),x=Ep(null,o,p,s,x,u);var S=bp();return o.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zn(p)?(S=!0,$d(o)):S=!1,o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,pp(o),x.updater=ih,o.stateNode=x,x._reactInternals=o,Ap(o,p,s,u),o=kp(null,o,p,!0,S,u)):(o.tag=0,Lt&&S&&ip(o),qn(null,o,x,u),o=o.child),o;case 16:p=o.elementType;e:{switch(ah(s,o),s=o.pendingProps,x=p._init,p=x(p._payload),o.type=p,x=o.tag=KA(p),s=Kr(p,s),x){case 0:o=Rp(null,o,p,s,u);break e;case 1:o=Gw(null,o,p,s,u);break e;case 11:o=$w(null,o,p,s,u);break e;case 14:o=qw(null,o,p,Kr(p.type,s),u);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,x=o.pendingProps,x=o.elementType===p?x:Kr(p,x),Rp(s,o,p,x,u);case 1:return p=o.type,x=o.pendingProps,x=o.elementType===p?x:Kr(p,x),Gw(s,o,p,x,u);case 3:e:{if(Qw(o),s===null)throw Error(t(387));p=o.pendingProps,S=o.memoizedState,x=S.element,uw(s,o),Jd(o,p,null,u);var R=o.memoizedState;if(p=R.element,S.isDehydrated)if(S={element:p,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},o.updateQueue.baseState=S,o.memoizedState=S,o.flags&256){x=gl(Error(t(423)),o),o=Yw(s,o,p,u,x);break e}else if(p!==x){x=gl(Error(t(424)),o),o=Yw(s,o,p,u,x);break e}else for(mr=ki(o.stateNode.containerInfo.firstChild),fr=o,Lt=!0,Hr=null,u=lw(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(dl(),p===x){o=ti(s,o,u);break e}qn(s,o,p,u)}o=o.child}return o;case 5:return fw(o),s===null&&lp(o),p=o.type,x=o.pendingProps,S=s!==null?s.memoizedProps:null,R=x.children,Zm(p,x)?R=null:S!==null&&Zm(p,S)&&(o.flags|=32),Kw(s,o),qn(s,o,R,u),o.child;case 6:return s===null&&lp(o),null;case 13:return Xw(s,o,u);case 4:return gp(o,o.stateNode.containerInfo),p=o.pendingProps,s===null?o.child=hl(o,null,p,u):qn(s,o,p,u),o.child;case 11:return p=o.type,x=o.pendingProps,x=o.elementType===p?x:Kr(p,x),$w(s,o,p,x,u);case 7:return qn(s,o,o.pendingProps,u),o.child;case 8:return qn(s,o,o.pendingProps.children,u),o.child;case 12:return qn(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,x=o.pendingProps,S=o.memoizedProps,R=x.value,At(Qd,p._currentValue),p._currentValue=R,S!==null)if(Wr(S.value,R)){if(S.children===x.children&&!Jn.current){o=ti(s,o,u);break e}}else for(S=o.child,S!==null&&(S.return=o);S!==null;){var z=S.dependencies;if(z!==null){R=S.child;for(var q=z.firstContext;q!==null;){if(q.context===p){if(S.tag===1){q=ei(-1,u&-u),q.tag=2;var Z=S.updateQueue;if(Z!==null){Z=Z.shared;var de=Z.pending;de===null?q.next=q:(q.next=de.next,de.next=q),Z.pending=q}}S.lanes|=u,q=S.alternate,q!==null&&(q.lanes|=u),fp(S.return,u,o),z.lanes|=u;break}q=q.next}}else if(S.tag===10)R=S.type===o.type?null:S.child;else if(S.tag===18){if(R=S.return,R===null)throw Error(t(341));R.lanes|=u,z=R.alternate,z!==null&&(z.lanes|=u),fp(R,u,o),R=S.sibling}else R=S.child;if(R!==null)R.return=S;else for(R=S;R!==null;){if(R===o){R=null;break}if(S=R.sibling,S!==null){S.return=R.return,R=S;break}R=R.return}S=R}qn(s,o,x.children,u),o=o.child}return o;case 9:return x=o.type,p=o.pendingProps.children,ml(o,u),x=Nr(x),p=p(x),o.flags|=1,qn(s,o,p,u),o.child;case 14:return p=o.type,x=Kr(p,o.pendingProps),x=Kr(p.type,x),qw(s,o,p,x,u);case 15:return Ww(s,o,o.type,o.pendingProps,u);case 17:return p=o.type,x=o.pendingProps,x=o.elementType===p?x:Kr(p,x),ah(s,o),o.tag=1,Zn(p)?(s=!0,$d(o)):s=!1,ml(o,u),Lw(o,p,x),Ap(o,p,x,u),kp(null,o,p,!0,s,u);case 19:return Zw(s,o,u);case 22:return Hw(s,o,u)}throw Error(t(156,o.tag))};function b0(s,o){return za(s,o)}function HA(s,o,u,p){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(s,o,u,p){return new HA(s,o,u,p)}function Zp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function KA(s){if(typeof s=="function")return Zp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===M)return 11;if(s===ie)return 14}return 2}function qi(s,o){var u=s.alternate;return u===null?(u=Ar(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function yh(s,o,u,p,x,S){var R=2;if(p=s,typeof s=="function")Zp(s)&&(R=1);else if(typeof s=="string")R=5;else e:switch(s){case D:return aa(u.children,x,S,o);case k:R=8,x|=8;break;case j:return s=Ar(12,u,o,x|2),s.elementType=j,s.lanes=S,s;case L:return s=Ar(13,u,o,x),s.elementType=L,s.lanes=S,s;case J:return s=Ar(19,u,o,x),s.elementType=J,s.lanes=S,s;case ae:return xh(u,x,S,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case P:R=10;break e;case F:R=9;break e;case M:R=11;break e;case ie:R=14;break e;case re:R=16,p=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=Ar(R,u,o,x),o.elementType=s,o.type=p,o.lanes=S,o}function aa(s,o,u,p){return s=Ar(7,s,p,o),s.lanes=u,s}function xh(s,o,u,p){return s=Ar(22,s,p,o),s.elementType=ae,s.lanes=u,s.stateNode={isHidden:!1},s}function eg(s,o,u){return s=Ar(6,s,null,o),s.lanes=u,s}function tg(s,o,u){return o=Ar(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function GA(s,o,u,p,x){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Si(0),this.expirationTimes=Si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.identifierPrefix=p,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function ng(s,o,u,p,x,S,R,z,q){return s=new GA(s,o,u,z,q),o===1?(o=1,S===!0&&(o|=8)):o=0,S=Ar(3,null,null,o),s.current=S,S.stateNode=s,S.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},pp(S),s}function QA(s,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:p==null?null:""+p,children:s,containerInfo:o,implementation:u}}function T0(s){if(!s)return Di;s=s._reactInternals;e:{if(Fr(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Zn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(Zn(u))return Jx(s,u,o)}return o}function S0(s,o,u,p,x,S,R,z,q){return s=ng(u,p,!0,s,x,S,R,z,q),s.context=T0(null),u=s.current,p=Wn(),x=Bi(u),S=ei(p,x),S.callback=o??null,Fi(u,S,x),s.current.lanes=x,Ni(s,x,p),nr(s,p),s}function wh(s,o,u,p){var x=o.current,S=Wn(),R=Bi(x);return u=T0(u),o.context===null?o.context=u:o.pendingContext=u,o=ei(S,R),o.payload={element:s},p=p===void 0?null:p,p!==null&&(o.callback=p),s=Fi(x,o,R),s!==null&&(Yr(s,x,R,S),Xd(s,x,R)),R}function _h(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function N0(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function rg(s,o){N0(s,o),(s=s.alternate)&&N0(s,o)}function YA(){return null}var C0=typeof reportError=="function"?reportError:function(s){console.error(s)};function sg(s){this._internalRoot=s}Eh.prototype.render=sg.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));wh(s,o,null,null)},Eh.prototype.unmount=sg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;sa(function(){wh(null,s,null,null)}),o[Qs]=null}};function Eh(s){this._internalRoot=s}Eh.prototype.unstable_scheduleHydration=function(s){if(s){var o=Ed();s={blockedOn:null,target:s,priority:o};for(var u=0;u<us.length&&o!==0&&o<us[u].priority;u++);us.splice(u,0,s),u===0&&Sd(s)}};function ig(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function bh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function I0(){}function XA(s,o,u,p,x){if(x){if(typeof p=="function"){var S=p;p=function(){var Z=_h(R);S.call(Z)}}var R=S0(o,p,s,0,null,!1,!1,"",I0);return s._reactRootContainer=R,s[Qs]=R.current,Lc(s.nodeType===8?s.parentNode:s),sa(),R}for(;x=s.lastChild;)s.removeChild(x);if(typeof p=="function"){var z=p;p=function(){var Z=_h(q);z.call(Z)}}var q=ng(s,0,!1,null,null,!1,!1,"",I0);return s._reactRootContainer=q,s[Qs]=q.current,Lc(s.nodeType===8?s.parentNode:s),sa(function(){wh(o,q,u,p)}),q}function Th(s,o,u,p,x){var S=u._reactRootContainer;if(S){var R=S;if(typeof x=="function"){var z=x;x=function(){var q=_h(R);z.call(q)}}wh(o,R,s,x)}else R=XA(u,o,s,x,p);return _h(R)}wd=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ti(o.pendingLanes);u!==0&&(Ci(o,u|1),nr(o,It()),(pt&6)===0&&(xl=It()+500,Li()))}break;case 13:sa(function(){var p=Zs(s,1);if(p!==null){var x=Wn();Yr(p,s,1,x)}}),rg(s,1)}},qa=function(s){if(s.tag===13){var o=Zs(s,134217728);if(o!==null){var u=Wn();Yr(o,s,134217728,u)}rg(s,134217728)}},_d=function(s){if(s.tag===13){var o=Bi(s),u=Zs(s,o);if(u!==null){var p=Wn();Yr(u,s,o,p)}rg(s,o)}},Ed=function(){return ut},bd=function(s,o){var u=ut;try{return ut=s,o()}finally{ut=u}},mt=function(s,o,u){switch(o){case"input":if(Fe(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==s&&p.form===s.form){var x=zd(p);if(!x)throw Error(t(90));nt(p),Fe(p,x)}}}break;case"textarea":Wt(s,u);break;case"select":o=u.value,o!=null&&wn(s,!!u.multiple,o,!1)}},Fo=Yp,vc=sa;var JA={usingClientEntryPoint:!1,Events:[Vc,ol,zd,wr,gc,Yp]},Zc={findFiberByHostInstance:Yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZA={bundleType:Zc.bundleType,version:Zc.version,rendererPackageName:Zc.rendererPackageName,rendererConfig:Zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=wc(s),s===null?null:s.stateNode},findFiberByHostInstance:Zc.findFiberByHostInstance||YA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sh.isDisabled&&Sh.supportsFiber)try{$o=Sh.inject(ZA),cr=Sh}catch{}}return rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JA,rr.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ig(o))throw Error(t(200));return QA(s,o,null,u)},rr.createRoot=function(s,o){if(!ig(s))throw Error(t(299));var u=!1,p="",x=C0;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(x=o.onRecoverableError)),o=ng(s,1,!1,null,null,u,!1,p,x),s[Qs]=o.current,Lc(s.nodeType===8?s.parentNode:s),new sg(o)},rr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=wc(o),s=s===null?null:s.stateNode,s},rr.flushSync=function(s){return sa(s)},rr.hydrate=function(s,o,u){if(!bh(o))throw Error(t(200));return Th(null,s,o,!0,u)},rr.hydrateRoot=function(s,o,u){if(!ig(s))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,x=!1,S="",R=C0;if(u!=null&&(u.unstable_strictMode===!0&&(x=!0),u.identifierPrefix!==void 0&&(S=u.identifierPrefix),u.onRecoverableError!==void 0&&(R=u.onRecoverableError)),o=S0(o,null,s,1,u??null,x,!1,S,R),s[Qs]=o.current,Lc(s),p)for(s=0;s<p.length;s++)u=p[s],x=u._getVersion,x=x(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,x]:o.mutableSourceEagerHydrationData.push(u,x);return new Eh(o)},rr.render=function(s,o,u){if(!bh(o))throw Error(t(200));return Th(null,s,o,!1,u)},rr.unmountComponentAtNode=function(s){if(!bh(s))throw Error(t(40));return s._reactRootContainer?(sa(function(){Th(null,null,s,!1,function(){s._reactRootContainer=null,s[Qs]=null})}),!0):!1},rr.unstable_batchedUpdates=Yp,rr.unstable_renderSubtreeIntoContainer=function(s,o,u,p){if(!bh(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Th(s,o,u,!1,p)},rr.version="18.3.1-next-f1338f8080-20240426",rr}var z0;function O1(){if(z0)return dg.exports;z0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dg.exports=xj(),dg.exports}var Aa=O1();const Hv=R1(Aa);function ze(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function wj(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function D1(...n){return e=>n.forEach(t=>wj(t,e))}function Et(...n){return E.useCallback(D1(...n),n)}function xi(n,e=[]){let t=[];function r(a,c){const d=E.createContext(c),f=t.length;t=[...t,c];function m(v){const{scope:y,children:T,...N}=v,_=(y==null?void 0:y[n][f])||d,w=E.useMemo(()=>N,Object.values(N));return l.jsx(_.Provider,{value:w,children:T})}function g(v,y){const T=(y==null?void 0:y[n][f])||d,N=E.useContext(T);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${a}\``)}return m.displayName=a+"Provider",[m,g]}const i=()=>{const a=t.map(c=>E.createContext(c));return function(d){const f=(d==null?void 0:d[n])||a;return E.useMemo(()=>({[`__scope${n}`]:{...d,[n]:f}}),[d,f])}};return i.scopeName=n,[r,_j(i,...e)]}function _j(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const c=r.reduce((d,{useScope:f,scopeName:m})=>{const v=f(a)[`__scope${m}`];return{...d,...v}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var ql=E.forwardRef((n,e)=>{const{children:t,...r}=n,i=E.Children.toArray(t),a=i.find(Ej);if(a){const c=a.props.children,d=i.map(f=>f===a?E.Children.count(c)>1?E.Children.only(null):E.isValidElement(c)?c.props.children:null:f);return l.jsx(zg,{...r,ref:e,children:E.isValidElement(c)?E.cloneElement(c,void 0,d):null})}return l.jsx(zg,{...r,ref:e,children:t})});ql.displayName="Slot";var zg=E.forwardRef((n,e)=>{const{children:t,...r}=n;if(E.isValidElement(t)){const i=Tj(t);return E.cloneElement(t,{...bj(r,t.props),ref:e?D1(e,i):i})}return E.Children.count(t)>1?E.Children.only(null):null});zg.displayName="SlotClone";var L1=({children:n})=>l.jsx(l.Fragment,{children:n});function Ej(n){return E.isValidElement(n)&&n.type===L1}function bj(n,e){const t={...e};for(const r in e){const i=n[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?t[r]=(...d)=>{a(...d),i(...d)}:i&&(t[r]=i):r==="style"?t[r]={...i,...a}:r==="className"&&(t[r]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function Tj(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Kv(n){const e=n+"CollectionProvider",[t,r]=xi(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=T=>{const{scope:N,children:_}=T,w=we.useRef(null),A=we.useRef(new Map).current;return l.jsx(i,{scope:N,itemMap:A,collectionRef:w,children:_})};c.displayName=e;const d=n+"CollectionSlot",f=we.forwardRef((T,N)=>{const{scope:_,children:w}=T,A=a(d,_),I=Et(N,A.collectionRef);return l.jsx(ql,{ref:I,children:w})});f.displayName=d;const m=n+"CollectionItemSlot",g="data-radix-collection-item",v=we.forwardRef((T,N)=>{const{scope:_,children:w,...A}=T,I=we.useRef(null),O=Et(N,I),U=a(m,_);return we.useEffect(()=>(U.itemMap.set(I,{ref:I,...A}),()=>void U.itemMap.delete(I))),l.jsx(ql,{[g]:"",ref:O,children:w})});v.displayName=m;function y(T){const N=a(n+"CollectionConsumer",T);return we.useCallback(()=>{const w=N.collectionRef.current;if(!w)return[];const A=Array.from(w.querySelectorAll(`[${g}]`));return Array.from(N.itemMap.values()).sort((U,$)=>A.indexOf(U.ref.current)-A.indexOf($.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:c,Slot:f,ItemSlot:v},y,r]}var Sj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ge=Sj.reduce((n,e)=>{const t=E.forwardRef((r,i)=>{const{asChild:a,...c}=r,d=a?ql:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(d,{...c,ref:i})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function qf(n,e){n&&Aa.flushSync(()=>n.dispatchEvent(e))}function fn(n){const e=E.useRef(n);return E.useEffect(()=>{e.current=n}),E.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function Gv(n,e=globalThis==null?void 0:globalThis.document){const t=fn(n);E.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var Nj="DismissableLayer",Bg="dismissableLayer.update",Cj="dismissableLayer.pointerDownOutside",Ij="dismissableLayer.focusOutside",B0,M1=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),F1=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:c,onDismiss:d,...f}=n,m=E.useContext(M1),[g,v]=E.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,T]=E.useState({}),N=Et(e,D=>v(D)),_=Array.from(m.layers),[w]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),A=_.indexOf(w),I=g?_.indexOf(g):-1,O=m.layersWithOutsidePointerEventsDisabled.size>0,U=I>=A,$=jj(D=>{const k=D.target,j=[...m.branches].some(P=>P.contains(k));!U||j||(i==null||i(D),c==null||c(D),D.defaultPrevented||d==null||d())},y),W=Pj(D=>{const k=D.target;[...m.branches].some(P=>P.contains(k))||(a==null||a(D),c==null||c(D),D.defaultPrevented||d==null||d())},y);return Gv(D=>{I===m.layers.size-1&&(r==null||r(D),!D.defaultPrevented&&d&&(D.preventDefault(),d()))},y),E.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(B0=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),$0(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=B0)}},[g,y,t,m]),E.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),$0())},[g,m]),E.useEffect(()=>{const D=()=>T({});return document.addEventListener(Bg,D),()=>document.removeEventListener(Bg,D)},[]),l.jsx(Ge.div,{...f,ref:N,style:{pointerEvents:O?U?"auto":"none":void 0,...n.style},onFocusCapture:ze(n.onFocusCapture,W.onFocusCapture),onBlurCapture:ze(n.onBlurCapture,W.onBlurCapture),onPointerDownCapture:ze(n.onPointerDownCapture,$.onPointerDownCapture)})});F1.displayName=Nj;var Aj="DismissableLayerBranch",V1=E.forwardRef((n,e)=>{const t=E.useContext(M1),r=E.useRef(null),i=Et(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(Ge.div,{...n,ref:i})});V1.displayName=Aj;function jj(n,e=globalThis==null?void 0:globalThis.document){const t=fn(n),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const a=d=>{if(d.target&&!r.current){let f=function(){U1(Cj,t,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=f,e.addEventListener("click",i.current,{once:!0})):f()}else e.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Pj(n,e=globalThis==null?void 0:globalThis.document){const t=fn(n),r=E.useRef(!1);return E.useEffect(()=>{const i=a=>{a.target&&!r.current&&U1(Ij,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $0(){const n=new CustomEvent(Bg);document.dispatchEvent(n)}function U1(n,e,t,{discrete:r}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?qf(i,a):i.dispatchEvent(a)}var Rj=F1,kj=V1,Zt=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},Oj="Portal",z1=E.forwardRef((n,e)=>{var d;const{container:t,...r}=n,[i,a]=E.useState(!1);Zt(()=>a(!0),[]);const c=t||i&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return c?Hv.createPortal(l.jsx(Ge.div,{...r,ref:e}),c):null});z1.displayName=Oj;function Dj(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var Qv=n=>{const{present:e,children:t}=n,r=Lj(e),i=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),a=Et(r.ref,Mj(i));return typeof t=="function"||r.isPresent?E.cloneElement(i,{ref:a}):null};Qv.displayName="Presence";function Lj(n){const[e,t]=E.useState(),r=E.useRef({}),i=E.useRef(n),a=E.useRef("none"),c=n?"mounted":"unmounted",[d,f]=Dj(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const m=Ch(r.current);a.current=d==="mounted"?m:"none"},[d]),Zt(()=>{const m=r.current,g=i.current;if(g!==n){const y=a.current,T=Ch(m);n?f("MOUNT"):T==="none"||(m==null?void 0:m.display)==="none"?f("UNMOUNT"):f(g&&y!==T?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,f]),Zt(()=>{if(e){const m=v=>{const T=Ch(r.current).includes(v.animationName);v.target===e&&T&&Aa.flushSync(()=>f("ANIMATION_END"))},g=v=>{v.target===e&&(a.current=Ch(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:E.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function Ch(n){return(n==null?void 0:n.animationName)||"none"}function Mj(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Wl({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=Fj({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:r,d=fn(t),f=E.useCallback(m=>{if(a){const v=typeof m=="function"?m(n):m;v!==n&&d(v)}else i(m)},[a,n,i,d]);return[c,f]}function Fj({defaultProp:n,onChange:e}){const t=E.useState(n),[r]=t,i=E.useRef(r),a=fn(e);return E.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),t}var Vj="VisuallyHidden",qu=E.forwardRef((n,e)=>l.jsx(Ge.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));qu.displayName=Vj;var Uj=qu,Yv="ToastProvider",[Xv,zj,Bj]=Kv("Toast"),[B1,D9]=xi("Toast",[Bj]),[$j,Wf]=B1(Yv),$1=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:c}=n,[d,f]=E.useState(null),[m,g]=E.useState(0),v=E.useRef(!1),y=E.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Yv}\`. Expected non-empty \`string\`.`),l.jsx(Xv.Provider,{scope:e,children:l.jsx($j,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:m,viewport:d,onViewportChange:f,onToastAdd:E.useCallback(()=>g(T=>T+1),[]),onToastRemove:E.useCallback(()=>g(T=>T-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:y,children:c})})};$1.displayName=Yv;var q1="ToastViewport",qj=["F8"],$g="toast.viewportPause",qg="toast.viewportResume",W1=E.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=qj,label:i="Notifications ({hotkey})",...a}=n,c=Wf(q1,t),d=zj(t),f=E.useRef(null),m=E.useRef(null),g=E.useRef(null),v=E.useRef(null),y=Et(e,v,c.onViewportChange),T=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=c.toastCount>0;E.useEffect(()=>{const w=A=>{var O;r.every(U=>A[U]||A.code===U)&&((O=v.current)==null||O.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),E.useEffect(()=>{const w=f.current,A=v.current;if(N&&w&&A){const I=()=>{if(!c.isClosePausedRef.current){const W=new CustomEvent($g);A.dispatchEvent(W),c.isClosePausedRef.current=!0}},O=()=>{if(c.isClosePausedRef.current){const W=new CustomEvent(qg);A.dispatchEvent(W),c.isClosePausedRef.current=!1}},U=W=>{!w.contains(W.relatedTarget)&&O()},$=()=>{w.contains(document.activeElement)||O()};return w.addEventListener("focusin",I),w.addEventListener("focusout",U),w.addEventListener("pointermove",I),w.addEventListener("pointerleave",$),window.addEventListener("blur",I),window.addEventListener("focus",O),()=>{w.removeEventListener("focusin",I),w.removeEventListener("focusout",U),w.removeEventListener("pointermove",I),w.removeEventListener("pointerleave",$),window.removeEventListener("blur",I),window.removeEventListener("focus",O)}}},[N,c.isClosePausedRef]);const _=E.useCallback(({tabbingDirection:w})=>{const I=d().map(O=>{const U=O.ref.current,$=[U,...rP(U)];return w==="forwards"?$:$.reverse()});return(w==="forwards"?I.reverse():I).flat()},[d]);return E.useEffect(()=>{const w=v.current;if(w){const A=I=>{var $,W,D;const O=I.altKey||I.ctrlKey||I.metaKey;if(I.key==="Tab"&&!O){const k=document.activeElement,j=I.shiftKey;if(I.target===w&&j){($=m.current)==null||$.focus();return}const M=_({tabbingDirection:j?"backwards":"forwards"}),L=M.findIndex(J=>J===k);mg(M.slice(L+1))?I.preventDefault():j?(W=m.current)==null||W.focus():(D=g.current)==null||D.focus()}};return w.addEventListener("keydown",A),()=>w.removeEventListener("keydown",A)}},[d,_]),l.jsxs(kj,{ref:f,role:"region","aria-label":i.replace("{hotkey}",T),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&l.jsx(Wg,{ref:m,onFocusFromOutsideViewport:()=>{const w=_({tabbingDirection:"forwards"});mg(w)}}),l.jsx(Xv.Slot,{scope:t,children:l.jsx(Ge.ol,{tabIndex:-1,...a,ref:y})}),N&&l.jsx(Wg,{ref:g,onFocusFromOutsideViewport:()=>{const w=_({tabbingDirection:"backwards"});mg(w)}})]})});W1.displayName=q1;var H1="ToastFocusProxy",Wg=E.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,a=Wf(H1,t);return l.jsx(qu,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:c=>{var m;const d=c.relatedTarget;!((m=a.viewport)!=null&&m.contains(d))&&r()}})});Wg.displayName=H1;var Hf="Toast",Wj="toast.swipeStart",Hj="toast.swipeMove",Kj="toast.swipeCancel",Gj="toast.swipeEnd",K1=E.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:a,...c}=n,[d=!0,f]=Wl({prop:r,defaultProp:i,onChange:a});return l.jsx(Qv,{present:t||d,children:l.jsx(Xj,{open:d,...c,ref:e,onClose:()=>f(!1),onPause:fn(n.onPause),onResume:fn(n.onResume),onSwipeStart:ze(n.onSwipeStart,m=>{m.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ze(n.onSwipeMove,m=>{const{x:g,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","move"),m.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:ze(n.onSwipeCancel,m=>{m.currentTarget.setAttribute("data-swipe","cancel"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ze(n.onSwipeEnd,m=>{const{x:g,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","end"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),f(!1)})})})});K1.displayName=Hf;var[Qj,Yj]=B1(Hf,{onClose(){}}),Xj=E.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:a,onClose:c,onEscapeKeyDown:d,onPause:f,onResume:m,onSwipeStart:g,onSwipeMove:v,onSwipeCancel:y,onSwipeEnd:T,...N}=n,_=Wf(Hf,t),[w,A]=E.useState(null),I=Et(e,J=>A(J)),O=E.useRef(null),U=E.useRef(null),$=i||_.duration,W=E.useRef(0),D=E.useRef($),k=E.useRef(0),{onToastAdd:j,onToastRemove:P}=_,F=fn(()=>{var ie;(w==null?void 0:w.contains(document.activeElement))&&((ie=_.viewport)==null||ie.focus()),c()}),M=E.useCallback(J=>{!J||J===1/0||(window.clearTimeout(k.current),W.current=new Date().getTime(),k.current=window.setTimeout(F,J))},[F]);E.useEffect(()=>{const J=_.viewport;if(J){const ie=()=>{M(D.current),m==null||m()},re=()=>{const ae=new Date().getTime()-W.current;D.current=D.current-ae,window.clearTimeout(k.current),f==null||f()};return J.addEventListener($g,re),J.addEventListener(qg,ie),()=>{J.removeEventListener($g,re),J.removeEventListener(qg,ie)}}},[_.viewport,$,f,m,M]),E.useEffect(()=>{a&&!_.isClosePausedRef.current&&M($)},[a,$,_.isClosePausedRef,M]),E.useEffect(()=>(j(),()=>P()),[j,P]);const L=E.useMemo(()=>w?eb(w):null,[w]);return _.viewport?l.jsxs(l.Fragment,{children:[L&&l.jsx(Jj,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:L}),l.jsx(Qj,{scope:t,onClose:F,children:Aa.createPortal(l.jsx(Xv.ItemSlot,{scope:t,children:l.jsx(Rj,{asChild:!0,onEscapeKeyDown:ze(d,()=>{_.isFocusedToastEscapeKeyDownRef.current||F(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(Ge.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":_.swipeDirection,...N,ref:I,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:ze(n.onKeyDown,J=>{J.key==="Escape"&&(d==null||d(J.nativeEvent),J.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:ze(n.onPointerDown,J=>{J.button===0&&(O.current={x:J.clientX,y:J.clientY})}),onPointerMove:ze(n.onPointerMove,J=>{if(!O.current)return;const ie=J.clientX-O.current.x,re=J.clientY-O.current.y,ae=!!U.current,K=["left","right"].includes(_.swipeDirection),ne=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,ce=K?ne(0,ie):0,B=K?0:ne(0,re),X=J.pointerType==="touch"?10:2,he={x:ce,y:B},Ie={originalEvent:J,delta:he};ae?(U.current=he,Ih(Hj,v,Ie,{discrete:!1})):q0(he,_.swipeDirection,X)?(U.current=he,Ih(Wj,g,Ie,{discrete:!1}),J.target.setPointerCapture(J.pointerId)):(Math.abs(ie)>X||Math.abs(re)>X)&&(O.current=null)}),onPointerUp:ze(n.onPointerUp,J=>{const ie=U.current,re=J.target;if(re.hasPointerCapture(J.pointerId)&&re.releasePointerCapture(J.pointerId),U.current=null,O.current=null,ie){const ae=J.currentTarget,K={originalEvent:J,delta:ie};q0(ie,_.swipeDirection,_.swipeThreshold)?Ih(Gj,T,K,{discrete:!0}):Ih(Kj,y,K,{discrete:!0}),ae.addEventListener("click",ne=>ne.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),Jj=n=>{const{__scopeToast:e,children:t,...r}=n,i=Wf(Hf,e),[a,c]=E.useState(!1),[d,f]=E.useState(!1);return tP(()=>c(!0)),E.useEffect(()=>{const m=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(m)},[]),d?null:l.jsx(z1,{asChild:!0,children:l.jsx(qu,{...r,children:a&&l.jsxs(l.Fragment,{children:[i.label," ",t]})})})},Zj="ToastTitle",G1=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(Ge.div,{...r,ref:e})});G1.displayName=Zj;var eP="ToastDescription",Q1=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(Ge.div,{...r,ref:e})});Q1.displayName=eP;var Y1="ToastAction",X1=E.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?l.jsx(Z1,{altText:t,asChild:!0,children:l.jsx(Jv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Y1}\`. Expected non-empty \`string\`.`),null)});X1.displayName=Y1;var J1="ToastClose",Jv=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=Yj(J1,t);return l.jsx(Z1,{asChild:!0,children:l.jsx(Ge.button,{type:"button",...r,ref:e,onClick:ze(n.onClick,i.onClose)})})});Jv.displayName=J1;var Z1=E.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return l.jsx(Ge.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function eb(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),nP(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...eb(r))}}),e}function Ih(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,a=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?qf(i,a):i.dispatchEvent(a)}var q0=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),a=r>i;return e==="left"||e==="right"?a&&r>t:!a&&i>t};function tP(n=()=>{}){const e=fn(n);Zt(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function nP(n){return n.nodeType===n.ELEMENT_NODE}function rP(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function mg(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var sP=$1,tb=W1,nb=K1,rb=G1,sb=Q1,ib=X1,ob=Jv;function ab(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=ab(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function lb(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=ab(n))&&(r&&(r+=" "),r+=e);return r}const W0=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,H0=lb,Wu=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return H0(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:a}=e,c=Object.keys(i).map(m=>{const g=t==null?void 0:t[m],v=a==null?void 0:a[m];if(g===null)return null;const y=W0(g)||W0(v);return i[m][y]}),d=t&&Object.entries(t).reduce((m,g)=>{let[v,y]=g;return y===void 0||(m[v]=y),m},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,g)=>{let{class:v,className:y,...T}=g;return Object.entries(T).every(N=>{let[_,w]=N;return Array.isArray(w)?w.includes({...a,...d}[_]):{...a,...d}[_]===w})?[...m,v,y]:m},[]);return H0(n,c,f,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cb=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=E.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:c,...d},f)=>E.createElement("svg",{ref:f,...oP,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:cb("lucide",i),...d},[...c.map(([m,g])=>E.createElement(m,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=(n,e)=>{const t=E.forwardRef(({className:r,...i},a)=>E.createElement(aP,{ref:a,iconNode:e,className:cb(`lucide-${iP(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Qe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=Qe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=Qe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=Qe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=Qe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=Qe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=Qe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=Qe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=Qe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=Qe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=Qe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=Qe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=Qe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=Qe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Qe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Qe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=Qe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=Qe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=Qe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=Qe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=Qe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=Qe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=Qe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=Qe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=Qe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=Qe("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=Qe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=Qe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=Qe("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Qe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=Qe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Qe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Qe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=Qe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=Qe("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Qe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=Qe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=Qe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=Qe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=Qe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=Qe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=Qe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=Qe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=Qe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=Qe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=Qe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ey="-",_P=n=>{const e=bP(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const d=c.split(ey);return d[0]===""&&d.length!==1&&d.shift(),vb(d,e)||EP(c)},getConflictingClassGroupIds:(c,d)=>{const f=t[c]||[];return d&&r[c]?[...f,...r[c]]:f}}},vb=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?vb(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=n.join(ey);return(c=e.validators.find(({validator:d})=>d(a)))==null?void 0:c.classGroupId},Q0=/^\[(.+)\]$/,EP=n=>{if(Q0.test(n)){const e=Q0.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},bP=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return SP(Object.entries(n.classGroups),t).forEach(([a,c])=>{Gg(c,r,a,e)}),r},Gg=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const a=i===""?e:Y0(e,i);a.classGroupId=t;return}if(typeof i=="function"){if(TP(i)){Gg(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([a,c])=>{Gg(c,Y0(e,a),t,r)})})},Y0=(n,e)=>{let t=n;return e.split(ey).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},TP=n=>n.isThemeGetter,SP=(n,e)=>e?n.map(([t,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([c,d])=>[e+c,d])):a);return[t,i]}):n,NP=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(a,c)=>{t.set(a,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let c=t.get(a);if(c!==void 0)return c;if((c=r.get(a))!==void 0)return i(a,c),c},set(a,c){t.has(a)?t.set(a,c):i(a,c)}}},yb="!",CP=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],a=e.length,c=d=>{const f=[];let m=0,g=0,v;for(let w=0;w<d.length;w++){let A=d[w];if(m===0){if(A===i&&(r||d.slice(w,w+a)===e)){f.push(d.slice(g,w)),g=w+a;continue}if(A==="/"){v=w;continue}}A==="["?m++:A==="]"&&m--}const y=f.length===0?d:d.substring(g),T=y.startsWith(yb),N=T?y.substring(1):y,_=v&&v>g?v-g:void 0;return{modifiers:f,hasImportantModifier:T,baseClassName:N,maybePostfixModifierPosition:_}};return t?d=>t({className:d,parseClassName:c}):c},IP=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},AP=n=>({cache:NP(n.cacheSize),parseClassName:CP(n),..._P(n)}),jP=/\s+/,PP=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],c=n.trim().split(jP);let d="";for(let f=c.length-1;f>=0;f-=1){const m=c[f],{modifiers:g,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:T}=t(m);let N=!!T,_=r(N?y.substring(0,T):y);if(!_){if(!N){d=m+(d.length>0?" "+d:d);continue}if(_=r(y),!_){d=m+(d.length>0?" "+d:d);continue}N=!1}const w=IP(g).join(":"),A=v?w+yb:w,I=A+_;if(a.includes(I))continue;a.push(I);const O=i(_,N);for(let U=0;U<O.length;++U){const $=O[U];a.push(A+$)}d=m+(d.length>0?" "+d:d)}return d};function RP(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=xb(e))&&(r&&(r+=" "),r+=t);return r}const xb=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=xb(n[r]))&&(t&&(t+=" "),t+=e);return t};function kP(n,...e){let t,r,i,a=c;function c(f){const m=e.reduce((g,v)=>v(g),n());return t=AP(m),r=t.cache.get,i=t.cache.set,a=d,d(f)}function d(f){const m=r(f);if(m)return m;const g=PP(f,t);return i(f,g),g}return function(){return a(RP.apply(null,arguments))}}const Rt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},wb=/^\[(?:([a-z-]+):)?(.+)\]$/i,OP=/^\d+\/\d+$/,DP=new Set(["px","full","screen"]),LP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,MP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,FP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,VP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,UP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ri=n=>Al(n)||DP.has(n)||OP.test(n),Hi=n=>sc(n,"length",GP),Al=n=>!!n&&!Number.isNaN(Number(n)),pg=n=>sc(n,"number",Al),tu=n=>!!n&&Number.isInteger(Number(n)),zP=n=>n.endsWith("%")&&Al(n.slice(0,-1)),rt=n=>wb.test(n),Ki=n=>LP.test(n),BP=new Set(["length","size","percentage"]),$P=n=>sc(n,BP,_b),qP=n=>sc(n,"position",_b),WP=new Set(["image","url"]),HP=n=>sc(n,WP,YP),KP=n=>sc(n,"",QP),nu=()=>!0,sc=(n,e,t)=>{const r=wb.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},GP=n=>MP.test(n)&&!FP.test(n),_b=()=>!1,QP=n=>VP.test(n),YP=n=>UP.test(n),XP=()=>{const n=Rt("colors"),e=Rt("spacing"),t=Rt("blur"),r=Rt("brightness"),i=Rt("borderColor"),a=Rt("borderRadius"),c=Rt("borderSpacing"),d=Rt("borderWidth"),f=Rt("contrast"),m=Rt("grayscale"),g=Rt("hueRotate"),v=Rt("invert"),y=Rt("gap"),T=Rt("gradientColorStops"),N=Rt("gradientColorStopPositions"),_=Rt("inset"),w=Rt("margin"),A=Rt("opacity"),I=Rt("padding"),O=Rt("saturate"),U=Rt("scale"),$=Rt("sepia"),W=Rt("skew"),D=Rt("space"),k=Rt("translate"),j=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",rt,e],M=()=>[rt,e],L=()=>["",ri,Hi],J=()=>["auto",Al,rt],ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],re=()=>["solid","dashed","dotted","double","none"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],ne=()=>["","0",rt],ce=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[Al,rt];return{cacheSize:500,separator:":",theme:{colors:[nu],spacing:[ri,Hi],blur:["none","",Ki,rt],brightness:B(),borderColor:[n],borderRadius:["none","","full",Ki,rt],borderSpacing:M(),borderWidth:L(),contrast:B(),grayscale:ne(),hueRotate:B(),invert:ne(),gap:M(),gradientColorStops:[n],gradientColorStopPositions:[zP,Hi],inset:F(),margin:F(),opacity:B(),padding:M(),saturate:B(),scale:B(),sepia:ne(),skew:B(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",rt]}],container:["container"],columns:[{columns:[Ki]}],"break-after":[{"break-after":ce()}],"break-before":[{"break-before":ce()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ie(),rt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tu,rt]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",rt]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",tu,rt]}],"grid-cols":[{"grid-cols":[nu]}],"col-start-end":[{col:["auto",{span:["full",tu,rt]},rt]}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":[nu]}],"row-start-end":[{row:["auto",{span:[tu,rt]},rt]}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",rt]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",rt,e]}],"min-w":[{"min-w":[rt,e,"min","max","fit"]}],"max-w":[{"max-w":[rt,e,"none","full","min","max","fit","prose",{screen:[Ki]},Ki]}],h:[{h:[rt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[rt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[rt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[rt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ki,Hi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",pg]}],"font-family":[{font:[nu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",rt]}],"line-clamp":[{"line-clamp":["none",Al,pg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ri,rt]}],"list-image":[{"list-image":["none",rt]}],"list-style-type":[{list:["none","disc","decimal",rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ri,Hi]}],"underline-offset":[{"underline-offset":["auto",ri,rt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ie(),qP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$P]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},HP]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[T]}],"gradient-via":[{via:[T]}],"gradient-to":[{to:[T]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...re(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:re()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...re()]}],"outline-offset":[{"outline-offset":[ri,rt]}],"outline-w":[{outline:[ri,Hi]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[ri,Hi]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Ki,KP]}],"shadow-color":[{shadow:[nu]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...ae(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ae()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",Ki,rt]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[v]}],saturate:[{saturate:[O]}],sepia:[{sepia:[$]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[O]}],"backdrop-sepia":[{"backdrop-sepia":[$]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",rt]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",rt]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[U]}],"scale-x":[{"scale-x":[U]}],"scale-y":[{"scale-y":[U]}],rotate:[{rotate:[tu,rt]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[W]}],"skew-y":[{"skew-y":[W]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",rt]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",rt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",rt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[ri,Hi,pg]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},JP=kP(XP);function st(...n){return JP(lb(n))}const ZP=sP,Eb=E.forwardRef(({className:n,...e},t)=>l.jsx(tb,{ref:t,className:st("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));Eb.displayName=tb.displayName;const eR=Wu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),bb=E.forwardRef(({className:n,variant:e,...t},r)=>l.jsx(nb,{ref:r,className:st(eR({variant:e}),n),...t}));bb.displayName=nb.displayName;const tR=E.forwardRef(({className:n,...e},t)=>l.jsx(ib,{ref:t,className:st("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));tR.displayName=ib.displayName;const Tb=E.forwardRef(({className:n,...e},t)=>l.jsx(ob,{ref:t,className:st("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:l.jsx(_u,{className:"h-4 w-4"})}));Tb.displayName=ob.displayName;const Sb=E.forwardRef(({className:n,...e},t)=>l.jsx(rb,{ref:t,className:st("text-sm font-semibold",n),...e}));Sb.displayName=rb.displayName;const Nb=E.forwardRef(({className:n,...e},t)=>l.jsx(sb,{ref:t,className:st("text-sm opacity-90",n),...e}));Nb.displayName=sb.displayName;function nR(){const{toasts:n}=gj();return l.jsxs(ZP,{children:[n.map(function({id:e,title:t,description:r,action:i,...a}){return l.jsxs(bb,{...a,children:[l.jsxs("div",{className:"grid gap-1",children:[t&&l.jsx(Sb,{children:t}),r&&l.jsx(Nb,{children:r})]}),i,l.jsx(Tb,{})]},e)}),l.jsx(Eb,{})]})}var Ah={},X0;function rR(){if(X0)return Ah;X0=1;var n=O1();return Ah.createRoot=n.createRoot,Ah.hydrateRoot=n.hydrateRoot,Ah}var sR=rR(),J0=["light","dark"],iR="(prefers-color-scheme: dark)",oR=E.createContext(void 0),aR={setTheme:n=>{},themes:[]},lR=()=>{var n;return(n=E.useContext(oR))!=null?n:aR};E.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:c,attrs:d,nonce:f})=>{let m=a==="system",g=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${d.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,v=i?J0.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",y=(N,_=!1,w=!0)=>{let A=c?c[N]:N,I=_?N+"|| ''":`'${A}'`,O="";return i&&w&&!_&&J0.includes(N)&&(O+=`d.style.colorScheme = '${N}';`),t==="class"?_||A?O+=`c.add(${I})`:O+="null":A&&(O+=`d[s](n,${I})`),O},T=n?`!function(){${g}${y(n)}}()`:r?`!function(){try{${g}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${m})){var t='${iR}',m=window.matchMedia(t);if(m.media!==t||m.matches){${y("dark")}}else{${y("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${y(c?"x[e]":"e",!0)}}${m?"":"else{"+y(a,!1,!1)+"}"}${v}}catch(e){}}()`:`!function(){try{${g}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${y(c?"x[e]":"e",!0)}}else{${y(a,!1,!1)};}${v}}catch(t){}}();`;return E.createElement("script",{nonce:f,dangerouslySetInnerHTML:{__html:T}})});var cR=n=>{switch(n){case"success":return hR;case"info":return mR;case"warning":return fR;case"error":return pR;default:return null}},uR=Array(12).fill(0),dR=({visible:n})=>we.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},we.createElement("div",{className:"sonner-spinner"},uR.map((e,t)=>we.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),hR=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),fR=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),mR=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),pR=we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},we.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),gR=()=>{let[n,e]=we.useState(document.hidden);return we.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},Qg=1,vR=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...i}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Qg++,c=this.toasts.find(f=>f.id===a),d=e.dismissible===void 0?!0:e.dismissible;return c?this.toasts=this.toasts.map(f=>f.id===a?(this.publish({...f,...e,id:a,title:r}),{...f,...e,id:a,dismissible:d,title:r}):f):this.addToast({title:r,...i,dismissible:d,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let i=e instanceof Promise?e:e(),a=r!==void 0;return i.then(async c=>{if(xR(c)&&!c.ok){a=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:d,description:f})}else if(t.success!==void 0){a=!1;let d=typeof t.success=="function"?await t.success(c):t.success,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:d,description:f})}}).catch(async c=>{if(t.error!==void 0){a=!1;let d=typeof t.error=="function"?await t.error(c):t.error,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:d,description:f})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Qg++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},gr=new vR,yR=(n,e)=>{let t=(e==null?void 0:e.id)||Qg++;return gr.addToast({title:n,...e,id:t}),t},xR=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",wR=yR,_R=()=>gr.toasts;Object.assign(wR,{success:gr.success,info:gr.info,warning:gr.warning,error:gr.error,custom:gr.custom,message:gr.message,promise:gr.promise,dismiss:gr.dismiss,loading:gr.loading},{getHistory:_R});function ER(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}ER(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function jh(n){return n.label!==void 0}var bR=3,TR="32px",SR=4e3,NR=356,CR=14,IR=20,AR=200;function jR(...n){return n.filter(Boolean).join(" ")}var PR=n=>{var e,t,r,i,a,c,d,f,m,g;let{invert:v,toast:y,unstyled:T,interacting:N,setHeights:_,visibleToasts:w,heights:A,index:I,toasts:O,expanded:U,removeToast:$,defaultRichColors:W,closeButton:D,style:k,cancelButtonStyle:j,actionButtonStyle:P,className:F="",descriptionClassName:M="",duration:L,position:J,gap:ie,loadingIcon:re,expandByDefault:ae,classNames:K,icons:ne,closeButtonAriaLabel:ce="Close toast",pauseWhenPageIsHidden:B,cn:X}=n,[he,Ie]=we.useState(!1),[Le,Ae]=we.useState(!1),[ge,_e]=we.useState(!1),[Te,De]=we.useState(!1),[tt,nt]=we.useState(0),[fe,Ye]=we.useState(0),qt=we.useRef(null),Ot=we.useRef(null),Fe=I===0,Un=I+1<=w,be=y.type,ct=y.dismissible!==!1,wn=y.className||"",lr=y.descriptionClassName||"",In=we.useMemo(()=>A.findIndex(Be=>Be.toastId===y.id)||0,[A,y.id]),Wt=we.useMemo(()=>{var Be;return(Be=y.closeButton)!=null?Be:D},[y.closeButton,D]),kr=we.useMemo(()=>y.duration||L||SR,[y.duration,L]),Ct=we.useRef(0),wt=we.useRef(0),zn=we.useRef(0),bt=we.useRef(null),[Or,zs]=J.split("-"),ls=we.useMemo(()=>A.reduce((Be,gt,mt)=>mt>=In?Be:Be+gt.height,0),[A,In]),Ei=gR(),Lo=y.invert||v,Bs=be==="loading";wt.current=we.useMemo(()=>In*ie+ls,[In,ls]),we.useEffect(()=>{Ie(!0)},[]),we.useLayoutEffect(()=>{if(!he)return;let Be=Ot.current,gt=Be.style.height;Be.style.height="auto";let mt=Be.getBoundingClientRect().height;Be.style.height=gt,Ye(mt),_(Vt=>Vt.find(Gt=>Gt.toastId===y.id)?Vt.map(Gt=>Gt.toastId===y.id?{...Gt,height:mt}:Gt):[{toastId:y.id,height:mt,position:y.position},...Vt])},[he,y.title,y.description,_,y.id]);let Qn=we.useCallback(()=>{Ae(!0),nt(wt.current),_(Be=>Be.filter(gt=>gt.toastId!==y.id)),setTimeout(()=>{$(y)},AR)},[y,$,_,wt]);we.useEffect(()=>{if(y.promise&&be==="loading"||y.duration===1/0||y.type==="loading")return;let Be,gt=kr;return U||N||B&&Ei?(()=>{if(zn.current<Ct.current){let mt=new Date().getTime()-Ct.current;gt=gt-mt}zn.current=new Date().getTime()})():gt!==1/0&&(Ct.current=new Date().getTime(),Be=setTimeout(()=>{var mt;(mt=y.onAutoClose)==null||mt.call(y,y),Qn()},gt)),()=>clearTimeout(Be)},[U,N,ae,y,kr,Qn,y.promise,be,B,Ei]),we.useEffect(()=>{let Be=Ot.current;if(Be){let gt=Be.getBoundingClientRect().height;return Ye(gt),_(mt=>[{toastId:y.id,height:gt,position:y.position},...mt]),()=>_(mt=>mt.filter(Vt=>Vt.toastId!==y.id))}},[_,y.id]),we.useEffect(()=>{y.delete&&Qn()},[Qn,y.delete]);function Mo(){return ne!=null&&ne.loading?we.createElement("div",{className:"sonner-loader","data-visible":be==="loading"},ne.loading):re?we.createElement("div",{className:"sonner-loader","data-visible":be==="loading"},re):we.createElement(dR,{visible:be==="loading"})}return we.createElement("li",{"aria-live":y.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ot,className:X(F,wn,K==null?void 0:K.toast,(e=y==null?void 0:y.classNames)==null?void 0:e.toast,K==null?void 0:K.default,K==null?void 0:K[be],(t=y==null?void 0:y.classNames)==null?void 0:t[be]),"data-sonner-toast":"","data-rich-colors":(r=y.richColors)!=null?r:W,"data-styled":!(y.jsx||y.unstyled||T),"data-mounted":he,"data-promise":!!y.promise,"data-removed":Le,"data-visible":Un,"data-y-position":Or,"data-x-position":zs,"data-index":I,"data-front":Fe,"data-swiping":ge,"data-dismissible":ct,"data-type":be,"data-invert":Lo,"data-swipe-out":Te,"data-expanded":!!(U||ae&&he),style:{"--index":I,"--toasts-before":I,"--z-index":O.length-I,"--offset":`${Le?tt:wt.current}px`,"--initial-height":ae?"auto":`${fe}px`,...k,...y.style},onPointerDown:Be=>{Bs||!ct||(qt.current=new Date,nt(wt.current),Be.target.setPointerCapture(Be.pointerId),Be.target.tagName!=="BUTTON"&&(_e(!0),bt.current={x:Be.clientX,y:Be.clientY}))},onPointerUp:()=>{var Be,gt,mt,Vt;if(Te||!ct)return;bt.current=null;let Gt=Number(((Be=Ot.current)==null?void 0:Be.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Dr=new Date().getTime()-((gt=qt.current)==null?void 0:gt.getTime()),wr=Math.abs(Gt)/Dr;if(Math.abs(Gt)>=IR||wr>.11){nt(wt.current),(mt=y.onDismiss)==null||mt.call(y,y),Qn(),De(!0);return}(Vt=Ot.current)==null||Vt.style.setProperty("--swipe-amount","0px"),_e(!1)},onPointerMove:Be=>{var gt;if(!bt.current||!ct)return;let mt=Be.clientY-bt.current.y,Vt=Be.clientX-bt.current.x,Gt=(Or==="top"?Math.min:Math.max)(0,mt),Dr=Be.pointerType==="touch"?10:2;Math.abs(Gt)>Dr?(gt=Ot.current)==null||gt.style.setProperty("--swipe-amount",`${mt}px`):Math.abs(Vt)>Dr&&(bt.current=null)}},Wt&&!y.jsx?we.createElement("button",{"aria-label":ce,"data-disabled":Bs,"data-close-button":!0,onClick:Bs||!ct?()=>{}:()=>{var Be;Qn(),(Be=y.onDismiss)==null||Be.call(y,y)},className:X(K==null?void 0:K.closeButton,(i=y==null?void 0:y.classNames)==null?void 0:i.closeButton)},we.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},we.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),we.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,y.jsx||we.isValidElement(y.title)?y.jsx||y.title:we.createElement(we.Fragment,null,be||y.icon||y.promise?we.createElement("div",{"data-icon":"",className:X(K==null?void 0:K.icon,(a=y==null?void 0:y.classNames)==null?void 0:a.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||Mo():null,y.type!=="loading"?y.icon||(ne==null?void 0:ne[be])||cR(be):null):null,we.createElement("div",{"data-content":"",className:X(K==null?void 0:K.content,(c=y==null?void 0:y.classNames)==null?void 0:c.content)},we.createElement("div",{"data-title":"",className:X(K==null?void 0:K.title,(d=y==null?void 0:y.classNames)==null?void 0:d.title)},y.title),y.description?we.createElement("div",{"data-description":"",className:X(M,lr,K==null?void 0:K.description,(f=y==null?void 0:y.classNames)==null?void 0:f.description)},y.description):null),we.isValidElement(y.cancel)?y.cancel:y.cancel&&jh(y.cancel)?we.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||j,onClick:Be=>{var gt,mt;jh(y.cancel)&&ct&&((mt=(gt=y.cancel).onClick)==null||mt.call(gt,Be),Qn())},className:X(K==null?void 0:K.cancelButton,(m=y==null?void 0:y.classNames)==null?void 0:m.cancelButton)},y.cancel.label):null,we.isValidElement(y.action)?y.action:y.action&&jh(y.action)?we.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||P,onClick:Be=>{var gt,mt;jh(y.action)&&(Be.defaultPrevented||((mt=(gt=y.action).onClick)==null||mt.call(gt,Be),Qn()))},className:X(K==null?void 0:K.actionButton,(g=y==null?void 0:y.classNames)==null?void 0:g.actionButton)},y.action.label):null))};function Z0(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var RR=n=>{let{invert:e,position:t="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:a,className:c,offset:d,theme:f="light",richColors:m,duration:g,style:v,visibleToasts:y=bR,toastOptions:T,dir:N=Z0(),gap:_=CR,loadingIcon:w,icons:A,containerAriaLabel:I="Notifications",pauseWhenPageIsHidden:O,cn:U=jR}=n,[$,W]=we.useState([]),D=we.useMemo(()=>Array.from(new Set([t].concat($.filter(B=>B.position).map(B=>B.position)))),[$,t]),[k,j]=we.useState([]),[P,F]=we.useState(!1),[M,L]=we.useState(!1),[J,ie]=we.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),re=we.useRef(null),ae=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=we.useRef(null),ne=we.useRef(!1),ce=we.useCallback(B=>{var X;(X=$.find(he=>he.id===B.id))!=null&&X.delete||gr.dismiss(B.id),W(he=>he.filter(({id:Ie})=>Ie!==B.id))},[$]);return we.useEffect(()=>gr.subscribe(B=>{if(B.dismiss){W(X=>X.map(he=>he.id===B.id?{...he,delete:!0}:he));return}setTimeout(()=>{Hv.flushSync(()=>{W(X=>{let he=X.findIndex(Ie=>Ie.id===B.id);return he!==-1?[...X.slice(0,he),{...X[he],...B},...X.slice(he+1)]:[B,...X]})})})}),[]),we.useEffect(()=>{if(f!=="system"){ie(f);return}f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:B})=>{ie(B?"dark":"light")})},[f]),we.useEffect(()=>{$.length<=1&&F(!1)},[$]),we.useEffect(()=>{let B=X=>{var he,Ie;r.every(Le=>X[Le]||X.code===Le)&&(F(!0),(he=re.current)==null||he.focus()),X.code==="Escape"&&(document.activeElement===re.current||(Ie=re.current)!=null&&Ie.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[r]),we.useEffect(()=>{if(re.current)return()=>{K.current&&(K.current.focus({preventScroll:!0}),K.current=null,ne.current=!1)}},[re.current]),$.length?we.createElement("section",{"aria-label":`${I} ${ae}`,tabIndex:-1},D.map((B,X)=>{var he;let[Ie,Le]=B.split("-");return we.createElement("ol",{key:B,dir:N==="auto"?Z0():N,tabIndex:-1,ref:re,className:c,"data-sonner-toaster":!0,"data-theme":J,"data-y-position":Ie,"data-x-position":Le,style:{"--front-toast-height":`${((he=k[0])==null?void 0:he.height)||0}px`,"--offset":typeof d=="number"?`${d}px`:d||TR,"--width":`${NR}px`,"--gap":`${_}px`,...v},onBlur:Ae=>{ne.current&&!Ae.currentTarget.contains(Ae.relatedTarget)&&(ne.current=!1,K.current&&(K.current.focus({preventScroll:!0}),K.current=null))},onFocus:Ae=>{Ae.target instanceof HTMLElement&&Ae.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,K.current=Ae.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{M||F(!1)},onPointerDown:Ae=>{Ae.target instanceof HTMLElement&&Ae.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},$.filter(Ae=>!Ae.position&&X===0||Ae.position===B).map((Ae,ge)=>{var _e,Te;return we.createElement(PR,{key:Ae.id,icons:A,index:ge,toast:Ae,defaultRichColors:m,duration:(_e=T==null?void 0:T.duration)!=null?_e:g,className:T==null?void 0:T.className,descriptionClassName:T==null?void 0:T.descriptionClassName,invert:e,visibleToasts:y,closeButton:(Te=T==null?void 0:T.closeButton)!=null?Te:a,interacting:M,position:B,style:T==null?void 0:T.style,unstyled:T==null?void 0:T.unstyled,classNames:T==null?void 0:T.classNames,cancelButtonStyle:T==null?void 0:T.cancelButtonStyle,actionButtonStyle:T==null?void 0:T.actionButtonStyle,removeToast:ce,toasts:$.filter(De=>De.position==Ae.position),heights:k.filter(De=>De.position==Ae.position),setHeights:j,expandByDefault:i,gap:_,loadingIcon:w,expanded:P,pauseWhenPageIsHidden:O,cn:U})}))})):null};const kR=({...n})=>{const{theme:e="system"}=lR();return l.jsx(RR,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};function OR(n,e=[]){let t=[];function r(a,c){const d=E.createContext(c),f=t.length;t=[...t,c];const m=v=>{var A;const{scope:y,children:T,...N}=v,_=((A=y==null?void 0:y[n])==null?void 0:A[f])||d,w=E.useMemo(()=>N,Object.values(N));return l.jsx(_.Provider,{value:w,children:T})};m.displayName=a+"Provider";function g(v,y){var _;const T=((_=y==null?void 0:y[n])==null?void 0:_[f])||d,N=E.useContext(T);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${a}\``)}return[m,g]}const i=()=>{const a=t.map(c=>E.createContext(c));return function(d){const f=(d==null?void 0:d[n])||a;return E.useMemo(()=>({[`__scope${n}`]:{...d,[n]:f}}),[d,f])}};return i.scopeName=n,[r,DR(i,...e)]}function DR(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const c=r.reduce((d,{useScope:f,scopeName:m})=>{const v=f(a)[`__scope${m}`];return{...d,...v}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var LR="DismissableLayer",Yg="dismissableLayer.update",MR="dismissableLayer.pointerDownOutside",FR="dismissableLayer.focusOutside",e_,Cb=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ib=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:c,onDismiss:d,...f}=n,m=E.useContext(Cb),[g,v]=E.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,T]=E.useState({}),N=Et(e,D=>v(D)),_=Array.from(m.layers),[w]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),A=_.indexOf(w),I=g?_.indexOf(g):-1,O=m.layersWithOutsidePointerEventsDisabled.size>0,U=I>=A,$=zR(D=>{const k=D.target,j=[...m.branches].some(P=>P.contains(k));!U||j||(i==null||i(D),c==null||c(D),D.defaultPrevented||d==null||d())},y),W=BR(D=>{const k=D.target;[...m.branches].some(P=>P.contains(k))||(a==null||a(D),c==null||c(D),D.defaultPrevented||d==null||d())},y);return Gv(D=>{I===m.layers.size-1&&(r==null||r(D),!D.defaultPrevented&&d&&(D.preventDefault(),d()))},y),E.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(e_=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),t_(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=e_)}},[g,y,t,m]),E.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),t_())},[g,m]),E.useEffect(()=>{const D=()=>T({});return document.addEventListener(Yg,D),()=>document.removeEventListener(Yg,D)},[]),l.jsx(Ge.div,{...f,ref:N,style:{pointerEvents:O?U?"auto":"none":void 0,...n.style},onFocusCapture:ze(n.onFocusCapture,W.onFocusCapture),onBlurCapture:ze(n.onBlurCapture,W.onBlurCapture),onPointerDownCapture:ze(n.onPointerDownCapture,$.onPointerDownCapture)})});Ib.displayName=LR;var VR="DismissableLayerBranch",UR=E.forwardRef((n,e)=>{const t=E.useContext(Cb),r=E.useRef(null),i=Et(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(Ge.div,{...n,ref:i})});UR.displayName=VR;function zR(n,e=globalThis==null?void 0:globalThis.document){const t=fn(n),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const a=d=>{if(d.target&&!r.current){let f=function(){Ab(MR,t,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=f,e.addEventListener("click",i.current,{once:!0})):f()}else e.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function BR(n,e=globalThis==null?void 0:globalThis.document){const t=fn(n),r=E.useRef(!1);return E.useEffect(()=>{const i=a=>{a.target&&!r.current&&Ab(FR,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function t_(){const n=new CustomEvent(Yg);document.dispatchEvent(n)}function Ab(n,e,t,{discrete:r}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?qf(i,a):i.dispatchEvent(a)}var $R=k1.useId||(()=>{}),qR=0;function Ku(n){const[e,t]=E.useState($R());return Zt(()=>{t(r=>r??String(qR++))},[n]),e?`radix-${e}`:""}const WR=["top","right","bottom","left"],yo=Math.min,vr=Math.max,ff=Math.round,Ph=Math.floor,xo=n=>({x:n,y:n}),HR={left:"right",right:"left",bottom:"top",top:"bottom"},KR={start:"end",end:"start"};function Xg(n,e,t){return vr(n,yo(e,t))}function di(n,e){return typeof n=="function"?n(e):n}function hi(n){return n.split("-")[0]}function ic(n){return n.split("-")[1]}function ty(n){return n==="x"?"y":"x"}function ny(n){return n==="y"?"height":"width"}function wo(n){return["top","bottom"].includes(hi(n))?"y":"x"}function ry(n){return ty(wo(n))}function GR(n,e,t){t===void 0&&(t=!1);const r=ic(n),i=ry(n),a=ny(i);let c=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=mf(c)),[c,mf(c)]}function QR(n){const e=mf(n);return[Jg(n),e,Jg(e)]}function Jg(n){return n.replace(/start|end/g,e=>KR[e])}function YR(n,e,t){const r=["left","right"],i=["right","left"],a=["top","bottom"],c=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?a:c;default:return[]}}function XR(n,e,t,r){const i=ic(n);let a=YR(hi(n),t==="start",r);return i&&(a=a.map(c=>c+"-"+i),e&&(a=a.concat(a.map(Jg)))),a}function mf(n){return n.replace(/left|right|bottom|top/g,e=>HR[e])}function JR(n){return{top:0,right:0,bottom:0,left:0,...n}}function jb(n){return typeof n!="number"?JR(n):{top:n,right:n,bottom:n,left:n}}function pf(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function n_(n,e,t){let{reference:r,floating:i}=n;const a=wo(e),c=ry(e),d=ny(c),f=hi(e),m=a==="y",g=r.x+r.width/2-i.width/2,v=r.y+r.height/2-i.height/2,y=r[d]/2-i[d]/2;let T;switch(f){case"top":T={x:g,y:r.y-i.height};break;case"bottom":T={x:g,y:r.y+r.height};break;case"right":T={x:r.x+r.width,y:v};break;case"left":T={x:r.x-i.width,y:v};break;default:T={x:r.x,y:r.y}}switch(ic(e)){case"start":T[c]-=y*(t&&m?-1:1);break;case"end":T[c]+=y*(t&&m?-1:1);break}return T}const ZR=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:c}=t,d=a.filter(Boolean),f=await(c.isRTL==null?void 0:c.isRTL(e));let m=await c.getElementRects({reference:n,floating:e,strategy:i}),{x:g,y:v}=n_(m,r,f),y=r,T={},N=0;for(let _=0;_<d.length;_++){const{name:w,fn:A}=d[_],{x:I,y:O,data:U,reset:$}=await A({x:g,y:v,initialPlacement:r,placement:y,strategy:i,middlewareData:T,rects:m,platform:c,elements:{reference:n,floating:e}});g=I??g,v=O??v,T={...T,[w]:{...T[w],...U}},$&&N<=50&&(N++,typeof $=="object"&&($.placement&&(y=$.placement),$.rects&&(m=$.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:i}):$.rects),{x:g,y:v}=n_(m,y,f)),_=-1)}return{x:g,y:v,placement:y,strategy:i,middlewareData:T}};async function Eu(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:c,elements:d,strategy:f}=n,{boundary:m="clippingAncestors",rootBoundary:g="viewport",elementContext:v="floating",altBoundary:y=!1,padding:T=0}=di(e,n),N=jb(T),w=d[y?v==="floating"?"reference":"floating":v],A=pf(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(w)))==null||t?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(d.floating)),boundary:m,rootBoundary:g,strategy:f})),I=v==="floating"?{x:r,y:i,width:c.floating.width,height:c.floating.height}:c.reference,O=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d.floating)),U=await(a.isElement==null?void 0:a.isElement(O))?await(a.getScale==null?void 0:a.getScale(O))||{x:1,y:1}:{x:1,y:1},$=pf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:I,offsetParent:O,strategy:f}):I);return{top:(A.top-$.top+N.top)/U.y,bottom:($.bottom-A.bottom+N.bottom)/U.y,left:(A.left-$.left+N.left)/U.x,right:($.right-A.right+N.right)/U.x}}const e2=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:a,platform:c,elements:d,middlewareData:f}=e,{element:m,padding:g=0}=di(n,e)||{};if(m==null)return{};const v=jb(g),y={x:t,y:r},T=ry(i),N=ny(T),_=await c.getDimensions(m),w=T==="y",A=w?"top":"left",I=w?"bottom":"right",O=w?"clientHeight":"clientWidth",U=a.reference[N]+a.reference[T]-y[T]-a.floating[N],$=y[T]-a.reference[T],W=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let D=W?W[O]:0;(!D||!await(c.isElement==null?void 0:c.isElement(W)))&&(D=d.floating[O]||a.floating[N]);const k=U/2-$/2,j=D/2-_[N]/2-1,P=yo(v[A],j),F=yo(v[I],j),M=P,L=D-_[N]-F,J=D/2-_[N]/2+k,ie=Xg(M,J,L),re=!f.arrow&&ic(i)!=null&&J!==ie&&a.reference[N]/2-(J<M?P:F)-_[N]/2<0,ae=re?J<M?J-M:J-L:0;return{[T]:y[T]+ae,data:{[T]:ie,centerOffset:J-ie-ae,...re&&{alignmentOffset:ae}},reset:re}}}),t2=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:a,rects:c,initialPlacement:d,platform:f,elements:m}=e,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:y,fallbackStrategy:T="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:_=!0,...w}=di(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const A=hi(i),I=wo(d),O=hi(d)===d,U=await(f.isRTL==null?void 0:f.isRTL(m.floating)),$=y||(O||!_?[mf(d)]:QR(d)),W=N!=="none";!y&&W&&$.push(...XR(d,_,N,U));const D=[d,...$],k=await Eu(e,w),j=[];let P=((r=a.flip)==null?void 0:r.overflows)||[];if(g&&j.push(k[A]),v){const J=GR(i,c,U);j.push(k[J[0]],k[J[1]])}if(P=[...P,{placement:i,overflows:j}],!j.every(J=>J<=0)){var F,M;const J=(((F=a.flip)==null?void 0:F.index)||0)+1,ie=D[J];if(ie)return{data:{index:J,overflows:P},reset:{placement:ie}};let re=(M=P.filter(ae=>ae.overflows[0]<=0).sort((ae,K)=>ae.overflows[1]-K.overflows[1])[0])==null?void 0:M.placement;if(!re)switch(T){case"bestFit":{var L;const ae=(L=P.filter(K=>{if(W){const ne=wo(K.placement);return ne===I||ne==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(ne=>ne>0).reduce((ne,ce)=>ne+ce,0)]).sort((K,ne)=>K[1]-ne[1])[0])==null?void 0:L[0];ae&&(re=ae);break}case"initialPlacement":re=d;break}if(i!==re)return{reset:{placement:re}}}return{}}}};function r_(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function s_(n){return WR.some(e=>n[e]>=0)}const n2=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=di(n,e);switch(r){case"referenceHidden":{const a=await Eu(e,{...i,elementContext:"reference"}),c=r_(a,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:s_(c)}}}case"escaped":{const a=await Eu(e,{...i,altBoundary:!0}),c=r_(a,t.floating);return{data:{escapedOffsets:c,escaped:s_(c)}}}default:return{}}}}};async function r2(n,e){const{placement:t,platform:r,elements:i}=n,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),c=hi(t),d=ic(t),f=wo(t)==="y",m=["left","top"].includes(c)?-1:1,g=a&&f?-1:1,v=di(e,n);let{mainAxis:y,crossAxis:T,alignmentAxis:N}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return d&&typeof N=="number"&&(T=d==="end"?N*-1:N),f?{x:T*g,y:y*m}:{x:y*m,y:T*g}}const s2=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:a,placement:c,middlewareData:d}=e,f=await r2(e,n);return c===((t=d.offset)==null?void 0:t.placement)&&(r=d.arrow)!=null&&r.alignmentOffset?{}:{x:i+f.x,y:a+f.y,data:{...f,placement:c}}}}},i2=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:d={fn:w=>{let{x:A,y:I}=w;return{x:A,y:I}}},...f}=di(n,e),m={x:t,y:r},g=await Eu(e,f),v=wo(hi(i)),y=ty(v);let T=m[y],N=m[v];if(a){const w=y==="y"?"top":"left",A=y==="y"?"bottom":"right",I=T+g[w],O=T-g[A];T=Xg(I,T,O)}if(c){const w=v==="y"?"top":"left",A=v==="y"?"bottom":"right",I=N+g[w],O=N-g[A];N=Xg(I,N,O)}const _=d.fn({...e,[y]:T,[v]:N});return{..._,data:{x:_.x-t,y:_.y-r,enabled:{[y]:a,[v]:c}}}}}},o2=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:a,middlewareData:c}=e,{offset:d=0,mainAxis:f=!0,crossAxis:m=!0}=di(n,e),g={x:t,y:r},v=wo(i),y=ty(v);let T=g[y],N=g[v];const _=di(d,e),w=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(f){const O=y==="y"?"height":"width",U=a.reference[y]-a.floating[O]+w.mainAxis,$=a.reference[y]+a.reference[O]-w.mainAxis;T<U?T=U:T>$&&(T=$)}if(m){var A,I;const O=y==="y"?"width":"height",U=["top","left"].includes(hi(i)),$=a.reference[v]-a.floating[O]+(U&&((A=c.offset)==null?void 0:A[v])||0)+(U?0:w.crossAxis),W=a.reference[v]+a.reference[O]+(U?0:((I=c.offset)==null?void 0:I[v])||0)-(U?w.crossAxis:0);N<$?N=$:N>W&&(N=W)}return{[y]:T,[v]:N}}}},a2=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:a,platform:c,elements:d}=e,{apply:f=()=>{},...m}=di(n,e),g=await Eu(e,m),v=hi(i),y=ic(i),T=wo(i)==="y",{width:N,height:_}=a.floating;let w,A;v==="top"||v==="bottom"?(w=v,A=y===(await(c.isRTL==null?void 0:c.isRTL(d.floating))?"start":"end")?"left":"right"):(A=v,w=y==="end"?"top":"bottom");const I=_-g.top-g.bottom,O=N-g.left-g.right,U=yo(_-g[w],I),$=yo(N-g[A],O),W=!e.middlewareData.shift;let D=U,k=$;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(k=O),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(D=I),W&&!y){const P=vr(g.left,0),F=vr(g.right,0),M=vr(g.top,0),L=vr(g.bottom,0);T?k=N-2*(P!==0||F!==0?P+F:vr(g.left,g.right)):D=_-2*(M!==0||L!==0?M+L:vr(g.top,g.bottom))}await f({...e,availableWidth:k,availableHeight:D});const j=await c.getDimensions(d.floating);return N!==j.width||_!==j.height?{reset:{rects:!0}}:{}}}};function Kf(){return typeof window<"u"}function oc(n){return Pb(n)?(n.nodeName||"").toLowerCase():"#document"}function xr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Ms(n){var e;return(e=(Pb(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Pb(n){return Kf()?n instanceof Node||n instanceof xr(n).Node:!1}function ss(n){return Kf()?n instanceof Element||n instanceof xr(n).Element:!1}function ks(n){return Kf()?n instanceof HTMLElement||n instanceof xr(n).HTMLElement:!1}function i_(n){return!Kf()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof xr(n).ShadowRoot}function Gu(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=is(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function l2(n){return["table","td","th"].includes(oc(n))}function Gf(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function sy(n){const e=iy(),t=ss(n)?is(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function c2(n){let e=_o(n);for(;ks(e)&&!Hl(e);){if(sy(e))return e;if(Gf(e))return null;e=_o(e)}return null}function iy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Hl(n){return["html","body","#document"].includes(oc(n))}function is(n){return xr(n).getComputedStyle(n)}function Qf(n){return ss(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function _o(n){if(oc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||i_(n)&&n.host||Ms(n);return i_(e)?e.host:e}function Rb(n){const e=_o(n);return Hl(e)?n.ownerDocument?n.ownerDocument.body:n.body:ks(e)&&Gu(e)?e:Rb(e)}function bu(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Rb(n),a=i===((r=n.ownerDocument)==null?void 0:r.body),c=xr(i);if(a){const d=Zg(c);return e.concat(c,c.visualViewport||[],Gu(i)?i:[],d&&t?bu(d):[])}return e.concat(i,bu(i,[],t))}function Zg(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function kb(n){const e=is(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ks(n),a=i?n.offsetWidth:t,c=i?n.offsetHeight:r,d=ff(t)!==a||ff(r)!==c;return d&&(t=a,r=c),{width:t,height:r,$:d}}function oy(n){return ss(n)?n:n.contextElement}function jl(n){const e=oy(n);if(!ks(e))return xo(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:a}=kb(e);let c=(a?ff(t.width):t.width)/r,d=(a?ff(t.height):t.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!d||!Number.isFinite(d))&&(d=1),{x:c,y:d}}const u2=xo(0);function Ob(n){const e=xr(n);return!iy()||!e.visualViewport?u2:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function d2(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==xr(n)?!1:e}function wa(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=oy(n);let c=xo(1);e&&(r?ss(r)&&(c=jl(r)):c=jl(n));const d=d2(a,t,r)?Ob(a):xo(0);let f=(i.left+d.x)/c.x,m=(i.top+d.y)/c.y,g=i.width/c.x,v=i.height/c.y;if(a){const y=xr(a),T=r&&ss(r)?xr(r):r;let N=y,_=Zg(N);for(;_&&r&&T!==N;){const w=jl(_),A=_.getBoundingClientRect(),I=is(_),O=A.left+(_.clientLeft+parseFloat(I.paddingLeft))*w.x,U=A.top+(_.clientTop+parseFloat(I.paddingTop))*w.y;f*=w.x,m*=w.y,g*=w.x,v*=w.y,f+=O,m+=U,N=xr(_),_=Zg(N)}}return pf({width:g,height:v,x:f,y:m})}function h2(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const a=i==="fixed",c=Ms(r),d=e?Gf(e.floating):!1;if(r===c||d&&a)return t;let f={scrollLeft:0,scrollTop:0},m=xo(1);const g=xo(0),v=ks(r);if((v||!v&&!a)&&((oc(r)!=="body"||Gu(c))&&(f=Qf(r)),ks(r))){const y=wa(r);m=jl(r),g.x=y.x+r.clientLeft,g.y=y.y+r.clientTop}return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-f.scrollLeft*m.x+g.x,y:t.y*m.y-f.scrollTop*m.y+g.y}}function f2(n){return Array.from(n.getClientRects())}function ev(n,e){const t=Qf(n).scrollLeft;return e?e.left+t:wa(Ms(n)).left+t}function m2(n){const e=Ms(n),t=Qf(n),r=n.ownerDocument.body,i=vr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=vr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+ev(n);const d=-t.scrollTop;return is(r).direction==="rtl"&&(c+=vr(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:c,y:d}}function p2(n,e){const t=xr(n),r=Ms(n),i=t.visualViewport;let a=r.clientWidth,c=r.clientHeight,d=0,f=0;if(i){a=i.width,c=i.height;const m=iy();(!m||m&&e==="fixed")&&(d=i.offsetLeft,f=i.offsetTop)}return{width:a,height:c,x:d,y:f}}function g2(n,e){const t=wa(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,a=ks(n)?jl(n):xo(1),c=n.clientWidth*a.x,d=n.clientHeight*a.y,f=i*a.x,m=r*a.y;return{width:c,height:d,x:f,y:m}}function o_(n,e,t){let r;if(e==="viewport")r=p2(n,t);else if(e==="document")r=m2(Ms(n));else if(ss(e))r=g2(e,t);else{const i=Ob(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return pf(r)}function Db(n,e){const t=_o(n);return t===e||!ss(t)||Hl(t)?!1:is(t).position==="fixed"||Db(t,e)}function v2(n,e){const t=e.get(n);if(t)return t;let r=bu(n,[],!1).filter(d=>ss(d)&&oc(d)!=="body"),i=null;const a=is(n).position==="fixed";let c=a?_o(n):n;for(;ss(c)&&!Hl(c);){const d=is(c),f=sy(c);!f&&d.position==="fixed"&&(i=null),(a?!f&&!i:!f&&d.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Gu(c)&&!f&&Db(n,c))?r=r.filter(g=>g!==c):i=d,c=_o(c)}return e.set(n,r),r}function y2(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const c=[...t==="clippingAncestors"?Gf(e)?[]:v2(e,this._c):[].concat(t),r],d=c[0],f=c.reduce((m,g)=>{const v=o_(e,g,i);return m.top=vr(v.top,m.top),m.right=yo(v.right,m.right),m.bottom=yo(v.bottom,m.bottom),m.left=vr(v.left,m.left),m},o_(e,d,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function x2(n){const{width:e,height:t}=kb(n);return{width:e,height:t}}function w2(n,e,t){const r=ks(e),i=Ms(e),a=t==="fixed",c=wa(n,!0,a,e);let d={scrollLeft:0,scrollTop:0};const f=xo(0);if(r||!r&&!a)if((oc(e)!=="body"||Gu(i))&&(d=Qf(e)),r){const T=wa(e,!0,a,e);f.x=T.x+e.clientLeft,f.y=T.y+e.clientTop}else i&&(f.x=ev(i));let m=0,g=0;if(i&&!r&&!a){const T=i.getBoundingClientRect();g=T.top+d.scrollTop,m=T.left+d.scrollLeft-ev(i,T)}const v=c.left+d.scrollLeft-f.x-m,y=c.top+d.scrollTop-f.y-g;return{x:v,y,width:c.width,height:c.height}}function gg(n){return is(n).position==="static"}function a_(n,e){if(!ks(n)||is(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Ms(n)===t&&(t=t.ownerDocument.body),t}function Lb(n,e){const t=xr(n);if(Gf(n))return t;if(!ks(n)){let i=_o(n);for(;i&&!Hl(i);){if(ss(i)&&!gg(i))return i;i=_o(i)}return t}let r=a_(n,e);for(;r&&l2(r)&&gg(r);)r=a_(r,e);return r&&Hl(r)&&gg(r)&&!sy(r)?t:r||c2(n)||t}const _2=async function(n){const e=this.getOffsetParent||Lb,t=this.getDimensions,r=await t(n.floating);return{reference:w2(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function E2(n){return is(n).direction==="rtl"}const b2={convertOffsetParentRelativeRectToViewportRelativeRect:h2,getDocumentElement:Ms,getClippingRect:y2,getOffsetParent:Lb,getElementRects:_2,getClientRects:f2,getDimensions:x2,getScale:jl,isElement:ss,isRTL:E2};function T2(n,e){let t=null,r;const i=Ms(n);function a(){var d;clearTimeout(r),(d=t)==null||d.disconnect(),t=null}function c(d,f){d===void 0&&(d=!1),f===void 0&&(f=1),a();const{left:m,top:g,width:v,height:y}=n.getBoundingClientRect();if(d||e(),!v||!y)return;const T=Ph(g),N=Ph(i.clientWidth-(m+v)),_=Ph(i.clientHeight-(g+y)),w=Ph(m),I={rootMargin:-T+"px "+-N+"px "+-_+"px "+-w+"px",threshold:vr(0,yo(1,f))||1};let O=!0;function U($){const W=$[0].intersectionRatio;if(W!==f){if(!O)return c();W?c(!1,W):r=setTimeout(()=>{c(!1,1e-7)},1e3)}O=!1}try{t=new IntersectionObserver(U,{...I,root:i.ownerDocument})}catch{t=new IntersectionObserver(U,I)}t.observe(n)}return c(!0),a}function S2(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,m=oy(n),g=i||a?[...m?bu(m):[],...bu(e)]:[];g.forEach(A=>{i&&A.addEventListener("scroll",t,{passive:!0}),a&&A.addEventListener("resize",t)});const v=m&&d?T2(m,t):null;let y=-1,T=null;c&&(T=new ResizeObserver(A=>{let[I]=A;I&&I.target===m&&T&&(T.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var O;(O=T)==null||O.observe(e)})),t()}),m&&!f&&T.observe(m),T.observe(e));let N,_=f?wa(n):null;f&&w();function w(){const A=wa(n);_&&(A.x!==_.x||A.y!==_.y||A.width!==_.width||A.height!==_.height)&&t(),_=A,N=requestAnimationFrame(w)}return t(),()=>{var A;g.forEach(I=>{i&&I.removeEventListener("scroll",t),a&&I.removeEventListener("resize",t)}),v==null||v(),(A=T)==null||A.disconnect(),T=null,f&&cancelAnimationFrame(N)}}const N2=s2,C2=i2,I2=t2,A2=a2,j2=n2,l_=e2,P2=o2,R2=(n,e,t)=>{const r=new Map,i={platform:b2,...t},a={...i.platform,_c:r};return ZR(n,e,{...i,platform:a})};var Kh=typeof document<"u"?E.useLayoutEffect:E.useEffect;function gf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!gf(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const a=i[r];if(!(a==="_owner"&&n.$$typeof)&&!gf(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function Mb(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function c_(n,e){const t=Mb(n);return Math.round(e*t)/t}function vg(n){const e=E.useRef(n);return Kh(()=>{e.current=n}),e}function k2(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:c}={},transform:d=!0,whileElementsMounted:f,open:m}=n,[g,v]=E.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[y,T]=E.useState(r);gf(y,r)||T(r);const[N,_]=E.useState(null),[w,A]=E.useState(null),I=E.useCallback(K=>{K!==W.current&&(W.current=K,_(K))},[]),O=E.useCallback(K=>{K!==D.current&&(D.current=K,A(K))},[]),U=a||N,$=c||w,W=E.useRef(null),D=E.useRef(null),k=E.useRef(g),j=f!=null,P=vg(f),F=vg(i),M=vg(m),L=E.useCallback(()=>{if(!W.current||!D.current)return;const K={placement:e,strategy:t,middleware:y};F.current&&(K.platform=F.current),R2(W.current,D.current,K).then(ne=>{const ce={...ne,isPositioned:M.current!==!1};J.current&&!gf(k.current,ce)&&(k.current=ce,Aa.flushSync(()=>{v(ce)}))})},[y,e,t,F,M]);Kh(()=>{m===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,v(K=>({...K,isPositioned:!1})))},[m]);const J=E.useRef(!1);Kh(()=>(J.current=!0,()=>{J.current=!1}),[]),Kh(()=>{if(U&&(W.current=U),$&&(D.current=$),U&&$){if(P.current)return P.current(U,$,L);L()}},[U,$,L,P,j]);const ie=E.useMemo(()=>({reference:W,floating:D,setReference:I,setFloating:O}),[I,O]),re=E.useMemo(()=>({reference:U,floating:$}),[U,$]),ae=E.useMemo(()=>{const K={position:t,left:0,top:0};if(!re.floating)return K;const ne=c_(re.floating,g.x),ce=c_(re.floating,g.y);return d?{...K,transform:"translate("+ne+"px, "+ce+"px)",...Mb(re.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ne,top:ce}},[t,d,re.floating,g.x,g.y]);return E.useMemo(()=>({...g,update:L,refs:ie,elements:re,floatingStyles:ae}),[g,L,ie,re,ae])}const O2=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?l_({element:r.current,padding:i}).fn(t):{}:r?l_({element:r,padding:i}).fn(t):{}}}},D2=(n,e)=>({...N2(n),options:[n,e]}),L2=(n,e)=>({...C2(n),options:[n,e]}),M2=(n,e)=>({...P2(n),options:[n,e]}),F2=(n,e)=>({...I2(n),options:[n,e]}),V2=(n,e)=>({...A2(n),options:[n,e]}),U2=(n,e)=>({...j2(n),options:[n,e]}),z2=(n,e)=>({...O2(n),options:[n,e]});var B2="Arrow",Fb=E.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...a}=n;return l.jsx(Ge.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});Fb.displayName=B2;var $2=Fb;function Vb(n){const[e,t]=E.useState(void 0);return Zt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let c,d;if("borderBoxSize"in a){const f=a.borderBoxSize,m=Array.isArray(f)?f[0]:f;c=m.inlineSize,d=m.blockSize}else c=n.offsetWidth,d=n.offsetHeight;t({width:c,height:d})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var ay="Popper",[Ub,Yf]=xi(ay),[q2,zb]=Ub(ay),Bb=n=>{const{__scopePopper:e,children:t}=n,[r,i]=E.useState(null);return l.jsx(q2,{scope:e,anchor:r,onAnchorChange:i,children:t})};Bb.displayName=ay;var $b="PopperAnchor",qb=E.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,a=zb($b,t),c=E.useRef(null),d=Et(e,c);return E.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:l.jsx(Ge.div,{...i,ref:d})});qb.displayName=$b;var ly="PopperContent",[W2,H2]=Ub(ly),Wb=E.forwardRef((n,e)=>{var ge,_e,Te,De,tt,nt;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:c=0,arrowPadding:d=0,avoidCollisions:f=!0,collisionBoundary:m=[],collisionPadding:g=0,sticky:v="partial",hideWhenDetached:y=!1,updatePositionStrategy:T="optimized",onPlaced:N,..._}=n,w=zb(ly,t),[A,I]=E.useState(null),O=Et(e,fe=>I(fe)),[U,$]=E.useState(null),W=Vb(U),D=(W==null?void 0:W.width)??0,k=(W==null?void 0:W.height)??0,j=r+(a!=="center"?"-"+a:""),P=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},F=Array.isArray(m)?m:[m],M=F.length>0,L={padding:P,boundary:F.filter(G2),altBoundary:M},{refs:J,floatingStyles:ie,placement:re,isPositioned:ae,middlewareData:K}=k2({strategy:"fixed",placement:j,whileElementsMounted:(...fe)=>S2(...fe,{animationFrame:T==="always"}),elements:{reference:w.anchor},middleware:[D2({mainAxis:i+k,alignmentAxis:c}),f&&L2({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?M2():void 0,...L}),f&&F2({...L}),V2({...L,apply:({elements:fe,rects:Ye,availableWidth:qt,availableHeight:Ot})=>{const{width:Fe,height:Un}=Ye.reference,be=fe.floating.style;be.setProperty("--radix-popper-available-width",`${qt}px`),be.setProperty("--radix-popper-available-height",`${Ot}px`),be.setProperty("--radix-popper-anchor-width",`${Fe}px`),be.setProperty("--radix-popper-anchor-height",`${Un}px`)}}),U&&z2({element:U,padding:d}),Q2({arrowWidth:D,arrowHeight:k}),y&&U2({strategy:"referenceHidden",...L})]}),[ne,ce]=Gb(re),B=fn(N);Zt(()=>{ae&&(B==null||B())},[ae,B]);const X=(ge=K.arrow)==null?void 0:ge.x,he=(_e=K.arrow)==null?void 0:_e.y,Ie=((Te=K.arrow)==null?void 0:Te.centerOffset)!==0,[Le,Ae]=E.useState();return Zt(()=>{A&&Ae(window.getComputedStyle(A).zIndex)},[A]),l.jsx("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:ae?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Le,"--radix-popper-transform-origin":[(De=K.transformOrigin)==null?void 0:De.x,(tt=K.transformOrigin)==null?void 0:tt.y].join(" "),...((nt=K.hide)==null?void 0:nt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:l.jsx(W2,{scope:t,placedSide:ne,onArrowChange:$,arrowX:X,arrowY:he,shouldHideArrow:Ie,children:l.jsx(Ge.div,{"data-side":ne,"data-align":ce,..._,ref:O,style:{..._.style,animation:ae?void 0:"none"}})})})});Wb.displayName=ly;var Hb="PopperArrow",K2={top:"bottom",right:"left",bottom:"top",left:"right"},Kb=E.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,a=H2(Hb,r),c=K2[a.placedSide];return l.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:l.jsx($2,{...i,ref:t,style:{...i.style,display:"block"}})})});Kb.displayName=Hb;function G2(n){return n!==null}var Q2=n=>({name:"transformOrigin",options:n,fn(e){var w,A,I;const{placement:t,rects:r,middlewareData:i}=e,c=((w=i.arrow)==null?void 0:w.centerOffset)!==0,d=c?0:n.arrowWidth,f=c?0:n.arrowHeight,[m,g]=Gb(t),v={start:"0%",center:"50%",end:"100%"}[g],y=(((A=i.arrow)==null?void 0:A.x)??0)+d/2,T=(((I=i.arrow)==null?void 0:I.y)??0)+f/2;let N="",_="";return m==="bottom"?(N=c?v:`${y}px`,_=`${-f}px`):m==="top"?(N=c?v:`${y}px`,_=`${r.floating.height+f}px`):m==="right"?(N=`${-f}px`,_=c?v:`${T}px`):m==="left"&&(N=`${r.floating.width+f}px`,_=c?v:`${T}px`),{data:{x:N,y:_}}}});function Gb(n){const[e,t="center"]=n.split("-");return[e,t]}var Y2=Bb,Qb=qb,Yb=Wb,Xb=Kb;function X2(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var Jb=n=>{const{present:e,children:t}=n,r=J2(e),i=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),a=Et(r.ref,Z2(i));return typeof t=="function"||r.isPresent?E.cloneElement(i,{ref:a}):null};Jb.displayName="Presence";function J2(n){const[e,t]=E.useState(),r=E.useRef({}),i=E.useRef(n),a=E.useRef("none"),c=n?"mounted":"unmounted",[d,f]=X2(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const m=Rh(r.current);a.current=d==="mounted"?m:"none"},[d]),Zt(()=>{const m=r.current,g=i.current;if(g!==n){const y=a.current,T=Rh(m);n?f("MOUNT"):T==="none"||(m==null?void 0:m.display)==="none"?f("UNMOUNT"):f(g&&y!==T?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,f]),Zt(()=>{if(e){let m;const g=e.ownerDocument.defaultView??window,v=T=>{const _=Rh(r.current).includes(T.animationName);if(T.target===e&&_&&(f("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",m=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},y=T=>{T.target===e&&(a.current=Rh(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{g.clearTimeout(m),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:E.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function Rh(n){return(n==null?void 0:n.animationName)||"none"}function Z2(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var[Xf,M9]=OR("Tooltip",[Yf]),cy=Yf(),Zb="TooltipProvider",ek=700,u_="tooltip.open",[tk,eT]=Xf(Zb),tT=n=>{const{__scopeTooltip:e,delayDuration:t=ek,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=n,[c,d]=E.useState(!0),f=E.useRef(!1),m=E.useRef(0);return E.useEffect(()=>{const g=m.current;return()=>window.clearTimeout(g)},[]),l.jsx(tk,{scope:e,isOpenDelayed:c,delayDuration:t,onOpen:E.useCallback(()=>{window.clearTimeout(m.current),d(!1)},[]),onClose:E.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>d(!0),r)},[r]),isPointerInTransitRef:f,onPointerInTransitChange:E.useCallback(g=>{f.current=g},[]),disableHoverableContent:i,children:a})};tT.displayName=Zb;var nT="Tooltip",[F9,Jf]=Xf(nT),tv="TooltipTrigger",nk=E.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Jf(tv,t),a=eT(tv,t),c=cy(t),d=E.useRef(null),f=Et(e,d,i.onTriggerChange),m=E.useRef(!1),g=E.useRef(!1),v=E.useCallback(()=>m.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),l.jsx(Qb,{asChild:!0,...c,children:l.jsx(Ge.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:f,onPointerMove:ze(n.onPointerMove,y=>{y.pointerType!=="touch"&&!g.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),g.current=!0)}),onPointerLeave:ze(n.onPointerLeave,()=>{i.onTriggerLeave(),g.current=!1}),onPointerDown:ze(n.onPointerDown,()=>{m.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:ze(n.onFocus,()=>{m.current||i.onOpen()}),onBlur:ze(n.onBlur,i.onClose),onClick:ze(n.onClick,i.onClose)})})});nk.displayName=tv;var rk="TooltipPortal",[V9,sk]=Xf(rk,{forceMount:void 0}),Kl="TooltipContent",rT=E.forwardRef((n,e)=>{const t=sk(Kl,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...a}=n,c=Jf(Kl,n.__scopeTooltip);return l.jsx(Jb,{present:r||c.open,children:c.disableHoverableContent?l.jsx(sT,{side:i,...a,ref:e}):l.jsx(ik,{side:i,...a,ref:e})})}),ik=E.forwardRef((n,e)=>{const t=Jf(Kl,n.__scopeTooltip),r=eT(Kl,n.__scopeTooltip),i=E.useRef(null),a=Et(e,i),[c,d]=E.useState(null),{trigger:f,onClose:m}=t,g=i.current,{onPointerInTransitChange:v}=r,y=E.useCallback(()=>{d(null),v(!1)},[v]),T=E.useCallback((N,_)=>{const w=N.currentTarget,A={x:N.clientX,y:N.clientY},I=ck(A,w.getBoundingClientRect()),O=uk(A,I),U=dk(_.getBoundingClientRect()),$=fk([...O,...U]);d($),v(!0)},[v]);return E.useEffect(()=>()=>y(),[y]),E.useEffect(()=>{if(f&&g){const N=w=>T(w,g),_=w=>T(w,f);return f.addEventListener("pointerleave",N),g.addEventListener("pointerleave",_),()=>{f.removeEventListener("pointerleave",N),g.removeEventListener("pointerleave",_)}}},[f,g,T,y]),E.useEffect(()=>{if(c){const N=_=>{const w=_.target,A={x:_.clientX,y:_.clientY},I=(f==null?void 0:f.contains(w))||(g==null?void 0:g.contains(w)),O=!hk(A,c);I?y():O&&(y(),m())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[f,g,c,m,y]),l.jsx(sT,{...n,ref:a})}),[ok,ak]=Xf(nT,{isInside:!1}),sT=E.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:c,...d}=n,f=Jf(Kl,t),m=cy(t),{onClose:g}=f;return E.useEffect(()=>(document.addEventListener(u_,g),()=>document.removeEventListener(u_,g)),[g]),E.useEffect(()=>{if(f.trigger){const v=y=>{const T=y.target;T!=null&&T.contains(f.trigger)&&g()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[f.trigger,g]),l.jsx(Ib,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:v=>v.preventDefault(),onDismiss:g,children:l.jsxs(Yb,{"data-state":f.stateAttribute,...m,...d,ref:e,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(L1,{children:r}),l.jsx(ok,{scope:t,isInside:!0,children:l.jsx(Uj,{id:f.contentId,role:"tooltip",children:i||r})})]})})});rT.displayName=Kl;var iT="TooltipArrow",lk=E.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=cy(t);return ak(iT,t).isInside?null:l.jsx(Xb,{...i,...r,ref:e})});lk.displayName=iT;function ck(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,r,i,a)){case a:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function uk(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function dk(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function hk(n,e){const{x:t,y:r}=n;let i=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const d=e[a].x,f=e[a].y,m=e[c].x,g=e[c].y;f>r!=g>r&&t<(m-d)*(r-f)/(g-f)+d&&(i=!i)}return i}function fk(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),mk(e)}function mk(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const a=e[e.length-1],c=e[e.length-2];if((a.x-c.x)*(i.y-c.y)>=(a.y-c.y)*(i.x-c.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const a=t[t.length-1],c=t[t.length-2];if((a.x-c.x)*(i.y-c.y)>=(a.y-c.y)*(i.x-c.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var pk=tT,oT=rT;const gk=pk,vk=E.forwardRef(({className:n,sideOffset:e=4,...t},r)=>l.jsx(oT,{ref:r,sideOffset:e,className:st("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));vk.displayName=oT.displayName;var Zf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},em=typeof window>"u"||"Deno"in globalThis;function Xr(){}function yk(n,e){return typeof n=="function"?n(e):n}function xk(n){return typeof n=="number"&&n>=0&&n!==1/0}function wk(n,e){return Math.max(n+(e||0)-Date.now(),0)}function nv(n,e){return typeof n=="function"?n(e):n}function _k(n,e){return typeof n=="function"?n(e):n}function d_(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:a,queryKey:c,stale:d}=n;if(c){if(r){if(e.queryHash!==uy(c,e.options))return!1}else if(!Su(e.queryKey,c))return!1}if(t!=="all"){const f=e.isActive();if(t==="active"&&!f||t==="inactive"&&f)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||i&&i!==e.state.fetchStatus||a&&!a(e))}function h_(n,e){const{exact:t,status:r,predicate:i,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(Tu(e.options.mutationKey)!==Tu(a))return!1}else if(!Su(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function uy(n,e){return((e==null?void 0:e.queryKeyHashFn)||Tu)(n)}function Tu(n){return JSON.stringify(n,(e,t)=>rv(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function Su(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Su(n[t],e[t])):!1}function aT(n,e){if(n===e)return n;const t=f_(n)&&f_(e);if(t||rv(n)&&rv(e)){const r=t?n:Object.keys(n),i=r.length,a=t?e:Object.keys(e),c=a.length,d=t?[]:{},f=new Set(r);let m=0;for(let g=0;g<c;g++){const v=t?g:a[g];(!t&&f.has(v)||t)&&n[v]===void 0&&e[v]===void 0?(d[v]=void 0,m++):(d[v]=aT(n[v],e[v]),d[v]===n[v]&&n[v]!==void 0&&m++)}return i===c&&m===i?n:d}return e}function f_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function rv(n){if(!m_(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!m_(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function m_(n){return Object.prototype.toString.call(n)==="[object Object]"}function Ek(n){return new Promise(e=>{setTimeout(e,n)})}function bk(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?aT(n,e):e}function Tk(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function Sk(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var dy=Symbol();function lT(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===dy?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var ua,to,Ll,T1,Nk=(T1=class extends Zf{constructor(){super();yt(this,ua);yt(this,to);yt(this,Ll);et(this,Ll,e=>{if(!em&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){oe(this,to)||this.setEventListener(oe(this,Ll))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,to))==null||e.call(this),et(this,to,void 0))}setEventListener(e){var t;et(this,Ll,e),(t=oe(this,to))==null||t.call(this),et(this,to,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){oe(this,ua)!==e&&(et(this,ua,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof oe(this,ua)=="boolean"?oe(this,ua):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ua=new WeakMap,to=new WeakMap,Ll=new WeakMap,T1),cT=new Nk,Ml,no,Fl,S1,Ck=(S1=class extends Zf{constructor(){super();yt(this,Ml,!0);yt(this,no);yt(this,Fl);et(this,Fl,e=>{if(!em&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){oe(this,no)||this.setEventListener(oe(this,Fl))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,no))==null||e.call(this),et(this,no,void 0))}setEventListener(e){var t;et(this,Fl,e),(t=oe(this,no))==null||t.call(this),et(this,no,e(this.setOnline.bind(this)))}setOnline(e){oe(this,Ml)!==e&&(et(this,Ml,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return oe(this,Ml)}},Ml=new WeakMap,no=new WeakMap,Fl=new WeakMap,S1),vf=new Ck;function Ik(){let n,e;const t=new Promise((i,a)=>{n=i,e=a});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function Ak(n){return Math.min(1e3*2**n,3e4)}function uT(n){return(n??"online")==="online"?vf.isOnline():!0}var dT=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function yg(n){return n instanceof dT}function hT(n){let e=!1,t=0,r=!1,i;const a=Ik(),c=_=>{var w;r||(y(new dT(_)),(w=n.abort)==null||w.call(n))},d=()=>{e=!0},f=()=>{e=!1},m=()=>cT.isFocused()&&(n.networkMode==="always"||vf.isOnline())&&n.canRun(),g=()=>uT(n.networkMode)&&n.canRun(),v=_=>{var w;r||(r=!0,(w=n.onSuccess)==null||w.call(n,_),i==null||i(),a.resolve(_))},y=_=>{var w;r||(r=!0,(w=n.onError)==null||w.call(n,_),i==null||i(),a.reject(_))},T=()=>new Promise(_=>{var w;i=A=>{(r||m())&&_(A)},(w=n.onPause)==null||w.call(n)}).then(()=>{var _;i=void 0,r||(_=n.onContinue)==null||_.call(n)}),N=()=>{if(r)return;let _;const w=t===0?n.initialPromise:void 0;try{_=w??n.fn()}catch(A){_=Promise.reject(A)}Promise.resolve(_).then(v).catch(A=>{var W;if(r)return;const I=n.retry??(em?0:3),O=n.retryDelay??Ak,U=typeof O=="function"?O(t,A):O,$=I===!0||typeof I=="number"&&t<I||typeof I=="function"&&I(t,A);if(e||!$){y(A);return}t++,(W=n.onFail)==null||W.call(n,t,A),Ek(U).then(()=>m()?void 0:T()).then(()=>{e?y(A):N()})})};return{promise:a,cancel:c,continue:()=>(i==null||i(),a),cancelRetry:d,continueRetry:f,canStart:g,start:()=>(g()?N():T().then(N),a)}}var jk=n=>setTimeout(n,0);function Pk(){let n=[],e=0,t=d=>{d()},r=d=>{d()},i=jk;const a=d=>{e?n.push(d):i(()=>{t(d)})},c=()=>{const d=n;n=[],d.length&&i(()=>{r(()=>{d.forEach(f=>{t(f)})})})};return{batch:d=>{let f;e++;try{f=d()}finally{e--,e||c()}return f},batchCalls:d=>(...f)=>{a(()=>{d(...f)})},schedule:a,setNotifyFunction:d=>{t=d},setBatchNotifyFunction:d=>{r=d},setScheduler:d=>{i=d}}}var Kn=Pk(),da,N1,fT=(N1=class{constructor(){yt(this,da)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xk(this.gcTime)&&et(this,da,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(em?1/0:5*60*1e3))}clearGcTimeout(){oe(this,da)&&(clearTimeout(oe(this,da)),et(this,da,void 0))}},da=new WeakMap,N1),Vl,ha,jr,fa,Dn,Bu,ma,Jr,si,C1,Rk=(C1=class extends fT{constructor(t){super();yt(this,Jr);yt(this,Vl);yt(this,ha);yt(this,jr);yt(this,fa);yt(this,Dn);yt(this,Bu);yt(this,ma);et(this,ma,!1),et(this,Bu,t.defaultOptions),this.setOptions(t.options),this.observers=[],et(this,fa,t.client),et(this,jr,oe(this,fa).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,et(this,Vl,Ok(this.options)),this.state=t.state??oe(this,Vl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=oe(this,Dn))==null?void 0:t.promise}setOptions(t){this.options={...oe(this,Bu),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&oe(this,jr).remove(this)}setData(t,r){const i=bk(this.state.data,t,this.options);return kn(this,Jr,si).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){kn(this,Jr,si).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,a;const r=(i=oe(this,Dn))==null?void 0:i.promise;return(a=oe(this,Dn))==null||a.cancel(t),r?r.then(Xr).catch(Xr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(oe(this,Vl))}isActive(){return this.observers.some(t=>_k(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===dy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>nv(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!wk(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=oe(this,Dn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=oe(this,Dn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),oe(this,jr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(oe(this,Dn)&&(oe(this,ma)?oe(this,Dn).cancel({revert:!0}):oe(this,Dn).cancelRetry()),this.scheduleGc()),oe(this,jr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||kn(this,Jr,si).call(this,{type:"invalidate"})}fetch(t,r){var g,v,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(oe(this,Dn))return oe(this,Dn).continueRetry(),oe(this,Dn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const T=this.observers.find(N=>N.options.queryFn);T&&this.setOptions(T.options)}const i=new AbortController,a=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(et(this,ma,!0),i.signal)})},c=()=>{const T=lT(this.options,r),_=(()=>{const w={client:oe(this,fa),queryKey:this.queryKey,meta:this.meta};return a(w),w})();return et(this,ma,!1),this.options.persister?this.options.persister(T,_,this):T(_)},f=(()=>{const T={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:oe(this,fa),state:this.state,fetchFn:c};return a(T),T})();(g=this.options.behavior)==null||g.onFetch(f,this),et(this,ha,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=f.fetchOptions)==null?void 0:v.meta))&&kn(this,Jr,si).call(this,{type:"fetch",meta:(y=f.fetchOptions)==null?void 0:y.meta});const m=T=>{var N,_,w,A;yg(T)&&T.silent||kn(this,Jr,si).call(this,{type:"error",error:T}),yg(T)||((_=(N=oe(this,jr).config).onError)==null||_.call(N,T,this),(A=(w=oe(this,jr).config).onSettled)==null||A.call(w,this.state.data,T,this)),this.scheduleGc()};return et(this,Dn,hT({initialPromise:r==null?void 0:r.initialPromise,fn:f.fetchFn,abort:i.abort.bind(i),onSuccess:T=>{var N,_,w,A;if(T===void 0){m(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(T)}catch(I){m(I);return}(_=(N=oe(this,jr).config).onSuccess)==null||_.call(N,T,this),(A=(w=oe(this,jr).config).onSettled)==null||A.call(w,T,this.state.error,this),this.scheduleGc()},onError:m,onFail:(T,N)=>{kn(this,Jr,si).call(this,{type:"failed",failureCount:T,error:N})},onPause:()=>{kn(this,Jr,si).call(this,{type:"pause"})},onContinue:()=>{kn(this,Jr,si).call(this,{type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0})),oe(this,Dn).start()}},Vl=new WeakMap,ha=new WeakMap,jr=new WeakMap,fa=new WeakMap,Dn=new WeakMap,Bu=new WeakMap,ma=new WeakMap,Jr=new WeakSet,si=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...kk(i.data,this.options),fetchMeta:t.meta??null};case"success":return et(this,ha,void 0),{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return yg(a)&&a.revert&&oe(this,ha)?{...oe(this,ha),fetchStatus:"idle"}:{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),Kn.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),oe(this,jr).notify({query:this,type:"updated",action:t})})},C1);function kk(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uT(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Ok(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var xs,I1,Dk=(I1=class extends Zf{constructor(e={}){super();yt(this,xs);this.config=e,et(this,xs,new Map)}build(e,t,r){const i=t.queryKey,a=t.queryHash??uy(i,t);let c=this.get(a);return c||(c=new Rk({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(c)),c}add(e){oe(this,xs).has(e.queryHash)||(oe(this,xs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=oe(this,xs).get(e.queryHash);t&&(e.destroy(),t===e&&oe(this,xs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Kn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return oe(this,xs).get(e)}getAll(){return[...oe(this,xs).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>d_(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>d_(e,r)):t}notify(e){Kn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Kn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Kn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},xs=new WeakMap,I1),ws,Hn,pa,_s,Qi,A1,Lk=(A1=class extends fT{constructor(t){super();yt(this,_s);yt(this,ws);yt(this,Hn);yt(this,pa);this.mutationId=t.mutationId,et(this,Hn,t.mutationCache),et(this,ws,[]),this.state=t.state||Mk(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){oe(this,ws).includes(t)||(oe(this,ws).push(t),this.clearGcTimeout(),oe(this,Hn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){et(this,ws,oe(this,ws).filter(r=>r!==t)),this.scheduleGc(),oe(this,Hn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){oe(this,ws).length||(this.state.status==="pending"?this.scheduleGc():oe(this,Hn).remove(this))}continue(){var t;return((t=oe(this,pa))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var c,d,f,m,g,v,y,T,N,_,w,A,I,O,U,$,W,D,k,j;const r=()=>{kn(this,_s,Qi).call(this,{type:"continue"})};et(this,pa,hT({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(P,F)=>{kn(this,_s,Qi).call(this,{type:"failed",failureCount:P,error:F})},onPause:()=>{kn(this,_s,Qi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>oe(this,Hn).canRun(this)}));const i=this.state.status==="pending",a=!oe(this,pa).canStart();try{if(i)r();else{kn(this,_s,Qi).call(this,{type:"pending",variables:t,isPaused:a}),await((d=(c=oe(this,Hn).config).onMutate)==null?void 0:d.call(c,t,this));const F=await((m=(f=this.options).onMutate)==null?void 0:m.call(f,t));F!==this.state.context&&kn(this,_s,Qi).call(this,{type:"pending",context:F,variables:t,isPaused:a})}const P=await oe(this,pa).start();return await((v=(g=oe(this,Hn).config).onSuccess)==null?void 0:v.call(g,P,t,this.state.context,this)),await((T=(y=this.options).onSuccess)==null?void 0:T.call(y,P,t,this.state.context)),await((_=(N=oe(this,Hn).config).onSettled)==null?void 0:_.call(N,P,null,this.state.variables,this.state.context,this)),await((A=(w=this.options).onSettled)==null?void 0:A.call(w,P,null,t,this.state.context)),kn(this,_s,Qi).call(this,{type:"success",data:P}),P}catch(P){try{throw await((O=(I=oe(this,Hn).config).onError)==null?void 0:O.call(I,P,t,this.state.context,this)),await(($=(U=this.options).onError)==null?void 0:$.call(U,P,t,this.state.context)),await((D=(W=oe(this,Hn).config).onSettled)==null?void 0:D.call(W,void 0,P,this.state.variables,this.state.context,this)),await((j=(k=this.options).onSettled)==null?void 0:j.call(k,void 0,P,t,this.state.context)),P}finally{kn(this,_s,Qi).call(this,{type:"error",error:P})}}finally{oe(this,Hn).runNext(this)}}},ws=new WeakMap,Hn=new WeakMap,pa=new WeakMap,_s=new WeakSet,Qi=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Kn.batch(()=>{oe(this,ws).forEach(i=>{i.onMutationUpdate(t)}),oe(this,Hn).notify({mutation:this,type:"updated",action:t})})},A1);function Mk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var oi,Zr,$u,j1,Fk=(j1=class extends Zf{constructor(e={}){super();yt(this,oi);yt(this,Zr);yt(this,$u);this.config=e,et(this,oi,new Set),et(this,Zr,new Map),et(this,$u,0)}build(e,t,r){const i=new Lk({mutationCache:this,mutationId:++Nh(this,$u)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){oe(this,oi).add(e);const t=kh(e);if(typeof t=="string"){const r=oe(this,Zr).get(t);r?r.push(e):oe(this,Zr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(oe(this,oi).delete(e)){const t=kh(e);if(typeof t=="string"){const r=oe(this,Zr).get(t);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&oe(this,Zr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=kh(e);if(typeof t=="string"){const r=oe(this,Zr).get(t),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const t=kh(e);if(typeof t=="string"){const i=(r=oe(this,Zr).get(t))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Kn.batch(()=>{oe(this,oi).forEach(e=>{this.notify({type:"removed",mutation:e})}),oe(this,oi).clear(),oe(this,Zr).clear()})}getAll(){return Array.from(oe(this,oi))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>h_(t,r))}findAll(e={}){return this.getAll().filter(t=>h_(e,t))}notify(e){Kn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Kn.batch(()=>Promise.all(e.map(t=>t.continue().catch(Xr))))}},oi=new WeakMap,Zr=new WeakMap,$u=new WeakMap,j1);function kh(n){var e;return(e=n.options.scope)==null?void 0:e.id}function p_(n){return{onFetch:(e,t)=>{var g,v,y,T,N;const r=e.options,i=(y=(v=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:v.fetchMore)==null?void 0:y.direction,a=((T=e.state.data)==null?void 0:T.pages)||[],c=((N=e.state.data)==null?void 0:N.pageParams)||[];let d={pages:[],pageParams:[]},f=0;const m=async()=>{let _=!1;const w=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},A=lT(e.options,e.fetchOptions),I=async(O,U,$)=>{if(_)return Promise.reject();if(U==null&&O.pages.length)return Promise.resolve(O);const D=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:U,direction:$?"backward":"forward",meta:e.options.meta};return w(F),F})(),k=await A(D),{maxPages:j}=e.options,P=$?Sk:Tk;return{pages:P(O.pages,k,j),pageParams:P(O.pageParams,U,j)}};if(i&&a.length){const O=i==="backward",U=O?Vk:g_,$={pages:a,pageParams:c},W=U(r,$);d=await I($,W,O)}else{const O=n??a.length;do{const U=f===0?c[0]??r.initialPageParam:g_(r,d);if(f>0&&U==null)break;d=await I(d,U),f++}while(f<O)}return d};e.options.persister?e.fetchFn=()=>{var _,w;return(w=(_=e.options).persister)==null?void 0:w.call(_,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=m}}}function g_(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function Vk(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Kt,ro,so,Ul,zl,io,Bl,$l,P1,Uk=(P1=class{constructor(n={}){yt(this,Kt);yt(this,ro);yt(this,so);yt(this,Ul);yt(this,zl);yt(this,io);yt(this,Bl);yt(this,$l);et(this,Kt,n.queryCache||new Dk),et(this,ro,n.mutationCache||new Fk),et(this,so,n.defaultOptions||{}),et(this,Ul,new Map),et(this,zl,new Map),et(this,io,0)}mount(){Nh(this,io)._++,oe(this,io)===1&&(et(this,Bl,cT.subscribe(async n=>{n&&(await this.resumePausedMutations(),oe(this,Kt).onFocus())})),et(this,$l,vf.subscribe(async n=>{n&&(await this.resumePausedMutations(),oe(this,Kt).onOnline())})))}unmount(){var n,e;Nh(this,io)._--,oe(this,io)===0&&((n=oe(this,Bl))==null||n.call(this),et(this,Bl,void 0),(e=oe(this,$l))==null||e.call(this),et(this,$l,void 0))}isFetching(n){return oe(this,Kt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return oe(this,ro).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=oe(this,Kt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=oe(this,Kt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(nv(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return oe(this,Kt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=oe(this,Kt).get(r.queryHash),a=i==null?void 0:i.state.data,c=yk(e,a);if(c!==void 0)return oe(this,Kt).build(this,r).setData(c,{...t,manual:!0})}setQueriesData(n,e,t){return Kn.batch(()=>oe(this,Kt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=oe(this,Kt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=oe(this,Kt);Kn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=oe(this,Kt);return Kn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Kn.batch(()=>oe(this,Kt).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(Xr).catch(Xr)}invalidateQueries(n,e={}){return Kn.batch(()=>(oe(this,Kt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Kn.batch(()=>oe(this,Kt).findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,t);return t.throwOnError||(a=a.catch(Xr)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Xr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=oe(this,Kt).build(this,e);return t.isStaleByTime(nv(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Xr).catch(Xr)}fetchInfiniteQuery(n){return n.behavior=p_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Xr).catch(Xr)}ensureInfiniteQueryData(n){return n.behavior=p_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return vf.isOnline()?oe(this,ro).resumePausedMutations():Promise.resolve()}getQueryCache(){return oe(this,Kt)}getMutationCache(){return oe(this,ro)}getDefaultOptions(){return oe(this,so)}setDefaultOptions(n){et(this,so,n)}setQueryDefaults(n,e){oe(this,Ul).set(Tu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...oe(this,Ul).values()],t={};return e.forEach(r=>{Su(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){oe(this,zl).set(Tu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...oe(this,zl).values()],t={};return e.forEach(r=>{Su(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...oe(this,so).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=uy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===dy&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...oe(this,so).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){oe(this,Kt).clear(),oe(this,ro).clear()}},Kt=new WeakMap,ro=new WeakMap,so=new WeakMap,Ul=new WeakMap,zl=new WeakMap,io=new WeakMap,Bl=new WeakMap,$l=new WeakMap,P1),zk=E.createContext(void 0),Bk=({client:n,children:e})=>(E.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),l.jsx(zk.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nu(){return Nu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Nu.apply(this,arguments)}var ao;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ao||(ao={}));const v_="popstate";function $k(n){n===void 0&&(n={});function e(r,i){let{pathname:a,search:c,hash:d}=r.location;return sv("",{pathname:a,search:c,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:yf(i)}return Wk(e,t,null,n)}function Bt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mT(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qk(){return Math.random().toString(36).substr(2,8)}function y_(n,e){return{usr:n.state,key:n.key,idx:e}}function sv(n,e,t,r){return t===void 0&&(t=null),Nu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ac(e):e,{state:t,key:e&&e.key||r||qk()})}function yf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ac(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function Wk(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,c=i.history,d=ao.Pop,f=null,m=g();m==null&&(m=0,c.replaceState(Nu({},c.state,{idx:m}),""));function g(){return(c.state||{idx:null}).idx}function v(){d=ao.Pop;let w=g(),A=w==null?null:w-m;m=w,f&&f({action:d,location:_.location,delta:A})}function y(w,A){d=ao.Push;let I=sv(_.location,w,A);m=g()+1;let O=y_(I,m),U=_.createHref(I);try{c.pushState(O,"",U)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;i.location.assign(U)}a&&f&&f({action:d,location:_.location,delta:1})}function T(w,A){d=ao.Replace;let I=sv(_.location,w,A);m=g();let O=y_(I,m),U=_.createHref(I);c.replaceState(O,"",U),a&&f&&f({action:d,location:_.location,delta:0})}function N(w){let A=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof w=="string"?w:yf(w);return I=I.replace(/ $/,"%20"),Bt(A,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,A)}let _={get action(){return d},get location(){return n(i,c)},listen(w){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(v_,v),f=w,()=>{i.removeEventListener(v_,v),f=null}},createHref(w){return e(i,w)},createURL:N,encodeLocation(w){let A=N(w);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:T,go(w){return c.go(w)}};return _}var x_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(x_||(x_={}));function Hk(n,e,t){return t===void 0&&(t="/"),Kk(n,e,t)}function Kk(n,e,t,r){let i=typeof e=="string"?ac(e):e,a=Gl(i.pathname||"/",t);if(a==null)return null;let c=pT(n);Gk(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let m=iO(a);d=rO(c[f],m)}return d}function pT(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(a,c,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&(Bt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=co([r,f.relativePath]),g=t.concat(f);a.children&&a.children.length>0&&(Bt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),pT(a.children,e,g,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:tO(m,a.index),routesMeta:g})};return n.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))i(a,c);else for(let f of gT(a.path))i(a,c,f)}),e}function gT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let c=gT(r.join("/")),d=[];return d.push(...c.map(f=>f===""?a:[a,f].join("/"))),i&&d.push(...c),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function Gk(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:nO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const Qk=/^:[\w-]+$/,Yk=3,Xk=2,Jk=1,Zk=10,eO=-2,w_=n=>n==="*";function tO(n,e){let t=n.split("/"),r=t.length;return t.some(w_)&&(r+=eO),e&&(r+=Xk),t.filter(i=>!w_(i)).reduce((i,a)=>i+(Qk.test(a)?Yk:a===""?Jk:Zk),r)}function nO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function rO(n,e,t){let{routesMeta:r}=n,i={},a="/",c=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",v=iv({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},g),y=f.route;if(!v)return null;Object.assign(i,v.params),c.push({params:i,pathname:co([a,v.pathname]),pathnameBase:cO(co([a,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(a=co([a,v.pathnameBase]))}return c}function iv(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=sO(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((m,g,v)=>{let{paramName:y,isOptional:T}=g;if(y==="*"){let _=d[v]||"";c=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const N=d[v];return T&&!N?m[y]=void 0:m[y]=(N||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:n}}function sO(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),mT(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function iO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mT(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Gl(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function oO(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?ac(n):n;return{pathname:t?t.startsWith("/")?t:aO(t,e):e,search:uO(r),hash:dO(i)}}function aO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function xg(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hy(n,e){let t=lO(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function fy(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=ac(n):(i=Nu({},n),Bt(!i.pathname||!i.pathname.includes("?"),xg("?","pathname","search",i)),Bt(!i.pathname||!i.pathname.includes("#"),xg("#","pathname","hash",i)),Bt(!i.search||!i.search.includes("#"),xg("#","search","hash",i)));let a=n===""||i.pathname==="",c=a?"/":i.pathname,d;if(c==null)d=t;else{let v=e.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),v-=1;i.pathname=y.join("/")}d=v>=0?e[v]:"/"}let f=oO(i,d),m=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||g)&&(f.pathname+="/"),f}const co=n=>n.join("/").replace(/\/\/+/g,"/"),cO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),uO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,dO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function hO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const vT=["post","put","patch","delete"];new Set(vT);const fO=["get",...vT];new Set(fO);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cu(){return Cu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Cu.apply(this,arguments)}const tm=E.createContext(null),yT=E.createContext(null),wi=E.createContext(null),nm=E.createContext(null),Fs=E.createContext({outlet:null,matches:[],isDataRoute:!1}),xT=E.createContext(null);function mO(n,e){let{relative:t}=e===void 0?{}:e;lc()||Bt(!1);let{basename:r,navigator:i}=E.useContext(wi),{hash:a,pathname:c,search:d}=rm(n,{relative:t}),f=c;return r!=="/"&&(f=c==="/"?r:co([r,c])),i.createHref({pathname:f,search:d,hash:a})}function lc(){return E.useContext(nm)!=null}function jo(){return lc()||Bt(!1),E.useContext(nm).location}function wT(n){E.useContext(wi).static||E.useLayoutEffect(n)}function Qu(){let{isDataRoute:n}=E.useContext(Fs);return n?AO():pO()}function pO(){lc()||Bt(!1);let n=E.useContext(tm),{basename:e,future:t,navigator:r}=E.useContext(wi),{matches:i}=E.useContext(Fs),{pathname:a}=jo(),c=JSON.stringify(hy(i,t.v7_relativeSplatPath)),d=E.useRef(!1);return wT(()=>{d.current=!0}),E.useCallback(function(m,g){if(g===void 0&&(g={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let v=fy(m,JSON.parse(c),a,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:co([e,v.pathname])),(g.replace?r.replace:r.push)(v,g.state,g)},[e,r,c,a,n])}const gO=E.createContext(null);function vO(n){let e=E.useContext(Fs).outlet;return e&&E.createElement(gO.Provider,{value:n},e)}function _T(){let{matches:n}=E.useContext(Fs),e=n[n.length-1];return e?e.params:{}}function rm(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=E.useContext(wi),{matches:i}=E.useContext(Fs),{pathname:a}=jo(),c=JSON.stringify(hy(i,r.v7_relativeSplatPath));return E.useMemo(()=>fy(n,JSON.parse(c),a,t==="path"),[n,c,a,t])}function yO(n,e){return xO(n,e)}function xO(n,e,t,r){lc()||Bt(!1);let{navigator:i}=E.useContext(wi),{matches:a}=E.useContext(Fs),c=a[a.length-1],d=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let m=jo(),g;if(e){var v;let w=typeof e=="string"?ac(e):e;f==="/"||(v=w.pathname)!=null&&v.startsWith(f)||Bt(!1),g=w}else g=m;let y=g.pathname||"/",T=y;if(f!=="/"){let w=f.replace(/^\//,"").split("/");T="/"+y.replace(/^\//,"").split("/").slice(w.length).join("/")}let N=Hk(n,{pathname:T}),_=TO(N&&N.map(w=>Object.assign({},w,{params:Object.assign({},d,w.params),pathname:co([f,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?f:co([f,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,t,r);return e&&_?E.createElement(nm.Provider,{value:{location:Cu({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:ao.Pop}},_):_}function wO(){let n=IO(),e=hO(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:i},t):null,null)}const _O=E.createElement(wO,null);class EO extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?E.createElement(Fs.Provider,{value:this.props.routeContext},E.createElement(xT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bO(n){let{routeContext:e,match:t,children:r}=n,i=E.useContext(tm);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(Fs.Provider,{value:e},r)}function TO(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=(i=t)==null?void 0:i.errors;if(d!=null){let g=c.findIndex(v=>v.route.id&&(d==null?void 0:d[v.route.id])!==void 0);g>=0||Bt(!1),c=c.slice(0,Math.min(c.length,g+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let v=c[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=g),v.route.id){let{loaderData:y,errors:T}=t,N=v.route.loader&&y[v.route.id]===void 0&&(!T||T[v.route.id]===void 0);if(v.route.lazy||N){f=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((g,v,y)=>{let T,N=!1,_=null,w=null;t&&(T=d&&v.route.id?d[v.route.id]:void 0,_=v.route.errorElement||_O,f&&(m<0&&y===0?(jO("route-fallback"),N=!0,w=null):m===y&&(N=!0,w=v.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,y+1)),I=()=>{let O;return T?O=_:N?O=w:v.route.Component?O=E.createElement(v.route.Component,null):v.route.element?O=v.route.element:O=g,E.createElement(bO,{match:v,routeContext:{outlet:g,matches:A,isDataRoute:t!=null},children:O})};return t&&(v.route.ErrorBoundary||v.route.errorElement||y===0)?E.createElement(EO,{location:t.location,revalidation:t.revalidation,component:_,error:T,children:I(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):I()},null)}var ET=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(ET||{}),bT=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(bT||{});function SO(n){let e=E.useContext(tm);return e||Bt(!1),e}function NO(n){let e=E.useContext(yT);return e||Bt(!1),e}function CO(n){let e=E.useContext(Fs);return e||Bt(!1),e}function TT(n){let e=CO(),t=e.matches[e.matches.length-1];return t.route.id||Bt(!1),t.route.id}function IO(){var n;let e=E.useContext(xT),t=NO(),r=TT();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function AO(){let{router:n}=SO(ET.UseNavigateStable),e=TT(bT.UseNavigateStable),t=E.useRef(!1);return wT(()=>{t.current=!0}),E.useCallback(function(i,a){a===void 0&&(a={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Cu({fromRouteId:e},a)))},[n,e])}const __={};function jO(n,e,t){__[n]||(__[n]=!0)}function Gh(n){let{to:e,replace:t,state:r,relative:i}=n;lc()||Bt(!1);let{future:a,static:c}=E.useContext(wi),{matches:d}=E.useContext(Fs),{pathname:f}=jo(),m=Qu(),g=fy(e,hy(d,a.v7_relativeSplatPath),f,i==="path"),v=JSON.stringify(g);return E.useEffect(()=>m(JSON.parse(v),{replace:t,state:r,relative:i}),[m,v,i,t,r]),null}function PO(n){return vO(n.context)}function Mt(n){Bt(!1)}function RO(n){let{basename:e="/",children:t=null,location:r,navigationType:i=ao.Pop,navigator:a,static:c=!1,future:d}=n;lc()&&Bt(!1);let f=e.replace(/^\/*/,"/"),m=E.useMemo(()=>({basename:f,navigator:a,static:c,future:Cu({v7_relativeSplatPath:!1},d)}),[f,d,a,c]);typeof r=="string"&&(r=ac(r));let{pathname:g="/",search:v="",hash:y="",state:T=null,key:N="default"}=r,_=E.useMemo(()=>{let w=Gl(g,f);return w==null?null:{location:{pathname:w,search:v,hash:y,state:T,key:N},navigationType:i}},[f,g,v,y,T,N,i]);return _==null?null:E.createElement(wi.Provider,{value:m},E.createElement(nm.Provider,{children:t,value:_}))}function kO(n){let{children:e,location:t}=n;return yO(ov(e),t)}new Promise(()=>{});function ov(n,e){e===void 0&&(e=[]);let t=[];return E.Children.forEach(n,(r,i)=>{if(!E.isValidElement(r))return;let a=[...e,i];if(r.type===E.Fragment){t.push.apply(t,ov(r.props.children,a));return}r.type!==Mt&&Bt(!1),!r.props.index||!r.props.children||Bt(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=ov(r.props.children,a)),t.push(c)}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xf(){return xf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xf.apply(this,arguments)}function ST(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function OO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function DO(n,e){return n.button===0&&(!e||e==="_self")&&!OO(n)}function av(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function LO(n,e){let t=av(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}const MO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],FO=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],VO="6";try{window.__reactRouterVersion=VO}catch{}const UO=E.createContext({isTransitioning:!1}),zO="startTransition",E_=k1[zO];function BO(n){let{basename:e,children:t,future:r,window:i}=n,a=E.useRef();a.current==null&&(a.current=$k({window:i,v5Compat:!0}));let c=a.current,[d,f]=E.useState({action:c.action,location:c.location}),{v7_startTransition:m}=r||{},g=E.useCallback(v=>{m&&E_?E_(()=>f(v)):f(v)},[f,m]);return E.useLayoutEffect(()=>c.listen(g),[c,g]),E.createElement(RO,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:c,future:r})}const $O=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fn=E.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:a,replace:c,state:d,target:f,to:m,preventScrollReset:g,unstable_viewTransition:v}=e,y=ST(e,MO),{basename:T}=E.useContext(wi),N,_=!1;if(typeof m=="string"&&qO.test(m)&&(N=m,$O))try{let O=new URL(window.location.href),U=m.startsWith("//")?new URL(O.protocol+m):new URL(m),$=Gl(U.pathname,T);U.origin===O.origin&&$!=null?m=$+U.search+U.hash:_=!0}catch{}let w=mO(m,{relative:i}),A=HO(m,{replace:c,state:d,target:f,preventScrollReset:g,relative:i,unstable_viewTransition:v});function I(O){r&&r(O),O.defaultPrevented||A(O)}return E.createElement("a",xf({},y,{href:N||w,onClick:_||a?r:I,ref:t,target:f}))}),b_=E.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:c=!1,style:d,to:f,unstable_viewTransition:m,children:g}=e,v=ST(e,FO),y=rm(f,{relative:v.relative}),T=jo(),N=E.useContext(yT),{navigator:_,basename:w}=E.useContext(wi),A=N!=null&&KO(y)&&m===!0,I=_.encodeLocation?_.encodeLocation(y).pathname:y.pathname,O=T.pathname,U=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;i||(O=O.toLowerCase(),U=U?U.toLowerCase():null,I=I.toLowerCase()),U&&w&&(U=Gl(U,w)||U);const $=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let W=O===I||!c&&O.startsWith(I)&&O.charAt($)==="/",D=U!=null&&(U===I||!c&&U.startsWith(I)&&U.charAt(I.length)==="/"),k={isActive:W,isPending:D,isTransitioning:A},j=W?r:void 0,P;typeof a=="function"?P=a(k):P=[a,W?"active":null,D?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let F=typeof d=="function"?d(k):d;return E.createElement(Fn,xf({},v,{"aria-current":j,className:P,ref:t,style:F,to:f,unstable_viewTransition:m}),typeof g=="function"?g(k):g)});var lv;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(lv||(lv={}));var T_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(T_||(T_={}));function WO(n){let e=E.useContext(tm);return e||Bt(!1),e}function HO(n,e){let{target:t,replace:r,state:i,preventScrollReset:a,relative:c,unstable_viewTransition:d}=e===void 0?{}:e,f=Qu(),m=jo(),g=rm(n,{relative:c});return E.useCallback(v=>{if(DO(v,t)){v.preventDefault();let y=r!==void 0?r:yf(m)===yf(g);f(n,{replace:y,state:i,preventScrollReset:a,relative:c,unstable_viewTransition:d})}},[m,f,g,r,i,t,n,a,c,d])}function Yu(n){let e=E.useRef(av(n)),t=E.useRef(!1),r=jo(),i=E.useMemo(()=>LO(r.search,t.current?null:e.current),[r.search]),a=Qu(),c=E.useCallback((d,f)=>{const m=av(typeof d=="function"?d(i):d);t.current=!0,a("?"+m,f)},[a,i]);return[i,c]}function KO(n,e){e===void 0&&(e={});let t=E.useContext(UO);t==null&&Bt(!1);let{basename:r}=WO(lv.useViewTransitionState),i=rm(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Gl(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Gl(t.nextLocation.pathname,r)||t.nextLocation.pathname;return iv(i.pathname,c)!=null||iv(i.pathname,a)!=null}const GO=()=>{};var S_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},QO=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],c=n[t++],d=n[t++],f=((i&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},CT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],c=i+1<n.length,d=c?n[i+1]:0,f=i+2<n.length,m=f?n[i+2]:0,g=a>>2,v=(a&3)<<4|d>>4;let y=(d&15)<<2|m>>6,T=m&63;f||(T=64,c||(y=64)),r.push(t[g],t[v],t[y],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(NT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):QO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const m=i<n.length?t[n.charAt(i)]:64;++i;const v=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||d==null||m==null||v==null)throw new YO;const y=a<<2|d>>4;if(r.push(y),m!==64){const T=d<<4&240|m>>2;if(r.push(T),v!==64){const N=m<<6&192|v;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class YO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XO=function(n){const e=NT(n);return CT.encodeByteArray(e,!0)},wf=function(n){return XO(n).replace(/\./g,"")},IT=function(n){try{return CT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=()=>JO().__FIREBASE_DEFAULTS__,eD=()=>{if(typeof process>"u"||typeof S_>"u")return;const n=S_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},tD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&IT(n[1]);return e&&JSON.parse(e)},sm=()=>{try{return GO()||ZO()||eD()||tD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},AT=n=>{var e,t;return(t=(e=sm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},nD=n=>{const e=AT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},jT=()=>{var n;return(n=sm())===null||n===void 0?void 0:n.config},PT=n=>{var e;return(e=sm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function my(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[wf(JSON.stringify(t)),wf(JSON.stringify(c)),""].join(".")}const fu={};function iD(){const n={prod:[],emulator:[]};for(const e of Object.keys(fu))fu[e]?n.emulator.push(e):n.prod.push(e);return n}function oD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let N_=!1;function RT(n,e){if(typeof window>"u"||typeof document>"u"||!ja(window.location.host)||fu[n]===e||fu[n]||N_)return;fu[n]=e;function t(y){return`__firebase__banner__${y}`}const r="__firebase__banner",a=iD().prod.length>0;function c(){const y=document.getElementById(r);y&&y.remove()}function d(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function f(y,T){y.setAttribute("width","24"),y.setAttribute("id",T),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function m(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{N_=!0,c()},y}function g(y,T){y.setAttribute("id",T),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function v(){const y=oD(r),T=t("text"),N=document.getElementById(T)||document.createElement("span"),_=t("learnmore"),w=document.getElementById(_)||document.createElement("a"),A=t("preprendIcon"),I=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const O=y.element;d(O),g(w,_);const U=m();f(I,A),O.append(I,N,w,U),document.body.appendChild(O)}a?(N.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vn())}function lD(){var n;const e=(n=sm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hD(){const n=Vn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fD(){return!lD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mD(){try{return typeof indexedDB=="object"}catch{return!1}}function pD(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="FirebaseError";class Vs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=gD,Object.setPrototypeOf(this,Vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xu.prototype.create)}}class Xu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?vD(a,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new Vs(i,d,r)}}function vD(n,e){return n.replace(yD,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const yD=/\{\$([^}]+)}/g;function xD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _a(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],c=e[i];if(C_(a)&&C_(c)){if(!_a(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function C_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ru(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function su(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function wD(n,e){const t=new _D(n,e);return t.subscribe.bind(t)}class _D{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ED(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=wg),i.error===void 0&&(i.error=wg),i.complete===void 0&&(i.complete=wg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ED(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(n){return n&&n._delegate?n._delegate:n}class Eo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new rD;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SD(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&c.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const c=this.instances.get(i);return c&&e(c,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TD(n){return n===la?void 0:n}function SD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(at||(at={}));const CD={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},ID=at.INFO,AD={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},jD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=AD[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class py{constructor(e){this.name=e,this._logLevel=ID,this._logHandler=jD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const PD=(n,e)=>e.some(t=>n instanceof t);let I_,A_;function RD(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kD(){return A_||(A_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kT=new WeakMap,cv=new WeakMap,OT=new WeakMap,_g=new WeakMap,gy=new WeakMap;function OD(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(uo(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&kT.set(t,n)}).catch(()=>{}),gy.set(e,n),e}function DD(n){if(cv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});cv.set(n,e)}let uv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||OT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return uo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function LD(n){uv=n(uv)}function MD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Eg(this),e,...t);return OT.set(r,e.sort?e.sort():[e]),uo(r)}:kD().includes(n)?function(...e){return n.apply(Eg(this),e),uo(kT.get(this))}:function(...e){return uo(n.apply(Eg(this),e))}}function FD(n){return typeof n=="function"?MD(n):(n instanceof IDBTransaction&&DD(n),PD(n,RD())?new Proxy(n,uv):n)}function uo(n){if(n instanceof IDBRequest)return OD(n);if(_g.has(n))return _g.get(n);const e=FD(n);return e!==n&&(_g.set(n,e),gy.set(e,n)),e}const Eg=n=>gy.get(n);function VD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),d=uo(c);return r&&c.addEventListener("upgradeneeded",f=>{r(uo(c.result),f.oldVersion,f.newVersion,uo(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const UD=["get","getKey","getAll","getAllKeys","count"],zD=["put","add","delete","clear"],bg=new Map;function j_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(bg.get(e))return bg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=zD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UD.includes(t)))return;const a=async function(c,...d){const f=this.transaction(c,i?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),i&&f.done]))[0]};return bg.set(e,a),a}LD(n=>({...n,get:(e,t,r)=>j_(e,t)||n.get(e,t,r),has:(e,t)=>!!j_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($D(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function $D(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dv="@firebase/app",P_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new py("@firebase/app"),qD="@firebase/app-compat",WD="@firebase/analytics-compat",HD="@firebase/analytics",KD="@firebase/app-check-compat",GD="@firebase/app-check",QD="@firebase/auth",YD="@firebase/auth-compat",XD="@firebase/database",JD="@firebase/data-connect",ZD="@firebase/database-compat",eL="@firebase/functions",tL="@firebase/functions-compat",nL="@firebase/installations",rL="@firebase/installations-compat",sL="@firebase/messaging",iL="@firebase/messaging-compat",oL="@firebase/performance",aL="@firebase/performance-compat",lL="@firebase/remote-config",cL="@firebase/remote-config-compat",uL="@firebase/storage",dL="@firebase/storage-compat",hL="@firebase/firestore",fL="@firebase/ai",mL="@firebase/firestore-compat",pL="firebase",gL="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="[DEFAULT]",vL={[dv]:"fire-core",[qD]:"fire-core-compat",[HD]:"fire-analytics",[WD]:"fire-analytics-compat",[GD]:"fire-app-check",[KD]:"fire-app-check-compat",[QD]:"fire-auth",[YD]:"fire-auth-compat",[XD]:"fire-rtdb",[JD]:"fire-data-connect",[ZD]:"fire-rtdb-compat",[eL]:"fire-fn",[tL]:"fire-fn-compat",[nL]:"fire-iid",[rL]:"fire-iid-compat",[sL]:"fire-fcm",[iL]:"fire-fcm-compat",[oL]:"fire-perf",[aL]:"fire-perf-compat",[lL]:"fire-rc",[cL]:"fire-rc-compat",[uL]:"fire-gcs",[dL]:"fire-gcs-compat",[hL]:"fire-fst",[mL]:"fire-fst-compat",[fL]:"fire-vertex","fire-js":"fire-js",[pL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=new Map,yL=new Map,fv=new Map;function R_(n,e){try{n.container.addComponent(e)}catch(t){fi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ea(n){const e=n.name;if(fv.has(e))return fi.debug(`There were multiple attempts to register component ${e}.`),!1;fv.set(e,n);for(const t of _f.values())R_(t,n);for(const t of yL.values())R_(t,n);return!0}function im(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Pr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ho=new Xu("app","Firebase",xL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ho.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=gL;function DT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ho.create("bad-app-name",{appName:String(i)});if(t||(t=jT()),!t)throw ho.create("no-options");const a=_f.get(i);if(a){if(_a(t,a.options)&&_a(r,a.config))return a;throw ho.create("duplicate-app",{appName:i})}const c=new ND(i);for(const f of fv.values())c.addComponent(f);const d=new wL(t,r,c);return _f.set(i,d),d}function LT(n=hv){const e=_f.get(n);if(!e&&n===hv&&jT())return DT();if(!e)throw ho.create("no-app",{appName:n});return e}function Ts(n,e,t){var r;let i=(r=vL[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${i}" with version "${e}":`];a&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fi.warn(d.join(" "));return}Ea(new Eo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L="firebase-heartbeat-database",EL=1,Iu="firebase-heartbeat-store";let Tg=null;function MT(){return Tg||(Tg=VD(_L,EL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Iu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ho.create("idb-open",{originalErrorMessage:n.message})})),Tg}async function bL(n){try{const t=(await MT()).transaction(Iu),r=await t.objectStore(Iu).get(FT(n));return await t.done,r}catch(e){if(e instanceof Vs)fi.warn(e.message);else{const t=ho.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fi.warn(t.message)}}}async function k_(n,e){try{const r=(await MT()).transaction(Iu,"readwrite");await r.objectStore(Iu).put(e,FT(n)),await r.done}catch(t){if(t instanceof Vs)fi.warn(t.message);else{const r=ho.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fi.warn(r.message)}}}function FT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=1024,SL=30;class NL{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new IL(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=O_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>SL){const c=AL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=O_(),{heartbeatsToSend:r,unsentEntries:i}=CL(this._heartbeatsCache.heartbeats),a=wf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return fi.warn(t),""}}}function O_(){return new Date().toISOString().substring(0,10)}function CL(n,e=TL){const t=[];let r=n.slice();for(const i of n){const a=t.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),D_(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),D_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class IL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mD()?pD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await bL(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return k_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return k_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function D_(n){return wf(JSON.stringify({version:2,heartbeats:n})).length}function AL(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(n){Ea(new Eo("platform-logger",e=>new BD(e),"PRIVATE")),Ea(new Eo("heartbeat",e=>new NL(e),"PRIVATE")),Ts(dv,P_,n),Ts(dv,P_,"esm2017"),Ts("fire-js","")}jL("");var Es=function(){return Es=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Es.apply(this,arguments)};function Zu(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function PL(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function VT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RL=VT,UT=new Xu("auth","Firebase",VT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=new py("@firebase/auth");function kL(n,...e){Ef.logLevel<=at.WARN&&Ef.warn(`Auth (${Pa}): ${n}`,...e)}function Qh(n,...e){Ef.logLevel<=at.ERROR&&Ef.error(`Auth (${Pa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(n,...e){throw vy(n,...e)}function Ss(n,...e){return vy(n,...e)}function zT(n,e,t){const r=Object.assign(Object.assign({},RL()),{[e]:t});return new Xu("auth","Firebase",r).create(e,{appName:n.name})}function fo(n){return zT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return UT.create(n,...e)}function $e(n,e,...t){if(!n)throw vy(e,...t)}function ai(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Qh(e),new Error(e)}function mi(n,e){n||ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function OL(){return L_()==="http:"||L_()==="https:"}function L_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OL()||uD()||"connection"in navigator)?navigator.onLine:!0}function LL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t){this.shortDelay=e,this.longDelay=t,mi(t>e,"Short delay should be less than long delay!"),this.isMobile=aD()||dD()}get(){return DL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(n,e){mi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VL=new ed(3e4,6e4);function Ra(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Po(n,e,t,r,i={}){return $T(n,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const d=Ju(Object.assign({key:n.config.apiKey},c)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return cD()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&ja(n.emulatorConfig.host)&&(m.credentials="include"),BT.fetch()(await qT(n,n.config.apiHost,t,d),m)})}async function $T(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ML),e);try{const i=new zL(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Oh(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oh(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Oh(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw Oh(n,"user-disabled",c);const g=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw zT(n,g,m);os(n,g)}}catch(i){if(i instanceof Vs)throw i;os(n,"network-request-failed",{message:String(i)})}}async function om(n,e,t,r,i={}){const a=await Po(n,e,t,r,i);return"mfaPendingCredential"in a&&os(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function qT(n,e,t,r){const i=`${e}${t}?${r}`,a=n,c=a.config.emulator?yy(n.config,i):`${n.config.apiScheme}://${i}`;return FL.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function UL(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ss(this.auth,"network-request-failed")),VL.get())})}}function Oh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ss(n,e,r);return i.customData._tokenResponse=t,i}function M_(n){return n!==void 0&&n.enterprise!==void 0}class BL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return UL(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $L(n,e){return Po(n,"GET","/v2/recaptchaConfig",Ra(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qL(n,e){return Po(n,"POST","/v1/accounts:delete",e)}async function bf(n,e){return Po(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WL(n,e=!1){const t=ln(n),r=await t.getIdToken(e),i=xy(r);$e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:mu(Sg(i.auth_time)),issuedAtTime:mu(Sg(i.iat)),expirationTime:mu(Sg(i.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Sg(n){return Number(n)*1e3}function xy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Qh("JWT malformed, contained fewer than 3 sections"),null;try{const i=IT(t);return i?JSON.parse(i):(Qh("Failed to decode base64 JWT payload"),null)}catch(i){return Qh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function F_(n){const e=xy(n);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Vs&&HL(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function HL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Au(n,bf(t,{idToken:r}));$e(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?WT(a.providerUserInfo):[],d=QL(n.providerData,c),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),g=f?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new pv(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function GL(n){const e=ln(n);await Tf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QL(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function WT(n){return n.map(e=>{var{providerId:t}=e,r=Zu(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(n,e){const t=await $T(n,{},async()=>{const r=Ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,c=await qT(n,i,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return n.emulatorConfig&&ja(n.emulatorConfig.host)&&(f.credentials="include"),BT.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function XL(n,e){return Po(n,"POST","/v2/accounts:revokeToken",Ra(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):F_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=F_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await YL(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,c=new Pl;return r&&($e(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&($e(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&($e(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pl,this.toJSON())}_performRefresh(){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(n,e){$e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class es{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=Zu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new pv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Au(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return WL(this,e)}reload(){return GL(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new es(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Tf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pr(this.auth.app))return Promise.reject(fo(this.auth));const e=await this.getIdToken();return await Au(this,qL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,c,d,f,m,g;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,T=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,N=(c=t.photoURL)!==null&&c!==void 0?c:void 0,_=(d=t.tenantId)!==null&&d!==void 0?d:void 0,w=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,A=(m=t.createdAt)!==null&&m!==void 0?m:void 0,I=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:O,emailVerified:U,isAnonymous:$,providerData:W,stsTokenManager:D}=t;$e(O&&D,e,"internal-error");const k=Pl.fromJSON(this.name,D);$e(typeof O=="string",e,"internal-error"),Gi(v,e.name),Gi(y,e.name),$e(typeof U=="boolean",e,"internal-error"),$e(typeof $=="boolean",e,"internal-error"),Gi(T,e.name),Gi(N,e.name),Gi(_,e.name),Gi(w,e.name),Gi(A,e.name),Gi(I,e.name);const j=new es({uid:O,auth:e,email:y,emailVerified:U,displayName:v,isAnonymous:$,photoURL:N,phoneNumber:T,tenantId:_,stsTokenManager:k,createdAt:A,lastLoginAt:I});return W&&Array.isArray(W)&&(j.providerData=W.map(P=>Object.assign({},P))),w&&(j._redirectEventId=w),j}static async _fromIdTokenResponse(e,t,r=!1){const i=new Pl;i.updateFromServerResponse(t);const a=new es({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Tf(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];$e(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?WT(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),d=new Pl;d.updateFromIdToken(r);const f=new es({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new pv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=new Map;function li(n){mi(n instanceof Function,"Expected a class definition");let e=V_.get(n);return e?(mi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,V_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}HT.type="NONE";const U_=HT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(n,e,t){return`firebase:${n}:${e}:${t}`}class Rl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Yh(this.userKey,i.apiKey,a),this.fullPersistenceKey=Yh("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await bf(this.auth,{idToken:e}).catch(()=>{});return t?es._fromGetAccountInfoResponse(this.auth,t,e):null}return es._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Rl(li(U_),e,r);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||li(U_);const c=Yh(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const g=await m._get(c);if(g){let v;if(typeof g=="string"){const y=await bf(e,{idToken:g}).catch(()=>{});if(!y)break;v=await es._fromGetAccountInfoResponse(e,y,g)}else v=es._fromJSON(e,g);m!==a&&(d=v),a=m;break}}catch{}const f=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Rl(a,e,r):(a=f[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new Rl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JT(e))return"Blackberry";if(ZT(e))return"Webos";if(GT(e))return"Safari";if((e.includes("chrome/")||QT(e))&&!e.includes("edge/"))return"Chrome";if(XT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function KT(n=Vn()){return/firefox\//i.test(n)}function GT(n=Vn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QT(n=Vn()){return/crios\//i.test(n)}function YT(n=Vn()){return/iemobile/i.test(n)}function XT(n=Vn()){return/android/i.test(n)}function JT(n=Vn()){return/blackberry/i.test(n)}function ZT(n=Vn()){return/webos/i.test(n)}function wy(n=Vn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function JL(n=Vn()){var e;return wy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZL(){return hD()&&document.documentMode===10}function eS(n=Vn()){return wy(n)||XT(n)||ZT(n)||JT(n)||/windows phone/i.test(n)||YT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(n,e=[]){let t;switch(n){case"Browser":t=z_(Vn());break;case"Worker":t=`${z_(Vn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,d)=>{try{const f=e(a);c(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t4(n,e={}){return Po(n,"GET","/v2/passwordPolicy",Ra(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=6;class r4{constructor(e){var t,r,i,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:n4,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,c,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(i=f.containsLowercaseLetter)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new B_(this),this.idTokenSubscription=new B_(this),this.beforeStateQueue=new e4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=li(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Rl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await bf(this,{idToken:e}),r=await es._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Pr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&(f!=null&&f.user)&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Tf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pr(this.app))return Promise.reject(fo(this));const t=e?ln(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pr(this.app)?Promise.reject(fo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pr(this.app)?Promise.reject(fo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await t4(this),t=new r4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await XL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&li(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await Rl.create(this,[li(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,i);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&kL(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function cc(n){return ln(n)}class B_{constructor(e){this.auth=e,this.observer=null,this.addObserver=wD(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let am={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function i4(n){am=n}function nS(n){return am.loadJS(n)}function o4(){return am.recaptchaEnterpriseScript}function a4(){return am.gapiScript}function l4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class c4{constructor(){this.enterprise=new u4}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class u4{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const d4="recaptcha-enterprise",rS="NO_RECAPTCHA";class h4{constructor(e){this.type=d4,this.auth=cc(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{$L(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new BL(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(f=>{d(f)})})}function i(a,c,d){const f=window.grecaptcha;M_(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(rS)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new c4().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(d=>{if(!t&&M_(window.grecaptcha))i(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=o4();f.length!==0&&(f+=d),nS(f).then(()=>{i(d,a,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function $_(n,e,t,r=!1,i=!1){const a=new h4(n);let c;if(i)c=rS;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function q_(n,e,t,r,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await $_(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await $_(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(n,e){const t=im(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(_a(a,e??{}))return i;os(i,"already-initialized")}return t.initialize({options:e})}function m4(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(li);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function p4(n,e,t){const r=cc(n);$e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=sS(e),{host:c,port:d}=g4(e),f=d===null?"":`:${d}`,m={url:`${a}//${c}${f}/`},g=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){$e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),$e(_a(m,r.config.emulator)&&_a(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,ja(c)?(my(`${a}//${c}${f}`),RT("Auth",!0)):v4()}function sS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function g4(n){const e=sS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:W_(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:W_(c)}}}function W_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function v4(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ai("not implemented")}_getIdTokenResponse(e){return ai("not implemented")}_linkToIdToken(e,t){return ai("not implemented")}_getReauthenticationResolver(e){return ai("not implemented")}}async function y4(n,e){return Po(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4(n,e){return om(n,"POST","/v1/accounts:signInWithPassword",Ra(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(n,e){return om(n,"POST","/v1/accounts:signInWithEmailLink",Ra(n,e))}async function _4(n,e){return om(n,"POST","/v1/accounts:signInWithEmailLink",Ra(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends _y{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ju(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ju(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return q_(e,t,"signInWithPassword",x4);case"emailLink":return w4(e,{email:this._email,oobCode:this._password});default:os(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return q_(e,r,"signUpPassword",y4);case"emailLink":return _4(e,{idToken:t,email:this._email,oobCode:this._password});default:os(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(n,e){return om(n,"POST","/v1/accounts:signInWithIdp",Ra(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4="http://localhost";class ba extends _y{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):os("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=Zu(t,["providerId","signInMethod"]);if(!r||!i)return null;const c=new ba(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return kl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,kl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,kl(e,t)}buildRequest(){const e={requestUri:E4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ju(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function T4(n){const e=ru(su(n)).link,t=e?ru(su(e)).deep_link_id:null,r=ru(su(n)).deep_link_id;return(r?ru(su(r)).link:null)||r||t||e||n}class Ey{constructor(e){var t,r,i,a,c,d;const f=ru(su(e)),m=(t=f.apiKey)!==null&&t!==void 0?t:null,g=(r=f.oobCode)!==null&&r!==void 0?r:null,v=b4((i=f.mode)!==null&&i!==void 0?i:null);$e(m&&g&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=g,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=f.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=T4(e);try{return new Ey(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.providerId=uc.PROVIDER_ID}static credential(e,t){return ju._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Ey.parseLink(t);return $e(r,"argument-error"),ju._fromEmailAndCode(e,r.code,r.tenantId)}}uc.PROVIDER_ID="password";uc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td extends iS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends td{constructor(){super("facebook.com")}static credential(e){return ba._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends td{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ba._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ji.credential(t,r)}catch{return null}}}Ji.GOOGLE_SIGN_IN_METHOD="google.com";Ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends td{constructor(){super("github.com")}static credential(e){return ba._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.GITHUB_SIGN_IN_METHOD="github.com";Zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends td{constructor(){super("twitter.com")}static credential(e,t){return ba._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return eo.credential(t,r)}catch{return null}}}eo.TWITTER_SIGN_IN_METHOD="twitter.com";eo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await es._fromIdTokenResponse(e,r,i),c=H_(r);return new Ql({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=H_(r);return new Ql({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function H_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends Vs{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Sf.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Sf(e,t,r,i)}}function oS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Sf._fromErrorAndOperation(n,a,e,r):a})}async function S4(n,e,t=!1){const r=await Au(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ql._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4(n,e,t=!1){const{auth:r}=n;if(Pr(r.app))return Promise.reject(fo(r));const i="reauthenticate";try{const a=await Au(n,oS(r,i,e,n),t);$e(a.idToken,r,"internal-error");const c=xy(a.idToken);$e(c,r,"internal-error");const{sub:d}=c;return $e(n.uid===d,r,"user-mismatch"),Ql._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&os(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aS(n,e,t=!1){if(Pr(n.app))return Promise.reject(fo(n));const r="signIn",i=await oS(n,r,e),a=await Ql._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function C4(n,e){return aS(cc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(n){const e=cc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function A4(n,e,t){return Pr(n.app)?Promise.reject(fo(n)):C4(ln(n),uc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&I4(n),r})}function j4(n,e,t,r){return ln(n).onIdTokenChanged(e,t,r)}function P4(n,e,t){return ln(n).beforeAuthStateChanged(e,t)}function R4(n,e,t,r){return ln(n).onAuthStateChanged(e,t,r)}function k4(n){return ln(n).signOut()}const Nf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Nf,"1"),this.storage.removeItem(Nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=1e3,D4=10;class cS extends lS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);ZL()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,D4):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},O4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cS.type="LOCAL";const L4=cS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS extends lS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uS.type="SESSION";const dS=uS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new lm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async m=>m(t.origin,a)),f=await M4(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((d,f)=>{const m=by("",20);i.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(v){const y=v;if(y.data.eventId===m)switch(y.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(y.data.response);break;default:clearTimeout(g),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(){return window}function V4(n){Ns().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(){return typeof Ns().WorkerGlobalScope<"u"&&typeof Ns().importScripts=="function"}async function U4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function B4(){return hS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="firebaseLocalStorageDb",$4=1,Cf="firebaseLocalStorage",mS="fbase_key";class nd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function cm(n,e){return n.transaction([Cf],e?"readwrite":"readonly").objectStore(Cf)}function q4(){const n=indexedDB.deleteDatabase(fS);return new nd(n).toPromise()}function gv(){const n=indexedDB.open(fS,$4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Cf,{keyPath:mS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Cf)?e(r):(r.close(),await q4(),e(await gv()))})})}async function K_(n,e,t){const r=cm(n,!0).put({[mS]:e,value:t});return new nd(r).toPromise()}async function W4(n,e){const t=cm(n,!1).get(e),r=await new nd(t).toPromise();return r===void 0?null:r.value}function G_(n,e){const t=cm(n,!0).delete(e);return new nd(t).toPromise()}const H4=800,K4=3;class pS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>K4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lm._getInstance(B4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await U4(),!this.activeServiceWorker)return;this.sender=new F4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||z4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gv();return await K_(e,Nf,"1"),await G_(e,Nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>K_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>W4(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>G_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=cm(i,!1).getAll();return new nd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),H4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pS.type="LOCAL";const G4=pS;new ed(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(n,e){return e?li(e):($e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty extends _y{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return kl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return kl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Y4(n){return aS(n.auth,new Ty(n),n.bypassAuthState)}function X4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),N4(t,new Ty(n),n.bypassAuthState)}async function J4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),S4(t,new Ty(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y4;case"linkViaPopup":case"linkViaRedirect":return J4;case"reauthViaPopup":case"reauthViaRedirect":return X4;default:os(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=new ed(2e3,1e4);class Il extends gS{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Il.currentPopupAction&&Il.currentPopupAction.cancel(),Il.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const e=by();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ss(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ss(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Il.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ss(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Z4.get())};e()}}Il.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="pendingRedirect",Xh=new Map;class tM extends gS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Xh.get(this.auth._key());if(!e){try{const r=await nM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Xh.set(this.auth._key(),e)}return this.bypassAuthState||Xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nM(n,e){const t=iM(e),r=sM(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function rM(n,e){Xh.set(n._key(),e)}function sM(n){return li(n._redirectPersistence)}function iM(n){return Yh(eM,n.config.apiKey,n.name)}async function oM(n,e,t=!1){if(Pr(n.app))return Promise.reject(fo(n));const r=cc(n),i=Q4(r,e),c=await new tM(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=10*60*1e3;class lM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!vS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ss(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Q_(e))}saveEventToCache(e){this.cachedEventUids.add(Q_(e)),this.lastProcessedEventTime=Date.now()}}function Q_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function vS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uM(n,e={}){return Po(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hM=/^https?/;async function fM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await uM(n);for(const t of e)try{if(mM(t))return}catch{}os(n,"unauthorized-domain")}function mM(n){const e=mv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!hM.test(t))return!1;if(dM.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=new ed(3e4,6e4);function Y_(){const n=Ns().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gM(n){return new Promise((e,t)=>{var r,i,a;function c(){Y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y_(),t(Ss(n,"network-request-failed"))},timeout:pM.get()})}if(!((i=(r=Ns().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Ns().gapi)===null||a===void 0)&&a.load)c();else{const d=l4("iframefcb");return Ns()[d]=()=>{gapi.load?c():t(Ss(n,"network-request-failed"))},nS(`${a4()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Jh=null,e})}let Jh=null;function vM(n){return Jh=Jh||gM(n),Jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=new ed(5e3,15e3),xM="__/auth/iframe",wM="emulator/auth/iframe",_M={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bM(n){const e=n.config;$e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?yy(e,wM):`https://${n.config.authDomain}/${xM}`,r={apiKey:e.apiKey,appName:n.name,v:Pa},i=EM.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Ju(r).slice(1)}`}async function TM(n){const e=await vM(n),t=Ns().gapi;return $e(t,n,"internal-error"),e.open({where:document.body,url:bM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_M,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=Ss(n,"network-request-failed"),d=Ns().setTimeout(()=>{a(c)},yM.get());function f(){Ns().clearTimeout(d),i(r)}r.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NM=500,CM=600,IM="_blank",AM="http://localhost";class X_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jM(n,e,t,r=NM,i=CM){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},SM),{width:r.toString(),height:i.toString(),top:a,left:c}),m=Vn().toLowerCase();t&&(d=QT(m)?IM:t),KT(m)&&(e=e||AM,f.scrollbars="yes");const g=Object.entries(f).reduce((y,[T,N])=>`${y}${T}=${N},`,"");if(JL(m)&&d!=="_self")return PM(e||"",d),new X_(null);const v=window.open(e||"",d,g);$e(v,n,"popup-blocked");try{v.focus()}catch{}return new X_(v)}function PM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="__/auth/handler",kM="emulator/auth/handler",OM=encodeURIComponent("fac");async function J_(n,e,t,r,i,a){$e(n.config.authDomain,n,"auth-domain-config-required"),$e(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Pa,eventId:i};if(e instanceof iS){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",xD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))c[g]=v}if(e instanceof td){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const g of Object.keys(d))d[g]===void 0&&delete d[g];const f=await n._getAppCheckToken(),m=f?`#${OM}=${encodeURIComponent(f)}`:"";return`${DM(n)}?${Ju(d).slice(1)}${m}`}function DM({config:n}){return n.emulator?yy(n,kM):`https://${n.authDomain}/${RM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="webStorageSupport";class LM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dS,this._completeRedirectFn=oM,this._overrideRedirectResult=rM}async _openPopup(e,t,r,i){var a;mi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await J_(e,t,r,mv(),i);return jM(e,c,by())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await J_(e,t,r,mv(),i);return V4(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(mi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await TM(e),r=new lM(e);return t.register("authEvent",i=>($e(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ng,{type:Ng},i=>{var a;const c=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Ng];c!==void 0&&t(!!c),os(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eS()||GT()||wy()}}const MM=LM;var Z_="@firebase/auth",eE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UM(n){Ea(new Eo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;$e(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tS(n)},m=new s4(r,i,a,f);return m4(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ea(new Eo("auth-internal",e=>{const t=cc(e.getProvider("auth").getImmediate());return(r=>new FM(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ts(Z_,eE,VM(n)),Ts(Z_,eE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=5*60,BM=PT("authIdTokenMaxAge")||zM;let tE=null;const $M=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>BM)return;const i=t==null?void 0:t.token;tE!==i&&(tE=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function qM(n=LT()){const e=im(n,"auth");if(e.isInitialized())return e.getImmediate();const t=f4(n,{popupRedirectResolver:MM,persistence:[G4,L4,dS]}),r=PT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=$M(a.toString());P4(t,c,()=>c(t.currentUser)),j4(t,d=>c(d))}}const i=AT("auth");return i&&p4(t,`http://${i}`),t}function WM(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}i4({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Ss("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",WM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UM("Browser");var HM="firebase",KM="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ts(HM,KM,"app");var nE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mo,yS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,k){function j(){}j.prototype=k.prototype,D.D=k.prototype,D.prototype=new j,D.prototype.constructor=D,D.C=function(P,F,M){for(var L=Array(arguments.length-2),J=2;J<arguments.length;J++)L[J-2]=arguments[J];return k.prototype[F].apply(P,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,k,j){j||(j=0);var P=Array(16);if(typeof k=="string")for(var F=0;16>F;++F)P[F]=k.charCodeAt(j++)|k.charCodeAt(j++)<<8|k.charCodeAt(j++)<<16|k.charCodeAt(j++)<<24;else for(F=0;16>F;++F)P[F]=k[j++]|k[j++]<<8|k[j++]<<16|k[j++]<<24;k=D.g[0],j=D.g[1],F=D.g[2];var M=D.g[3],L=k+(M^j&(F^M))+P[0]+3614090360&4294967295;k=j+(L<<7&4294967295|L>>>25),L=M+(F^k&(j^F))+P[1]+3905402710&4294967295,M=k+(L<<12&4294967295|L>>>20),L=F+(j^M&(k^j))+P[2]+606105819&4294967295,F=M+(L<<17&4294967295|L>>>15),L=j+(k^F&(M^k))+P[3]+3250441966&4294967295,j=F+(L<<22&4294967295|L>>>10),L=k+(M^j&(F^M))+P[4]+4118548399&4294967295,k=j+(L<<7&4294967295|L>>>25),L=M+(F^k&(j^F))+P[5]+1200080426&4294967295,M=k+(L<<12&4294967295|L>>>20),L=F+(j^M&(k^j))+P[6]+2821735955&4294967295,F=M+(L<<17&4294967295|L>>>15),L=j+(k^F&(M^k))+P[7]+4249261313&4294967295,j=F+(L<<22&4294967295|L>>>10),L=k+(M^j&(F^M))+P[8]+1770035416&4294967295,k=j+(L<<7&4294967295|L>>>25),L=M+(F^k&(j^F))+P[9]+2336552879&4294967295,M=k+(L<<12&4294967295|L>>>20),L=F+(j^M&(k^j))+P[10]+4294925233&4294967295,F=M+(L<<17&4294967295|L>>>15),L=j+(k^F&(M^k))+P[11]+2304563134&4294967295,j=F+(L<<22&4294967295|L>>>10),L=k+(M^j&(F^M))+P[12]+1804603682&4294967295,k=j+(L<<7&4294967295|L>>>25),L=M+(F^k&(j^F))+P[13]+4254626195&4294967295,M=k+(L<<12&4294967295|L>>>20),L=F+(j^M&(k^j))+P[14]+2792965006&4294967295,F=M+(L<<17&4294967295|L>>>15),L=j+(k^F&(M^k))+P[15]+1236535329&4294967295,j=F+(L<<22&4294967295|L>>>10),L=k+(F^M&(j^F))+P[1]+4129170786&4294967295,k=j+(L<<5&4294967295|L>>>27),L=M+(j^F&(k^j))+P[6]+3225465664&4294967295,M=k+(L<<9&4294967295|L>>>23),L=F+(k^j&(M^k))+P[11]+643717713&4294967295,F=M+(L<<14&4294967295|L>>>18),L=j+(M^k&(F^M))+P[0]+3921069994&4294967295,j=F+(L<<20&4294967295|L>>>12),L=k+(F^M&(j^F))+P[5]+3593408605&4294967295,k=j+(L<<5&4294967295|L>>>27),L=M+(j^F&(k^j))+P[10]+38016083&4294967295,M=k+(L<<9&4294967295|L>>>23),L=F+(k^j&(M^k))+P[15]+3634488961&4294967295,F=M+(L<<14&4294967295|L>>>18),L=j+(M^k&(F^M))+P[4]+3889429448&4294967295,j=F+(L<<20&4294967295|L>>>12),L=k+(F^M&(j^F))+P[9]+568446438&4294967295,k=j+(L<<5&4294967295|L>>>27),L=M+(j^F&(k^j))+P[14]+3275163606&4294967295,M=k+(L<<9&4294967295|L>>>23),L=F+(k^j&(M^k))+P[3]+4107603335&4294967295,F=M+(L<<14&4294967295|L>>>18),L=j+(M^k&(F^M))+P[8]+1163531501&4294967295,j=F+(L<<20&4294967295|L>>>12),L=k+(F^M&(j^F))+P[13]+2850285829&4294967295,k=j+(L<<5&4294967295|L>>>27),L=M+(j^F&(k^j))+P[2]+4243563512&4294967295,M=k+(L<<9&4294967295|L>>>23),L=F+(k^j&(M^k))+P[7]+1735328473&4294967295,F=M+(L<<14&4294967295|L>>>18),L=j+(M^k&(F^M))+P[12]+2368359562&4294967295,j=F+(L<<20&4294967295|L>>>12),L=k+(j^F^M)+P[5]+4294588738&4294967295,k=j+(L<<4&4294967295|L>>>28),L=M+(k^j^F)+P[8]+2272392833&4294967295,M=k+(L<<11&4294967295|L>>>21),L=F+(M^k^j)+P[11]+1839030562&4294967295,F=M+(L<<16&4294967295|L>>>16),L=j+(F^M^k)+P[14]+4259657740&4294967295,j=F+(L<<23&4294967295|L>>>9),L=k+(j^F^M)+P[1]+2763975236&4294967295,k=j+(L<<4&4294967295|L>>>28),L=M+(k^j^F)+P[4]+1272893353&4294967295,M=k+(L<<11&4294967295|L>>>21),L=F+(M^k^j)+P[7]+4139469664&4294967295,F=M+(L<<16&4294967295|L>>>16),L=j+(F^M^k)+P[10]+3200236656&4294967295,j=F+(L<<23&4294967295|L>>>9),L=k+(j^F^M)+P[13]+681279174&4294967295,k=j+(L<<4&4294967295|L>>>28),L=M+(k^j^F)+P[0]+3936430074&4294967295,M=k+(L<<11&4294967295|L>>>21),L=F+(M^k^j)+P[3]+3572445317&4294967295,F=M+(L<<16&4294967295|L>>>16),L=j+(F^M^k)+P[6]+76029189&4294967295,j=F+(L<<23&4294967295|L>>>9),L=k+(j^F^M)+P[9]+3654602809&4294967295,k=j+(L<<4&4294967295|L>>>28),L=M+(k^j^F)+P[12]+3873151461&4294967295,M=k+(L<<11&4294967295|L>>>21),L=F+(M^k^j)+P[15]+530742520&4294967295,F=M+(L<<16&4294967295|L>>>16),L=j+(F^M^k)+P[2]+3299628645&4294967295,j=F+(L<<23&4294967295|L>>>9),L=k+(F^(j|~M))+P[0]+4096336452&4294967295,k=j+(L<<6&4294967295|L>>>26),L=M+(j^(k|~F))+P[7]+1126891415&4294967295,M=k+(L<<10&4294967295|L>>>22),L=F+(k^(M|~j))+P[14]+2878612391&4294967295,F=M+(L<<15&4294967295|L>>>17),L=j+(M^(F|~k))+P[5]+4237533241&4294967295,j=F+(L<<21&4294967295|L>>>11),L=k+(F^(j|~M))+P[12]+1700485571&4294967295,k=j+(L<<6&4294967295|L>>>26),L=M+(j^(k|~F))+P[3]+2399980690&4294967295,M=k+(L<<10&4294967295|L>>>22),L=F+(k^(M|~j))+P[10]+4293915773&4294967295,F=M+(L<<15&4294967295|L>>>17),L=j+(M^(F|~k))+P[1]+2240044497&4294967295,j=F+(L<<21&4294967295|L>>>11),L=k+(F^(j|~M))+P[8]+1873313359&4294967295,k=j+(L<<6&4294967295|L>>>26),L=M+(j^(k|~F))+P[15]+4264355552&4294967295,M=k+(L<<10&4294967295|L>>>22),L=F+(k^(M|~j))+P[6]+2734768916&4294967295,F=M+(L<<15&4294967295|L>>>17),L=j+(M^(F|~k))+P[13]+1309151649&4294967295,j=F+(L<<21&4294967295|L>>>11),L=k+(F^(j|~M))+P[4]+4149444226&4294967295,k=j+(L<<6&4294967295|L>>>26),L=M+(j^(k|~F))+P[11]+3174756917&4294967295,M=k+(L<<10&4294967295|L>>>22),L=F+(k^(M|~j))+P[2]+718787259&4294967295,F=M+(L<<15&4294967295|L>>>17),L=j+(M^(F|~k))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+k&4294967295,D.g[1]=D.g[1]+(F+(L<<21&4294967295|L>>>11))&4294967295,D.g[2]=D.g[2]+F&4294967295,D.g[3]=D.g[3]+M&4294967295}r.prototype.u=function(D,k){k===void 0&&(k=D.length);for(var j=k-this.blockSize,P=this.B,F=this.h,M=0;M<k;){if(F==0)for(;M<=j;)i(this,D,M),M+=this.blockSize;if(typeof D=="string"){for(;M<k;)if(P[F++]=D.charCodeAt(M++),F==this.blockSize){i(this,P),F=0;break}}else for(;M<k;)if(P[F++]=D[M++],F==this.blockSize){i(this,P),F=0;break}}this.h=F,this.o+=k},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var k=1;k<D.length-8;++k)D[k]=0;var j=8*this.o;for(k=D.length-8;k<D.length;++k)D[k]=j&255,j/=256;for(this.u(D),D=Array(16),k=j=0;4>k;++k)for(var P=0;32>P;P+=8)D[j++]=this.g[k]>>>P&255;return D};function a(D,k){var j=d;return Object.prototype.hasOwnProperty.call(j,D)?j[D]:j[D]=k(D)}function c(D,k){this.h=k;for(var j=[],P=!0,F=D.length-1;0<=F;F--){var M=D[F]|0;P&&M==k||(j[F]=M,P=!1)}this.g=j}var d={};function f(D){return-128<=D&&128>D?a(D,function(k){return new c([k|0],0>k?-1:0)}):new c([D|0],0>D?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return v;if(0>D)return w(m(-D));for(var k=[],j=1,P=0;D>=j;P++)k[P]=D/j|0,j*=4294967296;return new c(k,0)}function g(D,k){if(D.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(D.charAt(0)=="-")return w(g(D.substring(1),k));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=m(Math.pow(k,8)),P=v,F=0;F<D.length;F+=8){var M=Math.min(8,D.length-F),L=parseInt(D.substring(F,F+M),k);8>M?(M=m(Math.pow(k,M)),P=P.j(M).add(m(L))):(P=P.j(j),P=P.add(m(L)))}return P}var v=f(0),y=f(1),T=f(16777216);n=c.prototype,n.m=function(){if(_(this))return-w(this).m();for(var D=0,k=1,j=0;j<this.g.length;j++){var P=this.i(j);D+=(0<=P?P:4294967296+P)*k,k*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(N(this))return"0";if(_(this))return"-"+w(this).toString(D);for(var k=m(Math.pow(D,6)),j=this,P="";;){var F=U(j,k).g;j=A(j,F.j(k));var M=((0<j.g.length?j.g[0]:j.h)>>>0).toString(D);if(j=F,N(j))return M+P;for(;6>M.length;)M="0"+M;P=M+P}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function N(D){if(D.h!=0)return!1;for(var k=0;k<D.g.length;k++)if(D.g[k]!=0)return!1;return!0}function _(D){return D.h==-1}n.l=function(D){return D=A(this,D),_(D)?-1:N(D)?0:1};function w(D){for(var k=D.g.length,j=[],P=0;P<k;P++)j[P]=~D.g[P];return new c(j,~D.h).add(y)}n.abs=function(){return _(this)?w(this):this},n.add=function(D){for(var k=Math.max(this.g.length,D.g.length),j=[],P=0,F=0;F<=k;F++){var M=P+(this.i(F)&65535)+(D.i(F)&65535),L=(M>>>16)+(this.i(F)>>>16)+(D.i(F)>>>16);P=L>>>16,M&=65535,L&=65535,j[F]=L<<16|M}return new c(j,j[j.length-1]&-2147483648?-1:0)};function A(D,k){return D.add(w(k))}n.j=function(D){if(N(this)||N(D))return v;if(_(this))return _(D)?w(this).j(w(D)):w(w(this).j(D));if(_(D))return w(this.j(w(D)));if(0>this.l(T)&&0>D.l(T))return m(this.m()*D.m());for(var k=this.g.length+D.g.length,j=[],P=0;P<2*k;P++)j[P]=0;for(P=0;P<this.g.length;P++)for(var F=0;F<D.g.length;F++){var M=this.i(P)>>>16,L=this.i(P)&65535,J=D.i(F)>>>16,ie=D.i(F)&65535;j[2*P+2*F]+=L*ie,I(j,2*P+2*F),j[2*P+2*F+1]+=M*ie,I(j,2*P+2*F+1),j[2*P+2*F+1]+=L*J,I(j,2*P+2*F+1),j[2*P+2*F+2]+=M*J,I(j,2*P+2*F+2)}for(P=0;P<k;P++)j[P]=j[2*P+1]<<16|j[2*P];for(P=k;P<2*k;P++)j[P]=0;return new c(j,0)};function I(D,k){for(;(D[k]&65535)!=D[k];)D[k+1]+=D[k]>>>16,D[k]&=65535,k++}function O(D,k){this.g=D,this.h=k}function U(D,k){if(N(k))throw Error("division by zero");if(N(D))return new O(v,v);if(_(D))return k=U(w(D),k),new O(w(k.g),w(k.h));if(_(k))return k=U(D,w(k)),new O(w(k.g),k.h);if(30<D.g.length){if(_(D)||_(k))throw Error("slowDivide_ only works with positive integers.");for(var j=y,P=k;0>=P.l(D);)j=$(j),P=$(P);var F=W(j,1),M=W(P,1);for(P=W(P,2),j=W(j,2);!N(P);){var L=M.add(P);0>=L.l(D)&&(F=F.add(j),M=L),P=W(P,1),j=W(j,1)}return k=A(D,F.j(k)),new O(F,k)}for(F=v;0<=D.l(k);){for(j=Math.max(1,Math.floor(D.m()/k.m())),P=Math.ceil(Math.log(j)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),M=m(j),L=M.j(k);_(L)||0<L.l(D);)j-=P,M=m(j),L=M.j(k);N(M)&&(M=y),F=F.add(M),D=A(D,L)}return new O(F,D)}n.A=function(D){return U(this,D).h},n.and=function(D){for(var k=Math.max(this.g.length,D.g.length),j=[],P=0;P<k;P++)j[P]=this.i(P)&D.i(P);return new c(j,this.h&D.h)},n.or=function(D){for(var k=Math.max(this.g.length,D.g.length),j=[],P=0;P<k;P++)j[P]=this.i(P)|D.i(P);return new c(j,this.h|D.h)},n.xor=function(D){for(var k=Math.max(this.g.length,D.g.length),j=[],P=0;P<k;P++)j[P]=this.i(P)^D.i(P);return new c(j,this.h^D.h)};function $(D){for(var k=D.g.length+1,j=[],P=0;P<k;P++)j[P]=D.i(P)<<1|D.i(P-1)>>>31;return new c(j,D.h)}function W(D,k){var j=k>>5;k%=32;for(var P=D.g.length-j,F=[],M=0;M<P;M++)F[M]=0<k?D.i(M+j)>>>k|D.i(M+j+1)<<32-k:D.i(M+j);return new c(F,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,mo=c}).apply(typeof nE<"u"?nE:typeof self<"u"?self:typeof window<"u"?window:{});var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xS,iu,wS,Zh,vv,_S,ES,bS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,b,C){return h==Array.prototype||h==Object.prototype||(h[b]=C.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dh=="object"&&Dh];for(var b=0;b<h.length;++b){var C=h[b];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var r=t(this);function i(h,b){if(b)e:{var C=r;h=h.split(".");for(var V=0;V<h.length-1;V++){var G=h[V];if(!(G in C))break e;C=C[G]}h=h[h.length-1],V=C[h],b=b(V),b!=V&&b!=null&&e(C,h,{configurable:!0,writable:!0,value:b})}}function a(h,b){h instanceof String&&(h+="");var C=0,V=!1,G={next:function(){if(!V&&C<h.length){var te=C++;return{value:b(te,h[te]),done:!1}}return V=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}i("Array.prototype.values",function(h){return h||function(){return a(this,function(b,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var b=typeof h;return b=b!="object"?b:h?Array.isArray(h)?"array":b:"null",b=="array"||b=="object"&&typeof h.length=="number"}function m(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function g(h,b,C){return h.call.apply(h.bind,arguments)}function v(h,b,C){if(!h)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,V),h.apply(b,G)}}return function(){return h.apply(b,arguments)}}function y(h,b,C){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,y.apply(null,arguments)}function T(h,b){var C=Array.prototype.slice.call(arguments,1);return function(){var V=C.slice();return V.push.apply(V,arguments),h.apply(this,V)}}function N(h,b){function C(){}C.prototype=b.prototype,h.aa=b.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(V,G,te){for(var xe=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)xe[_t-2]=arguments[_t];return b.prototype[G].apply(V,xe)}}function _(h){const b=h.length;if(0<b){const C=Array(b);for(let V=0;V<b;V++)C[V]=h[V];return C}return[]}function w(h,b){for(let C=1;C<arguments.length;C++){const V=arguments[C];if(f(V)){const G=h.length||0,te=V.length||0;h.length=G+te;for(let xe=0;xe<te;xe++)h[G+xe]=V[xe]}else h.push(V)}}class A{constructor(b,C){this.i=b,this.j=C,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function I(h){return/^[\s\xa0]*$/.test(h)}function O(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function U(h){return U[" "](h),h}U[" "]=function(){};var $=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function W(h,b,C){for(const V in h)b.call(C,h[V],V,h)}function D(h,b){for(const C in h)b.call(void 0,h[C],C,h)}function k(h){const b={};for(const C in h)b[C]=h[C];return b}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,b){let C,V;for(let G=1;G<arguments.length;G++){V=arguments[G];for(C in V)h[C]=V[C];for(let te=0;te<j.length;te++)C=j[te],Object.prototype.hasOwnProperty.call(V,C)&&(h[C]=V[C])}}function F(h){var b=1;h=h.split(":");const C=[];for(;0<b&&h.length;)C.push(h.shift()),b--;return h.length&&C.push(h.join(":")),C}function M(h){d.setTimeout(()=>{throw h},0)}function L(){var h=ne;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class J{constructor(){this.h=this.g=null}add(b,C){const V=ie.get();V.set(b,C),this.h?this.h.next=V:this.g=V,this.h=V}}var ie=new A(()=>new re,h=>h.reset());class re{constructor(){this.next=this.g=this.h=null}set(b,C){this.h=b,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,K=!1,ne=new J,ce=()=>{const h=d.Promise.resolve(void 0);ae=()=>{h.then(B)}};var B=()=>{for(var h;h=L();){try{h.h.call(h.g)}catch(C){M(C)}var b=ie;b.j(h),100>b.h&&(b.h++,h.next=b.g,b.g=h)}K=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};d.addEventListener("test",C,b),d.removeEventListener("test",C,b)}catch{}return h}();function Le(h,b){if(he.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,V=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget){if($){e:{try{U(b.nodeName);var G=!0;break e}catch{}G=!1}G||(b=null)}}else C=="mouseover"?b=h.fromElement:C=="mouseout"&&(b=h.toElement);this.relatedTarget=b,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ae[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Le.aa.h.call(this)}}N(Le,he);var Ae={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Te(h,b,C,V,G){this.listener=h,this.proxy=null,this.src=b,this.type=C,this.capture=!!V,this.ha=G,this.key=++_e,this.da=this.fa=!1}function De(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function tt(h){this.src=h,this.g={},this.h=0}tt.prototype.add=function(h,b,C,V,G){var te=h.toString();h=this.g[te],h||(h=this.g[te]=[],this.h++);var xe=fe(h,b,V,G);return-1<xe?(b=h[xe],C||(b.fa=!1)):(b=new Te(b,this.src,te,!!V,G),b.fa=C,h.push(b)),b};function nt(h,b){var C=b.type;if(C in h.g){var V=h.g[C],G=Array.prototype.indexOf.call(V,b,void 0),te;(te=0<=G)&&Array.prototype.splice.call(V,G,1),te&&(De(b),h.g[C].length==0&&(delete h.g[C],h.h--))}}function fe(h,b,C,V){for(var G=0;G<h.length;++G){var te=h[G];if(!te.da&&te.listener==b&&te.capture==!!C&&te.ha==V)return G}return-1}var Ye="closure_lm_"+(1e6*Math.random()|0),qt={};function Ot(h,b,C,V,G){if(Array.isArray(b)){for(var te=0;te<b.length;te++)Ot(h,b[te],C,V,G);return null}return C=kr(C),h&&h[ge]?h.K(b,C,m(V)?!!V.capture:!1,G):Fe(h,b,C,!1,V,G)}function Fe(h,b,C,V,G,te){if(!b)throw Error("Invalid event type");var xe=m(G)?!!G.capture:!!G,_t=In(h);if(_t||(h[Ye]=_t=new tt(h)),C=_t.add(b,C,V,xe,te),C.proxy)return C;if(V=Un(),C.proxy=V,V.src=h,V.listener=C,h.addEventListener)Ie||(G=xe),G===void 0&&(G=!1),h.addEventListener(b.toString(),V,G);else if(h.attachEvent)h.attachEvent(wn(b.toString()),V);else if(h.addListener&&h.removeListener)h.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Un(){function h(C){return b.call(h.src,h.listener,C)}const b=lr;return h}function be(h,b,C,V,G){if(Array.isArray(b))for(var te=0;te<b.length;te++)be(h,b[te],C,V,G);else V=m(V)?!!V.capture:!!V,C=kr(C),h&&h[ge]?(h=h.i,b=String(b).toString(),b in h.g&&(te=h.g[b],C=fe(te,C,V,G),-1<C&&(De(te[C]),Array.prototype.splice.call(te,C,1),te.length==0&&(delete h.g[b],h.h--)))):h&&(h=In(h))&&(b=h.g[b.toString()],h=-1,b&&(h=fe(b,C,V,G)),(C=-1<h?b[h]:null)&&ct(C))}function ct(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[ge])nt(b.i,h);else{var C=h.type,V=h.proxy;b.removeEventListener?b.removeEventListener(C,V,h.capture):b.detachEvent?b.detachEvent(wn(C),V):b.addListener&&b.removeListener&&b.removeListener(V),(C=In(b))?(nt(C,h),C.h==0&&(C.src=null,b[Ye]=null)):De(h)}}}function wn(h){return h in qt?qt[h]:qt[h]="on"+h}function lr(h,b){if(h.da)h=!0;else{b=new Le(b,this);var C=h.listener,V=h.ha||h.src;h.fa&&ct(h),h=C.call(V,b)}return h}function In(h){return h=h[Ye],h instanceof tt?h:null}var Wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function kr(h){return typeof h=="function"?h:(h[Wt]||(h[Wt]=function(b){return h.handleEvent(b)}),h[Wt])}function Ct(){X.call(this),this.i=new tt(this),this.M=this,this.F=null}N(Ct,X),Ct.prototype[ge]=!0,Ct.prototype.removeEventListener=function(h,b,C,V){be(this,h,b,C,V)};function wt(h,b){var C,V=h.F;if(V)for(C=[];V;V=V.F)C.push(V);if(h=h.M,V=b.type||b,typeof b=="string")b=new he(b,h);else if(b instanceof he)b.target=b.target||h;else{var G=b;b=new he(V,h),P(b,G)}if(G=!0,C)for(var te=C.length-1;0<=te;te--){var xe=b.g=C[te];G=zn(xe,V,!0,b)&&G}if(xe=b.g=h,G=zn(xe,V,!0,b)&&G,G=zn(xe,V,!1,b)&&G,C)for(te=0;te<C.length;te++)xe=b.g=C[te],G=zn(xe,V,!1,b)&&G}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var h=this.i,b;for(b in h.g){for(var C=h.g[b],V=0;V<C.length;V++)De(C[V]);delete h.g[b],h.h--}}this.F=null},Ct.prototype.K=function(h,b,C,V){return this.i.add(String(h),b,!1,C,V)},Ct.prototype.L=function(h,b,C,V){return this.i.add(String(h),b,!0,C,V)};function zn(h,b,C,V){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();for(var G=!0,te=0;te<b.length;++te){var xe=b[te];if(xe&&!xe.da&&xe.capture==C){var _t=xe.listener,cn=xe.ha||xe.src;xe.fa&&nt(h.i,xe),G=_t.call(cn,V)!==!1&&G}}return G&&!V.defaultPrevented}function bt(h,b,C){if(typeof h=="function")C&&(h=y(h,C));else if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:d.setTimeout(h,b||0)}function Or(h){h.g=bt(()=>{h.g=null,h.i&&(h.i=!1,Or(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class zs extends X{constructor(b,C){super(),this.m=b,this.l=C,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Or(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ls(h){X.call(this),this.h=h,this.g={}}N(ls,X);var Ei=[];function Lo(h){W(h.g,function(b,C){this.g.hasOwnProperty(C)&&ct(b)},h),h.g={}}ls.prototype.N=function(){ls.aa.N.call(this),Lo(this)},ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bs=d.JSON.stringify,Qn=d.JSON.parse,Mo=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Be(){}Be.prototype.h=null;function gt(h){return h.h||(h.h=h.i())}function mt(){}var Vt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gt(){he.call(this,"d")}N(Gt,he);function Dr(){he.call(this,"c")}N(Dr,he);var wr={},gc=null;function Fo(){return gc=gc||new Ct}wr.La="serverreachability";function vc(h){he.call(this,wr.La,h)}N(vc,he);function $s(h){const b=Fo();wt(b,new vc(b))}wr.STAT_EVENT="statevent";function yc(h,b){he.call(this,wr.STAT_EVENT,h),this.stat=b}N(yc,he);function Qt(h){const b=Fo();wt(b,new yc(b,h))}wr.Ma="timingevent";function Ma(h,b){he.call(this,wr.Ma,h),this.size=b}N(Ma,he);function Lr(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},b)}function Vo(){this.g=!0}Vo.prototype.xa=function(){this.g=!1};function Uo(h,b,C,V,G,te){h.info(function(){if(h.g)if(te)for(var xe="",_t=te.split("&"),cn=0;cn<_t.length;cn++){var ht=_t[cn].split("=");if(1<ht.length){var mn=ht[0];ht=ht[1];var en=mn.split("_");xe=2<=en.length&&en[1]=="type"?xe+(mn+"="+ht+"&"):xe+(mn+"=redacted&")}}else xe=null;else xe=te;return"XMLHTTP REQ ("+V+") [attempt "+G+"]: "+b+`
`+C+`
`+xe})}function Fa(h,b,C,V,G,te,xe){h.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+G+"]: "+b+`
`+C+`
`+te+" "+xe})}function Mr(h,b,C,V){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+Om(h,C)+(V?" "+V:"")})}function xc(h,b){h.info(function(){return"TIMEOUT: "+b})}Vo.prototype.info=function(){};function Om(h,b){if(!h.g)return b;if(!b)return null;try{var C=JSON.parse(b);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var V=C[h];if(!(2>V.length)){var G=V[1];if(Array.isArray(G)&&!(1>G.length)){var te=G[0];if(te!="noop"&&te!="stop"&&te!="close")for(var xe=1;xe<G.length;xe++)G[xe]=""}}}}return Bs(C)}catch{return b}}var Va={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fr;function zo(){}N(zo,Be),zo.prototype.g=function(){return new XMLHttpRequest},zo.prototype.i=function(){return{}},Fr=new zo;function Vr(h,b,C,V){this.j=h,this.i=b,this.l=C,this.R=V||1,this.U=new ls(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fd}function fd(){this.i=null,this.g="",this.h=!1}var wc={},Ua={};function za(h,b,C){h.L=1,h.v=Ci(ur(b)),h.m=C,h.P=!0,_c(h,null)}function _c(h,b){h.F=Date.now(),It(h),h.A=ur(h.v);var C=h.A,V=h.R;Array.isArray(V)||(V=[String(V)]),Ai(C.i,"t",V),h.C=0,C=h.j.J,h.h=new fd,h.g=Pd(h.j,C?b:null,!h.m),0<h.O&&(h.M=new zs(y(h.Y,h,h.g),h.O)),b=h.U,C=h.g,V=h.ca;var G="readystatechange";Array.isArray(G)||(G&&(Ei[0]=G.toString()),G=Ei);for(var te=0;te<G.length;te++){var xe=Ot(C,G[te],V||b.handleEvent,!1,b.h||b);if(!xe)break;b.g[xe.key]=xe}b=h.H?k(h.H):{},h.m?(h.u||(h.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,b)):(h.u="GET",h.g.ea(h.A,h.u,null,b)),$s(),Uo(h.i,h.u,h.A,h.l,h.R,h.m)}Vr.prototype.ca=function(h){h=h.target;const b=this.M;b&&Xn(h)==3?b.j():this.Y(h)},Vr.prototype.Y=function(h){try{if(h==this.g)e:{const en=Xn(this.g);var b=this.g.Ba();const br=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||Cc(this.g)))){this.J||en!=4||b==7||(b==8||0>=br?$s(3):$s(2)),Bo(this);var C=this.g.Z();this.X=C;t:if(md(this)){var V=Cc(this.g);h="";var G=V.length,te=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_r(this),bi(this);var xe="";break t}this.h.i=new d.TextDecoder}for(b=0;b<G;b++)this.h.h=!0,h+=this.h.i.decode(V[b],{stream:!(te&&b==G-1)});V.length=0,this.h.g+=h,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=C==200,Fa(this.i,this.u,this.A,this.l,this.R,en,C),this.o){if(this.T&&!this.K){t:{if(this.g){var _t,cn=this.g;if((_t=cn.g?cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(_t)){var ht=_t;break t}}ht=null}if(C=ht)Mr(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ec(this,C);else{this.o=!1,this.s=3,Qt(12),_r(this),bi(this);break e}}if(this.P){C=!0;let hr;for(;!this.J&&this.C<xe.length;)if(hr=Dm(this,xe),hr==Ua){en==4&&(this.s=4,Qt(14),C=!1),Mr(this.i,this.l,null,"[Incomplete Response]");break}else if(hr==wc){this.s=4,Qt(15),Mr(this.i,this.l,xe,"[Invalid Chunk]"),C=!1;break}else Mr(this.i,this.l,hr,null),Ec(this,hr);if(md(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||xe.length!=0||this.h.h||(this.s=1,Qt(16),C=!1),this.o=this.o&&C,!C)Mr(this.i,this.l,xe,"[Invalid Chunked Response]"),_r(this),bi(this);else if(0<xe.length&&!this.W){this.W=!0;var mn=this.j;mn.g==this&&mn.ba&&!mn.M&&(mn.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),Ac(mn),mn.M=!0,Qt(11))}}else Mr(this.i,this.l,xe,null),Ec(this,xe);en==4&&_r(this),this.o&&!this.J&&(en==4?Ja(this.j,this):(this.o=!1,It(this)))}else Ka(this.g),C==400&&0<xe.indexOf("Unknown SID")?(this.s=3,Qt(12)):(this.s=0,Qt(13)),_r(this),bi(this)}}}catch{}finally{}};function md(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Dm(h,b){var C=h.C,V=b.indexOf(`
`,C);return V==-1?Ua:(C=Number(b.substring(C,V)),isNaN(C)?wc:(V+=1,V+C>b.length?Ua:(b=b.slice(V,V+C),h.C=V+C,b)))}Vr.prototype.cancel=function(){this.J=!0,_r(this)};function It(h){h.S=Date.now()+h.I,pd(h,h.I)}function pd(h,b){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Lr(y(h.ba,h),b)}function Bo(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Vr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(xc(this.i,this.A),this.L!=2&&($s(),Qt(17)),_r(this),this.s=2,bi(this)):pd(this,this.S-h)};function bi(h){h.j.G==0||h.J||Ja(h.j,h)}function _r(h){Bo(h);var b=h.M;b&&typeof b.ma=="function"&&b.ma(),h.M=null,Lo(h.U),h.g&&(b=h.g,h.g=null,b.abort(),b.ma())}function Ec(h,b){try{var C=h.j;if(C.G!=0&&(C.g==h||Bn(C.h,h))){if(!h.K&&Bn(C.h,h)&&C.G==3){try{var V=C.Da.g.parse(b)}catch{V=null}if(Array.isArray(V)&&V.length==3){var G=V;if(G[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)Xa(C),qr(C);else break e;Ya(C),Qt(18)}}else C.za=G[1],0<C.za-C.T&&37500>G[2]&&C.F&&C.v==0&&!C.C&&(C.C=Lr(y(C.Za,C),6e3));if(1>=vd(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Gs(C,11)}else if((h.K||C.g==h)&&Xa(C),!I(b))for(G=C.Da.g.parse(b),b=0;b<G.length;b++){let ht=G[b];if(C.T=ht[0],ht=ht[1],C.G==2)if(ht[0]=="c"){C.K=ht[1],C.ia=ht[2];const mn=ht[3];mn!=null&&(C.la=mn,C.j.info("VER="+C.la));const en=ht[4];en!=null&&(C.Aa=en,C.j.info("SVER="+C.Aa));const br=ht[5];br!=null&&typeof br=="number"&&0<br&&(V=1.5*br,C.L=V,C.j.info("backChannelRequestTimeoutMs_="+V)),V=C;const hr=h.g;if(hr){const Qo=hr.g?hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qo){var te=V.h;te.g||Qo.indexOf("spdy")==-1&&Qo.indexOf("quic")==-1&&Qo.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(bc(te,te.h),te.h=null))}if(V.D){const el=hr.g?hr.g.getResponseHeader("X-HTTP-Session-Id"):null;el&&(V.ya=el,Tt(V.I,V.D,el))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),V=C;var xe=h;if(V.qa=jd(V,V.J?V.ia:null,V.W),xe.K){yd(V.h,xe);var _t=xe,cn=V.L;cn&&(_t.I=cn),_t.B&&(Bo(_t),It(_t)),V.g=xe}else Go(V);0<C.i.length&&hs(C)}else ht[0]!="stop"&&ht[0]!="close"||Gs(C,7);else C.G==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?Gs(C,7):En(C):ht[0]!="noop"&&C.l&&C.l.ta(ht),C.v=0)}}$s(4)}catch{}}var gd=class{constructor(h,b){this.g=h,this.map=b}};function $o(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function vd(h){return h.h?1:h.g?h.g.size:0}function Bn(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function bc(h,b){h.g?h.g.add(b):h.h=b}function yd(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}$o.prototype.cancel=function(){if(this.i=xd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function xd(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const C of h.g.values())b=b.concat(C.D);return b}return _(h.i)}function Ba(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(f(h)){for(var b=[],C=h.length,V=0;V<C;V++)b.push(h[V]);return b}b=[],C=0;for(V in h)b[C++]=h[V];return b}function $a(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(f(h)||typeof h=="string"){var b=[];h=h.length;for(var C=0;C<h;C++)b.push(C);return b}b=[],C=0;for(const V in h)b[C++]=V;return b}}}function Ti(h,b){if(h.forEach&&typeof h.forEach=="function")h.forEach(b,void 0);else if(f(h)||typeof h=="string")Array.prototype.forEach.call(h,b,void 0);else for(var C=$a(h),V=Ba(h),G=V.length,te=0;te<G;te++)b.call(void 0,V[te],C&&C[te],h)}var qo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lm(h,b){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var V=h[C].indexOf("="),G=null;if(0<=V){var te=h[C].substring(0,V);G=h[C].substring(V+1)}else te=h[C];b(te,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function qs(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof qs){this.h=h.h,Wo(this,h.j),this.o=h.o,this.g=h.g,Si(this,h.s),this.l=h.l;var b=h.i,C=new cs;C.i=b.i,b.g&&(C.g=new Map(b.g),C.h=b.h),Ni(this,C),this.m=h.m}else h&&(b=String(h).match(qo))?(this.h=!1,Wo(this,b[1]||"",!0),this.o=ut(b[2]||""),this.g=ut(b[3]||"",!0),Si(this,b[4]),this.l=ut(b[5]||"",!0),Ni(this,b[6]||"",!0),this.m=ut(b[7]||"")):(this.h=!1,this.i=new cs(null,this.h))}qs.prototype.toString=function(){var h=[],b=this.j;b&&h.push(Ii(b,qa,!0),":");var C=this.g;return(C||b=="file")&&(h.push("//"),(b=this.o)&&h.push(Ii(b,qa,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(Ii(C,C.charAt(0)=="/"?Ed:_d,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",Ii(C,Tc)),h.join("")};function ur(h){return new qs(h)}function Wo(h,b,C){h.j=C?ut(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function Si(h,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);h.s=b}else h.s=null}function Ni(h,b,C){b instanceof cs?(h.i=b,us(h.i,h.h)):(C||(b=Ii(b,bd)),h.i=new cs(b,h.h))}function Tt(h,b,C){h.i.set(b,C)}function Ci(h){return Tt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ut(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ii(h,b,C){return typeof h=="string"?(h=encodeURI(h).replace(b,wd),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function wd(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var qa=/[#\/\?@]/g,_d=/[#\?:]/g,Ed=/[#\?]/g,bd=/[#\?@]/g,Tc=/#/g;function cs(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function _n(h){h.g||(h.g=new Map,h.h=0,h.i&&Lm(h.i,function(b,C){h.add(decodeURIComponent(b.replace(/\+/g," ")),C)}))}n=cs.prototype,n.add=function(h,b){_n(this),this.i=null,h=Er(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(b),this.h+=1,this};function Ur(h,b){_n(h),b=Er(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function zr(h,b){return _n(h),b=Er(h,b),h.g.has(b)}n.forEach=function(h,b){_n(this),this.g.forEach(function(C,V){C.forEach(function(G){h.call(b,G,V,this)},this)},this)},n.na=function(){_n(this);const h=Array.from(this.g.values()),b=Array.from(this.g.keys()),C=[];for(let V=0;V<b.length;V++){const G=h[V];for(let te=0;te<G.length;te++)C.push(b[V])}return C},n.V=function(h){_n(this);let b=[];if(typeof h=="string")zr(this,h)&&(b=b.concat(this.g.get(Er(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)b=b.concat(h[C])}return b},n.set=function(h,b){return _n(this),this.i=null,h=Er(this,h),zr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},n.get=function(h,b){return h?(h=this.V(h),0<h.length?String(h[0]):b):b};function Ai(h,b,C){Ur(h,b),0<C.length&&(h.i=null,h.g.set(Er(h,b),_(C)),h.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(var C=0;C<b.length;C++){var V=b[C];const te=encodeURIComponent(String(V)),xe=this.V(V);for(V=0;V<xe.length;V++){var G=te;xe[V]!==""&&(G+="="+encodeURIComponent(String(xe[V]))),h.push(G)}}return this.i=h.join("&")};function Er(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function us(h,b){b&&!h.j&&(_n(h),h.i=null,h.g.forEach(function(C,V){var G=V.toLowerCase();V!=G&&(Ur(this,V),Ai(this,G,C))},h)),h.j=b}function Mm(h,b){const C=new Vo;if(d.Image){const V=new Image;V.onload=T(Yn,C,"TestLoadImage: loaded",!0,b,V),V.onerror=T(Yn,C,"TestLoadImage: error",!1,b,V),V.onabort=T(Yn,C,"TestLoadImage: abort",!1,b,V),V.ontimeout=T(Yn,C,"TestLoadImage: timeout",!1,b,V),d.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=h}else b(!1)}function Td(h,b){const C=new Vo,V=new AbortController,G=setTimeout(()=>{V.abort(),Yn(C,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:V.signal}).then(te=>{clearTimeout(G),te.ok?Yn(C,"TestPingServer: ok",!0,b):Yn(C,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(G),Yn(C,"TestPingServer: error",!1,b)})}function Yn(h,b,C,V,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),V(C)}catch{}}function Fm(){this.g=new Mo}function Sd(h,b,C){const V=C||"";try{Ti(h,function(G,te){let xe=G;m(G)&&(xe=Bs(G)),b.push(V+te+"="+encodeURIComponent(xe))})}catch(G){throw b.push(V+"type="+encodeURIComponent("_badmap")),G}}function Ws(h){this.l=h.Ub||null,this.j=h.eb||!1}N(Ws,Be),Ws.prototype.g=function(){return new Ho(this.l,this.j)},Ws.prototype.i=function(h){return function(){return h}}({});function Ho(h,b){Ct.call(this),this.D=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Ho,Ct),n=Ho.prototype,n.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=b,this.readyState=1,$r(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(b.body=h),(this.D||d).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nd(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nd(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?Br(this):$r(this),this.readyState==3&&Nd(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Br(this))},n.Qa=function(h){this.g&&(this.response=h,Br(this))},n.ga=function(){this.g&&Br(this)};function Br(h){h.readyState=4,h.l=null,h.j=null,h.v=null,$r(h)}n.setRequestHeader=function(h,b){this.u.append(h,b)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var C=b.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=b.next();return h.join(`\r
`)};function $r(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ho.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Hs(h){let b="";return W(h,function(C,V){b+=V,b+=":",b+=C,b+=`\r
`}),b}function ji(h,b,C){e:{for(V in C){var V=!1;break e}V=!0}V||(C=Hs(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):Tt(h,b,C))}function Dt(h){Ct.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Dt,Ct);var Vm=/^https?$/i,Sc=["POST","PUT"];n=Dt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,b,C,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fr.g(),this.v=this.o?gt(this.o):gt(Fr),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(te){Ko(this,te);return}if(h=C||"",C=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var G in V)C.set(G,V[G]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const te of V.keys())C.set(te,V.get(te));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(C.keys()).find(te=>te.toLowerCase()=="content-type"),G=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Sc,b,void 0))||V||G||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,xe]of C)this.g.setRequestHeader(te,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ha(this),this.u=!0,this.g.send(h),this.u=!1}catch(te){Ko(this,te)}};function Ko(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.m=5,Wa(h),dr(h)}function Wa(h){h.A||(h.A=!0,wt(h,"complete"),wt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,wt(this,"complete"),wt(this,"abort"),dr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dr(this,!0)),Dt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Nc(this):this.bb())},n.bb=function(){Nc(this)};function Nc(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Xn(h)!=4||h.Z()!=2)){if(h.u&&Xn(h)==4)bt(h.Ea,0,h);else if(wt(h,"readystatechange"),Xn(h)==4){h.h=!1;try{const xe=h.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var C;if(!(C=b)){var V;if(V=xe===0){var G=String(h.D).match(qo)[1]||null;!G&&d.self&&d.self.location&&(G=d.self.location.protocol.slice(0,-1)),V=!Vm.test(G?G.toLowerCase():"")}C=V}if(C)wt(h,"complete"),wt(h,"success");else{h.m=6;try{var te=2<Xn(h)?h.g.statusText:""}catch{te=""}h.l=te+" ["+h.Z()+"]",Wa(h)}}finally{dr(h)}}}}function dr(h,b){if(h.g){Ha(h);const C=h.g,V=h.v[0]?()=>{}:null;h.g=null,h.v=null,b||wt(h,"ready");try{C.onreadystatechange=V}catch{}}}function Ha(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Xn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),Qn(b)}};function Cc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ka(h){const b={};h=(h.g&&2<=Xn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<h.length;V++){if(I(h[V]))continue;var C=F(h[V]);const G=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const te=b[G]||[];b[G]=te,te.push(C)}D(b,function(V){return V.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ds(h,b,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||b}function Ic(h){this.Aa=0,this.i=[],this.j=new Vo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ds("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ds("baseRetryDelayMs",5e3,h),this.cb=ds("retryDelaySeedMs",1e4,h),this.Wa=ds("forwardChannelMaxRetries",2,h),this.wa=ds("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new $o(h&&h.concurrentRequestLimit),this.Da=new Fm,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ic.prototype,n.la=8,n.G=1,n.connect=function(h,b,C,V){Qt(0),this.W=h,this.H=b||{},C&&V!==void 0&&(this.H.OSID=C,this.H.OAID=V),this.F=this.X,this.I=jd(this,null,this.W),hs(this)};function En(h){if(Ga(h),h.G==3){var b=h.U++,C=ur(h.I);if(Tt(C,"SID",h.K),Tt(C,"RID",b),Tt(C,"TYPE","terminate"),Ks(h,C),b=new Vr(h,h.j,b),b.L=2,b.v=Ci(ur(C)),C=!1,d.navigator&&d.navigator.sendBeacon)try{C=d.navigator.sendBeacon(b.v.toString(),"")}catch{}!C&&d.Image&&(new Image().src=b.v,C=!0),C||(b.g=Pd(b.j,null),b.g.ea(b.v)),b.F=Date.now(),It(b)}Ad(h)}function qr(h){h.g&&(Ac(h),h.g.cancel(),h.g=null)}function Ga(h){qr(h),h.u&&(d.clearTimeout(h.u),h.u=null),Xa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function hs(h){if(!cr(h.h)&&!h.s){h.s=!0;var b=h.Ga;ae||ce(),K||(ae(),K=!0),ne.add(b,h),h.B=0}}function Um(h,b){return vd(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=b.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Lr(y(h.Ga,h,b),Id(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const G=new Vr(this,this.j,h);let te=this.o;if(this.S&&(te?(te=k(te),P(te,this.S)):te=this.S),this.m!==null||this.O||(G.H=te,te=null),this.P)e:{for(var b=0,C=0;C<this.i.length;C++){t:{var V=this.i[C];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(b+=V,4096<b){b=C;break e}if(b===4096||C===this.i.length-1){b=C+1;break e}}b=1e3}else b=1e3;b=Pi(this,G,b),C=ur(this.I),Tt(C,"RID",h),Tt(C,"CVER",22),this.D&&Tt(C,"X-HTTP-Session-Id",this.D),Ks(this,C),te&&(this.O?b="headers="+encodeURIComponent(String(Hs(te)))+"&"+b:this.m&&ji(C,this.m,te)),bc(this.h,G),this.Ua&&Tt(C,"TYPE","init"),this.P?(Tt(C,"$req",b),Tt(C,"SID","null"),G.T=!0,za(G,C,null)):za(G,C,b),this.G=2}}else this.G==3&&(h?Qa(this,h):this.i.length==0||cr(this.h)||Qa(this))};function Qa(h,b){var C;b?C=b.l:C=h.U++;const V=ur(h.I);Tt(V,"SID",h.K),Tt(V,"RID",C),Tt(V,"AID",h.T),Ks(h,V),h.m&&h.o&&ji(V,h.m,h.o),C=new Vr(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),b&&(h.i=b.D.concat(h.i)),b=Pi(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),bc(h.h,C),za(C,V,b)}function Ks(h,b){h.H&&W(h.H,function(C,V){Tt(b,V,C)}),h.l&&Ti({},function(C,V){Tt(b,V,C)})}function Pi(h,b,C){C=Math.min(h.i.length,C);var V=h.l?y(h.l.Na,h.l,h):null;e:{var G=h.i;let te=-1;for(;;){const xe=["count="+C];te==-1?0<C?(te=G[0].g,xe.push("ofs="+te)):te=0:xe.push("ofs="+te);let _t=!0;for(let cn=0;cn<C;cn++){let ht=G[cn].g;const mn=G[cn].map;if(ht-=te,0>ht)te=Math.max(0,G[cn].g-100),_t=!1;else try{Sd(mn,xe,"req"+ht+"_")}catch{V&&V(mn)}}if(_t){V=xe.join("&");break e}}}return h=h.i.splice(0,C),b.D=h,V}function Go(h){if(!h.g&&!h.u){h.Y=1;var b=h.Fa;ae||ce(),K||(ae(),K=!0),ne.add(b,h),h.v=0}}function Ya(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Lr(y(h.Fa,h),Id(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Cd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Lr(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qt(10),qr(this),Cd(this))};function Ac(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Cd(h){h.g=new Vr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var b=ur(h.qa);Tt(b,"RID","rpc"),Tt(b,"SID",h.K),Tt(b,"AID",h.T),Tt(b,"CI",h.F?"0":"1"),!h.F&&h.ja&&Tt(b,"TO",h.ja),Tt(b,"TYPE","xmlhttp"),Ks(h,b),h.m&&h.o&&ji(b,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=Ci(ur(b)),C.m=null,C.P=!0,_c(C,h)}n.Za=function(){this.C!=null&&(this.C=null,qr(this),Ya(this),Qt(19))};function Xa(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Ja(h,b){var C=null;if(h.g==b){Xa(h),Ac(h),h.g=null;var V=2}else if(Bn(h.h,b))C=b.D,yd(h.h,b),V=1;else return;if(h.G!=0){if(b.o)if(V==1){C=b.m?b.m.length:0,b=Date.now()-b.F;var G=h.B;V=Fo(),wt(V,new Ma(V,C)),hs(h)}else Go(h);else if(G=b.s,G==3||G==0&&0<b.X||!(V==1&&Um(h,b)||V==2&&Ya(h)))switch(C&&0<C.length&&(b=h.h,b.i=b.i.concat(C)),G){case 1:Gs(h,5);break;case 4:Gs(h,10);break;case 3:Gs(h,6);break;default:Gs(h,2)}}}function Id(h,b){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*b}function Gs(h,b){if(h.j.info("Error code "+b),b==2){var C=y(h.fb,h),V=h.Xa;const G=!V;V=new qs(V||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Wo(V,"https"),Ci(V),G?Mm(V.toString(),C):Td(V.toString(),C)}else Qt(2);h.G=0,h.l&&h.l.sa(b),Ad(h),Ga(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Ad(h){if(h.G=0,h.ka=[],h.l){const b=xd(h.h);(b.length!=0||h.i.length!=0)&&(w(h.ka,b),w(h.ka,h.i),h.h.i.length=0,_(h.i),h.i.length=0),h.l.ra()}}function jd(h,b,C){var V=C instanceof qs?ur(C):new qs(C);if(V.g!="")b&&(V.g=b+"."+V.g),Si(V,V.s);else{var G=d.location;V=G.protocol,b=b?b+"."+G.hostname:G.hostname,G=+G.port;var te=new qs(null);V&&Wo(te,V),b&&(te.g=b),G&&Si(te,G),C&&(te.l=C),V=te}return C=h.D,b=h.ya,C&&b&&Tt(V,C,b),Tt(V,"VER",h.la),Ks(h,V),V}function Pd(h,b,C){if(b&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Ca&&!h.pa?new Dt(new Ws({eb:C})):new Dt(h.pa),b.Ha(h.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function jc(){}n=jc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Za(){}Za.prototype.g=function(h,b){return new $n(h,b)};function $n(h,b){Ct.call(this),this.g=new Ic(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(h?h["X-WebChannel-Client-Profile"]=b.va:h={"X-WebChannel-Client-Profile":b.va}),this.g.S=h,(h=b&&b.Sb)&&!I(h)&&(this.g.m=h),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!I(b)&&(this.g.D=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new fs(this)}N($n,Ct),$n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$n.prototype.close=function(){En(this.g)},$n.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=Bs(h),h=C);b.i.push(new gd(b.Ya++,h)),b.G==3&&hs(b)},$n.prototype.N=function(){this.g.l=null,delete this.j,En(this.g),delete this.g,$n.aa.N.call(this)};function Rd(h){Gt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const C in b){h=C;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}N(Rd,Gt);function kd(){Dr.call(this),this.status=1}N(kd,Dr);function fs(h){this.g=h}N(fs,jc),fs.prototype.ua=function(){wt(this.g,"a")},fs.prototype.ta=function(h){wt(this.g,new Rd(h))},fs.prototype.sa=function(h){wt(this.g,new kd)},fs.prototype.ra=function(){wt(this.g,"b")},Za.prototype.createWebChannel=Za.prototype.g,$n.prototype.send=$n.prototype.o,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,bS=function(){return new Za},ES=function(){return Fo()},_S=wr,vv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,Zh=Va,hd.COMPLETE="complete",wS=hd,mt.EventType=Vt,Vt.OPEN="a",Vt.CLOSE="b",Vt.ERROR="c",Vt.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,iu=mt,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,xS=Dt}).apply(typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{});const rE="@firebase/firestore",sE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sr.UNAUTHENTICATED=new sr(null),sr.GOOGLE_CREDENTIALS=new sr("google-credentials-uid"),sr.FIRST_PARTY=new sr("first-party-uid"),sr.MOCK_USER=new sr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new py("@firebase/firestore");function Tl(){return Ta.logLevel}function Ne(n,...e){if(Ta.logLevel<=at.DEBUG){const t=e.map(Sy);Ta.debug(`Firestore (${dc}): ${n}`,...t)}}function pi(n,...e){if(Ta.logLevel<=at.ERROR){const t=e.map(Sy);Ta.error(`Firestore (${dc}): ${n}`,...t)}}function Sa(n,...e){if(Ta.logLevel<=at.WARN){const t=e.map(Sy);Ta.warn(`Firestore (${dc}): ${n}`,...t)}}function Sy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,TS(n,r,t)}function TS(n,e,t){let r=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw pi(r),new Error(r)}function xt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||TS(e,i,r)}function Ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Vs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(sr.UNAUTHENTICATED))}shutdown(){}}class YM{constructor(e){this.t=e,this.currentUser=sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xt(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new po;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new po,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},d=f=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new po)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt(typeof r.accessToken=="string",31837,{l:r}),new GM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xt(e===null||typeof e=="string",2055,{h:e}),new sr(e)}}class XM{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=sr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JM{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new XM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xt(this.o===void 0,3512);const r=a=>{a.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Ne("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new iE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new iE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=eF(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function it(n,e){return n<e?-1:n>e?1:0}function yv(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return it(r,i);{const a=SS(),c=tF(a.encode(oE(n,t)),a.encode(oE(e,t)));return c!==0?c:it(r,i)}}t+=r>65535?2:1}return it(n.length,e.length)}function oE(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function tF(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return it(n[t],e[t]);return it(n.length,e.length)}function Yl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="__name__";class ys{constructor(e,t,r){t===void 0?t=0:t>e.length&&qe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&qe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ys.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ys?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=ys.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return it(e.length,t.length)}static compareSegments(e,t){const r=ys.isNumericId(e),i=ys.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ys.extractNumericId(e).compare(ys.extractNumericId(t)):yv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mo.fromString(e.substring(4,e.length-2))}}class St extends ys{construct(e,t,r){return new St(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new St(t)}static emptyPath(){return new St([])}}const nF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends ys{construct(e,t,r){return new Nn(e,t,r)}static isValidIdentifier(e){return nF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xv}static keyField(){return new Nn([xv])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ee(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new Ee(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ee(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(a(),i++)}if(a(),c)throw new Ee(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nn(t)}static emptyPath(){return new Nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(St.fromString(e))}static fromName(e){return new Me(St.fromString(e).popFirst(5))}static empty(){return new Me(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new St(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(n,e,t){if(!t)throw new Ee(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rF(n,e,t,r){if(e===!0&&r===!0)throw new Ee(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aE(n){if(!Me.isDocumentKey(n))throw new Ee(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lE(n){if(Me.isDocumentKey(n))throw new Ee(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function NS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function um(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":qe(12329,{type:typeof n})}function Cs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=um(n);throw new Ee(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(n,e){const t={typeString:n};return e&&(t.value=e),t}function rd(n,e){if(!NS(n))throw new Ee(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Ee(se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=-62135596800,uE=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*uE);return new kt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<cE)throw new Ee(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uE}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(rd(e,kt._jsonSchema))return new kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kt._jsonSchemaVersion="firestore/timestamp/1.0",kt._jsonSchema={type:sn("string",kt._jsonSchemaVersion),seconds:sn("number"),nanoseconds:sn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new kt(0,0))}static max(){return new Xe(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=-1;function sF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Xe.fromTimestamp(r===1e9?new kt(t+1,0):new kt(t,r));return new bo(i,Me.empty(),e)}function iF(n){return new bo(n.readTime,n.key,Pu)}class bo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bo(Xe.min(),Me.empty(),Pu)}static max(){return new bo(Xe.max(),Me.empty(),Pu)}}function oF(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Me.comparator(n.documentKey,e.documentKey),t!==0?t:it(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==aF)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,a=0,c=!1;e.forEach(d=>{++i,d.next(()=>{++a,c&&a===i&&t()},f=>r(f))}),c=!0,a===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const a=e.length,c=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next(g=>{c[m]=g,++d,d===a&&r(c)},g=>i(g))}})}static doWhile(e,t){return new le((r,i)=>{const a=()=>{e()===!0?t().next(()=>{a()},i):r()};a()})}}function cF(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}dm.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=-1;function hm(n){return n==null}function If(n){return n===0&&1/n==-1/0}function uF(n){return typeof n=="number"&&Number.isInteger(n)&&!If(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="";function dF(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dE(e)),e=hF(n.get(t),e);return dE(e)}function hF(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case CS:t+="";break;default:t+=a}}return t}function dE(n){return n+CS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ro(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new $t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lh(this.root,e,this.comparator,!0)}}class Lh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Sn.RED,this.left=i??Sn.EMPTY,this.right=a??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Sn(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Sn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qe(27949);return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw qe(57766)}get value(){throw qe(16141)}get color(){throw qe(16727)}get left(){throw qe(29726)}get right(){throw qe(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fE(this.data.getIterator())}getIteratorFrom(e){return new fE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hn(this.comparator);return t.data=e,t}}class fE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new yr([])}unionWith(e){let t=new hn(Nn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new yr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new AS("Invalid base64 string: "+a):a}}(e);return new Cn(t)}static fromUint8Array(e){const t=function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a}(e);return new Cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const fF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function To(n){if(xt(!!n,39018),typeof n=="string"){let e=0;const t=fF.exec(n);if(xt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xt(n.seconds),nanos:Xt(n.nanos)}}function Xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function So(n){return typeof n=="string"?Cn.fromBase64String(n):Cn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="server_timestamp",PS="__type__",RS="__previous_value__",kS="__local_write_time__";function Ay(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[PS])===null||t===void 0?void 0:t.stringValue)===jS}function fm(n){const e=n.mapValue.fields[RS];return Ay(e)?fm(e):e}function Ru(n){const e=To(n.mapValue.fields[kS].timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,t,r,i,a,c,d,f,m,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=g}}const Af="(default)";class ku{constructor(e,t){this.projectId=e,this.database=t||Af}static empty(){return new ku("","")}get isDefaultDatabase(){return this.database===Af}isEqual(e){return e instanceof ku&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="__type__",pF="__max__",Mh={mapValue:{}},DS="__vector__",jf="value";function No(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ay(n)?4:vF(n)?9007199254740991:gF(n)?10:11:qe(28295,{value:n})}function Os(n,e){if(n===e)return!0;const t=No(n);if(t!==No(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ru(n).isEqual(Ru(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=To(i.timestampValue),d=To(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,a){return So(i.bytesValue).isEqual(So(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return Xt(i.geoPointValue.latitude)===Xt(a.geoPointValue.latitude)&&Xt(i.geoPointValue.longitude)===Xt(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Xt(i.integerValue)===Xt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=Xt(i.doubleValue),d=Xt(a.doubleValue);return c===d?If(c)===If(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return Yl(n.arrayValue.values||[],e.arrayValue.values||[],Os);case 10:case 11:return function(i,a){const c=i.mapValue.fields||{},d=a.mapValue.fields||{};if(hE(c)!==hE(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!Os(c[f],d[f])))return!1;return!0}(n,e);default:return qe(52216,{left:n})}}function Ou(n,e){return(n.values||[]).find(t=>Os(t,e))!==void 0}function Xl(n,e){if(n===e)return 0;const t=No(n),r=No(e);if(t!==r)return it(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return it(n.booleanValue,e.booleanValue);case 2:return function(a,c){const d=Xt(a.integerValue||a.doubleValue),f=Xt(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return mE(n.timestampValue,e.timestampValue);case 4:return mE(Ru(n),Ru(e));case 5:return yv(n.stringValue,e.stringValue);case 6:return function(a,c){const d=So(a),f=So(c);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const d=a.split("/"),f=c.split("/");for(let m=0;m<d.length&&m<f.length;m++){const g=it(d[m],f[m]);if(g!==0)return g}return it(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const d=it(Xt(a.latitude),Xt(c.latitude));return d!==0?d:it(Xt(a.longitude),Xt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return pE(n.arrayValue,e.arrayValue);case 10:return function(a,c){var d,f,m,g;const v=a.fields||{},y=c.fields||{},T=(d=v[jf])===null||d===void 0?void 0:d.arrayValue,N=(f=y[jf])===null||f===void 0?void 0:f.arrayValue,_=it(((m=T==null?void 0:T.values)===null||m===void 0?void 0:m.length)||0,((g=N==null?void 0:N.values)===null||g===void 0?void 0:g.length)||0);return _!==0?_:pE(T,N)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===Mh.mapValue&&c===Mh.mapValue)return 0;if(a===Mh.mapValue)return 1;if(c===Mh.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=c.fields||{},g=Object.keys(m);f.sort(),g.sort();for(let v=0;v<f.length&&v<g.length;++v){const y=yv(f[v],g[v]);if(y!==0)return y;const T=Xl(d[f[v]],m[g[v]]);if(T!==0)return T}return it(f.length,g.length)}(n.mapValue,e.mapValue);default:throw qe(23264,{le:t})}}function mE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return it(n,e);const t=To(n),r=To(e),i=it(t.seconds,r.seconds);return i!==0?i:it(t.nanos,r.nanos)}function pE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Xl(t[i],r[i]);if(a)return a}return it(t.length,r.length)}function Jl(n){return wv(n)}function wv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=To(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return So(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Me.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=wv(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${wv(t.fields[c])}`;return i+"}"}(n.mapValue):qe(61005,{value:n})}function ef(n){switch(No(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fm(n);return e?16+ef(e):16;case 5:return 2*n.stringValue.length;case 6:return So(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+ef(a),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ro(r.fields,(a,c)=>{i+=a.length+ef(c)}),i}(n.mapValue);default:throw qe(13486,{value:n})}}function gE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _v(n){return!!n&&"integerValue"in n}function jy(n){return!!n&&"arrayValue"in n}function vE(n){return!!n&&"nullValue"in n}function yE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tf(n){return!!n&&"mapValue"in n}function gF(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[OS])===null||t===void 0?void 0:t.stringValue)===DS}function pu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ro(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===pF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.value=e}static empty(){return new ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!tf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(t)}setAll(e){let t=Nn.emptyPath(),r={},i=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=d.popLast()}c?r[d.lastSegment()]=pu(c):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());tf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Os(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];tf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ro(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ar(pu(this.value))}}function LS(n){const e=[];return Ro(n.fields,(t,r)=>{const i=new Nn([t]);if(tf(r)){const a=LS(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new yr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,t,r,i,a,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Ln(e,0,Xe.min(),Xe.min(),Xe.min(),ar.empty(),0)}static newFoundDocument(e,t,r,i){return new Ln(e,1,t,Xe.min(),r,i,0)}static newNoDocument(e,t){return new Ln(e,2,t,Xe.min(),Xe.min(),ar.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,Xe.min(),Xe.min(),ar.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t){this.position=e,this.inclusive=t}}function xE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(a.field.isKeyField()?r=Me.comparator(Me.fromName(c.referenceValue),t.key):r=Xl(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function wE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Os(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t="asc"){this.field=e,this.dir=t}}function yF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{}class rn extends MS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new wF(e,t,r):t==="array-contains"?new bF(e,r):t==="in"?new TF(e,r):t==="not-in"?new SF(e,r):t==="array-contains-any"?new NF(e,r):new rn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _F(e,r):new EF(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xl(t,this.value)):t!==null&&No(this.value)===No(t)&&this.matchesComparison(Xl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class as extends MS{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new as(e,t)}matches(e){return FS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function FS(n){return n.op==="and"}function VS(n){return xF(n)&&FS(n)}function xF(n){for(const e of n.filters)if(e instanceof as)return!1;return!0}function Ev(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+Jl(n.value);if(VS(n))return n.filters.map(e=>Ev(e)).join(",");{const e=n.filters.map(t=>Ev(t)).join(",");return`${n.op}(${e})`}}function US(n,e){return n instanceof rn?function(r,i){return i instanceof rn&&r.op===i.op&&r.field.isEqual(i.field)&&Os(r.value,i.value)}(n,e):n instanceof as?function(r,i){return i instanceof as&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,c,d)=>a&&US(c,i.filters[d]),!0):!1}(n,e):void qe(19439)}function zS(n){return n instanceof rn?function(t){return`${t.field.canonicalString()} ${t.op} ${Jl(t.value)}`}(n):n instanceof as?function(t){return t.op.toString()+" {"+t.getFilters().map(zS).join(" ,")+"}"}(n):"Filter"}class wF extends rn{constructor(e,t,r){super(e,t,r),this.key=Me.fromName(r.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class _F extends rn{constructor(e,t){super(e,"in",t),this.keys=BS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class EF extends rn{constructor(e,t){super(e,"not-in",t),this.keys=BS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Me.fromName(r.referenceValue))}class bF extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jy(t)&&Ou(t.arrayValue,this.value)}}class TF extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ou(this.value.arrayValue,t)}}class SF extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ou(this.value.arrayValue,t)}}class NF extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ou(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,t=null,r=[],i=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=d,this.Pe=null}}function _E(n,e=null,t=[],r=[],i=null,a=null,c=null){return new CF(n,e,t,r,i,a,c)}function Py(n){const e=Ze(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ev(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),hm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Jl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Jl(r)).join(",")),e.Pe=t}return e.Pe}function Ry(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!US(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wE(n.startAt,e.startAt)&&wE(n.endAt,e.endAt)}function bv(n){return Me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,t=null,r=[],i=[],a=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function IF(n,e,t,r,i,a,c,d){return new ka(n,e,t,r,i,a,c,d)}function ky(n){return new ka(n)}function EE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $S(n){return n.collectionGroup!==null}function gu(n){const e=Ze(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new hn(Nn.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Du(a,r))}),t.has(Nn.keyField().canonicalString())||e.Te.push(new Du(Nn.keyField(),r))}return e.Te}function Is(n){const e=Ze(n);return e.Ie||(e.Ie=AF(e,gu(n))),e.Ie}function AF(n,e){if(n.limitType==="F")return _E(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Du(i.field,a)});const t=n.endAt?new Pf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Pf(n.startAt.position,n.startAt.inclusive):null;return _E(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Tv(n,e){const t=n.filters.concat([e]);return new ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Sv(n,e,t){return new ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mm(n,e){return Ry(Is(n),Is(e))&&n.limitType===e.limitType}function qS(n){return`${Py(Is(n))}|lt:${n.limitType}`}function Sl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>zS(i)).join(", ")}]`),hm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Jl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Jl(i)).join(",")),`Target(${r})`}(Is(n))}; limitType=${n.limitType})`}function pm(n,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Me.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,i){for(const a of gu(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(c,d,f){const m=xE(c,d,f);return c.inclusive?m<=0:m<0}(r.startAt,gu(r),i)||r.endAt&&!function(c,d,f){const m=xE(c,d,f);return c.inclusive?m>=0:m>0}(r.endAt,gu(r),i))}(n,e)}function jF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function WS(n){return(e,t)=>{let r=!1;for(const i of gu(n)){const a=PF(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function PF(n,e,t){const r=n.field.isKeyField()?Me.comparator(e.key,t.key):function(a,c,d){const f=c.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Xl(f,m):qe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return qe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ro(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return IS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF=new $t(Me.comparator);function gi(){return RF}const HS=new $t(Me.comparator);function ou(...n){let e=HS;for(const t of n)e=e.insert(t.key,t);return e}function KS(n){let e=HS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ca(){return vu()}function GS(){return vu()}function vu(){return new Oa(n=>n.toString(),(n,e)=>n.isEqual(e))}const kF=new $t(Me.comparator),OF=new hn(Me.comparator);function lt(...n){let e=OF;for(const t of n)e=e.add(t);return e}const DF=new hn(it);function LF(){return DF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:If(e)?"-0":e}}function QS(n){return{integerValue:""+n}}function MF(n,e){return uF(e)?QS(e):Oy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(){this._=void 0}}function FF(n,e,t){return n instanceof Rf?function(i,a){const c={fields:{[PS]:{stringValue:jS},[kS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Ay(a)&&(a=fm(a)),a&&(c.fields[RS]=a),{mapValue:c}}(t,e):n instanceof Lu?XS(n,e):n instanceof Mu?JS(n,e):function(i,a){const c=YS(i,a),d=bE(c)+bE(i.Ee);return _v(c)&&_v(i.Ee)?QS(d):Oy(i.serializer,d)}(n,e)}function VF(n,e,t){return n instanceof Lu?XS(n,e):n instanceof Mu?JS(n,e):t}function YS(n,e){return n instanceof kf?function(r){return _v(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Rf extends gm{}class Lu extends gm{constructor(e){super(),this.elements=e}}function XS(n,e){const t=ZS(e);for(const r of n.elements)t.some(i=>Os(i,r))||t.push(r);return{arrayValue:{values:t}}}class Mu extends gm{constructor(e){super(),this.elements=e}}function JS(n,e){let t=ZS(e);for(const r of n.elements)t=t.filter(i=>!Os(i,r));return{arrayValue:{values:t}}}class kf extends gm{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function bE(n){return Xt(n.integerValue||n.doubleValue)}function ZS(n){return jy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function UF(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Lu&&i instanceof Lu||r instanceof Mu&&i instanceof Mu?Yl(r.elements,i.elements,Os):r instanceof kf&&i instanceof kf?Os(r.Ee,i.Ee):r instanceof Rf&&i instanceof Rf}(n.transform,e.transform)}class zF{constructor(e,t){this.version=e,this.transformResults=t}}class ns{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ns}static exists(e){return new ns(void 0,e)}static updateTime(e){return new ns(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class vm{}function eN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Dy(n.key,ns.none()):new sd(n.key,n.data,ns.none());{const t=n.data,r=ar.empty();let i=new hn(Nn.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new ko(n.key,r,new yr(i.toArray()),ns.none())}}function BF(n,e,t){n instanceof sd?function(i,a,c){const d=i.value.clone(),f=SE(i.fieldTransforms,a,c.transformResults);d.setAll(f),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof ko?function(i,a,c){if(!nf(i.precondition,a))return void a.convertToUnknownDocument(c.version);const d=SE(i.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(tN(i)),f.setAll(d),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function yu(n,e,t,r){return n instanceof sd?function(a,c,d,f){if(!nf(a.precondition,c))return d;const m=a.value.clone(),g=NE(a.fieldTransforms,f,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof ko?function(a,c,d,f){if(!nf(a.precondition,c))return d;const m=NE(a.fieldTransforms,f,c),g=c.data;return g.setAll(tN(a)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(a,c,d){return nf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function $F(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=YS(r.transform,i||null);a!=null&&(t===null&&(t=ar.empty()),t.set(r.field,a))}return t||null}function TE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yl(r,i,(a,c)=>UF(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class sd extends vm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ko extends vm{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function tN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function SE(n,e,t){const r=new Map;xt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,d=e.data.field(a.field);r.set(a.field,VF(c,d,t[i]))}return r}function NE(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,FF(a,c,e))}return r}class Dy extends vm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qF extends vm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&BF(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=GS();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(i.key)?null:d;const f=eN(c,d);f!==null&&r.set(i.key,f),c.isValidDocument()||c.convertToNoDocument(Xe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),lt())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,(t,r)=>TE(t,r))&&Yl(this.baseMutations,e.baseMutations,(t,r)=>TE(t,r))}}class Ly{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return kF}();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new Ly(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn,ft;function GF(n){switch(n){case se.OK:return qe(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return qe(15467,{code:n})}}function nN(n){if(n===void 0)return pi("GRPC error has no .code"),se.UNKNOWN;switch(n){case nn.OK:return se.OK;case nn.CANCELLED:return se.CANCELLED;case nn.UNKNOWN:return se.UNKNOWN;case nn.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case nn.INTERNAL:return se.INTERNAL;case nn.UNAVAILABLE:return se.UNAVAILABLE;case nn.UNAUTHENTICATED:return se.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case nn.NOT_FOUND:return se.NOT_FOUND;case nn.ALREADY_EXISTS:return se.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return se.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case nn.ABORTED:return se.ABORTED;case nn.OUT_OF_RANGE:return se.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return se.UNIMPLEMENTED;case nn.DATA_LOSS:return se.DATA_LOSS;default:return qe(39323,{code:n})}}(ft=nn||(nn={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=new mo([4294967295,4294967295],0);function CE(n){const e=SS().encode(n),t=new yS;return t.update(e),new Uint8Array(t.digest())}function IE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new mo([t,r],0),new mo([i,a],0)]}class My{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new au(`Invalid padding: ${t}`);if(r<0)throw new au(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new au(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new au(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=mo.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(mo.fromNumber(r)));return i.compare(QF)===1&&(i=new mo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=CE(e),[r,i]=IE(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,i,a);if(!this.ye(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new My(a,i,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.fe===0)return;const t=CE(e),[r,i]=IE(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,i,a);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,id.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ym(Xe.min(),i,new $t(it),gi(),lt())}}class id{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new id(r,t,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}}class rN{constructor(e,t){this.targetId=e,this.De=t}}class sN{constructor(e,t,r=Cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class AE{constructor(){this.ve=0,this.Ce=jE(),this.Fe=Cn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=lt(),t=lt(),r=lt();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:qe(38017,{changeType:a})}}),new id(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=jE()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,xt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class YF{constructor(e){this.We=e,this.Ge=new Map,this.ze=gi(),this.je=Fh(),this.Je=Fh(),this.He=new $t(it)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:qe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){const t=e.targetId,r=e.De.count,i=this.st(t);if(i){const a=i.target;if(bv(a))if(r===0){const c=new Me(a.path);this.Xe(t,c,Ln.newNoDocument(c,Xe.min()))}else xt(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const d=this._t(e),f=d?this.ut(d,e,c):1;if(f!==0){this.rt(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let c,d;try{c=So(r).toUint8Array()}catch(f){if(f instanceof AS)return Sa("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new My(c,i,a)}catch(f){return Sa(f instanceof au?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.fe===0?null:d}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let i=0;return r.forEach(a=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,a,null),i++)}),i}Pt(e){const t=new Map;this.Ge.forEach((a,c)=>{const d=this.st(c);if(d){if(a.current&&bv(d.target)){const f=new Me(d.target.path);this.Tt(f).has(c)||this.It(c,f)||this.Xe(c,f,Ln.newNoDocument(f,e))}a.Ne&&(t.set(c,a.Le()),a.ke())}});let r=lt();this.Je.forEach((a,c)=>{let d=!0;c.forEachWhile(f=>{const m=this.st(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const i=new ym(e,t,this.He,this.ze,r);return this.ze=gi(),this.je=Fh(),this.Je=Fh(),this.He=new $t(it),i}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new AE,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new hn(it),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new hn(it),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new AE),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Fh(){return new $t(Me.comparator)}function jE(){return new $t(Me.comparator)}const XF={asc:"ASCENDING",desc:"DESCENDING"},JF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZF={and:"AND",or:"OR"};class eV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Nv(n,e){return n.useProto3Json||hm(e)?e:{value:e}}function Of(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tV(n,e){return Of(n,e.toTimestamp())}function As(n){return xt(!!n,49232),Xe.fromTimestamp(function(t){const r=To(t);return new kt(r.seconds,r.nanos)}(n))}function Fy(n,e){return Cv(n,e).canonicalString()}function Cv(n,e){const t=function(i){return new St(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function oN(n){const e=St.fromString(n);return xt(dN(e),10190,{key:e.toString()}),e}function Iv(n,e){return Fy(n.databaseId,e.path)}function Cg(n,e){const t=oN(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Me(lN(t))}function aN(n,e){return Fy(n.databaseId,e)}function nV(n){const e=oN(n);return e.length===4?St.emptyPath():lN(e)}function Av(n){return new St(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lN(n){return xt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function PE(n,e,t){return{name:Iv(n,e),fields:t.value.mapValue.fields}}function rV(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:qe(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(m,g){return m.useProto3Json?(xt(g===void 0||typeof g=="string",58123),Cn.fromBase64String(g||"")):(xt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Cn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(m){const g=m.code===void 0?se.UNKNOWN:nN(m.code);return new Ee(g,m.message||"")}(c);t=new sN(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Cg(n,r.document.name),a=As(r.document.updateTime),c=r.document.createTime?As(r.document.createTime):Xe.min(),d=new ar({mapValue:{fields:r.document.fields}}),f=Ln.newFoundDocument(i,a,c,d),m=r.targetIds||[],g=r.removedTargetIds||[];t=new rf(m,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Cg(n,r.document),a=r.readTime?As(r.readTime):Xe.min(),c=Ln.newNoDocument(i,a),d=r.removedTargetIds||[];t=new rf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Cg(n,r.document),a=r.removedTargetIds||[];t=new rf([],a,i,null)}else{if(!("filter"in e))return qe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new KF(i,a),d=r.targetId;t=new rN(d,c)}}return t}function sV(n,e){let t;if(e instanceof sd)t={update:PE(n,e.key,e.value)};else if(e instanceof Dy)t={delete:Iv(n,e.key)};else if(e instanceof ko)t={update:PE(n,e.key,e.data),updateMask:fV(e.fieldMask)};else{if(!(e instanceof qF))return qe(16599,{Rt:e.type});t={verify:Iv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const d=c.transform;if(d instanceof Rf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Lu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Mu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof kf)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw qe(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:tV(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:qe(27497)}(n,e.precondition)),t}function iV(n,e){return n&&n.length>0?(xt(e!==void 0,14353),n.map(t=>function(i,a){let c=i.updateTime?As(i.updateTime):As(a);return c.isEqual(Xe.min())&&(c=As(a)),new zF(c,i.transformResults||[])}(t,e))):[]}function oV(n,e){return{documents:[aN(n,e.path)]}}function aV(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=aN(n,i);const a=function(m){if(m.length!==0)return uN(as.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(m){if(m.length!==0)return m.map(g=>function(y){return{field:Nl(y.field),direction:uV(y.dir)}}(g))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Nv(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{Vt:t,parent:i}}function lV(n){let e=nV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xt(r===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=function(v){const y=cN(v);return y instanceof as&&VS(y)?y.getFilters():[y]}(t.where));let c=[];t.orderBy&&(c=function(v){return v.map(y=>function(N){return new Du(Cl(N.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(y))}(t.orderBy));let d=null;t.limit&&(d=function(v){let y;return y=typeof v=="object"?v.value:v,hm(y)?null:y}(t.limit));let f=null;t.startAt&&(f=function(v){const y=!!v.before,T=v.values||[];return new Pf(T,y)}(t.startAt));let m=null;return t.endAt&&(m=function(v){const y=!v.before,T=v.values||[];return new Pf(T,y)}(t.endAt)),IF(e,i,c,a,d,"F",f,m)}function cV(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qe(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Cl(t.unaryFilter.field);return rn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Cl(t.unaryFilter.field);return rn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Cl(t.unaryFilter.field);return rn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Cl(t.unaryFilter.field);return rn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qe(61313);default:return qe(60726)}}(n):n.fieldFilter!==void 0?function(t){return rn.create(Cl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qe(58110);default:return qe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return as.create(t.compositeFilter.filters.map(r=>cN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return qe(1026)}}(t.compositeFilter.op))}(n):qe(30097,{filter:n})}function uV(n){return XF[n]}function dV(n){return JF[n]}function hV(n){return ZF[n]}function Nl(n){return{fieldPath:n.canonicalString()}}function Cl(n){return Nn.fromServerFormat(n.fieldPath)}function uN(n){return n instanceof rn?function(t){if(t.op==="=="){if(yE(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NAN"}};if(vE(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(yE(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NOT_NAN"}};if(vE(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nl(t.field),op:dV(t.op),value:t.value}}}(n):n instanceof as?function(t){const r=t.getFilters().map(i=>uN(i));return r.length===1?r[0]:{compositeFilter:{op:hV(t.op),filters:r}}}(n):qe(54877,{filter:n})}function fV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t,r,i,a=Xe.min(),c=Xe.min(),d=Cn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new lo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.gt=e}}function pV(n){const e=lV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Sv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.Dn=new vV}addToCollectionParentIndex(e,t){return this.Dn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(bo.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(bo.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class vV{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new hn(St.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hn(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hN=41943040;class ir{static withCacheSize(e){return new ir(e,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir.DEFAULT_COLLECTION_PERCENTILE=10,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ir.DEFAULT=new ir(hN,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ir.DISABLED=new ir(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Zl(0)}static ur(){return new Zl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="LruGarbageCollector",fN=1048576;function OE([n,e],[t,r]){const i=it(n,t);return i===0?it(e,r):i}class yV{constructor(e){this.Tr=e,this.buffer=new hn(OE),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();OE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ne(kE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fc(t)?Ne(kE,"Ignoring IndexedDB error during garbage collection: ",t):await hc(t)}await this.Rr(3e5)})}}class wV{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return le.resolve(dm.ue);const r=new yV(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(RE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RE):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,a,c,d,f,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,c=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,d=Date.now(),this.removeTargets(e,r,t))).next(v=>(a=v,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(m=Date.now(),Tl()<=at.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${i} in `+(d-c)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${v} documents in `+(m-f)+`ms
Total Duration: ${m-g}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:v})))}}function _V(n,e){return new wV(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(){this.changes=new Oa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&yu(r.mutation,i,yr.empty(),kt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,lt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=lt()){const i=ca();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=ou();return a.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=ca();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,lt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,i){let a=gi();const c=vu(),d=function(){return vu()}();return t.forEach((f,m)=>{const g=r.get(m.key);i.has(m.key)&&(g===void 0||g.mutation instanceof ko)?a=a.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),yu(g.mutation,m,g.mutation.getFieldMask(),kt.now())):c.set(m.key,yr.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,g)=>c.set(m,g)),t.forEach((m,g)=>{var v;return d.set(m,new bV(g,(v=c.get(m))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(e,t){const r=vu();let i=new $t((c,d)=>c-d),a=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let g=r.get(f)||yr.empty();g=d.applyToLocalView(m,g),r.set(f,g);const v=(i.get(d.batchId)||lt()).add(f);i=i.insert(d.batchId,v)})}).next(()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,g=f.value,v=GS();g.forEach(y=>{if(!a.has(y)){const T=eN(t.get(y),r.get(y));T!==null&&v.set(y,T),a=a.add(y)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,v))}return le.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(c){return Me.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$S(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):le.resolve(ca());let d=Pu,f=a;return c.next(m=>le.forEach(m,(g,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),a.get(g)?le.resolve():this.remoteDocumentCache.getEntry(e,g).next(y=>{f=f.insert(g,y)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,lt())).next(g=>({batchId:d,changes:KS(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next(r=>{let i=ou();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let c=ou();return this.indexManager.getCollectionParents(e,a).next(d=>le.forEach(d,f=>{const m=function(v,y){return new ka(y,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(g=>{g.forEach((v,y)=>{c=c.insert(v,y)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i))).next(c=>{a.forEach((f,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,Ln.newInvalidDocument(g)))});let d=ou();return c.forEach((f,m)=>{const g=a.get(f);g!==void 0&&yu(g.mutation,m,yr.empty(),kt.now()),pm(t,m)&&(d=d.insert(f,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return le.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:As(i.createTime)}}(t)),le.resolve()}getNamedQuery(e,t){return le.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:pV(i.bundledQuery),readTime:As(i.readTime)}}(t)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(){this.overlays=new $t(Me.comparator),this.kr=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ca();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.wt(e,t,a)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=ca(),a=t.length+1,c=new Me(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new $t((m,g)=>m-g);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=a.get(m.largestBatchId);g===null&&(g=ca(),a=a.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const d=ca(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,g)=>d.set(m,g)),!(d.size()>=i)););return le.resolve(d)}wt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new HF(t,r));let a=this.kr.get(t);a===void 0&&(a=lt(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.qr=new hn(yn.Qr),this.$r=new hn(yn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new yn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new yn(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new Me(new St([])),r=new yn(t,e),i=new yn(t,e+1),a=[];return this.$r.forEachInRange([r,i],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Me(new St([])),r=new yn(t,e),i=new yn(t,e+1);let a=lt();return this.$r.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new yn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class yn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Me.comparator(e.key,t.key)||it(e.Hr,t.Hr)}static Ur(e,t){return it(e.Hr,t.Hr)||Me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new hn(yn.Qr)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new WF(a,t,r,i);this.mutationQueue.push(c);for(const d of i)this.Yr=this.Yr.add(new yn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,t){return le.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),a=i<0?0:i;return le.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Iy:this.er-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yn(t,0),i=new yn(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],c=>{const d=this.Zr(c.Hr);a.push(d)}),le.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(it);return t.forEach(i=>{const a=new yn(i,0),c=new yn(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],d=>{r=r.add(d.Hr)})}),le.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Me.isDocumentKey(a)||(a=a.child(""));const c=new yn(new Me(a),0);let d=new hn(it);return this.Yr.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(d=d.add(f.Hr)),!0)},c),le.resolve(this.ei(d))}ei(e){const t=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){xt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return le.forEach(t.mutations,i=>{const a=new yn(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new yn(t,0),i=this.Yr.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.ni=e,this.docs=function(){return new $t(Me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let r=gi();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ln.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=gi();const c=t.path,d=new Me(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:g}}=f.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||oF(iF(g),r)<=0||(i.has(g.key)||pm(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return le.resolve(a)}getAllFromCollectionGroup(e,t,r,i){qe(9500)}ri(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new jV(this)}getSize(e){return le.resolve(this.size)}}class jV extends EV{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.persistence=e,this.ii=new Oa(t=>Py(t),Ry),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.si=0,this.oi=new Vy,this.targetCount=0,this._i=Zl.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),le.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Zl(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.hr(t),le.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.ii.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),le.waitFor(a).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),le.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t){this.ai={},this.overlays={},this.ui=new dm(0),this.ci=!1,this.ci=!0,this.li=new CV,this.referenceDelegate=e(this),this.hi=new PV(this),this.indexManager=new gV,this.remoteDocumentCache=function(i){return new AV(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new mV(t),this.Ti=new SV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new IV(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const i=new RV(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,t){return le.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class RV extends lF{constructor(e){super(),this.currentSequenceNumber=e}}class Uy{constructor(e){this.persistence=e,this.Ai=new Vy,this.Ri=null}static Vi(e){return new Uy(e)}get mi(){if(this.Ri)return this.Ri;throw qe(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.mi,r=>{const i=Me.fromPath(r);return this.fi(e,i).next(a=>{a||t.removeEntry(i,Xe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return le.or([()=>le.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Df{constructor(e,t){this.persistence=e,this.gi=new Oa(r=>dF(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=_V(this,t)}static Vi(e,t){return new Df(e,t)}Ii(){}di(e){return le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return le.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?le.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,c=>this.Sr(e,c,t).next(d=>{d||(r++,a.removeEntry(c,Xe.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),le.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),le.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),le.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ef(e.data.value)),t}Sr(e,t,r){return le.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.gi.get(t);return le.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=lt(),i=lt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new zy(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return fD()?8:cF(Vn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ps(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,t,i,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new kV;return this.ws(e,t,c).next(d=>{if(a.result=d,this.Rs)return this.Ss(e,t,c,d.size)})}).next(()=>a.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Tl()<=at.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",Sl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),le.resolve()):(Tl()<=at.DEBUG&&Ne("QueryEngine","Query:",Sl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Tl()<=at.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",Sl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Is(t))):le.resolve())}ps(e,t){if(EE(t))return le.resolve(null);let r=Is(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Sv(t,null,"F"),r=Is(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=lt(...a);return this.gs.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.bs(t,d);return this.Ds(t,m,c,f.readTime)?this.ps(e,Sv(t,null,"F")):this.vs(e,m,t,f)}))})))}ys(e,t,r,i){return EE(t)||i.isEqual(Xe.min())?le.resolve(null):this.gs.getDocuments(e,r).next(a=>{const c=this.bs(t,a);return this.Ds(t,c,r,i)?le.resolve(null):(Tl()<=at.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sl(t)),this.vs(e,c,t,sF(i,Pu)).next(d=>d))})}bs(e,t){let r=new hn(WS(e));return t.forEach((i,a)=>{pm(e,a)&&(r=r.add(a))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,t,r){return Tl()<=at.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",Sl(t)),this.gs.getDocumentsMatchingQuery(e,t,bo.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="LocalStore",DV=3e8;class LV{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new $t(it),this.Ms=new Oa(a=>Py(a),Ry),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TV(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function MV(n,e,t,r){return new LV(n,e,t,r)}async function pN(n,e){const t=Ze(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],d=[];let f=lt();for(const m of i){c.push(m.batchId);for(const g of m.mutations)f=f.add(g.key)}for(const m of a){d.push(m.batchId);for(const g of m.mutations)f=f.add(g.key)}return t.localDocuments.getDocuments(r,f).next(m=>({Bs:m,removedBatchIds:c,addedBatchIds:d}))})})}function FV(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(d,f,m,g){const v=m.batch,y=v.keys();let T=le.resolve();return y.forEach(N=>{T=T.next(()=>g.getEntry(f,N)).next(_=>{const w=m.docVersions.get(N);xt(w!==null,48541),_.version.compareTo(w)<0&&(v.applyToRemoteDocument(_,m),_.isValidDocument()&&(_.setReadTime(m.commitVersion),g.addEntry(_)))})}),T.next(()=>d.mutationQueue.removeMutationBatch(f,v))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let f=lt();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function gN(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function VV(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;const d=[];e.targetChanges.forEach((g,v)=>{const y=i.get(v);if(!y)return;d.push(t.hi.removeMatchingKeys(a,g.removedDocuments,v).next(()=>t.hi.addMatchingKeys(a,g.addedDocuments,v)));let T=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(Cn.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):g.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(g.resumeToken,r)),i=i.insert(v,T),function(_,w,A){return _.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=DV?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(y,T,g)&&d.push(t.hi.updateTargetData(a,T))});let f=gi(),m=lt();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))}),d.push(UV(a,c,e.documentUpdates).next(g=>{f=g.Ls,m=g.ks})),!r.isEqual(Xe.min())){const g=t.hi.getLastRemoteSnapshotVersion(a).next(v=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(g)}return le.waitFor(d).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(t.Fs=i,a))}function UV(n,e,t){let r=lt(),i=lt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=gi();return t.forEach((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(Xe.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):Ne(By,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{Ls:c,ks:i}})}function zV(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Iy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function BV(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(a=>a?(i=a,le.resolve(i)):t.hi.allocateTargetId(r).next(c=>(i=new lo(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function jv(n,e,t){const r=Ze(n),i=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!fc(c))throw c;Ne(By,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function DE(n,e,t){const r=Ze(n);let i=Xe.min(),a=lt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(f,m,g){const v=Ze(f),y=v.Ms.get(g);return y!==void 0?le.resolve(v.Fs.get(y)):v.hi.getTargetData(m,g)}(r,c,Is(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,d.targetId).next(f=>{a=f})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,t?i:Xe.min(),t?a:lt())).next(d=>($V(r,jF(e),d),{documents:d,qs:a})))}function $V(n,e,t){let r=n.xs.get(e)||Xe.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(e,r)}class LE{constructor(){this.activeTargetIds=LF()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qV{constructor(){this.Fo=new LE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new LE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="ConnectivityMonitor";class FE{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ne(ME,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ne(ME,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=null;function Pv(){return Vh===null?Vh=function(){return 268435456+Math.round(2147483648*Math.random())}():Vh++,"0x"+Vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="RestConnection",HV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Af?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,a){const c=Pv(),d=this.Go(e,t.toUriEncodedString());Ne(Ig,`Sending RPC '${e}' ${c}:`,d,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,i,a);const{host:m}=new URL(d),g=ja(m);return this.jo(e,d,f,r,g).then(v=>(Ne(Ig,`Received RPC '${e}' ${c}: `,v),v),v=>{throw Sa(Ig,`RPC '${e}' ${c} failed with error: `,v,"url: ",d,"request:",r),v})}Jo(e,t,r,i,a,c){return this.Wo(e,t,r,i,a)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,t){const r=HV[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="WebChannelConnection";class QV extends KV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,a){const c=Pv();return new Promise((d,f)=>{const m=new xS;m.setWithCredentials(!0),m.listenOnce(wS.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Zh.NO_ERROR:const v=m.getResponseJson();Ne(On,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),d(v);break;case Zh.TIMEOUT:Ne(On,`RPC '${e}' ${c} timed out`),f(new Ee(se.DEADLINE_EXCEEDED,"Request time out"));break;case Zh.HTTP_ERROR:const y=m.getStatus();if(Ne(On,`RPC '${e}' ${c} failed with status:`,y,"response text:",m.getResponseText()),y>0){let T=m.getResponseJson();Array.isArray(T)&&(T=T[0]);const N=T==null?void 0:T.error;if(N&&N.status&&N.message){const _=function(A){const I=A.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(I)>=0?I:se.UNKNOWN}(N.status);f(new Ee(_,N.message))}else f(new Ee(se.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new Ee(se.UNAVAILABLE,"Connection failed."));break;default:qe(9055,{c_:e,streamId:c,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{Ne(On,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(i);Ne(On,`RPC '${e}' ${c} sending request:`,i),m.send(t,"POST",g,r,15)})}P_(e,t,r){const i=Pv(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=bS(),d=ES(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const g=a.join("");Ne(On,`Creating RPC '${e}' stream ${i}: ${g}`,f);const v=c.createWebChannel(g,f);this.T_(v);let y=!1,T=!1;const N=new GV({Ho:w=>{T?Ne(On,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(y||(Ne(On,`Opening RPC '${e}' stream ${i} transport.`),v.open(),y=!0),Ne(On,`RPC '${e}' stream ${i} sending:`,w),v.send(w))},Yo:()=>v.close()}),_=(w,A,I)=>{w.listen(A,O=>{try{I(O)}catch(U){setTimeout(()=>{throw U},0)}})};return _(v,iu.EventType.OPEN,()=>{T||(Ne(On,`RPC '${e}' stream ${i} transport opened.`),N.s_())}),_(v,iu.EventType.CLOSE,()=>{T||(T=!0,Ne(On,`RPC '${e}' stream ${i} transport closed`),N.__(),this.I_(v))}),_(v,iu.EventType.ERROR,w=>{T||(T=!0,Sa(On,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),N.__(new Ee(se.UNAVAILABLE,"The operation could not be completed")))}),_(v,iu.EventType.MESSAGE,w=>{var A;if(!T){const I=w.data[0];xt(!!I,16349);const O=I,U=(O==null?void 0:O.error)||((A=O[0])===null||A===void 0?void 0:A.error);if(U){Ne(On,`RPC '${e}' stream ${i} received error:`,U);const $=U.status;let W=function(j){const P=nn[j];if(P!==void 0)return nN(P)}($),D=U.message;W===void 0&&(W=se.INTERNAL,D="Unknown error status: "+$+" with message "+U.message),T=!0,N.__(new Ee(W,D)),v.close()}else Ne(On,`RPC '${e}' stream ${i} received:`,I),N.a_(I)}}),_(d,_S.STAT_EVENT,w=>{w.stat===vv.PROXY?Ne(On,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===vv.NOPROXY&&Ne(On,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.o_()},0),N}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Ag(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(n){return new eV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&Ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="PersistentStream";class yN{constructor(e,t,r,i,a,c,d,f){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new vN(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(pi(t.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{const i=new Ee(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Ne(VE,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Ne(VE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YV extends yN{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=rV(this.serializer,e),r=function(a){if(!("targetChange"in a))return Xe.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Xe.min():c.readTime?As(c.readTime):Xe.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Av(this.serializer),t.addTarget=function(a,c){let d;const f=c.target;if(d=bv(f)?{documents:oV(a,f)}:{query:aV(a,f).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=iN(a,c.resumeToken);const m=Nv(a,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Xe.min())>0){d.readTime=Of(a,c.snapshotVersion.toTimestamp());const m=Nv(a,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const r=cV(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Av(this.serializer),t.removeTarget=e,this.k_(t)}}class XV extends yN{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return xt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){xt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=iV(e.writeResults,e.commitTime),r=As(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Av(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>sV(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{}class ZV extends JV{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Ee(se.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,Cv(t,r),i,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(se.UNKNOWN,a.toString())})}Jo(e,t,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Jo(e,Cv(t,r),i,c,d,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ee(se.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class e3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(pi(t),this._a=!1):Ne("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="RemoteStore";class t3{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{Da(this)&&(Ne(Na,"Restarting streams for network reachability change."),await async function(f){const m=Ze(f);m.Ia.add(4),await od(m),m.Aa.set("Unknown"),m.Ia.delete(4),await wm(m)}(this))})}),this.Aa=new e3(r,i)}}async function wm(n){if(Da(n))for(const e of n.da)await e(!0)}async function od(n){for(const e of n.da)await e(!1)}function xN(n,e){const t=Ze(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Hy(t)?Wy(t):mc(t).x_()&&qy(t,e))}function $y(n,e){const t=Ze(n),r=mc(t);t.Ta.delete(e),r.x_()&&wN(t,e),t.Ta.size===0&&(r.x_()?r.B_():Da(t)&&t.Aa.set("Unknown"))}function qy(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mc(n).H_(e)}function wN(n,e){n.Ra.$e(e),mc(n).Y_(e)}function Wy(n){n.Ra=new YF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),mc(n).start(),n.Aa.aa()}function Hy(n){return Da(n)&&!mc(n).M_()&&n.Ta.size>0}function Da(n){return Ze(n).Ia.size===0}function _N(n){n.Ra=void 0}async function n3(n){n.Aa.set("Online")}async function r3(n){n.Ta.forEach((e,t)=>{qy(n,e)})}async function s3(n,e){_N(n),Hy(n)?(n.Aa.la(e),Wy(n)):n.Aa.set("Unknown")}async function i3(n,e,t){if(n.Aa.set("Online"),e instanceof sN&&e.state===2&&e.cause)try{await async function(i,a){const c=a.cause;for(const d of a.targetIds)i.Ta.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.Ta.delete(d),i.Ra.removeTarget(d))}(n,e)}catch(r){Ne(Na,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Lf(n,r)}else if(e instanceof rf?n.Ra.Ye(e):e instanceof rN?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Xe.min()))try{const r=await gN(n.localStore);t.compareTo(r)>=0&&await function(a,c){const d=a.Ra.Pt(c);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const g=a.Ta.get(m);g&&a.Ta.set(m,g.withResumeToken(f.resumeToken,c))}}),d.targetMismatches.forEach((f,m)=>{const g=a.Ta.get(f);if(!g)return;a.Ta.set(f,g.withResumeToken(Cn.EMPTY_BYTE_STRING,g.snapshotVersion)),wN(a,f);const v=new lo(g.target,f,m,g.sequenceNumber);qy(a,v)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(r){Ne(Na,"Failed to raise snapshot:",r),await Lf(n,r)}}async function Lf(n,e,t){if(!fc(e))throw e;n.Ia.add(1),await od(n),n.Aa.set("Offline"),t||(t=()=>gN(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ne(Na,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await wm(n)})}function EN(n,e){return e().catch(t=>Lf(n,t,e))}async function _m(n){const e=Ze(n),t=Co(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Iy;for(;o3(e);)try{const i=await zV(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,a3(e,i)}catch(i){await Lf(e,i)}bN(e)&&TN(e)}function o3(n){return Da(n)&&n.Pa.length<10}function a3(n,e){n.Pa.push(e);const t=Co(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function bN(n){return Da(n)&&!Co(n).M_()&&n.Pa.length>0}function TN(n){Co(n).start()}async function l3(n){Co(n).na()}async function c3(n){const e=Co(n);for(const t of n.Pa)e.X_(t.mutations)}async function u3(n,e,t){const r=n.Pa.shift(),i=Ly.from(r,e,t);await EN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await _m(n)}async function d3(n,e){e&&Co(n).Z_&&await async function(r,i){if(function(c){return GF(c)&&c!==se.ABORTED}(i.code)){const a=r.Pa.shift();Co(r).N_(),await EN(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await _m(r)}}(n,e),bN(n)&&TN(n)}async function UE(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Ne(Na,"RemoteStore received new credentials");const r=Da(t);t.Ia.add(3),await od(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await wm(t)}async function h3(n,e){const t=Ze(n);e?(t.Ia.delete(2),await wm(t)):e||(t.Ia.add(2),await od(t),t.Aa.set("Unknown"))}function mc(n){return n.Va||(n.Va=function(t,r,i){const a=Ze(t);return a.ia(),new YV(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:n3.bind(null,n),e_:r3.bind(null,n),n_:s3.bind(null,n),J_:i3.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Hy(n)?Wy(n):n.Aa.set("Unknown")):(await n.Va.stop(),_N(n))})),n.Va}function Co(n){return n.ma||(n.ma=function(t,r,i){const a=Ze(t);return a.ia(),new XV(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:l3.bind(null,n),n_:d3.bind(null,n),ea:c3.bind(null,n),ta:u3.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await _m(n)):(await n.ma.stop(),n.Pa.length>0&&(Ne(Na,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,d=new Ky(e,t,c,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gy(n,e){if(pi("AsyncQueue",`${e}: ${n}`),fc(n))return new Ee(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{static emptySet(e){return new Ol(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Me.comparator(t.key,r.key):(t,r)=>Me.comparator(t.key,r.key),this.keyedMap=ou(),this.sortedSet=new $t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ol)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ol;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this.fa=new $t(Me.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):qe(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class ec{constructor(e,t,r,i,a,c,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new ec(e,t,Ol.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class m3{constructor(){this.queries=BE(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const i=Ze(t),a=i.queries;i.queries=BE(),a.forEach((c,d)=>{for(const f of d.wa)f.onError(r)})})(this,new Ee(se.ABORTED,"Firestore shutting down"))}}function BE(){return new Oa(n=>qS(n),mm)}async function SN(n,e){const t=Ze(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new f3,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(i,!0);break;case 1:a.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const d=Gy(c,`Initialization of query '${Sl(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&Qy(t)}async function NN(n,e){const t=Ze(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function p3(n,e){const t=Ze(n);let r=!1;for(const i of e){const a=i.query,c=t.queries.get(a);if(c){for(const d of c.wa)d.Ca(i)&&(r=!0);c.ya=i}}r&&Qy(t)}function g3(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(t);r.queries.delete(e)}function Qy(n){n.Da.forEach(e=>{e.next()})}var Rv,$E;($E=Rv||(Rv={})).Fa="default",$E.Cache="cache";class CN{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ec(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Rv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.key=e}}class AN{constructor(e){this.key=e}}class v3{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=lt(),this.mutatedKeys=lt(),this.Xa=WS(e),this.eu=new Ol(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new zE,i=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,v)=>{const y=i.get(g),T=pm(this.query,v)?v:null,N=!!y&&this.mutatedKeys.has(y.key),_=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let w=!1;y&&T?y.data.isEqual(T.data)?N!==_&&(r.track({type:3,doc:T}),w=!0):this.iu(y,T)||(r.track({type:2,doc:T}),w=!0,(f&&this.Xa(T,f)>0||m&&this.Xa(T,m)<0)&&(d=!0)):!y&&T?(r.track({type:0,doc:T}),w=!0):y&&!T&&(r.track({type:1,doc:y}),w=!0,(f||m)&&(d=!0)),w&&(T?(c=c.add(T),a=_?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:d,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,v)=>function(T,N){const _=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe(20277,{At:w})}};return _(T)-_(N)}(g.type,v.type)||this.Xa(g.doc,v.doc)),this.su(r),i=i!=null&&i;const d=t&&!i?this.ou():[],f=this.Za.size===0&&this.current&&!i?1:0,m=f!==this.Ya;return this.Ya=f,c.length!==0||m?{snapshot:new ec(this.query,e.eu,a,c,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new zE,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=lt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new AN(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new IN(r))}),t}uu(e){this.Ha=e.qs,this.Za=lt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ec.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Yy="SyncEngine";class y3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class x3{constructor(e){this.key=e,this.lu=!1}}class w3{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Oa(d=>qS(d),mm),this.Tu=new Map,this.Iu=new Set,this.du=new $t(Me.comparator),this.Eu=new Map,this.Au=new Vy,this.Ru={},this.Vu=new Map,this.mu=Zl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function _3(n,e,t=!0){const r=DN(n);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await jN(r,e,t,!0),i}async function E3(n,e){const t=DN(n);await jN(t,e,!0,!1)}async function jN(n,e,t,r){const i=await BV(n.localStore,Is(e)),a=i.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await b3(n,e,a,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&xN(n.remoteStore,i),d}async function b3(n,e,t,r,i){n.gu=(v,y,T)=>async function(_,w,A,I){let O=w.view.nu(A);O.Ds&&(O=await DE(_.localStore,w.query,!1).then(({documents:D})=>w.view.nu(D,O)));const U=I&&I.targetChanges.get(w.targetId),$=I&&I.targetMismatches.get(w.targetId)!=null,W=w.view.applyChanges(O,_.isPrimaryClient,U,$);return WE(_,w.targetId,W._u),W.snapshot}(n,v,y,T);const a=await DE(n.localStore,e,!0),c=new v3(e,a.qs),d=c.nu(a.documents),f=id.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=c.applyChanges(d,n.isPrimaryClient,f);WE(n,t,m._u);const g=new y3(e,t,c);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function T3(n,e,t){const r=Ze(n),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(c=>!mm(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await jv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&$y(r.remoteStore,i.targetId),kv(r,i.targetId)}).catch(hc)):(kv(r,i.targetId),await jv(r.localStore,i.targetId,!0))}async function S3(n,e){const t=Ze(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$y(t.remoteStore,r.targetId))}async function N3(n,e,t){const r=k3(n);try{const i=await function(c,d){const f=Ze(c),m=kt.now(),g=d.reduce((T,N)=>T.add(N.key),lt());let v,y;return f.persistence.runTransaction("Locally write mutations","readwrite",T=>{let N=gi(),_=lt();return f.Os.getEntries(T,g).next(w=>{N=w,N.forEach((A,I)=>{I.isValidDocument()||(_=_.add(A))})}).next(()=>f.localDocuments.getOverlayedDocuments(T,N)).next(w=>{v=w;const A=[];for(const I of d){const O=$F(I,v.get(I.key).overlayedDocument);O!=null&&A.push(new ko(I.key,O,LS(O.value.mapValue),ns.exists(!0)))}return f.mutationQueue.addMutationBatch(T,m,A,d)}).next(w=>{y=w;const A=w.applyToLocalDocumentSet(v,_);return f.documentOverlayCache.saveOverlays(T,w.batchId,A)})}).then(()=>({batchId:y.batchId,changes:KS(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,d,f){let m=c.Ru[c.currentUser.toKey()];m||(m=new $t(it)),m=m.insert(d,f),c.Ru[c.currentUser.toKey()]=m}(r,i.batchId,t),await ad(r,i.changes),await _m(r.remoteStore)}catch(i){const a=Gy(i,"Failed to persist write");t.reject(a)}}async function PN(n,e){const t=Ze(n);try{const r=await VV(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.Eu.get(a);c&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.lu=!0:i.modifiedDocuments.size>0?xt(c.lu,14607):i.removedDocuments.size>0&&(xt(c.lu,42227),c.lu=!1))}),await ad(t,r,e)}catch(r){await hc(r)}}function qE(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Pu.forEach((a,c)=>{const d=c.view.va(e);d.snapshot&&i.push(d.snapshot)}),function(c,d){const f=Ze(c);f.onlineState=d;let m=!1;f.queries.forEach((g,v)=>{for(const y of v.wa)y.va(d)&&(m=!0)}),m&&Qy(f)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function C3(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),a=i&&i.key;if(a){let c=new $t(Me.comparator);c=c.insert(a,Ln.newNoDocument(a,Xe.min()));const d=lt().add(a),f=new ym(Xe.min(),new Map,new $t(it),c,d);await PN(r,f),r.du=r.du.remove(a),r.Eu.delete(e),Xy(r)}else await jv(r.localStore,e,!1).then(()=>kv(r,e,t)).catch(hc)}async function I3(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=await FV(t.localStore,e);kN(t,r,null),RN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ad(t,i)}catch(i){await hc(i)}}async function A3(n,e,t){const r=Ze(n);try{const i=await function(c,d){const f=Ze(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let g;return f.mutationQueue.lookupMutationBatch(m,d).next(v=>(xt(v!==null,37113),g=v.keys(),f.mutationQueue.removeMutationBatch(m,v))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,g,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g)).next(()=>f.localDocuments.getDocuments(m,g))})}(r.localStore,e);kN(r,e,t),RN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ad(r,i)}catch(i){await hc(i)}}function RN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function kN(n,e,t){const r=Ze(n);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function kv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||ON(n,r)})}function ON(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&($y(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Xy(n))}function WE(n,e,t){for(const r of t)r instanceof IN?(n.Au.addReference(r.key,e),j3(n,r)):r instanceof AN?(Ne(Yy,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||ON(n,r.key)):qe(19791,{yu:r})}function j3(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(Ne(Yy,"New document in limbo: "+t),n.Iu.add(r),Xy(n))}function Xy(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Me(St.fromString(e)),r=n.mu.next();n.Eu.set(r,new x3(t)),n.du=n.du.insert(t,r),xN(n.remoteStore,new lo(Is(ky(t.path)),r,"TargetPurposeLimboResolution",dm.ue))}}async function ad(n,e,t){const r=Ze(n),i=[],a=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((d,f)=>{c.push(r.gu(f,e,t).then(m=>{var g;if((m||t)&&r.isPrimaryClient){const v=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(f.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(m){i.push(m);const v=zy.Es(f.targetId,m);a.push(v)}}))}),await Promise.all(c),r.hu.J_(i),await async function(f,m){const g=Ze(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>le.forEach(m,y=>le.forEach(y.Is,T=>g.persistence.referenceDelegate.addReference(v,y.targetId,T)).next(()=>le.forEach(y.ds,T=>g.persistence.referenceDelegate.removeReference(v,y.targetId,T)))))}catch(v){if(!fc(v))throw v;Ne(By,"Failed to update sequence numbers: "+v)}for(const v of m){const y=v.targetId;if(!v.fromCache){const T=g.Fs.get(y),N=T.snapshotVersion,_=T.withLastLimboFreeSnapshotVersion(N);g.Fs=g.Fs.insert(y,_)}}}(r.localStore,a))}async function P3(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Ne(Yy,"User change. New user:",e.toKey());const r=await pN(t.localStore,e);t.currentUser=e,function(a,c){a.Vu.forEach(d=>{d.forEach(f=>{f.reject(new Ee(se.CANCELLED,c))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ad(t,r.Bs)}}function R3(n,e){const t=Ze(n),r=t.Eu.get(e);if(r&&r.lu)return lt().add(r.key);{let i=lt();const a=t.Tu.get(e);if(!a)return i;for(const c of a){const d=t.Pu.get(c);i=i.unionWith(d.view.tu)}return i}}function DN(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C3.bind(null,e),e.hu.J_=p3.bind(null,e.eventManager),e.hu.pu=g3.bind(null,e.eventManager),e}function k3(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A3.bind(null,e),e}class Mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return MV(this.persistence,new OV,e.initialUser,this.serializer)}Du(e){return new mN(Uy.Vi,this.serializer)}bu(e){return new qV}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mf.provider={build:()=>new Mf};class O3 extends Mf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){xt(this.persistence.referenceDelegate instanceof Df,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new xV(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?ir.withCacheSize(this.cacheSizeBytes):ir.DEFAULT;return new mN(r=>Df.Vi(r,t),this.serializer)}}class Ov{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=P3.bind(null,this.syncEngine),await h3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new m3}()}createDatastore(e){const t=xm(e.databaseInfo.databaseId),r=function(a){return new QV(a)}(e.databaseInfo);return function(a,c,d,f){return new ZV(a,c,d,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,a,c,d){return new t3(r,i,a,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>qE(this.syncEngine,t,0),function(){return FE.C()?new FE:new WV}())}createSyncEngine(e,t){return function(i,a,c,d,f,m,g){const v=new w3(i,a,c,d,f,m);return g&&(v.fu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const a=Ze(i);Ne(Na,"RemoteStore shutting down."),a.Ia.add(5),await od(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ov.provider={build:()=>new Ov};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):pi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="FirestoreClient";class D3{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=sr.UNAUTHENTICATED,this.clientId=Ny.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{Ne(Io,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Ne(Io,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new po;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Gy(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jg(n,e){n.asyncQueue.verifyOperationInProgress(),Ne(Io,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await pN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Sa("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Ne("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Sa("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function HE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await L3(n);Ne(Io,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>UE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>UE(e.remoteStore,i)),n._onlineComponents=e}async function L3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ne(Io,"Using user provided OfflineComponentProvider");try{await jg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===se.FAILED_PRECONDITION||i.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Sa("Error using user provided cache. Falling back to memory cache: "+t),await jg(n,new Mf)}}else Ne(Io,"Using default OfflineComponentProvider"),await jg(n,new O3(void 0));return n._offlineComponents}async function MN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ne(Io,"Using user provided OnlineComponentProvider"),await HE(n,n._uninitializedComponentsProvider._online)):(Ne(Io,"Using default OnlineComponentProvider"),await HE(n,new Ov))),n._onlineComponents}function M3(n){return MN(n).then(e=>e.syncEngine)}async function Dv(n){const e=await MN(n),t=e.eventManager;return t.onListen=_3.bind(null,e.syncEngine),t.onUnlisten=T3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=E3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=S3.bind(null,e.syncEngine),t}function F3(n,e,t={}){const r=new po;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,d,f,m){const g=new LN({next:y=>{g.Ou(),c.enqueueAndForget(()=>NN(a,v)),y.fromCache&&f.source==="server"?m.reject(new Ee(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(y)},error:y=>m.reject(y)}),v=new CN(d,g,{includeMetadataChanges:!0,ka:!0});return SN(a,v)}(await Dv(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3="firestore.googleapis.com",GE=!0;class QE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=V3,this.ssl=GE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:GE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fN)throw new Ee(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Em{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QM;switch(r.type){case"firstParty":return new JM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=KE.get(t);r&&(Ne("ComponentProvider","Removing Datastore"),KE.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _i(this.firestore,e,this._query)}}class on{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}toJSON(){return{type:on._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(rd(t,on._jsonSchema))return new on(e,r||null,new Me(St.fromString(t.referencePath)))}}on._jsonSchemaVersion="firestore/documentReference/1.0",on._jsonSchema={type:sn("string",on._jsonSchemaVersion),referencePath:sn("string")};class go extends _i{constructor(e,t,r){super(e,t,ky(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new Me(e))}withConverter(e){return new go(this.firestore,e,this._path)}}function dt(n,e,...t){if(n=ln(n),Cy("collection","path",e),n instanceof Em){const r=St.fromString(e,...t);return lE(r),new go(n,null,r)}{if(!(n instanceof on||n instanceof go))throw new Ee(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(St.fromString(e,...t));return lE(r),new go(n.firestore,null,r)}}function sf(n,e){if(n=Cs(n,Em),Cy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ee(se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _i(n,null,function(r){return new ka(St.emptyPath(),r)}(e))}function Ft(n,e,...t){if(n=ln(n),arguments.length===1&&(e=Ny.newId()),Cy("doc","path",e),n instanceof Em){const r=St.fromString(e,...t);return aE(r),new on(n,null,new Me(r))}{if(!(n instanceof on||n instanceof go))throw new Ee(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(St.fromString(e,...t));return aE(r),new on(n.firestore,n instanceof go?n.converter:null,new Me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="AsyncQueue";class XE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new vN(this,"async_queue_retry"),this.oc=()=>{const r=Ag();r&&Ne(YE,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Ag();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ag();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new po;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!fc(e))throw e;Ne(YE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,pi("INTERNAL UNHANDLED ERROR: ",JE(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const i=Ky.createAndSchedule(this,e,t,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&qe(47125,{hc:JE(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function JE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Ca extends Em{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new XE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new XE(e),this._firestoreClient=void 0,await e}}}function U3(n,e,t){t||(t=Af);const r=im(n,"firestore");if(r.isInitialized(t)){const i=r.getImmediate({identifier:t}),a=r.getOptions(t);if(_a(a,e))return i;throw new Ee(se.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ee(se.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fN)throw new Ee(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&ja(e.host)&&my(e.host),r.initialize({options:e,instanceIdentifier:t})}function Jy(n){if(n._terminated)throw new Ee(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||z3(n),n._firestoreClient}function z3(n){var e,t,r;const i=n._freezeSettings(),a=function(d,f,m,g){return new mF(d,f,m,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,FN(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new D3(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rr(Cn.fromBase64String(e))}catch(t){throw new Ee(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rr(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(rd(e,Rr._jsonSchema))return Rr.fromBase64String(e.bytes)}}Rr._jsonSchemaVersion="firestore/bytes/1.0",Rr._jsonSchema={type:sn("string",Rr._jsonSchemaVersion),bytes:sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function B3(){return new ld(xv)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:js._jsonSchemaVersion}}static fromJSON(e){if(rd(e,js._jsonSchema))return new js(e.latitude,e.longitude)}}js._jsonSchemaVersion="firestore/geoPoint/1.0",js._jsonSchema={type:sn("string",js._jsonSchemaVersion),latitude:sn("number"),longitude:sn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ps._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(rd(e,Ps._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ps(e.vectorValues);throw new Ee(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ps._jsonSchemaVersion="firestore/vectorValue/1.0",Ps._jsonSchema={type:sn("string",Ps._jsonSchemaVersion),vectorValues:sn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=/^__.*__$/;class q3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ko(e,this.data,this.fieldMask,t,this.fieldTransforms):new sd(e,this.data,t,this.fieldTransforms)}}class VN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ko(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function UN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe(40011,{Ec:n})}}class ex{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ex(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ff(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(UN(this.Ec)&&$3.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class W3{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||xm(e)}Dc(e,t,r,i=!1){return new ex({Ec:e,methodName:t,bc:r,path:Nn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tx(n){const e=n._freezeSettings(),t=xm(n._databaseId);return new W3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function H3(n,e,t,r,i,a={}){const c=n.Dc(a.merge||a.mergeFields?2:0,e,t,i);nx("Data must be an object, but it was:",c,r);const d=zN(r,c);let f,m;if(a.merge)f=new yr(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const v of a.mergeFields){const y=Lv(e,v,t);if(!c.contains(y))throw new Ee(se.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);$N(g,y)||g.push(y)}f=new yr(g),m=c.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,m=c.fieldTransforms;return new q3(new ar(d),f,m)}class bm extends Zy{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bm}}function K3(n,e,t,r){const i=n.Dc(1,e,t);nx("Data must be an object, but it was:",i,r);const a=[],c=ar.empty();Ro(r,(f,m)=>{const g=rx(e,f,t);m=ln(m);const v=i.gc(g);if(m instanceof bm)a.push(g);else{const y=cd(m,v);y!=null&&(a.push(g),c.set(g,y))}});const d=new yr(a);return new VN(c,d,i.fieldTransforms)}function G3(n,e,t,r,i,a){const c=n.Dc(1,e,t),d=[Lv(e,r,t)],f=[i];if(a.length%2!=0)throw new Ee(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)d.push(Lv(e,a[y])),f.push(a[y+1]);const m=[],g=ar.empty();for(let y=d.length-1;y>=0;--y)if(!$N(m,d[y])){const T=d[y];let N=f[y];N=ln(N);const _=c.gc(T);if(N instanceof bm)m.push(T);else{const w=cd(N,_);w!=null&&(m.push(T),g.set(T,w))}}const v=new yr(m);return new VN(g,v,c.fieldTransforms)}function Q3(n,e,t,r=!1){return cd(t,n.Dc(r?4:3,e))}function cd(n,e){if(BN(n=ln(n)))return nx("Unsupported field value:",e,n),zN(n,e);if(n instanceof Zy)return function(r,i){if(!UN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let c=0;for(const d of r){let f=cd(d,i.yc(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}}(n,e)}return function(r,i){if((r=ln(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=kt.fromDate(r);return{timestampValue:Of(i.serializer,a)}}if(r instanceof kt){const a=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Of(i.serializer,a)}}if(r instanceof js)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rr)return{bytesValue:iN(i.serializer,r._byteString)};if(r instanceof on){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Fy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ps)return function(c,d){return{mapValue:{fields:{[OS]:{stringValue:DS},[jf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw d.wc("VectorValues must only contain numeric values.");return Oy(d.serializer,m)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${um(r)}`)}(n,e)}function zN(n,e){const t={};return IS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ro(n,(r,i)=>{const a=cd(i,e.Vc(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function BN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof kt||n instanceof js||n instanceof Rr||n instanceof on||n instanceof Zy||n instanceof Ps)}function nx(n,e,t){if(!BN(t)||!NS(t)){const r=um(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Lv(n,e,t){if((e=ln(e))instanceof ld)return e._internalPath;if(typeof e=="string")return rx(n,e);throw Ff("Field path arguments must be of type string or ",n,!1,void 0,t)}const Y3=new RegExp("[~\\*/\\[\\]]");function rx(n,e,t){if(e.search(Y3)>=0)throw Ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ld(...e.split("."))._internalPath}catch{throw Ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ff(n,e,t,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${r}`),c&&(f+=` in document ${i}`),f+=")"),new Ee(se.INVALID_ARGUMENT,d+n+f)}function $N(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new X3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class X3 extends qN{data(){return super.data()}}function Tm(n,e){return typeof e=="string"?rx(n,e):e instanceof ld?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ee(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sx{}class HN extends sx{}function rs(n,e,...t){let r=[];e instanceof sx&&r.push(e),r=r.concat(t),function(a){const c=a.filter(f=>f instanceof ix).length,d=a.filter(f=>f instanceof Sm).length;if(c>1||c>0&&d>0)throw new Ee(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Sm extends HN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Sm(e,t,r)}_apply(e){const t=this._parse(e);return KN(e._query,t),new _i(e.firestore,e.converter,Tv(e._query,t))}_parse(e){const t=tx(e.firestore);return function(a,c,d,f,m,g,v){let y;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Ee(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){t1(v,g);const N=[];for(const _ of v)N.push(e1(f,a,_));y={arrayValue:{values:N}}}else y=e1(f,a,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||t1(v,g),y=Q3(d,c,v,g==="in"||g==="not-in");return rn.create(m,g,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function J3(n,e,t){const r=e,i=Tm("where",n);return Sm._create(i,r,t)}class ix extends sx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ix(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:as.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,a){let c=i;const d=a.getFlattenedFilters();for(const f of d)KN(c,f),c=Tv(c,f)}(e._query,t),new _i(e.firestore,e.converter,Tv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ox extends HN{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ox(e,t)}_apply(e){const t=function(i,a,c){if(i.startAt!==null)throw new Ee(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ee(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Du(a,c)}(e._query,this._field,this._direction);return new _i(e.firestore,e.converter,function(i,a){const c=i.explicitOrderBy.concat([a]);return new ka(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function Nm(n,e="asc"){const t=e,r=Tm("orderBy",n);return ox._create(r,t)}function e1(n,e,t){if(typeof(t=ln(t))=="string"){if(t==="")throw new Ee(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$S(e)&&t.indexOf("/")!==-1)throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(St.fromString(t));if(!Me.isDocumentKey(r))throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gE(n,new Me(r))}if(t instanceof on)return gE(n,t._key);throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${um(t)}.`)}function t1(n,e){if(!Array.isArray(n)||n.length===0)throw new Ee(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KN(n,e){const t=function(i,a){for(const c of i)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ee(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Z3{convertValue(e,t="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(So(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ro(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,i;const a=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[jf].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(c=>Xt(c.doubleValue));return new Ps(a)}convertGeoPoint(e){return new js(Xt(e.latitude),Xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=fm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){const t=To(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=St.fromString(e);xt(dN(r),9688,{name:e});const i=new ku(r.get(1),r.get(3)),a=new Me(r.popFirst(5));return i.isEqual(t)||pi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class lu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends qN{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Tm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ya._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:sn("string",ya._jsonSchemaVersion),bundleSource:sn("string","DocumentSnapshot"),bundleName:sn("string"),bundle:sn("string")};class of extends ya{data(e={}){return super.data(e)}}class xa{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new of(this._firestore,this._userDataWriter,r.key,r,new lu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(d=>{const f=new of(i._firestore,i._userDataWriter,d.doc.key,d.doc,new lu(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const f=new of(i._firestore,i._userDataWriter,d.doc.key,d.doc,new lu(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,g=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),g=c.indexOf(d.doc.key)),{type:t6(d.type),doc:f,oldIndex:m,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ny.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function t6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe(61501,{type:n})}}xa._jsonSchemaVersion="firestore/querySnapshot/1.0",xa._jsonSchema={type:sn("string",xa._jsonSchemaVersion),bundleSource:sn("string","QuerySnapshot"),bundleName:sn("string"),bundle:sn("string")};class ax extends Z3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,t)}}function xn(n){n=Cs(n,_i);const e=Cs(n.firestore,Ca),t=Jy(e),r=new ax(e);return WN(n._query),F3(t,n._query).then(i=>new xa(e,r,n,i))}function or(n,e,t,...r){n=Cs(n,on);const i=Cs(n.firestore,Ca),a=tx(i);let c;return c=typeof(e=ln(e))=="string"||e instanceof ld?G3(a,"updateDoc",n._key,e,t,r):K3(a,"updateDoc",n._key,e),lx(i,[c.toMutation(n._key,ns.exists(!0))])}function vi(n){return lx(Cs(n.firestore,Ca),[new Dy(n._key,ns.none())])}function Gn(n,e){const t=Cs(n.firestore,Ca),r=Ft(n),i=e6(n.converter,e);return lx(t,[H3(tx(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ns.exists(!1))]).then(()=>r)}function La(n,...e){var t,r,i;n=ln(n);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||ZE(e[c])||(a=e[c++]);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(ZE(e[c])){const v=e[c];e[c]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[c+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[c+2]=(i=v.complete)===null||i===void 0?void 0:i.bind(v)}let f,m,g;if(n instanceof on)m=Cs(n.firestore,Ca),g=ky(n._key.path),f={next:v=>{e[c]&&e[c](n6(m,n,v))},error:e[c+1],complete:e[c+2]};else{const v=Cs(n,_i);m=Cs(v.firestore,Ca),g=v._query;const y=new ax(m);f={next:T=>{e[c]&&e[c](new xa(m,y,v,T))},error:e[c+1],complete:e[c+2]},WN(n._query)}return function(y,T,N,_){const w=new LN(_),A=new CN(T,w,N);return y.asyncQueue.enqueueAndForget(async()=>SN(await Dv(y),A)),()=>{w.Ou(),y.asyncQueue.enqueueAndForget(async()=>NN(await Dv(y),A))}}(Jy(m),g,d,f)}function lx(n,e){return function(r,i){const a=new po;return r.asyncQueue.enqueueAndForget(async()=>N3(await M3(r),i,a)),a.promise}(Jy(n),e)}function n6(n,e,t){const r=t.docs.get(e._key),i=new ax(n);return new ya(n,i,e._key,r,new lu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){dc=i})(Pa),Ea(new Eo("firestore",(r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),d=new Ca(new YM(r.getProvider("auth-internal")),new ZM(c,r.getProvider("app-check-internal")),function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ee(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ku(m.options.projectId,g)}(c,i),c);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Ts(rE,sE,e),Ts(rE,sE,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="firebasestorage.googleapis.com",r6="storageBucket",s6=2*60*1e3,i6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Vs{constructor(e,t,r=0){super(Pg(e),`Firebase Storage: ${t} (${Pg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Us.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Pg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ds;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ds||(Ds={}));function Pg(n){return"storage/"+n}function o6(){const n="An unknown error occurred, please check the error payload for server response.";return new Us(Ds.UNKNOWN,n)}function a6(){return new Us(Ds.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function l6(){return new Us(Ds.CANCELED,"User canceled the upload/download.")}function c6(n){return new Us(Ds.INVALID_URL,"Invalid URL '"+n+"'.")}function u6(n){return new Us(Ds.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function n1(n){return new Us(Ds.INVALID_ARGUMENT,n)}function QN(){return new Us(Ds.APP_DELETED,"The Firebase app was deleted.")}function d6(n){return new Us(Ds.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ts.makeFromUrl(e,t)}catch{return new ts(e,"")}if(r.path==="")return r;throw u6(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(U){U.path.charAt(U.path.length-1)==="/"&&(U.path_=U.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+i+c,"i"),f={bucket:1,path:3};function m(U){U.path_=decodeURIComponent(U.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",T=new RegExp(`^https?://${v}/${g}/b/${i}/o${y}`,"i"),N={bucket:1,path:3},_=t===GN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",A=new RegExp(`^https?://${_}/${i}/${w}`,"i"),O=[{regex:d,indices:f,postModify:a},{regex:T,indices:N,postModify:m},{regex:A,indices:{bucket:1,path:2},postModify:m}];for(let U=0;U<O.length;U++){const $=O[U],W=$.regex.exec(e);if(W){const D=W[$.indices.bucket];let k=W[$.indices.path];k||(k=""),r=new ts(D,k),$.postModify(r);break}}if(r==null)throw c6(e);return r}}class h6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6(n,e,t){let r=1,i=null,a=null,c=!1,d=0;function f(){return d===2}let m=!1;function g(...w){m||(m=!0,e.apply(null,w))}function v(w){i=setTimeout(()=>{i=null,n(T,f())},w)}function y(){a&&clearTimeout(a)}function T(w,...A){if(m){y();return}if(w){y(),g.call(null,w,...A);return}if(f()||c){y(),g.call(null,w,...A);return}r<64&&(r*=2);let O;d===1?(d=2,O=0):O=(r+Math.random())*1e3,v(O)}let N=!1;function _(w){N||(N=!0,y(),!m&&(i!==null?(w||(d=2),clearTimeout(i),v(0)):w||(d=1)))}return v(0),a=setTimeout(()=>{c=!0,_(!0)},t),_}function m6(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(n){return n!==void 0}function r1(n,e,t,r){if(r<e)throw n1(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw n1(`Invalid value for '${n}'. Expected ${t} or less.`)}function g6(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Vf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Vf||(Vf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v6(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,t,r,i,a,c,d,f,m,g,v,y=!0,T=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=g,this.connectionFactory_=v,this.retry=y,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,_)=>{this.resolve_=N,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Uh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const d=a.getErrorCode()===Vf.NO_ERROR,f=a.getStatus();if(!d||v6(f,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===Vf.ABORT;r(!1,new Uh(!1,null,g));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new Uh(m,a))})},t=(r,i)=>{const a=this.resolve_,c=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());p6(f)?a(f):a()}catch(f){c(f)}else if(d!==null){const f=o6();f.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,f)):c(f)}else if(i.canceled){const f=this.appDelete_?QN():l6();c(f)}else{const f=a6();c(f)}};this.canceled_?t(!1,new Uh(!1,null,!0)):this.backoffId_=f6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&m6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Uh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function x6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function w6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function E6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function b6(n,e,t,r,i,a,c=!0,d=!1){const f=g6(n.urlParams),m=n.url+f,g=Object.assign({},n.headers);return _6(g,e),x6(g,t),w6(g,a),E6(g,r),new y6(m,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function S6(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this._service=e,t instanceof ts?this._location=t:this._location=ts.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Uf(e,t)}get root(){const e=new ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return S6(this._location.path)}get storage(){return this._service}get parent(){const e=T6(this._location.path);if(e===null)return null;const t=new ts(this._location.bucket,e);return new Uf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw d6(e)}}function s1(n,e){const t=e==null?void 0:e[r6];return t==null?null:ts.makeFromBucketSpec(t,n)}function N6(n,e,t,r={}){n.host=`${e}:${t}`;const i=ja(e);i&&(my(`https://${n.host}/b`),RT("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:sD(a,n.app.options.projectId))}class C6{constructor(e,t,r,i,a,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=GN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=s6,this._maxUploadRetryTime=i6,this._requests=new Set,i!=null?this._bucket=ts.makeFromBucketSpec(i,this._host):this._bucket=s1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ts.makeFromBucketSpec(this._url,e):this._bucket=s1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){r1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){r1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Uf(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new h6(QN());{const c=b6(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const i1="@firebase/storage",o1="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN="storage";function I6(n=LT(),e){n=ln(n);const r=im(n,YN).getImmediate({identifier:e}),i=nD("storage");return i&&A6(r,...i),r}function A6(n,e,t,r={}){N6(n,e,t,r)}function j6(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new C6(t,r,i,e,Pa)}function P6(){Ea(new Eo(YN,j6,"PUBLIC").setMultipleInstances(!0)),Ts(i1,o1,""),Ts(i1,o1,"esm2017")}P6();const R6={apiKey:"AIzaSyDUR89i6kvh3bp51GCgBX0fTwh3bFt1Ksg",authDomain:"medjust-d26eb.firebaseapp.com",projectId:"medjust-d26eb",storageBucket:"medjust-d26eb.appspot.com",messagingSenderId:"631362355665",appId:"1:631362355665:web:4d7f8eadba1bca0969e0f0"},cx=DT(R6),Rg=qM(cx),Je=U3(cx,{experimentalAutoDetectLongPolling:!0,useFetchStreams:!1});I6(cx);const XN=E.createContext(void 0);function ux(){const n=E.useContext(XN);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function k6({children:n}){const[e,t]=E.useState(null),[r,i]=E.useState(!0),[a,c]=E.useState(null),d=v=>new Promise(y=>setTimeout(y,v)),f=async(v,y)=>{if(typeof navigator<"u"&&!navigator.onLine){const w=new Error("No network connection (navigator offline)");throw console.error("Login pre-check failed:",w),c("No network connection - please connect to the internet"),w}const T=3;let N=0,_=null;for(;N<T;){N+=1;try{await A4(Rg,v,y),c(null);return}catch(w){if(_=w,console.error(`Login attempt ${N} failed:`,w),!((w==null?void 0:w.code)==="auth/network-request-failed"||(w==null?void 0:w.message)&&w.message.toLowerCase().includes("fetch")))throw(w==null?void 0:w.code)==="auth/wrong-password"||(w==null?void 0:w.code)==="auth/user-not-found"?c("Invalid email or password"):c("Authentication error - see console for details"),w;if(c(`Network error (attempt ${N} of ${T}) - checking connection...`),N<T){const I=500*Math.pow(2,N-1);console.log(`Retrying login in ${I}ms...`),await d(I);continue}}}throw console.error("Login failed after retries:",_),c("Network error - unable to reach Firebase. Check your internet connection, disabling browser extensions (adblockers), or ensure your site domain is added to Firebase Authentication -> Authorized domains."),_},m=async()=>{try{await k4(Rg),c(null)}catch(v){console.error("Logout error:",v),t(null)}};E.useEffect(()=>{const v=setTimeout(()=>{r&&(console.log("🔄 Auth taking too long - continuing without authentication"),i(!1))},5e3),y=R4(Rg,T=>{clearTimeout(v),t(T),i(!1),c(null)},T=>{clearTimeout(v),console.error("Auth state change error:",T),c("Authentication error - working offline"),i(!1)});return()=>{clearTimeout(v),y()}},[]);const g={currentUser:e,login:f,logout:m,loading:r,authError:a};return l.jsx(XN.Provider,{value:g,children:!r&&n})}const O6=Wu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ee=E.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},a)=>{const c=r?ql:"button";return l.jsx(c,{className:st(O6({variant:e,size:t,className:n})),ref:a,...i})});ee.displayName="Button";const ve=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:st("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));ve.displayName="Card";const We=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:st("flex flex-col space-y-1.5 p-6",n),...e}));We.displayName="CardHeader";const Ke=E.forwardRef(({className:n,...e},t)=>l.jsx("h3",{ref:t,className:st("text-2xl font-semibold leading-none tracking-tight",n),...e}));Ke.displayName="CardTitle";const Nt=E.forwardRef(({className:n,...e},t)=>l.jsx("p",{ref:t,className:st("text-sm text-muted-foreground",n),...e}));Nt.displayName="CardDescription";const ye=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:st("p-6 pt-0",n),...e}));ye.displayName="CardContent";const D6=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:st("flex items-center p-6 pt-0",n),...e}));D6.displayName="CardFooter";class L6 extends we.Component{constructor(t){super(t);j0(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.reload()});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),(t.message.includes("fetch")||t.message.includes("Firebase")||t.message.includes("Firestore"))&&console.log("🔄 Firebase error detected - this is a known connectivity issue"),this.setState({error:t,errorInfo:r})}render(){var t,r,i;if(this.state.hasError){const a=((t=this.state.error)==null?void 0:t.message.includes("fetch"))||((r=this.state.error)==null?void 0:r.message.includes("Firebase"))||((i=this.state.error)==null?void 0:i.message.includes("Firestore"));return l.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:l.jsxs(ve,{className:"max-w-md w-full",children:[l.jsx(We,{children:l.jsxs(Ke,{className:"flex items-center gap-2 text-destructive",children:[l.jsx(wP,{className:"h-5 w-5"}),a?"Connection Error":"Application Error"]})}),l.jsxs(ye,{className:"space-y-4",children:[l.jsx("p",{className:"text-muted-foreground",children:a?"There's a connectivity issue with Firebase services. The app will work in offline mode.":"Something went wrong. Please try refreshing the page."}),!1,l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(ee,{onClick:this.handleRetry,className:"flex-1",children:[l.jsx(vP,{className:"h-4 w-4 mr-2"}),"Retry"]}),l.jsx(ee,{variant:"outline",onClick:()=>window.location.href="/admin/years",className:"flex-1",children:"Go to Years"})]})]})]})})}return this.props.children}}var dx="Avatar",[M6,$9]=xi(dx),[F6,JN]=M6(dx),ZN=E.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[i,a]=E.useState("idle");return l.jsx(F6,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:l.jsx(Ge.span,{...r,ref:e})})});ZN.displayName=dx;var eC="AvatarImage",tC=E.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...a}=n,c=JN(eC,t),d=V6(r),f=fn(m=>{i(m),c.onImageLoadingStatusChange(m)});return Zt(()=>{d!=="idle"&&f(d)},[d,f]),d==="loaded"?l.jsx(Ge.img,{...a,ref:e,src:r}):null});tC.displayName=eC;var nC="AvatarFallback",rC=E.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...i}=n,a=JN(nC,t),[c,d]=E.useState(r===void 0);return E.useEffect(()=>{if(r!==void 0){const f=window.setTimeout(()=>d(!0),r);return()=>window.clearTimeout(f)}},[r]),c&&a.imageLoadingStatus!=="loaded"?l.jsx(Ge.span,{...i,ref:e}):null});rC.displayName=nC;function V6(n){const[e,t]=E.useState("idle");return Zt(()=>{if(!n){t("error");return}let r=!0;const i=new window.Image,a=c=>()=>{r&&t(c)};return t("loading"),i.onload=a("loaded"),i.onerror=a("error"),i.src=n,()=>{r=!1}},[n]),e}var sC=ZN,iC=tC,oC=rC;const Fu=E.forwardRef(({className:n,...e},t)=>l.jsx(sC,{ref:t,className:st("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));Fu.displayName=sC.displayName;const zf=E.forwardRef(({className:n,...e},t)=>l.jsx(iC,{ref:t,className:st("aspect-square h-full w-full",n),...e}));zf.displayName=iC.displayName;const Vu=E.forwardRef(({className:n,...e},t)=>l.jsx(oC,{ref:t,className:st("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));Vu.displayName=oC.displayName;const U6=[{icon:fP,label:"Dashboard",path:"/admin"},{icon:hf,label:"News",path:"/admin/news"},{icon:ci,label:"Years",path:"/admin/years"},{icon:wu,label:"Professors",path:"/admin/professors"},{icon:Zv,label:"Store",path:"/admin/store"},{icon:Rs,label:"Orders",path:"/admin/orders"},{icon:ui,label:"Research",path:"/admin/research"},{icon:xu,label:"Maps",path:"/admin/maps"},{icon:pb,label:"Settings",path:"/admin/settings"}];function z6({isOpen:n}){return l.jsx("div",{className:st("fixed left-0 top-16 h-[calc(100vh-4rem)] bg-card border-r transition-all duration-300 z-40",n?"w-64":"w-16"),children:l.jsx("nav",{className:"p-4 space-y-2",children:U6.map(e=>l.jsxs("div",{children:[l.jsxs(b_,{to:e.path,className:({isActive:t})=>st("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors","hover:bg-accent hover:text-accent-foreground",t&&"bg-primary text-primary-foreground hover:bg-primary/90",!n&&"justify-center"),children:[l.jsx(e.icon,{className:"h-5 w-5 flex-shrink-0"}),n&&l.jsx("span",{className:"font-medium",children:e.label})]}),e.children&&n&&l.jsx("div",{className:"ml-6 mt-2 space-y-1",children:e.children.map(t=>l.jsxs(b_,{to:t.path,className:({isActive:r})=>st("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm","hover:bg-accent hover:text-accent-foreground",r&&"bg-primary text-primary-foreground hover:bg-primary/90"),children:[l.jsx(t.icon,{className:"h-4 w-4 flex-shrink-0"}),l.jsx("span",{children:t.label})]},t.path))})]},e.path))})})}function B6(){var a;const[n,e]=E.useState(!0),{currentUser:t,logout:r}=ux(),i=async()=>{try{await r()}catch(c){console.error("Error logging out:",c)}};return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-card shadow-sm",children:l.jsxs("div",{className:"flex h-16 items-center px-4",children:[l.jsx(ee,{variant:"ghost",size:"icon",onClick:()=>e(!n),className:"mr-4",children:l.jsx(gP,{className:"h-5 w-5"})}),l.jsx("div",{className:"flex-1",children:l.jsx("h1",{className:"text-xl font-semibold text-primary",children:"MedJust Admin Dashboard"})}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Fu,{className:"h-8 w-8",children:l.jsx(Vu,{children:l.jsx(oo,{className:"h-4 w-4"})})}),l.jsx("span",{className:"text-sm font-medium",children:((a=t==null?void 0:t.email)==null?void 0:a.split("@")[0])||"Admin"})]}),l.jsx(ee,{variant:"ghost",size:"icon",onClick:i,className:"text-muted-foreground hover:text-destructive",children:l.jsx(pP,{className:"h-4 w-4"})})]})]})}),l.jsxs("div",{className:"flex",children:[l.jsx(z6,{isOpen:n}),l.jsx("main",{className:`flex-1 transition-all duration-300 ${n?"ml-64":"ml-16"}`,children:l.jsx("div",{className:"p-6",children:l.jsx(PO,{})})})]})]})}const Oe=E.forwardRef(({className:n,type:e,...t},r)=>l.jsx("input",{type:e,className:st("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Oe.displayName="Input";var $6="Label",aC=E.forwardRef((n,e)=>l.jsx(Ge.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));aC.displayName=$6;var lC=aC;const q6=Wu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ce=E.forwardRef(({className:n,...e},t)=>l.jsx(lC,{ref:t,className:st(q6(),n),...e}));Ce.displayName=lC.displayName;const W6=Wu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),cC=E.forwardRef(({className:n,variant:e,...t},r)=>l.jsx("div",{ref:r,role:"alert",className:st(W6({variant:e}),n),...t}));cC.displayName="Alert";const H6=E.forwardRef(({className:n,...e},t)=>l.jsx("h5",{ref:t,className:st("mb-1 font-medium leading-none tracking-tight",n),...e}));H6.displayName="AlertTitle";const uC=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:st("text-sm [&_p]:leading-relaxed",n),...e}));uC.displayName="AlertDescription";function K6(){const[n,e]=E.useState(""),[t,r]=E.useState(""),[i,a]=E.useState(""),[c,d]=E.useState(!1),{login:f,authError:m}=ux(),g=Qu(),v=async y=>{if(y.preventDefault(),!n||!t){a("Please fill in all fields");return}try{if(typeof navigator<"u"&&!navigator.onLine){a("No network connection. Please connect to the internet and try again.");return}a(""),d(!0),await f(n,t),g("/admin")}catch(T){console.error("Login error:",T),m?a(m):(T==null?void 0:T.code)==="auth/network-request-failed"?a("Network error - check your connection and try again."):(T==null?void 0:T.code)==="auth/wrong-password"||(T==null?void 0:T.code)==="auth/user-not-found"?a("Invalid email or password."):a("Failed to log in. Please check your credentials.")}finally{d(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/20 flex items-center justify-center p-4",children:l.jsxs(ve,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(We,{className:"space-y-1 text-center",children:[l.jsx("div",{className:"mx-auto w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-4",children:l.jsx(G0,{className:"h-6 w-6 text-primary-foreground"})}),l.jsx(Ke,{className:"text-2xl font-bold",children:"MedJust Admin"}),l.jsx(Nt,{children:"Sign in to access the admin dashboard"})]}),l.jsx(ye,{children:l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i&&l.jsx(cC,{variant:"destructive",children:l.jsx(uC,{children:i})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"email",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(df,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Oe,{id:"email",type:"email",placeholder:"MedAdmin@gmail.com",value:n,onChange:y=>e(y.target.value),className:"pl-10",required:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"password",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(G0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Oe,{id:"password",type:"password",placeholder:"••••••••",value:t,onChange:y=>r(y.target.value),className:"pl-10",required:!0})]})]}),l.jsx(ee,{type:"submit",className:"w-full",disabled:c,children:c?l.jsxs(l.Fragment,{children:[l.jsx(vo,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}const G6=Wu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function an({className:n,variant:e,...t}){return l.jsx("div",{className:st(G6({variant:e}),n),...t})}const Q6=[{id:"1",title:"Revolutionary Gene Therapy Shows Promise in Cancer Treatment",content:"Recent studies demonstrate significant progress in targeted gene therapy for various cancer types. This breakthrough research could change how we approach oncological treatments in the future.",authorName:"Dr. Sarah Johnson",authorId:"user1",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15"),tags:["oncology","gene-therapy","research"],isPinned:!0,viewsCount:1247,attachments:[],imageUrl:"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=300&h=200&fit=crop"},{id:"2",title:"Medical Education Technology Trends for 2024",content:"Exploring the latest innovations in medical education platforms, including VR simulations, AI-powered learning, and interactive case studies that are transforming how medical students learn.",authorName:"Prof. Michael Chen",authorId:"user2",createdAt:new Date("2024-01-14"),updatedAt:new Date("2024-01-14"),tags:["education","technology","trends"],isPinned:!1,viewsCount:892,attachments:[],imageUrl:"https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=300&h=200&fit=crop"},{id:"3",title:"New Guidelines for Emergency Medicine Protocols",content:"Updated protocols for emergency medical procedures and best practices have been released. These guidelines incorporate the latest research and improve patient care outcomes.",authorName:"Dr. Emily Rodriguez",authorId:"user3",createdAt:new Date("2024-01-13"),updatedAt:new Date("2024-01-13"),tags:["emergency","protocols","guidelines"],isPinned:!1,viewsCount:654,attachments:["protocol-guide.pdf"],imageUrl:"https://images.unsplash.com/photo-1551190822-a9333d879b1f?w=300&h=200&fit=crop"}];function hx(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null);return E.useEffect(()=>{const m=rs(dt(Je,"news"),Nm("updatedAt","desc")),g=La(m,v=>{const y=[];v.forEach(T=>{var _,w;const N=T.data();y.push({id:T.id,title:N.title||"",content:N.content||"",imageUrl:N.imageUrl||"",videoUrl:N.videoUrl||"",createdAt:((_=N.createdAt)==null?void 0:_.toDate())||new Date,updatedAt:((w=N.updatedAt)==null?void 0:w.toDate())||new Date,authorName:N.authorName||"",authorId:N.newsId||T.id,tags:N.tags||[],isPinned:N.isPinned||!1,viewsCount:N.viewsCount||0,attachments:N.attachments||[],yearId:N.yearId||"",yearNumber:N.yearNumber||void 0})}),e(y),r(!1)},v=>{console.error("Error fetching news:",v),console.log("Using mock data for news"),e(Q6),a(null),r(!1)});return()=>g()},[]),{news:n,loading:t,error:i,createNews:async m=>{try{await Gn(dt(Je,"news"),m)}catch(g){console.error("Error creating news:",g);const v={id:`mock_${Date.now()}`,...m,createdAt:new Date,updatedAt:new Date,viewsCount:0,attachments:m.attachments||[]};e(y=>[v,...y]),console.log("Added news to mock data:",v)}},updateNews:async(m,g)=>{try{await or(Ft(Je,"news",m),g)}catch(v){console.error("Error updating news:",v),e(y=>y.map(T=>T.id===m?{...T,...g,updatedAt:new Date}:T)),console.log("Updated news in mock data")}},deleteNews:async m=>{try{await vi(Ft(Je,"news",m))}catch(g){console.error("Error deleting news:",g),e(v=>v.filter(y=>y.id!==m)),console.log("Removed news from mock data")}}}}function dC(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null),[c,d]=E.useState(!1),f=[{id:"product1",productId:"product1",name:"Medical Textbook",description:"Comprehensive medical textbook for students",price:89.99,images:["https://example.com/book1.jpg"],categoryId:"books",createdAt:new Date},{id:"product2",productId:"product2",name:"Stethoscope",description:"Professional grade stethoscope",price:120,images:["https://example.com/stethoscope.jpg"],categoryId:"equipment",createdAt:new Date}];E.useEffect(()=>{(async()=>{const N=setTimeout(()=>{t&&!c&&(console.log("🔄 Firebase taking too long - switching to offline mode"),d(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(f))},3e3);try{console.log("🔄 Fetching products from Firebase...");const _=await xn(dt(Je,"products")),w=[];_.forEach(A=>{var O;const I=A.data();w.push({id:A.id,productId:I.productId||A.id,name:I.name||"",description:I.description||"",price:I.price||0,images:I.images||[],categoryId:I.categoryId||"",createdAt:((O=I.createdAt)==null?void 0:O.toDate())||new Date})}),clearTimeout(N),e(w.sort((A,I)=>I.createdAt.getTime()-A.createdAt.getTime())),r(!1),a(null),console.log("✅ Products loaded successfully:",w.length)}catch(_){clearTimeout(N),_.isFirebaseOfflineError?console.log("🔄 Firebase offline mode detected - using mock data"):console.error("Firebase error - switching to offline mode:",_.message),d(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(f)}})()},[]);const m=async T=>{if(c){const N={id:`product_${Date.now()}`,productId:`product_${Date.now()}`,...T,createdAt:new Date};e(_=>[N,..._]),console.log("✅ Added product to offline mode:",N.name);return}try{const N={name:T.name,description:T.description,price:T.price,images:T.images,categoryId:T.categoryId||"",createdAt:new Date,productId:""};console.log("📝 Creating new product:",N);const _=await Gn(dt(Je,"products"),N);await or(_,{productId:_.id}),console.log("✅ Created product with ID:",_.id),window.location.reload()}catch(N){console.error("Error creating product:",N),d(!0),await m(T)}};return{products:n,loading:t,error:i,isOfflineMode:c,createProduct:m,updateProduct:async(T,N)=>{if(c){e(_=>_.map(w=>w.id===T?{...w,...N}:w)),console.log("✅ Updated product in offline mode");return}try{const _=Ft(Je,"products",T);await or(_,N),console.log("✅ Updated product in Firebase:",T),window.location.reload()}catch(_){console.error("Error updating product:",_)}},deleteProduct:async T=>{if(c){e(N=>N.filter(_=>_.id!==T)),console.log("✅ Deleted product from offline mode");return}try{await vi(Ft(Je,"products",T)),console.log("✅ Deleted product from Firebase:",T),window.location.reload()}catch(N){console.error("Error deleting product:",N)}},retryConnection:()=>{console.log("🔄 Retrying Firebase connection..."),r(!0),a(null),d(!1),window.location.reload()}}}const Y6=[{id:"1",name:"Dr. Sarah Johnson",department:"Internal Medicine",email:"sarah.johnson@medjust.com",officeLocation:"Medical Building, Room 301",imageUrl:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=300&h=300&fit=crop&crop=face"},{id:"2",name:"Prof. Michael Chen",department:"Surgery",email:"michael.chen@medjust.com",officeLocation:"Surgical Wing, Room 205",imageUrl:"https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=300&h=300&fit=crop&crop=face"},{id:"3",name:"Dr. Emily Rodriguez",department:"Emergency Medicine",email:"emily.rodriguez@medjust.com",officeLocation:"Emergency Department, Office 12",imageUrl:"https://images.unsplash.com/photo-1594824928909-90ad1d93d7c3?w=300&h=300&fit=crop&crop=face"}];function hC(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null),[c,d]=E.useState(!1);E.useEffect(()=>{const v=async()=>{try{const T=rs(dt(Je,"professors"));await xn(T);const N=rs(dt(Je,"professors"),Nm("name","asc"));return La(N,w=>{const A=[];w.forEach(I=>{const O=I.data();A.push({id:I.id,name:O.name||"",title:O.title||"",department:O.department||"",email:O.email||"",phone:O.phone||"",officeLocation:O.officeLocation||"",bio:O.bio||"",researchAreas:O.researchAreas||[],website:O.website||"",linkedin:O.linkedin||"",imageUrl:O.imageUrl||""})}),e(A),r(!1)},w=>{console.error("Error in Firebase listener:",w),y()})}catch(T){return console.error("Firebase connection failed:",T),y(),null}},y=()=>{console.log("🔄 Switching to offline mode with mock data"),d(!0),e(Y6),a(null),r(!1)};v()},[]);const f=async v=>{if(c){const y={id:`offline_${Date.now()}`,...v};e(T=>[...T,y]),console.log("✅ Added professor in offline mode:",y.name);return}try{await Gn(dt(Je,"professors"),{...v,professorId:`prof_${Date.now()}`}),console.log("✅ Added professor to Firebase:",v.name)}catch(y){console.error("Error creating professor:",y),d(!0),await f(v)}};return{professors:n,loading:t,error:i,createProfessor:f,updateProfessor:async(v,y)=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(T=>T.map(N=>N.id===v?{...N,...y}:N)),console.log("✅ Updated professor in offline mode");return}try{await or(Ft(Je,"professors",v),y),console.log("✅ Updated professor in Firebase")}catch(T){console.error("Error updating professor:",T),e(N=>N.map(_=>_.id===v?{..._,...y}:_)),console.log("✅ Updated professor locally (Firebase failed)")}},deleteProfessor:async v=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(y=>y.filter(T=>T.id!==v)),console.log("✅ Deleted professor in offline mode");return}try{await vi(Ft(Je,"professors",v)),console.log("✅ Deleted professor from Firebase")}catch(y){console.error("Error deleting professor:",y),e(T=>T.filter(N=>N.id!==v)),console.log("✅ Deleted professor locally (Firebase failed)")}},isOfflineMode:c}}function ud(){const[n,e]=E.useState([]),[t,r]=E.useState([]),[i,a]=E.useState(!0),[c,d]=E.useState(null),[f,m]=E.useState(!1),[g,v]=E.useState(1),[y,T]=E.useState("connecting"),N=()=>{console.log("🔄 Activating offline mode immediately"),m(!0),T("offline"),a(!1),d(null),e([{id:"offline_year1",yearNumber:1,type:"basic",batchName:"",subjects:[]},{id:"offline_year2",yearNumber:2,type:"basic",batchName:"",subjects:[]},{id:"offline_year3",yearNumber:3,type:"basic",batchName:"",subjects:[]},{id:"offline_year4",yearNumber:4,type:"clinical",batchName:"",subjects:[]},{id:"offline_year5",yearNumber:5,type:"clinical",batchName:"",subjects:[]},{id:"offline_year6",yearNumber:6,type:"clinical",batchName:"",subjects:[]}]),r([])};E.useEffect(()=>{},[]),E.useEffect(()=>{(async()=>{var P;if(!navigator.onLine){console.log("🚫 No internet connection detected - activating offline mode"),N();return}T("connecting"),a(!0);try{console.log("🔄 Attempting Firebase connection...");const F=await xn(dt(Je,"years"));let M=[];F.empty||F.forEach(re=>{const ae=re.data();let K=ae.order||1;if(ae.name){const ne=ae.name.match(/\d+/);ne&&(K=parseInt(ne[0]))}M.push({id:re.id,yearNumber:K,type:K<=3?"basic":"clinical",batchName:ae.batch_name||ae.batchName||"",imageUrl:ae.imageUrl||"",academicSupervisor:ae.acadmic_supervisor||ae.academic_supervisor||"",actor:ae.actor||"",groupUrl:ae.group_url||ae.groupUrl||"",subjects:[]})});const L=await xn(dt(Je,"Subjects")),J=[];for(const re of L.docs){const ae=re.data(),K=await xn(dt(re.ref,"lectures")),ne=[];for(const ce of K.docs){const B=ce.data(),X=await xn(dt(ce.ref,"videos")),he=[];X.forEach(_e=>{var De;const Te=_e.data();he.push({id:_e.id,title:Te.title||Te.name||"",url:Te.url||"",thumbnailUrl:Te.thumbnailUrl||"",description:Te.description||"",uploadedAt:((De=Te.uploadedAt)==null?void 0:De.toDate())||new Date})});const Ie=await xn(dt(ce.ref,"files")),Le=[];Ie.forEach(_e=>{var De;const Te=_e.data();Le.push({id:_e.id,title:Te.title||Te.name||"",url:Te.url||"",description:Te.description||"",uploadedAt:((De=Te.uploadedAt)==null?void 0:De.toDate())||new Date})});const Ae=await xn(dt(ce.ref,"quizzes")),ge=[];Ae.forEach(_e=>{const Te=_e.data();ge.push({id:_e.id,title:Te.title||Te.name||"",description:Te.description||"",duration:Te.duration||30,passRate:Te.passRate||70,questions:Te.questions||[]})}),ne.push({id:ce.id,name:B.name||B.title||"",description:B.description||"",subjectId:re.id,order:B.order||1,imageUrl:B.imageUrl||"",createdAt:((P=B.createdAt)==null?void 0:P.toDate())||new Date,uploadedBy:B.uploadedBy||"Unknown",videos:he,files:Le,quizzes:ge})}J.push({id:re.id,name:ae.name||"",subjectId:ae.subjectId||re.id,yearId:ae.yearId||"",imageUrl:ae.imageUrl||"",lectures:ne.sort((ce,B)=>ce.order-B.order)})}const ie=M.map(re=>({...re,subjects:J.filter(ae=>ae.yearId===re.id).sort((ae,K)=>ae.name.localeCompare(K.name))}));e(ie.sort((re,ae)=>re.yearNumber-ae.yearNumber)),r(ie.flatMap(re=>re.subjects)),a(!1),m(!1),T("connected"),d(null),console.log("✅ Firebase data loaded successfully");try{if(navigator.onLine)for(const re of F.docs){const ae=re.data(),K=Ft(Je,"years",re.id),ne={};if(ae.imageUrl===void 0&&(ne.imageUrl=""),ae.batch_name===void 0&&ae.batchName===void 0&&(ne.batch_name=""),Object.keys(ne).length>0)try{await or(K,ne),console.log(`🔄 Set missing fields for year ${re.id}:`,ne)}catch(ce){console.warn(`Failed to set defaults for ${re.id}:`,ce)}}}catch(re){console.warn("Could not ensure imageUrl fields:",re)}}catch{console.log("❌ Firebase connection failed - staying in offline mode"),N()}})()},[g]);const _=()=>{console.log("🔄 Retrying Firebase connection..."),a(!0),d(null),m(!1),T("connecting"),v(j=>j+1)},w=async(j,P)=>{if(j){if(f||!navigator.onLine){e(F=>F.map(M=>M.id===j?{...M,...P}:M));return}try{const F=Ft(Je,"years",j);await or(F,{...P,updatedAt:new Date}),v(M=>M+1)}catch(F){console.error("Error updating year:",F),e(M=>M.map(L=>L.id===j?{...L,...P}:L))}}},A=async(j,P=3)=>{for(let F=0;F<P;F++)try{return await j()}catch(M){if(console.log(`Attempt ${F+1} failed:`,M.message),F===P-1)throw M;await new Promise(L=>setTimeout(L,1e3*(F+1)))}},I=async j=>{if(f||!navigator.onLine){const P={id:`subject_${Date.now()}`,name:j.name,subjectId:`subject_${Date.now()}`,yearId:j.yearId,imageUrl:j.imageUrl||"",lectures:[]};r(F=>[...F,P]),e(F=>F.map(M=>M.id===j.yearId?{...M,subjects:[...M.subjects,P]}:M)),console.log("✅ Added subject to offline mode:",P.name);return}try{console.log("🔄 Creating subject with data:",j),await A(async()=>{const P="7RpQaRoWKFLKiPA7A9Aq",F=Ft(Je,"Subjects",P);await or(F,{name:j.name,imageUrl:j.imageUrl||"",hours:j.hours||3,yearId:j.yearId,subjectId:P,updatedAt:new Date}),console.log("✅ Updated existing subject document:",P);const M=dt(F,"lectures");if((await xn(M)).empty){const ie=await Gn(M,{name:"Sample Lecture",title:"Sample Lecture",description:"",imageUrl:"",order:1,uploadedBy:"System",createdAt:new Date,lectureId:""});await or(ie,{lectureId:ie.id});const re=["videos","files","quizzes"];for(const ae of re){const K=dt(ie,ae);let ne={};ae==="videos"?ne={title:"Sample Video",description:"",thumbnailUrl:"",url:"",uploadedAt:new Date,videoId:""}:ae==="files"?ne={title:"Sample File",description:"",url:"",uploadedAt:new Date,fileId:""}:ae==="quizzes"&&(ne={title:"Sample Quiz",description:"",duration:30,passRate:70,questions:[],quizId:""});const ce=await Gn(K,ne),B=`${ae.slice(0,-1)}Id`;await or(ce,{[B]:ce.id})}console.log("✅ Created complete lecture structure for subject:",P)}v(J=>J+1)})}catch(P){console.error("Error creating subject:",P),m(!0),await I(j)}},O=async j=>{if(f){const P={id:`lecture_${Date.now()}`,...j};r(F=>F.map(M=>M.id===j.subjectId?{...M,lectures:[...M.lectures,P]}:M)),e(F=>F.map(M=>({...M,subjects:M.subjects.map(L=>L.id===j.subjectId?{...L,lectures:[...L.lectures,P]}:L)}))),console.log("✅ Added lecture to offline mode:",P.name);return}try{await A(async()=>{const P=Ft(Je,"Subjects",j.subjectId),F=dt(P,"lectures"),M={title:j.name,description:j.description||"",imageUrl:j.imageUrl||"",order:j.order||1,uploadedBy:j.uploadedBy||"Current User",createdAt:new Date,lectureId:""};console.log("📝 Creating lecture in subcollection:",M);const L=await Gn(F,M);await or(L,{lectureId:L.id}),console.log("✅ Created lecture document with ID:",L.id),console.log("📁 Path: /Subjects/"+j.subjectId+"/lectures/"+L.id),v(J=>J+1)})}catch(P){console.error("Error creating lecture:",P),m(!0),await O(j)}};return{years:n,subjects:t,loading:i,error:c,isOfflineMode:f,connectionStatus:y,retryConnection:_,updateYear:w,createSubject:I,createLecture:O,deleteLecture:async(j,P)=>{if(f){r(F=>F.map(M=>M.id===j?{...M,lectures:M.lectures.filter(L=>L.id!==P)}:M)),e(F=>F.map(M=>({...M,subjects:M.subjects.map(L=>L.id===j?{...L,lectures:L.lectures.filter(J=>J.id!==P)}:L)}))),console.log("✅ Deleted lecture from offline mode");return}try{const F=Ft(Je,"Subjects",j),M=Ft(F,"lectures",P);await vi(M),console.log("✅ Deleted lecture from Firebase"),v(L=>L+1)}catch(F){console.error("Error deleting lecture:",F)}},deleteSubject:async j=>{if(j){if(f){r(P=>P.filter(F=>F.id!==j)),e(P=>P.map(F=>({...F,subjects:F.subjects.filter(M=>M.id!==j)}))),console.log("✅ Deleted subject in offline mode");return}try{const P=Ft(Je,"Subjects",j);await vi(P),console.log("✅ Deleted subject from Firebase"),v(F=>F+1)}catch(P){console.error("Error deleting subject:",P)}}},addVideo:async(j,P,F)=>{if(!(!j||!P)){if(f){e(M=>M.map(L=>({...L,subjects:L.subjects.map(J=>J.id===j?{...J,lectures:J.lectures.map(ie=>ie.id===P?{...ie,videos:[...ie.videos||[],{id:`video_${Date.now()}`,title:F.title,url:F.url,thumbnailUrl:F.thumbnailUrl||"",description:F.description||"",uploadedAt:new Date}]}:ie)}:J)})));return}try{const M=Ft(Je,"Subjects",j,"lectures",P);await Gn(dt(M,"videos"),{title:F.title,description:F.description||"",url:F.url,duration:F.duration||"",thumbnailUrl:F.thumbnailUrl||"",platform:F.platform||"",uploadedAt:new Date,uploadedBy:"Current User"}),v(L=>L+1)}catch(M){console.error("Error adding video:",M)}}},addFile:async(j,P,F)=>{if(!(!j||!P)){if(f){e(M=>M.map(L=>({...L,subjects:L.subjects.map(J=>J.id===j?{...J,lectures:J.lectures.map(ie=>ie.id===P?{...ie,files:[...ie.files||[],{id:`file_${Date.now()}`,title:F.title,url:F.fileUrl,description:F.description||"",uploadedAt:new Date}]}:ie)}:J)})));return}try{const M=Ft(Je,"Subjects",j,"lectures",P);await Gn(dt(M,"files"),{title:F.title,description:F.description||"",url:F.fileUrl,fileType:F.fileType||"",fileSize:F.fileSize||"",uploadedAt:new Date,uploadedBy:"Current User"}),v(L=>L+1)}catch(M){console.error("Error adding file:",M)}}},addQuiz:async(j,P,F)=>{if(!(!j||!P)){if(f){e(M=>M.map(L=>({...L,subjects:L.subjects.map(J=>J.id===j?{...J,lectures:J.lectures.map(ie=>ie.id===P?{...ie,quizzes:[...ie.quizzes||[],{id:`quiz_${Date.now()}`,title:F.title,description:F.description||"",duration:F.timeLimit||30,passRate:F.passingScore||70,questions:F.questions||[]}]}:ie)}:J)})));return}try{const M=Ft(Je,"Subjects",j,"lectures",P);await Gn(dt(M,"quizzes"),{title:F.title,description:F.description||"",duration:F.timeLimit||30,passRate:F.passingScore||70,questions:F.questions||[],createdAt:new Date,uploadedBy:"Current User"}),v(L=>L+1)}catch(M){console.error("Error adding quiz:",M)}}}}}const X6=[{id:1,type:"news",title:"New cardiology study published",time:"2 hours ago",author:"Dr. Smith"},{id:2,type:"video",title:"Anatomy lecture uploaded",time:"4 hours ago",author:"Prof. Johnson"},{id:3,type:"quiz",title:"Pharmacology quiz created",time:"6 hours ago",author:"Dr. Brown"},{id:4,type:"product",title:"New stethoscope added to store",time:"1 day ago",author:"Admin"}];function J6(){const{news:n,loading:e}=hx(),{products:t,loading:r}=dC(),{professors:i,loading:a}=hC(),{years:c,loading:d}=ud(),f=n.length,m=i.length,g=t.reduce((T,N)=>T+(N.price||0),0);c.reduce((T,N)=>T+N.subjects.reduce((_,w)=>_+w.lectures.reduce((A,I)=>{var O;return A+(((O=I.videos)==null?void 0:O.length)||0)},0),0),0);const v=c.reduce((T,N)=>{var _;return T+(((_=N.subjects)==null?void 0:_.length)||0)},0),y=[{title:"Total News Articles",value:e?"...":String(f),change:"+12%",icon:hf,color:"text-blue-600"},{title:"Subjects",value:d?"...":String(v),change:"+5%",icon:ci,color:"text-green-600"},{title:"Active Professors",value:a?"...":String(m),change:"+2%",icon:wu,color:"text-purple-600"},{title:"Store Revenue",value:r?"...":`$${g.toLocaleString()}`,change:"+18%",icon:hb,color:"text-emerald-600"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),l.jsx("p",{className:"text-muted-foreground",children:"Welcome to the MedJust Admin Dashboard"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:y.map(T=>l.jsxs(ve,{children:[l.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Ke,{className:"text-sm font-medium",children:T.title}),l.jsx(T.icon,{className:`h-4 w-4 ${T.color}`})]}),l.jsxs(ye,{children:[l.jsx("div",{className:"text-2xl font-bold",children:T.value}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[l.jsxs(an,{variant:"secondary",className:"text-green-600",children:[l.jsx(xP,{className:"h-3 w-3 mr-1"}),T.change]}),l.jsx("span",{className:"text-muted-foreground",children:"from last month"})]})]})]},T.title))}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Recent Activity"}),l.jsx(Nt,{children:"Latest updates across all modules"})]}),l.jsx(ye,{children:l.jsx("div",{className:"space-y-4",children:X6.map(T=>l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium",children:T.title}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[l.jsx("span",{children:T.author}),l.jsx("span",{children:"•"}),l.jsx("span",{children:T.time})]})]})]},T.id))})})]}),l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Quick Actions"}),l.jsx(Nt,{children:"Common administrative tasks"})]}),l.jsx(ye,{children:l.jsxs("div",{className:"grid gap-2",children:[l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(hf,{className:"h-5 w-5 text-blue-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Create News Article"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Publish new content"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(bs,{className:"h-5 w-5 text-green-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Upload Video"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Add learning resource"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(wu,{className:"h-5 w-5 text-purple-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Professor"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Register new faculty"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(Zv,{className:"h-5 w-5 text-emerald-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Product"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Expand store catalog"})]})]})]})})]})]})]})}const yi=E.forwardRef(({className:n,...e},t)=>l.jsx("textarea",{className:st("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));yi.displayName="Textarea";function fC(n){const e=E.useRef({value:n,previous:n});return E.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var fx="Switch",[Z6,q9]=xi(fx),[eU,tU]=Z6(fx),mC=E.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:i,defaultChecked:a,required:c,disabled:d,value:f="on",onCheckedChange:m,...g}=n,[v,y]=E.useState(null),T=Et(e,I=>y(I)),N=E.useRef(!1),_=v?!!v.closest("form"):!0,[w=!1,A]=Wl({prop:i,defaultProp:a,onChange:m});return l.jsxs(eU,{scope:t,checked:w,disabled:d,children:[l.jsx(Ge.button,{type:"button",role:"switch","aria-checked":w,"aria-required":c,"data-state":vC(w),"data-disabled":d?"":void 0,disabled:d,value:f,...g,ref:T,onClick:ze(n.onClick,I=>{A(O=>!O),_&&(N.current=I.isPropagationStopped(),N.current||I.stopPropagation())})}),_&&l.jsx(nU,{control:v,bubbles:!N.current,name:r,value:f,checked:w,required:c,disabled:d,style:{transform:"translateX(-100%)"}})]})});mC.displayName=fx;var pC="SwitchThumb",gC=E.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,i=tU(pC,t);return l.jsx(Ge.span,{"data-state":vC(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});gC.displayName=pC;var nU=n=>{const{control:e,checked:t,bubbles:r=!0,...i}=n,a=E.useRef(null),c=fC(t),d=Vb(e);return E.useEffect(()=>{const f=a.current,m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==t&&v){const y=new Event("click",{bubbles:r});v.call(f,t),f.dispatchEvent(y)}},[c,t,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:a,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function vC(n){return n?"checked":"unchecked"}var yC=mC,rU=gC;const xC=E.forwardRef(({className:n,...e},t)=>l.jsx(yC,{className:st("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:l.jsx(rU,{className:st("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));xC.displayName=yC.displayName;function sU({news:n,onClose:e,onSave:t}){var w;const{years:r}=ud(),[i,a]=E.useState(null),[c,d]=E.useState({title:"",content:"",imageUrl:"",videoUrl:"",tags:[],isPinned:!1,attachments:[],yearId:"",subjectId:""}),[f,m]=E.useState(""),[g,v]=E.useState(!1);E.useEffect(()=>{n&&d({title:n.title||"",content:n.content||"",imageUrl:n.imageUrl||"",videoUrl:n.videoUrl||"",tags:n.tags||[],isPinned:n.isPinned||!1,attachments:n.attachments||[],yearId:n.yearId||"",subjectId:n.subjectId||""})},[n]),E.useEffect(()=>{let A=!0;return(async()=>{try{if(r&&r.length>0||i)return;const O=await xn(dt(Je,"years")),U=[];O.forEach($=>{const W=$.data();let D=W.order||1;if(W.name){const k=String(W.name).match(/\d+/);k&&(D=parseInt(k[0]))}U.push({id:$.id,yearNumber:D,type:D<=3?"basic":"clinical",subjects:W.subjects||[]})}),A&&U.length>0&&a(U)}catch{}})(),()=>{A=!1}},[r,i]);const y=async A=>{A.preventDefault(),v(!0);try{const I={...c,yearNumber:void 0,updatedAt:new Date,...n?{}:{createdAt:new Date,authorName:"Current User",authorId:"current-user-id",viewsCount:0}};if(c.yearId){const O=r.find(U=>U.id===c.yearId);O&&(I.yearNumber=O.yearNumber)}c.subjectId&&(I.subjectId=c.subjectId),t(I)}catch(I){console.error("Error saving news:",I)}finally{v(!1)}},T=()=>{f.trim()&&!c.tags.includes(f.trim())&&(d(A=>({...A,tags:[...A.tags,f.trim()]})),m(""))},N=A=>{d(I=>({...I,tags:I.tags.filter(O=>O!==A)}))},_=A=>{A.key==="Enter"&&(A.preventDefault(),T())};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ee,{variant:"ghost",onClick:e,children:[l.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Article":"Create Article"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the news article details":"Create a new news article for medical students"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(xC,{id:"pinned",checked:c.isPinned,onCheckedChange:A=>d(I=>({...I,isPinned:A}))}),l.jsxs(Ce,{htmlFor:"pinned",className:"flex items-center gap-2",children:[l.jsx(mb,{className:"h-4 w-4"}),"Pin Article"]})]})})]}),l.jsx("form",{onSubmit:y,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Article Content"}),l.jsx(Nt,{children:"Main article information and content"})]}),l.jsxs(ye,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"title",children:"Title *"}),l.jsx(Oe,{id:"title",placeholder:"Enter article title...",value:c.title,onChange:A=>d(I=>({...I,title:A.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"content",children:"Content *"}),l.jsx(yi,{id:"content",placeholder:"Write your article content here...",value:c.content,onChange:A=>d(I=>({...I,content:A.target.value})),rows:12,required:!0})]})]})]}),l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Tags"}),l.jsx(Nt,{children:"Add relevant tags to help categorize this article"})]}),l.jsxs(ye,{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Oe,{placeholder:"Add a tag...",value:f,onChange:A=>m(A.target.value),onKeyPress:_}),l.jsxs(ee,{type:"button",onClick:T,variant:"outline",children:[l.jsx(hu,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.tags.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(A=>l.jsxs(an,{variant:"secondary",className:"flex items-center gap-1",children:[A,l.jsx("button",{type:"button",onClick:()=>N(A),className:"ml-1 hover:text-destructive",children:l.jsx(_u,{className:"h-3 w-3"})})]},A))})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Media"}),l.jsx(Nt,{children:"Add images and videos to your article"})]}),l.jsxs(ye,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"imageUrl",children:"Featured Image URL"}),l.jsx(Oe,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:A=>d(I=>({...I,imageUrl:A.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"videoUrl",children:"Video URL"}),l.jsx(Oe,{id:"videoUrl",placeholder:"https://youtube.com/watch?v=...",value:c.videoUrl,onChange:A=>d(I=>({...I,videoUrl:A.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"yearId",children:"Related Year"}),l.jsxs("select",{id:"yearId",value:c.yearId,onChange:A=>d(I=>({...I,yearId:A.target.value,subjectId:""})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific year --"}),(i&&i.length>0?i:r)&&(i&&i.length>0?i:r).length>0?(i&&i.length>0?i:r).map(A=>l.jsx("option",{value:A.id,children:`Year ${A.yearNumber}`},A.id)):l.jsx("option",{value:"",children:"No years available"})]})]}),c.yearId&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Ce,{htmlFor:"subjectId",children:"Related Subject"}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected year id: ",l.jsx("span",{className:"font-mono ml-2",children:c.yearId})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{id:"subjectId",value:c.subjectId,onChange:A=>d(I=>({...I,subjectId:A.target.value})),className:"flex-1 border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific subject --"}),(((w=(i&&i.length>0?i:r).find(A=>A.id===c.yearId))==null?void 0:w.subjects)||[]).map(A=>l.jsx("option",{value:A.id,children:A.name},A.id))]}),l.jsx(ee,{type:"button",variant:"outline",size:"sm",onClick:()=>{var A;(A=navigator.clipboard)==null||A.writeText(c.yearId||""),alert("Year id copied")},children:"Copy ID"})]})]}),c.imageUrl&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{children:"Preview"}),l.jsx("img",{src:c.imageUrl,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border",onError:A=>{A.currentTarget.style.display="none"}})]})]})]}),l.jsxs(ve,{children:[l.jsx(We,{children:l.jsx(Ke,{children:"Actions"})}),l.jsxs(ye,{className:"space-y-4",children:[l.jsxs(ee,{type:"submit",className:"w-full",disabled:g,children:[l.jsx(Ao,{className:"h-4 w-4 mr-2"}),g?"Saving...":n?"Update Article":"Create Article"]}),l.jsx(ee,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Cancel"})]})]})]})]})})]})}function iU(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[i,a]=E.useState(!1),[c,d]=E.useState("all"),{news:f,loading:m,error:g,createNews:v,updateNews:y,deleteNews:T}=hx(),N=f.filter(I=>I.title.toLowerCase().includes(n.toLowerCase())||I.tags.some(O=>O.toLowerCase().includes(n.toLowerCase()))),_=I=>{r(I),a(!0)},w=async I=>{if(window.confirm("Are you sure you want to delete this article?"))try{await T(I)}catch(O){console.error("Error deleting news:",O),alert("Failed to delete article. Please try again.")}},A=()=>{r(null),a(!0)};return i?l.jsx(sU,{news:t,onClose:()=>{a(!1),r(null)},onSave:async I=>{try{t?await y(t.id,I):await v(I),a(!1),r(null)}catch(O){console.error("Error saving news:",O),alert("Failed to save article. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"News Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Create and manage news articles for medical students"})]}),l.jsxs(ee,{onClick:A,className:"flex items-center gap-2",children:[l.jsx(Jt,{className:"h-4 w-4"}),"Create Article"]})]}),l.jsx(ve,{children:l.jsx(ye,{className:"pt-6",children:l.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:l.jsxs("div",{className:"relative flex-1",children:[l.jsx(rc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Oe,{placeholder:"Search articles by title or tags...",value:n,onChange:I=>e(I.target.value),className:"pl-10"})]})})})}),m&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(vo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading news articles..."})]})}),g&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"⚠️ Error loading news"}),l.jsx("p",{className:"text-muted-foreground",children:g})]})}),!m&&!g&&l.jsx("div",{className:"space-y-4",children:N.map(I=>l.jsx(ve,{className:"hover:shadow-md transition-shadow",children:l.jsx(ye,{className:"pt-6",children:l.jsxs("div",{className:"flex gap-4",children:[I.imageUrl&&l.jsx("img",{src:I.imageUrl,alt:I.title,className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:I.title}),I.isPinned&&l.jsx(mb,{className:"h-4 w-4 text-yellow-500"})]}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:I.content}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:I.tags.map(O=>l.jsxs(an,{variant:"secondary",className:"text-xs",children:[l.jsx(hu,{className:"h-3 w-3 mr-1"}),O]},O))}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(oo,{className:"h-3 w-3"}),I.authorName]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ub,{className:"h-3 w-3"}),I.createdAt.toLocaleDateString()]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(hP,{className:"h-3 w-3"}),I.viewsCount," views"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(ee,{variant:"ghost",size:"icon",onClick:()=>_(I),children:l.jsx(Hu,{className:"h-4 w-4"})}),l.jsx(ee,{variant:"ghost",size:"icon",onClick:()=>w(I.id),className:"text-destructive hover:text-destructive",children:l.jsx(Mn,{className:"h-4 w-4"})})]})]})})]})})},I.id))}),!m&&!g&&N.length===0&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(hf,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No articles match your search criteria.":"Start by creating your first news article."}),l.jsxs(ee,{onClick:A,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Create Article"]})]})})]})}var oU=E.createContext(void 0);function mx(n){const e=E.useContext(oU);return n||e||"ltr"}var kg="rovingFocusGroup.onEntryFocus",aU={bubbles:!1,cancelable:!0},Cm="RovingFocusGroup",[Mv,wC,lU]=Kv(Cm),[cU,_C]=xi(Cm,[lU]),[uU,dU]=cU(Cm),EC=E.forwardRef((n,e)=>l.jsx(Mv.Provider,{scope:n.__scopeRovingFocusGroup,children:l.jsx(Mv.Slot,{scope:n.__scopeRovingFocusGroup,children:l.jsx(hU,{...n,ref:e})})}));EC.displayName=Cm;var hU=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:f,onEntryFocus:m,preventScrollOnEntryFocus:g=!1,...v}=n,y=E.useRef(null),T=Et(e,y),N=mx(a),[_=null,w]=Wl({prop:c,defaultProp:d,onChange:f}),[A,I]=E.useState(!1),O=fn(m),U=wC(t),$=E.useRef(!1),[W,D]=E.useState(0);return E.useEffect(()=>{const k=y.current;if(k)return k.addEventListener(kg,O),()=>k.removeEventListener(kg,O)},[O]),l.jsx(uU,{scope:t,orientation:r,dir:N,loop:i,currentTabStopId:_,onItemFocus:E.useCallback(k=>w(k),[w]),onItemShiftTab:E.useCallback(()=>I(!0),[]),onFocusableItemAdd:E.useCallback(()=>D(k=>k+1),[]),onFocusableItemRemove:E.useCallback(()=>D(k=>k-1),[]),children:l.jsx(Ge.div,{tabIndex:A||W===0?-1:0,"data-orientation":r,...v,ref:T,style:{outline:"none",...n.style},onMouseDown:ze(n.onMouseDown,()=>{$.current=!0}),onFocus:ze(n.onFocus,k=>{const j=!$.current;if(k.target===k.currentTarget&&j&&!A){const P=new CustomEvent(kg,aU);if(k.currentTarget.dispatchEvent(P),!P.defaultPrevented){const F=U().filter(re=>re.focusable),M=F.find(re=>re.active),L=F.find(re=>re.id===_),ie=[M,L,...F].filter(Boolean).map(re=>re.ref.current);SC(ie,g)}}$.current=!1}),onBlur:ze(n.onBlur,()=>I(!1))})})}),bC="RovingFocusGroupItem",TC=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:a,...c}=n,d=Ku(),f=a||d,m=dU(bC,t),g=m.currentTabStopId===f,v=wC(t),{onFocusableItemAdd:y,onFocusableItemRemove:T}=m;return E.useEffect(()=>{if(r)return y(),()=>T()},[r,y,T]),l.jsx(Mv.ItemSlot,{scope:t,id:f,focusable:r,active:i,children:l.jsx(Ge.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:ze(n.onMouseDown,N=>{r?m.onItemFocus(f):N.preventDefault()}),onFocus:ze(n.onFocus,()=>m.onItemFocus(f)),onKeyDown:ze(n.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){m.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const _=pU(N,m.orientation,m.dir);if(_!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let A=v().filter(I=>I.focusable).map(I=>I.ref.current);if(_==="last")A.reverse();else if(_==="prev"||_==="next"){_==="prev"&&A.reverse();const I=A.indexOf(N.currentTarget);A=m.loop?gU(A,I+1):A.slice(I+1)}setTimeout(()=>SC(A))}})})})});TC.displayName=bC;var fU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function mU(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function pU(n,e,t){const r=mU(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return fU[r]}function SC(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function gU(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var vU=EC,yU=TC,px="Tabs",[xU,W9]=xi(px,[_C]),NC=_C(),[wU,gx]=xU(px),CC=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:i,defaultValue:a,orientation:c="horizontal",dir:d,activationMode:f="automatic",...m}=n,g=mx(d),[v,y]=Wl({prop:r,onChange:i,defaultProp:a});return l.jsx(wU,{scope:t,baseId:Ku(),value:v,onValueChange:y,orientation:c,dir:g,activationMode:f,children:l.jsx(Ge.div,{dir:g,"data-orientation":c,...m,ref:e})})});CC.displayName=px;var IC="TabsList",AC=E.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...i}=n,a=gx(IC,t),c=NC(t);return l.jsx(vU,{asChild:!0,...c,orientation:a.orientation,dir:a.dir,loop:r,children:l.jsx(Ge.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});AC.displayName=IC;var jC="TabsTrigger",PC=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:i=!1,...a}=n,c=gx(jC,t),d=NC(t),f=OC(c.baseId,r),m=DC(c.baseId,r),g=r===c.value;return l.jsx(yU,{asChild:!0,...d,focusable:!i,active:g,children:l.jsx(Ge.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":m,"data-state":g?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:f,...a,ref:e,onMouseDown:ze(n.onMouseDown,v=>{!i&&v.button===0&&v.ctrlKey===!1?c.onValueChange(r):v.preventDefault()}),onKeyDown:ze(n.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&c.onValueChange(r)}),onFocus:ze(n.onFocus,()=>{const v=c.activationMode!=="manual";!g&&!i&&v&&c.onValueChange(r)})})})});PC.displayName=jC;var RC="TabsContent",kC=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:i,children:a,...c}=n,d=gx(RC,t),f=OC(d.baseId,r),m=DC(d.baseId,r),g=r===d.value,v=E.useRef(g);return E.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),l.jsx(Qv,{present:i||g,children:({present:y})=>l.jsx(Ge.div,{"data-state":g?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":f,hidden:!y,id:m,tabIndex:0,...c,ref:e,style:{...n.style,animationDuration:v.current?"0s":void 0},children:y&&a})})});kC.displayName=RC;function OC(n,e){return`${n}-trigger-${e}`}function DC(n,e){return`${n}-content-${e}`}var _U=CC,LC=AC,MC=PC,FC=kC;const VC=_U,vx=E.forwardRef(({className:n,...e},t)=>l.jsx(LC,{ref:t,className:st("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));vx.displayName=LC.displayName;const Uu=E.forwardRef(({className:n,...e},t)=>l.jsx(MC,{ref:t,className:st("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));Uu.displayName=MC.displayName;const zu=E.forwardRef(({className:n,...e},t)=>l.jsx(FC,{ref:t,className:st("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));zu.displayName=FC.displayName;function UC({quiz:n,onClose:e,onSave:t}){const[r,i]=E.useState({title:"",description:"",timeLimit:30,passingScore:70,questions:[]}),[a,c]=E.useState({question:"",options:["","","",""],correctAnswer:0,imageUrl:"",weight:1}),[d,f]=E.useState(!1);E.useEffect(()=>{n&&i({title:n.title||"",description:n.description||"",timeLimit:n.timeLimit||30,passingScore:n.passingScore||70,questions:n.questions||[],type:n.type||"multiple_choice"})},[n]);const m=async _=>{_.preventDefault(),f(!0);try{const w={...r,...n?{}:{createdAt:new Date,createdBy:"Current User"}};w.type||(w.type="multiple_choice"),t(w)}catch(w){console.error("Error saving quiz:",w)}finally{f(!1)}},g=()=>{var A;const _=r.type==="flashcard",w=a.question.trim();if(_){const I=a.options&&String(a.options[0]).trim()||a.answer;if(w&&I){const O={...a,options:[String(((A=a.options)==null?void 0:A[0])||a.answer||"").trim()],correctAnswer:0};i(U=>({...U,questions:[...U.questions,O]})),c({question:"",options:[""],correctAnswer:0,imageUrl:"",weight:1})}return}w&&Array.isArray(a.options)&&a.options.filter(I=>String(I).trim()).length>=2&&typeof a.correctAnswer=="number"&&String(a.options[a.correctAnswer]||"").trim()&&(i(I=>({...I,questions:[...I.questions,{...a}]})),c({question:"",options:["","","",""],correctAnswer:0,imageUrl:"",weight:1}))},v=_=>{i(w=>({...w,questions:w.questions.filter((A,I)=>I!==_)}))},y=(_,w)=>{const A=[...a.options||[]];A[_]=w,c(I=>({...I,options:A}))},T=()=>{c(_=>({..._,options:[..._.options||[],""]}))},N=_=>{c(w=>{const A=[...w.options||[]];A.splice(_,1);let I=w.correctAnswer;return I>=A.length&&(I=Math.max(0,A.length-1)),{...w,options:A,correctAnswer:I}})};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ee,{variant:"ghost",onClick:e,children:[l.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Quiz":"Create Quiz"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the quiz details and questions":"Create a new quiz for students"})]})]})}),l.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsxs(Ke,{className:"flex items-center gap-2",children:[l.jsx(ui,{className:"h-5 w-5"}),"Quiz Information"]}),l.jsx(Nt,{children:"Basic information about the quiz"})]}),l.jsxs(ye,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"title",children:"Quiz Title *"}),l.jsx(Oe,{id:"title",placeholder:"Enter quiz title...",value:r.title,onChange:_=>i(w=>({...w,title:_.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"description",children:"Description"}),l.jsx(yi,{id:"description",placeholder:"Describe what this quiz covers...",value:r.description,onChange:_=>i(w=>({...w,description:_.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Ce,{htmlFor:"timeLimit",className:"flex items-center gap-2",children:[l.jsx(uf,{className:"h-4 w-4"}),"Time Limit (minutes)"]}),l.jsx(Oe,{id:"timeLimit",type:"number",min:"1",value:r.timeLimit,onChange:_=>i(w=>({...w,timeLimit:parseInt(_.target.value)||30}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Ce,{htmlFor:"passingScore",className:"flex items-center gap-2",children:[l.jsx(yP,{className:"h-4 w-4"}),"Passing Score (%)"]}),l.jsx(Oe,{id:"passingScore",type:"number",min:"0",max:"100",value:r.passingScore,onChange:_=>i(w=>({...w,passingScore:parseInt(_.target.value)||70}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"quizType",children:"Quiz Type"}),l.jsxs("select",{id:"quizType",value:r.type||"multiple_choice",onChange:_=>i(w=>({...w,type:_.target.value})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),l.jsx("option",{value:"flashcard",children:"Flashcard"})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how this quiz will be presented to students."})]})]})]}),l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Add Question"}),l.jsx(Nt,{children:"Create multiple choice questions for the quiz"})]}),l.jsxs(ye,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"question",children:"Question"}),l.jsx(yi,{id:"question",placeholder:"Enter your question...",value:a.question,onChange:_=>c(w=>({...w,question:_.target.value})),rows:3})]}),l.jsx("div",{className:"space-y-2",children:r.type==="flashcard"?l.jsxs(l.Fragment,{children:[l.jsx(Ce,{children:"Correct Answer"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Oe,{placeholder:"Correct answer",value:a.options[0]??a.answer??"",onChange:_=>{c(w=>({...w,options:[_.target.value]}))}}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"For flashcards enter the correct answer (single). Use [[answer]] in the question to create blanks."})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(Ce,{children:"Answer Options"}),l.jsxs("div",{className:"space-y-2",children:[a.options.map((_,w)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l.jsx(Ce,{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-sm",children:String.fromCharCode(65+w)}),l.jsx(Oe,{placeholder:`Option ${String.fromCharCode(65+w)}`,value:_,onChange:A=>y(w,A.target.value),className:a.correctAnswer===w?"ring-2 ring-green-500":""})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ee,{type:"button",variant:a.correctAnswer===w?"default":"outline",size:"sm",onClick:()=>c(A=>({...A,correctAnswer:w})),children:a.correctAnswer===w?"Correct":"Mark Correct"}),a.options.length>2&&l.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(w),children:"Remove"})]})]},w)),l.jsx("div",{children:l.jsx(ee,{type:"button",variant:"outline",onClick:T,className:"mt-2",children:"Add Option"})})]})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(Oe,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:_=>c(w=>({...w,imageUrl:_.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"weight",children:"Question Weight"}),l.jsx(Oe,{id:"weight",type:"number",min:1,value:a.weight,onChange:_=>c(w=>({...w,weight:parseFloat(_.target.value)||1}))})]}),l.jsxs(ee,{type:"button",onClick:g,className:"w-full",children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),r.questions.length>0&&l.jsxs(ve,{children:[l.jsx(We,{children:l.jsxs(Ke,{children:["Quiz Questions (",r.questions.length,")"]})}),l.jsx(ye,{children:l.jsx("div",{className:"space-y-4",children:r.questions.map((_,w)=>l.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("p",{className:"font-medium",children:[w+1,". ",_.question]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ce,{className:"text-sm",children:"Weight"}),l.jsx(Oe,{type:"number",min:1,value:_.weight||1,onChange:A=>{const I=parseFloat(A.target.value)||1;i(O=>({...O,questions:O.questions.map((U,$)=>$===w?{...U,weight:I}:U)}))},className:"w-20 text-sm"})]})]}),l.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:_.options.map((A,I)=>l.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${_.correctAnswer===I?"bg-green-100 text-green-800":"bg-secondary/50"}`,children:[l.jsx("span",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+I)}),l.jsx("span",{className:"text-sm",children:A}),_.correctAnswer===I&&l.jsx(an,{variant:"outline",className:"ml-auto text-xs bg-green-200",children:"Correct"})]},I))})]}),l.jsx("div",{className:"flex flex-col items-end gap-2",children:l.jsx(ee,{type:"button",variant:"ghost",size:"icon",onClick:()=>v(w),className:"text-destructive hover:text-destructive",children:l.jsx(Mn,{className:"h-4 w-4"})})})]})},w))})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ee,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(ee,{type:"submit",disabled:d||r.questions.length===0,children:[l.jsx(Ao,{className:"h-4 w-4 mr-2"}),d?"Saving...":n?"Update Quiz":"Create Quiz"]})]})]})]})}function zC({year:n,yearType:e,onClose:t,onSave:r}){const[i,a]=E.useState({name:"",imageUrl:"",hours:3}),[c,d]=E.useState(!1),f=async m=>{m.preventDefault(),d(!0);try{const g={name:i.name,imageUrl:i.imageUrl||"",hours:i.hours||3,createdAt:new Date};r(g)}catch(g){console.error("Error saving subject:",g)}finally{d(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ee,{variant:"ghost",onClick:t,children:[l.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Add Subject to Year ",n]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e==="basic"?l.jsx(ga,{className:"h-4 w-4 text-blue-600"}):l.jsx(va,{className:"h-4 w-4 text-red-600"}),l.jsxs("p",{className:"text-muted-foreground",children:["Adding to ",e==="basic"?"Basic":"Clinical"," Years • Year ",n]})]})]})]})}),l.jsxs("form",{onSubmit:f,className:"space-y-6",children:[l.jsx(ve,{className:`border-l-4 ${e==="basic"?"border-l-blue-500 bg-blue-50/50":"border-l-red-500 bg-red-50/50"}`,children:l.jsx(ye,{className:"pt-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[e==="basic"?l.jsx(ga,{className:"h-8 w-8 text-blue-600"}):l.jsx(va,{className:"h-8 w-8 text-red-600"}),l.jsxs("div",{children:[l.jsxs("h3",{className:"font-semibold text-lg",children:["Year ",n]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:e==="basic"?"Basic Years":"Clinical Years"})]})]})})}),l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsxs(Ke,{className:"flex items-center gap-2",children:[e==="basic"?l.jsx(ga,{className:"h-5 w-5 text-blue-600"}):l.jsx(va,{className:"h-5 w-5 text-red-600"}),"Subject Information"]}),l.jsx(Nt,{children:"Basic information about the subject"})]}),l.jsx(ye,{className:"space-y-4",children:l.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"year",children:"Year"}),l.jsx(Oe,{id:"year",value:`Year ${n} (${e==="basic"?"Basic":"Clinical"})`,disabled:!0,className:"bg-muted"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"name",children:"Subject Name *"}),l.jsx(Oe,{id:"name",placeholder:"e.g., Anatomy & Physiology",value:i.name,onChange:m=>a(g=>({...g,name:m.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"hours",children:"Credit Hours"}),l.jsx(Oe,{id:"hours",type:"number",placeholder:"3",value:i.hours,onChange:m=>a(g=>({...g,hours:parseInt(m.target.value)||3})),min:"1",max:"12"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(Oe,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:i.imageUrl,onChange:m=>a(g=>({...g,imageUrl:m.target.value}))})]})]})})]}),i.name&&l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Preview"}),l.jsxs(Nt,{children:["How the subject will appear in Year ",n]})]}),l.jsx(ye,{children:l.jsxs("div",{className:"p-4 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.imageUrl?l.jsx("img",{src:i.imageUrl,alt:i.name,className:"w-8 h-8 object-cover rounded",onError:m=>{m.currentTarget.style.display="none"}}):l.jsx(ci,{className:"h-5 w-5 text-primary"}),l.jsx("h3",{className:"font-semibold text-lg",children:i.name})]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Year ",n," • ",e," years"]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ee,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),l.jsxs(ee,{type:"submit",disabled:c,children:[l.jsx(Ao,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Subject"]})]})]})]})}function a1(n,[e,t]){return Math.min(t,Math.max(e,n))}var EU="DismissableLayer",Fv="dismissableLayer.update",bU="dismissableLayer.pointerDownOutside",TU="dismissableLayer.focusOutside",l1,BC=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$C=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:c,onDismiss:d,...f}=n,m=E.useContext(BC),[g,v]=E.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,T]=E.useState({}),N=Et(e,D=>v(D)),_=Array.from(m.layers),[w]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),A=_.indexOf(w),I=g?_.indexOf(g):-1,O=m.layersWithOutsidePointerEventsDisabled.size>0,U=I>=A,$=CU(D=>{const k=D.target,j=[...m.branches].some(P=>P.contains(k));!U||j||(i==null||i(D),c==null||c(D),D.defaultPrevented||d==null||d())},y),W=IU(D=>{const k=D.target;[...m.branches].some(P=>P.contains(k))||(a==null||a(D),c==null||c(D),D.defaultPrevented||d==null||d())},y);return Gv(D=>{I===m.layers.size-1&&(r==null||r(D),!D.defaultPrevented&&d&&(D.preventDefault(),d()))},y),E.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(l1=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),c1(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=l1)}},[g,y,t,m]),E.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),c1())},[g,m]),E.useEffect(()=>{const D=()=>T({});return document.addEventListener(Fv,D),()=>document.removeEventListener(Fv,D)},[]),l.jsx(Ge.div,{...f,ref:N,style:{pointerEvents:O?U?"auto":"none":void 0,...n.style},onFocusCapture:ze(n.onFocusCapture,W.onFocusCapture),onBlurCapture:ze(n.onBlurCapture,W.onBlurCapture),onPointerDownCapture:ze(n.onPointerDownCapture,$.onPointerDownCapture)})});$C.displayName=EU;var SU="DismissableLayerBranch",NU=E.forwardRef((n,e)=>{const t=E.useContext(BC),r=E.useRef(null),i=Et(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(Ge.div,{...n,ref:i})});NU.displayName=SU;function CU(n,e=globalThis==null?void 0:globalThis.document){const t=fn(n),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const a=d=>{if(d.target&&!r.current){let f=function(){qC(bU,t,m,{discrete:!0})};const m={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=f,e.addEventListener("click",i.current,{once:!0})):f()}else e.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function IU(n,e=globalThis==null?void 0:globalThis.document){const t=fn(n),r=E.useRef(!1);return E.useEffect(()=>{const i=a=>{a.target&&!r.current&&qC(TU,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function c1(){const n=new CustomEvent(Fv);document.dispatchEvent(n)}function qC(n,e,t,{discrete:r}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?qf(i,a):i.dispatchEvent(a)}var Og=0;function AU(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??u1()),document.body.insertAdjacentElement("beforeend",n[1]??u1()),Og++,()=>{Og===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Og--}},[])}function u1(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",n}var Dg="focusScope.autoFocusOnMount",Lg="focusScope.autoFocusOnUnmount",d1={bubbles:!1,cancelable:!0},jU="FocusScope",WC=E.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...c}=n,[d,f]=E.useState(null),m=fn(i),g=fn(a),v=E.useRef(null),y=Et(e,_=>f(_)),T=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let _=function(O){if(T.paused||!d)return;const U=O.target;d.contains(U)?v.current=U:Yi(v.current,{select:!0})},w=function(O){if(T.paused||!d)return;const U=O.relatedTarget;U!==null&&(d.contains(U)||Yi(v.current,{select:!0}))},A=function(O){if(document.activeElement===document.body)for(const $ of O)$.removedNodes.length>0&&Yi(d)};document.addEventListener("focusin",_),document.addEventListener("focusout",w);const I=new MutationObserver(A);return d&&I.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",w),I.disconnect()}}},[r,d,T.paused]),E.useEffect(()=>{if(d){f1.add(T);const _=document.activeElement;if(!d.contains(_)){const A=new CustomEvent(Dg,d1);d.addEventListener(Dg,m),d.dispatchEvent(A),A.defaultPrevented||(PU(LU(HC(d)),{select:!0}),document.activeElement===_&&Yi(d))}return()=>{d.removeEventListener(Dg,m),setTimeout(()=>{const A=new CustomEvent(Lg,d1);d.addEventListener(Lg,g),d.dispatchEvent(A),A.defaultPrevented||Yi(_??document.body,{select:!0}),d.removeEventListener(Lg,g),f1.remove(T)},0)}}},[d,m,g,T]);const N=E.useCallback(_=>{if(!t&&!r||T.paused)return;const w=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,A=document.activeElement;if(w&&A){const I=_.currentTarget,[O,U]=RU(I);O&&U?!_.shiftKey&&A===U?(_.preventDefault(),t&&Yi(O,{select:!0})):_.shiftKey&&A===O&&(_.preventDefault(),t&&Yi(U,{select:!0})):A===I&&_.preventDefault()}},[t,r,T.paused]);return l.jsx(Ge.div,{tabIndex:-1,...c,ref:y,onKeyDown:N})});WC.displayName=jU;function PU(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Yi(r,{select:e}),document.activeElement!==t)return}function RU(n){const e=HC(n),t=h1(e,n),r=h1(e.reverse(),n);return[t,r]}function HC(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function h1(n,e){for(const t of n)if(!kU(t,{upTo:e}))return t}function kU(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function OU(n){return n instanceof HTMLInputElement&&"select"in n}function Yi(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&OU(n)&&e&&n.select()}}var f1=DU();function DU(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=m1(n,e),n.unshift(e)},remove(e){var t;n=m1(n,e),(t=n[0])==null||t.resume()}}}function m1(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function LU(n){return n.filter(e=>e.tagName!=="A")}var MU="Portal",KC=E.forwardRef((n,e)=>{var d;const{container:t,...r}=n,[i,a]=E.useState(!1);Zt(()=>a(!0),[]);const c=t||i&&((d=globalThis==null?void 0:globalThis.document)==null?void 0:d.body);return c?Hv.createPortal(l.jsx(Ge.div,{...r,ref:e}),c):null});KC.displayName=MU;var FU=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},_l=new WeakMap,zh=new WeakMap,Bh={},Mg=0,GC=function(n){return n&&(n.host||GC(n.parentNode))},VU=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=GC(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},UU=function(n,e,t,r){var i=VU(e,Array.isArray(n)?n:[n]);Bh[t]||(Bh[t]=new WeakMap);var a=Bh[t],c=[],d=new Set,f=new Set(i),m=function(v){!v||d.has(v)||(d.add(v),m(v.parentNode))};i.forEach(m);var g=function(v){!v||f.has(v)||Array.prototype.forEach.call(v.children,function(y){if(d.has(y))g(y);else try{var T=y.getAttribute(r),N=T!==null&&T!=="false",_=(_l.get(y)||0)+1,w=(a.get(y)||0)+1;_l.set(y,_),a.set(y,w),c.push(y),_===1&&N&&zh.set(y,!0),w===1&&y.setAttribute(t,"true"),N||y.setAttribute(r,"true")}catch(A){console.error("aria-hidden: cannot operate on ",y,A)}})};return g(e),d.clear(),Mg++,function(){c.forEach(function(v){var y=_l.get(v)-1,T=a.get(v)-1;_l.set(v,y),a.set(v,T),y||(zh.has(v)||v.removeAttribute(r),zh.delete(v)),T||v.removeAttribute(t)}),Mg--,Mg||(_l=new WeakMap,_l=new WeakMap,zh=new WeakMap,Bh={})}},zU=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=FU(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),UU(r,i,t,"aria-hidden")):function(){return null}},af="right-scroll-bar-position",lf="width-before-scroll-bar",BU="with-scroll-bars-hidden",$U="--removed-body-scroll-bar-size";function Fg(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function qU(n,e){var t=E.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var WU=typeof window<"u"?E.useLayoutEffect:E.useEffect,p1=new WeakMap;function HU(n,e){var t=qU(null,function(r){return n.forEach(function(i){return Fg(i,r)})});return WU(function(){var r=p1.get(t);if(r){var i=new Set(r),a=new Set(n),c=t.current;i.forEach(function(d){a.has(d)||Fg(d,null)}),a.forEach(function(d){i.has(d)||Fg(d,c)})}p1.set(t,n)},[n]),t}function KU(n){return n}function GU(n,e){e===void 0&&(e=KU);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var c=e(a,r);return t.push(c),function(){t=t.filter(function(d){return d!==c})}},assignSyncMedium:function(a){for(r=!0;t.length;){var c=t;t=[],c.forEach(a)}t={push:function(d){return a(d)},filter:function(){return t}}},assignMedium:function(a){r=!0;var c=[];if(t.length){var d=t;t=[],d.forEach(a),c=t}var f=function(){var g=c;c=[],g.forEach(a)},m=function(){return Promise.resolve().then(f)};m(),t={push:function(g){c.push(g),m()},filter:function(g){return c=c.filter(g),t}}}};return i}function QU(n){n===void 0&&(n={});var e=GU(null);return e.options=Es({async:!0,ssr:!1},n),e}var QC=function(n){var e=n.sideCar,t=Zu(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,Es({},t))};QC.isSideCarExport=!0;function YU(n,e){return n.useMedium(e),QC}var YC=QU(),Vg=function(){},Im=E.forwardRef(function(n,e){var t=E.useRef(null),r=E.useState({onScrollCapture:Vg,onWheelCapture:Vg,onTouchMoveCapture:Vg}),i=r[0],a=r[1],c=n.forwardProps,d=n.children,f=n.className,m=n.removeScrollBar,g=n.enabled,v=n.shards,y=n.sideCar,T=n.noIsolation,N=n.inert,_=n.allowPinchZoom,w=n.as,A=w===void 0?"div":w,I=n.gapMode,O=Zu(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),U=y,$=HU([t,e]),W=Es(Es({},O),i);return E.createElement(E.Fragment,null,g&&E.createElement(U,{sideCar:YC,removeScrollBar:m,shards:v,noIsolation:T,inert:N,setCallbacks:a,allowPinchZoom:!!_,lockRef:t,gapMode:I}),c?E.cloneElement(E.Children.only(d),Es(Es({},W),{ref:$})):E.createElement(A,Es({},W,{className:f,ref:$}),d))});Im.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Im.classNames={fullWidth:lf,zeroRight:af};var XU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function JU(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=XU();return e&&n.setAttribute("nonce",e),n}function ZU(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function e5(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var t5=function(){var n=0,e=null;return{add:function(t){n==0&&(e=JU())&&(ZU(e,t),e5(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},n5=function(){var n=t5();return function(e,t){E.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},XC=function(){var n=n5(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},r5={left:0,top:0,right:0,gap:0},Ug=function(n){return parseInt(n||"",10)||0},s5=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[Ug(t),Ug(r),Ug(i)]},i5=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return r5;var e=s5(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},o5=XC(),Dl="data-scroll-locked",a5=function(n,e,t,r){var i=n.left,a=n.top,c=n.right,d=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(BU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(d,"px ").concat(r,`;
  }
  body[`).concat(Dl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(d,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(af,` {
    right: `).concat(d,"px ").concat(r,`;
  }
  
  .`).concat(lf,` {
    margin-right: `).concat(d,"px ").concat(r,`;
  }
  
  .`).concat(af," .").concat(af,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(lf," .").concat(lf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Dl,`] {
    `).concat($U,": ").concat(d,`px;
  }
`)},g1=function(){var n=parseInt(document.body.getAttribute(Dl)||"0",10);return isFinite(n)?n:0},l5=function(){E.useEffect(function(){return document.body.setAttribute(Dl,(g1()+1).toString()),function(){var n=g1()-1;n<=0?document.body.removeAttribute(Dl):document.body.setAttribute(Dl,n.toString())}},[])},c5=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;l5();var a=E.useMemo(function(){return i5(i)},[i]);return E.createElement(o5,{styles:a5(a,!e,i,t?"":"!important")})},Vv=!1;if(typeof window<"u")try{var $h=Object.defineProperty({},"passive",{get:function(){return Vv=!0,!0}});window.addEventListener("test",$h,$h),window.removeEventListener("test",$h,$h)}catch{Vv=!1}var El=Vv?{passive:!1}:!1,u5=function(n){return n.tagName==="TEXTAREA"},JC=function(n,e){var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!u5(n)&&t[e]==="visible")},d5=function(n){return JC(n,"overflowY")},h5=function(n){return JC(n,"overflowX")},v1=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=ZC(n,r);if(i){var a=eI(n,r),c=a[1],d=a[2];if(c>d)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},f5=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},m5=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},ZC=function(n,e){return n==="v"?d5(e):h5(e)},eI=function(n,e){return n==="v"?f5(e):m5(e)},p5=function(n,e){return n==="h"&&e==="rtl"?-1:1},g5=function(n,e,t,r,i){var a=p5(n,window.getComputedStyle(e).direction),c=a*r,d=t.target,f=e.contains(d),m=!1,g=c>0,v=0,y=0;do{var T=eI(n,d),N=T[0],_=T[1],w=T[2],A=_-w-a*N;(N||A)&&ZC(n,d)&&(v+=A,y+=N),d instanceof ShadowRoot?d=d.host:d=d.parentNode}while(!f&&d!==document.body||f&&(e.contains(d)||e===d));return(g&&Math.abs(v)<1||!g&&Math.abs(y)<1)&&(m=!0),m},qh=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},y1=function(n){return[n.deltaX,n.deltaY]},x1=function(n){return n&&"current"in n?n.current:n},v5=function(n,e){return n[0]===e[0]&&n[1]===e[1]},y5=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},x5=0,bl=[];function w5(n){var e=E.useRef([]),t=E.useRef([0,0]),r=E.useRef(),i=E.useState(x5++)[0],a=E.useState(XC)[0],c=E.useRef(n);E.useEffect(function(){c.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var _=PL([n.lockRef.current],(n.shards||[]).map(x1),!0).filter(Boolean);return _.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),_.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var d=E.useCallback(function(_,w){if("touches"in _&&_.touches.length===2)return!c.current.allowPinchZoom;var A=qh(_),I=t.current,O="deltaX"in _?_.deltaX:I[0]-A[0],U="deltaY"in _?_.deltaY:I[1]-A[1],$,W=_.target,D=Math.abs(O)>Math.abs(U)?"h":"v";if("touches"in _&&D==="h"&&W.type==="range")return!1;var k=v1(D,W);if(!k)return!0;if(k?$=D:($=D==="v"?"h":"v",k=v1(D,W)),!k)return!1;if(!r.current&&"changedTouches"in _&&(O||U)&&(r.current=$),!$)return!0;var j=r.current||$;return g5(j,w,_,j==="h"?O:U)},[]),f=E.useCallback(function(_){var w=_;if(!(!bl.length||bl[bl.length-1]!==a)){var A="deltaY"in w?y1(w):qh(w),I=e.current.filter(function($){return $.name===w.type&&($.target===w.target||w.target===$.shadowParent)&&v5($.delta,A)})[0];if(I&&I.should){w.cancelable&&w.preventDefault();return}if(!I){var O=(c.current.shards||[]).map(x1).filter(Boolean).filter(function($){return $.contains(w.target)}),U=O.length>0?d(w,O[0]):!c.current.noIsolation;U&&w.cancelable&&w.preventDefault()}}},[]),m=E.useCallback(function(_,w,A,I){var O={name:_,delta:w,target:A,should:I,shadowParent:_5(A)};e.current.push(O),setTimeout(function(){e.current=e.current.filter(function(U){return U!==O})},1)},[]),g=E.useCallback(function(_){t.current=qh(_),r.current=void 0},[]),v=E.useCallback(function(_){m(_.type,y1(_),_.target,d(_,n.lockRef.current))},[]),y=E.useCallback(function(_){m(_.type,qh(_),_.target,d(_,n.lockRef.current))},[]);E.useEffect(function(){return bl.push(a),n.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:y}),document.addEventListener("wheel",f,El),document.addEventListener("touchmove",f,El),document.addEventListener("touchstart",g,El),function(){bl=bl.filter(function(_){return _!==a}),document.removeEventListener("wheel",f,El),document.removeEventListener("touchmove",f,El),document.removeEventListener("touchstart",g,El)}},[]);var T=n.removeScrollBar,N=n.inert;return E.createElement(E.Fragment,null,N?E.createElement(a,{styles:y5(i)}):null,T?E.createElement(c5,{gapMode:n.gapMode}):null)}function _5(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const E5=YU(YC,w5);var tI=E.forwardRef(function(n,e){return E.createElement(Im,Es({},n,{ref:e,sideCar:E5}))});tI.classNames=Im.classNames;var b5=[" ","Enter","ArrowUp","ArrowDown"],T5=[" ","Enter"],dd="Select",[Am,jm,S5]=Kv(dd),[pc,H9]=xi(dd,[S5,Yf]),Pm=Yf(),[N5,Oo]=pc(dd),[C5,I5]=pc(dd),nI=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:a,value:c,defaultValue:d,onValueChange:f,dir:m,name:g,autoComplete:v,disabled:y,required:T}=n,N=Pm(e),[_,w]=E.useState(null),[A,I]=E.useState(null),[O,U]=E.useState(!1),$=mx(m),[W=!1,D]=Wl({prop:r,defaultProp:i,onChange:a}),[k,j]=Wl({prop:c,defaultProp:d,onChange:f}),P=E.useRef(null),F=_?!!_.closest("form"):!0,[M,L]=E.useState(new Set),J=Array.from(M).map(ie=>ie.props.value).join(";");return l.jsx(Y2,{...N,children:l.jsxs(N5,{required:T,scope:e,trigger:_,onTriggerChange:w,valueNode:A,onValueNodeChange:I,valueNodeHasChildren:O,onValueNodeHasChildrenChange:U,contentId:Ku(),value:k,onValueChange:j,open:W,onOpenChange:D,dir:$,triggerPointerDownPosRef:P,disabled:y,children:[l.jsx(Am.Provider,{scope:e,children:l.jsx(C5,{scope:n.__scopeSelect,onNativeOptionAdd:E.useCallback(ie=>{L(re=>new Set(re).add(ie))},[]),onNativeOptionRemove:E.useCallback(ie=>{L(re=>{const ae=new Set(re);return ae.delete(ie),ae})},[]),children:t})}),F?l.jsxs(CI,{"aria-hidden":!0,required:T,tabIndex:-1,name:g,autoComplete:v,value:k,onChange:ie=>j(ie.target.value),disabled:y,children:[k===void 0?l.jsx("option",{value:""}):null,Array.from(M)]},J):null]})})};nI.displayName=dd;var rI="SelectTrigger",sI=E.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,a=Pm(t),c=Oo(rI,t),d=c.disabled||r,f=Et(e,c.onTriggerChange),m=jm(t),[g,v,y]=II(N=>{const _=m().filter(I=>!I.disabled),w=_.find(I=>I.value===c.value),A=AI(_,N,w);A!==void 0&&c.onValueChange(A.value)}),T=()=>{d||(c.onOpenChange(!0),y())};return l.jsx(Qb,{asChild:!0,...a,children:l.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:d,"data-disabled":d?"":void 0,"data-placeholder":NI(c.value)?"":void 0,...i,ref:f,onClick:ze(i.onClick,N=>{N.currentTarget.focus()}),onPointerDown:ze(i.onPointerDown,N=>{const _=N.target;_.hasPointerCapture(N.pointerId)&&_.releasePointerCapture(N.pointerId),N.button===0&&N.ctrlKey===!1&&(T(),c.triggerPointerDownPosRef.current={x:Math.round(N.pageX),y:Math.round(N.pageY)},N.preventDefault())}),onKeyDown:ze(i.onKeyDown,N=>{const _=g.current!=="";!(N.ctrlKey||N.altKey||N.metaKey)&&N.key.length===1&&v(N.key),!(_&&N.key===" ")&&b5.includes(N.key)&&(T(),N.preventDefault())})})})});sI.displayName=rI;var iI="SelectValue",oI=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:a,placeholder:c="",...d}=n,f=Oo(iI,t),{onValueNodeHasChildrenChange:m}=f,g=a!==void 0,v=Et(e,f.onValueNodeChange);return Zt(()=>{m(g)},[m,g]),l.jsx(Ge.span,{...d,ref:v,style:{pointerEvents:"none"},children:NI(f.value)?l.jsx(l.Fragment,{children:c}):a})});oI.displayName=iI;var A5="SelectIcon",aI=E.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return l.jsx(Ge.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});aI.displayName=A5;var j5="SelectPortal",lI=n=>l.jsx(KC,{asChild:!0,...n});lI.displayName=j5;var Ia="SelectContent",cI=E.forwardRef((n,e)=>{const t=Oo(Ia,n.__scopeSelect),[r,i]=E.useState();if(Zt(()=>{i(new DocumentFragment)},[]),!t.open){const a=r;return a?Aa.createPortal(l.jsx(uI,{scope:n.__scopeSelect,children:l.jsx(Am.Slot,{scope:n.__scopeSelect,children:l.jsx("div",{children:n.children})})}),a):null}return l.jsx(dI,{...n,ref:e})});cI.displayName=Ia;var ii=10,[uI,Do]=pc(Ia),P5="SelectContentImpl",dI=E.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:c,side:d,sideOffset:f,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:y,collisionPadding:T,sticky:N,hideWhenDetached:_,avoidCollisions:w,...A}=n,I=Oo(Ia,t),[O,U]=E.useState(null),[$,W]=E.useState(null),D=Et(e,ge=>U(ge)),[k,j]=E.useState(null),[P,F]=E.useState(null),M=jm(t),[L,J]=E.useState(!1),ie=E.useRef(!1);E.useEffect(()=>{if(O)return zU(O)},[O]),AU();const re=E.useCallback(ge=>{const[_e,...Te]=M().map(nt=>nt.ref.current),[De]=Te.slice(-1),tt=document.activeElement;for(const nt of ge)if(nt===tt||(nt==null||nt.scrollIntoView({block:"nearest"}),nt===_e&&$&&($.scrollTop=0),nt===De&&$&&($.scrollTop=$.scrollHeight),nt==null||nt.focus(),document.activeElement!==tt))return},[M,$]),ae=E.useCallback(()=>re([k,O]),[re,k,O]);E.useEffect(()=>{L&&ae()},[L,ae]);const{onOpenChange:K,triggerPointerDownPosRef:ne}=I;E.useEffect(()=>{if(O){let ge={x:0,y:0};const _e=De=>{var tt,nt;ge={x:Math.abs(Math.round(De.pageX)-(((tt=ne.current)==null?void 0:tt.x)??0)),y:Math.abs(Math.round(De.pageY)-(((nt=ne.current)==null?void 0:nt.y)??0))}},Te=De=>{ge.x<=10&&ge.y<=10?De.preventDefault():O.contains(De.target)||K(!1),document.removeEventListener("pointermove",_e),ne.current=null};return ne.current!==null&&(document.addEventListener("pointermove",_e),document.addEventListener("pointerup",Te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_e),document.removeEventListener("pointerup",Te,{capture:!0})}}},[O,K,ne]),E.useEffect(()=>{const ge=()=>K(!1);return window.addEventListener("blur",ge),window.addEventListener("resize",ge),()=>{window.removeEventListener("blur",ge),window.removeEventListener("resize",ge)}},[K]);const[ce,B]=II(ge=>{const _e=M().filter(tt=>!tt.disabled),Te=_e.find(tt=>tt.ref.current===document.activeElement),De=AI(_e,ge,Te);De&&setTimeout(()=>De.ref.current.focus())}),X=E.useCallback((ge,_e,Te)=>{const De=!ie.current&&!Te;(I.value!==void 0&&I.value===_e||De)&&(j(ge),De&&(ie.current=!0))},[I.value]),he=E.useCallback(()=>O==null?void 0:O.focus(),[O]),Ie=E.useCallback((ge,_e,Te)=>{const De=!ie.current&&!Te;(I.value!==void 0&&I.value===_e||De)&&F(ge)},[I.value]),Le=r==="popper"?Uv:hI,Ae=Le===Uv?{side:d,sideOffset:f,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:y,collisionPadding:T,sticky:N,hideWhenDetached:_,avoidCollisions:w}:{};return l.jsx(uI,{scope:t,content:O,viewport:$,onViewportChange:W,itemRefCallback:X,selectedItem:k,onItemLeave:he,itemTextRefCallback:Ie,focusSelectedItem:ae,selectedItemText:P,position:r,isPositioned:L,searchRef:ce,children:l.jsx(tI,{as:ql,allowPinchZoom:!0,children:l.jsx(WC,{asChild:!0,trapped:I.open,onMountAutoFocus:ge=>{ge.preventDefault()},onUnmountAutoFocus:ze(i,ge=>{var _e;(_e=I.trigger)==null||_e.focus({preventScroll:!0}),ge.preventDefault()}),children:l.jsx($C,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:ge=>ge.preventDefault(),onDismiss:()=>I.onOpenChange(!1),children:l.jsx(Le,{role:"listbox",id:I.contentId,"data-state":I.open?"open":"closed",dir:I.dir,onContextMenu:ge=>ge.preventDefault(),...A,...Ae,onPlaced:()=>J(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:ze(A.onKeyDown,ge=>{const _e=ge.ctrlKey||ge.altKey||ge.metaKey;if(ge.key==="Tab"&&ge.preventDefault(),!_e&&ge.key.length===1&&B(ge.key),["ArrowUp","ArrowDown","Home","End"].includes(ge.key)){let De=M().filter(tt=>!tt.disabled).map(tt=>tt.ref.current);if(["ArrowUp","End"].includes(ge.key)&&(De=De.slice().reverse()),["ArrowUp","ArrowDown"].includes(ge.key)){const tt=ge.target,nt=De.indexOf(tt);De=De.slice(nt+1)}setTimeout(()=>re(De)),ge.preventDefault()}})})})})})})});dI.displayName=P5;var R5="SelectItemAlignedPosition",hI=E.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,a=Oo(Ia,t),c=Do(Ia,t),[d,f]=E.useState(null),[m,g]=E.useState(null),v=Et(e,D=>g(D)),y=jm(t),T=E.useRef(!1),N=E.useRef(!0),{viewport:_,selectedItem:w,selectedItemText:A,focusSelectedItem:I}=c,O=E.useCallback(()=>{if(a.trigger&&a.valueNode&&d&&m&&_&&w&&A){const D=a.trigger.getBoundingClientRect(),k=m.getBoundingClientRect(),j=a.valueNode.getBoundingClientRect(),P=A.getBoundingClientRect();if(a.dir!=="rtl"){const tt=P.left-k.left,nt=j.left-tt,fe=D.left-nt,Ye=D.width+fe,qt=Math.max(Ye,k.width),Ot=window.innerWidth-ii,Fe=a1(nt,[ii,Ot-qt]);d.style.minWidth=Ye+"px",d.style.left=Fe+"px"}else{const tt=k.right-P.right,nt=window.innerWidth-j.right-tt,fe=window.innerWidth-D.right-nt,Ye=D.width+fe,qt=Math.max(Ye,k.width),Ot=window.innerWidth-ii,Fe=a1(nt,[ii,Ot-qt]);d.style.minWidth=Ye+"px",d.style.right=Fe+"px"}const F=y(),M=window.innerHeight-ii*2,L=_.scrollHeight,J=window.getComputedStyle(m),ie=parseInt(J.borderTopWidth,10),re=parseInt(J.paddingTop,10),ae=parseInt(J.borderBottomWidth,10),K=parseInt(J.paddingBottom,10),ne=ie+re+L+K+ae,ce=Math.min(w.offsetHeight*5,ne),B=window.getComputedStyle(_),X=parseInt(B.paddingTop,10),he=parseInt(B.paddingBottom,10),Ie=D.top+D.height/2-ii,Le=M-Ie,Ae=w.offsetHeight/2,ge=w.offsetTop+Ae,_e=ie+re+ge,Te=ne-_e;if(_e<=Ie){const tt=w===F[F.length-1].ref.current;d.style.bottom="0px";const nt=m.clientHeight-_.offsetTop-_.offsetHeight,fe=Math.max(Le,Ae+(tt?he:0)+nt+ae),Ye=_e+fe;d.style.height=Ye+"px"}else{const tt=w===F[0].ref.current;d.style.top="0px";const fe=Math.max(Ie,ie+_.offsetTop+(tt?X:0)+Ae)+Te;d.style.height=fe+"px",_.scrollTop=_e-Ie+_.offsetTop}d.style.margin=`${ii}px 0`,d.style.minHeight=ce+"px",d.style.maxHeight=M+"px",r==null||r(),requestAnimationFrame(()=>T.current=!0)}},[y,a.trigger,a.valueNode,d,m,_,w,A,a.dir,r]);Zt(()=>O(),[O]);const[U,$]=E.useState();Zt(()=>{m&&$(window.getComputedStyle(m).zIndex)},[m]);const W=E.useCallback(D=>{D&&N.current===!0&&(O(),I==null||I(),N.current=!1)},[O,I]);return l.jsx(O5,{scope:t,contentWrapper:d,shouldExpandOnScrollRef:T,onScrollButtonChange:W,children:l.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:U},children:l.jsx(Ge.div,{...i,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});hI.displayName=R5;var k5="SelectPopperPosition",Uv=E.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=ii,...a}=n,c=Pm(t);return l.jsx(Yb,{...c,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Uv.displayName=k5;var[O5,yx]=pc(Ia,{}),zv="SelectViewport",fI=E.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,a=Do(zv,t),c=yx(zv,t),d=Et(e,a.onViewportChange),f=E.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(Am.Slot,{scope:t,children:l.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:d,style:{position:"relative",flex:1,overflow:"auto",...i.style},onScroll:ze(i.onScroll,m=>{const g=m.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:y}=c;if(y!=null&&y.current&&v){const T=Math.abs(f.current-g.scrollTop);if(T>0){const N=window.innerHeight-ii*2,_=parseFloat(v.style.minHeight),w=parseFloat(v.style.height),A=Math.max(_,w);if(A<N){const I=A+T,O=Math.min(N,I),U=I-O;v.style.height=O+"px",v.style.bottom==="0px"&&(g.scrollTop=U>0?U:0,v.style.justifyContent="flex-end")}}}f.current=g.scrollTop})})})]})});fI.displayName=zv;var mI="SelectGroup",[D5,L5]=pc(mI),M5=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Ku();return l.jsx(D5,{scope:t,id:i,children:l.jsx(Ge.div,{role:"group","aria-labelledby":i,...r,ref:e})})});M5.displayName=mI;var pI="SelectLabel",gI=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=L5(pI,t);return l.jsx(Ge.div,{id:i.id,...r,ref:e})});gI.displayName=pI;var Bf="SelectItem",[F5,vI]=pc(Bf),yI=E.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:a,...c}=n,d=Oo(Bf,t),f=Do(Bf,t),m=d.value===r,[g,v]=E.useState(a??""),[y,T]=E.useState(!1),N=Et(e,A=>{var I;return(I=f.itemRefCallback)==null?void 0:I.call(f,A,r,i)}),_=Ku(),w=()=>{i||(d.onValueChange(r),d.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(F5,{scope:t,value:r,disabled:i,textId:_,isSelected:m,onItemTextChange:E.useCallback(A=>{v(I=>I||((A==null?void 0:A.textContent)??"").trim())},[]),children:l.jsx(Am.ItemSlot,{scope:t,value:r,disabled:i,textValue:g,children:l.jsx(Ge.div,{role:"option","aria-labelledby":_,"data-highlighted":y?"":void 0,"aria-selected":m&&y,"data-state":m?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:N,onFocus:ze(c.onFocus,()=>T(!0)),onBlur:ze(c.onBlur,()=>T(!1)),onPointerUp:ze(c.onPointerUp,w),onPointerMove:ze(c.onPointerMove,A=>{var I;i?(I=f.onItemLeave)==null||I.call(f):A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ze(c.onPointerLeave,A=>{var I;A.currentTarget===document.activeElement&&((I=f.onItemLeave)==null||I.call(f))}),onKeyDown:ze(c.onKeyDown,A=>{var O;((O=f.searchRef)==null?void 0:O.current)!==""&&A.key===" "||(T5.includes(A.key)&&w(),A.key===" "&&A.preventDefault())})})})})});yI.displayName=Bf;var cu="SelectItemText",xI=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...a}=n,c=Oo(cu,t),d=Do(cu,t),f=vI(cu,t),m=I5(cu,t),[g,v]=E.useState(null),y=Et(e,A=>v(A),f.onItemTextChange,A=>{var I;return(I=d.itemTextRefCallback)==null?void 0:I.call(d,A,f.value,f.disabled)}),T=g==null?void 0:g.textContent,N=E.useMemo(()=>l.jsx("option",{value:f.value,disabled:f.disabled,children:T},f.value),[f.disabled,f.value,T]),{onNativeOptionAdd:_,onNativeOptionRemove:w}=m;return Zt(()=>(_(N),()=>w(N)),[_,w,N]),l.jsxs(l.Fragment,{children:[l.jsx(Ge.span,{id:f.textId,...a,ref:y}),f.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Aa.createPortal(a.children,c.valueNode):null]})});xI.displayName=cu;var wI="SelectItemIndicator",_I=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return vI(wI,t).isSelected?l.jsx(Ge.span,{"aria-hidden":!0,...r,ref:e}):null});_I.displayName=wI;var Bv="SelectScrollUpButton",EI=E.forwardRef((n,e)=>{const t=Do(Bv,n.__scopeSelect),r=yx(Bv,n.__scopeSelect),[i,a]=E.useState(!1),c=Et(e,r.onScrollButtonChange);return Zt(()=>{if(t.viewport&&t.isPositioned){let d=function(){const m=f.scrollTop>0;a(m)};const f=t.viewport;return d(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),i?l.jsx(TI,{...n,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:f}=t;d&&f&&(d.scrollTop=d.scrollTop-f.offsetHeight)}}):null});EI.displayName=Bv;var $v="SelectScrollDownButton",bI=E.forwardRef((n,e)=>{const t=Do($v,n.__scopeSelect),r=yx($v,n.__scopeSelect),[i,a]=E.useState(!1),c=Et(e,r.onScrollButtonChange);return Zt(()=>{if(t.viewport&&t.isPositioned){let d=function(){const m=f.scrollHeight-f.clientHeight,g=Math.ceil(f.scrollTop)<m;a(g)};const f=t.viewport;return d(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[t.viewport,t.isPositioned]),i?l.jsx(TI,{...n,ref:c,onAutoScroll:()=>{const{viewport:d,selectedItem:f}=t;d&&f&&(d.scrollTop=d.scrollTop+f.offsetHeight)}}):null});bI.displayName=$v;var TI=E.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,a=Do("SelectScrollButton",t),c=E.useRef(null),d=jm(t),f=E.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return E.useEffect(()=>()=>f(),[f]),Zt(()=>{var g;const m=d().find(v=>v.ref.current===document.activeElement);(g=m==null?void 0:m.ref.current)==null||g.scrollIntoView({block:"nearest"})},[d]),l.jsx(Ge.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ze(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:ze(i.onPointerMove,()=>{var m;(m=a.onItemLeave)==null||m.call(a),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:ze(i.onPointerLeave,()=>{f()})})}),V5="SelectSeparator",SI=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return l.jsx(Ge.div,{"aria-hidden":!0,...r,ref:e})});SI.displayName=V5;var qv="SelectArrow",U5=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Pm(t),a=Oo(qv,t),c=Do(qv,t);return a.open&&c.position==="popper"?l.jsx(Xb,{...i,...r,ref:e}):null});U5.displayName=qv;function NI(n){return n===""||n===void 0}var CI=E.forwardRef((n,e)=>{const{value:t,...r}=n,i=E.useRef(null),a=Et(e,i),c=fC(t);return E.useEffect(()=>{const d=i.current,f=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==t&&g){const v=new Event("change",{bubbles:!0});g.call(d,t),d.dispatchEvent(v)}},[c,t]),l.jsx(qu,{asChild:!0,children:l.jsx("select",{...r,ref:a,defaultValue:t})})});CI.displayName="BubbleSelect";function II(n){const e=fn(n),t=E.useRef(""),r=E.useRef(0),i=E.useCallback(c=>{const d=t.current+c;e(d),function f(m){t.current=m,window.clearTimeout(r.current),m!==""&&(r.current=window.setTimeout(()=>f(""),1e3))}(d)},[e]),a=E.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,a]}function AI(n,e,t){const i=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let c=z5(n,Math.max(a,0));i.length===1&&(c=c.filter(m=>m!==t));const f=c.find(m=>m.textValue.toLowerCase().startsWith(i.toLowerCase()));return f!==t?f:void 0}function z5(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var B5=nI,jI=sI,$5=oI,q5=aI,W5=lI,PI=cI,H5=fI,RI=gI,kI=yI,K5=xI,G5=_I,OI=EI,DI=bI,LI=SI;const Q5=B5,Y5=$5,MI=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(jI,{ref:r,className:st("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,l.jsx(q5,{asChild:!0,children:l.jsx(db,{className:"h-4 w-4 opacity-50"})})]}));MI.displayName=jI.displayName;const FI=E.forwardRef(({className:n,...e},t)=>l.jsx(OI,{ref:t,className:st("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(uP,{className:"h-4 w-4"})}));FI.displayName=OI.displayName;const VI=E.forwardRef(({className:n,...e},t)=>l.jsx(DI,{ref:t,className:st("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(db,{className:"h-4 w-4"})}));VI.displayName=DI.displayName;const UI=E.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>l.jsx(W5,{children:l.jsxs(PI,{ref:i,className:st("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[l.jsx(FI,{}),l.jsx(H5,{className:st("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(VI,{})]})}));UI.displayName=PI.displayName;const X5=E.forwardRef(({className:n,...e},t)=>l.jsx(RI,{ref:t,className:st("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));X5.displayName=RI.displayName;const zI=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(kI,{ref:r,className:st("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(G5,{children:l.jsx(cP,{className:"h-4 w-4"})})}),l.jsx(K5,{children:e})]}));zI.displayName=kI.displayName;const J5=E.forwardRef(({className:n,...e},t)=>l.jsx(LI,{ref:t,className:st("-mx-1 my-1 h-px bg-muted",n),...e}));J5.displayName=LI.displayName;function BI({lectureId:n,onClose:e,onSave:t}){const[r,i]=E.useState({title:"",description:"",fileUrl:"",fileType:"",fileSize:""}),[a,c]=E.useState(!1),d=["PDF","DOCX","PPTX","XLSX","TXT","ZIP","MP3","MP4","JPG","PNG"],f=async m=>{m.preventDefault(),c(!0);try{const g={...r,id:`file_${Date.now()}`,lectureId:n,uploadedAt:new Date,uploadedBy:"Current User"};t(g)}catch(g){console.error("Error saving file:",g)}finally{c(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ee,{variant:"ghost",onClick:e,children:[l.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add File"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a file resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:f,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsxs(Ke,{className:"flex items-center gap-2",children:[l.jsx(Rs,{className:"h-5 w-5 text-blue-600"}),"File Information"]}),l.jsx(Nt,{children:"Upload or link to educational files"})]}),l.jsxs(ye,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"title",children:"File Title *"}),l.jsx(Oe,{id:"title",placeholder:"e.g., Anatomy Reference Guide",value:r.title,onChange:m=>i(g=>({...g,title:m.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"description",children:"Description"}),l.jsx(yi,{id:"description",placeholder:"Describe the file content...",value:r.description,onChange:m=>i(g=>({...g,description:m.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"fileType",children:"File Type *"}),l.jsxs(Q5,{value:r.fileType,onValueChange:m=>i(g=>({...g,fileType:m})),children:[l.jsx(MI,{children:l.jsx(Y5,{placeholder:"Select file type"})}),l.jsx(UI,{children:d.map(m=>l.jsx(zI,{value:m,children:m},m))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"fileSize",children:"File Size"}),l.jsx(Oe,{id:"fileSize",placeholder:"e.g., 2.5 MB",value:r.fileSize,onChange:m=>i(g=>({...g,fileSize:m.target.value}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"fileUrl",children:"File URL *"}),l.jsx(Oe,{id:"fileUrl",placeholder:"https://example.com/file.pdf or /uploads/file.pdf",value:r.fileUrl,onChange:m=>i(g=>({...g,fileUrl:m.target.value})),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload to Firebase Storage or use external links"})]})]})]}),r.title&&l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Preview"}),l.jsx(Nt,{children:"How the file will appear in the lecture"})]}),l.jsx(ye,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Rs,{className:"h-8 w-8 text-blue-600"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:r.title}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:r.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.fileType&&l.jsx(an,{variant:"secondary",children:r.fileType}),r.fileSize&&l.jsx(an,{variant:"outline",children:r.fileSize})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ee,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(ee,{type:"submit",disabled:a,children:[l.jsx(Ao,{className:"h-4 w-4 mr-2"}),a?"Adding...":"Add File"]})]})]})]})}function $I({lectureId:n,onClose:e,onSave:t}){const[r,i]=E.useState({title:"",description:"",url:"",duration:"",thumbnailUrl:"",platform:"YouTube"}),[a,c]=E.useState(!1),d=async v=>{v.preventDefault(),c(!0);try{const y={...r,id:`video_${Date.now()}`,lectureId:n,uploadedAt:new Date,uploadedBy:"Current User"};t(y)}catch(y){console.error("Error saving video:",y)}finally{c(!1)}},f=v=>{const y=v.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return y?y[1]:null},m=v=>{const y=f(v);return y?`https://img.youtube.com/vi/${y}/maxresdefault.jpg`:""},g=v=>{i(y=>({...y,url:v,thumbnailUrl:m(v)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ee,{variant:"ghost",onClick:e,children:[l.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Video"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a video resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsxs(Ke,{className:"flex items-center gap-2",children:[l.jsx(bs,{className:"h-5 w-5 text-green-600"}),"Video Information"]}),l.jsx(Nt,{children:"Add YouTube videos or other video links"})]}),l.jsxs(ye,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"title",children:"Video Title *"}),l.jsx(Oe,{id:"title",placeholder:"e.g., Introduction to Human Anatomy",value:r.title,onChange:v=>i(y=>({...y,title:v.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"description",children:"Description"}),l.jsx(yi,{id:"description",placeholder:"Describe the video content...",value:r.description,onChange:v=>i(y=>({...y,description:v.target.value})),rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"url",children:"Video URL *"}),l.jsx(Oe,{id:"url",placeholder:"https://youtube.com/watch?v=... or https://vimeo.com/...",value:r.url,onChange:v=>g(v.target.value),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports YouTube, Vimeo, and direct video links"})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"duration",children:"Duration"}),l.jsx(Oe,{id:"duration",placeholder:"e.g., 45:30",value:r.duration,onChange:v=>i(y=>({...y,duration:v.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"platform",children:"Platform"}),l.jsx(Oe,{id:"platform",value:r.platform,onChange:v=>i(y=>({...y,platform:v.target.value})),disabled:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"thumbnailUrl",children:"Thumbnail URL"}),l.jsx(Oe,{id:"thumbnailUrl",placeholder:"Auto-generated for YouTube videos",value:r.thumbnailUrl,onChange:v=>i(y=>({...y,thumbnailUrl:v.target.value}))})]})]})]}),r.title&&l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Preview"}),l.jsx(Nt,{children:"How the video will appear in the lecture"})]}),l.jsx(ye,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[r.thumbnailUrl?l.jsx("img",{src:r.thumbnailUrl,alt:r.title,className:"w-24 h-16 object-cover rounded"}):l.jsx("div",{className:"w-24 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(Kg,{className:"h-6 w-6 text-gray-400"})}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(bs,{className:"h-8 w-8 text-white opacity-80"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:r.title}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:r.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.duration&&l.jsxs(an,{variant:"secondary",className:"text-xs",children:[l.jsx(uf,{className:"h-3 w-3 mr-1"}),r.duration]}),l.jsxs(an,{variant:"outline",className:"text-xs",children:[l.jsx(mP,{className:"h-3 w-3 mr-1"}),r.platform]})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ee,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(ee,{type:"submit",disabled:a,children:[l.jsx(Ao,{className:"h-4 w-4 mr-2"}),a?"Adding...":"Add Video"]})]})]})]})}function Rm({subjectId:n,subjectName:e,yearType:t,onClose:r,onSave:i}){const[a,c]=E.useState({name:"",description:"",order:1,imageUrl:""}),[d,f]=E.useState(!1),m=async g=>{g.preventDefault(),f(!0);try{const v={...a,subjectId:n,createdAt:new Date,uploadedBy:"Current User"};i(v)}catch(v){console.error("Error saving lecture:",v)}finally{f(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ee,{variant:"ghost",onClick:r,children:[l.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Lecture"}),l.jsxs("p",{className:"text-muted-foreground",children:["Add a new lecture to ",e]})]})]})}),l.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsxs(Ke,{className:"flex items-center gap-2",children:[t==="basic"?l.jsx(ga,{className:"h-5 w-5 text-blue-600"}):l.jsx(va,{className:"h-5 w-5 text-red-600"}),"Lecture Information"]}),l.jsx(Nt,{children:"Basic information about the lecture"})]}),l.jsxs(ye,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"name",children:"Lecture Name *"}),l.jsx(Oe,{id:"name",placeholder:"e.g., Introduction to Cell Biology",value:a.name,onChange:g=>c(v=>({...v,name:g.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"description",children:"Description"}),l.jsx(yi,{id:"description",placeholder:"Describe what this lecture covers...",value:a.description,onChange:g=>c(v=>({...v,description:g.target.value})),rows:4})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"order",children:"Order"}),l.jsx(Oe,{id:"order",type:"number",min:"1",value:a.order,onChange:g=>c(v=>({...v,order:parseInt(g.target.value)||1}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(Oe,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:g=>c(v=>({...v,imageUrl:g.target.value}))})]})]})]})]}),a.name&&l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Preview"}),l.jsxs(Nt,{children:["How the lecture will appear in ",e]})]}),l.jsx(ye,{children:l.jsx("div",{className:"p-4 border rounded-lg bg-secondary/20",children:l.jsxs("div",{className:"flex items-start gap-3",children:[a.imageUrl?l.jsx("img",{src:a.imageUrl,alt:a.name,className:"w-16 h-16 object-cover rounded",onError:g=>{g.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(ci,{className:"h-6 w-6 text-gray-400"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:a.name}),a.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Lecture ",a.order," • ",e]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ee,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),l.jsxs(ee,{type:"submit",disabled:d,children:[l.jsx(Ao,{className:"h-4 w-4 mr-2"}),d?"Adding...":"Add Lecture"]})]})]})]})}async function tc(n){let e,t;if(!e)try{const y=await fetch("/api/cloudinary/config");if(y.ok){const T=await y.json();e=T.cloudName||e,t=T.uploadPreset||t}}catch{}if(!e)try{const y=localStorage.getItem("cloudinary.cloudName"),T=localStorage.getItem("cloudinary.uploadPreset");y&&(e=y,t=t||T||t)}catch{}if(!e)throw new Error("Cloudinary cloud name is not configured. Set VITE_CLOUDINARY_CLOUD_NAME in your environment or provide server config.");const r=`https://api.cloudinary.com/v1_1/${e}/upload`;if(t){const y=new FormData;y.append("file",n),y.append("upload_preset",t);const T=await fetch(r,{method:"POST",body:y});if(!T.ok){const _=await T.text();throw new Error(`Cloudinary upload failed: ${T.status} ${_}`)}const N=await T.json();return N.secure_url||N.url}const i=await fetch("/api/cloudinary/sign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!i.ok){const y=await i.text();throw new Error(`Cloudinary signing failed: ${i.status} ${y}`)}const a=await i.json(),{signature:c,apiKey:d,timestamp:f}=a,m=new FormData;m.append("file",n),m.append("api_key",d),m.append("timestamp",String(f)),m.append("signature",c);const g=await fetch(r,{method:"POST",body:m});if(!g.ok){const y=await g.text();throw new Error(`Cloudinary signed upload failed: ${g.status} ${y}`)}const v=await g.json();return v.secure_url||v.url}function xx(n,e){try{n&&localStorage.setItem("cloudinary.cloudName",n),e&&localStorage.setItem("cloudinary.uploadPreset",e)}catch(t){console.warn("Could not persist Cloudinary config to localStorage",t)}}function Z5(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[i,a]=E.useState(!1),[c,d]=E.useState(!1),[f,m]=E.useState(!1),[g,v]=E.useState(!1),[y,T]=E.useState(!1),[N,_]=E.useState(null),[w,A]=E.useState(null),[I,O]=E.useState(null),[U,$]=E.useState("basic"),[W,D]=E.useState({}),[k,j]=E.useState(null),[P,F]=E.useState(""),M=(fe,Ye)=>{D(qt=>{var Ot;return{...qt,[fe]:{videos:!1,files:!1,quizzes:!1,...qt[fe]||{},[Ye]:!((Ot=qt[fe])!=null&&Ot[Ye])}}})},{years:L,loading:J,error:ie,connectionStatus:re,retryConnection:ae,updateYear:K,createSubject:ne,createLecture:ce,deleteLecture:B,deleteSubject:X,addVideo:he,addFile:Ie,addQuiz:Le}=ud(),{news:Ae}=hx(),ge=(fe,Ye)=>{O(fe),A(Ye),r(null),a(!0)},_e=(fe,Ye)=>{console.log("🔄 Opening subject form for year:",fe.yearNumber,"type:",Ye),_({id:fe.id,number:fe.yearNumber}),$(Ye),d(!0)},Te=(fe,Ye)=>{O(fe),$(Ye),T(!0)},De=(fe,Ye)=>{O(fe),A(Ye),m(!0)},tt=(fe,Ye)=>{O(fe),A(Ye),v(!0)};if(i)return l.jsx(UC,{quiz:t,onClose:()=>{a(!1),r(null),A(null)},onSave:async fe=>{I!=null&&I.id&&w&&await Le(I.id,w,{title:fe.title,description:fe.description,questions:fe.questions||[],timeLimit:fe.timeLimit,passingScore:fe.passingScore}),a(!1),r(null),A(null)}});if(console.log("🔍 Render check - isSubjectFormOpen:",c,"selectedYear:",N),c)return console.log("📝 Rendering SubjectForm"),l.jsx(zC,{year:N==null?void 0:N.number,yearType:U,onClose:()=>{d(!1),_(null)},onSave:async fe=>{try{await ne({...fe,yearId:(N==null?void 0:N.id)||"",order:1}),d(!1),_(null)}catch(Ye){console.error("Error saving subject:",Ye),alert("Failed to save subject. Please try again.")}}});if(y)return l.jsx(Rm,{subjectId:I==null?void 0:I.id,subjectName:I==null?void 0:I.name,yearType:U,onClose:()=>{T(!1),O(null)},onSave:async fe=>{try{await ce(fe),T(!1),O(null)}catch(Ye){console.error("Error saving lecture:",Ye),alert("Failed to save lecture. Please try again.")}}});if(f)return l.jsx(BI,{lectureId:w,onClose:()=>{m(!1),A(null)},onSave:async fe=>{I!=null&&I.id&&w&&await Ie(I.id,w,fe),m(!1),A(null)}});if(g)return l.jsx($I,{lectureId:w,onClose:()=>{v(!1),A(null)},onSave:async fe=>{I!=null&&I.id&&w&&await he(I.id,w,fe),v(!1),A(null)}});const nt=(fe,Ye)=>{var qt,Ot;return l.jsxs(ve,{className:`border-l-4 ${Ye==="basic"?"border-l-blue-500":"border-l-red-500"}`,children:[l.jsx(We,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[fe.imageUrl?l.jsx("img",{src:fe.imageUrl,alt:`Year ${fe.yearNumber}`,className:"w-24 h-16 object-cover rounded-md",onError:Fe=>{Fe.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-24 h-16 rounded-md bg-muted flex items-center justify-center",children:Ye==="basic"?l.jsx(ga,{className:"h-6 w-6 text-blue-600"}):l.jsx(va,{className:"h-6 w-6 text-red-600"})}),l.jsx(Ke,{className:"flex flex-col",children:k===fe.id?l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(Oe,{value:P,onChange:Fe=>F(Fe.target.value),className:"w-48",placeholder:"Batch name"}),l.jsx(ee,{size:"sm",onClick:async()=>{try{await(K==null?void 0:K(fe.id,{batchName:P,batch_name:P})),j(null),F("")}catch(Fe){console.error(Fe),alert("Failed to save batch name")}},children:"Save"}),l.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>{j(null),F("")},children:"Cancel"})]}):l.jsx(l.Fragment,{children:fe.batchName?l.jsxs(l.Fragment,{children:[l.jsx(Fn,{to:`/admin/years/${fe.id}`,className:"text-lg font-bold text-foreground hover:underline",children:fe.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[l.jsxs("span",{className:"text-sm text-muted",children:["Year ",fe.yearNumber]}),fe.academicSupervisor&&l.jsxs("span",{className:"ml-3",children:["• ",fe.academicSupervisor]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs(Fn,{to:`/admin/years/${fe.id}`,className:"text-lg font-medium text-blue-600 hover:underline",children:["Year ",fe.yearNumber]}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[l.jsx("span",{className:"italic",children:"No batch name"}),fe.academicSupervisor&&l.jsxs("span",{className:"ml-3",children:["• ",fe.academicSupervisor]})]})]})})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(ee,{variant:"ghost",size:"sm",onClick:async()=>{try{const Fe=document.createElement("input");Fe.type="file",Fe.accept="image/*",Fe.onchange=async()=>{var be;const Un=(be=Fe.files)==null?void 0:be[0];if(Un)try{const ct=await tc(Un);if(console.log("Cloudinary upload result:",ct),!ct||typeof ct!="string"||!ct.startsWith("http")){console.error("Invalid Cloudinary upload response:",ct),alert("Image upload failed: unexpected response from Cloudinary");return}await(K==null?void 0:K(fe.id,{imageUrl:ct,image_url:ct}))}catch(ct){console.error(ct);const wn=(ct==null?void 0:ct.message)||String(ct);if(wn&&wn.toLowerCase().includes("cloudinary cloud name is not configured")){const lr=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!lr){alert("No cloud name provided. Upload cancelled.");return}const In=window.prompt("Unsigned upload preset (leave empty to use signed server flow):","");try{xx(lr,In||null);const Wt=await tc(Un);if(console.log("Cloudinary upload result after config:",Wt),!Wt||typeof Wt!="string"||!Wt.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await(K==null?void 0:K(fe.id,{imageUrl:Wt,image_url:Wt}))}catch(Wt){console.error(Wt),alert("Image upload failed after configuring Cloudinary: "+(Wt.message||Wt))}return}alert("Image upload failed: "+(ct.message||ct))}},Fe.click()}catch(Fe){console.error(Fe),alert("Could not open file dialog")}},className:"flex items-center gap-1",children:[l.jsx(gb,{className:"h-3 w-3"}),fe.imageUrl?"Change Image":"Add Image"]}),l.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>{j(fe.id),F(fe.batchName||""),setTimeout(()=>{const Fe=document.getElementById(`year-card-${fe.id}`);Fe&&Fe.scrollIntoView({behavior:"smooth",block:"center"})},50)},className:"flex items-center gap-1",children:"Batch Name"}),fe.imageUrl&&l.jsx(ee,{variant:"ghost",size:"icon",onClick:async()=>{if(confirm("Remove year image?"))try{await(K==null?void 0:K(fe.id,{imageUrl:""}))}catch(Fe){console.error(Fe),alert("Failed to remove year image")}},className:"h-8 w-8 text-destructive",children:l.jsx(Mn,{className:"h-3 w-3"})})]})]})}),l.jsx(ye,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ci,{className:"h-4 w-4 text-blue-600"}),l.jsx("span",{className:"font-semibold",children:"Subjects"}),l.jsxs(an,{variant:"secondary",children:[((qt=fe.subjects)==null?void 0:qt.length)||0," subjects"]}),l.jsxs(an,{variant:"outline",children:[(Ae||[]).filter(Fe=>Fe.yearId===fe.id).length," ","news"]})]}),l.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>_e(fe,Ye),className:"flex items-center gap-1",children:[l.jsx(Jt,{className:"h-3 w-3"}),"Add Subject"]})]}),!fe.subjects||fe.subjects.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ci,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),l.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No subjects added yet"}),l.jsx(ee,{variant:"outline",size:"sm",onClick:()=>_e(fe,Ye),children:"Add first subject"})]}):l.jsx("div",{className:"grid gap-4",children:(Ot=fe.subjects)==null?void 0:Ot.map(Fe=>{var Un;return l.jsxs(ve,{className:"bg-secondary/10",children:[l.jsx(We,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[Fe.imageUrl?l.jsx("img",{src:Fe.imageUrl,alt:Fe.name,className:"w-8 h-8 object-cover rounded",onError:be=>{be.currentTarget.style.display="none"}}):l.jsx(ci,{className:"h-5 w-5 text-blue-600"}),l.jsx(Fn,{to:`/admin/subjects/${Fe.id}`,className:"font-medium text-lg text-blue-600 hover:underline",children:Fe.name}),l.jsxs(an,{variant:"outline",className:"text-xs",children:[((Un=Fe.lectures)==null?void 0:Un.length)||0," lectures"]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>Te(Fe,Ye),className:"h-8 px-3 text-xs",children:[l.jsx(Jt,{className:"h-3 w-3 mr-1"}),"Add Lecture"]}),l.jsx(ee,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:async()=>{if(confirm(`Delete subject "${Fe.name}"? This will remove its lectures.`))try{await X(Fe.id)}catch(be){console.error(be),alert("Failed to delete subject")}},children:l.jsx(Mn,{className:"h-3 w-3"})})]})]})}),Fe.lectures&&Fe.lectures.length>0&&l.jsx(ye,{className:"pt-0",children:l.jsxs("div",{className:"grid gap-3",children:[Fe.lectures.slice(0,3).map(be=>{var ct,wn,lr,In,Wt,kr,Ct,wt,zn;return l.jsx(ve,{className:"bg-background border",children:l.jsx(ye,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:be.imageUrl?l.jsx("img",{src:be.imageUrl,alt:be.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(bs,{className:"h-6 w-6 text-muted-foreground"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:be.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:be.description||"No description available"}),l.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[l.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>M(be.id,"videos"),className:`h-6 px-2 text-xs ${(ct=W[be.id])!=null&&ct.videos?"bg-accent":""}`,children:[l.jsx(Kg,{className:"h-3 w-3 mr-1"}),"Videos (",((wn=be.videos)==null?void 0:wn.length)||0,")"]}),l.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>M(be.id,"files"),className:`h-6 px-2 text-xs ${(lr=W[be.id])!=null&&lr.files?"bg-accent":""}`,children:[l.jsx(Rs,{className:"h-3 w-3 mr-1"}),"Files (",((In=be.files)==null?void 0:In.length)||0,")"]}),l.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>M(be.id,"quizzes"),className:`h-6 px-2 text-xs ${(Wt=W[be.id])!=null&&Wt.quizzes?"bg-accent":""}`,children:[l.jsx(ui,{className:"h-3 w-3 mr-1"}),"Quizzes (",((kr=be.quizzes)==null?void 0:kr.length)||0,")"]}),l.jsx(ee,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${be.name}"?`))try{await B(Fe.id,be.id)}catch(bt){console.error(bt),alert("Failed to delete lecture")}},children:l.jsx(Mn,{className:"h-3 w-3"})})]}),((Ct=W[be.id])==null?void 0:Ct.videos)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Videos:"}),l.jsxs(ee,{variant:"ghost",size:"xs",onClick:()=>tt(Fe,be.id),className:"h-6 px-2 text-xs",children:[l.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[be.videos&&be.videos.length>0?be.videos.slice(0,4).map(bt=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Kg,{className:"h-3 w-3 text-blue-600"}),l.jsx("a",{href:bt.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate",children:bt.title||bt.name||"Untitled Video"})]},bt.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"}),be.videos&&be.videos.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",be.videos.length-4," more videos"]})]})]}),((wt=W[be.id])==null?void 0:wt.files)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Files:"}),l.jsxs(ee,{variant:"ghost",size:"xs",onClick:()=>De(Fe,be.id),className:"h-6 px-2 text-xs",children:[l.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[be.files&&be.files.length>0?be.files.slice(0,4).map(bt=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Rs,{className:"h-3 w-3 text-green-600"}),l.jsx("a",{href:bt.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 hover:underline truncate",children:bt.title||bt.name||"Untitled File"})]},bt.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"}),be.files&&be.files.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",be.files.length-4," more files"]})]})]}),((zn=W[be.id])==null?void 0:zn.quizzes)&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Quizzes:"}),l.jsxs(ee,{variant:"ghost",size:"xs",onClick:()=>ge(Fe,be.id),className:"h-6 px-2 text-xs",children:[l.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[be.quizzes&&be.quizzes.length>0?be.quizzes.slice(0,4).map(bt=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ui,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{className:"text-xs text-purple-600",children:bt.title||bt.name||"Untitled Quiz"})]},bt.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"}),be.quizzes&&be.quizzes.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",be.quizzes.length-4," more quizzes"]})]})]})]})]})})},be.id)}),Fe.lectures.length>3&&l.jsxs("div",{className:"text-center text-muted-foreground text-xs pt-2",children:["+",Fe.lectures.length-3," more lectures"]})]})})]},Fe.id)})})]})})]},fe.yearNumber)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Academic Years Management"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-muted-foreground",children:"Manage curriculum by academic years, subjects, and lectures"}),re==="connecting"&&l.jsxs("span",{className:"flex items-center gap-1 text-blue-600 font-medium text-sm",children:[l.jsx(vo,{className:"h-3 w-3 animate-spin"}),"Connecting..."]}),re==="connected"&&l.jsxs("span",{className:"flex items-center gap-1 text-green-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-green-600 rounded-full"}),"Connected"]}),re==="offline"&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),J&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(vo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading academic years..."})]})}),ie&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"⚠️ Error loading years"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:ie}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(ee,{onClick:ae,variant:"outline",children:"Retry Connection"}),l.jsx(ee,{onClick:()=>window.location.reload(),variant:"ghost",children:"Refresh Page"})]})]})}),!J&&!ie&&l.jsxs(l.Fragment,{children:[l.jsx(ve,{children:l.jsx(ye,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(rc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Oe,{placeholder:"Search lectures, subjects, or content...",value:n,onChange:fe=>e(fe.target.value),className:"pl-10"})]})})}),l.jsxs(VC,{defaultValue:"basic",className:"space-y-6",children:[l.jsxs(vx,{className:"grid w-full grid-cols-2",children:[l.jsxs(Uu,{value:"basic",className:"flex items-center gap-2",children:[l.jsx(ga,{className:"h-4 w-4"}),"Basic Years (1-3)"]}),l.jsxs(Uu,{value:"clinical",className:"flex items-center gap-2",children:[l.jsx(va,{className:"h-4 w-4"}),"Clinical Years (4-6)"]})]}),l.jsx(zu,{value:"basic",className:"space-y-4",children:l.jsx("div",{className:"space-y-6",children:L.length===0?l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(ga,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Setting Up Years..."}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"The academic years structure is being initialized. Please refresh the page in a moment."}),l.jsx(ee,{onClick:()=>window.location.reload(),children:"Refresh Page"})]})}):L.filter(fe=>fe.type==="basic").map(fe=>nt(fe,"basic"))})}),l.jsx(zu,{value:"clinical",className:"space-y-4",children:l.jsx("div",{className:"space-y-6",children:L.length===0?l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(va,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Setting Up Years..."}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"The academic years structure is being initialized. Please refresh the page in a moment."}),l.jsx(ee,{onClick:()=>window.location.reload(),children:"Refresh Page"})]})}):L.filter(fe=>fe.type==="clinical").map(fe=>nt(fe,"clinical"))})})]})]})]})}function e9(){var $;const{id:n}=_T(),[e,t]=E.useState(!1),[r,i]=E.useState(!1),[a,c]=E.useState(null),[d,f]=E.useState(null),[m,g]=E.useState(""),{years:v,loading:y,updateYear:T,createSubject:N,createLecture:_,deleteSubject:w,deleteLecture:A}=ud(),I=v.find(W=>W.id===n);if(y)return l.jsx(ve,{children:l.jsx(ye,{className:"text-center py-12",children:"Loading..."})});if(!I)return l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"Year not found"}),l.jsx("div",{className:"flex gap-2 justify-center",children:l.jsx(Fn,{to:"/admin/years",children:l.jsx(ee,{variant:"outline",children:"Back to Years"})})})]})});const O=async W=>{try{await N({...W,yearId:I.id}),t(!1)}catch(D){console.error(D),alert("Failed to add subject")}},U=async W=>{try{await _(W),i(!1),c(null)}catch(D){console.error(D),alert("Failed to add lecture")}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Fn,{to:"/admin/years",children:l.jsxs(ee,{variant:"ghost",children:[l.jsx(Ls,{className:"h-4 w-4 mr-2"})," Back"]})}),l.jsxs("div",{children:[I.batchName?l.jsxs(l.Fragment,{children:[l.jsx("h1",{className:"text-2xl font-bold",children:I.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Year ",I.yearNumber]})]}):l.jsxs("h1",{className:"text-2xl font-bold",children:["Year ",I.yearNumber]}),l.jsx("p",{className:"text-muted-foreground",children:"Manage subjects and lectures for this year"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:!window.__yearEditing&&l.jsxs(l.Fragment,{children:[l.jsxs(ee,{variant:"ghost",onClick:async()=>{try{const W=document.createElement("input");W.type="file",W.accept="image/*",W.onchange=async()=>{var k;const D=(k=W.files)==null?void 0:k[0];if(D)try{const j=await tc(D);if(console.log("Cloudinary upload result:",j),!j||typeof j!="string"||!j.startsWith("http")){console.error("Invalid Cloudinary upload response:",j),alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(T==null?void 0:T(I.id,{imageUrl:j,image_url:j})),window.__yearEditing=!1}catch(j){console.error(j);const P=(j==null?void 0:j.message)||String(j);if(P&&P.toLowerCase().includes("cloudinary cloud name is not configured")){const F=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!F){alert("No cloud name provided. Upload cancelled."),window.__yearEditing=!1;return}const M=window.prompt("Unsigned upload preset (leave empty to use signed server flow):","");try{xx(F,M||null);const L=await tc(D);if(console.log("Cloudinary upload result after config:",L),!L||typeof L!="string"||!L.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(T==null?void 0:T(I.id,{imageUrl:L,image_url:L}))}catch(L){console.error(L),alert("Image upload failed after configuring Cloudinary: "+(L.message||L))}window.__yearEditing=!1;return}alert("Image upload failed: "+(j.message||j))}},W.click()}catch(W){console.error(W),alert("Could not open file dialog")}},children:[l.jsx(gb,{className:"h-4 w-4 mr-2"})," ",I.imageUrl?"Change Image":"Add Image"]}),l.jsx(ee,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,f("academicSupervisor"),g(I.academicSupervisor||I.acadmic_supervisor||"")},children:"Academic Supervisor"}),l.jsx(ee,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,f("actor"),g(I.actor||"")},children:"Actor"}),l.jsx(ee,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,f("groupUrl"),g(I.groupUrl||I.group_url||"")},children:"Group URL"}),l.jsx(ee,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,f("batchName"),g(I.batchName||I.batch_name||"")},children:"Batch Name"}),I.imageUrl&&l.jsx(ee,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm("Remove year image?"))try{await(T==null?void 0:T(I.id,{imageUrl:""}))}catch(W){console.error(W),alert("Failed to remove year image")}},children:l.jsx(Mn,{className:"h-3 w-3"})})]})})]}),d&&l.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[l.jsx(Oe,{placeholder:d==="image"?"Image URL":d==="groupUrl"?"Group URL":d==="academicSupervisor"?"Academic Supervisor":"Actor",value:m,onChange:W=>g(W.target.value),className:"w-full max-w-2xl"}),l.jsx(ee,{onClick:async()=>{try{const W={};d==="image"?W.imageUrl=m:d==="academicSupervisor"?(W.academicSupervisor=m,W.acadmic_supervisor=m):d==="actor"?W.actor=m:d==="groupUrl"?(W.groupUrl=m,W.group_url=m):d==="batchName"&&(W.batchName=m,W.batch_name=m),await(T==null?void 0:T(I.id,W)),f(null),g(""),window.__yearEditing=!1}catch(W){console.error(W),alert("Failed to save field")}},children:"Save"}),l.jsx(ee,{variant:"ghost",onClick:()=>{f(null),g(""),window.__yearEditing=!1},children:"Cancel"})]}),l.jsxs(ve,{children:[l.jsx(We,{children:l.jsxs(Ke,{className:"flex items-center gap-2",children:["Subjects",l.jsxs(an,{variant:"secondary",children:[(($=I.subjects)==null?void 0:$.length)||0," subjects"]})]})}),l.jsxs(ye,{children:[l.jsx("div",{className:"flex justify-end mb-4",children:l.jsxs(ee,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[l.jsx(Jt,{className:"h-3 w-3"})," Add Subject"]})}),!I.subjects||I.subjects.length===0?l.jsx("div",{className:"text-center py-8",children:"No subjects added yet."}):l.jsx("div",{className:"grid gap-4",children:I.subjects.map(W=>l.jsxs(ve,{className:"bg-secondary/10",children:[l.jsx(We,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[W.imageUrl?l.jsx("img",{src:W.imageUrl,alt:W.name,className:"w-8 h-8 object-cover rounded"}):l.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-lg",children:W.name}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[(W.lectures||[]).length," lectures"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ee,{onClick:()=>{c(W),i(!0)},variant:"ghost",size:"sm",children:"Add Lecture"}),l.jsx(ee,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete subject "${W.name}"?`))try{await w(W.id)}catch(D){console.error(D),alert("Failed to delete subject")}},children:l.jsx(Mn,{className:"h-3 w-3"})})]})]})}),W.lectures&&W.lectures.length>0&&l.jsx(ye,{children:l.jsx("div",{className:"grid gap-3",children:W.lectures.map(D=>l.jsx(ve,{className:"bg-background border",children:l.jsx(ye,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:D.imageUrl?l.jsx("img",{src:D.imageUrl,alt:D.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"No image"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:D.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:D.description||"No description available"})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(ee,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${D.name}"?`))try{await A(W.id,D.id)}catch(k){console.error(k),alert("Failed to delete lecture")}},children:l.jsx(Mn,{className:"h-3 w-3"})})})]})})},D.id))})})]},W.id))})]})]}),e&&l.jsx(zC,{year:I.yearNumber,yearType:I.type,onClose:()=>t(!1),onSave:O}),r&&a&&l.jsx(Rm,{subjectId:a.id,subjectName:a.name,yearType:I.type,onClose:()=>{i(!1),c(null)},onSave:U})]})}function km(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null);return E.useEffect(()=>{const m=rs(sf(Je,"lectures")),g=La(m,async v=>{var T;const y=[];for(const N of v.docs){const _=N.data(),w=N.id,A=N.ref,I=await xn(dt(A,"files")),O=[];I.forEach(k=>{var P;const j=k.data();O.push({id:k.id,title:j.title||"",fileUrl:j.fileUrl||"",fileType:j.fileType||"",fileSize:j.fileSize||"",description:j.description||"",uploadedAt:((P=j.uploadedAt)==null?void 0:P.toDate())||new Date,uploadedBy:j.uploadedBy||""})});const U=await xn(dt(A,"quizzes")),$=[];U.forEach(k=>{var P;const j=k.data();$.push({id:k.id,title:j.title||"",description:j.description||"",questions:j.questions||[],timeLimit:j.duration||30,passingScore:j.passRate||70,createdAt:((P=j.createdAt)==null?void 0:P.toDate())||new Date,createdBy:j.uploadedBy||""})});const W=await xn(dt(A,"videos")),D=[];W.empty?(_.videos||[]).forEach(j=>{var P,F;D.push({id:j.id||j.videoId||"",title:j.title||j.name||"",youtubeUrl:j.url||j.youtubeUrl||"",thumbnailUrl:j.thumbnailUrl||j.thumbnail||"",duration:j.duration||j.time||"",description:j.description||"",uploadedAt:((F=(P=j.uploadedAt)==null?void 0:P.toDate)==null?void 0:F.call(P))||new Date,uploadedBy:j.uploadedBy||j.uploader||"",imageUrl:j.thumbnailUrl||""})}):W.forEach(k=>{var P,F;const j=k.data();D.push({id:k.id,title:j.title||j.name||"",youtubeUrl:j.url||j.youtubeUrl||"",thumbnailUrl:j.thumbnailUrl||j.thumbnail||"",duration:j.duration||j.time||"",description:j.description||"",uploadedAt:((F=(P=j.uploadedAt)==null?void 0:P.toDate)==null?void 0:F.call(P))||new Date,uploadedBy:j.uploadedBy||j.uploader||"",imageUrl:j.thumbnailUrl||""})}),y.push({id:w,title:_.title||"",description:_.description||"",subject:_.subjectId||"Unknown",order:_.order||1,createdAt:((T=_.createdAt)==null?void 0:T.toDate())||new Date,createdBy:_.uploadedBy||"",videos:D,files:O,quizzes:$})}y.sort((N,_)=>(N.order||0)-(_.order||0)),e(y),r(!1)},v=>{console.error("Error fetching lectures:",v),a("Failed to fetch lectures"),r(!1)});return()=>g()},[]),{lectures:n,loading:t,error:i,createLecture:async(m,g)=>{try{const v=Ft(Je,"Subjects",g),y=dt(v,"lectures"),{videos:T,files:N,quizzes:_,...w}=m,A=await Gn(y,{...w,videos:T,subjectId:g});if(N&&N.length>0){const I=dt(A,"files");for(const O of N)await Gn(I,O)}if(_&&_.length>0){const I=dt(A,"quizzes");for(const O of _)await Gn(I,O)}}catch(v){throw console.error("Error creating lecture:",v),v}},updateLecture:async(m,g)=>{try{const v=rs(sf(Je,"lectures")),y=await xn(v);for(const T of y.docs)if(T.id===m){await or(T.ref,g);break}}catch(v){throw console.error("Error updating lecture:",v),v}},deleteLecture:async m=>{try{const g=rs(sf(Je,"lectures")),v=await xn(g);for(const y of v.docs)if(y.id===m){await vi(y.ref);break}}catch(g){throw console.error("Error deleting lecture:",g),g}}}}function w1(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[i,a]=E.useState(!1),{lectures:c,loading:d,error:f,createLecture:m,updateLecture:g}=km(),[v]=Yu(),y=v.get("lecture");v.get("tab");let T=c.filter(w=>w.title.toLowerCase().includes(n.toLowerCase())||w.subject.toLowerCase().includes(n.toLowerCase()));y&&(T=c.filter(w=>w.id===y));const N=()=>{r(null),a(!0)},_=w=>{r(w),a(!0)};return i?l.jsx(Rm,{lecture:t,onClose:()=>{a(!1),r(null)},onSave:async w=>{try{t?await g(t.id,w):await m(w,"default-subject"),a(!1),r(null)}catch(A){console.error("Error saving lecture:",A)}}}):(y&&c.find(w=>w.id===y),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Resources Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Organize educational content by lectures with videos, files, and quizzes"})]}),l.jsxs(ee,{onClick:N,className:"flex items-center gap-2",children:[l.jsx(Jt,{className:"h-4 w-4"}),"Create Lecture"]})]}),l.jsx(ve,{children:l.jsx(ye,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(rc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Oe,{placeholder:"Search lectures by title or subject...",value:n,onChange:w=>e(w.target.value),className:"pl-10"})]})})}),d&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(vo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading lectures..."})]})}),f&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"⚠️ Error loading lectures"}),l.jsx("p",{className:"text-muted-foreground",children:f})]})}),!d&&!f&&l.jsx("div",{className:"space-y-6",children:T.map(w=>l.jsxs(ve,{className:`hover:shadow-lg transition-all duration-200 border-l-4 ${y===w.id?"border-l-primary bg-primary/5":"border-l-primary/20 hover:border-l-primary"}`,children:[l.jsx(We,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(ci,{className:"h-5 w-5 text-primary"}),l.jsx(Ke,{className:"text-xl",children:w.title}),l.jsx(an,{variant:"secondary",children:w.subject})]}),l.jsx(Nt,{className:"text-base",children:w.description}),l.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(wu,{className:"h-3 w-3"}),w.createdBy]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ub,{className:"h-3 w-3"}),w.createdAt.toLocaleDateString()]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ee,{variant:"ghost",size:"icon",onClick:()=>_(w),children:l.jsx(Hu,{className:"h-4 w-4"})}),l.jsx(ee,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:l.jsx(Mn,{className:"h-4 w-4"})})]})]})}),l.jsx(ye,{children:l.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(bs,{className:"h-4 w-4 text-green-600"}),"Videos (",w.videos.length,")"]}),w.videos.length>0&&l.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>{w.videos.forEach(A=>window.open(A.youtubeUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Play All"})]}),w.videos.length>0?l.jsx("div",{className:"space-y-2",children:w.videos.map(A=>l.jsx("button",{onClick:()=>window.open(A.youtubeUrl,"_blank"),className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[A.thumbnailUrl&&l.jsx("img",{src:A.thumbnailUrl,alt:A.title,className:"w-16 h-12 object-cover rounded"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(bs,{className:"h-6 w-6 text-white"})})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:A.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(uf,{className:"h-3 w-3"}),A.duration]})]})]})},A.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(Rs,{className:"h-4 w-4 text-blue-600"}),"Files (",w.files.length,")"]}),w.files.length>0&&l.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>{w.files.forEach(A=>window.open(A.fileUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Download All"})]}),w.files.length>0?l.jsx("div",{className:"space-y-2",children:w.files.map(A=>l.jsx("button",{onClick:()=>window.open(A.fileUrl,"_blank"),className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(Rs,{className:"h-4 w-4 text-blue-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:A.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(an,{variant:"outline",className:"text-xs",children:A.fileType}),l.jsx("span",{children:A.fileSize})]})]})]})},A.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(ui,{className:"h-4 w-4 text-purple-600"}),"Quizzes (",w.quizzes.length,")"]}),w.quizzes.length>0&&l.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>{alert(`Starting all ${w.quizzes.length} quizzes for: ${w.title}`)},className:"h-6 px-2 text-xs",children:"Start All"})]}),w.quizzes.length>0?l.jsx("div",{className:"space-y-2",children:w.quizzes.map(A=>l.jsx("button",{onClick:()=>{alert(`Starting quiz: ${A.title}
Time limit: ${A.timeLimit} minutes
Passing score: ${A.passingScore}%`)},className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(ui,{className:"h-4 w-4 text-purple-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:A.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(uf,{className:"h-3 w-3"}),A.timeLimit,"min",l.jsx("span",{children:"•"}),l.jsxs("span",{children:[A.passingScore,"% pass"]})]})]})]})},A.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"})]})]})})]},w.id))}),!d&&!f&&T.length===0&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(ci,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No lectures found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No lectures match your search criteria.":"Start by creating your first lecture with videos, files, and quizzes."}),l.jsxs(ee,{onClick:N,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Create Lecture"]})]})})]}))}function t9({professor:n,onClose:e,onSave:t}){const[r,i]=E.useState({name:"",title:"",department:"",email:"",others:"",officeLocation:"",researchAreas:"",imageUrl:""}),[a,c]=E.useState(!1);E.useEffect(()=>{n&&i({name:n.name||"",title:n.title||"",department:n.department||"",email:n.email||"",others:n.others||"",officeLocation:n.officeLocation||"",researchAreas:(n.researchAreas||[]).join(", "),imageUrl:n.imageUrl||""})},[n]);const d=async f=>{f.preventDefault(),c(!0);try{const m={...r,researchAreas:r.researchAreas?r.researchAreas.split(",").map(g=>g.trim()).filter(Boolean):[]};t(m)}catch(m){console.error("Error saving professor:",m)}finally{c(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ee,{variant:"ghost",onClick:e,children:[l.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Professor":"Add Professor"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update professor information":"Add a new professor to the faculty"})]})]})}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsxs(Ke,{className:"flex items-center gap-2",children:[l.jsx(oo,{className:"h-5 w-5"}),"Professor Information"]}),l.jsx(Nt,{children:"Basic information about the professor"})]}),l.jsxs(ye,{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs(Fu,{className:"w-20 h-20",children:[l.jsx(zf,{src:r.imageUrl,alt:r.name}),l.jsx(Vu,{children:l.jsx(oo,{className:"w-8 h-8"})})]}),l.jsxs("div",{className:"space-y-2 flex-1",children:[l.jsx(Ce,{htmlFor:"imageUrl",children:"Profile Image URL"}),l.jsx(Oe,{id:"imageUrl",placeholder:"https://example.com/profile.jpg",value:r.imageUrl,onChange:f=>i(m=>({...m,imageUrl:f.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"name",children:"Full Name *"}),l.jsx(Oe,{id:"name",placeholder:"Dr. John Smith",value:r.name,onChange:f=>i(m=>({...m,name:f.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"title",children:"Title"}),l.jsx(Oe,{id:"title",placeholder:"e.g., Associate Professor",value:r.title,onChange:f=>i(m=>({...m,title:f.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Ce,{htmlFor:"department",className:"flex items-center gap-2",children:[l.jsx(lP,{className:"h-4 w-4"}),"Department"]}),l.jsx(Oe,{id:"department",placeholder:"Internal Medicine",value:r.department,onChange:f=>i(m=>({...m,department:f.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"others",children:"Others"}),l.jsx(Oe,{id:"others",placeholder:"Other contact or notes",value:r.others,onChange:f=>i(m=>({...m,others:f.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Ce,{htmlFor:"email",className:"flex items-center gap-2",children:[l.jsx(df,{className:"h-4 w-4"}),"Email Address"]}),l.jsx(Oe,{id:"email",type:"email",placeholder:"john.smith@university.edu",value:r.email,onChange:f=>i(m=>({...m,email:f.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Ce,{htmlFor:"officeLocation",className:"flex items-center gap-2",children:[l.jsx(xu,{className:"h-4 w-4"}),"Office Location"]}),l.jsx(Oe,{id:"officeLocation",placeholder:"Medical Building, Room 301",value:r.officeLocation,onChange:f=>i(m=>({...m,officeLocation:f.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"researchAreas",children:"Research Areas"}),l.jsx(Oe,{id:"researchAreas",placeholder:"e.g., Cardiology, Epidemiology",value:r.researchAreas,onChange:f=>i(m=>({...m,researchAreas:f.target.value}))})]}),l.jsx("div",{className:"space-y-2",children:l.jsx("div",{})})]})]})]}),r.name&&l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Preview"}),l.jsx(Nt,{children:"How the professor will appear in the system"})]}),l.jsx(ye,{children:l.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[l.jsxs(Fu,{className:"h-12 w-12",children:[l.jsx(zf,{src:r.imageUrl,alt:r.name}),l.jsx(Vu,{children:l.jsx(oo,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold",children:r.name}),l.jsx("p",{className:"text-sm text-muted-foreground",children:r.department}),l.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm text-muted-foreground",children:[r.email&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(df,{className:"h-3 w-3"}),l.jsx("span",{children:r.email})]}),r.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xu,{className:"h-3 w-3"}),l.jsx("span",{children:r.officeLocation})]}),r.others&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(oo,{className:"h-3 w-3"}),l.jsx("span",{children:r.others})]})]})]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ee,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(ee,{type:"submit",disabled:a,children:[l.jsx(Ao,{className:"h-4 w-4 mr-2"}),a?"Saving...":n?"Update Professor":"Add Professor"]})]})]})]})}function n9(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[i,a]=E.useState(!1),{professors:c,loading:d,error:f,createProfessor:m,updateProfessor:g,deleteProfessor:v,isOfflineMode:y}=hC(),T=c.filter(_=>_.name.toLowerCase().includes(n.toLowerCase())||_.department.toLowerCase().includes(n.toLowerCase())||_.email.toLowerCase().includes(n.toLowerCase())),N=async _=>{if(window.confirm("Are you sure you want to delete this professor?"))try{await v(_)}catch(w){console.error("Error deleting professor:",w),alert("Failed to delete professor. Please try again.")}};return i?l.jsx(t9,{professor:t,onClose:()=>{a(!1),r(null)},onSave:async _=>{try{t?await g(t.id,_):await m(_),a(!1),r(null)}catch(w){console.error("Error saving professor:",w),alert("Failed to save professor. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Professors Management"}),l.jsxs("p",{className:"text-muted-foreground",children:["Manage faculty information and profiles",y&&l.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:"• Working in offline mode"})]})]}),l.jsxs(ee,{onClick:()=>a(!0),children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]}),l.jsx(ve,{children:l.jsx(ye,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(rc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Oe,{placeholder:"Search professors by name, department, or email...",value:n,onChange:_=>e(_.target.value),className:"pl-10"})]})})}),d&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(vo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading professors..."})]})}),f&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"⚠️ Error loading professors"}),l.jsx("p",{className:"text-muted-foreground",children:f})]})}),!d&&!f&&l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:T.map(_=>l.jsxs(ve,{className:"hover:shadow-md transition-shadow",children:[l.jsx(We,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs(Fu,{className:"h-12 w-12",children:[l.jsx(zf,{src:_.imageUrl,alt:_.name}),l.jsx(Vu,{children:l.jsx(oo,{className:"h-6 w-6"})})]}),l.jsxs("div",{children:[l.jsx(Ke,{className:"text-lg",children:_.name}),l.jsx(an,{variant:"secondary",className:"text-xs",children:_.department})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ee,{variant:"ghost",size:"icon",onClick:()=>{r(_),a(!0)},children:l.jsx(Hu,{className:"h-4 w-4"})}),l.jsx(ee,{variant:"ghost",size:"icon",onClick:()=>N(_.id),className:"text-destructive hover:text-destructive",children:l.jsx(Mn,{className:"h-4 w-4"})})]})]})}),l.jsx(ye,{children:l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:_.title}),l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[l.jsx(df,{className:"h-4 w-4"}),l.jsx("span",{children:_.email})]})]}),_.phone&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(oo,{className:"h-4 w-4"}),l.jsx("span",{children:_.phone})]}),_.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(xu,{className:"h-4 w-4"}),l.jsx("span",{children:_.officeLocation})]}),_.bio&&l.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:_.bio}),_.researchAreas&&_.researchAreas.length>0&&l.jsx("div",{className:"flex gap-2 flex-wrap",children:_.researchAreas.map(w=>l.jsx(an,{children:w},w))}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_.website&&l.jsx("a",{href:_.website,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Website"}),_.linkedin&&l.jsx("a",{href:_.linkedin,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"LinkedIn"})]})]})})]},_.id))}),!d&&!f&&T.length===0&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(wu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No professors found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No professors match your search criteria.":"Start by adding your first professor."}),l.jsxs(ee,{onClick:()=>a(!0),children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]})})]})}function r9(n){if(!n)return 0;if(typeof n=="number")return n;const e=String(n).trim();if(/^\d+$/.test(e))return parseInt(e,10);const t=e.split(":").map(r=>parseInt(r,10));return t.length===3?t[0]*3600+(t[1]||0)*60+(t[2]||0):t.length===2?(t[0]||0)*60+(t[1]||0):0}function s9(n){if(!n||n<=0)return"0:00";const e=Math.floor(n/3600),t=Math.floor(n%3600/60),r=n%60;return e>0?`${e}:${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${t}:${String(r).padStart(2,"0")}`}function i9(){var j;const{id:n}=_T(),e=Qu(),{years:t,subjects:r,loading:i,createLecture:a,deleteLecture:c,deleteSubject:d,addVideo:f,addFile:m,addQuiz:g}=ud(),[v,y]=E.useState(null),[T,N]=E.useState(!1),[_,w]=E.useState(!1),[A,I]=E.useState(!1),[O,U]=E.useState(!1),$=r.find(P=>P.id===n),W=P=>{y(P||null),N(!0)},D=P=>{y(P||null),w(!0)},k=P=>{y(P||null),I(!0)};return T&&v?l.jsx($I,{lectureId:v,onClose:()=>{N(!1),y(null)},onSave:async P=>{$!=null&&$.id&&v&&await f($.id,v,P),N(!1),y(null)}}):_&&v?l.jsx(BI,{lectureId:v,onClose:()=>{w(!1),y(null)},onSave:async P=>{$!=null&&$.id&&v&&await m($.id,v,P),w(!1),y(null)}}):A&&v?l.jsx(UC,{lectureId:v,onClose:()=>{I(!1),y(null)},onSave:async P=>{$!=null&&$.id&&v&&await g($.id,v,P),I(!1),y(null)}}):O?l.jsx(Rm,{subjectId:($==null?void 0:$.id)||null,subjectName:$==null?void 0:$.name,yearType:(j=t.find(P=>P.id===($==null?void 0:$.yearId)))==null?void 0:j.type,onClose:()=>U(!1),onSave:async P=>{$!=null&&$.id&&await a(P),U(!1)}}):i?l.jsx("div",{children:"Loading..."}):$?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:$.name}),l.jsx("p",{className:"text-muted-foreground",children:"Subject details and lectures"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>U(!0),className:"flex items-center gap-2",children:[l.jsx(Jt,{className:"h-4 w-4"}),"Add Lecture"]}),l.jsx(ee,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if($&&confirm(`Delete subject "${$.name}"? This will remove all lectures.`))try{await d($.id),e("/admin/years")}catch(P){console.error(P),alert("Failed to delete subject")}},children:l.jsx(Mn,{className:"h-4 w-4"})}),l.jsx(Fn,{to:"/admin/years",children:l.jsx(ee,{variant:"ghost",children:"Back"})})]})]}),l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Lectures"}),l.jsx(Nt,{children:"All lectures for this subject"})]}),l.jsx(ye,{children:l.jsx("div",{className:"grid gap-4",children:$.lectures&&$.lectures.length>0?$.lectures.map(P=>{var M,L;const F=P.imageUrl||P.videos&&P.videos[0]&&P.videos[0].thumbnailUrl||"";return l.jsxs("div",{className:"p-3 border rounded-md flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[F?l.jsx("img",{src:F,alt:P.name,width:1280,height:720,style:{width:160,height:90,objectFit:"cover"},className:"rounded"}):l.jsx("div",{className:"w-40 h-24 bg-muted rounded flex items-center justify-center text-xs",children:"No image"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:P.name}),l.jsx("div",{className:"text-sm text-muted-foreground",children:P.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>W(P.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Video",children:[l.jsx(bs,{className:"h-3 w-3 text-blue-600"}),l.jsx("span",{children:"Add Video"})]}),l.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>D(P.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add File",children:[l.jsx(Rs,{className:"h-3 w-3 text-green-600"}),l.jsx("span",{children:"Add File"})]}),l.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>k(P.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Quiz",children:[l.jsx(ui,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{children:"Add Quiz"})]}),l.jsx(ee,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if($&&confirm(`Delete lecture "${P.name}"?`))try{await c($.id,P.id)}catch(J){console.error(J),alert("Failed to delete lecture")}},children:l.jsx(Mn,{className:"h-3 w-3"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[P.videos&&P.videos.length>0?(()=>{const J=(P.videos||[]).reduce((ie,re)=>ie+r9(re.duration||re.time||re.durationSeconds||re.length),0);return l.jsxs("button",{onClick:()=>e(`/admin/videos?lecture=${P.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:[l.jsx(bs,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",P.videos.length,")"]}),l.jsx("span",{className:"text-muted-foreground",children:s9(J)})]})})():l.jsx("button",{onClick:()=>e(`/admin/videos?lecture=${P.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:l.jsx(bs,{className:"h-4 w-4"})}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${P.id}&tab=files`),className:"text-xs text-green-600 flex items-center gap-1 px-2",title:"Files",children:[l.jsx(Rs,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((M=P.files)==null?void 0:M.length)||0,")"]})]}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${P.id}&tab=quizzes`),className:"text-xs text-purple-600 flex items-center gap-1 px-2",title:"Quizzes",children:[l.jsx(ui,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((L=P.quizzes)==null?void 0:L.length)||0,")"]})]})]})]})]},P.id)}):l.jsx("div",{className:"text-muted-foreground",children:"No lectures yet for this subject."})})})]})]}):l.jsx(ve,{children:l.jsxs(ye,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Subject not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"The subject you requested does not exist."}),l.jsx("div",{className:"mt-4",children:l.jsx(Fn,{to:"/admin/years",children:l.jsx(ee,{children:"Back to Years"})})})]})})}function o9({product:n,onClose:e,onSave:t}){const[r,i]=E.useState({name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",price:(n==null?void 0:n.price)||0,images:(n==null?void 0:n.images)||[""],categoryId:(n==null?void 0:n.categoryId)||""}),[a,c]=E.useState(!1),d=async v=>{v.preventDefault(),c(!0);try{const y={...r,images:r.images.filter(T=>T.trim()!=="")};t(y)}catch(y){console.error("Error saving product:",y)}finally{c(!1)}},f=()=>{i(v=>({...v,images:[...v.images,""]}))},m=(v,y)=>{i(T=>({...T,images:T.images.map((N,_)=>_===v?y:N)}))},g=v=>{i(y=>({...y,images:y.images.filter((T,N)=>N!==v)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ee,{variant:"ghost",onClick:e,children:[l.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Product":"Add Product"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update product details":"Create a new product"})]})]})}),l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsxs(Ke,{className:"flex items-center gap-2",children:[l.jsx(Hg,{className:"h-5 w-5 text-blue-600"}),"Product Information"]}),l.jsx(Nt,{children:"Basic information about the product"})]}),l.jsxs(ye,{className:"space-y-4",children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"name",children:"Product Name *"}),l.jsx(Oe,{id:"name",placeholder:"e.g., Medical Textbook",value:r.name,onChange:v=>i(y=>({...y,name:v.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"price",children:"Price *"}),l.jsx(Oe,{id:"price",type:"number",step:"0.01",placeholder:"0.00",value:r.price,onChange:v=>i(y=>({...y,price:parseFloat(v.target.value)||0})),required:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"description",children:"Description"}),l.jsx(yi,{id:"description",placeholder:"Describe the product...",value:r.description,onChange:v=>i(y=>({...y,description:v.target.value})),rows:4})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"categoryId",children:"Category ID (Optional)"}),l.jsx(Oe,{id:"categoryId",placeholder:"e.g., books, equipment",value:r.categoryId,onChange:v=>i(y=>({...y,categoryId:v.target.value}))})]})]})]}),l.jsxs(ve,{children:[l.jsx(We,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(Ke,{children:"Product Images"}),l.jsx(Nt,{children:"Add image URLs for the product"})]}),l.jsxs(ee,{type:"button",variant:"outline",onClick:f,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})}),l.jsx(ye,{className:"space-y-4",children:r.images.map((v,y)=>l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Oe,{placeholder:"https://example.com/image.jpg",value:v,onChange:T=>m(y,T.target.value)}),l.jsx(ee,{type:"button",variant:"ghost",size:"icon",onClick:async()=>{try{const T=document.createElement("input");T.type="file",T.accept="image/*",T.onchange=async()=>{var _;const N=(_=T.files)==null?void 0:_[0];if(N)try{const w=await tc(N);if(!w||typeof w!="string"||!w.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}m(y,w)}catch(w){const A=(w==null?void 0:w.message)||String(w);if(console.error("Upload error:",w),A.toLowerCase().includes("cloudinary cloud name is not configured")){const I=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!I){alert("No cloud name provided.");return}const O=window.prompt("Unsigned upload preset (leave empty to use signed server flow):","");xx(I,O||null);try{const U=await tc(N);if(!U||typeof U!="string"||!U.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}m(y,U)}catch(U){console.error("Retry upload error:",U),alert("Upload failed after configuring Cloudinary: "+(U.message||U))}}else alert("Image upload failed: "+(w.message||w))}},T.click()}catch(T){console.error(T),alert("Could not open file dialog")}},children:l.jsx(fb,{className:"h-4 w-4"})}),r.images.length>1&&l.jsx(ee,{type:"button",variant:"outline",size:"icon",onClick:()=>g(y),children:l.jsx(_u,{className:"h-4 w-4"})})]},y))})]}),r.name&&l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Preview"}),l.jsx(Nt,{children:"How the product will appear"})]}),l.jsx(ye,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-4",children:[r.images[0]&&r.images[0].trim()&&l.jsx("img",{src:r.images[0],alt:r.name,className:"w-20 h-20 object-cover rounded",onError:v=>{v.currentTarget.style.display="none"}}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:r.name}),l.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["$",r.price.toFixed(2)]}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.description}),r.categoryId&&l.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Category: ",r.categoryId]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ee,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(ee,{type:"submit",disabled:a,children:[l.jsx(Ao,{className:"h-4 w-4 mr-2"}),a?"Saving...":n?"Update Product":"Add Product"]})]})]})]})}function qI(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null);return E.useEffect(()=>{const m=rs(dt(Je,"orders"),Nm("orderDate","desc")),g=La(m,async v=>{try{const y=await xn(dt(Je,"products")),T={};y.forEach(_=>{const w=_.data();T[_.id]={id:_.id,name:w.name||w.title||"",price:w.price||0}});const N=[];v.forEach(_=>{var W,D;const w=_.data();let A=[];w.items&&Array.isArray(w.items)&&w.items.length>0?A=w.items:w.productsIds&&Array.isArray(w.productsIds)&&(A=w.productsIds.map(k=>{var j,P;return{productId:k,name:((j=T[k])==null?void 0:j.name)||k,quantity:1,price:((P=T[k])==null?void 0:P.price)||0}}));const I=w.total||w.totalAmount||w.totalPrice||0,O=w.address||w.shippingaddress||w.shippingAddress||"",U=w.userPhone||w.user_phone||w.phone||"";let $=new Date;w.createdAt&&typeof w.createdAt.toDate=="function"?$=w.createdAt.toDate():w.orderDate&&typeof w.orderDate.toDate=="function"?$=w.orderDate.toDate():w.orderDate&&($=new Date(w.orderDate)),N.push({id:_.id,userId:w.userId||w.user_id||"",username:w.username||w.userName||w.user_name||w.customerName||"",userName:w.userName||w.user_name||w.customerName||"",userEmail:w.userEmail||w.email||"",userPhone:U,address:O,items:A,total:I,iscompleted:w.iscompleted===!0||w.isCompleted===!0||!1,status:w.status||(w.iscompleted===!0?"completed":"pending"),createdAt:$,updatedAt:(D=(W=w.updatedAt)==null?void 0:W.toDate)==null?void 0:D.call(W)})}),e(N),r(!1)}catch(y){console.error("Error processing orders:",y),a("Failed to load orders"),r(!1)}},v=>{console.error("Failed to load orders:",v),a("Failed to load orders"),r(!1)});return()=>g()},[]),{orders:n,loading:t,error:i,createOrder:async m=>{try{await Gn(dt(Je,"orders"),{...m,createdAt:new Date})}catch(g){console.error("Error creating order:",g)}},updateOrder:async(m,g)=>{try{const v={...g,updatedAt:new Date};(g.status==="completed"||g.isCompleted)&&(v.isCompleted=!0,v.iscompleted=!0,v.completedAt=new Date,v.status="completed"),await or(Ft(Je,"orders",m),v)}catch(v){console.error("Error updating order:",v)}},deleteOrder:async m=>{try{await vi(Ft(Je,"orders",m))}catch(g){console.error("Error deleting order:",g)}}}}function a9(){const[n,e]=E.useState(""),[t,r]=E.useState(!1),[i,a]=E.useState(null),{products:c,loading:d,error:f,isOfflineMode:m,createProduct:g,updateProduct:v,deleteProduct:y,retryConnection:T}=dC(),{createOrder:N}=qI(),_=()=>{a(null),r(!0)},w=O=>{a(O),r(!0)},A=async(O,U)=>{confirm(`Are you sure you want to delete "${U}"?`)&&await y(O)};if(t)return l.jsx(o9,{product:i,onClose:()=>{r(!1),a(null)},onSave:async O=>{try{i?await v(i.id,O):await g(O),r(!1),a(null)}catch(U){console.error("Error saving product:",U),alert("Failed to save product. Please try again.")}}});const I=c.filter(O=>O.name.toLowerCase().includes(n.toLowerCase())||O.description.toLowerCase().includes(n.toLowerCase()));return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Store Management"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-muted-foreground",children:"Manage store products and categories"}),m&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),d&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(vo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}),f&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"⚠️ Error loading products"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:f}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(ee,{onClick:T,variant:"outline",children:"Retry Connection"}),l.jsx(ee,{onClick:()=>window.location.reload(),variant:"ghost",children:"Refresh Page"})]})]})}),!d&&!f&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[l.jsxs(ve,{children:[l.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Ke,{className:"text-sm font-medium",children:"Total Products"}),l.jsx(Hg,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(ye,{children:l.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),l.jsxs(ve,{children:[l.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Ke,{className:"text-sm font-medium",children:"Average Price"}),l.jsx(hb,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(ye,{children:l.jsxs("div",{className:"text-2xl font-bold",children:["$",c.length>0?(c.reduce((O,U)=>O+U.price,0)/c.length).toFixed(2):"0.00"]})})]}),l.jsxs(ve,{children:[l.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Ke,{className:"text-sm font-medium",children:"Categories"}),l.jsx(hu,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(ye,{children:l.jsx("div",{className:"text-2xl font-bold",children:new Set(c.map(O=>O.categoryId).filter(O=>O&&O.trim())).size})})]})]}),l.jsxs(VC,{defaultValue:"products",className:"space-y-6",children:[l.jsxs(vx,{className:"grid w-full grid-cols-2",children:[l.jsxs(Uu,{value:"products",className:"flex items-center gap-2",children:[l.jsx(Zv,{className:"h-4 w-4"}),"Products (",c.length,")"]}),l.jsxs(Uu,{value:"categories",className:"flex items-center gap-2",children:[l.jsx(hu,{className:"h-4 w-4"}),"Categories"]})]}),l.jsxs(zu,{value:"products",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"relative flex-1 max-w-sm",children:[l.jsx(rc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Oe,{placeholder:"Search products...",value:n,onChange:O=>e(O.target.value),className:"pl-10"})]}),l.jsxs(ee,{onClick:_,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),I.length===0?l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(Hg,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:n?"No products found":"No products yet"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"Try adjusting your search terms":"Add your first product to get started"}),!n&&l.jsxs(ee,{onClick:_,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add First Product"]})]})}):l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:I.map(O=>l.jsxs(ve,{className:"overflow-hidden",children:[l.jsxs("div",{className:"aspect-video bg-muted relative",children:[O.images&&O.images[0]?l.jsx("img",{src:O.images[0],alt:O.name,className:"w-full h-full object-cover",onError:U=>{U.currentTarget.style.display="none",U.currentTarget.nextElementSibling.style.display="flex"}}):null,l.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:O.images&&O.images[0]?"none":"flex"},children:l.jsx(fb,{className:"h-12 w-12 text-muted-foreground"})})]}),l.jsxs(We,{className:"pb-2",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsx(Ke,{className:"text-lg line-clamp-1",children:O.name}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(ee,{variant:"ghost",size:"icon",onClick:()=>w(O),className:"h-8 w-8",children:l.jsx(Hu,{className:"h-3 w-3"})}),l.jsx(ee,{variant:"ghost",size:"icon",onClick:()=>A(O.id,O.name),className:"h-8 w-8 text-destructive hover:text-destructive",children:l.jsx(Mn,{className:"h-3 w-3"})}),l.jsx(ee,{variant:"outline",size:"sm",onClick:async()=>{try{const U=window.prompt("Your full name:");if(!U)return;const $=window.prompt("Your email:");if(!$)return;const W=window.prompt("Quantity:","1")||"1",D=parseInt(W)||1,k=window.prompt("Phone (optional):","")||"",j=window.prompt("Address (optional):","")||"";await N({username:U,userName:U,userEmail:$,userPhone:k,address:j,items:[{productId:O.id,name:O.name,quantity:D,price:O.price}],total:O.price*D,status:"pending",createdAt:new Date}),alert("Order placed successfully")}catch(U){console.error(U),alert("Failed to place order")}},children:"Buy"})]})]}),l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",O.price.toFixed(2)]})]}),l.jsxs(ye,{className:"pt-0",children:[O.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:O.description}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[l.jsx("span",{children:O.createdAt.toLocaleDateString()}),O.categoryId&&l.jsx(an,{variant:"secondary",className:"text-xs",children:O.categoryId})]})]})]},O.id))})]}),l.jsxs(zu,{value:"categories",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Categories"}),l.jsxs(ee,{disabled:!0,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(hu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Category Management"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Category management will be implemented in the future."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"For now, you can specify category IDs when creating products."})]})})]})]})]})]})}function l9({order:n,onChangeStatus:e,onDelete:t}){var r,i;return l.jsxs(ve,{children:[l.jsx(We,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(Ke,{children:["Order for ",n.username||n.userName,l.jsx("div",{className:"text-xs text-muted-foreground",children:(i=(r=n.createdAt)==null?void 0:r.toLocaleString)==null?void 0:i.call(r)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(an,{variant:n.status==="completed"||n.iscompleted?"default":"secondary",children:[n.status,n.iscompleted?" • completed":""]}),l.jsxs(ee,{variant:"ghost",size:"sm",onClick:()=>e(n.id,"completed"),children:[l.jsx(K0,{className:"h-4 w-4 mr-1"})," Complete"]}),l.jsx(ee,{variant:"ghost",size:"icon",onClick:()=>t(n.id),className:"text-destructive",children:l.jsx(Mn,{className:"h-4 w-4"})})]})]})}),l.jsxs(ye,{children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact"}),l.jsx("div",{className:"font-medium",children:n.username||n.userName}),l.jsx("div",{className:"text-sm",children:n.userEmail}),n.userPhone&&l.jsx("div",{className:"text-sm",children:n.userPhone}),n.address&&l.jsx("div",{className:"text-sm",children:n.address})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Items"}),l.jsxs("div",{className:"space-y-2 mt-2",children:[n.items&&n.items.length>0?n.items.map((a,c)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm",children:[a.name," x",a.quantity]}),l.jsxs("div",{className:"font-medium",children:["$",(a.price*a.quantity).toFixed(2)]})]},c)):l.jsx("div",{className:"text-sm text-muted-foreground",children:"No item details. Products IDs may be attached in the raw order."}),n.productsIds&&n.productsIds.length>0&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Product IDs: ",(n.productsIds||[]).join(", ")]}),l.jsxs("div",{className:"flex items-center justify-between pt-2 border-t mt-2",children:[l.jsx("div",{className:"font-medium",children:"Total"}),l.jsxs("div",{className:"font-bold",children:["$",(n.total||0).toFixed(2)]})]})]})]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsxs(ee,{onClick:()=>e(n.id,"paid"),children:[l.jsx(K0,{className:"h-4 w-4 mr-2"})," Mark Paid"]}),l.jsxs(ee,{variant:"outline",onClick:()=>e(n.id,"cancelled"),children:[l.jsx(dP,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]})]},n.id)}function c9(){const{orders:n,loading:e,error:t,updateOrder:r,deleteOrder:i}=qI(),a=async(d,f)=>{d&&await r(d,{status:f})},c=async d=>{d&&confirm("Delete this order?")&&await i(d)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Orders"}),l.jsx("p",{className:"text-muted-foreground",children:"View and manage store orders"})]})}),e&&l.jsx("div",{children:"Loading..."}),t&&l.jsx("div",{className:"text-destructive",children:t}),!e&&!t&&l.jsx("div",{className:"grid gap-4",children:n.map(d=>l.jsx(l9,{order:d,onChangeStatus:a,onDelete:c},d.id))})]})}function wx(n,e){const[t,r]=E.useState([]),[i,a]=E.useState(!0),[c,d]=E.useState(null);return E.useEffect(()=>{let f=null,m=!0;return(async()=>{if(!n){r([]),a(!1);return}try{const v=rs(sf(Je,"lectures"),J3(B3(),"==",n)),y=await xn(v);if(y.empty){m&&(r([]),a(!1));return}const T=y.docs[0],N=dt(T.ref,e);f=La(N,_=>{if(!m)return;const w=[];_.forEach(A=>{const I=A.data();w.push({id:A.id,...I})}),r(w),a(!1)},_=>{console.error(`Failed to subscribe to ${e}:`,_),d(`Failed to load ${e}`),a(!1)})}catch(v){console.error(`Error resolving lecture for ${e}:`,v),m&&(d(v.message||String(v)),a(!1))}})(),()=>{m=!1,f&&f()}},[n,e]),{items:t,loading:i,error:c}}function u9(n){return wx(n,"videos")}function d9(n){return wx(n,"files")}function WI(n){return wx(n,"quizzes")}function h9(){var m;const[n]=Yu(),e=n.get("lecture"),{lectures:t,loading:r,error:i}=km(),{items:a,loading:c,error:d}=u9(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(d||i)return l.jsx("div",{className:"text-destructive",children:d||i});const f=t.find(g=>g.id===e);return f?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Videos for ",f.title||f.id]}),l.jsx("p",{className:"text-muted-foreground",children:f.description})]}),l.jsx("div",{children:l.jsx(Fn,{to:"/admin/resources",children:l.jsx(ee,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ve,{children:[l.jsx(We,{children:l.jsxs(Ke,{children:["Videos (",((m=f.videos)==null?void 0:m.length)||0,")"]})}),l.jsx(ye,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[g.thumbnailUrl?l.jsx("img",{src:g.thumbnailUrl,alt:g.title,className:"w-32 h-18 object-cover rounded"}):l.jsx("div",{className:"w-32 h-18 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsxs(ee,{onClick:()=>window.open(g.url||g.youtubeUrl||"","_blank"),children:[" ",l.jsx(bs,{className:"h-4 w-4 mr-2"})," Play "]})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No videos available for this lecture."})})]})]}):l.jsx(ve,{children:l.jsxs(ye,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its videos."}),l.jsx("div",{className:"mt-4",children:l.jsx(Fn,{to:"/admin/years",children:l.jsx(ee,{children:"Back to Years"})})})]})})}function f9(){var m;const[n]=Yu(),e=n.get("lecture"),{lectures:t,loading:r,error:i}=km(),{items:a,loading:c,error:d}=d9(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(d||i)return l.jsx("div",{className:"text-destructive",children:d||i});const f=t.find(g=>g.id===e);return f?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Files for ",f.title||f.id]}),l.jsx("p",{className:"text-muted-foreground",children:f.description})]}),l.jsx("div",{children:l.jsx(Fn,{to:"/admin/resources",children:l.jsx(ee,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ve,{children:[l.jsx(We,{children:l.jsxs(Ke,{children:["Files (",((m=f.files)==null?void 0:m.length)||0,")"]})}),l.jsx(ye,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Rs,{className:"h-6 w-6 text-blue-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||g.name||"Untitled File"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsx(ee,{onClick:()=>window.open(g.fileUrl||g.url||"_blank"),children:"Download"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No files available for this lecture."})})]})]}):l.jsx(ve,{children:l.jsxs(ye,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its files."}),l.jsx("div",{className:"mt-4",children:l.jsx(Fn,{to:"/admin/years",children:l.jsx(ee,{children:"Back to Years"})})})]})})}function m9(){var m;const[n]=Yu(),e=n.get("lecture"),{lectures:t,loading:r,error:i}=km(),{items:a,loading:c,error:d}=WI(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(d||i)return l.jsx("div",{className:"text-destructive",children:d||i});const f=t.find(g=>g.id===e);return f?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Quizzes for ",f.title||f.id]}),l.jsx("p",{className:"text-muted-foreground",children:f.description})]}),l.jsx("div",{children:l.jsx(Fn,{to:"/admin/resources",children:l.jsx(ee,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ve,{children:[l.jsx(We,{children:l.jsxs(Ke,{children:["Quizzes (",((m=f.quizzes)==null?void 0:m.length)||0,")"]})}),l.jsx(ye,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ui,{className:"h-6 w-6 text-purple-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled Quiz"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("strong",{children:g.type||"multiple_choice"})]})]})]}),l.jsx("div",{children:(g.type||"multiple_choice")==="flashcard"?l.jsx(ee,{onClick:()=>window.location.href=`/admin/flashcards?lecture=${e}&quiz=${g.id}`,children:"Flashcards"}):l.jsx(ee,{onClick:()=>alert("Multiple choice runner not implemented. Use Flashcards or implement MCQ runner."),children:"Start"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No quizzes available for this lecture."})})]})]}):l.jsx(ve,{children:l.jsxs(ye,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its quizzes."}),l.jsx("div",{className:"mt-4",children:l.jsx(Fn,{to:"/admin/years",children:l.jsx(ee,{children:"Back to Years"})})})]})})}var _x="Progress",Ex=100,[p9,K9]=xi(_x),[g9,v9]=p9(_x),HI=E.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:i,getValueLabel:a=y9,...c}=n;(i||i===0)&&!_1(i)&&console.error(x9(`${i}`,"Progress"));const d=_1(i)?i:Ex;r!==null&&!E1(r,d)&&console.error(w9(`${r}`,"Progress"));const f=E1(r,d)?r:null,m=$f(f)?a(f,d):void 0;return l.jsx(g9,{scope:t,value:f,max:d,children:l.jsx(Ge.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":$f(f)?f:void 0,"aria-valuetext":m,role:"progressbar","data-state":QI(f,d),"data-value":f??void 0,"data-max":d,...c,ref:e})})});HI.displayName=_x;var KI="ProgressIndicator",GI=E.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,i=v9(KI,t);return l.jsx(Ge.div,{"data-state":QI(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});GI.displayName=KI;function y9(n,e){return`${Math.round(n/e*100)}%`}function QI(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function $f(n){return typeof n=="number"}function _1(n){return $f(n)&&!isNaN(n)&&n>0}function E1(n,e){return $f(n)&&!isNaN(n)&&n<=e&&n>=0}function x9(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ex}\`.`}function w9(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ex} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var YI=HI,_9=GI;const XI=E.forwardRef(({className:n,value:e,...t},r)=>l.jsx(YI,{ref:r,className:st("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:l.jsx(_9,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));XI.displayName=YI.displayName;function E9(){const[n]=Yu(),e=n.get("lecture"),t=n.get("quiz"),{items:r,loading:i,error:a}=WI(e),c=r.find(M=>M.id===t),[d,f]=E.useState(0),[m,g]=E.useState([]);if(i)return l.jsx("div",{children:"Loading..."});if(a)return l.jsx("div",{className:"text-destructive",children:a});if(!c)return l.jsx(ve,{children:l.jsxs(ye,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Quiz not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a quiz to start flashcards."}),l.jsx("div",{className:"mt-4",children:l.jsx(Fn,{to:"/admin/quizzes",children:l.jsx(ee,{children:"Back"})})})]})});const v=c.questions||[],y=v.reduce((M,L)=>M+(L.weight&&Number(L.weight)||1),0),T=v[d],N=T&&(T.weight||1)||1,_=m[d]??0,[w,A]=E.useState(!1),[I,O]=E.useState([]),[U,$]=E.useState(null);E.useEffect(()=>{A(!1),O([]),$(null)},[d]);const W=(M,L)=>{const J=[...m];J[M]=L,g(J)},D=m.reduce((M,L,J)=>M+(L||0),0),k=Math.round(D/y*100),j=M=>{if(!M)return[{type:"text",value:""}];const L=[],J=/\[\[(.+?)\]\]/g;let ie=0,re;for(;(re=J.exec(M))!==null;)re.index>ie&&L.push({type:"text",value:M.slice(ie,re.index)}),L.push({type:"blank",value:re[1]}),ie=J.lastIndex;return ie<M.length&&L.push({type:"text",value:M.slice(ie)}),L},P=()=>{const M=(T==null?void 0:T.question)||"",J=j(M).filter(ie=>ie.type==="blank");J.length>0?O(J.map(()=>"")):O([""]),$(null),A(!0)},F=()=>{const M=(T==null?void 0:T.question)||"",J=j(M).filter(K=>K.type==="blank").map(K=>K.value);let ie=[];J.length>0?ie=J:T&&Array.isArray(T.options)&&typeof T.correctAnswer=="number"?ie=[T.options[T.correctAnswer]||""]:T&&(T.answer||T.correct)&&(ie=[String(T.answer||T.correct)]);const ae=I.map((K,ne)=>{const ce=(ie[ne]??ie[0]??"").toString().trim().toLowerCase();return K.toString().trim().toLowerCase()===ce&&ce!==""}).every(Boolean);$(ae?"Correct":"Incorrect"),ae&&W(d,N)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Flashcards: ",c.title]}),l.jsx("p",{className:"text-muted-foreground",children:"Fill marks per question. Total progress shows weighted score."})]}),l.jsx("div",{children:l.jsx(Fn,{to:"/admin/quizzes",children:l.jsx(ee,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ve,{children:[l.jsx(We,{children:l.jsx(Ke,{children:"Progress"})}),l.jsxs(ye,{children:[l.jsxs("div",{className:"mb-2 text-sm",children:["Total: ",y," points — Current: ",D," points"]}),l.jsx(XI,{value:k}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[k,"%"]})]})]}),l.jsxs(ve,{children:[l.jsx(We,{children:l.jsxs(Ke,{children:["Question ",d+1," / ",v.length]})}),l.jsx(ye,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"font-medium",children:w?l.jsxs("div",{className:"space-y-2",children:[(()=>{const M=j(T.question||"");let L=0;return l.jsxs("div",{children:[M.map((J,ie)=>{if(J.type==="text")return l.jsx("span",{children:J.value},ie);const re=L++;return l.jsx("input",{value:I[re]??"",onChange:ae=>O(K=>{const ne=[...K];return ne[re]=ae.target.value,ne}),placeholder:"Fill the blank",className:"border-b-2 border-gray-300 px-1 mx-1"},ie)}),M.length===1&&M[0].type==="text"&&l.jsx("div",{children:l.jsx("input",{value:I[0]??"",onChange:J=>O(ie=>{const re=[...ie];return re[0]=J.target.value,re}),placeholder:"Answer",className:"border-b-2 border-gray-300 px-1"})})]})})(),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx(ee,{onClick:F,children:"Check"}),l.jsx(ee,{variant:"outline",onClick:()=>{A(!1),$(null)},children:"Cancel"}),U&&l.jsx("div",{className:"ml-2 text-sm",children:U})]})]}):l.jsx("span",{role:"button",tabIndex:0,onClick:P,onKeyDown:M=>{M.key==="Enter"&&P()},children:T.question})}),T.imageUrl&&l.jsx("img",{src:T.imageUrl,alt:"question",className:"w-full max-w-md object-contain"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Weight: ",N]}),l.jsxs("label",{className:"text-sm",children:["Mark (0 - ",N,")"]}),l.jsx("input",{type:"number",min:0,max:N,value:_,onChange:M=>W(d,Math.max(0,Math.min(N,Number(M.target.value)||0))),className:"border rounded px-2 py-1 w-24"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ee,{disabled:d===0,onClick:()=>f(M=>Math.max(0,M-1)),children:"Previous"}),l.jsx(ee,{disabled:d===v.length-1,onClick:()=>f(M=>Math.min(v.length-1,M+1)),children:"Next"}),l.jsx(ee,{variant:"outline",onClick:()=>{g([]),f(0)},children:"Reset"})]}),l.jsx("div",{className:"mt-4",children:l.jsx(ee,{onClick:()=>alert(`Final score: ${D}/${y} (${k}%)`),children:"Finish"})})]})})]})]})}function b9(){return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),l.jsx("p",{className:"text-muted-foreground",children:"Configure application settings and preferences"})]}),l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(pb,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"This section will provide configuration options for the admin panel."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Features: User management, system configuration, backup settings, security options."})]})})]})}function T9(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null);return E.useEffect(()=>{const m=rs(dt(Je,"maps")),g=La(m,v=>{const y=[];v.forEach(T=>{var _,w;const N=T.data();y.push({id:T.id,name:N.name||"",location:N.location||"",description:N.description||N.desc||"",type:N.type||N.mapType||"",video_url:N.video_url||N.videoUrl||"",createdAt:((w=(_=N.createdAt)==null?void 0:_.toDate)==null?void 0:w.call(_))||void 0})}),e(y),r(!1)},v=>{console.error("Failed to load maps:",v),a("Failed to load maps"),r(!1)});return()=>g()},[]),{maps:n,loading:t,error:i,createMap:async m=>{await Gn(dt(Je,"maps"),{...m,createdAt:new Date})},updateMap:async(m,g)=>{await or(Ft(Je,"maps",m),g)},deleteMap:async m=>{await vi(Ft(Je,"maps",m))}}}function S9(){const{maps:n,loading:e,error:t,createMap:r,updateMap:i,deleteMap:a}=T9(),[c,d]=E.useState({name:"",location:"",description:"",video_url:"",type:""}),[f,m]=E.useState(!1),[g,v]=E.useState(null),y=()=>d({name:"",location:"",description:"",video_url:"",type:""}),T=async N=>{if(N.preventDefault(),!!c.name.trim()){m(!0);try{g?await i(g,c):await r(c),y(),v(null)}catch(_){console.error("Error saving map:",_),alert("Failed to save map")}finally{m(!1)}}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xu,{className:"h-6 w-6 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold",children:"Maps"})]}),l.jsxs(ve,{children:[l.jsx(We,{children:l.jsx(Ke,{children:"Add Map"})}),l.jsx(ye,{children:l.jsxs("form",{onSubmit:T,className:"grid md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{children:"Name"}),l.jsx(Oe,{value:c.name,onChange:N=>d(_=>({..._,name:N.target.value})),placeholder:"Map name",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{children:"Location"}),l.jsx(Oe,{value:c.location,onChange:N=>d(_=>({..._,location:N.target.value})),placeholder:"Location"})]}),l.jsxs("div",{className:"space-y-2 md:col-span-3",children:[l.jsx(Ce,{children:"Description"}),l.jsx("textarea",{value:c.description,onChange:N=>d(_=>({..._,description:N.target.value})),placeholder:"Short description",className:"w-full border rounded px-3 py-2",rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{children:"Type"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2",value:c.type,onChange:N=>d(_=>({..._,type:N.target.value})),children:[l.jsx("option",{value:"",children:"Select type"}),l.jsx("option",{value:"قاعة دراسية",children:"قاعة دراسية"}),l.jsx("option",{value:"لابات",children:"لابات"}),l.jsx("option",{value:"مدرج",children:"مدرج"}),l.jsx("option",{value:"قاعات امتحانات",children:"قاعات امتحانات"}),l.jsx("option",{value:"مطعم",children:"مطعم"}),l.jsx("option",{value:"مصلى",children:"مصلى"}),l.jsx("option",{value:"أخرى",children:"أخرى"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{children:"Video URL"}),l.jsx(Oe,{value:c.video_url,onChange:N=>d(_=>({..._,video_url:N.target.value})),placeholder:"https://..."})]}),l.jsx("div",{className:"md:col-span-3 flex justify-end space-x-2",children:g?l.jsxs(l.Fragment,{children:[l.jsx(ee,{type:"button",variant:"outline",onClick:()=>{v(null),y()},children:"Cancel"}),l.jsxs(ee,{type:"submit",disabled:f,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),f?"Saving...":"Save"]})]}):l.jsxs(ee,{type:"submit",disabled:f,children:[l.jsx(Jt,{className:"h-4 w-4 mr-2"}),f?"Adding...":"Add"]})})]})})]}),l.jsxs(ve,{children:[l.jsx(We,{children:l.jsxs(Ke,{children:["All Maps (",n.length,")"]})}),l.jsx(ye,{children:e?l.jsx("div",{children:"Loading..."}):t?l.jsx("div",{className:"text-destructive",children:t}):n.length===0?l.jsx("div",{className:"text-muted-foreground",children:"No maps yet."}):l.jsx("div",{className:"grid gap-3",children:n.map(N=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:N.name}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:N.location}),N.type&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("span",{className:"font-medium",children:N.type})]}),N.description&&l.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:N.description}),N.video_url&&l.jsx("a",{className:"text-xs text-blue-600 hover:underline",href:N.video_url,target:"_blank",rel:"noreferrer",children:N.video_url})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>{v(N.id),d({name:N.name||"",location:N.location||"",description:N.description||"",video_url:N.video_url||"",type:N.type||""}),window.scrollTo({top:0,behavior:"smooth"})},className:"",children:"Edit"}),l.jsx(ee,{variant:"ghost",size:"icon",onClick:()=>a(N.id),className:"text-destructive",children:l.jsx(Mn,{className:"h-4 w-4"})})]})]},N.id))})})]})]})}function N9({research:n,onClose:e,onSave:t}){const[r,i]=E.useState({projectTitle:"",abstract:"",fieldOfResearch:[],contactPerson:[],authorshipPosition:[],projectDuration:"",requiredSkills:[],supervisor:""}),[a,c]=E.useState(""),[d,f]=E.useState("");E.useEffect(()=>{n&&i({projectTitle:n.projectTitle||"",abstract:n.abstract||"",fieldOfResearch:n.fieldOfResearch||[],contactPerson:n.contactPerson||[],authorshipPosition:n.authorshipPosition||[],projectDuration:n.projectDuration||"",requiredSkills:n.requiredSkills||[],supervisor:n.supervisor||""})},[n]);const m=()=>{const N=a.trim();N&&(r.fieldOfResearch.includes(N)||i(_=>({..._,fieldOfResearch:[..._.fieldOfResearch,N]})),c(""))},g=()=>{const N=d.trim();N&&(r.requiredSkills.includes(N)||i(_=>({..._,requiredSkills:[..._.requiredSkills,N]})),f(""))},v=N=>i(_=>({..._,fieldOfResearch:_.fieldOfResearch.filter(w=>w!==N)})),y=N=>i(_=>({..._,requiredSkills:_.requiredSkills.filter(w=>w!==N)})),T=N=>{N.preventDefault();const _={projectTitle:r.projectTitle,abstract:r.abstract,fieldOfResearch:r.fieldOfResearch,contactPerson:r.contactPerson,authorshipPosition:r.authorshipPosition,projectDuration:r.projectDuration,requiredSkills:r.requiredSkills,supervisor:r.supervisor,updatedAt:new Date,...n?{}:{createdAt:new Date}};t(_)};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ee,{variant:"ghost",onClick:e,children:[l.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Research":"Create Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Add or update research project details"})]})]})}),l.jsx("form",{onSubmit:T,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Project Details"}),l.jsx(Nt,{children:"Title and abstract"})]}),l.jsxs(ye,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"title",children:"Project Title *"}),l.jsx(Oe,{id:"title",placeholder:"Enter project title...",value:r.projectTitle,onChange:N=>i(_=>({..._,projectTitle:N.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{htmlFor:"abstract",children:"Abstract"}),l.jsx(yi,{id:"abstract",placeholder:"Write a brief abstract...",value:r.abstract,onChange:N=>i(_=>({..._,abstract:N.target.value})),rows:8})]})]})]}),l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Fields & Skills"}),l.jsx(Nt,{children:"Fields of research and required skills"})]}),l.jsxs(ye,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Ce,{children:"Field of Research"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(Oe,{placeholder:"Add field e.g., Oncology",value:a,onChange:N=>c(N.target.value),onKeyDown:N=>{N.key==="Enter"&&(N.preventDefault(),m())}}),l.jsx(ee,{type:"button",onClick:m,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.fieldOfResearch.map(N=>l.jsxs(an,{variant:"secondary",className:"flex items-center gap-2",children:[N,l.jsx("button",{type:"button",onClick:()=>v(N),className:"ml-1 hover:text-destructive",children:l.jsx(_u,{className:"h-3 w-3"})})]},N))})]}),l.jsxs("div",{children:[l.jsx(Ce,{children:"Required Skills"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(Oe,{placeholder:"Add skill e.g., Data analysis",value:d,onChange:N=>f(N.target.value),onKeyDown:N=>{N.key==="Enter"&&(N.preventDefault(),g())}}),l.jsx(ee,{type:"button",onClick:g,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.requiredSkills.map(N=>l.jsxs(an,{variant:"secondary",className:"flex items-center gap-2",children:[N,l.jsx("button",{type:"button",onClick:()=>y(N),className:"ml-1 hover:text-destructive",children:l.jsx(_u,{className:"h-3 w-3"})})]},N))})]})]})]})]}),l.jsx("div",{className:"space-y-6",children:l.jsxs(ve,{children:[l.jsxs(We,{children:[l.jsx(Ke,{children:"Meta"}),l.jsx(Nt,{children:"Contact, supervisor and duration"})]}),l.jsxs(ye,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{children:"Contact Person(s)"}),l.jsx(Oe,{placeholder:"Comma separated names",value:r.contactPerson.join(", "),onChange:N=>i(_=>({..._,contactPerson:N.target.value.split(",").map(w=>w.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{children:"Authorship Positions"}),l.jsx(Oe,{placeholder:"Comma separated positions",value:r.authorshipPosition.join(", "),onChange:N=>i(_=>({..._,authorshipPosition:N.target.value.split(",").map(w=>w.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{children:"Supervisor"}),l.jsx(Oe,{placeholder:"Supervisor name",value:r.supervisor,onChange:N=>i(_=>({..._,supervisor:N.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{children:"Project Duration"}),l.jsx(Oe,{placeholder:"e.g., 6 months",value:r.projectDuration,onChange:N=>i(_=>({..._,projectDuration:N.target.value}))})]}),l.jsxs("div",{className:"flex justify-end",children:[l.jsx(ee,{variant:"ghost",onClick:e,className:"mr-2",children:"Cancel"}),l.jsx(ee,{type:"submit",children:"Save"})]})]})]})})]})})]})}const C9=[{id:"r1",projectTitle:"Impact of Early Clinical Exposure on Medical Students",abstract:"A study investigating how early clinical exposure affects students' clinical reasoning and confidence.",fieldOfResearch:["Medical Education","Clinical Skills"],contactPerson:["Dr. Sarah Johnson"],authorshipPosition:["Lead","Co-author"],projectDuration:"6 months",requiredSkills:["Clinical observation","Data analysis"],supervisor:"Prof. Michael Chen",createdAt:new Date,updatedAt:new Date}];function I9(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,a]=E.useState(null),[c,d]=E.useState(!1);E.useEffect(()=>{const v=async()=>{try{const T=rs(dt(Je,"research"));await xn(T);const N=rs(dt(Je,"research"),Nm("createdAt","desc"));return La(N,w=>{const A=[];w.forEach(I=>{var U,$;const O=I.data();A.push({id:I.id,projectTitle:O.projectTitle||O.title||"",abstract:O.abstract||"",fieldOfResearch:O.fieldOfResearch||[],contactPerson:O.contactPerson||[],authorshipPosition:O.authorshipPosition||[],projectDuration:O.projectDuration||"",requiredSkills:O.requiredSkills||[],supervisor:O.supervisor||"",createdAt:(U=O.createdAt)!=null&&U.toDate?O.createdAt.toDate():O.createdAt||new Date,updatedAt:($=O.updatedAt)!=null&&$.toDate?O.updatedAt.toDate():O.updatedAt||new Date})}),e(A),r(!1)},w=>{console.error("Error in research listener:",w),y()})}catch(T){return console.error("Firebase connection failed for research:",T),y(),null}},y=()=>{d(!0),e(C9),a(null),r(!1)};v()},[]);const f=async v=>{if(c){const y={id:`offline_${Date.now()}`,...v};e(T=>[y,...T]);return}try{await Gn(dt(Je,"research"),v)}catch(y){console.error("Error creating research:",y),d(!0),await f(v)}};return{research:n,loading:t,error:i,createResearch:f,updateResearch:async(v,y)=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(T=>T.map(N=>N.id===v?{...N,...y}:N));return}try{await or(Ft(Je,"research",v),y)}catch(T){console.error("Error updating research:",T),e(N=>N.map(_=>_.id===v?{..._,...y}:_))}},deleteResearch:async v=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(y=>y.filter(T=>T.id!==v));return}try{await vi(Ft(Je,"research",v))}catch(y){console.error("Error deleting research:",y),e(T=>T.filter(N=>N.id!==v))}},isOfflineMode:c}}function A9(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[i,a]=E.useState(!1),{research:c,loading:d,error:f,createResearch:m,updateResearch:g,deleteResearch:v}=I9(),y=c.filter(w=>w.projectTitle.toLowerCase().includes(n.toLowerCase())),T=()=>{r(null),a(!0)},N=w=>{r(w),a(!0)},_=async w=>{window.confirm("Are you sure you want to delete this research entry?")&&await v(w)};return i?l.jsx(N9,{research:t,onClose:()=>{a(!1),r(null)},onSave:async w=>{try{t?await g(t.id,w):await m(w),a(!1),r(null)}catch(A){console.error(A),alert("Failed to save. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage research projects and student/faculty submissions"})]}),l.jsxs(ee,{onClick:T,className:"flex items-center gap-2",children:[l.jsx(Jt,{className:"h-4 w-4"}),"Create Research"]})]}),l.jsx(ve,{children:l.jsx(ye,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(rc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Oe,{placeholder:"Search by project title...",value:n,onChange:w=>e(w.target.value),className:"pl-10"})]})})}),d&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx(vo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading research entries..."})]})}),f&&l.jsx(ve,{children:l.jsxs(ye,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"⚠️ Error loading research"}),l.jsx("p",{className:"text-muted-foreground",children:f})]})}),!d&&!f&&l.jsx("div",{className:"space-y-4",children:y.map(w=>l.jsx(ve,{className:"hover:shadow-md transition-shadow",children:l.jsx(ye,{className:"pt-6",children:l.jsx("div",{className:"flex gap-4",children:l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:w.projectTitle}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mt-2",children:w.abstract}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3 text-xs text-muted-foreground",children:(w.fieldOfResearch||[]).map(A=>l.jsx("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:A},A))})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(ee,{variant:"ghost",onClick:()=>N(w),children:l.jsx(Hu,{className:"h-4 w-4"})}),l.jsx(ee,{variant:"ghost",onClick:()=>_(w.id),children:l.jsx(Mn,{className:"h-4 w-4"})})]})]})})})})},w.id))})]})}const j9=()=>{const n=jo();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),l.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},P9=new Uk;function R9({children:n}){const{currentUser:e}=ux();return e?l.jsx(l.Fragment,{children:n}):l.jsx(Gh,{to:"/login"})}const b1=()=>l.jsx(L6,{children:l.jsx(Bk,{client:P9,children:l.jsxs(gk,{children:[l.jsx(nR,{}),l.jsx(kR,{}),l.jsx(BO,{basename:"/builder-stellar-world/",children:l.jsx(k6,{children:l.jsxs(kO,{children:[l.jsx(Mt,{path:"/login",element:l.jsx(K6,{})}),l.jsxs(Mt,{path:"/admin",element:l.jsx(R9,{children:l.jsx(B6,{})}),children:[l.jsx(Mt,{index:!0,element:l.jsx(J6,{})}),l.jsx(Mt,{path:"news",element:l.jsx(iU,{})}),l.jsx(Mt,{path:"years",element:l.jsx(Z5,{})}),l.jsx(Mt,{path:"years/:id",element:l.jsx(e9,{})}),l.jsx(Mt,{path:"subjects/:id",element:l.jsx(i9,{})}),l.jsx(Mt,{path:"resources",element:l.jsx(w1,{})}),l.jsx(Mt,{path:"resources/*",element:l.jsx(w1,{})}),l.jsx(Mt,{path:"VIDEOS",element:l.jsx(Gh,{to:"/admin/years",replace:!0})}),l.jsx(Mt,{path:"VIDEOS/*",element:l.jsx(Gh,{to:"/admin/years",replace:!0})}),l.jsx(Mt,{path:"professors",element:l.jsx(n9,{})}),l.jsx(Mt,{path:"store",element:l.jsx(a9,{})}),l.jsx(Mt,{path:"orders",element:l.jsx(c9,{})}),l.jsx(Mt,{path:"videos",element:l.jsx(h9,{})}),l.jsx(Mt,{path:"files",element:l.jsx(f9,{})}),l.jsx(Mt,{path:"quizzes",element:l.jsx(m9,{})}),l.jsx(Mt,{path:"flashcards",element:l.jsx(E9,{})}),l.jsx(Mt,{path:"research",element:l.jsx(A9,{})}),l.jsx(Mt,{path:"maps",element:l.jsx(S9,{})}),l.jsx(Mt,{path:"settings",element:l.jsx(b9,{})})]}),l.jsx(Mt,{path:"/",element:l.jsx(Gh,{to:"/admin"})}),l.jsx(Mt,{path:"*",element:l.jsx(j9,{})})]})})})]})})}),k9=document.getElementById("root");if(window.__appRoot)window.__appRoot.render(l.jsx(b1,{}));else{const n=sR.createRoot(k9);window.__appRoot=n,n.render(l.jsx(b1,{}))}
