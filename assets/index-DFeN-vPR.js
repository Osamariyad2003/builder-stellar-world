var PR=Object.defineProperty;var kE=t=>{throw TypeError(t)};var kR=(t,e,n)=>e in t?PR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var RE=(t,e,n)=>kR(t,typeof e!="symbol"?e+"":e,n),my=(t,e,n)=>e.has(t)||kE("Cannot "+n);var J=(t,e,n)=>(my(t,e,"read from private field"),n?n.call(t):e.get(t)),nt=(t,e,n)=>e.has(t)?kE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),De=(t,e,n,r)=>(my(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),xt=(t,e,n)=>(my(t,e,"access private method"),n);var Ef=(t,e,n,r)=>({set _(s){De(t,e,s,n)},get _(){return J(t,e,r)}});function RR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const OR="modulepreload",DR=function(t){return"/builder-stellar-world/"+t},OE={},LR=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=c(n.map(f=>{if(f=DR(f),f in OE)return;OE[f]=!0;const m=f.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":OR,m||(v.as="script"),v.crossOrigin="",v.href=f,h&&v.setAttribute("nonce",h),document.head.appendChild(v),m)return new Promise((w,b)=>{v.addEventListener("load",w),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return s.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function X1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gy={exports:{}},Ku={},yy={exports:{}},dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function MR(){if(DE)return dt;DE=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=y&&B[y]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function E(B,ee,ue){this.props=B,this.context=ee,this.refs=x,this.updater=ue||w}E.prototype.isReactComponent={},E.prototype.setState=function(B,ee){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ee,"setState")},E.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function A(){}A.prototype=E.prototype;function j(B,ee,ue){this.props=B,this.context=ee,this.refs=x,this.updater=ue||w}var C=j.prototype=new A;C.constructor=j,b(C,E.prototype),C.isPureReactComponent=!0;var L=Array.isArray,V=Object.prototype.hasOwnProperty,z={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function k(B,ee,ue){var Se,Le={},Te=null,we=null;if(ee!=null)for(Se in ee.ref!==void 0&&(we=ee.ref),ee.key!==void 0&&(Te=""+ee.key),ee)V.call(ee,Se)&&!P.hasOwnProperty(Se)&&(Le[Se]=ee[Se]);var Ce=arguments.length-2;if(Ce===1)Le.children=ue;else if(1<Ce){for(var He=Array(Ce),Ve=0;Ve<Ce;Ve++)He[Ve]=arguments[Ve+2];Le.children=He}if(B&&B.defaultProps)for(Se in Ce=B.defaultProps,Ce)Le[Se]===void 0&&(Le[Se]=Ce[Se]);return{$$typeof:t,type:B,key:Te,ref:we,props:Le,_owner:z.current}}function D(B,ee){return{$$typeof:t,type:B.type,key:ee,ref:B.ref,props:B.props,_owner:B._owner}}function R(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function O(B){var ee={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ue){return ee[ue]})}var U=/\/+/g;function F(B,ee){return typeof B=="object"&&B!==null&&B.key!=null?O(""+B.key):ee.toString(36)}function H(B,ee,ue,Se,Le){var Te=typeof B;(Te==="undefined"||Te==="boolean")&&(B=null);var we=!1;if(B===null)we=!0;else switch(Te){case"string":case"number":we=!0;break;case"object":switch(B.$$typeof){case t:case e:we=!0}}if(we)return we=B,Le=Le(we),B=Se===""?"."+F(we,0):Se,L(Le)?(ue="",B!=null&&(ue=B.replace(U,"$&/")+"/"),H(Le,ee,ue,"",function(Ve){return Ve})):Le!=null&&(R(Le)&&(Le=D(Le,ue+(!Le.key||we&&we.key===Le.key?"":(""+Le.key).replace(U,"$&/")+"/")+B)),ee.push(Le)),1;if(we=0,Se=Se===""?".":Se+":",L(B))for(var Ce=0;Ce<B.length;Ce++){Te=B[Ce];var He=Se+F(Te,Ce);we+=H(Te,ee,ue,He,Le)}else if(He=v(B),typeof He=="function")for(B=He.call(B),Ce=0;!(Te=B.next()).done;)Te=Te.value,He=Se+F(Te,Ce++),we+=H(Te,ee,ue,He,Le);else if(Te==="object")throw ee=String(B),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return we}function Q(B,ee,ue){if(B==null)return B;var Se=[],Le=0;return H(B,Se,"","",function(Te){return ee.call(ue,Te,Le++)}),Se}function K(B){if(B._status===-1){var ee=B._result;ee=ee(),ee.then(function(ue){(B._status===0||B._status===-1)&&(B._status=1,B._result=ue)},function(ue){(B._status===0||B._status===-1)&&(B._status=2,B._result=ue)}),B._status===-1&&(B._status=0,B._result=ee)}if(B._status===1)return B._result.default;throw B._result}var Z={current:null},W={transition:null},Y={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:W,ReactCurrentOwner:z};function ne(){throw Error("act(...) is not supported in production builds of React.")}return dt.Children={map:Q,forEach:function(B,ee,ue){Q(B,function(){ee.apply(this,arguments)},ue)},count:function(B){var ee=0;return Q(B,function(){ee++}),ee},toArray:function(B){return Q(B,function(ee){return ee})||[]},only:function(B){if(!R(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},dt.Component=E,dt.Fragment=n,dt.Profiler=s,dt.PureComponent=j,dt.StrictMode=r,dt.Suspense=h,dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,dt.act=ne,dt.cloneElement=function(B,ee,ue){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Se=b({},B.props),Le=B.key,Te=B.ref,we=B._owner;if(ee!=null){if(ee.ref!==void 0&&(Te=ee.ref,we=z.current),ee.key!==void 0&&(Le=""+ee.key),B.type&&B.type.defaultProps)var Ce=B.type.defaultProps;for(He in ee)V.call(ee,He)&&!P.hasOwnProperty(He)&&(Se[He]=ee[He]===void 0&&Ce!==void 0?Ce[He]:ee[He])}var He=arguments.length-2;if(He===1)Se.children=ue;else if(1<He){Ce=Array(He);for(var Ve=0;Ve<He;Ve++)Ce[Ve]=arguments[Ve+2];Se.children=Ce}return{$$typeof:t,type:B.type,key:Le,ref:Te,props:Se,_owner:we}},dt.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},dt.createElement=k,dt.createFactory=function(B){var ee=k.bind(null,B);return ee.type=B,ee},dt.createRef=function(){return{current:null}},dt.forwardRef=function(B){return{$$typeof:u,render:B}},dt.isValidElement=R,dt.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:K}},dt.memo=function(B,ee){return{$$typeof:f,type:B,compare:ee===void 0?null:ee}},dt.startTransition=function(B){var ee=W.transition;W.transition={};try{B()}finally{W.transition=ee}},dt.unstable_act=ne,dt.useCallback=function(B,ee){return Z.current.useCallback(B,ee)},dt.useContext=function(B){return Z.current.useContext(B)},dt.useDebugValue=function(){},dt.useDeferredValue=function(B){return Z.current.useDeferredValue(B)},dt.useEffect=function(B,ee){return Z.current.useEffect(B,ee)},dt.useId=function(){return Z.current.useId()},dt.useImperativeHandle=function(B,ee,ue){return Z.current.useImperativeHandle(B,ee,ue)},dt.useInsertionEffect=function(B,ee){return Z.current.useInsertionEffect(B,ee)},dt.useLayoutEffect=function(B,ee){return Z.current.useLayoutEffect(B,ee)},dt.useMemo=function(B,ee){return Z.current.useMemo(B,ee)},dt.useReducer=function(B,ee,ue){return Z.current.useReducer(B,ee,ue)},dt.useRef=function(B){return Z.current.useRef(B)},dt.useState=function(B){return Z.current.useState(B)},dt.useSyncExternalStore=function(B,ee,ue){return Z.current.useSyncExternalStore(B,ee,ue)},dt.useTransition=function(){return Z.current.useTransition()},dt.version="18.3.1",dt}var LE;function Tx(){return LE||(LE=1,yy.exports=MR()),yy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ME;function FR(){if(ME)return Ku;ME=1;var t=Tx(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,f){var m,y={},v=null,w=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(w=h.ref);for(m in h)r.call(h,m)&&!a.hasOwnProperty(m)&&(y[m]=h[m]);if(u&&u.defaultProps)for(m in h=u.defaultProps,h)y[m]===void 0&&(y[m]=h[m]);return{$$typeof:e,type:u,key:v,ref:w,props:y,_owner:s.current}}return Ku.Fragment=n,Ku.jsx=c,Ku.jsxs=c,Ku}var FE;function VR(){return FE||(FE=1,gy.exports=FR()),gy.exports}var o=VR(),_=Tx();const _e=X1(_),J1=RR({__proto__:null,default:_e},[_]),UR=1,$R=1e6;let vy=0;function zR(){return vy=(vy+1)%Number.MAX_SAFE_INTEGER,vy.toString()}const xy=new Map,VE=t=>{if(xy.has(t))return;const e=setTimeout(()=>{xy.delete(t),sd({type:"REMOVE_TOAST",toastId:t})},$R);xy.set(t,e)},BR=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,UR)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?VE(n):t.toasts.forEach(r=>{VE(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},qf=[];let Wf={toasts:[]};function sd(t){Wf=BR(Wf,t),qf.forEach(e=>{e(Wf)})}function qR({...t}){const e=zR(),n=s=>sd({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>sd({type:"DISMISS_TOAST",toastId:e});return sd({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function WR(){const[t,e]=_.useState(Wf);return _.useEffect(()=>(qf.push(e),()=>{const n=qf.indexOf(e);n>-1&&qf.splice(n,1)}),[t]),{...t,toast:qR,dismiss:n=>sd({type:"DISMISS_TOAST",toastId:n})}}var wy={exports:{}},xr={},_y={exports:{}},Ey={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE;function HR(){return UE||(UE=1,function(t){function e(W,Y){var ne=W.length;W.push(Y);e:for(;0<ne;){var B=ne-1>>>1,ee=W[B];if(0<s(ee,Y))W[B]=Y,W[ne]=ee,ne=B;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Y=W[0],ne=W.pop();if(ne!==Y){W[0]=ne;e:for(var B=0,ee=W.length,ue=ee>>>1;B<ue;){var Se=2*(B+1)-1,Le=W[Se],Te=Se+1,we=W[Te];if(0>s(Le,ne))Te<ee&&0>s(we,Le)?(W[B]=we,W[Te]=ne,B=Te):(W[B]=Le,W[Se]=ne,B=Se);else if(Te<ee&&0>s(we,ne))W[B]=we,W[Te]=ne,B=Te;else break e}}return Y}function s(W,Y){var ne=W.sortIndex-Y.sortIndex;return ne!==0?ne:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var h=[],f=[],m=1,y=null,v=3,w=!1,b=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(W){for(var Y=n(f);Y!==null;){if(Y.callback===null)r(f);else if(Y.startTime<=W)r(f),Y.sortIndex=Y.expirationTime,e(h,Y);else break;Y=n(f)}}function L(W){if(x=!1,C(W),!b)if(n(h)!==null)b=!0,K(V);else{var Y=n(f);Y!==null&&Z(L,Y.startTime-W)}}function V(W,Y){b=!1,x&&(x=!1,A(k),k=-1),w=!0;var ne=v;try{for(C(Y),y=n(h);y!==null&&(!(y.expirationTime>Y)||W&&!O());){var B=y.callback;if(typeof B=="function"){y.callback=null,v=y.priorityLevel;var ee=B(y.expirationTime<=Y);Y=t.unstable_now(),typeof ee=="function"?y.callback=ee:y===n(h)&&r(h),C(Y)}else r(h);y=n(h)}if(y!==null)var ue=!0;else{var Se=n(f);Se!==null&&Z(L,Se.startTime-Y),ue=!1}return ue}finally{y=null,v=ne,w=!1}}var z=!1,P=null,k=-1,D=5,R=-1;function O(){return!(t.unstable_now()-R<D)}function U(){if(P!==null){var W=t.unstable_now();R=W;var Y=!0;try{Y=P(!0,W)}finally{Y?F():(z=!1,P=null)}}else z=!1}var F;if(typeof j=="function")F=function(){j(U)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Q=H.port2;H.port1.onmessage=U,F=function(){Q.postMessage(null)}}else F=function(){E(U,0)};function K(W){P=W,z||(z=!0,F())}function Z(W,Y){k=E(function(){W(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){b||w||(b=!0,K(V))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(W){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var ne=v;v=Y;try{return W()}finally{v=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ne=v;v=W;try{return Y()}finally{v=ne}},t.unstable_scheduleCallback=function(W,Y,ne){var B=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?B+ne:B):ne=B,W){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ne+ee,W={id:m++,callback:Y,priorityLevel:W,startTime:ne,expirationTime:ee,sortIndex:-1},ne>B?(W.sortIndex=ne,e(f,W),n(h)===null&&W===n(f)&&(x?(A(k),k=-1):x=!0,Z(L,ne-B))):(W.sortIndex=ee,e(h,W),b||w||(b=!0,K(V))),W},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(W){var Y=v;return function(){var ne=v;v=Y;try{return W.apply(this,arguments)}finally{v=ne}}}}(Ey)),Ey}var $E;function KR(){return $E||($E=1,_y.exports=HR()),_y.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function GR(){if(zE)return xr;zE=1;var t=Tx(),e=KR();function n(i){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,l){c(i,l),c(i+"Capture",l)}function c(i,l){for(s[i]=l,i=0;i<l.length;i++)r.add(l[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function v(i){return h.call(y,i)?!0:h.call(m,i)?!1:f.test(i)?y[i]=!0:(m[i]=!0,!1)}function w(i,l,d,g){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,l,d,g){if(l===null||typeof l>"u"||w(i,l,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function x(i,l,d,g,N,T,M){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=N,this.mustUseProperty=d,this.propertyName=i,this.type=l,this.sanitizeURL=T,this.removeEmptyString=M}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){E[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0];E[l]=new x(l,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){E[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){E[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){E[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){E[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){E[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){E[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){E[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function j(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var l=i.replace(A,j);E[l]=new x(l,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var l=i.replace(A,j);E[l]=new x(l,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(A,j);E[l]=new x(l,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){E[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),E.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){E[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,l,d,g){var N=E.hasOwnProperty(l)?E[l]:null;(N!==null?N.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(b(l,d,N,g)&&(d=null),g||N===null?v(l)&&(d===null?i.removeAttribute(l):i.setAttribute(l,""+d)):N.mustUseProperty?i[N.propertyName]=d===null?N.type===3?!1:"":d:(l=N.attributeName,g=N.attributeNamespace,d===null?i.removeAttribute(l):(N=N.type,d=N===3||N===4&&d===!0?"":""+d,g?i.setAttributeNS(g,l,d):i.setAttribute(l,d))))}var L=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),z=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),O=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),W=Symbol.iterator;function Y(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var ne=Object.assign,B;function ee(i){if(B===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);B=l&&l[1]||""}return`
`+B+i}var ue=!1;function Se(i,l){if(!i||ue)return"";ue=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ae){var g=ae}Reflect.construct(i,[],l)}else{try{l.call()}catch(ae){g=ae}i.call(l.prototype)}else{try{throw Error()}catch(ae){g=ae}i()}}catch(ae){if(ae&&g&&typeof ae.stack=="string"){for(var N=ae.stack.split(`
`),T=g.stack.split(`
`),M=N.length-1,q=T.length-1;1<=M&&0<=q&&N[M]!==T[q];)q--;for(;1<=M&&0<=q;M--,q--)if(N[M]!==T[q]){if(M!==1||q!==1)do if(M--,q--,0>q||N[M]!==T[q]){var G=`
`+N[M].replace(" at new "," at ");return i.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",i.displayName)),G}while(1<=M&&0<=q);break}}}finally{ue=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?ee(i):""}function Le(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=Se(i.type,!1),i;case 11:return i=Se(i.type.render,!1),i;case 1:return i=Se(i.type,!0),i;default:return""}}function Te(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case z:return"Portal";case D:return"Profiler";case k:return"StrictMode";case F:return"Suspense";case H:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case R:return(i._context.displayName||"Context")+".Provider";case U:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Q:return l=i.displayName||null,l!==null?l:Te(i.type)||"Memo";case K:l=i._payload,i=i._init;try{return Te(i(l))}catch{}}return null}function we(i){var l=i.type;switch(i.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=l.render,i=i.displayName||i.name||"",l.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(l);case 8:return l===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ce(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function He(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ve(i){var l=He(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),g=""+i[l];if(!i.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var N=d.get,T=d.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return N.call(this)},set:function(M){g=""+M,T.call(this,M)}}),Object.defineProperty(i,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function st(i){i._valueTracker||(i._valueTracker=Ve(i))}function it(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return i&&(g=He(i)?i.checked?"true":"false":i.value),i=g,i!==d?(l.setValue(i),!0):!1}function ve(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ie(i,l){var d=l.checked;return ne({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function mt(i,l){var d=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;d=Ce(l.value!=null?l.value:d),i._wrapperState={initialChecked:g,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function an(i,l){l=l.checked,l!=null&&C(i,"checked",l,!1)}function zn(i,l){an(i,l);var d=Ce(l.value),g=l.type;if(d!=null)g==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(g==="submit"||g==="reset"){i.removeAttribute("value");return}l.hasOwnProperty("value")?Lt(i,l.type,d):l.hasOwnProperty("defaultValue")&&Lt(i,l.type,Ce(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(i.defaultChecked=!!l.defaultChecked)}function jr(i,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+i._wrapperState.initialValue,d||l===i.value||(i.value=l),i.defaultValue=l}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function Lt(i,l,d){(l!=="number"||ve(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var mn=Array.isArray;function Ir(i,l,d,g){if(i=i.options,l){l={};for(var N=0;N<d.length;N++)l["$"+d[N]]=!0;for(d=0;d<i.length;d++)N=l.hasOwnProperty("$"+i[d].value),i[d].selected!==N&&(i[d].selected=N),N&&g&&(i[d].defaultSelected=!0)}else{for(d=""+Ce(d),l=null,N=0;N<i.length;N++){if(i[N].value===d){i[N].selected=!0,g&&(i[N].defaultSelected=!0);return}l!==null||i[N].disabled||(l=i[N])}l!==null&&(l.selected=!0)}}function is(i,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},l,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function dn(i,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(n(92));if(mn(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),d=l}i._wrapperState={initialValue:Ce(d)}}function Ms(i,l){var d=Ce(l.value),g=Ce(l.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),l.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),g!=null&&(i.defaultValue=""+g)}function Fs(i){var l=i.textContent;l===i._wrapperState.initialValue&&l!==""&&l!==null&&(i.value=l)}function zt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kt(i,l){return i==null||i==="http://www.w3.org/1999/xhtml"?zt(l):i==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Bn,bn=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,g,N){MSApp.execUnsafeLocalFunction(function(){return i(l,d,g,N)})}:i}(function(i,l){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=l;else{for(Bn=Bn||document.createElement("div"),Bn.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Bn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}});function Ar(i,l){if(l){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=l;return}}i.textContent=l}var os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zr=["Webkit","ms","Moz","O"];Object.keys(os).forEach(function(i){zr.forEach(function(l){l=l+i.charAt(0).toUpperCase()+i.substring(1),os[l]=os[i]})});function Vs(i,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||os.hasOwnProperty(i)&&os[i]?(""+l).trim():l+"px"}function gi(i,l){i=i.style;for(var d in l)if(l.hasOwnProperty(d)){var g=d.indexOf("--")===0,N=Vs(d,l[d],g);d==="float"&&(d="cssFloat"),g?i.setProperty(d,N):i[d]=N}}var as=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qn(i,l){if(l){if(as[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Us(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ze=null;function Et(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var gt=null,Bt=null,Gt=null;function ie(i){if(i=ku(i)){if(typeof gt!="function")throw Error(n(280));var l=i.stateNode;l&&(l=Lh(l),gt(i.stateNode,i.type,l))}}function ye(i){Bt?Gt?Gt.push(i):Gt=[i]:Bt=i}function Ue(){if(Bt){var i=Bt,l=Gt;if(Gt=Bt=null,ie(i),l)for(i=0;i<l.length;i++)ie(l[i])}}function Tt(i,l){return i(l)}function lt(){}var yt=!1;function Re(i,l,d){if(yt)return i(l,d);yt=!0;try{return Tt(i,l,d)}finally{yt=!1,(Bt!==null||Gt!==null)&&(lt(),Ue())}}function Qt(i,l){var d=i.stateNode;if(d===null)return null;var g=Lh(d);if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var yi=!1;if(u)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){yi=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{yi=!1}function $s(i,l,d,g,N,T,M,q,G){var ae=Array.prototype.slice.call(arguments,3);try{l.apply(d,ae)}catch(fe){this.onError(fe)}}var zs=!1,vi=null,dr=!1,to=null,bl={onError:function(i){zs=!0,vi=i}};function qt(i,l,d,g,N,T,M,q,G){zs=!1,vi=null,$s.apply(bl,arguments)}function Nl(i,l,d,g,N,T,M,q,G){if(qt.apply(this,arguments),zs){if(zs){var ae=vi;zs=!1,vi=null}else throw Error(n(198));dr||(dr=!0,to=ae)}}function ls(i){var l=i,d=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(d=l.return),i=l.return;while(i)}return l.tag===3?d:null}function ma(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function cs(i){if(ls(i)!==i)throw Error(n(188))}function lh(i){var l=i.alternate;if(!l){if(l=ls(i),l===null)throw Error(n(188));return l!==i?null:i}for(var d=i,g=l;;){var N=d.return;if(N===null)break;var T=N.alternate;if(T===null){if(g=N.return,g!==null){d=g;continue}break}if(N.child===T.child){for(T=N.child;T;){if(T===d)return cs(N),i;if(T===g)return cs(N),l;T=T.sibling}throw Error(n(188))}if(d.return!==g.return)d=N,g=T;else{for(var M=!1,q=N.child;q;){if(q===d){M=!0,d=N,g=T;break}if(q===g){M=!0,g=N,d=T;break}q=q.sibling}if(!M){for(q=T.child;q;){if(q===d){M=!0,d=T,g=N;break}if(q===g){M=!0,g=T,d=N;break}q=q.sibling}if(!M)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?i:l}function fu(i){return i=lh(i),i!==null?Sl(i):null}function Sl(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var l=Sl(i);if(l!==null)return l;i=i.sibling}return null}var Tl=e.unstable_scheduleCallback,pu=e.unstable_cancelCallback,ch=e.unstable_shouldYield,qm=e.unstable_requestPaint,Vt=e.unstable_now,uh=e.unstable_getCurrentPriorityLevel,ga=e.unstable_ImmediatePriority,no=e.unstable_UserBlockingPriority,Br=e.unstable_NormalPriority,mu=e.unstable_LowPriority,dh=e.unstable_IdlePriority,ya=null,Pr=null;function hh(i){if(Pr&&typeof Pr.onCommitFiberRoot=="function")try{Pr.onCommitFiberRoot(ya,i,void 0,(i.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:ph,gu=Math.log,fh=Math.LN2;function ph(i){return i>>>=0,i===0?32:31-(gu(i)/fh|0)|0}var Cl=64,jl=4194304;function ro(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function va(i,l){var d=i.pendingLanes;if(d===0)return 0;var g=0,N=i.suspendedLanes,T=i.pingedLanes,M=d&268435455;if(M!==0){var q=M&~N;q!==0?g=ro(q):(T&=M,T!==0&&(g=ro(T)))}else M=d&~N,M!==0?g=ro(M):T!==0&&(g=ro(T));if(g===0)return 0;if(l!==0&&l!==g&&(l&N)===0&&(N=g&-g,T=l&-l,N>=T||N===16&&(T&4194240)!==0))return l;if((g&4)!==0&&(g|=d&16),l=i.entangledLanes,l!==0)for(i=i.entanglements,l&=g;0<l;)d=31-tr(l),N=1<<d,g|=i[d],l&=~N;return g}function Wm(i,l){switch(i){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xi(i,l){for(var d=i.suspendedLanes,g=i.pingedLanes,N=i.expirationTimes,T=i.pendingLanes;0<T;){var M=31-tr(T),q=1<<M,G=N[M];G===-1?((q&d)===0||(q&g)!==0)&&(N[M]=Wm(q,l)):G<=l&&(i.expiredLanes|=q),T&=~q}}function kr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function xa(){var i=Cl;return Cl<<=1,(Cl&4194240)===0&&(Cl=64),i}function so(i){for(var l=[],d=0;31>d;d++)l.push(i);return l}function io(i,l,d){i.pendingLanes|=l,l!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,l=31-tr(l),i[l]=d}function Mt(i,l){var d=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l,l=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<d;){var N=31-tr(d),T=1<<N;l[N]=0,g[N]=-1,i[N]=-1,d&=~T}}function oo(i,l){var d=i.entangledLanes|=l;for(i=i.entanglements;d;){var g=31-tr(d),N=1<<g;N&l|i[g]&l&&(i[g]|=l),d&=~N}}var vt=0;function ao(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var mh,Il,gh,yh,vh,yu=!1,Bs=[],On=null,us=null,ds=null,lo=new Map,qr=new Map,qs=[],Hm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xh(i,l){switch(i){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":lo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":qr.delete(l.pointerId)}}function hr(i,l,d,g,N,T){return i===null||i.nativeEvent!==T?(i={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:T,targetContainers:[N]},l!==null&&(l=ku(l),l!==null&&Il(l)),i):(i.eventSystemFlags|=g,l=i.targetContainers,N!==null&&l.indexOf(N)===-1&&l.push(N),i)}function Km(i,l,d,g,N){switch(l){case"focusin":return On=hr(On,i,l,d,g,N),!0;case"dragenter":return us=hr(us,i,l,d,g,N),!0;case"mouseover":return ds=hr(ds,i,l,d,g,N),!0;case"pointerover":var T=N.pointerId;return lo.set(T,hr(lo.get(T)||null,i,l,d,g,N)),!0;case"gotpointercapture":return T=N.pointerId,qr.set(T,hr(qr.get(T)||null,i,l,d,g,N)),!0}return!1}function wh(i){var l=Na(i.target);if(l!==null){var d=ls(l);if(d!==null){if(l=d.tag,l===13){if(l=ma(d),l!==null){i.blockedOn=l,vh(i.priority,function(){gh(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function wi(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var d=Al(i.domEventName,i.eventSystemFlags,l[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var g=new d.constructor(d.type,d);Ze=g,d.target.dispatchEvent(g),Ze=null}else return l=ku(d),l!==null&&Il(l),i.blockedOn=d,!1;l.shift()}return!0}function wa(i,l,d){wi(i)&&d.delete(l)}function _h(){yu=!1,On!==null&&wi(On)&&(On=null),us!==null&&wi(us)&&(us=null),ds!==null&&wi(ds)&&(ds=null),lo.forEach(wa),qr.forEach(wa)}function hs(i,l){i.blockedOn===l&&(i.blockedOn=null,yu||(yu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_h)))}function fs(i){function l(N){return hs(N,i)}if(0<Bs.length){hs(Bs[0],i);for(var d=1;d<Bs.length;d++){var g=Bs[d];g.blockedOn===i&&(g.blockedOn=null)}}for(On!==null&&hs(On,i),us!==null&&hs(us,i),ds!==null&&hs(ds,i),lo.forEach(l),qr.forEach(l),d=0;d<qs.length;d++)g=qs[d],g.blockedOn===i&&(g.blockedOn=null);for(;0<qs.length&&(d=qs[0],d.blockedOn===null);)wh(d),d.blockedOn===null&&qs.shift()}var _i=L.ReactCurrentBatchConfig,co=!0;function Yt(i,l,d,g){var N=vt,T=_i.transition;_i.transition=null;try{vt=1,vu(i,l,d,g)}finally{vt=N,_i.transition=T}}function Gm(i,l,d,g){var N=vt,T=_i.transition;_i.transition=null;try{vt=4,vu(i,l,d,g)}finally{vt=N,_i.transition=T}}function vu(i,l,d,g){if(co){var N=Al(i,l,d,g);if(N===null)ig(i,l,g,_a,d),xh(i,g);else if(Km(N,i,l,d,g))g.stopPropagation();else if(xh(i,g),l&4&&-1<Hm.indexOf(i)){for(;N!==null;){var T=ku(N);if(T!==null&&mh(T),T=Al(i,l,d,g),T===null&&ig(i,l,g,_a,d),T===N)break;N=T}N!==null&&g.stopPropagation()}else ig(i,l,g,null,d)}}var _a=null;function Al(i,l,d,g){if(_a=null,i=Et(g),i=Na(i),i!==null)if(l=ls(i),l===null)i=null;else if(d=l.tag,d===13){if(i=ma(l),i!==null)return i;i=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null);return _a=i,null}function xu(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uh()){case ga:return 1;case no:return 4;case Br:case mu:return 16;case dh:return 536870912;default:return 16}default:return 16}}var Rr=null,Pl=null,fr=null;function wu(){if(fr)return fr;var i,l=Pl,d=l.length,g,N="value"in Rr?Rr.value:Rr.textContent,T=N.length;for(i=0;i<d&&l[i]===N[i];i++);var M=d-i;for(g=1;g<=M&&l[d-g]===N[T-g];g++);return fr=N.slice(i,1<g?1-g:void 0)}function kl(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function Ws(){return!0}function _u(){return!1}function Dn(i){function l(d,g,N,T,M){this._reactName=d,this._targetInst=N,this.type=g,this.nativeEvent=T,this.target=M,this.currentTarget=null;for(var q in i)i.hasOwnProperty(q)&&(d=i[q],this[q]=d?d(T):T[q]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Ws:_u,this.isPropagationStopped=_u,this}return ne(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),l}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rl=Dn(ps),Hs=ne({},ps,{view:0,detail:0}),Qm=Dn(Hs),Ol,Ei,uo,Ea=ne({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ks,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==uo&&(uo&&i.type==="mousemove"?(Ol=i.screenX-uo.screenX,Ei=i.screenY-uo.screenY):Ei=Ol=0,uo=i),Ol)},movementY:function(i){return"movementY"in i?i.movementY:Ei}}),Dl=Dn(Ea),Eu=ne({},Ea,{dataTransfer:0}),Eh=Dn(Eu),Ll=ne({},Hs,{relatedTarget:0}),Ml=Dn(Ll),bh=ne({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),bi=Dn(bh),Nh=ne({},ps,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Sh=Dn(Nh),Th=ne({},ps,{data:0}),bu=Dn(Th),Fl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jh(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=Ch[i])?!!l[i]:!1}function Ks(){return jh}var p=ne({},Hs,{key:function(i){if(i.key){var l=Fl[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=kl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?nr[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ks,charCode:function(i){return i.type==="keypress"?kl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?kl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),S=Dn(p),I=ne({},Ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$=Dn(I),re=ne({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ks}),le=Dn(re),Ee=ne({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dt=Dn(Ee),Nn=ne({},Ea,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),bt=Dn(Nn),In=[9,13,27,32],gn=u&&"CompositionEvent"in window,Wr=null;u&&"documentMode"in document&&(Wr=document.documentMode);var Or=u&&"TextEvent"in window&&!Wr,ba=u&&(!gn||Wr&&8<Wr&&11>=Wr),Vl=" ",T0=!1;function C0(i,l){switch(i){case"keyup":return In.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ul=!1;function jk(i,l){switch(i){case"compositionend":return j0(l);case"keypress":return l.which!==32?null:(T0=!0,Vl);case"textInput":return i=l.data,i===Vl&&T0?null:i;default:return null}}function Ik(i,l){if(Ul)return i==="compositionend"||!gn&&C0(i,l)?(i=wu(),fr=Pl=Rr=null,Ul=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ba&&l.locale!=="ko"?null:l.data;default:return null}}var Ak={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I0(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!Ak[i.type]:l==="textarea"}function A0(i,l,d,g){ye(g),l=Rh(l,"onChange"),0<l.length&&(d=new Rl("onChange","change",null,d,g),i.push({event:d,listeners:l}))}var Nu=null,Su=null;function Pk(i){G0(i,0)}function Ih(i){var l=Wl(i);if(it(l))return i}function kk(i,l){if(i==="change")return l}var P0=!1;if(u){var Ym;if(u){var Xm="oninput"in document;if(!Xm){var k0=document.createElement("div");k0.setAttribute("oninput","return;"),Xm=typeof k0.oninput=="function"}Ym=Xm}else Ym=!1;P0=Ym&&(!document.documentMode||9<document.documentMode)}function R0(){Nu&&(Nu.detachEvent("onpropertychange",O0),Su=Nu=null)}function O0(i){if(i.propertyName==="value"&&Ih(Su)){var l=[];A0(l,Su,i,Et(i)),Re(Pk,l)}}function Rk(i,l,d){i==="focusin"?(R0(),Nu=l,Su=d,Nu.attachEvent("onpropertychange",O0)):i==="focusout"&&R0()}function Ok(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ih(Su)}function Dk(i,l){if(i==="click")return Ih(l)}function Lk(i,l){if(i==="input"||i==="change")return Ih(l)}function Mk(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var ms=typeof Object.is=="function"?Object.is:Mk;function Tu(i,l){if(ms(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var d=Object.keys(i),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var N=d[g];if(!h.call(l,N)||!ms(i[N],l[N]))return!1}return!0}function D0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function L0(i,l){var d=D0(i);i=0;for(var g;d;){if(d.nodeType===3){if(g=i+d.textContent.length,i<=l&&g>=l)return{node:d,offset:l-i};i=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=D0(d)}}function M0(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?M0(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function F0(){for(var i=window,l=ve();l instanceof i.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)i=l.contentWindow;else break;l=ve(i.document)}return l}function Jm(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function Fk(i){var l=F0(),d=i.focusedElem,g=i.selectionRange;if(l!==d&&d&&d.ownerDocument&&M0(d.ownerDocument.documentElement,d)){if(g!==null&&Jm(d)){if(l=g.start,i=g.end,i===void 0&&(i=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(i,d.value.length);else if(i=(l=d.ownerDocument||document)&&l.defaultView||window,i.getSelection){i=i.getSelection();var N=d.textContent.length,T=Math.min(g.start,N);g=g.end===void 0?T:Math.min(g.end,N),!i.extend&&T>g&&(N=g,g=T,T=N),N=L0(d,T);var M=L0(d,g);N&&M&&(i.rangeCount!==1||i.anchorNode!==N.node||i.anchorOffset!==N.offset||i.focusNode!==M.node||i.focusOffset!==M.offset)&&(l=l.createRange(),l.setStart(N.node,N.offset),i.removeAllRanges(),T>g?(i.addRange(l),i.extend(M.node,M.offset)):(l.setEnd(M.node,M.offset),i.addRange(l)))}}for(l=[],i=d;i=i.parentNode;)i.nodeType===1&&l.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)i=l[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Vk=u&&"documentMode"in document&&11>=document.documentMode,$l=null,Zm=null,Cu=null,eg=!1;function V0(i,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;eg||$l==null||$l!==ve(g)||(g=$l,"selectionStart"in g&&Jm(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Cu&&Tu(Cu,g)||(Cu=g,g=Rh(Zm,"onSelect"),0<g.length&&(l=new Rl("onSelect","select",null,l,d),i.push({event:l,listeners:g}),l.target=$l)))}function Ah(i,l){var d={};return d[i.toLowerCase()]=l.toLowerCase(),d["Webkit"+i]="webkit"+l,d["Moz"+i]="moz"+l,d}var zl={animationend:Ah("Animation","AnimationEnd"),animationiteration:Ah("Animation","AnimationIteration"),animationstart:Ah("Animation","AnimationStart"),transitionend:Ah("Transition","TransitionEnd")},tg={},U0={};u&&(U0=document.createElement("div").style,"AnimationEvent"in window||(delete zl.animationend.animation,delete zl.animationiteration.animation,delete zl.animationstart.animation),"TransitionEvent"in window||delete zl.transitionend.transition);function Ph(i){if(tg[i])return tg[i];if(!zl[i])return i;var l=zl[i],d;for(d in l)if(l.hasOwnProperty(d)&&d in U0)return tg[i]=l[d];return i}var $0=Ph("animationend"),z0=Ph("animationiteration"),B0=Ph("animationstart"),q0=Ph("transitionend"),W0=new Map,H0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ho(i,l){W0.set(i,l),a(l,[i])}for(var ng=0;ng<H0.length;ng++){var rg=H0[ng],Uk=rg.toLowerCase(),$k=rg[0].toUpperCase()+rg.slice(1);ho(Uk,"on"+$k)}ho($0,"onAnimationEnd"),ho(z0,"onAnimationIteration"),ho(B0,"onAnimationStart"),ho("dblclick","onDoubleClick"),ho("focusin","onFocus"),ho("focusout","onBlur"),ho(q0,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ju));function K0(i,l,d){var g=i.type||"unknown-event";i.currentTarget=d,Nl(g,l,void 0,i),i.currentTarget=null}function G0(i,l){l=(l&4)!==0;for(var d=0;d<i.length;d++){var g=i[d],N=g.event;g=g.listeners;e:{var T=void 0;if(l)for(var M=g.length-1;0<=M;M--){var q=g[M],G=q.instance,ae=q.currentTarget;if(q=q.listener,G!==T&&N.isPropagationStopped())break e;K0(N,q,ae),T=G}else for(M=0;M<g.length;M++){if(q=g[M],G=q.instance,ae=q.currentTarget,q=q.listener,G!==T&&N.isPropagationStopped())break e;K0(N,q,ae),T=G}}}if(dr)throw i=to,dr=!1,to=null,i}function Wt(i,l){var d=l[dg];d===void 0&&(d=l[dg]=new Set);var g=i+"__bubble";d.has(g)||(Q0(l,i,2,!1),d.add(g))}function sg(i,l,d){var g=0;l&&(g|=4),Q0(d,i,g,l)}var kh="_reactListening"+Math.random().toString(36).slice(2);function Iu(i){if(!i[kh]){i[kh]=!0,r.forEach(function(d){d!=="selectionchange"&&(zk.has(d)||sg(d,!1,i),sg(d,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[kh]||(l[kh]=!0,sg("selectionchange",!1,l))}}function Q0(i,l,d,g){switch(xu(l)){case 1:var N=Yt;break;case 4:N=Gm;break;default:N=vu}d=N.bind(null,l,d,i),N=void 0,!yi||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(N=!0),g?N!==void 0?i.addEventListener(l,d,{capture:!0,passive:N}):i.addEventListener(l,d,!0):N!==void 0?i.addEventListener(l,d,{passive:N}):i.addEventListener(l,d,!1)}function ig(i,l,d,g,N){var T=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var q=g.stateNode.containerInfo;if(q===N||q.nodeType===8&&q.parentNode===N)break;if(M===4)for(M=g.return;M!==null;){var G=M.tag;if((G===3||G===4)&&(G=M.stateNode.containerInfo,G===N||G.nodeType===8&&G.parentNode===N))return;M=M.return}for(;q!==null;){if(M=Na(q),M===null)return;if(G=M.tag,G===5||G===6){g=T=M;continue e}q=q.parentNode}}g=g.return}Re(function(){var ae=T,fe=Et(d),ge=[];e:{var he=W0.get(i);if(he!==void 0){var Pe=Rl,Me=i;switch(i){case"keypress":if(kl(d)===0)break e;case"keydown":case"keyup":Pe=S;break;case"focusin":Me="focus",Pe=Ml;break;case"focusout":Me="blur",Pe=Ml;break;case"beforeblur":case"afterblur":Pe=Ml;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=Dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Eh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=le;break;case $0:case z0:case B0:Pe=bi;break;case q0:Pe=Dt;break;case"scroll":Pe=Qm;break;case"wheel":Pe=bt;break;case"copy":case"cut":case"paste":Pe=Sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=$}var Fe=(l&4)!==0,hn=!Fe&&i==="scroll",se=Fe?he!==null?he+"Capture":null:he;Fe=[];for(var X=ae,oe;X!==null;){oe=X;var xe=oe.stateNode;if(oe.tag===5&&xe!==null&&(oe=xe,se!==null&&(xe=Qt(X,se),xe!=null&&Fe.push(Au(X,xe,oe)))),hn)break;X=X.return}0<Fe.length&&(he=new Pe(he,Me,null,d,fe),ge.push({event:he,listeners:Fe}))}}if((l&7)===0){e:{if(he=i==="mouseover"||i==="pointerover",Pe=i==="mouseout"||i==="pointerout",he&&d!==Ze&&(Me=d.relatedTarget||d.fromElement)&&(Na(Me)||Me[Ni]))break e;if((Pe||he)&&(he=fe.window===fe?fe:(he=fe.ownerDocument)?he.defaultView||he.parentWindow:window,Pe?(Me=d.relatedTarget||d.toElement,Pe=ae,Me=Me?Na(Me):null,Me!==null&&(hn=ls(Me),Me!==hn||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(Pe=null,Me=ae),Pe!==Me)){if(Fe=Dl,xe="onMouseLeave",se="onMouseEnter",X="mouse",(i==="pointerout"||i==="pointerover")&&(Fe=$,xe="onPointerLeave",se="onPointerEnter",X="pointer"),hn=Pe==null?he:Wl(Pe),oe=Me==null?he:Wl(Me),he=new Fe(xe,X+"leave",Pe,d,fe),he.target=hn,he.relatedTarget=oe,xe=null,Na(fe)===ae&&(Fe=new Fe(se,X+"enter",Me,d,fe),Fe.target=oe,Fe.relatedTarget=hn,xe=Fe),hn=xe,Pe&&Me)t:{for(Fe=Pe,se=Me,X=0,oe=Fe;oe;oe=Bl(oe))X++;for(oe=0,xe=se;xe;xe=Bl(xe))oe++;for(;0<X-oe;)Fe=Bl(Fe),X--;for(;0<oe-X;)se=Bl(se),oe--;for(;X--;){if(Fe===se||se!==null&&Fe===se.alternate)break t;Fe=Bl(Fe),se=Bl(se)}Fe=null}else Fe=null;Pe!==null&&Y0(ge,he,Pe,Fe,!1),Me!==null&&hn!==null&&Y0(ge,hn,Me,Fe,!0)}}e:{if(he=ae?Wl(ae):window,Pe=he.nodeName&&he.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&he.type==="file")var $e=kk;else if(I0(he))if(P0)$e=Lk;else{$e=Ok;var Ye=Rk}else(Pe=he.nodeName)&&Pe.toLowerCase()==="input"&&(he.type==="checkbox"||he.type==="radio")&&($e=Dk);if($e&&($e=$e(i,ae))){A0(ge,$e,d,fe);break e}Ye&&Ye(i,he,ae),i==="focusout"&&(Ye=he._wrapperState)&&Ye.controlled&&he.type==="number"&&Lt(he,"number",he.value)}switch(Ye=ae?Wl(ae):window,i){case"focusin":(I0(Ye)||Ye.contentEditable==="true")&&($l=Ye,Zm=ae,Cu=null);break;case"focusout":Cu=Zm=$l=null;break;case"mousedown":eg=!0;break;case"contextmenu":case"mouseup":case"dragend":eg=!1,V0(ge,d,fe);break;case"selectionchange":if(Vk)break;case"keydown":case"keyup":V0(ge,d,fe)}var Xe;if(gn)e:{switch(i){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Ul?C0(i,d)&&(rt="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(rt="onCompositionStart");rt&&(ba&&d.locale!=="ko"&&(Ul||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Ul&&(Xe=wu()):(Rr=fe,Pl="value"in Rr?Rr.value:Rr.textContent,Ul=!0)),Ye=Rh(ae,rt),0<Ye.length&&(rt=new bu(rt,i,null,d,fe),ge.push({event:rt,listeners:Ye}),Xe?rt.data=Xe:(Xe=j0(d),Xe!==null&&(rt.data=Xe)))),(Xe=Or?jk(i,d):Ik(i,d))&&(ae=Rh(ae,"onBeforeInput"),0<ae.length&&(fe=new bu("onBeforeInput","beforeinput",null,d,fe),ge.push({event:fe,listeners:ae}),fe.data=Xe))}G0(ge,l)})}function Au(i,l,d){return{instance:i,listener:l,currentTarget:d}}function Rh(i,l){for(var d=l+"Capture",g=[];i!==null;){var N=i,T=N.stateNode;N.tag===5&&T!==null&&(N=T,T=Qt(i,d),T!=null&&g.unshift(Au(i,T,N)),T=Qt(i,l),T!=null&&g.push(Au(i,T,N))),i=i.return}return g}function Bl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Y0(i,l,d,g,N){for(var T=l._reactName,M=[];d!==null&&d!==g;){var q=d,G=q.alternate,ae=q.stateNode;if(G!==null&&G===g)break;q.tag===5&&ae!==null&&(q=ae,N?(G=Qt(d,T),G!=null&&M.unshift(Au(d,G,q))):N||(G=Qt(d,T),G!=null&&M.push(Au(d,G,q)))),d=d.return}M.length!==0&&i.push({event:l,listeners:M})}var Bk=/\r\n?/g,qk=/\u0000|\uFFFD/g;function X0(i){return(typeof i=="string"?i:""+i).replace(Bk,`
`).replace(qk,"")}function Oh(i,l,d){if(l=X0(l),X0(i)!==l&&d)throw Error(n(425))}function Dh(){}var og=null,ag=null;function lg(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var cg=typeof setTimeout=="function"?setTimeout:void 0,Wk=typeof clearTimeout=="function"?clearTimeout:void 0,J0=typeof Promise=="function"?Promise:void 0,Hk=typeof queueMicrotask=="function"?queueMicrotask:typeof J0<"u"?function(i){return J0.resolve(null).then(i).catch(Kk)}:cg;function Kk(i){setTimeout(function(){throw i})}function ug(i,l){var d=l,g=0;do{var N=d.nextSibling;if(i.removeChild(d),N&&N.nodeType===8)if(d=N.data,d==="/$"){if(g===0){i.removeChild(N),fs(l);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=N}while(d);fs(l)}function fo(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return i}function Z0(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return i;l--}else d==="/$"&&l++}i=i.previousSibling}return null}var ql=Math.random().toString(36).slice(2),Gs="__reactFiber$"+ql,Pu="__reactProps$"+ql,Ni="__reactContainer$"+ql,dg="__reactEvents$"+ql,Gk="__reactListeners$"+ql,Qk="__reactHandles$"+ql;function Na(i){var l=i[Gs];if(l)return l;for(var d=i.parentNode;d;){if(l=d[Ni]||d[Gs]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(i=Z0(i);i!==null;){if(d=i[Gs])return d;i=Z0(i)}return l}i=d,d=i.parentNode}return null}function ku(i){return i=i[Gs]||i[Ni],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Wl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Lh(i){return i[Pu]||null}var hg=[],Hl=-1;function po(i){return{current:i}}function Ht(i){0>Hl||(i.current=hg[Hl],hg[Hl]=null,Hl--)}function Ut(i,l){Hl++,hg[Hl]=i.current,i.current=l}var mo={},Wn=po(mo),pr=po(!1),Sa=mo;function Kl(i,l){var d=i.type.contextTypes;if(!d)return mo;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var N={},T;for(T in d)N[T]=l[T];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=N),N}function mr(i){return i=i.childContextTypes,i!=null}function Mh(){Ht(pr),Ht(Wn)}function e_(i,l,d){if(Wn.current!==mo)throw Error(n(168));Ut(Wn,l),Ut(pr,d)}function t_(i,l,d){var g=i.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var N in g)if(!(N in l))throw Error(n(108,we(i)||"Unknown",N));return ne({},d,g)}function Fh(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||mo,Sa=Wn.current,Ut(Wn,i),Ut(pr,pr.current),!0}function n_(i,l,d){var g=i.stateNode;if(!g)throw Error(n(169));d?(i=t_(i,l,Sa),g.__reactInternalMemoizedMergedChildContext=i,Ht(pr),Ht(Wn),Ut(Wn,i)):Ht(pr),Ut(pr,d)}var Si=null,Vh=!1,fg=!1;function r_(i){Si===null?Si=[i]:Si.push(i)}function Yk(i){Vh=!0,r_(i)}function go(){if(!fg&&Si!==null){fg=!0;var i=0,l=vt;try{var d=Si;for(vt=1;i<d.length;i++){var g=d[i];do g=g(!0);while(g!==null)}Si=null,Vh=!1}catch(N){throw Si!==null&&(Si=Si.slice(i+1)),Tl(ga,go),N}finally{vt=l,fg=!1}}return null}var Gl=[],Ql=0,Uh=null,$h=0,Hr=[],Kr=0,Ta=null,Ti=1,Ci="";function Ca(i,l){Gl[Ql++]=$h,Gl[Ql++]=Uh,Uh=i,$h=l}function s_(i,l,d){Hr[Kr++]=Ti,Hr[Kr++]=Ci,Hr[Kr++]=Ta,Ta=i;var g=Ti;i=Ci;var N=32-tr(g)-1;g&=~(1<<N),d+=1;var T=32-tr(l)+N;if(30<T){var M=N-N%5;T=(g&(1<<M)-1).toString(32),g>>=M,N-=M,Ti=1<<32-tr(l)+N|d<<N|g,Ci=T+i}else Ti=1<<T|d<<N|g,Ci=i}function pg(i){i.return!==null&&(Ca(i,1),s_(i,1,0))}function mg(i){for(;i===Uh;)Uh=Gl[--Ql],Gl[Ql]=null,$h=Gl[--Ql],Gl[Ql]=null;for(;i===Ta;)Ta=Hr[--Kr],Hr[Kr]=null,Ci=Hr[--Kr],Hr[Kr]=null,Ti=Hr[--Kr],Hr[Kr]=null}var Dr=null,Lr=null,Xt=!1,gs=null;function i_(i,l){var d=Xr(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=i,l=i.deletions,l===null?(i.deletions=[d],i.flags|=16):l.push(d)}function o_(i,l){switch(i.tag){case 5:var d=i.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(i.stateNode=l,Dr=i,Lr=fo(l.firstChild),!0):!1;case 6:return l=i.pendingProps===""||l.nodeType!==3?null:l,l!==null?(i.stateNode=l,Dr=i,Lr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Ta!==null?{id:Ti,overflow:Ci}:null,i.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=Xr(18,null,null,0),d.stateNode=l,d.return=i,i.child=d,Dr=i,Lr=null,!0):!1;default:return!1}}function gg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function yg(i){if(Xt){var l=Lr;if(l){var d=l;if(!o_(i,l)){if(gg(i))throw Error(n(418));l=fo(d.nextSibling);var g=Dr;l&&o_(i,l)?i_(g,d):(i.flags=i.flags&-4097|2,Xt=!1,Dr=i)}}else{if(gg(i))throw Error(n(418));i.flags=i.flags&-4097|2,Xt=!1,Dr=i}}}function a_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Dr=i}function zh(i){if(i!==Dr)return!1;if(!Xt)return a_(i),Xt=!0,!1;var l;if((l=i.tag!==3)&&!(l=i.tag!==5)&&(l=i.type,l=l!=="head"&&l!=="body"&&!lg(i.type,i.memoizedProps)),l&&(l=Lr)){if(gg(i))throw l_(),Error(n(418));for(;l;)i_(i,l),l=fo(l.nextSibling)}if(a_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(l===0){Lr=fo(i.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}i=i.nextSibling}Lr=null}}else Lr=Dr?fo(i.stateNode.nextSibling):null;return!0}function l_(){for(var i=Lr;i;)i=fo(i.nextSibling)}function Yl(){Lr=Dr=null,Xt=!1}function vg(i){gs===null?gs=[i]:gs.push(i)}var Xk=L.ReactCurrentBatchConfig;function Ru(i,l,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var g=d.stateNode}if(!g)throw Error(n(147,i));var N=g,T=""+i;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===T?l.ref:(l=function(M){var q=N.refs;M===null?delete q[T]:q[T]=M},l._stringRef=T,l)}if(typeof i!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,i))}return i}function Bh(i,l){throw i=Object.prototype.toString.call(l),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i))}function c_(i){var l=i._init;return l(i._payload)}function u_(i){function l(se,X){if(i){var oe=se.deletions;oe===null?(se.deletions=[X],se.flags|=16):oe.push(X)}}function d(se,X){if(!i)return null;for(;X!==null;)l(se,X),X=X.sibling;return null}function g(se,X){for(se=new Map;X!==null;)X.key!==null?se.set(X.key,X):se.set(X.index,X),X=X.sibling;return se}function N(se,X){return se=No(se,X),se.index=0,se.sibling=null,se}function T(se,X,oe){return se.index=oe,i?(oe=se.alternate,oe!==null?(oe=oe.index,oe<X?(se.flags|=2,X):oe):(se.flags|=2,X)):(se.flags|=1048576,X)}function M(se){return i&&se.alternate===null&&(se.flags|=2),se}function q(se,X,oe,xe){return X===null||X.tag!==6?(X=cy(oe,se.mode,xe),X.return=se,X):(X=N(X,oe),X.return=se,X)}function G(se,X,oe,xe){var $e=oe.type;return $e===P?fe(se,X,oe.props.children,xe,oe.key):X!==null&&(X.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===K&&c_($e)===X.type)?(xe=N(X,oe.props),xe.ref=Ru(se,X,oe),xe.return=se,xe):(xe=pf(oe.type,oe.key,oe.props,null,se.mode,xe),xe.ref=Ru(se,X,oe),xe.return=se,xe)}function ae(se,X,oe,xe){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=uy(oe,se.mode,xe),X.return=se,X):(X=N(X,oe.children||[]),X.return=se,X)}function fe(se,X,oe,xe,$e){return X===null||X.tag!==7?(X=Da(oe,se.mode,xe,$e),X.return=se,X):(X=N(X,oe),X.return=se,X)}function ge(se,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number")return X=cy(""+X,se.mode,oe),X.return=se,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case V:return oe=pf(X.type,X.key,X.props,null,se.mode,oe),oe.ref=Ru(se,null,X),oe.return=se,oe;case z:return X=uy(X,se.mode,oe),X.return=se,X;case K:var xe=X._init;return ge(se,xe(X._payload),oe)}if(mn(X)||Y(X))return X=Da(X,se.mode,oe,null),X.return=se,X;Bh(se,X)}return null}function he(se,X,oe,xe){var $e=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return $e!==null?null:q(se,X,""+oe,xe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case V:return oe.key===$e?G(se,X,oe,xe):null;case z:return oe.key===$e?ae(se,X,oe,xe):null;case K:return $e=oe._init,he(se,X,$e(oe._payload),xe)}if(mn(oe)||Y(oe))return $e!==null?null:fe(se,X,oe,xe,null);Bh(se,oe)}return null}function Pe(se,X,oe,xe,$e){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return se=se.get(oe)||null,q(X,se,""+xe,$e);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case V:return se=se.get(xe.key===null?oe:xe.key)||null,G(X,se,xe,$e);case z:return se=se.get(xe.key===null?oe:xe.key)||null,ae(X,se,xe,$e);case K:var Ye=xe._init;return Pe(se,X,oe,Ye(xe._payload),$e)}if(mn(xe)||Y(xe))return se=se.get(oe)||null,fe(X,se,xe,$e,null);Bh(X,xe)}return null}function Me(se,X,oe,xe){for(var $e=null,Ye=null,Xe=X,rt=X=0,kn=null;Xe!==null&&rt<oe.length;rt++){Xe.index>rt?(kn=Xe,Xe=null):kn=Xe.sibling;var It=he(se,Xe,oe[rt],xe);if(It===null){Xe===null&&(Xe=kn);break}i&&Xe&&It.alternate===null&&l(se,Xe),X=T(It,X,rt),Ye===null?$e=It:Ye.sibling=It,Ye=It,Xe=kn}if(rt===oe.length)return d(se,Xe),Xt&&Ca(se,rt),$e;if(Xe===null){for(;rt<oe.length;rt++)Xe=ge(se,oe[rt],xe),Xe!==null&&(X=T(Xe,X,rt),Ye===null?$e=Xe:Ye.sibling=Xe,Ye=Xe);return Xt&&Ca(se,rt),$e}for(Xe=g(se,Xe);rt<oe.length;rt++)kn=Pe(Xe,se,rt,oe[rt],xe),kn!==null&&(i&&kn.alternate!==null&&Xe.delete(kn.key===null?rt:kn.key),X=T(kn,X,rt),Ye===null?$e=kn:Ye.sibling=kn,Ye=kn);return i&&Xe.forEach(function(So){return l(se,So)}),Xt&&Ca(se,rt),$e}function Fe(se,X,oe,xe){var $e=Y(oe);if(typeof $e!="function")throw Error(n(150));if(oe=$e.call(oe),oe==null)throw Error(n(151));for(var Ye=$e=null,Xe=X,rt=X=0,kn=null,It=oe.next();Xe!==null&&!It.done;rt++,It=oe.next()){Xe.index>rt?(kn=Xe,Xe=null):kn=Xe.sibling;var So=he(se,Xe,It.value,xe);if(So===null){Xe===null&&(Xe=kn);break}i&&Xe&&So.alternate===null&&l(se,Xe),X=T(So,X,rt),Ye===null?$e=So:Ye.sibling=So,Ye=So,Xe=kn}if(It.done)return d(se,Xe),Xt&&Ca(se,rt),$e;if(Xe===null){for(;!It.done;rt++,It=oe.next())It=ge(se,It.value,xe),It!==null&&(X=T(It,X,rt),Ye===null?$e=It:Ye.sibling=It,Ye=It);return Xt&&Ca(se,rt),$e}for(Xe=g(se,Xe);!It.done;rt++,It=oe.next())It=Pe(Xe,se,rt,It.value,xe),It!==null&&(i&&It.alternate!==null&&Xe.delete(It.key===null?rt:It.key),X=T(It,X,rt),Ye===null?$e=It:Ye.sibling=It,Ye=It);return i&&Xe.forEach(function(AR){return l(se,AR)}),Xt&&Ca(se,rt),$e}function hn(se,X,oe,xe){if(typeof oe=="object"&&oe!==null&&oe.type===P&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case V:e:{for(var $e=oe.key,Ye=X;Ye!==null;){if(Ye.key===$e){if($e=oe.type,$e===P){if(Ye.tag===7){d(se,Ye.sibling),X=N(Ye,oe.props.children),X.return=se,se=X;break e}}else if(Ye.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===K&&c_($e)===Ye.type){d(se,Ye.sibling),X=N(Ye,oe.props),X.ref=Ru(se,Ye,oe),X.return=se,se=X;break e}d(se,Ye);break}else l(se,Ye);Ye=Ye.sibling}oe.type===P?(X=Da(oe.props.children,se.mode,xe,oe.key),X.return=se,se=X):(xe=pf(oe.type,oe.key,oe.props,null,se.mode,xe),xe.ref=Ru(se,X,oe),xe.return=se,se=xe)}return M(se);case z:e:{for(Ye=oe.key;X!==null;){if(X.key===Ye)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){d(se,X.sibling),X=N(X,oe.children||[]),X.return=se,se=X;break e}else{d(se,X);break}else l(se,X);X=X.sibling}X=uy(oe,se.mode,xe),X.return=se,se=X}return M(se);case K:return Ye=oe._init,hn(se,X,Ye(oe._payload),xe)}if(mn(oe))return Me(se,X,oe,xe);if(Y(oe))return Fe(se,X,oe,xe);Bh(se,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,X!==null&&X.tag===6?(d(se,X.sibling),X=N(X,oe),X.return=se,se=X):(d(se,X),X=cy(oe,se.mode,xe),X.return=se,se=X),M(se)):d(se,X)}return hn}var Xl=u_(!0),d_=u_(!1),qh=po(null),Wh=null,Jl=null,xg=null;function wg(){xg=Jl=Wh=null}function _g(i){var l=qh.current;Ht(qh),i._currentValue=l}function Eg(i,l,d){for(;i!==null;){var g=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),i===d)break;i=i.return}}function Zl(i,l){Wh=i,xg=Jl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&l)!==0&&(gr=!0),i.firstContext=null)}function Gr(i){var l=i._currentValue;if(xg!==i)if(i={context:i,memoizedValue:l,next:null},Jl===null){if(Wh===null)throw Error(n(308));Jl=i,Wh.dependencies={lanes:0,firstContext:i}}else Jl=Jl.next=i;return l}var ja=null;function bg(i){ja===null?ja=[i]:ja.push(i)}function h_(i,l,d,g){var N=l.interleaved;return N===null?(d.next=d,bg(l)):(d.next=N.next,N.next=d),l.interleaved=d,ji(i,g)}function ji(i,l){i.lanes|=l;var d=i.alternate;for(d!==null&&(d.lanes|=l),d=i,i=i.return;i!==null;)i.childLanes|=l,d=i.alternate,d!==null&&(d.childLanes|=l),d=i,i=i.return;return d.tag===3?d.stateNode:null}var yo=!1;function Ng(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f_(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ii(i,l){return{eventTime:i,lane:l,tag:0,payload:null,callback:null,next:null}}function vo(i,l,d){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(Ct&2)!==0){var N=g.pending;return N===null?l.next=l:(l.next=N.next,N.next=l),g.pending=l,ji(i,d)}return N=g.interleaved,N===null?(l.next=l,bg(g)):(l.next=N.next,N.next=l),g.interleaved=l,ji(i,d)}function Hh(i,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var g=l.lanes;g&=i.pendingLanes,d|=g,l.lanes=d,oo(i,d)}}function p_(i,l){var d=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var N=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var M={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?N=T=M:T=T.next=M,d=d.next}while(d!==null);T===null?N=T=l:T=T.next=l}else N=T=l;d={baseState:g.baseState,firstBaseUpdate:N,lastBaseUpdate:T,shared:g.shared,effects:g.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=l:i.next=l,d.lastBaseUpdate=l}function Kh(i,l,d,g){var N=i.updateQueue;yo=!1;var T=N.firstBaseUpdate,M=N.lastBaseUpdate,q=N.shared.pending;if(q!==null){N.shared.pending=null;var G=q,ae=G.next;G.next=null,M===null?T=ae:M.next=ae,M=G;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,q=fe.lastBaseUpdate,q!==M&&(q===null?fe.firstBaseUpdate=ae:q.next=ae,fe.lastBaseUpdate=G))}if(T!==null){var ge=N.baseState;M=0,fe=ae=G=null,q=T;do{var he=q.lane,Pe=q.eventTime;if((g&he)===he){fe!==null&&(fe=fe.next={eventTime:Pe,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Me=i,Fe=q;switch(he=l,Pe=d,Fe.tag){case 1:if(Me=Fe.payload,typeof Me=="function"){ge=Me.call(Pe,ge,he);break e}ge=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Fe.payload,he=typeof Me=="function"?Me.call(Pe,ge,he):Me,he==null)break e;ge=ne({},ge,he);break e;case 2:yo=!0}}q.callback!==null&&q.lane!==0&&(i.flags|=64,he=N.effects,he===null?N.effects=[q]:he.push(q))}else Pe={eventTime:Pe,lane:he,tag:q.tag,payload:q.payload,callback:q.callback,next:null},fe===null?(ae=fe=Pe,G=ge):fe=fe.next=Pe,M|=he;if(q=q.next,q===null){if(q=N.shared.pending,q===null)break;he=q,q=he.next,he.next=null,N.lastBaseUpdate=he,N.shared.pending=null}}while(!0);if(fe===null&&(G=ge),N.baseState=G,N.firstBaseUpdate=ae,N.lastBaseUpdate=fe,l=N.shared.interleaved,l!==null){N=l;do M|=N.lane,N=N.next;while(N!==l)}else T===null&&(N.shared.lanes=0);Pa|=M,i.lanes=M,i.memoizedState=ge}}function m_(i,l,d){if(i=l.effects,l.effects=null,i!==null)for(l=0;l<i.length;l++){var g=i[l],N=g.callback;if(N!==null){if(g.callback=null,g=d,typeof N!="function")throw Error(n(191,N));N.call(g)}}}var Ou={},Qs=po(Ou),Du=po(Ou),Lu=po(Ou);function Ia(i){if(i===Ou)throw Error(n(174));return i}function Sg(i,l){switch(Ut(Lu,l),Ut(Du,i),Ut(Qs,Ou),i=l.nodeType,i){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:kt(null,"");break;default:i=i===8?l.parentNode:l,l=i.namespaceURI||null,i=i.tagName,l=kt(l,i)}Ht(Qs),Ut(Qs,l)}function ec(){Ht(Qs),Ht(Du),Ht(Lu)}function g_(i){Ia(Lu.current);var l=Ia(Qs.current),d=kt(l,i.type);l!==d&&(Ut(Du,i),Ut(Qs,d))}function Tg(i){Du.current===i&&(Ht(Qs),Ht(Du))}var tn=po(0);function Gh(i){for(var l=i;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Cg=[];function jg(){for(var i=0;i<Cg.length;i++)Cg[i]._workInProgressVersionPrimary=null;Cg.length=0}var Qh=L.ReactCurrentDispatcher,Ig=L.ReactCurrentBatchConfig,Aa=0,nn=null,Sn=null,An=null,Yh=!1,Mu=!1,Fu=0,Jk=0;function Hn(){throw Error(n(321))}function Ag(i,l){if(l===null)return!1;for(var d=0;d<l.length&&d<i.length;d++)if(!ms(i[d],l[d]))return!1;return!0}function Pg(i,l,d,g,N,T){if(Aa=T,nn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Qh.current=i===null||i.memoizedState===null?nR:rR,i=d(g,N),Mu){T=0;do{if(Mu=!1,Fu=0,25<=T)throw Error(n(301));T+=1,An=Sn=null,l.updateQueue=null,Qh.current=sR,i=d(g,N)}while(Mu)}if(Qh.current=Zh,l=Sn!==null&&Sn.next!==null,Aa=0,An=Sn=nn=null,Yh=!1,l)throw Error(n(300));return i}function kg(){var i=Fu!==0;return Fu=0,i}function Ys(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?nn.memoizedState=An=i:An=An.next=i,An}function Qr(){if(Sn===null){var i=nn.alternate;i=i!==null?i.memoizedState:null}else i=Sn.next;var l=An===null?nn.memoizedState:An.next;if(l!==null)An=l,Sn=i;else{if(i===null)throw Error(n(310));Sn=i,i={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},An===null?nn.memoizedState=An=i:An=An.next=i}return An}function Vu(i,l){return typeof l=="function"?l(i):l}function Rg(i){var l=Qr(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var g=Sn,N=g.baseQueue,T=d.pending;if(T!==null){if(N!==null){var M=N.next;N.next=T.next,T.next=M}g.baseQueue=N=T,d.pending=null}if(N!==null){T=N.next,g=g.baseState;var q=M=null,G=null,ae=T;do{var fe=ae.lane;if((Aa&fe)===fe)G!==null&&(G=G.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),g=ae.hasEagerState?ae.eagerState:i(g,ae.action);else{var ge={lane:fe,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};G===null?(q=G=ge,M=g):G=G.next=ge,nn.lanes|=fe,Pa|=fe}ae=ae.next}while(ae!==null&&ae!==T);G===null?M=g:G.next=q,ms(g,l.memoizedState)||(gr=!0),l.memoizedState=g,l.baseState=M,l.baseQueue=G,d.lastRenderedState=g}if(i=d.interleaved,i!==null){N=i;do T=N.lane,nn.lanes|=T,Pa|=T,N=N.next;while(N!==i)}else N===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Og(i){var l=Qr(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var g=d.dispatch,N=d.pending,T=l.memoizedState;if(N!==null){d.pending=null;var M=N=N.next;do T=i(T,M.action),M=M.next;while(M!==N);ms(T,l.memoizedState)||(gr=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),d.lastRenderedState=T}return[T,g]}function y_(){}function v_(i,l){var d=nn,g=Qr(),N=l(),T=!ms(g.memoizedState,N);if(T&&(g.memoizedState=N,gr=!0),g=g.queue,Dg(__.bind(null,d,g,i),[i]),g.getSnapshot!==l||T||An!==null&&An.memoizedState.tag&1){if(d.flags|=2048,Uu(9,w_.bind(null,d,g,N,l),void 0,null),Pn===null)throw Error(n(349));(Aa&30)!==0||x_(d,l,N)}return N}function x_(i,l,d){i.flags|=16384,i={getSnapshot:l,value:d},l=nn.updateQueue,l===null?(l={lastEffect:null,stores:null},nn.updateQueue=l,l.stores=[i]):(d=l.stores,d===null?l.stores=[i]:d.push(i))}function w_(i,l,d,g){l.value=d,l.getSnapshot=g,E_(l)&&b_(i)}function __(i,l,d){return d(function(){E_(l)&&b_(i)})}function E_(i){var l=i.getSnapshot;i=i.value;try{var d=l();return!ms(i,d)}catch{return!0}}function b_(i){var l=ji(i,1);l!==null&&ws(l,i,1,-1)}function N_(i){var l=Ys();return typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vu,lastRenderedState:i},l.queue=i,i=i.dispatch=tR.bind(null,nn,i),[l.memoizedState,i]}function Uu(i,l,d,g){return i={tag:i,create:l,destroy:d,deps:g,next:null},l=nn.updateQueue,l===null?(l={lastEffect:null,stores:null},nn.updateQueue=l,l.lastEffect=i.next=i):(d=l.lastEffect,d===null?l.lastEffect=i.next=i:(g=d.next,d.next=i,i.next=g,l.lastEffect=i)),i}function S_(){return Qr().memoizedState}function Xh(i,l,d,g){var N=Ys();nn.flags|=i,N.memoizedState=Uu(1|l,d,void 0,g===void 0?null:g)}function Jh(i,l,d,g){var N=Qr();g=g===void 0?null:g;var T=void 0;if(Sn!==null){var M=Sn.memoizedState;if(T=M.destroy,g!==null&&Ag(g,M.deps)){N.memoizedState=Uu(l,d,T,g);return}}nn.flags|=i,N.memoizedState=Uu(1|l,d,T,g)}function T_(i,l){return Xh(8390656,8,i,l)}function Dg(i,l){return Jh(2048,8,i,l)}function C_(i,l){return Jh(4,2,i,l)}function j_(i,l){return Jh(4,4,i,l)}function I_(i,l){if(typeof l=="function")return i=i(),l(i),function(){l(null)};if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function A_(i,l,d){return d=d!=null?d.concat([i]):null,Jh(4,4,I_.bind(null,l,i),d)}function Lg(){}function P_(i,l){var d=Qr();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&Ag(l,g[1])?g[0]:(d.memoizedState=[i,l],i)}function k_(i,l){var d=Qr();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&Ag(l,g[1])?g[0]:(i=i(),d.memoizedState=[i,l],i)}function R_(i,l,d){return(Aa&21)===0?(i.baseState&&(i.baseState=!1,gr=!0),i.memoizedState=d):(ms(d,l)||(d=xa(),nn.lanes|=d,Pa|=d,i.baseState=!0),l)}function Zk(i,l){var d=vt;vt=d!==0&&4>d?d:4,i(!0);var g=Ig.transition;Ig.transition={};try{i(!1),l()}finally{vt=d,Ig.transition=g}}function O_(){return Qr().memoizedState}function eR(i,l,d){var g=Eo(i);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},D_(i))L_(l,d);else if(d=h_(i,l,d,g),d!==null){var N=sr();ws(d,i,g,N),M_(d,l,g)}}function tR(i,l,d){var g=Eo(i),N={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(D_(i))L_(l,N);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var M=l.lastRenderedState,q=T(M,d);if(N.hasEagerState=!0,N.eagerState=q,ms(q,M)){var G=l.interleaved;G===null?(N.next=N,bg(l)):(N.next=G.next,G.next=N),l.interleaved=N;return}}catch{}finally{}d=h_(i,l,N,g),d!==null&&(N=sr(),ws(d,i,g,N),M_(d,l,g))}}function D_(i){var l=i.alternate;return i===nn||l!==null&&l===nn}function L_(i,l){Mu=Yh=!0;var d=i.pending;d===null?l.next=l:(l.next=d.next,d.next=l),i.pending=l}function M_(i,l,d){if((d&4194240)!==0){var g=l.lanes;g&=i.pendingLanes,d|=g,l.lanes=d,oo(i,d)}}var Zh={readContext:Gr,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},nR={readContext:Gr,useCallback:function(i,l){return Ys().memoizedState=[i,l===void 0?null:l],i},useContext:Gr,useEffect:T_,useImperativeHandle:function(i,l,d){return d=d!=null?d.concat([i]):null,Xh(4194308,4,I_.bind(null,l,i),d)},useLayoutEffect:function(i,l){return Xh(4194308,4,i,l)},useInsertionEffect:function(i,l){return Xh(4,2,i,l)},useMemo:function(i,l){var d=Ys();return l=l===void 0?null:l,i=i(),d.memoizedState=[i,l],i},useReducer:function(i,l,d){var g=Ys();return l=d!==void 0?d(l):l,g.memoizedState=g.baseState=l,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},g.queue=i,i=i.dispatch=eR.bind(null,nn,i),[g.memoizedState,i]},useRef:function(i){var l=Ys();return i={current:i},l.memoizedState=i},useState:N_,useDebugValue:Lg,useDeferredValue:function(i){return Ys().memoizedState=i},useTransition:function(){var i=N_(!1),l=i[0];return i=Zk.bind(null,i[1]),Ys().memoizedState=i,[l,i]},useMutableSource:function(){},useSyncExternalStore:function(i,l,d){var g=nn,N=Ys();if(Xt){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),Pn===null)throw Error(n(349));(Aa&30)!==0||x_(g,l,d)}N.memoizedState=d;var T={value:d,getSnapshot:l};return N.queue=T,T_(__.bind(null,g,T,i),[i]),g.flags|=2048,Uu(9,w_.bind(null,g,T,d,l),void 0,null),d},useId:function(){var i=Ys(),l=Pn.identifierPrefix;if(Xt){var d=Ci,g=Ti;d=(g&~(1<<32-tr(g)-1)).toString(32)+d,l=":"+l+"R"+d,d=Fu++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=Jk++,l=":"+l+"r"+d.toString(32)+":";return i.memoizedState=l},unstable_isNewReconciler:!1},rR={readContext:Gr,useCallback:P_,useContext:Gr,useEffect:Dg,useImperativeHandle:A_,useInsertionEffect:C_,useLayoutEffect:j_,useMemo:k_,useReducer:Rg,useRef:S_,useState:function(){return Rg(Vu)},useDebugValue:Lg,useDeferredValue:function(i){var l=Qr();return R_(l,Sn.memoizedState,i)},useTransition:function(){var i=Rg(Vu)[0],l=Qr().memoizedState;return[i,l]},useMutableSource:y_,useSyncExternalStore:v_,useId:O_,unstable_isNewReconciler:!1},sR={readContext:Gr,useCallback:P_,useContext:Gr,useEffect:Dg,useImperativeHandle:A_,useInsertionEffect:C_,useLayoutEffect:j_,useMemo:k_,useReducer:Og,useRef:S_,useState:function(){return Og(Vu)},useDebugValue:Lg,useDeferredValue:function(i){var l=Qr();return Sn===null?l.memoizedState=i:R_(l,Sn.memoizedState,i)},useTransition:function(){var i=Og(Vu)[0],l=Qr().memoizedState;return[i,l]},useMutableSource:y_,useSyncExternalStore:v_,useId:O_,unstable_isNewReconciler:!1};function ys(i,l){if(i&&i.defaultProps){l=ne({},l),i=i.defaultProps;for(var d in i)l[d]===void 0&&(l[d]=i[d]);return l}return l}function Mg(i,l,d,g){l=i.memoizedState,d=d(g,l),d=d==null?l:ne({},l,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var ef={isMounted:function(i){return(i=i._reactInternals)?ls(i)===i:!1},enqueueSetState:function(i,l,d){i=i._reactInternals;var g=sr(),N=Eo(i),T=Ii(g,N);T.payload=l,d!=null&&(T.callback=d),l=vo(i,T,N),l!==null&&(ws(l,i,N,g),Hh(l,i,N))},enqueueReplaceState:function(i,l,d){i=i._reactInternals;var g=sr(),N=Eo(i),T=Ii(g,N);T.tag=1,T.payload=l,d!=null&&(T.callback=d),l=vo(i,T,N),l!==null&&(ws(l,i,N,g),Hh(l,i,N))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var d=sr(),g=Eo(i),N=Ii(d,g);N.tag=2,l!=null&&(N.callback=l),l=vo(i,N,g),l!==null&&(ws(l,i,g,d),Hh(l,i,g))}};function F_(i,l,d,g,N,T,M){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,T,M):l.prototype&&l.prototype.isPureReactComponent?!Tu(d,g)||!Tu(N,T):!0}function V_(i,l,d){var g=!1,N=mo,T=l.contextType;return typeof T=="object"&&T!==null?T=Gr(T):(N=mr(l)?Sa:Wn.current,g=l.contextTypes,T=(g=g!=null)?Kl(i,N):mo),l=new l(d,T),i.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=ef,i.stateNode=l,l._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=N,i.__reactInternalMemoizedMaskedChildContext=T),l}function U_(i,l,d,g){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==i&&ef.enqueueReplaceState(l,l.state,null)}function Fg(i,l,d,g){var N=i.stateNode;N.props=d,N.state=i.memoizedState,N.refs={},Ng(i);var T=l.contextType;typeof T=="object"&&T!==null?N.context=Gr(T):(T=mr(l)?Sa:Wn.current,N.context=Kl(i,T)),N.state=i.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Mg(i,l,T,d),N.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(l=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),l!==N.state&&ef.enqueueReplaceState(N,N.state,null),Kh(i,d,N,g),N.state=i.memoizedState),typeof N.componentDidMount=="function"&&(i.flags|=4194308)}function tc(i,l){try{var d="",g=l;do d+=Le(g),g=g.return;while(g);var N=d}catch(T){N=`
Error generating stack: `+T.message+`
`+T.stack}return{value:i,source:l,stack:N,digest:null}}function Vg(i,l,d){return{value:i,source:null,stack:d??null,digest:l??null}}function Ug(i,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var iR=typeof WeakMap=="function"?WeakMap:Map;function $_(i,l,d){d=Ii(-1,d),d.tag=3,d.payload={element:null};var g=l.value;return d.callback=function(){lf||(lf=!0,ty=g),Ug(i,l)},d}function z_(i,l,d){d=Ii(-1,d),d.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var N=l.value;d.payload=function(){return g(N)},d.callback=function(){Ug(i,l)}}var T=i.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){Ug(i,l),typeof g!="function"&&(wo===null?wo=new Set([this]):wo.add(this));var M=l.stack;this.componentDidCatch(l.value,{componentStack:M!==null?M:""})}),d}function B_(i,l,d){var g=i.pingCache;if(g===null){g=i.pingCache=new iR;var N=new Set;g.set(l,N)}else N=g.get(l),N===void 0&&(N=new Set,g.set(l,N));N.has(d)||(N.add(d),i=xR.bind(null,i,l,d),l.then(i,i))}function q_(i){do{var l;if((l=i.tag===13)&&(l=i.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return i;i=i.return}while(i!==null);return null}function W_(i,l,d,g,N){return(i.mode&1)===0?(i===l?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Ii(-1,1),l.tag=2,vo(d,l,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=N,i)}var oR=L.ReactCurrentOwner,gr=!1;function rr(i,l,d,g){l.child=i===null?d_(l,null,d,g):Xl(l,i.child,d,g)}function H_(i,l,d,g,N){d=d.render;var T=l.ref;return Zl(l,N),g=Pg(i,l,d,g,T,N),d=kg(),i!==null&&!gr?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~N,Ai(i,l,N)):(Xt&&d&&pg(l),l.flags|=1,rr(i,l,g,N),l.child)}function K_(i,l,d,g,N){if(i===null){var T=d.type;return typeof T=="function"&&!ly(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=T,G_(i,l,T,g,N)):(i=pf(d.type,null,g,l,l.mode,N),i.ref=l.ref,i.return=l,l.child=i)}if(T=i.child,(i.lanes&N)===0){var M=T.memoizedProps;if(d=d.compare,d=d!==null?d:Tu,d(M,g)&&i.ref===l.ref)return Ai(i,l,N)}return l.flags|=1,i=No(T,g),i.ref=l.ref,i.return=l,l.child=i}function G_(i,l,d,g,N){if(i!==null){var T=i.memoizedProps;if(Tu(T,g)&&i.ref===l.ref)if(gr=!1,l.pendingProps=g=T,(i.lanes&N)!==0)(i.flags&131072)!==0&&(gr=!0);else return l.lanes=i.lanes,Ai(i,l,N)}return $g(i,l,d,g,N)}function Q_(i,l,d){var g=l.pendingProps,N=g.children,T=i!==null?i.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ut(rc,Mr),Mr|=d;else{if((d&1073741824)===0)return i=T!==null?T.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:i,cachePool:null,transitions:null},l.updateQueue=null,Ut(rc,Mr),Mr|=i,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=T!==null?T.baseLanes:d,Ut(rc,Mr),Mr|=g}else T!==null?(g=T.baseLanes|d,l.memoizedState=null):g=d,Ut(rc,Mr),Mr|=g;return rr(i,l,N,d),l.child}function Y_(i,l){var d=l.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function $g(i,l,d,g,N){var T=mr(d)?Sa:Wn.current;return T=Kl(l,T),Zl(l,N),d=Pg(i,l,d,g,T,N),g=kg(),i!==null&&!gr?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~N,Ai(i,l,N)):(Xt&&g&&pg(l),l.flags|=1,rr(i,l,d,N),l.child)}function X_(i,l,d,g,N){if(mr(d)){var T=!0;Fh(l)}else T=!1;if(Zl(l,N),l.stateNode===null)nf(i,l),V_(l,d,g),Fg(l,d,g,N),g=!0;else if(i===null){var M=l.stateNode,q=l.memoizedProps;M.props=q;var G=M.context,ae=d.contextType;typeof ae=="object"&&ae!==null?ae=Gr(ae):(ae=mr(d)?Sa:Wn.current,ae=Kl(l,ae));var fe=d.getDerivedStateFromProps,ge=typeof fe=="function"||typeof M.getSnapshotBeforeUpdate=="function";ge||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(q!==g||G!==ae)&&U_(l,M,g,ae),yo=!1;var he=l.memoizedState;M.state=he,Kh(l,g,M,N),G=l.memoizedState,q!==g||he!==G||pr.current||yo?(typeof fe=="function"&&(Mg(l,d,fe,g),G=l.memoizedState),(q=yo||F_(l,d,q,g,he,G,ae))?(ge||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(l.flags|=4194308)):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=G),M.props=g,M.state=G,M.context=ae,g=q):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{M=l.stateNode,f_(i,l),q=l.memoizedProps,ae=l.type===l.elementType?q:ys(l.type,q),M.props=ae,ge=l.pendingProps,he=M.context,G=d.contextType,typeof G=="object"&&G!==null?G=Gr(G):(G=mr(d)?Sa:Wn.current,G=Kl(l,G));var Pe=d.getDerivedStateFromProps;(fe=typeof Pe=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(q!==ge||he!==G)&&U_(l,M,g,G),yo=!1,he=l.memoizedState,M.state=he,Kh(l,g,M,N);var Me=l.memoizedState;q!==ge||he!==Me||pr.current||yo?(typeof Pe=="function"&&(Mg(l,d,Pe,g),Me=l.memoizedState),(ae=yo||F_(l,d,ae,g,he,Me,G)||!1)?(fe||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(g,Me,G),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(g,Me,G)),typeof M.componentDidUpdate=="function"&&(l.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof M.componentDidUpdate!="function"||q===i.memoizedProps&&he===i.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&he===i.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Me),M.props=g,M.state=Me,M.context=G,g=ae):(typeof M.componentDidUpdate!="function"||q===i.memoizedProps&&he===i.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&he===i.memoizedState||(l.flags|=1024),g=!1)}return zg(i,l,d,g,T,N)}function zg(i,l,d,g,N,T){Y_(i,l);var M=(l.flags&128)!==0;if(!g&&!M)return N&&n_(l,d,!1),Ai(i,l,T);g=l.stateNode,oR.current=l;var q=M&&typeof d.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,i!==null&&M?(l.child=Xl(l,i.child,null,T),l.child=Xl(l,null,q,T)):rr(i,l,q,T),l.memoizedState=g.state,N&&n_(l,d,!0),l.child}function J_(i){var l=i.stateNode;l.pendingContext?e_(i,l.pendingContext,l.pendingContext!==l.context):l.context&&e_(i,l.context,!1),Sg(i,l.containerInfo)}function Z_(i,l,d,g,N){return Yl(),vg(N),l.flags|=256,rr(i,l,d,g),l.child}var Bg={dehydrated:null,treeContext:null,retryLane:0};function qg(i){return{baseLanes:i,cachePool:null,transitions:null}}function eE(i,l,d){var g=l.pendingProps,N=tn.current,T=!1,M=(l.flags&128)!==0,q;if((q=M)||(q=i!==null&&i.memoizedState===null?!1:(N&2)!==0),q?(T=!0,l.flags&=-129):(i===null||i.memoizedState!==null)&&(N|=1),Ut(tn,N&1),i===null)return yg(l),i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((l.mode&1)===0?l.lanes=1:i.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(M=g.children,i=g.fallback,T?(g=l.mode,T=l.child,M={mode:"hidden",children:M},(g&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=M):T=mf(M,g,0,null),i=Da(i,g,d,null),T.return=l,i.return=l,T.sibling=i,l.child=T,l.child.memoizedState=qg(d),l.memoizedState=Bg,i):Wg(l,M));if(N=i.memoizedState,N!==null&&(q=N.dehydrated,q!==null))return aR(i,l,M,g,q,N,d);if(T){T=g.fallback,M=l.mode,N=i.child,q=N.sibling;var G={mode:"hidden",children:g.children};return(M&1)===0&&l.child!==N?(g=l.child,g.childLanes=0,g.pendingProps=G,l.deletions=null):(g=No(N,G),g.subtreeFlags=N.subtreeFlags&14680064),q!==null?T=No(q,T):(T=Da(T,M,d,null),T.flags|=2),T.return=l,g.return=l,g.sibling=T,l.child=g,g=T,T=l.child,M=i.child.memoizedState,M=M===null?qg(d):{baseLanes:M.baseLanes|d,cachePool:null,transitions:M.transitions},T.memoizedState=M,T.childLanes=i.childLanes&~d,l.memoizedState=Bg,g}return T=i.child,i=T.sibling,g=No(T,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=d),g.return=l,g.sibling=null,i!==null&&(d=l.deletions,d===null?(l.deletions=[i],l.flags|=16):d.push(i)),l.child=g,l.memoizedState=null,g}function Wg(i,l){return l=mf({mode:"visible",children:l},i.mode,0,null),l.return=i,i.child=l}function tf(i,l,d,g){return g!==null&&vg(g),Xl(l,i.child,null,d),i=Wg(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function aR(i,l,d,g,N,T,M){if(d)return l.flags&256?(l.flags&=-257,g=Vg(Error(n(422))),tf(i,l,M,g)):l.memoizedState!==null?(l.child=i.child,l.flags|=128,null):(T=g.fallback,N=l.mode,g=mf({mode:"visible",children:g.children},N,0,null),T=Da(T,N,M,null),T.flags|=2,g.return=l,T.return=l,g.sibling=T,l.child=g,(l.mode&1)!==0&&Xl(l,i.child,null,M),l.child.memoizedState=qg(M),l.memoizedState=Bg,T);if((l.mode&1)===0)return tf(i,l,M,null);if(N.data==="$!"){if(g=N.nextSibling&&N.nextSibling.dataset,g)var q=g.dgst;return g=q,T=Error(n(419)),g=Vg(T,g,void 0),tf(i,l,M,g)}if(q=(M&i.childLanes)!==0,gr||q){if(g=Pn,g!==null){switch(M&-M){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(g.suspendedLanes|M))!==0?0:N,N!==0&&N!==T.retryLane&&(T.retryLane=N,ji(i,N),ws(g,i,N,-1))}return ay(),g=Vg(Error(n(421))),tf(i,l,M,g)}return N.data==="$?"?(l.flags|=128,l.child=i.child,l=wR.bind(null,i),N._reactRetry=l,null):(i=T.treeContext,Lr=fo(N.nextSibling),Dr=l,Xt=!0,gs=null,i!==null&&(Hr[Kr++]=Ti,Hr[Kr++]=Ci,Hr[Kr++]=Ta,Ti=i.id,Ci=i.overflow,Ta=l),l=Wg(l,g.children),l.flags|=4096,l)}function tE(i,l,d){i.lanes|=l;var g=i.alternate;g!==null&&(g.lanes|=l),Eg(i.return,l,d)}function Hg(i,l,d,g,N){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:N}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=d,T.tailMode=N)}function nE(i,l,d){var g=l.pendingProps,N=g.revealOrder,T=g.tail;if(rr(i,l,g.children,d),g=tn.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&tE(i,d,l);else if(i.tag===19)tE(i,d,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(Ut(tn,g),(l.mode&1)===0)l.memoizedState=null;else switch(N){case"forwards":for(d=l.child,N=null;d!==null;)i=d.alternate,i!==null&&Gh(i)===null&&(N=d),d=d.sibling;d=N,d===null?(N=l.child,l.child=null):(N=d.sibling,d.sibling=null),Hg(l,!1,N,d,T);break;case"backwards":for(d=null,N=l.child,l.child=null;N!==null;){if(i=N.alternate,i!==null&&Gh(i)===null){l.child=N;break}i=N.sibling,N.sibling=d,d=N,N=i}Hg(l,!0,d,null,T);break;case"together":Hg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function nf(i,l){(l.mode&1)===0&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=2)}function Ai(i,l,d){if(i!==null&&(l.dependencies=i.dependencies),Pa|=l.lanes,(d&l.childLanes)===0)return null;if(i!==null&&l.child!==i.child)throw Error(n(153));if(l.child!==null){for(i=l.child,d=No(i,i.pendingProps),l.child=d,d.return=l;i.sibling!==null;)i=i.sibling,d=d.sibling=No(i,i.pendingProps),d.return=l;d.sibling=null}return l.child}function lR(i,l,d){switch(l.tag){case 3:J_(l),Yl();break;case 5:g_(l);break;case 1:mr(l.type)&&Fh(l);break;case 4:Sg(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,N=l.memoizedProps.value;Ut(qh,g._currentValue),g._currentValue=N;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(Ut(tn,tn.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?eE(i,l,d):(Ut(tn,tn.current&1),i=Ai(i,l,d),i!==null?i.sibling:null);Ut(tn,tn.current&1);break;case 19:if(g=(d&l.childLanes)!==0,(i.flags&128)!==0){if(g)return nE(i,l,d);l.flags|=128}if(N=l.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Ut(tn,tn.current),g)break;return null;case 22:case 23:return l.lanes=0,Q_(i,l,d)}return Ai(i,l,d)}var rE,Kg,sE,iE;rE=function(i,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Kg=function(){},sE=function(i,l,d,g){var N=i.memoizedProps;if(N!==g){i=l.stateNode,Ia(Qs.current);var T=null;switch(d){case"input":N=Ie(i,N),g=Ie(i,g),T=[];break;case"select":N=ne({},N,{value:void 0}),g=ne({},g,{value:void 0}),T=[];break;case"textarea":N=is(i,N),g=is(i,g),T=[];break;default:typeof N.onClick!="function"&&typeof g.onClick=="function"&&(i.onclick=Dh)}qn(d,g);var M;d=null;for(ae in N)if(!g.hasOwnProperty(ae)&&N.hasOwnProperty(ae)&&N[ae]!=null)if(ae==="style"){var q=N[ae];for(M in q)q.hasOwnProperty(M)&&(d||(d={}),d[M]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(s.hasOwnProperty(ae)?T||(T=[]):(T=T||[]).push(ae,null));for(ae in g){var G=g[ae];if(q=N!=null?N[ae]:void 0,g.hasOwnProperty(ae)&&G!==q&&(G!=null||q!=null))if(ae==="style")if(q){for(M in q)!q.hasOwnProperty(M)||G&&G.hasOwnProperty(M)||(d||(d={}),d[M]="");for(M in G)G.hasOwnProperty(M)&&q[M]!==G[M]&&(d||(d={}),d[M]=G[M])}else d||(T||(T=[]),T.push(ae,d)),d=G;else ae==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,q=q?q.__html:void 0,G!=null&&q!==G&&(T=T||[]).push(ae,G)):ae==="children"?typeof G!="string"&&typeof G!="number"||(T=T||[]).push(ae,""+G):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(s.hasOwnProperty(ae)?(G!=null&&ae==="onScroll"&&Wt("scroll",i),T||q===G||(T=[])):(T=T||[]).push(ae,G))}d&&(T=T||[]).push("style",d);var ae=T;(l.updateQueue=ae)&&(l.flags|=4)}},iE=function(i,l,d,g){d!==g&&(l.flags|=4)};function $u(i,l){if(!Xt)switch(i.tailMode){case"hidden":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function Kn(i){var l=i.alternate!==null&&i.alternate.child===i.child,d=0,g=0;if(l)for(var N=i.child;N!==null;)d|=N.lanes|N.childLanes,g|=N.subtreeFlags&14680064,g|=N.flags&14680064,N.return=i,N=N.sibling;else for(N=i.child;N!==null;)d|=N.lanes|N.childLanes,g|=N.subtreeFlags,g|=N.flags,N.return=i,N=N.sibling;return i.subtreeFlags|=g,i.childLanes=d,l}function cR(i,l,d){var g=l.pendingProps;switch(mg(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(l),null;case 1:return mr(l.type)&&Mh(),Kn(l),null;case 3:return g=l.stateNode,ec(),Ht(pr),Ht(Wn),jg(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(zh(l)?l.flags|=4:i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,gs!==null&&(sy(gs),gs=null))),Kg(i,l),Kn(l),null;case 5:Tg(l);var N=Ia(Lu.current);if(d=l.type,i!==null&&l.stateNode!=null)sE(i,l,d,g,N),i.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(n(166));return Kn(l),null}if(i=Ia(Qs.current),zh(l)){g=l.stateNode,d=l.type;var T=l.memoizedProps;switch(g[Gs]=l,g[Pu]=T,i=(l.mode&1)!==0,d){case"dialog":Wt("cancel",g),Wt("close",g);break;case"iframe":case"object":case"embed":Wt("load",g);break;case"video":case"audio":for(N=0;N<ju.length;N++)Wt(ju[N],g);break;case"source":Wt("error",g);break;case"img":case"image":case"link":Wt("error",g),Wt("load",g);break;case"details":Wt("toggle",g);break;case"input":mt(g,T),Wt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!T.multiple},Wt("invalid",g);break;case"textarea":dn(g,T),Wt("invalid",g)}qn(d,T),N=null;for(var M in T)if(T.hasOwnProperty(M)){var q=T[M];M==="children"?typeof q=="string"?g.textContent!==q&&(T.suppressHydrationWarning!==!0&&Oh(g.textContent,q,i),N=["children",q]):typeof q=="number"&&g.textContent!==""+q&&(T.suppressHydrationWarning!==!0&&Oh(g.textContent,q,i),N=["children",""+q]):s.hasOwnProperty(M)&&q!=null&&M==="onScroll"&&Wt("scroll",g)}switch(d){case"input":st(g),jr(g,T,!0);break;case"textarea":st(g),Fs(g);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(g.onclick=Dh)}g=N,l.updateQueue=g,g!==null&&(l.flags|=4)}else{M=N.nodeType===9?N:N.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=zt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=M.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof g.is=="string"?i=M.createElement(d,{is:g.is}):(i=M.createElement(d),d==="select"&&(M=i,g.multiple?M.multiple=!0:g.size&&(M.size=g.size))):i=M.createElementNS(i,d),i[Gs]=l,i[Pu]=g,rE(i,l,!1,!1),l.stateNode=i;e:{switch(M=Us(d,g),d){case"dialog":Wt("cancel",i),Wt("close",i),N=g;break;case"iframe":case"object":case"embed":Wt("load",i),N=g;break;case"video":case"audio":for(N=0;N<ju.length;N++)Wt(ju[N],i);N=g;break;case"source":Wt("error",i),N=g;break;case"img":case"image":case"link":Wt("error",i),Wt("load",i),N=g;break;case"details":Wt("toggle",i),N=g;break;case"input":mt(i,g),N=Ie(i,g),Wt("invalid",i);break;case"option":N=g;break;case"select":i._wrapperState={wasMultiple:!!g.multiple},N=ne({},g,{value:void 0}),Wt("invalid",i);break;case"textarea":dn(i,g),N=is(i,g),Wt("invalid",i);break;default:N=g}qn(d,N),q=N;for(T in q)if(q.hasOwnProperty(T)){var G=q[T];T==="style"?gi(i,G):T==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&bn(i,G)):T==="children"?typeof G=="string"?(d!=="textarea"||G!=="")&&Ar(i,G):typeof G=="number"&&Ar(i,""+G):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(s.hasOwnProperty(T)?G!=null&&T==="onScroll"&&Wt("scroll",i):G!=null&&C(i,T,G,M))}switch(d){case"input":st(i),jr(i,g,!1);break;case"textarea":st(i),Fs(i);break;case"option":g.value!=null&&i.setAttribute("value",""+Ce(g.value));break;case"select":i.multiple=!!g.multiple,T=g.value,T!=null?Ir(i,!!g.multiple,T,!1):g.defaultValue!=null&&Ir(i,!!g.multiple,g.defaultValue,!0);break;default:typeof N.onClick=="function"&&(i.onclick=Dh)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Kn(l),null;case 6:if(i&&l.stateNode!=null)iE(i,l,i.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(d=Ia(Lu.current),Ia(Qs.current),zh(l)){if(g=l.stateNode,d=l.memoizedProps,g[Gs]=l,(T=g.nodeValue!==d)&&(i=Dr,i!==null))switch(i.tag){case 3:Oh(g.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Oh(g.nodeValue,d,(i.mode&1)!==0)}T&&(l.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[Gs]=l,l.stateNode=g}return Kn(l),null;case 13:if(Ht(tn),g=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Xt&&Lr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)l_(),Yl(),l.flags|=98560,T=!1;else if(T=zh(l),g!==null&&g.dehydrated!==null){if(i===null){if(!T)throw Error(n(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[Gs]=l}else Yl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Kn(l),T=!1}else gs!==null&&(sy(gs),gs=null),T=!0;if(!T)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(g=g!==null,g!==(i!==null&&i.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(i===null||(tn.current&1)!==0?Tn===0&&(Tn=3):ay())),l.updateQueue!==null&&(l.flags|=4),Kn(l),null);case 4:return ec(),Kg(i,l),i===null&&Iu(l.stateNode.containerInfo),Kn(l),null;case 10:return _g(l.type._context),Kn(l),null;case 17:return mr(l.type)&&Mh(),Kn(l),null;case 19:if(Ht(tn),T=l.memoizedState,T===null)return Kn(l),null;if(g=(l.flags&128)!==0,M=T.rendering,M===null)if(g)$u(T,!1);else{if(Tn!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(M=Gh(i),M!==null){for(l.flags|=128,$u(T,!1),g=M.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=d,d=l.child;d!==null;)T=d,i=g,T.flags&=14680066,M=T.alternate,M===null?(T.childLanes=0,T.lanes=i,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=M.childLanes,T.lanes=M.lanes,T.child=M.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=M.memoizedProps,T.memoizedState=M.memoizedState,T.updateQueue=M.updateQueue,T.type=M.type,i=M.dependencies,T.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return Ut(tn,tn.current&1|2),l.child}i=i.sibling}T.tail!==null&&Vt()>sc&&(l.flags|=128,g=!0,$u(T,!1),l.lanes=4194304)}else{if(!g)if(i=Gh(M),i!==null){if(l.flags|=128,g=!0,d=i.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),$u(T,!0),T.tail===null&&T.tailMode==="hidden"&&!M.alternate&&!Xt)return Kn(l),null}else 2*Vt()-T.renderingStartTime>sc&&d!==1073741824&&(l.flags|=128,g=!0,$u(T,!1),l.lanes=4194304);T.isBackwards?(M.sibling=l.child,l.child=M):(d=T.last,d!==null?d.sibling=M:l.child=M,T.last=M)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=Vt(),l.sibling=null,d=tn.current,Ut(tn,g?d&1|2:d&1),l):(Kn(l),null);case 22:case 23:return oy(),g=l.memoizedState!==null,i!==null&&i.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(Mr&1073741824)!==0&&(Kn(l),l.subtreeFlags&6&&(l.flags|=8192)):Kn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function uR(i,l){switch(mg(l),l.tag){case 1:return mr(l.type)&&Mh(),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return ec(),Ht(pr),Ht(Wn),jg(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 5:return Tg(l),null;case 13:if(Ht(tn),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Yl()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return Ht(tn),null;case 4:return ec(),null;case 10:return _g(l.type._context),null;case 22:case 23:return oy(),null;case 24:return null;default:return null}}var rf=!1,Gn=!1,dR=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function nc(i,l){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){ln(i,l,g)}else d.current=null}function Gg(i,l,d){try{d()}catch(g){ln(i,l,g)}}var oE=!1;function hR(i,l){if(og=co,i=F0(),Jm(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var N=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var M=0,q=-1,G=-1,ae=0,fe=0,ge=i,he=null;t:for(;;){for(var Pe;ge!==d||N!==0&&ge.nodeType!==3||(q=M+N),ge!==T||g!==0&&ge.nodeType!==3||(G=M+g),ge.nodeType===3&&(M+=ge.nodeValue.length),(Pe=ge.firstChild)!==null;)he=ge,ge=Pe;for(;;){if(ge===i)break t;if(he===d&&++ae===N&&(q=M),he===T&&++fe===g&&(G=M),(Pe=ge.nextSibling)!==null)break;ge=he,he=ge.parentNode}ge=Pe}d=q===-1||G===-1?null:{start:q,end:G}}else d=null}d=d||{start:0,end:0}}else d=null;for(ag={focusedElem:i,selectionRange:d},co=!1,Oe=l;Oe!==null;)if(l=Oe,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,Oe=i;else for(;Oe!==null;){l=Oe;try{var Me=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var Fe=Me.memoizedProps,hn=Me.memoizedState,se=l.stateNode,X=se.getSnapshotBeforeUpdate(l.elementType===l.type?Fe:ys(l.type,Fe),hn);se.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var oe=l.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(xe){ln(l,l.return,xe)}if(i=l.sibling,i!==null){i.return=l.return,Oe=i;break}Oe=l.return}return Me=oE,oE=!1,Me}function zu(i,l,d){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var N=g=g.next;do{if((N.tag&i)===i){var T=N.destroy;N.destroy=void 0,T!==void 0&&Gg(l,d,T)}N=N.next}while(N!==g)}}function sf(i,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&i)===i){var g=d.create;d.destroy=g()}d=d.next}while(d!==l)}}function Qg(i){var l=i.ref;if(l!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof l=="function"?l(i):l.current=i}}function aE(i){var l=i.alternate;l!==null&&(i.alternate=null,aE(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&(delete l[Gs],delete l[Pu],delete l[dg],delete l[Gk],delete l[Qk])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function lE(i){return i.tag===5||i.tag===3||i.tag===4}function cE(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||lE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Yg(i,l,d){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(i,l):d.insertBefore(i,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(i,d)):(l=d,l.appendChild(i)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Dh));else if(g!==4&&(i=i.child,i!==null))for(Yg(i,l,d),i=i.sibling;i!==null;)Yg(i,l,d),i=i.sibling}function Xg(i,l,d){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?d.insertBefore(i,l):d.appendChild(i);else if(g!==4&&(i=i.child,i!==null))for(Xg(i,l,d),i=i.sibling;i!==null;)Xg(i,l,d),i=i.sibling}var Ln=null,vs=!1;function xo(i,l,d){for(d=d.child;d!==null;)uE(i,l,d),d=d.sibling}function uE(i,l,d){if(Pr&&typeof Pr.onCommitFiberUnmount=="function")try{Pr.onCommitFiberUnmount(ya,d)}catch{}switch(d.tag){case 5:Gn||nc(d,l);case 6:var g=Ln,N=vs;Ln=null,xo(i,l,d),Ln=g,vs=N,Ln!==null&&(vs?(i=Ln,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Ln.removeChild(d.stateNode));break;case 18:Ln!==null&&(vs?(i=Ln,d=d.stateNode,i.nodeType===8?ug(i.parentNode,d):i.nodeType===1&&ug(i,d),fs(i)):ug(Ln,d.stateNode));break;case 4:g=Ln,N=vs,Ln=d.stateNode.containerInfo,vs=!0,xo(i,l,d),Ln=g,vs=N;break;case 0:case 11:case 14:case 15:if(!Gn&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){N=g=g.next;do{var T=N,M=T.destroy;T=T.tag,M!==void 0&&((T&2)!==0||(T&4)!==0)&&Gg(d,l,M),N=N.next}while(N!==g)}xo(i,l,d);break;case 1:if(!Gn&&(nc(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(q){ln(d,l,q)}xo(i,l,d);break;case 21:xo(i,l,d);break;case 22:d.mode&1?(Gn=(g=Gn)||d.memoizedState!==null,xo(i,l,d),Gn=g):xo(i,l,d);break;default:xo(i,l,d)}}function dE(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new dR),l.forEach(function(g){var N=_R.bind(null,i,g);d.has(g)||(d.add(g),g.then(N,N))})}}function xs(i,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var N=d[g];try{var T=i,M=l,q=M;e:for(;q!==null;){switch(q.tag){case 5:Ln=q.stateNode,vs=!1;break e;case 3:Ln=q.stateNode.containerInfo,vs=!0;break e;case 4:Ln=q.stateNode.containerInfo,vs=!0;break e}q=q.return}if(Ln===null)throw Error(n(160));uE(T,M,N),Ln=null,vs=!1;var G=N.alternate;G!==null&&(G.return=null),N.return=null}catch(ae){ln(N,l,ae)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)hE(l,i),l=l.sibling}function hE(i,l){var d=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(xs(l,i),Xs(i),g&4){try{zu(3,i,i.return),sf(3,i)}catch(Fe){ln(i,i.return,Fe)}try{zu(5,i,i.return)}catch(Fe){ln(i,i.return,Fe)}}break;case 1:xs(l,i),Xs(i),g&512&&d!==null&&nc(d,d.return);break;case 5:if(xs(l,i),Xs(i),g&512&&d!==null&&nc(d,d.return),i.flags&32){var N=i.stateNode;try{Ar(N,"")}catch(Fe){ln(i,i.return,Fe)}}if(g&4&&(N=i.stateNode,N!=null)){var T=i.memoizedProps,M=d!==null?d.memoizedProps:T,q=i.type,G=i.updateQueue;if(i.updateQueue=null,G!==null)try{q==="input"&&T.type==="radio"&&T.name!=null&&an(N,T),Us(q,M);var ae=Us(q,T);for(M=0;M<G.length;M+=2){var fe=G[M],ge=G[M+1];fe==="style"?gi(N,ge):fe==="dangerouslySetInnerHTML"?bn(N,ge):fe==="children"?Ar(N,ge):C(N,fe,ge,ae)}switch(q){case"input":zn(N,T);break;case"textarea":Ms(N,T);break;case"select":var he=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!T.multiple;var Pe=T.value;Pe!=null?Ir(N,!!T.multiple,Pe,!1):he!==!!T.multiple&&(T.defaultValue!=null?Ir(N,!!T.multiple,T.defaultValue,!0):Ir(N,!!T.multiple,T.multiple?[]:"",!1))}N[Pu]=T}catch(Fe){ln(i,i.return,Fe)}}break;case 6:if(xs(l,i),Xs(i),g&4){if(i.stateNode===null)throw Error(n(162));N=i.stateNode,T=i.memoizedProps;try{N.nodeValue=T}catch(Fe){ln(i,i.return,Fe)}}break;case 3:if(xs(l,i),Xs(i),g&4&&d!==null&&d.memoizedState.isDehydrated)try{fs(l.containerInfo)}catch(Fe){ln(i,i.return,Fe)}break;case 4:xs(l,i),Xs(i);break;case 13:xs(l,i),Xs(i),N=i.child,N.flags&8192&&(T=N.memoizedState!==null,N.stateNode.isHidden=T,!T||N.alternate!==null&&N.alternate.memoizedState!==null||(ey=Vt())),g&4&&dE(i);break;case 22:if(fe=d!==null&&d.memoizedState!==null,i.mode&1?(Gn=(ae=Gn)||fe,xs(l,i),Gn=ae):xs(l,i),Xs(i),g&8192){if(ae=i.memoizedState!==null,(i.stateNode.isHidden=ae)&&!fe&&(i.mode&1)!==0)for(Oe=i,fe=i.child;fe!==null;){for(ge=Oe=fe;Oe!==null;){switch(he=Oe,Pe=he.child,he.tag){case 0:case 11:case 14:case 15:zu(4,he,he.return);break;case 1:nc(he,he.return);var Me=he.stateNode;if(typeof Me.componentWillUnmount=="function"){g=he,d=he.return;try{l=g,Me.props=l.memoizedProps,Me.state=l.memoizedState,Me.componentWillUnmount()}catch(Fe){ln(g,d,Fe)}}break;case 5:nc(he,he.return);break;case 22:if(he.memoizedState!==null){mE(ge);continue}}Pe!==null?(Pe.return=he,Oe=Pe):mE(ge)}fe=fe.sibling}e:for(fe=null,ge=i;;){if(ge.tag===5){if(fe===null){fe=ge;try{N=ge.stateNode,ae?(T=N.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(q=ge.stateNode,G=ge.memoizedProps.style,M=G!=null&&G.hasOwnProperty("display")?G.display:null,q.style.display=Vs("display",M))}catch(Fe){ln(i,i.return,Fe)}}}else if(ge.tag===6){if(fe===null)try{ge.stateNode.nodeValue=ae?"":ge.memoizedProps}catch(Fe){ln(i,i.return,Fe)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===i)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===i)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===i)break e;fe===ge&&(fe=null),ge=ge.return}fe===ge&&(fe=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:xs(l,i),Xs(i),g&4&&dE(i);break;case 21:break;default:xs(l,i),Xs(i)}}function Xs(i){var l=i.flags;if(l&2){try{e:{for(var d=i.return;d!==null;){if(lE(d)){var g=d;break e}d=d.return}throw Error(n(160))}switch(g.tag){case 5:var N=g.stateNode;g.flags&32&&(Ar(N,""),g.flags&=-33);var T=cE(i);Xg(i,T,N);break;case 3:case 4:var M=g.stateNode.containerInfo,q=cE(i);Yg(i,q,M);break;default:throw Error(n(161))}}catch(G){ln(i,i.return,G)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function fR(i,l,d){Oe=i,fE(i)}function fE(i,l,d){for(var g=(i.mode&1)!==0;Oe!==null;){var N=Oe,T=N.child;if(N.tag===22&&g){var M=N.memoizedState!==null||rf;if(!M){var q=N.alternate,G=q!==null&&q.memoizedState!==null||Gn;q=rf;var ae=Gn;if(rf=M,(Gn=G)&&!ae)for(Oe=N;Oe!==null;)M=Oe,G=M.child,M.tag===22&&M.memoizedState!==null?gE(N):G!==null?(G.return=M,Oe=G):gE(N);for(;T!==null;)Oe=T,fE(T),T=T.sibling;Oe=N,rf=q,Gn=ae}pE(i)}else(N.subtreeFlags&8772)!==0&&T!==null?(T.return=N,Oe=T):pE(i)}}function pE(i){for(;Oe!==null;){var l=Oe;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Gn||sf(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!Gn)if(d===null)g.componentDidMount();else{var N=l.elementType===l.type?d.memoizedProps:ys(l.type,d.memoizedProps);g.componentDidUpdate(N,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var T=l.updateQueue;T!==null&&m_(l,T,g);break;case 3:var M=l.updateQueue;if(M!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}m_(l,M,d)}break;case 5:var q=l.stateNode;if(d===null&&l.flags&4){d=q;var G=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&d.focus();break;case"img":G.src&&(d.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ae=l.alternate;if(ae!==null){var fe=ae.memoizedState;if(fe!==null){var ge=fe.dehydrated;ge!==null&&fs(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Gn||l.flags&512&&Qg(l)}catch(he){ln(l,l.return,he)}}if(l===i){Oe=null;break}if(d=l.sibling,d!==null){d.return=l.return,Oe=d;break}Oe=l.return}}function mE(i){for(;Oe!==null;){var l=Oe;if(l===i){Oe=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Oe=d;break}Oe=l.return}}function gE(i){for(;Oe!==null;){var l=Oe;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{sf(4,l)}catch(G){ln(l,d,G)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var N=l.return;try{g.componentDidMount()}catch(G){ln(l,N,G)}}var T=l.return;try{Qg(l)}catch(G){ln(l,T,G)}break;case 5:var M=l.return;try{Qg(l)}catch(G){ln(l,M,G)}}}catch(G){ln(l,l.return,G)}if(l===i){Oe=null;break}var q=l.sibling;if(q!==null){q.return=l.return,Oe=q;break}Oe=l.return}}var pR=Math.ceil,of=L.ReactCurrentDispatcher,Jg=L.ReactCurrentOwner,Yr=L.ReactCurrentBatchConfig,Ct=0,Pn=null,yn=null,Mn=0,Mr=0,rc=po(0),Tn=0,Bu=null,Pa=0,af=0,Zg=0,qu=null,yr=null,ey=0,sc=1/0,Pi=null,lf=!1,ty=null,wo=null,cf=!1,_o=null,uf=0,Wu=0,ny=null,df=-1,hf=0;function sr(){return(Ct&6)!==0?Vt():df!==-1?df:df=Vt()}function Eo(i){return(i.mode&1)===0?1:(Ct&2)!==0&&Mn!==0?Mn&-Mn:Xk.transition!==null?(hf===0&&(hf=xa()),hf):(i=vt,i!==0||(i=window.event,i=i===void 0?16:xu(i.type)),i)}function ws(i,l,d,g){if(50<Wu)throw Wu=0,ny=null,Error(n(185));io(i,d,g),((Ct&2)===0||i!==Pn)&&(i===Pn&&((Ct&2)===0&&(af|=d),Tn===4&&bo(i,Mn)),vr(i,g),d===1&&Ct===0&&(l.mode&1)===0&&(sc=Vt()+500,Vh&&go()))}function vr(i,l){var d=i.callbackNode;xi(i,l);var g=va(i,i===Pn?Mn:0);if(g===0)d!==null&&pu(d),i.callbackNode=null,i.callbackPriority=0;else if(l=g&-g,i.callbackPriority!==l){if(d!=null&&pu(d),l===1)i.tag===0?Yk(vE.bind(null,i)):r_(vE.bind(null,i)),Hk(function(){(Ct&6)===0&&go()}),d=null;else{switch(ao(g)){case 1:d=ga;break;case 4:d=no;break;case 16:d=Br;break;case 536870912:d=dh;break;default:d=Br}d=TE(d,yE.bind(null,i))}i.callbackPriority=l,i.callbackNode=d}}function yE(i,l){if(df=-1,hf=0,(Ct&6)!==0)throw Error(n(327));var d=i.callbackNode;if(ic()&&i.callbackNode!==d)return null;var g=va(i,i===Pn?Mn:0);if(g===0)return null;if((g&30)!==0||(g&i.expiredLanes)!==0||l)l=ff(i,g);else{l=g;var N=Ct;Ct|=2;var T=wE();(Pn!==i||Mn!==l)&&(Pi=null,sc=Vt()+500,Ra(i,l));do try{yR();break}catch(q){xE(i,q)}while(!0);wg(),of.current=T,Ct=N,yn!==null?l=0:(Pn=null,Mn=0,l=Tn)}if(l!==0){if(l===2&&(N=kr(i),N!==0&&(g=N,l=ry(i,N))),l===1)throw d=Bu,Ra(i,0),bo(i,g),vr(i,Vt()),d;if(l===6)bo(i,g);else{if(N=i.current.alternate,(g&30)===0&&!mR(N)&&(l=ff(i,g),l===2&&(T=kr(i),T!==0&&(g=T,l=ry(i,T))),l===1))throw d=Bu,Ra(i,0),bo(i,g),vr(i,Vt()),d;switch(i.finishedWork=N,i.finishedLanes=g,l){case 0:case 1:throw Error(n(345));case 2:Oa(i,yr,Pi);break;case 3:if(bo(i,g),(g&130023424)===g&&(l=ey+500-Vt(),10<l)){if(va(i,0)!==0)break;if(N=i.suspendedLanes,(N&g)!==g){sr(),i.pingedLanes|=i.suspendedLanes&N;break}i.timeoutHandle=cg(Oa.bind(null,i,yr,Pi),l);break}Oa(i,yr,Pi);break;case 4:if(bo(i,g),(g&4194240)===g)break;for(l=i.eventTimes,N=-1;0<g;){var M=31-tr(g);T=1<<M,M=l[M],M>N&&(N=M),g&=~T}if(g=N,g=Vt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*pR(g/1960))-g,10<g){i.timeoutHandle=cg(Oa.bind(null,i,yr,Pi),g);break}Oa(i,yr,Pi);break;case 5:Oa(i,yr,Pi);break;default:throw Error(n(329))}}}return vr(i,Vt()),i.callbackNode===d?yE.bind(null,i):null}function ry(i,l){var d=qu;return i.current.memoizedState.isDehydrated&&(Ra(i,l).flags|=256),i=ff(i,l),i!==2&&(l=yr,yr=d,l!==null&&sy(l)),i}function sy(i){yr===null?yr=i:yr.push.apply(yr,i)}function mR(i){for(var l=i;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var N=d[g],T=N.getSnapshot;N=N.value;try{if(!ms(T(),N))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function bo(i,l){for(l&=~Zg,l&=~af,i.suspendedLanes|=l,i.pingedLanes&=~l,i=i.expirationTimes;0<l;){var d=31-tr(l),g=1<<d;i[d]=-1,l&=~g}}function vE(i){if((Ct&6)!==0)throw Error(n(327));ic();var l=va(i,0);if((l&1)===0)return vr(i,Vt()),null;var d=ff(i,l);if(i.tag!==0&&d===2){var g=kr(i);g!==0&&(l=g,d=ry(i,g))}if(d===1)throw d=Bu,Ra(i,0),bo(i,l),vr(i,Vt()),d;if(d===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=l,Oa(i,yr,Pi),vr(i,Vt()),null}function iy(i,l){var d=Ct;Ct|=1;try{return i(l)}finally{Ct=d,Ct===0&&(sc=Vt()+500,Vh&&go())}}function ka(i){_o!==null&&_o.tag===0&&(Ct&6)===0&&ic();var l=Ct;Ct|=1;var d=Yr.transition,g=vt;try{if(Yr.transition=null,vt=1,i)return i()}finally{vt=g,Yr.transition=d,Ct=l,(Ct&6)===0&&go()}}function oy(){Mr=rc.current,Ht(rc)}function Ra(i,l){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,Wk(d)),yn!==null)for(d=yn.return;d!==null;){var g=d;switch(mg(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Mh();break;case 3:ec(),Ht(pr),Ht(Wn),jg();break;case 5:Tg(g);break;case 4:ec();break;case 13:Ht(tn);break;case 19:Ht(tn);break;case 10:_g(g.type._context);break;case 22:case 23:oy()}d=d.return}if(Pn=i,yn=i=No(i.current,null),Mn=Mr=l,Tn=0,Bu=null,Zg=af=Pa=0,yr=qu=null,ja!==null){for(l=0;l<ja.length;l++)if(d=ja[l],g=d.interleaved,g!==null){d.interleaved=null;var N=g.next,T=d.pending;if(T!==null){var M=T.next;T.next=N,g.next=M}d.pending=g}ja=null}return i}function xE(i,l){do{var d=yn;try{if(wg(),Qh.current=Zh,Yh){for(var g=nn.memoizedState;g!==null;){var N=g.queue;N!==null&&(N.pending=null),g=g.next}Yh=!1}if(Aa=0,An=Sn=nn=null,Mu=!1,Fu=0,Jg.current=null,d===null||d.return===null){Tn=1,Bu=l,yn=null;break}e:{var T=i,M=d.return,q=d,G=l;if(l=Mn,q.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var ae=G,fe=q,ge=fe.tag;if((fe.mode&1)===0&&(ge===0||ge===11||ge===15)){var he=fe.alternate;he?(fe.updateQueue=he.updateQueue,fe.memoizedState=he.memoizedState,fe.lanes=he.lanes):(fe.updateQueue=null,fe.memoizedState=null)}var Pe=q_(M);if(Pe!==null){Pe.flags&=-257,W_(Pe,M,q,T,l),Pe.mode&1&&B_(T,ae,l),l=Pe,G=ae;var Me=l.updateQueue;if(Me===null){var Fe=new Set;Fe.add(G),l.updateQueue=Fe}else Me.add(G);break e}else{if((l&1)===0){B_(T,ae,l),ay();break e}G=Error(n(426))}}else if(Xt&&q.mode&1){var hn=q_(M);if(hn!==null){(hn.flags&65536)===0&&(hn.flags|=256),W_(hn,M,q,T,l),vg(tc(G,q));break e}}T=G=tc(G,q),Tn!==4&&(Tn=2),qu===null?qu=[T]:qu.push(T),T=M;do{switch(T.tag){case 3:T.flags|=65536,l&=-l,T.lanes|=l;var se=$_(T,G,l);p_(T,se);break e;case 1:q=G;var X=T.type,oe=T.stateNode;if((T.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(wo===null||!wo.has(oe)))){T.flags|=65536,l&=-l,T.lanes|=l;var xe=z_(T,q,l);p_(T,xe);break e}}T=T.return}while(T!==null)}EE(d)}catch($e){l=$e,yn===d&&d!==null&&(yn=d=d.return);continue}break}while(!0)}function wE(){var i=of.current;return of.current=Zh,i===null?Zh:i}function ay(){(Tn===0||Tn===3||Tn===2)&&(Tn=4),Pn===null||(Pa&268435455)===0&&(af&268435455)===0||bo(Pn,Mn)}function ff(i,l){var d=Ct;Ct|=2;var g=wE();(Pn!==i||Mn!==l)&&(Pi=null,Ra(i,l));do try{gR();break}catch(N){xE(i,N)}while(!0);if(wg(),Ct=d,of.current=g,yn!==null)throw Error(n(261));return Pn=null,Mn=0,Tn}function gR(){for(;yn!==null;)_E(yn)}function yR(){for(;yn!==null&&!ch();)_E(yn)}function _E(i){var l=SE(i.alternate,i,Mr);i.memoizedProps=i.pendingProps,l===null?EE(i):yn=l,Jg.current=null}function EE(i){var l=i;do{var d=l.alternate;if(i=l.return,(l.flags&32768)===0){if(d=cR(d,l,Mr),d!==null){yn=d;return}}else{if(d=uR(d,l),d!==null){d.flags&=32767,yn=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Tn=6,yn=null;return}}if(l=l.sibling,l!==null){yn=l;return}yn=l=i}while(l!==null);Tn===0&&(Tn=5)}function Oa(i,l,d){var g=vt,N=Yr.transition;try{Yr.transition=null,vt=1,vR(i,l,d,g)}finally{Yr.transition=N,vt=g}return null}function vR(i,l,d,g){do ic();while(_o!==null);if((Ct&6)!==0)throw Error(n(327));d=i.finishedWork;var N=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var T=d.lanes|d.childLanes;if(Mt(i,T),i===Pn&&(yn=Pn=null,Mn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||cf||(cf=!0,TE(Br,function(){return ic(),null})),T=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||T){T=Yr.transition,Yr.transition=null;var M=vt;vt=1;var q=Ct;Ct|=4,Jg.current=null,hR(i,d),hE(d,i),Fk(ag),co=!!og,ag=og=null,i.current=d,fR(d),qm(),Ct=q,vt=M,Yr.transition=T}else i.current=d;if(cf&&(cf=!1,_o=i,uf=N),T=i.pendingLanes,T===0&&(wo=null),hh(d.stateNode),vr(i,Vt()),l!==null)for(g=i.onRecoverableError,d=0;d<l.length;d++)N=l[d],g(N.value,{componentStack:N.stack,digest:N.digest});if(lf)throw lf=!1,i=ty,ty=null,i;return(uf&1)!==0&&i.tag!==0&&ic(),T=i.pendingLanes,(T&1)!==0?i===ny?Wu++:(Wu=0,ny=i):Wu=0,go(),null}function ic(){if(_o!==null){var i=ao(uf),l=Yr.transition,d=vt;try{if(Yr.transition=null,vt=16>i?16:i,_o===null)var g=!1;else{if(i=_o,_o=null,uf=0,(Ct&6)!==0)throw Error(n(331));var N=Ct;for(Ct|=4,Oe=i.current;Oe!==null;){var T=Oe,M=T.child;if((Oe.flags&16)!==0){var q=T.deletions;if(q!==null){for(var G=0;G<q.length;G++){var ae=q[G];for(Oe=ae;Oe!==null;){var fe=Oe;switch(fe.tag){case 0:case 11:case 15:zu(8,fe,T)}var ge=fe.child;if(ge!==null)ge.return=fe,Oe=ge;else for(;Oe!==null;){fe=Oe;var he=fe.sibling,Pe=fe.return;if(aE(fe),fe===ae){Oe=null;break}if(he!==null){he.return=Pe,Oe=he;break}Oe=Pe}}}var Me=T.alternate;if(Me!==null){var Fe=Me.child;if(Fe!==null){Me.child=null;do{var hn=Fe.sibling;Fe.sibling=null,Fe=hn}while(Fe!==null)}}Oe=T}}if((T.subtreeFlags&2064)!==0&&M!==null)M.return=T,Oe=M;else e:for(;Oe!==null;){if(T=Oe,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:zu(9,T,T.return)}var se=T.sibling;if(se!==null){se.return=T.return,Oe=se;break e}Oe=T.return}}var X=i.current;for(Oe=X;Oe!==null;){M=Oe;var oe=M.child;if((M.subtreeFlags&2064)!==0&&oe!==null)oe.return=M,Oe=oe;else e:for(M=X;Oe!==null;){if(q=Oe,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:sf(9,q)}}catch($e){ln(q,q.return,$e)}if(q===M){Oe=null;break e}var xe=q.sibling;if(xe!==null){xe.return=q.return,Oe=xe;break e}Oe=q.return}}if(Ct=N,go(),Pr&&typeof Pr.onPostCommitFiberRoot=="function")try{Pr.onPostCommitFiberRoot(ya,i)}catch{}g=!0}return g}finally{vt=d,Yr.transition=l}}return!1}function bE(i,l,d){l=tc(d,l),l=$_(i,l,1),i=vo(i,l,1),l=sr(),i!==null&&(io(i,1,l),vr(i,l))}function ln(i,l,d){if(i.tag===3)bE(i,i,d);else for(;l!==null;){if(l.tag===3){bE(l,i,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(wo===null||!wo.has(g))){i=tc(d,i),i=z_(l,i,1),l=vo(l,i,1),i=sr(),l!==null&&(io(l,1,i),vr(l,i));break}}l=l.return}}function xR(i,l,d){var g=i.pingCache;g!==null&&g.delete(l),l=sr(),i.pingedLanes|=i.suspendedLanes&d,Pn===i&&(Mn&d)===d&&(Tn===4||Tn===3&&(Mn&130023424)===Mn&&500>Vt()-ey?Ra(i,0):Zg|=d),vr(i,l)}function NE(i,l){l===0&&((i.mode&1)===0?l=1:(l=jl,jl<<=1,(jl&130023424)===0&&(jl=4194304)));var d=sr();i=ji(i,l),i!==null&&(io(i,l,d),vr(i,d))}function wR(i){var l=i.memoizedState,d=0;l!==null&&(d=l.retryLane),NE(i,d)}function _R(i,l){var d=0;switch(i.tag){case 13:var g=i.stateNode,N=i.memoizedState;N!==null&&(d=N.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(l),NE(i,d)}var SE;SE=function(i,l,d){if(i!==null)if(i.memoizedProps!==l.pendingProps||pr.current)gr=!0;else{if((i.lanes&d)===0&&(l.flags&128)===0)return gr=!1,lR(i,l,d);gr=(i.flags&131072)!==0}else gr=!1,Xt&&(l.flags&1048576)!==0&&s_(l,$h,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;nf(i,l),i=l.pendingProps;var N=Kl(l,Wn.current);Zl(l,d),N=Pg(null,l,g,i,N,d);var T=kg();return l.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,mr(g)?(T=!0,Fh(l)):T=!1,l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Ng(l),N.updater=ef,l.stateNode=N,N._reactInternals=l,Fg(l,g,i,d),l=zg(null,l,g,!0,T,d)):(l.tag=0,Xt&&T&&pg(l),rr(null,l,N,d),l=l.child),l;case 16:g=l.elementType;e:{switch(nf(i,l),i=l.pendingProps,N=g._init,g=N(g._payload),l.type=g,N=l.tag=bR(g),i=ys(g,i),N){case 0:l=$g(null,l,g,i,d);break e;case 1:l=X_(null,l,g,i,d);break e;case 11:l=H_(null,l,g,i,d);break e;case 14:l=K_(null,l,g,ys(g.type,i),d);break e}throw Error(n(306,g,""))}return l;case 0:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:ys(g,N),$g(i,l,g,N,d);case 1:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:ys(g,N),X_(i,l,g,N,d);case 3:e:{if(J_(l),i===null)throw Error(n(387));g=l.pendingProps,T=l.memoizedState,N=T.element,f_(i,l),Kh(l,g,null,d);var M=l.memoizedState;if(g=M.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){N=tc(Error(n(423)),l),l=Z_(i,l,g,d,N);break e}else if(g!==N){N=tc(Error(n(424)),l),l=Z_(i,l,g,d,N);break e}else for(Lr=fo(l.stateNode.containerInfo.firstChild),Dr=l,Xt=!0,gs=null,d=d_(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Yl(),g===N){l=Ai(i,l,d);break e}rr(i,l,g,d)}l=l.child}return l;case 5:return g_(l),i===null&&yg(l),g=l.type,N=l.pendingProps,T=i!==null?i.memoizedProps:null,M=N.children,lg(g,N)?M=null:T!==null&&lg(g,T)&&(l.flags|=32),Y_(i,l),rr(i,l,M,d),l.child;case 6:return i===null&&yg(l),null;case 13:return eE(i,l,d);case 4:return Sg(l,l.stateNode.containerInfo),g=l.pendingProps,i===null?l.child=Xl(l,null,g,d):rr(i,l,g,d),l.child;case 11:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:ys(g,N),H_(i,l,g,N,d);case 7:return rr(i,l,l.pendingProps,d),l.child;case 8:return rr(i,l,l.pendingProps.children,d),l.child;case 12:return rr(i,l,l.pendingProps.children,d),l.child;case 10:e:{if(g=l.type._context,N=l.pendingProps,T=l.memoizedProps,M=N.value,Ut(qh,g._currentValue),g._currentValue=M,T!==null)if(ms(T.value,M)){if(T.children===N.children&&!pr.current){l=Ai(i,l,d);break e}}else for(T=l.child,T!==null&&(T.return=l);T!==null;){var q=T.dependencies;if(q!==null){M=T.child;for(var G=q.firstContext;G!==null;){if(G.context===g){if(T.tag===1){G=Ii(-1,d&-d),G.tag=2;var ae=T.updateQueue;if(ae!==null){ae=ae.shared;var fe=ae.pending;fe===null?G.next=G:(G.next=fe.next,fe.next=G),ae.pending=G}}T.lanes|=d,G=T.alternate,G!==null&&(G.lanes|=d),Eg(T.return,d,l),q.lanes|=d;break}G=G.next}}else if(T.tag===10)M=T.type===l.type?null:T.child;else if(T.tag===18){if(M=T.return,M===null)throw Error(n(341));M.lanes|=d,q=M.alternate,q!==null&&(q.lanes|=d),Eg(M,d,l),M=T.sibling}else M=T.child;if(M!==null)M.return=T;else for(M=T;M!==null;){if(M===l){M=null;break}if(T=M.sibling,T!==null){T.return=M.return,M=T;break}M=M.return}T=M}rr(i,l,N.children,d),l=l.child}return l;case 9:return N=l.type,g=l.pendingProps.children,Zl(l,d),N=Gr(N),g=g(N),l.flags|=1,rr(i,l,g,d),l.child;case 14:return g=l.type,N=ys(g,l.pendingProps),N=ys(g.type,N),K_(i,l,g,N,d);case 15:return G_(i,l,l.type,l.pendingProps,d);case 17:return g=l.type,N=l.pendingProps,N=l.elementType===g?N:ys(g,N),nf(i,l),l.tag=1,mr(g)?(i=!0,Fh(l)):i=!1,Zl(l,d),V_(l,g,N),Fg(l,g,N,d),zg(null,l,g,!0,i,d);case 19:return nE(i,l,d);case 22:return Q_(i,l,d)}throw Error(n(156,l.tag))};function TE(i,l){return Tl(i,l)}function ER(i,l,d,g){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(i,l,d,g){return new ER(i,l,d,g)}function ly(i){return i=i.prototype,!(!i||!i.isReactComponent)}function bR(i){if(typeof i=="function")return ly(i)?1:0;if(i!=null){if(i=i.$$typeof,i===U)return 11;if(i===Q)return 14}return 2}function No(i,l){var d=i.alternate;return d===null?(d=Xr(i.tag,l,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=l,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,l=i.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function pf(i,l,d,g,N,T){var M=2;if(g=i,typeof i=="function")ly(i)&&(M=1);else if(typeof i=="string")M=5;else e:switch(i){case P:return Da(d.children,N,T,l);case k:M=8,N|=8;break;case D:return i=Xr(12,d,l,N|2),i.elementType=D,i.lanes=T,i;case F:return i=Xr(13,d,l,N),i.elementType=F,i.lanes=T,i;case H:return i=Xr(19,d,l,N),i.elementType=H,i.lanes=T,i;case Z:return mf(d,N,T,l);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:M=10;break e;case O:M=9;break e;case U:M=11;break e;case Q:M=14;break e;case K:M=16,g=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return l=Xr(M,d,l,N),l.elementType=i,l.type=g,l.lanes=T,l}function Da(i,l,d,g){return i=Xr(7,i,g,l),i.lanes=d,i}function mf(i,l,d,g){return i=Xr(22,i,g,l),i.elementType=Z,i.lanes=d,i.stateNode={isHidden:!1},i}function cy(i,l,d){return i=Xr(6,i,null,l),i.lanes=d,i}function uy(i,l,d){return l=Xr(4,i.children!==null?i.children:[],i.key,l),l.lanes=d,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}function NR(i,l,d,g,N){this.tag=l,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=so(0),this.expirationTimes=so(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=so(0),this.identifierPrefix=g,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function dy(i,l,d,g,N,T,M,q,G){return i=new NR(i,l,d,q,G),l===1?(l=1,T===!0&&(l|=8)):l=0,T=Xr(3,null,null,l),i.current=T,T.stateNode=i,T.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ng(T),i}function SR(i,l,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:g==null?null:""+g,children:i,containerInfo:l,implementation:d}}function CE(i){if(!i)return mo;i=i._reactInternals;e:{if(ls(i)!==i||i.tag!==1)throw Error(n(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(mr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(i.tag===1){var d=i.type;if(mr(d))return t_(i,d,l)}return l}function jE(i,l,d,g,N,T,M,q,G){return i=dy(d,g,!0,i,N,T,M,q,G),i.context=CE(null),d=i.current,g=sr(),N=Eo(d),T=Ii(g,N),T.callback=l??null,vo(d,T,N),i.current.lanes=N,io(i,N,g),vr(i,g),i}function gf(i,l,d,g){var N=l.current,T=sr(),M=Eo(N);return d=CE(d),l.context===null?l.context=d:l.pendingContext=d,l=Ii(T,M),l.payload={element:i},g=g===void 0?null:g,g!==null&&(l.callback=g),i=vo(N,l,M),i!==null&&(ws(i,N,M,T),Hh(i,N,M)),M}function yf(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function IE(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<l?d:l}}function hy(i,l){IE(i,l),(i=i.alternate)&&IE(i,l)}function TR(){return null}var AE=typeof reportError=="function"?reportError:function(i){console.error(i)};function fy(i){this._internalRoot=i}vf.prototype.render=fy.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(n(409));gf(i,l,null,null)},vf.prototype.unmount=fy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;ka(function(){gf(null,i,null,null)}),l[Ni]=null}};function vf(i){this._internalRoot=i}vf.prototype.unstable_scheduleHydration=function(i){if(i){var l=yh();i={blockedOn:null,target:i,priority:l};for(var d=0;d<qs.length&&l!==0&&l<qs[d].priority;d++);qs.splice(d,0,i),d===0&&wh(i)}};function py(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function xf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function PE(){}function CR(i,l,d,g,N){if(N){if(typeof g=="function"){var T=g;g=function(){var ae=yf(M);T.call(ae)}}var M=jE(l,g,i,0,null,!1,!1,"",PE);return i._reactRootContainer=M,i[Ni]=M.current,Iu(i.nodeType===8?i.parentNode:i),ka(),M}for(;N=i.lastChild;)i.removeChild(N);if(typeof g=="function"){var q=g;g=function(){var ae=yf(G);q.call(ae)}}var G=dy(i,0,!1,null,null,!1,!1,"",PE);return i._reactRootContainer=G,i[Ni]=G.current,Iu(i.nodeType===8?i.parentNode:i),ka(function(){gf(l,G,d,g)}),G}function wf(i,l,d,g,N){var T=d._reactRootContainer;if(T){var M=T;if(typeof N=="function"){var q=N;N=function(){var G=yf(M);q.call(G)}}gf(l,M,i,N)}else M=CR(d,l,i,N,g);return yf(M)}mh=function(i){switch(i.tag){case 3:var l=i.stateNode;if(l.current.memoizedState.isDehydrated){var d=ro(l.pendingLanes);d!==0&&(oo(l,d|1),vr(l,Vt()),(Ct&6)===0&&(sc=Vt()+500,go()))}break;case 13:ka(function(){var g=ji(i,1);if(g!==null){var N=sr();ws(g,i,1,N)}}),hy(i,1)}},Il=function(i){if(i.tag===13){var l=ji(i,134217728);if(l!==null){var d=sr();ws(l,i,134217728,d)}hy(i,134217728)}},gh=function(i){if(i.tag===13){var l=Eo(i),d=ji(i,l);if(d!==null){var g=sr();ws(d,i,l,g)}hy(i,l)}},yh=function(){return vt},vh=function(i,l){var d=vt;try{return vt=i,l()}finally{vt=d}},gt=function(i,l,d){switch(l){case"input":if(zn(i,d),l=d.name,d.type==="radio"&&l!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==i&&g.form===i.form){var N=Lh(g);if(!N)throw Error(n(90));it(g),zn(g,N)}}}break;case"textarea":Ms(i,d);break;case"select":l=d.value,l!=null&&Ir(i,!!d.multiple,l,!1)}},Tt=iy,lt=ka;var jR={usingClientEntryPoint:!1,Events:[ku,Wl,Lh,ye,Ue,iy]},Hu={findFiberByHostInstance:Na,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IR={bundleType:Hu.bundleType,version:Hu.version,rendererPackageName:Hu.rendererPackageName,rendererConfig:Hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=fu(i),i===null?null:i.stateNode},findFiberByHostInstance:Hu.findFiberByHostInstance||TR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{ya=_f.inject(IR),Pr=_f}catch{}}return xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jR,xr.createPortal=function(i,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!py(l))throw Error(n(200));return SR(i,l,null,d)},xr.createRoot=function(i,l){if(!py(i))throw Error(n(299));var d=!1,g="",N=AE;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=dy(i,1,!1,null,null,d,!1,g,N),i[Ni]=l.current,Iu(i.nodeType===8?i.parentNode:i),new fy(l)},xr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=fu(l),i=i===null?null:i.stateNode,i},xr.flushSync=function(i){return ka(i)},xr.hydrate=function(i,l,d){if(!xf(l))throw Error(n(200));return wf(null,i,l,!0,d)},xr.hydrateRoot=function(i,l,d){if(!py(i))throw Error(n(405));var g=d!=null&&d.hydratedSources||null,N=!1,T="",M=AE;if(d!=null&&(d.unstable_strictMode===!0&&(N=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(M=d.onRecoverableError)),l=jE(l,null,i,1,d??null,N,!1,T,M),i[Ni]=l.current,Iu(i),g)for(i=0;i<g.length;i++)d=g[i],N=d._getVersion,N=N(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,N]:l.mutableSourceEagerHydrationData.push(d,N);return new vf(l)},xr.render=function(i,l,d){if(!xf(l))throw Error(n(200));return wf(null,i,l,!1,d)},xr.unmountComponentAtNode=function(i){if(!xf(i))throw Error(n(40));return i._reactRootContainer?(ka(function(){wf(null,null,i,!1,function(){i._reactRootContainer=null,i[Ni]=null})}),!0):!1},xr.unstable_batchedUpdates=iy,xr.unstable_renderSubtreeIntoContainer=function(i,l,d,g){if(!xf(d))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return wf(i,l,d,!1,g)},xr.version="18.3.1-next-f1338f8080-20240426",xr}var BE;function Z1(){if(BE)return wy.exports;BE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wy.exports=GR(),wy.exports}var dl=Z1();const Wp=X1(dl);function qe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function QR(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function eS(...t){return e=>t.forEach(n=>QR(n,e))}function jt(...t){return _.useCallback(eS(...t),t)}function Gi(t,e=[]){let n=[];function r(a,c){const u=_.createContext(c),h=n.length;n=[...n,c];function f(y){const{scope:v,children:w,...b}=y,x=(v==null?void 0:v[t][h])||u,E=_.useMemo(()=>b,Object.values(b));return o.jsx(x.Provider,{value:E,children:w})}function m(y,v){const w=(v==null?void 0:v[t][h])||u,b=_.useContext(w);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return f.displayName=a+"Provider",[f,m]}const s=()=>{const a=n.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[t])||a;return _.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[r,YR(s,...e)]}function YR(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const y=h(a)[`__scope${f}`];return{...u,...y}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var Ja=_.forwardRef((t,e)=>{const{children:n,...r}=t,s=_.Children.toArray(n),a=s.find(XR);if(a){const c=a.props.children,u=s.map(h=>h===a?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:h);return o.jsx(ov,{...r,ref:e,children:_.isValidElement(c)?_.cloneElement(c,void 0,u):null})}return o.jsx(ov,{...r,ref:e,children:n})});Ja.displayName="Slot";var ov=_.forwardRef((t,e)=>{const{children:n,...r}=t;if(_.isValidElement(n)){const s=ZR(n);return _.cloneElement(n,{...JR(r,n.props),ref:e?eS(e,s):s})}return _.Children.count(n)>1?_.Children.only(null):null});ov.displayName="SlotClone";var tS=({children:t})=>o.jsx(o.Fragment,{children:t});function XR(t){return _.isValidElement(t)&&t.type===tS}function JR(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...u)=>{a(...u),s(...u)}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function ZR(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Cx(t){const e=t+"CollectionProvider",[n,r]=Gi(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),c=w=>{const{scope:b,children:x}=w,E=_e.useRef(null),A=_e.useRef(new Map).current;return o.jsx(s,{scope:b,itemMap:A,collectionRef:E,children:x})};c.displayName=e;const u=t+"CollectionSlot",h=_e.forwardRef((w,b)=>{const{scope:x,children:E}=w,A=a(u,x),j=jt(b,A.collectionRef);return o.jsx(Ja,{ref:j,children:E})});h.displayName=u;const f=t+"CollectionItemSlot",m="data-radix-collection-item",y=_e.forwardRef((w,b)=>{const{scope:x,children:E,...A}=w,j=_e.useRef(null),C=jt(b,j),L=a(f,x);return _e.useEffect(()=>(L.itemMap.set(j,{ref:j,...A}),()=>void L.itemMap.delete(j))),o.jsx(Ja,{[m]:"",ref:C,children:E})});y.displayName=f;function v(w){const b=a(t+"CollectionConsumer",w);return _e.useCallback(()=>{const E=b.collectionRef.current;if(!E)return[];const A=Array.from(E.querySelectorAll(`[${m}]`));return Array.from(b.itemMap.values()).sort((L,V)=>A.indexOf(L.ref.current)-A.indexOf(V.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:c,Slot:h,ItemSlot:y},v,r]}var e2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Je=e2.reduce((t,e)=>{const n=_.forwardRef((r,s)=>{const{asChild:a,...c}=r,u=a?Ja:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(u,{...c,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Hp(t,e){t&&dl.flushSync(()=>t.dispatchEvent(e))}function jn(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function jx(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var t2="DismissableLayer",av="dismissableLayer.update",n2="dismissableLayer.pointerDownOutside",r2="dismissableLayer.focusOutside",qE,nS=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rS=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=t,f=_.useContext(nS),[m,y]=_.useState(null),v=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=_.useState({}),b=jt(e,P=>y(P)),x=Array.from(f.layers),[E]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),A=x.indexOf(E),j=m?x.indexOf(m):-1,C=f.layersWithOutsidePointerEventsDisabled.size>0,L=j>=A,V=i2(P=>{const k=P.target,D=[...f.branches].some(R=>R.contains(k));!L||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},v),z=o2(P=>{const k=P.target;[...f.branches].some(R=>R.contains(k))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},v);return jx(P=>{j===f.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},v),_.useEffect(()=>{if(m)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(qE=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),WE(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=qE)}},[m,v,n,f]),_.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),WE())},[m,f]),_.useEffect(()=>{const P=()=>w({});return document.addEventListener(av,P),()=>document.removeEventListener(av,P)},[]),o.jsx(Je.div,{...h,ref:b,style:{pointerEvents:C?L?"auto":"none":void 0,...t.style},onFocusCapture:qe(t.onFocusCapture,z.onFocusCapture),onBlurCapture:qe(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:qe(t.onPointerDownCapture,V.onPointerDownCapture)})});rS.displayName=t2;var s2="DismissableLayerBranch",sS=_.forwardRef((t,e)=>{const n=_.useContext(nS),r=_.useRef(null),s=jt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(Je.div,{...t,ref:s})});sS.displayName=s2;function i2(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){iS(n2,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function o2(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=_.useRef(!1);return _.useEffect(()=>{const s=a=>{a.target&&!r.current&&iS(r2,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function WE(){const t=new CustomEvent(av);document.dispatchEvent(t)}function iS(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Hp(s,a):s.dispatchEvent(a)}var a2=rS,l2=sS,Zt=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},c2="Portal",oS=_.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,a]=_.useState(!1);Zt(()=>a(!0),[]);const c=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Wp.createPortal(o.jsx(Je.div,{...r,ref:e}),c):null});oS.displayName=c2;function u2(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var Ix=t=>{const{present:e,children:n}=t,r=d2(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),a=jt(r.ref,h2(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:a}):null};Ix.displayName="Presence";function d2(t){const[e,n]=_.useState(),r=_.useRef({}),s=_.useRef(t),a=_.useRef("none"),c=t?"mounted":"unmounted",[u,h]=u2(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const f=bf(r.current);a.current=u==="mounted"?f:"none"},[u]),Zt(()=>{const f=r.current,m=s.current;if(m!==t){const v=a.current,w=bf(f);t?h("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(m&&v!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),Zt(()=>{if(e){const f=y=>{const w=bf(r.current).includes(y.animationName);y.target===e&&w&&dl.flushSync(()=>h("ANIMATION_END"))},m=y=>{y.target===e&&(a.current=bf(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function bf(t){return(t==null?void 0:t.animationName)||"none"}function h2(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Za({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=f2({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:r,u=jn(n),h=_.useCallback(f=>{if(a){const y=typeof f=="function"?f(t):f;y!==t&&u(y)}else s(f)},[a,t,s,u]);return[c,h]}function f2({defaultProp:t,onChange:e}){const n=_.useState(t),[r]=n,s=_.useRef(r),a=jn(e);return _.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),n}var p2="VisuallyHidden",Bd=_.forwardRef((t,e)=>o.jsx(Je.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Bd.displayName=p2;var m2=Bd,Ax="ToastProvider",[Px,g2,y2]=Cx("Toast"),[aS,Hq]=Gi("Toast",[y2]),[v2,Kp]=aS(Ax),lS=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:c}=t,[u,h]=_.useState(null),[f,m]=_.useState(0),y=_.useRef(!1),v=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ax}\`. Expected non-empty \`string\`.`),o.jsx(Px.Provider,{scope:e,children:o.jsx(v2,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:f,viewport:u,onViewportChange:h,onToastAdd:_.useCallback(()=>m(w=>w+1),[]),onToastRemove:_.useCallback(()=>m(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:v,children:c})})};lS.displayName=Ax;var cS="ToastViewport",x2=["F8"],lv="toast.viewportPause",cv="toast.viewportResume",uS=_.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=x2,label:s="Notifications ({hotkey})",...a}=t,c=Kp(cS,n),u=g2(n),h=_.useRef(null),f=_.useRef(null),m=_.useRef(null),y=_.useRef(null),v=jt(e,y,c.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=c.toastCount>0;_.useEffect(()=>{const E=A=>{var C;r.every(L=>A[L]||A.code===L)&&((C=y.current)==null||C.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),_.useEffect(()=>{const E=h.current,A=y.current;if(b&&E&&A){const j=()=>{if(!c.isClosePausedRef.current){const z=new CustomEvent(lv);A.dispatchEvent(z),c.isClosePausedRef.current=!0}},C=()=>{if(c.isClosePausedRef.current){const z=new CustomEvent(cv);A.dispatchEvent(z),c.isClosePausedRef.current=!1}},L=z=>{!E.contains(z.relatedTarget)&&C()},V=()=>{E.contains(document.activeElement)||C()};return E.addEventListener("focusin",j),E.addEventListener("focusout",L),E.addEventListener("pointermove",j),E.addEventListener("pointerleave",V),window.addEventListener("blur",j),window.addEventListener("focus",C),()=>{E.removeEventListener("focusin",j),E.removeEventListener("focusout",L),E.removeEventListener("pointermove",j),E.removeEventListener("pointerleave",V),window.removeEventListener("blur",j),window.removeEventListener("focus",C)}}},[b,c.isClosePausedRef]);const x=_.useCallback(({tabbingDirection:E})=>{const j=u().map(C=>{const L=C.ref.current,V=[L,...k2(L)];return E==="forwards"?V:V.reverse()});return(E==="forwards"?j.reverse():j).flat()},[u]);return _.useEffect(()=>{const E=y.current;if(E){const A=j=>{var V,z,P;const C=j.altKey||j.ctrlKey||j.metaKey;if(j.key==="Tab"&&!C){const k=document.activeElement,D=j.shiftKey;if(j.target===E&&D){(V=f.current)==null||V.focus();return}const U=x({tabbingDirection:D?"backwards":"forwards"}),F=U.findIndex(H=>H===k);by(U.slice(F+1))?j.preventDefault():D?(z=f.current)==null||z.focus():(P=m.current)==null||P.focus()}};return E.addEventListener("keydown",A),()=>E.removeEventListener("keydown",A)}},[u,x]),o.jsxs(l2,{ref:h,role:"region","aria-label":s.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&o.jsx(uv,{ref:f,onFocusFromOutsideViewport:()=>{const E=x({tabbingDirection:"forwards"});by(E)}}),o.jsx(Px.Slot,{scope:n,children:o.jsx(Je.ol,{tabIndex:-1,...a,ref:v})}),b&&o.jsx(uv,{ref:m,onFocusFromOutsideViewport:()=>{const E=x({tabbingDirection:"backwards"});by(E)}})]})});uS.displayName=cS;var dS="ToastFocusProxy",uv=_.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,a=Kp(dS,n);return o.jsx(Bd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:c=>{var f;const u=c.relatedTarget;!((f=a.viewport)!=null&&f.contains(u))&&r()}})});uv.displayName=dS;var Gp="Toast",w2="toast.swipeStart",_2="toast.swipeMove",E2="toast.swipeCancel",b2="toast.swipeEnd",hS=_.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...c}=t,[u=!0,h]=Za({prop:r,defaultProp:s,onChange:a});return o.jsx(Ix,{present:n||u,children:o.jsx(T2,{open:u,...c,ref:e,onClose:()=>h(!1),onPause:jn(t.onPause),onResume:jn(t.onResume),onSwipeStart:qe(t.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:qe(t.onSwipeMove,f=>{const{x:m,y}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:qe(t.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:qe(t.onSwipeEnd,f=>{const{x:m,y}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),h(!1)})})})});hS.displayName=Gp;var[N2,S2]=aS(Gp,{onClose(){}}),T2=_.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:c,onEscapeKeyDown:u,onPause:h,onResume:f,onSwipeStart:m,onSwipeMove:y,onSwipeCancel:v,onSwipeEnd:w,...b}=t,x=Kp(Gp,n),[E,A]=_.useState(null),j=jt(e,H=>A(H)),C=_.useRef(null),L=_.useRef(null),V=s||x.duration,z=_.useRef(0),P=_.useRef(V),k=_.useRef(0),{onToastAdd:D,onToastRemove:R}=x,O=jn(()=>{var Q;(E==null?void 0:E.contains(document.activeElement))&&((Q=x.viewport)==null||Q.focus()),c()}),U=_.useCallback(H=>{!H||H===1/0||(window.clearTimeout(k.current),z.current=new Date().getTime(),k.current=window.setTimeout(O,H))},[O]);_.useEffect(()=>{const H=x.viewport;if(H){const Q=()=>{U(P.current),f==null||f()},K=()=>{const Z=new Date().getTime()-z.current;P.current=P.current-Z,window.clearTimeout(k.current),h==null||h()};return H.addEventListener(lv,K),H.addEventListener(cv,Q),()=>{H.removeEventListener(lv,K),H.removeEventListener(cv,Q)}}},[x.viewport,V,h,f,U]),_.useEffect(()=>{a&&!x.isClosePausedRef.current&&U(V)},[a,V,x.isClosePausedRef,U]),_.useEffect(()=>(D(),()=>R()),[D,R]);const F=_.useMemo(()=>E?xS(E):null,[E]);return x.viewport?o.jsxs(o.Fragment,{children:[F&&o.jsx(C2,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:F}),o.jsx(N2,{scope:n,onClose:O,children:dl.createPortal(o.jsx(Px.ItemSlot,{scope:n,children:o.jsx(a2,{asChild:!0,onEscapeKeyDown:qe(u,()=>{x.isFocusedToastEscapeKeyDownRef.current||O(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(Je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":x.swipeDirection,...b,ref:j,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:qe(t.onKeyDown,H=>{H.key==="Escape"&&(u==null||u(H.nativeEvent),H.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:qe(t.onPointerDown,H=>{H.button===0&&(C.current={x:H.clientX,y:H.clientY})}),onPointerMove:qe(t.onPointerMove,H=>{if(!C.current)return;const Q=H.clientX-C.current.x,K=H.clientY-C.current.y,Z=!!L.current,W=["left","right"].includes(x.swipeDirection),Y=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,ne=W?Y(0,Q):0,B=W?0:Y(0,K),ee=H.pointerType==="touch"?10:2,ue={x:ne,y:B},Se={originalEvent:H,delta:ue};Z?(L.current=ue,Nf(_2,y,Se,{discrete:!1})):HE(ue,x.swipeDirection,ee)?(L.current=ue,Nf(w2,m,Se,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(Q)>ee||Math.abs(K)>ee)&&(C.current=null)}),onPointerUp:qe(t.onPointerUp,H=>{const Q=L.current,K=H.target;if(K.hasPointerCapture(H.pointerId)&&K.releasePointerCapture(H.pointerId),L.current=null,C.current=null,Q){const Z=H.currentTarget,W={originalEvent:H,delta:Q};HE(Q,x.swipeDirection,x.swipeThreshold)?Nf(b2,w,W,{discrete:!0}):Nf(E2,v,W,{discrete:!0}),Z.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),C2=t=>{const{__scopeToast:e,children:n,...r}=t,s=Kp(Gp,e),[a,c]=_.useState(!1),[u,h]=_.useState(!1);return A2(()=>c(!0)),_.useEffect(()=>{const f=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(f)},[]),u?null:o.jsx(oS,{asChild:!0,children:o.jsx(Bd,{...r,children:a&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},j2="ToastTitle",fS=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(Je.div,{...r,ref:e})});fS.displayName=j2;var I2="ToastDescription",pS=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(Je.div,{...r,ref:e})});pS.displayName=I2;var mS="ToastAction",gS=_.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?o.jsx(vS,{altText:n,asChild:!0,children:o.jsx(kx,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${mS}\`. Expected non-empty \`string\`.`),null)});gS.displayName=mS;var yS="ToastClose",kx=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=S2(yS,n);return o.jsx(vS,{asChild:!0,children:o.jsx(Je.button,{type:"button",...r,ref:e,onClick:qe(t.onClick,s.onClose)})})});kx.displayName=yS;var vS=_.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return o.jsx(Je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function xS(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),P2(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...xS(r))}}),e}function Nf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Hp(s,a):s.dispatchEvent(a)}var HE=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),a=r>s;return e==="left"||e==="right"?a&&r>n:!a&&s>n};function A2(t=()=>{}){const e=jn(t);Zt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function P2(t){return t.nodeType===t.ELEMENT_NODE}function k2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function by(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var R2=lS,wS=uS,_S=hS,ES=fS,bS=pS,NS=gS,SS=kx;function TS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=TS(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function CS(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=TS(t))&&(r&&(r+=" "),r+=e);return r}const KE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,GE=CS,qd=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return GE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,c=Object.keys(s).map(f=>{const m=n==null?void 0:n[f],y=a==null?void 0:a[f];if(m===null)return null;const v=KE(m)||KE(y);return s[f][v]}),u=n&&Object.entries(n).reduce((f,m)=>{let[y,v]=m;return v===void 0||(f[y]=v),f},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,m)=>{let{class:y,className:v,...w}=m;return Object.entries(w).every(b=>{let[x,E]=b;return Array.isArray(E)?E.includes({...a,...u}[x]):{...a,...u}[x]===E})?[...f,y,v]:f},[]);return GE(t,c,h,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jS=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:c,...u},h)=>_.createElement("svg",{ref:h,...D2,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:jS("lucide",s),...u},[...c.map(([f,m])=>_.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(t,e)=>{const n=_.forwardRef(({className:r,...s},a)=>_.createElement(L2,{ref:a,iconNode:e,className:jS(`lucide-${O2(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=ze("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=ze("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=ze("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=ze("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=ze("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=ze("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=ze("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=ze("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=ze("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=ze("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=ze("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=ze("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=ze("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=ze("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=ze("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=ze("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=ze("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=ze("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=ze("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=ze("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=ze("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=ze("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=ze("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=ze("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ze("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=ze("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=ze("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=ze("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=ze("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=ze("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=ze("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=ze("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=ze("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=ze("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ox="-",sO=t=>{const e=oO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{const u=c.split(Ox);return u[0]===""&&u.length!==1&&u.shift(),OS(u,e)||iO(c)},getConflictingClassGroupIds:(c,u)=>{const h=n[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},OS=(t,e)=>{var c;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?OS(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(Ox);return(c=e.validators.find(({validator:u})=>u(a)))==null?void 0:c.classGroupId},XE=/^\[(.+)\]$/,iO=t=>{if(XE.test(t)){const e=XE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},oO=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return lO(Object.entries(t.classGroups),n).forEach(([a,c])=>{pv(c,r,a,e)}),r},pv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:JE(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(aO(s)){pv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,c])=>{pv(c,JE(e,a),n,r)})})},JE=(t,e)=>{let n=t;return e.split(Ox).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},aO=t=>t.isThemeGetter,lO=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([c,u])=>[e+c,u])):a);return[n,s]}):t,cO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,c)=>{n.set(a,c),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let c=n.get(a);if(c!==void 0)return c;if((c=r.get(a))!==void 0)return s(a,c),c},set(a,c){n.has(a)?n.set(a,c):s(a,c)}}},DS="!",uO=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,c=u=>{const h=[];let f=0,m=0,y;for(let E=0;E<u.length;E++){let A=u[E];if(f===0){if(A===s&&(r||u.slice(E,E+a)===e)){h.push(u.slice(m,E)),m=E+a;continue}if(A==="/"){y=E;continue}}A==="["?f++:A==="]"&&f--}const v=h.length===0?u:u.substring(m),w=v.startsWith(DS),b=w?v.substring(1):v,x=y&&y>m?y-m:void 0;return{modifiers:h,hasImportantModifier:w,baseClassName:b,maybePostfixModifierPosition:x}};return n?u=>n({className:u,parseClassName:c}):c},dO=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},hO=t=>({cache:cO(t.cacheSize),parseClassName:uO(t),...sO(t)}),fO=/\s+/,pO=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],c=t.trim().split(fO);let u="";for(let h=c.length-1;h>=0;h-=1){const f=c[h],{modifiers:m,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:w}=n(f);let b=!!w,x=r(b?v.substring(0,w):v);if(!x){if(!b){u=f+(u.length>0?" "+u:u);continue}if(x=r(v),!x){u=f+(u.length>0?" "+u:u);continue}b=!1}const E=dO(m).join(":"),A=y?E+DS:E,j=A+x;if(a.includes(j))continue;a.push(j);const C=s(x,b);for(let L=0;L<C.length;++L){const V=C[L];a.push(A+V)}u=f+(u.length>0?" "+u:u)}return u};function mO(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=LS(e))&&(r&&(r+=" "),r+=n);return r}const LS=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=LS(t[r]))&&(n&&(n+=" "),n+=e);return n};function gO(t,...e){let n,r,s,a=c;function c(h){const f=e.reduce((m,y)=>y(m),t());return n=hO(f),r=n.cache.get,s=n.cache.set,a=u,u(h)}function u(h){const f=r(h);if(f)return f;const m=pO(h,n);return s(h,m),m}return function(){return a(mO.apply(null,arguments))}}const Kt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},MS=/^\[(?:([a-z-]+):)?(.+)\]$/i,yO=/^\d+\/\d+$/,vO=new Set(["px","full","screen"]),xO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_O=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,EO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ki=t=>yc(t)||vO.has(t)||yO.test(t),To=t=>Jc(t,"length",PO),yc=t=>!!t&&!Number.isNaN(Number(t)),Sy=t=>Jc(t,"number",yc),Gu=t=>!!t&&Number.isInteger(Number(t)),NO=t=>t.endsWith("%")&&yc(t.slice(0,-1)),ct=t=>MS.test(t),Co=t=>xO.test(t),SO=new Set(["length","size","percentage"]),TO=t=>Jc(t,SO,FS),CO=t=>Jc(t,"position",FS),jO=new Set(["image","url"]),IO=t=>Jc(t,jO,RO),AO=t=>Jc(t,"",kO),Qu=()=>!0,Jc=(t,e,n)=>{const r=MS.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},PO=t=>wO.test(t)&&!_O.test(t),FS=()=>!1,kO=t=>EO.test(t),RO=t=>bO.test(t),OO=()=>{const t=Kt("colors"),e=Kt("spacing"),n=Kt("blur"),r=Kt("brightness"),s=Kt("borderColor"),a=Kt("borderRadius"),c=Kt("borderSpacing"),u=Kt("borderWidth"),h=Kt("contrast"),f=Kt("grayscale"),m=Kt("hueRotate"),y=Kt("invert"),v=Kt("gap"),w=Kt("gradientColorStops"),b=Kt("gradientColorStopPositions"),x=Kt("inset"),E=Kt("margin"),A=Kt("opacity"),j=Kt("padding"),C=Kt("saturate"),L=Kt("scale"),V=Kt("sepia"),z=Kt("skew"),P=Kt("space"),k=Kt("translate"),D=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",ct,e],U=()=>[ct,e],F=()=>["",ki,To],H=()=>["auto",yc,ct],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",ct],ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[yc,ct];return{cacheSize:500,separator:":",theme:{colors:[Qu],spacing:[ki,To],blur:["none","",Co,ct],brightness:B(),borderColor:[t],borderRadius:["none","","full",Co,ct],borderSpacing:U(),borderWidth:F(),contrast:B(),grayscale:Y(),hueRotate:B(),invert:Y(),gap:U(),gradientColorStops:[t],gradientColorStopPositions:[NO,To],inset:O(),margin:O(),opacity:B(),padding:U(),saturate:B(),scale:B(),sepia:Y(),skew:B(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",ct]}],container:["container"],columns:[{columns:[Co]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),ct]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Gu,ct]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ct]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",Gu,ct]}],"grid-cols":[{"grid-cols":[Qu]}],"col-start-end":[{col:["auto",{span:["full",Gu,ct]},ct]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Qu]}],"row-start-end":[{row:["auto",{span:[Gu,ct]},ct]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ct]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ct]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ct,e]}],"min-w":[{"min-w":[ct,e,"min","max","fit"]}],"max-w":[{"max-w":[ct,e,"none","full","min","max","fit","prose",{screen:[Co]},Co]}],h:[{h:[ct,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ct,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ct,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ct,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Co,To]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Sy]}],"font-family":[{font:[Qu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ct]}],"line-clamp":[{"line-clamp":["none",yc,Sy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ki,ct]}],"list-image":[{"list-image":["none",ct]}],"list-style-type":[{list:["none","disc","decimal",ct]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ki,To]}],"underline-offset":[{"underline-offset":["auto",ki,ct]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ct]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ct]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),CO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",TO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},IO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:K()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[ki,ct]}],"outline-w":[{outline:[ki,To]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[ki,To]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Co,AO]}],"shadow-color":[{shadow:[Qu]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",Co,ct]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[y]}],saturate:[{saturate:[C]}],sepia:[{sepia:[V]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[V]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ct]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",ct]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",ct]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[L]}],"scale-x":[{"scale-x":[L]}],"scale-y":[{"scale-y":[L]}],rotate:[{rotate:[Gu,ct]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ct]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ct]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ct]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ki,To,Sy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},DO=gO(OO);function Ge(...t){return DO(CS(t))}function LO(t){if(!t||typeof t!="string")return null;const e=t.trim();try{const n=e.match(/https?:\/\/(?:drive\.google\.com)\/(?:file\/d\/([a-zA-Z0-9_-]+)\/view|open\?id=([a-zA-Z0-9_-]+))/i);if(n){const r=n[1]||n[2];if(r)return`https://drive.google.com/uc?export=view&id=${r}`}if(/dropbox\.com\//i.test(e)){if(e.includes("dl=0"))return e.replace("dl=0","dl=1");if(!e.includes("dl="))return e+"?dl=1"}return e}catch{return e}}const MO=R2,VS=_.forwardRef(({className:t,...e},n)=>o.jsx(wS,{ref:n,className:Ge("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));VS.displayName=wS.displayName;const FO=qd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),US=_.forwardRef(({className:t,variant:e,...n},r)=>o.jsx(_S,{ref:r,className:Ge(FO({variant:e}),t),...n}));US.displayName=_S.displayName;const VO=_.forwardRef(({className:t,...e},n)=>o.jsx(NS,{ref:n,className:Ge("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));VO.displayName=NS.displayName;const $S=_.forwardRef(({className:t,...e},n)=>o.jsx(SS,{ref:n,className:Ge("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(Uc,{className:"h-4 w-4"})}));$S.displayName=SS.displayName;const zS=_.forwardRef(({className:t,...e},n)=>o.jsx(ES,{ref:n,className:Ge("text-sm font-semibold",t),...e}));zS.displayName=ES.displayName;const BS=_.forwardRef(({className:t,...e},n)=>o.jsx(bS,{ref:n,className:Ge("text-sm opacity-90",t),...e}));BS.displayName=bS.displayName;function UO(){const{toasts:t}=WR();return o.jsxs(MO,{children:[t.map(function({id:e,title:n,description:r,action:s,...a}){return o.jsxs(US,{...a,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(zS,{children:n}),r&&o.jsx(BS,{children:r})]}),s,o.jsx($S,{})]},e)}),o.jsx(VS,{})]})}var Sf={},ZE;function $O(){if(ZE)return Sf;ZE=1;var t=Z1();return Sf.createRoot=t.createRoot,Sf.hydrateRoot=t.hydrateRoot,Sf}var zO=$O(),eb=["light","dark"],BO="(prefers-color-scheme: dark)",qO=_.createContext(void 0),WO={setTheme:t=>{},themes:[]},HO=()=>{var t;return(t=_.useContext(qO))!=null?t:WO};_.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:c,attrs:u,nonce:h})=>{let f=a==="system",m=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,y=s?eb.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(b,x=!1,E=!0)=>{let A=c?c[b]:b,j=x?b+"|| ''":`'${A}'`,C="";return s&&E&&!x&&eb.includes(b)&&(C+=`d.style.colorScheme = '${b}';`),n==="class"?x||A?C+=`c.add(${j})`:C+="null":A&&(C+=`d[s](n,${j})`),C},w=t?`!function(){${m}${v(t)}}()`:r?`!function(){try{${m}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${f})){var t='${BO}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}${f?"":"else{"+v(a,!1,!1)+"}"}${y}}catch(e){}}()`:`!function(){try{${m}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}else{${v(a,!1,!1)};}${y}}catch(t){}}();`;return _.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:w}})});var KO=t=>{switch(t){case"success":return YO;case"info":return JO;case"warning":return XO;case"error":return ZO;default:return null}},GO=Array(12).fill(0),QO=({visible:t})=>_e.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},_e.createElement("div",{className:"sonner-spinner"},GO.map((e,n)=>_e.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),YO=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),XO=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),JO=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ZO=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),eD=()=>{let[t,e]=_e.useState(document.hidden);return _e.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},mv=1,tD=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:mv++,c=this.toasts.find(h=>h.id===a),u=e.dismissible===void 0?!0:e.dismissible;return c?this.toasts=this.toasts.map(h=>h.id===a?(this.publish({...h,...e,id:a,title:r}),{...h,...e,id:a,dismissible:u,title:r}):h):this.addToast({title:r,...s,dismissible:u,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0;return s.then(async c=>{if(rD(c)&&!c.ok){a=!1;let u=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:u,description:h})}else if(n.success!==void 0){a=!1;let u=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(n.error!==void 0){a=!1;let u=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),r},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||mv++;return this.create({jsx:e(r),id:r,...n}),r},this.subscribers=[],this.toasts=[]}},Fr=new tD,nD=(t,e)=>{let n=(e==null?void 0:e.id)||mv++;return Fr.addToast({title:t,...e,id:n}),n},rD=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",sD=nD,iD=()=>Fr.toasts;Object.assign(sD,{success:Fr.success,info:Fr.info,warning:Fr.warning,error:Fr.error,custom:Fr.custom,message:Fr.message,promise:Fr.promise,dismiss:Fr.dismiss,loading:Fr.loading},{getHistory:iD});function oD(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}oD(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Tf(t){return t.label!==void 0}var aD=3,lD="32px",cD=4e3,uD=356,dD=14,hD=20,fD=200;function pD(...t){return t.filter(Boolean).join(" ")}var mD=t=>{var e,n,r,s,a,c,u,h,f,m;let{invert:y,toast:v,unstyled:w,interacting:b,setHeights:x,visibleToasts:E,heights:A,index:j,toasts:C,expanded:L,removeToast:V,defaultRichColors:z,closeButton:P,style:k,cancelButtonStyle:D,actionButtonStyle:R,className:O="",descriptionClassName:U="",duration:F,position:H,gap:Q,loadingIcon:K,expandByDefault:Z,classNames:W,icons:Y,closeButtonAriaLabel:ne="Close toast",pauseWhenPageIsHidden:B,cn:ee}=t,[ue,Se]=_e.useState(!1),[Le,Te]=_e.useState(!1),[we,Ce]=_e.useState(!1),[He,Ve]=_e.useState(!1),[st,it]=_e.useState(0),[ve,Ie]=_e.useState(0),mt=_e.useRef(null),an=_e.useRef(null),zn=j===0,jr=j+1<=E,Lt=v.type,mn=v.dismissible!==!1,Ir=v.className||"",is=v.descriptionClassName||"",dn=_e.useMemo(()=>A.findIndex(Ze=>Ze.toastId===v.id)||0,[A,v.id]),Ms=_e.useMemo(()=>{var Ze;return(Ze=v.closeButton)!=null?Ze:P},[v.closeButton,P]),Fs=_e.useMemo(()=>v.duration||F||cD,[v.duration,F]),zt=_e.useRef(0),kt=_e.useRef(0),Bn=_e.useRef(0),bn=_e.useRef(null),[Ar,os]=H.split("-"),zr=_e.useMemo(()=>A.reduce((Ze,Et,gt)=>gt>=dn?Ze:Ze+Et.height,0),[A,dn]),Vs=eD(),gi=v.invert||y,as=Lt==="loading";kt.current=_e.useMemo(()=>dn*Q+zr,[dn,zr]),_e.useEffect(()=>{Se(!0)},[]),_e.useLayoutEffect(()=>{if(!ue)return;let Ze=an.current,Et=Ze.style.height;Ze.style.height="auto";let gt=Ze.getBoundingClientRect().height;Ze.style.height=Et,Ie(gt),x(Bt=>Bt.find(Gt=>Gt.toastId===v.id)?Bt.map(Gt=>Gt.toastId===v.id?{...Gt,height:gt}:Gt):[{toastId:v.id,height:gt,position:v.position},...Bt])},[ue,v.title,v.description,x,v.id]);let qn=_e.useCallback(()=>{Te(!0),it(kt.current),x(Ze=>Ze.filter(Et=>Et.toastId!==v.id)),setTimeout(()=>{V(v)},fD)},[v,V,x,kt]);_e.useEffect(()=>{if(v.promise&&Lt==="loading"||v.duration===1/0||v.type==="loading")return;let Ze,Et=Fs;return L||b||B&&Vs?(()=>{if(Bn.current<zt.current){let gt=new Date().getTime()-zt.current;Et=Et-gt}Bn.current=new Date().getTime()})():Et!==1/0&&(zt.current=new Date().getTime(),Ze=setTimeout(()=>{var gt;(gt=v.onAutoClose)==null||gt.call(v,v),qn()},Et)),()=>clearTimeout(Ze)},[L,b,Z,v,Fs,qn,v.promise,Lt,B,Vs]),_e.useEffect(()=>{let Ze=an.current;if(Ze){let Et=Ze.getBoundingClientRect().height;return Ie(Et),x(gt=>[{toastId:v.id,height:Et,position:v.position},...gt]),()=>x(gt=>gt.filter(Bt=>Bt.toastId!==v.id))}},[x,v.id]),_e.useEffect(()=>{v.delete&&qn()},[qn,v.delete]);function Us(){return Y!=null&&Y.loading?_e.createElement("div",{className:"sonner-loader","data-visible":Lt==="loading"},Y.loading):K?_e.createElement("div",{className:"sonner-loader","data-visible":Lt==="loading"},K):_e.createElement(QO,{visible:Lt==="loading"})}return _e.createElement("li",{"aria-live":v.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:an,className:ee(O,Ir,W==null?void 0:W.toast,(e=v==null?void 0:v.classNames)==null?void 0:e.toast,W==null?void 0:W.default,W==null?void 0:W[Lt],(n=v==null?void 0:v.classNames)==null?void 0:n[Lt]),"data-sonner-toast":"","data-rich-colors":(r=v.richColors)!=null?r:z,"data-styled":!(v.jsx||v.unstyled||w),"data-mounted":ue,"data-promise":!!v.promise,"data-removed":Le,"data-visible":jr,"data-y-position":Ar,"data-x-position":os,"data-index":j,"data-front":zn,"data-swiping":we,"data-dismissible":mn,"data-type":Lt,"data-invert":gi,"data-swipe-out":He,"data-expanded":!!(L||Z&&ue),style:{"--index":j,"--toasts-before":j,"--z-index":C.length-j,"--offset":`${Le?st:kt.current}px`,"--initial-height":Z?"auto":`${ve}px`,...k,...v.style},onPointerDown:Ze=>{as||!mn||(mt.current=new Date,it(kt.current),Ze.target.setPointerCapture(Ze.pointerId),Ze.target.tagName!=="BUTTON"&&(Ce(!0),bn.current={x:Ze.clientX,y:Ze.clientY}))},onPointerUp:()=>{var Ze,Et,gt,Bt;if(He||!mn)return;bn.current=null;let Gt=Number(((Ze=an.current)==null?void 0:Ze.style.getPropertyValue("--swipe-amount").replace("px",""))||0),ie=new Date().getTime()-((Et=mt.current)==null?void 0:Et.getTime()),ye=Math.abs(Gt)/ie;if(Math.abs(Gt)>=hD||ye>.11){it(kt.current),(gt=v.onDismiss)==null||gt.call(v,v),qn(),Ve(!0);return}(Bt=an.current)==null||Bt.style.setProperty("--swipe-amount","0px"),Ce(!1)},onPointerMove:Ze=>{var Et;if(!bn.current||!mn)return;let gt=Ze.clientY-bn.current.y,Bt=Ze.clientX-bn.current.x,Gt=(Ar==="top"?Math.min:Math.max)(0,gt),ie=Ze.pointerType==="touch"?10:2;Math.abs(Gt)>ie?(Et=an.current)==null||Et.style.setProperty("--swipe-amount",`${gt}px`):Math.abs(Bt)>ie&&(bn.current=null)}},Ms&&!v.jsx?_e.createElement("button",{"aria-label":ne,"data-disabled":as,"data-close-button":!0,onClick:as||!mn?()=>{}:()=>{var Ze;qn(),(Ze=v.onDismiss)==null||Ze.call(v,v)},className:ee(W==null?void 0:W.closeButton,(s=v==null?void 0:v.classNames)==null?void 0:s.closeButton)},_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},_e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,v.jsx||_e.isValidElement(v.title)?v.jsx||v.title:_e.createElement(_e.Fragment,null,Lt||v.icon||v.promise?_e.createElement("div",{"data-icon":"",className:ee(W==null?void 0:W.icon,(a=v==null?void 0:v.classNames)==null?void 0:a.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||Us():null,v.type!=="loading"?v.icon||(Y==null?void 0:Y[Lt])||KO(Lt):null):null,_e.createElement("div",{"data-content":"",className:ee(W==null?void 0:W.content,(c=v==null?void 0:v.classNames)==null?void 0:c.content)},_e.createElement("div",{"data-title":"",className:ee(W==null?void 0:W.title,(u=v==null?void 0:v.classNames)==null?void 0:u.title)},v.title),v.description?_e.createElement("div",{"data-description":"",className:ee(U,is,W==null?void 0:W.description,(h=v==null?void 0:v.classNames)==null?void 0:h.description)},v.description):null),_e.isValidElement(v.cancel)?v.cancel:v.cancel&&Tf(v.cancel)?_e.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||D,onClick:Ze=>{var Et,gt;Tf(v.cancel)&&mn&&((gt=(Et=v.cancel).onClick)==null||gt.call(Et,Ze),qn())},className:ee(W==null?void 0:W.cancelButton,(f=v==null?void 0:v.classNames)==null?void 0:f.cancelButton)},v.cancel.label):null,_e.isValidElement(v.action)?v.action:v.action&&Tf(v.action)?_e.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||R,onClick:Ze=>{var Et,gt;Tf(v.action)&&(Ze.defaultPrevented||((gt=(Et=v.action).onClick)==null||gt.call(Et,Ze),qn()))},className:ee(W==null?void 0:W.actionButton,(m=v==null?void 0:v.classNames)==null?void 0:m.actionButton)},v.action.label):null))};function tb(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var gD=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:a,className:c,offset:u,theme:h="light",richColors:f,duration:m,style:y,visibleToasts:v=aD,toastOptions:w,dir:b=tb(),gap:x=dD,loadingIcon:E,icons:A,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:C,cn:L=pD}=t,[V,z]=_e.useState([]),P=_e.useMemo(()=>Array.from(new Set([n].concat(V.filter(B=>B.position).map(B=>B.position)))),[V,n]),[k,D]=_e.useState([]),[R,O]=_e.useState(!1),[U,F]=_e.useState(!1),[H,Q]=_e.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=_e.useRef(null),Z=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),W=_e.useRef(null),Y=_e.useRef(!1),ne=_e.useCallback(B=>{var ee;(ee=V.find(ue=>ue.id===B.id))!=null&&ee.delete||Fr.dismiss(B.id),z(ue=>ue.filter(({id:Se})=>Se!==B.id))},[V]);return _e.useEffect(()=>Fr.subscribe(B=>{if(B.dismiss){z(ee=>ee.map(ue=>ue.id===B.id?{...ue,delete:!0}:ue));return}setTimeout(()=>{Wp.flushSync(()=>{z(ee=>{let ue=ee.findIndex(Se=>Se.id===B.id);return ue!==-1?[...ee.slice(0,ue),{...ee[ue],...B},...ee.slice(ue+1)]:[B,...ee]})})})}),[]),_e.useEffect(()=>{if(h!=="system"){Q(h);return}h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Q("dark"):Q("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:B})=>{Q(B?"dark":"light")})},[h]),_e.useEffect(()=>{V.length<=1&&O(!1)},[V]),_e.useEffect(()=>{let B=ee=>{var ue,Se;r.every(Le=>ee[Le]||ee.code===Le)&&(O(!0),(ue=K.current)==null||ue.focus()),ee.code==="Escape"&&(document.activeElement===K.current||(Se=K.current)!=null&&Se.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[r]),_e.useEffect(()=>{if(K.current)return()=>{W.current&&(W.current.focus({preventScroll:!0}),W.current=null,Y.current=!1)}},[K.current]),V.length?_e.createElement("section",{"aria-label":`${j} ${Z}`,tabIndex:-1},P.map((B,ee)=>{var ue;let[Se,Le]=B.split("-");return _e.createElement("ol",{key:B,dir:b==="auto"?tb():b,tabIndex:-1,ref:K,className:c,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":Se,"data-x-position":Le,style:{"--front-toast-height":`${((ue=k[0])==null?void 0:ue.height)||0}px`,"--offset":typeof u=="number"?`${u}px`:u||lD,"--width":`${uD}px`,"--gap":`${x}px`,...y},onBlur:Te=>{Y.current&&!Te.currentTarget.contains(Te.relatedTarget)&&(Y.current=!1,W.current&&(W.current.focus({preventScroll:!0}),W.current=null))},onFocus:Te=>{Te.target instanceof HTMLElement&&Te.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,W.current=Te.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{U||O(!1)},onPointerDown:Te=>{Te.target instanceof HTMLElement&&Te.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},V.filter(Te=>!Te.position&&ee===0||Te.position===B).map((Te,we)=>{var Ce,He;return _e.createElement(mD,{key:Te.id,icons:A,index:we,toast:Te,defaultRichColors:f,duration:(Ce=w==null?void 0:w.duration)!=null?Ce:m,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:e,visibleToasts:v,closeButton:(He=w==null?void 0:w.closeButton)!=null?He:a,interacting:U,position:B,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,removeToast:ne,toasts:V.filter(Ve=>Ve.position==Te.position),heights:k.filter(Ve=>Ve.position==Te.position),setHeights:D,expandByDefault:s,gap:x,loadingIcon:E,expanded:R,pauseWhenPageIsHidden:C,cn:L})}))})):null};const yD=({...t})=>{const{theme:e="system"}=HO();return o.jsx(gD,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function vD(t,e=[]){let n=[];function r(a,c){const u=_.createContext(c),h=n.length;n=[...n,c];const f=y=>{var A;const{scope:v,children:w,...b}=y,x=((A=v==null?void 0:v[t])==null?void 0:A[h])||u,E=_.useMemo(()=>b,Object.values(b));return o.jsx(x.Provider,{value:E,children:w})};f.displayName=a+"Provider";function m(y,v){var x;const w=((x=v==null?void 0:v[t])==null?void 0:x[h])||u,b=_.useContext(w);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[f,m]}const s=()=>{const a=n.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[t])||a;return _.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[r,xD(s,...e)]}function xD(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const y=h(a)[`__scope${f}`];return{...u,...y}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var wD="DismissableLayer",gv="dismissableLayer.update",_D="dismissableLayer.pointerDownOutside",ED="dismissableLayer.focusOutside",nb,qS=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Dx=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=t,f=_.useContext(qS),[m,y]=_.useState(null),v=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=_.useState({}),b=jt(e,P=>y(P)),x=Array.from(f.layers),[E]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),A=x.indexOf(E),j=m?x.indexOf(m):-1,C=f.layersWithOutsidePointerEventsDisabled.size>0,L=j>=A,V=SD(P=>{const k=P.target,D=[...f.branches].some(R=>R.contains(k));!L||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},v),z=TD(P=>{const k=P.target;[...f.branches].some(R=>R.contains(k))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},v);return jx(P=>{j===f.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},v),_.useEffect(()=>{if(m)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(nb=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),rb(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=nb)}},[m,v,n,f]),_.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),rb())},[m,f]),_.useEffect(()=>{const P=()=>w({});return document.addEventListener(gv,P),()=>document.removeEventListener(gv,P)},[]),o.jsx(Je.div,{...h,ref:b,style:{pointerEvents:C?L?"auto":"none":void 0,...t.style},onFocusCapture:qe(t.onFocusCapture,z.onFocusCapture),onBlurCapture:qe(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:qe(t.onPointerDownCapture,V.onPointerDownCapture)})});Dx.displayName=wD;var bD="DismissableLayerBranch",ND=_.forwardRef((t,e)=>{const n=_.useContext(qS),r=_.useRef(null),s=jt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(Je.div,{...t,ref:s})});ND.displayName=bD;function SD(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){WS(_D,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function TD(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=_.useRef(!1);return _.useEffect(()=>{const s=a=>{a.target&&!r.current&&WS(ED,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function rb(){const t=new CustomEvent(gv);document.dispatchEvent(t)}function WS(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Hp(s,a):s.dispatchEvent(a)}var CD=J1.useId||(()=>{}),jD=0;function Ho(t){const[e,n]=_.useState(CD());return Zt(()=>{n(r=>r??String(jD++))},[t]),e?`radix-${e}`:""}const ID=["top","right","bottom","left"],ea=Math.min,Vr=Math.max,hp=Math.round,Cf=Math.floor,ta=t=>({x:t,y:t}),AD={left:"right",right:"left",bottom:"top",top:"bottom"},PD={start:"end",end:"start"};function yv(t,e,n){return Vr(t,ea(e,n))}function zi(t,e){return typeof t=="function"?t(e):t}function Bi(t){return t.split("-")[0]}function Zc(t){return t.split("-")[1]}function Lx(t){return t==="x"?"y":"x"}function Mx(t){return t==="y"?"height":"width"}function na(t){return["top","bottom"].includes(Bi(t))?"y":"x"}function Fx(t){return Lx(na(t))}function kD(t,e,n){n===void 0&&(n=!1);const r=Zc(t),s=Fx(t),a=Mx(s);let c=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=fp(c)),[c,fp(c)]}function RD(t){const e=fp(t);return[vv(t),e,vv(e)]}function vv(t){return t.replace(/start|end/g,e=>PD[e])}function OD(t,e,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],c=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?a:c;default:return[]}}function DD(t,e,n,r){const s=Zc(t);let a=OD(Bi(t),n==="start",r);return s&&(a=a.map(c=>c+"-"+s),e&&(a=a.concat(a.map(vv)))),a}function fp(t){return t.replace(/left|right|bottom|top/g,e=>AD[e])}function LD(t){return{top:0,right:0,bottom:0,left:0,...t}}function HS(t){return typeof t!="number"?LD(t):{top:t,right:t,bottom:t,left:t}}function pp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function sb(t,e,n){let{reference:r,floating:s}=t;const a=na(e),c=Fx(e),u=Mx(c),h=Bi(e),f=a==="y",m=r.x+r.width/2-s.width/2,y=r.y+r.height/2-s.height/2,v=r[u]/2-s[u]/2;let w;switch(h){case"top":w={x:m,y:r.y-s.height};break;case"bottom":w={x:m,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y};break;case"left":w={x:r.x-s.width,y};break;default:w={x:r.x,y:r.y}}switch(Zc(e)){case"start":w[c]-=v*(n&&f?-1:1);break;case"end":w[c]+=v*(n&&f?-1:1);break}return w}const MD=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:c}=n,u=a.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let f=await c.getElementRects({reference:t,floating:e,strategy:s}),{x:m,y}=sb(f,r,h),v=r,w={},b=0;for(let x=0;x<u.length;x++){const{name:E,fn:A}=u[x],{x:j,y:C,data:L,reset:V}=await A({x:m,y,initialPlacement:r,placement:v,strategy:s,middlewareData:w,rects:f,platform:c,elements:{reference:t,floating:e}});m=j??m,y=C??y,w={...w,[E]:{...w[E],...L}},V&&b<=50&&(b++,typeof V=="object"&&(V.placement&&(v=V.placement),V.rects&&(f=V.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:s}):V.rects),{x:m,y}=sb(f,v,h)),x=-1)}return{x:m,y,placement:v,strategy:s,middlewareData:w}};async function xd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:c,elements:u,strategy:h}=t,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:y="floating",altBoundary:v=!1,padding:w=0}=zi(e,t),b=HS(w),E=u[v?y==="floating"?"reference":"floating":y],A=pp(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(E)))==null||n?E:E.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:f,rootBoundary:m,strategy:h})),j=y==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),L=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},V=pp(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:j,offsetParent:C,strategy:h}):j);return{top:(A.top-V.top+b.top)/L.y,bottom:(V.bottom-A.bottom+b.bottom)/L.y,left:(A.left-V.left+b.left)/L.x,right:(V.right-A.right+b.right)/L.x}}const FD=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:c,elements:u,middlewareData:h}=e,{element:f,padding:m=0}=zi(t,e)||{};if(f==null)return{};const y=HS(m),v={x:n,y:r},w=Fx(s),b=Mx(w),x=await c.getDimensions(f),E=w==="y",A=E?"top":"left",j=E?"bottom":"right",C=E?"clientHeight":"clientWidth",L=a.reference[b]+a.reference[w]-v[w]-a.floating[b],V=v[w]-a.reference[w],z=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f));let P=z?z[C]:0;(!P||!await(c.isElement==null?void 0:c.isElement(z)))&&(P=u.floating[C]||a.floating[b]);const k=L/2-V/2,D=P/2-x[b]/2-1,R=ea(y[A],D),O=ea(y[j],D),U=R,F=P-x[b]-O,H=P/2-x[b]/2+k,Q=yv(U,H,F),K=!h.arrow&&Zc(s)!=null&&H!==Q&&a.reference[b]/2-(H<U?R:O)-x[b]/2<0,Z=K?H<U?H-U:H-F:0;return{[w]:v[w]+Z,data:{[w]:Q,centerOffset:H-Q-Z,...K&&{alignmentOffset:Z}},reset:K}}}),VD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:c,initialPlacement:u,platform:h,elements:f}=e,{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,...E}=zi(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const A=Bi(s),j=na(u),C=Bi(u)===u,L=await(h.isRTL==null?void 0:h.isRTL(f.floating)),V=v||(C||!x?[fp(u)]:RD(u)),z=b!=="none";!v&&z&&V.push(...DD(u,x,b,L));const P=[u,...V],k=await xd(e,E),D=[];let R=((r=a.flip)==null?void 0:r.overflows)||[];if(m&&D.push(k[A]),y){const H=kD(s,c,L);D.push(k[H[0]],k[H[1]])}if(R=[...R,{placement:s,overflows:D}],!D.every(H=>H<=0)){var O,U;const H=(((O=a.flip)==null?void 0:O.index)||0)+1,Q=P[H];if(Q)return{data:{index:H,overflows:R},reset:{placement:Q}};let K=(U=R.filter(Z=>Z.overflows[0]<=0).sort((Z,W)=>Z.overflows[1]-W.overflows[1])[0])==null?void 0:U.placement;if(!K)switch(w){case"bestFit":{var F;const Z=(F=R.filter(W=>{if(z){const Y=na(W.placement);return Y===j||Y==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(Y=>Y>0).reduce((Y,ne)=>Y+ne,0)]).sort((W,Y)=>W[1]-Y[1])[0])==null?void 0:F[0];Z&&(K=Z);break}case"initialPlacement":K=u;break}if(s!==K)return{reset:{placement:K}}}return{}}}};function ib(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ob(t){return ID.some(e=>t[e]>=0)}const UD=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=zi(t,e);switch(r){case"referenceHidden":{const a=await xd(e,{...s,elementContext:"reference"}),c=ib(a,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:ob(c)}}}case"escaped":{const a=await xd(e,{...s,altBoundary:!0}),c=ib(a,n.floating);return{data:{escapedOffsets:c,escaped:ob(c)}}}default:return{}}}}};async function $D(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=Bi(n),u=Zc(n),h=na(n)==="y",f=["left","top"].includes(c)?-1:1,m=a&&h?-1:1,y=zi(e,t);let{mainAxis:v,crossAxis:w,alignmentAxis:b}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return u&&typeof b=="number"&&(w=u==="end"?b*-1:b),h?{x:w*m,y:v*f}:{x:v*f,y:w*m}}const zD=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:c,middlewareData:u}=e,h=await $D(e,t);return c===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+h.x,y:a+h.y,data:{...h,placement:c}}}}},BD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:u={fn:E=>{let{x:A,y:j}=E;return{x:A,y:j}}},...h}=zi(t,e),f={x:n,y:r},m=await xd(e,h),y=na(Bi(s)),v=Lx(y);let w=f[v],b=f[y];if(a){const E=v==="y"?"top":"left",A=v==="y"?"bottom":"right",j=w+m[E],C=w-m[A];w=yv(j,w,C)}if(c){const E=y==="y"?"top":"left",A=y==="y"?"bottom":"right",j=b+m[E],C=b-m[A];b=yv(j,b,C)}const x=u.fn({...e,[v]:w,[y]:b});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[v]:a,[y]:c}}}}}},qD=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:c}=e,{offset:u=0,mainAxis:h=!0,crossAxis:f=!0}=zi(t,e),m={x:n,y:r},y=na(s),v=Lx(y);let w=m[v],b=m[y];const x=zi(u,e),E=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(h){const C=v==="y"?"height":"width",L=a.reference[v]-a.floating[C]+E.mainAxis,V=a.reference[v]+a.reference[C]-E.mainAxis;w<L?w=L:w>V&&(w=V)}if(f){var A,j;const C=v==="y"?"width":"height",L=["top","left"].includes(Bi(s)),V=a.reference[y]-a.floating[C]+(L&&((A=c.offset)==null?void 0:A[y])||0)+(L?0:E.crossAxis),z=a.reference[y]+a.reference[C]+(L?0:((j=c.offset)==null?void 0:j[y])||0)-(L?E.crossAxis:0);b<V?b=V:b>z&&(b=z)}return{[v]:w,[y]:b}}}},WD=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:c,elements:u}=e,{apply:h=()=>{},...f}=zi(t,e),m=await xd(e,f),y=Bi(s),v=Zc(s),w=na(s)==="y",{width:b,height:x}=a.floating;let E,A;y==="top"||y==="bottom"?(E=y,A=v===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(A=y,E=v==="end"?"top":"bottom");const j=x-m.top-m.bottom,C=b-m.left-m.right,L=ea(x-m[E],j),V=ea(b-m[A],C),z=!e.middlewareData.shift;let P=L,k=V;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(k=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=j),z&&!v){const R=Vr(m.left,0),O=Vr(m.right,0),U=Vr(m.top,0),F=Vr(m.bottom,0);w?k=b-2*(R!==0||O!==0?R+O:Vr(m.left,m.right)):P=x-2*(U!==0||F!==0?U+F:Vr(m.top,m.bottom))}await h({...e,availableWidth:k,availableHeight:P});const D=await c.getDimensions(u.floating);return b!==D.width||x!==D.height?{reset:{rects:!0}}:{}}}};function Qp(){return typeof window<"u"}function eu(t){return KS(t)?(t.nodeName||"").toLowerCase():"#document"}function $r(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function fi(t){var e;return(e=(KS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function KS(t){return Qp()?t instanceof Node||t instanceof $r(t).Node:!1}function Is(t){return Qp()?t instanceof Element||t instanceof $r(t).Element:!1}function ci(t){return Qp()?t instanceof HTMLElement||t instanceof $r(t).HTMLElement:!1}function ab(t){return!Qp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $r(t).ShadowRoot}function Wd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=As(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function HD(t){return["table","td","th"].includes(eu(t))}function Yp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Vx(t){const e=Ux(),n=Is(t)?As(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function KD(t){let e=ra(t);for(;ci(e)&&!$c(e);){if(Vx(e))return e;if(Yp(e))return null;e=ra(e)}return null}function Ux(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $c(t){return["html","body","#document"].includes(eu(t))}function As(t){return $r(t).getComputedStyle(t)}function Xp(t){return Is(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ra(t){if(eu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ab(t)&&t.host||fi(t);return ab(e)?e.host:e}function GS(t){const e=ra(t);return $c(e)?t.ownerDocument?t.ownerDocument.body:t.body:ci(e)&&Wd(e)?e:GS(e)}function wd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=GS(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),c=$r(s);if(a){const u=xv(c);return e.concat(c,c.visualViewport||[],Wd(s)?s:[],u&&n?wd(u):[])}return e.concat(s,wd(s,[],n))}function xv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function QS(t){const e=As(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ci(t),a=s?t.offsetWidth:n,c=s?t.offsetHeight:r,u=hp(n)!==a||hp(r)!==c;return u&&(n=a,r=c),{width:n,height:r,$:u}}function $x(t){return Is(t)?t:t.contextElement}function vc(t){const e=$x(t);if(!ci(e))return ta(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=QS(e);let c=(a?hp(n.width):n.width)/r,u=(a?hp(n.height):n.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const GD=ta(0);function YS(t){const e=$r(t);return!Ux()||!e.visualViewport?GD:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function QD(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==$r(t)?!1:e}function el(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=$x(t);let c=ta(1);e&&(r?Is(r)&&(c=vc(r)):c=vc(t));const u=QD(a,n,r)?YS(a):ta(0);let h=(s.left+u.x)/c.x,f=(s.top+u.y)/c.y,m=s.width/c.x,y=s.height/c.y;if(a){const v=$r(a),w=r&&Is(r)?$r(r):r;let b=v,x=xv(b);for(;x&&r&&w!==b;){const E=vc(x),A=x.getBoundingClientRect(),j=As(x),C=A.left+(x.clientLeft+parseFloat(j.paddingLeft))*E.x,L=A.top+(x.clientTop+parseFloat(j.paddingTop))*E.y;h*=E.x,f*=E.y,m*=E.x,y*=E.y,h+=C,f+=L,b=$r(x),x=xv(b)}}return pp({width:m,height:y,x:h,y:f})}function YD(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",c=fi(r),u=e?Yp(e.floating):!1;if(r===c||u&&a)return n;let h={scrollLeft:0,scrollTop:0},f=ta(1);const m=ta(0),y=ci(r);if((y||!y&&!a)&&((eu(r)!=="body"||Wd(c))&&(h=Xp(r)),ci(r))){const v=el(r);f=vc(r),m.x=v.x+r.clientLeft,m.y=v.y+r.clientTop}return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-h.scrollLeft*f.x+m.x,y:n.y*f.y-h.scrollTop*f.y+m.y}}function XD(t){return Array.from(t.getClientRects())}function wv(t,e){const n=Xp(t).scrollLeft;return e?e.left+n:el(fi(t)).left+n}function JD(t){const e=fi(t),n=Xp(t),r=t.ownerDocument.body,s=Vr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Vr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-n.scrollLeft+wv(t);const u=-n.scrollTop;return As(r).direction==="rtl"&&(c+=Vr(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:c,y:u}}function ZD(t,e){const n=$r(t),r=fi(t),s=n.visualViewport;let a=r.clientWidth,c=r.clientHeight,u=0,h=0;if(s){a=s.width,c=s.height;const f=Ux();(!f||f&&e==="fixed")&&(u=s.offsetLeft,h=s.offsetTop)}return{width:a,height:c,x:u,y:h}}function eL(t,e){const n=el(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=ci(t)?vc(t):ta(1),c=t.clientWidth*a.x,u=t.clientHeight*a.y,h=s*a.x,f=r*a.y;return{width:c,height:u,x:h,y:f}}function lb(t,e,n){let r;if(e==="viewport")r=ZD(t,n);else if(e==="document")r=JD(fi(t));else if(Is(e))r=eL(e,n);else{const s=YS(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return pp(r)}function XS(t,e){const n=ra(t);return n===e||!Is(n)||$c(n)?!1:As(n).position==="fixed"||XS(n,e)}function tL(t,e){const n=e.get(t);if(n)return n;let r=wd(t,[],!1).filter(u=>Is(u)&&eu(u)!=="body"),s=null;const a=As(t).position==="fixed";let c=a?ra(t):t;for(;Is(c)&&!$c(c);){const u=As(c),h=Vx(c);!h&&u.position==="fixed"&&(s=null),(a?!h&&!s:!h&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Wd(c)&&!h&&XS(t,c))?r=r.filter(m=>m!==c):s=u,c=ra(c)}return e.set(t,r),r}function nL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const c=[...n==="clippingAncestors"?Yp(e)?[]:tL(e,this._c):[].concat(n),r],u=c[0],h=c.reduce((f,m)=>{const y=lb(e,m,s);return f.top=Vr(y.top,f.top),f.right=ea(y.right,f.right),f.bottom=ea(y.bottom,f.bottom),f.left=Vr(y.left,f.left),f},lb(e,u,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function rL(t){const{width:e,height:n}=QS(t);return{width:e,height:n}}function sL(t,e,n){const r=ci(e),s=fi(e),a=n==="fixed",c=el(t,!0,a,e);let u={scrollLeft:0,scrollTop:0};const h=ta(0);if(r||!r&&!a)if((eu(e)!=="body"||Wd(s))&&(u=Xp(e)),r){const w=el(e,!0,a,e);h.x=w.x+e.clientLeft,h.y=w.y+e.clientTop}else s&&(h.x=wv(s));let f=0,m=0;if(s&&!r&&!a){const w=s.getBoundingClientRect();m=w.top+u.scrollTop,f=w.left+u.scrollLeft-wv(s,w)}const y=c.left+u.scrollLeft-h.x-f,v=c.top+u.scrollTop-h.y-m;return{x:y,y:v,width:c.width,height:c.height}}function Ty(t){return As(t).position==="static"}function cb(t,e){if(!ci(t)||As(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return fi(t)===n&&(n=n.ownerDocument.body),n}function JS(t,e){const n=$r(t);if(Yp(t))return n;if(!ci(t)){let s=ra(t);for(;s&&!$c(s);){if(Is(s)&&!Ty(s))return s;s=ra(s)}return n}let r=cb(t,e);for(;r&&HD(r)&&Ty(r);)r=cb(r,e);return r&&$c(r)&&Ty(r)&&!Vx(r)?n:r||KD(t)||n}const iL=async function(t){const e=this.getOffsetParent||JS,n=this.getDimensions,r=await n(t.floating);return{reference:sL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function oL(t){return As(t).direction==="rtl"}const aL={convertOffsetParentRelativeRectToViewportRelativeRect:YD,getDocumentElement:fi,getClippingRect:nL,getOffsetParent:JS,getElementRects:iL,getClientRects:XD,getDimensions:rL,getScale:vc,isElement:Is,isRTL:oL};function lL(t,e){let n=null,r;const s=fi(t);function a(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function c(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),a();const{left:f,top:m,width:y,height:v}=t.getBoundingClientRect();if(u||e(),!y||!v)return;const w=Cf(m),b=Cf(s.clientWidth-(f+y)),x=Cf(s.clientHeight-(m+v)),E=Cf(f),j={rootMargin:-w+"px "+-b+"px "+-x+"px "+-E+"px",threshold:Vr(0,ea(1,h))||1};let C=!0;function L(V){const z=V[0].intersectionRatio;if(z!==h){if(!C)return c();z?c(!1,z):r=setTimeout(()=>{c(!1,1e-7)},1e3)}C=!1}try{n=new IntersectionObserver(L,{...j,root:s.ownerDocument})}catch{n=new IntersectionObserver(L,j)}n.observe(t)}return c(!0),a}function cL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,f=$x(t),m=s||a?[...f?wd(f):[],...wd(e)]:[];m.forEach(A=>{s&&A.addEventListener("scroll",n,{passive:!0}),a&&A.addEventListener("resize",n)});const y=f&&u?lL(f,n):null;let v=-1,w=null;c&&(w=new ResizeObserver(A=>{let[j]=A;j&&j.target===f&&w&&(w.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=w)==null||C.observe(e)})),n()}),f&&!h&&w.observe(f),w.observe(e));let b,x=h?el(t):null;h&&E();function E(){const A=el(t);x&&(A.x!==x.x||A.y!==x.y||A.width!==x.width||A.height!==x.height)&&n(),x=A,b=requestAnimationFrame(E)}return n(),()=>{var A;m.forEach(j=>{s&&j.removeEventListener("scroll",n),a&&j.removeEventListener("resize",n)}),y==null||y(),(A=w)==null||A.disconnect(),w=null,h&&cancelAnimationFrame(b)}}const uL=zD,dL=BD,hL=VD,fL=WD,pL=UD,ub=FD,mL=qD,gL=(t,e,n)=>{const r=new Map,s={platform:aL,...n},a={...s.platform,_c:r};return MD(t,e,{...s,platform:a})};var Hf=typeof document<"u"?_.useLayoutEffect:_.useEffect;function mp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!mp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!mp(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function ZS(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function db(t,e){const n=ZS(t);return Math.round(e*n)/n}function Cy(t){const e=_.useRef(t);return Hf(()=>{e.current=t}),e}function yL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:c}={},transform:u=!0,whileElementsMounted:h,open:f}=t,[m,y]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,w]=_.useState(r);mp(v,r)||w(r);const[b,x]=_.useState(null),[E,A]=_.useState(null),j=_.useCallback(W=>{W!==z.current&&(z.current=W,x(W))},[]),C=_.useCallback(W=>{W!==P.current&&(P.current=W,A(W))},[]),L=a||b,V=c||E,z=_.useRef(null),P=_.useRef(null),k=_.useRef(m),D=h!=null,R=Cy(h),O=Cy(s),U=Cy(f),F=_.useCallback(()=>{if(!z.current||!P.current)return;const W={placement:e,strategy:n,middleware:v};O.current&&(W.platform=O.current),gL(z.current,P.current,W).then(Y=>{const ne={...Y,isPositioned:U.current!==!1};H.current&&!mp(k.current,ne)&&(k.current=ne,dl.flushSync(()=>{y(ne)}))})},[v,e,n,O,U]);Hf(()=>{f===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,y(W=>({...W,isPositioned:!1})))},[f]);const H=_.useRef(!1);Hf(()=>(H.current=!0,()=>{H.current=!1}),[]),Hf(()=>{if(L&&(z.current=L),V&&(P.current=V),L&&V){if(R.current)return R.current(L,V,F);F()}},[L,V,F,R,D]);const Q=_.useMemo(()=>({reference:z,floating:P,setReference:j,setFloating:C}),[j,C]),K=_.useMemo(()=>({reference:L,floating:V}),[L,V]),Z=_.useMemo(()=>{const W={position:n,left:0,top:0};if(!K.floating)return W;const Y=db(K.floating,m.x),ne=db(K.floating,m.y);return u?{...W,transform:"translate("+Y+"px, "+ne+"px)",...ZS(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:ne}},[n,u,K.floating,m.x,m.y]);return _.useMemo(()=>({...m,update:F,refs:Q,elements:K,floatingStyles:Z}),[m,F,Q,K,Z])}const vL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?ub({element:r.current,padding:s}).fn(n):{}:r?ub({element:r,padding:s}).fn(n):{}}}},xL=(t,e)=>({...uL(t),options:[t,e]}),wL=(t,e)=>({...dL(t),options:[t,e]}),_L=(t,e)=>({...mL(t),options:[t,e]}),EL=(t,e)=>({...hL(t),options:[t,e]}),bL=(t,e)=>({...fL(t),options:[t,e]}),NL=(t,e)=>({...pL(t),options:[t,e]}),SL=(t,e)=>({...vL(t),options:[t,e]});var TL="Arrow",eT=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return o.jsx(Je.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});eT.displayName=TL;var CL=eT;function tT(t){const[e,n]=_.useState(void 0);return Zt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let c,u;if("borderBoxSize"in a){const h=a.borderBoxSize,f=Array.isArray(h)?h[0]:h;c=f.inlineSize,u=f.blockSize}else c=t.offsetWidth,u=t.offsetHeight;n({width:c,height:u})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var zx="Popper",[nT,Jp]=Gi(zx),[jL,rT]=nT(zx),sT=t=>{const{__scopePopper:e,children:n}=t,[r,s]=_.useState(null);return o.jsx(jL,{scope:e,anchor:r,onAnchorChange:s,children:n})};sT.displayName=zx;var iT="PopperAnchor",oT=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=rT(iT,n),c=_.useRef(null),u=jt(e,c);return _.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:o.jsx(Je.div,{...s,ref:u})});oT.displayName=iT;var Bx="PopperContent",[IL,AL]=nT(Bx),aT=_.forwardRef((t,e)=>{var we,Ce,He,Ve,st,it;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:w="optimized",onPlaced:b,...x}=t,E=rT(Bx,n),[A,j]=_.useState(null),C=jt(e,ve=>j(ve)),[L,V]=_.useState(null),z=tT(L),P=(z==null?void 0:z.width)??0,k=(z==null?void 0:z.height)??0,D=r+(a!=="center"?"-"+a:""),R=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},O=Array.isArray(f)?f:[f],U=O.length>0,F={padding:R,boundary:O.filter(kL),altBoundary:U},{refs:H,floatingStyles:Q,placement:K,isPositioned:Z,middlewareData:W}=yL({strategy:"fixed",placement:D,whileElementsMounted:(...ve)=>cL(...ve,{animationFrame:w==="always"}),elements:{reference:E.anchor},middleware:[xL({mainAxis:s+k,alignmentAxis:c}),h&&wL({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?_L():void 0,...F}),h&&EL({...F}),bL({...F,apply:({elements:ve,rects:Ie,availableWidth:mt,availableHeight:an})=>{const{width:zn,height:jr}=Ie.reference,Lt=ve.floating.style;Lt.setProperty("--radix-popper-available-width",`${mt}px`),Lt.setProperty("--radix-popper-available-height",`${an}px`),Lt.setProperty("--radix-popper-anchor-width",`${zn}px`),Lt.setProperty("--radix-popper-anchor-height",`${jr}px`)}}),L&&SL({element:L,padding:u}),RL({arrowWidth:P,arrowHeight:k}),v&&NL({strategy:"referenceHidden",...F})]}),[Y,ne]=uT(K),B=jn(b);Zt(()=>{Z&&(B==null||B())},[Z,B]);const ee=(we=W.arrow)==null?void 0:we.x,ue=(Ce=W.arrow)==null?void 0:Ce.y,Se=((He=W.arrow)==null?void 0:He.centerOffset)!==0,[Le,Te]=_.useState();return Zt(()=>{A&&Te(window.getComputedStyle(A).zIndex)},[A]),o.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q,transform:Z?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Le,"--radix-popper-transform-origin":[(Ve=W.transformOrigin)==null?void 0:Ve.x,(st=W.transformOrigin)==null?void 0:st.y].join(" "),...((it=W.hide)==null?void 0:it.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(IL,{scope:n,placedSide:Y,onArrowChange:V,arrowX:ee,arrowY:ue,shouldHideArrow:Se,children:o.jsx(Je.div,{"data-side":Y,"data-align":ne,...x,ref:C,style:{...x.style,animation:Z?void 0:"none"}})})})});aT.displayName=Bx;var lT="PopperArrow",PL={top:"bottom",right:"left",bottom:"top",left:"right"},cT=_.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=AL(lT,r),c=PL[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(CL,{...s,ref:n,style:{...s.style,display:"block"}})})});cT.displayName=lT;function kL(t){return t!==null}var RL=t=>({name:"transformOrigin",options:t,fn(e){var E,A,j;const{placement:n,rects:r,middlewareData:s}=e,c=((E=s.arrow)==null?void 0:E.centerOffset)!==0,u=c?0:t.arrowWidth,h=c?0:t.arrowHeight,[f,m]=uT(n),y={start:"0%",center:"50%",end:"100%"}[m],v=(((A=s.arrow)==null?void 0:A.x)??0)+u/2,w=(((j=s.arrow)==null?void 0:j.y)??0)+h/2;let b="",x="";return f==="bottom"?(b=c?y:`${v}px`,x=`${-h}px`):f==="top"?(b=c?y:`${v}px`,x=`${r.floating.height+h}px`):f==="right"?(b=`${-h}px`,x=c?y:`${w}px`):f==="left"&&(b=`${r.floating.width+h}px`,x=c?y:`${w}px`),{data:{x:b,y:x}}}});function uT(t){const[e,n="center"]=t.split("-");return[e,n]}var OL=sT,dT=oT,hT=aT,fT=cT,DL="Portal",pT=_.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,a]=_.useState(!1);Zt(()=>a(!0),[]);const c=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Wp.createPortal(o.jsx(Je.div,{...r,ref:e}),c):null});pT.displayName=DL;function LL(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var mT=t=>{const{present:e,children:n}=t,r=ML(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),a=jt(r.ref,FL(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:a}):null};mT.displayName="Presence";function ML(t){const[e,n]=_.useState(),r=_.useRef({}),s=_.useRef(t),a=_.useRef("none"),c=t?"mounted":"unmounted",[u,h]=LL(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const f=jf(r.current);a.current=u==="mounted"?f:"none"},[u]),Zt(()=>{const f=r.current,m=s.current;if(m!==t){const v=a.current,w=jf(f);t?h("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(m&&v!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),Zt(()=>{if(e){let f;const m=e.ownerDocument.defaultView??window,y=w=>{const x=jf(r.current).includes(w.animationName);if(w.target===e&&x&&(h("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",f=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},v=w=>{w.target===e&&(a.current=jf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{m.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function jf(t){return(t==null?void 0:t.animationName)||"none"}function FL(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var[Zp,Gq]=vD("Tooltip",[Jp]),qx=Jp(),gT="TooltipProvider",VL=700,hb="tooltip.open",[UL,yT]=Zp(gT),vT=t=>{const{__scopeTooltip:e,delayDuration:n=VL,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=t,[c,u]=_.useState(!0),h=_.useRef(!1),f=_.useRef(0);return _.useEffect(()=>{const m=f.current;return()=>window.clearTimeout(m)},[]),o.jsx(UL,{scope:e,isOpenDelayed:c,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(f.current),u(!1)},[]),onClose:_.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:h,onPointerInTransitChange:_.useCallback(m=>{h.current=m},[]),disableHoverableContent:s,children:a})};vT.displayName=gT;var xT="Tooltip",[Qq,em]=Zp(xT),_v="TooltipTrigger",$L=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=em(_v,n),a=yT(_v,n),c=qx(n),u=_.useRef(null),h=jt(e,u,s.onTriggerChange),f=_.useRef(!1),m=_.useRef(!1),y=_.useCallback(()=>f.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),o.jsx(dT,{asChild:!0,...c,children:o.jsx(Je.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:h,onPointerMove:qe(t.onPointerMove,v=>{v.pointerType!=="touch"&&!m.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),m.current=!0)}),onPointerLeave:qe(t.onPointerLeave,()=>{s.onTriggerLeave(),m.current=!1}),onPointerDown:qe(t.onPointerDown,()=>{f.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:qe(t.onFocus,()=>{f.current||s.onOpen()}),onBlur:qe(t.onBlur,s.onClose),onClick:qe(t.onClick,s.onClose)})})});$L.displayName=_v;var zL="TooltipPortal",[Yq,BL]=Zp(zL,{forceMount:void 0}),zc="TooltipContent",wT=_.forwardRef((t,e)=>{const n=BL(zc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=t,c=em(zc,t.__scopeTooltip);return o.jsx(mT,{present:r||c.open,children:c.disableHoverableContent?o.jsx(_T,{side:s,...a,ref:e}):o.jsx(qL,{side:s,...a,ref:e})})}),qL=_.forwardRef((t,e)=>{const n=em(zc,t.__scopeTooltip),r=yT(zc,t.__scopeTooltip),s=_.useRef(null),a=jt(e,s),[c,u]=_.useState(null),{trigger:h,onClose:f}=n,m=s.current,{onPointerInTransitChange:y}=r,v=_.useCallback(()=>{u(null),y(!1)},[y]),w=_.useCallback((b,x)=>{const E=b.currentTarget,A={x:b.clientX,y:b.clientY},j=GL(A,E.getBoundingClientRect()),C=QL(A,j),L=YL(x.getBoundingClientRect()),V=JL([...C,...L]);u(V),y(!0)},[y]);return _.useEffect(()=>()=>v(),[v]),_.useEffect(()=>{if(h&&m){const b=E=>w(E,m),x=E=>w(E,h);return h.addEventListener("pointerleave",b),m.addEventListener("pointerleave",x),()=>{h.removeEventListener("pointerleave",b),m.removeEventListener("pointerleave",x)}}},[h,m,w,v]),_.useEffect(()=>{if(c){const b=x=>{const E=x.target,A={x:x.clientX,y:x.clientY},j=(h==null?void 0:h.contains(E))||(m==null?void 0:m.contains(E)),C=!XL(A,c);j?v():C&&(v(),f())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[h,m,c,f,v]),o.jsx(_T,{...t,ref:a})}),[WL,HL]=Zp(xT,{isInside:!1}),_T=_.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:c,...u}=t,h=em(zc,n),f=qx(n),{onClose:m}=h;return _.useEffect(()=>(document.addEventListener(hb,m),()=>document.removeEventListener(hb,m)),[m]),_.useEffect(()=>{if(h.trigger){const y=v=>{const w=v.target;w!=null&&w.contains(h.trigger)&&m()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[h.trigger,m]),o.jsx(Dx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:y=>y.preventDefault(),onDismiss:m,children:o.jsxs(hT,{"data-state":h.stateAttribute,...f,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(tS,{children:r}),o.jsx(WL,{scope:n,isInside:!0,children:o.jsx(m2,{id:h.contentId,role:"tooltip",children:s||r})})]})})});wT.displayName=zc;var ET="TooltipArrow",KL=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=qx(n);return HL(ET,n).isInside?null:o.jsx(fT,{...s,...r,ref:e})});KL.displayName=ET;function GL(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function QL(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function YL(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function XL(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const u=e[a].x,h=e[a].y,f=e[c].x,m=e[c].y;h>r!=m>r&&n<(f-u)*(r-h)/(m-h)+u&&(s=!s)}return s}function JL(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),ZL(e)}function ZL(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const a=e[e.length-1],c=e[e.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const a=n[n.length-1],c=n[n.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var eM=vT,bT=wT;const tM=eM,nM=_.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(bT,{ref:r,sideOffset:e,className:Ge("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));nM.displayName=bT.displayName;var Hd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tl=typeof window>"u"||"Deno"in globalThis;function _r(){}function rM(t,e){return typeof t=="function"?t(e):t}function Ev(t){return typeof t=="number"&&t>=0&&t!==1/0}function NT(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ko(t,e){return typeof t=="function"?t(e):t}function bs(t,e){return typeof t=="function"?t(e):t}function fb(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:c,stale:u}=t;if(c){if(r){if(e.queryHash!==Wx(c,e.options))return!1}else if(!Ed(e.queryKey,c))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function pb(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(_d(e.options.mutationKey)!==_d(a))return!1}else if(!Ed(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Wx(t,e){return((e==null?void 0:e.queryKeyHashFn)||_d)(t)}function _d(t){return JSON.stringify(t,(e,n)=>Nv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ed(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Ed(t[n],e[n])):!1}function ST(t,e){if(t===e)return t;const n=mb(t)&&mb(e);if(n||Nv(t)&&Nv(e)){const r=n?t:Object.keys(t),s=r.length,a=n?e:Object.keys(e),c=a.length,u=n?[]:{},h=new Set(r);let f=0;for(let m=0;m<c;m++){const y=n?m:a[m];(!n&&h.has(y)||n)&&t[y]===void 0&&e[y]===void 0?(u[y]=void 0,f++):(u[y]=ST(t[y],e[y]),u[y]===t[y]&&t[y]!==void 0&&f++)}return s===c&&f===s?t:u}return e}function bv(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function mb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Nv(t){if(!gb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!gb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function gb(t){return Object.prototype.toString.call(t)==="[object Object]"}function sM(t){return new Promise(e=>{setTimeout(e,t)})}function Sv(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ST(t,e):e}function iM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function oM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Hx=Symbol();function TT(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Hx?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function aM(t,e){return typeof t=="function"?t(...e):!!t}var Va,Lo,Cc,z1,lM=(z1=class extends Hd{constructor(){super();nt(this,Va);nt(this,Lo);nt(this,Cc);De(this,Cc,e=>{if(!tl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,Lo)||this.setEventListener(J(this,Cc))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Lo))==null||e.call(this),De(this,Lo,void 0))}setEventListener(e){var n;De(this,Cc,e),(n=J(this,Lo))==null||n.call(this),De(this,Lo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){J(this,Va)!==e&&(De(this,Va,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof J(this,Va)=="boolean"?J(this,Va):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Va=new WeakMap,Lo=new WeakMap,Cc=new WeakMap,z1),Kx=new lM,jc,Mo,Ic,B1,cM=(B1=class extends Hd{constructor(){super();nt(this,jc,!0);nt(this,Mo);nt(this,Ic);De(this,Ic,e=>{if(!tl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,Mo)||this.setEventListener(J(this,Ic))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Mo))==null||e.call(this),De(this,Mo,void 0))}setEventListener(e){var n;De(this,Ic,e),(n=J(this,Mo))==null||n.call(this),De(this,Mo,e(this.setOnline.bind(this)))}setOnline(e){J(this,jc)!==e&&(De(this,jc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return J(this,jc)}},jc=new WeakMap,Mo=new WeakMap,Ic=new WeakMap,B1),gp=new cM;function Tv(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function uM(t){return Math.min(1e3*2**t,3e4)}function CT(t){return(t??"online")==="online"?gp.isOnline():!0}var jT=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function jy(t){return t instanceof jT}function IT(t){let e=!1,n=0,r=!1,s;const a=Tv(),c=x=>{var E;r||(v(new jT(x)),(E=t.abort)==null||E.call(t))},u=()=>{e=!0},h=()=>{e=!1},f=()=>Kx.isFocused()&&(t.networkMode==="always"||gp.isOnline())&&t.canRun(),m=()=>CT(t.networkMode)&&t.canRun(),y=x=>{var E;r||(r=!0,(E=t.onSuccess)==null||E.call(t,x),s==null||s(),a.resolve(x))},v=x=>{var E;r||(r=!0,(E=t.onError)==null||E.call(t,x),s==null||s(),a.reject(x))},w=()=>new Promise(x=>{var E;s=A=>{(r||f())&&x(A)},(E=t.onPause)==null||E.call(t)}).then(()=>{var x;s=void 0,r||(x=t.onContinue)==null||x.call(t)}),b=()=>{if(r)return;let x;const E=n===0?t.initialPromise:void 0;try{x=E??t.fn()}catch(A){x=Promise.reject(A)}Promise.resolve(x).then(y).catch(A=>{var z;if(r)return;const j=t.retry??(tl?0:3),C=t.retryDelay??uM,L=typeof C=="function"?C(n,A):C,V=j===!0||typeof j=="number"&&n<j||typeof j=="function"&&j(n,A);if(e||!V){v(A);return}n++,(z=t.onFail)==null||z.call(t,n,A),sM(L).then(()=>f()?void 0:w()).then(()=>{e?v(A):b()})})};return{promise:a,cancel:c,continue:()=>(s==null||s(),a),cancelRetry:u,continueRetry:h,canStart:m,start:()=>(m()?b():w().then(b),a)}}var dM=t=>setTimeout(t,0);function hM(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=dM;const a=u=>{e?t.push(u):s(()=>{n(u)})},c=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(h=>{n(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||c()}return h},batchCalls:u=>(...h)=>{a(()=>{u(...h)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Vn=hM(),Ua,q1,AT=(q1=class{constructor(){nt(this,Ua)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ev(this.gcTime)&&De(this,Ua,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(tl?1/0:5*60*1e3))}clearGcTimeout(){J(this,Ua)&&(clearTimeout(J(this,Ua)),De(this,Ua,void 0))}},Ua=new WeakMap,q1),Ac,$a,Jr,za,Yn,Vd,Ba,_s,Ri,W1,fM=(W1=class extends AT{constructor(n){super();nt(this,_s);nt(this,Ac);nt(this,$a);nt(this,Jr);nt(this,za);nt(this,Yn);nt(this,Vd);nt(this,Ba);De(this,Ba,!1),De(this,Vd,n.defaultOptions),this.setOptions(n.options),this.observers=[],De(this,za,n.client),De(this,Jr,J(this,za).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,De(this,Ac,pM(this.options)),this.state=n.state??J(this,Ac),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=J(this,Yn))==null?void 0:n.promise}setOptions(n){this.options={...J(this,Vd),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,Jr).remove(this)}setData(n,r){const s=Sv(this.state.data,n,this.options);return xt(this,_s,Ri).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){xt(this,_s,Ri).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=J(this,Yn))==null?void 0:s.promise;return(a=J(this,Yn))==null||a.cancel(n),r?r.then(_r).catch(_r):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,Ac))}isActive(){return this.observers.some(n=>bs(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Hx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Ko(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!NT(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=J(this,Yn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=J(this,Yn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),J(this,Jr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(J(this,Yn)&&(J(this,Ba)?J(this,Yn).cancel({revert:!0}):J(this,Yn).cancelRetry()),this.scheduleGc()),J(this,Jr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xt(this,_s,Ri).call(this,{type:"invalidate"})}fetch(n,r){var m,y,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(J(this,Yn))return J(this,Yn).continueRetry(),J(this,Yn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const w=this.observers.find(b=>b.options.queryFn);w&&this.setOptions(w.options)}const s=new AbortController,a=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(De(this,Ba,!0),s.signal)})},c=()=>{const w=TT(this.options,r),x=(()=>{const E={client:J(this,za),queryKey:this.queryKey,meta:this.meta};return a(E),E})();return De(this,Ba,!1),this.options.persister?this.options.persister(w,x,this):w(x)},h=(()=>{const w={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:J(this,za),state:this.state,fetchFn:c};return a(w),w})();(m=this.options.behavior)==null||m.onFetch(h,this),De(this,$a,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=h.fetchOptions)==null?void 0:y.meta))&&xt(this,_s,Ri).call(this,{type:"fetch",meta:(v=h.fetchOptions)==null?void 0:v.meta});const f=w=>{var b,x,E,A;jy(w)&&w.silent||xt(this,_s,Ri).call(this,{type:"error",error:w}),jy(w)||((x=(b=J(this,Jr).config).onError)==null||x.call(b,w,this),(A=(E=J(this,Jr).config).onSettled)==null||A.call(E,this.state.data,w,this)),this.scheduleGc()};return De(this,Yn,IT({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:w=>{var b,x,E,A;if(w===void 0){f(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(w)}catch(j){f(j);return}(x=(b=J(this,Jr).config).onSuccess)==null||x.call(b,w,this),(A=(E=J(this,Jr).config).onSettled)==null||A.call(E,w,this.state.error,this),this.scheduleGc()},onError:f,onFail:(w,b)=>{xt(this,_s,Ri).call(this,{type:"failed",failureCount:w,error:b})},onPause:()=>{xt(this,_s,Ri).call(this,{type:"pause"})},onContinue:()=>{xt(this,_s,Ri).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),J(this,Yn).start()}},Ac=new WeakMap,$a=new WeakMap,Jr=new WeakMap,za=new WeakMap,Yn=new WeakMap,Vd=new WeakMap,Ba=new WeakMap,_s=new WeakSet,Ri=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...PT(s.data,this.options),fetchMeta:n.meta??null};case"success":return De(this,$a,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=n.error;return jy(a)&&a.revert&&J(this,$a)?{...J(this,$a),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Vn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),J(this,Jr).notify({query:this,type:"updated",action:n})})},W1);function PT(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:CT(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function pM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Zs,H1,mM=(H1=class extends Hd{constructor(e={}){super();nt(this,Zs);this.config=e,De(this,Zs,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??Wx(s,n);let c=this.get(a);return c||(c=new fM({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){J(this,Zs).has(e.queryHash)||(J(this,Zs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=J(this,Zs).get(e.queryHash);n&&(e.destroy(),n===e&&J(this,Zs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return J(this,Zs).get(e)}getAll(){return[...J(this,Zs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>fb(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>fb(e,r)):n}notify(e){Vn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Vn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Zs=new WeakMap,H1),ei,ir,qa,ti,Io,K1,gM=(K1=class extends AT{constructor(n){super();nt(this,ti);nt(this,ei);nt(this,ir);nt(this,qa);this.mutationId=n.mutationId,De(this,ir,n.mutationCache),De(this,ei,[]),this.state=n.state||yM(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){J(this,ei).includes(n)||(J(this,ei).push(n),this.clearGcTimeout(),J(this,ir).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){De(this,ei,J(this,ei).filter(r=>r!==n)),this.scheduleGc(),J(this,ir).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){J(this,ei).length||(this.state.status==="pending"?this.scheduleGc():J(this,ir).remove(this))}continue(){var n;return((n=J(this,qa))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var c,u,h,f,m,y,v,w,b,x,E,A,j,C,L,V,z,P,k,D;const r=()=>{xt(this,ti,Io).call(this,{type:"continue"})};De(this,qa,IT({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(R,O)=>{xt(this,ti,Io).call(this,{type:"failed",failureCount:R,error:O})},onPause:()=>{xt(this,ti,Io).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,ir).canRun(this)}));const s=this.state.status==="pending",a=!J(this,qa).canStart();try{if(s)r();else{xt(this,ti,Io).call(this,{type:"pending",variables:n,isPaused:a}),await((u=(c=J(this,ir).config).onMutate)==null?void 0:u.call(c,n,this));const O=await((f=(h=this.options).onMutate)==null?void 0:f.call(h,n));O!==this.state.context&&xt(this,ti,Io).call(this,{type:"pending",context:O,variables:n,isPaused:a})}const R=await J(this,qa).start();return await((y=(m=J(this,ir).config).onSuccess)==null?void 0:y.call(m,R,n,this.state.context,this)),await((w=(v=this.options).onSuccess)==null?void 0:w.call(v,R,n,this.state.context)),await((x=(b=J(this,ir).config).onSettled)==null?void 0:x.call(b,R,null,this.state.variables,this.state.context,this)),await((A=(E=this.options).onSettled)==null?void 0:A.call(E,R,null,n,this.state.context)),xt(this,ti,Io).call(this,{type:"success",data:R}),R}catch(R){try{throw await((C=(j=J(this,ir).config).onError)==null?void 0:C.call(j,R,n,this.state.context,this)),await((V=(L=this.options).onError)==null?void 0:V.call(L,R,n,this.state.context)),await((P=(z=J(this,ir).config).onSettled)==null?void 0:P.call(z,void 0,R,this.state.variables,this.state.context,this)),await((D=(k=this.options).onSettled)==null?void 0:D.call(k,void 0,R,n,this.state.context)),R}finally{xt(this,ti,Io).call(this,{type:"error",error:R})}}finally{J(this,ir).runNext(this)}}},ei=new WeakMap,ir=new WeakMap,qa=new WeakMap,ti=new WeakSet,Io=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Vn.batch(()=>{J(this,ei).forEach(s=>{s.onMutationUpdate(n)}),J(this,ir).notify({mutation:this,type:"updated",action:n})})},K1);function yM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Li,Es,Ud,G1,vM=(G1=class extends Hd{constructor(e={}){super();nt(this,Li);nt(this,Es);nt(this,Ud);this.config=e,De(this,Li,new Set),De(this,Es,new Map),De(this,Ud,0)}build(e,n,r){const s=new gM({mutationCache:this,mutationId:++Ef(this,Ud)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){J(this,Li).add(e);const n=If(e);if(typeof n=="string"){const r=J(this,Es).get(n);r?r.push(e):J(this,Es).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(J(this,Li).delete(e)){const n=If(e);if(typeof n=="string"){const r=J(this,Es).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&J(this,Es).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=If(e);if(typeof n=="string"){const r=J(this,Es).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=If(e);if(typeof n=="string"){const s=(r=J(this,Es).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Vn.batch(()=>{J(this,Li).forEach(e=>{this.notify({type:"removed",mutation:e})}),J(this,Li).clear(),J(this,Es).clear()})}getAll(){return Array.from(J(this,Li))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>pb(n,r))}findAll(e={}){return this.getAll().filter(n=>pb(e,n))}notify(e){Vn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Vn.batch(()=>Promise.all(e.map(n=>n.continue().catch(_r))))}},Li=new WeakMap,Es=new WeakMap,Ud=new WeakMap,G1);function If(t){var e;return(e=t.options.scope)==null?void 0:e.id}function yp(t){return{onFetch:(e,n)=>{var m,y,v,w,b;const r=e.options,s=(v=(y=(m=e.fetchOptions)==null?void 0:m.meta)==null?void 0:y.fetchMore)==null?void 0:v.direction,a=((w=e.state.data)==null?void 0:w.pages)||[],c=((b=e.state.data)==null?void 0:b.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const f=async()=>{let x=!1;const E=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},A=TT(e.options,e.fetchOptions),j=async(C,L,V)=>{if(x)return Promise.reject();if(L==null&&C.pages.length)return Promise.resolve(C);const P=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:L,direction:V?"backward":"forward",meta:e.options.meta};return E(O),O})(),k=await A(P),{maxPages:D}=e.options,R=V?oM:iM;return{pages:R(C.pages,k,D),pageParams:R(C.pageParams,L,D)}};if(s&&a.length){const C=s==="backward",L=C?kT:Cv,V={pages:a,pageParams:c},z=L(r,V);u=await j(V,z,C)}else{const C=t??a.length;do{const L=h===0?c[0]??r.initialPageParam:Cv(r,u);if(h>0&&L==null)break;u=await j(u,L),h++}while(h<C)}return u};e.options.persister?e.fetchFn=()=>{var x,E;return(E=(x=e.options).persister)==null?void 0:E.call(x,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=f}}}function Cv(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function kT(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}function xM(t,e){return e?Cv(t,e)!=null:!1}function wM(t,e){return!e||!t.getPreviousPageParam?!1:kT(t,e)!=null}var cn,Fo,Vo,Pc,kc,Uo,Rc,Oc,Q1,_M=(Q1=class{constructor(t={}){nt(this,cn);nt(this,Fo);nt(this,Vo);nt(this,Pc);nt(this,kc);nt(this,Uo);nt(this,Rc);nt(this,Oc);De(this,cn,t.queryCache||new mM),De(this,Fo,t.mutationCache||new vM),De(this,Vo,t.defaultOptions||{}),De(this,Pc,new Map),De(this,kc,new Map),De(this,Uo,0)}mount(){Ef(this,Uo)._++,J(this,Uo)===1&&(De(this,Rc,Kx.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,cn).onFocus())})),De(this,Oc,gp.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,cn).onOnline())})))}unmount(){var t,e;Ef(this,Uo)._--,J(this,Uo)===0&&((t=J(this,Rc))==null||t.call(this),De(this,Rc,void 0),(e=J(this,Oc))==null||e.call(this),De(this,Oc,void 0))}isFetching(t){return J(this,cn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return J(this,Fo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,cn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=J(this,cn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ko(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return J(this,cn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=J(this,cn).get(r.queryHash),a=s==null?void 0:s.state.data,c=rM(e,a);if(c!==void 0)return J(this,cn).build(this,r).setData(c,{...n,manual:!0})}setQueriesData(t,e,n){return Vn.batch(()=>J(this,cn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,cn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=J(this,cn);Vn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=J(this,cn);return Vn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Vn.batch(()=>J(this,cn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(_r).catch(_r)}invalidateQueries(t,e={}){return Vn.batch(()=>(J(this,cn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Vn.batch(()=>J(this,cn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(_r)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(_r)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=J(this,cn).build(this,e);return n.isStaleByTime(Ko(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(_r).catch(_r)}fetchInfiniteQuery(t){return t.behavior=yp(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(_r).catch(_r)}ensureInfiniteQueryData(t){return t.behavior=yp(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return gp.isOnline()?J(this,Fo).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,cn)}getMutationCache(){return J(this,Fo)}getDefaultOptions(){return J(this,Vo)}setDefaultOptions(t){De(this,Vo,t)}setQueryDefaults(t,e){J(this,Pc).set(_d(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...J(this,Pc).values()],n={};return e.forEach(r=>{Ed(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){J(this,kc).set(_d(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...J(this,kc).values()],n={};return e.forEach(r=>{Ed(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...J(this,Vo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Wx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Hx&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...J(this,Vo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){J(this,cn).clear(),J(this,Fo).clear()}},cn=new WeakMap,Fo=new WeakMap,Vo=new WeakMap,Pc=new WeakMap,kc=new WeakMap,Uo=new WeakMap,Rc=new WeakMap,Oc=new WeakMap,Q1),wr,wt,$d,or,Wa,Dc,$o,zo,zd,Lc,Mc,Ha,Ka,Bo,Fc,Rt,Yu,jv,Iv,Av,Pv,kv,Rv,Ov,OT,Y1,RT=(Y1=class extends Hd{constructor(e,n){super();nt(this,Rt);nt(this,wr);nt(this,wt);nt(this,$d);nt(this,or);nt(this,Wa);nt(this,Dc);nt(this,$o);nt(this,zo);nt(this,zd);nt(this,Lc);nt(this,Mc);nt(this,Ha);nt(this,Ka);nt(this,Bo);nt(this,Fc,new Set);this.options=n,De(this,wr,e),De(this,zo,null),De(this,$o,Tv()),this.options.experimental_prefetchInRender||J(this,$o).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(J(this,wt).addObserver(this),yb(J(this,wt),this.options)?xt(this,Rt,Yu).call(this):this.updateResult(),xt(this,Rt,Pv).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Dv(J(this,wt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Dv(J(this,wt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,xt(this,Rt,kv).call(this),xt(this,Rt,Rv).call(this),J(this,wt).removeObserver(this)}setOptions(e){const n=this.options,r=J(this,wt);if(this.options=J(this,wr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof bs(this.options.enabled,J(this,wt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");xt(this,Rt,Ov).call(this),J(this,wt).setOptions(this.options),n._defaulted&&!bv(this.options,n)&&J(this,wr).getQueryCache().notify({type:"observerOptionsUpdated",query:J(this,wt),observer:this});const s=this.hasListeners();s&&vb(J(this,wt),r,this.options,n)&&xt(this,Rt,Yu).call(this),this.updateResult(),s&&(J(this,wt)!==r||bs(this.options.enabled,J(this,wt))!==bs(n.enabled,J(this,wt))||Ko(this.options.staleTime,J(this,wt))!==Ko(n.staleTime,J(this,wt)))&&xt(this,Rt,jv).call(this);const a=xt(this,Rt,Iv).call(this);s&&(J(this,wt)!==r||bs(this.options.enabled,J(this,wt))!==bs(n.enabled,J(this,wt))||a!==J(this,Bo))&&xt(this,Rt,Av).call(this,a)}getOptimisticResult(e){const n=J(this,wr).getQueryCache().build(J(this,wr),e),r=this.createResult(n,e);return bM(this,r)&&(De(this,or,r),De(this,Dc,this.options),De(this,Wa,J(this,wt).state)),r}getCurrentResult(){return J(this,or)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){J(this,Fc).add(e)}getCurrentQuery(){return J(this,wt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=J(this,wr).defaultQueryOptions(e),r=J(this,wr).getQueryCache().build(J(this,wr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return xt(this,Rt,Yu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),J(this,or)))}createResult(e,n){var D;const r=J(this,wt),s=this.options,a=J(this,or),c=J(this,Wa),u=J(this,Dc),f=e!==r?e.state:J(this,$d),{state:m}=e;let y={...m},v=!1,w;if(n._optimisticResults){const R=this.hasListeners(),O=!R&&yb(e,n),U=R&&vb(e,r,n,s);(O||U)&&(y={...y,...PT(m.data,e.options)}),n._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:b,errorUpdatedAt:x,status:E}=y;w=y.data;let A=!1;if(n.placeholderData!==void 0&&w===void 0&&E==="pending"){let R;a!=null&&a.isPlaceholderData&&n.placeholderData===(u==null?void 0:u.placeholderData)?(R=a.data,A=!0):R=typeof n.placeholderData=="function"?n.placeholderData((D=J(this,Mc))==null?void 0:D.state.data,J(this,Mc)):n.placeholderData,R!==void 0&&(E="success",w=Sv(a==null?void 0:a.data,R,n),v=!0)}if(n.select&&w!==void 0&&!A)if(a&&w===(c==null?void 0:c.data)&&n.select===J(this,zd))w=J(this,Lc);else try{De(this,zd,n.select),w=n.select(w),w=Sv(a==null?void 0:a.data,w,n),De(this,Lc,w),De(this,zo,null)}catch(R){De(this,zo,R)}J(this,zo)&&(b=J(this,zo),w=J(this,Lc),x=Date.now(),E="error");const j=y.fetchStatus==="fetching",C=E==="pending",L=E==="error",V=C&&j,z=w!==void 0,k={status:E,fetchStatus:y.fetchStatus,isPending:C,isSuccess:E==="success",isError:L,isInitialLoading:V,isLoading:V,data:w,dataUpdatedAt:y.dataUpdatedAt,error:b,errorUpdatedAt:x,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>f.dataUpdateCount||y.errorUpdateCount>f.errorUpdateCount,isFetching:j,isRefetching:j&&!C,isLoadingError:L&&!z,isPaused:y.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:L&&z,isStale:Gx(e,n),refetch:this.refetch,promise:J(this,$o)};if(this.options.experimental_prefetchInRender){const R=F=>{k.status==="error"?F.reject(k.error):k.data!==void 0&&F.resolve(k.data)},O=()=>{const F=De(this,$o,k.promise=Tv());R(F)},U=J(this,$o);switch(U.status){case"pending":e.queryHash===r.queryHash&&R(U);break;case"fulfilled":(k.status==="error"||k.data!==U.value)&&O();break;case"rejected":(k.status!=="error"||k.error!==U.reason)&&O();break}}return k}updateResult(){const e=J(this,or),n=this.createResult(J(this,wt),this.options);if(De(this,Wa,J(this,wt).state),De(this,Dc,this.options),J(this,Wa).data!==void 0&&De(this,Mc,J(this,wt)),bv(n,e))return;De(this,or,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!J(this,Fc).size)return!0;const c=new Set(a??J(this,Fc));return this.options.throwOnError&&c.add("error"),Object.keys(J(this,or)).some(u=>{const h=u;return J(this,or)[h]!==e[h]&&c.has(h)})};xt(this,Rt,OT).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&xt(this,Rt,Pv).call(this)}},wr=new WeakMap,wt=new WeakMap,$d=new WeakMap,or=new WeakMap,Wa=new WeakMap,Dc=new WeakMap,$o=new WeakMap,zo=new WeakMap,zd=new WeakMap,Lc=new WeakMap,Mc=new WeakMap,Ha=new WeakMap,Ka=new WeakMap,Bo=new WeakMap,Fc=new WeakMap,Rt=new WeakSet,Yu=function(e){xt(this,Rt,Ov).call(this);let n=J(this,wt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(_r)),n},jv=function(){xt(this,Rt,kv).call(this);const e=Ko(this.options.staleTime,J(this,wt));if(tl||J(this,or).isStale||!Ev(e))return;const r=NT(J(this,or).dataUpdatedAt,e)+1;De(this,Ha,setTimeout(()=>{J(this,or).isStale||this.updateResult()},r))},Iv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(J(this,wt)):this.options.refetchInterval)??!1},Av=function(e){xt(this,Rt,Rv).call(this),De(this,Bo,e),!(tl||bs(this.options.enabled,J(this,wt))===!1||!Ev(J(this,Bo))||J(this,Bo)===0)&&De(this,Ka,setInterval(()=>{(this.options.refetchIntervalInBackground||Kx.isFocused())&&xt(this,Rt,Yu).call(this)},J(this,Bo)))},Pv=function(){xt(this,Rt,jv).call(this),xt(this,Rt,Av).call(this,xt(this,Rt,Iv).call(this))},kv=function(){J(this,Ha)&&(clearTimeout(J(this,Ha)),De(this,Ha,void 0))},Rv=function(){J(this,Ka)&&(clearInterval(J(this,Ka)),De(this,Ka,void 0))},Ov=function(){const e=J(this,wr).getQueryCache().build(J(this,wr),this.options);if(e===J(this,wt))return;const n=J(this,wt);De(this,wt,e),De(this,$d,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},OT=function(e){Vn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(J(this,or))}),J(this,wr).getQueryCache().notify({query:J(this,wt),type:"observerResultsUpdated"})})},Y1);function EM(t,e){return bs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function yb(t,e){return EM(t,e)||t.state.data!==void 0&&Dv(t,e,e.refetchOnMount)}function Dv(t,e,n){if(bs(e.enabled,t)!==!1&&Ko(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Gx(t,e)}return!1}function vb(t,e,n,r){return(t!==e||bs(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Gx(t,n)}function Gx(t,e){return bs(e.enabled,t)!==!1&&t.isStaleByTime(Ko(e.staleTime,t))}function bM(t,e){return!bv(t.getCurrentResult(),e)}var NM=class extends RT{constructor(t,e){super(t,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions({...t,behavior:yp()})}getOptimisticResult(t){return t.behavior=yp(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,e){var b,x;const{state:n}=t,r=super.createResult(t,e),{isFetching:s,isRefetching:a,isError:c,isRefetchError:u}=r,h=(x=(b=n.fetchMeta)==null?void 0:b.fetchMore)==null?void 0:x.direction,f=c&&h==="forward",m=s&&h==="forward",y=c&&h==="backward",v=s&&h==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:xM(e,n.data),hasPreviousPage:wM(e,n.data),isFetchNextPageError:f,isFetchingNextPage:m,isFetchPreviousPageError:y,isFetchingPreviousPage:v,isRefetchError:u&&!f&&!y,isRefetching:a&&!m&&!v}}},DT=_.createContext(void 0),Qx=t=>{const e=_.useContext(DT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},SM=({client:t,children:e})=>(_.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(DT.Provider,{value:t,children:e})),LT=_.createContext(!1),TM=()=>_.useContext(LT);LT.Provider;function CM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var jM=_.createContext(CM()),IM=()=>_.useContext(jM),AM=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},PM=t=>{_.useEffect(()=>{t.clearReset()},[t])},kM=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||aM(n,[t.error,r])),RM=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},OM=(t,e)=>t.isLoading&&t.isFetching&&!e,DM=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,xb=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function MT(t,e,n){var y,v,w,b,x;const r=TM(),s=IM(),a=Qx(),c=a.defaultQueryOptions(t);(v=(y=a.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||v.call(y,c),c._optimisticResults=r?"isRestoring":"optimistic",RM(c),AM(c,s),PM(s);const u=!a.getQueryCache().get(c.queryHash),[h]=_.useState(()=>new e(a,c)),f=h.getOptimisticResult(c),m=!r&&t.subscribed!==!1;if(_.useSyncExternalStore(_.useCallback(E=>{const A=m?h.subscribe(Vn.batchCalls(E)):_r;return h.updateResult(),A},[h,m]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),_.useEffect(()=>{h.setOptions(c)},[c,h]),DM(c,f))throw xb(c,h,s);if(kM({result:f,errorResetBoundary:s,throwOnError:c.throwOnError,query:a.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw f.error;if((b=(w=a.getDefaultOptions().queries)==null?void 0:w._experimental_afterQuery)==null||b.call(w,c,f),c.experimental_prefetchInRender&&!tl&&OM(f,r)){const E=u?xb(c,h,s):(x=a.getQueryCache().get(c.queryHash))==null?void 0:x.promise;E==null||E.catch(_r).finally(()=>{h.updateResult()})}return c.notifyOnChangeProps?f:h.trackResult(f)}function LM(t,e){return MT(t,RT)}function MM(t,e){return MT(t,NM)}/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bd(){return bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bd.apply(this,arguments)}var qo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qo||(qo={}));const wb="popstate";function FM(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:c,hash:u}=r.location;return Lv("",{pathname:a,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:vp(s)}return UM(e,n,null,t)}function sn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function FT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VM(){return Math.random().toString(36).substr(2,8)}function _b(t,e){return{usr:t.state,key:t.key,idx:e}}function Lv(t,e,n,r){return n===void 0&&(n=null),bd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?tu(e):e,{state:n,key:e&&e.key||r||VM()})}function vp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function tu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function UM(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,u=qo.Pop,h=null,f=m();f==null&&(f=0,c.replaceState(bd({},c.state,{idx:f}),""));function m(){return(c.state||{idx:null}).idx}function y(){u=qo.Pop;let E=m(),A=E==null?null:E-f;f=E,h&&h({action:u,location:x.location,delta:A})}function v(E,A){u=qo.Push;let j=Lv(x.location,E,A);f=m()+1;let C=_b(j,f),L=x.createHref(j);try{c.pushState(C,"",L)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(L)}a&&h&&h({action:u,location:x.location,delta:1})}function w(E,A){u=qo.Replace;let j=Lv(x.location,E,A);f=m();let C=_b(j,f),L=x.createHref(j);c.replaceState(C,"",L),a&&h&&h({action:u,location:x.location,delta:0})}function b(E){let A=s.location.origin!=="null"?s.location.origin:s.location.href,j=typeof E=="string"?E:vp(E);return j=j.replace(/ $/,"%20"),sn(A,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,A)}let x={get action(){return u},get location(){return t(s,c)},listen(E){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(wb,y),h=E,()=>{s.removeEventListener(wb,y),h=null}},createHref(E){return e(s,E)},createURL:b,encodeLocation(E){let A=b(E);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:v,replace:w,go(E){return c.go(E)}};return x}var Eb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Eb||(Eb={}));function $M(t,e,n){return n===void 0&&(n="/"),zM(t,e,n)}function zM(t,e,n,r){let s=typeof e=="string"?tu(e):e,a=Bc(s.pathname||"/",n);if(a==null)return null;let c=VT(t);BM(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=e4(a);u=JM(c[h],f)}return u}function VT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,c,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(sn(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=Go([r,h.relativePath]),m=n.concat(h);a.children&&a.children.length>0&&(sn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),VT(a.children,e,m,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:YM(f,a.index),routesMeta:m})};return t.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,c);else for(let h of UT(a.path))s(a,c,h)}),e}function UT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=UT(r.join("/")),u=[];return u.push(...c.map(h=>h===""?a:[a,h].join("/"))),s&&u.push(...c),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function BM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:XM(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qM=/^:[\w-]+$/,WM=3,HM=2,KM=1,GM=10,QM=-2,bb=t=>t==="*";function YM(t,e){let n=t.split("/"),r=n.length;return n.some(bb)&&(r+=QM),e&&(r+=HM),n.filter(s=>!bb(s)).reduce((s,a)=>s+(qM.test(a)?WM:a===""?KM:GM),r)}function XM(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function JM(t,e,n){let{routesMeta:r}=t,s={},a="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",y=Mv({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),v=h.route;if(!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:Go([a,y.pathname]),pathnameBase:s4(Go([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=Go([a,y.pathnameBase]))}return c}function Mv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ZM(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,m,y)=>{let{paramName:v,isOptional:w}=m;if(v==="*"){let x=u[y]||"";c=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const b=u[y];return w&&!b?f[v]=void 0:f[v]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:t}}function ZM(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),FT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function e4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return FT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function t4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?tu(t):t;return{pathname:n?n.startsWith("/")?n:n4(n,e):e,search:i4(r),hash:o4(s)}}function n4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Iy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function r4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Yx(t,e){let n=r4(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Xx(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=tu(t):(s=bd({},t),sn(!s.pathname||!s.pathname.includes("?"),Iy("?","pathname","search",s)),sn(!s.pathname||!s.pathname.includes("#"),Iy("#","pathname","hash",s)),sn(!s.search||!s.search.includes("#"),Iy("#","search","hash",s)));let a=t===""||s.pathname==="",c=a?"/":s.pathname,u;if(c==null)u=n;else{let y=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let h=t4(s,u),f=c&&c!=="/"&&c.endsWith("/"),m=(a||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const Go=t=>t.join("/").replace(/\/\/+/g,"/"),s4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),i4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,o4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function a4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $T=["post","put","patch","delete"];new Set($T);const l4=["get",...$T];new Set(l4);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nd.apply(this,arguments)}const tm=_.createContext(null),zT=_.createContext(null),Xi=_.createContext(null),nm=_.createContext(null),pi=_.createContext({outlet:null,matches:[],isDataRoute:!1}),BT=_.createContext(null);function c4(t,e){let{relative:n}=e===void 0?{}:e;nu()||sn(!1);let{basename:r,navigator:s}=_.useContext(Xi),{hash:a,pathname:c,search:u}=rm(t,{relative:n}),h=c;return r!=="/"&&(h=c==="/"?r:Go([r,c])),s.createHref({pathname:h,search:u,hash:a})}function nu(){return _.useContext(nm)!=null}function Ji(){return nu()||sn(!1),_.useContext(nm).location}function qT(t){_.useContext(Xi).static||_.useLayoutEffect(t)}function ru(){let{isDataRoute:t}=_.useContext(pi);return t?N4():u4()}function u4(){nu()||sn(!1);let t=_.useContext(tm),{basename:e,future:n,navigator:r}=_.useContext(Xi),{matches:s}=_.useContext(pi),{pathname:a}=Ji(),c=JSON.stringify(Yx(s,n.v7_relativeSplatPath)),u=_.useRef(!1);return qT(()=>{u.current=!0}),_.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let y=Xx(f,JSON.parse(c),a,m.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Go([e,y.pathname])),(m.replace?r.replace:r.push)(y,m.state,m)},[e,r,c,a,t])}const d4=_.createContext(null);function h4(t){let e=_.useContext(pi).outlet;return e&&_.createElement(d4.Provider,{value:t},e)}function WT(){let{matches:t}=_.useContext(pi),e=t[t.length-1];return e?e.params:{}}function rm(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(Xi),{matches:s}=_.useContext(pi),{pathname:a}=Ji(),c=JSON.stringify(Yx(s,r.v7_relativeSplatPath));return _.useMemo(()=>Xx(t,JSON.parse(c),a,n==="path"),[t,c,a,n])}function f4(t,e){return p4(t,e)}function p4(t,e,n,r){nu()||sn(!1);let{navigator:s}=_.useContext(Xi),{matches:a}=_.useContext(pi),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=Ji(),m;if(e){var y;let E=typeof e=="string"?tu(e):e;h==="/"||(y=E.pathname)!=null&&y.startsWith(h)||sn(!1),m=E}else m=f;let v=m.pathname||"/",w=v;if(h!=="/"){let E=h.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let b=$M(t,{pathname:w}),x=x4(b&&b.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:Go([h,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:Go([h,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),a,n,r);return e&&x?_.createElement(nm.Provider,{value:{location:Nd({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:qo.Pop}},x):x}function m4(){let t=b4(),e=a4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,null)}const g4=_.createElement(m4,null);class y4 extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(pi.Provider,{value:this.props.routeContext},_.createElement(BT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function v4(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(tm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(pi.Provider,{value:e},r)}function x4(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let m=c.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);m>=0||sn(!1),c=c.slice(0,Math.min(c.length,m+1))}let h=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<c.length;m++){let y=c[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=m),y.route.id){let{loaderData:v,errors:w}=n,b=y.route.loader&&v[y.route.id]===void 0&&(!w||w[y.route.id]===void 0);if(y.route.lazy||b){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((m,y,v)=>{let w,b=!1,x=null,E=null;n&&(w=u&&y.route.id?u[y.route.id]:void 0,x=y.route.errorElement||g4,h&&(f<0&&v===0?(S4("route-fallback"),b=!0,E=null):f===v&&(b=!0,E=y.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,v+1)),j=()=>{let C;return w?C=x:b?C=E:y.route.Component?C=_.createElement(y.route.Component,null):y.route.element?C=y.route.element:C=m,_.createElement(v4,{match:y,routeContext:{outlet:m,matches:A,isDataRoute:n!=null},children:C})};return n&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?_.createElement(y4,{location:n.location,revalidation:n.revalidation,component:x,error:w,children:j(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):j()},null)}var HT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(HT||{}),KT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(KT||{});function w4(t){let e=_.useContext(tm);return e||sn(!1),e}function _4(t){let e=_.useContext(zT);return e||sn(!1),e}function E4(t){let e=_.useContext(pi);return e||sn(!1),e}function GT(t){let e=E4(),n=e.matches[e.matches.length-1];return n.route.id||sn(!1),n.route.id}function b4(){var t;let e=_.useContext(BT),n=_4(),r=GT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function N4(){let{router:t}=w4(HT.UseNavigateStable),e=GT(KT.UseNavigateStable),n=_.useRef(!1);return qT(()=>{n.current=!0}),_.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Nd({fromRouteId:e},a)))},[t,e])}const Nb={};function S4(t,e,n){Nb[t]||(Nb[t]=!0)}function Kf(t){let{to:e,replace:n,state:r,relative:s}=t;nu()||sn(!1);let{future:a,static:c}=_.useContext(Xi),{matches:u}=_.useContext(pi),{pathname:h}=Ji(),f=ru(),m=Xx(e,Yx(u,a.v7_relativeSplatPath),h,s==="path"),y=JSON.stringify(m);return _.useEffect(()=>f(JSON.parse(y),{replace:n,state:r,relative:s}),[f,y,s,n,r]),null}function T4(t){return h4(t.context)}function $t(t){sn(!1)}function C4(t){let{basename:e="/",children:n=null,location:r,navigationType:s=qo.Pop,navigator:a,static:c=!1,future:u}=t;nu()&&sn(!1);let h=e.replace(/^\/*/,"/"),f=_.useMemo(()=>({basename:h,navigator:a,static:c,future:Nd({v7_relativeSplatPath:!1},u)}),[h,u,a,c]);typeof r=="string"&&(r=tu(r));let{pathname:m="/",search:y="",hash:v="",state:w=null,key:b="default"}=r,x=_.useMemo(()=>{let E=Bc(m,h);return E==null?null:{location:{pathname:E,search:y,hash:v,state:w,key:b},navigationType:s}},[h,m,y,v,w,b,s]);return x==null?null:_.createElement(Xi.Provider,{value:f},_.createElement(nm.Provider,{children:n,value:x}))}function j4(t){let{children:e,location:n}=t;return f4(Fv(e),n)}new Promise(()=>{});function Fv(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,s)=>{if(!_.isValidElement(r))return;let a=[...e,s];if(r.type===_.Fragment){n.push.apply(n,Fv(r.props.children,a));return}r.type!==$t&&sn(!1),!r.props.index||!r.props.children||sn(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Fv(r.props.children,a)),n.push(c)}),n}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xp(){return xp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xp.apply(this,arguments)}function QT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function I4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function A4(t,e){return t.button===0&&(!e||e==="_self")&&!I4(t)}function Vv(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function P4(t,e){let n=Vv(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const k4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],R4=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],O4="6";try{window.__reactRouterVersion=O4}catch{}const D4=_.createContext({isTransitioning:!1}),L4="startTransition",Sb=J1[L4];function M4(t){let{basename:e,children:n,future:r,window:s}=t,a=_.useRef();a.current==null&&(a.current=FM({window:s,v5Compat:!0}));let c=a.current,[u,h]=_.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},m=_.useCallback(y=>{f&&Sb?Sb(()=>h(y)):h(y)},[h,f]);return _.useLayoutEffect(()=>c.listen(m),[c,m]),_.createElement(C4,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:r})}const F4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",V4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zn=_.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:c,state:u,target:h,to:f,preventScrollReset:m,unstable_viewTransition:y}=e,v=QT(e,k4),{basename:w}=_.useContext(Xi),b,x=!1;if(typeof f=="string"&&V4.test(f)&&(b=f,F4))try{let C=new URL(window.location.href),L=f.startsWith("//")?new URL(C.protocol+f):new URL(f),V=Bc(L.pathname,w);L.origin===C.origin&&V!=null?f=V+L.search+L.hash:x=!0}catch{}let E=c4(f,{relative:s}),A=$4(f,{replace:c,state:u,target:h,preventScrollReset:m,relative:s,unstable_viewTransition:y});function j(C){r&&r(C),C.defaultPrevented||A(C)}return _.createElement("a",xp({},v,{href:b||E,onClick:x||a?r:j,ref:n,target:h}))}),Tb=_.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:c=!1,style:u,to:h,unstable_viewTransition:f,children:m}=e,y=QT(e,R4),v=rm(h,{relative:y.relative}),w=Ji(),b=_.useContext(zT),{navigator:x,basename:E}=_.useContext(Xi),A=b!=null&&z4(v)&&f===!0,j=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,C=w.pathname,L=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(C=C.toLowerCase(),L=L?L.toLowerCase():null,j=j.toLowerCase()),L&&E&&(L=Bc(L,E)||L);const V=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let z=C===j||!c&&C.startsWith(j)&&C.charAt(V)==="/",P=L!=null&&(L===j||!c&&L.startsWith(j)&&L.charAt(j.length)==="/"),k={isActive:z,isPending:P,isTransitioning:A},D=z?r:void 0,R;typeof a=="function"?R=a(k):R=[a,z?"active":null,P?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let O=typeof u=="function"?u(k):u;return _.createElement(Zn,xp({},y,{"aria-current":D,className:R,ref:n,style:O,to:h,unstable_viewTransition:f}),typeof m=="function"?m(k):m)});var Uv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Uv||(Uv={}));var Cb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Cb||(Cb={}));function U4(t){let e=_.useContext(tm);return e||sn(!1),e}function $4(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u}=e===void 0?{}:e,h=ru(),f=Ji(),m=rm(t,{relative:c});return _.useCallback(y=>{if(A4(y,n)){y.preventDefault();let v=r!==void 0?r:vp(f)===vp(m);h(t,{replace:v,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u})}},[f,h,m,r,s,n,t,a,c,u])}function Kd(t){let e=_.useRef(Vv(t)),n=_.useRef(!1),r=Ji(),s=_.useMemo(()=>P4(r.search,n.current?null:e.current),[r.search]),a=ru(),c=_.useCallback((u,h)=>{const f=Vv(typeof u=="function"?u(s):u);n.current=!0,a("?"+f,h)},[a,s]);return[s,c]}function z4(t,e){e===void 0&&(e={});let n=_.useContext(D4);n==null&&sn(!1);let{basename:r}=U4(Uv.useViewTransitionState),s=rm(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Bc(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=Bc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Mv(s.pathname,c)!=null||Mv(s.pathname,a)!=null}const B4=()=>{};var jb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},q4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],c=t[n++],u=t[n++],h=((s&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},XT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],c=s+1<t.length,u=c?t[s+1]:0,h=s+2<t.length,f=h?t[s+2]:0,m=a>>2,y=(a&3)<<4|u>>4;let v=(u&15)<<2|f>>6,w=f&63;h||(w=64,c||(v=64)),r.push(n[m],n[y],n[v],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(YT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):q4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||u==null||f==null||y==null)throw new W4;const v=a<<2|u>>4;if(r.push(v),f!==64){const w=u<<4&240|f>>2;if(r.push(w),y!==64){const b=f<<6&192|y;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class W4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const H4=function(t){const e=YT(t);return XT.encodeByteArray(e,!0)},wp=function(t){return H4(t).replace(/\./g,"")},JT=function(t){try{return XT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=()=>K4().__FIREBASE_DEFAULTS__,Q4=()=>{if(typeof process>"u"||typeof jb>"u")return;const t=jb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Y4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&JT(t[1]);return e&&JSON.parse(e)},sm=()=>{try{return B4()||G4()||Q4()||Y4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ZT=t=>{var e,n;return(n=(e=sm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},X4=t=>{const e=ZT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},eC=()=>{var t;return(t=sm())===null||t===void 0?void 0:t.config},tC=t=>{var e;return(e=sm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wp(JSON.stringify(n)),wp(JSON.stringify(c)),""].join(".")}const ld={};function eF(){const t={prod:[],emulator:[]};for(const e of Object.keys(ld))ld[e]?t.emulator.push(e):t.prod.push(e);return t}function tF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ib=!1;function nC(t,e){if(typeof window>"u"||typeof document>"u"||!fl(window.location.host)||ld[t]===e||ld[t]||Ib)return;ld[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",a=eF().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Ib=!0,c()},v}function m(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=tF(r),w=n("text"),b=document.getElementById(w)||document.createElement("span"),x=n("learnmore"),E=document.getElementById(x)||document.createElement("a"),A=n("preprendIcon"),j=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const C=v.element;u(C),m(E,x);const L=f();h(j,A),C.append(j,b,E,L),document.body.appendChild(C)}a?(b.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())}function rF(){var t;const e=(t=sm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aF(){const t=er();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lF(){return!rF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rC(){try{return typeof indexedDB=="object"}catch{return!1}}function sC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}function cF(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF="FirebaseError";class Ds extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uF,Object.setPrototypeOf(this,Ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pl.prototype.create)}}class pl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?dF(a,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Ds(s,u,r)}}function dF(t,e){return t.replace(hF,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const hF=/\{\$([^}]+)}/g;function fF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],c=e[s];if(Ab(a)&&Ab(c)){if(!nl(a,c))return!1}else if(a!==c)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ab(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Ju(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function pF(t,e){const n=new mF(t,e);return n.subscribe.bind(n)}class mF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gF(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ay),s.error===void 0&&(s.error=Ay),s.complete===void 0&&(s.complete=Ay);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ay(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t){return t&&t._delegate?t._delegate:t}class ss{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new J4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xF(e))try{this.getOrInitializeService({instanceIdentifier:La})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=La){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=La){return this.instances.has(e)}getOptions(e=La){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=La){return this.component?this.component.multipleInstances?e:La:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vF(t){return t===La?void 0:t}function xF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ft||(ft={}));const _F={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},EF=ft.INFO,bF={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},NF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=bF[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zx{constructor(e){this.name=e,this._logLevel=EF,this._logHandler=NF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_F[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}const SF=(t,e)=>e.some(n=>t instanceof n);let Pb,kb;function TF(){return Pb||(Pb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CF(){return kb||(kb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iC=new WeakMap,$v=new WeakMap,oC=new WeakMap,Py=new WeakMap,ew=new WeakMap;function jF(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(Vi(t.result)),s()},c=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&iC.set(n,t)}).catch(()=>{}),ew.set(e,t),e}function IF(t){if($v.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),s()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});$v.set(t,e)}let zv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $v.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AF(t){zv=t(zv)}function PF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ky(this),e,...n);return oC.set(r,e.sort?e.sort():[e]),Vi(r)}:CF().includes(t)?function(...e){return t.apply(ky(this),e),Vi(iC.get(this))}:function(...e){return Vi(t.apply(ky(this),e))}}function kF(t){return typeof t=="function"?PF(t):(t instanceof IDBTransaction&&IF(t),SF(t,TF())?new Proxy(t,zv):t)}function Vi(t){if(t instanceof IDBRequest)return jF(t);if(Py.has(t))return Py.get(t);const e=kF(t);return e!==t&&(Py.set(t,e),ew.set(e,t)),e}const ky=t=>ew.get(t);function im(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const c=indexedDB.open(t,e),u=Vi(c);return r&&c.addEventListener("upgradeneeded",h=>{r(Vi(c.result),h.oldVersion,h.newVersion,Vi(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}function Ry(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Vi(n).then(()=>{})}const RF=["get","getKey","getAll","getAllKeys","count"],OF=["put","add","delete","clear"],Oy=new Map;function Rb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Oy.get(e))return Oy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=OF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||RF.includes(n)))return;const a=async function(c,...u){const h=this.transaction(c,s?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),s&&h.done]))[0]};return Oy.set(e,a),a}AF(t=>({...t,get:(e,n,r)=>Rb(e,n)||t.get(e,n,r),has:(e,n)=>!!Rb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LF(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function LF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bv="@firebase/app",Ob="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new Zx("@firebase/app"),MF="@firebase/app-compat",FF="@firebase/analytics-compat",VF="@firebase/analytics",UF="@firebase/app-check-compat",$F="@firebase/app-check",zF="@firebase/auth",BF="@firebase/auth-compat",qF="@firebase/database",WF="@firebase/data-connect",HF="@firebase/database-compat",KF="@firebase/functions",GF="@firebase/functions-compat",QF="@firebase/installations",YF="@firebase/installations-compat",XF="@firebase/messaging",JF="@firebase/messaging-compat",ZF="@firebase/performance",eV="@firebase/performance-compat",tV="@firebase/remote-config",nV="@firebase/remote-config-compat",rV="@firebase/storage",sV="@firebase/storage-compat",iV="@firebase/firestore",oV="@firebase/ai",aV="@firebase/firestore-compat",lV="firebase",cV="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="[DEFAULT]",uV={[Bv]:"fire-core",[MF]:"fire-core-compat",[VF]:"fire-analytics",[FF]:"fire-analytics-compat",[$F]:"fire-app-check",[UF]:"fire-app-check-compat",[zF]:"fire-auth",[BF]:"fire-auth-compat",[qF]:"fire-rtdb",[WF]:"fire-data-connect",[HF]:"fire-rtdb-compat",[KF]:"fire-fn",[GF]:"fire-fn-compat",[QF]:"fire-iid",[YF]:"fire-iid-compat",[XF]:"fire-fcm",[JF]:"fire-fcm-compat",[ZF]:"fire-perf",[eV]:"fire-perf-compat",[tV]:"fire-rc",[nV]:"fire-rc-compat",[rV]:"fire-gcs",[sV]:"fire-gcs-compat",[iV]:"fire-fst",[aV]:"fire-fst-compat",[oV]:"fire-vertex","fire-js":"fire-js",[lV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=new Map,dV=new Map,Wv=new Map;function Db(t,e){try{t.container.addComponent(e)}catch(n){qi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ps(t){const e=t.name;if(Wv.has(e))return qi.debug(`There were multiple attempts to register component ${e}.`),!1;Wv.set(e,t);for(const n of _p.values())Db(n,t);for(const n of dV.values())Db(n,t);return!0}function ml(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qo=new pl("app","Firebase",hV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=cV;function aC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qv,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Qo.create("bad-app-name",{appName:String(s)});if(n||(n=eC()),!n)throw Qo.create("no-options");const a=_p.get(s);if(a){if(nl(n,a.options)&&nl(r,a.config))return a;throw Qo.create("duplicate-app",{appName:s})}const c=new wF(s);for(const h of Wv.values())c.addComponent(h);const u=new fV(n,r,c);return _p.set(s,u),u}function tw(t=qv){const e=_p.get(t);if(!e&&t===qv&&eC())return aC();if(!e)throw Qo.create("no-app",{appName:t});return e}function Cr(t,e,n){var r;let s=(r=uV[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qi.warn(u.join(" "));return}Ps(new ss(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV="firebase-heartbeat-database",mV=1,Sd="firebase-heartbeat-store";let Dy=null;function lC(){return Dy||(Dy=im(pV,mV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qo.create("idb-open",{originalErrorMessage:t.message})})),Dy}async function gV(t){try{const n=(await lC()).transaction(Sd),r=await n.objectStore(Sd).get(cC(t));return await n.done,r}catch(e){if(e instanceof Ds)qi.warn(e.message);else{const n=Qo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qi.warn(n.message)}}}async function Lb(t,e){try{const r=(await lC()).transaction(Sd,"readwrite");await r.objectStore(Sd).put(e,cC(t)),await r.done}catch(n){if(n instanceof Ds)qi.warn(n.message);else{const r=Qo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qi.warn(r.message)}}}function cC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=1024,vV=30;class xV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _V(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Mb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>vV){const c=EV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mb(),{heartbeatsToSend:r,unsentEntries:s}=wV(this._heartbeatsCache.heartbeats),a=wp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return qi.warn(n),""}}}function Mb(){return new Date().toISOString().substring(0,10)}function wV(t,e=yV){const n=[];let r=t.slice();for(const s of t){const a=n.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),Fb(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Fb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _V{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rC()?sC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Fb(t){return wp(JSON.stringify({version:2,heartbeats:t})).length}function EV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(t){Ps(new ss("platform-logger",e=>new DF(e),"PRIVATE")),Ps(new ss("heartbeat",e=>new xV(e),"PRIVATE")),Cr(Bv,Ob,t),Cr(Bv,Ob,"esm2017"),Cr("fire-js","")}bV("");var Jn=function(){return Jn=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Jn.apply(this,arguments)};function su(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function uC(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function dC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NV=dC,hC=new pl("auth","Firebase",dC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep=new Zx("@firebase/auth");function SV(t,...e){Ep.logLevel<=ft.WARN&&Ep.warn(`Auth (${gl}): ${t}`,...e)}function Gf(t,...e){Ep.logLevel<=ft.ERROR&&Ep.error(`Auth (${gl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t,...e){throw nw(t,...e)}function ri(t,...e){return nw(t,...e)}function fC(t,e,n){const r=Object.assign(Object.assign({},NV()),{[e]:n});return new pl("auth","Firebase",r).create(e,{appName:t.name})}function Yo(t){return fC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return hC.create(t,...e)}function et(t,e,...n){if(!t)throw nw(e,...n)}function Mi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gf(e),new Error(e)}function Wi(t,e){t||Mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function TV(){return Vb()==="http:"||Vb()==="https:"}function Vb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TV()||iF()||"connection"in navigator)?navigator.onLine:!0}function jV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wi(n>e,"Short delay should be less than long delay!"),this.isMobile=nF()||oF()}get(){return CV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t,e){Wi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PV=new Qd(3e4,6e4);function yl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ua(t,e,n,r,s={}){return mC(t,s,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=Gd(Object.assign({key:t.config.apiKey},c)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:h},a);return sF()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&fl(t.emulatorConfig.host)&&(f.credentials="include"),pC.fetch()(await gC(t,t.config.apiHost,n,u),f)})}async function mC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},IV),e);try{const s=new RV(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Af(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Af(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Af(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw Af(t,"user-disabled",c);const m=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw fC(t,m,f);ks(t,m)}}catch(s){if(s instanceof Ds)throw s;ks(t,"network-request-failed",{message:String(s)})}}async function om(t,e,n,r,s={}){const a=await ua(t,e,n,r,s);return"mfaPendingCredential"in a&&ks(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function gC(t,e,n,r){const s=`${e}${n}?${r}`,a=t,c=a.config.emulator?rw(t.config,s):`${t.config.apiScheme}://${s}`;return AV.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function kV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ri(this.auth,"network-request-failed")),PV.get())})}}function Af(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ri(t,e,r);return s.customData._tokenResponse=n,s}function Ub(t){return t!==void 0&&t.enterprise!==void 0}class OV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return kV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DV(t,e){return ua(t,"GET","/v2/recaptchaConfig",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LV(t,e){return ua(t,"POST","/v1/accounts:delete",e)}async function bp(t,e){return ua(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MV(t,e=!1){const n=en(t),r=await n.getIdToken(e),s=sw(r);et(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:cd(Ly(s.auth_time)),issuedAtTime:cd(Ly(s.iat)),expirationTime:cd(Ly(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ly(t){return Number(t)*1e3}function sw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Gf("JWT malformed, contained fewer than 3 sections"),null;try{const s=JT(n);return s?JSON.parse(s):(Gf("Failed to decode base64 JWT payload"),null)}catch(s){return Gf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $b(t){const e=sw(t);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ds&&FV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function FV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cd(this.lastLoginAt),this.creationTime=cd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Np(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Td(t,bp(n,{idToken:r}));et(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?yC(a.providerUserInfo):[],u=$V(t.providerData,c),h=t.isAnonymous,f=!(t.email&&a.passwordHash)&&!(u!=null&&u.length),m=h?f:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Kv(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(t,y)}async function UV(t){const e=en(t);await Np(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $V(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function yC(t){return t.map(e=>{var{providerId:n}=e,r=su(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(t,e){const n=await mC(t,{},async()=>{const r=Gd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,c=await gC(t,s,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return t.emulatorConfig&&fl(t.emulatorConfig.host)&&(h.credentials="include"),pC.fetch()(c,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BV(t,e){return ua(t,"POST","/v2/accounts:revokeToken",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$b(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){et(e.length!==0,"internal-error");const n=$b(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await zV(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,c=new xc;return r&&(et(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(et(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(et(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xc,this.toJSON())}_performRefresh(){return Mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t,e){et(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ss{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=su(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Kv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Td(this,this.stsTokenManager.getToken(this.auth,e));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MV(this,e)}reload(){return UV(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Np(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zr(this.auth.app))return Promise.reject(Yo(this.auth));const e=await this.getIdToken();return await Td(this,LV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,c,u,h,f,m;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(s=n.email)!==null&&s!==void 0?s:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,b=(c=n.photoURL)!==null&&c!==void 0?c:void 0,x=(u=n.tenantId)!==null&&u!==void 0?u:void 0,E=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,A=(f=n.createdAt)!==null&&f!==void 0?f:void 0,j=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:C,emailVerified:L,isAnonymous:V,providerData:z,stsTokenManager:P}=n;et(C&&P,e,"internal-error");const k=xc.fromJSON(this.name,P);et(typeof C=="string",e,"internal-error"),jo(y,e.name),jo(v,e.name),et(typeof L=="boolean",e,"internal-error"),et(typeof V=="boolean",e,"internal-error"),jo(w,e.name),jo(b,e.name),jo(x,e.name),jo(E,e.name),jo(A,e.name),jo(j,e.name);const D=new Ss({uid:C,auth:e,email:v,emailVerified:L,displayName:y,isAnonymous:V,photoURL:b,phoneNumber:w,tenantId:x,stsTokenManager:k,createdAt:A,lastLoginAt:j});return z&&Array.isArray(z)&&(D.providerData=z.map(R=>Object.assign({},R))),E&&(D._redirectEventId=E),D}static async _fromIdTokenResponse(e,n,r=!1){const s=new xc;s.updateFromServerResponse(n);const a=new Ss({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Np(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];et(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?yC(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),u=new xc;u.updateFromIdToken(r);const h=new Ss({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=new Map;function Fi(t){Wi(t instanceof Function,"Expected a class definition");let e=zb.get(t);return e?(Wi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vC.type="NONE";const Bb=vC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t,e,n){return`firebase:${t}:${e}:${n}`}class wc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Qf(this.userKey,s.apiKey,a),this.fullPersistenceKey=Qf("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bp(this.auth,{idToken:e}).catch(()=>{});return n?Ss._fromGetAccountInfoResponse(this.auth,n,e):null}return Ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wc(Fi(Bb),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||Fi(Bb);const c=Qf(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(c);if(m){let y;if(typeof m=="string"){const v=await bp(e,{idToken:m}).catch(()=>{});if(!v)break;y=await Ss._fromGetAccountInfoResponse(e,v,m)}else y=Ss._fromJSON(e,m);f!==a&&(u=y),a=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new wc(a,e,r):(a=h[0],u&&await a._set(c,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(c)}catch{}})),new wc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NC(e))return"Blackberry";if(SC(e))return"Webos";if(wC(e))return"Safari";if((e.includes("chrome/")||_C(e))&&!e.includes("edge/"))return"Chrome";if(bC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xC(t=er()){return/firefox\//i.test(t)}function wC(t=er()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _C(t=er()){return/crios\//i.test(t)}function EC(t=er()){return/iemobile/i.test(t)}function bC(t=er()){return/android/i.test(t)}function NC(t=er()){return/blackberry/i.test(t)}function SC(t=er()){return/webos/i.test(t)}function iw(t=er()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qV(t=er()){var e;return iw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WV(){return aF()&&document.documentMode===10}function TC(t=er()){return iw(t)||bC(t)||SC(t)||NC(t)||/windows phone/i.test(t)||EC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t,e=[]){let n;switch(t){case"Browser":n=qb(er());break;case"Worker":n=`${qb(er())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((c,u)=>{try{const h=e(a);c(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KV(t,e={}){return ua(t,"GET","/v2/passwordPolicy",yl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=6;class QV{constructor(e){var n,r,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:GV,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,c,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wb(this),this.idTokenSubscription=new Wb(this),this.beforeStateQueue=new HV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fi(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await wc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bp(this,{idToken:e}),r=await Ss._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&(h!=null&&h.user)&&(s=h.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Np(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zr(this.app))return Promise.reject(Yo(this));const n=e?en(e):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zr(this.app)?Promise.reject(Yo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zr(this.app)?Promise.reject(Yo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KV(this),n=new QV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await BV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fi(e)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await wc.create(this,[Fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,s);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&SV(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function iu(t){return en(t)}class Wb{constructor(e){this.auth=e,this.observer=null,this.addObserver=pF(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let am={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XV(t){am=t}function jC(t){return am.loadJS(t)}function JV(){return am.recaptchaEnterpriseScript}function ZV(){return am.gapiScript}function e3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class t3{constructor(){this.enterprise=new n3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class n3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const r3="recaptcha-enterprise",IC="NO_RECAPTCHA";class s3{constructor(e){this.type=r3,this.auth=iu(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{DV(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new OV(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,c(f.siteKey)}}).catch(h=>{u(h)})})}function s(a,c,u){const h=window.grecaptcha;Ub(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{c(f)}).catch(()=>{c(IC)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new t3().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!n&&Ub(window.grecaptcha))s(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=JV();h.length!==0&&(h+=u),jC(h).then(()=>{s(u,a,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function Hb(t,e,n,r=!1,s=!1){const a=new s3(t);let c;if(s)c=IC;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Kb(t,e,n,r,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Hb(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Hb(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(t,e){const n=ml(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(nl(a,e??{}))return s;ks(s,"already-initialized")}return n.initialize({options:e})}function o3(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function a3(t,e,n){const r=iu(t);et(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=AC(e),{host:c,port:u}=l3(e),h=u===null?"":`:${u}`,f={url:`${a}//${c}${h}/`},m=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){et(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),et(nl(f,r.config.emulator)&&nl(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,fl(c)?(Jx(`${a}//${c}${h}`),nC("Auth",!0)):c3()}function AC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function l3(t){const e=AC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Gb(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:Gb(c)}}}function Gb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function c3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mi("not implemented")}_getIdTokenResponse(e){return Mi("not implemented")}_linkToIdToken(e,n){return Mi("not implemented")}_getReauthenticationResolver(e){return Mi("not implemented")}}async function u3(t,e){return ua(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d3(t,e){return om(t,"POST","/v1/accounts:signInWithPassword",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h3(t,e){return om(t,"POST","/v1/accounts:signInWithEmailLink",yl(t,e))}async function f3(t,e){return om(t,"POST","/v1/accounts:signInWithEmailLink",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd extends ow{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Cd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Cd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kb(e,n,"signInWithPassword",d3);case"emailLink":return h3(e,{email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kb(e,r,"signUpPassword",u3);case"emailLink":return f3(e,{idToken:n,email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(t,e){return om(t,"POST","/v1/accounts:signInWithIdp",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3="http://localhost";class rl extends ow{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new rl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ks("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=su(n,["providerId","signInMethod"]);if(!r||!s)return null;const c=new rl(r,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return _c(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_c(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_c(e,n)}buildRequest(){const e={requestUri:p3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function g3(t){const e=Xu(Ju(t)).link,n=e?Xu(Ju(e)).deep_link_id:null,r=Xu(Ju(t)).deep_link_id;return(r?Xu(Ju(r)).link:null)||r||n||e||t}class aw{constructor(e){var n,r,s,a,c,u;const h=Xu(Ju(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,m=(r=h.oobCode)!==null&&r!==void 0?r:null,y=m3((s=h.mode)!==null&&s!==void 0?s:null);et(f&&m&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=m,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=g3(e);try{return new aw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(){this.providerId=ou.PROVIDER_ID}static credential(e,n){return Cd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=aw.parseLink(n);return et(r,"argument-error"),Cd._fromEmailAndCode(e,r.code,r.tenantId)}}ou.PROVIDER_ID="password";ou.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ou.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd extends PC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends Yd{constructor(){super("facebook.com")}static credential(e){return rl._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ko.credential(e.oauthAccessToken)}catch{return null}}}ko.FACEBOOK_SIGN_IN_METHOD="facebook.com";ko.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends Yd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return rl._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ro.credential(n,r)}catch{return null}}}Ro.GOOGLE_SIGN_IN_METHOD="google.com";Ro.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Yd{constructor(){super("github.com")}static credential(e){return rl._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oo.credential(e.oauthAccessToken)}catch{return null}}}Oo.GITHUB_SIGN_IN_METHOD="github.com";Oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Yd{constructor(){super("twitter.com")}static credential(e,n){return rl._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Do.credential(n,r)}catch{return null}}}Do.TWITTER_SIGN_IN_METHOD="twitter.com";Do.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Ss._fromIdTokenResponse(e,r,s),c=Qb(r);return new qc({user:a,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Qb(r);return new qc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Qb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp extends Ds{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Sp.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Sp(e,n,r,s)}}function kC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Sp._fromErrorAndOperation(t,a,e,r):a})}async function y3(t,e,n=!1){const r=await Td(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v3(t,e,n=!1){const{auth:r}=t;if(Zr(r.app))return Promise.reject(Yo(r));const s="reauthenticate";try{const a=await Td(t,kC(r,s,e,t),n);et(a.idToken,r,"internal-error");const c=sw(a.idToken);et(c,r,"internal-error");const{sub:u}=c;return et(t.uid===u,r,"user-mismatch"),qc._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ks(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(t,e,n=!1){if(Zr(t.app))return Promise.reject(Yo(t));const r="signIn",s=await kC(t,r,e),a=await qc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function x3(t,e){return RC(iu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w3(t){const e=iu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function _3(t,e,n){return Zr(t.app)?Promise.reject(Yo(t)):x3(en(t),ou.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&w3(t),r})}function E3(t,e,n,r){return en(t).onIdTokenChanged(e,n,r)}function b3(t,e,n){return en(t).beforeAuthStateChanged(e,n)}function N3(t,e,n,r){return en(t).onAuthStateChanged(e,n,r)}function S3(t){return en(t).signOut()}const Tp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Tp,"1"),this.storage.removeItem(Tp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=1e3,C3=10;class DC extends OC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);WV()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,C3):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},T3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}DC.type="LOCAL";const j3=DC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC extends OC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LC.type="SESSION";const MC=LC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new lm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async f=>f(n.origin,a)),h=await I3(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((u,h)=>{const f=lw("",20);s.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(v.data.response);break;default:clearTimeout(m),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return window}function P3(t){si().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(){return typeof si().WorkerGlobalScope<"u"&&typeof si().importScripts=="function"}async function k3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function R3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function O3(){return FC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="firebaseLocalStorageDb",D3=1,Cp="firebaseLocalStorage",UC="fbase_key";class Xd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cm(t,e){return t.transaction([Cp],e?"readwrite":"readonly").objectStore(Cp)}function L3(){const t=indexedDB.deleteDatabase(VC);return new Xd(t).toPromise()}function Gv(){const t=indexedDB.open(VC,D3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cp,{keyPath:UC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cp)?e(r):(r.close(),await L3(),e(await Gv()))})})}async function Yb(t,e,n){const r=cm(t,!0).put({[UC]:e,value:n});return new Xd(r).toPromise()}async function M3(t,e){const n=cm(t,!1).get(e),r=await new Xd(n).toPromise();return r===void 0?null:r.value}function Xb(t,e){const n=cm(t,!0).delete(e);return new Xd(n).toPromise()}const F3=800,V3=3;class $C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>V3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lm._getInstance(O3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await k3(),!this.activeServiceWorker)return;this.sender=new A3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||R3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gv();return await Yb(e,Tp,"1"),await Xb(e,Tp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Yb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>M3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=cm(s,!1).getAll();return new Xd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),F3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$C.type="LOCAL";const U3=$C;new Qd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(t,e){return e?Fi(e):(et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw extends ow{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _c(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _c(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _c(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function z3(t){return RC(t.auth,new cw(t),t.bypassAuthState)}function B3(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),v3(n,new cw(t),t.bypassAuthState)}async function q3(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),y3(n,new cw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return z3;case"linkViaPopup":case"linkViaRedirect":return q3;case"reauthViaPopup":case"reauthViaRedirect":return B3;default:ks(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=new Qd(2e3,1e4);class mc extends zC{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,mc.currentPopupAction&&mc.currentPopupAction.cancel(),mc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){Wi(this.filter.length===1,"Popup operations only handle one event");const e=lw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,W3.get())};e()}}mc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3="pendingRedirect",Yf=new Map;class K3 extends zC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Yf.get(this.auth._key());if(!e){try{const r=await G3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yf.set(this.auth._key(),e)}return this.bypassAuthState||Yf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function G3(t,e){const n=X3(e),r=Y3(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Q3(t,e){Yf.set(t._key(),e)}function Y3(t){return Fi(t._redirectPersistence)}function X3(t){return Qf(H3,t.config.apiKey,t.name)}async function J3(t,e,n=!1){if(Zr(t.app))return Promise.reject(Yo(t));const r=iu(t),s=$3(r,e),c=await new K3(r,s,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=10*60*1e3;class eU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!BC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ri(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z3&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jb(e))}saveEventToCache(e){this.cachedEventUids.add(Jb(e)),this.lastProcessedEventTime=Date.now()}}function Jb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function BC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nU(t,e={}){return ua(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sU=/^https?/;async function iU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nU(t);for(const n of e)try{if(oU(n))return}catch{}ks(t,"unauthorized-domain")}function oU(t){const e=Hv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!sU.test(n))return!1;if(rU.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU=new Qd(3e4,6e4);function Zb(){const t=si().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lU(t){return new Promise((e,n)=>{var r,s,a;function c(){Zb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Zb(),n(ri(t,"network-request-failed"))},timeout:aU.get()})}if(!((s=(r=si().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=si().gapi)===null||a===void 0)&&a.load)c();else{const u=e3("iframefcb");return si()[u]=()=>{gapi.load?c():n(ri(t,"network-request-failed"))},jC(`${ZV()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw Xf=null,e})}let Xf=null;function cU(t){return Xf=Xf||lU(t),Xf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=new Qd(5e3,15e3),dU="__/auth/iframe",hU="emulator/auth/iframe",fU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mU(t){const e=t.config;et(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?rw(e,hU):`https://${t.config.authDomain}/${dU}`,r={apiKey:e.apiKey,appName:t.name,v:gl},s=pU.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Gd(r).slice(1)}`}async function gU(t){const e=await cU(t),n=si().gapi;return et(n,t,"internal-error"),e.open({where:document.body,url:mU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fU,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const c=ri(t,"network-request-failed"),u=si().setTimeout(()=>{a(c)},uU.get());function h(){si().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vU=500,xU=600,wU="_blank",_U="http://localhost";class eN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EU(t,e,n,r=vU,s=xU){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},yU),{width:r.toString(),height:s.toString(),top:a,left:c}),f=er().toLowerCase();n&&(u=_C(f)?wU:n),xC(f)&&(e=e||_U,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[w,b])=>`${v}${w}=${b},`,"");if(qV(f)&&u!=="_self")return bU(e||"",u),new eN(null);const y=window.open(e||"",u,m);et(y,t,"popup-blocked");try{y.focus()}catch{}return new eN(y)}function bU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU="__/auth/handler",SU="emulator/auth/handler",TU=encodeURIComponent("fac");async function tN(t,e,n,r,s,a){et(t.config.authDomain,t,"auth-domain-config-required"),et(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gl,eventId:s};if(e instanceof PC){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",fF(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))c[m]=y}if(e instanceof Yd){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(c.scopes=m.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${TU}=${encodeURIComponent(h)}`:"";return`${CU(t)}?${Gd(u).slice(1)}${f}`}function CU({config:t}){return t.emulator?rw(t,SU):`https://${t.authDomain}/${NU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="webStorageSupport";class jU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MC,this._completeRedirectFn=J3,this._overrideRedirectResult=Q3}async _openPopup(e,n,r,s){var a;Wi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await tN(e,n,r,Hv(),s);return EU(e,c,lw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await tN(e,n,r,Hv(),s);return P3(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Wi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gU(e),r=new eU(e);return n.register("authEvent",s=>(et(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(My,{type:My},s=>{var a;const c=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[My];c!==void 0&&n(!!c),ks(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TC()||wC()||iw()}}const IU=jU;var nN="@firebase/auth",rN="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kU(t){Ps(new ss("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;et(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CC(t)},f=new YV(r,s,a,h);return o3(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ps(new ss("auth-internal",e=>{const n=iu(e.getProvider("auth").getImmediate());return(r=>new AU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(nN,rN,PU(t)),Cr(nN,rN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU=5*60,OU=tC("authIdTokenMaxAge")||RU;let sN=null;const DU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>OU)return;const s=n==null?void 0:n.token;sN!==s&&(sN=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function LU(t=tw()){const e=ml(t,"auth");if(e.isInitialized())return e.getImmediate();const n=i3(t,{popupRedirectResolver:IU,persistence:[U3,j3,MC]}),r=tC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=DU(a.toString());b3(n,c,()=>c(n.currentUser)),E3(n,u=>c(u))}}const s=ZT("auth");return s&&a3(n,`http://${s}`),n}function MU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}XV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=ri("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",MU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kU("Browser");var FU="firebase",VU="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(FU,VU,"app");var iN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xo,qC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,k){function D(){}D.prototype=k.prototype,P.D=k.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(R,O,U){for(var F=Array(arguments.length-2),H=2;H<arguments.length;H++)F[H-2]=arguments[H];return k.prototype[O].apply(R,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,k,D){D||(D=0);var R=Array(16);if(typeof k=="string")for(var O=0;16>O;++O)R[O]=k.charCodeAt(D++)|k.charCodeAt(D++)<<8|k.charCodeAt(D++)<<16|k.charCodeAt(D++)<<24;else for(O=0;16>O;++O)R[O]=k[D++]|k[D++]<<8|k[D++]<<16|k[D++]<<24;k=P.g[0],D=P.g[1],O=P.g[2];var U=P.g[3],F=k+(U^D&(O^U))+R[0]+3614090360&4294967295;k=D+(F<<7&4294967295|F>>>25),F=U+(O^k&(D^O))+R[1]+3905402710&4294967295,U=k+(F<<12&4294967295|F>>>20),F=O+(D^U&(k^D))+R[2]+606105819&4294967295,O=U+(F<<17&4294967295|F>>>15),F=D+(k^O&(U^k))+R[3]+3250441966&4294967295,D=O+(F<<22&4294967295|F>>>10),F=k+(U^D&(O^U))+R[4]+4118548399&4294967295,k=D+(F<<7&4294967295|F>>>25),F=U+(O^k&(D^O))+R[5]+1200080426&4294967295,U=k+(F<<12&4294967295|F>>>20),F=O+(D^U&(k^D))+R[6]+2821735955&4294967295,O=U+(F<<17&4294967295|F>>>15),F=D+(k^O&(U^k))+R[7]+4249261313&4294967295,D=O+(F<<22&4294967295|F>>>10),F=k+(U^D&(O^U))+R[8]+1770035416&4294967295,k=D+(F<<7&4294967295|F>>>25),F=U+(O^k&(D^O))+R[9]+2336552879&4294967295,U=k+(F<<12&4294967295|F>>>20),F=O+(D^U&(k^D))+R[10]+4294925233&4294967295,O=U+(F<<17&4294967295|F>>>15),F=D+(k^O&(U^k))+R[11]+2304563134&4294967295,D=O+(F<<22&4294967295|F>>>10),F=k+(U^D&(O^U))+R[12]+1804603682&4294967295,k=D+(F<<7&4294967295|F>>>25),F=U+(O^k&(D^O))+R[13]+4254626195&4294967295,U=k+(F<<12&4294967295|F>>>20),F=O+(D^U&(k^D))+R[14]+2792965006&4294967295,O=U+(F<<17&4294967295|F>>>15),F=D+(k^O&(U^k))+R[15]+1236535329&4294967295,D=O+(F<<22&4294967295|F>>>10),F=k+(O^U&(D^O))+R[1]+4129170786&4294967295,k=D+(F<<5&4294967295|F>>>27),F=U+(D^O&(k^D))+R[6]+3225465664&4294967295,U=k+(F<<9&4294967295|F>>>23),F=O+(k^D&(U^k))+R[11]+643717713&4294967295,O=U+(F<<14&4294967295|F>>>18),F=D+(U^k&(O^U))+R[0]+3921069994&4294967295,D=O+(F<<20&4294967295|F>>>12),F=k+(O^U&(D^O))+R[5]+3593408605&4294967295,k=D+(F<<5&4294967295|F>>>27),F=U+(D^O&(k^D))+R[10]+38016083&4294967295,U=k+(F<<9&4294967295|F>>>23),F=O+(k^D&(U^k))+R[15]+3634488961&4294967295,O=U+(F<<14&4294967295|F>>>18),F=D+(U^k&(O^U))+R[4]+3889429448&4294967295,D=O+(F<<20&4294967295|F>>>12),F=k+(O^U&(D^O))+R[9]+568446438&4294967295,k=D+(F<<5&4294967295|F>>>27),F=U+(D^O&(k^D))+R[14]+3275163606&4294967295,U=k+(F<<9&4294967295|F>>>23),F=O+(k^D&(U^k))+R[3]+4107603335&4294967295,O=U+(F<<14&4294967295|F>>>18),F=D+(U^k&(O^U))+R[8]+1163531501&4294967295,D=O+(F<<20&4294967295|F>>>12),F=k+(O^U&(D^O))+R[13]+2850285829&4294967295,k=D+(F<<5&4294967295|F>>>27),F=U+(D^O&(k^D))+R[2]+4243563512&4294967295,U=k+(F<<9&4294967295|F>>>23),F=O+(k^D&(U^k))+R[7]+1735328473&4294967295,O=U+(F<<14&4294967295|F>>>18),F=D+(U^k&(O^U))+R[12]+2368359562&4294967295,D=O+(F<<20&4294967295|F>>>12),F=k+(D^O^U)+R[5]+4294588738&4294967295,k=D+(F<<4&4294967295|F>>>28),F=U+(k^D^O)+R[8]+2272392833&4294967295,U=k+(F<<11&4294967295|F>>>21),F=O+(U^k^D)+R[11]+1839030562&4294967295,O=U+(F<<16&4294967295|F>>>16),F=D+(O^U^k)+R[14]+4259657740&4294967295,D=O+(F<<23&4294967295|F>>>9),F=k+(D^O^U)+R[1]+2763975236&4294967295,k=D+(F<<4&4294967295|F>>>28),F=U+(k^D^O)+R[4]+1272893353&4294967295,U=k+(F<<11&4294967295|F>>>21),F=O+(U^k^D)+R[7]+4139469664&4294967295,O=U+(F<<16&4294967295|F>>>16),F=D+(O^U^k)+R[10]+3200236656&4294967295,D=O+(F<<23&4294967295|F>>>9),F=k+(D^O^U)+R[13]+681279174&4294967295,k=D+(F<<4&4294967295|F>>>28),F=U+(k^D^O)+R[0]+3936430074&4294967295,U=k+(F<<11&4294967295|F>>>21),F=O+(U^k^D)+R[3]+3572445317&4294967295,O=U+(F<<16&4294967295|F>>>16),F=D+(O^U^k)+R[6]+76029189&4294967295,D=O+(F<<23&4294967295|F>>>9),F=k+(D^O^U)+R[9]+3654602809&4294967295,k=D+(F<<4&4294967295|F>>>28),F=U+(k^D^O)+R[12]+3873151461&4294967295,U=k+(F<<11&4294967295|F>>>21),F=O+(U^k^D)+R[15]+530742520&4294967295,O=U+(F<<16&4294967295|F>>>16),F=D+(O^U^k)+R[2]+3299628645&4294967295,D=O+(F<<23&4294967295|F>>>9),F=k+(O^(D|~U))+R[0]+4096336452&4294967295,k=D+(F<<6&4294967295|F>>>26),F=U+(D^(k|~O))+R[7]+1126891415&4294967295,U=k+(F<<10&4294967295|F>>>22),F=O+(k^(U|~D))+R[14]+2878612391&4294967295,O=U+(F<<15&4294967295|F>>>17),F=D+(U^(O|~k))+R[5]+4237533241&4294967295,D=O+(F<<21&4294967295|F>>>11),F=k+(O^(D|~U))+R[12]+1700485571&4294967295,k=D+(F<<6&4294967295|F>>>26),F=U+(D^(k|~O))+R[3]+2399980690&4294967295,U=k+(F<<10&4294967295|F>>>22),F=O+(k^(U|~D))+R[10]+4293915773&4294967295,O=U+(F<<15&4294967295|F>>>17),F=D+(U^(O|~k))+R[1]+2240044497&4294967295,D=O+(F<<21&4294967295|F>>>11),F=k+(O^(D|~U))+R[8]+1873313359&4294967295,k=D+(F<<6&4294967295|F>>>26),F=U+(D^(k|~O))+R[15]+4264355552&4294967295,U=k+(F<<10&4294967295|F>>>22),F=O+(k^(U|~D))+R[6]+2734768916&4294967295,O=U+(F<<15&4294967295|F>>>17),F=D+(U^(O|~k))+R[13]+1309151649&4294967295,D=O+(F<<21&4294967295|F>>>11),F=k+(O^(D|~U))+R[4]+4149444226&4294967295,k=D+(F<<6&4294967295|F>>>26),F=U+(D^(k|~O))+R[11]+3174756917&4294967295,U=k+(F<<10&4294967295|F>>>22),F=O+(k^(U|~D))+R[2]+718787259&4294967295,O=U+(F<<15&4294967295|F>>>17),F=D+(U^(O|~k))+R[9]+3951481745&4294967295,P.g[0]=P.g[0]+k&4294967295,P.g[1]=P.g[1]+(O+(F<<21&4294967295|F>>>11))&4294967295,P.g[2]=P.g[2]+O&4294967295,P.g[3]=P.g[3]+U&4294967295}r.prototype.u=function(P,k){k===void 0&&(k=P.length);for(var D=k-this.blockSize,R=this.B,O=this.h,U=0;U<k;){if(O==0)for(;U<=D;)s(this,P,U),U+=this.blockSize;if(typeof P=="string"){for(;U<k;)if(R[O++]=P.charCodeAt(U++),O==this.blockSize){s(this,R),O=0;break}}else for(;U<k;)if(R[O++]=P[U++],O==this.blockSize){s(this,R),O=0;break}}this.h=O,this.o+=k},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var k=1;k<P.length-8;++k)P[k]=0;var D=8*this.o;for(k=P.length-8;k<P.length;++k)P[k]=D&255,D/=256;for(this.u(P),P=Array(16),k=D=0;4>k;++k)for(var R=0;32>R;R+=8)P[D++]=this.g[k]>>>R&255;return P};function a(P,k){var D=u;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=k(P)}function c(P,k){this.h=k;for(var D=[],R=!0,O=P.length-1;0<=O;O--){var U=P[O]|0;R&&U==k||(D[O]=U,R=!1)}this.g=D}var u={};function h(P){return-128<=P&&128>P?a(P,function(k){return new c([k|0],0>k?-1:0)}):new c([P|0],0>P?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return y;if(0>P)return E(f(-P));for(var k=[],D=1,R=0;P>=D;R++)k[R]=P/D|0,D*=4294967296;return new c(k,0)}function m(P,k){if(P.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(P.charAt(0)=="-")return E(m(P.substring(1),k));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(k,8)),R=y,O=0;O<P.length;O+=8){var U=Math.min(8,P.length-O),F=parseInt(P.substring(O,O+U),k);8>U?(U=f(Math.pow(k,U)),R=R.j(U).add(f(F))):(R=R.j(D),R=R.add(f(F)))}return R}var y=h(0),v=h(1),w=h(16777216);t=c.prototype,t.m=function(){if(x(this))return-E(this).m();for(var P=0,k=1,D=0;D<this.g.length;D++){var R=this.i(D);P+=(0<=R?R:4294967296+R)*k,k*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(b(this))return"0";if(x(this))return"-"+E(this).toString(P);for(var k=f(Math.pow(P,6)),D=this,R="";;){var O=L(D,k).g;D=A(D,O.j(k));var U=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=O,b(D))return U+R;for(;6>U.length;)U="0"+U;R=U+R}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function b(P){if(P.h!=0)return!1;for(var k=0;k<P.g.length;k++)if(P.g[k]!=0)return!1;return!0}function x(P){return P.h==-1}t.l=function(P){return P=A(this,P),x(P)?-1:b(P)?0:1};function E(P){for(var k=P.g.length,D=[],R=0;R<k;R++)D[R]=~P.g[R];return new c(D,~P.h).add(v)}t.abs=function(){return x(this)?E(this):this},t.add=function(P){for(var k=Math.max(this.g.length,P.g.length),D=[],R=0,O=0;O<=k;O++){var U=R+(this.i(O)&65535)+(P.i(O)&65535),F=(U>>>16)+(this.i(O)>>>16)+(P.i(O)>>>16);R=F>>>16,U&=65535,F&=65535,D[O]=F<<16|U}return new c(D,D[D.length-1]&-2147483648?-1:0)};function A(P,k){return P.add(E(k))}t.j=function(P){if(b(this)||b(P))return y;if(x(this))return x(P)?E(this).j(E(P)):E(E(this).j(P));if(x(P))return E(this.j(E(P)));if(0>this.l(w)&&0>P.l(w))return f(this.m()*P.m());for(var k=this.g.length+P.g.length,D=[],R=0;R<2*k;R++)D[R]=0;for(R=0;R<this.g.length;R++)for(var O=0;O<P.g.length;O++){var U=this.i(R)>>>16,F=this.i(R)&65535,H=P.i(O)>>>16,Q=P.i(O)&65535;D[2*R+2*O]+=F*Q,j(D,2*R+2*O),D[2*R+2*O+1]+=U*Q,j(D,2*R+2*O+1),D[2*R+2*O+1]+=F*H,j(D,2*R+2*O+1),D[2*R+2*O+2]+=U*H,j(D,2*R+2*O+2)}for(R=0;R<k;R++)D[R]=D[2*R+1]<<16|D[2*R];for(R=k;R<2*k;R++)D[R]=0;return new c(D,0)};function j(P,k){for(;(P[k]&65535)!=P[k];)P[k+1]+=P[k]>>>16,P[k]&=65535,k++}function C(P,k){this.g=P,this.h=k}function L(P,k){if(b(k))throw Error("division by zero");if(b(P))return new C(y,y);if(x(P))return k=L(E(P),k),new C(E(k.g),E(k.h));if(x(k))return k=L(P,E(k)),new C(E(k.g),k.h);if(30<P.g.length){if(x(P)||x(k))throw Error("slowDivide_ only works with positive integers.");for(var D=v,R=k;0>=R.l(P);)D=V(D),R=V(R);var O=z(D,1),U=z(R,1);for(R=z(R,2),D=z(D,2);!b(R);){var F=U.add(R);0>=F.l(P)&&(O=O.add(D),U=F),R=z(R,1),D=z(D,1)}return k=A(P,O.j(k)),new C(O,k)}for(O=y;0<=P.l(k);){for(D=Math.max(1,Math.floor(P.m()/k.m())),R=Math.ceil(Math.log(D)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),U=f(D),F=U.j(k);x(F)||0<F.l(P);)D-=R,U=f(D),F=U.j(k);b(U)&&(U=v),O=O.add(U),P=A(P,F)}return new C(O,P)}t.A=function(P){return L(this,P).h},t.and=function(P){for(var k=Math.max(this.g.length,P.g.length),D=[],R=0;R<k;R++)D[R]=this.i(R)&P.i(R);return new c(D,this.h&P.h)},t.or=function(P){for(var k=Math.max(this.g.length,P.g.length),D=[],R=0;R<k;R++)D[R]=this.i(R)|P.i(R);return new c(D,this.h|P.h)},t.xor=function(P){for(var k=Math.max(this.g.length,P.g.length),D=[],R=0;R<k;R++)D[R]=this.i(R)^P.i(R);return new c(D,this.h^P.h)};function V(P){for(var k=P.g.length+1,D=[],R=0;R<k;R++)D[R]=P.i(R)<<1|P.i(R-1)>>>31;return new c(D,P.h)}function z(P,k){var D=k>>5;k%=32;for(var R=P.g.length-D,O=[],U=0;U<R;U++)O[U]=0<k?P.i(U+D)>>>k|P.i(U+D+1)<<32-k:P.i(U+D);return new c(O,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qC=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=m,Xo=c}).apply(typeof iN<"u"?iN:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WC,Zu,HC,Jf,Qv,KC,GC,QC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,S,I){return p==Array.prototype||p==Object.prototype||(p[S]=I.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var S=0;S<p.length;++S){var I=p[S];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(p,S){if(S)e:{var I=r;p=p.split(".");for(var $=0;$<p.length-1;$++){var re=p[$];if(!(re in I))break e;I=I[re]}p=p[p.length-1],$=I[p],S=S($),S!=$&&S!=null&&e(I,p,{configurable:!0,writable:!0,value:S})}}function a(p,S){p instanceof String&&(p+="");var I=0,$=!1,re={next:function(){if(!$&&I<p.length){var le=I++;return{value:S(le,p[le]),done:!1}}return $=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}s("Array.prototype.values",function(p){return p||function(){return a(this,function(S,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function h(p){var S=typeof p;return S=S!="object"?S:p?Array.isArray(p)?"array":S:"null",S=="array"||S=="object"&&typeof p.length=="number"}function f(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function m(p,S,I){return p.call.apply(p.bind,arguments)}function y(p,S,I){if(!p)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(re,$),p.apply(S,re)}}return function(){return p.apply(S,arguments)}}function v(p,S,I){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,v.apply(null,arguments)}function w(p,S){var I=Array.prototype.slice.call(arguments,1);return function(){var $=I.slice();return $.push.apply($,arguments),p.apply(this,$)}}function b(p,S){function I(){}I.prototype=S.prototype,p.aa=S.prototype,p.prototype=new I,p.prototype.constructor=p,p.Qb=function($,re,le){for(var Ee=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)Ee[Dt-2]=arguments[Dt];return S.prototype[re].apply($,Ee)}}function x(p){const S=p.length;if(0<S){const I=Array(S);for(let $=0;$<S;$++)I[$]=p[$];return I}return[]}function E(p,S){for(let I=1;I<arguments.length;I++){const $=arguments[I];if(h($)){const re=p.length||0,le=$.length||0;p.length=re+le;for(let Ee=0;Ee<le;Ee++)p[re+Ee]=$[Ee]}else p.push($)}}class A{constructor(S,I){this.i=S,this.j=I,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function j(p){return/^[\s\xa0]*$/.test(p)}function C(){var p=u.navigator;return p&&(p=p.userAgent)?p:""}function L(p){return L[" "](p),p}L[" "]=function(){};var V=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function z(p,S,I){for(const $ in p)S.call(I,p[$],$,p)}function P(p,S){for(const I in p)S.call(void 0,p[I],I,p)}function k(p){const S={};for(const I in p)S[I]=p[I];return S}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(p,S){let I,$;for(let re=1;re<arguments.length;re++){$=arguments[re];for(I in $)p[I]=$[I];for(let le=0;le<D.length;le++)I=D[le],Object.prototype.hasOwnProperty.call($,I)&&(p[I]=$[I])}}function O(p){var S=1;p=p.split(":");const I=[];for(;0<S&&p.length;)I.push(p.shift()),S--;return p.length&&I.push(p.join(":")),I}function U(p){u.setTimeout(()=>{throw p},0)}function F(){var p=Y;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class H{constructor(){this.h=this.g=null}add(S,I){const $=Q.get();$.set(S,I),this.h?this.h.next=$:this.g=$,this.h=$}}var Q=new A(()=>new K,p=>p.reset());class K{constructor(){this.next=this.g=this.h=null}set(S,I){this.h=S,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,W=!1,Y=new H,ne=()=>{const p=u.Promise.resolve(void 0);Z=()=>{p.then(B)}};var B=()=>{for(var p;p=F();){try{p.h.call(p.g)}catch(I){U(I)}var S=Q;S.j(p),100>S.h&&(S.h++,p.next=S.g,S.g=p)}W=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Se=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const I=()=>{};u.addEventListener("test",I,S),u.removeEventListener("test",I,S)}catch{}return p}();function Le(p,S){if(ue.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var I=this.type=p.type,$=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget){if(V){e:{try{L(S.nodeName);var re=!0;break e}catch{}re=!1}re||(S=null)}}else I=="mouseover"?S=p.fromElement:I=="mouseout"&&(S=p.toElement);this.relatedTarget=S,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Te[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Le.aa.h.call(this)}}b(Le,ue);var Te={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function He(p,S,I,$,re){this.listener=p,this.proxy=null,this.src=S,this.type=I,this.capture=!!$,this.ha=re,this.key=++Ce,this.da=this.fa=!1}function Ve(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function st(p){this.src=p,this.g={},this.h=0}st.prototype.add=function(p,S,I,$,re){var le=p.toString();p=this.g[le],p||(p=this.g[le]=[],this.h++);var Ee=ve(p,S,$,re);return-1<Ee?(S=p[Ee],I||(S.fa=!1)):(S=new He(S,this.src,le,!!$,re),S.fa=I,p.push(S)),S};function it(p,S){var I=S.type;if(I in p.g){var $=p.g[I],re=Array.prototype.indexOf.call($,S,void 0),le;(le=0<=re)&&Array.prototype.splice.call($,re,1),le&&(Ve(S),p.g[I].length==0&&(delete p.g[I],p.h--))}}function ve(p,S,I,$){for(var re=0;re<p.length;++re){var le=p[re];if(!le.da&&le.listener==S&&le.capture==!!I&&le.ha==$)return re}return-1}var Ie="closure_lm_"+(1e6*Math.random()|0),mt={};function an(p,S,I,$,re){if(Array.isArray(S)){for(var le=0;le<S.length;le++)an(p,S[le],I,$,re);return null}return I=Fs(I),p&&p[we]?p.K(S,I,f($)?!!$.capture:!1,re):zn(p,S,I,!1,$,re)}function zn(p,S,I,$,re,le){if(!S)throw Error("Invalid event type");var Ee=f(re)?!!re.capture:!!re,Dt=dn(p);if(Dt||(p[Ie]=Dt=new st(p)),I=Dt.add(S,I,$,Ee,le),I.proxy)return I;if($=jr(),I.proxy=$,$.src=p,$.listener=I,p.addEventListener)Se||(re=Ee),re===void 0&&(re=!1),p.addEventListener(S.toString(),$,re);else if(p.attachEvent)p.attachEvent(Ir(S.toString()),$);else if(p.addListener&&p.removeListener)p.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return I}function jr(){function p(I){return S.call(p.src,p.listener,I)}const S=is;return p}function Lt(p,S,I,$,re){if(Array.isArray(S))for(var le=0;le<S.length;le++)Lt(p,S[le],I,$,re);else $=f($)?!!$.capture:!!$,I=Fs(I),p&&p[we]?(p=p.i,S=String(S).toString(),S in p.g&&(le=p.g[S],I=ve(le,I,$,re),-1<I&&(Ve(le[I]),Array.prototype.splice.call(le,I,1),le.length==0&&(delete p.g[S],p.h--)))):p&&(p=dn(p))&&(S=p.g[S.toString()],p=-1,S&&(p=ve(S,I,$,re)),(I=-1<p?S[p]:null)&&mn(I))}function mn(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[we])it(S.i,p);else{var I=p.type,$=p.proxy;S.removeEventListener?S.removeEventListener(I,$,p.capture):S.detachEvent?S.detachEvent(Ir(I),$):S.addListener&&S.removeListener&&S.removeListener($),(I=dn(S))?(it(I,p),I.h==0&&(I.src=null,S[Ie]=null)):Ve(p)}}}function Ir(p){return p in mt?mt[p]:mt[p]="on"+p}function is(p,S){if(p.da)p=!0;else{S=new Le(S,this);var I=p.listener,$=p.ha||p.src;p.fa&&mn(p),p=I.call($,S)}return p}function dn(p){return p=p[Ie],p instanceof st?p:null}var Ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fs(p){return typeof p=="function"?p:(p[Ms]||(p[Ms]=function(S){return p.handleEvent(S)}),p[Ms])}function zt(){ee.call(this),this.i=new st(this),this.M=this,this.F=null}b(zt,ee),zt.prototype[we]=!0,zt.prototype.removeEventListener=function(p,S,I,$){Lt(this,p,S,I,$)};function kt(p,S){var I,$=p.F;if($)for(I=[];$;$=$.F)I.push($);if(p=p.M,$=S.type||S,typeof S=="string")S=new ue(S,p);else if(S instanceof ue)S.target=S.target||p;else{var re=S;S=new ue($,p),R(S,re)}if(re=!0,I)for(var le=I.length-1;0<=le;le--){var Ee=S.g=I[le];re=Bn(Ee,$,!0,S)&&re}if(Ee=S.g=p,re=Bn(Ee,$,!0,S)&&re,re=Bn(Ee,$,!1,S)&&re,I)for(le=0;le<I.length;le++)Ee=S.g=I[le],re=Bn(Ee,$,!1,S)&&re}zt.prototype.N=function(){if(zt.aa.N.call(this),this.i){var p=this.i,S;for(S in p.g){for(var I=p.g[S],$=0;$<I.length;$++)Ve(I[$]);delete p.g[S],p.h--}}this.F=null},zt.prototype.K=function(p,S,I,$){return this.i.add(String(p),S,!1,I,$)},zt.prototype.L=function(p,S,I,$){return this.i.add(String(p),S,!0,I,$)};function Bn(p,S,I,$){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();for(var re=!0,le=0;le<S.length;++le){var Ee=S[le];if(Ee&&!Ee.da&&Ee.capture==I){var Dt=Ee.listener,Nn=Ee.ha||Ee.src;Ee.fa&&it(p.i,Ee),re=Dt.call(Nn,$)!==!1&&re}}return re&&!$.defaultPrevented}function bn(p,S,I){if(typeof p=="function")I&&(p=v(p,I));else if(p&&typeof p.handleEvent=="function")p=v(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:u.setTimeout(p,S||0)}function Ar(p){p.g=bn(()=>{p.g=null,p.i&&(p.i=!1,Ar(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class os extends ee{constructor(S,I){super(),this.m=S,this.l=I,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Ar(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zr(p){ee.call(this),this.h=p,this.g={}}b(zr,ee);var Vs=[];function gi(p){z(p.g,function(S,I){this.g.hasOwnProperty(I)&&mn(S)},p),p.g={}}zr.prototype.N=function(){zr.aa.N.call(this),gi(this)},zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var as=u.JSON.stringify,qn=u.JSON.parse,Us=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Ze(){}Ze.prototype.h=null;function Et(p){return p.h||(p.h=p.i())}function gt(){}var Bt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gt(){ue.call(this,"d")}b(Gt,ue);function ie(){ue.call(this,"c")}b(ie,ue);var ye={},Ue=null;function Tt(){return Ue=Ue||new zt}ye.La="serverreachability";function lt(p){ue.call(this,ye.La,p)}b(lt,ue);function yt(p){const S=Tt();kt(S,new lt(S))}ye.STAT_EVENT="statevent";function Re(p,S){ue.call(this,ye.STAT_EVENT,p),this.stat=S}b(Re,ue);function Qt(p){const S=Tt();kt(S,new Re(S,p))}ye.Ma="timingevent";function yi(p,S){ue.call(this,ye.Ma,p),this.size=S}b(yi,ue);function ur(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},S)}function $s(){this.g=!0}$s.prototype.xa=function(){this.g=!1};function zs(p,S,I,$,re,le){p.info(function(){if(p.g)if(le)for(var Ee="",Dt=le.split("&"),Nn=0;Nn<Dt.length;Nn++){var bt=Dt[Nn].split("=");if(1<bt.length){var In=bt[0];bt=bt[1];var gn=In.split("_");Ee=2<=gn.length&&gn[1]=="type"?Ee+(In+"="+bt+"&"):Ee+(In+"=redacted&")}}else Ee=null;else Ee=le;return"XMLHTTP REQ ("+$+") [attempt "+re+"]: "+S+`
`+I+`
`+Ee})}function vi(p,S,I,$,re,le,Ee){p.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+re+"]: "+S+`
`+I+`
`+le+" "+Ee})}function dr(p,S,I,$){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+bl(p,I)+($?" "+$:"")})}function to(p,S){p.info(function(){return"TIMEOUT: "+S})}$s.prototype.info=function(){};function bl(p,S){if(!p.g)return S;if(!S)return null;try{var I=JSON.parse(S);if(I){for(p=0;p<I.length;p++)if(Array.isArray(I[p])){var $=I[p];if(!(2>$.length)){var re=$[1];if(Array.isArray(re)&&!(1>re.length)){var le=re[0];if(le!="noop"&&le!="stop"&&le!="close")for(var Ee=1;Ee<re.length;Ee++)re[Ee]=""}}}}return as(I)}catch{return S}}var qt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ls;function ma(){}b(ma,Ze),ma.prototype.g=function(){return new XMLHttpRequest},ma.prototype.i=function(){return{}},ls=new ma;function cs(p,S,I,$){this.j=p,this.i=S,this.l=I,this.R=$||1,this.U=new zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lh}function lh(){this.i=null,this.g="",this.h=!1}var fu={},Sl={};function Tl(p,S,I){p.L=1,p.v=oo(kr(S)),p.m=I,p.P=!0,pu(p,null)}function pu(p,S){p.F=Date.now(),Vt(p),p.A=kr(p.v);var I=p.A,$=p.R;Array.isArray($)||($=[String($)]),lo(I.i,"t",$),p.C=0,I=p.j.J,p.h=new lh,p.g=Th(p.j,I?S:null,!p.m),0<p.O&&(p.M=new os(v(p.Y,p,p.g),p.O)),S=p.U,I=p.g,$=p.ca;var re="readystatechange";Array.isArray(re)||(re&&(Vs[0]=re.toString()),re=Vs);for(var le=0;le<re.length;le++){var Ee=an(I,re[le],$||S.handleEvent,!1,S.h||S);if(!Ee)break;S.g[Ee.key]=Ee}S=p.H?k(p.H):{},p.m?(p.u||(p.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,S)):(p.u="GET",p.g.ea(p.A,p.u,null,S)),yt(),zs(p.i,p.u,p.A,p.l,p.R,p.m)}cs.prototype.ca=function(p){p=p.target;const S=this.M;S&&fr(p)==3?S.j():this.Y(p)},cs.prototype.Y=function(p){try{if(p==this.g)e:{const gn=fr(this.g);var S=this.g.Ba();const Wr=this.g.Z();if(!(3>gn)&&(gn!=3||this.g&&(this.h.h||this.g.oa()||wu(this.g)))){this.J||gn!=4||S==7||(S==8||0>=Wr?yt(3):yt(2)),ga(this);var I=this.g.Z();this.X=I;t:if(ch(this)){var $=wu(this.g);p="";var re=$.length,le=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Br(this),no(this);var Ee="";break t}this.h.i=new u.TextDecoder}for(S=0;S<re;S++)this.h.h=!0,p+=this.h.i.decode($[S],{stream:!(le&&S==re-1)});$.length=0,this.h.g+=p,this.C=0,Ee=this.h.g}else Ee=this.g.oa();if(this.o=I==200,vi(this.i,this.u,this.A,this.l,this.R,gn,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Dt,Nn=this.g;if((Dt=Nn.g?Nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Dt)){var bt=Dt;break t}}bt=null}if(I=bt)dr(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mu(this,I);else{this.o=!1,this.s=3,Qt(12),Br(this),no(this);break e}}if(this.P){I=!0;let Or;for(;!this.J&&this.C<Ee.length;)if(Or=qm(this,Ee),Or==Sl){gn==4&&(this.s=4,Qt(14),I=!1),dr(this.i,this.l,null,"[Incomplete Response]");break}else if(Or==fu){this.s=4,Qt(15),dr(this.i,this.l,Ee,"[Invalid Chunk]"),I=!1;break}else dr(this.i,this.l,Or,null),mu(this,Or);if(ch(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gn!=4||Ee.length!=0||this.h.h||(this.s=1,Qt(16),I=!1),this.o=this.o&&I,!I)dr(this.i,this.l,Ee,"[Invalid Chunked Response]"),Br(this),no(this);else if(0<Ee.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+Ee.length),Eu(In),In.M=!0,Qt(11))}}else dr(this.i,this.l,Ee,null),mu(this,Ee);gn==4&&Br(this),this.o&&!this.J&&(gn==4?Ml(this.j,this):(this.o=!1,Vt(this)))}else kl(this.g),I==400&&0<Ee.indexOf("Unknown SID")?(this.s=3,Qt(12)):(this.s=0,Qt(13)),Br(this),no(this)}}}catch{}finally{}};function ch(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function qm(p,S){var I=p.C,$=S.indexOf(`
`,I);return $==-1?Sl:(I=Number(S.substring(I,$)),isNaN(I)?fu:($+=1,$+I>S.length?Sl:(S=S.slice($,$+I),p.C=$+I,S)))}cs.prototype.cancel=function(){this.J=!0,Br(this)};function Vt(p){p.S=Date.now()+p.I,uh(p,p.I)}function uh(p,S){if(p.B!=null)throw Error("WatchDog timer not null");p.B=ur(v(p.ba,p),S)}function ga(p){p.B&&(u.clearTimeout(p.B),p.B=null)}cs.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(to(this.i,this.A),this.L!=2&&(yt(),Qt(17)),Br(this),this.s=2,no(this)):uh(this,this.S-p)};function no(p){p.j.G==0||p.J||Ml(p.j,p)}function Br(p){ga(p);var S=p.M;S&&typeof S.ma=="function"&&S.ma(),p.M=null,gi(p.U),p.g&&(S=p.g,p.g=null,S.abort(),S.ma())}function mu(p,S){try{var I=p.j;if(I.G!=0&&(I.g==p||tr(I.h,p))){if(!p.K&&tr(I.h,p)&&I.G==3){try{var $=I.Da.g.parse(S)}catch{$=null}if(Array.isArray($)&&$.length==3){var re=$;if(re[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<p.F)Ll(I),ps(I);else break e;Dl(I),Qt(18)}}else I.za=re[1],0<I.za-I.T&&37500>re[2]&&I.F&&I.v==0&&!I.C&&(I.C=ur(v(I.Za,I),6e3));if(1>=hh(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else bi(I,11)}else if((p.K||I.g==p)&&Ll(I),!j(S))for(re=I.Da.g.parse(S),S=0;S<re.length;S++){let bt=re[S];if(I.T=bt[0],bt=bt[1],I.G==2)if(bt[0]=="c"){I.K=bt[1],I.ia=bt[2];const In=bt[3];In!=null&&(I.la=In,I.j.info("VER="+I.la));const gn=bt[4];gn!=null&&(I.Aa=gn,I.j.info("SVER="+I.Aa));const Wr=bt[5];Wr!=null&&typeof Wr=="number"&&0<Wr&&($=1.5*Wr,I.L=$,I.j.info("backChannelRequestTimeoutMs_="+$)),$=I;const Or=p.g;if(Or){const ba=Or.g?Or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var le=$.h;le.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(le.j=le.l,le.g=new Set,le.h&&(gu(le,le.h),le.h=null))}if($.D){const Vl=Or.g?Or.g.getResponseHeader("X-HTTP-Session-Id"):null;Vl&&($.ya=Vl,Mt($.I,$.D,Vl))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-p.F,I.j.info("Handshake RTT: "+I.R+"ms")),$=I;var Ee=p;if($.qa=Sh($,$.J?$.ia:null,$.W),Ee.K){fh($.h,Ee);var Dt=Ee,Nn=$.L;Nn&&(Dt.I=Nn),Dt.B&&(ga(Dt),Vt(Dt)),$.g=Ee}else Ea($);0<I.i.length&&Hs(I)}else bt[0]!="stop"&&bt[0]!="close"||bi(I,7);else I.G==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?bi(I,7):Dn(I):bt[0]!="noop"&&I.l&&I.l.ta(bt),I.v=0)}}yt(4)}catch{}}var dh=class{constructor(p,S){this.g=p,this.map=S}};function ya(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pr(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function hh(p){return p.h?1:p.g?p.g.size:0}function tr(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function gu(p,S){p.g?p.g.add(S):p.h=S}function fh(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}ya.prototype.cancel=function(){if(this.i=ph(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function ph(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const I of p.g.values())S=S.concat(I.D);return S}return x(p.i)}function Cl(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(h(p)){for(var S=[],I=p.length,$=0;$<I;$++)S.push(p[$]);return S}S=[],I=0;for($ in p)S[I++]=p[$];return S}function jl(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(h(p)||typeof p=="string"){var S=[];p=p.length;for(var I=0;I<p;I++)S.push(I);return S}S=[],I=0;for(const $ in p)S[I++]=$;return S}}}function ro(p,S){if(p.forEach&&typeof p.forEach=="function")p.forEach(S,void 0);else if(h(p)||typeof p=="string")Array.prototype.forEach.call(p,S,void 0);else for(var I=jl(p),$=Cl(p),re=$.length,le=0;le<re;le++)S.call(void 0,$[le],I&&I[le],p)}var va=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wm(p,S){if(p){p=p.split("&");for(var I=0;I<p.length;I++){var $=p[I].indexOf("="),re=null;if(0<=$){var le=p[I].substring(0,$);re=p[I].substring($+1)}else le=p[I];S(le,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function xi(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof xi){this.h=p.h,xa(this,p.j),this.o=p.o,this.g=p.g,so(this,p.s),this.l=p.l;var S=p.i,I=new Bs;I.i=S.i,S.g&&(I.g=new Map(S.g),I.h=S.h),io(this,I),this.m=p.m}else p&&(S=String(p).match(va))?(this.h=!1,xa(this,S[1]||"",!0),this.o=vt(S[2]||""),this.g=vt(S[3]||"",!0),so(this,S[4]),this.l=vt(S[5]||"",!0),io(this,S[6]||"",!0),this.m=vt(S[7]||"")):(this.h=!1,this.i=new Bs(null,this.h))}xi.prototype.toString=function(){var p=[],S=this.j;S&&p.push(ao(S,Il,!0),":");var I=this.g;return(I||S=="file")&&(p.push("//"),(S=this.o)&&p.push(ao(S,Il,!0),"@"),p.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&p.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&p.push("/"),p.push(ao(I,I.charAt(0)=="/"?yh:gh,!0))),(I=this.i.toString())&&p.push("?",I),(I=this.m)&&p.push("#",ao(I,yu)),p.join("")};function kr(p){return new xi(p)}function xa(p,S,I){p.j=I?vt(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function so(p,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);p.s=S}else p.s=null}function io(p,S,I){S instanceof Bs?(p.i=S,qs(p.i,p.h)):(I||(S=ao(S,vh)),p.i=new Bs(S,p.h))}function Mt(p,S,I){p.i.set(S,I)}function oo(p){return Mt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function vt(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ao(p,S,I){return typeof p=="string"?(p=encodeURI(p).replace(S,mh),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function mh(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Il=/[#\/\?@]/g,gh=/[#\?:]/g,yh=/[#\?]/g,vh=/[#\?@]/g,yu=/#/g;function Bs(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function On(p){p.g||(p.g=new Map,p.h=0,p.i&&Wm(p.i,function(S,I){p.add(decodeURIComponent(S.replace(/\+/g," ")),I)}))}t=Bs.prototype,t.add=function(p,S){On(this),this.i=null,p=qr(this,p);var I=this.g.get(p);return I||this.g.set(p,I=[]),I.push(S),this.h+=1,this};function us(p,S){On(p),S=qr(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function ds(p,S){return On(p),S=qr(p,S),p.g.has(S)}t.forEach=function(p,S){On(this),this.g.forEach(function(I,$){I.forEach(function(re){p.call(S,re,$,this)},this)},this)},t.na=function(){On(this);const p=Array.from(this.g.values()),S=Array.from(this.g.keys()),I=[];for(let $=0;$<S.length;$++){const re=p[$];for(let le=0;le<re.length;le++)I.push(S[$])}return I},t.V=function(p){On(this);let S=[];if(typeof p=="string")ds(this,p)&&(S=S.concat(this.g.get(qr(this,p))));else{p=Array.from(this.g.values());for(let I=0;I<p.length;I++)S=S.concat(p[I])}return S},t.set=function(p,S){return On(this),this.i=null,p=qr(this,p),ds(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},t.get=function(p,S){return p?(p=this.V(p),0<p.length?String(p[0]):S):S};function lo(p,S,I){us(p,S),0<I.length&&(p.i=null,p.g.set(qr(p,S),x(I)),p.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(var I=0;I<S.length;I++){var $=S[I];const le=encodeURIComponent(String($)),Ee=this.V($);for($=0;$<Ee.length;$++){var re=le;Ee[$]!==""&&(re+="="+encodeURIComponent(String(Ee[$]))),p.push(re)}}return this.i=p.join("&")};function qr(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function qs(p,S){S&&!p.j&&(On(p),p.i=null,p.g.forEach(function(I,$){var re=$.toLowerCase();$!=re&&(us(this,$),lo(this,re,I))},p)),p.j=S}function Hm(p,S){const I=new $s;if(u.Image){const $=new Image;$.onload=w(hr,I,"TestLoadImage: loaded",!0,S,$),$.onerror=w(hr,I,"TestLoadImage: error",!1,S,$),$.onabort=w(hr,I,"TestLoadImage: abort",!1,S,$),$.ontimeout=w(hr,I,"TestLoadImage: timeout",!1,S,$),u.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=p}else S(!1)}function xh(p,S){const I=new $s,$=new AbortController,re=setTimeout(()=>{$.abort(),hr(I,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:$.signal}).then(le=>{clearTimeout(re),le.ok?hr(I,"TestPingServer: ok",!0,S):hr(I,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(re),hr(I,"TestPingServer: error",!1,S)})}function hr(p,S,I,$,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),$(I)}catch{}}function Km(){this.g=new Us}function wh(p,S,I){const $=I||"";try{ro(p,function(re,le){let Ee=re;f(re)&&(Ee=as(re)),S.push($+le+"="+encodeURIComponent(Ee))})}catch(re){throw S.push($+"type="+encodeURIComponent("_badmap")),re}}function wi(p){this.l=p.Ub||null,this.j=p.eb||!1}b(wi,Ze),wi.prototype.g=function(){return new wa(this.l,this.j)},wi.prototype.i=function(p){return function(){return p}}({});function wa(p,S){zt.call(this),this.D=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(wa,zt),t=wa.prototype,t.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=S,this.readyState=1,fs(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(S.body=p),(this.D||u).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hs(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,fs(this)),this.g&&(this.readyState=3,fs(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_h(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function _h(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?hs(this):fs(this),this.readyState==3&&_h(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,hs(this))},t.Qa=function(p){this.g&&(this.response=p,hs(this))},t.ga=function(){this.g&&hs(this)};function hs(p){p.readyState=4,p.l=null,p.j=null,p.v=null,fs(p)}t.setRequestHeader=function(p,S){this.u.append(p,S)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var I=S.next();!I.done;)I=I.value,p.push(I[0]+": "+I[1]),I=S.next();return p.join(`\r
`)};function fs(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function _i(p){let S="";return z(p,function(I,$){S+=$,S+=":",S+=I,S+=`\r
`}),S}function co(p,S,I){e:{for($ in I){var $=!1;break e}$=!0}$||(I=_i(I),typeof p=="string"?I!=null&&encodeURIComponent(String(I)):Mt(p,S,I))}function Yt(p){zt.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Yt,zt);var Gm=/^https?$/i,vu=["POST","PUT"];t=Yt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,S,I,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ls.g(),this.v=this.o?Et(this.o):Et(ls),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(le){_a(this,le);return}if(p=I||"",I=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var re in $)I.set(re,$[re]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const le of $.keys())I.set(le,$.get(le));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(I.keys()).find(le=>le.toLowerCase()=="content-type"),re=u.FormData&&p instanceof u.FormData,!(0<=Array.prototype.indexOf.call(vu,S,void 0))||$||re||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,Ee]of I)this.g.setRequestHeader(le,Ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pl(this),this.u=!0,this.g.send(p),this.u=!1}catch(le){_a(this,le)}};function _a(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.m=5,Al(p),Rr(p)}function Al(p){p.A||(p.A=!0,kt(p,"complete"),kt(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,kt(this,"complete"),kt(this,"abort"),Rr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rr(this,!0)),Yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xu(this):this.bb())},t.bb=function(){xu(this)};function xu(p){if(p.h&&typeof c<"u"&&(!p.v[1]||fr(p)!=4||p.Z()!=2)){if(p.u&&fr(p)==4)bn(p.Ea,0,p);else if(kt(p,"readystatechange"),fr(p)==4){p.h=!1;try{const Ee=p.Z();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var I;if(!(I=S)){var $;if($=Ee===0){var re=String(p.D).match(va)[1]||null;!re&&u.self&&u.self.location&&(re=u.self.location.protocol.slice(0,-1)),$=!Gm.test(re?re.toLowerCase():"")}I=$}if(I)kt(p,"complete"),kt(p,"success");else{p.m=6;try{var le=2<fr(p)?p.g.statusText:""}catch{le=""}p.l=le+" ["+p.Z()+"]",Al(p)}}finally{Rr(p)}}}}function Rr(p,S){if(p.g){Pl(p);const I=p.g,$=p.v[0]?()=>{}:null;p.g=null,p.v=null,S||kt(p,"ready");try{I.onreadystatechange=$}catch{}}}function Pl(p){p.I&&(u.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function fr(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),qn(S)}};function wu(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function kl(p){const S={};p=(p.g&&2<=fr(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<p.length;$++){if(j(p[$]))continue;var I=O(p[$]);const re=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const le=S[re]||[];S[re]=le,le.push(I)}P(S,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(p,S,I){return I&&I.internalChannelParams&&I.internalChannelParams[p]||S}function _u(p){this.Aa=0,this.i=[],this.j=new $s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ws("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ws("baseRetryDelayMs",5e3,p),this.cb=Ws("retryDelaySeedMs",1e4,p),this.Wa=Ws("forwardChannelMaxRetries",2,p),this.wa=Ws("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new ya(p&&p.concurrentRequestLimit),this.Da=new Km,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_u.prototype,t.la=8,t.G=1,t.connect=function(p,S,I,$){Qt(0),this.W=p,this.H=S||{},I&&$!==void 0&&(this.H.OSID=I,this.H.OAID=$),this.F=this.X,this.I=Sh(this,null,this.W),Hs(this)};function Dn(p){if(Rl(p),p.G==3){var S=p.U++,I=kr(p.I);if(Mt(I,"SID",p.K),Mt(I,"RID",S),Mt(I,"TYPE","terminate"),Ei(p,I),S=new cs(p,p.j,S),S.L=2,S.v=oo(kr(I)),I=!1,u.navigator&&u.navigator.sendBeacon)try{I=u.navigator.sendBeacon(S.v.toString(),"")}catch{}!I&&u.Image&&(new Image().src=S.v,I=!0),I||(S.g=Th(S.j,null),S.g.ea(S.v)),S.F=Date.now(),Vt(S)}Nh(p)}function ps(p){p.g&&(Eu(p),p.g.cancel(),p.g=null)}function Rl(p){ps(p),p.u&&(u.clearTimeout(p.u),p.u=null),Ll(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&u.clearTimeout(p.s),p.s=null)}function Hs(p){if(!Pr(p.h)&&!p.s){p.s=!0;var S=p.Ga;Z||ne(),W||(Z(),W=!0),Y.add(S,p),p.B=0}}function Qm(p,S){return hh(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=S.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=ur(v(p.Ga,p,S),bh(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const re=new cs(this,this.j,p);let le=this.o;if(this.S&&(le?(le=k(le),R(le,this.S)):le=this.S),this.m!==null||this.O||(re.H=le,le=null),this.P)e:{for(var S=0,I=0;I<this.i.length;I++){t:{var $=this.i[I];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(S+=$,4096<S){S=I;break e}if(S===4096||I===this.i.length-1){S=I+1;break e}}S=1e3}else S=1e3;S=uo(this,re,S),I=kr(this.I),Mt(I,"RID",p),Mt(I,"CVER",22),this.D&&Mt(I,"X-HTTP-Session-Id",this.D),Ei(this,I),le&&(this.O?S="headers="+encodeURIComponent(String(_i(le)))+"&"+S:this.m&&co(I,this.m,le)),gu(this.h,re),this.Ua&&Mt(I,"TYPE","init"),this.P?(Mt(I,"$req",S),Mt(I,"SID","null"),re.T=!0,Tl(re,I,null)):Tl(re,I,S),this.G=2}}else this.G==3&&(p?Ol(this,p):this.i.length==0||Pr(this.h)||Ol(this))};function Ol(p,S){var I;S?I=S.l:I=p.U++;const $=kr(p.I);Mt($,"SID",p.K),Mt($,"RID",I),Mt($,"AID",p.T),Ei(p,$),p.m&&p.o&&co($,p.m,p.o),I=new cs(p,p.j,I,p.B+1),p.m===null&&(I.H=p.o),S&&(p.i=S.D.concat(p.i)),S=uo(p,I,1e3),I.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),gu(p.h,I),Tl(I,$,S)}function Ei(p,S){p.H&&z(p.H,function(I,$){Mt(S,$,I)}),p.l&&ro({},function(I,$){Mt(S,$,I)})}function uo(p,S,I){I=Math.min(p.i.length,I);var $=p.l?v(p.l.Na,p.l,p):null;e:{var re=p.i;let le=-1;for(;;){const Ee=["count="+I];le==-1?0<I?(le=re[0].g,Ee.push("ofs="+le)):le=0:Ee.push("ofs="+le);let Dt=!0;for(let Nn=0;Nn<I;Nn++){let bt=re[Nn].g;const In=re[Nn].map;if(bt-=le,0>bt)le=Math.max(0,re[Nn].g-100),Dt=!1;else try{wh(In,Ee,"req"+bt+"_")}catch{$&&$(In)}}if(Dt){$=Ee.join("&");break e}}}return p=p.i.splice(0,I),S.D=p,$}function Ea(p){if(!p.g&&!p.u){p.Y=1;var S=p.Fa;Z||ne(),W||(Z(),W=!0),Y.add(S,p),p.v=0}}function Dl(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=ur(v(p.Fa,p),bh(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,Eh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=ur(v(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qt(10),ps(this),Eh(this))};function Eu(p){p.A!=null&&(u.clearTimeout(p.A),p.A=null)}function Eh(p){p.g=new cs(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var S=kr(p.qa);Mt(S,"RID","rpc"),Mt(S,"SID",p.K),Mt(S,"AID",p.T),Mt(S,"CI",p.F?"0":"1"),!p.F&&p.ja&&Mt(S,"TO",p.ja),Mt(S,"TYPE","xmlhttp"),Ei(p,S),p.m&&p.o&&co(S,p.m,p.o),p.L&&(p.g.I=p.L);var I=p.g;p=p.ia,I.L=1,I.v=oo(kr(S)),I.m=null,I.P=!0,pu(I,p)}t.Za=function(){this.C!=null&&(this.C=null,ps(this),Dl(this),Qt(19))};function Ll(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Ml(p,S){var I=null;if(p.g==S){Ll(p),Eu(p),p.g=null;var $=2}else if(tr(p.h,S))I=S.D,fh(p.h,S),$=1;else return;if(p.G!=0){if(S.o)if($==1){I=S.m?S.m.length:0,S=Date.now()-S.F;var re=p.B;$=Tt(),kt($,new yi($,I)),Hs(p)}else Ea(p);else if(re=S.s,re==3||re==0&&0<S.X||!($==1&&Qm(p,S)||$==2&&Dl(p)))switch(I&&0<I.length&&(S=p.h,S.i=S.i.concat(I)),re){case 1:bi(p,5);break;case 4:bi(p,10);break;case 3:bi(p,6);break;default:bi(p,2)}}}function bh(p,S){let I=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(I*=2),I*S}function bi(p,S){if(p.j.info("Error code "+S),S==2){var I=v(p.fb,p),$=p.Xa;const re=!$;$=new xi($||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||xa($,"https"),oo($),re?Hm($.toString(),I):xh($.toString(),I)}else Qt(2);p.G=0,p.l&&p.l.sa(S),Nh(p),Rl(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Nh(p){if(p.G=0,p.ka=[],p.l){const S=ph(p.h);(S.length!=0||p.i.length!=0)&&(E(p.ka,S),E(p.ka,p.i),p.h.i.length=0,x(p.i),p.i.length=0),p.l.ra()}}function Sh(p,S,I){var $=I instanceof xi?kr(I):new xi(I);if($.g!="")S&&($.g=S+"."+$.g),so($,$.s);else{var re=u.location;$=re.protocol,S=S?S+"."+re.hostname:re.hostname,re=+re.port;var le=new xi(null);$&&xa(le,$),S&&(le.g=S),re&&so(le,re),I&&(le.l=I),$=le}return I=p.D,S=p.ya,I&&S&&Mt($,I,S),Mt($,"VER",p.la),Ei(p,$),$}function Th(p,S,I){if(S&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Ca&&!p.pa?new Yt(new wi({eb:I})):new Yt(p.pa),S.Ha(p.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bu(){}t=bu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fl(){}Fl.prototype.g=function(p,S){return new nr(p,S)};function nr(p,S){zt.call(this),this.g=new _u(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(p?p["X-WebChannel-Client-Profile"]=S.va:p={"X-WebChannel-Client-Profile":S.va}),this.g.S=p,(p=S&&S.Sb)&&!j(p)&&(this.g.m=p),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!j(S)&&(this.g.D=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new Ks(this)}b(nr,zt),nr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nr.prototype.close=function(){Dn(this.g)},nr.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var I={};I.__data__=p,p=I}else this.u&&(I={},I.__data__=as(p),p=I);S.i.push(new dh(S.Ya++,p)),S.G==3&&Hs(S)},nr.prototype.N=function(){this.g.l=null,delete this.j,Dn(this.g),delete this.g,nr.aa.N.call(this)};function Ch(p){Gt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const I in S){p=I;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}b(Ch,Gt);function jh(){ie.call(this),this.status=1}b(jh,ie);function Ks(p){this.g=p}b(Ks,bu),Ks.prototype.ua=function(){kt(this.g,"a")},Ks.prototype.ta=function(p){kt(this.g,new Ch(p))},Ks.prototype.sa=function(p){kt(this.g,new jh)},Ks.prototype.ra=function(){kt(this.g,"b")},Fl.prototype.createWebChannel=Fl.prototype.g,nr.prototype.send=nr.prototype.o,nr.prototype.open=nr.prototype.m,nr.prototype.close=nr.prototype.close,QC=function(){return new Fl},GC=function(){return Tt()},KC=ye,Qv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qt.NO_ERROR=0,qt.TIMEOUT=8,qt.HTTP_ERROR=6,Jf=qt,Nl.COMPLETE="complete",HC=Nl,gt.EventType=Bt,Bt.OPEN="a",Bt.CLOSE="b",Bt.ERROR="c",Bt.MESSAGE="d",zt.prototype.listen=zt.prototype.K,Zu=gt,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,WC=Yt}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});const oN="@firebase/firestore",aN="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Er.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new Zx("@firebase/firestore");function dc(){return sl.logLevel}function ke(t,...e){if(sl.logLevel<=ft.DEBUG){const n=e.map(uw);sl.debug(`Firestore (${au}): ${t}`,...n)}}function Hi(t,...e){if(sl.logLevel<=ft.ERROR){const n=e.map(uw);sl.error(`Firestore (${au}): ${t}`,...n)}}function il(t,...e){if(sl.logLevel<=ft.WARN){const n=e.map(uw);sl.warn(`Firestore (${au}): ${t}`,...n)}}function uw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,YC(t,r,n)}function YC(t,e,n){let r=`FIRESTORE (${au}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Hi(r),new Error(r)}function Ot(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||YC(e,s,r)}function at(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Ds{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $U{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Er.UNAUTHENTICATED))}shutdown(){}}class zU{constructor(e){this.t=e,this.currentUser=Er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ot(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let a=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ui,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},u=h=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ui)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ot(typeof r.accessToken=="string",31837,{l:r}),new UU(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ot(e===null||typeof e=="string",2055,{h:e}),new Er(e)}}class BU{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Er.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qU{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new BU(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WU{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ot(this.o===void 0,3512);const r=a=>{a.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new lN(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ot(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new lN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=HU(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function ut(t,e){return t<e?-1:t>e?1:0}function Yv(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ut(r,s);{const a=XC(),c=KU(a.encode(cN(t,n)),a.encode(cN(e,n)));return c!==0?c:ut(r,s)}}n+=r>65535?2:1}return ut(t.length,e.length)}function cN(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function KU(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ut(t[n],e[n]);return ut(t.length,e.length)}function Wc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="__name__";class Js{constructor(e,n,r){n===void 0?n=0:n>e.length&&tt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&tt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Js.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Js?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Js.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return ut(e.length,n.length)}static compareSegments(e,n){const r=Js.isNumericId(e),s=Js.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Js.extractNumericId(e).compare(Js.extractNumericId(n)):Yv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xo.fromString(e.substring(4,e.length-2))}}class Ft extends Js{construct(e,n,r){return new Ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ft(n)}static emptyPath(){return new Ft([])}}const GU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Un extends Js{construct(e,n,r){return new Un(e,n,r)}static isValidIdentifier(e){return GU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Un.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xv}static keyField(){return new Un([Xv])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new be(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new be(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new be(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(a(),s++)}if(a(),c)throw new be(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Un(n)}static emptyPath(){return new Un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.path=e}static fromPath(e){return new We(Ft.fromString(e))}static fromName(e){return new We(Ft.fromString(e).popFirst(5))}static empty(){return new We(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t,e,n){if(!n)throw new be(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QU(t,e,n,r){if(e===!0&&r===!0)throw new be(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uN(t){if(!We.isDocumentKey(t))throw new be(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dN(t){if(We.isDocumentKey(t))throw new be(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function JC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function um(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":tt(12329,{type:typeof t})}function ar(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new be(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=um(t);throw new be(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,e){const n={typeString:t};return e&&(n.value=e),n}function Jd(t,e){if(!JC(t))throw new be(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(s&&typeof c!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&c!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new be(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=-62135596800,fN=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fN);return new ht(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<hN)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fN}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jd(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:_n("string",ht._jsonSchemaVersion),seconds:_n("number"),nanoseconds:_n("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{static fromTimestamp(e){return new ot(e)}static min(){return new ot(new ht(0,0))}static max(){return new ot(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=-1;function YU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ot.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new sa(s,We.empty(),e)}function XU(t){return new sa(t.readTime,t.key,jd)}class sa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new sa(ot.min(),We.empty(),jd)}static max(){return new sa(ot.max(),We.empty(),jd)}}function JU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=We.comparator(t.documentKey,e.documentKey),n!==0?n:ut(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==ZU)throw t;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,r)=>{n(e)})}static reject(e){return new de((n,r)=>{r(e)})}static waitFor(e){return new de((n,r)=>{let s=0,a=0,c=!1;e.forEach(u=>{++s,u.next(()=>{++a,c&&a===s&&n()},h=>r(h))}),c=!0,a===s&&n()})}static or(e){let n=de.resolve(!1);for(const r of e)n=n.next(s=>s?de.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new de((r,s)=>{const a=e.length,c=new Array(a);let u=0;for(let h=0;h<a;h++){const f=h;n(e[f]).next(m=>{c[f]=m,++u,u===a&&r(c)},m=>s(m))}})}static doWhile(e,n){return new de((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function t6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}dm.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=-1;function hm(t){return t==null}function jp(t){return t===0&&1/t==-1/0}function n6(t){return typeof t=="number"&&Number.isInteger(t)&&!jp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="";function r6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pN(e)),e=s6(t.get(n),e);return pN(e)}function s6(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case ZC:n+="";break;default:n+=a}}return n}function pN(t){return t+ZC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function da(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ej(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n){this.comparator=e,this.root=n||Fn.EMPTY}insert(e,n){return new on(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new on(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kf(this.root,e,this.comparator,!1)}getReverseIterator(){return new kf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kf(this.root,e,this.comparator,!0)}}class kf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Fn.RED,this.left=s??Fn.EMPTY,this.right=a??Fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Fn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Fn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tt(27949);return e+(this.isRed()?0:1)}}Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new Fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.comparator=e,this.data=new on(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gN(this.data.getIterator())}getIteratorFrom(e){return new gN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Cn(this.comparator);return n.data=e,n}}class gN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.fields=e,e.sort(Un.comparator)}static empty(){return new Ur([])}unionWith(e){let n=new Cn(Un.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ur(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new tj("Invalid base64 string: "+a):a}}(e);return new $n(n)}static fromUint8Array(e){const n=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new $n(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$n.EMPTY_BYTE_STRING=new $n("");const i6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ia(t){if(Ot(!!t,39018),typeof t=="string"){let e=0;const n=i6.exec(t);if(Ot(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fn(t.seconds),nanos:fn(t.nanos)}}function fn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oa(t){return typeof t=="string"?$n.fromBase64String(t):$n.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="server_timestamp",rj="__type__",sj="__previous_value__",ij="__local_write_time__";function pw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[rj])===null||n===void 0?void 0:n.stringValue)===nj}function fm(t){const e=t.mapValue.fields[sj];return pw(e)?fm(e):e}function Id(t){const e=ia(t.mapValue.fields[ij].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,n,r,s,a,c,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Ip="(default)";class Ad{constructor(e,n){this.projectId=e,this.database=n||Ip}static empty(){return new Ad("","")}get isDefaultDatabase(){return this.database===Ip}isEqual(e){return e instanceof Ad&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj="__type__",a6="__max__",Rf={mapValue:{}},aj="__vector__",Ap="value";function aa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pw(t)?4:c6(t)?9007199254740991:l6(t)?10:11:tt(28295,{value:t})}function ui(t,e){if(t===e)return!0;const n=aa(t);if(n!==aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Id(t).isEqual(Id(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=ia(s.timestampValue),u=ia(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return oa(s.bytesValue).isEqual(oa(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return fn(s.geoPointValue.latitude)===fn(a.geoPointValue.latitude)&&fn(s.geoPointValue.longitude)===fn(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return fn(s.integerValue)===fn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=fn(s.doubleValue),u=fn(a.doubleValue);return c===u?jp(c)===jp(u):isNaN(c)&&isNaN(u)}return!1}(t,e);case 9:return Wc(t.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},u=a.mapValue.fields||{};if(mN(c)!==mN(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!ui(c[h],u[h])))return!1;return!0}(t,e);default:return tt(52216,{left:t})}}function Pd(t,e){return(t.values||[]).find(n=>ui(n,e))!==void 0}function Hc(t,e){if(t===e)return 0;const n=aa(t),r=aa(e);if(n!==r)return ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(t.booleanValue,e.booleanValue);case 2:return function(a,c){const u=fn(a.integerValue||a.doubleValue),h=fn(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return yN(t.timestampValue,e.timestampValue);case 4:return yN(Id(t),Id(e));case 5:return Yv(t.stringValue,e.stringValue);case 6:return function(a,c){const u=oa(a),h=oa(c);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const u=a.split("/"),h=c.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=ut(u[f],h[f]);if(m!==0)return m}return ut(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const u=ut(fn(a.latitude),fn(c.latitude));return u!==0?u:ut(fn(a.longitude),fn(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vN(t.arrayValue,e.arrayValue);case 10:return function(a,c){var u,h,f,m;const y=a.fields||{},v=c.fields||{},w=(u=y[Ap])===null||u===void 0?void 0:u.arrayValue,b=(h=v[Ap])===null||h===void 0?void 0:h.arrayValue,x=ut(((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0,((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0);return x!==0?x:vN(w,b)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===Rf.mapValue&&c===Rf.mapValue)return 0;if(a===Rf.mapValue)return 1;if(c===Rf.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),f=c.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let y=0;y<h.length&&y<m.length;++y){const v=Yv(h[y],m[y]);if(v!==0)return v;const w=Hc(u[h[y]],f[m[y]]);if(w!==0)return w}return ut(h.length,m.length)}(t.mapValue,e.mapValue);default:throw tt(23264,{le:n})}}function yN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ut(t,e);const n=ia(t),r=ia(e),s=ut(n.seconds,r.seconds);return s!==0?s:ut(n.nanos,r.nanos)}function vN(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Hc(n[s],r[s]);if(a)return a}return ut(n.length,r.length)}function Kc(t){return Jv(t)}function Jv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ia(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return oa(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return We.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=Jv(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${Jv(n.fields[c])}`;return s+"}"}(t.mapValue):tt(61005,{value:t})}function Zf(t){switch(aa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fm(t);return e?16+Zf(e):16;case 5:return 2*t.stringValue.length;case 6:return oa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+Zf(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return da(r.fields,(a,c)=>{s+=a.length+Zf(c)}),s}(t.mapValue);default:throw tt(13486,{value:t})}}function xN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Zv(t){return!!t&&"integerValue"in t}function mw(t){return!!t&&"arrayValue"in t}function wN(t){return!!t&&"nullValue"in t}function _N(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ep(t){return!!t&&"mapValue"in t}function l6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[oj])===null||n===void 0?void 0:n.stringValue)===aj}function ud(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return da(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ud(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ud(t.arrayValue.values[n]);return e}return Object.assign({},t)}function c6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===a6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.value=e}static empty(){return new Nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ep(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ud(n)}setAll(e){let n=Un.emptyPath(),r={},s=[];e.forEach((c,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,s),r={},s=[],n=u.popLast()}c?r[u.lastSegment()]=ud(c):s.push(u.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());ep(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ep(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){da(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Nr(ud(this.value))}}function lj(t){const e=[];return da(t.fields,(n,r)=>{const s=new Un([n]);if(ep(r)){const a=lj(r.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new Ur(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n,r,s,a,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Xn(e,0,ot.min(),ot.min(),ot.min(),Nr.empty(),0)}static newFoundDocument(e,n,r,s){return new Xn(e,1,n,ot.min(),r,s,0)}static newNoDocument(e,n){return new Xn(e,2,n,ot.min(),ot.min(),Nr.empty(),0)}static newUnknownDocument(e,n){return new Xn(e,3,n,ot.min(),ot.min(),Nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n){this.position=e,this.inclusive=n}}function EN(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],c=t.position[s];if(a.field.isKeyField()?r=We.comparator(We.fromName(c.referenceValue),n.key):r=Hc(c,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function bN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ui(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n="asc"){this.field=e,this.dir=n}}function u6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{}class wn extends cj{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new h6(e,n,r):n==="array-contains"?new m6(e,r):n==="in"?new g6(e,r):n==="not-in"?new y6(e,r):n==="array-contains-any"?new v6(e,r):new wn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new f6(e,r):new p6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hc(n,this.value)):n!==null&&aa(this.value)===aa(n)&&this.matchesComparison(Hc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rs extends cj{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Rs(e,n)}matches(e){return uj(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function uj(t){return t.op==="and"}function dj(t){return d6(t)&&uj(t)}function d6(t){for(const e of t.filters)if(e instanceof Rs)return!1;return!0}function ex(t){if(t instanceof wn)return t.field.canonicalString()+t.op.toString()+Kc(t.value);if(dj(t))return t.filters.map(e=>ex(e)).join(",");{const e=t.filters.map(n=>ex(n)).join(",");return`${t.op}(${e})`}}function hj(t,e){return t instanceof wn?function(r,s){return s instanceof wn&&r.op===s.op&&r.field.isEqual(s.field)&&ui(r.value,s.value)}(t,e):t instanceof Rs?function(r,s){return s instanceof Rs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,c,u)=>a&&hj(c,s.filters[u]),!0):!1}(t,e):void tt(19439)}function fj(t){return t instanceof wn?function(n){return`${n.field.canonicalString()} ${n.op} ${Kc(n.value)}`}(t):t instanceof Rs?function(n){return n.op.toString()+" {"+n.getFilters().map(fj).join(" ,")+"}"}(t):"Filter"}class h6 extends wn{constructor(e,n,r){super(e,n,r),this.key=We.fromName(r.referenceValue)}matches(e){const n=We.comparator(e.key,this.key);return this.matchesComparison(n)}}class f6 extends wn{constructor(e,n){super(e,"in",n),this.keys=pj("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class p6 extends wn{constructor(e,n){super(e,"not-in",n),this.keys=pj("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function pj(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>We.fromName(r.referenceValue))}class m6 extends wn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mw(n)&&Pd(n.arrayValue,this.value)}}class g6 extends wn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pd(this.value.arrayValue,n)}}class y6 extends wn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pd(this.value.arrayValue,n)}}class v6 extends wn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e,n=null,r=[],s=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=u,this.Pe=null}}function NN(t,e=null,n=[],r=[],s=null,a=null,c=null){return new x6(t,e,n,r,s,a,c)}function gw(t){const e=at(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ex(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),hm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Kc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Kc(r)).join(",")),e.Pe=n}return e.Pe}function yw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!u6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bN(t.startAt,e.startAt)&&bN(t.endAt,e.endAt)}function tx(t){return We.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n=null,r=[],s=[],a=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function w6(t,e,n,r,s,a,c,u){return new vl(t,e,n,r,s,a,c,u)}function pm(t){return new vl(t)}function SN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mj(t){return t.collectionGroup!==null}function dd(t){const e=at(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Cn(Un.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new kd(a,r))}),n.has(Un.keyField().canonicalString())||e.Te.push(new kd(Un.keyField(),r))}return e.Te}function ii(t){const e=at(t);return e.Ie||(e.Ie=_6(e,dd(t))),e.Ie}function _6(t,e){if(t.limitType==="F")return NN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new kd(s.field,a)});const n=t.endAt?new Pp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pp(t.startAt.position,t.startAt.inclusive):null;return NN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function nx(t,e){const n=t.filters.concat([e]);return new vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rx(t,e,n){return new vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mm(t,e){return yw(ii(t),ii(e))&&t.limitType===e.limitType}function gj(t){return`${gw(ii(t))}|lt:${t.limitType}`}function hc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>fj(s)).join(", ")}]`),hm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Kc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Kc(s)).join(",")),`Target(${r})`}(ii(t))}; limitType=${t.limitType})`}function gm(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):We.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of dd(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(c,u,h){const f=EN(c,u,h);return c.inclusive?f<=0:f<0}(r.startAt,dd(r),s)||r.endAt&&!function(c,u,h){const f=EN(c,u,h);return c.inclusive?f>=0:f>0}(r.endAt,dd(r),s))}(t,e)}function E6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yj(t){return(e,n)=>{let r=!1;for(const s of dd(t)){const a=b6(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function b6(t,e,n){const r=t.field.isKeyField()?We.comparator(e.key,n.key):function(a,c,u){const h=c.data.field(a),f=u.data.field(a);return h!==null&&f!==null?Hc(h,f):tt(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return ej(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6=new on(We.comparator);function Ki(){return N6}const vj=new on(We.comparator);function ed(...t){let e=vj;for(const n of t)e=e.insert(n.key,n);return e}function xj(t){let e=vj;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ma(){return hd()}function wj(){return hd()}function hd(){return new xl(t=>t.toString(),(t,e)=>t.isEqual(e))}const S6=new on(We.comparator),T6=new Cn(We.comparator);function pt(...t){let e=T6;for(const n of t)e=e.add(n);return e}const C6=new Cn(ut);function j6(){return C6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jp(e)?"-0":e}}function _j(t){return{integerValue:""+t}}function I6(t,e){return n6(e)?_j(e):vw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(){this._=void 0}}function A6(t,e,n){return t instanceof Rd?function(s,a){const c={fields:{[rj]:{stringValue:nj},[ij]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&pw(a)&&(a=fm(a)),a&&(c.fields[sj]=a),{mapValue:c}}(n,e):t instanceof Od?bj(t,e):t instanceof Dd?Nj(t,e):function(s,a){const c=Ej(s,a),u=TN(c)+TN(s.Ee);return Zv(c)&&Zv(s.Ee)?_j(u):vw(s.serializer,u)}(t,e)}function P6(t,e,n){return t instanceof Od?bj(t,e):t instanceof Dd?Nj(t,e):n}function Ej(t,e){return t instanceof kp?function(r){return Zv(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Rd extends ym{}class Od extends ym{constructor(e){super(),this.elements=e}}function bj(t,e){const n=Sj(e);for(const r of t.elements)n.some(s=>ui(s,r))||n.push(r);return{arrayValue:{values:n}}}class Dd extends ym{constructor(e){super(),this.elements=e}}function Nj(t,e){let n=Sj(e);for(const r of t.elements)n=n.filter(s=>!ui(s,r));return{arrayValue:{values:n}}}class kp extends ym{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function TN(t){return fn(t.integerValue||t.doubleValue)}function Sj(t){return mw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,n){this.field=e,this.transform=n}}function R6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Od&&s instanceof Od||r instanceof Dd&&s instanceof Dd?Wc(r.elements,s.elements,ui):r instanceof kp&&s instanceof kp?ui(r.Ee,s.Ee):r instanceof Rd&&s instanceof Rd}(t.transform,e.transform)}class O6{constructor(e,n){this.version=e,this.transformResults=n}}class lr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vm{}function Tj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xm(t.key,lr.none()):new Zd(t.key,t.data,lr.none());{const n=t.data,r=Nr.empty();let s=new Cn(Un.comparator);for(let a of e.fields)if(!s.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?r.delete(a):r.set(a,c),s=s.add(a)}return new ha(t.key,r,new Ur(s.toArray()),lr.none())}}function D6(t,e,n){t instanceof Zd?function(s,a,c){const u=s.value.clone(),h=jN(s.fieldTransforms,a,c.transformResults);u.setAll(h),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ha?function(s,a,c){if(!tp(s.precondition,a))return void a.convertToUnknownDocument(c.version);const u=jN(s.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(Cj(s)),h.setAll(u),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(t,e,n):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function fd(t,e,n,r){return t instanceof Zd?function(a,c,u,h){if(!tp(a.precondition,c))return u;const f=a.value.clone(),m=IN(a.fieldTransforms,h,c);return f.setAll(m),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof ha?function(a,c,u,h){if(!tp(a.precondition,c))return u;const f=IN(a.fieldTransforms,h,c),m=c.data;return m.setAll(Cj(a)),m.setAll(f),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(a,c,u){return tp(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(t,e,n)}function L6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=Ej(r.transform,s||null);a!=null&&(n===null&&(n=Nr.empty()),n.set(r.field,a))}return n||null}function CN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Wc(r,s,(a,c)=>R6(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zd extends vm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ha extends vm{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Cj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function jN(t,e,n){const r=new Map;Ot(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const a=t[s],c=a.transform,u=e.data.field(a.field);r.set(a.field,P6(c,u,n[s]))}return r}function IN(t,e,n){const r=new Map;for(const s of t){const a=s.transform,c=n.data.field(s.field);r.set(s.field,A6(a,c,e))}return r}class xm extends vm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M6 extends vm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&D6(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=wj();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=n.has(s.key)?null:u;const h=Tj(c,u);h!==null&&r.set(s.key,h),c.isValidDocument()||c.convertToNoDocument(ot.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pt())}isEqual(e){return this.batchId===e.batchId&&Wc(this.mutations,e.mutations,(n,r)=>CN(n,r))&&Wc(this.baseMutations,e.baseMutations,(n,r)=>CN(n,r))}}class xw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ot(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return S6}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new xw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V6=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn,Nt;function $6(t){switch(t){case ce.OK:return tt(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return tt(15467,{code:t})}}function jj(t){if(t===void 0)return Hi("GRPC error has no .code"),ce.UNKNOWN;switch(t){case vn.OK:return ce.OK;case vn.CANCELLED:return ce.CANCELLED;case vn.UNKNOWN:return ce.UNKNOWN;case vn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case vn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case vn.INTERNAL:return ce.INTERNAL;case vn.UNAVAILABLE:return ce.UNAVAILABLE;case vn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case vn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case vn.NOT_FOUND:return ce.NOT_FOUND;case vn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case vn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case vn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case vn.ABORTED:return ce.ABORTED;case vn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case vn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case vn.DATA_LOSS:return ce.DATA_LOSS;default:return tt(39323,{code:t})}}(Nt=vn||(vn={}))[Nt.OK=0]="OK",Nt[Nt.CANCELLED=1]="CANCELLED",Nt[Nt.UNKNOWN=2]="UNKNOWN",Nt[Nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nt[Nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nt[Nt.NOT_FOUND=5]="NOT_FOUND",Nt[Nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nt[Nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nt[Nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nt[Nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nt[Nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nt[Nt.ABORTED=10]="ABORTED",Nt[Nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nt[Nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nt[Nt.INTERNAL=13]="INTERNAL",Nt[Nt.UNAVAILABLE=14]="UNAVAILABLE",Nt[Nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=new Xo([4294967295,4294967295],0);function AN(t){const e=XC().encode(t),n=new qC;return n.update(e),new Uint8Array(n.digest())}function PN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Xo([n,r],0),new Xo([s,a],0)]}class ww{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new td(`Invalid padding: ${n}`);if(r<0)throw new td(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new td(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new td(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Xo.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Xo.fromNumber(r)));return s.compare(z6)===1&&(s=new Xo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=AN(e),[r,s]=PN(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);if(!this.ye(c))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new ww(a,s,n);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const n=AN(e),[r,s]=PN(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);this.we(c)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class td extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,eh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new wm(ot.min(),s,new on(ut),Ki(),pt())}}class eh{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new eh(r,n,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class Ij{constructor(e,n){this.targetId=e,this.De=n}}class Aj{constructor(e,n,r=$n.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class kN{constructor(){this.ve=0,this.Ce=RN(),this.Fe=$n.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=pt(),n=pt(),r=pt();return this.Ce.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:tt(38017,{changeType:a})}}),new eh(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=RN()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ot(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class B6{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ki(),this.je=Of(),this.Je=Of(),this.He=new on(ut)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:tt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const a=s.target;if(tx(a))if(r===0){const c=new We(a.path);this.Xe(n,c,Xn.newNoDocument(c,ot.min()))}else Ot(r===1,20013,{expectedCount:r});else{const c=this.ot(n);if(c!==r){const u=this._t(e),h=u?this.ut(u,e,c):1;if(h!==0){this.rt(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let c,u;try{c=oa(r).toUint8Array()}catch(h){if(h instanceof tj)return il("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new ww(c,s,a)}catch(h){return il(h instanceof td?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.fe===0?null:u}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.Xe(n,a,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((a,c)=>{const u=this.st(c);if(u){if(a.current&&tx(u.target)){const h=new We(u.target.path);this.Tt(h).has(c)||this.It(c,h)||this.Xe(c,h,Xn.newNoDocument(h,e))}a.Ne&&(n.set(c,a.Le()),a.ke())}});let r=pt();this.Je.forEach((a,c)=>{let u=!0;c.forEachWhile(h=>{const f=this.st(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const s=new wm(e,n,this.He,this.ze,r);return this.ze=Ki(),this.je=Of(),this.Je=Of(),this.He=new on(ut),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new kN,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Cn(ut),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Cn(ut),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new kN),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Of(){return new on(We.comparator)}function RN(){return new on(We.comparator)}const q6={asc:"ASCENDING",desc:"DESCENDING"},W6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H6={and:"AND",or:"OR"};class K6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sx(t,e){return t.useProto3Json||hm(e)?e:{value:e}}function Rp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function G6(t,e){return Rp(t,e.toTimestamp())}function oi(t){return Ot(!!t,49232),ot.fromTimestamp(function(n){const r=ia(n);return new ht(r.seconds,r.nanos)}(t))}function _w(t,e){return ix(t,e).canonicalString()}function ix(t,e){const n=function(s){return new Ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kj(t){const e=Ft.fromString(t);return Ot(Mj(e),10190,{key:e.toString()}),e}function ox(t,e){return _w(t.databaseId,e.path)}function Fy(t,e){const n=kj(e);if(n.get(1)!==t.databaseId.projectId)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new We(Oj(n))}function Rj(t,e){return _w(t.databaseId,e)}function Q6(t){const e=kj(t);return e.length===4?Ft.emptyPath():Oj(e)}function ax(t){return new Ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Oj(t){return Ot(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ON(t,e,n){return{name:ox(t,e),fields:n.value.mapValue.fields}}function Y6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:tt(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,m){return f.useProto3Json?(Ot(m===void 0||typeof m=="string",58123),$n.fromBase64String(m||"")):(Ot(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),$n.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(f){const m=f.code===void 0?ce.UNKNOWN:jj(f.code);return new be(m,f.message||"")}(c);n=new Aj(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Fy(t,r.document.name),a=oi(r.document.updateTime),c=r.document.createTime?oi(r.document.createTime):ot.min(),u=new Nr({mapValue:{fields:r.document.fields}}),h=Xn.newFoundDocument(s,a,c,u),f=r.targetIds||[],m=r.removedTargetIds||[];n=new np(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Fy(t,r.document),a=r.readTime?oi(r.readTime):ot.min(),c=Xn.newNoDocument(s,a),u=r.removedTargetIds||[];n=new np([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Fy(t,r.document),a=r.removedTargetIds||[];n=new np([],a,s,null)}else{if(!("filter"in e))return tt(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,c=new U6(s,a),u=r.targetId;n=new Ij(u,c)}}return n}function X6(t,e){let n;if(e instanceof Zd)n={update:ON(t,e.key,e.value)};else if(e instanceof xm)n={delete:ox(t,e.key)};else if(e instanceof ha)n={update:ON(t,e.key,e.data),updateMask:o5(e.fieldMask)};else{if(!(e instanceof M6))return tt(16599,{Rt:e.type});n={verify:ox(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const u=c.transform;if(u instanceof Rd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Od)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Dd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof kp)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw tt(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:G6(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:tt(27497)}(t,e.precondition)),n}function J6(t,e){return t&&t.length>0?(Ot(e!==void 0,14353),t.map(n=>function(s,a){let c=s.updateTime?oi(s.updateTime):oi(a);return c.isEqual(ot.min())&&(c=oi(a)),new O6(c,s.transformResults||[])}(n,e))):[]}function Z6(t,e){return{documents:[Rj(t,e.path)]}}function e5(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Rj(t,s);const a=function(f){if(f.length!==0)return Lj(Rs.create(f,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(f){if(f.length!==0)return f.map(m=>function(v){return{field:fc(v.field),direction:r5(v.dir)}}(m))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=sx(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:n,parent:s}}function t5(t){let e=Q6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ot(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let a=[];n.where&&(a=function(y){const v=Dj(y);return v instanceof Rs&&dj(v)?v.getFilters():[v]}(n.where));let c=[];n.orderBy&&(c=function(y){return y.map(v=>function(b){return new kd(pc(b.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,hm(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(y){const v=!!y.before,w=y.values||[];return new Pp(w,v)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const v=!y.before,w=y.values||[];return new Pp(w,v)}(n.endAt)),w6(e,s,c,a,u,"F",h,f)}function n5(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Dj(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=pc(n.unaryFilter.field);return wn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=pc(n.unaryFilter.field);return wn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=pc(n.unaryFilter.field);return wn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=pc(n.unaryFilter.field);return wn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}}(t):t.fieldFilter!==void 0?function(n){return wn.create(pc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Rs.create(n.compositeFilter.filters.map(r=>Dj(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return tt(1026)}}(n.compositeFilter.op))}(t):tt(30097,{filter:t})}function r5(t){return q6[t]}function s5(t){return W6[t]}function i5(t){return H6[t]}function fc(t){return{fieldPath:t.canonicalString()}}function pc(t){return Un.fromServerFormat(t.fieldPath)}function Lj(t){return t instanceof wn?function(n){if(n.op==="=="){if(_N(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NAN"}};if(wN(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_N(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NOT_NAN"}};if(wN(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fc(n.field),op:s5(n.op),value:n.value}}}(t):t instanceof Rs?function(n){const r=n.getFilters().map(s=>Lj(s));return r.length===1?r[0]:{compositeFilter:{op:i5(n.op),filters:r}}}(t):tt(54877,{filter:t})}function o5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Mj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n,r,s,a=ot.min(),c=ot.min(),u=$n.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Wo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e){this.gt=e}}function l5(t){const e=t5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rx(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.Dn=new u5}addToCollectionParentIndex(e,n){return this.Dn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(sa.min())}updateCollectionGroup(e,n,r){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class u5{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Cn(Ft.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Cn(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fj=41943040;class br{static withCacheSize(e){return new br(e,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br.DEFAULT_COLLECTION_PERCENTILE=10,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,br.DEFAULT=new br(Fj,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),br.DISABLED=new br(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Gc(0)}static ur(){return new Gc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="LruGarbageCollector",Vj=1048576;function MN([t,e],[n,r]){const s=ut(t,n);return s===0?ut(e,r):s}class d5{constructor(e){this.Tr=e,this.buffer=new Cn(MN),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();MN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class h5{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ke(LN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){cu(n)?ke(LN,"Ignoring IndexedDB error during garbage collection: ",n):await lu(n)}await this.Rr(3e5)})}}class f5{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return de.resolve(dm.ue);const r=new d5(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(DN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DN):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,a,c,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,n))).next(y=>(a=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),dc()<=ft.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-m}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:y})))}}function p5(t,e){return new f5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(){this.changes=new xl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?de.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&fd(r.mutation,s,Ur.empty(),ht.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pt()){const s=Ma();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let c=ed();return a.forEach((u,h)=>{c=c.insert(u,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=Ma();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pt()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,u)=>{n.set(c,u)})})}computeViews(e,n,r,s){let a=Ki();const c=hd(),u=function(){return hd()}();return n.forEach((h,f)=>{const m=r.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof ha)?a=a.insert(f.key,f):m!==void 0?(c.set(f.key,m.mutation.getFieldMask()),fd(m.mutation,f,m.mutation.getFieldMask(),ht.now())):c.set(f.key,Ur.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((f,m)=>c.set(f,m)),n.forEach((f,m)=>{var y;return u.set(f,new g5(m,(y=c.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const r=hd();let s=new on((c,u)=>c-u),a=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const u of c)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=r.get(h)||Ur.empty();m=u.applyToLocalView(f,m),r.set(h,m);const y=(s.get(u.batchId)||pt()).add(h);s=s.insert(u.batchId,y)})}).next(()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,y=wj();m.forEach(v=>{if(!a.has(v)){const w=Tj(n.get(v),r.get(v));w!==null&&y.set(v,w),a=a.add(v)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return de.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(c){return We.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):de.resolve(Ma());let u=jd,h=a;return c.next(f=>de.forEach(f,(m,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),a.get(m)?de.resolve():this.remoteDocumentCache.getEntry(e,m).next(v=>{h=h.insert(m,v)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,h,f,pt())).next(m=>({batchId:u,changes:xj(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new We(n)).next(r=>{let s=ed();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let c=ed();return this.indexManager.getCollectionParents(e,a).next(u=>de.forEach(u,h=>{const f=function(y,v){return new vl(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(m=>{m.forEach((y,v)=>{c=c.insert(y,v)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(c=>{a.forEach((h,f)=>{const m=f.getKey();c.get(m)===null&&(c=c.insert(m,Xn.newInvalidDocument(m)))});let u=ed();return c.forEach((h,f)=>{const m=a.get(h);m!==void 0&&fd(m.mutation,f,Ur.empty(),ht.now()),gm(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return de.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:oi(s.createTime)}}(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:l5(s.bundledQuery),readTime:oi(s.readTime)}}(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(){this.overlays=new on(We.comparator),this.kr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ma();return de.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.wt(e,n,a)}),de.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),de.resolve()}getOverlaysForCollection(e,n,r){const s=Ma(),a=n.length+1,c=new We(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>r&&s.set(h.getKey(),h)}return de.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new on((f,m)=>f-m);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let m=a.get(f.largestBatchId);m===null&&(m=Ma(),a=a.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=Ma(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=s)););return de.resolve(u)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new V6(n,r));let a=this.kr.get(n);a===void 0&&(a=pt(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(){this.sessionToken=$n.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.qr=new Cn(Rn.Qr),this.$r=new Cn(Rn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Rn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Rn(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new We(new Ft([])),r=new Rn(n,e),s=new Rn(n,e+1),a=[];return this.$r.forEachInRange([r,s],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new We(new Ft([])),r=new Rn(n,e),s=new Rn(n,e+1);let a=pt();return this.$r.forEachInRange([r,s],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new Rn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return We.comparator(e.key,n.key)||ut(e.Hr,n.Hr)}static Ur(e,n){return ut(e.Hr,n.Hr)||We.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Cn(Rn.Qr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new F6(a,n,r,s);this.mutationQueue.push(c);for(const u of s)this.Yr=this.Yr.add(new Rn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,n){return de.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),a=s<0?0:s;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?fw:this.er-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rn(n,0),s=new Rn(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],c=>{const u=this.Zr(c.Hr);a.push(u)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Cn(ut);return n.forEach(s=>{const a=new Rn(s,0),c=new Rn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],u=>{r=r.add(u.Hr)})}),de.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const c=new Rn(new We(a),0);let u=new Cn(ut);return this.Yr.forEachWhile(h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(u=u.add(h.Hr)),!0)},c),de.resolve(this.ei(u))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ot(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return de.forEach(n.mutations,s=>{const a=new Rn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Rn(n,0),s=this.Yr.firstAfterOrEqual(r);return de.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e){this.ni=e,this.docs=function(){return new on(We.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,c=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return de.resolve(r?r.document.mutableCopy():Xn.newInvalidDocument(n))}getEntries(e,n){let r=Ki();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Xn.newInvalidDocument(s))}),de.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Ki();const c=n.path,u=new We(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||JU(XU(m),r)<=0||(s.has(m.key)||gm(n,m))&&(a=a.insert(m.key,m.mutableCopy()))}return de.resolve(a)}getAllFromCollectionGroup(e,n,r,s){tt(9500)}ri(e,n){return de.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new b5(this)}getSize(e){return de.resolve(this.size)}}class b5 extends m5{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),de.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e){this.persistence=e,this.ii=new xl(n=>gw(n),yw),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.si=0,this.oi=new Ew,this.targetCount=0,this._i=Gc.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),de.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Gc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.hr(n),de.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),de.waitFor(a).next(()=>s)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return de.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),de.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return de.resolve(r)}containsKey(e,n){return de.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n){this.ai={},this.overlays={},this.ui=new dm(0),this.ci=!1,this.ci=!0,this.li=new w5,this.referenceDelegate=e(this),this.hi=new N5(this),this.indexManager=new c5,this.remoteDocumentCache=function(s){return new E5(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new a5(n),this.Ti=new v5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new x5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new _5(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){ke("MemoryPersistence","Starting transaction:",e);const s=new S5(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,n){return de.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class S5 extends e6{constructor(e){super(),this.currentSequenceNumber=e}}class bw{constructor(e){this.persistence=e,this.Ai=new Ew,this.Ri=null}static Vi(e){return new bw(e)}get mi(){if(this.Ri)return this.Ri;throw tt(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),de.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.mi,r=>{const s=We.fromPath(r);return this.fi(e,s).next(a=>{a||n.removeEntry(s,ot.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return de.or([()=>de.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Op{constructor(e,n){this.persistence=e,this.gi=new xl(r=>r6(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=p5(this,n)}static Vi(e,n){return new Op(e,n)}Ii(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return de.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(a=>a?de.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,c=>this.Sr(e,c,n).next(u=>{u||(r++,a.removeEntry(c,ot.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zf(e.data.value)),n}Sr(e,n,r){return de.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return de.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=pt(),s=pt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Nw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return lF()?8:t6(er())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ps(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,n,s,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new T5;return this.ws(e,n,c).next(u=>{if(a.result=u,this.Rs)return this.Ss(e,n,c,u.size)})}).next(()=>a.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(dc()<=ft.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",hc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):(dc()<=ft.DEBUG&&ke("QueryEngine","Query:",hc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(dc()<=ft.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",hc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ii(n))):de.resolve())}ps(e,n){if(SN(n))return de.resolve(null);let r=ii(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=rx(n,null,"F"),r=ii(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=pt(...a);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const f=this.bs(n,u);return this.Ds(n,f,c,h.readTime)?this.ps(e,rx(n,null,"F")):this.vs(e,f,n,h)}))})))}ys(e,n,r,s){return SN(n)||s.isEqual(ot.min())?de.resolve(null):this.gs.getDocuments(e,r).next(a=>{const c=this.bs(n,a);return this.Ds(n,c,r,s)?de.resolve(null):(dc()<=ft.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hc(n)),this.vs(e,c,n,YU(s,jd)).next(u=>u))})}bs(e,n){let r=new Cn(yj(e));return n.forEach((s,a)=>{gm(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,n,r){return dc()<=ft.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",hc(n)),this.gs.getDocumentsMatchingQuery(e,n,sa.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="LocalStore",j5=3e8;class I5{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new on(ut),this.Ms=new xl(a=>gw(a),yw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new y5(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function A5(t,e,n,r){return new I5(t,e,n,r)}async function $j(t,e){const n=at(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],u=[];let h=pt();for(const f of s){c.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of a){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(r,h).next(f=>({Bs:f,removedBatchIds:c,addedBatchIds:u}))})})}function P5(t,e){const n=at(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const y=f.batch,v=y.keys();let w=de.resolve();return v.forEach(b=>{w=w.next(()=>m.getEntry(h,b)).next(x=>{const E=f.docVersions.get(b);Ot(E!==null,48541),x.version.compareTo(E)<0&&(y.applyToRemoteDocument(x,f),x.isValidDocument()&&(x.setReadTime(f.commitVersion),m.addEntry(x)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(h,y))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=pt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function zj(t){const e=at(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function k5(t,e){const n=at(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const u=[];e.targetChanges.forEach((m,y)=>{const v=s.get(y);if(!v)return;u.push(n.hi.removeMatchingKeys(a,m.removedDocuments,y).next(()=>n.hi.addMatchingKeys(a,m.addedDocuments,y)));let w=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken($n.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,r)),s=s.insert(y,w),function(x,E,A){return x.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=j5?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(v,w,m)&&u.push(n.hi.updateTargetData(a,w))});let h=Ki(),f=pt();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,m))}),u.push(R5(a,c,e.documentUpdates).next(m=>{h=m.Ls,f=m.ks})),!r.isEqual(ot.min())){const m=n.hi.getLastRemoteSnapshotVersion(a).next(y=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(m)}return de.waitFor(u).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,h,f)).next(()=>h)}).then(a=>(n.Fs=s,a))}function R5(t,e,n){let r=pt(),s=pt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let c=Ki();return n.forEach((u,h)=>{const f=a.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(ot.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):ke(Sw,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{Ls:c,ks:s}})}function O5(t,e){const n=at(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=fw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function D5(t,e){const n=at(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(a=>a?(s=a,de.resolve(s)):n.hi.allocateTargetId(r).next(c=>(s=new Wo(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function lx(t,e,n){const r=at(t),s=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!cu(c))throw c;ke(Sw,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function FN(t,e,n){const r=at(t);let s=ot.min(),a=pt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,f,m){const y=at(h),v=y.Ms.get(m);return v!==void 0?de.resolve(y.Fs.get(v)):y.hi.getTargetData(f,m)}(r,c,ii(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(h=>{a=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,n?s:ot.min(),n?a:pt())).next(u=>(L5(r,E6(e),u),{documents:u,qs:a})))}function L5(t,e,n){let r=t.xs.get(e)||ot.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class VN{constructor(){this.activeTargetIds=j6()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class M5{constructor(){this.Fo=new VN,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new VN,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="ConnectivityMonitor";class $N{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ke(UN,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ke(UN,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df=null;function cx(){return Df===null?Df=function(){return 268435456+Math.round(2147483648*Math.random())}():Df++,"0x"+Df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="RestConnection",V5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U5{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Ip?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,a){const c=cx(),u=this.Go(e,n.toUriEncodedString());ke(Vy,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,a);const{host:f}=new URL(u),m=fl(f);return this.jo(e,u,h,r,m).then(y=>(ke(Vy,`Received RPC '${e}' ${c}: `,y),y),y=>{throw il(Vy,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,n,r,s,a,c){return this.Wo(e,n,r,s,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+au}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Go(e,n){const r=V5[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection";class z5 extends U5{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,a){const c=cx();return new Promise((u,h)=>{const f=new WC;f.setWithCredentials(!0),f.listenOnce(HC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Jf.NO_ERROR:const y=f.getResponseJson();ke(Qn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Jf.TIMEOUT:ke(Qn,`RPC '${e}' ${c} timed out`),h(new be(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Jf.HTTP_ERROR:const v=f.getStatus();if(ke(Qn,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const b=w==null?void 0:w.error;if(b&&b.status&&b.message){const x=function(A){const j=A.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(j)>=0?j:ce.UNKNOWN}(b.status);h(new be(x,b.message))}else h(new be(ce.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new be(ce.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{c_:e,streamId:c,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{ke(Qn,`RPC '${e}' ${c} completed.`)}});const m=JSON.stringify(s);ke(Qn,`RPC '${e}' ${c} sending request:`,s),f.send(n,"POST",m,r,15)})}P_(e,n,r){const s=cx(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=QC(),u=GC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const m=a.join("");ke(Qn,`Creating RPC '${e}' stream ${s}: ${m}`,h);const y=c.createWebChannel(m,h);this.T_(y);let v=!1,w=!1;const b=new $5({Ho:E=>{w?ke(Qn,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(v||(ke(Qn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),ke(Qn,`RPC '${e}' stream ${s} sending:`,E),y.send(E))},Yo:()=>y.close()}),x=(E,A,j)=>{E.listen(A,C=>{try{j(C)}catch(L){setTimeout(()=>{throw L},0)}})};return x(y,Zu.EventType.OPEN,()=>{w||(ke(Qn,`RPC '${e}' stream ${s} transport opened.`),b.s_())}),x(y,Zu.EventType.CLOSE,()=>{w||(w=!0,ke(Qn,`RPC '${e}' stream ${s} transport closed`),b.__(),this.I_(y))}),x(y,Zu.EventType.ERROR,E=>{w||(w=!0,il(Qn,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),b.__(new be(ce.UNAVAILABLE,"The operation could not be completed")))}),x(y,Zu.EventType.MESSAGE,E=>{var A;if(!w){const j=E.data[0];Ot(!!j,16349);const C=j,L=(C==null?void 0:C.error)||((A=C[0])===null||A===void 0?void 0:A.error);if(L){ke(Qn,`RPC '${e}' stream ${s} received error:`,L);const V=L.status;let z=function(D){const R=vn[D];if(R!==void 0)return jj(R)}(V),P=L.message;z===void 0&&(z=ce.INTERNAL,P="Unknown error status: "+V+" with message "+L.message),w=!0,b.__(new be(z,P)),y.close()}else ke(Qn,`RPC '${e}' stream ${s} received:`,j),b.a_(j)}}),x(u,KC.STAT_EVENT,E=>{E.stat===Qv.PROXY?ke(Qn,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===Qv.NOPROXY&&ke(Qn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Uy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t){return new K6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="PersistentStream";class qj{constructor(e,n,r,s,a,c,u,h){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Bj(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Hi(n.toString()),Hi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new be(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ke(zN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ke(zN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class B5 extends qj{constructor(e,n,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=Y6(this.serializer,e),r=function(a){if(!("targetChange"in a))return ot.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?ot.min():c.readTime?oi(c.readTime):ot.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=ax(this.serializer),n.addTarget=function(a,c){let u;const h=c.target;if(u=tx(h)?{documents:Z6(a,h)}:{query:e5(a,h).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=Pj(a,c.resumeToken);const f=sx(a,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(ot.min())>0){u.readTime=Rp(a,c.snapshotVersion.toTimestamp());const f=sx(a,c.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=n5(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=ax(this.serializer),n.removeTarget=e,this.k_(n)}}class q5 extends qj{constructor(e,n,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=J6(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=ax(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>X6(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{}class H5 extends W5{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,ix(n,r),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(ce.UNKNOWN,a.toString())})}Jo(e,n,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,ix(n,r),s,c,u,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(ce.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class K5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Hi(n),this._a=!1):ke("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="RemoteStore";class G5{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{wl(this)&&(ke(ol,"Restarting streams for network reachability change."),await async function(h){const f=at(h);f.Ia.add(4),await th(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Em(f)}(this))})}),this.Aa=new K5(r,s)}}async function Em(t){if(wl(t))for(const e of t.da)await e(!0)}async function th(t){for(const e of t.da)await e(!1)}function Wj(t,e){const n=at(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Iw(n)?jw(n):uu(n).x_()&&Cw(n,e))}function Tw(t,e){const n=at(t),r=uu(n);n.Ta.delete(e),r.x_()&&Hj(n,e),n.Ta.size===0&&(r.x_()?r.B_():wl(n)&&n.Aa.set("Unknown"))}function Cw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ot.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uu(t).H_(e)}function Hj(t,e){t.Ra.$e(e),uu(t).Y_(e)}function jw(t){t.Ra=new B6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),uu(t).start(),t.Aa.aa()}function Iw(t){return wl(t)&&!uu(t).M_()&&t.Ta.size>0}function wl(t){return at(t).Ia.size===0}function Kj(t){t.Ra=void 0}async function Q5(t){t.Aa.set("Online")}async function Y5(t){t.Ta.forEach((e,n)=>{Cw(t,e)})}async function X5(t,e){Kj(t),Iw(t)?(t.Aa.la(e),jw(t)):t.Aa.set("Unknown")}async function J5(t,e,n){if(t.Aa.set("Online"),e instanceof Aj&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const u of a.targetIds)s.Ta.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ta.delete(u),s.Ra.removeTarget(u))}(t,e)}catch(r){ke(ol,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dp(t,r)}else if(e instanceof np?t.Ra.Ye(e):e instanceof Ij?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ot.min()))try{const r=await zj(t.localStore);n.compareTo(r)>=0&&await function(a,c){const u=a.Ra.Pt(c);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=a.Ta.get(f);m&&a.Ta.set(f,m.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach((h,f)=>{const m=a.Ta.get(h);if(!m)return;a.Ta.set(h,m.withResumeToken($n.EMPTY_BYTE_STRING,m.snapshotVersion)),Hj(a,h);const y=new Wo(m.target,h,f,m.sequenceNumber);Cw(a,y)}),a.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){ke(ol,"Failed to raise snapshot:",r),await Dp(t,r)}}async function Dp(t,e,n){if(!cu(e))throw e;t.Ia.add(1),await th(t),t.Aa.set("Offline"),n||(n=()=>zj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ke(ol,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Em(t)})}function Gj(t,e){return e().catch(n=>Dp(t,n,e))}async function bm(t){const e=at(t),n=la(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:fw;for(;Z5(e);)try{const s=await O5(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,e$(e,s)}catch(s){await Dp(e,s)}Qj(e)&&Yj(e)}function Z5(t){return wl(t)&&t.Pa.length<10}function e$(t,e){t.Pa.push(e);const n=la(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function Qj(t){return wl(t)&&!la(t).M_()&&t.Pa.length>0}function Yj(t){la(t).start()}async function t$(t){la(t).na()}async function n$(t){const e=la(t);for(const n of t.Pa)e.X_(n.mutations)}async function r$(t,e,n){const r=t.Pa.shift(),s=xw.from(r,e,n);await Gj(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await bm(t)}async function s$(t,e){e&&la(t).Z_&&await async function(r,s){if(function(c){return $6(c)&&c!==ce.ABORTED}(s.code)){const a=r.Pa.shift();la(r).N_(),await Gj(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await bm(r)}}(t,e),Qj(t)&&Yj(t)}async function BN(t,e){const n=at(t);n.asyncQueue.verifyOperationInProgress(),ke(ol,"RemoteStore received new credentials");const r=wl(n);n.Ia.add(3),await th(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Em(n)}async function i$(t,e){const n=at(t);e?(n.Ia.delete(2),await Em(n)):e||(n.Ia.add(2),await th(n),n.Aa.set("Unknown"))}function uu(t){return t.Va||(t.Va=function(n,r,s){const a=at(n);return a.ia(),new B5(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:Q5.bind(null,t),e_:Y5.bind(null,t),n_:X5.bind(null,t),J_:J5.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Iw(t)?jw(t):t.Aa.set("Unknown")):(await t.Va.stop(),Kj(t))})),t.Va}function la(t){return t.ma||(t.ma=function(n,r,s){const a=at(n);return a.ia(),new q5(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:t$.bind(null,t),n_:s$.bind(null,t),ea:n$.bind(null,t),ta:r$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await bm(t)):(await t.ma.stop(),t.Pa.length>0&&(ke(ol,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const c=Date.now()+r,u=new Aw(e,n,c,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pw(t,e){if(Hi("AsyncQueue",`${e}: ${t}`),cu(t))return new be(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{static emptySet(e){return new Ec(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||We.comparator(n.key,r.key):(n,r)=>We.comparator(n.key,r.key),this.keyedMap=ed(),this.sortedSet=new on(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ec)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ec;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.fa=new on(We.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):tt(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qc{constructor(e,n,r,s,a,c,u,h,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,a){const c=[];return n.forEach(u=>{c.push({type:0,doc:u})}),new Qc(e,n,Ec.emptySet(n),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class a${constructor(){this.queries=WN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=at(n),a=s.queries;s.queries=WN(),a.forEach((c,u)=>{for(const h of u.wa)h.onError(r)})})(this,new be(ce.ABORTED,"Firestore shutting down"))}}function WN(){return new xl(t=>gj(t),mm)}async function kw(t,e){const n=at(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new o$,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(s,!0);break;case 1:a.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(c){const u=Pw(c,`Initialization of query '${hc(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&Ow(n)}async function Rw(t,e){const n=at(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function l$(t,e){const n=at(t);let r=!1;for(const s of e){const a=s.query,c=n.queries.get(a);if(c){for(const u of c.wa)u.Ca(s)&&(r=!0);c.ya=s}}r&&Ow(n)}function c$(t,e,n){const r=at(t),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(n);r.queries.delete(e)}function Ow(t){t.Da.forEach(e=>{e.next()})}var ux,HN;(HN=ux||(ux={})).Fa="default",HN.Cache="cache";class Dw{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Qc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ux.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.key=e}}class Jj{constructor(e){this.key=e}}class u${constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=pt(),this.mutatedKeys=pt(),this.Xa=yj(e),this.eu=new Ec(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new qN,s=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,c=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,y)=>{const v=s.get(m),w=gm(this.query,y)?y:null,b=!!v&&this.mutatedKeys.has(v.key),x=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let E=!1;v&&w?v.data.isEqual(w.data)?b!==x&&(r.track({type:3,doc:w}),E=!0):this.iu(v,w)||(r.track({type:2,doc:w}),E=!0,(h&&this.Xa(w,h)>0||f&&this.Xa(w,f)<0)&&(u=!0)):!v&&w?(r.track({type:0,doc:w}),E=!0):v&&!w&&(r.track({type:1,doc:v}),E=!0,(h||f)&&(u=!0)),E&&(w?(c=c.add(w),a=x?a.add(m):a.delete(m)):(c=c.delete(m),a=a.delete(m)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const m=this.query.limitType==="F"?c.last():c.first();c=c.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{eu:c,ru:r,Ds:u,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((m,y)=>function(w,b){const x=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{At:E})}};return x(w)-x(b)}(m.type,y.type)||this.Xa(m.doc,y.doc)),this.su(r),s=s!=null&&s;const u=n&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,f=h!==this.Ya;return this.Ya=h,c.length!==0||f?{snapshot:new Qc(this.query,e.eu,a,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new qN,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=pt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Jj(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Xj(r))}),n}uu(e){this.Ha=e.qs,this.Za=pt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Qc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Lw="SyncEngine";class d${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class h${constructor(e){this.key=e,this.lu=!1}}class f${constructor(e,n,r,s,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new xl(u=>gj(u),mm),this.Tu=new Map,this.Iu=new Set,this.du=new on(We.comparator),this.Eu=new Map,this.Au=new Ew,this.Ru={},this.Vu=new Map,this.mu=Gc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function p$(t,e,n=!0){const r=sI(t);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await Zj(r,e,n,!0),s}async function m$(t,e){const n=sI(t);await Zj(n,e,!0,!1)}async function Zj(t,e,n,r){const s=await D5(t.localStore,ii(e)),a=s.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await g$(t,e,a,c==="current",s.resumeToken)),t.isPrimaryClient&&n&&Wj(t.remoteStore,s),u}async function g$(t,e,n,r,s){t.gu=(y,v,w)=>async function(x,E,A,j){let C=E.view.nu(A);C.Ds&&(C=await FN(x.localStore,E.query,!1).then(({documents:P})=>E.view.nu(P,C)));const L=j&&j.targetChanges.get(E.targetId),V=j&&j.targetMismatches.get(E.targetId)!=null,z=E.view.applyChanges(C,x.isPrimaryClient,L,V);return GN(x,E.targetId,z._u),z.snapshot}(t,y,v,w);const a=await FN(t.localStore,e,!0),c=new u$(e,a.qs),u=c.nu(a.documents),h=eh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=c.applyChanges(u,t.isPrimaryClient,h);GN(t,n,f._u);const m=new d$(e,n,c);return t.Pu.set(e,m),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function y$(t,e,n){const r=at(t),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter(c=>!mm(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await lx(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Tw(r.remoteStore,s.targetId),dx(r,s.targetId)}).catch(lu)):(dx(r,s.targetId),await lx(r.localStore,s.targetId,!0))}async function v$(t,e){const n=at(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tw(n.remoteStore,r.targetId))}async function x$(t,e,n){const r=T$(t);try{const s=await function(c,u){const h=at(c),f=ht.now(),m=u.reduce((w,b)=>w.add(b.key),pt());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",w=>{let b=Ki(),x=pt();return h.Os.getEntries(w,m).next(E=>{b=E,b.forEach((A,j)=>{j.isValidDocument()||(x=x.add(A))})}).next(()=>h.localDocuments.getOverlayedDocuments(w,b)).next(E=>{y=E;const A=[];for(const j of u){const C=L6(j,y.get(j.key).overlayedDocument);C!=null&&A.push(new ha(j.key,C,lj(C.value.mapValue),lr.exists(!0)))}return h.mutationQueue.addMutationBatch(w,f,A,u)}).next(E=>{v=E;const A=E.applyToLocalDocumentSet(y,x);return h.documentOverlayCache.saveOverlays(w,E.batchId,A)})}).then(()=>({batchId:v.batchId,changes:xj(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,h){let f=c.Ru[c.currentUser.toKey()];f||(f=new on(ut)),f=f.insert(u,h),c.Ru[c.currentUser.toKey()]=f}(r,s.batchId,n),await nh(r,s.changes),await bm(r.remoteStore)}catch(s){const a=Pw(s,"Failed to persist write");n.reject(a)}}async function eI(t,e){const n=at(t);try{const r=await k5(n.localStore,e);e.targetChanges.forEach((s,a)=>{const c=n.Eu.get(a);c&&(Ot(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.lu=!0:s.modifiedDocuments.size>0?Ot(c.lu,14607):s.removedDocuments.size>0&&(Ot(c.lu,42227),c.lu=!1))}),await nh(n,r,e)}catch(r){await lu(r)}}function KN(t,e,n){const r=at(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((a,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(c,u){const h=at(c);h.onlineState=u;let f=!1;h.queries.forEach((m,y)=>{for(const v of y.wa)v.va(u)&&(f=!0)}),f&&Ow(h)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function w$(t,e,n){const r=at(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),a=s&&s.key;if(a){let c=new on(We.comparator);c=c.insert(a,Xn.newNoDocument(a,ot.min()));const u=pt().add(a),h=new wm(ot.min(),new Map,new on(ut),c,u);await eI(r,h),r.du=r.du.remove(a),r.Eu.delete(e),Mw(r)}else await lx(r.localStore,e,!1).then(()=>dx(r,e,n)).catch(lu)}async function _$(t,e){const n=at(t),r=e.batch.batchId;try{const s=await P5(n.localStore,e);nI(n,r,null),tI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nh(n,s)}catch(s){await lu(s)}}async function E$(t,e,n){const r=at(t);try{const s=await function(c,u){const h=at(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(y=>(Ot(y!==null,37113),m=y.keys(),h.mutationQueue.removeMutationBatch(f,y))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(r.localStore,e);nI(r,e,n),tI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nh(r,s)}catch(s){await lu(s)}}function tI(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function nI(t,e,n){const r=at(t);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function dx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||rI(t,r)})}function rI(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Tw(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Mw(t))}function GN(t,e,n){for(const r of n)r instanceof Xj?(t.Au.addReference(r.key,e),b$(t,r)):r instanceof Jj?(ke(Lw,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||rI(t,r.key)):tt(19791,{yu:r})}function b$(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(ke(Lw,"New document in limbo: "+n),t.Iu.add(r),Mw(t))}function Mw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new We(Ft.fromString(e)),r=t.mu.next();t.Eu.set(r,new h$(n)),t.du=t.du.insert(n,r),Wj(t.remoteStore,new Wo(ii(pm(n.path)),r,"TargetPurposeLimboResolution",dm.ue))}}async function nh(t,e,n){const r=at(t),s=[],a=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,h)=>{c.push(r.gu(h,e,n).then(f=>{var m;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){s.push(f);const y=Nw.Es(h.targetId,f);a.push(y)}}))}),await Promise.all(c),r.hu.J_(s),await async function(h,f){const m=at(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>de.forEach(f,v=>de.forEach(v.Is,w=>m.persistence.referenceDelegate.addReference(y,v.targetId,w)).next(()=>de.forEach(v.ds,w=>m.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))}catch(y){if(!cu(y))throw y;ke(Sw,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const w=m.Fs.get(v),b=w.snapshotVersion,x=w.withLastLimboFreeSnapshotVersion(b);m.Fs=m.Fs.insert(v,x)}}}(r.localStore,a))}async function N$(t,e){const n=at(t);if(!n.currentUser.isEqual(e)){ke(Lw,"User change. New user:",e.toKey());const r=await $j(n.localStore,e);n.currentUser=e,function(a,c){a.Vu.forEach(u=>{u.forEach(h=>{h.reject(new be(ce.CANCELLED,c))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nh(n,r.Bs)}}function S$(t,e){const n=at(t),r=n.Eu.get(e);if(r&&r.lu)return pt().add(r.key);{let s=pt();const a=n.Tu.get(e);if(!a)return s;for(const c of a){const u=n.Pu.get(c);s=s.unionWith(u.view.tu)}return s}}function sI(t){const e=at(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w$.bind(null,e),e.hu.J_=l$.bind(null,e.eventManager),e.hu.pu=c$.bind(null,e.eventManager),e}function T$(t){const e=at(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E$.bind(null,e),e}class Lp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_m(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return A5(this.persistence,new C5,e.initialUser,this.serializer)}Du(e){return new Uj(bw.Vi,this.serializer)}bu(e){return new M5}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lp.provider={build:()=>new Lp};class C$ extends Lp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ot(this.persistence.referenceDelegate instanceof Op,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new h5(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?br.withCacheSize(this.cacheSizeBytes):br.DEFAULT;return new Uj(r=>Op.Vi(r,n),this.serializer)}}class hx{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>KN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=N$.bind(null,this.syncEngine),await i$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new a$}()}createDatastore(e){const n=_m(e.databaseInfo.databaseId),r=function(a){return new z5(a)}(e.databaseInfo);return function(a,c,u,h){return new H5(a,c,u,h)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,c,u){return new G5(r,s,a,c,u)}(this.localStore,this.datastore,e.asyncQueue,n=>KN(this.syncEngine,n,0),function(){return $N.C()?new $N:new F5}())}createSyncEngine(e,n){return function(s,a,c,u,h,f,m){const y=new f$(s,a,c,u,h,f);return m&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=at(s);ke(ol,"RemoteStore shutting down."),a.Ia.add(5),await th(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hx.provider={build:()=>new hx};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Hi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="FirestoreClient";class j${constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Er.UNAUTHENTICATED,this.clientId=dw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{ke(ca,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(ke(ca,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Pw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $y(t,e){t.asyncQueue.verifyOperationInProgress(),ke(ca,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $j(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{il("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ke("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{il("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function QN(t,e){t.asyncQueue.verifyOperationInProgress();const n=await I$(t);ke(ca,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>BN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>BN(e.remoteStore,s)),t._onlineComponents=e}async function I$(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ke(ca,"Using user provided OfflineComponentProvider");try{await $y(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ce.FAILED_PRECONDITION||s.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;il("Error using user provided cache. Falling back to memory cache: "+n),await $y(t,new Lp)}}else ke(ca,"Using default OfflineComponentProvider"),await $y(t,new C$(void 0));return t._offlineComponents}async function iI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ke(ca,"Using user provided OnlineComponentProvider"),await QN(t,t._uninitializedComponentsProvider._online)):(ke(ca,"Using default OnlineComponentProvider"),await QN(t,new hx))),t._onlineComponents}function A$(t){return iI(t).then(e=>e.syncEngine)}async function Mp(t){const e=await iI(t),n=e.eventManager;return n.onListen=p$.bind(null,e.syncEngine),n.onUnlisten=y$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=m$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=v$.bind(null,e.syncEngine),n}function P$(t,e,n={}){const r=new Ui;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,f){const m=new Fw({next:v=>{m.Ou(),c.enqueueAndForget(()=>Rw(a,y));const w=v.docs.has(u);!w&&v.fromCache?f.reject(new be(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&h&&h.source==="server"?f.reject(new be(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new Dw(pm(u.path),m,{includeMetadataChanges:!0,ka:!0});return kw(a,y)}(await Mp(t),t.asyncQueue,e,n,r)),r.promise}function k$(t,e,n={}){const r=new Ui;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,f){const m=new Fw({next:v=>{m.Ou(),c.enqueueAndForget(()=>Rw(a,y)),v.fromCache&&h.source==="server"?f.reject(new be(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new Dw(u,m,{includeMetadataChanges:!0,ka:!0});return kw(a,y)}(await Mp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$="firestore.googleapis.com",XN=!0;class JN{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new be(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=R$,this.ssl=XN}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:XN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Fj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vj)throw new be(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $U;switch(r.type){case"firstParty":return new qU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=YN.get(n);r&&(ke("ComponentProvider","Removing Datastore"),YN.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zi(this.firestore,e,this._query)}}class un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}toJSON(){return{type:un._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Jd(n,un._jsonSchema))return new un(e,r||null,new We(Ft.fromString(n.referencePath)))}}un._jsonSchemaVersion="firestore/documentReference/1.0",un._jsonSchema={type:_n("string",un._jsonSchemaVersion),referencePath:_n("string")};class Jo extends Zi{constructor(e,n,r){super(e,n,pm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new We(e))}withConverter(e){return new Jo(this.firestore,e,this._path)}}function Qe(t,e,...n){if(t=en(t),hw("collection","path",e),t instanceof Nm){const r=Ft.fromString(e,...n);return dN(r),new Jo(t,null,r)}{if(!(t instanceof un||t instanceof Jo))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ft.fromString(e,...n));return dN(r),new Jo(t.firestore,null,r)}}function rs(t,e){if(t=ar(t,Nm),hw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new be(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zi(t,null,function(r){return new vl(Ft.emptyPath(),r)}(e))}function At(t,e,...n){if(t=en(t),arguments.length===1&&(e=dw.newId()),hw("doc","path",e),t instanceof Nm){const r=Ft.fromString(e,...n);return uN(r),new un(t,null,new We(r))}{if(!(t instanceof un||t instanceof Jo))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ft.fromString(e,...n));return uN(r),new un(t.firestore,t instanceof Jo?t.converter:null,new We(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="AsyncQueue";class e1{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Bj(this,"async_queue_retry"),this.oc=()=>{const r=Uy();r&&ke(ZN,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Uy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Uy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ui;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!cu(e))throw e;ke(ZN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Hi("INTERNAL UNHANDLED ERROR: ",t1(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Aw.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(s),s}ac(){this.tc&&tt(47125,{hc:t1(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function t1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class di extends Nm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new e1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e1(e),this._firestoreClient=void 0,await e}}}function O$(t,e,n){n||(n=Ip);const r=ml(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),a=r.getOptions(n);if(nl(a,e))return s;throw new be(ce.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new be(ce.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vj)throw new be(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&fl(e.host)&&Jx(e.host),r.initialize({options:e,instanceIdentifier:n})}function rh(t){if(t._terminated)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||D$(t),t._firestoreClient}function D$(t){var e,n,r;const s=t._freezeSettings(),a=function(u,h,f,m){return new o6(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,oI(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new j$(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new es($n.fromBase64String(e))}catch(n){throw new be(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new es($n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:es._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jd(e,es._jsonSchema))return es.fromBase64String(e.bytes)}}es._jsonSchemaVersion="firestore/bytes/1.0",es._jsonSchema={type:_n("string",es._jsonSchemaVersion),bytes:_n("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function L$(){return new du(Xv)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ai._jsonSchemaVersion}}static fromJSON(e){if(Jd(e,ai._jsonSchema))return new ai(e.latitude,e.longitude)}}ai._jsonSchemaVersion="firestore/geoPoint/1.0",ai._jsonSchema={type:_n("string",ai._jsonSchemaVersion),latitude:_n("number"),longitude:_n("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jd(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new li(e.vectorValues);throw new be(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:_n("string",li._jsonSchemaVersion),vectorValues:_n("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$=/^__.*__$/;class F${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ha(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zd(e,this.data,n,this.fieldTransforms)}}class aI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ha(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ec:t})}}class Vw{constructor(e,n,r,s,a,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Vw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Fp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(lI(this.Ec)&&M$.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class V${constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_m(e)}Dc(e,n,r,s=!1){return new Vw({Ec:e,methodName:n,bc:r,path:Un.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sh(t){const e=t._freezeSettings(),n=_m(t._databaseId);return new V$(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Uw(t,e,n,r,s,a={}){const c=t.Dc(a.merge||a.mergeFields?2:0,e,n,s);zw("Data must be an object, but it was:",c,r);const u=dI(r,c);let h,f;if(a.merge)h=new Ur(c.fieldMask),f=c.fieldTransforms;else if(a.mergeFields){const m=[];for(const y of a.mergeFields){const v=fx(e,y,n);if(!c.contains(v))throw new be(ce.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);fI(m,v)||m.push(v)}h=new Ur(m),f=c.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,f=c.fieldTransforms;return new F$(new Nr(u),h,f)}class Tm extends Sm{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tm}}class $w extends Sm{_toFieldTransform(e){return new k6(e.path,new Rd)}isEqual(e){return e instanceof $w}}function cI(t,e,n,r){const s=t.Dc(1,e,n);zw("Data must be an object, but it was:",s,r);const a=[],c=Nr.empty();da(r,(h,f)=>{const m=Bw(e,h,n);f=en(f);const y=s.gc(m);if(f instanceof Tm)a.push(m);else{const v=ih(f,y);v!=null&&(a.push(m),c.set(m,v))}});const u=new Ur(a);return new aI(c,u,s.fieldTransforms)}function uI(t,e,n,r,s,a){const c=t.Dc(1,e,n),u=[fx(e,r,n)],h=[s];if(a.length%2!=0)throw new be(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)u.push(fx(e,a[v])),h.push(a[v+1]);const f=[],m=Nr.empty();for(let v=u.length-1;v>=0;--v)if(!fI(f,u[v])){const w=u[v];let b=h[v];b=en(b);const x=c.gc(w);if(b instanceof Tm)f.push(w);else{const E=ih(b,x);E!=null&&(f.push(w),m.set(w,E))}}const y=new Ur(f);return new aI(m,y,c.fieldTransforms)}function U$(t,e,n,r=!1){return ih(n,t.Dc(r?4:3,e))}function ih(t,e){if(hI(t=en(t)))return zw("Unsupported field value:",e,t),dI(t,e);if(t instanceof Sm)return function(r,s){if(!lI(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const a=[];let c=0;for(const u of r){let h=ih(u,s.yc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return I6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ht.fromDate(r);return{timestampValue:Rp(s.serializer,a)}}if(r instanceof ht){const a=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rp(s.serializer,a)}}if(r instanceof ai)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof es)return{bytesValue:Pj(s.serializer,r._byteString)};if(r instanceof un){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:_w(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof li)return function(c,u){return{mapValue:{fields:{[oj]:{stringValue:aj},[Ap]:{arrayValue:{values:c.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return vw(u.serializer,f)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${um(r)}`)}(t,e)}function dI(t,e){const n={};return ej(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(t,(r,s)=>{const a=ih(s,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function hI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof ai||t instanceof es||t instanceof un||t instanceof Sm||t instanceof li)}function zw(t,e,n){if(!hI(n)||!JC(n)){const r=um(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function fx(t,e,n){if((e=en(e))instanceof du)return e._internalPath;if(typeof e=="string")return Bw(t,e);throw Fp("Field path arguments must be of type string or ",t,!1,void 0,n)}const $$=new RegExp("[~\\*/\\[\\]]");function Bw(t,e,n){if(e.search($$)>=0)throw Fp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new du(...e.split("."))._internalPath}catch{throw Fp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fp(t,e,n,r,s){const a=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${s}`),h+=")"),new be(ce.INVALID_ARGUMENT,u+t+h)}function fI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class z$ extends pI{data(){return super.data()}}function Cm(t,e){return typeof e=="string"?Bw(t,e):e instanceof du?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new be(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qw{}class gI extends qw{}function pn(t,e,...n){let r=[];e instanceof qw&&r.push(e),r=r.concat(n),function(a){const c=a.filter(h=>h instanceof Ww).length,u=a.filter(h=>h instanceof jm).length;if(c>1||c>0&&u>0)throw new be(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class jm extends gI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jm(e,n,r)}_apply(e){const n=this._parse(e);return yI(e._query,n),new Zi(e.firestore,e.converter,nx(e._query,n))}_parse(e){const n=sh(e.firestore);return function(a,c,u,h,f,m,y){let v;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new be(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){s1(y,m);const b=[];for(const x of y)b.push(r1(h,a,x));v={arrayValue:{values:b}}}else v=r1(h,a,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||s1(y,m),v=U$(u,c,y,m==="in"||m==="not-in");return wn.create(f,m,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bc(t,e,n){const r=e,s=Cm("where",t);return jm._create(s,r,n)}class Ww extends qw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ww(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Rs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let c=s;const u=a.getFlattenedFilters();for(const h of u)yI(c,h),c=nx(c,h)}(e._query,n),new Zi(e.firestore,e.converter,nx(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hw extends gI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Hw(e,n)}_apply(e){const n=function(s,a,c){if(s.startAt!==null)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kd(a,c)}(e._query,this._field,this._direction);return new Zi(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new vl(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function _l(t,e="asc"){const n=e,r=Cm("orderBy",t);return Hw._create(r,n)}function r1(t,e,n){if(typeof(n=en(n))=="string"){if(n==="")throw new be(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mj(e)&&n.indexOf("/")!==-1)throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ft.fromString(n));if(!We.isDocumentKey(r))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xN(t,new We(r))}if(n instanceof un)return xN(t,n._key);throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${um(n)}.`)}function s1(t,e){if(!Array.isArray(t)||t.length===0)throw new be(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yI(t,e){const n=function(s,a){for(const c of s)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new be(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class B${convertValue(e,n="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw tt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return da(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Ap].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>fn(c.doubleValue));return new li(a)}convertGeoPoint(e){return new ai(fn(e.latitude),fn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=fm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Id(e));default:return null}}convertTimestamp(e){const n=ia(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ft.fromString(e);Ot(Mj(r),9688,{name:e});const s=new Ad(r.get(1),r.get(3)),a=new We(r.popFirst(5));return s.isEqual(n)||Hi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class nd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qa extends pI{constructor(e,n,r,s,a,c){super(e,n,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qa._jsonSchema={type:_n("string",Qa._jsonSchemaVersion),bundleSource:_n("string","DocumentSnapshot"),bundleName:_n("string"),bundle:_n("string")};class rp extends Qa{data(e={}){return super.data(e)}}class Ya{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new nd(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new rp(this._firestore,this._userDataWriter,r.key,r,new nd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(u=>{const h=new rp(s._firestore,s._userDataWriter,u.doc.key,u.doc,new nd(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const h=new rp(s._firestore,s._userDataWriter,u.doc.key,u.doc,new nd(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),m=c.indexOf(u.doc.key)),{type:q$(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ya._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function q$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W$(t){t=ar(t,un);const e=ar(t.firestore,di);return P$(rh(e),t._key).then(n=>vI(e,t,n))}Ya._jsonSchemaVersion="firestore/querySnapshot/1.0",Ya._jsonSchema={type:_n("string",Ya._jsonSchemaVersion),bundleSource:_n("string","QuerySnapshot"),bundleName:_n("string"),bundle:_n("string")};class Gw extends B${constructor(e){super(),this.firestore=e}convertBytes(e){return new es(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,n)}}function _t(t){t=ar(t,Zi);const e=ar(t.firestore,di),n=rh(e),r=new Gw(e);return mI(t._query),k$(n,t._query).then(s=>new Ya(e,r,t,s))}function H$(t,e,n){t=ar(t,un);const r=ar(t.firestore,di),s=Kw(t.converter,e,n);return oh(r,[Uw(sh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,lr.none())])}function rn(t,e,n,...r){t=ar(t,un);const s=ar(t.firestore,di),a=sh(s);let c;return c=typeof(e=en(e))=="string"||e instanceof du?uI(a,"updateDoc",t._key,e,n,r):cI(a,"updateDoc",t._key,e),oh(s,[c.toMutation(t._key,lr.exists(!0))])}function Sr(t){return oh(ar(t.firestore,di),[new xm(t._key,lr.none())])}function xn(t,e){const n=ar(t.firestore,di),r=At(t),s=Kw(t.converter,e);return oh(n,[Uw(sh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,lr.exists(!1))]).then(()=>r)}function eo(t,...e){var n,r,s;t=en(t);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||n1(e[c])||(a=e[c++]);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(n1(e[c])){const y=e[c];e[c]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[c+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[c+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let h,f,m;if(t instanceof un)f=ar(t.firestore,di),m=pm(t._key.path),h={next:y=>{e[c]&&e[c](vI(f,t,y))},error:e[c+1],complete:e[c+2]};else{const y=ar(t,Zi);f=ar(y.firestore,di),m=y._query;const v=new Gw(f);h={next:w=>{e[c]&&e[c](new Ya(f,v,y,w))},error:e[c+1],complete:e[c+2]},mI(t._query)}return function(v,w,b,x){const E=new Fw(x),A=new Dw(w,E,b);return v.asyncQueue.enqueueAndForget(async()=>kw(await Mp(v),A)),()=>{E.Ou(),v.asyncQueue.enqueueAndForget(async()=>Rw(await Mp(v),A))}}(rh(f),m,u,h)}function oh(t,e){return function(r,s){const a=new Ui;return r.asyncQueue.enqueueAndForget(async()=>x$(await A$(r),s,a)),a.promise}(rh(t),e)}function vI(t,e,n){const r=n.docs.get(e._key),s=new Gw(t);return new Qa(t,s,e._key,r,new nd(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=sh(e)}set(e,n,r){this._verifyNotCommitted();const s=zy(e,this._firestore),a=Kw(s.converter,n,r),c=Uw(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(c.toMutation(s._key,lr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=zy(e,this._firestore);let c;return c=typeof(n=en(n))=="string"||n instanceof du?uI(this._dataReader,"WriteBatch.update",a._key,n,r,s):cI(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(c.toMutation(a._key,lr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=zy(e,this._firestore);return this._mutations=this._mutations.concat(new xm(n._key,lr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zy(t,e){if((t=en(t)).firestore!==e)throw new be(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function px(){return new $w("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(t){return rh(t=ar(t,di)),new K$(t,e=>oh(t,e))}(function(e,n=!0){(function(s){au=s})(gl),Ps(new ss("firestore",(r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new di(new zU(r.getProvider("auth-internal")),new WU(c,r.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new be(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ad(f.options.projectId,m)}(c,s),c);return a=Object.assign({useFetchStreams:n},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Cr(oN,aN,e),Cr(oN,aN,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="firebasestorage.googleapis.com",Q$="storageBucket",Y$=2*60*1e3,X$=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Ds{constructor(e,n,r=0){super(By(e),`Firebase Storage: ${n} (${By(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return By(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hi||(hi={}));function By(t){return"storage/"+t}function J$(){const t="An unknown error occurred, please check the error payload for server response.";return new mi(hi.UNKNOWN,t)}function Z$(){return new mi(hi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function e9(){return new mi(hi.CANCELED,"User canceled the upload/download.")}function t9(t){return new mi(hi.INVALID_URL,"Invalid URL '"+t+"'.")}function n9(t){return new mi(hi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function i1(t){return new mi(hi.INVALID_ARGUMENT,t)}function wI(){return new mi(hi.APP_DELETED,"The Firebase app was deleted.")}function r9(t){return new mi(hi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ts.makeFromUrl(e,n)}catch{return new Ts(e,"")}if(r.path==="")return r;throw n9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),h={bucket:1,path:3};function f(L){L.path_=decodeURIComponent(L.path)}const m="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${m}/b/${s}/o${v}`,"i"),b={bucket:1,path:3},x=n===xI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",A=new RegExp(`^https?://${x}/${s}/${E}`,"i"),C=[{regex:u,indices:h,postModify:a},{regex:w,indices:b,postModify:f},{regex:A,indices:{bucket:1,path:2},postModify:f}];for(let L=0;L<C.length;L++){const V=C[L],z=V.regex.exec(e);if(z){const P=z[V.indices.bucket];let k=z[V.indices.path];k||(k=""),r=new Ts(P,k),V.postModify(r);break}}if(r==null)throw t9(e);return r}}class s9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(t,e,n){let r=1,s=null,a=null,c=!1,u=0;function h(){return u===2}let f=!1;function m(...E){f||(f=!0,e.apply(null,E))}function y(E){s=setTimeout(()=>{s=null,t(w,h())},E)}function v(){a&&clearTimeout(a)}function w(E,...A){if(f){v();return}if(E){v(),m.call(null,E,...A);return}if(h()||c){v(),m.call(null,E,...A);return}r<64&&(r*=2);let C;u===1?(u=2,C=0):C=(r+Math.random())*1e3,y(C)}let b=!1;function x(E){b||(b=!0,v(),!f&&(s!==null?(E||(u=2),clearTimeout(s),y(0)):E||(u=1)))}return y(0),a=setTimeout(()=>{c=!0,x(!0)},n),x}function o9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(t){return t!==void 0}function o1(t,e,n,r){if(r<e)throw i1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw i1(`Invalid value for '${t}'. Expected ${n} or less.`)}function l9(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Vp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Vp||(Vp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e,n,r,s,a,c,u,h,f,m,y,v=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,x)=>{this.resolve_=b,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Lf(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const u=a.getErrorCode()===Vp.NO_ERROR,h=a.getStatus();if(!u||c9(h,this.additionalRetryCodes_)&&this.retry){const m=a.getErrorCode()===Vp.ABORT;r(!1,new Lf(!1,null,m));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new Lf(f,a))})},n=(r,s)=>{const a=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());a9(h)?a(h):a()}catch(h){c(h)}else if(u!==null){const h=J$();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(s.canceled){const h=this.appDelete_?wI():e9();c(h)}else{const h=Z$();c(h)}};this.canceled_?n(!1,new Lf(!1,null,!0)):this.backoffId_=i9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&o9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Lf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function d9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function h9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function f9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function p9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function m9(t,e,n,r,s,a,c=!0,u=!1){const h=l9(t.urlParams),f=t.url+h,m=Object.assign({},t.headers);return f9(m,e),d9(m,n),h9(m,a),p9(m,r),new u9(f,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function y9(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,n){this._service=e,n instanceof Ts?this._location=n:this._location=Ts.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Up(e,n)}get root(){const e=new Ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return y9(this._location.path)}get storage(){return this._service}get parent(){const e=g9(this._location.path);if(e===null)return null;const n=new Ts(this._location.bucket,e);return new Up(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw r9(e)}}function a1(t,e){const n=e==null?void 0:e[Q$];return n==null?null:Ts.makeFromBucketSpec(n,t)}function v9(t,e,n,r={}){t.host=`${e}:${n}`;const s=fl(e);s&&(Jx(`https://${t.host}/b`),nC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:Z4(a,t.app.options.projectId))}class x9{constructor(e,n,r,s,a,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=xI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Y$,this._maxUploadRetryTime=X$,this._requests=new Set,s!=null?this._bucket=Ts.makeFromBucketSpec(s,this._host):this._bucket=a1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ts.makeFromBucketSpec(this._url,e):this._bucket=a1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){o1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){o1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Up(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new s9(wI());{const c=m9(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const l1="@firebase/storage",c1="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="storage";function w9(t=tw(),e){t=en(t);const r=ml(t,_I).getImmediate({identifier:e}),s=X4("storage");return s&&_9(r,...s),r}function _9(t,e,n,r={}){v9(t,e,n,r)}function E9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new x9(n,r,s,e,gl)}function b9(){Ps(new ss(_I,E9,"PUBLIC").setMultipleInstances(!0)),Cr(l1,c1,""),Cr(l1,c1,"esm2017")}b9();const EI="@firebase/installations",Qw="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=1e4,NI=`w:${Qw}`,SI="FIS_v2",N9="https://firebaseinstallations.googleapis.com/v1",S9=60*60*1e3,T9="installations",C9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},al=new pl(T9,C9,j9);function TI(t){return t instanceof Ds&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI({projectId:t}){return`${N9}/projects/${t}/installations`}function jI(t){return{token:t.token,requestStatus:2,expiresIn:A9(t.expiresIn),creationTime:Date.now()}}async function II(t,e){const r=(await e.json()).error;return al.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function AI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function I9(t,{refreshToken:e}){const n=AI(t);return n.append("Authorization",P9(e)),n}async function PI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function A9(t){return Number(t.replace("s","000"))}function P9(t){return`${SI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=CI(t),s=AI(t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const c={fid:n,authVersion:SI,appId:t.appId,sdkVersion:NI},u={method:"POST",headers:s,body:JSON.stringify(c)},h=await PI(()=>fetch(r,u));if(h.ok){const f=await h.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:jI(f.authToken)}}else throw await II("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=/^[cdef][\w-]{21}$/,mx="";function D9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=L9(t);return O9.test(n)?n:mx}catch{return mx}}function L9(t){return R9(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new Map;function OI(t,e){const n=Im(t);DI(n,e),M9(n,e)}function DI(t,e){const n=RI.get(t);if(n)for(const r of n)r(e)}function M9(t,e){const n=F9();n&&n.postMessage({key:t,fid:e}),V9()}let Fa=null;function F9(){return!Fa&&"BroadcastChannel"in self&&(Fa=new BroadcastChannel("[Firebase] FID Change"),Fa.onmessage=t=>{DI(t.data.key,t.data.fid)}),Fa}function V9(){RI.size===0&&Fa&&(Fa.close(),Fa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9="firebase-installations-database",$9=1,ll="firebase-installations-store";let qy=null;function Yw(){return qy||(qy=im(U9,$9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ll)}}})),qy}async function $p(t,e){const n=Im(t),s=(await Yw()).transaction(ll,"readwrite"),a=s.objectStore(ll),c=await a.get(n);return await a.put(e,n),await s.done,(!c||c.fid!==e.fid)&&OI(t,e.fid),e}async function LI(t){const e=Im(t),r=(await Yw()).transaction(ll,"readwrite");await r.objectStore(ll).delete(e),await r.done}async function Am(t,e){const n=Im(t),s=(await Yw()).transaction(ll,"readwrite"),a=s.objectStore(ll),c=await a.get(n),u=e(c);return u===void 0?await a.delete(n):await a.put(u,n),await s.done,u&&(!c||c.fid!==u.fid)&&OI(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xw(t){let e;const n=await Am(t.appConfig,r=>{const s=z9(r),a=B9(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===mx?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function z9(t){const e=t||{fid:D9(),registrationStatus:0};return MI(e)}function B9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(al.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=q9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:W9(t)}:{installationEntry:e}}async function q9(t,e){try{const n=await k9(t,e);return $p(t.appConfig,n)}catch(n){throw TI(n)&&n.customData.serverCode===409?await LI(t.appConfig):await $p(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function W9(t){let e=await u1(t.appConfig);for(;e.registrationStatus===1;)await kI(100),e=await u1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Xw(t);return r||n}return e}function u1(t){return Am(t,e=>{if(!e)throw al.create("installation-not-found");return MI(e)})}function MI(t){return H9(t)?{fid:t.fid,registrationStatus:0}:t}function H9(t){return t.registrationStatus===1&&t.registrationTime+bI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K9({appConfig:t,heartbeatServiceProvider:e},n){const r=G9(t,n),s=I9(t,n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const c={installation:{sdkVersion:NI,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(c)},h=await PI(()=>fetch(r,u));if(h.ok){const f=await h.json();return jI(f)}else throw await II("Generate Auth Token",h)}function G9(t,{fid:e}){return`${CI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(t,e=!1){let n;const r=await Am(t.appConfig,a=>{if(!FI(a))throw al.create("not-registered");const c=a.authToken;if(!e&&X9(c))return a;if(c.requestStatus===1)return n=Q9(t,e),a;{if(!navigator.onLine)throw al.create("app-offline");const u=Z9(a);return n=Y9(t,u),u}});return n?await n:r.authToken}async function Q9(t,e){let n=await d1(t.appConfig);for(;n.authToken.requestStatus===1;)await kI(100),n=await d1(t.appConfig);const r=n.authToken;return r.requestStatus===0?Jw(t,e):r}function d1(t){return Am(t,e=>{if(!FI(e))throw al.create("not-registered");const n=e.authToken;return ez(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Y9(t,e){try{const n=await K9(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await $p(t.appConfig,r),n}catch(n){if(TI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await LI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await $p(t.appConfig,r)}throw n}}function FI(t){return t!==void 0&&t.registrationStatus===2}function X9(t){return t.requestStatus===2&&!J9(t)}function J9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+S9}function Z9(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function ez(t){return t.requestStatus===1&&t.requestTime+bI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tz(t){const e=t,{installationEntry:n,registrationPromise:r}=await Xw(e);return r?r.catch(console.error):Jw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nz(t,e=!1){const n=t;return await rz(n),(await Jw(n,e)).token}async function rz(t){const{registrationPromise:e}=await Xw(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(t){if(!t||!t.options)throw Wy("App Configuration");if(!t.name)throw Wy("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Wy(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Wy(t){return al.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="installations",iz="installations-internal",oz=t=>{const e=t.getProvider("app").getImmediate(),n=sz(e),r=ml(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},az=t=>{const e=t.getProvider("app").getImmediate(),n=ml(e,VI).getImmediate();return{getId:()=>tz(n),getToken:s=>nz(n,s)}};function lz(){Ps(new ss(VI,oz,"PUBLIC")),Ps(new ss(iz,az,"PRIVATE"))}lz();Cr(EI,Qw);Cr(EI,Qw,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz="/firebase-messaging-sw.js",uz="/firebase-cloud-messaging-push-scope",UI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",dz="https://fcmregistrations.googleapis.com/v1",$I="google.c.a.c_id",hz="google.c.a.c_l",fz="google.c.a.ts",pz="google.c.a.e",h1=1e4;var f1;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(f1||(f1={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ld;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Ld||(Ld={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mz(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let a=0;a<r.length;++a)s[a]=r.charCodeAt(a);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="fcm_token_details_db",gz=5,p1="fcm_token_object_Store";async function yz(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(Hy))return null;let e=null;return(await im(Hy,gz,{upgrade:async(r,s,a,c)=>{var u;if(s<2||!r.objectStoreNames.contains(p1))return;const h=c.objectStore(p1),f=await h.index("fcmSenderId").get(t);if(await h.clear(),!!f){if(s===2){const m=f;if(!m.auth||!m.p256dh||!m.endpoint)return;e={token:m.fcmToken,createTime:(u=m.createTime)!==null&&u!==void 0?u:Date.now(),subscriptionOptions:{auth:m.auth,p256dh:m.p256dh,endpoint:m.endpoint,swScope:m.swScope,vapidKey:typeof m.vapidKey=="string"?m.vapidKey:Oi(m.vapidKey)}}}else if(s===3){const m=f;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:Oi(m.auth),p256dh:Oi(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:Oi(m.vapidKey)}}}else if(s===4){const m=f;e={token:m.fcmToken,createTime:m.createTime,subscriptionOptions:{auth:Oi(m.auth),p256dh:Oi(m.p256dh),endpoint:m.endpoint,swScope:m.swScope,vapidKey:Oi(m.vapidKey)}}}}}})).close(),await Ry(Hy),await Ry("fcm_vapid_details_db"),await Ry("undefined"),vz(e)?e:null}function vz(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz="firebase-messaging-database",wz=1,Md="firebase-messaging-store";let Ky=null;function zI(){return Ky||(Ky=im(xz,wz,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Md)}}})),Ky}async function _z(t){const e=BI(t),r=await(await zI()).transaction(Md).objectStore(Md).get(e);if(r)return r;{const s=await yz(t.appConfig.senderId);if(s)return await Zw(t,s),s}}async function Zw(t,e){const n=BI(t),s=(await zI()).transaction(Md,"readwrite");return await s.objectStore(Md).put(e,n),await s.done,e}function BI({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ez={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},cr=new pl("messaging","Messaging",Ez);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bz(t,e){const n=await t0(t),r=qI(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(e0(t.appConfig),s)).json()}catch(c){throw cr.create("token-subscribe-failed",{errorInfo:c==null?void 0:c.toString()})}if(a.error){const c=a.error.message;throw cr.create("token-subscribe-failed",{errorInfo:c})}if(!a.token)throw cr.create("token-subscribe-no-token");return a.token}async function Nz(t,e){const n=await t0(t),r=qI(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(`${e0(t.appConfig)}/${e.token}`,s)).json()}catch(c){throw cr.create("token-update-failed",{errorInfo:c==null?void 0:c.toString()})}if(a.error){const c=a.error.message;throw cr.create("token-update-failed",{errorInfo:c})}if(!a.token)throw cr.create("token-update-no-token");return a.token}async function Sz(t,e){const r={method:"DELETE",headers:await t0(t)};try{const a=await(await fetch(`${e0(t.appConfig)}/${e}`,r)).json();if(a.error){const c=a.error.message;throw cr.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw cr.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function e0({projectId:t}){return`${dz}/projects/${t}/registrations`}async function t0({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function qI({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==UI&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tz=7*24*60*60*1e3;async function Cz(t){const e=await Iz(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Oi(e.getKey("auth")),p256dh:Oi(e.getKey("p256dh"))},r=await _z(t.firebaseDependencies);if(r){if(Az(r.subscriptionOptions,n))return Date.now()>=r.createTime+Tz?jz(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await Sz(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return m1(t.firebaseDependencies,n)}else return m1(t.firebaseDependencies,n)}async function jz(t,e){try{const n=await Nz(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Zw(t.firebaseDependencies,r),n}catch(n){throw n}}async function m1(t,e){const r={token:await bz(t,e),createTime:Date.now(),subscriptionOptions:e};return await Zw(t,r),r.token}async function Iz(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:mz(e)})}function Az(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,a=e.p256dh===t.p256dh;return n&&r&&s&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Pz(e,t),kz(e,t),Rz(e,t),e}function Pz(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const a=e.notification.icon;a&&(t.notification.icon=a)}function kz(t,e){e.data&&(t.data=e.data)}function Rz(t,e){var n,r,s,a,c;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const u=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(a=e.notification)===null||a===void 0?void 0:a.click_action;u&&(t.fcmOptions.link=u);const h=(c=e.fcmOptions)===null||c===void 0?void 0:c.analytics_label;h&&(t.fcmOptions.analyticsLabel=h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oz(t){return typeof t=="object"&&!!t&&$I in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dz(t){if(!t||!t.options)throw Gy("App Configuration Object");if(!t.name)throw Gy("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Gy(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Gy(t){return cr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=Dz(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mz(t){try{t.swRegistration=await navigator.serviceWorker.register(cz,{scope:uz}),t.swRegistration.update().catch(()=>{}),await Fz(t.swRegistration)}catch(e){throw cr.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function Fz(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${h1} ms`)),h1),s=t.installing||t.waiting;t.active?(clearTimeout(r),e()):s?s.onstatechange=a=>{var c;((c=a.target)===null||c===void 0?void 0:c.state)==="activated"&&(s.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vz(t,e){if(!e&&!t.swRegistration&&await Mz(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw cr.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uz(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=UI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(t,e){if(!navigator)throw cr.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw cr.create("permission-blocked");return await Uz(t,e==null?void 0:e.vapidKey),await Vz(t,e==null?void 0:e.serviceWorkerRegistration),Cz(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $z(t,e,n){const r=zz(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[$I],message_name:n[hz],message_time:n[fz],message_device_time:Math.floor(Date.now()/1e3)})}function zz(t){switch(t){case Ld.NOTIFICATION_CLICKED:return"notification_open";case Ld.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bz(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ld.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(g1(n)):t.onMessageHandler.next(g1(n)));const r=n.data;Oz(r)&&r[pz]==="1"&&await $z(t,n.messageType,r)}const y1="@firebase/messaging",v1="0.12.22";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=t=>{const e=new Lz(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>Bz(e,n)),e},Wz=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>WI(e,r)}};function Hz(){Ps(new ss("messaging",qz,"PUBLIC")),Ps(new ss("messaging-internal",Wz,"PRIVATE")),Cr(y1,v1),Cr(y1,v1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kz(){try{await sC()}catch{return!1}return typeof window<"u"&&rC()&&cF()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gz(t=tw()){return Kz().then(e=>{if(!e)throw cr.create("unsupported-browser")},e=>{throw cr.create("indexed-db-unsupported")}),ml(en(t),"messaging").getImmediate()}async function Qz(t,e){return t=en(t),WI(t,e)}Hz();const Yz={apiKey:"AIzaSyDUR89i6kvh3bp51GCgBX0fTwh3bFt1Ksg",authDomain:"medjust-d26eb.firebaseapp.com",projectId:"medjust-d26eb",storageBucket:"medjust-d26eb.appspot.com",messagingSenderId:"631362355665",appId:"1:631362355665:web:4d7f8eadba1bca0969e0f0"},Pm=aC(Yz),sp=LU(Pm),Ae=O$(Pm,{experimentalForceLongPolling:!0,useFetchStreams:!1});w9(Pm);let gx=null;if(typeof window<"u"&&"serviceWorker"in navigator)try{gx=Gz(Pm)}catch(t){console.warn("Firebase Messaging initialization failed:",t)}const HI=_.createContext(void 0);function Xz({children:t}){const[e,n]=_.useState(null),[r,s]=_.useState(!0),[a,c]=_.useState(null),u=y=>new Promise(v=>setTimeout(v,y)),h=async(y,v)=>{if(typeof navigator<"u"&&!navigator.onLine){const E=new Error("No network connection (navigator offline)");throw console.error("Login pre-check failed:",E),c("No network connection - please connect to the internet"),E}const w=3;let b=0,x=null;for(;b<w;){b+=1;try{await _3(sp,y,v),c(null);return}catch(E){if(x=E,console.error(`Login attempt ${b} failed:`,E),!((E==null?void 0:E.code)==="auth/network-request-failed"||(E==null?void 0:E.message)&&E.message.toLowerCase().includes("fetch")))throw(E==null?void 0:E.code)==="auth/wrong-password"||(E==null?void 0:E.code)==="auth/user-not-found"?c("Invalid email or password"):c("Authentication error - see console for details"),E;if(c(`Network error (attempt ${b} of ${w}) - checking connection...`),b<w){const j=500*Math.pow(2,b-1);console.log(`Retrying login in ${j}ms...`),await u(j);continue}}}throw console.error("Login failed after retries:",x),c("Network error - unable to reach Firebase. Check your internet connection, disabling browser extensions (adblockers), or ensure your site domain is added to Firebase Authentication -> Authorized domains."),x},f=async()=>{try{await S3(sp),c(null)}catch(y){console.error("Logout error:",y),n(null)}};_.useEffect(()=>{const y=setTimeout(()=>{r&&(console.log(" Auth taking too long - continuing without authentication"),s(!1))},5e3),v=N3(sp,w=>{clearTimeout(y),n(w),s(!1),c(null)},w=>{clearTimeout(y),console.error("Auth state change error:",w),c("Authentication error - working offline"),s(!1)});return()=>{clearTimeout(y),v()}},[]);const m={currentUser:e,login:h,logout:f,loading:r,authError:a};return o.jsx(HI.Provider,{value:m,children:r?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 rounded-lg border bg-card px-8 py-6 shadow-sm",children:[o.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-2 border-primary border-t-transparent",role:"status","aria-label":"Loading"}),o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Loading"})]})}):t})}function km(){const t=_.useContext(HI);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const KI=qd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=_.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const c=r?Ja:"button";return o.jsx(c,{className:Ge(KI({variant:e,size:n,className:t})),ref:a,...s})});te.displayName="Button";const pe=_.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Ge("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));pe.displayName="Card";const Be=_.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Ge("flex flex-col space-y-1.5 p-6",t),...e}));Be.displayName="CardHeader";const Ke=_.forwardRef(({className:t,...e},n)=>o.jsx("h3",{ref:n,className:Ge("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ke.displayName="CardTitle";const St=_.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Ge("text-sm text-muted-foreground",t),...e}));St.displayName="CardDescription";const me=_.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Ge("p-6 pt-0",t),...e}));me.displayName="CardContent";const Jz=_.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Ge("flex items-center p-6 pt-0",t),...e}));Jz.displayName="CardFooter";class Zz extends _e.Component{constructor(n){super(n);RE(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.replace(window.location.href)});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),(n.message.includes("fetch")||n.message.includes("Firebase")||n.message.includes("Firestore"))&&console.log(" Firebase error detected - this is a known connectivity issue"),this.setState({error:n,errorInfo:r})}render(){var n,r,s;if(this.state.hasError){const a=((n=this.state.error)==null?void 0:n.message.includes("fetch"))||((r=this.state.error)==null?void 0:r.message.includes("Firebase"))||((s=this.state.error)==null?void 0:s.message.includes("Firestore"));return o.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:o.jsxs(pe,{className:"max-w-md w-full",children:[o.jsx(Be,{children:o.jsxs(Ke,{className:"flex items-center gap-2 text-destructive",children:[o.jsx(tO,{className:"h-5 w-5"}),a?"Connection Error":"Application Error"]})}),o.jsxs(me,{className:"space-y-4",children:[o.jsx("p",{className:"text-muted-foreground",children:a?"There's a connectivity issue with Firebase services. The app will work in offline mode.":"Something went wrong. Please try refreshing the page."}),!1,o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(te,{onClick:this.handleRetry,className:"flex-1",children:[o.jsx(J2,{className:"h-4 w-4 mr-2"}),"Retry"]}),o.jsx(te,{variant:"outline",onClick:()=>window.location.href="/admin/years",className:"flex-1",children:"Go to Years"})]})]})]})})}return this.props.children}}var n0="Avatar",[eB,tW]=Gi(n0),[tB,GI]=eB(n0),QI=_.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,a]=_.useState("idle");return o.jsx(tB,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:o.jsx(Je.span,{...r,ref:e})})});QI.displayName=n0;var YI="AvatarImage",XI=_.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=t,c=GI(YI,n),u=nB(r),h=jn(f=>{s(f),c.onImageLoadingStatusChange(f)});return Zt(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?o.jsx(Je.img,{...a,ref:e,src:r}):null});XI.displayName=YI;var JI="AvatarFallback",ZI=_.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,a=GI(JI,n),[c,u]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&a.imageLoadingStatus!=="loaded"?o.jsx(Je.span,{...s,ref:e}):null});ZI.displayName=JI;function nB(t){const[e,n]=_.useState("idle");return Zt(()=>{if(!t){n("error");return}let r=!0;const s=new window.Image,a=c=>()=>{r&&n(c)};return n("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=t,()=>{r=!1}},[t]),e}var eA=QI,tA=XI,nA=ZI;const Yc=_.forwardRef(({className:t,...e},n)=>o.jsx(eA,{ref:n,className:Ge("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Yc.displayName=eA.displayName;const Fd=_.forwardRef(({className:t,...e},n)=>o.jsx(tA,{ref:n,className:Ge("aspect-square h-full w-full",t),...e}));Fd.displayName=tA.displayName;const Xc=_.forwardRef(({className:t,...e},n)=>o.jsx(nA,{ref:n,className:Ge("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Xc.displayName=nA.displayName;const rB=[{icon:K2,label:"Dashboard",path:"/admin"},{icon:dp,label:"News",path:"/admin/news"},{icon:Ga,label:"Notifications",path:"/admin/notifications"},{icon:Ns,label:"Years",path:"/admin/years"},{icon:Vc,label:"Users",path:"/admin/users"},{icon:Vc,label:"Professors",path:"/admin/professors"},{icon:Rx,label:"Store",path:"/admin/store"},{icon:Cs,label:"Orders",path:"/admin/orders"},{icon:$i,label:"Research",path:"/admin/research"},{icon:vd,label:"Maps",path:"/admin/maps"},{icon:RS,label:"Settings",path:"/admin/settings"}];function sB({isOpen:t}){return o.jsx("div",{className:Ge("fixed left-0 top-16 h-[calc(100vh-4rem)] bg-card border-r transition-all duration-300 z-40",t?"w-64":"w-16"),children:o.jsx("nav",{className:"p-4 space-y-2",children:rB.map(e=>o.jsxs("div",{children:[o.jsxs(Tb,{to:e.path,className:({isActive:n})=>Ge("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors","hover:bg-accent hover:text-accent-foreground",n&&"bg-primary text-primary-foreground hover:bg-primary/90",!t&&"justify-center"),children:[o.jsx(e.icon,{className:"h-5 w-5 flex-shrink-0"}),t&&o.jsx("span",{className:"font-medium",children:e.label})]}),e.children&&t&&o.jsx("div",{className:"ml-6 mt-2 space-y-1",children:e.children.map(n=>o.jsxs(Tb,{to:n.path,className:({isActive:r})=>Ge("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm","hover:bg-accent hover:text-accent-foreground",r&&"bg-primary text-primary-foreground hover:bg-primary/90"),children:[o.jsx(n.icon,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{children:n.label})]},n.path))})]},e.path))})})}function iB(){var a;const[t,e]=_.useState(!0),{currentUser:n,logout:r}=km(),s=async()=>{try{await r()}catch(c){console.error("Error logging out:",c)}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-card shadow-sm",children:o.jsxs("div",{className:"flex h-16 items-center px-4",children:[o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>e(!t),className:"mr-4",children:o.jsx(Y2,{className:"h-5 w-5"})}),o.jsx("div",{className:"flex-1",children:o.jsx("h1",{className:"text-xl font-semibold text-primary",children:"MedJust Admin Dashboard"})}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yc,{className:"h-8 w-8",children:o.jsx(Xc,{children:o.jsx(ns,{className:"h-4 w-4"})})}),o.jsx("span",{className:"text-sm font-medium",children:((a=n==null?void 0:n.email)==null?void 0:a.split("@")[0])||"Admin"})]}),o.jsx(te,{variant:"ghost",size:"icon",onClick:s,className:"text-muted-foreground hover:text-destructive",children:o.jsx(Q2,{className:"h-4 w-4"})})]})]})}),o.jsxs("div",{className:"flex",children:[o.jsx(sB,{isOpen:t}),o.jsx("main",{className:`flex-1 transition-all duration-300 ${t?"ml-64":"ml-16"}`,children:o.jsx("div",{className:"p-6",children:o.jsx(T4,{})})})]})]})}const Ne=_.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:Ge("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Ne.displayName="Input";var oB="Label",rA=_.forwardRef((t,e)=>o.jsx(Je.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));rA.displayName=oB;var sA=rA;const aB=qd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),je=_.forwardRef(({className:t,...e},n)=>o.jsx(sA,{ref:n,className:Ge(aB(),t),...e}));je.displayName=sA.displayName;const lB=qd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),iA=_.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:Ge(lB({variant:e}),t),...n}));iA.displayName="Alert";const cB=_.forwardRef(({className:t,...e},n)=>o.jsx("h5",{ref:n,className:Ge("mb-1 font-medium leading-none tracking-tight",t),...e}));cB.displayName="AlertTitle";const oA=_.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Ge("text-sm [&_p]:leading-relaxed",t),...e}));oA.displayName="AlertDescription";function uB(){const[t,e]=_.useState(""),[n,r]=_.useState(""),[s,a]=_.useState(""),[c,u]=_.useState(!1),{login:h,authError:f}=km(),m=ru(),y=async v=>{if(v.preventDefault(),!t||!n){a("Please fill in all fields");return}try{if(typeof navigator<"u"&&!navigator.onLine){a("No network connection. Please connect to the internet and try again.");return}a(""),u(!0),await h(t,n),m("/admin")}catch(w){console.error("Login error:",w),f?a(f):(w==null?void 0:w.code)==="auth/network-request-failed"?a("Network error - check your connection and try again."):(w==null?void 0:w.code)==="auth/wrong-password"||(w==null?void 0:w.code)==="auth/user-not-found"?a("Invalid email or password."):a("Failed to log in. Please check your credentials.")}finally{u(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/20 flex items-center justify-center p-4",children:o.jsxs(pe,{className:"w-full max-w-md shadow-xl",children:[o.jsxs(Be,{className:"space-y-1 text-center",children:[o.jsx("div",{className:"mx-auto w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-4",children:o.jsx(YE,{className:"h-6 w-6 text-primary-foreground"})}),o.jsx(Ke,{className:"text-2xl font-bold",children:"MedJust Admin"}),o.jsx(St,{children:"Sign in to access the admin dashboard"})]}),o.jsx(me,{children:o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s&&o.jsx(iA,{variant:"destructive",children:o.jsx(oA,{children:s})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"email",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(up,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{id:"email",type:"email",placeholder:"MedAdmin@gmail.com",value:t,onChange:v=>e(v.target.value),className:"pl-10",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"password",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(YE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{id:"password",type:"password",placeholder:"",value:n,onChange:v=>r(v.target.value),className:"pl-10",required:!0})]})]}),o.jsx(te,{type:"submit",className:"w-full",disabled:c,children:c?o.jsxs(o.Fragment,{children:[o.jsx(Qi,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}const dB=qd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Pt({className:t,variant:e,...n}){return o.jsx("div",{className:Ge(dB({variant:e}),t),...n})}const hB="YOUR_VAPID_KEY_HERE";async function aA(){if(!gx)return console.warn("Firebase Messaging is not available"),null;try{if(await Notification.requestPermission()==="granted"){console.log("Notification permission granted");const e=await Qz(gx,{vapidKey:hB});if(e){console.log("FCM Token:",e);const n=sp.currentUser;return n&&await fB(n.uid,e),e}else return console.warn("No FCM token available"),null}else return console.warn("Notification permission denied"),null}catch(t){return console.error("Error requesting notification permission:",t),null}}async function fB(t,e){try{const n=At(Ae,"fcmTokens",t);await H$(n,{token:e,userId:t,createdAt:new Date,updatedAt:new Date},{merge:!0}),console.log(" FCM token saved for user:",t)}catch(n){console.error("Error saving FCM token:",n)}}async function pB(t){const e=new Map;try{for(let r=0;r<t.length;r+=10){const s=t.slice(r,r+10),a=Qe(Ae,"fcmTokens"),c=pn(a,bc("userId","in",s));(await _t(c)).forEach(h=>{const f=h.data();f.token&&f.userId&&e.set(f.userId,f.token)})}}catch(n){console.error("Error getting FCM tokens:",n)}return e}async function lA(t,e,n,r){try{if("Notification"in window)if(Notification.permission==="granted"){const s=new Notification(e,{body:n,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:(r==null?void 0:r.newsId)||"notification",data:r||{},requireInteraction:!1});s.onclick=()=>{window.focus(),r!=null&&r.newsId&&(window.location.href="/admin/news"),s.close()},setTimeout(()=>{s.close()},5e3)}else Notification.permission==="default"&&await Notification.requestPermission()==="granted"&&await lA(t,e,n,r)}catch(s){console.error("Error sending push notification:",s)}}async function mB(){if(!("Notification"in window)){console.warn("This browser does not support notifications");return}if(!("serviceWorker"in navigator)){console.warn("This browser does not support service workers");return}try{const t=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registered:",t)}catch(t){console.error("Service Worker registration failed:",t)}await aA()}async function gB(t,e,n){if(!n){console.log(" No yearId provided, skipping notifications");return}try{let r=null;const s=rs(Ae,"years"),a=await _t(s);let c=null;if(a.forEach(w=>{w.id===n&&(c={id:w.id,...w.data()},r=c.batchId||c.batch_id||null)}),!c)try{const w=await W$(At(Ae,"years",n));w.exists()&&(c={id:w.id,...w.data()},r=c.batchId||c.batch_id||null)}catch(w){console.warn("Could not fetch year directly:",w)}if(!r){console.log(" Could not find batchId for yearId:",n);return}console.log(` Found batchId: ${r} for yearId: ${n}`);const u=[n];a.forEach(w=>{const b=w.data();(b.batchId||b.batch_id)===r&&w.id!==n&&u.push(w.id)});try{const w=pn(Qe(Ae,"years"),bc("batchId","==",r));(await _t(w)).forEach(x=>{u.includes(x.id)||u.push(x.id)})}catch{}console.log(` Found ${u.length} years in batch ${r}:`,u);const h=pn(Qe(Ae,"users")),f=await _t(h),m=[];if(f.forEach(w=>{const b=w.data(),x=b.yearId||b.year||b.year_id;let E=x;typeof x=="string"&&x.includes(":")&&(E=x.split(":")[0]),E&&u.includes(E)&&m.push(w.id)}),console.log(` Found ${m.length} users to notify in batch ${r}`),m.length===0){console.log(" No users found for this batch, skipping notifications");return}const y=G$(Ae),v=Qe(Ae,"notifications");m.forEach(w=>{const b=At(v),x={userId:w,title:"New News Article",message:e,type:"news",relatedId:t,read:!1,createdAt:new Date,...r?{batchId:r}:{}},E={...x,createdAt:ht.fromDate(x.createdAt)};y.set(b,E)}),await y.commit(),console.log(` Created ${m.length} notifications for batch ${r}`);try{const w=await pB(m);if(console.log(` Found ${w.size} FCM tokens for push notifications`),w.size>0){const b=Array.from(w.entries()).map(([x,E])=>lA(E,"New News Article",e,{newsId:t,type:"news",batchId:r||""}).catch(A=>{console.error(`Failed to send push to user ${x}:`,A)}));await Promise.allSettled(b),console.log(` Attempted to send ${w.size} push notifications`)}else console.log(" No FCM tokens found. Users need to enable notifications first.")}catch(w){console.error(" Error sending push notifications:",w)}}catch(r){console.error(" Error sending notifications:",r)}}function r0(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const f=pn(Qe(Ae,"news"),_l("updatedAt","desc")),m=eo(f,y=>{const v=[];y.forEach(w=>{var x,E;const b=w.data();v.push({id:w.id,title:b.title||"",content:b.content||"",imageUrl:b.imageUrl||"",videoUrl:b.videoUrl||"",createdAt:((x=b.createdAt)==null?void 0:x.toDate())||new Date,updatedAt:((E=b.updatedAt)==null?void 0:E.toDate())||new Date,authorName:b.authorName||"",authorId:b.newsId||w.id,tags:b.tags||[],isPinned:b.isPinned||!1,viewsCount:b.viewsCount||0,attachments:b.attachments||[],yearId:b.yearId||"",yearNumber:b.yearNumber||void 0})}),console.log(` Successfully loaded ${v.length} news articles from Firebase`),e(v),r(!1)},y=>{console.error("Error fetching news:",y),a(y.message||"Failed to fetch news from Firebase"),r(!1)});return()=>m()},[]),{news:t,loading:n,error:s,createNews:async f=>{try{console.log(" Creating news article:",f.title);const m={...f,createdAt:f.createdAt instanceof Date?ht.fromDate(f.createdAt):px(),updatedAt:f.updatedAt instanceof Date?ht.fromDate(f.updatedAt):px()};Object.keys(m).forEach(v=>{m[v]===void 0&&delete m[v]});const y=await xn(Qe(Ae,"news"),m);console.log(" News article created successfully with ID:",y.id),f.yearId&&gB(y.id,f.title,f.yearId).catch(v=>{console.error("Failed to send notifications (non-critical):",v)})}catch(m){throw console.error(" Error creating news:",m),console.error("Error details:",m.code,m.message),new Error(`Failed to create news article: ${m.message||"Check Firebase permissions"}`)}},updateNews:async(f,m)=>{try{const y={...m};m.createdAt instanceof Date&&(y.createdAt=ht.fromDate(m.createdAt)),m.updatedAt instanceof Date&&(y.updatedAt=ht.fromDate(m.updatedAt)),Object.keys(y).forEach(v=>{y[v]===void 0&&delete y[v]}),await rn(At(Ae,"news",f),y)}catch(y){throw console.error("Error updating news:",y),console.error("Error details:",y.code,y.message),new Error(`Failed to update news article: ${y.message||"Check Firebase permissions"}`)}},deleteNews:async f=>{try{await Sr(At(Ae,"news",f))}catch(m){throw console.error("Error deleting news:",m),console.error("Error details:",m.code,m.message),new Error(`Failed to delete news article: ${m.message||"Check Firebase permissions"}`)}}}}function cA(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1),h=[{id:"product1",productId:"product1",name:"Medical Textbook",description:"Comprehensive medical textbook for students",price:89.99,images:["https://example.com/book1.jpg"],categoryId:"books",createdAt:new Date},{id:"product2",productId:"product2",name:"Stethoscope",description:"Professional grade stethoscope",price:120,images:["https://example.com/stethoscope.jpg"],categoryId:"equipment",createdAt:new Date}];_.useEffect(()=>{(async()=>{const b=setTimeout(()=>{n&&!c&&(console.log(" Firebase taking too long - switching to offline mode"),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h))},3e3);try{console.log(" Fetching products from Firebase...");const x=await _t(Qe(Ae,"products")),E=[];x.forEach(A=>{var C;const j=A.data();E.push({id:A.id,productId:j.productId||A.id,name:j.name||"",description:j.description||"",price:j.price||0,types:j.types||(j.price?[{name:"Default",price:j.price}]:[]),images:j.images||[],categoryId:j.categoryId||"",createdAt:((C=j.createdAt)==null?void 0:C.toDate())||new Date})}),clearTimeout(b),e(E.sort((A,j)=>j.createdAt.getTime()-A.createdAt.getTime())),r(!1),a(null),console.log(" Products loaded successfully:",E.length)}catch(x){clearTimeout(b),x.isFirebaseOfflineError?console.log(" Firebase offline mode detected - using mock data"):console.error("Firebase error - switching to offline mode:",x.message),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h)}})()},[]);const f=async w=>{var b,x;if(c){const E={id:`product_${Date.now()}`,productId:`product_${Date.now()}`,...w,createdAt:new Date};e(A=>[E,...A]),console.log(" Added product to offline mode:",E.name);return}try{const E={name:w.name,description:w.description,price:w.price||((x=(b=w.types)==null?void 0:b[0])==null?void 0:x.price)||0,types:w.types||(w.price?[{name:"Default",price:w.price}]:[]),images:w.images,categoryId:w.categoryId||"",createdAt:new Date,productId:""};console.log(" Creating new product:",E);const A=await xn(Qe(Ae,"products"),E);await rn(A,{productId:A.id}),console.log(" Created product with ID:",A.id),window.location.replace(window.location.href)}catch(E){console.error("Error creating product:",E),u(!0),await f(w)}};return{products:t,loading:n,error:s,isOfflineMode:c,createProduct:f,updateProduct:async(w,b)=>{var x;if(c){e(E=>E.map(A=>A.id===w?{...A,...b}:A)),console.log(" Updated product in offline mode");return}try{const E=At(Ae,"products",w),A={...b};b.types&&(A.types=b.types,A.price=((x=b.types[0])==null?void 0:x.price)||b.price||0),await rn(E,A),console.log(" Updated product in Firebase:",w),window.location.replace(window.location.href)}catch(E){console.error("Error updating product:",E)}},deleteProduct:async w=>{if(c){e(b=>b.filter(x=>x.id!==w)),console.log(" Deleted product from offline mode");return}try{await Sr(At(Ae,"products",w)),console.log(" Deleted product from Firebase:",w),window.location.replace(window.location.href)}catch(b){console.error("Error deleting product:",b)}},retryConnection:()=>{console.log(" Retrying Firebase connection..."),r(!0),a(null),u(!1),window.location.replace(window.location.href)}}}const yB=[{id:"1",name:"Dr. Sarah Johnson",department:"Internal Medicine",email:"sarah.johnson@medjust.com",officeLocation:"Medical Building, Room 301",imageUrl:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=300&h=300&fit=crop&crop=face"},{id:"2",name:"Prof. Michael Chen",department:"Surgery",email:"michael.chen@medjust.com",officeLocation:"Surgical Wing, Room 205",imageUrl:"https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=300&h=300&fit=crop&crop=face"},{id:"3",name:"Dr. Emily Rodriguez",department:"Emergency Medicine",email:"emily.rodriguez@medjust.com",officeLocation:"Emergency Department, Office 12",imageUrl:"https://images.unsplash.com/photo-1594824928909-90ad1d93d7c3?w=300&h=300&fit=crop&crop=face"}];function uA(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1);_.useEffect(()=>{const y=async()=>{try{const w=pn(Qe(Ae,"professors"));await _t(w);const b=pn(Qe(Ae,"professors"),_l("name","asc"));return eo(b,E=>{const A=[];E.forEach(j=>{const C=j.data();A.push({id:j.id,name:C.name||"",title:C.title||"",department:C.department||"",email:C.email||"",phone:C.phone||"",officeLocation:C.officeLocation||"",bio:C.bio||"",researchAreas:C.researchAreas||[],website:C.website||"",linkedin:C.linkedin||"",imageUrl:C.imageUrl||""})}),e(A),r(!1)},E=>{console.error("Error in Firebase listener:",E),v()})}catch(w){return console.error("Firebase connection failed:",w),v(),null}},v=()=>{console.log(" Switching to offline mode with mock data"),u(!0),e(yB),a(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(w=>[...w,v]),console.log(" Added professor in offline mode:",v.name);return}try{await xn(Qe(Ae,"professors"),{...y,professorId:`prof_${Date.now()}`}),console.log(" Added professor to Firebase:",y.name)}catch(v){console.error("Error creating professor:",v),u(!0),await h(y)}};return{professors:t,loading:n,error:s,createProfessor:h,updateProfessor:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(w=>w.map(b=>b.id===y?{...b,...v}:b)),console.log(" Updated professor in offline mode");return}try{await rn(At(Ae,"professors",y),v),console.log(" Updated professor in Firebase")}catch(w){console.error("Error updating professor:",w),e(b=>b.map(x=>x.id===y?{...x,...v}:x)),console.log(" Updated professor locally (Firebase failed)")}},deleteProfessor:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(w=>w.id!==y)),console.log(" Deleted professor in offline mode");return}try{await Sr(At(Ae,"professors",y)),console.log(" Deleted professor from Firebase")}catch(v){console.error("Error deleting professor:",v),e(w=>w.filter(b=>b.id!==y)),console.log(" Deleted professor locally (Firebase failed)")}},isOfflineMode:c}}async function vB(){return(await _t(Qe(Ae,"batches"))).docs.map(e=>{const n=e.data();return{id:e.id,batchName:n.batch_name||n.batchName||"",imageUrl:n.image_url||n.imageUrl||"",aca_supervisor:n.aca_supervisor||n.acadmic_supervisor||n.academic_supervisor||"",cr:n.cr||"",actor:n.actor||"",group_link:n.group_link||n.groupUrl||n.group_url||"",ref:e.ref}})}async function xB(t){const e=t.map(async r=>{try{return(await _t(Qe(r.ref,"years"))).docs.map(a=>{const c=a.data();let u=c.order||1;if(c.name){const h=String(c.name).match(/\d+/);h&&(u=parseInt(h[0]))}return{id:a.id,yearNumber:u,name:c.name||c.title||"",type:u<=3?"basic":"clinical",batchName:r.batchName,imageUrl:c.imageUrl||c.image_url||"",academicSupervisor:c.aca_supervisor||c.acadmic_supervisor||c.academic_supervisor||"",actor:c.actor||"",cr:c.cr||"",groupUrl:c.group_link||c.group_url||c.groupUrl||"",subjects:[],batchId:r.id}})}catch(s){return console.warn("Failed to fetch years for batch",r.id,s),[]}});return(await Promise.all(e)).flat()}async function wB(){return(await _t(Qe(Ae,"Subjects"))).docs}async function _B(t){const n=(await _t(Qe(t.ref,"lectures"))).docs.map(async s=>{var v;const a=s.data(),[c,u,h]=await Promise.all([_t(Qe(s.ref,"videos")),_t(Qe(s.ref,"files")),_t(Qe(s.ref,"quizzes"))]),f=[];c.forEach(w=>{var x;const b=w.data();f.push({id:w.id,title:b.title||b.name||"",url:b.url||b.youtubeUrl||"",thumbnailUrl:b.thumbnailUrl||"",description:b.description||"",uploadedAt:((x=b.uploadedAt)==null?void 0:x.toDate())||new Date,youtubeUrl:b.youtubeUrl||b.url||""})});const m=[];u.forEach(w=>{var x;const b=w.data();m.push({id:w.id,title:b.title||b.name||"",url:b.fileUrl||b.url||"",description:b.description||"",uploadedAt:((x=b.uploadedAt)==null?void 0:x.toDate())||new Date,fileUrl:b.fileUrl||b.url||""})});const y=[];return h.forEach(w=>{const b=w.data();y.push({id:w.id,title:b.title||b.name||"",description:b.description||"",duration:b.duration||30,passRate:b.passRate||70,questions:b.questions||[]})}),{id:s.id,name:a.name||a.title||"",description:a.description||"",subjectId:t.id,order:a.order||1,imageUrl:a.imageUrl||"",createdAt:((v=a.createdAt)==null?void 0:v.toDate())||new Date,uploadedBy:a.uploadedBy||"Unknown",videos:f,files:m,quizzes:y}});return(await Promise.all(n)).sort((s,a)=>s.order-a.order)}async function EB(){const t=await wB(),e=10,n=[];for(let r=0;r<t.length;r+=e){const a=t.slice(r,r+e).map(async u=>{const h=u.data(),f=await _B(u);return{id:u.id,name:h.name||"",subjectId:h.subjectId||u.id,yearId:h.yearId||"",imageUrl:h.imageUrl||"",lectures:f}}),c=await Promise.all(a);n.push(...c)}return n}async function bB(){if(!navigator.onLine)throw new Error("No internet connection");const t=await vB(),[e,n]=await Promise.all([xB(t),EB()]),r=e.map(a=>({...a,subjects:n.filter(c=>c.yearId===a.id).sort((c,u)=>c.name.localeCompare(u.name))})),s=t.map(a=>({id:a.id,batchName:a.batchName,imageUrl:a.imageUrl||"",aca_supervisor:a.aca_supervisor||"",cr:a.cr||"",actor:a.actor||"",group_link:a.group_link||""}));return{years:r.sort((a,c)=>a.yearNumber-c.yearNumber),batches:s,subjects:r.flatMap(a=>a.subjects)}}function El(){const t=Qx(),[e,n]=_.useState(!1),{data:r,isLoading:s,error:a,refetch:c}=LM({queryKey:["years-data"],queryFn:bB,staleTime:5*60*1e3,gcTime:30*60*1e3,retry:1,retryDelay:1e3,enabled:navigator.onLine&&!e}),u=s,h=a?a.message:null,[f,m]=_.useState([]),[y,v]=_.useState([]),[w,b]=_.useState([]);_.useEffect(()=>{m((r==null?void 0:r.years)||[]),v((r==null?void 0:r.batches)||[]),b((r==null?void 0:r.subjects)||[])},[r==null?void 0:r.years,r==null?void 0:r.batches,r==null?void 0:r.subjects]),_.useEffect(()=>{navigator.onLine||n(!0)},[]),_.useEffect(()=>{const H=()=>{n(!1),t.invalidateQueries({queryKey:["years-data"]})},Q=()=>{n(!0)};return window.addEventListener("online",H),window.addEventListener("offline",Q),()=>{window.removeEventListener("online",H),window.removeEventListener("offline",Q)}},[t]);const x=()=>{console.log(" Retrying Firebase connection..."),n(!1),t.invalidateQueries({queryKey:["years-data"]})},E=async(H,Q)=>{if(H){if(e||!navigator.onLine){m(K=>K.map(Z=>Z.id===H?{...Z,...Q}:Z));return}try{const K=rs(Ae,"years"),W=(await _t(K)).docs.find(Y=>Y.id===H);if(W){await rn(W.ref,{...Q,updatedAt:new Date}),t.invalidateQueries({queryKey:["years-data"]});return}m(Y=>Y.map(ne=>ne.id===H?{...ne,...Q}:ne))}catch(K){console.error("Error updating year:",K),m(Z=>Z.map(W=>W.id===H?{...W,...Q}:W))}}},A=async(H,Q)=>{if(H){if(e||!navigator.onLine){v(K=>K.map(Z=>Z.id===H?{...Z,...Q}:Z));return}try{const K=At(Ae,"batches",H);await rn(K,{...Q,updatedAt:new Date}),t.invalidateQueries({queryKey:["years-data"]})}catch(K){console.error("Failed to update batch:",K),v(Z=>Z.map(W=>W.id===H?{...W,...Q}:W))}}},j=async(H,Q=3)=>{for(let K=0;K<Q;K++)try{return await H()}catch(Z){if(console.log(`Attempt ${K+1} failed:`,Z.message),K===Q-1)throw Z;await new Promise(W=>setTimeout(W,1e3*(K+1)))}},C=async H=>{if(e||!navigator.onLine){const Q={id:`subject_${Date.now()}`,name:H.name,subjectId:`subject_${Date.now()}`,yearId:H.yearId,imageUrl:H.imageUrl||"",lectures:[]};b(K=>[...K,Q]),m(K=>K.map(Z=>Z.id===H.yearId?{...Z,subjects:[...Z.subjects,Q]}:Z)),console.log(" Added subject to offline mode:",Q.name);return}try{console.log(" Creating subject with data:",H),await j(async()=>{const Q={name:H.name,imageUrl:H.imageUrl||"",hours:H.hours||3,yearId:H.yearId,createdAt:ht.fromDate(new Date),updatedAt:ht.fromDate(new Date)};Object.keys(Q).forEach(ne=>{Q[ne]===void 0&&delete Q[ne]});const K=await xn(Qe(Ae,"Subjects"),Q);await rn(K,{subjectId:K.id}),console.log(" Created new subject document:",K.id);const Z=K,W=Qe(Z,"lectures");if((await _t(W)).empty){const B=await xn(W,{name:"Sample Lecture",title:"Sample Lecture",description:"",imageUrl:"",order:1,uploadedBy:"System",createdAt:new Date,lectureId:""});await rn(B,{lectureId:B.id});const ee=["videos","files","quizzes"];for(const ue of ee){const Se=Qe(B,ue);let Le={};ue==="videos"?Le={title:"Sample Video",description:"",thumbnailUrl:"",url:"",uploadedAt:new Date,videoId:""}:ue==="files"?Le={title:"Sample File",description:"",url:"",uploadedAt:new Date,fileId:""}:ue==="quizzes"&&(Le={title:"Sample Quiz",description:"",duration:30,passRate:70,questions:[],quizId:""});const Te=await xn(Se,Le),we=`${ue.slice(0,-1)}Id`;await rn(Te,{[we]:Te.id})}console.log(" Created complete lecture structure for subject:",Z.id)}t.invalidateQueries({queryKey:["years-data"]})})}catch(Q){console.error("Error creating subject:",Q),n(!0),await C(H)}},L=async H=>{if(e){const Q={id:`lecture_${Date.now()}`,...H};b(K=>K.map(Z=>Z.id===H.subjectId?{...Z,lectures:[...Z.lectures,Q]}:Z)),m(K=>K.map(Z=>({...Z,subjects:Z.subjects.map(W=>W.id===H.subjectId?{...W,lectures:[...W.lectures,Q]}:W)}))),console.log(" Added lecture to offline mode:",Q.name);return}try{await j(async()=>{const Q=At(Ae,"Subjects",H.subjectId),K=Qe(Q,"lectures"),Z={title:H.name,description:H.description||"",imageUrl:H.imageUrl||"",order:H.order||1,uploadedBy:H.uploadedBy||"Current User",createdAt:new Date,lectureId:""};console.log(" Creating lecture in subcollection:",Z);const W=await xn(K,Z);await rn(W,{lectureId:W.id}),console.log(" Created lecture document with ID:",W.id),console.log(" Path: /Subjects/"+H.subjectId+"/lectures/"+W.id),t.invalidateQueries({queryKey:["years-data"]})})}catch(Q){console.error("Error creating lecture:",Q),n(!0),await L(H)}},V=async(H,Q)=>{if(e){m(K=>K.map(Z=>({...Z,subjects:Z.subjects.map(W=>({...W,lectures:W.lectures.map(Y=>Y.id===H?{...Y,...Q}:Y)}))}))),console.log(" Updated lecture in offline mode");return}try{console.log(" Updating lecture:",H,Q),await j(async()=>{const K=pn(rs(Ae,"lectures")),Z=await _t(K);let W=null;for(const ne of Z.docs)if(ne.id===H){W=ne.ref;break}if(!W)throw new Error(`Lecture ${H} not found`);const Y={...Q};Y.name&&(Y.title=Y.name,delete Y.name),Object.keys(Y).forEach(ne=>{Y[ne]===void 0&&delete Y[ne]}),Y.createdAt instanceof Date&&(Y.createdAt=ht.fromDate(Y.createdAt)),Y.updatedAt instanceof Date&&(Y.updatedAt=ht.fromDate(Y.updatedAt)),Y.updatedAt||(Y.updatedAt=ht.fromDate(new Date)),await rn(W,Y),console.log(" Updated lecture successfully:",H),t.invalidateQueries({queryKey:["years-data"]})})}catch(K){throw console.error(" Error updating lecture:",K),console.error("Error details:",K.code,K.message),new Error(`Failed to update lecture: ${K.message||"Check Firebase permissions"}`)}},z=async(H,Q)=>{if(e){b(K=>K.map(Z=>Z.id===H?{...Z,lectures:Z.lectures.filter(W=>W.id!==Q)}:Z)),m(K=>K.map(Z=>({...Z,subjects:Z.subjects.map(W=>W.id===H?{...W,lectures:W.lectures.filter(Y=>Y.id!==Q)}:W)}))),console.log(" Deleted lecture from offline mode");return}try{const K=At(Ae,"Subjects",H),Z=At(K,"lectures",Q);await Sr(Z),console.log(" Deleted lecture from Firebase"),t.invalidateQueries({queryKey:["years-data"]})}catch(K){console.error("Error deleting lecture:",K)}},P=async H=>{if(H){if(e){b(Q=>Q.filter(K=>K.id!==H)),m(Q=>Q.map(K=>({...K,subjects:K.subjects.filter(Z=>Z.id!==H)}))),console.log(" Deleted subject in offline mode");return}try{const Q=At(Ae,"Subjects",H);await Sr(Q),console.log(" Deleted subject from Firebase"),t.invalidateQueries({queryKey:["years-data"]})}catch(Q){console.error("Error deleting subject:",Q)}}},k=async(H,Q,K)=>{if(!(!H||!Q)){if(e){m(Z=>Z.map(W=>({...W,subjects:W.subjects.map(Y=>Y.id===H?{...Y,lectures:Y.lectures.map(ne=>ne.id===Q?{...ne,videos:[...ne.videos||[],{id:`video_${Date.now()}`,title:K.title,url:K.url,thumbnailUrl:K.thumbnailUrl||"",description:K.description||"",uploadedAt:new Date}]}:ne)}:Y)})));return}try{const Z=At(Ae,"Subjects",H,"lectures",Q);await xn(Qe(Z,"videos"),{title:K.title,description:K.description||"",url:K.url,duration:K.duration||"",thumbnailUrl:K.thumbnailUrl||"",platform:K.platform||"",uploadedAt:new Date,uploadedBy:"Current User"}),t.invalidateQueries({queryKey:["years-data"]})}catch(Z){console.error("Error adding video:",Z)}}},D=async(H,Q,K)=>{if(!(!H||!Q)){if(e){m(Z=>Z.map(W=>({...W,subjects:W.subjects.map(Y=>Y.id===H?{...Y,lectures:Y.lectures.map(ne=>ne.id===Q?{...ne,files:[...ne.files||[],{id:`file_${Date.now()}`,title:K.title,fileUrl:K.fileUrl,url:K.fileUrl,description:K.description||"",uploadedAt:new Date}]}:ne)}:Y)})));return}try{const Z=At(Ae,"Subjects",H,"lectures",Q),W={title:K.title,description:K.description||"",fileUrl:K.fileUrl,url:K.fileUrl,uploadedAt:ht.fromDate(new Date),uploadedBy:"Current User"};Object.keys(W).forEach(Y=>{W[Y]===void 0&&delete W[Y]}),await xn(Qe(Z,"files"),W),console.log(" File added successfully:",K.title),t.invalidateQueries({queryKey:["years-data"]})}catch(Z){throw console.error(" Error adding file:",Z),console.error("Error details:",Z.code,Z.message),new Error(`Failed to add file: ${Z.message||"Check Firebase permissions"}`)}}},R=async(H,Q,K)=>{if(!(!H||!Q)){if(e){m(Z=>Z.map(W=>({...W,subjects:W.subjects.map(Y=>Y.id===H?{...Y,lectures:Y.lectures.map(ne=>ne.id===Q?{...ne,quizzes:[...ne.quizzes||[],{id:`quiz_${Date.now()}`,title:K.title,description:K.description||"",duration:K.timeLimit||30,passRate:K.passingScore||70,questions:K.questions||[]}]}:ne)}:Y)})));return}try{const Z=At(Ae,"Subjects",H,"lectures",Q);await xn(Qe(Z,"quizzes"),{title:K.title,description:K.description||"",duration:K.timeLimit||30,passRate:K.passingScore||70,questions:K.questions||[],createdAt:new Date,uploadedBy:"Current User"}),t.invalidateQueries({queryKey:["years-data"]})}catch(Z){console.error("Error adding quiz:",Z)}}},O=async(H,Q={})=>{const K=Q.yearNumber||1,Z=Q.name||`Year ${K}`,W=Q.type||(K<=3?"basic":"clinical");if(e||!navigator.onLine){const Y={id:`year_${Date.now()}`,yearNumber:K,name:Z,type:W,batchName:"",batchId:H||void 0,imageUrl:"",academicSupervisor:"",actor:"",cr:"",groupUrl:"",subjects:[]};m(ne=>[...ne,Y]),H&&v(ne=>ne.map(B=>B.id===H?{...B}:B)),console.log(" Added year in offline mode:",Y);return}try{await j(async()=>{if(H){const Y=At(Ae,"batches",H),ne=Qe(Y,"years"),B=await xn(ne,{name:Z,order:K,imageUrl:"",batch_name:Z,createdAt:new Date});try{await rn(B,{yearId:B.id})}catch{}}else{const Y=Qe(Ae,"years"),ne=await xn(Y,{name:Z,order:K,imageUrl:"",batch_name:Z,createdAt:new Date});try{await rn(ne,{yearId:ne.id})}catch{}}t.invalidateQueries({queryKey:["years-data"]})})}catch(Y){console.error("Error creating year:",Y),n(!0),await O(H,Q)}};return{years:f,batches:y,subjects:w,loading:u,error:h,isOfflineMode:e,retryConnection:x,updateYear:E,updateBatch:A,createSubject:C,createLecture:L,updateLecture:V,createYear:O,createBatch:async(H={})=>{const Q=H.batchName||"New Batch",K=H.imageUrl||"",Z=H.cr||"",W=`batch_temp_${Date.now()}`,Y={id:W,batchName:Q,imageUrl:K,cr:Z};if(v(ne=>[Y,...ne]),e||!navigator.onLine){console.log(" Added batch in offline mode:",Y);return}try{await j(async()=>{const ne=Qe(Ae,"batches"),B=await xn(ne,{batch_name:Q,image_url:K,cr:Z,createdAt:new Date});try{await rn(B,{batchId:B.id})}catch{}const ee={id:B.id,batchName:Q,imageUrl:K,cr:Z};v(ue=>[ee,...ue.filter(Se=>Se.id!==W)]),t.invalidateQueries({queryKey:["years-data"]})})}catch(ne){console.error("Error creating batch:",ne),v(ee=>ee.filter(ue=>ue.id!==W)),n(!0);const B={id:`batch_${Date.now()}`,batchName:Q,imageUrl:K,cr:Z};v(ee=>[B,...ee])}},deleteBatch:async(H,Q={deleteYears:!0})=>{if(!H)return;const K=y,Z=f;if(v(W=>W.filter(Y=>Y.id!==H)),m(W=>W.filter(Y=>(Y.batchId||Y.batchName)!==H)),e||!navigator.onLine){console.log(" Removed batch in offline mode:",H);return}try{await j(async()=>{const W=At(Ae,"batches",H);if(Q.deleteYears)try{const Y=Qe(W,"years"),ne=await _t(Y);for(const B of ne.docs)await Sr(B.ref)}catch{const ne=rs(Ae,"years"),B=await _t(ne);for(const ee of B.docs){const ue=ee.data();(ue.batchId||ue.batch_id)===H&&await Sr(ee.ref)}}else{const Y=rs(Ae,"years"),ne=await _t(Y);for(const B of ne.docs){const ee=B.data();if((ee.batchId||ee.batch_id)===H)try{await rn(B.ref,{batchId:null,batch_name:null})}catch{}}}await Sr(W),t.invalidateQueries({queryKey:["years-data"]})})}catch(W){throw console.error("Error deleting batch:",W),v(K||[]),m(Z||[]),W}},deleteLecture:z,deleteSubject:P,addVideo:k,addFile:D,addQuiz:R}}function NB(){const[t,e]=_.useState(null),[n,r]=_.useState(!1),{currentUser:s}=km();_.useEffect(()=>{"Notification"in window&&e(Notification.permission)},[]),_.useEffect(()=>{s&&t==="granted"&&mB().catch(c=>{console.error("Failed to initialize push notifications:",c)})},[s,t]);const a=async()=>{r(!0);try{const c=await aA();e(c?"granted":Notification.permission)}catch(c){console.error("Error requesting notification permission:",c),e(Notification.permission)}finally{r(!1)}};return"Notification"in window?t==="granted"?o.jsx(pe,{className:"border-green-500/50 bg-green-500/10",children:o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2 text-green-600",children:[o.jsx(lp,{className:"h-5 w-5"}),"Push Notifications Enabled"]}),o.jsx(St,{children:"You will receive notifications for new news articles and updates."})]})}):t==="denied"?o.jsx(pe,{className:"border-yellow-500/50 bg-yellow-500/10",children:o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2 text-yellow-600",children:[o.jsx(M2,{className:"h-5 w-5"}),"Notifications Blocked"]}),o.jsx(St,{children:"Notifications are blocked. Please enable them in your browser settings to receive updates."})]})}):o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[o.jsx(Ga,{className:"h-5 w-5"}),"Enable Push Notifications"]}),o.jsx(St,{children:"Get notified when new news articles are published for your batch."})]}),o.jsx(me,{children:o.jsx(te,{onClick:a,disabled:n,className:"w-full",children:n?"Enabling...":"Enable Notifications"})})]}):null}const SB=[{id:1,type:"news",title:"New cardiology study published",time:"2 hours ago",author:"Dr. Smith"},{id:2,type:"video",title:"Anatomy lecture uploaded",time:"4 hours ago",author:"Prof. Johnson"},{id:3,type:"quiz",title:"Pharmacology quiz created",time:"6 hours ago",author:"Dr. Brown"},{id:4,type:"product",title:"New stethoscope added to store",time:"1 day ago",author:"Admin"}];function TB(){const{news:t,loading:e}=r0(),{products:n,loading:r}=cA(),{professors:s,loading:a}=uA(),{years:c,loading:u}=El(),h=t.length,f=s.length,m=n.reduce((w,b)=>w+(b.price||0),0);c.reduce((w,b)=>w+b.subjects.reduce((x,E)=>x+E.lectures.reduce((A,j)=>{var C;return A+(((C=j.videos)==null?void 0:C.length)||0)},0),0),0);const y=c.reduce((w,b)=>{var x;return w+(((x=b.subjects)==null?void 0:x.length)||0)},0),v=[{title:"Total News Articles",value:e?"...":String(h),change:"+12%",icon:dp,color:"text-blue-600"},{title:"Subjects",value:u?"...":String(y),change:"+5%",icon:Ns,color:"text-green-600"},{title:"Active Professors",value:a?"...":String(f),change:"+2%",icon:Vc,color:"text-purple-600"},{title:"Store Revenue",value:r?"...":`$${m.toLocaleString()}`,change:"+18%",icon:PS,color:"text-emerald-600"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Welcome to the MedJust Admin Dashboard"})]}),o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:v.map(w=>o.jsxs(pe,{children:[o.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ke,{className:"text-sm font-medium",children:w.title}),o.jsx(w.icon,{className:`h-4 w-4 ${w.color}`})]}),o.jsxs(me,{children:[o.jsx("div",{className:"text-2xl font-bold",children:w.value}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[o.jsxs(Pt,{variant:"secondary",className:"text-green-600",children:[o.jsx(eO,{className:"h-3 w-3 mr-1"}),w.change]}),o.jsx("span",{className:"text-muted-foreground",children:"from last month"})]})]})]},w.title))}),o.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Recent Activity"}),o.jsx(St,{children:"Latest updates across all modules"})]}),o.jsx(me,{children:o.jsx("div",{className:"space-y-4",children:SB.map(w=>o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium",children:w.title}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[o.jsx("span",{children:w.author}),o.jsx("span",{children:""}),o.jsx("span",{children:w.time})]})]})]},w.id))})})]}),o.jsx(NB,{}),o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Quick Actions"}),o.jsx(St,{children:"Common administrative tasks"})]}),o.jsx(me,{children:o.jsxs("div",{className:"grid gap-2",children:[o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(dp,{className:"h-5 w-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Create News Article"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Publish new content"})]})]}),o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(ni,{className:"h-5 w-5 text-green-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Upload Video"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Add learning resource"})]})]}),o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(Vc,{className:"h-5 w-5 text-purple-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Add Professor"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Register new faculty"})]})]}),o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(Rx,{className:"h-5 w-5 text-emerald-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Add Product"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Expand store catalog"})]})]})]})})]})]})]})}function CB(t,e){const n=_.createContext(e),r=a=>{const{children:c,...u}=a,h=_.useMemo(()=>u,Object.values(u));return o.jsx(n.Provider,{value:h,children:c})};r.displayName=t+"Provider";function s(a){const c=_.useContext(n);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function jB(t,e=[]){let n=[];function r(a,c){const u=_.createContext(c),h=n.length;n=[...n,c];const f=y=>{var A;const{scope:v,children:w,...b}=y,x=((A=v==null?void 0:v[t])==null?void 0:A[h])||u,E=_.useMemo(()=>b,Object.values(b));return o.jsx(x.Provider,{value:E,children:w})};f.displayName=a+"Provider";function m(y,v){var x;const w=((x=v==null?void 0:v[t])==null?void 0:x[h])||u,b=_.useContext(w);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[f,m]}const s=()=>{const a=n.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[t])||a;return _.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[r,IB(s,...e)]}function IB(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const y=h(a)[`__scope${f}`];return{...u,...y}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var Qy="focusScope.autoFocusOnMount",Yy="focusScope.autoFocusOnUnmount",x1={bubbles:!1,cancelable:!0},AB="FocusScope",s0=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...c}=t,[u,h]=_.useState(null),f=jn(s),m=jn(a),y=_.useRef(null),v=jt(e,x=>h(x)),w=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let x=function(C){if(w.paused||!u)return;const L=C.target;u.contains(L)?y.current=L:Ao(y.current,{select:!0})},E=function(C){if(w.paused||!u)return;const L=C.relatedTarget;L!==null&&(u.contains(L)||Ao(y.current,{select:!0}))},A=function(C){if(document.activeElement===document.body)for(const V of C)V.removedNodes.length>0&&Ao(u)};document.addEventListener("focusin",x),document.addEventListener("focusout",E);const j=new MutationObserver(A);return u&&j.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",E),j.disconnect()}}},[r,u,w.paused]),_.useEffect(()=>{if(u){_1.add(w);const x=document.activeElement;if(!u.contains(x)){const A=new CustomEvent(Qy,x1);u.addEventListener(Qy,f),u.dispatchEvent(A),A.defaultPrevented||(PB(LB(dA(u)),{select:!0}),document.activeElement===x&&Ao(u))}return()=>{u.removeEventListener(Qy,f),setTimeout(()=>{const A=new CustomEvent(Yy,x1);u.addEventListener(Yy,m),u.dispatchEvent(A),A.defaultPrevented||Ao(x??document.body,{select:!0}),u.removeEventListener(Yy,m),_1.remove(w)},0)}}},[u,f,m,w]);const b=_.useCallback(x=>{if(!n&&!r||w.paused)return;const E=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,A=document.activeElement;if(E&&A){const j=x.currentTarget,[C,L]=kB(j);C&&L?!x.shiftKey&&A===L?(x.preventDefault(),n&&Ao(C,{select:!0})):x.shiftKey&&A===C&&(x.preventDefault(),n&&Ao(L,{select:!0})):A===j&&x.preventDefault()}},[n,r,w.paused]);return o.jsx(Je.div,{tabIndex:-1,...c,ref:v,onKeyDown:b})});s0.displayName=AB;function PB(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ao(r,{select:e}),document.activeElement!==n)return}function kB(t){const e=dA(t),n=w1(e,t),r=w1(e.reverse(),t);return[n,r]}function dA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function w1(t,e){for(const n of t)if(!RB(n,{upTo:e}))return n}function RB(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function OB(t){return t instanceof HTMLInputElement&&"select"in t}function Ao(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&OB(t)&&e&&t.select()}}var _1=DB();function DB(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=E1(t,e),t.unshift(e)},remove(e){var n;t=E1(t,e),(n=t[0])==null||n.resume()}}}function E1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function LB(t){return t.filter(e=>e.tagName!=="A")}function MB(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var Rm=t=>{const{present:e,children:n}=t,r=FB(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),a=jt(r.ref,VB(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:a}):null};Rm.displayName="Presence";function FB(t){const[e,n]=_.useState(),r=_.useRef({}),s=_.useRef(t),a=_.useRef("none"),c=t?"mounted":"unmounted",[u,h]=MB(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const f=Mf(r.current);a.current=u==="mounted"?f:"none"},[u]),Zt(()=>{const f=r.current,m=s.current;if(m!==t){const v=a.current,w=Mf(f);t?h("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(m&&v!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),Zt(()=>{if(e){let f;const m=e.ownerDocument.defaultView??window,y=w=>{const x=Mf(r.current).includes(w.animationName);if(w.target===e&&x&&(h("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",f=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},v=w=>{w.target===e&&(a.current=Mf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{m.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function Mf(t){return(t==null?void 0:t.animationName)||"none"}function VB(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Xy=0;function UB(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??b1()),document.body.insertAdjacentElement("beforeend",t[1]??b1()),Xy++,()=>{Xy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Xy--}},[])}function b1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var pd="right-scroll-bar-position",md="width-before-scroll-bar",$B="with-scroll-bars-hidden",zB="--removed-body-scroll-bar-size";function Jy(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function BB(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var qB=typeof window<"u"?_.useLayoutEffect:_.useEffect,N1=new WeakMap;function hA(t,e){var n=BB(null,function(r){return t.forEach(function(s){return Jy(s,r)})});return qB(function(){var r=N1.get(n);if(r){var s=new Set(r),a=new Set(t),c=n.current;s.forEach(function(u){a.has(u)||Jy(u,null)}),a.forEach(function(u){s.has(u)||Jy(u,c)})}N1.set(n,t)},[t]),n}function WB(t){return t}function HB(t,e){e===void 0&&(e=WB);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var c=e(a,r);return n.push(c),function(){n=n.filter(function(u){return u!==c})}},assignSyncMedium:function(a){for(r=!0;n.length;){var c=n;n=[],c.forEach(a)}n={push:function(u){return a(u)},filter:function(){return n}}},assignMedium:function(a){r=!0;var c=[];if(n.length){var u=n;n=[],u.forEach(a),c=n}var h=function(){var m=c;c=[],m.forEach(a)},f=function(){return Promise.resolve().then(h)};f(),n={push:function(m){c.push(m),f()},filter:function(m){return c=c.filter(m),n}}}};return s}function fA(t){t===void 0&&(t={});var e=HB(null);return e.options=Jn({async:!0,ssr:!1},t),e}var pA=function(t){var e=t.sideCar,n=su(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,Jn({},n))};pA.isSideCarExport=!0;function mA(t,e){return t.useMedium(e),pA}var gA=fA(),Zy=function(){},Om=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:Zy,onWheelCapture:Zy,onTouchMoveCapture:Zy}),s=r[0],a=r[1],c=t.forwardProps,u=t.children,h=t.className,f=t.removeScrollBar,m=t.enabled,y=t.shards,v=t.sideCar,w=t.noIsolation,b=t.inert,x=t.allowPinchZoom,E=t.as,A=E===void 0?"div":E,j=t.gapMode,C=su(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=v,V=hA([n,e]),z=Jn(Jn({},C),s);return _.createElement(_.Fragment,null,m&&_.createElement(L,{sideCar:gA,removeScrollBar:f,shards:y,noIsolation:w,inert:b,setCallbacks:a,allowPinchZoom:!!x,lockRef:n,gapMode:j}),c?_.cloneElement(_.Children.only(u),Jn(Jn({},z),{ref:V})):_.createElement(A,Jn({},z,{className:h,ref:V}),u))});Om.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Om.classNames={fullWidth:md,zeroRight:pd};var KB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function GB(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=KB();return e&&t.setAttribute("nonce",e),t}function QB(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function YB(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var XB=function(){var t=0,e=null;return{add:function(n){t==0&&(e=GB())&&(QB(e,n),YB(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},JB=function(){var t=XB();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},i0=function(){var t=JB(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},ZB={left:0,top:0,right:0,gap:0},ev=function(t){return parseInt(t||"",10)||0},e8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[ev(n),ev(r),ev(s)]},t8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return ZB;var e=e8(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},n8=i0(),Nc="data-scroll-locked",r8=function(t,e,n,r){var s=t.left,a=t.top,c=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat($B,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Nc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(pd,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(md,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(pd," .").concat(pd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(md," .").concat(md,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Nc,`] {
    `).concat(zB,": ").concat(u,`px;
  }
`)},S1=function(){var t=parseInt(document.body.getAttribute(Nc)||"0",10);return isFinite(t)?t:0},s8=function(){_.useEffect(function(){return document.body.setAttribute(Nc,(S1()+1).toString()),function(){var t=S1()-1;t<=0?document.body.removeAttribute(Nc):document.body.setAttribute(Nc,t.toString())}},[])},yA=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;s8();var a=_.useMemo(function(){return t8(s)},[s]);return _.createElement(n8,{styles:r8(a,!e,s,n?"":"!important")})},yx=!1;if(typeof window<"u")try{var Ff=Object.defineProperty({},"passive",{get:function(){return yx=!0,!0}});window.addEventListener("test",Ff,Ff),window.removeEventListener("test",Ff,Ff)}catch{yx=!1}var oc=yx?{passive:!1}:!1,i8=function(t){return t.tagName==="TEXTAREA"},vA=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!i8(t)&&n[e]==="visible")},o8=function(t){return vA(t,"overflowY")},a8=function(t){return vA(t,"overflowX")},T1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=xA(t,r);if(s){var a=wA(t,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},l8=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},c8=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},xA=function(t,e){return t==="v"?o8(e):a8(e)},wA=function(t,e){return t==="v"?l8(e):c8(e)},u8=function(t,e){return t==="h"&&e==="rtl"?-1:1},d8=function(t,e,n,r,s){var a=u8(t,window.getComputedStyle(e).direction),c=a*r,u=n.target,h=e.contains(u),f=!1,m=c>0,y=0,v=0;do{var w=wA(t,u),b=w[0],x=w[1],E=w[2],A=x-E-a*b;(b||A)&&xA(t,u)&&(y+=A,v+=b),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(m&&Math.abs(y)<1||!m&&Math.abs(v)<1)&&(f=!0),f},Vf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},C1=function(t){return[t.deltaX,t.deltaY]},j1=function(t){return t&&"current"in t?t.current:t},h8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},f8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},p8=0,ac=[];function m8(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),s=_.useState(p8++)[0],a=_.useState(i0)[0],c=_.useRef(t);_.useEffect(function(){c.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=uC([t.lockRef.current],(t.shards||[]).map(j1),!0).filter(Boolean);return x.forEach(function(E){return E.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=_.useCallback(function(x,E){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!c.current.allowPinchZoom;var A=Vf(x),j=n.current,C="deltaX"in x?x.deltaX:j[0]-A[0],L="deltaY"in x?x.deltaY:j[1]-A[1],V,z=x.target,P=Math.abs(C)>Math.abs(L)?"h":"v";if("touches"in x&&P==="h"&&z.type==="range")return!1;var k=T1(P,z);if(!k)return!0;if(k?V=P:(V=P==="v"?"h":"v",k=T1(P,z)),!k)return!1;if(!r.current&&"changedTouches"in x&&(C||L)&&(r.current=V),!V)return!0;var D=r.current||V;return d8(D,E,x,D==="h"?C:L)},[]),h=_.useCallback(function(x){var E=x;if(!(!ac.length||ac[ac.length-1]!==a)){var A="deltaY"in E?C1(E):Vf(E),j=e.current.filter(function(V){return V.name===E.type&&(V.target===E.target||E.target===V.shadowParent)&&h8(V.delta,A)})[0];if(j&&j.should){E.cancelable&&E.preventDefault();return}if(!j){var C=(c.current.shards||[]).map(j1).filter(Boolean).filter(function(V){return V.contains(E.target)}),L=C.length>0?u(E,C[0]):!c.current.noIsolation;L&&E.cancelable&&E.preventDefault()}}},[]),f=_.useCallback(function(x,E,A,j){var C={name:x,delta:E,target:A,should:j,shadowParent:g8(A)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(L){return L!==C})},1)},[]),m=_.useCallback(function(x){n.current=Vf(x),r.current=void 0},[]),y=_.useCallback(function(x){f(x.type,C1(x),x.target,u(x,t.lockRef.current))},[]),v=_.useCallback(function(x){f(x.type,Vf(x),x.target,u(x,t.lockRef.current))},[]);_.useEffect(function(){return ac.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,oc),document.addEventListener("touchmove",h,oc),document.addEventListener("touchstart",m,oc),function(){ac=ac.filter(function(x){return x!==a}),document.removeEventListener("wheel",h,oc),document.removeEventListener("touchmove",h,oc),document.removeEventListener("touchstart",m,oc)}},[]);var w=t.removeScrollBar,b=t.inert;return _.createElement(_.Fragment,null,b?_.createElement(a,{styles:f8(s)}):null,w?_.createElement(yA,{gapMode:t.gapMode}):null)}function g8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const y8=mA(gA,m8);var _A=_.forwardRef(function(t,e){return _.createElement(Om,Jn({},t,{ref:e,sideCar:y8}))});_A.classNames=Om.classNames;var v8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},lc=new WeakMap,Uf=new WeakMap,$f={},tv=0,EA=function(t){return t&&(t.host||EA(t.parentNode))},x8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=EA(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},w8=function(t,e,n,r){var s=x8(e,Array.isArray(t)?t:[t]);$f[n]||($f[n]=new WeakMap);var a=$f[n],c=[],u=new Set,h=new Set(s),f=function(y){!y||u.has(y)||(u.add(y),f(y.parentNode))};s.forEach(f);var m=function(y){!y||h.has(y)||Array.prototype.forEach.call(y.children,function(v){if(u.has(v))m(v);else try{var w=v.getAttribute(r),b=w!==null&&w!=="false",x=(lc.get(v)||0)+1,E=(a.get(v)||0)+1;lc.set(v,x),a.set(v,E),c.push(v),x===1&&b&&Uf.set(v,!0),E===1&&v.setAttribute(n,"true"),b||v.setAttribute(r,"true")}catch(A){console.error("aria-hidden: cannot operate on ",v,A)}})};return m(e),u.clear(),tv++,function(){c.forEach(function(y){var v=lc.get(y)-1,w=a.get(y)-1;lc.set(y,v),a.set(y,w),v||(Uf.has(y)||y.removeAttribute(r),Uf.delete(y)),w||y.removeAttribute(n)}),tv--,tv||(lc=new WeakMap,lc=new WeakMap,Uf=new WeakMap,$f={})}},bA=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=v8(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),w8(r,s,n,"aria-hidden")):function(){return null}},o0="Dialog",[NA,nW]=jB(o0),[_8,Ls]=NA(o0),SA=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:c=!0}=t,u=_.useRef(null),h=_.useRef(null),[f=!1,m]=Za({prop:r,defaultProp:s,onChange:a});return o.jsx(_8,{scope:e,triggerRef:u,contentRef:h,contentId:Ho(),titleId:Ho(),descriptionId:Ho(),open:f,onOpenChange:m,onOpenToggle:_.useCallback(()=>m(y=>!y),[m]),modal:c,children:n})};SA.displayName=o0;var TA="DialogTrigger",CA=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ls(TA,n),a=jt(e,s.triggerRef);return o.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":c0(s.open),...r,ref:a,onClick:qe(t.onClick,s.onOpenToggle)})});CA.displayName=TA;var a0="DialogPortal",[E8,jA]=NA(a0,{forceMount:void 0}),IA=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=Ls(a0,e);return o.jsx(E8,{scope:e,forceMount:n,children:_.Children.map(r,c=>o.jsx(Rm,{present:n||a.open,children:o.jsx(pT,{asChild:!0,container:s,children:c})}))})};IA.displayName=a0;var zp="DialogOverlay",AA=_.forwardRef((t,e)=>{const n=jA(zp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Ls(zp,t.__scopeDialog);return a.modal?o.jsx(Rm,{present:r||a.open,children:o.jsx(b8,{...s,ref:e})}):null});AA.displayName=zp;var b8=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ls(zp,n);return o.jsx(_A,{as:Ja,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(Je.div,{"data-state":c0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),cl="DialogContent",PA=_.forwardRef((t,e)=>{const n=jA(cl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Ls(cl,t.__scopeDialog);return o.jsx(Rm,{present:r||a.open,children:a.modal?o.jsx(N8,{...s,ref:e}):o.jsx(S8,{...s,ref:e})})});PA.displayName=cl;var N8=_.forwardRef((t,e)=>{const n=Ls(cl,t.__scopeDialog),r=_.useRef(null),s=jt(e,n.contentRef,r);return _.useEffect(()=>{const a=r.current;if(a)return bA(a)},[]),o.jsx(kA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qe(t.onCloseAutoFocus,a=>{var c;a.preventDefault(),(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:qe(t.onPointerDownOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&a.preventDefault()}),onFocusOutside:qe(t.onFocusOutside,a=>a.preventDefault())})}),S8=_.forwardRef((t,e)=>{const n=Ls(cl,t.__scopeDialog),r=_.useRef(!1),s=_.useRef(!1);return o.jsx(kA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,u;(c=t.onCloseAutoFocus)==null||c.call(t,a),a.defaultPrevented||(r.current||(u=n.triggerRef.current)==null||u.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var h,f;(h=t.onInteractOutside)==null||h.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=a.target;((f=n.triggerRef.current)==null?void 0:f.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),kA=_.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...c}=t,u=Ls(cl,n),h=_.useRef(null),f=jt(e,h);return UB(),o.jsxs(o.Fragment,{children:[o.jsx(s0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Dx,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":c0(u.open),...c,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(T8,{titleId:u.titleId}),o.jsx(j8,{contentRef:h,descriptionId:u.descriptionId})]})]})}),l0="DialogTitle",RA=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ls(l0,n);return o.jsx(Je.h2,{id:s.titleId,...r,ref:e})});RA.displayName=l0;var OA="DialogDescription",DA=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ls(OA,n);return o.jsx(Je.p,{id:s.descriptionId,...r,ref:e})});DA.displayName=OA;var LA="DialogClose",MA=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ls(LA,n);return o.jsx(Je.button,{type:"button",...r,ref:e,onClick:qe(t.onClick,()=>s.onOpenChange(!1))})});MA.displayName=LA;function c0(t){return t?"open":"closed"}var FA="DialogTitleWarning",[rW,VA]=CB(FA,{contentName:cl,titleName:l0,docsSlug:"dialog"}),T8=({titleId:t})=>{const e=VA(FA),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},C8="DialogDescriptionWarning",j8=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${VA(C8).contentName}}.`;return _.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},I8=SA,A8=CA,P8=IA,UA=AA,$A=PA,zA=RA,BA=DA,qA=MA;const WA=I8,k8=A8,R8=P8,O8=qA,HA=_.forwardRef(({className:t,...e},n)=>o.jsx(UA,{ref:n,className:Ge("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));HA.displayName=UA.displayName;const u0=_.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(R8,{children:[o.jsx(HA,{}),o.jsxs($A,{ref:r,className:Ge("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,o.jsxs(qA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Uc,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));u0.displayName=$A.displayName;const d0=({className:t,...e})=>o.jsx("div",{className:Ge("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});d0.displayName="DialogHeader";const KA=({className:t,...e})=>o.jsx("div",{className:Ge("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});KA.displayName="DialogFooter";const h0=_.forwardRef(({className:t,...e},n)=>o.jsx(zA,{ref:n,className:Ge("text-lg font-semibold leading-none tracking-tight",t),...e}));h0.displayName=zA.displayName;const f0=_.forwardRef(({className:t,...e},n)=>o.jsx(BA,{ref:n,className:Ge("text-sm text-muted-foreground",t),...e}));f0.displayName=BA.displayName;const js=_.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:Ge("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));js.displayName="Textarea";function GA(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var p0="Switch",[D8,sW]=Gi(p0),[L8,M8]=D8(p0),QA=_.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:c,disabled:u,value:h="on",onCheckedChange:f,...m}=t,[y,v]=_.useState(null),w=jt(e,j=>v(j)),b=_.useRef(!1),x=y?!!y.closest("form"):!0,[E=!1,A]=Za({prop:s,defaultProp:a,onChange:f});return o.jsxs(L8,{scope:n,checked:E,disabled:u,children:[o.jsx(Je.button,{type:"button",role:"switch","aria-checked":E,"aria-required":c,"data-state":JA(E),"data-disabled":u?"":void 0,disabled:u,value:h,...m,ref:w,onClick:qe(t.onClick,j=>{A(C=>!C),x&&(b.current=j.isPropagationStopped(),b.current||j.stopPropagation())})}),x&&o.jsx(F8,{control:y,bubbles:!b.current,name:r,value:h,checked:E,required:c,disabled:u,style:{transform:"translateX(-100%)"}})]})});QA.displayName=p0;var YA="SwitchThumb",XA=_.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=M8(YA,n);return o.jsx(Je.span,{"data-state":JA(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});XA.displayName=YA;var F8=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,a=_.useRef(null),c=GA(n),u=tT(e);return _.useEffect(()=>{const h=a.current,f=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&y){const v=new Event("click",{bubbles:r});y.call(h,n),h.dispatchEvent(v)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...t.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function JA(t){return t?"checked":"unchecked"}var ZA=QA,V8=XA;const eP=_.forwardRef(({className:t,...e},n)=>o.jsx(ZA,{className:Ge("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:o.jsx(V8,{className:Ge("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));eP.displayName=ZA.displayName;function U8({news:t,onClose:e,onSave:n}){var E,A,j;const{years:r}=El(),[s,a]=_.useState(null),[c,u]=_.useState({title:"",content:"",imageUrl:"",videoUrl:"",tags:[],isPinned:!1,attachments:[],yearId:"",subjectId:""}),[h,f]=_.useState(""),[m,y]=_.useState(!1);_.useEffect(()=>{t&&u({title:t.title||"",content:t.content||"",imageUrl:t.imageUrl||"",videoUrl:t.videoUrl||"",tags:t.tags||[],isPinned:t.isPinned||!1,attachments:t.attachments||[],yearId:t.yearId||"",subjectId:t.subjectId||""})},[t]),_.useEffect(()=>{let C=!0;return(async()=>{try{if(r&&r.length>0||s)return;const V=await _t(rs(Ae,"years")),z=[];V.forEach(P=>{const k=P.data();let D=k.order||1;if(k.name){const R=String(k.name).match(/\d+/);R&&(D=parseInt(R[0]))}z.push({id:P.id,yearNumber:D,type:D<=3?"basic":"clinical",subjects:k.subjects||[]})}),C&&z.length>0&&a(z)}catch{}})(),()=>{C=!1}},[r,s]);const v=async C=>{C.preventDefault(),y(!0);try{const L={...c,yearNumber:void 0,updatedAt:new Date,...t?{}:{createdAt:new Date,authorName:"Current User",authorId:"current-user-id",viewsCount:0}};if(c.yearId){const V=r.find(z=>z.id===c.yearId);V&&(L.yearNumber=V.yearNumber)}c.subjectId&&(L.subjectId=c.subjectId),n(L)}catch(L){console.error("Error saving news:",L)}finally{y(!1)}},w=()=>{h.trim()&&!c.tags.includes(h.trim())&&(u(C=>({...C,tags:[...C.tags,h.trim()]})),f(""))},b=C=>{u(L=>({...L,tags:L.tags.filter(V=>V!==C)}))},x=C=>{C.key==="Enter"&&(C.preventDefault(),w())};return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:e,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Article":"Create Article"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update the news article details":"Create a new news article for medical students"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(eP,{id:"pinned",checked:c.isPinned,onCheckedChange:C=>u(L=>({...L,isPinned:C}))}),o.jsxs(je,{htmlFor:"pinned",className:"flex items-center gap-2",children:[o.jsx(kS,{className:"h-4 w-4"}),"Pin Article"]})]})})]}),o.jsx("form",{onSubmit:v,className:"space-y-6",children:o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Article Content"}),o.jsx(St,{children:"Main article information and content"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"title",children:"Title *"}),o.jsx(Ne,{id:"title",placeholder:"Enter article title...",value:c.title,onChange:C=>u(L=>({...L,title:C.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"content",children:"Content *"}),o.jsx(js,{id:"content",placeholder:"Write your article content here...",value:c.content,onChange:C=>u(L=>({...L,content:C.target.value})),rows:12,required:!0})]})]})]}),o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Tags"}),o.jsx(St,{children:"Add relevant tags to help categorize this article"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ne,{placeholder:"Add a tag...",value:h,onChange:C=>f(C.target.value),onKeyPress:x}),o.jsxs(te,{type:"button",onClick:w,variant:"outline",children:[o.jsx(ad,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(C=>o.jsxs(Pt,{variant:"secondary",className:"flex items-center gap-1",children:[C,o.jsx("button",{type:"button",onClick:()=>b(C),className:"ml-1 hover:text-destructive",children:o.jsx(Uc,{className:"h-3 w-3"})})]},C))})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Media"}),o.jsx(St,{children:"Add images and videos to your article"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"imageUrl",children:"Featured Image URL"}),o.jsx(Ne,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:C=>u(L=>({...L,imageUrl:C.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"videoUrl",children:"Video URL"}),o.jsx(Ne,{id:"videoUrl",placeholder:"https://youtube.com/watch?v=...",value:c.videoUrl,onChange:C=>u(L=>({...L,videoUrl:C.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"yearId",children:"Related Year"}),o.jsxs("select",{id:"yearId",value:c.yearId,onChange:C=>u(L=>({...L,yearId:C.target.value,subjectId:""})),className:"w-full border rounded px-3 py-2",children:[o.jsx("option",{value:"",children:"-- Not related to a specific year --"}),(s&&s.length>0?s:r)&&(s&&s.length>0?s:r).length>0?(s&&s.length>0?s:r).map(C=>o.jsx("option",{value:C.id,children:`Year ${C.yearNumber}`},C.id)):o.jsx("option",{value:"",children:"No years available"})]})]}),c.yearId&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(je,{htmlFor:"subjectId",children:"Related Subject"}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected year: ",(E=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))!=null&&E.yearNumber?`Year ${(A=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:A.yearNumber}`:""]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{id:"subjectId",value:c.subjectId,onChange:C=>u(L=>({...L,subjectId:C.target.value})),className:"flex-1 border rounded px-3 py-2",children:[o.jsx("option",{value:"",children:"-- Not related to a specific subject --"}),(((j=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:j.subjects)||[]).map(C=>o.jsx("option",{value:C.id,children:C.name},C.id))]}),o.jsx(te,{type:"button",variant:"outline",size:"sm",onClick:()=>{var C;(C=navigator.clipboard)==null||C.writeText(c.yearId||""),alert("Year id copied")},children:"Copy ID"})]})]}),c.imageUrl&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{children:"Preview"}),o.jsx("img",{src:c.imageUrl,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border",onError:C=>{C.currentTarget.style.display="none"}})]})]})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsx(Ke,{children:"Actions"})}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs(te,{type:"submit",className:"w-full",disabled:m,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),m?"Saving...":t?"Update Article":"Create Article"]}),o.jsx(te,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Cancel"})]})]})]})]})})]})}function tP(t){const[e,n]=_.useState([]),[r,s]=_.useState(!0),[a,c]=_.useState(null);_.useEffect(()=>{let w;w=pn(Qe(Ae,"notifications"),_l("createdAt","desc"));const b=eo(w,x=>{const E=[];x.forEach(A=>{var C;const j=A.data();E.push({id:A.id,userId:j.userId||"",title:j.title||"",message:j.message||"",type:j.type||"system",relatedId:j.relatedId||void 0,read:j.read||!1,createdAt:((C=j.createdAt)==null?void 0:C.toDate())||new Date,batchId:j.batchId||void 0})}),n(E),s(!1)},x=>{console.error("Error fetching notifications:",x),c(x.message||"Failed to fetch notifications"),s(!1)});return()=>b()},[t]);const u=async w=>{try{const b={...w,createdAt:w.createdAt instanceof Date?ht.fromDate(w.createdAt):px()};Object.keys(b).forEach(E=>{b[E]===void 0&&delete b[E]});const x=await xn(Qe(Ae,"notifications"),b);return console.log(" Notification created successfully with ID:",x.id),x.id}catch(b){throw console.error(" Error creating notification:",b),new Error(`Failed to create notification: ${b.message||"Check Firebase permissions"}`)}},h=async(w,b)=>{try{const x={...b};b.createdAt instanceof Date&&(x.createdAt=ht.fromDate(b.createdAt)),Object.keys(x).forEach(E=>{x[E]===void 0&&delete x[E]}),await rn(At(Ae,"notifications",w),x)}catch(x){throw console.error("Error updating notification:",x),new Error(`Failed to update notification: ${x.message||"Check Firebase permissions"}`)}},f=async w=>{try{await rn(At(Ae,"notifications",w),{read:!0})}catch(b){throw console.error("Error marking notification as read:",b),new Error(`Failed to mark notification as read: ${b.message||"Check Firebase permissions"}`)}},m=async w=>{try{const b=w?pn(Qe(Ae,"notifications"),bc("userId","==",w),bc("read","==",!1)):pn(Qe(Ae,"notifications"),bc("read","==",!1)),E=(await _t(b)).docs.map(A=>rn(A.ref,{read:!0}));await Promise.all(E)}catch(b){throw console.error("Error marking all notifications as read:",b),new Error(`Failed to mark all notifications as read: ${b.message||"Check Firebase permissions"}`)}},y=async w=>{try{await Sr(At(Ae,"notifications",w))}catch(b){throw console.error("Error deleting notification:",b),new Error(`Failed to delete notification: ${b.message||"Check Firebase permissions"}`)}},v=e.filter(w=>!w.read).length;return{notifications:e,loading:r,error:a,createNotification:u,updateNotification:h,markAsRead:f,markAllAsRead:m,deleteNotification:y,unreadCount:v}}const $8=[{id:"user_1",displayName:"Ali Ahmed",email:"ali.ahmed@example.com",role:"student",photoURL:"",createdAt:new Date},{id:"user_2",displayName:"Mona Hassan",email:"mona.hassan@example.com",role:"staff",photoURL:"",createdAt:new Date(Date.now()-1e3*60*60*24)}];function Dm(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1),{years:h}=El();return _.useEffect(()=>{const y=async()=>{try{const w=pn(Qe(Ae,"users"));await _t(w);const b=pn(Qe(Ae,"users"),_l("createdAt","desc")),x=eo(b,E=>{const A=[];E.forEach(C=>{var k,D;const L=C.data(),V=L.yearId||L.year||L.year_id||L.yearId||null;let z=V,P="-";if(typeof V=="string"&&V.includes(":")){const[R,O]=V.split(":",2);z=R||null,O&&O.trim()&&(P=O.trim())}if(z&&P==="-"){const R=h.find(O=>O.id===z);R&&(R.batchName?P=R.batchName:P=`Year ${{1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[R.yearNumber]||String(R.yearNumber)}`)}A.push({id:C.id,displayName:L.displayName||L.name||"",email:L.email||"",role:L.role||"student",photoURL:L.photoURL||L.avatar||"",createdAt:((D=(k=L.createdAt)==null?void 0:k.toDate)==null?void 0:D.call(k))||void 0,yearId:z||void 0,yearLabel:P})}),e(A);const j=Array.from(new Set(A.map(C=>C.yearId).filter(Boolean).filter(C=>!h.find(L=>L.id===C))));j.length>0&&Promise.all(j.map(async C=>{try{const V=(await _t(rs(Ae,"years"))).docs.find(D=>D.id===C);if(!V)return null;const z=V.data(),P=z.yearNumber||z.order||(()=>{const D=(z.name||"").match(/\d+/);return D?parseInt(D[0]):void 0})(),k=z.batchName||(P?`Year ${P}`:void 0)||void 0;return{id:C,label:k}}catch{return null}})).then(C=>{const L={};C.forEach(V=>{V&&V.id&&V.label&&(L[V.id]=V.label)}),Object.keys(L).length>0&&e(V=>V.map(z=>z.yearId&&L[z.yearId]?{...z,yearLabel:L[z.yearId]}:z))}),r(!1)},E=>{console.error("Failed to listen to users:",E),v()});return()=>x()}catch(w){console.error("Failed to load users, entering offline mode:",w),v()}},v=()=>{u(!0),e($8),r(!1),a(null)};y()},[]),_.useEffect(()=>{!h||h.length===0||e(y=>y.map(v=>{if(!v)return v;const w=v.yearId||null;if(!w)return v;const b=h.find(j=>j.id===w);if(!b)return v;const E={1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[b.yearNumber]||String(b.yearNumber),A=b.batchName?b.batchName:`Year ${E}`;return{...v,yearLabel:A}}))},[h]),{users:t,loading:n,error:s,updateUser:async(y,v)=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(w=>w.map(b=>b.id===y?{...b,...v}:b));return}try{await rn(At(Ae,"users",y),v)}catch(w){console.error("Failed to update user:",w),e(b=>b.map(x=>x.id===y?{...x,...v}:x))}},deleteUser:async y=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(v=>v.filter(w=>w.id!==y));return}try{await Sr(At(Ae,"users",y))}catch(v){console.error("Failed to delete user:",v),e(w=>w.filter(b=>b.id!==y))}},isOfflineMode:c}}function z8(){var R;const[t,e]=_.useState(""),[n,r]=_.useState(null),[s,a]=_.useState(!1),[c,u]=_.useState("all"),[h,f]=_.useState(null),{news:m,loading:y,error:v,createNews:w,updateNews:b,deleteNews:x}=r0(),{notifications:E}=tP(),{users:A}=Dm(),j=m.filter(O=>O.title.toLowerCase().includes(t.toLowerCase())||O.tags.some(U=>U.toLowerCase().includes(t.toLowerCase()))),C=O=>O?E.filter(U=>U.relatedId===O):[],L=_.useMemo(()=>j.map(O=>({...O,notificationCount:C(O.id).length,notifications:C(O.id)})),[j,E]),V=O=>{const U=A.find(F=>F.id===O);return(U==null?void 0:U.displayName)||(U==null?void 0:U.email)||O},z=O=>{f(O)},P=O=>{r(O),a(!0)},k=async O=>{if(window.confirm("Are you sure you want to delete this article?"))try{await x(O)}catch(U){console.error("Error deleting news:",U),alert("Failed to delete article. Please try again.")}},D=()=>{r(null),a(!0)};return s?o.jsx(U8,{news:n,onClose:()=>{a(!1),r(null)},onSave:async O=>{try{n?await b(n.id,O):await w(O),a(!1),r(null)}catch(U){console.error("Error saving news:",U),alert("Failed to save article. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"News Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Create and manage news articles for medical students"})]}),o.jsxs(te,{onClick:D,className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Create Article"]})]}),o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:o.jsxs("div",{className:"relative flex-1",children:[o.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search articles by title or tags...",value:t,onChange:O=>e(O.target.value),className:"pl-10"})]})})})}),y&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Qi,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading news articles..."})]})}),v&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading news"}),o.jsx("p",{className:"text-muted-foreground",children:v})]})}),!y&&!v&&o.jsx("div",{className:"space-y-4",children:L.map(O=>o.jsx(pe,{className:"hover:shadow-md transition-shadow",children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"flex gap-4",children:[O.imageUrl&&o.jsx("img",{src:O.imageUrl,alt:O.title,className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:O.title}),O.isPinned&&o.jsx(kS,{className:"h-4 w-4 text-yellow-500"})]}),o.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:O.content}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:O.tags.map(U=>o.jsxs(Pt,{variant:"secondary",className:"text-xs",children:[o.jsx(ad,{className:"h-3 w-3 mr-1"}),U]},U))}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ns,{className:"h-3 w-3"}),O.authorName]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(gc,{className:"h-3 w-3"}),O.createdAt.toLocaleDateString()]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(W2,{className:"h-3 w-3"}),O.viewsCount," views"]}),O.notificationCount>0&&o.jsxs("button",{onClick:()=>z(O.id),className:"flex items-center gap-1 hover:text-primary transition-colors cursor-pointer",children:[o.jsx(Ga,{className:"h-3 w-3"}),O.notificationCount," notification",O.notificationCount>1?"s":""]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[O.notificationCount>0&&o.jsxs(te,{variant:"ghost",size:"icon",onClick:()=>z(O.id),className:"relative",title:`View ${O.notificationCount} notification${O.notificationCount>1?"s":""}`,children:[o.jsx(IS,{className:"h-4 w-4"}),o.jsx(Pt,{variant:"default",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:O.notificationCount})]}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>P(O),children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>k(O.id),className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})})]})})},O.id))}),!y&&!v&&j.length===0&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(dp,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"No articles match your search criteria.":"Start by creating your first news article."}),o.jsxs(te,{onClick:D,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Create Article"]})]})}),o.jsx(WA,{open:h!==null,onOpenChange:O=>!O&&f(null),children:o.jsxs(u0,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[o.jsxs(d0,{children:[o.jsxs(h0,{className:"flex items-center gap-2",children:[o.jsx(Ga,{className:"h-5 w-5"}),"Notifications for News Article"]}),o.jsx(f0,{children:h&&((R=m.find(O=>O.id===h))==null?void 0:R.title)})]}),h&&o.jsx("div",{className:"space-y-3 mt-4",children:C(h).length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(Ga,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No notifications found for this article"})]}):C(h).map(O=>o.jsx(pe,{className:O.read?"opacity-75":"border-primary/50",children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[!O.read&&o.jsx(Pt,{variant:"default",className:"h-2 w-2 p-0 rounded-full"}),o.jsx("h3",{className:"font-semibold",children:O.title}),o.jsx(Pt,{variant:"outline",children:O.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:O.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ns,{className:"h-3 w-3"}),V(O.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(gc,{className:"h-3 w-3"}),O.createdAt.toLocaleDateString()]}),O.batchId&&o.jsxs(Pt,{variant:"secondary",className:"text-xs",children:["Batch: ",O.batchId.slice(0,8),"..."]})]})]}),!O.read&&o.jsx(Pt,{variant:"default",className:"text-xs",children:"Unread"})]})})},O.id))})]})})]})}function m0({quiz:t,onClose:e,onSave:n}){const[r,s]=_.useState({title:"",description:"",timeLimit:30,passingScore:70,questions:[],type:"multiple_choice"}),[a,c]=_.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",imageUrl:"",weight:1}),[u,h]=_.useState(!1);_.useEffect(()=>{t&&s({title:t.title||"",description:t.description||"",timeLimit:t.timeLimit||30,passingScore:t.passingScore||70,questions:t.questions||[],type:t.type||"multiple_choice"})},[t]);const f=async x=>{x.preventDefault(),h(!0);try{const E={...r,...t?{}:{createdAt:new Date,createdBy:"Current User"}};E.type||(E.type="multiple_choice"),n(E)}catch(E){console.error("Error saving quiz:",E)}finally{h(!1)}},m=()=>{var A;const x=r.type==="flashcard",E=a.question.trim();if(x){const j=a.options&&String(a.options[0]).trim()||a.answer;if(E&&j){const C={...a,options:[String(((A=a.options)==null?void 0:A[0])||a.answer||"").trim()],correctAnswer:0};s(L=>({...L,questions:[...L.questions,C]})),c({question:"",options:[""],correctAnswer:0,explanation:"",imageUrl:"",weight:1})}return}E&&Array.isArray(a.options)&&a.options.filter(j=>String(j).trim()).length>=2&&typeof a.correctAnswer=="number"&&String(a.options[a.correctAnswer]||"").trim()&&(s(j=>({...j,questions:[...j.questions,{...a}]})),c({question:"",options:["","","",""],correctAnswer:0,explanation:"",imageUrl:"",weight:1}))},y=x=>{s(E=>({...E,questions:E.questions.filter((A,j)=>j!==x)}))},v=(x,E)=>{const A=[...a.options||[]];A[x]=E,c(j=>({...j,options:A}))},w=()=>{c(x=>({...x,options:[...x.options||[],""]}))},b=x=>{c(E=>{const A=[...E.options||[]];A.splice(x,1);let j=E.correctAnswer;return j>=A.length&&(j=Math.max(0,A.length-1)),{...E,options:A,correctAnswer:j}})};return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:e,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Quiz":"Create Quiz"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update the quiz details and questions":"Create a new quiz for students"})]})]})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[o.jsx($i,{className:"h-5 w-5"}),"Quiz Information"]}),o.jsx(St,{children:"Basic information about the quiz"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"title",children:"Quiz Title *"}),o.jsx(Ne,{id:"title",placeholder:"Enter quiz title...",value:r.title,onChange:x=>s(E=>({...E,title:x.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"description",children:"Description"}),o.jsx(js,{id:"description",placeholder:"Describe what this quiz covers...",value:r.description,onChange:x=>s(E=>({...E,description:x.target.value})),rows:3})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(je,{htmlFor:"timeLimit",className:"flex items-center gap-2",children:[o.jsx(cp,{className:"h-4 w-4"}),"Time Limit (minutes)"]}),o.jsx(Ne,{id:"timeLimit",type:"number",min:"1",value:r.timeLimit,onChange:x=>s(E=>({...E,timeLimit:parseInt(x.target.value)||30}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(je,{htmlFor:"passingScore",className:"flex items-center gap-2",children:[o.jsx(Z2,{className:"h-4 w-4"}),"Passing Score (%)"]}),o.jsx(Ne,{id:"passingScore",type:"number",min:"0",max:"100",value:r.passingScore,onChange:x=>s(E=>({...E,passingScore:parseInt(x.target.value)||70}))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"quizType",children:"Quiz Type"}),o.jsxs("select",{id:"quizType",value:r.type||"multiple_choice",onChange:x=>s(E=>({...E,type:x.target.value})),className:"w-full border rounded px-3 py-2",children:[o.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),o.jsx("option",{value:"flashcard",children:"Flashcard"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how this quiz will be presented to students."})]})]})]}),o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Add Question"}),o.jsx(St,{children:"Create multiple choice questions for the quiz"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"question",children:"Question"}),o.jsx(js,{id:"question",placeholder:"Enter your question...",value:a.question,onChange:x=>c(E=>({...E,question:x.target.value})),rows:3})]}),o.jsx("div",{className:"space-y-2",children:r.type==="flashcard"?o.jsxs(o.Fragment,{children:[o.jsx(je,{children:"Correct Answer"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{placeholder:"Correct answer",value:a.options[0]??a.answer??"",onChange:x=>{c(E=>({...E,options:[x.target.value]}))}}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"For flashcards enter the correct answer (single). Use [[answer]] in the question to create blanks."})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(je,{children:"Answer Options"}),o.jsxs("div",{className:"space-y-2",children:[a.options.map((x,E)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx(je,{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-sm",children:String.fromCharCode(65+E)}),o.jsx(Ne,{placeholder:`Option ${String.fromCharCode(65+E)}`,value:x,onChange:A=>v(E,A.target.value),className:a.correctAnswer===E?"ring-2 ring-green-500":""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{type:"button",variant:a.correctAnswer===E?"default":"outline",size:"sm",onClick:()=>c(A=>({...A,correctAnswer:E})),children:a.correctAnswer===E?"Correct":"Mark Correct"}),a.options.length>2&&o.jsx(te,{type:"button",variant:"ghost",size:"sm",onClick:()=>b(E),children:"Remove"})]})]},E)),o.jsx("div",{children:o.jsx(te,{type:"button",variant:"outline",onClick:w,className:"mt-2",children:"Add Option"})})]})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"explanation",children:"Explanation (Optional)"}),o.jsx(js,{id:"explanation",placeholder:"Explain why this is the correct answer...",value:a.explanation||"",onChange:x=>c(E=>({...E,explanation:x.target.value})),rows:3}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"This explanation will be shown to students after they answer the question"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),o.jsx(Ne,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:x=>c(E=>({...E,imageUrl:x.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"weight",children:"Question Weight"}),o.jsx(Ne,{id:"weight",type:"number",min:1,value:a.weight,onChange:x=>c(E=>({...E,weight:parseFloat(x.target.value)||1}))})]}),o.jsxs(te,{type:"button",onClick:m,className:"w-full",children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),r.questions.length>0&&o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["Quiz Questions (",r.questions.length,")"]})}),o.jsx(me,{children:o.jsx("div",{className:"space-y-4",children:r.questions.map((x,E)=>o.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"font-medium",children:[E+1,". ",x.question]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(je,{className:"text-sm",children:"Weight"}),o.jsx(Ne,{type:"number",min:1,value:x.weight||1,onChange:A=>{const j=parseFloat(A.target.value)||1;s(C=>({...C,questions:C.questions.map((L,V)=>V===E?{...L,weight:j}:L)}))},className:"w-20 text-sm"})]})]}),o.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:x.options.map((A,j)=>o.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${x.correctAnswer===j?"bg-green-100 text-green-800":"bg-secondary/50"}`,children:[o.jsx("span",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+j)}),o.jsx("span",{className:"text-sm",children:A}),x.correctAnswer===j&&o.jsx(Pt,{variant:"outline",className:"ml-auto text-xs bg-green-200",children:"Correct"})]},j))}),x.explanation&&o.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:o.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[o.jsx("span",{className:"font-semibold",children:"Explanation:"})," ",x.explanation]})})]}),o.jsx("div",{className:"flex flex-col items-end gap-2",children:o.jsx(te,{type:"button",variant:"ghost",size:"icon",onClick:()=>y(E),className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})})]})},E))})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:u||r.questions.length===0,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),u?"Saving...":t?"Update Quiz":"Create Quiz"]})]})]})]})}function nP({year:t,yearType:e,onClose:n,onSave:r}){const[s,a]=_.useState({name:"",imageUrl:"",hours:3}),[c,u]=_.useState(!1),h=async f=>{f.preventDefault(),u(!0);try{const m={name:s.name,imageUrl:s.imageUrl||"",hours:s.hours||3,createdAt:new Date};r(m)}catch(m){console.error("Error saving subject:",m)}finally{u(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:n,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Add Subject to Year ",t]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e==="basic"?o.jsx(id,{className:"h-4 w-4 text-blue-600"}):o.jsx(od,{className:"h-4 w-4 text-red-600"}),o.jsxs("p",{className:"text-muted-foreground",children:["Adding to ",e==="basic"?"Basic":"Clinical"," Years  Year ",t]})]})]})]})}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsx(pe,{className:`border-l-4 ${e==="basic"?"border-l-blue-500 bg-blue-50/50":"border-l-red-500 bg-red-50/50"}`,children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[e==="basic"?o.jsx(id,{className:"h-8 w-8 text-blue-600"}):o.jsx(od,{className:"h-8 w-8 text-red-600"}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold text-lg",children:["Year ",t]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e==="basic"?"Basic Years":"Clinical Years"})]})]})})}),o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[e==="basic"?o.jsx(id,{className:"h-5 w-5 text-blue-600"}):o.jsx(od,{className:"h-5 w-5 text-red-600"}),"Subject Information"]}),o.jsx(St,{children:"Basic information about the subject"})]}),o.jsx(me,{className:"space-y-4",children:o.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"year",children:"Year"}),o.jsx(Ne,{id:"year",value:`Year ${t} (${e==="basic"?"Basic":"Clinical"})`,disabled:!0,className:"bg-muted"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"name",children:"Subject Name *"}),o.jsx(Ne,{id:"name",placeholder:"e.g., Anatomy & Physiology",value:s.name,onChange:f=>a(m=>({...m,name:f.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"hours",children:"Credit Hours"}),o.jsx(Ne,{id:"hours",type:"number",placeholder:"3",value:s.hours,onChange:f=>a(m=>({...m,hours:parseInt(f.target.value)||3})),min:"1",max:"12"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),o.jsx(Ne,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:s.imageUrl,onChange:f=>a(m=>({...m,imageUrl:f.target.value}))})]})]})})]}),s.name&&o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Preview"}),o.jsxs(St,{children:["How the subject will appear in Year ",t]})]}),o.jsx(me,{children:o.jsxs("div",{className:"p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.imageUrl?o.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-8 h-8 object-cover rounded",onError:f=>{f.currentTarget.style.display="none"}}):o.jsx(Ns,{className:"h-5 w-5 text-primary"}),o.jsx("h3",{className:"font-semibold text-lg",children:s.name})]}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Year ",t,"  ",e," years"]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:c,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Subject"]})]})]})]})}function g0({file:t,lectureId:e,onClose:n,onSave:r}){const[s,a]=_.useState({title:(t==null?void 0:t.title)||"",description:(t==null?void 0:t.description)||"",fileUrl:(t==null?void 0:t.fileUrl)||(t==null?void 0:t.url)||"",imageUrl:(t==null?void 0:t.imageUrl)||(t==null?void 0:t.thumbnailUrl)||""}),[c,u]=_.useState(!1),h=async f=>{f.preventDefault(),u(!0);try{const m={...s,id:`file_${Date.now()}`,lectureId:e,uploadedAt:new Date,uploadedBy:"Current User"};r(m)}catch(m){console.error("Error saving file:",m)}finally{u(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:n,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Add File"}),o.jsx("p",{className:"text-muted-foreground",children:"Add a file resource to the lecture"})]})]})}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[o.jsx(Cs,{className:"h-5 w-5 text-blue-600"}),"File Information"]}),o.jsx(St,{children:"Upload or link to educational files"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"title",children:"File Title *"}),o.jsx(Ne,{id:"title",placeholder:"e.g., Anatomy Reference Guide",value:s.title,onChange:f=>a(m=>({...m,title:f.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"description",children:"Description"}),o.jsx(js,{id:"description",placeholder:"Describe the file content...",value:s.description,onChange:f=>a(m=>({...m,description:f.target.value})),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"fileUrl",children:"File URL *"}),o.jsx(Ne,{id:"fileUrl",placeholder:"https://example.com/file.pdf or /uploads/file.pdf",value:s.fileUrl,onChange:f=>a(m=>({...m,fileUrl:f.target.value})),required:!0}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload to Firebase Storage or use external links"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"imageUrl",children:"Preview Image URL"}),o.jsx(Ne,{id:"imageUrl",placeholder:"https://example.com/preview.jpg",value:s.imageUrl,onChange:f=>a(m=>({...m,imageUrl:f.target.value}))}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: Add a preview/thumbnail image for the file"})]})]})]}),s.title&&o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Preview"}),o.jsx(St,{children:"How the file will appear in the lecture"})]}),o.jsx(me,{children:o.jsx("div",{className:"p-4 border rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-3",children:[s.imageUrl?o.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-16 h-12 object-cover rounded"}):o.jsx("div",{className:"w-16 h-12 bg-blue-100 rounded flex items-center justify-center",children:o.jsx(Cs,{className:"h-8 w-8 text-blue-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium",children:s.title}),s.description&&o.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:c,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add File"]})]})]})]})}function y0({video:t,lectureId:e,onClose:n,onSave:r}){const[s,a]=_.useState({title:(t==null?void 0:t.title)||"",description:(t==null?void 0:t.description)||"",url:(t==null?void 0:t.url)||(t==null?void 0:t.youtubeUrl)||"",duration:(t==null?void 0:t.duration)||"",thumbnailUrl:(t==null?void 0:t.thumbnailUrl)||"",platform:(t==null?void 0:t.platform)||"YouTube"}),[c,u]=_.useState(!1),h=async v=>{v.preventDefault(),u(!0);try{const w={...s,id:`video_${Date.now()}`,lectureId:e,uploadedAt:new Date,uploadedBy:"Current User"};r(w)}catch(w){console.error("Error saving video:",w)}finally{u(!1)}},f=v=>{const w=v.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return w?w[1]:null},m=v=>{const w=f(v);return w?`https://img.youtube.com/vi/${w}/maxresdefault.jpg`:""},y=v=>{a(w=>({...w,url:v,thumbnailUrl:m(v)}))};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:n,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Add Video"}),o.jsx("p",{className:"text-muted-foreground",children:"Add a video resource to the lecture"})]})]})}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[o.jsx(ni,{className:"h-5 w-5 text-green-600"}),"Video Information"]}),o.jsx(St,{children:"Add YouTube videos or other video links"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"title",children:"Video Title *"}),o.jsx(Ne,{id:"title",placeholder:"e.g., Introduction to Human Anatomy",value:s.title,onChange:v=>a(w=>({...w,title:v.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"description",children:"Description"}),o.jsx(js,{id:"description",placeholder:"Describe the video content...",value:s.description,onChange:v=>a(w=>({...w,description:v.target.value})),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"url",children:"Video URL *"}),o.jsx(Ne,{id:"url",placeholder:"https://youtube.com/watch?v=... or https://vimeo.com/...",value:s.url,onChange:v=>y(v.target.value),required:!0}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports YouTube, Vimeo, and direct video links"})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"duration",children:"Duration"}),o.jsx(Ne,{id:"duration",placeholder:"e.g., 45:30",value:s.duration,onChange:v=>a(w=>({...w,duration:v.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"platform",children:"Platform"}),o.jsx(Ne,{id:"platform",value:s.platform,onChange:v=>a(w=>({...w,platform:v.target.value})),disabled:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"thumbnailUrl",children:"Thumbnail URL"}),o.jsx(Ne,{id:"thumbnailUrl",placeholder:"Auto-generated for YouTube videos",value:s.thumbnailUrl,onChange:v=>a(w=>({...w,thumbnailUrl:v.target.value}))})]})]})]}),s.title&&o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Preview"}),o.jsx(St,{children:"How the video will appear in the lecture"})]}),o.jsx(me,{children:o.jsx("div",{className:"p-4 border rounded-lg",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"relative",children:[s.thumbnailUrl?o.jsx("img",{src:s.thumbnailUrl,alt:s.title,className:"w-24 h-16 object-cover rounded"}):o.jsx("div",{className:"w-24 h-16 bg-gray-200 rounded flex items-center justify-center",children:o.jsx(fv,{className:"h-6 w-6 text-gray-400"})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(ni,{className:"h-8 w-8 text-white opacity-80"})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium",children:s.title}),s.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.duration&&o.jsxs(Pt,{variant:"secondary",className:"text-xs",children:[o.jsx(cp,{className:"h-3 w-3 mr-1"}),s.duration]}),o.jsxs(Pt,{variant:"outline",className:"text-xs",children:[o.jsx(G2,{className:"h-3 w-3 mr-1"}),s.platform]})]})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:c,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Video"]})]})]})]})}function Lm({lecture:t,subjectId:e,subjectName:n,yearType:r,onClose:s,onSave:a}){const[c,u]=_.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",order:(t==null?void 0:t.order)||1,imageUrl:(t==null?void 0:t.imageUrl)||""}),[h,f]=_.useState(!1),m=async y=>{y.preventDefault(),f(!0);try{const v={...c,subjectId:e,createdAt:new Date,uploadedBy:"Current User"};a(v)}catch(v){console.error("Error saving lecture:",v)}finally{f(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:s,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Add Lecture"}),o.jsxs("p",{className:"text-muted-foreground",children:["Add a new lecture to ",n]})]})]})}),o.jsxs("form",{onSubmit:m,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[r==="basic"?o.jsx(id,{className:"h-5 w-5 text-blue-600"}):o.jsx(od,{className:"h-5 w-5 text-red-600"}),"Lecture Information"]}),o.jsx(St,{children:"Basic information about the lecture"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"name",children:"Lecture Name *"}),o.jsx(Ne,{id:"name",placeholder:"e.g., Introduction to Cell Biology",value:c.name,onChange:y=>u(v=>({...v,name:y.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"description",children:"Description"}),o.jsx(js,{id:"description",placeholder:"Describe what this lecture covers...",value:c.description,onChange:y=>u(v=>({...v,description:y.target.value})),rows:4})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"order",children:"Order"}),o.jsx(Ne,{id:"order",type:"number",min:"1",value:c.order,onChange:y=>u(v=>({...v,order:parseInt(y.target.value)||1}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),o.jsx(Ne,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:y=>u(v=>({...v,imageUrl:y.target.value}))})]})]})]})]}),c.name&&o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Preview"}),o.jsxs(St,{children:["How the lecture will appear in ",n]})]}),o.jsx(me,{children:o.jsx("div",{className:"p-4 border rounded-lg bg-secondary/20",children:o.jsxs("div",{className:"flex items-start gap-3",children:[c.imageUrl?o.jsx("img",{src:c.imageUrl,alt:c.name,className:"w-16 h-16 object-cover rounded",onError:y=>{y.currentTarget.style.display="none"}}):o.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:o.jsx(Ns,{className:"h-6 w-6 text-gray-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:c.name}),c.description&&o.jsx("p",{className:"text-sm text-muted-foreground",children:c.description}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Lecture ",c.order,"  ",n]})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:h,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add Lecture"]})]})]})]})}async function Tr(t){let e="dflp2vxn2",n="Med_just";const r="".replace(/\/$/,"");try{const j=await fetch(`${r}/api/cloudinary/config`);if(j.ok)try{const C=await j.json();e=C.cloudName||e,n=C.uploadPreset||C.upload_preset||n}catch{const C=j.headers.get("x-cloudinary-cloudname"),L=j.headers.get("x-cloudinary-upload-preset");C&&(e=e||C),L&&(n=n||L)}}catch{}if(!e)try{const j=localStorage.getItem("cloudinary.cloudName"),C=localStorage.getItem("cloudinary.uploadPreset");j&&(e=j,n=n||C||n)}catch{}if(!e)throw new Error("Cloudinary cloud name is not configured. Set VITE_CLOUDINARY_CLOUD_NAME in your environment or provide server config.");const s=`https://api.cloudinary.com/v1_1/${e}/upload`;try{const j=await I1(t);if(j&&typeof j=="string"&&j.startsWith("http"))return j}catch(j){const C=String((j==null?void 0:j.message)||j||"");console.warn("Server upload failed, falling back to client upload:",C)}async function a(j){if(j.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.");try{const C=j.clone();try{return{json:await C.json(),text:null}}catch{}}catch{if(j.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}try{const C=await j.text();try{return{json:JSON.parse(C),text:C}}catch{return{json:null,text:C}}}catch(C){throw new Error("Could not read response body: "+String(C))}}async function c(j,C){const L=async(z,P)=>{const k=await fetch(z,P),D=await a(k).catch(R=>{throw R});return{res:k,body:D}},V=typeof j=="string"?j:j.url;try{return await L(V,C)}catch(z){const P=String((z==null?void 0:z.message)||z||"").toLowerCase();if(P.includes("response body already read")||P.includes("body already read")){const k=V+(V.includes("?")?`&_retry=${Date.now()}`:`?_retry=${Date.now()}`);try{return await L(k,C)}catch{}}if(P.includes("failed to fetch")||P.includes("networkerror")||P.includes("network request failed")||P.includes("script error")||P.includes("response body already read")||P.includes("body already read"))try{return await(async()=>await new Promise((k,D)=>{const R=new XMLHttpRequest;let O=C&&C.method||"GET",U=!1;try{if(R.open(O,V,!0),C&&C.headers){const F=C.headers;Object.keys(F).forEach(H=>{try{R.setRequestHeader(H,F[H])}catch{}})}if(R.onreadystatechange=()=>{if(R.readyState!==4)return;const F=R.status||0,H={};(R.getAllResponseHeaders()||"").split(`\r
`).forEach(ne=>{const B=ne.indexOf(":");if(B>0){const ee=ne.substring(0,B).trim().toLowerCase(),ue=ne.substring(B+1).trim();H[ee]=ue}});const K={ok:F>=200&&F<400,status:F,headers:{get:ne=>H[ne.toLowerCase()]||null}},Z=R.responseText;let W=null;try{W=Z?JSON.parse(Z):null}catch{W=null}k({res:K,body:{json:W,text:Z}})},R.onerror=()=>D(new Error("XHR network error")),R.ontimeout=()=>D(new Error("XHR timeout")),C&&C.body)try{if(C.body instanceof FormData)U=!0,R.send(C.body);else if(typeof C.body=="string")R.send(C.body);else try{R.send(JSON.stringify(C.body))}catch{R.send(String(C.body))}}catch(F){D(F)}else R.send()}catch(F){D(F)}}))()}catch{}throw z}}if(n){const j=new FormData;j.append("file",t),j.append("upload_preset",n);const{res:C,body:L}=await c(s,{method:"POST",body:j});if(!C.ok){const V=L!=null&&L.json?JSON.stringify(L.json):(L==null?void 0:L.text)||"";throw new Error(`Cloudinary upload failed: ${C.status} ${V}`)}if(L.json&&(L.json.secure_url||L.json.url))return L.json.secure_url||L.json.url;if(L.text&&typeof L.text=="string"&&L.text.startsWith("http"))return L.text;throw new Error("Cloudinary upload returned unexpected response.")}const u="686641252611351";let h,f;try{const j=await c(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})});h=j.res,f=j.body}catch(j){const C=String((j==null?void 0:j.message)||j||"");if(C.toLowerCase().includes("response body already read")||C.toLowerCase().includes("body already read")){try{const L=await fetch(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})}),V=L.headers.get("x-cloudinary-signature"),z=L.headers.get("x-cloudinary-timestamp"),P=L.headers.get("x-cloudinary-apikey"),k=L.headers.get("x-cloudinary-cloudname"),D=L.headers.get("x-cloudinary-upload-preset");if(V&&z){const R=P||u||null,O=V,U=Number(z);k&&(e=e||k);const F=new FormData;F.append("file",t),R&&F.append("api_key",R),F.append("timestamp",String(U)),F.append("signature",O);const{res:H,body:Q}=await c(s,{method:"POST",body:F});if(!H.ok){const K=Q!=null&&Q.json?JSON.stringify(Q.json):(Q==null?void 0:Q.text)||"",Z=(K||"").toLowerCase();if(Z.includes("missing required parameter - api_key")||Z.includes("missing required parameter - api key")||Z.includes("missing required parameter 'api_key'")){const W=u||(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})();if(W){const Y=new FormData;Y.append("file",t),Y.append("api_key",W),Y.append("timestamp",String(U)),Y.append("signature",O);const{res:ne,body:B}=await c(s,{method:"POST",body:Y});if(!ne.ok){const ee=B!=null&&B.json?JSON.stringify(B.json):(B==null?void 0:B.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${ne.status} ${ee}`)}if(B.json&&(B.json.secure_url||B.json.url))return B.json.secure_url||B.json.url;if(B.text&&typeof B.text=="string"&&B.text.startsWith("http"))return B.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}if(n){const Y=new FormData;Y.append("file",t),Y.append("upload_preset",n);const ne=await fetch(s,{method:"POST",body:Y});if(!ne.ok){const ue=await ne.text().catch(()=>"");throw new Error(`Cloudinary unsigned fallback failed: ${ne.status} ${ue}`)}const B=await ne.json().catch(()=>null);if(B&&(B.secure_url||B.url))return B.secure_url||B.url;const ee=await ne.text().catch(()=>"");if(ee&&ee.startsWith("http"))return ee;throw new Error("Cloudinary unsigned fallback returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${H.status} ${K}`)}if(Q.json&&(Q.json.secure_url||Q.json.url))return Q.json.secure_url||Q.json.url;if(Q.text&&typeof Q.text=="string"&&Q.text.startsWith("http"))return Q.text;throw new Error("Cloudinary signed upload returned unexpected response.")}if(D){const R=new FormData;R.append("file",t),R.append("upload_preset",D);const O=await fetch(s,{method:"POST",body:R});if(!O.ok){const H=await O.text().catch(()=>"");throw new Error(`Cloudinary upload fallback failed: ${O.status} ${H}`)}const U=await O.json().catch(()=>null);if(U&&(U.secure_url||U.url))return U.secure_url||U.url;const F=await O.text().catch(()=>"");if(F&&F.startsWith("http"))return F;throw new Error("Cloudinary fallback upload returned unexpected response.")}}catch{}try{const L=await I1(t);if(L&&typeof L=="string"&&L.startsWith("http"))return L}catch{}throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}throw j}if(!h.ok){const j=f!=null&&f.json?JSON.stringify(f.json):(f==null?void 0:f.text)||"";throw new Error(`Cloudinary signing failed: ${h.status} ${j}`)}const m=f.json||{},{signature:y,apiKey:v,timestamp:w}=m,b=v||u;if(!y||!w)throw new Error("Cloudinary signing endpoint returned invalid data.");const x=new FormData;x.append("file",t),x.append("api_key",b),x.append("timestamp",String(w)),x.append("signature",y);const{res:E,body:A}=await c(s,{method:"POST",body:x});if(!E.ok){const j=A!=null&&A.json?JSON.stringify(A.json):(A==null?void 0:A.text)||"",C=(j||"").toLowerCase();if(C.includes("missing required parameter - api_key")||C.includes("missing required parameter - api key")||C.includes("missing required parameter 'api_key'")){const L=u;{const V=new FormData;V.append("file",t),V.append("api_key",L),V.append("timestamp",String(w)),V.append("signature",y);const{res:z,body:P}=await c(s,{method:"POST",body:V});if(!z.ok){const k=P!=null&&P.json?JSON.stringify(P.json):(P==null?void 0:P.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${z.status} ${k}`)}if(P.json&&(P.json.secure_url||P.json.url))return P.json.secure_url||P.json.url;if(P.text&&typeof P.text=="string"&&P.text.startsWith("http"))return P.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${E.status} ${j}`)}if(A.json&&(A.json.secure_url||A.json.url))return A.json.secure_url||A.json.url;if(A.text&&typeof A.text=="string"&&A.text.startsWith("http"))return A.text;throw new Error("Cloudinary signed upload returned unexpected response.")}async function I1(t){const e=await new Promise((n,r)=>{const s=new FileReader;s.onload=()=>n(s.result),s.onerror=()=>r(new Error("Failed to read file")),s.readAsDataURL(t)});return await new Promise((n,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?n(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:e,filename:t.name}))}catch(s){r(s)}}).catch(async n=>{try{const r=String((n==null?void 0:n.message)||"").toLowerCase();if(r.includes("cloudinary not configured")||r.includes("404")||r.includes("server upload failed"))return await new Promise((s,a)=>{try{const c=new XMLHttpRequest;c.open("POST",`${API_BASE}/api/imagekit/upload`,!0),c.setRequestHeader("Content-Type","application/json"),c.onreadystatechange=()=>{if(c.readyState!==4)return;const u=c.status||0,h=c.responseText||"";if(u<200||u>=400){let f=h;try{const m=h?JSON.parse(h):null;m&&m.error&&(f=m.error)}catch{}return a(new Error(`ImageKit server upload failed: ${u} ${f}`))}try{const f=h?JSON.parse(h):{};return f&&(f.url||f.filePath)?s(f.url||f.filePath):a(new Error("ImageKit server upload returned unexpected response"))}catch{return a(new Error("ImageKit server upload returned non-JSON response"))}},c.onerror=()=>a(new Error("ImageKit server upload XHR error")),c.send(JSON.stringify({file:e,filename:t.name}))}catch(c){a(c)}})}catch{}throw n})}function Xa(t,e,n){try{t&&localStorage.setItem("cloudinary.cloudName",t),e&&localStorage.setItem("cloudinary.uploadPreset",e),n&&localStorage.setItem("cloudinary.apiKey",n)}catch(r){console.warn("Could not persist Cloudinary config to localStorage",r)}}async function A1(t,e){if(!t)throw new Error("No URL provided");return await new Promise((n,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?n(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:t,filename:e||"remote"}))}catch(s){r(new Error("Failed to call server upload endpoint: "+String(s)))}})}const B8="".replace(/\/$/,"");async function q8(t,e){const n=await fetch(t,e);let r=null,s="";try{r=await n.json()}catch{try{s=await n.text()}catch{}}return{res:n,json:r,text:s}}async function Zo(t,e){let n;typeof t=="string"?n=t:n=await new Promise((u,h)=>{const f=new FileReader;f.onload=()=>u(f.result),f.onerror=()=>h(new Error("Failed to read file")),f.readAsDataURL(t)});const r=`${B8}/api/imagekit/upload`,{res:s,json:a,text:c}=await q8(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:n,filename:e})});if(!s.ok){const u=a?JSON.stringify(a):c||"";throw new Error(`ImageKit server upload failed: ${s.status} ${u}`)}if(a&&(a.url||a.filePath||a.name))return a.url||a.filePath||a.name;throw new Error("ImageKit server upload returned unexpected response.")}function W8(){var Gt;const[t,e]=_.useState(""),[n,r]=_.useState(null),[s,a]=_.useState(!1),[c,u]=_.useState(!1),[h,f]=_.useState(!1),[m,y]=_.useState(!1),[v,w]=_.useState(!1),[b,x]=_.useState(null),[E,A]=_.useState(null),[j,C]=_.useState(null),[L,V]=_.useState("basic"),[z,P]=_.useState({}),[k,D]=_.useState(null),[R,O]=_.useState(""),[U,F]=_.useState(""),[H,Q]=_.useState(""),[K,Z]=_.useState(""),[W,Y]=_.useState(""),[ne,B]=_.useState(""),[ee,ue]=_.useState(""),[Se,Le]=_.useState(""),[Te,we]=_.useState(""),[Ce,He]=_.useState(""),[Ve,st]=_.useState(""),[it,ve]=_.useState(null),Ie=ru(),mt=Ji();_e.useEffect(()=>{const ye=new URLSearchParams(mt.search).get("batch");ve(ye)},[mt.search]);const an=(ie,ye)=>{P(Ue=>{var Tt;return{...Ue,[ie]:{videos:!1,files:!1,quizzes:!1,...Ue[ie]||{},[ye]:!((Tt=Ue[ie])!=null&&Tt[ye])}}})},{years:zn,batches:jr,loading:Lt,error:mn,retryConnection:Ir,updateYear:is,updateBatch:dn,createSubject:Ms,createLecture:Fs,updateLecture:zt,createYear:kt,createBatch:Bn,deleteBatch:bn,deleteLecture:Ar,deleteSubject:os,addVideo:zr,addFile:Vs,addQuiz:gi}=El(),{news:as}=r0(),qn=(ie,ye)=>{C(ie),A(ye),r(null),a(!0)},Us=(ie,ye)=>{console.log(" Opening subject form for year:",ie.yearNumber,"type:",ye),x({id:ie.id,number:ie.yearNumber}),V(ye),u(!0)},Ze=(ie,ye)=>{C(ie),V(ye),w(!0)},Et=(ie,ye)=>{C(ie),A(ye),f(!0)},gt=(ie,ye)=>{C(ie),A(ye),y(!0)};if(s)return o.jsx(m0,{quiz:n,onClose:()=>{a(!1),r(null),A(null)},onSave:async ie=>{j!=null&&j.id&&E&&await gi(j.id,E,{title:ie.title,description:ie.description,questions:ie.questions||[],timeLimit:ie.timeLimit,passingScore:ie.passingScore}),a(!1),r(null),A(null)}});if(console.log(" Render check - isSubjectFormOpen:",c,"selectedYear:",b),c)return console.log(" Rendering SubjectForm"),o.jsx(nP,{year:b==null?void 0:b.number,yearType:L,onClose:()=>{u(!1),x(null)},onSave:async ie=>{try{await Ms({...ie,yearId:(b==null?void 0:b.id)||"",order:1}),u(!1),x(null)}catch(ye){console.error("Error saving subject:",ye),alert("Failed to save subject. Please try again.")}}});if(v){const ie=E?(Gt=j==null?void 0:j.lectures)==null?void 0:Gt.find(ye=>ye.id===E):null;return o.jsx(Lm,{lecture:ie,subjectId:j==null?void 0:j.id,subjectName:j==null?void 0:j.name,yearType:L,onClose:()=>{w(!1),C(null),A(null)},onSave:async ye=>{try{ie?await zt(ie.id,ye):await Fs(ye),w(!1),C(null),A(null)}catch(Ue){console.error("Error saving lecture:",Ue),alert("Failed to save lecture. Please try again.")}}})}if(h)return o.jsx(g0,{lectureId:E,onClose:()=>{f(!1),A(null)},onSave:async ie=>{j!=null&&j.id&&E&&await Vs(j.id,E,ie),f(!1),A(null)}});if(m)return o.jsx(y0,{lectureId:E,onClose:()=>{y(!1),A(null)},onSave:async ie=>{j!=null&&j.id&&E&&await zr(j.id,E,ie),y(!1),A(null)}});const Bt=(ie,ye)=>{var Ue,Tt;return o.jsxs(pe,{className:`border-l-4 ${ye==="basic"?"border-l-blue-500":"border-l-red-500"}`,children:[o.jsx(Be,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[ie.imageUrl?o.jsx("img",{src:ie.imageUrl,alt:`Year ${ie.yearNumber}`,className:"w-24 h-24 object-cover rounded-md flex-shrink-0",onError:lt=>{lt.currentTarget.style.display="none"}}):o.jsx("div",{className:"w-24 h-24 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:ye==="basic"?o.jsx(id,{className:"h-6 w-6 text-blue-600"}):o.jsx(od,{className:"h-6 w-6 text-red-600"})}),o.jsx(Ke,{className:"flex flex-col",children:k===ie.id?o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(Ne,{value:R,onChange:lt=>O(lt.target.value),className:"w-48",placeholder:"Batch name"}),o.jsx(te,{size:"sm",onClick:async()=>{try{await(is==null?void 0:is(ie.id,{batchName:R,batch_name:R})),D(null),O("")}catch(lt){console.error(lt),alert("Failed to save batch name")}},children:"Save"}),o.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{D(null),O("")},children:"Cancel"})]}):o.jsx(o.Fragment,{children:ie.batchName?o.jsxs(o.Fragment,{children:[o.jsx(Zn,{to:`/admin/years/${ie.id}`,className:"text-lg font-bold text-foreground hover:underline",children:ie.batchName}),o.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[o.jsxs("span",{className:"text-sm text-muted",children:["Year ",ie.yearNumber]}),ie.name&&o.jsxs("span",{className:"ml-2",children:[" ",ie.name]}),ie.academicSupervisor&&o.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ie.academicSupervisor]}),ie.cr&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ie.cr]}),ie.actor&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ie.actor]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs(Zn,{to:`/admin/years/${ie.id}`,className:"text-lg font-medium text-blue-600 hover:underline",children:["Year ",ie.yearNumber]}),o.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[ie.name?o.jsx("span",{className:"mr-2",children:ie.name}):o.jsx("span",{className:"italic",children:"No batch name"}),ie.academicSupervisor&&o.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ie.academicSupervisor]}),ie.cr&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ie.cr]}),ie.actor&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ie.actor]})]})]})})})]}),o.jsx("div",{className:"flex items-center gap-2"})]})}),o.jsx(me,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ns,{className:"h-4 w-4 text-blue-600"}),o.jsx("span",{className:"font-semibold",children:"Subjects"}),o.jsxs(Pt,{variant:"secondary",children:[((Ue=ie.subjects)==null?void 0:Ue.length)||0," subjects"]}),o.jsxs(Pt,{variant:"outline",children:[(as||[]).filter(lt=>lt.yearId===ie.id).length," ","news"]})]}),o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>Us(ie,ye),className:"flex items-center gap-1",children:[o.jsx(Jt,{className:"h-3 w-3"}),"Add Subject"]})]}),!ie.subjects||ie.subjects.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Ns,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No subjects added yet"}),o.jsx(te,{variant:"outline",size:"sm",onClick:()=>Us(ie,ye),children:"Add first subject"})]}):o.jsx("div",{className:"grid gap-4",children:(Tt=ie.subjects)==null?void 0:Tt.map(lt=>{var yt;return o.jsxs(pe,{className:"bg-secondary/10",children:[o.jsx(Be,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[lt.imageUrl?o.jsx("img",{src:lt.imageUrl,alt:lt.name,className:"w-8 h-8 object-cover rounded",onError:Re=>{Re.currentTarget.style.display="none"}}):o.jsx(Ns,{className:"h-5 w-5 text-blue-600"}),o.jsx(Zn,{to:`/admin/subjects/${lt.id}`,className:"font-medium text-lg text-blue-600 hover:underline",children:lt.name}),o.jsxs(Pt,{variant:"outline",className:"text-xs",children:[((yt=lt.lectures)==null?void 0:yt.length)||0," lectures"]})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>Ze(lt,ye),className:"h-8 px-3 text-xs",children:[o.jsx(Jt,{className:"h-3 w-3 mr-1"}),"Add Lecture"]}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:async()=>{if(confirm(`Delete subject "${lt.name}"? This will remove its lectures.`))try{await os(lt.id)}catch(Re){console.error(Re),alert("Failed to delete subject")}},children:o.jsx(En,{className:"h-3 w-3"})})]})]})}),lt.lectures&&lt.lectures.length>0&&o.jsx(me,{className:"pt-0",children:o.jsxs("div",{className:"grid gap-3",children:[lt.lectures.slice(0,3).map(Re=>{var Qt,yi,ur,$s,zs,vi,dr,to,bl;return o.jsx(pe,{className:"bg-background border",children:o.jsx(me,{className:"p-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:Re.imageUrl?o.jsx("img",{src:Re.imageUrl,alt:Re.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(ni,{className:"h-6 w-6 text-muted-foreground"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:Re.name}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:Re.description||"No description available"}),o.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>an(Re.id,"videos"),className:`h-6 px-2 text-xs ${(Qt=z[Re.id])!=null&&Qt.videos?"bg-accent":""}`,children:[o.jsx(fv,{className:"h-3 w-3 mr-1"}),"Videos (",((yi=Re.videos)==null?void 0:yi.length)||0,")"]}),o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>an(Re.id,"files"),className:`h-6 px-2 text-xs ${(ur=z[Re.id])!=null&&ur.files?"bg-accent":""}`,children:[o.jsx(Cs,{className:"h-3 w-3 mr-1"}),"Files (",(($s=Re.files)==null?void 0:$s.length)||0,")"]}),o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>an(Re.id,"quizzes"),className:`h-6 px-2 text-xs ${(zs=z[Re.id])!=null&&zs.quizzes?"bg-accent":""}`,children:[o.jsx($i,{className:"h-3 w-3 mr-1"}),"Quizzes (",((vi=Re.quizzes)==null?void 0:vi.length)||0,")"]}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{A(Re.id),C(lt),w(!0)},title:"Edit Lecture",children:o.jsx(ts,{className:"h-3 w-3"})}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${Re.name}"?`))try{await Ar(lt.id,Re.id)}catch(qt){console.error(qt),alert("Failed to delete lecture")}},children:o.jsx(En,{className:"h-3 w-3"})})]}),((dr=z[Re.id])==null?void 0:dr.videos)&&o.jsxs("div",{className:"mb-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Videos:"}),o.jsxs(te,{variant:"ghost",size:"xs",onClick:()=>gt(lt,Re.id),className:"h-6 px-2 text-xs",children:[o.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),o.jsxs("div",{className:"space-y-1",children:[Re.videos&&Re.videos.length>0?Re.videos.slice(0,4).map(qt=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fv,{className:"h-3 w-3 text-blue-600"}),o.jsx("a",{href:qt.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate",children:qt.title||qt.name||"Untitled Video"})]},qt.id)):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"}),Re.videos&&Re.videos.length>4&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Re.videos.length-4," more videos"]})]})]}),((to=z[Re.id])==null?void 0:to.files)&&o.jsxs("div",{className:"mb-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Files:"}),o.jsxs(te,{variant:"ghost",size:"xs",onClick:()=>Et(lt,Re.id),className:"h-6 px-2 text-xs",children:[o.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),o.jsxs("div",{className:"space-y-1",children:[Re.files&&Re.files.length>0?Re.files.slice(0,4).map(qt=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Cs,{className:"h-3 w-3 text-green-600"}),o.jsx("a",{href:qt.fileUrl||qt.url||"#",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 hover:underline truncate",onClick:Nl=>{!qt.fileUrl&&!qt.url&&(Nl.preventDefault(),alert("No file URL available"))},children:qt.title||qt.name||"Untitled File"})]},qt.id)):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"}),Re.files&&Re.files.length>4&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Re.files.length-4," more files"]})]})]}),((bl=z[Re.id])==null?void 0:bl.quizzes)&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Quizzes:"}),o.jsxs(te,{variant:"ghost",size:"xs",onClick:()=>qn(lt,Re.id),className:"h-6 px-2 text-xs",children:[o.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),o.jsxs("div",{className:"space-y-1",children:[Re.quizzes&&Re.quizzes.length>0?Re.quizzes.slice(0,4).map(qt=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($i,{className:"h-3 w-3 text-purple-600"}),o.jsx("span",{className:"text-xs text-purple-600",children:qt.title||qt.name||"Untitled Quiz"})]},qt.id)):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"}),Re.quizzes&&Re.quizzes.length>4&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Re.quizzes.length-4," more quizzes"]})]})]})]})]})})},Re.id)}),lt.lectures.length>3&&o.jsxs("div",{className:"text-center text-muted-foreground text-xs pt-2",children:["+",lt.lectures.length-3," more lectures"]})]})})]},lt.id)})})]})})]},ie.yearNumber)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Academic Years Management"}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("p",{className:"text-muted-foreground",children:"Manage curriculum by academic years, subjects, and lectures"})})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(WA,{children:[o.jsx(k8,{asChild:!0,children:o.jsxs(te,{children:[o.jsx(H2,{className:"h-4 w-4 mr-2"})," Add Batch"]})}),o.jsxs(u0,{children:[o.jsxs(d0,{children:[o.jsx(h0,{children:"Add Batch"}),o.jsx(f0,{children:"Create a new batch for grouping years"})]}),o.jsxs("div",{className:"space-y-3 mt-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Batch name"}),o.jsx(Ne,{value:ee,onChange:ie=>ue(ie.target.value),placeholder:"e.g., Batch A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"CR (optional)"}),o.jsx(Ne,{value:Se,onChange:ie=>Le(ie.target.value),placeholder:"Class representative"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Group Link (optional)"}),o.jsx(Ne,{value:Te,onChange:ie=>we(ie.target.value),placeholder:"WhatsApp/Telegram group link"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Graduate Date (optional)"}),o.jsx(Ne,{value:Ce,onChange:ie=>He(ie.target.value),placeholder:"e.g., 2025-06-15",type:"date"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Academic Supervisor (optional)"}),o.jsx(Ne,{value:Ve,onChange:ie=>st(ie.target.value),placeholder:"e.g., Dr. Ahmed Hassan"})]})]}),o.jsxs(KA,{className:"mt-4",children:[o.jsx(te,{onClick:async()=>{try{if(!ee||!ee.trim()){alert("Please provide a batch name");return}await(Bn==null?void 0:Bn({batchName:ee.trim(),cr:Se==null?void 0:Se.trim(),groupLink:Te==null?void 0:Te.trim(),group_link:Te==null?void 0:Te.trim(),graduateDate:Ce==null?void 0:Ce.trim(),graduate_date:Ce==null?void 0:Ce.trim(),academicSupervisor:Ve==null?void 0:Ve.trim(),academic_supervisor:Ve==null?void 0:Ve.trim()})),ue(""),Le(""),we(""),He(""),st("");const ie=document.querySelector("[data-dialog-close]");ie&&ie.click(),alert("Batch created")}catch(ie){console.error(ie),alert("Failed to create batch")}},children:"Create"}),o.jsx(O8,{asChild:!0,children:o.jsx(te,{variant:"ghost",className:"ml-2","data-dialog-close":!0,children:"Cancel"})})]})]})]})})]}),Lt&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Qi,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading academic years..."})]})}),mn&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading years"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:mn}),o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx(te,{onClick:Ir,variant:"outline",children:"Retry Connection"}),o.jsx(te,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!Lt&&!mn&&o.jsxs(o.Fragment,{children:[o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search lectures, subjects, or content...",value:t,onChange:ie=>e(ie.target.value),className:"pl-10"})]})})}),o.jsx("div",{className:"space-y-6",children:!jr||jr.length===0?o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Ns,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No batches found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a batch to start adding academic years."})]})}):it?(()=>{const ie=(jr||[]).find(Ue=>Ue.id===it)||null,ye=(zn||[]).filter(Ue=>(Ue.batchId||Ue.batch_name)===it);return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[ie!=null&&ie.imageUrl?o.jsx("img",{src:ie.imageUrl,alt:ie.batchName,className:"w-40 h-40 object-cover rounded-md flex-shrink-0"}):o.jsx("div",{className:"w-40 h-40 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:o.jsx(Ns,{className:"h-6 w-6 text-muted-foreground"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold",children:(ie==null?void 0:ie.batchName)||"Batch"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:ie!=null&&ie.cr?`CR: ${ie.cr}`:""})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{onClick:()=>{ve(null),Ie("/admin/years")},children:"Back to Batches"}),o.jsx(te,{size:"sm",variant:"ghost",onClick:async()=>{try{const Ue=document.createElement("input");Ue.type="file",Ue.accept="image/*",Ue.onchange=async()=>{var lt;const Tt=(lt=Ue.files)==null?void 0:lt[0];if(Tt)try{let yt=null;try{yt=await Tr(Tt)}catch(Re){console.warn("Cloudinary upload failed, trying ImageKit",(Re==null?void 0:Re.message)||Re),yt=await Zo(Tt,Tt.name)}if(!yt){alert("Upload failed");return}await(dn==null?void 0:dn(ie==null?void 0:ie.id,{image_url:yt,imageUrl:yt})),alert("Image updated")}catch(yt){console.error(yt),alert("Failed to upload image")}},Ue.click()}catch(Ue){console.error(Ue),alert("Could not open file dialog")}},children:"Change Image"}),o.jsxs(te,{onClick:async()=>{try{const Ue=window.prompt("Enter year number for this batch:");if(!Ue)return;const Tt=parseInt(Ue,10);if(isNaN(Tt)){alert("Invalid");return}await(kt==null?void 0:kt((ie==null?void 0:ie.id)||null,{yearNumber:Tt})),alert("Year created")}catch(Ue){console.error(Ue),alert("Failed")}},children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"})," Add Year"]}),o.jsxs(te,{variant:"destructive",onClick:async()=>{try{if(!confirm("Delete this batch and all its years?"))return;await(bn==null?void 0:bn(ie==null?void 0:ie.id)),ve(null),Ie("/admin/years"),alert("Batch deleted")}catch(Ue){console.error(Ue),alert("Failed to delete batch")}},children:[o.jsx(En,{className:"h-4 w-4"})," Delete"]})]})]}),o.jsx("div",{className:"mt-4 space-y-4",children:ye.length===0?o.jsx(pe,{children:o.jsx(me,{className:"p-6 text-center",children:"No years in this batch yet."})}):ye.sort((Ue,Tt)=>Ue.yearNumber-Tt.yearNumber).map(Ue=>o.jsx("div",{children:Bt(Ue,Ue.type)},Ue.id))})]})})():o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:(jr||[]).map(ie=>o.jsxs(pe,{className:"cursor-pointer flex flex-col overflow-hidden",onClick:()=>{Ie(`/admin/years?batch=${ie.id}`),ve(ie.id)},children:[o.jsx(Be,{className:"flex-1",onClick:ye=>k===ie.id&&ye.stopPropagation(),children:o.jsxs("div",{className:"flex items-start gap-4",children:[ie.imageUrl?o.jsx("img",{src:ie.imageUrl,alt:ie.batchName,className:"w-56 h-56 object-cover rounded-md flex-shrink-0"}):o.jsx("div",{className:"w-56 h-56 rounded-md flex-shrink-0 bg-muted"}),o.jsx("div",{className:"flex-1 min-w-0",children:k===ie.id?o.jsxs("div",{className:"flex flex-col gap-2 w-full",onClick:ye=>ye.stopPropagation(),children:[o.jsx(Ne,{value:R,onChange:ye=>O(ye.target.value),placeholder:"Batch name",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Ne,{value:U||"",onChange:ye=>F(ye.target.value),placeholder:"CR",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Ne,{value:H,onChange:ye=>Q(ye.target.value),placeholder:"Image URL (or upload)",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Ne,{value:K||"",onChange:ye=>Z(ye.target.value),placeholder:"Group Link",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Ne,{value:W||"",onChange:ye=>Y(ye.target.value),placeholder:"Graduate Date (e.g., 2025-06-15)",type:"date",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Ne,{value:ne||"",onChange:ye=>B(ye.target.value),placeholder:"Academic Supervisor",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{size:"sm",onClick:ye=>{ye.stopPropagation();try{const Ue=document.createElement("input");Ue.type="file",Ue.accept="image/*",Ue.onchange=async()=>{var lt;const Tt=(lt=Ue.files)==null?void 0:lt[0];if(Tt)try{let yt=null;try{yt=await Tr(Tt)}catch(Re){console.warn("Cloudinary upload failed, trying ImageKit",(Re==null?void 0:Re.message)||Re),yt=await Zo(Tt,Tt.name)}if(!yt){alert("Upload failed");return}Q(yt)}catch(yt){console.error(yt),alert("Upload failed")}},Ue.click()}catch(Ue){console.error(Ue),alert("Could not open file dialog")}},children:"Upload"}),o.jsx(te,{size:"sm",onClick:async ye=>{ye.stopPropagation();try{await(dn==null?void 0:dn(ie.id,{batch_name:R,batchName:R,cr:U,image_url:H,imageUrl:H,group_link:K,groupLink:K,graduate_date:W,graduateDate:W,academic_supervisor:ne,academicSupervisor:ne})),D(null),O(""),F(""),Q(""),Z(""),Y(""),B(""),alert("Saved")}catch(Ue){console.error(Ue),alert("Failed to save")}},children:"Save"}),o.jsx(te,{size:"sm",variant:"ghost",onClick:ye=>{ye.stopPropagation(),D(null),O(""),F(""),Q(""),Z(""),Y(""),B("")},children:"Cancel"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ke,{className:"text-lg",children:ie.batchName||"Batch"}),o.jsxs(St,{className:"text-sm text-muted-foreground space-y-1",children:[ie.cr&&o.jsxs("div",{children:["CR: ",ie.cr]}),(ie.academicSupervisor||ie.academic_supervisor)&&o.jsxs("div",{children:["Supervisor: ",ie.academicSupervisor||ie.academic_supervisor]}),ie.graduateDate&&o.jsxs("div",{children:["Graduate: ",ie.graduateDate]}),ie.groupLink&&o.jsx("a",{href:ie.groupLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",onClick:ye=>ye.stopPropagation(),children:" Group Link"})]})]})})]})}),o.jsx(me,{className:"mt-auto",onClick:ye=>k===ie.id&&ye.stopPropagation(),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Years:"," ",(zn||[]).filter(ye=>(ye.batchId||ye.batch_name)===ie.id).length]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{size:"sm",variant:"outline",onClick:ye=>{ye.stopPropagation(),Ie(`/admin/years?batch=${ie.id}`),ve(ie.id)},children:"View Years"}),o.jsx(te,{size:"sm",variant:"ghost",onClick:ye=>{ye.stopPropagation(),D(ie.id),O(ie.batchName||""),F(ie.cr||""),Q(ie.imageUrl||""),Z(ie.groupLink||ie.group_link||""),Y(ie.graduateDate||ie.graduate_date||""),B(ie.academicSupervisor||ie.academic_supervisor||"")},children:"Edit"}),o.jsx(te,{size:"sm",variant:"ghost",onClick:async ye=>{ye.stopPropagation();try{const Ue=document.createElement("input");Ue.type="file",Ue.accept="image/*",Ue.onchange=async()=>{var lt;const Tt=(lt=Ue.files)==null?void 0:lt[0];if(Tt)try{let yt=null;try{yt=await Tr(Tt)}catch(Re){console.warn("Cloudinary upload failed, trying ImageKit",(Re==null?void 0:Re.message)||Re),yt=await Zo(Tt,Tt.name)}if(!yt){alert("Upload failed");return}await(dn==null?void 0:dn(ie.id,{image_url:yt,imageUrl:yt})),alert("Image updated")}catch(yt){console.error(yt),alert("Failed to upload image")}},Ue.click()}catch(Ue){console.error(Ue),alert("Could not open file dialog")}},children:"Change Image"}),o.jsx(te,{size:"sm",variant:"destructive",onClick:async ye=>{ye.stopPropagation();try{if(!confirm("Delete this batch and all its years? This cannot be undone."))return;await(bn==null?void 0:bn(ie.id)),alert("Batch deleted")}catch(Ue){console.error(Ue),alert("Failed to delete batch")}},children:"Delete"})]})]})})]},ie.id))})})]})]})}function H8(){var V;const{id:t}=WT(),[e,n]=_.useState(!1),[r,s]=_.useState(!1),[a,c]=_.useState(null),[u,h]=_.useState(null),[f,m]=_.useState(""),{years:y,loading:v,updateYear:w,createSubject:b,createLecture:x,deleteSubject:E,deleteLecture:A}=El(),j=y.find(z=>z.id===t);if(v)return o.jsx(pe,{children:o.jsx(me,{className:"text-center py-12",children:"Loading..."})});if(!j)return o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:"Year not found"}),o.jsx("div",{className:"flex gap-2 justify-center",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(te,{variant:"outline",children:"Back to Years"})})})]})});const C=async z=>{try{await b({...z,yearId:j.id}),n(!1)}catch(P){console.error(P),alert("Failed to add subject")}},L=async z=>{try{await x(z),s(!1),c(null)}catch(P){console.error(P),alert("Failed to add lecture")}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Zn,{to:"/admin/years",children:o.jsxs(te,{variant:"ghost",children:[o.jsx(Os,{className:"h-4 w-4 mr-2"})," Back"]})}),o.jsxs("div",{children:[j.batchName?o.jsxs(o.Fragment,{children:[o.jsx("h1",{className:"text-2xl font-bold",children:j.batchName}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Year ",j.yearNumber]})]}):o.jsxs("h1",{className:"text-2xl font-bold",children:["Year ",j.yearNumber]}),o.jsx("p",{className:"text-muted-foreground",children:"Manage subjects and lectures for this year"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:!window.__yearEditing&&o.jsxs(o.Fragment,{children:[o.jsxs(te,{variant:"ghost",onClick:async()=>{try{const z=document.createElement("input");z.type="file",z.accept="image/*",z.onchange=async()=>{var k;const P=(k=z.files)==null?void 0:k[0];if(P)try{let D=null;try{D=await Tr(P)}catch(R){console.warn("Cloudinary upload failed, attempting ImageKit fallback:",(R==null?void 0:R.message)||R);try{D=await Zo(P,P.name)}catch(O){throw console.error("ImageKit upload also failed:",O),R}}if(!D||typeof D!="string"||!D.startsWith("http")){console.error("Invalid upload response:",D),alert("Image upload failed: unexpected response from upload provider"),window.__yearEditing=!1;return}await(w==null?void 0:w(j.id,{imageUrl:D})),window.__yearEditing=!1}catch(D){console.error(D);const O=((D==null?void 0:D.message)||String(D)||"").toLowerCase();if(O.includes("cloudinary cloud name is not configured")){const U=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!U){alert("No cloud name provided. Upload cancelled."),window.__yearEditing=!1;return}const F=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),H=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{Xa(U,F||null,H||null);const Q=await Tr(P);if(console.log("Cloudinary upload result after config:",Q),!Q||typeof Q!="string"||!Q.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(w==null?void 0:w(j.id,{imageUrl:Q}))}catch(Q){console.error(Q),alert("Image upload failed after configuring Cloudinary: "+(Q.message||Q))}window.__yearEditing=!1;return}else if(O.includes("cloudinary signing did not return an api key")||O.includes("missing required parameter - api_key")||O.includes("missing required parameter 'api_key'")){const U=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(U&&U.trim())try{Xa(null,null,U.trim());const F=await Tr(P);if(!F||typeof F!="string"||!F.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(w==null?void 0:w(j.id,{imageUrl:F})),window.__yearEditing=!1;return}catch(F){console.error(F),alert("Image upload failed after setting API key: "+(F.message||F)),window.__yearEditing=!1;return}}alert("Image upload failed: "+(D.message||D))}},z.click()}catch(z){console.error(z),alert("Could not open file dialog")}},children:[o.jsx(nO,{className:"h-4 w-4 mr-2"})," ",j.imageUrl?"Change Image":"Add Image"]}),o.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("academicSupervisor"),m(j.academicSupervisor||j.acadmic_supervisor||"")},children:"Academic Supervisor"}),o.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("actor"),m(j.actor||"")},children:"Actor"}),o.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("groupUrl"),m(j.groupUrl||j.group_url||"")},children:"Group URL"}),o.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("batchName"),m(j.batchName||j.batch_name||"")},children:"Batch Name"}),j.imageUrl&&o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm("Remove year image?"))try{await(w==null?void 0:w(j.id,{imageUrl:""}))}catch(z){console.error(z),alert("Failed to remove year image")}},children:o.jsx(En,{className:"h-3 w-3"})})]})})]}),u&&o.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[o.jsx(Ne,{placeholder:u==="image"?"Image URL":u==="groupUrl"?"Group URL":u==="academicSupervisor"?"Academic Supervisor":"Actor",value:f,onChange:z=>m(z.target.value),className:"w-full max-w-2xl"}),o.jsx(te,{onClick:async()=>{try{const z={};u==="image"?z.imageUrl=f:u==="academicSupervisor"?(z.academicSupervisor=f,z.acadmic_supervisor=f):u==="actor"?z.actor=f:u==="groupUrl"?(z.groupUrl=f,z.group_url=f):u==="batchName"&&(z.batchName=f,z.batch_name=f),await(w==null?void 0:w(j.id,z)),h(null),m(""),window.__yearEditing=!1}catch(z){console.error(z),alert("Failed to save field")}},children:"Save"}),o.jsx(te,{variant:"ghost",onClick:()=>{h(null),m(""),window.__yearEditing=!1},children:"Cancel"})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{className:"flex items-center gap-2",children:["Subjects",o.jsxs(Pt,{variant:"secondary",children:[((V=j.subjects)==null?void 0:V.length)||0," subjects"]})]})}),o.jsxs(me,{children:[o.jsx("div",{className:"flex justify-end mb-4",children:o.jsxs(te,{onClick:()=>n(!0),className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-3 w-3"})," Add Subject"]})}),!j.subjects||j.subjects.length===0?o.jsx("div",{className:"text-center py-8",children:"No subjects added yet."}):o.jsx("div",{className:"grid gap-4",children:j.subjects.map(z=>o.jsxs(pe,{className:"bg-secondary/10",children:[o.jsx(Be,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[z.imageUrl?o.jsx("img",{src:z.imageUrl,alt:z.name,className:"w-8 h-8 object-cover rounded"}):o.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-lg",children:z.name}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:[(z.lectures||[]).length," lectures"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(te,{onClick:()=>{c(z),s(!0)},variant:"ghost",size:"sm",children:"Add Lecture"}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete subject "${z.name}"?`))try{await E(z.id)}catch(P){console.error(P),alert("Failed to delete subject")}},children:o.jsx(En,{className:"h-3 w-3"})})]})]})}),z.lectures&&z.lectures.length>0&&o.jsx(me,{children:o.jsx("div",{className:"grid gap-3",children:z.lectures.map(P=>o.jsx(pe,{className:"bg-background border",children:o.jsx(me,{className:"p-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:P.imageUrl?o.jsx("img",{src:P.imageUrl,alt:P.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"No image"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:P.name}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:P.description||"No description available"})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${P.name}"?`))try{await A(z.id,P.id)}catch(k){console.error(k),alert("Failed to delete lecture")}},children:o.jsx(En,{className:"h-3 w-3"})})})]})})},P.id))})})]},z.id))})]})]}),e&&o.jsx(nP,{year:j.yearNumber,yearType:j.type,onClose:()=>n(!1),onSave:C}),r&&a&&o.jsx(Lm,{subjectId:a.id,subjectName:a.name,yearType:j.type,onClose:()=>{s(!1),c(null)},onSave:L})]})}function K8({queryKey:t,queryFn:e,pageSize:n=10,enabled:r=!0,staleTime:s=5*60*1e3,gcTime:a=30*60*1e3}){var P,k;const c=Qx(),{data:u,fetchNextPage:h,hasNextPage:f,isFetchingNextPage:m,isLoading:y,error:v,refetch:w}=MM({queryKey:[...t,n],queryFn:({pageParam:D=0})=>e(D,n),getNextPageParam:(D,R)=>{if(D.hasMore)return R.length},initialPageParam:0,enabled:r,staleTime:s,gcTime:a,refetchOnWindowFocus:!1,refetchOnMount:!1}),b=(u==null?void 0:u.pages.flatMap(D=>D.data))??[],x=u!=null&&u.pages.length?u.pages.length-1:0,E=((P=u==null?void 0:u.pages[x])==null?void 0:P.data)??[],A=((k=u==null?void 0:u.pages[0])==null?void 0:k.total)??0,j=D=>{var R;return((R=u==null?void 0:u.pages[D])==null?void 0:R.data)??[]},C=D=>((u==null?void 0:u.pages.length)??0)>D,L=()=>{f&&!m&&h()},V=D=>{c.setQueryData([...t,n],R=>{if(!R)return R;const O=[...R.pages];return O[D]&&O.splice(D,1),{...R,pages:O}})},z=()=>{c.invalidateQueries({queryKey:t})};return{data:E,allData:b,currentPage:x,totalPages:Math.ceil(A/n),totalCount:A,hasNextPage:f??!1,isLoading:y,isFetchingNextPage:m,error:v,loadNextPage:h,prefetchNextPage:L,getPage:j,isPageCached:C,invalidatePage:V,clearCache:z,refetch:w}}const G8=10;async function Q8(t,e,n){var r;try{const s=pn(rs(Ae,"lectures"),_l("order","asc")),a=await _t(s),c=[];for(const y of a.docs.slice(0,100)){const v=y.data(),w=y.id,b=y.ref,[x,E,A]=await Promise.all([_t(Qe(b,"files")),_t(Qe(b,"quizzes")),_t(Qe(b,"videos"))]),j=x.docs.map(V=>{var P;const z=V.data();return{id:V.id,title:z.title||"",fileUrl:z.url||z.fileUrl||"",description:z.description||"",uploadedAt:((P=z.uploadedAt)==null?void 0:P.toDate())||new Date,uploadedBy:z.uploadedBy||"",imageUrl:z.imageUrl||z.thumbnailUrl||"",thumbnailUrl:z.thumbnailUrl||z.imageUrl||""}}),C=E.docs.map(V=>{var P;const z=V.data();return{id:V.id,title:z.title||"",description:z.description||"",questions:z.questions||[],timeLimit:z.duration||30,passingScore:z.passRate||70,createdAt:((P=z.createdAt)==null?void 0:P.toDate())||new Date,createdBy:z.uploadedBy||""}}),L=A.docs.map(V=>{var P,k;const z=V.data();return{id:V.id,title:z.title||z.name||"",youtubeUrl:z.url||z.youtubeUrl||"",thumbnailUrl:z.thumbnailUrl||z.thumbnail||"",duration:z.duration||z.time||"",description:z.description||"",uploadedAt:((k=(P=z.uploadedAt)==null?void 0:P.toDate)==null?void 0:k.call(P))||new Date,uploadedBy:z.uploadedBy||z.uploader||"",imageUrl:z.thumbnailUrl||""}});c.push({id:w,title:v.title||"",description:v.description||"",subject:v.subjectId||"Unknown",order:v.order||1,createdAt:((r=v.createdAt)==null?void 0:r.toDate())||new Date,createdBy:v.uploadedBy||"",videos:L,files:j,quizzes:C})}c.sort((y,v)=>(y.order||0)-(v.order||0));const u=t*e,h=u+e,f=c.slice(u,h),m=h<c.length;return{data:f,total:c.length,hasMore:m}}catch(s){throw console.error("Error fetching lectures page:",s),s}}function Y8(t=G8){return K8({queryKey:["lectures-paginated"],queryFn:Q8,pageSize:t,staleTime:5*60*1e3,gcTime:30*60*1e3})}function Mm(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const f=pn(rs(Ae,"lectures")),m=eo(f,async y=>{var w;const v=[];for(const b of y.docs){const x=b.data(),E=b.id,A=b.ref,j=await _t(Qe(A,"files")),C=[];j.forEach(k=>{var R;const D=k.data();C.push({id:k.id,title:D.title||"",fileUrl:D.url||D.fileUrl||"",description:D.description||"",uploadedAt:((R=D.uploadedAt)==null?void 0:R.toDate())||new Date,uploadedBy:D.uploadedBy||"",imageUrl:D.imageUrl||D.thumbnailUrl||"",thumbnailUrl:D.thumbnailUrl||D.imageUrl||""})});const L=await _t(Qe(A,"quizzes")),V=[];L.forEach(k=>{var R;const D=k.data();V.push({id:k.id,title:D.title||"",description:D.description||"",questions:D.questions||[],timeLimit:D.duration||30,passingScore:D.passRate||70,createdAt:((R=D.createdAt)==null?void 0:R.toDate())||new Date,createdBy:D.uploadedBy||""})});const z=await _t(Qe(A,"videos")),P=[];z.empty?(x.videos||[]).forEach(D=>{var R,O;P.push({id:D.id||D.videoId||"",title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:((O=(R=D.uploadedAt)==null?void 0:R.toDate)==null?void 0:O.call(R))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}):z.forEach(k=>{var R,O;const D=k.data();P.push({id:k.id,title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:((O=(R=D.uploadedAt)==null?void 0:R.toDate)==null?void 0:O.call(R))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}),v.push({id:E,title:x.title||"",description:x.description||"",subject:x.subjectId||"Unknown",order:x.order||1,createdAt:((w=x.createdAt)==null?void 0:w.toDate())||new Date,createdBy:x.uploadedBy||"",videos:P,files:C,quizzes:V})}v.sort((b,x)=>(b.order||0)-(x.order||0)),e(v),r(!1)},y=>{console.error("Error fetching lectures:",y),a("Failed to fetch lectures"),r(!1)});return()=>m()},[]),{lectures:t,loading:n,error:s,createLecture:async(f,m)=>{try{const y=At(Ae,"Subjects",m),v=Qe(y,"lectures"),{videos:w,files:b,quizzes:x,...E}=f,A=await xn(v,{...E,videos:w,subjectId:m});if(b&&b.length>0){const j=Qe(A,"files");for(const C of b)await xn(j,C)}if(x&&x.length>0){const j=Qe(A,"quizzes");for(const C of x)await xn(j,C)}}catch(y){throw console.error("Error creating lecture:",y),y}},updateLecture:async(f,m)=>{try{const y=pn(rs(Ae,"lectures")),v=await _t(y);for(const w of v.docs)if(w.id===f){await rn(w.ref,m);break}}catch(y){throw console.error("Error updating lecture:",y),y}},deleteLecture:async f=>{try{const m=pn(rs(Ae,"lectures")),y=await _t(m);for(const v of y.docs)if(v.id===f){await Sr(v.ref);break}}catch(m){throw console.error("Error deleting lecture:",m),m}}}}const rP=({className:t,...e})=>o.jsx("nav",{role:"navigation","aria-label":"pagination",className:Ge("mx-auto flex w-full justify-center",t),...e});rP.displayName="Pagination";const sP=_.forwardRef(({className:t,...e},n)=>o.jsx("ul",{ref:n,className:Ge("flex flex-row items-center gap-1",t),...e}));sP.displayName="PaginationContent";const ip=_.forwardRef(({className:t,...e},n)=>o.jsx("li",{ref:n,className:Ge("",t),...e}));ip.displayName="PaginationItem";const Fm=({className:t,isActive:e,size:n="icon",...r})=>o.jsx("a",{"aria-current":e?"page":void 0,className:Ge(KI({variant:e?"outline":"ghost",size:n}),t),...r});Fm.displayName="PaginationLink";const iP=({className:t,...e})=>o.jsxs(Fm,{"aria-label":"Go to previous page",size:"default",className:Ge("gap-1 pl-2.5",t),...e,children:[o.jsx(U2,{className:"h-4 w-4"}),o.jsx("span",{children:"Previous"})]});iP.displayName="PaginationPrevious";const oP=({className:t,...e})=>o.jsxs(Fm,{"aria-label":"Go to next page",size:"default",className:Ge("gap-1 pr-2.5",t),...e,children:[o.jsx("span",{children:"Next"}),o.jsx($2,{className:"h-4 w-4"})]});oP.displayName="PaginationNext";const aP=({className:t,...e})=>o.jsxs("span",{"aria-hidden":!0,className:Ge("flex h-9 w-9 items-center justify-center",t),...e,children:[o.jsx(q2,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"More pages"})]});aP.displayName="PaginationEllipsis";function P1(t,[e,n]){return Math.min(n,Math.max(e,t))}var X8=_.createContext(void 0);function v0(t){const e=_.useContext(X8);return t||e||"ltr"}var J8="DismissableLayer",vx="dismissableLayer.update",Z8="dismissableLayer.pointerDownOutside",e7="dismissableLayer.focusOutside",k1,lP=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cP=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=t,f=_.useContext(lP),[m,y]=_.useState(null),v=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=_.useState({}),b=jt(e,P=>y(P)),x=Array.from(f.layers),[E]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),A=x.indexOf(E),j=m?x.indexOf(m):-1,C=f.layersWithOutsidePointerEventsDisabled.size>0,L=j>=A,V=r7(P=>{const k=P.target,D=[...f.branches].some(R=>R.contains(k));!L||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},v),z=s7(P=>{const k=P.target;[...f.branches].some(R=>R.contains(k))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},v);return jx(P=>{j===f.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},v),_.useEffect(()=>{if(m)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(k1=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),R1(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=k1)}},[m,v,n,f]),_.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),R1())},[m,f]),_.useEffect(()=>{const P=()=>w({});return document.addEventListener(vx,P),()=>document.removeEventListener(vx,P)},[]),o.jsx(Je.div,{...h,ref:b,style:{pointerEvents:C?L?"auto":"none":void 0,...t.style},onFocusCapture:qe(t.onFocusCapture,z.onFocusCapture),onBlurCapture:qe(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:qe(t.onPointerDownCapture,V.onPointerDownCapture)})});cP.displayName=J8;var t7="DismissableLayerBranch",n7=_.forwardRef((t,e)=>{const n=_.useContext(lP),r=_.useRef(null),s=jt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(Je.div,{...t,ref:s})});n7.displayName=t7;function r7(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){uP(Z8,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function s7(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=_.useRef(!1);return _.useEffect(()=>{const s=a=>{a.target&&!r.current&&uP(e7,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function R1(){const t=new CustomEvent(vx);document.dispatchEvent(t)}function uP(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Hp(s,a):s.dispatchEvent(a)}var nv=0;function i7(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??O1()),document.body.insertAdjacentElement("beforeend",t[1]??O1()),nv++,()=>{nv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),nv--}},[])}function O1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var o7="Portal",dP=_.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,a]=_.useState(!1);Zt(()=>a(!0),[]);const c=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Wp.createPortal(o.jsx(Je.div,{...r,ref:e}),c):null});dP.displayName=o7;var hP=fA(),rv=function(){},Vm=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:rv,onWheelCapture:rv,onTouchMoveCapture:rv}),s=r[0],a=r[1],c=t.forwardProps,u=t.children,h=t.className,f=t.removeScrollBar,m=t.enabled,y=t.shards,v=t.sideCar,w=t.noIsolation,b=t.inert,x=t.allowPinchZoom,E=t.as,A=E===void 0?"div":E,j=t.gapMode,C=su(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=v,V=hA([n,e]),z=Jn(Jn({},C),s);return _.createElement(_.Fragment,null,m&&_.createElement(L,{sideCar:hP,removeScrollBar:f,shards:y,noIsolation:w,inert:b,setCallbacks:a,allowPinchZoom:!!x,lockRef:n,gapMode:j}),c?_.cloneElement(_.Children.only(u),Jn(Jn({},z),{ref:V})):_.createElement(A,Jn({},z,{className:h,ref:V}),u))});Vm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vm.classNames={fullWidth:md,zeroRight:pd};var xx=!1;if(typeof window<"u")try{var zf=Object.defineProperty({},"passive",{get:function(){return xx=!0,!0}});window.addEventListener("test",zf,zf),window.removeEventListener("test",zf,zf)}catch{xx=!1}var cc=xx?{passive:!1}:!1,a7=function(t){return t.tagName==="TEXTAREA"},fP=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!a7(t)&&n[e]==="visible")},l7=function(t){return fP(t,"overflowY")},c7=function(t){return fP(t,"overflowX")},D1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=pP(t,r);if(s){var a=mP(t,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},u7=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},d7=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},pP=function(t,e){return t==="v"?l7(e):c7(e)},mP=function(t,e){return t==="v"?u7(e):d7(e)},h7=function(t,e){return t==="h"&&e==="rtl"?-1:1},f7=function(t,e,n,r,s){var a=h7(t,window.getComputedStyle(e).direction),c=a*r,u=n.target,h=e.contains(u),f=!1,m=c>0,y=0,v=0;do{var w=mP(t,u),b=w[0],x=w[1],E=w[2],A=x-E-a*b;(b||A)&&pP(t,u)&&(y+=A,v+=b),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(m&&Math.abs(y)<1||!m&&Math.abs(v)<1)&&(f=!0),f},Bf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},L1=function(t){return[t.deltaX,t.deltaY]},M1=function(t){return t&&"current"in t?t.current:t},p7=function(t,e){return t[0]===e[0]&&t[1]===e[1]},m7=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},g7=0,uc=[];function y7(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),s=_.useState(g7++)[0],a=_.useState(i0)[0],c=_.useRef(t);_.useEffect(function(){c.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=uC([t.lockRef.current],(t.shards||[]).map(M1),!0).filter(Boolean);return x.forEach(function(E){return E.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=_.useCallback(function(x,E){if("touches"in x&&x.touches.length===2)return!c.current.allowPinchZoom;var A=Bf(x),j=n.current,C="deltaX"in x?x.deltaX:j[0]-A[0],L="deltaY"in x?x.deltaY:j[1]-A[1],V,z=x.target,P=Math.abs(C)>Math.abs(L)?"h":"v";if("touches"in x&&P==="h"&&z.type==="range")return!1;var k=D1(P,z);if(!k)return!0;if(k?V=P:(V=P==="v"?"h":"v",k=D1(P,z)),!k)return!1;if(!r.current&&"changedTouches"in x&&(C||L)&&(r.current=V),!V)return!0;var D=r.current||V;return f7(D,E,x,D==="h"?C:L)},[]),h=_.useCallback(function(x){var E=x;if(!(!uc.length||uc[uc.length-1]!==a)){var A="deltaY"in E?L1(E):Bf(E),j=e.current.filter(function(V){return V.name===E.type&&(V.target===E.target||E.target===V.shadowParent)&&p7(V.delta,A)})[0];if(j&&j.should){E.cancelable&&E.preventDefault();return}if(!j){var C=(c.current.shards||[]).map(M1).filter(Boolean).filter(function(V){return V.contains(E.target)}),L=C.length>0?u(E,C[0]):!c.current.noIsolation;L&&E.cancelable&&E.preventDefault()}}},[]),f=_.useCallback(function(x,E,A,j){var C={name:x,delta:E,target:A,should:j,shadowParent:v7(A)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(L){return L!==C})},1)},[]),m=_.useCallback(function(x){n.current=Bf(x),r.current=void 0},[]),y=_.useCallback(function(x){f(x.type,L1(x),x.target,u(x,t.lockRef.current))},[]),v=_.useCallback(function(x){f(x.type,Bf(x),x.target,u(x,t.lockRef.current))},[]);_.useEffect(function(){return uc.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,cc),document.addEventListener("touchmove",h,cc),document.addEventListener("touchstart",m,cc),function(){uc=uc.filter(function(x){return x!==a}),document.removeEventListener("wheel",h,cc),document.removeEventListener("touchmove",h,cc),document.removeEventListener("touchstart",m,cc)}},[]);var w=t.removeScrollBar,b=t.inert;return _.createElement(_.Fragment,null,b?_.createElement(a,{styles:m7(s)}):null,w?_.createElement(yA,{gapMode:t.gapMode}):null)}function v7(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const x7=mA(hP,y7);var gP=_.forwardRef(function(t,e){return _.createElement(Vm,Jn({},t,{ref:e,sideCar:x7}))});gP.classNames=Vm.classNames;var w7=[" ","Enter","ArrowUp","ArrowDown"],_7=[" ","Enter"],ah="Select",[Um,$m,E7]=Cx(ah),[hu,iW]=Gi(ah,[E7,Jp]),zm=Jp(),[b7,fa]=hu(ah),[N7,S7]=hu(ah),yP=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:c,defaultValue:u,onValueChange:h,dir:f,name:m,autoComplete:y,disabled:v,required:w}=t,b=zm(e),[x,E]=_.useState(null),[A,j]=_.useState(null),[C,L]=_.useState(!1),V=v0(f),[z=!1,P]=Za({prop:r,defaultProp:s,onChange:a}),[k,D]=Za({prop:c,defaultProp:u,onChange:h}),R=_.useRef(null),O=x?!!x.closest("form"):!0,[U,F]=_.useState(new Set),H=Array.from(U).map(Q=>Q.props.value).join(";");return o.jsx(OL,{...b,children:o.jsxs(b7,{required:w,scope:e,trigger:x,onTriggerChange:E,valueNode:A,onValueNodeChange:j,valueNodeHasChildren:C,onValueNodeHasChildrenChange:L,contentId:Ho(),value:k,onValueChange:D,open:z,onOpenChange:P,dir:V,triggerPointerDownPosRef:R,disabled:v,children:[o.jsx(Um.Provider,{scope:e,children:o.jsx(N7,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(Q=>{F(K=>new Set(K).add(Q))},[]),onNativeOptionRemove:_.useCallback(Q=>{F(K=>{const Z=new Set(K);return Z.delete(Q),Z})},[]),children:n})}),O?o.jsxs(zP,{"aria-hidden":!0,required:w,tabIndex:-1,name:m,autoComplete:y,value:k,onChange:Q=>D(Q.target.value),disabled:v,children:[k===void 0?o.jsx("option",{value:""}):null,Array.from(U)]},H):null]})})};yP.displayName=ah;var vP="SelectTrigger",xP=_.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=zm(n),c=fa(vP,n),u=c.disabled||r,h=jt(e,c.onTriggerChange),f=$m(n),[m,y,v]=BP(b=>{const x=f().filter(j=>!j.disabled),E=x.find(j=>j.value===c.value),A=qP(x,b,E);A!==void 0&&c.onValueChange(A.value)}),w=()=>{u||(c.onOpenChange(!0),v())};return o.jsx(dT,{asChild:!0,...a,children:o.jsx(Je.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":$P(c.value)?"":void 0,...s,ref:h,onClick:qe(s.onClick,b=>{b.currentTarget.focus()}),onPointerDown:qe(s.onPointerDown,b=>{const x=b.target;x.hasPointerCapture(b.pointerId)&&x.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&(w(),c.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)},b.preventDefault())}),onKeyDown:qe(s.onKeyDown,b=>{const x=m.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&y(b.key),!(x&&b.key===" ")&&w7.includes(b.key)&&(w(),b.preventDefault())})})})});xP.displayName=vP;var wP="SelectValue",_P=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:c="",...u}=t,h=fa(wP,n),{onValueNodeHasChildrenChange:f}=h,m=a!==void 0,y=jt(e,h.onValueNodeChange);return Zt(()=>{f(m)},[f,m]),o.jsx(Je.span,{...u,ref:y,style:{pointerEvents:"none"},children:$P(h.value)?o.jsx(o.Fragment,{children:c}):a})});_P.displayName=wP;var T7="SelectIcon",EP=_.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(Je.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});EP.displayName=T7;var C7="SelectPortal",bP=t=>o.jsx(dP,{asChild:!0,...t});bP.displayName=C7;var ul="SelectContent",NP=_.forwardRef((t,e)=>{const n=fa(ul,t.__scopeSelect),[r,s]=_.useState();if(Zt(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?dl.createPortal(o.jsx(SP,{scope:t.__scopeSelect,children:o.jsx(Um.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),a):null}return o.jsx(TP,{...t,ref:e})});NP.displayName=ul;var Di=10,[SP,pa]=hu(ul),j7="SelectContentImpl",TP=_.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:c,side:u,sideOffset:h,align:f,alignOffset:m,arrowPadding:y,collisionBoundary:v,collisionPadding:w,sticky:b,hideWhenDetached:x,avoidCollisions:E,...A}=t,j=fa(ul,n),[C,L]=_.useState(null),[V,z]=_.useState(null),P=jt(e,we=>L(we)),[k,D]=_.useState(null),[R,O]=_.useState(null),U=$m(n),[F,H]=_.useState(!1),Q=_.useRef(!1);_.useEffect(()=>{if(C)return bA(C)},[C]),i7();const K=_.useCallback(we=>{const[Ce,...He]=U().map(it=>it.ref.current),[Ve]=He.slice(-1),st=document.activeElement;for(const it of we)if(it===st||(it==null||it.scrollIntoView({block:"nearest"}),it===Ce&&V&&(V.scrollTop=0),it===Ve&&V&&(V.scrollTop=V.scrollHeight),it==null||it.focus(),document.activeElement!==st))return},[U,V]),Z=_.useCallback(()=>K([k,C]),[K,k,C]);_.useEffect(()=>{F&&Z()},[F,Z]);const{onOpenChange:W,triggerPointerDownPosRef:Y}=j;_.useEffect(()=>{if(C){let we={x:0,y:0};const Ce=Ve=>{var st,it;we={x:Math.abs(Math.round(Ve.pageX)-(((st=Y.current)==null?void 0:st.x)??0)),y:Math.abs(Math.round(Ve.pageY)-(((it=Y.current)==null?void 0:it.y)??0))}},He=Ve=>{we.x<=10&&we.y<=10?Ve.preventDefault():C.contains(Ve.target)||W(!1),document.removeEventListener("pointermove",Ce),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",Ce),document.addEventListener("pointerup",He,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ce),document.removeEventListener("pointerup",He,{capture:!0})}}},[C,W,Y]),_.useEffect(()=>{const we=()=>W(!1);return window.addEventListener("blur",we),window.addEventListener("resize",we),()=>{window.removeEventListener("blur",we),window.removeEventListener("resize",we)}},[W]);const[ne,B]=BP(we=>{const Ce=U().filter(st=>!st.disabled),He=Ce.find(st=>st.ref.current===document.activeElement),Ve=qP(Ce,we,He);Ve&&setTimeout(()=>Ve.ref.current.focus())}),ee=_.useCallback((we,Ce,He)=>{const Ve=!Q.current&&!He;(j.value!==void 0&&j.value===Ce||Ve)&&(D(we),Ve&&(Q.current=!0))},[j.value]),ue=_.useCallback(()=>C==null?void 0:C.focus(),[C]),Se=_.useCallback((we,Ce,He)=>{const Ve=!Q.current&&!He;(j.value!==void 0&&j.value===Ce||Ve)&&O(we)},[j.value]),Le=r==="popper"?wx:CP,Te=Le===wx?{side:u,sideOffset:h,align:f,alignOffset:m,arrowPadding:y,collisionBoundary:v,collisionPadding:w,sticky:b,hideWhenDetached:x,avoidCollisions:E}:{};return o.jsx(SP,{scope:n,content:C,viewport:V,onViewportChange:z,itemRefCallback:ee,selectedItem:k,onItemLeave:ue,itemTextRefCallback:Se,focusSelectedItem:Z,selectedItemText:R,position:r,isPositioned:F,searchRef:ne,children:o.jsx(gP,{as:Ja,allowPinchZoom:!0,children:o.jsx(s0,{asChild:!0,trapped:j.open,onMountAutoFocus:we=>{we.preventDefault()},onUnmountAutoFocus:qe(s,we=>{var Ce;(Ce=j.trigger)==null||Ce.focus({preventScroll:!0}),we.preventDefault()}),children:o.jsx(cP,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:we=>we.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:o.jsx(Le,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:we=>we.preventDefault(),...A,...Te,onPlaced:()=>H(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:qe(A.onKeyDown,we=>{const Ce=we.ctrlKey||we.altKey||we.metaKey;if(we.key==="Tab"&&we.preventDefault(),!Ce&&we.key.length===1&&B(we.key),["ArrowUp","ArrowDown","Home","End"].includes(we.key)){let Ve=U().filter(st=>!st.disabled).map(st=>st.ref.current);if(["ArrowUp","End"].includes(we.key)&&(Ve=Ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(we.key)){const st=we.target,it=Ve.indexOf(st);Ve=Ve.slice(it+1)}setTimeout(()=>K(Ve)),we.preventDefault()}})})})})})})});TP.displayName=j7;var I7="SelectItemAlignedPosition",CP=_.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=fa(ul,n),c=pa(ul,n),[u,h]=_.useState(null),[f,m]=_.useState(null),y=jt(e,P=>m(P)),v=$m(n),w=_.useRef(!1),b=_.useRef(!0),{viewport:x,selectedItem:E,selectedItemText:A,focusSelectedItem:j}=c,C=_.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&f&&x&&E&&A){const P=a.trigger.getBoundingClientRect(),k=f.getBoundingClientRect(),D=a.valueNode.getBoundingClientRect(),R=A.getBoundingClientRect();if(a.dir!=="rtl"){const st=R.left-k.left,it=D.left-st,ve=P.left-it,Ie=P.width+ve,mt=Math.max(Ie,k.width),an=window.innerWidth-Di,zn=P1(it,[Di,an-mt]);u.style.minWidth=Ie+"px",u.style.left=zn+"px"}else{const st=k.right-R.right,it=window.innerWidth-D.right-st,ve=window.innerWidth-P.right-it,Ie=P.width+ve,mt=Math.max(Ie,k.width),an=window.innerWidth-Di,zn=P1(it,[Di,an-mt]);u.style.minWidth=Ie+"px",u.style.right=zn+"px"}const O=v(),U=window.innerHeight-Di*2,F=x.scrollHeight,H=window.getComputedStyle(f),Q=parseInt(H.borderTopWidth,10),K=parseInt(H.paddingTop,10),Z=parseInt(H.borderBottomWidth,10),W=parseInt(H.paddingBottom,10),Y=Q+K+F+W+Z,ne=Math.min(E.offsetHeight*5,Y),B=window.getComputedStyle(x),ee=parseInt(B.paddingTop,10),ue=parseInt(B.paddingBottom,10),Se=P.top+P.height/2-Di,Le=U-Se,Te=E.offsetHeight/2,we=E.offsetTop+Te,Ce=Q+K+we,He=Y-Ce;if(Ce<=Se){const st=E===O[O.length-1].ref.current;u.style.bottom="0px";const it=f.clientHeight-x.offsetTop-x.offsetHeight,ve=Math.max(Le,Te+(st?ue:0)+it+Z),Ie=Ce+ve;u.style.height=Ie+"px"}else{const st=E===O[0].ref.current;u.style.top="0px";const ve=Math.max(Se,Q+x.offsetTop+(st?ee:0)+Te)+He;u.style.height=ve+"px",x.scrollTop=Ce-Se+x.offsetTop}u.style.margin=`${Di}px 0`,u.style.minHeight=ne+"px",u.style.maxHeight=U+"px",r==null||r(),requestAnimationFrame(()=>w.current=!0)}},[v,a.trigger,a.valueNode,u,f,x,E,A,a.dir,r]);Zt(()=>C(),[C]);const[L,V]=_.useState();Zt(()=>{f&&V(window.getComputedStyle(f).zIndex)},[f]);const z=_.useCallback(P=>{P&&b.current===!0&&(C(),j==null||j(),b.current=!1)},[C,j]);return o.jsx(P7,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:w,onScrollButtonChange:z,children:o.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:L},children:o.jsx(Je.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});CP.displayName=I7;var A7="SelectPopperPosition",wx=_.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Di,...a}=t,c=zm(n);return o.jsx(hT,{...c,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wx.displayName=A7;var[P7,x0]=hu(ul,{}),_x="SelectViewport",jP=_.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=pa(_x,n),c=x0(_x,n),u=jt(e,a.onViewportChange),h=_.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(Um.Slot,{scope:n,children:o.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"auto",...s.style},onScroll:qe(s.onScroll,f=>{const m=f.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:v}=c;if(v!=null&&v.current&&y){const w=Math.abs(h.current-m.scrollTop);if(w>0){const b=window.innerHeight-Di*2,x=parseFloat(y.style.minHeight),E=parseFloat(y.style.height),A=Math.max(x,E);if(A<b){const j=A+w,C=Math.min(b,j),L=j-C;y.style.height=C+"px",y.style.bottom==="0px"&&(m.scrollTop=L>0?L:0,y.style.justifyContent="flex-end")}}}h.current=m.scrollTop})})})]})});jP.displayName=_x;var IP="SelectGroup",[k7,R7]=hu(IP),O7=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ho();return o.jsx(k7,{scope:n,id:s,children:o.jsx(Je.div,{role:"group","aria-labelledby":s,...r,ref:e})})});O7.displayName=IP;var AP="SelectLabel",PP=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=R7(AP,n);return o.jsx(Je.div,{id:s.id,...r,ref:e})});PP.displayName=AP;var Bp="SelectItem",[D7,kP]=hu(Bp),RP=_.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...c}=t,u=fa(Bp,n),h=pa(Bp,n),f=u.value===r,[m,y]=_.useState(a??""),[v,w]=_.useState(!1),b=jt(e,A=>{var j;return(j=h.itemRefCallback)==null?void 0:j.call(h,A,r,s)}),x=Ho(),E=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(D7,{scope:n,value:r,disabled:s,textId:x,isSelected:f,onItemTextChange:_.useCallback(A=>{y(j=>j||((A==null?void 0:A.textContent)??"").trim())},[]),children:o.jsx(Um.ItemSlot,{scope:n,value:r,disabled:s,textValue:m,children:o.jsx(Je.div,{role:"option","aria-labelledby":x,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:b,onFocus:qe(c.onFocus,()=>w(!0)),onBlur:qe(c.onBlur,()=>w(!1)),onPointerUp:qe(c.onPointerUp,E),onPointerMove:qe(c.onPointerMove,A=>{var j;s?(j=h.onItemLeave)==null||j.call(h):A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:qe(c.onPointerLeave,A=>{var j;A.currentTarget===document.activeElement&&((j=h.onItemLeave)==null||j.call(h))}),onKeyDown:qe(c.onKeyDown,A=>{var C;((C=h.searchRef)==null?void 0:C.current)!==""&&A.key===" "||(_7.includes(A.key)&&E(),A.key===" "&&A.preventDefault())})})})})});RP.displayName=Bp;var rd="SelectItemText",OP=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,c=fa(rd,n),u=pa(rd,n),h=kP(rd,n),f=S7(rd,n),[m,y]=_.useState(null),v=jt(e,A=>y(A),h.onItemTextChange,A=>{var j;return(j=u.itemTextRefCallback)==null?void 0:j.call(u,A,h.value,h.disabled)}),w=m==null?void 0:m.textContent,b=_.useMemo(()=>o.jsx("option",{value:h.value,disabled:h.disabled,children:w},h.value),[h.disabled,h.value,w]),{onNativeOptionAdd:x,onNativeOptionRemove:E}=f;return Zt(()=>(x(b),()=>E(b)),[x,E,b]),o.jsxs(o.Fragment,{children:[o.jsx(Je.span,{id:h.textId,...a,ref:v}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?dl.createPortal(a.children,c.valueNode):null]})});OP.displayName=rd;var DP="SelectItemIndicator",LP=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return kP(DP,n).isSelected?o.jsx(Je.span,{"aria-hidden":!0,...r,ref:e}):null});LP.displayName=DP;var Ex="SelectScrollUpButton",MP=_.forwardRef((t,e)=>{const n=pa(Ex,t.__scopeSelect),r=x0(Ex,t.__scopeSelect),[s,a]=_.useState(!1),c=jt(e,r.onScrollButtonChange);return Zt(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=h.scrollTop>0;a(f)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?o.jsx(VP,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});MP.displayName=Ex;var bx="SelectScrollDownButton",FP=_.forwardRef((t,e)=>{const n=pa(bx,t.__scopeSelect),r=x0(bx,t.__scopeSelect),[s,a]=_.useState(!1),c=jt(e,r.onScrollButtonChange);return Zt(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=h.scrollHeight-h.clientHeight,m=Math.ceil(h.scrollTop)<f;a(m)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?o.jsx(VP,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});FP.displayName=bx;var VP=_.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=pa("SelectScrollButton",n),c=_.useRef(null),u=$m(n),h=_.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return _.useEffect(()=>()=>h(),[h]),Zt(()=>{var m;const f=u().find(y=>y.ref.current===document.activeElement);(m=f==null?void 0:f.ref.current)==null||m.scrollIntoView({block:"nearest"})},[u]),o.jsx(Je.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:qe(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:qe(s.onPointerMove,()=>{var f;(f=a.onItemLeave)==null||f.call(a),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:qe(s.onPointerLeave,()=>{h()})})}),L7="SelectSeparator",UP=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(Je.div,{"aria-hidden":!0,...r,ref:e})});UP.displayName=L7;var Nx="SelectArrow",M7=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=zm(n),a=fa(Nx,n),c=pa(Nx,n);return a.open&&c.position==="popper"?o.jsx(fT,{...s,...r,ref:e}):null});M7.displayName=Nx;function $P(t){return t===""||t===void 0}var zP=_.forwardRef((t,e)=>{const{value:n,...r}=t,s=_.useRef(null),a=jt(e,s),c=GA(n);return _.useEffect(()=>{const u=s.current,h=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==n&&m){const y=new Event("change",{bubbles:!0});m.call(u,n),u.dispatchEvent(y)}},[c,n]),o.jsx(Bd,{asChild:!0,children:o.jsx("select",{...r,ref:a,defaultValue:n})})});zP.displayName="BubbleSelect";function BP(t){const e=jn(t),n=_.useRef(""),r=_.useRef(0),s=_.useCallback(c=>{const u=n.current+c;e(u),function h(f){n.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>h(""),1e3))}(u)},[e]),a=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function qP(t,e,n){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let c=F7(t,Math.max(a,0));s.length===1&&(c=c.filter(f=>f!==n));const h=c.find(f=>f.textValue.toLowerCase().startsWith(s.toLowerCase()));return h!==n?h:void 0}function F7(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var V7=yP,WP=xP,U7=_P,$7=EP,z7=bP,HP=NP,B7=jP,KP=PP,GP=RP,q7=OP,W7=LP,QP=MP,YP=FP,XP=UP;const op=V7,ap=U7,gd=_.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(WP,{ref:r,className:Ge("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx($7,{asChild:!0,children:o.jsx(AS,{className:"h-4 w-4 opacity-50"})})]}));gd.displayName=WP.displayName;const JP=_.forwardRef(({className:t,...e},n)=>o.jsx(QP,{ref:n,className:Ge("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(z2,{className:"h-4 w-4"})}));JP.displayName=QP.displayName;const ZP=_.forwardRef(({className:t,...e},n)=>o.jsx(YP,{ref:n,className:Ge("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(AS,{className:"h-4 w-4"})}));ZP.displayName=YP.displayName;const yd=_.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(z7,{children:o.jsxs(HP,{ref:s,className:Ge("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(JP,{}),o.jsx(B7,{className:Ge("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(ZP,{})]})}));yd.displayName=HP.displayName;const H7=_.forwardRef(({className:t,...e},n)=>o.jsx(KP,{ref:n,className:Ge("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));H7.displayName=KP.displayName;const Po=_.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(GP,{ref:r,className:Ge("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(W7,{children:o.jsx(lp,{className:"h-4 w-4"})})}),o.jsx(q7,{children:e})]}));Po.displayName=GP.displayName;const K7=_.forwardRef(({className:t,...e},n)=>o.jsx(XP,{ref:n,className:Ge("-mx-1 my-1 h-px bg-muted",t),...e}));K7.displayName=XP.displayName;function G7({currentPage:t,totalPages:e,totalCount:n,pageSize:r,hasNextPage:s,isLoading:a,isFetchingNextPage:c,cachedPages:u,onPageChange:h,onPageSizeChange:f,onLoadNext:m,pageSizeOptions:y=[5,10,20,50]}){const v=()=>{const w=[];if(e<=7)for(let x=0;x<e;x++)w.push(x);else if(t<3){for(let x=0;x<5;x++)w.push(x);w.push("ellipsis"),w.push(e-1)}else if(t>e-4){w.push(0),w.push("ellipsis");for(let x=e-5;x<e;x++)w.push(x)}else{w.push(0),w.push("ellipsis");for(let x=t-1;x<=t+1;x++)w.push(x);w.push("ellipsis"),w.push(e-1)}return w};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ny,{className:"h-4 w-4"}),o.jsxs("span",{children:["Showing page ",t+1," of ",e," (",n," total)"]})]}),u.length>0&&o.jsxs(Pt,{variant:"secondary",className:"gap-1",children:[o.jsx(Ny,{className:"h-3 w-3"}),u.length," page",u.length!==1?"s":""," cached"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Items per page:"}),o.jsxs(op,{value:r.toString(),onValueChange:w=>f(Number(w)),children:[o.jsx(gd,{className:"w-20",children:o.jsx(ap,{})}),o.jsx(yd,{children:y.map(w=>o.jsx(Po,{value:w.toString(),children:w},w))})]})]})]}),o.jsx(rP,{children:o.jsxs(sP,{children:[o.jsx(ip,{children:o.jsx(iP,{onClick:()=>t>0&&h(t-1),className:t===0?"pointer-events-none opacity-50":"cursor-pointer"})}),v().map((w,b)=>o.jsx(ip,{children:w==="ellipsis"?o.jsx(aP,{}):o.jsxs(Fm,{onClick:()=>h(w),isActive:w===t,className:"cursor-pointer",children:[w+1,u.includes(w)&&o.jsx(Ny,{className:"h-3 w-3 ml-1 text-primary"})]})},b)),o.jsx(ip,{children:o.jsx(oP,{onClick:()=>{s&&(m(),h(t+1))},className:s?"cursor-pointer":"pointer-events-none opacity-50"})})]})}),c&&o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[o.jsx(Qi,{className:"h-4 w-4 animate-spin"}),o.jsx("span",{children:"Loading next page..."})]})]})}function F1(){const[t,e]=_.useState(""),[n,r]=_.useState(null),[s,a]=_.useState(!1),[c,u]=_.useState(10),[h,f]=_.useState(0),[m,y]=_.useState(!1),[v,w]=_.useState(!1),[b,x]=_.useState(!1),[E,A]=_.useState(null),[j,C]=_.useState(null),[L,V]=_.useState(null),{data:z,allData:P,currentPage:k,totalPages:D,totalCount:R,hasNextPage:O,isLoading:U,isFetchingNextPage:F,error:H,loadNextPage:Q,isPageCached:K,prefetchNextPage:Z}=Y8(c),{createLecture:W,updateLecture:Y}=Mm(),ne=H?H.message:null,[B]=Kd(),ee=B.get("lecture");B.get("tab");let Se=t?P.filter(ve=>ve.title.toLowerCase().includes(t.toLowerCase())||ve.subject.toLowerCase().includes(t.toLowerCase())):z;ee&&(Se=P.filter(ve=>ve.id===ee));const Le=[];for(let ve=0;ve<=k;ve++)K(ve)&&Le.push(ve);const Te=ve=>{f(ve),!K(ve)&&ve>k&&Q()},we=ve=>{u(ve),f(0)};_e.useEffect(()=>{if(O&&!F){const ve=setTimeout(()=>{Z()},1e3);return()=>clearTimeout(ve)}},[O,F,Z]);const Ce=()=>{r(null),a(!0)},He=ve=>{r(ve),a(!0)},Ve=ve=>{A(ve),y(!0)},st=ve=>{C(ve),w(!0)},it=ve=>{V(ve),x(!0)};return m?o.jsx(y0,{video:E,onClose:()=>{y(!1),A(null)},onSave:async ve=>{try{E&&(console.log(" Video updated successfully"),alert("Video updated! The page will reload to show changes."),window.location.reload()),y(!1),A(null)}catch(Ie){console.error("Error saving video:",Ie),alert("Failed to save video")}}}):v?o.jsx(g0,{file:j,onClose:()=>{w(!1),C(null)},onSave:async ve=>{try{j&&(console.log(" File updated successfully"),alert("File updated! The page will reload to show changes."),window.location.reload()),w(!1),C(null)}catch(Ie){console.error("Error saving file:",Ie),alert("Failed to save file")}}}):b?o.jsx(m0,{quiz:L,onClose:()=>{x(!1),V(null)},onSave:async ve=>{try{L&&(console.log(" Quiz updated successfully"),alert("Quiz updated! The page will reload to show changes."),window.location.reload()),x(!1),V(null)}catch(Ie){console.error("Error saving quiz:",Ie),alert("Failed to save quiz")}}}):s?o.jsx(Lm,{lecture:n,onClose:()=>{a(!1),r(null)},onSave:async ve=>{try{n?await Y(n.id,ve):await W(ve,"default-subject"),a(!1),r(null)}catch(Ie){console.error("Error saving lecture:",Ie)}}}):(ee&&z.find(ve=>ve.id===ee),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Resources Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Organize educational content by lectures with videos, files, and quizzes"})]}),o.jsxs(te,{onClick:Ce,className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Create Lecture"]})]}),o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search lectures by title or subject...",value:t,onChange:ve=>e(ve.target.value),className:"pl-10"})]})})}),U&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Qi,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading lectures..."})]})}),ne&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading lectures"}),o.jsx("p",{className:"text-muted-foreground",children:ne})]})}),!U&&!ne&&o.jsx("div",{className:"space-y-6",children:Se.map(ve=>o.jsxs(pe,{className:`hover:shadow-lg transition-all duration-200 border-l-4 ${ee===ve.id?"border-l-primary bg-primary/5":"border-l-primary/20 hover:border-l-primary"}`,children:[o.jsx(Be,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(Ns,{className:"h-5 w-5 text-primary"}),o.jsx(Ke,{className:"text-xl",children:ve.title}),o.jsx(Pt,{variant:"secondary",children:ve.subject})]}),o.jsx(St,{className:"text-base",children:ve.description}),o.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Vc,{className:"h-3 w-3"}),ve.createdBy]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(gc,{className:"h-3 w-3"}),ve.createdAt.toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>He(ve),children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})}),o.jsx(me,{children:o.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx(ni,{className:"h-4 w-4 text-green-600"}),"Videos (",ve.videos.length,")"]}),ve.videos.length>0&&o.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{ve.videos.forEach(Ie=>window.open(Ie.youtubeUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Play All"})]}),ve.videos.length>0?o.jsx("div",{className:"space-y-2",children:ve.videos.map(Ie=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{const mt=Ie.youtubeUrl||Ie.url;mt&&mt!==""&&mt!=="#"?window.open(mt,"_blank"):alert("No URL available for this video. Click the edit button to add a URL.")},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"relative",children:[Ie.thumbnailUrl&&o.jsx("img",{src:Ie.thumbnailUrl,alt:Ie.title,className:"w-16 h-12 object-cover rounded"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(ni,{className:"h-6 w-6 text-white"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:Ie.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(cp,{className:"h-3 w-3"}),Ie.duration]})]})]})}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:mt=>{mt.stopPropagation(),Ve(Ie)},title:"Edit Video",children:o.jsx(ts,{className:"h-4 w-4"})})]},Ie.id))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx(Cs,{className:"h-4 w-4 text-blue-600"}),"Files (",ve.files.length,")"]}),ve.files.length>0&&o.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{ve.files.forEach(Ie=>window.open(Ie.fileUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Download All"})]}),ve.files.length>0?o.jsx("div",{className:"space-y-2",children:ve.files.map(Ie=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{console.log(" File clicked:",Ie),console.log(" File URL:",Ie.fileUrl),console.log(" Fallback URL:",Ie.url);const mt=Ie.fileUrl||Ie.url;console.log(" Opening URL:",mt),mt&&mt!==""&&mt!=="#"?window.open(mt,"_blank"):(console.error(" No valid URL found"),alert(`No URL available for this file.
fileUrl: ${Ie.fileUrl}
url: ${Ie.url}`))},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"relative",children:[Ie.imageUrl||Ie.thumbnailUrl?o.jsx("img",{src:Ie.imageUrl||Ie.thumbnailUrl,alt:Ie.title,className:"w-16 h-12 object-cover rounded"}):o.jsx("div",{className:"w-16 h-12 bg-blue-100 rounded flex items-center justify-center",children:o.jsx(Cs,{className:"h-6 w-6 text-blue-600"})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Cs,{className:"h-4 w-4 text-white"})})]}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:Ie.title})})]})}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:mt=>{mt.stopPropagation(),st(Ie)},title:"Edit File",children:o.jsx(ts,{className:"h-4 w-4"})})]},Ie.id))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx($i,{className:"h-4 w-4 text-purple-600"}),"Quizzes (",ve.quizzes.length,")"]}),ve.quizzes.length>0&&o.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{alert(`Starting all ${ve.quizzes.length} quizzes for: ${ve.title}`)},className:"h-6 px-2 text-xs",children:"Start All"})]}),ve.quizzes.length>0?o.jsx("div",{className:"space-y-2",children:ve.quizzes.map(Ie=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{alert(`Starting quiz: ${Ie.title}
Time limit: ${Ie.timeLimit} minutes
Passing score: ${Ie.passingScore}%`)},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx($i,{className:"h-4 w-4 text-purple-600 mt-1 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:Ie.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(cp,{className:"h-3 w-3"}),Ie.timeLimit,"min",o.jsx("span",{children:""}),o.jsxs("span",{children:[Ie.passingScore,"% pass"]})]})]})]})}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:mt=>{mt.stopPropagation(),it(Ie)},title:"Edit Quiz",children:o.jsx(ts,{className:"h-4 w-4"})})]},Ie.id))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"})]})]})})]},ve.id))}),!U&&!ne&&Se.length===0&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Ns,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No lectures found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"No lectures match your search criteria.":"Start by creating your first lecture with videos, files, and quizzes."}),o.jsxs(te,{onClick:Ce,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Create Lecture"]})]})}),!U&&!ne&&!t&&o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsx(G7,{currentPage:k,totalPages:D,totalCount:R,pageSize:c,hasNextPage:O,isLoading:U,isFetchingNextPage:F,cachedPages:Le,onPageChange:Te,onPageSizeChange:we,onLoadNext:Q})})})]}))}function Q7({professor:t,onClose:e,onSave:n}){const[r,s]=_.useState({name:"",title:"",department:"",email:"",others:"",officeLocation:"",researchAreas:"",imageUrl:""}),[a,c]=_.useState(!1);_.useEffect(()=>{t&&s({name:t.name||"",title:t.title||"",department:t.department||"",email:t.email||"",others:t.others||"",officeLocation:t.officeLocation||"",researchAreas:(t.researchAreas||[]).join(", "),imageUrl:t.imageUrl||""})},[t]);const u=async h=>{h.preventDefault(),c(!0);try{const f={...r,researchAreas:r.researchAreas?r.researchAreas.split(",").map(m=>m.trim()).filter(Boolean):[]};n(f)}catch(f){console.error("Error saving professor:",f)}finally{c(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:e,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Professor":"Add Professor"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update professor information":"Add a new professor to the faculty"})]})]})}),o.jsxs("form",{onSubmit:u,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[o.jsx(ns,{className:"h-5 w-5"}),"Professor Information"]}),o.jsx(St,{children:"Basic information about the professor"})]}),o.jsxs(me,{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs(Yc,{className:"w-20 h-20",children:[o.jsx(Fd,{src:r.imageUrl,alt:r.name}),o.jsx(Xc,{children:o.jsx(ns,{className:"w-8 h-8"})})]}),o.jsxs("div",{className:"space-y-2 flex-1",children:[o.jsx(je,{htmlFor:"imageUrl",children:"Profile Image URL"}),o.jsx(Ne,{id:"imageUrl",placeholder:"https://example.com/profile.jpg",value:r.imageUrl,onChange:h=>s(f=>({...f,imageUrl:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"name",children:"Full Name *"}),o.jsx(Ne,{id:"name",placeholder:"Dr. John Smith",value:r.name,onChange:h=>s(f=>({...f,name:h.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"title",children:"Title"}),o.jsx(Ne,{id:"title",placeholder:"e.g., Associate Professor",value:r.title,onChange:h=>s(f=>({...f,title:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(je,{htmlFor:"department",className:"flex items-center gap-2",children:[o.jsx(F2,{className:"h-4 w-4"}),"Department"]}),o.jsx(Ne,{id:"department",placeholder:"Internal Medicine",value:r.department,onChange:h=>s(f=>({...f,department:h.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"others",children:"Others"}),o.jsx(Ne,{id:"others",placeholder:"Other contact or notes",value:r.others,onChange:h=>s(f=>({...f,others:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(je,{htmlFor:"email",className:"flex items-center gap-2",children:[o.jsx(up,{className:"h-4 w-4"}),"Email Address"]}),o.jsx(Ne,{id:"email",type:"email",placeholder:"john.smith@university.edu",value:r.email,onChange:h=>s(f=>({...f,email:h.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(je,{htmlFor:"officeLocation",className:"flex items-center gap-2",children:[o.jsx(vd,{className:"h-4 w-4"}),"Office Location"]}),o.jsx(Ne,{id:"officeLocation",placeholder:"Medical Building, Room 301",value:r.officeLocation,onChange:h=>s(f=>({...f,officeLocation:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"researchAreas",children:"Research Areas"}),o.jsx(Ne,{id:"researchAreas",placeholder:"e.g., Cardiology, Epidemiology",value:r.researchAreas,onChange:h=>s(f=>({...f,researchAreas:h.target.value}))})]}),o.jsx("div",{className:"space-y-2",children:o.jsx("div",{})})]})]})]}),r.name&&o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Preview"}),o.jsx(St,{children:"How the professor will appear in the system"})]}),o.jsx(me,{children:o.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[o.jsxs(Yc,{className:"h-12 w-12",children:[o.jsx(Fd,{src:r.imageUrl,alt:r.name}),o.jsx(Xc,{children:o.jsx(ns,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold",children:r.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r.department}),o.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm text-muted-foreground",children:[r.email&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(up,{className:"h-3 w-3"}),o.jsx("span",{children:r.email})]}),r.officeLocation&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(vd,{className:"h-3 w-3"}),o.jsx("span",{children:r.officeLocation})]}),r.others&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ns,{className:"h-3 w-3"}),o.jsx("span",{children:r.others})]})]})]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:a,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),a?"Saving...":t?"Update Professor":"Add Professor"]})]})]})]})}function Y7(){const[t,e]=_.useState(""),[n,r]=_.useState(null),[s,a]=_.useState(!1),{professors:c,loading:u,error:h,createProfessor:f,updateProfessor:m,deleteProfessor:y,isOfflineMode:v}=uA(),w=c.filter(x=>x.name.toLowerCase().includes(t.toLowerCase())||x.department.toLowerCase().includes(t.toLowerCase())||x.email.toLowerCase().includes(t.toLowerCase())),b=async x=>{if(window.confirm("Are you sure you want to delete this professor?"))try{await y(x)}catch(E){console.error("Error deleting professor:",E),alert("Failed to delete professor. Please try again.")}};return s?o.jsx(Q7,{professor:n,onClose:()=>{a(!1),r(null)},onSave:async x=>{try{n?await m(n.id,x):await f(x),a(!1),r(null)}catch(E){console.error("Error saving professor:",E),alert("Failed to save professor. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Professors Management"}),o.jsxs("p",{className:"text-muted-foreground",children:["Manage faculty information and profiles",v&&o.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:" Working in offline mode"})]})]}),o.jsxs(te,{onClick:()=>a(!0),children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]}),o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search professors by name, department, or email...",value:t,onChange:x=>e(x.target.value),className:"pl-10"})]})})}),u&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Qi,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading professors..."})]})}),h&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading professors"}),o.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&o.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:w.map(x=>o.jsxs(pe,{className:"hover:shadow-md transition-shadow",children:[o.jsx(Be,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(Yc,{className:"h-12 w-12",children:[o.jsx(Fd,{src:x.imageUrl,alt:x.name}),o.jsx(Xc,{children:o.jsx(ns,{className:"h-6 w-6"})})]}),o.jsxs("div",{children:[o.jsx(Ke,{className:"text-lg",children:x.name}),o.jsx(Pt,{variant:"secondary",className:"text-xs",children:x.department})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>{r(x),a(!0)},children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>b(x.id),className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})}),o.jsx(me,{children:o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"",children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:x.title}),o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[o.jsx(up,{className:"h-4 w-4"}),o.jsx("span",{children:x.email})]})]}),x.phone&&o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(ns,{className:"h-4 w-4"}),o.jsx("span",{children:x.phone})]}),x.officeLocation&&o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(vd,{className:"h-4 w-4"}),o.jsx("span",{children:x.officeLocation})]}),x.bio&&o.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:x.bio}),x.researchAreas&&x.researchAreas.length>0&&o.jsx("div",{className:"flex gap-2 flex-wrap",children:x.researchAreas.map(E=>o.jsx(Pt,{children:E},E))}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.website&&o.jsx("a",{href:x.website,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Website"}),x.linkedin&&o.jsx("a",{href:x.linkedin,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"LinkedIn"})]})]})})]},x.id))}),!u&&!h&&w.length===0&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Vc,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No professors found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"No professors match your search criteria.":"Start by adding your first professor."}),o.jsxs(te,{onClick:()=>a(!0),children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]})})]})}function X7(){const{users:t,loading:e,error:n,updateUser:r,deleteUser:s}=Dm(),a=async u=>{const h=u.role==="admin"?"user":"admin";await r(u.id,{role:h})},c=(u,h)=>{if(!u)return"-";const f=u.match(/(19|20)\d{2}/);if(f)return f[0];if(h)try{const m=new Date(h);if(!isNaN(m.getTime()))return String(m.getFullYear())}catch{}return"-"};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(rO,{className:"h-6 w-6 text-blue-600"}),o.jsx("h1",{className:"text-3xl font-bold",children:"Users"})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["All Users (",t.length,")"]})}),o.jsx(me,{children:e?o.jsx("div",{children:"Loading..."}):n?o.jsx("div",{className:"text-destructive",children:n}):t.length===0?o.jsx("div",{className:"text-muted-foreground",children:"No users found."}):(()=>{const u={};t.forEach(f=>{const m=f.yearLabel&&String(f.yearLabel).trim()!==""?String(f.yearLabel):"Unassigned";u[m]||(u[m]=[]),u[m].push(f)});const h=Object.keys(u).sort((f,m)=>{const y=f.match(/Year\s*(\d+)/i),v=m.match(/Year\s*(\d+)/i);return y&&v?parseInt(y[1],10)-parseInt(v[1],10):y?-1:v||f==="Unassigned"?1:m==="Unassigned"?-1:f.localeCompare(m)});return o.jsx("div",{className:"space-y-6",children:h.map(f=>o.jsxs("div",{children:[o.jsx("div",{className:"flex items-center justify-between mb-2",children:o.jsxs("h3",{className:"text-lg font-semibold",children:[f," ",o.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",u[f].length,")"]})]})}),o.jsx("div",{className:"space-y-2",children:u[f].map(m=>{var y;return o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[o.jsx(Yc,{className:"h-12 w-12",children:m.photoURL?o.jsx(Fd,{src:m.photoURL,alt:m.displayName}):o.jsx(Xc,{children:((y=m.displayName)==null?void 0:y[0])||"U"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:m.displayName}),o.jsx("div",{className:"text-xs text-muted-foreground truncate",children:m.email}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",m.createdAt?new Date(m.createdAt).toLocaleString():"-",o.jsxs("span",{className:"ml-3",children:["Year: ",m.yearLabel||c(m.id,m.createdAt)]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pt,{children:m.role||"user"}),o.jsx(te,{size:"sm",variant:"outline",onClick:()=>a(m),children:m.role==="admin"?"Demote":"Make Admin"}),o.jsx(te,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>s(m.id),children:o.jsx(En,{className:"h-4 w-4"})})]})]},m.id)})})]},f))})})()})]})]})}function J7(t){if(!t)return 0;if(typeof t=="number")return t;const e=String(t).trim();if(/^\d+$/.test(e))return parseInt(e,10);const n=e.split(":").map(r=>parseInt(r,10));return n.length===3?n[0]*3600+(n[1]||0)*60+(n[2]||0):n.length===2?(n[0]||0)*60+(n[1]||0):0}function Z7(t){if(!t||t<=0)return"0:00";const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60;return e>0?`${e}:${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${n}:${String(r).padStart(2,"0")}`}function eq(){var D;const{id:t}=WT(),e=ru(),{years:n,subjects:r,loading:s,createLecture:a,deleteLecture:c,deleteSubject:u,addVideo:h,addFile:f,addQuiz:m}=El(),[y,v]=_.useState(null),[w,b]=_.useState(!1),[x,E]=_.useState(!1),[A,j]=_.useState(!1),[C,L]=_.useState(!1),V=r.find(R=>R.id===t),z=R=>{v(R||null),b(!0)},P=R=>{v(R||null),E(!0)},k=R=>{v(R||null),j(!0)};return w&&y?o.jsx(y0,{lectureId:y,onClose:()=>{b(!1),v(null)},onSave:async R=>{V!=null&&V.id&&y&&await h(V.id,y,R),b(!1),v(null)}}):x&&y?o.jsx(g0,{lectureId:y,onClose:()=>{E(!1),v(null)},onSave:async R=>{V!=null&&V.id&&y&&await f(V.id,y,R),E(!1),v(null)}}):A&&y?o.jsx(m0,{lectureId:y,onClose:()=>{j(!1),v(null)},onSave:async R=>{V!=null&&V.id&&y&&await m(V.id,y,R),j(!1),v(null)}}):C?o.jsx(Lm,{subjectId:(V==null?void 0:V.id)||null,subjectName:V==null?void 0:V.name,yearType:(D=n.find(R=>R.id===(V==null?void 0:V.yearId)))==null?void 0:D.type,onClose:()=>L(!1),onSave:async R=>{V!=null&&V.id&&await a(R),L(!1)}}):s?o.jsx("div",{children:"Loading..."}):V?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:V.name}),o.jsx("p",{className:"text-muted-foreground",children:"Subject details and lectures"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(te,{variant:"outline",size:"sm",onClick:()=>L(!0),className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Add Lecture"]}),o.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(V&&confirm(`Delete subject "${V.name}"? This will remove all lectures.`))try{await u(V.id),e("/admin/years")}catch(R){console.error(R),alert("Failed to delete subject")}},children:o.jsx(En,{className:"h-4 w-4"})}),o.jsx(Zn,{to:"/admin/years",children:o.jsx(te,{variant:"ghost",children:"Back"})})]})]}),o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Lectures"}),o.jsx(St,{children:"All lectures for this subject"})]}),o.jsx(me,{children:o.jsx("div",{className:"grid gap-4",children:V.lectures&&V.lectures.length>0?V.lectures.map(R=>{var U,F;const O=R.imageUrl||R.videos&&R.videos[0]&&R.videos[0].thumbnailUrl||"";return o.jsxs("div",{className:"p-3 border rounded-md flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[O?o.jsx("img",{src:O,alt:R.name,width:1280,height:720,style:{width:160,height:90,objectFit:"cover"},className:"rounded"}):o.jsx("div",{className:"w-40 h-24 bg-muted rounded flex items-center justify-center text-xs",children:"No image"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:R.name}),o.jsx("div",{className:"text-sm text-muted-foreground",children:R.description})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>z(R.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Video",children:[o.jsx(ni,{className:"h-3 w-3 text-blue-600"}),o.jsx("span",{children:"Add Video"})]}),o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>P(R.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add File",children:[o.jsx(Cs,{className:"h-3 w-3 text-green-600"}),o.jsx("span",{children:"Add File"})]}),o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>k(R.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Quiz",children:[o.jsx($i,{className:"h-3 w-3 text-purple-600"}),o.jsx("span",{children:"Add Quiz"})]}),o.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(V&&confirm(`Delete lecture "${R.name}"?`))try{await c(V.id,R.id)}catch(H){console.error(H),alert("Failed to delete lecture")}},children:o.jsx(En,{className:"h-3 w-3"})}),o.jsxs("div",{className:"flex items-center gap-2",children:[R.videos&&R.videos.length>0?(()=>{const H=(R.videos||[]).reduce((Q,K)=>Q+J7(K.duration||K.time||K.durationSeconds||K.length),0);return o.jsxs("button",{onClick:()=>e(`/admin/videos?lecture=${R.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:[o.jsx(ni,{className:"h-4 w-4"}),o.jsxs("span",{children:["(",R.videos.length,")"]}),o.jsx("span",{className:"text-muted-foreground",children:Z7(H)})]})})():o.jsx("button",{onClick:()=>e(`/admin/videos?lecture=${R.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:o.jsx(ni,{className:"h-4 w-4"})}),o.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${R.id}&tab=files`),className:"text-xs text-green-600 flex items-center gap-1 px-2",title:"Files",children:[o.jsx(Cs,{className:"h-4 w-4"}),o.jsxs("span",{children:["(",((U=R.files)==null?void 0:U.length)||0,")"]})]}),o.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${R.id}&tab=quizzes`),className:"text-xs text-purple-600 flex items-center gap-1 px-2",title:"Quizzes",children:[o.jsx($i,{className:"h-4 w-4"}),o.jsxs("span",{children:["(",((F=R.quizzes)==null?void 0:F.length)||0,")"]})]})]})]})]},R.id)}):o.jsx("div",{className:"text-muted-foreground",children:"No lectures yet for this subject."})})})]})]}):o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Subject not found"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"The subject you requested does not exist."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(te,{children:"Back to Years"})})})]})})}var sv="rovingFocusGroup.onEntryFocus",tq={bubbles:!1,cancelable:!0},Bm="RovingFocusGroup",[Sx,ek,nq]=Cx(Bm),[rq,tk]=Gi(Bm,[nq]),[sq,iq]=rq(Bm),nk=_.forwardRef((t,e)=>o.jsx(Sx.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Sx.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(oq,{...t,ref:e})})}));nk.displayName=Bm;var oq=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:f,preventScrollOnEntryFocus:m=!1,...y}=t,v=_.useRef(null),w=jt(e,v),b=v0(a),[x=null,E]=Za({prop:c,defaultProp:u,onChange:h}),[A,j]=_.useState(!1),C=jn(f),L=ek(n),V=_.useRef(!1),[z,P]=_.useState(0);return _.useEffect(()=>{const k=v.current;if(k)return k.addEventListener(sv,C),()=>k.removeEventListener(sv,C)},[C]),o.jsx(sq,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:x,onItemFocus:_.useCallback(k=>E(k),[E]),onItemShiftTab:_.useCallback(()=>j(!0),[]),onFocusableItemAdd:_.useCallback(()=>P(k=>k+1),[]),onFocusableItemRemove:_.useCallback(()=>P(k=>k-1),[]),children:o.jsx(Je.div,{tabIndex:A||z===0?-1:0,"data-orientation":r,...y,ref:w,style:{outline:"none",...t.style},onMouseDown:qe(t.onMouseDown,()=>{V.current=!0}),onFocus:qe(t.onFocus,k=>{const D=!V.current;if(k.target===k.currentTarget&&D&&!A){const R=new CustomEvent(sv,tq);if(k.currentTarget.dispatchEvent(R),!R.defaultPrevented){const O=L().filter(K=>K.focusable),U=O.find(K=>K.active),F=O.find(K=>K.id===x),Q=[U,F,...O].filter(Boolean).map(K=>K.ref.current);ik(Q,m)}}V.current=!1}),onBlur:qe(t.onBlur,()=>j(!1))})})}),rk="RovingFocusGroupItem",sk=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,...c}=t,u=Ho(),h=a||u,f=iq(rk,n),m=f.currentTabStopId===h,y=ek(n),{onFocusableItemAdd:v,onFocusableItemRemove:w}=f;return _.useEffect(()=>{if(r)return v(),()=>w()},[r,v,w]),o.jsx(Sx.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:o.jsx(Je.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...c,ref:e,onMouseDown:qe(t.onMouseDown,b=>{r?f.onItemFocus(h):b.preventDefault()}),onFocus:qe(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:qe(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){f.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=cq(b,f.orientation,f.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let A=y().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")A.reverse();else if(x==="prev"||x==="next"){x==="prev"&&A.reverse();const j=A.indexOf(b.currentTarget);A=f.loop?uq(A,j+1):A.slice(j+1)}setTimeout(()=>ik(A))}})})})});sk.displayName=rk;var aq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function cq(t,e,n){const r=lq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return aq[r]}function ik(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function uq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var dq=nk,hq=sk,w0="Tabs",[fq,oW]=Gi(w0,[tk]),ok=tk(),[pq,_0]=fq(w0),ak=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:c="horizontal",dir:u,activationMode:h="automatic",...f}=t,m=v0(u),[y,v]=Za({prop:r,onChange:s,defaultProp:a});return o.jsx(pq,{scope:n,baseId:Ho(),value:y,onValueChange:v,orientation:c,dir:m,activationMode:h,children:o.jsx(Je.div,{dir:m,"data-orientation":c,...f,ref:e})})});ak.displayName=w0;var lk="TabsList",ck=_.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=_0(lk,n),c=ok(n);return o.jsx(dq,{asChild:!0,...c,orientation:a.orientation,dir:a.dir,loop:r,children:o.jsx(Je.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});ck.displayName=lk;var uk="TabsTrigger",dk=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,c=_0(uk,n),u=ok(n),h=pk(c.baseId,r),f=mk(c.baseId,r),m=r===c.value;return o.jsx(hq,{asChild:!0,...u,focusable:!s,active:m,children:o.jsx(Je.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:h,...a,ref:e,onMouseDown:qe(t.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?c.onValueChange(r):y.preventDefault()}),onKeyDown:qe(t.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&c.onValueChange(r)}),onFocus:qe(t.onFocus,()=>{const y=c.activationMode!=="manual";!m&&!s&&y&&c.onValueChange(r)})})})});dk.displayName=uk;var hk="TabsContent",fk=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...c}=t,u=_0(hk,n),h=pk(u.baseId,r),f=mk(u.baseId,r),m=r===u.value,y=_.useRef(m);return _.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),o.jsx(Ix,{present:s||m,children:({present:v})=>o.jsx(Je.div,{"data-state":m?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!v,id:f,tabIndex:0,...c,ref:e,style:{...t.style,animationDuration:y.current?"0s":void 0},children:v&&a})})});fk.displayName=hk;function pk(t,e){return`${t}-trigger-${e}`}function mk(t,e){return`${t}-content-${e}`}var mq=ak,gk=ck,yk=dk,vk=fk;const xk=mq,E0=_.forwardRef(({className:t,...e},n)=>o.jsx(gk,{ref:n,className:Ge("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));E0.displayName=gk.displayName;const Sc=_.forwardRef(({className:t,...e},n)=>o.jsx(yk,{ref:n,className:Ge("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Sc.displayName=yk.displayName;const Tc=_.forwardRef(({className:t,...e},n)=>o.jsx(vk,{ref:n,className:Ge("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Tc.displayName=vk.displayName;function gq({product:t,onClose:e,onSave:n}){const[r,s]=_.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",price:(t==null?void 0:t.price)||0,types:(t==null?void 0:t.types)||(t!=null&&t.price?[{name:"Default",price:t.price}]:[]),images:(t==null?void 0:t.images)||[""],categoryId:(t==null?void 0:t.categoryId)||""}),[a,c]=_.useState(!1),[u,h]=_.useState(null),f=async w=>{w.preventDefault(),c(!0);try{const b={...r,images:r.images.filter(x=>x.trim()!=="")};b.types&&b.types.length>0?(b.types=b.types.map(x=>({name:String(x.name||"").trim(),price:parseFloat(x.price)||0})),b.price=b.types[0].price||0):b.types=[],n(b)}catch(b){console.error("Error saving product:",b)}finally{c(!1)}},m=()=>{s(w=>({...w,images:[...w.images,""]}))},y=(w,b)=>{s(x=>({...x,images:x.images.map((E,A)=>A===w?b:E)}))},v=w=>{s(b=>({...b,images:b.images.filter((x,E)=>E!==w)}))};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:e,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Product":"Add Product"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update product details":"Create a new product"})]})]})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[o.jsx(hv,{className:"h-5 w-5 text-blue-600"}),"Product Information"]}),o.jsx(St,{children:"Basic information about the product"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"name",children:"Product Name *"}),o.jsx(Ne,{id:"name",placeholder:"e.g., Medical Textbook",value:r.name,onChange:w=>s(b=>({...b,name:w.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{children:"Types & Prices"}),o.jsxs("div",{className:"space-y-2",children:[r.types&&r.types.length>0?r.types.map((w,b)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ne,{placeholder:"Type name (e.g., Pen)",value:w.name,onChange:x=>s(E=>({...E,types:E.types.map((A,j)=>j===b?{...A,name:x.target.value}:A)})),required:!0}),o.jsx(Ne,{type:"number",step:"0.01",placeholder:"0.00",value:w.price,onChange:x=>s(E=>({...E,types:E.types.map((A,j)=>j===b?{...A,price:parseFloat(x.target.value)||0}:A)})),required:!0,className:"w-32"}),o.jsx(te,{type:"button",variant:"ghost",onClick:()=>s(x=>({...x,types:x.types.filter((E,A)=>A!==b)})),children:"Remove"})]},b)):o.jsx("div",{className:"text-muted-foreground",children:"No types defined."}),o.jsx("div",{children:o.jsxs(te,{type:"button",variant:"outline",onClick:()=>s(w=>({...w,types:[...w.types||[],{name:"Default",price:0}]})),children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"})," Add Type"]})})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"description",children:"Description"}),o.jsx(js,{id:"description",placeholder:"Describe the product...",value:r.description,onChange:w=>s(b=>({...b,description:w.target.value})),rows:4})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"categoryId",children:"Category ID (Optional)"}),o.jsx(Ne,{id:"categoryId",placeholder:"e.g., books, equipment",value:r.categoryId,onChange:w=>s(b=>({...b,categoryId:w.target.value}))})]})]})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Ke,{children:"Product Images"}),o.jsx(St,{children:"Add image URLs for the product"})]}),o.jsxs(te,{type:"button",variant:"outline",onClick:m,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})}),o.jsx(me,{className:"space-y-4",children:r.images.map((w,b)=>o.jsxs("div",{className:`flex gap-2 items-center ${u===b?"border-2 border-dashed p-2 rounded":""}`,onDragOver:x=>{x.preventDefault(),h(b)},onDragEnter:x=>{x.preventDefault(),h(b)},onDragLeave:()=>{h(null)},onDrop:async x=>{x.preventDefault(),h(null);try{const E=x.dataTransfer;if(!E)return;if(E.files&&E.files.length>0){const j=E.files[0];try{let C=null;try{C=await Tr(j)}catch(L){console.warn("Cloudinary upload failed, trying ImageKit fallback",(L==null?void 0:L.message)||L),C=await Zo(j,j.name)}C&&typeof C=="string"&&C.startsWith("http")?y(b,C):alert("Upload failed: unexpected response from upload provider")}catch(C){console.error("Drop upload error:",C);const V=((C==null?void 0:C.message)||String(C)||"").toLowerCase();if(V.includes("cloudinary signing did not return an api key")||V.includes("missing required parameter - api_key")||V.includes("missing required parameter 'api_key'")){const z=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(z&&z.trim())try{Xa(null,null,z.trim());const P=await Tr(j);if(P&&typeof P=="string"&&P.startsWith("http")){y(b,P);return}}catch(P){console.error("Retry after API key failed:",P)}}alert("Upload failed: "+((C==null?void 0:C.message)||C))}return}const A=E.getData("text/uri-list")||E.getData("text/plain");if(A&&A.startsWith("http")){if(!window.confirm(`Upload the dragged URL to Cloudinary and replace it?
`+A))return;const C=await A1(A);C&&typeof C=="string"&&C.startsWith("http")?y(b,C):alert("Upload failed: unexpected response from server")}}catch(E){console.error("Drop upload error:",E),alert("Image upload failed: "+((E==null?void 0:E.message)||E))}},children:[o.jsx(Ne,{placeholder:"https://example.com/image.jpg",value:w,onChange:x=>y(b,x.target.value)}),o.jsx(te,{type:"button",variant:"ghost",size:"icon",onClick:async()=>{var x;try{const E=(x=r.images[b])==null?void 0:x.trim();if(E&&(E.startsWith("http://")||E.startsWith("https://"))){try{if(!window.confirm(`Upload the current URL to Cloudinary/ImageKit and replace it?
`+E))return;try{const C=await A1(E);if(C&&typeof C=="string"&&C.startsWith("http")){y(b,C);return}}catch(C){console.warn("uploadUrlToServer failed, will try ImageKit:",(C==null?void 0:C.message)||C)}try{const C=await Zo(E);if(C&&typeof C=="string"&&C.startsWith("http")){y(b,C);return}else alert("Upload failed: unexpected response from ImageKit")}catch(C){console.error("ImageKit URL upload error:",C),alert("URL upload failed: "+((C==null?void 0:C.message)||C))}}catch(j){console.error("URL upload error:",j),alert("URL upload failed: "+((j==null?void 0:j.message)||j))}return}const A=document.createElement("input");A.type="file",A.accept="image/*",A.onchange=async()=>{var C;const j=(C=A.files)==null?void 0:C[0];if(j)try{let L=null;try{L=await Tr(j)}catch(V){console.warn("Cloudinary upload failed, trying ImageKit fallback",(V==null?void 0:V.message)||V);try{L=await Zo(j,j.name)}catch(z){throw console.error("ImageKit upload failed:",z),V}}if(!L||typeof L!="string"||!L.startsWith("http")){alert("Upload failed: unexpected response from upload provider");return}y(b,L)}catch(L){const V=(L==null?void 0:L.message)||String(L);console.error("Upload error:",L);const z=(V||"").toLowerCase();if(z.includes("cloudinary cloud name is not configured")){const P=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!P){alert("No cloud name provided.");return}const k=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),D=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");Xa(P,k||null,D||null);try{const R=await Tr(j);if(!R||typeof R!="string"||!R.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(b,R)}catch(R){console.error("Retry upload error:",R),alert("Upload failed after configuring Cloudinary: "+(R.message||R))}}else if(z.includes("cloudinary signing did not return an api key")||z.includes("missing required parameter - api_key")||z.includes("missing required parameter 'api_key'")){const P=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(P&&P.trim())try{Xa(null,null,P.trim());const k=await Tr(j);if(!k||typeof k!="string"||!k.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(b,k);return}catch(k){console.error("Retry upload error:",k),alert("Upload failed after setting API key: "+(k.message||k));return}}else alert("Image upload failed: "+(L.message||L))}},A.click()}catch(E){console.error(E),alert("Could not open file dialog")}},children:o.jsx(dv,{className:"h-4 w-4"})}),r.images.length>1&&o.jsx(te,{type:"button",variant:"outline",size:"icon",onClick:()=>v(b),children:o.jsx(Uc,{className:"h-4 w-4"})})]},b))})]}),r.name&&o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Preview"}),o.jsx(St,{children:"How the product will appear"})]}),o.jsx(me,{children:o.jsx("div",{className:"p-4 border rounded-lg",children:o.jsxs("div",{className:"flex items-start gap-4",children:[r.images[0]&&r.images[0].trim()&&(()=>{const w=LO(r.images[0]);return o.jsx("img",{src:w||void 0,alt:r.name,className:"w-20 h-20 object-cover rounded",onError:b=>{b.currentTarget.style.display="none",console.warn("Product preview image failed to load:",w||r.images[0])}})})(),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:r.name}),o.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["$",r.price.toFixed(2)]}),r.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.description}),r.categoryId&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Category: ",r.categoryId]})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:a,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),a?"Saving...":t?"Update Product":"Add Product"]})]})]})]})}function wk(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const f=pn(Qe(Ae,"orders"),_l("orderDate","desc")),m=eo(f,async y=>{try{const v=await _t(Qe(Ae,"products")),w={};v.forEach(x=>{const E=x.data();w[x.id]={id:x.id,name:E.name||E.title||"",price:E.price||0}});const b=[];y.forEach(x=>{var z,P;const E=x.data();let A=[];E.items&&Array.isArray(E.items)&&E.items.length>0?A=E.items:E.productsIds&&Array.isArray(E.productsIds)&&(A=E.productsIds.map(k=>{var D,R;return{productId:k,name:((D=w[k])==null?void 0:D.name)||k,quantity:1,price:((R=w[k])==null?void 0:R.price)||0}}));const j=E.total||E.totalAmount||E.totalPrice||0,C=E.address||E.shippingaddress||E.shippingAddress||"",L=E.userPhone||E.user_phone||E.phone||"";let V=new Date;E.createdAt&&typeof E.createdAt.toDate=="function"?V=E.createdAt.toDate():E.orderDate&&typeof E.orderDate.toDate=="function"?V=E.orderDate.toDate():E.orderDate&&(V=new Date(E.orderDate)),b.push({id:x.id,userId:E.userId||E.user_id||"",username:E.username||E.userName||E.user_name||E.customerName||"",userName:E.userName||E.user_name||E.customerName||"",userEmail:E.userEmail||E.email||"",userPhone:L,address:C,items:A,total:j,iscompleted:E.iscompleted===!0||E.isCompleted===!0||!1,status:E.status||(E.iscompleted===!0?"completed":"pending"),createdAt:V,updatedAt:(P=(z=E.updatedAt)==null?void 0:z.toDate)==null?void 0:P.call(z)})}),e(b),r(!1)}catch(v){console.error("Error processing orders:",v),a("Failed to load orders"),r(!1)}},y=>{console.error("Failed to load orders:",y),a("Failed to load orders"),r(!1)});return()=>m()},[]),{orders:t,loading:n,error:s,createOrder:async f=>{try{await xn(Qe(Ae,"orders"),{...f,createdAt:new Date})}catch(m){console.error("Error creating order:",m)}},updateOrder:async(f,m)=>{try{const y={...m,updatedAt:new Date};(m.status==="completed"||m.isCompleted)&&(y.isCompleted=!0,y.iscompleted=!0,y.completedAt=new Date,y.status="completed"),await rn(At(Ae,"orders",f),y)}catch(y){console.error("Error updating order:",y)}},deleteOrder:async f=>{try{await Sr(At(Ae,"orders",f))}catch(m){console.error("Error deleting order:",m)}}}}function yq(){const[t,e]=_.useState(""),[n,r]=_.useState(!1),[s,a]=_.useState(null),{products:c,loading:u,error:h,isOfflineMode:f,createProduct:m,updateProduct:y,deleteProduct:v,retryConnection:w}=cA(),{createOrder:b}=wk(),x=()=>{a(null),r(!0)},E=C=>{a(C),r(!0)},A=async(C,L)=>{confirm(`Are you sure you want to delete "${L}"?`)&&await v(C)};if(n)return o.jsx(gq,{product:s,onClose:()=>{r(!1),a(null)},onSave:async C=>{try{s?await y(s.id,C):await m(C),r(!1),a(null)}catch(L){console.error("Error saving product:",L),alert("Failed to save product. Please try again.")}}});const j=c.filter(C=>C.name.toLowerCase().includes(t.toLowerCase())||C.description.toLowerCase().includes(t.toLowerCase()));return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex justify-between items-center",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Store Management"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"text-muted-foreground",children:"Manage store products and categories"}),f&&o.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[o.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),u&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Qi,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}),h&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading products"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:h}),o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx(te,{onClick:w,variant:"outline",children:"Retry Connection"}),o.jsx(te,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!u&&!h&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsxs(pe,{children:[o.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ke,{className:"text-sm font-medium",children:"Total Products"}),o.jsx(hv,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(me,{children:o.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),o.jsxs(pe,{children:[o.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ke,{className:"text-sm font-medium",children:"Average Price"}),o.jsx(PS,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(me,{children:o.jsxs("div",{className:"text-2xl font-bold",children:["$",c.length>0?(c.reduce((C,L)=>{const V=L.types&&L.types.length>0?L.types[0].price:L.price||0;return C+V},0)/c.length).toFixed(2):"0.00"]})})]}),o.jsxs(pe,{children:[o.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ke,{className:"text-sm font-medium",children:"Categories"}),o.jsx(ad,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(me,{children:o.jsx("div",{className:"text-2xl font-bold",children:new Set(c.map(C=>C.categoryId).filter(C=>C&&C.trim())).size})})]})]}),o.jsxs(xk,{defaultValue:"products",className:"space-y-6",children:[o.jsxs(E0,{className:"grid w-full grid-cols-2",children:[o.jsxs(Sc,{value:"products",className:"flex items-center gap-2",children:[o.jsx(Rx,{className:"h-4 w-4"}),"Products (",c.length,")"]}),o.jsxs(Sc,{value:"categories",className:"flex items-center gap-2",children:[o.jsx(ad,{className:"h-4 w-4"}),"Categories"]})]}),o.jsxs(Tc,{value:"products",className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"relative flex-1 max-w-sm",children:[o.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search products...",value:t,onChange:C=>e(C.target.value),className:"pl-10"})]}),o.jsxs(te,{onClick:x,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),j.length===0?o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(hv,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:t?"No products found":"No products yet"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"Try adjusting your search terms":"Add your first product to get started"}),!t&&o.jsxs(te,{onClick:x,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add First Product"]})]})}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:j.map(C=>o.jsxs(pe,{className:"overflow-hidden",children:[o.jsxs("div",{className:"aspect-video bg-muted relative",children:[C.images&&C.images[0]?o.jsx("img",{src:C.images[0],alt:C.name,className:"w-full h-full object-cover",onError:L=>{L.currentTarget.style.display="none";const V=L.currentTarget.nextElementSibling;V&&(V.style.display="flex")}}):null,o.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:C.images&&C.images[0]?"none":"flex"},children:o.jsx(dv,{className:"h-12 w-12 text-muted-foreground"})})]}),o.jsxs(Be,{className:"pb-2",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx(Ke,{className:"text-lg line-clamp-1",children:C.name}),C.types&&C.types.length>1&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[C.types.length," options available"]})]}),o.jsx("div",{className:"mt-2",children:C.types&&C.types.length>0?o.jsx("div",{className:"flex gap-2 flex-wrap",children:C.types.map((L,V)=>o.jsxs(Pt,{variant:"secondary",className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium",children:L.name}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["$",L.price.toFixed(2)]})]},V))}):o.jsxs("div",{className:"text-xl font-bold",children:["$",(C.price||0).toFixed(2)]})}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>E(C),className:"h-8 w-8",children:o.jsx(ts,{className:"h-3 w-3"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:async()=>{try{const L=document.createElement("input");L.type="file",L.accept="image/*",L.onchange=async()=>{var z;const V=(z=L.files)==null?void 0:z[0];if(V)try{let P=null;try{P=await Tr(V)}catch(k){console.warn("Cloudinary upload failed, trying ImageKit fallback",(k==null?void 0:k.message)||k);try{P=await Zo(V,V.name)}catch(D){throw console.error("ImageKit upload failed:",D),k}}if(!P||typeof P!="string"||!P.startsWith("http")){console.error("Invalid upload response:",P),alert("Image upload failed: unexpected response from upload provider");return}await y(C.id,{images:[P]})}catch(P){console.error(P);const D=((P==null?void 0:P.message)||String(P)||"").toLowerCase();if(D.includes("cloudinary cloud name is not configured")){const R=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!R){alert("No cloud name provided. Upload cancelled.");return}const O=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),U=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{Xa(R,O||null,U||null);const F=await Tr(V);if(console.log("Cloudinary upload result after config:",F),!F||typeof F!="string"||!F.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(C.id,{images:[F]})}catch(F){console.error(F),alert("Image upload failed after configuring Cloudinary: "+(F.message||F))}return}else if(D.includes("cloudinary signing did not return an api key")||D.includes("missing required parameter - api_key")||D.includes("missing required parameter 'api_key'")){const R=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(R&&R.trim())try{Xa(null,null,R.trim());const O=await Tr(V);if(!O||typeof O!="string"||!O.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(C.id,{images:[O]});return}catch(O){console.error(O),alert("Image upload failed after setting API key: "+(O.message||O));return}}alert("Image upload failed: "+(P.message||P))}},L.click()}catch(L){console.error(L),alert("Could not open file dialog")}},className:"h-8 w-8",children:o.jsx(dv,{className:"h-3 w-3"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>A(C.id,C.name),className:"h-8 w-8 text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-3 w-3"})}),o.jsx(te,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:async()=>{try{let L,V;if(C.types&&C.types.length>0)if(C.types.length===1)L=C.types[0].name,V=C.types[0].price;else{const F=C.types.map((K,Z)=>`${Z+1}. ${K.name} - $${K.price.toFixed(2)}`).join(`
`),H=window.prompt(`Select a type for "${C.name}":

${F}

Enter the number (1-${C.types.length}):`,"1");if(!H)return;const Q=parseInt(H)-1;if(Q<0||Q>=C.types.length){alert("Invalid selection. Please try again.");return}L=C.types[Q].name,V=C.types[Q].price}else V=C.price||0;const z=window.prompt("Your full name:");if(!z)return;const P=window.prompt("Your email:");if(!P)return;const k=window.prompt("Quantity:","1")||"1",D=parseInt(k)||1,R=window.prompt("Phone (optional):","")||"",O=window.prompt("Address (optional):","")||"",U=L?`${C.name} (${L})`:C.name;await b({username:z,userName:z,userEmail:P,userPhone:R,address:O,items:[{productId:C.id,name:U,quantity:D,price:V,selectedType:L}],total:V*D,status:"pending",createdAt:new Date}),alert(`Order placed successfully!

Product: ${U}
Quantity: ${D}
Total: $${(V*D).toFixed(2)}`)}catch(L){console.error(L),alert("Failed to place order")}},children:C.types&&C.types.length>1?"Select & Buy":"Buy Now"})]})]}),o.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",(C.types&&C.types.length>0?C.types[0].price:C.price||0).toFixed(2)]})]}),o.jsxs(me,{className:"pt-0",children:[C.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:C.description}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[o.jsx("span",{children:C.createdAt.toLocaleDateString()}),C.categoryId&&o.jsx(Pt,{variant:"secondary",className:"text-xs",children:C.categoryId})]})]})]},C.id))})]}),o.jsxs(Tc,{value:"categories",className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Categories"}),o.jsxs(te,{disabled:!0,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(ad,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Category Management"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Category management will be implemented in the future."}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"For now, you can specify category IDs when creating products."})]})})]})]})]})]})}function vq({order:t,onChangeStatus:e,onDelete:n}){var r,s;return o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ke,{children:["Order for ",t.username||t.userName,o.jsx("div",{className:"text-xs text-muted-foreground",children:(s=(r=t.createdAt)==null?void 0:r.toLocaleString)==null?void 0:s.call(r)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(Pt,{variant:t.status==="completed"||t.iscompleted?"default":"secondary",children:[t.status,t.iscompleted?"  completed":""]}),o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>e(t.id,"completed"),children:[o.jsx(QE,{className:"h-4 w-4 mr-1"})," Complete"]}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>n(t.id),className:"text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})}),o.jsxs(me,{children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact"}),o.jsx("div",{className:"font-medium",children:t.username||t.userName}),o.jsx("div",{className:"text-sm",children:t.userEmail}),t.userPhone&&o.jsx("div",{className:"text-sm",children:t.userPhone}),t.address&&o.jsx("div",{className:"text-sm",children:t.address})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Items"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[t.items&&t.items.length>0?t.items.map((a,c)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm",children:[a.name," x",a.quantity]}),o.jsxs("div",{className:"font-medium",children:["$",(a.price*a.quantity).toFixed(2)]})]},c)):o.jsx("div",{className:"text-sm text-muted-foreground",children:"No item details. Products IDs may be attached in the raw order."}),t.productsIds&&t.productsIds.length>0&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Product IDs: ",(t.productsIds||[]).join(", ")]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t mt-2",children:[o.jsx("div",{className:"font-medium",children:"Total"}),o.jsxs("div",{className:"font-bold",children:["$",(t.total||0).toFixed(2)]})]})]})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsxs(te,{onClick:()=>e(t.id,"paid"),children:[o.jsx(QE,{className:"h-4 w-4 mr-2"})," Mark Paid"]}),o.jsxs(te,{variant:"outline",onClick:()=>e(t.id,"cancelled"),children:[o.jsx(B2,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]})]},t.id)}function xq(){const{orders:t,loading:e,error:n,updateOrder:r,deleteOrder:s}=wk(),a=async(u,h)=>{u&&await r(u,{status:h})},c=async u=>{u&&confirm("Delete this order?")&&await s(u)};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Orders"}),o.jsx("p",{className:"text-muted-foreground",children:"View and manage store orders"})]})}),e&&o.jsx("div",{children:"Loading..."}),n&&o.jsx("div",{className:"text-destructive",children:n}),!e&&!n&&o.jsx("div",{className:"grid gap-4",children:t.map(u=>o.jsx(vq,{order:u,onChangeStatus:a,onDelete:c},u.id))})]})}function b0(t,e){const[n,r]=_.useState([]),[s,a]=_.useState(!0),[c,u]=_.useState(null);return _.useEffect(()=>{let h=null,f=!0;return(async()=>{if(!t){r([]),a(!1);return}try{const y=pn(rs(Ae,"lectures"),bc(L$(),"==",t)),v=await _t(y);if(v.empty){f&&(r([]),a(!1));return}const w=v.docs[0],b=Qe(w.ref,e);h=eo(b,x=>{if(!f)return;const E=[];x.forEach(A=>{const j=A.data();E.push({id:A.id,...j})}),r(E),a(!1)},x=>{console.error(`Failed to subscribe to ${e}:`,x),u(`Failed to load ${e}`),a(!1)})}catch(y){console.error(`Error resolving lecture for ${e}:`,y),f&&(u(y.message||String(y)),a(!1))}})(),()=>{f=!1,h&&h()}},[t,e]),{items:n,loading:s,error:c}}function wq(t){return b0(t,"videos")}function _q(t){return b0(t,"files")}function _k(t){return b0(t,"quizzes")}function Eq(){var f;const[t]=Kd(),e=t.get("lecture"),{lectures:n,loading:r,error:s}=Mm(),{items:a,loading:c,error:u}=wq(e);if(c||r)return o.jsx("div",{children:"Loading..."});if(u||s)return o.jsx("div",{className:"text-destructive",children:u||s});const h=n.find(m=>m.id===e);return h?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Videos for ",h.title||h.id]}),o.jsx("p",{className:"text-muted-foreground",children:h.description})]}),o.jsx("div",{children:o.jsx(Zn,{to:"/admin/resources",children:o.jsx(te,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["Videos (",((f=h.videos)==null?void 0:f.length)||0,")"]})}),o.jsx(me,{children:a&&a.length>0?o.jsx("div",{className:"space-y-3",children:a.map(m=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[m.thumbnailUrl?o.jsx("img",{src:m.thumbnailUrl,alt:m.title,className:"w-32 h-18 object-cover rounded"}):o.jsx("div",{className:"w-32 h-18 bg-muted rounded"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:m.title||"Untitled"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:m.description})]})]}),o.jsx("div",{children:o.jsxs(te,{onClick:()=>window.open(m.url||m.youtubeUrl||"","_blank"),children:[" ",o.jsx(ni,{className:"h-4 w-4 mr-2"})," Play "]})})]},m.id))}):o.jsx("p",{className:"text-muted-foreground",children:"No videos available for this lecture."})})]})]}):o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its videos."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(te,{children:"Back to Years"})})})]})})}function bq(){var f;const[t]=Kd(),e=t.get("lecture"),{lectures:n,loading:r,error:s}=Mm(),{items:a,loading:c,error:u}=_q(e);if(c||r)return o.jsx("div",{children:"Loading..."});if(u||s)return o.jsx("div",{className:"text-destructive",children:u||s});const h=n.find(m=>m.id===e);return h?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Files for ",h.title||h.id]}),o.jsx("p",{className:"text-muted-foreground",children:h.description})]}),o.jsx("div",{children:o.jsx(Zn,{to:"/admin/resources",children:o.jsx(te,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["Files (",((f=h.files)==null?void 0:f.length)||0,")"]})}),o.jsx(me,{children:a&&a.length>0?o.jsx("div",{className:"space-y-3",children:a.map(m=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Cs,{className:"h-6 w-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:m.title||m.name||"Untitled File"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:m.description})]})]}),o.jsx("div",{children:o.jsx(te,{onClick:()=>window.open(m.fileUrl||m.url||"_blank"),children:"Download"})})]},m.id))}):o.jsx("p",{className:"text-muted-foreground",children:"No files available for this lecture."})})]})]}):o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its files."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(te,{children:"Back to Years"})})})]})})}function Nq(){var f;const[t]=Kd(),e=t.get("lecture"),{lectures:n,loading:r,error:s}=Mm(),{items:a,loading:c,error:u}=_k(e);if(c||r)return o.jsx("div",{children:"Loading..."});if(u||s)return o.jsx("div",{className:"text-destructive",children:u||s});const h=n.find(m=>m.id===e);return h?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Quizzes for ",h.title||h.id]}),o.jsx("p",{className:"text-muted-foreground",children:h.description})]}),o.jsx("div",{children:o.jsx(Zn,{to:"/admin/resources",children:o.jsx(te,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["Quizzes (",((f=h.quizzes)==null?void 0:f.length)||0,")"]})}),o.jsx(me,{children:a&&a.length>0?o.jsx("div",{className:"space-y-3",children:a.map(m=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx($i,{className:"h-6 w-6 text-purple-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:m.title||"Untitled Quiz"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:m.description}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",o.jsx("strong",{children:m.type||"multiple_choice"})]})]})]}),o.jsx("div",{children:(m.type||"multiple_choice")==="flashcard"?o.jsx(te,{onClick:()=>window.location.href=`/admin/flashcards?lecture=${e}&quiz=${m.id}`,children:"Flashcards"}):o.jsx(te,{onClick:()=>alert("Multiple choice runner not implemented. Use Flashcards or implement MCQ runner."),children:"Start"})})]},m.id))}):o.jsx("p",{className:"text-muted-foreground",children:"No quizzes available for this lecture."})})]})]}):o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its quizzes."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(te,{children:"Back to Years"})})})]})})}var N0="Progress",S0=100,[Sq,aW]=Gi(N0),[Tq,Cq]=Sq(N0),Ek=_.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=jq,...c}=t;(s||s===0)&&!V1(s)&&console.error(Iq(`${s}`,"Progress"));const u=V1(s)?s:S0;r!==null&&!U1(r,u)&&console.error(Aq(`${r}`,"Progress"));const h=U1(r,u)?r:null,f=qp(h)?a(h,u):void 0;return o.jsx(Tq,{scope:n,value:h,max:u,children:o.jsx(Je.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":qp(h)?h:void 0,"aria-valuetext":f,role:"progressbar","data-state":Sk(h,u),"data-value":h??void 0,"data-max":u,...c,ref:e})})});Ek.displayName=N0;var bk="ProgressIndicator",Nk=_.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=Cq(bk,n);return o.jsx(Je.div,{"data-state":Sk(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});Nk.displayName=bk;function jq(t,e){return`${Math.round(t/e*100)}%`}function Sk(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function qp(t){return typeof t=="number"}function V1(t){return qp(t)&&!isNaN(t)&&t>0}function U1(t,e){return qp(t)&&!isNaN(t)&&t<=e&&t>=0}function Iq(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${S0}\`.`}function Aq(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${S0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Tk=Ek,Pq=Nk;const Ck=_.forwardRef(({className:t,value:e,...n},r)=>o.jsx(Tk,{ref:r,className:Ge("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:o.jsx(Pq,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Ck.displayName=Tk.displayName;function kq(){const[t]=Kd(),e=t.get("lecture"),n=t.get("quiz"),{items:r,loading:s,error:a}=_k(e),c=r.find(U=>U.id===n),[u,h]=_.useState(0),[f,m]=_.useState([]);if(s)return o.jsx("div",{children:"Loading..."});if(a)return o.jsx("div",{className:"text-destructive",children:a});if(!c)return o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Quiz not found"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a quiz to start flashcards."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/quizzes",children:o.jsx(te,{children:"Back"})})})]})});const y=c.questions||[],v=y.reduce((U,F)=>U+(F.weight&&Number(F.weight)||1),0),w=y[u],b=w&&(w.weight||1)||1,x=f[u]??0,[E,A]=_.useState(!1),[j,C]=_.useState([]),[L,V]=_.useState(null);_.useEffect(()=>{A(!1),C([]),V(null)},[u]);const z=(U,F)=>{const H=[...f];H[U]=F,m(H)},P=f.reduce((U,F,H)=>U+(F||0),0),k=Math.round(P/v*100),D=U=>{if(!U)return[{type:"text",value:""}];const F=[],H=/\[\[(.+?)\]\]/g;let Q=0,K;for(;(K=H.exec(U))!==null;)K.index>Q&&F.push({type:"text",value:U.slice(Q,K.index)}),F.push({type:"blank",value:K[1]}),Q=H.lastIndex;return Q<U.length&&F.push({type:"text",value:U.slice(Q)}),F},R=()=>{const U=(w==null?void 0:w.question)||"",H=D(U).filter(Q=>Q.type==="blank");H.length>0?C(H.map(()=>"")):C([""]),V(null),A(!0)},O=()=>{const U=(w==null?void 0:w.question)||"",H=D(U).filter(W=>W.type==="blank").map(W=>W.value);let Q=[];H.length>0?Q=H:w&&Array.isArray(w.options)&&typeof w.correctAnswer=="number"?Q=[w.options[w.correctAnswer]||""]:w&&(w.answer||w.correct)&&(Q=[String(w.answer||w.correct)]);const Z=j.map((W,Y)=>{const ne=(Q[Y]??Q[0]??"").toString().trim().toLowerCase();return W.toString().trim().toLowerCase()===ne&&ne!==""}).every(Boolean);V(Z?"Correct":"Incorrect"),Z&&z(u,b)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Flashcards: ",c.title]}),o.jsx("p",{className:"text-muted-foreground",children:"Fill marks per question. Total progress shows weighted score."})]}),o.jsx("div",{children:o.jsx(Zn,{to:"/admin/quizzes",children:o.jsx(te,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsx(Ke,{children:"Progress"})}),o.jsxs(me,{children:[o.jsxs("div",{className:"mb-2 text-sm",children:["Total: ",v," points  Current: ",P," points"]}),o.jsx(Ck,{value:k}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[k,"%"]})]})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["Question ",u+1," / ",y.length]})}),o.jsx(me,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"font-medium",children:E?o.jsxs("div",{className:"space-y-2",children:[(()=>{const U=D(w.question||"");let F=0;return o.jsxs("div",{children:[U.map((H,Q)=>{if(H.type==="text")return o.jsx("span",{children:H.value},Q);const K=F++;return o.jsx("input",{value:j[K]??"",onChange:Z=>C(W=>{const Y=[...W];return Y[K]=Z.target.value,Y}),placeholder:"Fill the blank",className:"border-b-2 border-gray-300 px-1 mx-1"},Q)}),U.length===1&&U[0].type==="text"&&o.jsx("div",{children:o.jsx("input",{value:j[0]??"",onChange:H=>C(Q=>{const K=[...Q];return K[0]=H.target.value,K}),placeholder:"Answer",className:"border-b-2 border-gray-300 px-1"})})]})})(),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx(te,{onClick:O,children:"Check"}),o.jsx(te,{variant:"outline",onClick:()=>{A(!1),V(null)},children:"Cancel"}),L&&o.jsx("div",{className:"ml-2 text-sm",children:L})]})]}):o.jsx("span",{role:"button",tabIndex:0,onClick:R,onKeyDown:U=>{U.key==="Enter"&&R()},children:w.question})}),w.imageUrl&&o.jsx("img",{src:w.imageUrl,alt:"question",className:"w-full max-w-md object-contain"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Weight: ",b]}),o.jsxs("label",{className:"text-sm",children:["Mark (0 - ",b,")"]}),o.jsx("input",{type:"number",min:0,max:b,value:x,onChange:U=>z(u,Math.max(0,Math.min(b,Number(U.target.value)||0))),className:"border rounded px-2 py-1 w-24"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(te,{disabled:u===0,onClick:()=>h(U=>Math.max(0,U-1)),children:"Previous"}),o.jsx(te,{disabled:u===y.length-1,onClick:()=>h(U=>Math.min(y.length-1,U+1)),children:"Next"}),o.jsx(te,{variant:"outline",onClick:()=>{m([]),h(0)},children:"Reset"})]}),o.jsx("div",{className:"mt-4",children:o.jsx(te,{onClick:()=>alert(`Final score: ${P}/${v} (${k}%)`),children:"Finish"})})]})})]})]})}function Rq(){return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Configure application settings and preferences"})]}),o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(RS,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"This section will provide configuration options for the admin panel."}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Features: User management, system configuration, backup settings, security options."})]})})]})}function Oq(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const f=pn(Qe(Ae,"maps")),m=eo(f,y=>{const v=[];y.forEach(w=>{var x,E;const b=w.data();v.push({id:w.id,name:b.name||"",location:b.location||"",description:b.description||b.desc||"",type:b.type||b.mapType||"",video_url:b.video_url||b.videoUrl||"",createdAt:((E=(x=b.createdAt)==null?void 0:x.toDate)==null?void 0:E.call(x))||void 0})}),e(v),r(!1)},y=>{console.error("Failed to load maps:",y),a("Failed to load maps"),r(!1)});return()=>m()},[]),{maps:t,loading:n,error:s,createMap:async f=>{const m={...f,createdAt:new Date};m.type&&!m.mapType&&(m.mapType=m.type),m.mapType&&!m.type&&(m.type=m.mapType),["name","location","description","video_url","type","mapType"].forEach(y=>{typeof m[y]=="string"&&(m[y]=m[y].trim())}),await xn(Qe(Ae,"maps"),m)},updateMap:async(f,m)=>{const y={...m};y.type&&!y.mapType&&(y.mapType=y.type),y.mapType&&!y.type&&(y.type=y.mapType),["name","location","description","video_url","type","mapType"].forEach(v=>{typeof y[v]=="string"&&(y[v]=y[v].trim())}),await rn(At(Ae,"maps",f),y)},deleteMap:async f=>{await Sr(At(Ae,"maps",f))}}}function Dq(){const{maps:t,loading:e,error:n,createMap:r,updateMap:s,deleteMap:a}=Oq(),[c,u]=_.useState({name:"",location:"",description:"",video_url:"",type:""}),[h,f]=_.useState(!1),[m,y]=_.useState(null),v=()=>u({name:"",location:"",description:"",video_url:"",type:""}),w=async b=>{if(b.preventDefault(),!!c.name.trim()){f(!0);try{m?await s(m,c):await r(c),v(),y(null)}catch(x){console.error("Error saving map:",x),alert("Failed to save map")}finally{f(!1)}}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(vd,{className:"h-6 w-6 text-blue-600"}),o.jsx("h1",{className:"text-3xl font-bold",children:"Maps"})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsx(Ke,{children:"Add Map"})}),o.jsx(me,{children:o.jsxs("form",{onSubmit:w,className:"grid md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{children:"Name"}),o.jsx(Ne,{value:c.name,onChange:b=>u(x=>({...x,name:b.target.value})),placeholder:"Map name",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{children:"Location"}),o.jsx(Ne,{value:c.location,onChange:b=>u(x=>({...x,location:b.target.value})),placeholder:"Location"})]}),o.jsxs("div",{className:"space-y-2 md:col-span-3",children:[o.jsx(je,{children:"Description"}),o.jsx("textarea",{value:c.description,onChange:b=>u(x=>({...x,description:b.target.value})),placeholder:"Short description",className:"w-full border rounded px-3 py-2",rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{children:"Type"}),o.jsxs("select",{className:"w-full border rounded px-3 py-2",value:c.type,onChange:b=>u(x=>({...x,type:b.target.value})),children:[o.jsx("option",{value:"",children:"Select type"}),o.jsx("option",{value:" ",children:" "}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:" ",children:" "}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{children:"Video URL"}),o.jsx(Ne,{value:c.video_url,onChange:b=>u(x=>({...x,video_url:b.target.value})),placeholder:"https://..."})]}),o.jsx("div",{className:"md:col-span-3 flex justify-end space-x-2",children:m?o.jsxs(o.Fragment,{children:[o.jsx(te,{type:"button",variant:"outline",onClick:()=>{y(null),v()},children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:h,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),h?"Saving...":"Save"]})]}):o.jsxs(te,{type:"submit",disabled:h,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add"]})})]})})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["All Maps (",t.length,")"]})}),o.jsx(me,{children:e?o.jsx("div",{children:"Loading..."}):n?o.jsx("div",{className:"text-destructive",children:n}):t.length===0?o.jsx("div",{className:"text-muted-foreground",children:"No maps yet."}):o.jsx("div",{className:"grid gap-3",children:t.map(b=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:b.name}),o.jsx("div",{className:"text-xs text-muted-foreground truncate",children:b.location}),b.type&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",o.jsx("span",{className:"font-medium",children:b.type})]}),b.description&&o.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:b.description}),b.video_url&&o.jsx("a",{className:"text-xs text-blue-600 hover:underline",href:b.video_url,target:"_blank",rel:"noreferrer",children:b.video_url})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{y(b.id),u({name:b.name||"",location:b.location||"",description:b.description||"",video_url:b.video_url||"",type:b.type||""}),window.scrollTo({top:0,behavior:"smooth"})},className:"",children:"Edit"}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>a(b.id),className:"text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]},b.id))})})]})]})}function Lq({research:t,onClose:e,onSave:n}){const[r,s]=_.useState({projectTitle:"",abstract:"",fieldOfResearch:[],contactPerson:[],authorshipPosition:[],projectDuration:"",requiredSkills:[],supervisor:""}),[a,c]=_.useState(""),[u,h]=_.useState("");_.useEffect(()=>{t&&s({projectTitle:t.projectTitle||"",abstract:t.abstract||"",fieldOfResearch:t.fieldOfResearch||[],contactPerson:t.contactPerson||[],authorshipPosition:t.authorshipPosition||[],projectDuration:t.projectDuration||"",requiredSkills:t.requiredSkills||[],supervisor:t.supervisor||""})},[t]);const f=()=>{const b=a.trim();b&&(r.fieldOfResearch.includes(b)||s(x=>({...x,fieldOfResearch:[...x.fieldOfResearch,b]})),c(""))},m=()=>{const b=u.trim();b&&(r.requiredSkills.includes(b)||s(x=>({...x,requiredSkills:[...x.requiredSkills,b]})),h(""))},y=b=>s(x=>({...x,fieldOfResearch:x.fieldOfResearch.filter(E=>E!==b)})),v=b=>s(x=>({...x,requiredSkills:x.requiredSkills.filter(E=>E!==b)})),w=b=>{b.preventDefault();const x={projectTitle:r.projectTitle,abstract:r.abstract,fieldOfResearch:r.fieldOfResearch,contactPerson:r.contactPerson,authorshipPosition:r.authorshipPosition,projectDuration:r.projectDuration,requiredSkills:r.requiredSkills,supervisor:r.supervisor,updatedAt:new Date,...t?{}:{createdAt:new Date}};n(x)};return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:e,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Research":"Create Research"}),o.jsx("p",{className:"text-muted-foreground",children:"Add or update research project details"})]})]})}),o.jsx("form",{onSubmit:w,className:"space-y-6",children:o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Project Details"}),o.jsx(St,{children:"Title and abstract"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"title",children:"Project Title *"}),o.jsx(Ne,{id:"title",placeholder:"Enter project title...",value:r.projectTitle,onChange:b=>s(x=>({...x,projectTitle:b.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"abstract",children:"Abstract"}),o.jsx(js,{id:"abstract",placeholder:"Write a brief abstract...",value:r.abstract,onChange:b=>s(x=>({...x,abstract:b.target.value})),rows:8})]})]})]}),o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Fields & Skills"}),o.jsx(St,{children:"Fields of research and required skills"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(je,{children:"Field of Research"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx(Ne,{placeholder:"Add field e.g., Oncology",value:a,onChange:b=>c(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),f())}}),o.jsx(te,{type:"button",onClick:f,variant:"outline",children:"Add"})]}),o.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.fieldOfResearch.map(b=>o.jsxs(Pt,{variant:"secondary",className:"flex items-center gap-2",children:[b,o.jsx("button",{type:"button",onClick:()=>y(b),className:"ml-1 hover:text-destructive",children:o.jsx(Uc,{className:"h-3 w-3"})})]},b))})]}),o.jsxs("div",{children:[o.jsx(je,{children:"Required Skills"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx(Ne,{placeholder:"Add skill e.g., Data analysis",value:u,onChange:b=>h(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),m())}}),o.jsx(te,{type:"button",onClick:m,variant:"outline",children:"Add"})]}),o.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.requiredSkills.map(b=>o.jsxs(Pt,{variant:"secondary",className:"flex items-center gap-2",children:[b,o.jsx("button",{type:"button",onClick:()=>v(b),className:"ml-1 hover:text-destructive",children:o.jsx(Uc,{className:"h-3 w-3"})})]},b))})]})]})]})]}),o.jsx("div",{className:"space-y-6",children:o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Meta"}),o.jsx(St,{children:"Contact, supervisor and duration"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{children:"Contact Person(s)"}),o.jsx(Ne,{placeholder:"Comma separated names",value:r.contactPerson.join(", "),onChange:b=>s(x=>({...x,contactPerson:b.target.value.split(",").map(E=>E.trim()).filter(Boolean)}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{children:"Authorship Positions"}),o.jsx(Ne,{placeholder:"Comma separated positions",value:r.authorshipPosition.join(", "),onChange:b=>s(x=>({...x,authorshipPosition:b.target.value.split(",").map(E=>E.trim()).filter(Boolean)}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{children:"Supervisor"}),o.jsx(Ne,{placeholder:"Supervisor name",value:r.supervisor,onChange:b=>s(x=>({...x,supervisor:b.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{children:"Project Duration"}),o.jsx(Ne,{placeholder:"e.g., 6 months",value:r.projectDuration,onChange:b=>s(x=>({...x,projectDuration:b.target.value}))})]}),o.jsxs("div",{className:"flex justify-end",children:[o.jsx(te,{variant:"ghost",onClick:e,className:"mr-2",children:"Cancel"}),o.jsx(te,{type:"submit",children:"Save"})]})]})]})})]})})]})}const Mq=[{id:"r1",projectTitle:"Impact of Early Clinical Exposure on Medical Students",abstract:"A study investigating how early clinical exposure affects students' clinical reasoning and confidence.",fieldOfResearch:["Medical Education","Clinical Skills"],contactPerson:["Dr. Sarah Johnson"],authorshipPosition:["Lead","Co-author"],projectDuration:"6 months",requiredSkills:["Clinical observation","Data analysis"],supervisor:"Prof. Michael Chen",createdAt:new Date,updatedAt:new Date}];function Fq(){const[t,e]=_.useState([]),[n,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1);_.useEffect(()=>{const y=async()=>{try{const w=pn(Qe(Ae,"research"));await _t(w);const b=pn(Qe(Ae,"research"),_l("createdAt","desc"));return eo(b,E=>{const A=[];E.forEach(j=>{var L,V;const C=j.data();A.push({id:j.id,projectTitle:C.projectTitle||C.title||"",abstract:C.abstract||"",fieldOfResearch:C.fieldOfResearch||[],contactPerson:C.contactPerson||[],authorshipPosition:C.authorshipPosition||[],projectDuration:C.projectDuration||"",requiredSkills:C.requiredSkills||[],supervisor:C.supervisor||"",createdAt:(L=C.createdAt)!=null&&L.toDate?C.createdAt.toDate():C.createdAt||new Date,updatedAt:(V=C.updatedAt)!=null&&V.toDate?C.updatedAt.toDate():C.updatedAt||new Date})}),e(A),r(!1)},E=>{console.error("Error in research listener:",E),v()})}catch(w){return console.error("Firebase connection failed for research:",w),v(),null}},v=()=>{u(!0),e(Mq),a(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(w=>[v,...w]);return}try{await xn(Qe(Ae,"research"),y)}catch(v){console.error("Error creating research:",v),u(!0),await h(y)}};return{research:t,loading:n,error:s,createResearch:h,updateResearch:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(w=>w.map(b=>b.id===y?{...b,...v}:b));return}try{await rn(At(Ae,"research",y),v)}catch(w){console.error("Error updating research:",w),e(b=>b.map(x=>x.id===y?{...x,...v}:x))}},deleteResearch:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(w=>w.id!==y));return}try{await Sr(At(Ae,"research",y))}catch(v){console.error("Error deleting research:",v),e(w=>w.filter(b=>b.id!==y))}},isOfflineMode:c}}function Vq(){const[t,e]=_.useState(""),[n,r]=_.useState(null),[s,a]=_.useState(!1),{research:c,loading:u,error:h,createResearch:f,updateResearch:m,deleteResearch:y}=Fq(),v=c.filter(E=>E.projectTitle.toLowerCase().includes(t.toLowerCase())),w=()=>{r(null),a(!0)},b=E=>{r(E),a(!0)},x=async E=>{window.confirm("Are you sure you want to delete this research entry?")&&await y(E)};return s?o.jsx(Lq,{research:n,onClose:()=>{a(!1),r(null)},onSave:async E=>{try{n?await m(n.id,E):await f(E),a(!1),r(null)}catch(A){console.error(A),alert("Failed to save. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Research"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage research projects and student/faculty submissions"})]}),o.jsxs(te,{onClick:w,className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Create Research"]})]}),o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search by project title...",value:t,onChange:E=>e(E.target.value),className:"pl-10"})]})})}),u&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Qi,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading research entries..."})]})}),h&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading research"}),o.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&o.jsx("div",{className:"space-y-4",children:v.map(E=>o.jsx(pe,{className:"hover:shadow-md transition-shadow",children:o.jsx(me,{className:"pt-6",children:o.jsx("div",{className:"flex gap-4",children:o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:E.projectTitle}),o.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mt-2",children:E.abstract}),o.jsx("div",{className:"flex gap-2 flex-wrap mt-3 text-xs text-muted-foreground",children:(E.fieldOfResearch||[]).map(A=>o.jsx("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:A},A))})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx(te,{variant:"ghost",onClick:()=>b(E),children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",onClick:()=>x(E.id),children:o.jsx(En,{className:"h-4 w-4"})})]})]})})})})},E.id))})]})}function Uq({notification:t,onClose:e,onSave:n}){const{users:r}=Dm(),{years:s}=El(),[a,c]=_.useState({userId:"",title:"",message:"",type:"news",relatedId:"",batchId:"",yearId:""}),[u,h]=_.useState(!1);_.useEffect(()=>{t&&c({userId:t.userId||"",title:t.title||"",message:t.message||"",type:t.type||"news",relatedId:t.relatedId||"",batchId:t.batchId||"",yearId:""})},[t]),_.useEffect(()=>{if(a.yearId){const m=s.find(y=>y.id===a.yearId);m!=null&&m.batchId&&c(y=>({...y,batchId:m.batchId||""}))}},[a.yearId,s]);const f=async m=>{m.preventDefault(),h(!0);try{const y={userId:a.userId,title:a.title,message:a.message,type:a.type,relatedId:a.relatedId||void 0,read:!1,createdAt:new Date,batchId:a.batchId||void 0};n(y)}catch(y){console.error("Error saving notification:",y)}finally{h(!1)}};return Array.from(new Set(s.map(m=>({id:m.batchId,name:m.batchName})).filter(m=>m.id).map(m=>JSON.stringify(m)))).map(m=>JSON.parse(m)),o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:e,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Notification":"Create Notification"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update the notification details":"Create a new notification for users"})]})]})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsx("div",{className:"lg:col-span-2 space-y-6",children:o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Notification Content"}),o.jsx(St,{children:"Main notification information"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"title",children:"Title *"}),o.jsx(Ne,{id:"title",placeholder:"Enter notification title...",value:a.title,onChange:m=>c(y=>({...y,title:m.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"message",children:"Message *"}),o.jsx(js,{id:"message",placeholder:"Write your notification message here...",value:a.message,onChange:m=>c(y=>({...y,message:m.target.value})),rows:8,required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"type",children:"Type *"}),o.jsxs(op,{value:a.type,onValueChange:m=>c(y=>({...y,type:m})),children:[o.jsx(gd,{children:o.jsx(ap,{placeholder:"Select notification type"})}),o.jsxs(yd,{children:[o.jsx(Po,{value:"news",children:"News"}),o.jsx(Po,{value:"announcement",children:"Announcement"}),o.jsx(Po,{value:"system",children:"System"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"relatedId",children:"Related ID (Optional)"}),o.jsx(Ne,{id:"relatedId",placeholder:"e.g., news article ID",value:a.relatedId,onChange:m=>c(y=>({...y,relatedId:m.target.value}))}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: ID of related item (e.g., news article ID)"})]})]})]})}),o.jsx("div",{className:"space-y-6",children:o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Target Audience"}),o.jsx(St,{children:"Select who should receive this notification"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"userId",children:"User ID *"}),o.jsxs(op,{value:a.userId,onValueChange:m=>c(y=>({...y,userId:m})),children:[o.jsx(gd,{children:o.jsx(ap,{placeholder:"Select a user"})}),o.jsx(yd,{children:r.map(m=>o.jsx(Po,{value:m.id||"",children:m.displayName||m.email||m.id},m.id))})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a specific user to notify"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"yearId",children:"Year (Optional)"}),o.jsxs(op,{value:a.yearId,onValueChange:m=>c(y=>({...y,yearId:m})),children:[o.jsx(gd,{children:o.jsx(ap,{placeholder:"Select a year"})}),o.jsxs(yd,{children:[o.jsx(Po,{value:"",children:"All Years"}),s.map(m=>o.jsx(Po,{value:m.id||"",children:m.batchName?`${m.batchName} - Year ${m.yearNumber}`:`Year ${m.yearNumber}`},m.id))]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Selecting a year will automatically set the batch"})]}),a.batchId&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(je,{htmlFor:"batchId",children:"Batch ID"}),o.jsx(Ne,{id:"batchId",value:a.batchId,readOnly:!0,className:"bg-muted"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically set from selected year"})]})]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsx(te,{type:"submit",disabled:u,children:u?o.jsxs(o.Fragment,{children:[o.jsx(Yi,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Ga,{className:"h-4 w-4 mr-2"}),t?"Update Notification":"Create Notification"]})})]})]})]})}function $q(){const[t,e]=_.useState(""),[n,r]=_.useState(null),[s,a]=_.useState(!1),[c,u]=_.useState("all"),{notifications:h,loading:f,error:m,createNotification:y,updateNotification:v,markAsRead:w,markAllAsRead:b,deleteNotification:x,unreadCount:E}=tP(),{users:A}=Dm(),j=O=>{const U=A.find(F=>F.id===O);return(U==null?void 0:U.displayName)||(U==null?void 0:U.email)||O},C=h.filter(O=>O.title.toLowerCase().includes(t.toLowerCase())||O.message.toLowerCase().includes(t.toLowerCase())||j(O.userId).toLowerCase().includes(t.toLowerCase())),L=C.filter(O=>!O.read),V=C.filter(O=>O.read),z=O=>{r(O),a(!0)},P=async O=>{if(window.confirm("Are you sure you want to delete this notification?"))try{await x(O)}catch(U){console.error("Error deleting notification:",U),alert("Failed to delete notification. Please try again.")}},k=async O=>{try{await w(O)}catch(U){console.error("Error marking notification as read:",U),alert("Failed to mark notification as read. Please try again.")}},D=async()=>{if(window.confirm("Mark all notifications as read?"))try{await b()}catch(O){console.error("Error marking all notifications as read:",O),alert("Failed to mark all notifications as read. Please try again.")}},R=()=>{r(null),a(!0)};return s?o.jsx(Uq,{notification:n,onClose:()=>{a(!1),r(null)},onSave:async O=>{try{n?await v(n.id,O):await y(O),a(!1),r(null)}catch(U){console.error("Error saving notification:",U),alert("Failed to save notification. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Notifications Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Create and manage notifications for users"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[E>0&&o.jsxs(te,{variant:"outline",onClick:D,className:"flex items-center gap-2",children:[o.jsx(V2,{className:"h-4 w-4"}),"Mark All Read"]}),o.jsxs(te,{onClick:R,className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Create Notification"]})]})]}),m&&o.jsx(pe,{className:"border-destructive",children:o.jsx(me,{className:"pt-6",children:o.jsx("p",{className:"text-destructive",children:m})})}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Ke,{children:"Notifications"}),o.jsx(St,{children:f?"Loading...":`${C.length} total notifications`})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"relative",children:[o.jsx(hl,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search notifications...",value:t,onChange:O=>e(O.target.value),className:"pl-8 w-64"})]})})]})}),o.jsx(me,{children:f?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(Qi,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):o.jsxs(xk,{value:c,onValueChange:u,children:[o.jsxs(E0,{children:[o.jsxs(Sc,{value:"all",children:["All (",C.length,")"]}),o.jsxs(Sc,{value:"unread",children:["Unread (",L.length,")"]}),o.jsxs(Sc,{value:"read",children:["Read (",V.length,")"]})]}),o.jsx(Tc,{value:"all",className:"mt-4",children:C.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(Ga,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No notifications found"})]}):o.jsx("div",{className:"space-y-3",children:C.map(O=>o.jsx(pe,{className:O.read?"opacity-75":"border-primary/50",children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[!O.read&&o.jsx(Pt,{variant:"default",className:"h-2 w-2 p-0 rounded-full"}),o.jsx("h3",{className:"font-semibold text-lg",children:O.title}),o.jsx(Pt,{variant:"outline",children:O.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:O.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ns,{className:"h-3 w-3"}),j(O.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(gc,{className:"h-3 w-3"}),O.createdAt.toLocaleDateString()]}),O.batchId&&o.jsxs(Pt,{variant:"secondary",className:"text-xs",children:["Batch: ",O.batchId.slice(0,8),"..."]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[!O.read&&o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>k(O.id),title:"Mark as read",children:o.jsx(lp,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>z(O),title:"Edit",children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>P(O.id),title:"Delete",className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})})},O.id))})}),o.jsx(Tc,{value:"unread",className:"mt-4",children:L.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(IS,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No unread notifications"})]}):o.jsx("div",{className:"space-y-3",children:L.map(O=>o.jsx(pe,{className:"border-primary/50",children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pt,{variant:"default",className:"h-2 w-2 p-0 rounded-full"}),o.jsx("h3",{className:"font-semibold text-lg",children:O.title}),o.jsx(Pt,{variant:"outline",children:O.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:O.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ns,{className:"h-3 w-3"}),j(O.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(gc,{className:"h-3 w-3"}),O.createdAt.toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>k(O.id),title:"Mark as read",children:o.jsx(lp,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>z(O),title:"Edit",children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>P(O.id),title:"Delete",className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})})},O.id))})}),o.jsx(Tc,{value:"read",className:"mt-4",children:V.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(X2,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No read notifications"})]}):o.jsx("div",{className:"space-y-3",children:V.map(O=>o.jsx(pe,{className:"opacity-75",children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-semibold text-lg",children:O.title}),o.jsx(Pt,{variant:"outline",children:O.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:O.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ns,{className:"h-3 w-3"}),j(O.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(gc,{className:"h-3 w-3"}),O.createdAt.toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>z(O),title:"Edit",children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>P(O.id),title:"Delete",className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})})},O.id))})})]})})]})]})}const zq=()=>{const t=Ji();return _.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};LR(()=>import("./firebaseMonitor-COzbXGYM.js"),[]).catch(()=>{});const Bq=new _M({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!1,retry:1}}});function qq({children:t}){const{currentUser:e}=km();return e?o.jsx(o.Fragment,{children:t}):o.jsx(Kf,{to:"/login"})}const $1=()=>o.jsx(Zz,{children:o.jsx(SM,{client:Bq,children:o.jsxs(tM,{children:[o.jsx(UO,{}),o.jsx(yD,{}),o.jsx(M4,{basename:"/builder-stellar-world/",children:o.jsx(Xz,{children:o.jsxs(j4,{children:[o.jsx($t,{path:"/login",element:o.jsx(uB,{})}),o.jsxs($t,{path:"/admin",element:o.jsx(qq,{children:o.jsx(iB,{})}),children:[o.jsx($t,{index:!0,element:o.jsx(TB,{})}),o.jsx($t,{path:"news",element:o.jsx(z8,{})}),o.jsx($t,{path:"years",element:o.jsx(W8,{})}),o.jsx($t,{path:"years/:id",element:o.jsx(H8,{})}),o.jsx($t,{path:"subjects/:id",element:o.jsx(eq,{})}),o.jsx($t,{path:"resources",element:o.jsx(F1,{})}),o.jsx($t,{path:"resources/*",element:o.jsx(F1,{})}),o.jsx($t,{path:"VIDEOS",element:o.jsx(Kf,{to:"/admin/years",replace:!0})}),o.jsx($t,{path:"VIDEOS/*",element:o.jsx(Kf,{to:"/admin/years",replace:!0})}),o.jsx($t,{path:"professors",element:o.jsx(Y7,{})}),o.jsx($t,{path:"users",element:o.jsx(X7,{})}),o.jsx($t,{path:"store",element:o.jsx(yq,{})}),o.jsx($t,{path:"orders",element:o.jsx(xq,{})}),o.jsx($t,{path:"videos",element:o.jsx(Eq,{})}),o.jsx($t,{path:"files",element:o.jsx(bq,{})}),o.jsx($t,{path:"quizzes",element:o.jsx(Nq,{})}),o.jsx($t,{path:"flashcards",element:o.jsx(kq,{})}),o.jsx($t,{path:"research",element:o.jsx(Vq,{})}),o.jsx($t,{path:"maps",element:o.jsx(Dq,{})}),o.jsx($t,{path:"notifications",element:o.jsx($q,{})}),o.jsx($t,{path:"settings",element:o.jsx(Rq,{})})]}),o.jsx($t,{path:"/",element:o.jsx(Kf,{to:"/admin"})}),o.jsx($t,{path:"*",element:o.jsx(zq,{})})]})})})]})})}),iv=document.getElementById("root");if(!iv)document.body.innerHTML="<div style='padding:20px;font-family:system-ui;'>Error: root element not found.</div>";else try{if(window.__appRoot)window.__appRoot.render(o.jsx($1,{}));else{const t=zO.createRoot(iv);window.__appRoot=t,t.render(o.jsx($1,{}))}}catch(t){const e=t instanceof Error?t.message:String(t);iv.innerHTML="<div style='padding:20px;font-family:system-ui;max-width:600px;'><h2>App failed to load</h2><p style='color:#666'>"+e.replace(/</g,"&lt;")+"</p><p style='margin-top:12px'><button onclick='location.reload()'>Reload</button></p></div>",console.error("App bootstrap error:",t)}
