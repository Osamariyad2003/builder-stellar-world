var lP=Object.defineProperty;var Y0=n=>{throw TypeError(n)};var cP=(n,e,t)=>e in n?lP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var X0=(n,e,t)=>cP(n,typeof e!="symbol"?e+"":e,t),vg=(n,e,t)=>e.has(n)||Y0("Cannot "+t);var de=(n,e,t)=>(vg(n,e,"read from private field"),t?t.call(n):e.get(n)),wt=(n,e,t)=>e.has(n)?Y0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),st=(n,e,t,r)=>(vg(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Mn=(n,e,t)=>(vg(n,e,"access private method"),t);var Oh=(n,e,t,r)=>({set _(s){st(n,e,s,t)},get _(){return de(n,e,r)}});function uP(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function i1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yg={exports:{}},fu={},xg={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function dP(){if(J0)return lt;J0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function y(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function x(U,Y,le){this.props=U,this.context=Y,this.refs=E,this.updater=le||b}x.prototype.isReactComponent={},x.prototype.setState=function(U,Y){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Y,"setState")},x.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function A(){}A.prototype=x.prototype;function I(U,Y,le){this.props=U,this.context=Y,this.refs=E,this.updater=le||b}var C=I.prototype=new A;C.constructor=I,S(C,x.prototype),C.isPureReactComponent=!0;var L=Array.isArray,V=Object.prototype.hasOwnProperty,q={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function R(U,Y,le){var Ee,ve={},ce=null,me=null;if(Y!=null)for(Ee in Y.ref!==void 0&&(me=Y.ref),Y.key!==void 0&&(ce=""+Y.key),Y)V.call(Y,Ee)&&!P.hasOwnProperty(Ee)&&(ve[Ee]=Y[Ee]);var Te=arguments.length-2;if(Te===1)ve.children=le;else if(1<Te){for(var ke=Array(Te),Ce=0;Ce<Te;Ce++)ke[Ce]=arguments[Ce+2];ve.children=ke}if(U&&U.defaultProps)for(Ee in Te=U.defaultProps,Te)ve[Ee]===void 0&&(ve[Ee]=Te[Ee]);return{$$typeof:n,type:U,key:ce,ref:me,props:ve,_owner:q.current}}function D(U,Y){return{$$typeof:n,type:U.type,key:Y,ref:U.ref,props:U.props,_owner:U._owner}}function k(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function $(U){var Y={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(le){return Y[le]})}var z=/\/+/g;function M(U,Y){return typeof U=="object"&&U!==null&&U.key!=null?$(""+U.key):Y.toString(36)}function oe(U,Y,le,Ee,ve){var ce=typeof U;(ce==="undefined"||ce==="boolean")&&(U=null);var me=!1;if(U===null)me=!0;else switch(ce){case"string":case"number":me=!0;break;case"object":switch(U.$$typeof){case n:case e:me=!0}}if(me)return me=U,ve=ve(me),U=Ee===""?"."+M(me,0):Ee,L(ve)?(le="",U!=null&&(le=U.replace(z,"$&/")+"/"),oe(ve,Y,le,"",function(Ce){return Ce})):ve!=null&&(k(ve)&&(ve=D(ve,le+(!ve.key||me&&me.key===ve.key?"":(""+ve.key).replace(z,"$&/")+"/")+U)),Y.push(ve)),1;if(me=0,Ee=Ee===""?".":Ee+":",L(U))for(var Te=0;Te<U.length;Te++){ce=U[Te];var ke=Ee+M(ce,Te);me+=oe(ce,Y,le,ke,ve)}else if(ke=y(U),typeof ke=="function")for(U=ke.call(U),Te=0;!(ce=U.next()).done;)ce=ce.value,ke=Ee+M(ce,Te++),me+=oe(ce,Y,le,ke,ve);else if(ce==="object")throw Y=String(U),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return me}function K(U,Y,le){if(U==null)return U;var Ee=[],ve=0;return oe(U,Ee,"","",function(ce){return Y.call(le,ce,ve++)}),Ee}function Z(U){if(U._status===-1){var Y=U._result;Y=Y(),Y.then(function(le){(U._status===0||U._status===-1)&&(U._status=1,U._result=le)},function(le){(U._status===0||U._status===-1)&&(U._status=2,U._result=le)}),U._status===-1&&(U._status=0,U._result=Y)}if(U._status===1)return U._result.default;throw U._result}var X={current:null},B={transition:null},Q={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:B,ReactCurrentOwner:q};function ee(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:K,forEach:function(U,Y,le){K(U,function(){Y.apply(this,arguments)},le)},count:function(U){var Y=0;return K(U,function(){Y++}),Y},toArray:function(U){return K(U,function(Y){return Y})||[]},only:function(U){if(!k(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},lt.Component=x,lt.Fragment=t,lt.Profiler=s,lt.PureComponent=I,lt.StrictMode=r,lt.Suspense=h,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,lt.act=ee,lt.cloneElement=function(U,Y,le){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Ee=S({},U.props),ve=U.key,ce=U.ref,me=U._owner;if(Y!=null){if(Y.ref!==void 0&&(ce=Y.ref,me=q.current),Y.key!==void 0&&(ve=""+Y.key),U.type&&U.type.defaultProps)var Te=U.type.defaultProps;for(ke in Y)V.call(Y,ke)&&!P.hasOwnProperty(ke)&&(Ee[ke]=Y[ke]===void 0&&Te!==void 0?Te[ke]:Y[ke])}var ke=arguments.length-2;if(ke===1)Ee.children=le;else if(1<ke){Te=Array(ke);for(var Ce=0;Ce<ke;Ce++)Te[Ce]=arguments[Ce+2];Ee.children=Te}return{$$typeof:n,type:U.type,key:ve,ref:ce,props:Ee,_owner:me}},lt.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},lt.createElement=R,lt.createFactory=function(U){var Y=R.bind(null,U);return Y.type=U,Y},lt.createRef=function(){return{current:null}},lt.forwardRef=function(U){return{$$typeof:u,render:U}},lt.isValidElement=k,lt.lazy=function(U){return{$$typeof:g,_payload:{_status:-1,_result:U},_init:Z}},lt.memo=function(U,Y){return{$$typeof:m,type:U,compare:Y===void 0?null:Y}},lt.startTransition=function(U){var Y=B.transition;B.transition={};try{U()}finally{B.transition=Y}},lt.unstable_act=ee,lt.useCallback=function(U,Y){return X.current.useCallback(U,Y)},lt.useContext=function(U){return X.current.useContext(U)},lt.useDebugValue=function(){},lt.useDeferredValue=function(U){return X.current.useDeferredValue(U)},lt.useEffect=function(U,Y){return X.current.useEffect(U,Y)},lt.useId=function(){return X.current.useId()},lt.useImperativeHandle=function(U,Y,le){return X.current.useImperativeHandle(U,Y,le)},lt.useInsertionEffect=function(U,Y){return X.current.useInsertionEffect(U,Y)},lt.useLayoutEffect=function(U,Y){return X.current.useLayoutEffect(U,Y)},lt.useMemo=function(U,Y){return X.current.useMemo(U,Y)},lt.useReducer=function(U,Y,le){return X.current.useReducer(U,Y,le)},lt.useRef=function(U){return X.current.useRef(U)},lt.useState=function(U){return X.current.useState(U)},lt.useSyncExternalStore=function(U,Y,le){return X.current.useSyncExternalStore(U,Y,le)},lt.useTransition=function(){return X.current.useTransition()},lt.version="18.3.1",lt}var Z0;function ly(){return Z0||(Z0=1,xg.exports=dP()),xg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function hP(){if(e_)return fu;e_=1;var n=ly(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,m){var g,v={},y=null,b=null;m!==void 0&&(y=""+m),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(b=h.ref);for(g in h)r.call(h,g)&&!a.hasOwnProperty(g)&&(v[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)v[g]===void 0&&(v[g]=h[g]);return{$$typeof:e,type:u,key:y,ref:b,props:v,_owner:s.current}}return fu.Fragment=t,fu.jsx=c,fu.jsxs=c,fu}var t_;function fP(){return t_||(t_=1,yg.exports=hP()),yg.exports}var l=fP();let yf=!1,mP=[],bu=0;const n_=3,pc=n=>{yf!==n&&(yf=n,console.log(`ðŸ”„ Firebase mode changed: ${n?"OFFLINE":"ONLINE"}`),mP.forEach(e=>e()))},r_=n=>{bu++,console.log(`ðŸš¨ Firebase error ${bu}/${n_}:`,n.message),bu>=n_&&(console.log("ðŸ”„ Too many Firebase errors - switching to global offline mode"),pc(!0))};if(!window.fetch.__firebasePatched){const n=window.fetch,e=(...t)=>{var a;const r=typeof t[0]=="string"?t[0]:(a=t[0])==null?void 0:a.url;if(!(!!r&&(r.includes("firestore.googleapis.com")||r.includes("firebase.googleapis.com")||r.includes("identitytoolkit.googleapis.com"))))try{return n(...t)}catch(c){return Promise.reject(c)}if(yf){const c=new Error("Firebase offline mode - request blocked");return c.isFirebaseOfflineError=!0,Promise.reject(c)}try{const c=n(...t);return Promise.resolve(c).then(u=>(u.ok&&(bu=0,yf&&(console.log("ðŸŸ¢ Firebase connection restored"),pc(!1))),u)).catch(u=>{console.log("ðŸ”´ Firebase request failed:",(u==null?void 0:u.message)||String(u));const h=String(u&&(u.stack||"")||""),m=String((u==null?void 0:u.message)||u||"").toLowerCase();throw!(h.includes("chrome-extension://")||h.includes("extension://")||m.includes("extension"))&&navigator.onLine&&r_(u),u})}catch(c){console.log("ðŸ”´ Firebase request threw synchronously:",(c==null?void 0:c.message)||String(c));const u=String(c&&(c.stack||"")||""),h=String((c==null?void 0:c.message)||c||"").toLowerCase();return!(u.includes("chrome-extension://")||u.includes("extension://")||h.includes("extension"))&&navigator.onLine&&r_(c),Promise.reject(c)}};e.__firebasePatched=!0,window.fetch=e}console.log("ðŸ”„ Initializing Firebase monitoring...");navigator.onLine||(console.log("ðŸš« No internet connection - starting in offline mode"),pc(!0));window.addEventListener("online",()=>{console.log("ðŸŸ¢ Internet connection restored"),bu=0,pc(!1)});window.addEventListener("offline",()=>{console.log("ðŸ”´ Internet connection lost"),pc(!0)});console.log("ðŸ”„ Starting Firebase monitoring in ONLINE mode");window.addEventListener("unhandledrejection",n=>{var r;const e=String(((r=n==null?void 0:n.reason)==null?void 0:r.message)||(n==null?void 0:n.reason)||""),t=String((n==null?void 0:n.reason)&&(n.reason.stack||"")||"");if((e.includes("Failed to fetch")||e.toLowerCase().includes("extension"))&&(t.includes("chrome-extension://")||t.includes("extension://")||t.includes("fullstory.com"))){n.preventDefault();return}if(t.includes("chrome-extension://")||t.includes("extension://")){n.preventDefault();return}});const pP=console.error,gP=console.warn,vP=console.log;console.error=(...n)=>{const e=n.map(s=>s&&typeof s=="object"?String(s):s).join(" "),t=n.some(s=>s&&typeof s=="object"&&s.stack&&s.stack.includes("chrome-extension://"));["Firebase offline mode - request blocked","FirebaseError: [code=unavailable]","Could not reach Cloud Firestore backend","Connection failed","The operation could not be completed","device does not have a healthy Internet connection","client will operate in offline mode","Most recent error: FirebaseError","@firebase/firestore: Firestore","fullstory.com","TypeError: Failed to fetch"].some(s=>e.includes(s))||t||e.includes("chrome-extension://")||e.includes("extension://")||pP.apply(console,n)};console.warn=(...n)=>{const e=n.join(" ");e.includes("Firebase")&&e.includes("offline")||gP.apply(console,n)};console.log=(...n)=>{const e=n.join(" ");e.includes("@firebase/firestore")&&e.includes("offline")||vP.apply(console,n)};setTimeout(()=>{navigator.onLine?console.log("ðŸŒ Internet available - Firebase enabled and ready"):(console.log("ðŸš« No internet connection detected - switching to offline mode"),pc(!0))},100);var _=ly();const Ne=i1(_),o1=uP({__proto__:null,default:Ne},[_]),yP=1,xP=1e6;let wg=0;function wP(){return wg=(wg+1)%Number.MAX_SAFE_INTEGER,wg.toString()}const _g=new Map,s_=n=>{if(_g.has(n))return;const e=setTimeout(()=>{_g.delete(n),Su({type:"REMOVE_TOAST",toastId:n})},xP);_g.set(n,e)},_P=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,yP)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?s_(t):n.toasts.forEach(r=>{s_(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},rf=[];let sf={toasts:[]};function Su(n){sf=_P(sf,n),rf.forEach(e=>{e(sf)})}function EP({...n}){const e=wP(),t=s=>Su({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Su({type:"DISMISS_TOAST",toastId:e});return Su({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function bP(){const[n,e]=_.useState(sf);return _.useEffect(()=>(rf.push(e),()=>{const t=rf.indexOf(e);t>-1&&rf.splice(t,1)}),[n]),{...n,toast:EP,dismiss:t=>Su({type:"DISMISS_TOAST",toastId:t})}}var Eg={exports:{}},lr={},bg={exports:{}},Sg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function SP(){return i_||(i_=1,function(n){function e(B,Q){var ee=B.length;B.push(Q);e:for(;0<ee;){var U=ee-1>>>1,Y=B[U];if(0<s(Y,Q))B[U]=Q,B[ee]=Y,ee=U;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],ee=B.pop();if(ee!==Q){B[0]=ee;e:for(var U=0,Y=B.length,le=Y>>>1;U<le;){var Ee=2*(U+1)-1,ve=B[Ee],ce=Ee+1,me=B[ce];if(0>s(ve,ee))ce<Y&&0>s(me,ve)?(B[U]=me,B[ce]=ee,U=ce):(B[U]=ve,B[Ee]=ee,U=Ee);else if(ce<Y&&0>s(me,ee))B[U]=me,B[ce]=ee,U=ce;else break e}}return Q}function s(B,Q){var ee=B.sortIndex-Q.sortIndex;return ee!==0?ee:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var h=[],m=[],g=1,v=null,y=3,b=!1,S=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(B){for(var Q=t(m);Q!==null;){if(Q.callback===null)r(m);else if(Q.startTime<=B)r(m),Q.sortIndex=Q.expirationTime,e(h,Q);else break;Q=t(m)}}function L(B){if(E=!1,C(B),!S)if(t(h)!==null)S=!0,Z(V);else{var Q=t(m);Q!==null&&X(L,Q.startTime-B)}}function V(B,Q){S=!1,E&&(E=!1,A(R),R=-1),b=!0;var ee=y;try{for(C(Q),v=t(h);v!==null&&(!(v.expirationTime>Q)||B&&!$());){var U=v.callback;if(typeof U=="function"){v.callback=null,y=v.priorityLevel;var Y=U(v.expirationTime<=Q);Q=n.unstable_now(),typeof Y=="function"?v.callback=Y:v===t(h)&&r(h),C(Q)}else r(h);v=t(h)}if(v!==null)var le=!0;else{var Ee=t(m);Ee!==null&&X(L,Ee.startTime-Q),le=!1}return le}finally{v=null,y=ee,b=!1}}var q=!1,P=null,R=-1,D=5,k=-1;function $(){return!(n.unstable_now()-k<D)}function z(){if(P!==null){var B=n.unstable_now();k=B;var Q=!0;try{Q=P(!0,B)}finally{Q?M():(q=!1,P=null)}}else q=!1}var M;if(typeof I=="function")M=function(){I(z)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,K=oe.port2;oe.port1.onmessage=z,M=function(){K.postMessage(null)}}else M=function(){x(z,0)};function Z(B){P=B,q||(q=!0,M())}function X(B,Q){R=x(function(){B(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,Z(V))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(B){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var ee=y;y=Q;try{return B()}finally{y=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ee=y;y=B;try{return Q()}finally{y=ee}},n.unstable_scheduleCallback=function(B,Q,ee){var U=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?U+ee:U):ee=U,B){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ee+Y,B={id:g++,callback:Q,priorityLevel:B,startTime:ee,expirationTime:Y,sortIndex:-1},ee>U?(B.sortIndex=ee,e(m,B),t(h)===null&&B===t(m)&&(E?(A(R),R=-1):E=!0,X(L,ee-U))):(B.sortIndex=Y,e(h,B),S||b||(S=!0,Z(V))),B},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(B){var Q=y;return function(){var ee=y;y=Q;try{return B.apply(this,arguments)}finally{y=ee}}}}(Sg)),Sg}var o_;function NP(){return o_||(o_=1,bg.exports=SP()),bg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function TP(){if(a_)return lr;a_=1;var n=ly(),e=NP();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function y(i){return h.call(v,i)?!0:h.call(g,i)?!1:m.test(i)?v[i]=!0:(g[i]=!0,!1)}function b(i,o,d,p){if(d!==null&&d.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function S(i,o,d,p){if(o===null||typeof o>"u"||b(i,o,d,p))return!0;if(p)return!1;if(d!==null)switch(d.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function E(i,o,d,p,w,T,O){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=w,this.mustUseProperty=d,this.propertyName=i,this.type=o,this.sanitizeURL=T,this.removeEmptyString=O}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){x[i]=new E(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];x[o]=new E(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){x[i]=new E(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){x[i]=new E(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){x[i]=new E(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){x[i]=new E(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){x[i]=new E(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){x[i]=new E(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){x[i]=new E(i,5,!1,i.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function I(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(A,I);x[o]=new E(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(A,I);x[o]=new E(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(A,I);x[o]=new E(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){x[i]=new E(i,1,!1,i.toLowerCase(),null,!1,!1)}),x.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){x[i]=new E(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,o,d,p){var w=x.hasOwnProperty(o)?x[o]:null;(w!==null?w.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,d,w,p)&&(d=null),p||w===null?y(o)&&(d===null?i.removeAttribute(o):i.setAttribute(o,""+d)):w.mustUseProperty?i[w.propertyName]=d===null?w.type===3?!1:"":d:(o=w.attributeName,p=w.attributeNamespace,d===null?i.removeAttribute(o):(w=w.type,d=w===3||w===4&&d===!0?"":""+d,p?i.setAttributeNS(p,o,d):i.setAttribute(o,d))))}var L=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),q=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),$=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),B=Symbol.iterator;function Q(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var ee=Object.assign,U;function Y(i){if(U===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+i}var le=!1;function Ee(i,o){if(!i||le)return"";le=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(ie){var p=ie}Reflect.construct(i,[],o)}else{try{o.call()}catch(ie){p=ie}i.call(o.prototype)}else{try{throw Error()}catch(ie){p=ie}i()}}catch(ie){if(ie&&p&&typeof ie.stack=="string"){for(var w=ie.stack.split(`
`),T=p.stack.split(`
`),O=w.length-1,W=T.length-1;1<=O&&0<=W&&w[O]!==T[W];)W--;for(;1<=O&&0<=W;O--,W--)if(w[O]!==T[W]){if(O!==1||W!==1)do if(O--,W--,0>W||w[O]!==T[W]){var H=`
`+w[O].replace(" at new "," at ");return i.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",i.displayName)),H}while(1<=O&&0<=W);break}}}finally{le=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?Y(i):""}function ve(i){switch(i.tag){case 5:return Y(i.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return i=Ee(i.type,!1),i;case 11:return i=Ee(i.type.render,!1),i;case 1:return i=Ee(i.type,!0),i;default:return""}}function ce(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case q:return"Portal";case D:return"Profiler";case R:return"StrictMode";case M:return"Suspense";case oe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case $:return(i.displayName||"Context")+".Consumer";case k:return(i._context.displayName||"Context")+".Provider";case z:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case K:return o=i.displayName||null,o!==null?o:ce(i.type)||"Memo";case Z:o=i._payload,i=i._init;try{return ce(i(o))}catch{}}return null}function me(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Te(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ke(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ce(i){var o=ke(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var w=d.get,T=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return w.call(this)},set:function(O){p=""+O,T.call(this,O)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(O){p=""+O},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Me(i){i._valueTracker||(i._valueTracker=Ce(i))}function Ke(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var d=o.getValue(),p="";return i&&(p=ke(i)?i.checked?"true":"false":i.value),i=p,i!==d?(o.setValue(i),!0):!1}function yt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function bt(i,o){var d=o.checked;return ee({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function rn(i,o){var d=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;d=Te(o.value!=null?o.value:d),i._wrapperState={initialChecked:p,initialValue:d,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ot(i,o){o=o.checked,o!=null&&C(i,"checked",o,!1)}function At(i,o){Ot(i,o);var d=Te(o.value),p=o.type;if(d!=null)p==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?ft(i,o.type,d):o.hasOwnProperty("defaultValue")&&ft(i,o.type,Te(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function _t(i,o,d){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,d||o===i.value||(i.value=o),i.defaultValue=o}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function ft(i,o,d){(o!=="number"||yt(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var Pt=Array.isArray;function fr(i,o,d,p){if(i=i.options,o){o={};for(var w=0;w<d.length;w++)o["$"+d[w]]=!0;for(d=0;d<i.length;d++)w=o.hasOwnProperty("$"+i[d].value),i[d].selected!==w&&(i[d].selected=w),w&&p&&(i[d].defaultSelected=!0)}else{for(d=""+Te(d),o=null,w=0;w<i.length;w++){if(i[w].value===d){i[w].selected=!0,p&&(i[w].defaultSelected=!0);return}o!==null||i[w].disabled||(o=i[w])}o!==null&&(o.selected=!0)}}function Xs(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function qn(i,o){var d=o.value;if(d==null){if(d=o.children,o=o.defaultValue,d!=null){if(o!=null)throw Error(t(92));if(Pt(d)){if(1<d.length)throw Error(t(93));d=d[0]}o=d}o==null&&(o=""),d=o}i._wrapperState={initialValue:Te(d)}}function Ir(i,o){var d=Te(o.value),p=Te(o.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),o.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),p!=null&&(i.defaultValue=""+p)}function Wn(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Lt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Lt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Jn,Zn=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,d,p,w){MSApp.execUnsafeLocalFunction(function(){return i(o,d,p,w)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Jn=Jn||document.createElement("div"),Jn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Jn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function mr(i,o){if(o){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=o;return}}i.textContent=o}var Br={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jr=["Webkit","ms","Moz","O"];Object.keys(Br).forEach(function(i){jr.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Br[o]=Br[i]})});function qr(i,o,d){return o==null||typeof o=="boolean"||o===""?"":d||typeof o!="number"||o===0||Br.hasOwnProperty(i)&&Br[i]?(""+o).trim():o+"px"}function Js(i,o){i=i.style;for(var d in o)if(o.hasOwnProperty(d)){var p=d.indexOf("--")===0,w=qr(d,o[d],p);d==="float"&&(d="cssFloat"),p?i.setProperty(d,w):i[d]=w}}var Wr=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rn(i,o){if(o){if(Wr[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Zs(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var J=null;function ye(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var be=null,Qe=null,Ue=null;function ct(i){if(i=Jc(i)){if(typeof be!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Yd(o),be(i.stateNode,i.type,o))}}function je(i){Qe?Ue?Ue.push(i):Ue=[i]:Qe=i}function ki(){if(Qe){var i=Qe,o=Ue;if(Ue=Qe=null,ct(i),o)for(i=0;i<o.length;i++)ct(o[i])}}function ys(i,o){return i(o)}function Di(){}var Ar=!1;function Oi(i,o,d){if(Ar)return i(o,d);Ar=!0;try{return ys(i,o,d)}finally{Ar=!1,(Qe!==null||Ue!==null)&&(Di(),ki())}}function zt(i,o){var d=i.stateNode;if(d===null)return null;var p=Yd(d);if(p===null)return null;d=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(t(231,o,typeof d));return d}var ei=!1;if(u)try{var er={};Object.defineProperty(er,"passive",{get:function(){ei=!0}}),window.addEventListener("test",er,er),window.removeEventListener("test",er,er)}catch{ei=!1}function xs(i,o,d,p,w,T,O,W,H){var ie=Array.prototype.slice.call(arguments,3);try{o.apply(d,ie)}catch(pe){this.onError(pe)}}var Ht=!1,Ga=null,Hr=!1,Rc=null,Wm={onError:function(i){Ht=!0,Ga=i}};function Qa(i,o,d,p,w,T,O,W,H){Ht=!1,Ga=null,xs.apply(Wm,arguments)}function _d(i,o,d,p,w,T,O,W,H){if(Qa.apply(this,arguments),Ht){if(Ht){var ie=Ga;Ht=!1,Ga=null}else throw Error(t(198));Hr||(Hr=!0,Rc=ie)}}function Kr(i){var o=i,d=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(d=o.return),i=o.return;while(i)}return o.tag===3?d:null}function Xo(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Gr(i){if(Kr(i)!==i)throw Error(t(188))}function Ed(i){var o=i.alternate;if(!o){if(o=Kr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var d=i,p=o;;){var w=d.return;if(w===null)break;var T=w.alternate;if(T===null){if(p=w.return,p!==null){d=p;continue}break}if(w.child===T.child){for(T=w.child;T;){if(T===d)return Gr(w),i;if(T===p)return Gr(w),o;T=T.sibling}throw Error(t(188))}if(d.return!==p.return)d=w,p=T;else{for(var O=!1,W=w.child;W;){if(W===d){O=!0,d=w,p=T;break}if(W===p){O=!0,p=w,d=T;break}W=W.sibling}if(!O){for(W=T.child;W;){if(W===d){O=!0,d=T,p=w;break}if(W===p){O=!0,p=T,d=w;break}W=W.sibling}if(!O)throw Error(t(189))}}if(d.alternate!==p)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?i:o}function kc(i){return i=Ed(i),i!==null?Ya(i):null}function Ya(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Ya(i);if(o!==null)return o;i=i.sibling}return null}var Xa=e.unstable_scheduleCallback,Dc=e.unstable_cancelCallback,bd=e.unstable_shouldYield,Hm=e.unstable_requestPaint,Rt=e.unstable_now,Sd=e.unstable_getCurrentPriorityLevel,Jo=e.unstable_ImmediatePriority,Li=e.unstable_UserBlockingPriority,Pr=e.unstable_NormalPriority,Oc=e.unstable_LowPriority,Nd=e.unstable_IdlePriority,Zo=null,pr=null;function Td(i){if(pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(Zo,i,void 0,(i.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:Id,Lc=Math.log,Cd=Math.LN2;function Id(i){return i>>>=0,i===0?32:31-(Lc(i)/Cd|0)|0}var Ja=64,Za=4194304;function Mi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ea(i,o){var d=i.pendingLanes;if(d===0)return 0;var p=0,w=i.suspendedLanes,T=i.pingedLanes,O=d&268435455;if(O!==0){var W=O&~w;W!==0?p=Mi(W):(T&=O,T!==0&&(p=Mi(T)))}else O=d&~w,O!==0?p=Mi(O):T!==0&&(p=Mi(T));if(p===0)return 0;if(o!==0&&o!==p&&(o&w)===0&&(w=p&-p,T=o&-o,w>=T||w===16&&(T&4194240)!==0))return o;if((p&4)!==0&&(p|=d&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)d=31-Hn(o),w=1<<d,p|=i[d],o&=~w;return p}function Km(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ti(i,o){for(var d=i.suspendedLanes,p=i.pingedLanes,w=i.expirationTimes,T=i.pendingLanes;0<T;){var O=31-Hn(T),W=1<<O,H=w[O];H===-1?((W&d)===0||(W&p)!==0)&&(w[O]=Km(W,o)):H<=o&&(i.expiredLanes|=W),T&=~W}}function gr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ta(){var i=Ja;return Ja<<=1,(Ja&4194240)===0&&(Ja=64),i}function Fi(i){for(var o=[],d=0;31>d;d++)o.push(i);return o}function Vi(i,o,d){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Hn(o),i[o]=d}function It(i,o){var d=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<d;){var w=31-Hn(d),T=1<<w;o[w]=0,p[w]=-1,i[w]=-1,d&=~T}}function Ui(i,o){var d=i.entangledLanes|=o;for(i=i.entanglements;d;){var p=31-Hn(d),w=1<<p;w&o|i[p]&o&&(i[p]|=o),d&=~w}}var ht=0;function $i(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var jd,el,Ad,Pd,Rd,Mc=!1,ws=[],Sn=null,Qr=null,Yr=null,zi=new Map,Rr=new Map,_s=[],Gm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kd(i,o){switch(i){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":zi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rr.delete(o.pointerId)}}function tr(i,o,d,p,w,T){return i===null||i.nativeEvent!==T?(i={blockedOn:o,domEventName:d,eventSystemFlags:p,nativeEvent:T,targetContainers:[w]},o!==null&&(o=Jc(o),o!==null&&el(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,w!==null&&o.indexOf(w)===-1&&o.push(w),i)}function Qm(i,o,d,p,w){switch(o){case"focusin":return Sn=tr(Sn,i,o,d,p,w),!0;case"dragenter":return Qr=tr(Qr,i,o,d,p,w),!0;case"mouseover":return Yr=tr(Yr,i,o,d,p,w),!0;case"pointerover":var T=w.pointerId;return zi.set(T,tr(zi.get(T)||null,i,o,d,p,w)),!0;case"gotpointercapture":return T=w.pointerId,Rr.set(T,tr(Rr.get(T)||null,i,o,d,p,w)),!0}return!1}function Dd(i){var o=oa(i.target);if(o!==null){var d=Kr(o);if(d!==null){if(o=d.tag,o===13){if(o=Xo(d),o!==null){i.blockedOn=o,Rd(i.priority,function(){Ad(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ni(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var d=tl(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var p=new d.constructor(d.type,d);J=p,d.target.dispatchEvent(p),J=null}else return o=Jc(d),o!==null&&el(o),i.blockedOn=d,!1;o.shift()}return!0}function na(i,o,d){ni(i)&&d.delete(o)}function Od(){Mc=!1,Sn!==null&&ni(Sn)&&(Sn=null),Qr!==null&&ni(Qr)&&(Qr=null),Yr!==null&&ni(Yr)&&(Yr=null),zi.forEach(na),Rr.forEach(na)}function Xr(i,o){i.blockedOn===o&&(i.blockedOn=null,Mc||(Mc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Od)))}function Jr(i){function o(w){return Xr(w,i)}if(0<ws.length){Xr(ws[0],i);for(var d=1;d<ws.length;d++){var p=ws[d];p.blockedOn===i&&(p.blockedOn=null)}}for(Sn!==null&&Xr(Sn,i),Qr!==null&&Xr(Qr,i),Yr!==null&&Xr(Yr,i),zi.forEach(o),Rr.forEach(o),d=0;d<_s.length;d++)p=_s[d],p.blockedOn===i&&(p.blockedOn=null);for(;0<_s.length&&(d=_s[0],d.blockedOn===null);)Dd(d),d.blockedOn===null&&_s.shift()}var ri=L.ReactCurrentBatchConfig,Bi=!0;function Bt(i,o,d,p){var w=ht,T=ri.transition;ri.transition=null;try{ht=1,Fc(i,o,d,p)}finally{ht=w,ri.transition=T}}function Ym(i,o,d,p){var w=ht,T=ri.transition;ri.transition=null;try{ht=4,Fc(i,o,d,p)}finally{ht=w,ri.transition=T}}function Fc(i,o,d,p){if(Bi){var w=tl(i,o,d,p);if(w===null)ap(i,o,p,ra,d),kd(i,p);else if(Qm(w,i,o,d,p))p.stopPropagation();else if(kd(i,p),o&4&&-1<Gm.indexOf(i)){for(;w!==null;){var T=Jc(w);if(T!==null&&jd(T),T=tl(i,o,d,p),T===null&&ap(i,o,p,ra,d),T===w)break;w=T}w!==null&&p.stopPropagation()}else ap(i,o,p,null,d)}}var ra=null;function tl(i,o,d,p){if(ra=null,i=ye(p),i=oa(i),i!==null)if(o=Kr(i),o===null)i=null;else if(d=o.tag,d===13){if(i=Xo(o),i!==null)return i;i=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return ra=i,null}function Vc(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sd()){case Jo:return 1;case Li:return 4;case Pr:case Oc:return 16;case Nd:return 536870912;default:return 16}default:return 16}}var vr=null,nl=null,nr=null;function Uc(){if(nr)return nr;var i,o=nl,d=o.length,p,w="value"in vr?vr.value:vr.textContent,T=w.length;for(i=0;i<d&&o[i]===w[i];i++);var O=d-i;for(p=1;p<=O&&o[d-p]===w[T-p];p++);return nr=w.slice(i,1<p?1-p:void 0)}function rl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Es(){return!0}function $c(){return!1}function Nn(i){function o(d,p,w,T,O){this._reactName=d,this._targetInst=w,this.type=p,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var W in i)i.hasOwnProperty(W)&&(d=i[W],this[W]=d?d(T):T[W]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Es:$c,this.isPropagationStopped=$c,this}return ee(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Es)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Es)},persist:function(){},isPersistent:Es}),o}var Zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=Nn(Zr),bs=ee({},Zr,{view:0,detail:0}),Xm=Nn(bs),il,si,qi,sa=ee({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ss,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==qi&&(qi&&i.type==="mousemove"?(il=i.screenX-qi.screenX,si=i.screenY-qi.screenY):si=il=0,qi=i),il)},movementY:function(i){return"movementY"in i?i.movementY:si}}),ol=Nn(sa),zc=ee({},sa,{dataTransfer:0}),Ld=Nn(zc),al=ee({},bs,{relatedTarget:0}),ll=Nn(al),Md=ee({},Zr,{animationName:0,elapsedTime:0,pseudoElement:0}),ii=Nn(Md),Fd=ee({},Zr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Vd=Nn(Fd),Ud=ee({},Zr,{data:0}),Bc=Nn(Ud),cl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$d={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zd(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=$d[i])?!!o[i]:!1}function Ss(){return zd}var f=ee({},bs,{key:function(i){if(i.key){var o=cl[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=rl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Kn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ss,charCode:function(i){return i.type==="keypress"?rl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?rl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),N=Nn(f),j=ee({},sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F=Nn(j),te=ee({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ss}),ae=Nn(te),Se=ee({},Zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),St=Nn(Se),fn=ee({},sa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),mt=Nn(fn),yn=[9,13,27,32],sn=u&&"CompositionEvent"in window,kr=null;u&&"documentMode"in document&&(kr=document.documentMode);var yr=u&&"TextEvent"in window&&!kr,ia=u&&(!sn||kr&&8<kr&&11>=kr),ul=" ",qx=!1;function Wx(i,o){switch(i){case"keyup":return yn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var dl=!1;function iA(i,o){switch(i){case"compositionend":return Hx(o);case"keypress":return o.which!==32?null:(qx=!0,ul);case"textInput":return i=o.data,i===ul&&qx?null:i;default:return null}}function oA(i,o){if(dl)return i==="compositionend"||!sn&&Wx(i,o)?(i=Uc(),nr=nl=vr=null,dl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ia&&o.locale!=="ko"?null:o.data;default:return null}}var aA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kx(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!aA[i.type]:o==="textarea"}function Gx(i,o,d,p){je(p),o=Kd(o,"onChange"),0<o.length&&(d=new sl("onChange","change",null,d,p),i.push({event:d,listeners:o}))}var qc=null,Wc=null;function lA(i){hw(i,0)}function Bd(i){var o=gl(i);if(Ke(o))return i}function cA(i,o){if(i==="change")return o}var Qx=!1;if(u){var Jm;if(u){var Zm="oninput"in document;if(!Zm){var Yx=document.createElement("div");Yx.setAttribute("oninput","return;"),Zm=typeof Yx.oninput=="function"}Jm=Zm}else Jm=!1;Qx=Jm&&(!document.documentMode||9<document.documentMode)}function Xx(){qc&&(qc.detachEvent("onpropertychange",Jx),Wc=qc=null)}function Jx(i){if(i.propertyName==="value"&&Bd(Wc)){var o=[];Gx(o,Wc,i,ye(i)),Oi(lA,o)}}function uA(i,o,d){i==="focusin"?(Xx(),qc=o,Wc=d,qc.attachEvent("onpropertychange",Jx)):i==="focusout"&&Xx()}function dA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Bd(Wc)}function hA(i,o){if(i==="click")return Bd(o)}function fA(i,o){if(i==="input"||i==="change")return Bd(o)}function mA(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var es=typeof Object.is=="function"?Object.is:mA;function Hc(i,o){if(es(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var d=Object.keys(i),p=Object.keys(o);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var w=d[p];if(!h.call(o,w)||!es(i[w],o[w]))return!1}return!0}function Zx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ew(i,o){var d=Zx(i);i=0;for(var p;d;){if(d.nodeType===3){if(p=i+d.textContent.length,i<=o&&p>=o)return{node:d,offset:o-i};i=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Zx(d)}}function tw(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?tw(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function nw(){for(var i=window,o=yt();o instanceof i.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)i=o.contentWindow;else break;o=yt(i.document)}return o}function ep(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function pA(i){var o=nw(),d=i.focusedElem,p=i.selectionRange;if(o!==d&&d&&d.ownerDocument&&tw(d.ownerDocument.documentElement,d)){if(p!==null&&ep(d)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in d)d.selectionStart=o,d.selectionEnd=Math.min(i,d.value.length);else if(i=(o=d.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var w=d.textContent.length,T=Math.min(p.start,w);p=p.end===void 0?T:Math.min(p.end,w),!i.extend&&T>p&&(w=p,p=T,T=w),w=ew(d,T);var O=ew(d,p);w&&O&&(i.rangeCount!==1||i.anchorNode!==w.node||i.anchorOffset!==w.offset||i.focusNode!==O.node||i.focusOffset!==O.offset)&&(o=o.createRange(),o.setStart(w.node,w.offset),i.removeAllRanges(),T>p?(i.addRange(o),i.extend(O.node,O.offset)):(o.setEnd(O.node,O.offset),i.addRange(o)))}}for(o=[],i=d;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<o.length;d++)i=o[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var gA=u&&"documentMode"in document&&11>=document.documentMode,hl=null,tp=null,Kc=null,np=!1;function rw(i,o,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;np||hl==null||hl!==yt(p)||(p=hl,"selectionStart"in p&&ep(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Kc&&Hc(Kc,p)||(Kc=p,p=Kd(tp,"onSelect"),0<p.length&&(o=new sl("onSelect","select",null,o,d),i.push({event:o,listeners:p}),o.target=hl)))}function qd(i,o){var d={};return d[i.toLowerCase()]=o.toLowerCase(),d["Webkit"+i]="webkit"+o,d["Moz"+i]="moz"+o,d}var fl={animationend:qd("Animation","AnimationEnd"),animationiteration:qd("Animation","AnimationIteration"),animationstart:qd("Animation","AnimationStart"),transitionend:qd("Transition","TransitionEnd")},rp={},sw={};u&&(sw=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function Wd(i){if(rp[i])return rp[i];if(!fl[i])return i;var o=fl[i],d;for(d in o)if(o.hasOwnProperty(d)&&d in sw)return rp[i]=o[d];return i}var iw=Wd("animationend"),ow=Wd("animationiteration"),aw=Wd("animationstart"),lw=Wd("transitionend"),cw=new Map,uw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wi(i,o){cw.set(i,o),a(o,[i])}for(var sp=0;sp<uw.length;sp++){var ip=uw[sp],vA=ip.toLowerCase(),yA=ip[0].toUpperCase()+ip.slice(1);Wi(vA,"on"+yA)}Wi(iw,"onAnimationEnd"),Wi(ow,"onAnimationIteration"),Wi(aw,"onAnimationStart"),Wi("dblclick","onDoubleClick"),Wi("focusin","onFocus"),Wi("focusout","onBlur"),Wi(lw,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gc));function dw(i,o,d){var p=i.type||"unknown-event";i.currentTarget=d,_d(p,o,void 0,i),i.currentTarget=null}function hw(i,o){o=(o&4)!==0;for(var d=0;d<i.length;d++){var p=i[d],w=p.event;p=p.listeners;e:{var T=void 0;if(o)for(var O=p.length-1;0<=O;O--){var W=p[O],H=W.instance,ie=W.currentTarget;if(W=W.listener,H!==T&&w.isPropagationStopped())break e;dw(w,W,ie),T=H}else for(O=0;O<p.length;O++){if(W=p[O],H=W.instance,ie=W.currentTarget,W=W.listener,H!==T&&w.isPropagationStopped())break e;dw(w,W,ie),T=H}}}if(Hr)throw i=Rc,Hr=!1,Rc=null,i}function Mt(i,o){var d=o[fp];d===void 0&&(d=o[fp]=new Set);var p=i+"__bubble";d.has(p)||(fw(o,i,2,!1),d.add(p))}function op(i,o,d){var p=0;o&&(p|=4),fw(d,i,p,o)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function Qc(i){if(!i[Hd]){i[Hd]=!0,r.forEach(function(d){d!=="selectionchange"&&(xA.has(d)||op(d,!1,i),op(d,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Hd]||(o[Hd]=!0,op("selectionchange",!1,o))}}function fw(i,o,d,p){switch(Vc(o)){case 1:var w=Bt;break;case 4:w=Ym;break;default:w=Fc}d=w.bind(null,o,d,i),w=void 0,!ei||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(w=!0),p?w!==void 0?i.addEventListener(o,d,{capture:!0,passive:w}):i.addEventListener(o,d,!0):w!==void 0?i.addEventListener(o,d,{passive:w}):i.addEventListener(o,d,!1)}function ap(i,o,d,p,w){var T=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var O=p.tag;if(O===3||O===4){var W=p.stateNode.containerInfo;if(W===w||W.nodeType===8&&W.parentNode===w)break;if(O===4)for(O=p.return;O!==null;){var H=O.tag;if((H===3||H===4)&&(H=O.stateNode.containerInfo,H===w||H.nodeType===8&&H.parentNode===w))return;O=O.return}for(;W!==null;){if(O=oa(W),O===null)return;if(H=O.tag,H===5||H===6){p=T=O;continue e}W=W.parentNode}}p=p.return}Oi(function(){var ie=T,pe=ye(d),ge=[];e:{var fe=cw.get(i);if(fe!==void 0){var Ae=sl,Le=i;switch(i){case"keypress":if(rl(d)===0)break e;case"keydown":case"keyup":Ae=N;break;case"focusin":Le="focus",Ae=ll;break;case"focusout":Le="blur",Ae=ll;break;case"beforeblur":case"afterblur":Ae=ll;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=Ld;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=ae;break;case iw:case ow:case aw:Ae=ii;break;case lw:Ae=St;break;case"scroll":Ae=Xm;break;case"wheel":Ae=mt;break;case"copy":case"cut":case"paste":Ae=Vd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=F}var Fe=(o&4)!==0,tn=!Fe&&i==="scroll",ne=Fe?fe!==null?fe+"Capture":null:fe;Fe=[];for(var G=ie,re;G!==null;){re=G;var xe=re.stateNode;if(re.tag===5&&xe!==null&&(re=xe,ne!==null&&(xe=zt(G,ne),xe!=null&&Fe.push(Yc(G,xe,re)))),tn)break;G=G.return}0<Fe.length&&(fe=new Ae(fe,Le,null,d,pe),ge.push({event:fe,listeners:Fe}))}}if((o&7)===0){e:{if(fe=i==="mouseover"||i==="pointerover",Ae=i==="mouseout"||i==="pointerout",fe&&d!==J&&(Le=d.relatedTarget||d.fromElement)&&(oa(Le)||Le[oi]))break e;if((Ae||fe)&&(fe=pe.window===pe?pe:(fe=pe.ownerDocument)?fe.defaultView||fe.parentWindow:window,Ae?(Le=d.relatedTarget||d.toElement,Ae=ie,Le=Le?oa(Le):null,Le!==null&&(tn=Kr(Le),Le!==tn||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(Ae=null,Le=ie),Ae!==Le)){if(Fe=ol,xe="onMouseLeave",ne="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(Fe=F,xe="onPointerLeave",ne="onPointerEnter",G="pointer"),tn=Ae==null?fe:gl(Ae),re=Le==null?fe:gl(Le),fe=new Fe(xe,G+"leave",Ae,d,pe),fe.target=tn,fe.relatedTarget=re,xe=null,oa(pe)===ie&&(Fe=new Fe(ne,G+"enter",Le,d,pe),Fe.target=re,Fe.relatedTarget=tn,xe=Fe),tn=xe,Ae&&Le)t:{for(Fe=Ae,ne=Le,G=0,re=Fe;re;re=ml(re))G++;for(re=0,xe=ne;xe;xe=ml(xe))re++;for(;0<G-re;)Fe=ml(Fe),G--;for(;0<re-G;)ne=ml(ne),re--;for(;G--;){if(Fe===ne||ne!==null&&Fe===ne.alternate)break t;Fe=ml(Fe),ne=ml(ne)}Fe=null}else Fe=null;Ae!==null&&mw(ge,fe,Ae,Fe,!1),Le!==null&&tn!==null&&mw(ge,tn,Le,Fe,!0)}}e:{if(fe=ie?gl(ie):window,Ae=fe.nodeName&&fe.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&fe.type==="file")var Ve=cA;else if(Kx(fe))if(Qx)Ve=fA;else{Ve=dA;var qe=uA}else(Ae=fe.nodeName)&&Ae.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Ve=hA);if(Ve&&(Ve=Ve(i,ie))){Gx(ge,Ve,d,pe);break e}qe&&qe(i,fe,ie),i==="focusout"&&(qe=fe._wrapperState)&&qe.controlled&&fe.type==="number"&&ft(fe,"number",fe.value)}switch(qe=ie?gl(ie):window,i){case"focusin":(Kx(qe)||qe.contentEditable==="true")&&(hl=qe,tp=ie,Kc=null);break;case"focusout":Kc=tp=hl=null;break;case"mousedown":np=!0;break;case"contextmenu":case"mouseup":case"dragend":np=!1,rw(ge,d,pe);break;case"selectionchange":if(gA)break;case"keydown":case"keyup":rw(ge,d,pe)}var We;if(sn)e:{switch(i){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else dl?Wx(i,d)&&(et="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(et="onCompositionStart");et&&(ia&&d.locale!=="ko"&&(dl||et!=="onCompositionStart"?et==="onCompositionEnd"&&dl&&(We=Uc()):(vr=pe,nl="value"in vr?vr.value:vr.textContent,dl=!0)),qe=Kd(ie,et),0<qe.length&&(et=new Bc(et,i,null,d,pe),ge.push({event:et,listeners:qe}),We?et.data=We:(We=Hx(d),We!==null&&(et.data=We)))),(We=yr?iA(i,d):oA(i,d))&&(ie=Kd(ie,"onBeforeInput"),0<ie.length&&(pe=new Bc("onBeforeInput","beforeinput",null,d,pe),ge.push({event:pe,listeners:ie}),pe.data=We))}hw(ge,o)})}function Yc(i,o,d){return{instance:i,listener:o,currentTarget:d}}function Kd(i,o){for(var d=o+"Capture",p=[];i!==null;){var w=i,T=w.stateNode;w.tag===5&&T!==null&&(w=T,T=zt(i,d),T!=null&&p.unshift(Yc(i,T,w)),T=zt(i,o),T!=null&&p.push(Yc(i,T,w))),i=i.return}return p}function ml(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function mw(i,o,d,p,w){for(var T=o._reactName,O=[];d!==null&&d!==p;){var W=d,H=W.alternate,ie=W.stateNode;if(H!==null&&H===p)break;W.tag===5&&ie!==null&&(W=ie,w?(H=zt(d,T),H!=null&&O.unshift(Yc(d,H,W))):w||(H=zt(d,T),H!=null&&O.push(Yc(d,H,W)))),d=d.return}O.length!==0&&i.push({event:o,listeners:O})}var wA=/\r\n?/g,_A=/\u0000|\uFFFD/g;function pw(i){return(typeof i=="string"?i:""+i).replace(wA,`
`).replace(_A,"")}function Gd(i,o,d){if(o=pw(o),pw(i)!==o&&d)throw Error(t(425))}function Qd(){}var lp=null,cp=null;function up(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var dp=typeof setTimeout=="function"?setTimeout:void 0,EA=typeof clearTimeout=="function"?clearTimeout:void 0,gw=typeof Promise=="function"?Promise:void 0,bA=typeof queueMicrotask=="function"?queueMicrotask:typeof gw<"u"?function(i){return gw.resolve(null).then(i).catch(SA)}:dp;function SA(i){setTimeout(function(){throw i})}function hp(i,o){var d=o,p=0;do{var w=d.nextSibling;if(i.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(p===0){i.removeChild(w),Jr(o);return}p--}else d!=="$"&&d!=="$?"&&d!=="$!"||p++;d=w}while(d);Jr(o)}function Hi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function vw(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return i;o--}else d==="/$"&&o++}i=i.previousSibling}return null}var pl=Math.random().toString(36).slice(2),Ns="__reactFiber$"+pl,Xc="__reactProps$"+pl,oi="__reactContainer$"+pl,fp="__reactEvents$"+pl,NA="__reactListeners$"+pl,TA="__reactHandles$"+pl;function oa(i){var o=i[Ns];if(o)return o;for(var d=i.parentNode;d;){if(o=d[oi]||d[Ns]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(i=vw(i);i!==null;){if(d=i[Ns])return d;i=vw(i)}return o}i=d,d=i.parentNode}return null}function Jc(i){return i=i[Ns]||i[oi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function gl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Yd(i){return i[Xc]||null}var mp=[],vl=-1;function Ki(i){return{current:i}}function Ft(i){0>vl||(i.current=mp[vl],mp[vl]=null,vl--)}function kt(i,o){vl++,mp[vl]=i.current,i.current=o}var Gi={},kn=Ki(Gi),rr=Ki(!1),aa=Gi;function yl(i,o){var d=i.type.contextTypes;if(!d)return Gi;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var w={},T;for(T in d)w[T]=o[T];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=w),w}function sr(i){return i=i.childContextTypes,i!=null}function Xd(){Ft(rr),Ft(kn)}function yw(i,o,d){if(kn.current!==Gi)throw Error(t(168));kt(kn,o),kt(rr,d)}function xw(i,o,d){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return d;p=p.getChildContext();for(var w in p)if(!(w in o))throw Error(t(108,me(i)||"Unknown",w));return ee({},d,p)}function Jd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Gi,aa=kn.current,kt(kn,i),kt(rr,rr.current),!0}function ww(i,o,d){var p=i.stateNode;if(!p)throw Error(t(169));d?(i=xw(i,o,aa),p.__reactInternalMemoizedMergedChildContext=i,Ft(rr),Ft(kn),kt(kn,i)):Ft(rr),kt(rr,d)}var ai=null,Zd=!1,pp=!1;function _w(i){ai===null?ai=[i]:ai.push(i)}function CA(i){Zd=!0,_w(i)}function Qi(){if(!pp&&ai!==null){pp=!0;var i=0,o=ht;try{var d=ai;for(ht=1;i<d.length;i++){var p=d[i];do p=p(!0);while(p!==null)}ai=null,Zd=!1}catch(w){throw ai!==null&&(ai=ai.slice(i+1)),Xa(Jo,Qi),w}finally{ht=o,pp=!1}}return null}var xl=[],wl=0,eh=null,th=0,Dr=[],Or=0,la=null,li=1,ci="";function ca(i,o){xl[wl++]=th,xl[wl++]=eh,eh=i,th=o}function Ew(i,o,d){Dr[Or++]=li,Dr[Or++]=ci,Dr[Or++]=la,la=i;var p=li;i=ci;var w=32-Hn(p)-1;p&=~(1<<w),d+=1;var T=32-Hn(o)+w;if(30<T){var O=w-w%5;T=(p&(1<<O)-1).toString(32),p>>=O,w-=O,li=1<<32-Hn(o)+w|d<<w|p,ci=T+i}else li=1<<T|d<<w|p,ci=i}function gp(i){i.return!==null&&(ca(i,1),Ew(i,1,0))}function vp(i){for(;i===eh;)eh=xl[--wl],xl[wl]=null,th=xl[--wl],xl[wl]=null;for(;i===la;)la=Dr[--Or],Dr[Or]=null,ci=Dr[--Or],Dr[Or]=null,li=Dr[--Or],Dr[Or]=null}var xr=null,wr=null,qt=!1,ts=null;function bw(i,o){var d=Vr(5,null,null,0);d.elementType="DELETED",d.stateNode=o,d.return=i,o=i.deletions,o===null?(i.deletions=[d],i.flags|=16):o.push(d)}function Sw(i,o){switch(i.tag){case 5:var d=i.type;return o=o.nodeType!==1||d.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,xr=i,wr=Hi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,xr=i,wr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(d=la!==null?{id:li,overflow:ci}:null,i.memoizedState={dehydrated:o,treeContext:d,retryLane:1073741824},d=Vr(18,null,null,0),d.stateNode=o,d.return=i,i.child=d,xr=i,wr=null,!0):!1;default:return!1}}function yp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function xp(i){if(qt){var o=wr;if(o){var d=o;if(!Sw(i,o)){if(yp(i))throw Error(t(418));o=Hi(d.nextSibling);var p=xr;o&&Sw(i,o)?bw(p,d):(i.flags=i.flags&-4097|2,qt=!1,xr=i)}}else{if(yp(i))throw Error(t(418));i.flags=i.flags&-4097|2,qt=!1,xr=i}}}function Nw(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xr=i}function nh(i){if(i!==xr)return!1;if(!qt)return Nw(i),qt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!up(i.type,i.memoizedProps)),o&&(o=wr)){if(yp(i))throw Tw(),Error(t(418));for(;o;)bw(i,o),o=Hi(o.nextSibling)}if(Nw(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(o===0){wr=Hi(i.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++}i=i.nextSibling}wr=null}}else wr=xr?Hi(i.stateNode.nextSibling):null;return!0}function Tw(){for(var i=wr;i;)i=Hi(i.nextSibling)}function _l(){wr=xr=null,qt=!1}function wp(i){ts===null?ts=[i]:ts.push(i)}var IA=L.ReactCurrentBatchConfig;function Zc(i,o,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var p=d.stateNode}if(!p)throw Error(t(147,i));var w=p,T=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===T?o.ref:(o=function(O){var W=w.refs;O===null?delete W[T]:W[T]=O},o._stringRef=T,o)}if(typeof i!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,i))}return i}function rh(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Cw(i){var o=i._init;return o(i._payload)}function Iw(i){function o(ne,G){if(i){var re=ne.deletions;re===null?(ne.deletions=[G],ne.flags|=16):re.push(G)}}function d(ne,G){if(!i)return null;for(;G!==null;)o(ne,G),G=G.sibling;return null}function p(ne,G){for(ne=new Map;G!==null;)G.key!==null?ne.set(G.key,G):ne.set(G.index,G),G=G.sibling;return ne}function w(ne,G){return ne=ro(ne,G),ne.index=0,ne.sibling=null,ne}function T(ne,G,re){return ne.index=re,i?(re=ne.alternate,re!==null?(re=re.index,re<G?(ne.flags|=2,G):re):(ne.flags|=2,G)):(ne.flags|=1048576,G)}function O(ne){return i&&ne.alternate===null&&(ne.flags|=2),ne}function W(ne,G,re,xe){return G===null||G.tag!==6?(G=dg(re,ne.mode,xe),G.return=ne,G):(G=w(G,re),G.return=ne,G)}function H(ne,G,re,xe){var Ve=re.type;return Ve===P?pe(ne,G,re.props.children,xe,re.key):G!==null&&(G.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===Z&&Cw(Ve)===G.type)?(xe=w(G,re.props),xe.ref=Zc(ne,G,re),xe.return=ne,xe):(xe=Ch(re.type,re.key,re.props,null,ne.mode,xe),xe.ref=Zc(ne,G,re),xe.return=ne,xe)}function ie(ne,G,re,xe){return G===null||G.tag!==4||G.stateNode.containerInfo!==re.containerInfo||G.stateNode.implementation!==re.implementation?(G=hg(re,ne.mode,xe),G.return=ne,G):(G=w(G,re.children||[]),G.return=ne,G)}function pe(ne,G,re,xe,Ve){return G===null||G.tag!==7?(G=va(re,ne.mode,xe,Ve),G.return=ne,G):(G=w(G,re),G.return=ne,G)}function ge(ne,G,re){if(typeof G=="string"&&G!==""||typeof G=="number")return G=dg(""+G,ne.mode,re),G.return=ne,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case V:return re=Ch(G.type,G.key,G.props,null,ne.mode,re),re.ref=Zc(ne,null,G),re.return=ne,re;case q:return G=hg(G,ne.mode,re),G.return=ne,G;case Z:var xe=G._init;return ge(ne,xe(G._payload),re)}if(Pt(G)||Q(G))return G=va(G,ne.mode,re,null),G.return=ne,G;rh(ne,G)}return null}function fe(ne,G,re,xe){var Ve=G!==null?G.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Ve!==null?null:W(ne,G,""+re,xe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case V:return re.key===Ve?H(ne,G,re,xe):null;case q:return re.key===Ve?ie(ne,G,re,xe):null;case Z:return Ve=re._init,fe(ne,G,Ve(re._payload),xe)}if(Pt(re)||Q(re))return Ve!==null?null:pe(ne,G,re,xe,null);rh(ne,re)}return null}function Ae(ne,G,re,xe,Ve){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return ne=ne.get(re)||null,W(G,ne,""+xe,Ve);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case V:return ne=ne.get(xe.key===null?re:xe.key)||null,H(G,ne,xe,Ve);case q:return ne=ne.get(xe.key===null?re:xe.key)||null,ie(G,ne,xe,Ve);case Z:var qe=xe._init;return Ae(ne,G,re,qe(xe._payload),Ve)}if(Pt(xe)||Q(xe))return ne=ne.get(re)||null,pe(G,ne,xe,Ve,null);rh(G,xe)}return null}function Le(ne,G,re,xe){for(var Ve=null,qe=null,We=G,et=G=0,_n=null;We!==null&&et<re.length;et++){We.index>et?(_n=We,We=null):_n=We.sibling;var xt=fe(ne,We,re[et],xe);if(xt===null){We===null&&(We=_n);break}i&&We&&xt.alternate===null&&o(ne,We),G=T(xt,G,et),qe===null?Ve=xt:qe.sibling=xt,qe=xt,We=_n}if(et===re.length)return d(ne,We),qt&&ca(ne,et),Ve;if(We===null){for(;et<re.length;et++)We=ge(ne,re[et],xe),We!==null&&(G=T(We,G,et),qe===null?Ve=We:qe.sibling=We,qe=We);return qt&&ca(ne,et),Ve}for(We=p(ne,We);et<re.length;et++)_n=Ae(We,ne,et,re[et],xe),_n!==null&&(i&&_n.alternate!==null&&We.delete(_n.key===null?et:_n.key),G=T(_n,G,et),qe===null?Ve=_n:qe.sibling=_n,qe=_n);return i&&We.forEach(function(so){return o(ne,so)}),qt&&ca(ne,et),Ve}function Fe(ne,G,re,xe){var Ve=Q(re);if(typeof Ve!="function")throw Error(t(150));if(re=Ve.call(re),re==null)throw Error(t(151));for(var qe=Ve=null,We=G,et=G=0,_n=null,xt=re.next();We!==null&&!xt.done;et++,xt=re.next()){We.index>et?(_n=We,We=null):_n=We.sibling;var so=fe(ne,We,xt.value,xe);if(so===null){We===null&&(We=_n);break}i&&We&&so.alternate===null&&o(ne,We),G=T(so,G,et),qe===null?Ve=so:qe.sibling=so,qe=so,We=_n}if(xt.done)return d(ne,We),qt&&ca(ne,et),Ve;if(We===null){for(;!xt.done;et++,xt=re.next())xt=ge(ne,xt.value,xe),xt!==null&&(G=T(xt,G,et),qe===null?Ve=xt:qe.sibling=xt,qe=xt);return qt&&ca(ne,et),Ve}for(We=p(ne,We);!xt.done;et++,xt=re.next())xt=Ae(We,ne,et,xt.value,xe),xt!==null&&(i&&xt.alternate!==null&&We.delete(xt.key===null?et:xt.key),G=T(xt,G,et),qe===null?Ve=xt:qe.sibling=xt,qe=xt);return i&&We.forEach(function(aP){return o(ne,aP)}),qt&&ca(ne,et),Ve}function tn(ne,G,re,xe){if(typeof re=="object"&&re!==null&&re.type===P&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case V:e:{for(var Ve=re.key,qe=G;qe!==null;){if(qe.key===Ve){if(Ve=re.type,Ve===P){if(qe.tag===7){d(ne,qe.sibling),G=w(qe,re.props.children),G.return=ne,ne=G;break e}}else if(qe.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===Z&&Cw(Ve)===qe.type){d(ne,qe.sibling),G=w(qe,re.props),G.ref=Zc(ne,qe,re),G.return=ne,ne=G;break e}d(ne,qe);break}else o(ne,qe);qe=qe.sibling}re.type===P?(G=va(re.props.children,ne.mode,xe,re.key),G.return=ne,ne=G):(xe=Ch(re.type,re.key,re.props,null,ne.mode,xe),xe.ref=Zc(ne,G,re),xe.return=ne,ne=xe)}return O(ne);case q:e:{for(qe=re.key;G!==null;){if(G.key===qe)if(G.tag===4&&G.stateNode.containerInfo===re.containerInfo&&G.stateNode.implementation===re.implementation){d(ne,G.sibling),G=w(G,re.children||[]),G.return=ne,ne=G;break e}else{d(ne,G);break}else o(ne,G);G=G.sibling}G=hg(re,ne.mode,xe),G.return=ne,ne=G}return O(ne);case Z:return qe=re._init,tn(ne,G,qe(re._payload),xe)}if(Pt(re))return Le(ne,G,re,xe);if(Q(re))return Fe(ne,G,re,xe);rh(ne,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,G!==null&&G.tag===6?(d(ne,G.sibling),G=w(G,re),G.return=ne,ne=G):(d(ne,G),G=dg(re,ne.mode,xe),G.return=ne,ne=G),O(ne)):d(ne,G)}return tn}var El=Iw(!0),jw=Iw(!1),sh=Ki(null),ih=null,bl=null,_p=null;function Ep(){_p=bl=ih=null}function bp(i){var o=sh.current;Ft(sh),i._currentValue=o}function Sp(i,o,d){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===d)break;i=i.return}}function Sl(i,o){ih=i,_p=bl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(ir=!0),i.firstContext=null)}function Lr(i){var o=i._currentValue;if(_p!==i)if(i={context:i,memoizedValue:o,next:null},bl===null){if(ih===null)throw Error(t(308));bl=i,ih.dependencies={lanes:0,firstContext:i}}else bl=bl.next=i;return o}var ua=null;function Np(i){ua===null?ua=[i]:ua.push(i)}function Aw(i,o,d,p){var w=o.interleaved;return w===null?(d.next=d,Np(o)):(d.next=w.next,w.next=d),o.interleaved=d,ui(i,p)}function ui(i,o){i.lanes|=o;var d=i.alternate;for(d!==null&&(d.lanes|=o),d=i,i=i.return;i!==null;)i.childLanes|=o,d=i.alternate,d!==null&&(d.childLanes|=o),d=i,i=i.return;return d.tag===3?d.stateNode:null}var Yi=!1;function Tp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pw(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function di(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Xi(i,o,d){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(gt&2)!==0){var w=p.pending;return w===null?o.next=o:(o.next=w.next,w.next=o),p.pending=o,ui(i,d)}return w=p.interleaved,w===null?(o.next=o,Np(p)):(o.next=w.next,w.next=o),p.interleaved=o,ui(i,d)}function oh(i,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,d|=p,o.lanes=d,Ui(i,d)}}function Rw(i,o){var d=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var w=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var O={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?w=T=O:T=T.next=O,d=d.next}while(d!==null);T===null?w=T=o:T=T.next=o}else w=T=o;d={baseState:p.baseState,firstBaseUpdate:w,lastBaseUpdate:T,shared:p.shared,effects:p.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=o:i.next=o,d.lastBaseUpdate=o}function ah(i,o,d,p){var w=i.updateQueue;Yi=!1;var T=w.firstBaseUpdate,O=w.lastBaseUpdate,W=w.shared.pending;if(W!==null){w.shared.pending=null;var H=W,ie=H.next;H.next=null,O===null?T=ie:O.next=ie,O=H;var pe=i.alternate;pe!==null&&(pe=pe.updateQueue,W=pe.lastBaseUpdate,W!==O&&(W===null?pe.firstBaseUpdate=ie:W.next=ie,pe.lastBaseUpdate=H))}if(T!==null){var ge=w.baseState;O=0,pe=ie=H=null,W=T;do{var fe=W.lane,Ae=W.eventTime;if((p&fe)===fe){pe!==null&&(pe=pe.next={eventTime:Ae,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var Le=i,Fe=W;switch(fe=o,Ae=d,Fe.tag){case 1:if(Le=Fe.payload,typeof Le=="function"){ge=Le.call(Ae,ge,fe);break e}ge=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Fe.payload,fe=typeof Le=="function"?Le.call(Ae,ge,fe):Le,fe==null)break e;ge=ee({},ge,fe);break e;case 2:Yi=!0}}W.callback!==null&&W.lane!==0&&(i.flags|=64,fe=w.effects,fe===null?w.effects=[W]:fe.push(W))}else Ae={eventTime:Ae,lane:fe,tag:W.tag,payload:W.payload,callback:W.callback,next:null},pe===null?(ie=pe=Ae,H=ge):pe=pe.next=Ae,O|=fe;if(W=W.next,W===null){if(W=w.shared.pending,W===null)break;fe=W,W=fe.next,fe.next=null,w.lastBaseUpdate=fe,w.shared.pending=null}}while(!0);if(pe===null&&(H=ge),w.baseState=H,w.firstBaseUpdate=ie,w.lastBaseUpdate=pe,o=w.shared.interleaved,o!==null){w=o;do O|=w.lane,w=w.next;while(w!==o)}else T===null&&(w.shared.lanes=0);fa|=O,i.lanes=O,i.memoizedState=ge}}function kw(i,o,d){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],w=p.callback;if(w!==null){if(p.callback=null,p=d,typeof w!="function")throw Error(t(191,w));w.call(p)}}}var eu={},Ts=Ki(eu),tu=Ki(eu),nu=Ki(eu);function da(i){if(i===eu)throw Error(t(174));return i}function Cp(i,o){switch(kt(nu,o),kt(tu,i),kt(Ts,eu),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Nt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Nt(o,i)}Ft(Ts),kt(Ts,o)}function Nl(){Ft(Ts),Ft(tu),Ft(nu)}function Dw(i){da(nu.current);var o=da(Ts.current),d=Nt(o,i.type);o!==d&&(kt(tu,i),kt(Ts,d))}function Ip(i){tu.current===i&&(Ft(Ts),Ft(tu))}var Kt=Ki(0);function lh(i){for(var o=i;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var jp=[];function Ap(){for(var i=0;i<jp.length;i++)jp[i]._workInProgressVersionPrimary=null;jp.length=0}var ch=L.ReactCurrentDispatcher,Pp=L.ReactCurrentBatchConfig,ha=0,Gt=null,mn=null,xn=null,uh=!1,ru=!1,su=0,jA=0;function Dn(){throw Error(t(321))}function Rp(i,o){if(o===null)return!1;for(var d=0;d<o.length&&d<i.length;d++)if(!es(i[d],o[d]))return!1;return!0}function kp(i,o,d,p,w,T){if(ha=T,Gt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ch.current=i===null||i.memoizedState===null?kA:DA,i=d(p,w),ru){T=0;do{if(ru=!1,su=0,25<=T)throw Error(t(301));T+=1,xn=mn=null,o.updateQueue=null,ch.current=OA,i=d(p,w)}while(ru)}if(ch.current=fh,o=mn!==null&&mn.next!==null,ha=0,xn=mn=Gt=null,uh=!1,o)throw Error(t(300));return i}function Dp(){var i=su!==0;return su=0,i}function Cs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Gt.memoizedState=xn=i:xn=xn.next=i,xn}function Mr(){if(mn===null){var i=Gt.alternate;i=i!==null?i.memoizedState:null}else i=mn.next;var o=xn===null?Gt.memoizedState:xn.next;if(o!==null)xn=o,mn=i;else{if(i===null)throw Error(t(310));mn=i,i={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},xn===null?Gt.memoizedState=xn=i:xn=xn.next=i}return xn}function iu(i,o){return typeof o=="function"?o(i):o}function Op(i){var o=Mr(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var p=mn,w=p.baseQueue,T=d.pending;if(T!==null){if(w!==null){var O=w.next;w.next=T.next,T.next=O}p.baseQueue=w=T,d.pending=null}if(w!==null){T=w.next,p=p.baseState;var W=O=null,H=null,ie=T;do{var pe=ie.lane;if((ha&pe)===pe)H!==null&&(H=H.next={lane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),p=ie.hasEagerState?ie.eagerState:i(p,ie.action);else{var ge={lane:pe,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null};H===null?(W=H=ge,O=p):H=H.next=ge,Gt.lanes|=pe,fa|=pe}ie=ie.next}while(ie!==null&&ie!==T);H===null?O=p:H.next=W,es(p,o.memoizedState)||(ir=!0),o.memoizedState=p,o.baseState=O,o.baseQueue=H,d.lastRenderedState=p}if(i=d.interleaved,i!==null){w=i;do T=w.lane,Gt.lanes|=T,fa|=T,w=w.next;while(w!==i)}else w===null&&(d.lanes=0);return[o.memoizedState,d.dispatch]}function Lp(i){var o=Mr(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var p=d.dispatch,w=d.pending,T=o.memoizedState;if(w!==null){d.pending=null;var O=w=w.next;do T=i(T,O.action),O=O.next;while(O!==w);es(T,o.memoizedState)||(ir=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),d.lastRenderedState=T}return[T,p]}function Ow(){}function Lw(i,o){var d=Gt,p=Mr(),w=o(),T=!es(p.memoizedState,w);if(T&&(p.memoizedState=w,ir=!0),p=p.queue,Mp(Vw.bind(null,d,p,i),[i]),p.getSnapshot!==o||T||xn!==null&&xn.memoizedState.tag&1){if(d.flags|=2048,ou(9,Fw.bind(null,d,p,w,o),void 0,null),wn===null)throw Error(t(349));(ha&30)!==0||Mw(d,o,w)}return w}function Mw(i,o,d){i.flags|=16384,i={getSnapshot:o,value:d},o=Gt.updateQueue,o===null?(o={lastEffect:null,stores:null},Gt.updateQueue=o,o.stores=[i]):(d=o.stores,d===null?o.stores=[i]:d.push(i))}function Fw(i,o,d,p){o.value=d,o.getSnapshot=p,Uw(o)&&$w(i)}function Vw(i,o,d){return d(function(){Uw(o)&&$w(i)})}function Uw(i){var o=i.getSnapshot;i=i.value;try{var d=o();return!es(i,d)}catch{return!0}}function $w(i){var o=ui(i,1);o!==null&&is(o,i,1,-1)}function zw(i){var o=Cs();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iu,lastRenderedState:i},o.queue=i,i=i.dispatch=RA.bind(null,Gt,i),[o.memoizedState,i]}function ou(i,o,d,p){return i={tag:i,create:o,destroy:d,deps:p,next:null},o=Gt.updateQueue,o===null?(o={lastEffect:null,stores:null},Gt.updateQueue=o,o.lastEffect=i.next=i):(d=o.lastEffect,d===null?o.lastEffect=i.next=i:(p=d.next,d.next=i,i.next=p,o.lastEffect=i)),i}function Bw(){return Mr().memoizedState}function dh(i,o,d,p){var w=Cs();Gt.flags|=i,w.memoizedState=ou(1|o,d,void 0,p===void 0?null:p)}function hh(i,o,d,p){var w=Mr();p=p===void 0?null:p;var T=void 0;if(mn!==null){var O=mn.memoizedState;if(T=O.destroy,p!==null&&Rp(p,O.deps)){w.memoizedState=ou(o,d,T,p);return}}Gt.flags|=i,w.memoizedState=ou(1|o,d,T,p)}function qw(i,o){return dh(8390656,8,i,o)}function Mp(i,o){return hh(2048,8,i,o)}function Ww(i,o){return hh(4,2,i,o)}function Hw(i,o){return hh(4,4,i,o)}function Kw(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Gw(i,o,d){return d=d!=null?d.concat([i]):null,hh(4,4,Kw.bind(null,o,i),d)}function Fp(){}function Qw(i,o){var d=Mr();o=o===void 0?null:o;var p=d.memoizedState;return p!==null&&o!==null&&Rp(o,p[1])?p[0]:(d.memoizedState=[i,o],i)}function Yw(i,o){var d=Mr();o=o===void 0?null:o;var p=d.memoizedState;return p!==null&&o!==null&&Rp(o,p[1])?p[0]:(i=i(),d.memoizedState=[i,o],i)}function Xw(i,o,d){return(ha&21)===0?(i.baseState&&(i.baseState=!1,ir=!0),i.memoizedState=d):(es(d,o)||(d=ta(),Gt.lanes|=d,fa|=d,i.baseState=!0),o)}function AA(i,o){var d=ht;ht=d!==0&&4>d?d:4,i(!0);var p=Pp.transition;Pp.transition={};try{i(!1),o()}finally{ht=d,Pp.transition=p}}function Jw(){return Mr().memoizedState}function PA(i,o,d){var p=to(i);if(d={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null},Zw(i))e0(o,d);else if(d=Aw(i,o,d,p),d!==null){var w=Qn();is(d,i,p,w),t0(d,o,p)}}function RA(i,o,d){var p=to(i),w={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null};if(Zw(i))e0(o,w);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var O=o.lastRenderedState,W=T(O,d);if(w.hasEagerState=!0,w.eagerState=W,es(W,O)){var H=o.interleaved;H===null?(w.next=w,Np(o)):(w.next=H.next,H.next=w),o.interleaved=w;return}}catch{}finally{}d=Aw(i,o,w,p),d!==null&&(w=Qn(),is(d,i,p,w),t0(d,o,p))}}function Zw(i){var o=i.alternate;return i===Gt||o!==null&&o===Gt}function e0(i,o){ru=uh=!0;var d=i.pending;d===null?o.next=o:(o.next=d.next,d.next=o),i.pending=o}function t0(i,o,d){if((d&4194240)!==0){var p=o.lanes;p&=i.pendingLanes,d|=p,o.lanes=d,Ui(i,d)}}var fh={readContext:Lr,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useInsertionEffect:Dn,useLayoutEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useMutableSource:Dn,useSyncExternalStore:Dn,useId:Dn,unstable_isNewReconciler:!1},kA={readContext:Lr,useCallback:function(i,o){return Cs().memoizedState=[i,o===void 0?null:o],i},useContext:Lr,useEffect:qw,useImperativeHandle:function(i,o,d){return d=d!=null?d.concat([i]):null,dh(4194308,4,Kw.bind(null,o,i),d)},useLayoutEffect:function(i,o){return dh(4194308,4,i,o)},useInsertionEffect:function(i,o){return dh(4,2,i,o)},useMemo:function(i,o){var d=Cs();return o=o===void 0?null:o,i=i(),d.memoizedState=[i,o],i},useReducer:function(i,o,d){var p=Cs();return o=d!==void 0?d(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=PA.bind(null,Gt,i),[p.memoizedState,i]},useRef:function(i){var o=Cs();return i={current:i},o.memoizedState=i},useState:zw,useDebugValue:Fp,useDeferredValue:function(i){return Cs().memoizedState=i},useTransition:function(){var i=zw(!1),o=i[0];return i=AA.bind(null,i[1]),Cs().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,d){var p=Gt,w=Cs();if(qt){if(d===void 0)throw Error(t(407));d=d()}else{if(d=o(),wn===null)throw Error(t(349));(ha&30)!==0||Mw(p,o,d)}w.memoizedState=d;var T={value:d,getSnapshot:o};return w.queue=T,qw(Vw.bind(null,p,T,i),[i]),p.flags|=2048,ou(9,Fw.bind(null,p,T,d,o),void 0,null),d},useId:function(){var i=Cs(),o=wn.identifierPrefix;if(qt){var d=ci,p=li;d=(p&~(1<<32-Hn(p)-1)).toString(32)+d,o=":"+o+"R"+d,d=su++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=jA++,o=":"+o+"r"+d.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},DA={readContext:Lr,useCallback:Qw,useContext:Lr,useEffect:Mp,useImperativeHandle:Gw,useInsertionEffect:Ww,useLayoutEffect:Hw,useMemo:Yw,useReducer:Op,useRef:Bw,useState:function(){return Op(iu)},useDebugValue:Fp,useDeferredValue:function(i){var o=Mr();return Xw(o,mn.memoizedState,i)},useTransition:function(){var i=Op(iu)[0],o=Mr().memoizedState;return[i,o]},useMutableSource:Ow,useSyncExternalStore:Lw,useId:Jw,unstable_isNewReconciler:!1},OA={readContext:Lr,useCallback:Qw,useContext:Lr,useEffect:Mp,useImperativeHandle:Gw,useInsertionEffect:Ww,useLayoutEffect:Hw,useMemo:Yw,useReducer:Lp,useRef:Bw,useState:function(){return Lp(iu)},useDebugValue:Fp,useDeferredValue:function(i){var o=Mr();return mn===null?o.memoizedState=i:Xw(o,mn.memoizedState,i)},useTransition:function(){var i=Lp(iu)[0],o=Mr().memoizedState;return[i,o]},useMutableSource:Ow,useSyncExternalStore:Lw,useId:Jw,unstable_isNewReconciler:!1};function ns(i,o){if(i&&i.defaultProps){o=ee({},o),i=i.defaultProps;for(var d in i)o[d]===void 0&&(o[d]=i[d]);return o}return o}function Vp(i,o,d,p){o=i.memoizedState,d=d(p,o),d=d==null?o:ee({},o,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var mh={isMounted:function(i){return(i=i._reactInternals)?Kr(i)===i:!1},enqueueSetState:function(i,o,d){i=i._reactInternals;var p=Qn(),w=to(i),T=di(p,w);T.payload=o,d!=null&&(T.callback=d),o=Xi(i,T,w),o!==null&&(is(o,i,w,p),oh(o,i,w))},enqueueReplaceState:function(i,o,d){i=i._reactInternals;var p=Qn(),w=to(i),T=di(p,w);T.tag=1,T.payload=o,d!=null&&(T.callback=d),o=Xi(i,T,w),o!==null&&(is(o,i,w,p),oh(o,i,w))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var d=Qn(),p=to(i),w=di(d,p);w.tag=2,o!=null&&(w.callback=o),o=Xi(i,w,p),o!==null&&(is(o,i,p,d),oh(o,i,p))}};function n0(i,o,d,p,w,T,O){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,T,O):o.prototype&&o.prototype.isPureReactComponent?!Hc(d,p)||!Hc(w,T):!0}function r0(i,o,d){var p=!1,w=Gi,T=o.contextType;return typeof T=="object"&&T!==null?T=Lr(T):(w=sr(o)?aa:kn.current,p=o.contextTypes,T=(p=p!=null)?yl(i,w):Gi),o=new o(d,T),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=mh,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=w,i.__reactInternalMemoizedMaskedChildContext=T),o}function s0(i,o,d,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,p),o.state!==i&&mh.enqueueReplaceState(o,o.state,null)}function Up(i,o,d,p){var w=i.stateNode;w.props=d,w.state=i.memoizedState,w.refs={},Tp(i);var T=o.contextType;typeof T=="object"&&T!==null?w.context=Lr(T):(T=sr(o)?aa:kn.current,w.context=yl(i,T)),w.state=i.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Vp(i,o,T,d),w.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(o=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),o!==w.state&&mh.enqueueReplaceState(w,w.state,null),ah(i,d,w,p),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308)}function Tl(i,o){try{var d="",p=o;do d+=ve(p),p=p.return;while(p);var w=d}catch(T){w=`
Error generating stack: `+T.message+`
`+T.stack}return{value:i,source:o,stack:w,digest:null}}function $p(i,o,d){return{value:i,source:null,stack:d??null,digest:o??null}}function zp(i,o){try{console.error(o.value)}catch(d){setTimeout(function(){throw d})}}var LA=typeof WeakMap=="function"?WeakMap:Map;function i0(i,o,d){d=di(-1,d),d.tag=3,d.payload={element:null};var p=o.value;return d.callback=function(){_h||(_h=!0,rg=p),zp(i,o)},d}function o0(i,o,d){d=di(-1,d),d.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var w=o.value;d.payload=function(){return p(w)},d.callback=function(){zp(i,o)}}var T=i.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){zp(i,o),typeof p!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var O=o.stack;this.componentDidCatch(o.value,{componentStack:O!==null?O:""})}),d}function a0(i,o,d){var p=i.pingCache;if(p===null){p=i.pingCache=new LA;var w=new Set;p.set(o,w)}else w=p.get(o),w===void 0&&(w=new Set,p.set(o,w));w.has(d)||(w.add(d),i=YA.bind(null,i,o,d),o.then(i,i))}function l0(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function c0(i,o,d,p,w){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(o=di(-1,1),o.tag=2,Xi(d,o,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=w,i)}var MA=L.ReactCurrentOwner,ir=!1;function Gn(i,o,d,p){o.child=i===null?jw(o,null,d,p):El(o,i.child,d,p)}function u0(i,o,d,p,w){d=d.render;var T=o.ref;return Sl(o,w),p=kp(i,o,d,p,T,w),d=Dp(),i!==null&&!ir?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~w,hi(i,o,w)):(qt&&d&&gp(o),o.flags|=1,Gn(i,o,p,w),o.child)}function d0(i,o,d,p,w){if(i===null){var T=d.type;return typeof T=="function"&&!ug(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(o.tag=15,o.type=T,h0(i,o,T,p,w)):(i=Ch(d.type,null,p,o,o.mode,w),i.ref=o.ref,i.return=o,o.child=i)}if(T=i.child,(i.lanes&w)===0){var O=T.memoizedProps;if(d=d.compare,d=d!==null?d:Hc,d(O,p)&&i.ref===o.ref)return hi(i,o,w)}return o.flags|=1,i=ro(T,p),i.ref=o.ref,i.return=o,o.child=i}function h0(i,o,d,p,w){if(i!==null){var T=i.memoizedProps;if(Hc(T,p)&&i.ref===o.ref)if(ir=!1,o.pendingProps=p=T,(i.lanes&w)!==0)(i.flags&131072)!==0&&(ir=!0);else return o.lanes=i.lanes,hi(i,o,w)}return Bp(i,o,d,p,w)}function f0(i,o,d){var p=o.pendingProps,w=p.children,T=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Il,_r),_r|=d;else{if((d&1073741824)===0)return i=T!==null?T.baseLanes|d:d,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,kt(Il,_r),_r|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=T!==null?T.baseLanes:d,kt(Il,_r),_r|=p}else T!==null?(p=T.baseLanes|d,o.memoizedState=null):p=d,kt(Il,_r),_r|=p;return Gn(i,o,w,d),o.child}function m0(i,o){var d=o.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(o.flags|=512,o.flags|=2097152)}function Bp(i,o,d,p,w){var T=sr(d)?aa:kn.current;return T=yl(o,T),Sl(o,w),d=kp(i,o,d,p,T,w),p=Dp(),i!==null&&!ir?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~w,hi(i,o,w)):(qt&&p&&gp(o),o.flags|=1,Gn(i,o,d,w),o.child)}function p0(i,o,d,p,w){if(sr(d)){var T=!0;Jd(o)}else T=!1;if(Sl(o,w),o.stateNode===null)gh(i,o),r0(o,d,p),Up(o,d,p,w),p=!0;else if(i===null){var O=o.stateNode,W=o.memoizedProps;O.props=W;var H=O.context,ie=d.contextType;typeof ie=="object"&&ie!==null?ie=Lr(ie):(ie=sr(d)?aa:kn.current,ie=yl(o,ie));var pe=d.getDerivedStateFromProps,ge=typeof pe=="function"||typeof O.getSnapshotBeforeUpdate=="function";ge||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W!==p||H!==ie)&&s0(o,O,p,ie),Yi=!1;var fe=o.memoizedState;O.state=fe,ah(o,p,O,w),H=o.memoizedState,W!==p||fe!==H||rr.current||Yi?(typeof pe=="function"&&(Vp(o,d,pe,p),H=o.memoizedState),(W=Yi||n0(o,d,W,p,fe,H,ie))?(ge||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(o.flags|=4194308)):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=H),O.props=p,O.state=H,O.context=ie,p=W):(typeof O.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{O=o.stateNode,Pw(i,o),W=o.memoizedProps,ie=o.type===o.elementType?W:ns(o.type,W),O.props=ie,ge=o.pendingProps,fe=O.context,H=d.contextType,typeof H=="object"&&H!==null?H=Lr(H):(H=sr(d)?aa:kn.current,H=yl(o,H));var Ae=d.getDerivedStateFromProps;(pe=typeof Ae=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W!==ge||fe!==H)&&s0(o,O,p,H),Yi=!1,fe=o.memoizedState,O.state=fe,ah(o,p,O,w);var Le=o.memoizedState;W!==ge||fe!==Le||rr.current||Yi?(typeof Ae=="function"&&(Vp(o,d,Ae,p),Le=o.memoizedState),(ie=Yi||n0(o,d,ie,p,fe,Le,H)||!1)?(pe||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(p,Le,H),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(p,Le,H)),typeof O.componentDidUpdate=="function"&&(o.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof O.componentDidUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=Le),O.props=p,O.state=Le,O.context=H,p=ie):(typeof O.componentDidUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=1024),p=!1)}return qp(i,o,d,p,T,w)}function qp(i,o,d,p,w,T){m0(i,o);var O=(o.flags&128)!==0;if(!p&&!O)return w&&ww(o,d,!1),hi(i,o,T);p=o.stateNode,MA.current=o;var W=O&&typeof d.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&O?(o.child=El(o,i.child,null,T),o.child=El(o,null,W,T)):Gn(i,o,W,T),o.memoizedState=p.state,w&&ww(o,d,!0),o.child}function g0(i){var o=i.stateNode;o.pendingContext?yw(i,o.pendingContext,o.pendingContext!==o.context):o.context&&yw(i,o.context,!1),Cp(i,o.containerInfo)}function v0(i,o,d,p,w){return _l(),wp(w),o.flags|=256,Gn(i,o,d,p),o.child}var Wp={dehydrated:null,treeContext:null,retryLane:0};function Hp(i){return{baseLanes:i,cachePool:null,transitions:null}}function y0(i,o,d){var p=o.pendingProps,w=Kt.current,T=!1,O=(o.flags&128)!==0,W;if((W=O)||(W=i!==null&&i.memoizedState===null?!1:(w&2)!==0),W?(T=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(w|=1),kt(Kt,w&1),i===null)return xp(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(O=p.children,i=p.fallback,T?(p=o.mode,T=o.child,O={mode:"hidden",children:O},(p&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=O):T=Ih(O,p,0,null),i=va(i,p,d,null),T.return=o,i.return=o,T.sibling=i,o.child=T,o.child.memoizedState=Hp(d),o.memoizedState=Wp,i):Kp(o,O));if(w=i.memoizedState,w!==null&&(W=w.dehydrated,W!==null))return FA(i,o,O,p,W,w,d);if(T){T=p.fallback,O=o.mode,w=i.child,W=w.sibling;var H={mode:"hidden",children:p.children};return(O&1)===0&&o.child!==w?(p=o.child,p.childLanes=0,p.pendingProps=H,o.deletions=null):(p=ro(w,H),p.subtreeFlags=w.subtreeFlags&14680064),W!==null?T=ro(W,T):(T=va(T,O,d,null),T.flags|=2),T.return=o,p.return=o,p.sibling=T,o.child=p,p=T,T=o.child,O=i.child.memoizedState,O=O===null?Hp(d):{baseLanes:O.baseLanes|d,cachePool:null,transitions:O.transitions},T.memoizedState=O,T.childLanes=i.childLanes&~d,o.memoizedState=Wp,p}return T=i.child,i=T.sibling,p=ro(T,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=d),p.return=o,p.sibling=null,i!==null&&(d=o.deletions,d===null?(o.deletions=[i],o.flags|=16):d.push(i)),o.child=p,o.memoizedState=null,p}function Kp(i,o){return o=Ih({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function ph(i,o,d,p){return p!==null&&wp(p),El(o,i.child,null,d),i=Kp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function FA(i,o,d,p,w,T,O){if(d)return o.flags&256?(o.flags&=-257,p=$p(Error(t(422))),ph(i,o,O,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(T=p.fallback,w=o.mode,p=Ih({mode:"visible",children:p.children},w,0,null),T=va(T,w,O,null),T.flags|=2,p.return=o,T.return=o,p.sibling=T,o.child=p,(o.mode&1)!==0&&El(o,i.child,null,O),o.child.memoizedState=Hp(O),o.memoizedState=Wp,T);if((o.mode&1)===0)return ph(i,o,O,null);if(w.data==="$!"){if(p=w.nextSibling&&w.nextSibling.dataset,p)var W=p.dgst;return p=W,T=Error(t(419)),p=$p(T,p,void 0),ph(i,o,O,p)}if(W=(O&i.childLanes)!==0,ir||W){if(p=wn,p!==null){switch(O&-O){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(p.suspendedLanes|O))!==0?0:w,w!==0&&w!==T.retryLane&&(T.retryLane=w,ui(i,w),is(p,i,w,-1))}return cg(),p=$p(Error(t(421))),ph(i,o,O,p)}return w.data==="$?"?(o.flags|=128,o.child=i.child,o=XA.bind(null,i),w._reactRetry=o,null):(i=T.treeContext,wr=Hi(w.nextSibling),xr=o,qt=!0,ts=null,i!==null&&(Dr[Or++]=li,Dr[Or++]=ci,Dr[Or++]=la,li=i.id,ci=i.overflow,la=o),o=Kp(o,p.children),o.flags|=4096,o)}function x0(i,o,d){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),Sp(i.return,o,d)}function Gp(i,o,d,p,w){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:w}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=p,T.tail=d,T.tailMode=w)}function w0(i,o,d){var p=o.pendingProps,w=p.revealOrder,T=p.tail;if(Gn(i,o,p.children,d),p=Kt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&x0(i,d,o);else if(i.tag===19)x0(i,d,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(kt(Kt,p),(o.mode&1)===0)o.memoizedState=null;else switch(w){case"forwards":for(d=o.child,w=null;d!==null;)i=d.alternate,i!==null&&lh(i)===null&&(w=d),d=d.sibling;d=w,d===null?(w=o.child,o.child=null):(w=d.sibling,d.sibling=null),Gp(o,!1,w,d,T);break;case"backwards":for(d=null,w=o.child,o.child=null;w!==null;){if(i=w.alternate,i!==null&&lh(i)===null){o.child=w;break}i=w.sibling,w.sibling=d,d=w,w=i}Gp(o,!0,d,null,T);break;case"together":Gp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function gh(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function hi(i,o,d){if(i!==null&&(o.dependencies=i.dependencies),fa|=o.lanes,(d&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,d=ro(i,i.pendingProps),o.child=d,d.return=o;i.sibling!==null;)i=i.sibling,d=d.sibling=ro(i,i.pendingProps),d.return=o;d.sibling=null}return o.child}function VA(i,o,d){switch(o.tag){case 3:g0(o),_l();break;case 5:Dw(o);break;case 1:sr(o.type)&&Jd(o);break;case 4:Cp(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,w=o.memoizedProps.value;kt(sh,p._currentValue),p._currentValue=w;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(kt(Kt,Kt.current&1),o.flags|=128,null):(d&o.child.childLanes)!==0?y0(i,o,d):(kt(Kt,Kt.current&1),i=hi(i,o,d),i!==null?i.sibling:null);kt(Kt,Kt.current&1);break;case 19:if(p=(d&o.childLanes)!==0,(i.flags&128)!==0){if(p)return w0(i,o,d);o.flags|=128}if(w=o.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),kt(Kt,Kt.current),p)break;return null;case 22:case 23:return o.lanes=0,f0(i,o,d)}return hi(i,o,d)}var _0,Qp,E0,b0;_0=function(i,o){for(var d=o.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Qp=function(){},E0=function(i,o,d,p){var w=i.memoizedProps;if(w!==p){i=o.stateNode,da(Ts.current);var T=null;switch(d){case"input":w=bt(i,w),p=bt(i,p),T=[];break;case"select":w=ee({},w,{value:void 0}),p=ee({},p,{value:void 0}),T=[];break;case"textarea":w=Xs(i,w),p=Xs(i,p),T=[];break;default:typeof w.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Qd)}Rn(d,p);var O;d=null;for(ie in w)if(!p.hasOwnProperty(ie)&&w.hasOwnProperty(ie)&&w[ie]!=null)if(ie==="style"){var W=w[ie];for(O in W)W.hasOwnProperty(O)&&(d||(d={}),d[O]="")}else ie!=="dangerouslySetInnerHTML"&&ie!=="children"&&ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(s.hasOwnProperty(ie)?T||(T=[]):(T=T||[]).push(ie,null));for(ie in p){var H=p[ie];if(W=w!=null?w[ie]:void 0,p.hasOwnProperty(ie)&&H!==W&&(H!=null||W!=null))if(ie==="style")if(W){for(O in W)!W.hasOwnProperty(O)||H&&H.hasOwnProperty(O)||(d||(d={}),d[O]="");for(O in H)H.hasOwnProperty(O)&&W[O]!==H[O]&&(d||(d={}),d[O]=H[O])}else d||(T||(T=[]),T.push(ie,d)),d=H;else ie==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,W=W?W.__html:void 0,H!=null&&W!==H&&(T=T||[]).push(ie,H)):ie==="children"?typeof H!="string"&&typeof H!="number"||(T=T||[]).push(ie,""+H):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&(s.hasOwnProperty(ie)?(H!=null&&ie==="onScroll"&&Mt("scroll",i),T||W===H||(T=[])):(T=T||[]).push(ie,H))}d&&(T=T||[]).push("style",d);var ie=T;(o.updateQueue=ie)&&(o.flags|=4)}},b0=function(i,o,d,p){d!==p&&(o.flags|=4)};function au(i,o){if(!qt)switch(i.tailMode){case"hidden":o=i.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function On(i){var o=i.alternate!==null&&i.alternate.child===i.child,d=0,p=0;if(o)for(var w=i.child;w!==null;)d|=w.lanes|w.childLanes,p|=w.subtreeFlags&14680064,p|=w.flags&14680064,w.return=i,w=w.sibling;else for(w=i.child;w!==null;)d|=w.lanes|w.childLanes,p|=w.subtreeFlags,p|=w.flags,w.return=i,w=w.sibling;return i.subtreeFlags|=p,i.childLanes=d,o}function UA(i,o,d){var p=o.pendingProps;switch(vp(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return On(o),null;case 1:return sr(o.type)&&Xd(),On(o),null;case 3:return p=o.stateNode,Nl(),Ft(rr),Ft(kn),Ap(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(nh(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ts!==null&&(og(ts),ts=null))),Qp(i,o),On(o),null;case 5:Ip(o);var w=da(nu.current);if(d=o.type,i!==null&&o.stateNode!=null)E0(i,o,d,p,w),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return On(o),null}if(i=da(Ts.current),nh(o)){p=o.stateNode,d=o.type;var T=o.memoizedProps;switch(p[Ns]=o,p[Xc]=T,i=(o.mode&1)!==0,d){case"dialog":Mt("cancel",p),Mt("close",p);break;case"iframe":case"object":case"embed":Mt("load",p);break;case"video":case"audio":for(w=0;w<Gc.length;w++)Mt(Gc[w],p);break;case"source":Mt("error",p);break;case"img":case"image":case"link":Mt("error",p),Mt("load",p);break;case"details":Mt("toggle",p);break;case"input":rn(p,T),Mt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!T.multiple},Mt("invalid",p);break;case"textarea":qn(p,T),Mt("invalid",p)}Rn(d,T),w=null;for(var O in T)if(T.hasOwnProperty(O)){var W=T[O];O==="children"?typeof W=="string"?p.textContent!==W&&(T.suppressHydrationWarning!==!0&&Gd(p.textContent,W,i),w=["children",W]):typeof W=="number"&&p.textContent!==""+W&&(T.suppressHydrationWarning!==!0&&Gd(p.textContent,W,i),w=["children",""+W]):s.hasOwnProperty(O)&&W!=null&&O==="onScroll"&&Mt("scroll",p)}switch(d){case"input":Me(p),_t(p,T,!0);break;case"textarea":Me(p),Wn(p);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(p.onclick=Qd)}p=w,o.updateQueue=p,p!==null&&(o.flags|=4)}else{O=w.nodeType===9?w:w.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Lt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=O.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=O.createElement(d,{is:p.is}):(i=O.createElement(d),d==="select"&&(O=i,p.multiple?O.multiple=!0:p.size&&(O.size=p.size))):i=O.createElementNS(i,d),i[Ns]=o,i[Xc]=p,_0(i,o,!1,!1),o.stateNode=i;e:{switch(O=Zs(d,p),d){case"dialog":Mt("cancel",i),Mt("close",i),w=p;break;case"iframe":case"object":case"embed":Mt("load",i),w=p;break;case"video":case"audio":for(w=0;w<Gc.length;w++)Mt(Gc[w],i);w=p;break;case"source":Mt("error",i),w=p;break;case"img":case"image":case"link":Mt("error",i),Mt("load",i),w=p;break;case"details":Mt("toggle",i),w=p;break;case"input":rn(i,p),w=bt(i,p),Mt("invalid",i);break;case"option":w=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},w=ee({},p,{value:void 0}),Mt("invalid",i);break;case"textarea":qn(i,p),w=Xs(i,p),Mt("invalid",i);break;default:w=p}Rn(d,w),W=w;for(T in W)if(W.hasOwnProperty(T)){var H=W[T];T==="style"?Js(i,H):T==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&Zn(i,H)):T==="children"?typeof H=="string"?(d!=="textarea"||H!=="")&&mr(i,H):typeof H=="number"&&mr(i,""+H):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(s.hasOwnProperty(T)?H!=null&&T==="onScroll"&&Mt("scroll",i):H!=null&&C(i,T,H,O))}switch(d){case"input":Me(i),_t(i,p,!1);break;case"textarea":Me(i),Wn(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Te(p.value));break;case"select":i.multiple=!!p.multiple,T=p.value,T!=null?fr(i,!!p.multiple,T,!1):p.defaultValue!=null&&fr(i,!!p.multiple,p.defaultValue,!0);break;default:typeof w.onClick=="function"&&(i.onclick=Qd)}switch(d){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return On(o),null;case 6:if(i&&o.stateNode!=null)b0(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(d=da(nu.current),da(Ts.current),nh(o)){if(p=o.stateNode,d=o.memoizedProps,p[Ns]=o,(T=p.nodeValue!==d)&&(i=xr,i!==null))switch(i.tag){case 3:Gd(p.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Gd(p.nodeValue,d,(i.mode&1)!==0)}T&&(o.flags|=4)}else p=(d.nodeType===9?d:d.ownerDocument).createTextNode(p),p[Ns]=o,o.stateNode=p}return On(o),null;case 13:if(Ft(Kt),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(qt&&wr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Tw(),_l(),o.flags|=98560,T=!1;else if(T=nh(o),p!==null&&p.dehydrated!==null){if(i===null){if(!T)throw Error(t(318));if(T=o.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(t(317));T[Ns]=o}else _l(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;On(o),T=!1}else ts!==null&&(og(ts),ts=null),T=!0;if(!T)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=d,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Kt.current&1)!==0?pn===0&&(pn=3):cg())),o.updateQueue!==null&&(o.flags|=4),On(o),null);case 4:return Nl(),Qp(i,o),i===null&&Qc(o.stateNode.containerInfo),On(o),null;case 10:return bp(o.type._context),On(o),null;case 17:return sr(o.type)&&Xd(),On(o),null;case 19:if(Ft(Kt),T=o.memoizedState,T===null)return On(o),null;if(p=(o.flags&128)!==0,O=T.rendering,O===null)if(p)au(T,!1);else{if(pn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(O=lh(i),O!==null){for(o.flags|=128,au(T,!1),p=O.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=d,d=o.child;d!==null;)T=d,i=p,T.flags&=14680066,O=T.alternate,O===null?(T.childLanes=0,T.lanes=i,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=O.childLanes,T.lanes=O.lanes,T.child=O.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=O.memoizedProps,T.memoizedState=O.memoizedState,T.updateQueue=O.updateQueue,T.type=O.type,i=O.dependencies,T.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return kt(Kt,Kt.current&1|2),o.child}i=i.sibling}T.tail!==null&&Rt()>jl&&(o.flags|=128,p=!0,au(T,!1),o.lanes=4194304)}else{if(!p)if(i=lh(O),i!==null){if(o.flags|=128,p=!0,d=i.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),au(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!qt)return On(o),null}else 2*Rt()-T.renderingStartTime>jl&&d!==1073741824&&(o.flags|=128,p=!0,au(T,!1),o.lanes=4194304);T.isBackwards?(O.sibling=o.child,o.child=O):(d=T.last,d!==null?d.sibling=O:o.child=O,T.last=O)}return T.tail!==null?(o=T.tail,T.rendering=o,T.tail=o.sibling,T.renderingStartTime=Rt(),o.sibling=null,d=Kt.current,kt(Kt,p?d&1|2:d&1),o):(On(o),null);case 22:case 23:return lg(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(_r&1073741824)!==0&&(On(o),o.subtreeFlags&6&&(o.flags|=8192)):On(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function $A(i,o){switch(vp(o),o.tag){case 1:return sr(o.type)&&Xd(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Nl(),Ft(rr),Ft(kn),Ap(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Ip(o),null;case 13:if(Ft(Kt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));_l()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Ft(Kt),null;case 4:return Nl(),null;case 10:return bp(o.type._context),null;case 22:case 23:return lg(),null;case 24:return null;default:return null}}var vh=!1,Ln=!1,zA=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Cl(i,o){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(p){Jt(i,o,p)}else d.current=null}function Yp(i,o,d){try{d()}catch(p){Jt(i,o,p)}}var S0=!1;function BA(i,o){if(lp=Bi,i=nw(),ep(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var w=p.anchorOffset,T=p.focusNode;p=p.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var O=0,W=-1,H=-1,ie=0,pe=0,ge=i,fe=null;t:for(;;){for(var Ae;ge!==d||w!==0&&ge.nodeType!==3||(W=O+w),ge!==T||p!==0&&ge.nodeType!==3||(H=O+p),ge.nodeType===3&&(O+=ge.nodeValue.length),(Ae=ge.firstChild)!==null;)fe=ge,ge=Ae;for(;;){if(ge===i)break t;if(fe===d&&++ie===w&&(W=O),fe===T&&++pe===p&&(H=O),(Ae=ge.nextSibling)!==null)break;ge=fe,fe=ge.parentNode}ge=Ae}d=W===-1||H===-1?null:{start:W,end:H}}else d=null}d=d||{start:0,end:0}}else d=null;for(cp={focusedElem:i,selectionRange:d},Bi=!1,Oe=o;Oe!==null;)if(o=Oe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Oe=i;else for(;Oe!==null;){o=Oe;try{var Le=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Le!==null){var Fe=Le.memoizedProps,tn=Le.memoizedState,ne=o.stateNode,G=ne.getSnapshotBeforeUpdate(o.elementType===o.type?Fe:ns(o.type,Fe),tn);ne.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var re=o.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(xe){Jt(o,o.return,xe)}if(i=o.sibling,i!==null){i.return=o.return,Oe=i;break}Oe=o.return}return Le=S0,S0=!1,Le}function lu(i,o,d){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&i)===i){var T=w.destroy;w.destroy=void 0,T!==void 0&&Yp(o,d,T)}w=w.next}while(w!==p)}}function yh(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&i)===i){var p=d.create;d.destroy=p()}d=d.next}while(d!==o)}}function Xp(i){var o=i.ref;if(o!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof o=="function"?o(i):o.current=i}}function N0(i){var o=i.alternate;o!==null&&(i.alternate=null,N0(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Ns],delete o[Xc],delete o[fp],delete o[NA],delete o[TA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function T0(i){return i.tag===5||i.tag===3||i.tag===4}function C0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||T0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Jp(i,o,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?d.nodeType===8?d.parentNode.insertBefore(i,o):d.insertBefore(i,o):(d.nodeType===8?(o=d.parentNode,o.insertBefore(i,d)):(o=d,o.appendChild(i)),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Qd));else if(p!==4&&(i=i.child,i!==null))for(Jp(i,o,d),i=i.sibling;i!==null;)Jp(i,o,d),i=i.sibling}function Zp(i,o,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?d.insertBefore(i,o):d.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Zp(i,o,d),i=i.sibling;i!==null;)Zp(i,o,d),i=i.sibling}var Tn=null,rs=!1;function Ji(i,o,d){for(d=d.child;d!==null;)I0(i,o,d),d=d.sibling}function I0(i,o,d){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(Zo,d)}catch{}switch(d.tag){case 5:Ln||Cl(d,o);case 6:var p=Tn,w=rs;Tn=null,Ji(i,o,d),Tn=p,rs=w,Tn!==null&&(rs?(i=Tn,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Tn.removeChild(d.stateNode));break;case 18:Tn!==null&&(rs?(i=Tn,d=d.stateNode,i.nodeType===8?hp(i.parentNode,d):i.nodeType===1&&hp(i,d),Jr(i)):hp(Tn,d.stateNode));break;case 4:p=Tn,w=rs,Tn=d.stateNode.containerInfo,rs=!0,Ji(i,o,d),Tn=p,rs=w;break;case 0:case 11:case 14:case 15:if(!Ln&&(p=d.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){w=p=p.next;do{var T=w,O=T.destroy;T=T.tag,O!==void 0&&((T&2)!==0||(T&4)!==0)&&Yp(d,o,O),w=w.next}while(w!==p)}Ji(i,o,d);break;case 1:if(!Ln&&(Cl(d,o),p=d.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=d.memoizedProps,p.state=d.memoizedState,p.componentWillUnmount()}catch(W){Jt(d,o,W)}Ji(i,o,d);break;case 21:Ji(i,o,d);break;case 22:d.mode&1?(Ln=(p=Ln)||d.memoizedState!==null,Ji(i,o,d),Ln=p):Ji(i,o,d);break;default:Ji(i,o,d)}}function j0(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new zA),o.forEach(function(p){var w=JA.bind(null,i,p);d.has(p)||(d.add(p),p.then(w,w))})}}function ss(i,o){var d=o.deletions;if(d!==null)for(var p=0;p<d.length;p++){var w=d[p];try{var T=i,O=o,W=O;e:for(;W!==null;){switch(W.tag){case 5:Tn=W.stateNode,rs=!1;break e;case 3:Tn=W.stateNode.containerInfo,rs=!0;break e;case 4:Tn=W.stateNode.containerInfo,rs=!0;break e}W=W.return}if(Tn===null)throw Error(t(160));I0(T,O,w),Tn=null,rs=!1;var H=w.alternate;H!==null&&(H.return=null),w.return=null}catch(ie){Jt(w,o,ie)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)A0(o,i),o=o.sibling}function A0(i,o){var d=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ss(o,i),Is(i),p&4){try{lu(3,i,i.return),yh(3,i)}catch(Fe){Jt(i,i.return,Fe)}try{lu(5,i,i.return)}catch(Fe){Jt(i,i.return,Fe)}}break;case 1:ss(o,i),Is(i),p&512&&d!==null&&Cl(d,d.return);break;case 5:if(ss(o,i),Is(i),p&512&&d!==null&&Cl(d,d.return),i.flags&32){var w=i.stateNode;try{mr(w,"")}catch(Fe){Jt(i,i.return,Fe)}}if(p&4&&(w=i.stateNode,w!=null)){var T=i.memoizedProps,O=d!==null?d.memoizedProps:T,W=i.type,H=i.updateQueue;if(i.updateQueue=null,H!==null)try{W==="input"&&T.type==="radio"&&T.name!=null&&Ot(w,T),Zs(W,O);var ie=Zs(W,T);for(O=0;O<H.length;O+=2){var pe=H[O],ge=H[O+1];pe==="style"?Js(w,ge):pe==="dangerouslySetInnerHTML"?Zn(w,ge):pe==="children"?mr(w,ge):C(w,pe,ge,ie)}switch(W){case"input":At(w,T);break;case"textarea":Ir(w,T);break;case"select":var fe=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!T.multiple;var Ae=T.value;Ae!=null?fr(w,!!T.multiple,Ae,!1):fe!==!!T.multiple&&(T.defaultValue!=null?fr(w,!!T.multiple,T.defaultValue,!0):fr(w,!!T.multiple,T.multiple?[]:"",!1))}w[Xc]=T}catch(Fe){Jt(i,i.return,Fe)}}break;case 6:if(ss(o,i),Is(i),p&4){if(i.stateNode===null)throw Error(t(162));w=i.stateNode,T=i.memoizedProps;try{w.nodeValue=T}catch(Fe){Jt(i,i.return,Fe)}}break;case 3:if(ss(o,i),Is(i),p&4&&d!==null&&d.memoizedState.isDehydrated)try{Jr(o.containerInfo)}catch(Fe){Jt(i,i.return,Fe)}break;case 4:ss(o,i),Is(i);break;case 13:ss(o,i),Is(i),w=i.child,w.flags&8192&&(T=w.memoizedState!==null,w.stateNode.isHidden=T,!T||w.alternate!==null&&w.alternate.memoizedState!==null||(ng=Rt())),p&4&&j0(i);break;case 22:if(pe=d!==null&&d.memoizedState!==null,i.mode&1?(Ln=(ie=Ln)||pe,ss(o,i),Ln=ie):ss(o,i),Is(i),p&8192){if(ie=i.memoizedState!==null,(i.stateNode.isHidden=ie)&&!pe&&(i.mode&1)!==0)for(Oe=i,pe=i.child;pe!==null;){for(ge=Oe=pe;Oe!==null;){switch(fe=Oe,Ae=fe.child,fe.tag){case 0:case 11:case 14:case 15:lu(4,fe,fe.return);break;case 1:Cl(fe,fe.return);var Le=fe.stateNode;if(typeof Le.componentWillUnmount=="function"){p=fe,d=fe.return;try{o=p,Le.props=o.memoizedProps,Le.state=o.memoizedState,Le.componentWillUnmount()}catch(Fe){Jt(p,d,Fe)}}break;case 5:Cl(fe,fe.return);break;case 22:if(fe.memoizedState!==null){k0(ge);continue}}Ae!==null?(Ae.return=fe,Oe=Ae):k0(ge)}pe=pe.sibling}e:for(pe=null,ge=i;;){if(ge.tag===5){if(pe===null){pe=ge;try{w=ge.stateNode,ie?(T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(W=ge.stateNode,H=ge.memoizedProps.style,O=H!=null&&H.hasOwnProperty("display")?H.display:null,W.style.display=qr("display",O))}catch(Fe){Jt(i,i.return,Fe)}}}else if(ge.tag===6){if(pe===null)try{ge.stateNode.nodeValue=ie?"":ge.memoizedProps}catch(Fe){Jt(i,i.return,Fe)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===i)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===i)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===i)break e;pe===ge&&(pe=null),ge=ge.return}pe===ge&&(pe=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:ss(o,i),Is(i),p&4&&j0(i);break;case 21:break;default:ss(o,i),Is(i)}}function Is(i){var o=i.flags;if(o&2){try{e:{for(var d=i.return;d!==null;){if(T0(d)){var p=d;break e}d=d.return}throw Error(t(160))}switch(p.tag){case 5:var w=p.stateNode;p.flags&32&&(mr(w,""),p.flags&=-33);var T=C0(i);Zp(i,T,w);break;case 3:case 4:var O=p.stateNode.containerInfo,W=C0(i);Jp(i,W,O);break;default:throw Error(t(161))}}catch(H){Jt(i,i.return,H)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function qA(i,o,d){Oe=i,P0(i)}function P0(i,o,d){for(var p=(i.mode&1)!==0;Oe!==null;){var w=Oe,T=w.child;if(w.tag===22&&p){var O=w.memoizedState!==null||vh;if(!O){var W=w.alternate,H=W!==null&&W.memoizedState!==null||Ln;W=vh;var ie=Ln;if(vh=O,(Ln=H)&&!ie)for(Oe=w;Oe!==null;)O=Oe,H=O.child,O.tag===22&&O.memoizedState!==null?D0(w):H!==null?(H.return=O,Oe=H):D0(w);for(;T!==null;)Oe=T,P0(T),T=T.sibling;Oe=w,vh=W,Ln=ie}R0(i)}else(w.subtreeFlags&8772)!==0&&T!==null?(T.return=w,Oe=T):R0(i)}}function R0(i){for(;Oe!==null;){var o=Oe;if((o.flags&8772)!==0){var d=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Ln||yh(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!Ln)if(d===null)p.componentDidMount();else{var w=o.elementType===o.type?d.memoizedProps:ns(o.type,d.memoizedProps);p.componentDidUpdate(w,d.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var T=o.updateQueue;T!==null&&kw(o,T,p);break;case 3:var O=o.updateQueue;if(O!==null){if(d=null,o.child!==null)switch(o.child.tag){case 5:d=o.child.stateNode;break;case 1:d=o.child.stateNode}kw(o,O,d)}break;case 5:var W=o.stateNode;if(d===null&&o.flags&4){d=W;var H=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&d.focus();break;case"img":H.src&&(d.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var ie=o.alternate;if(ie!==null){var pe=ie.memoizedState;if(pe!==null){var ge=pe.dehydrated;ge!==null&&Jr(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ln||o.flags&512&&Xp(o)}catch(fe){Jt(o,o.return,fe)}}if(o===i){Oe=null;break}if(d=o.sibling,d!==null){d.return=o.return,Oe=d;break}Oe=o.return}}function k0(i){for(;Oe!==null;){var o=Oe;if(o===i){Oe=null;break}var d=o.sibling;if(d!==null){d.return=o.return,Oe=d;break}Oe=o.return}}function D0(i){for(;Oe!==null;){var o=Oe;try{switch(o.tag){case 0:case 11:case 15:var d=o.return;try{yh(4,o)}catch(H){Jt(o,d,H)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var w=o.return;try{p.componentDidMount()}catch(H){Jt(o,w,H)}}var T=o.return;try{Xp(o)}catch(H){Jt(o,T,H)}break;case 5:var O=o.return;try{Xp(o)}catch(H){Jt(o,O,H)}}}catch(H){Jt(o,o.return,H)}if(o===i){Oe=null;break}var W=o.sibling;if(W!==null){W.return=o.return,Oe=W;break}Oe=o.return}}var WA=Math.ceil,xh=L.ReactCurrentDispatcher,eg=L.ReactCurrentOwner,Fr=L.ReactCurrentBatchConfig,gt=0,wn=null,on=null,Cn=0,_r=0,Il=Ki(0),pn=0,cu=null,fa=0,wh=0,tg=0,uu=null,or=null,ng=0,jl=1/0,fi=null,_h=!1,rg=null,Zi=null,Eh=!1,eo=null,bh=0,du=0,sg=null,Sh=-1,Nh=0;function Qn(){return(gt&6)!==0?Rt():Sh!==-1?Sh:Sh=Rt()}function to(i){return(i.mode&1)===0?1:(gt&2)!==0&&Cn!==0?Cn&-Cn:IA.transition!==null?(Nh===0&&(Nh=ta()),Nh):(i=ht,i!==0||(i=window.event,i=i===void 0?16:Vc(i.type)),i)}function is(i,o,d,p){if(50<du)throw du=0,sg=null,Error(t(185));Vi(i,d,p),((gt&2)===0||i!==wn)&&(i===wn&&((gt&2)===0&&(wh|=d),pn===4&&no(i,Cn)),ar(i,p),d===1&&gt===0&&(o.mode&1)===0&&(jl=Rt()+500,Zd&&Qi()))}function ar(i,o){var d=i.callbackNode;ti(i,o);var p=ea(i,i===wn?Cn:0);if(p===0)d!==null&&Dc(d),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(d!=null&&Dc(d),o===1)i.tag===0?CA(L0.bind(null,i)):_w(L0.bind(null,i)),bA(function(){(gt&6)===0&&Qi()}),d=null;else{switch($i(p)){case 1:d=Jo;break;case 4:d=Li;break;case 16:d=Pr;break;case 536870912:d=Nd;break;default:d=Pr}d=q0(d,O0.bind(null,i))}i.callbackPriority=o,i.callbackNode=d}}function O0(i,o){if(Sh=-1,Nh=0,(gt&6)!==0)throw Error(t(327));var d=i.callbackNode;if(Al()&&i.callbackNode!==d)return null;var p=ea(i,i===wn?Cn:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||o)o=Th(i,p);else{o=p;var w=gt;gt|=2;var T=F0();(wn!==i||Cn!==o)&&(fi=null,jl=Rt()+500,pa(i,o));do try{GA();break}catch(W){M0(i,W)}while(!0);Ep(),xh.current=T,gt=w,on!==null?o=0:(wn=null,Cn=0,o=pn)}if(o!==0){if(o===2&&(w=gr(i),w!==0&&(p=w,o=ig(i,w))),o===1)throw d=cu,pa(i,0),no(i,p),ar(i,Rt()),d;if(o===6)no(i,p);else{if(w=i.current.alternate,(p&30)===0&&!HA(w)&&(o=Th(i,p),o===2&&(T=gr(i),T!==0&&(p=T,o=ig(i,T))),o===1))throw d=cu,pa(i,0),no(i,p),ar(i,Rt()),d;switch(i.finishedWork=w,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:ga(i,or,fi);break;case 3:if(no(i,p),(p&130023424)===p&&(o=ng+500-Rt(),10<o)){if(ea(i,0)!==0)break;if(w=i.suspendedLanes,(w&p)!==p){Qn(),i.pingedLanes|=i.suspendedLanes&w;break}i.timeoutHandle=dp(ga.bind(null,i,or,fi),o);break}ga(i,or,fi);break;case 4:if(no(i,p),(p&4194240)===p)break;for(o=i.eventTimes,w=-1;0<p;){var O=31-Hn(p);T=1<<O,O=o[O],O>w&&(w=O),p&=~T}if(p=w,p=Rt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*WA(p/1960))-p,10<p){i.timeoutHandle=dp(ga.bind(null,i,or,fi),p);break}ga(i,or,fi);break;case 5:ga(i,or,fi);break;default:throw Error(t(329))}}}return ar(i,Rt()),i.callbackNode===d?O0.bind(null,i):null}function ig(i,o){var d=uu;return i.current.memoizedState.isDehydrated&&(pa(i,o).flags|=256),i=Th(i,o),i!==2&&(o=or,or=d,o!==null&&og(o)),i}function og(i){or===null?or=i:or.push.apply(or,i)}function HA(i){for(var o=i;;){if(o.flags&16384){var d=o.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var p=0;p<d.length;p++){var w=d[p],T=w.getSnapshot;w=w.value;try{if(!es(T(),w))return!1}catch{return!1}}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function no(i,o){for(o&=~tg,o&=~wh,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var d=31-Hn(o),p=1<<d;i[d]=-1,o&=~p}}function L0(i){if((gt&6)!==0)throw Error(t(327));Al();var o=ea(i,0);if((o&1)===0)return ar(i,Rt()),null;var d=Th(i,o);if(i.tag!==0&&d===2){var p=gr(i);p!==0&&(o=p,d=ig(i,p))}if(d===1)throw d=cu,pa(i,0),no(i,o),ar(i,Rt()),d;if(d===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,ga(i,or,fi),ar(i,Rt()),null}function ag(i,o){var d=gt;gt|=1;try{return i(o)}finally{gt=d,gt===0&&(jl=Rt()+500,Zd&&Qi())}}function ma(i){eo!==null&&eo.tag===0&&(gt&6)===0&&Al();var o=gt;gt|=1;var d=Fr.transition,p=ht;try{if(Fr.transition=null,ht=1,i)return i()}finally{ht=p,Fr.transition=d,gt=o,(gt&6)===0&&Qi()}}function lg(){_r=Il.current,Ft(Il)}function pa(i,o){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,EA(d)),on!==null)for(d=on.return;d!==null;){var p=d;switch(vp(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Xd();break;case 3:Nl(),Ft(rr),Ft(kn),Ap();break;case 5:Ip(p);break;case 4:Nl();break;case 13:Ft(Kt);break;case 19:Ft(Kt);break;case 10:bp(p.type._context);break;case 22:case 23:lg()}d=d.return}if(wn=i,on=i=ro(i.current,null),Cn=_r=o,pn=0,cu=null,tg=wh=fa=0,or=uu=null,ua!==null){for(o=0;o<ua.length;o++)if(d=ua[o],p=d.interleaved,p!==null){d.interleaved=null;var w=p.next,T=d.pending;if(T!==null){var O=T.next;T.next=w,p.next=O}d.pending=p}ua=null}return i}function M0(i,o){do{var d=on;try{if(Ep(),ch.current=fh,uh){for(var p=Gt.memoizedState;p!==null;){var w=p.queue;w!==null&&(w.pending=null),p=p.next}uh=!1}if(ha=0,xn=mn=Gt=null,ru=!1,su=0,eg.current=null,d===null||d.return===null){pn=1,cu=o,on=null;break}e:{var T=i,O=d.return,W=d,H=o;if(o=Cn,W.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var ie=H,pe=W,ge=pe.tag;if((pe.mode&1)===0&&(ge===0||ge===11||ge===15)){var fe=pe.alternate;fe?(pe.updateQueue=fe.updateQueue,pe.memoizedState=fe.memoizedState,pe.lanes=fe.lanes):(pe.updateQueue=null,pe.memoizedState=null)}var Ae=l0(O);if(Ae!==null){Ae.flags&=-257,c0(Ae,O,W,T,o),Ae.mode&1&&a0(T,ie,o),o=Ae,H=ie;var Le=o.updateQueue;if(Le===null){var Fe=new Set;Fe.add(H),o.updateQueue=Fe}else Le.add(H);break e}else{if((o&1)===0){a0(T,ie,o),cg();break e}H=Error(t(426))}}else if(qt&&W.mode&1){var tn=l0(O);if(tn!==null){(tn.flags&65536)===0&&(tn.flags|=256),c0(tn,O,W,T,o),wp(Tl(H,W));break e}}T=H=Tl(H,W),pn!==4&&(pn=2),uu===null?uu=[T]:uu.push(T),T=O;do{switch(T.tag){case 3:T.flags|=65536,o&=-o,T.lanes|=o;var ne=i0(T,H,o);Rw(T,ne);break e;case 1:W=H;var G=T.type,re=T.stateNode;if((T.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(Zi===null||!Zi.has(re)))){T.flags|=65536,o&=-o,T.lanes|=o;var xe=o0(T,W,o);Rw(T,xe);break e}}T=T.return}while(T!==null)}U0(d)}catch(Ve){o=Ve,on===d&&d!==null&&(on=d=d.return);continue}break}while(!0)}function F0(){var i=xh.current;return xh.current=fh,i===null?fh:i}function cg(){(pn===0||pn===3||pn===2)&&(pn=4),wn===null||(fa&268435455)===0&&(wh&268435455)===0||no(wn,Cn)}function Th(i,o){var d=gt;gt|=2;var p=F0();(wn!==i||Cn!==o)&&(fi=null,pa(i,o));do try{KA();break}catch(w){M0(i,w)}while(!0);if(Ep(),gt=d,xh.current=p,on!==null)throw Error(t(261));return wn=null,Cn=0,pn}function KA(){for(;on!==null;)V0(on)}function GA(){for(;on!==null&&!bd();)V0(on)}function V0(i){var o=B0(i.alternate,i,_r);i.memoizedProps=i.pendingProps,o===null?U0(i):on=o,eg.current=null}function U0(i){var o=i;do{var d=o.alternate;if(i=o.return,(o.flags&32768)===0){if(d=UA(d,o,_r),d!==null){on=d;return}}else{if(d=$A(d,o),d!==null){d.flags&=32767,on=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{pn=6,on=null;return}}if(o=o.sibling,o!==null){on=o;return}on=o=i}while(o!==null);pn===0&&(pn=5)}function ga(i,o,d){var p=ht,w=Fr.transition;try{Fr.transition=null,ht=1,QA(i,o,d,p)}finally{Fr.transition=w,ht=p}return null}function QA(i,o,d,p){do Al();while(eo!==null);if((gt&6)!==0)throw Error(t(327));d=i.finishedWork;var w=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var T=d.lanes|d.childLanes;if(It(i,T),i===wn&&(on=wn=null,Cn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Eh||(Eh=!0,q0(Pr,function(){return Al(),null})),T=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||T){T=Fr.transition,Fr.transition=null;var O=ht;ht=1;var W=gt;gt|=4,eg.current=null,BA(i,d),A0(d,i),pA(cp),Bi=!!lp,cp=lp=null,i.current=d,qA(d),Hm(),gt=W,ht=O,Fr.transition=T}else i.current=d;if(Eh&&(Eh=!1,eo=i,bh=w),T=i.pendingLanes,T===0&&(Zi=null),Td(d.stateNode),ar(i,Rt()),o!==null)for(p=i.onRecoverableError,d=0;d<o.length;d++)w=o[d],p(w.value,{componentStack:w.stack,digest:w.digest});if(_h)throw _h=!1,i=rg,rg=null,i;return(bh&1)!==0&&i.tag!==0&&Al(),T=i.pendingLanes,(T&1)!==0?i===sg?du++:(du=0,sg=i):du=0,Qi(),null}function Al(){if(eo!==null){var i=$i(bh),o=Fr.transition,d=ht;try{if(Fr.transition=null,ht=16>i?16:i,eo===null)var p=!1;else{if(i=eo,eo=null,bh=0,(gt&6)!==0)throw Error(t(331));var w=gt;for(gt|=4,Oe=i.current;Oe!==null;){var T=Oe,O=T.child;if((Oe.flags&16)!==0){var W=T.deletions;if(W!==null){for(var H=0;H<W.length;H++){var ie=W[H];for(Oe=ie;Oe!==null;){var pe=Oe;switch(pe.tag){case 0:case 11:case 15:lu(8,pe,T)}var ge=pe.child;if(ge!==null)ge.return=pe,Oe=ge;else for(;Oe!==null;){pe=Oe;var fe=pe.sibling,Ae=pe.return;if(N0(pe),pe===ie){Oe=null;break}if(fe!==null){fe.return=Ae,Oe=fe;break}Oe=Ae}}}var Le=T.alternate;if(Le!==null){var Fe=Le.child;if(Fe!==null){Le.child=null;do{var tn=Fe.sibling;Fe.sibling=null,Fe=tn}while(Fe!==null)}}Oe=T}}if((T.subtreeFlags&2064)!==0&&O!==null)O.return=T,Oe=O;else e:for(;Oe!==null;){if(T=Oe,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:lu(9,T,T.return)}var ne=T.sibling;if(ne!==null){ne.return=T.return,Oe=ne;break e}Oe=T.return}}var G=i.current;for(Oe=G;Oe!==null;){O=Oe;var re=O.child;if((O.subtreeFlags&2064)!==0&&re!==null)re.return=O,Oe=re;else e:for(O=G;Oe!==null;){if(W=Oe,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:yh(9,W)}}catch(Ve){Jt(W,W.return,Ve)}if(W===O){Oe=null;break e}var xe=W.sibling;if(xe!==null){xe.return=W.return,Oe=xe;break e}Oe=W.return}}if(gt=w,Qi(),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(Zo,i)}catch{}p=!0}return p}finally{ht=d,Fr.transition=o}}return!1}function $0(i,o,d){o=Tl(d,o),o=i0(i,o,1),i=Xi(i,o,1),o=Qn(),i!==null&&(Vi(i,1,o),ar(i,o))}function Jt(i,o,d){if(i.tag===3)$0(i,i,d);else for(;o!==null;){if(o.tag===3){$0(o,i,d);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Zi===null||!Zi.has(p))){i=Tl(d,i),i=o0(o,i,1),o=Xi(o,i,1),i=Qn(),o!==null&&(Vi(o,1,i),ar(o,i));break}}o=o.return}}function YA(i,o,d){var p=i.pingCache;p!==null&&p.delete(o),o=Qn(),i.pingedLanes|=i.suspendedLanes&d,wn===i&&(Cn&d)===d&&(pn===4||pn===3&&(Cn&130023424)===Cn&&500>Rt()-ng?pa(i,0):tg|=d),ar(i,o)}function z0(i,o){o===0&&((i.mode&1)===0?o=1:(o=Za,Za<<=1,(Za&130023424)===0&&(Za=4194304)));var d=Qn();i=ui(i,o),i!==null&&(Vi(i,o,d),ar(i,d))}function XA(i){var o=i.memoizedState,d=0;o!==null&&(d=o.retryLane),z0(i,d)}function JA(i,o){var d=0;switch(i.tag){case 13:var p=i.stateNode,w=i.memoizedState;w!==null&&(d=w.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),z0(i,d)}var B0;B0=function(i,o,d){if(i!==null)if(i.memoizedProps!==o.pendingProps||rr.current)ir=!0;else{if((i.lanes&d)===0&&(o.flags&128)===0)return ir=!1,VA(i,o,d);ir=(i.flags&131072)!==0}else ir=!1,qt&&(o.flags&1048576)!==0&&Ew(o,th,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;gh(i,o),i=o.pendingProps;var w=yl(o,kn.current);Sl(o,d),w=kp(null,o,p,i,w,d);var T=Dp();return o.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,sr(p)?(T=!0,Jd(o)):T=!1,o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Tp(o),w.updater=mh,o.stateNode=w,w._reactInternals=o,Up(o,p,i,d),o=qp(null,o,p,!0,T,d)):(o.tag=0,qt&&T&&gp(o),Gn(null,o,w,d),o=o.child),o;case 16:p=o.elementType;e:{switch(gh(i,o),i=o.pendingProps,w=p._init,p=w(p._payload),o.type=p,w=o.tag=eP(p),i=ns(p,i),w){case 0:o=Bp(null,o,p,i,d);break e;case 1:o=p0(null,o,p,i,d);break e;case 11:o=u0(null,o,p,i,d);break e;case 14:o=d0(null,o,p,ns(p.type,i),d);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:ns(p,w),Bp(i,o,p,w,d);case 1:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:ns(p,w),p0(i,o,p,w,d);case 3:e:{if(g0(o),i===null)throw Error(t(387));p=o.pendingProps,T=o.memoizedState,w=T.element,Pw(i,o),ah(o,p,null,d);var O=o.memoizedState;if(p=O.element,T.isDehydrated)if(T={element:p,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){w=Tl(Error(t(423)),o),o=v0(i,o,p,d,w);break e}else if(p!==w){w=Tl(Error(t(424)),o),o=v0(i,o,p,d,w);break e}else for(wr=Hi(o.stateNode.containerInfo.firstChild),xr=o,qt=!0,ts=null,d=jw(o,null,p,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(_l(),p===w){o=hi(i,o,d);break e}Gn(i,o,p,d)}o=o.child}return o;case 5:return Dw(o),i===null&&xp(o),p=o.type,w=o.pendingProps,T=i!==null?i.memoizedProps:null,O=w.children,up(p,w)?O=null:T!==null&&up(p,T)&&(o.flags|=32),m0(i,o),Gn(i,o,O,d),o.child;case 6:return i===null&&xp(o),null;case 13:return y0(i,o,d);case 4:return Cp(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=El(o,null,p,d):Gn(i,o,p,d),o.child;case 11:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:ns(p,w),u0(i,o,p,w,d);case 7:return Gn(i,o,o.pendingProps,d),o.child;case 8:return Gn(i,o,o.pendingProps.children,d),o.child;case 12:return Gn(i,o,o.pendingProps.children,d),o.child;case 10:e:{if(p=o.type._context,w=o.pendingProps,T=o.memoizedProps,O=w.value,kt(sh,p._currentValue),p._currentValue=O,T!==null)if(es(T.value,O)){if(T.children===w.children&&!rr.current){o=hi(i,o,d);break e}}else for(T=o.child,T!==null&&(T.return=o);T!==null;){var W=T.dependencies;if(W!==null){O=T.child;for(var H=W.firstContext;H!==null;){if(H.context===p){if(T.tag===1){H=di(-1,d&-d),H.tag=2;var ie=T.updateQueue;if(ie!==null){ie=ie.shared;var pe=ie.pending;pe===null?H.next=H:(H.next=pe.next,pe.next=H),ie.pending=H}}T.lanes|=d,H=T.alternate,H!==null&&(H.lanes|=d),Sp(T.return,d,o),W.lanes|=d;break}H=H.next}}else if(T.tag===10)O=T.type===o.type?null:T.child;else if(T.tag===18){if(O=T.return,O===null)throw Error(t(341));O.lanes|=d,W=O.alternate,W!==null&&(W.lanes|=d),Sp(O,d,o),O=T.sibling}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===o){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}Gn(i,o,w.children,d),o=o.child}return o;case 9:return w=o.type,p=o.pendingProps.children,Sl(o,d),w=Lr(w),p=p(w),o.flags|=1,Gn(i,o,p,d),o.child;case 14:return p=o.type,w=ns(p,o.pendingProps),w=ns(p.type,w),d0(i,o,p,w,d);case 15:return h0(i,o,o.type,o.pendingProps,d);case 17:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:ns(p,w),gh(i,o),o.tag=1,sr(p)?(i=!0,Jd(o)):i=!1,Sl(o,d),r0(o,p,w),Up(o,p,w,d),qp(null,o,p,!0,i,d);case 19:return w0(i,o,d);case 22:return f0(i,o,d)}throw Error(t(156,o.tag))};function q0(i,o){return Xa(i,o)}function ZA(i,o,d,p){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(i,o,d,p){return new ZA(i,o,d,p)}function ug(i){return i=i.prototype,!(!i||!i.isReactComponent)}function eP(i){if(typeof i=="function")return ug(i)?1:0;if(i!=null){if(i=i.$$typeof,i===z)return 11;if(i===K)return 14}return 2}function ro(i,o){var d=i.alternate;return d===null?(d=Vr(i.tag,o,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=o,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,o=i.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function Ch(i,o,d,p,w,T){var O=2;if(p=i,typeof i=="function")ug(i)&&(O=1);else if(typeof i=="string")O=5;else e:switch(i){case P:return va(d.children,w,T,o);case R:O=8,w|=8;break;case D:return i=Vr(12,d,o,w|2),i.elementType=D,i.lanes=T,i;case M:return i=Vr(13,d,o,w),i.elementType=M,i.lanes=T,i;case oe:return i=Vr(19,d,o,w),i.elementType=oe,i.lanes=T,i;case X:return Ih(d,w,T,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:O=10;break e;case $:O=9;break e;case z:O=11;break e;case K:O=14;break e;case Z:O=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Vr(O,d,o,w),o.elementType=i,o.type=p,o.lanes=T,o}function va(i,o,d,p){return i=Vr(7,i,p,o),i.lanes=d,i}function Ih(i,o,d,p){return i=Vr(22,i,p,o),i.elementType=X,i.lanes=d,i.stateNode={isHidden:!1},i}function dg(i,o,d){return i=Vr(6,i,null,o),i.lanes=d,i}function hg(i,o,d){return o=Vr(4,i.children!==null?i.children:[],i.key,o),o.lanes=d,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function tP(i,o,d,p,w){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fi(0),this.expirationTimes=Fi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.identifierPrefix=p,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function fg(i,o,d,p,w,T,O,W,H){return i=new tP(i,o,d,W,H),o===1?(o=1,T===!0&&(o|=8)):o=0,T=Vr(3,null,null,o),i.current=T,T.stateNode=i,T.memoizedState={element:p,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tp(T),i}function nP(i,o,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:p==null?null:""+p,children:i,containerInfo:o,implementation:d}}function W0(i){if(!i)return Gi;i=i._reactInternals;e:{if(Kr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(sr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var d=i.type;if(sr(d))return xw(i,d,o)}return o}function H0(i,o,d,p,w,T,O,W,H){return i=fg(d,p,!0,i,w,T,O,W,H),i.context=W0(null),d=i.current,p=Qn(),w=to(d),T=di(p,w),T.callback=o??null,Xi(d,T,w),i.current.lanes=w,Vi(i,w,p),ar(i,p),i}function jh(i,o,d,p){var w=o.current,T=Qn(),O=to(w);return d=W0(d),o.context===null?o.context=d:o.pendingContext=d,o=di(T,O),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=Xi(w,o,O),i!==null&&(is(i,w,O,T),oh(i,w,O)),O}function Ah(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function K0(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<o?d:o}}function mg(i,o){K0(i,o),(i=i.alternate)&&K0(i,o)}function rP(){return null}var G0=typeof reportError=="function"?reportError:function(i){console.error(i)};function pg(i){this._internalRoot=i}Ph.prototype.render=pg.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));jh(i,o,null,null)},Ph.prototype.unmount=pg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;ma(function(){jh(null,i,null,null)}),o[oi]=null}};function Ph(i){this._internalRoot=i}Ph.prototype.unstable_scheduleHydration=function(i){if(i){var o=Pd();i={blockedOn:null,target:i,priority:o};for(var d=0;d<_s.length&&o!==0&&o<_s[d].priority;d++);_s.splice(d,0,i),d===0&&Dd(i)}};function gg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Rh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Q0(){}function sP(i,o,d,p,w){if(w){if(typeof p=="function"){var T=p;p=function(){var ie=Ah(O);T.call(ie)}}var O=H0(o,p,i,0,null,!1,!1,"",Q0);return i._reactRootContainer=O,i[oi]=O.current,Qc(i.nodeType===8?i.parentNode:i),ma(),O}for(;w=i.lastChild;)i.removeChild(w);if(typeof p=="function"){var W=p;p=function(){var ie=Ah(H);W.call(ie)}}var H=fg(i,0,!1,null,null,!1,!1,"",Q0);return i._reactRootContainer=H,i[oi]=H.current,Qc(i.nodeType===8?i.parentNode:i),ma(function(){jh(o,H,d,p)}),H}function kh(i,o,d,p,w){var T=d._reactRootContainer;if(T){var O=T;if(typeof w=="function"){var W=w;w=function(){var H=Ah(O);W.call(H)}}jh(o,O,i,w)}else O=sP(d,o,i,w,p);return Ah(O)}jd=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var d=Mi(o.pendingLanes);d!==0&&(Ui(o,d|1),ar(o,Rt()),(gt&6)===0&&(jl=Rt()+500,Qi()))}break;case 13:ma(function(){var p=ui(i,1);if(p!==null){var w=Qn();is(p,i,1,w)}}),mg(i,1)}},el=function(i){if(i.tag===13){var o=ui(i,134217728);if(o!==null){var d=Qn();is(o,i,134217728,d)}mg(i,134217728)}},Ad=function(i){if(i.tag===13){var o=to(i),d=ui(i,o);if(d!==null){var p=Qn();is(d,i,o,p)}mg(i,o)}},Pd=function(){return ht},Rd=function(i,o){var d=ht;try{return ht=i,o()}finally{ht=d}},be=function(i,o,d){switch(o){case"input":if(At(i,d),o=d.name,d.type==="radio"&&o!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<d.length;o++){var p=d[o];if(p!==i&&p.form===i.form){var w=Yd(p);if(!w)throw Error(t(90));Ke(p),At(p,w)}}}break;case"textarea":Ir(i,d);break;case"select":o=d.value,o!=null&&fr(i,!!d.multiple,o,!1)}},ys=ag,Di=ma;var iP={usingClientEntryPoint:!1,Events:[Jc,gl,Yd,je,ki,ag]},hu={findFiberByHostInstance:oa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oP={bundleType:hu.bundleType,version:hu.version,rendererPackageName:hu.rendererPackageName,rendererConfig:hu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=kc(i),i===null?null:i.stateNode},findFiberByHostInstance:hu.findFiberByHostInstance||rP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{Zo=Dh.inject(oP),pr=Dh}catch{}}return lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iP,lr.createPortal=function(i,o){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gg(o))throw Error(t(200));return nP(i,o,null,d)},lr.createRoot=function(i,o){if(!gg(i))throw Error(t(299));var d=!1,p="",w=G0;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(w=o.onRecoverableError)),o=fg(i,1,!1,null,null,d,!1,p,w),i[oi]=o.current,Qc(i.nodeType===8?i.parentNode:i),new pg(o)},lr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=kc(o),i=i===null?null:i.stateNode,i},lr.flushSync=function(i){return ma(i)},lr.hydrate=function(i,o,d){if(!Rh(o))throw Error(t(200));return kh(null,i,o,!0,d)},lr.hydrateRoot=function(i,o,d){if(!gg(i))throw Error(t(405));var p=d!=null&&d.hydratedSources||null,w=!1,T="",O=G0;if(d!=null&&(d.unstable_strictMode===!0&&(w=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(O=d.onRecoverableError)),o=H0(o,null,i,1,d??null,w,!1,T,O),i[oi]=o.current,Qc(i),p)for(i=0;i<p.length;i++)d=p[i],w=d._getVersion,w=w(d._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[d,w]:o.mutableSourceEagerHydrationData.push(d,w);return new Ph(o)},lr.render=function(i,o,d){if(!Rh(o))throw Error(t(200));return kh(null,i,o,!1,d)},lr.unmountComponentAtNode=function(i){if(!Rh(i))throw Error(t(40));return i._reactRootContainer?(ma(function(){kh(null,null,i,!1,function(){i._reactRootContainer=null,i[oi]=null})}),!0):!1},lr.unstable_batchedUpdates=ag,lr.unstable_renderSubtreeIntoContainer=function(i,o,d,p){if(!Rh(d))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return kh(i,o,d,!1,p)},lr.version="18.3.1-next-f1338f8080-20240426",lr}var l_;function a1(){if(l_)return Eg.exports;l_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Eg.exports=TP(),Eg.exports}var $a=a1();const Zf=i1($a);function ze(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function CP(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function l1(...n){return e=>n.forEach(t=>CP(t,e))}function vt(...n){return _.useCallback(l1(...n),n)}function ji(n,e=[]){let t=[];function r(a,c){const u=_.createContext(c),h=t.length;t=[...t,c];function m(v){const{scope:y,children:b,...S}=v,E=(y==null?void 0:y[n][h])||u,x=_.useMemo(()=>S,Object.values(S));return l.jsx(E.Provider,{value:x,children:b})}function g(v,y){const b=(y==null?void 0:y[n][h])||u,S=_.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${a}\``)}return m.displayName=a+"Provider",[m,g]}const s=()=>{const a=t.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[n])||a;return _.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,IP(s,...e)]}function IP(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:m})=>{const v=h(a)[`__scope${m}`];return{...u,...v}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var ja=_.forwardRef((n,e)=>{const{children:t,...r}=n,s=_.Children.toArray(t),a=s.find(jP);if(a){const c=a.props.children,u=s.map(h=>h===a?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:h);return l.jsx(ev,{...r,ref:e,children:_.isValidElement(c)?_.cloneElement(c,void 0,u):null})}return l.jsx(ev,{...r,ref:e,children:t})});ja.displayName="Slot";var ev=_.forwardRef((n,e)=>{const{children:t,...r}=n;if(_.isValidElement(t)){const s=PP(t);return _.cloneElement(t,{...AP(r,t.props),ref:e?l1(e,s):s})}return _.Children.count(t)>1?_.Children.only(null):null});ev.displayName="SlotClone";var c1=({children:n})=>l.jsx(l.Fragment,{children:n});function jP(n){return _.isValidElement(n)&&n.type===c1}function AP(n,e){const t={...e};for(const r in e){const s=n[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?t[r]=(...u)=>{a(...u),s(...u)}:s&&(t[r]=s):r==="style"?t[r]={...s,...a}:r==="className"&&(t[r]=[s,a].filter(Boolean).join(" "))}return{...n,...t}}function PP(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function cy(n){const e=n+"CollectionProvider",[t,r]=ji(e),[s,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=b=>{const{scope:S,children:E}=b,x=Ne.useRef(null),A=Ne.useRef(new Map).current;return l.jsx(s,{scope:S,itemMap:A,collectionRef:x,children:E})};c.displayName=e;const u=n+"CollectionSlot",h=Ne.forwardRef((b,S)=>{const{scope:E,children:x}=b,A=a(u,E),I=vt(S,A.collectionRef);return l.jsx(ja,{ref:I,children:x})});h.displayName=u;const m=n+"CollectionItemSlot",g="data-radix-collection-item",v=Ne.forwardRef((b,S)=>{const{scope:E,children:x,...A}=b,I=Ne.useRef(null),C=vt(S,I),L=a(m,E);return Ne.useEffect(()=>(L.itemMap.set(I,{ref:I,...A}),()=>void L.itemMap.delete(I))),l.jsx(ja,{[g]:"",ref:C,children:x})});v.displayName=m;function y(b){const S=a(n+"CollectionConsumer",b);return Ne.useCallback(()=>{const x=S.collectionRef.current;if(!x)return[];const A=Array.from(x.querySelectorAll(`[${g}]`));return Array.from(S.itemMap.values()).sort((L,V)=>A.indexOf(L.ref.current)-A.indexOf(V.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:c,Slot:h,ItemSlot:v},y,r]}var RP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],He=RP.reduce((n,e)=>{const t=_.forwardRef((r,s)=>{const{asChild:a,...c}=r,u=a?ja:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(u,{...c,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function em(n,e){n&&$a.flushSync(()=>n.dispatchEvent(e))}function vn(n){const e=_.useRef(n);return _.useEffect(()=>{e.current=n}),_.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function uy(n,e=globalThis==null?void 0:globalThis.document){const t=vn(n);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var kP="DismissableLayer",tv="dismissableLayer.update",DP="dismissableLayer.pointerDownOutside",OP="dismissableLayer.focusOutside",c_,u1=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),d1=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=n,m=_.useContext(u1),[g,v]=_.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=_.useState({}),S=vt(e,P=>v(P)),E=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),A=E.indexOf(x),I=g?E.indexOf(g):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,L=I>=A,V=MP(P=>{const R=P.target,D=[...m.branches].some(k=>k.contains(R));!L||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},y),q=FP(P=>{const R=P.target;[...m.branches].some(k=>k.contains(R))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},y);return uy(P=>{I===m.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},y),_.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(c_=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),u_(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=c_)}},[g,y,t,m]),_.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),u_())},[g,m]),_.useEffect(()=>{const P=()=>b({});return document.addEventListener(tv,P),()=>document.removeEventListener(tv,P)},[]),l.jsx(He.div,{...h,ref:S,style:{pointerEvents:C?L?"auto":"none":void 0,...n.style},onFocusCapture:ze(n.onFocusCapture,q.onFocusCapture),onBlurCapture:ze(n.onBlurCapture,q.onBlurCapture),onPointerDownCapture:ze(n.onPointerDownCapture,V.onPointerDownCapture)})});d1.displayName=kP;var LP="DismissableLayerBranch",h1=_.forwardRef((n,e)=>{const t=_.useContext(u1),r=_.useRef(null),s=vt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(He.div,{...n,ref:s})});h1.displayName=LP;function MP(n,e=globalThis==null?void 0:globalThis.document){const t=vn(n),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){f1(DP,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function FP(n,e=globalThis==null?void 0:globalThis.document){const t=vn(n),r=_.useRef(!1);return _.useEffect(()=>{const s=a=>{a.target&&!r.current&&f1(OP,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function u_(){const n=new CustomEvent(tv);document.dispatchEvent(n)}function f1(n,e,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?em(s,a):s.dispatchEvent(a)}var VP=d1,UP=h1,Wt=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},$P="Portal",m1=_.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,a]=_.useState(!1);Wt(()=>a(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Zf.createPortal(l.jsx(He.div,{...r,ref:e}),c):null});m1.displayName=$P;function zP(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var dy=n=>{const{present:e,children:t}=n,r=BP(e),s=typeof t=="function"?t({present:r.isPresent}):_.Children.only(t),a=vt(r.ref,qP(s));return typeof t=="function"||r.isPresent?_.cloneElement(s,{ref:a}):null};dy.displayName="Presence";function BP(n){const[e,t]=_.useState(),r=_.useRef({}),s=_.useRef(n),a=_.useRef("none"),c=n?"mounted":"unmounted",[u,h]=zP(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const m=Lh(r.current);a.current=u==="mounted"?m:"none"},[u]),Wt(()=>{const m=r.current,g=s.current;if(g!==n){const y=a.current,b=Lh(m);n?h("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?h("UNMOUNT"):h(g&&y!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Wt(()=>{if(e){const m=v=>{const b=Lh(r.current).includes(v.animationName);v.target===e&&b&&$a.flushSync(()=>h("ANIMATION_END"))},g=v=>{v.target===e&&(a.current=Lh(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function Lh(n){return(n==null?void 0:n.animationName)||"none"}function qP(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Aa({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=WP({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:r,u=vn(t),h=_.useCallback(m=>{if(a){const v=typeof m=="function"?m(n):m;v!==n&&u(v)}else s(m)},[a,n,s,u]);return[c,h]}function WP({defaultProp:n,onChange:e}){const t=_.useState(n),[r]=t,s=_.useRef(r),a=vn(e);return _.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),t}var HP="VisuallyHidden",nd=_.forwardRef((n,e)=>l.jsx(He.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));nd.displayName=HP;var KP=nd,hy="ToastProvider",[fy,GP,QP]=cy("Toast"),[p1,Iz]=ji("Toast",[QP]),[YP,tm]=p1(hy),g1=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:c}=n,[u,h]=_.useState(null),[m,g]=_.useState(0),v=_.useRef(!1),y=_.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${hy}\`. Expected non-empty \`string\`.`),l.jsx(fy.Provider,{scope:e,children:l.jsx(YP,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:m,viewport:u,onViewportChange:h,onToastAdd:_.useCallback(()=>g(b=>b+1),[]),onToastRemove:_.useCallback(()=>g(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:y,children:c})})};g1.displayName=hy;var v1="ToastViewport",XP=["F8"],nv="toast.viewportPause",rv="toast.viewportResume",y1=_.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=XP,label:s="Notifications ({hotkey})",...a}=n,c=tm(v1,t),u=GP(t),h=_.useRef(null),m=_.useRef(null),g=_.useRef(null),v=_.useRef(null),y=vt(e,v,c.onViewportChange),b=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=c.toastCount>0;_.useEffect(()=>{const x=A=>{var C;r.every(L=>A[L]||A.code===L)&&((C=v.current)==null||C.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),_.useEffect(()=>{const x=h.current,A=v.current;if(S&&x&&A){const I=()=>{if(!c.isClosePausedRef.current){const q=new CustomEvent(nv);A.dispatchEvent(q),c.isClosePausedRef.current=!0}},C=()=>{if(c.isClosePausedRef.current){const q=new CustomEvent(rv);A.dispatchEvent(q),c.isClosePausedRef.current=!1}},L=q=>{!x.contains(q.relatedTarget)&&C()},V=()=>{x.contains(document.activeElement)||C()};return x.addEventListener("focusin",I),x.addEventListener("focusout",L),x.addEventListener("pointermove",I),x.addEventListener("pointerleave",V),window.addEventListener("blur",I),window.addEventListener("focus",C),()=>{x.removeEventListener("focusin",I),x.removeEventListener("focusout",L),x.removeEventListener("pointermove",I),x.removeEventListener("pointerleave",V),window.removeEventListener("blur",I),window.removeEventListener("focus",C)}}},[S,c.isClosePausedRef]);const E=_.useCallback(({tabbingDirection:x})=>{const I=u().map(C=>{const L=C.ref.current,V=[L,...uR(L)];return x==="forwards"?V:V.reverse()});return(x==="forwards"?I.reverse():I).flat()},[u]);return _.useEffect(()=>{const x=v.current;if(x){const A=I=>{var V,q,P;const C=I.altKey||I.ctrlKey||I.metaKey;if(I.key==="Tab"&&!C){const R=document.activeElement,D=I.shiftKey;if(I.target===x&&D){(V=m.current)==null||V.focus();return}const z=E({tabbingDirection:D?"backwards":"forwards"}),M=z.findIndex(oe=>oe===R);Ng(z.slice(M+1))?I.preventDefault():D?(q=m.current)==null||q.focus():(P=g.current)==null||P.focus()}};return x.addEventListener("keydown",A),()=>x.removeEventListener("keydown",A)}},[u,E]),l.jsxs(UP,{ref:h,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&l.jsx(sv,{ref:m,onFocusFromOutsideViewport:()=>{const x=E({tabbingDirection:"forwards"});Ng(x)}}),l.jsx(fy.Slot,{scope:t,children:l.jsx(He.ol,{tabIndex:-1,...a,ref:y})}),S&&l.jsx(sv,{ref:g,onFocusFromOutsideViewport:()=>{const x=E({tabbingDirection:"backwards"});Ng(x)}})]})});y1.displayName=v1;var x1="ToastFocusProxy",sv=_.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,a=tm(x1,t);return l.jsx(nd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:c=>{var m;const u=c.relatedTarget;!((m=a.viewport)!=null&&m.contains(u))&&r()}})});sv.displayName=x1;var nm="Toast",JP="toast.swipeStart",ZP="toast.swipeMove",eR="toast.swipeCancel",tR="toast.swipeEnd",w1=_.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:a,...c}=n,[u=!0,h]=Aa({prop:r,defaultProp:s,onChange:a});return l.jsx(dy,{present:t||u,children:l.jsx(sR,{open:u,...c,ref:e,onClose:()=>h(!1),onPause:vn(n.onPause),onResume:vn(n.onResume),onSwipeStart:ze(n.onSwipeStart,m=>{m.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ze(n.onSwipeMove,m=>{const{x:g,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","move"),m.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:ze(n.onSwipeCancel,m=>{m.currentTarget.setAttribute("data-swipe","cancel"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ze(n.onSwipeEnd,m=>{const{x:g,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","end"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),h(!1)})})})});w1.displayName=nm;var[nR,rR]=p1(nm,{onClose(){}}),sR=_.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:a,onClose:c,onEscapeKeyDown:u,onPause:h,onResume:m,onSwipeStart:g,onSwipeMove:v,onSwipeCancel:y,onSwipeEnd:b,...S}=n,E=tm(nm,t),[x,A]=_.useState(null),I=vt(e,oe=>A(oe)),C=_.useRef(null),L=_.useRef(null),V=s||E.duration,q=_.useRef(0),P=_.useRef(V),R=_.useRef(0),{onToastAdd:D,onToastRemove:k}=E,$=vn(()=>{var K;(x==null?void 0:x.contains(document.activeElement))&&((K=E.viewport)==null||K.focus()),c()}),z=_.useCallback(oe=>{!oe||oe===1/0||(window.clearTimeout(R.current),q.current=new Date().getTime(),R.current=window.setTimeout($,oe))},[$]);_.useEffect(()=>{const oe=E.viewport;if(oe){const K=()=>{z(P.current),m==null||m()},Z=()=>{const X=new Date().getTime()-q.current;P.current=P.current-X,window.clearTimeout(R.current),h==null||h()};return oe.addEventListener(nv,Z),oe.addEventListener(rv,K),()=>{oe.removeEventListener(nv,Z),oe.removeEventListener(rv,K)}}},[E.viewport,V,h,m,z]),_.useEffect(()=>{a&&!E.isClosePausedRef.current&&z(V)},[a,V,E.isClosePausedRef,z]),_.useEffect(()=>(D(),()=>k()),[D,k]);const M=_.useMemo(()=>x?C1(x):null,[x]);return E.viewport?l.jsxs(l.Fragment,{children:[M&&l.jsx(iR,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:M}),l.jsx(nR,{scope:t,onClose:$,children:$a.createPortal(l.jsx(fy.ItemSlot,{scope:t,children:l.jsx(VP,{asChild:!0,onEscapeKeyDown:ze(u,()=>{E.isFocusedToastEscapeKeyDownRef.current||$(),E.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(He.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":E.swipeDirection,...S,ref:I,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:ze(n.onKeyDown,oe=>{oe.key==="Escape"&&(u==null||u(oe.nativeEvent),oe.nativeEvent.defaultPrevented||(E.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:ze(n.onPointerDown,oe=>{oe.button===0&&(C.current={x:oe.clientX,y:oe.clientY})}),onPointerMove:ze(n.onPointerMove,oe=>{if(!C.current)return;const K=oe.clientX-C.current.x,Z=oe.clientY-C.current.y,X=!!L.current,B=["left","right"].includes(E.swipeDirection),Q=["left","up"].includes(E.swipeDirection)?Math.min:Math.max,ee=B?Q(0,K):0,U=B?0:Q(0,Z),Y=oe.pointerType==="touch"?10:2,le={x:ee,y:U},Ee={originalEvent:oe,delta:le};X?(L.current=le,Mh(ZP,v,Ee,{discrete:!1})):d_(le,E.swipeDirection,Y)?(L.current=le,Mh(JP,g,Ee,{discrete:!1}),oe.target.setPointerCapture(oe.pointerId)):(Math.abs(K)>Y||Math.abs(Z)>Y)&&(C.current=null)}),onPointerUp:ze(n.onPointerUp,oe=>{const K=L.current,Z=oe.target;if(Z.hasPointerCapture(oe.pointerId)&&Z.releasePointerCapture(oe.pointerId),L.current=null,C.current=null,K){const X=oe.currentTarget,B={originalEvent:oe,delta:K};d_(K,E.swipeDirection,E.swipeThreshold)?Mh(tR,b,B,{discrete:!0}):Mh(eR,y,B,{discrete:!0}),X.addEventListener("click",Q=>Q.preventDefault(),{once:!0})}})})})}),E.viewport)})]}):null}),iR=n=>{const{__scopeToast:e,children:t,...r}=n,s=tm(nm,e),[a,c]=_.useState(!1),[u,h]=_.useState(!1);return lR(()=>c(!0)),_.useEffect(()=>{const m=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(m)},[]),u?null:l.jsx(m1,{asChild:!0,children:l.jsx(nd,{...r,children:a&&l.jsxs(l.Fragment,{children:[s.label," ",t]})})})},oR="ToastTitle",_1=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(He.div,{...r,ref:e})});_1.displayName=oR;var aR="ToastDescription",E1=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(He.div,{...r,ref:e})});E1.displayName=aR;var b1="ToastAction",S1=_.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?l.jsx(T1,{altText:t,asChild:!0,children:l.jsx(my,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${b1}\`. Expected non-empty \`string\`.`),null)});S1.displayName=b1;var N1="ToastClose",my=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=rR(N1,t);return l.jsx(T1,{asChild:!0,children:l.jsx(He.button,{type:"button",...r,ref:e,onClick:ze(n.onClick,s.onClose)})})});my.displayName=N1;var T1=_.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return l.jsx(He.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function C1(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),cR(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...C1(r))}}),e}function Mh(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,a=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?em(s,a):s.dispatchEvent(a)}var d_=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),a=r>s;return e==="left"||e==="right"?a&&r>t:!a&&s>t};function lR(n=()=>{}){const e=vn(n);Wt(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function cR(n){return n.nodeType===n.ELEMENT_NODE}function uR(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Ng(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var dR=g1,I1=y1,j1=w1,A1=_1,P1=E1,R1=S1,k1=my;function D1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=D1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function O1(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=D1(n))&&(r&&(r+=" "),r+=e);return r}const h_=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,f_=O1,rd=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return f_(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:a}=e,c=Object.keys(s).map(m=>{const g=t==null?void 0:t[m],v=a==null?void 0:a[m];if(g===null)return null;const y=h_(g)||h_(v);return s[m][y]}),u=t&&Object.entries(t).reduce((m,g)=>{let[v,y]=g;return y===void 0||(m[v]=y),m},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,g)=>{let{class:v,className:y,...b}=g;return Object.entries(b).every(S=>{let[E,x]=S;return Array.isArray(x)?x.includes({...a,...u}[E]):{...a,...u}[E]===x})?[...m,v,y]:m},[]);return f_(n,c,h,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L1=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=_.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:c,...u},h)=>_.createElement("svg",{ref:h,...fR,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:L1("lucide",s),...u},[...c.map(([m,g])=>_.createElement(m,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=(n,e)=>{const t=_.forwardRef(({className:r,...s},a)=>_.createElement(mR,{ref:a,iconNode:e,className:L1(`lucide-${hR(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=Ze("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=Ze("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=Ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=Ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=Ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=Ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=Ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=Ze("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Ze("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=Ze("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=Ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=Ze("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=Ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=Ze("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=Ze("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=Ze("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Ze("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=Ze("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=Ze("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=Ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=Ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=Ze("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=Ze("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=Ze("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Ze("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=Ze("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=Ze("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=Ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=Ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=Ze("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=Ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=Ze("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=Ze("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=Ze("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=Ze("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=Ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=Ze("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=Ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=Ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=Ze("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=Ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=Ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Ze("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gy="-",PR=n=>{const e=kR(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const u=c.split(gy);return u[0]===""&&u.length!==1&&u.shift(),z1(u,e)||RR(c)},getConflictingClassGroupIds:(c,u)=>{const h=t[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},z1=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?z1(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=n.join(gy);return(c=e.validators.find(({validator:u})=>u(a)))==null?void 0:c.classGroupId},g_=/^\[(.+)\]$/,RR=n=>{if(g_.test(n)){const e=g_.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},kR=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return OR(Object.entries(n.classGroups),t).forEach(([a,c])=>{lv(c,r,a,e)}),r},lv=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const a=s===""?e:v_(e,s);a.classGroupId=t;return}if(typeof s=="function"){if(DR(s)){lv(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([a,c])=>{lv(c,v_(e,a),t,r)})})},v_=(n,e)=>{let t=n;return e.split(gy).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},DR=n=>n.isThemeGetter,OR=(n,e)=>e?n.map(([t,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([c,u])=>[e+c,u])):a);return[t,s]}):n,LR=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(a,c)=>{t.set(a,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let c=t.get(a);if(c!==void 0)return c;if((c=r.get(a))!==void 0)return s(a,c),c},set(a,c){t.has(a)?t.set(a,c):s(a,c)}}},B1="!",MR=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],a=e.length,c=u=>{const h=[];let m=0,g=0,v;for(let x=0;x<u.length;x++){let A=u[x];if(m===0){if(A===s&&(r||u.slice(x,x+a)===e)){h.push(u.slice(g,x)),g=x+a;continue}if(A==="/"){v=x;continue}}A==="["?m++:A==="]"&&m--}const y=h.length===0?u:u.substring(g),b=y.startsWith(B1),S=b?y.substring(1):y,E=v&&v>g?v-g:void 0;return{modifiers:h,hasImportantModifier:b,baseClassName:S,maybePostfixModifierPosition:E}};return t?u=>t({className:u,parseClassName:c}):c},FR=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},VR=n=>({cache:LR(n.cacheSize),parseClassName:MR(n),...PR(n)}),UR=/\s+/,$R=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],c=n.trim().split(UR);let u="";for(let h=c.length-1;h>=0;h-=1){const m=c[h],{modifiers:g,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:b}=t(m);let S=!!b,E=r(S?y.substring(0,b):y);if(!E){if(!S){u=m+(u.length>0?" "+u:u);continue}if(E=r(y),!E){u=m+(u.length>0?" "+u:u);continue}S=!1}const x=FR(g).join(":"),A=v?x+B1:x,I=A+E;if(a.includes(I))continue;a.push(I);const C=s(E,S);for(let L=0;L<C.length;++L){const V=C[L];a.push(A+V)}u=m+(u.length>0?" "+u:u)}return u};function zR(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=q1(e))&&(r&&(r+=" "),r+=t);return r}const q1=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=q1(n[r]))&&(t&&(t+=" "),t+=e);return t};function BR(n,...e){let t,r,s,a=c;function c(h){const m=e.reduce((g,v)=>v(g),n());return t=VR(m),r=t.cache.get,s=t.cache.set,a=u,u(h)}function u(h){const m=r(h);if(m)return m;const g=$R(h,t);return s(h,g),g}return function(){return a(zR.apply(null,arguments))}}const Vt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},W1=/^\[(?:([a-z-]+):)?(.+)\]$/i,qR=/^\d+\/\d+$/,WR=new Set(["px","full","screen"]),HR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,KR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,GR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,QR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,YR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mi=n=>$l(n)||WR.has(n)||qR.test(n),io=n=>vc(n,"length",sk),$l=n=>!!n&&!Number.isNaN(Number(n)),Tg=n=>vc(n,"number",$l),mu=n=>!!n&&Number.isInteger(Number(n)),XR=n=>n.endsWith("%")&&$l(n.slice(0,-1)),ot=n=>W1.test(n),oo=n=>HR.test(n),JR=new Set(["length","size","percentage"]),ZR=n=>vc(n,JR,H1),ek=n=>vc(n,"position",H1),tk=new Set(["image","url"]),nk=n=>vc(n,tk,ok),rk=n=>vc(n,"",ik),pu=()=>!0,vc=(n,e,t)=>{const r=W1.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},sk=n=>KR.test(n)&&!GR.test(n),H1=()=>!1,ik=n=>QR.test(n),ok=n=>YR.test(n),ak=()=>{const n=Vt("colors"),e=Vt("spacing"),t=Vt("blur"),r=Vt("brightness"),s=Vt("borderColor"),a=Vt("borderRadius"),c=Vt("borderSpacing"),u=Vt("borderWidth"),h=Vt("contrast"),m=Vt("grayscale"),g=Vt("hueRotate"),v=Vt("invert"),y=Vt("gap"),b=Vt("gradientColorStops"),S=Vt("gradientColorStopPositions"),E=Vt("inset"),x=Vt("margin"),A=Vt("opacity"),I=Vt("padding"),C=Vt("saturate"),L=Vt("scale"),V=Vt("sepia"),q=Vt("skew"),P=Vt("space"),R=Vt("translate"),D=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",ot,e],z=()=>[ot,e],M=()=>["",mi,io],oe=()=>["auto",$l,ot],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],Q=()=>["","0",ot],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[$l,ot];return{cacheSize:500,separator:":",theme:{colors:[pu],spacing:[mi,io],blur:["none","",oo,ot],brightness:U(),borderColor:[n],borderRadius:["none","","full",oo,ot],borderSpacing:z(),borderWidth:M(),contrast:U(),grayscale:Q(),hueRotate:U(),invert:Q(),gap:z(),gradientColorStops:[n],gradientColorStopPositions:[XR,io],inset:$(),margin:$(),opacity:U(),padding:z(),saturate:U(),scale:U(),sepia:Q(),skew:U(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",ot]}],container:["container"],columns:[{columns:[oo]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),ot]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",mu,ot]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ot]}],grow:[{grow:Q()}],shrink:[{shrink:Q()}],order:[{order:["first","last","none",mu,ot]}],"grid-cols":[{"grid-cols":[pu]}],"col-start-end":[{col:["auto",{span:["full",mu,ot]},ot]}],"col-start":[{"col-start":oe()}],"col-end":[{"col-end":oe()}],"grid-rows":[{"grid-rows":[pu]}],"row-start-end":[{row:["auto",{span:[mu,ot]},ot]}],"row-start":[{"row-start":oe()}],"row-end":[{"row-end":oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ot]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ot]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ot,e]}],"min-w":[{"min-w":[ot,e,"min","max","fit"]}],"max-w":[{"max-w":[ot,e,"none","full","min","max","fit","prose",{screen:[oo]},oo]}],h:[{h:[ot,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ot,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ot,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ot,e,"auto","min","max","fit"]}],"font-size":[{text:["base",oo,io]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Tg]}],"font-family":[{font:[pu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ot]}],"line-clamp":[{"line-clamp":["none",$l,Tg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",mi,ot]}],"list-image":[{"list-image":["none",ot]}],"list-style-type":[{list:["none","disc","decimal",ot]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",mi,io]}],"underline-offset":[{"underline-offset":["auto",mi,ot]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),ek]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ZR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},nk]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:Z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[mi,ot]}],"outline-w":[{outline:[mi,io]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[mi,io]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",oo,rk]}],"shadow-color":[{shadow:[pu]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",oo,ot]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[v]}],saturate:[{saturate:[C]}],sepia:[{sepia:[V]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[V]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ot]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",ot]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",ot]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[L]}],"scale-x":[{"scale-x":[L]}],"scale-y":[{"scale-y":[L]}],rotate:[{rotate:[mu,ot]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[q]}],"skew-y":[{"skew-y":[q]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ot]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ot]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ot]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[mi,io,Tg]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},lk=BR(ak);function tt(...n){return lk(O1(n))}function ck(n){if(!n||typeof n!="string")return null;const e=n.trim();try{const t=e.match(/https?:\/\/(?:drive\.google\.com)\/(?:file\/d\/([a-zA-Z0-9_-]+)\/view|open\?id=([a-zA-Z0-9_-]+))/i);if(t){const r=t[1]||t[2];if(r)return`https://drive.google.com/uc?export=view&id=${r}`}if(/dropbox\.com\//i.test(e)){if(e.includes("dl=0"))return e.replace("dl=0","dl=1");if(!e.includes("dl="))return e+"?dl=1"}return e}catch{return e}}const uk=dR,K1=_.forwardRef(({className:n,...e},t)=>l.jsx(I1,{ref:t,className:tt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));K1.displayName=I1.displayName;const dk=rd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),G1=_.forwardRef(({className:n,variant:e,...t},r)=>l.jsx(j1,{ref:r,className:tt(dk({variant:e}),n),...t}));G1.displayName=j1.displayName;const hk=_.forwardRef(({className:n,...e},t)=>l.jsx(R1,{ref:t,className:tt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));hk.displayName=R1.displayName;const Q1=_.forwardRef(({className:n,...e},t)=>l.jsx(k1,{ref:t,className:tt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:l.jsx(rc,{className:"h-4 w-4"})}));Q1.displayName=k1.displayName;const Y1=_.forwardRef(({className:n,...e},t)=>l.jsx(A1,{ref:t,className:tt("text-sm font-semibold",n),...e}));Y1.displayName=A1.displayName;const X1=_.forwardRef(({className:n,...e},t)=>l.jsx(P1,{ref:t,className:tt("text-sm opacity-90",n),...e}));X1.displayName=P1.displayName;function fk(){const{toasts:n}=bP();return l.jsxs(uk,{children:[n.map(function({id:e,title:t,description:r,action:s,...a}){return l.jsxs(G1,{...a,children:[l.jsxs("div",{className:"grid gap-1",children:[t&&l.jsx(Y1,{children:t}),r&&l.jsx(X1,{children:r})]}),s,l.jsx(Q1,{})]},e)}),l.jsx(K1,{})]})}var Fh={},y_;function mk(){if(y_)return Fh;y_=1;var n=a1();return Fh.createRoot=n.createRoot,Fh.hydrateRoot=n.hydrateRoot,Fh}var pk=mk(),x_=["light","dark"],gk="(prefers-color-scheme: dark)",vk=_.createContext(void 0),yk={setTheme:n=>{},themes:[]},xk=()=>{var n;return(n=_.useContext(vk))!=null?n:yk};_.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:c,attrs:u,nonce:h})=>{let m=a==="system",g=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,v=s?x_.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",y=(S,E=!1,x=!0)=>{let A=c?c[S]:S,I=E?S+"|| ''":`'${A}'`,C="";return s&&x&&!E&&x_.includes(S)&&(C+=`d.style.colorScheme = '${S}';`),t==="class"?E||A?C+=`c.add(${I})`:C+="null":A&&(C+=`d[s](n,${I})`),C},b=n?`!function(){${g}${y(n)}}()`:r?`!function(){try{${g}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${m})){var t='${gk}',m=window.matchMedia(t);if(m.media!==t||m.matches){${y("dark")}}else{${y("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${y(c?"x[e]":"e",!0)}}${m?"":"else{"+y(a,!1,!1)+"}"}${v}}catch(e){}}()`:`!function(){try{${g}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${y(c?"x[e]":"e",!0)}}else{${y(a,!1,!1)};}${v}}catch(t){}}();`;return _.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:b}})});var wk=n=>{switch(n){case"success":return bk;case"info":return Nk;case"warning":return Sk;case"error":return Tk;default:return null}},_k=Array(12).fill(0),Ek=({visible:n})=>Ne.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},Ne.createElement("div",{className:"sonner-spinner"},_k.map((e,t)=>Ne.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),bk=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Sk=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Nk=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Tk=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ck=()=>{let[n,e]=Ne.useState(document.hidden);return Ne.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},cv=1,Ik=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:cv++,c=this.toasts.find(h=>h.id===a),u=e.dismissible===void 0?!0:e.dismissible;return c?this.toasts=this.toasts.map(h=>h.id===a?(this.publish({...h,...e,id:a,title:r}),{...h,...e,id:a,dismissible:u,title:r}):h):this.addToast({title:r,...s,dismissible:u,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0;return s.then(async c=>{if(Ak(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:h})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||cv++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Er=new Ik,jk=(n,e)=>{let t=(e==null?void 0:e.id)||cv++;return Er.addToast({title:n,...e,id:t}),t},Ak=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",Pk=jk,Rk=()=>Er.toasts;Object.assign(Pk,{success:Er.success,info:Er.info,warning:Er.warning,error:Er.error,custom:Er.custom,message:Er.message,promise:Er.promise,dismiss:Er.dismiss,loading:Er.loading},{getHistory:Rk});function kk(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}kk(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Vh(n){return n.label!==void 0}var Dk=3,Ok="32px",Lk=4e3,Mk=356,Fk=14,Vk=20,Uk=200;function $k(...n){return n.filter(Boolean).join(" ")}var zk=n=>{var e,t,r,s,a,c,u,h,m,g;let{invert:v,toast:y,unstyled:b,interacting:S,setHeights:E,visibleToasts:x,heights:A,index:I,toasts:C,expanded:L,removeToast:V,defaultRichColors:q,closeButton:P,style:R,cancelButtonStyle:D,actionButtonStyle:k,className:$="",descriptionClassName:z="",duration:M,position:oe,gap:K,loadingIcon:Z,expandByDefault:X,classNames:B,icons:Q,closeButtonAriaLabel:ee="Close toast",pauseWhenPageIsHidden:U,cn:Y}=n,[le,Ee]=Ne.useState(!1),[ve,ce]=Ne.useState(!1),[me,Te]=Ne.useState(!1),[ke,Ce]=Ne.useState(!1),[Me,Ke]=Ne.useState(0),[yt,bt]=Ne.useState(0),rn=Ne.useRef(null),Ot=Ne.useRef(null),At=I===0,_t=I+1<=x,ft=y.type,Pt=y.dismissible!==!1,fr=y.className||"",Xs=y.descriptionClassName||"",qn=Ne.useMemo(()=>A.findIndex(J=>J.toastId===y.id)||0,[A,y.id]),Ir=Ne.useMemo(()=>{var J;return(J=y.closeButton)!=null?J:P},[y.closeButton,P]),Wn=Ne.useMemo(()=>y.duration||M||Lk,[y.duration,M]),Lt=Ne.useRef(0),Nt=Ne.useRef(0),Jn=Ne.useRef(0),Zn=Ne.useRef(null),[mr,Br]=oe.split("-"),jr=Ne.useMemo(()=>A.reduce((J,ye,be)=>be>=qn?J:J+ye.height,0),[A,qn]),qr=Ck(),Js=y.invert||v,Wr=ft==="loading";Nt.current=Ne.useMemo(()=>qn*K+jr,[qn,jr]),Ne.useEffect(()=>{Ee(!0)},[]),Ne.useLayoutEffect(()=>{if(!le)return;let J=Ot.current,ye=J.style.height;J.style.height="auto";let be=J.getBoundingClientRect().height;J.style.height=ye,bt(be),E(Qe=>Qe.find(Ue=>Ue.toastId===y.id)?Qe.map(Ue=>Ue.toastId===y.id?{...Ue,height:be}:Ue):[{toastId:y.id,height:be,position:y.position},...Qe])},[le,y.title,y.description,E,y.id]);let Rn=Ne.useCallback(()=>{ce(!0),Ke(Nt.current),E(J=>J.filter(ye=>ye.toastId!==y.id)),setTimeout(()=>{V(y)},Uk)},[y,V,E,Nt]);Ne.useEffect(()=>{if(y.promise&&ft==="loading"||y.duration===1/0||y.type==="loading")return;let J,ye=Wn;return L||S||U&&qr?(()=>{if(Jn.current<Lt.current){let be=new Date().getTime()-Lt.current;ye=ye-be}Jn.current=new Date().getTime()})():ye!==1/0&&(Lt.current=new Date().getTime(),J=setTimeout(()=>{var be;(be=y.onAutoClose)==null||be.call(y,y),Rn()},ye)),()=>clearTimeout(J)},[L,S,X,y,Wn,Rn,y.promise,ft,U,qr]),Ne.useEffect(()=>{let J=Ot.current;if(J){let ye=J.getBoundingClientRect().height;return bt(ye),E(be=>[{toastId:y.id,height:ye,position:y.position},...be]),()=>E(be=>be.filter(Qe=>Qe.toastId!==y.id))}},[E,y.id]),Ne.useEffect(()=>{y.delete&&Rn()},[Rn,y.delete]);function Zs(){return Q!=null&&Q.loading?Ne.createElement("div",{className:"sonner-loader","data-visible":ft==="loading"},Q.loading):Z?Ne.createElement("div",{className:"sonner-loader","data-visible":ft==="loading"},Z):Ne.createElement(Ek,{visible:ft==="loading"})}return Ne.createElement("li",{"aria-live":y.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ot,className:Y($,fr,B==null?void 0:B.toast,(e=y==null?void 0:y.classNames)==null?void 0:e.toast,B==null?void 0:B.default,B==null?void 0:B[ft],(t=y==null?void 0:y.classNames)==null?void 0:t[ft]),"data-sonner-toast":"","data-rich-colors":(r=y.richColors)!=null?r:q,"data-styled":!(y.jsx||y.unstyled||b),"data-mounted":le,"data-promise":!!y.promise,"data-removed":ve,"data-visible":_t,"data-y-position":mr,"data-x-position":Br,"data-index":I,"data-front":At,"data-swiping":me,"data-dismissible":Pt,"data-type":ft,"data-invert":Js,"data-swipe-out":ke,"data-expanded":!!(L||X&&le),style:{"--index":I,"--toasts-before":I,"--z-index":C.length-I,"--offset":`${ve?Me:Nt.current}px`,"--initial-height":X?"auto":`${yt}px`,...R,...y.style},onPointerDown:J=>{Wr||!Pt||(rn.current=new Date,Ke(Nt.current),J.target.setPointerCapture(J.pointerId),J.target.tagName!=="BUTTON"&&(Te(!0),Zn.current={x:J.clientX,y:J.clientY}))},onPointerUp:()=>{var J,ye,be,Qe;if(ke||!Pt)return;Zn.current=null;let Ue=Number(((J=Ot.current)==null?void 0:J.style.getPropertyValue("--swipe-amount").replace("px",""))||0),ct=new Date().getTime()-((ye=rn.current)==null?void 0:ye.getTime()),je=Math.abs(Ue)/ct;if(Math.abs(Ue)>=Vk||je>.11){Ke(Nt.current),(be=y.onDismiss)==null||be.call(y,y),Rn(),Ce(!0);return}(Qe=Ot.current)==null||Qe.style.setProperty("--swipe-amount","0px"),Te(!1)},onPointerMove:J=>{var ye;if(!Zn.current||!Pt)return;let be=J.clientY-Zn.current.y,Qe=J.clientX-Zn.current.x,Ue=(mr==="top"?Math.min:Math.max)(0,be),ct=J.pointerType==="touch"?10:2;Math.abs(Ue)>ct?(ye=Ot.current)==null||ye.style.setProperty("--swipe-amount",`${be}px`):Math.abs(Qe)>ct&&(Zn.current=null)}},Ir&&!y.jsx?Ne.createElement("button",{"aria-label":ee,"data-disabled":Wr,"data-close-button":!0,onClick:Wr||!Pt?()=>{}:()=>{var J;Rn(),(J=y.onDismiss)==null||J.call(y,y)},className:Y(B==null?void 0:B.closeButton,(s=y==null?void 0:y.classNames)==null?void 0:s.closeButton)},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ne.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ne.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,y.jsx||Ne.isValidElement(y.title)?y.jsx||y.title:Ne.createElement(Ne.Fragment,null,ft||y.icon||y.promise?Ne.createElement("div",{"data-icon":"",className:Y(B==null?void 0:B.icon,(a=y==null?void 0:y.classNames)==null?void 0:a.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||Zs():null,y.type!=="loading"?y.icon||(Q==null?void 0:Q[ft])||wk(ft):null):null,Ne.createElement("div",{"data-content":"",className:Y(B==null?void 0:B.content,(c=y==null?void 0:y.classNames)==null?void 0:c.content)},Ne.createElement("div",{"data-title":"",className:Y(B==null?void 0:B.title,(u=y==null?void 0:y.classNames)==null?void 0:u.title)},y.title),y.description?Ne.createElement("div",{"data-description":"",className:Y(z,Xs,B==null?void 0:B.description,(h=y==null?void 0:y.classNames)==null?void 0:h.description)},y.description):null),Ne.isValidElement(y.cancel)?y.cancel:y.cancel&&Vh(y.cancel)?Ne.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||D,onClick:J=>{var ye,be;Vh(y.cancel)&&Pt&&((be=(ye=y.cancel).onClick)==null||be.call(ye,J),Rn())},className:Y(B==null?void 0:B.cancelButton,(m=y==null?void 0:y.classNames)==null?void 0:m.cancelButton)},y.cancel.label):null,Ne.isValidElement(y.action)?y.action:y.action&&Vh(y.action)?Ne.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||k,onClick:J=>{var ye,be;Vh(y.action)&&(J.defaultPrevented||((be=(ye=y.action).onClick)==null||be.call(ye,J),Rn()))},className:Y(B==null?void 0:B.actionButton,(g=y==null?void 0:y.classNames)==null?void 0:g.actionButton)},y.action.label):null))};function w_(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var Bk=n=>{let{invert:e,position:t="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:a,className:c,offset:u,theme:h="light",richColors:m,duration:g,style:v,visibleToasts:y=Dk,toastOptions:b,dir:S=w_(),gap:E=Fk,loadingIcon:x,icons:A,containerAriaLabel:I="Notifications",pauseWhenPageIsHidden:C,cn:L=$k}=n,[V,q]=Ne.useState([]),P=Ne.useMemo(()=>Array.from(new Set([t].concat(V.filter(U=>U.position).map(U=>U.position)))),[V,t]),[R,D]=Ne.useState([]),[k,$]=Ne.useState(!1),[z,M]=Ne.useState(!1),[oe,K]=Ne.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=Ne.useRef(null),X=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=Ne.useRef(null),Q=Ne.useRef(!1),ee=Ne.useCallback(U=>{var Y;(Y=V.find(le=>le.id===U.id))!=null&&Y.delete||Er.dismiss(U.id),q(le=>le.filter(({id:Ee})=>Ee!==U.id))},[V]);return Ne.useEffect(()=>Er.subscribe(U=>{if(U.dismiss){q(Y=>Y.map(le=>le.id===U.id?{...le,delete:!0}:le));return}setTimeout(()=>{Zf.flushSync(()=>{q(Y=>{let le=Y.findIndex(Ee=>Ee.id===U.id);return le!==-1?[...Y.slice(0,le),{...Y[le],...U},...Y.slice(le+1)]:[U,...Y]})})})}),[]),Ne.useEffect(()=>{if(h!=="system"){K(h);return}h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?K("dark"):K("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:U})=>{K(U?"dark":"light")})},[h]),Ne.useEffect(()=>{V.length<=1&&$(!1)},[V]),Ne.useEffect(()=>{let U=Y=>{var le,Ee;r.every(ve=>Y[ve]||Y.code===ve)&&($(!0),(le=Z.current)==null||le.focus()),Y.code==="Escape"&&(document.activeElement===Z.current||(Ee=Z.current)!=null&&Ee.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[r]),Ne.useEffect(()=>{if(Z.current)return()=>{B.current&&(B.current.focus({preventScroll:!0}),B.current=null,Q.current=!1)}},[Z.current]),V.length?Ne.createElement("section",{"aria-label":`${I} ${X}`,tabIndex:-1},P.map((U,Y)=>{var le;let[Ee,ve]=U.split("-");return Ne.createElement("ol",{key:U,dir:S==="auto"?w_():S,tabIndex:-1,ref:Z,className:c,"data-sonner-toaster":!0,"data-theme":oe,"data-y-position":Ee,"data-x-position":ve,style:{"--front-toast-height":`${((le=R[0])==null?void 0:le.height)||0}px`,"--offset":typeof u=="number"?`${u}px`:u||Ok,"--width":`${Mk}px`,"--gap":`${E}px`,...v},onBlur:ce=>{Q.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(Q.current=!1,B.current&&(B.current.focus({preventScroll:!0}),B.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||Q.current||(Q.current=!0,B.current=ce.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{z||$(!1)},onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},V.filter(ce=>!ce.position&&Y===0||ce.position===U).map((ce,me)=>{var Te,ke;return Ne.createElement(zk,{key:ce.id,icons:A,index:me,toast:ce,defaultRichColors:m,duration:(Te=b==null?void 0:b.duration)!=null?Te:g,className:b==null?void 0:b.className,descriptionClassName:b==null?void 0:b.descriptionClassName,invert:e,visibleToasts:y,closeButton:(ke=b==null?void 0:b.closeButton)!=null?ke:a,interacting:z,position:U,style:b==null?void 0:b.style,unstyled:b==null?void 0:b.unstyled,classNames:b==null?void 0:b.classNames,cancelButtonStyle:b==null?void 0:b.cancelButtonStyle,actionButtonStyle:b==null?void 0:b.actionButtonStyle,removeToast:ee,toasts:V.filter(Ce=>Ce.position==ce.position),heights:R.filter(Ce=>Ce.position==ce.position),setHeights:D,expandByDefault:s,gap:E,loadingIcon:x,expanded:k,pauseWhenPageIsHidden:C,cn:L})}))})):null};const qk=({...n})=>{const{theme:e="system"}=xk();return l.jsx(Bk,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};function Wk(n,e=[]){let t=[];function r(a,c){const u=_.createContext(c),h=t.length;t=[...t,c];const m=v=>{var A;const{scope:y,children:b,...S}=v,E=((A=y==null?void 0:y[n])==null?void 0:A[h])||u,x=_.useMemo(()=>S,Object.values(S));return l.jsx(E.Provider,{value:x,children:b})};m.displayName=a+"Provider";function g(v,y){var E;const b=((E=y==null?void 0:y[n])==null?void 0:E[h])||u,S=_.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${a}\``)}return[m,g]}const s=()=>{const a=t.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[n])||a;return _.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,Hk(s,...e)]}function Hk(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:m})=>{const v=h(a)[`__scope${m}`];return{...u,...v}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var Kk="DismissableLayer",uv="dismissableLayer.update",Gk="dismissableLayer.pointerDownOutside",Qk="dismissableLayer.focusOutside",__,J1=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vy=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=n,m=_.useContext(J1),[g,v]=_.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=_.useState({}),S=vt(e,P=>v(P)),E=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),A=E.indexOf(x),I=g?E.indexOf(g):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,L=I>=A,V=Jk(P=>{const R=P.target,D=[...m.branches].some(k=>k.contains(R));!L||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},y),q=Zk(P=>{const R=P.target;[...m.branches].some(k=>k.contains(R))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},y);return uy(P=>{I===m.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},y),_.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(__=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),E_(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=__)}},[g,y,t,m]),_.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),E_())},[g,m]),_.useEffect(()=>{const P=()=>b({});return document.addEventListener(uv,P),()=>document.removeEventListener(uv,P)},[]),l.jsx(He.div,{...h,ref:S,style:{pointerEvents:C?L?"auto":"none":void 0,...n.style},onFocusCapture:ze(n.onFocusCapture,q.onFocusCapture),onBlurCapture:ze(n.onBlurCapture,q.onBlurCapture),onPointerDownCapture:ze(n.onPointerDownCapture,V.onPointerDownCapture)})});vy.displayName=Kk;var Yk="DismissableLayerBranch",Xk=_.forwardRef((n,e)=>{const t=_.useContext(J1),r=_.useRef(null),s=vt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(He.div,{...n,ref:s})});Xk.displayName=Yk;function Jk(n,e=globalThis==null?void 0:globalThis.document){const t=vn(n),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){Z1(Gk,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Zk(n,e=globalThis==null?void 0:globalThis.document){const t=vn(n),r=_.useRef(!1);return _.useEffect(()=>{const s=a=>{a.target&&!r.current&&Z1(Qk,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function E_(){const n=new CustomEvent(uv);document.dispatchEvent(n)}function Z1(n,e,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?em(s,a):s.dispatchEvent(a)}var e2=o1.useId||(()=>{}),t2=0;function bo(n){const[e,t]=_.useState(e2());return Wt(()=>{t(r=>r??String(t2++))},[n]),e?`radix-${e}`:""}const n2=["top","right","bottom","left"],ko=Math.min,br=Math.max,Ef=Math.round,Uh=Math.floor,Do=n=>({x:n,y:n}),r2={left:"right",right:"left",bottom:"top",top:"bottom"},s2={start:"end",end:"start"};function dv(n,e,t){return br(n,ko(e,t))}function Ei(n,e){return typeof n=="function"?n(e):n}function bi(n){return n.split("-")[0]}function yc(n){return n.split("-")[1]}function yy(n){return n==="x"?"y":"x"}function xy(n){return n==="y"?"height":"width"}function Oo(n){return["top","bottom"].includes(bi(n))?"y":"x"}function wy(n){return yy(Oo(n))}function i2(n,e,t){t===void 0&&(t=!1);const r=yc(n),s=wy(n),a=xy(s);let c=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=bf(c)),[c,bf(c)]}function o2(n){const e=bf(n);return[hv(n),e,hv(e)]}function hv(n){return n.replace(/start|end/g,e=>s2[e])}function a2(n,e,t){const r=["left","right"],s=["right","left"],a=["top","bottom"],c=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?a:c;default:return[]}}function l2(n,e,t,r){const s=yc(n);let a=a2(bi(n),t==="start",r);return s&&(a=a.map(c=>c+"-"+s),e&&(a=a.concat(a.map(hv)))),a}function bf(n){return n.replace(/left|right|bottom|top/g,e=>r2[e])}function c2(n){return{top:0,right:0,bottom:0,left:0,...n}}function eS(n){return typeof n!="number"?c2(n):{top:n,right:n,bottom:n,left:n}}function Sf(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function b_(n,e,t){let{reference:r,floating:s}=n;const a=Oo(e),c=wy(e),u=xy(c),h=bi(e),m=a==="y",g=r.x+r.width/2-s.width/2,v=r.y+r.height/2-s.height/2,y=r[u]/2-s[u]/2;let b;switch(h){case"top":b={x:g,y:r.y-s.height};break;case"bottom":b={x:g,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:v};break;case"left":b={x:r.x-s.width,y:v};break;default:b={x:r.x,y:r.y}}switch(yc(e)){case"start":b[c]-=y*(t&&m?-1:1);break;case"end":b[c]+=y*(t&&m?-1:1);break}return b}const u2=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:c}=t,u=a.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let m=await c.getElementRects({reference:n,floating:e,strategy:s}),{x:g,y:v}=b_(m,r,h),y=r,b={},S=0;for(let E=0;E<u.length;E++){const{name:x,fn:A}=u[E],{x:I,y:C,data:L,reset:V}=await A({x:g,y:v,initialPlacement:r,placement:y,strategy:s,middlewareData:b,rects:m,platform:c,elements:{reference:n,floating:e}});g=I??g,v=C??v,b={...b,[x]:{...b[x],...L}},V&&S<=50&&(S++,typeof V=="object"&&(V.placement&&(y=V.placement),V.rects&&(m=V.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:s}):V.rects),{x:g,y:v}=b_(m,y,h)),E=-1)}return{x:g,y:v,placement:y,strategy:s,middlewareData:b}};async function Mu(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:c,elements:u,strategy:h}=n,{boundary:m="clippingAncestors",rootBoundary:g="viewport",elementContext:v="floating",altBoundary:y=!1,padding:b=0}=Ei(e,n),S=eS(b),x=u[y?v==="floating"?"reference":"floating":v],A=Sf(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(x)))==null||t?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:m,rootBoundary:g,strategy:h})),I=v==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),L=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},V=Sf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:I,offsetParent:C,strategy:h}):I);return{top:(A.top-V.top+S.top)/L.y,bottom:(V.bottom-A.bottom+S.bottom)/L.y,left:(A.left-V.left+S.left)/L.x,right:(V.right-A.right+S.right)/L.x}}const d2=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:a,platform:c,elements:u,middlewareData:h}=e,{element:m,padding:g=0}=Ei(n,e)||{};if(m==null)return{};const v=eS(g),y={x:t,y:r},b=wy(s),S=xy(b),E=await c.getDimensions(m),x=b==="y",A=x?"top":"left",I=x?"bottom":"right",C=x?"clientHeight":"clientWidth",L=a.reference[S]+a.reference[b]-y[b]-a.floating[S],V=y[b]-a.reference[b],q=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let P=q?q[C]:0;(!P||!await(c.isElement==null?void 0:c.isElement(q)))&&(P=u.floating[C]||a.floating[S]);const R=L/2-V/2,D=P/2-E[S]/2-1,k=ko(v[A],D),$=ko(v[I],D),z=k,M=P-E[S]-$,oe=P/2-E[S]/2+R,K=dv(z,oe,M),Z=!h.arrow&&yc(s)!=null&&oe!==K&&a.reference[S]/2-(oe<z?k:$)-E[S]/2<0,X=Z?oe<z?oe-z:oe-M:0;return{[b]:y[b]+X,data:{[b]:K,centerOffset:oe-K-X,...Z&&{alignmentOffset:X}},reset:Z}}}),h2=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:a,rects:c,initialPlacement:u,platform:h,elements:m}=e,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:y,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:E=!0,...x}=Ei(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const A=bi(s),I=Oo(u),C=bi(u)===u,L=await(h.isRTL==null?void 0:h.isRTL(m.floating)),V=y||(C||!E?[bf(u)]:o2(u)),q=S!=="none";!y&&q&&V.push(...l2(u,E,S,L));const P=[u,...V],R=await Mu(e,x),D=[];let k=((r=a.flip)==null?void 0:r.overflows)||[];if(g&&D.push(R[A]),v){const oe=i2(s,c,L);D.push(R[oe[0]],R[oe[1]])}if(k=[...k,{placement:s,overflows:D}],!D.every(oe=>oe<=0)){var $,z;const oe=((($=a.flip)==null?void 0:$.index)||0)+1,K=P[oe];if(K)return{data:{index:oe,overflows:k},reset:{placement:K}};let Z=(z=k.filter(X=>X.overflows[0]<=0).sort((X,B)=>X.overflows[1]-B.overflows[1])[0])==null?void 0:z.placement;if(!Z)switch(b){case"bestFit":{var M;const X=(M=k.filter(B=>{if(q){const Q=Oo(B.placement);return Q===I||Q==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(Q=>Q>0).reduce((Q,ee)=>Q+ee,0)]).sort((B,Q)=>B[1]-Q[1])[0])==null?void 0:M[0];X&&(Z=X);break}case"initialPlacement":Z=u;break}if(s!==Z)return{reset:{placement:Z}}}return{}}}};function S_(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function N_(n){return n2.some(e=>n[e]>=0)}const f2=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Ei(n,e);switch(r){case"referenceHidden":{const a=await Mu(e,{...s,elementContext:"reference"}),c=S_(a,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:N_(c)}}}case"escaped":{const a=await Mu(e,{...s,altBoundary:!0}),c=S_(a,t.floating);return{data:{escapedOffsets:c,escaped:N_(c)}}}default:return{}}}}};async function m2(n,e){const{placement:t,platform:r,elements:s}=n,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=bi(t),u=yc(t),h=Oo(t)==="y",m=["left","top"].includes(c)?-1:1,g=a&&h?-1:1,v=Ei(e,n);let{mainAxis:y,crossAxis:b,alignmentAxis:S}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return u&&typeof S=="number"&&(b=u==="end"?S*-1:S),h?{x:b*g,y:y*m}:{x:y*m,y:b*g}}const p2=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:a,placement:c,middlewareData:u}=e,h=await m2(e,n);return c===((t=u.offset)==null?void 0:t.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+h.x,y:a+h.y,data:{...h,placement:c}}}}},g2=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:u={fn:x=>{let{x:A,y:I}=x;return{x:A,y:I}}},...h}=Ei(n,e),m={x:t,y:r},g=await Mu(e,h),v=Oo(bi(s)),y=yy(v);let b=m[y],S=m[v];if(a){const x=y==="y"?"top":"left",A=y==="y"?"bottom":"right",I=b+g[x],C=b-g[A];b=dv(I,b,C)}if(c){const x=v==="y"?"top":"left",A=v==="y"?"bottom":"right",I=S+g[x],C=S-g[A];S=dv(I,S,C)}const E=u.fn({...e,[y]:b,[v]:S});return{...E,data:{x:E.x-t,y:E.y-r,enabled:{[y]:a,[v]:c}}}}}},v2=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:a,middlewareData:c}=e,{offset:u=0,mainAxis:h=!0,crossAxis:m=!0}=Ei(n,e),g={x:t,y:r},v=Oo(s),y=yy(v);let b=g[y],S=g[v];const E=Ei(u,e),x=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(h){const C=y==="y"?"height":"width",L=a.reference[y]-a.floating[C]+x.mainAxis,V=a.reference[y]+a.reference[C]-x.mainAxis;b<L?b=L:b>V&&(b=V)}if(m){var A,I;const C=y==="y"?"width":"height",L=["top","left"].includes(bi(s)),V=a.reference[v]-a.floating[C]+(L&&((A=c.offset)==null?void 0:A[v])||0)+(L?0:x.crossAxis),q=a.reference[v]+a.reference[C]+(L?0:((I=c.offset)==null?void 0:I[v])||0)-(L?x.crossAxis:0);S<V?S=V:S>q&&(S=q)}return{[y]:b,[v]:S}}}},y2=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:a,platform:c,elements:u}=e,{apply:h=()=>{},...m}=Ei(n,e),g=await Mu(e,m),v=bi(s),y=yc(s),b=Oo(s)==="y",{width:S,height:E}=a.floating;let x,A;v==="top"||v==="bottom"?(x=v,A=y===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(A=v,x=y==="end"?"top":"bottom");const I=E-g.top-g.bottom,C=S-g.left-g.right,L=ko(E-g[x],I),V=ko(S-g[A],C),q=!e.middlewareData.shift;let P=L,R=V;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(R=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=I),q&&!y){const k=br(g.left,0),$=br(g.right,0),z=br(g.top,0),M=br(g.bottom,0);b?R=S-2*(k!==0||$!==0?k+$:br(g.left,g.right)):P=E-2*(z!==0||M!==0?z+M:br(g.top,g.bottom))}await h({...e,availableWidth:R,availableHeight:P});const D=await c.getDimensions(u.floating);return S!==D.width||E!==D.height?{reset:{rects:!0}}:{}}}};function rm(){return typeof window<"u"}function xc(n){return tS(n)?(n.nodeName||"").toLowerCase():"#document"}function Tr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Ks(n){var e;return(e=(tS(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function tS(n){return rm()?n instanceof Node||n instanceof Tr(n).Node:!1}function fs(n){return rm()?n instanceof Element||n instanceof Tr(n).Element:!1}function Bs(n){return rm()?n instanceof HTMLElement||n instanceof Tr(n).HTMLElement:!1}function T_(n){return!rm()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Tr(n).ShadowRoot}function id(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=ms(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function x2(n){return["table","td","th"].includes(xc(n))}function sm(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function _y(n){const e=Ey(),t=fs(n)?ms(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function w2(n){let e=Lo(n);for(;Bs(e)&&!sc(e);){if(_y(e))return e;if(sm(e))return null;e=Lo(e)}return null}function Ey(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function sc(n){return["html","body","#document"].includes(xc(n))}function ms(n){return Tr(n).getComputedStyle(n)}function im(n){return fs(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Lo(n){if(xc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||T_(n)&&n.host||Ks(n);return T_(e)?e.host:e}function nS(n){const e=Lo(n);return sc(e)?n.ownerDocument?n.ownerDocument.body:n.body:Bs(e)&&id(e)?e:nS(e)}function Fu(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=nS(n),a=s===((r=n.ownerDocument)==null?void 0:r.body),c=Tr(s);if(a){const u=fv(c);return e.concat(c,c.visualViewport||[],id(s)?s:[],u&&t?Fu(u):[])}return e.concat(s,Fu(s,[],t))}function fv(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function rS(n){const e=ms(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Bs(n),a=s?n.offsetWidth:t,c=s?n.offsetHeight:r,u=Ef(t)!==a||Ef(r)!==c;return u&&(t=a,r=c),{width:t,height:r,$:u}}function by(n){return fs(n)?n:n.contextElement}function zl(n){const e=by(n);if(!Bs(e))return Do(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:a}=rS(e);let c=(a?Ef(t.width):t.width)/r,u=(a?Ef(t.height):t.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const _2=Do(0);function sS(n){const e=Tr(n);return!Ey()||!e.visualViewport?_2:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function E2(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Tr(n)?!1:e}function Pa(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),a=by(n);let c=Do(1);e&&(r?fs(r)&&(c=zl(r)):c=zl(n));const u=E2(a,t,r)?sS(a):Do(0);let h=(s.left+u.x)/c.x,m=(s.top+u.y)/c.y,g=s.width/c.x,v=s.height/c.y;if(a){const y=Tr(a),b=r&&fs(r)?Tr(r):r;let S=y,E=fv(S);for(;E&&r&&b!==S;){const x=zl(E),A=E.getBoundingClientRect(),I=ms(E),C=A.left+(E.clientLeft+parseFloat(I.paddingLeft))*x.x,L=A.top+(E.clientTop+parseFloat(I.paddingTop))*x.y;h*=x.x,m*=x.y,g*=x.x,v*=x.y,h+=C,m+=L,S=Tr(E),E=fv(S)}}return Sf({width:g,height:v,x:h,y:m})}function b2(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const a=s==="fixed",c=Ks(r),u=e?sm(e.floating):!1;if(r===c||u&&a)return t;let h={scrollLeft:0,scrollTop:0},m=Do(1);const g=Do(0),v=Bs(r);if((v||!v&&!a)&&((xc(r)!=="body"||id(c))&&(h=im(r)),Bs(r))){const y=Pa(r);m=zl(r),g.x=y.x+r.clientLeft,g.y=y.y+r.clientTop}return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-h.scrollLeft*m.x+g.x,y:t.y*m.y-h.scrollTop*m.y+g.y}}function S2(n){return Array.from(n.getClientRects())}function mv(n,e){const t=im(n).scrollLeft;return e?e.left+t:Pa(Ks(n)).left+t}function N2(n){const e=Ks(n),t=im(n),r=n.ownerDocument.body,s=br(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=br(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+mv(n);const u=-t.scrollTop;return ms(r).direction==="rtl"&&(c+=br(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:c,y:u}}function T2(n,e){const t=Tr(n),r=Ks(n),s=t.visualViewport;let a=r.clientWidth,c=r.clientHeight,u=0,h=0;if(s){a=s.width,c=s.height;const m=Ey();(!m||m&&e==="fixed")&&(u=s.offsetLeft,h=s.offsetTop)}return{width:a,height:c,x:u,y:h}}function C2(n,e){const t=Pa(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,a=Bs(n)?zl(n):Do(1),c=n.clientWidth*a.x,u=n.clientHeight*a.y,h=s*a.x,m=r*a.y;return{width:c,height:u,x:h,y:m}}function C_(n,e,t){let r;if(e==="viewport")r=T2(n,t);else if(e==="document")r=N2(Ks(n));else if(fs(e))r=C2(e,t);else{const s=sS(n);r={...e,x:e.x-s.x,y:e.y-s.y}}return Sf(r)}function iS(n,e){const t=Lo(n);return t===e||!fs(t)||sc(t)?!1:ms(t).position==="fixed"||iS(t,e)}function I2(n,e){const t=e.get(n);if(t)return t;let r=Fu(n,[],!1).filter(u=>fs(u)&&xc(u)!=="body"),s=null;const a=ms(n).position==="fixed";let c=a?Lo(n):n;for(;fs(c)&&!sc(c);){const u=ms(c),h=_y(c);!h&&u.position==="fixed"&&(s=null),(a?!h&&!s:!h&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||id(c)&&!h&&iS(n,c))?r=r.filter(g=>g!==c):s=u,c=Lo(c)}return e.set(n,r),r}function j2(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const c=[...t==="clippingAncestors"?sm(e)?[]:I2(e,this._c):[].concat(t),r],u=c[0],h=c.reduce((m,g)=>{const v=C_(e,g,s);return m.top=br(v.top,m.top),m.right=ko(v.right,m.right),m.bottom=ko(v.bottom,m.bottom),m.left=br(v.left,m.left),m},C_(e,u,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function A2(n){const{width:e,height:t}=rS(n);return{width:e,height:t}}function P2(n,e,t){const r=Bs(e),s=Ks(e),a=t==="fixed",c=Pa(n,!0,a,e);let u={scrollLeft:0,scrollTop:0};const h=Do(0);if(r||!r&&!a)if((xc(e)!=="body"||id(s))&&(u=im(e)),r){const b=Pa(e,!0,a,e);h.x=b.x+e.clientLeft,h.y=b.y+e.clientTop}else s&&(h.x=mv(s));let m=0,g=0;if(s&&!r&&!a){const b=s.getBoundingClientRect();g=b.top+u.scrollTop,m=b.left+u.scrollLeft-mv(s,b)}const v=c.left+u.scrollLeft-h.x-m,y=c.top+u.scrollTop-h.y-g;return{x:v,y,width:c.width,height:c.height}}function Cg(n){return ms(n).position==="static"}function I_(n,e){if(!Bs(n)||ms(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Ks(n)===t&&(t=t.ownerDocument.body),t}function oS(n,e){const t=Tr(n);if(sm(n))return t;if(!Bs(n)){let s=Lo(n);for(;s&&!sc(s);){if(fs(s)&&!Cg(s))return s;s=Lo(s)}return t}let r=I_(n,e);for(;r&&x2(r)&&Cg(r);)r=I_(r,e);return r&&sc(r)&&Cg(r)&&!_y(r)?t:r||w2(n)||t}const R2=async function(n){const e=this.getOffsetParent||oS,t=this.getDimensions,r=await t(n.floating);return{reference:P2(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function k2(n){return ms(n).direction==="rtl"}const D2={convertOffsetParentRelativeRectToViewportRelativeRect:b2,getDocumentElement:Ks,getClippingRect:j2,getOffsetParent:oS,getElementRects:R2,getClientRects:S2,getDimensions:A2,getScale:zl,isElement:fs,isRTL:k2};function O2(n,e){let t=null,r;const s=Ks(n);function a(){var u;clearTimeout(r),(u=t)==null||u.disconnect(),t=null}function c(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),a();const{left:m,top:g,width:v,height:y}=n.getBoundingClientRect();if(u||e(),!v||!y)return;const b=Uh(g),S=Uh(s.clientWidth-(m+v)),E=Uh(s.clientHeight-(g+y)),x=Uh(m),I={rootMargin:-b+"px "+-S+"px "+-E+"px "+-x+"px",threshold:br(0,ko(1,h))||1};let C=!0;function L(V){const q=V[0].intersectionRatio;if(q!==h){if(!C)return c();q?c(!1,q):r=setTimeout(()=>{c(!1,1e-7)},1e3)}C=!1}try{t=new IntersectionObserver(L,{...I,root:s.ownerDocument})}catch{t=new IntersectionObserver(L,I)}t.observe(n)}return c(!0),a}function L2(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,m=by(n),g=s||a?[...m?Fu(m):[],...Fu(e)]:[];g.forEach(A=>{s&&A.addEventListener("scroll",t,{passive:!0}),a&&A.addEventListener("resize",t)});const v=m&&u?O2(m,t):null;let y=-1,b=null;c&&(b=new ResizeObserver(A=>{let[I]=A;I&&I.target===m&&b&&(b.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var C;(C=b)==null||C.observe(e)})),t()}),m&&!h&&b.observe(m),b.observe(e));let S,E=h?Pa(n):null;h&&x();function x(){const A=Pa(n);E&&(A.x!==E.x||A.y!==E.y||A.width!==E.width||A.height!==E.height)&&t(),E=A,S=requestAnimationFrame(x)}return t(),()=>{var A;g.forEach(I=>{s&&I.removeEventListener("scroll",t),a&&I.removeEventListener("resize",t)}),v==null||v(),(A=b)==null||A.disconnect(),b=null,h&&cancelAnimationFrame(S)}}const M2=p2,F2=g2,V2=h2,U2=y2,$2=f2,j_=d2,z2=v2,B2=(n,e,t)=>{const r=new Map,s={platform:D2,...t},a={...s.platform,_c:r};return u2(n,e,{...s,platform:a})};var of=typeof document<"u"?_.useLayoutEffect:_.useEffect;function Nf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Nf(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const a=s[r];if(!(a==="_owner"&&n.$$typeof)&&!Nf(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function aS(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function A_(n,e){const t=aS(n);return Math.round(e*t)/t}function Ig(n){const e=_.useRef(n);return of(()=>{e.current=n}),e}function q2(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:c}={},transform:u=!0,whileElementsMounted:h,open:m}=n,[g,v]=_.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[y,b]=_.useState(r);Nf(y,r)||b(r);const[S,E]=_.useState(null),[x,A]=_.useState(null),I=_.useCallback(B=>{B!==q.current&&(q.current=B,E(B))},[]),C=_.useCallback(B=>{B!==P.current&&(P.current=B,A(B))},[]),L=a||S,V=c||x,q=_.useRef(null),P=_.useRef(null),R=_.useRef(g),D=h!=null,k=Ig(h),$=Ig(s),z=Ig(m),M=_.useCallback(()=>{if(!q.current||!P.current)return;const B={placement:e,strategy:t,middleware:y};$.current&&(B.platform=$.current),B2(q.current,P.current,B).then(Q=>{const ee={...Q,isPositioned:z.current!==!1};oe.current&&!Nf(R.current,ee)&&(R.current=ee,$a.flushSync(()=>{v(ee)}))})},[y,e,t,$,z]);of(()=>{m===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,v(B=>({...B,isPositioned:!1})))},[m]);const oe=_.useRef(!1);of(()=>(oe.current=!0,()=>{oe.current=!1}),[]),of(()=>{if(L&&(q.current=L),V&&(P.current=V),L&&V){if(k.current)return k.current(L,V,M);M()}},[L,V,M,k,D]);const K=_.useMemo(()=>({reference:q,floating:P,setReference:I,setFloating:C}),[I,C]),Z=_.useMemo(()=>({reference:L,floating:V}),[L,V]),X=_.useMemo(()=>{const B={position:t,left:0,top:0};if(!Z.floating)return B;const Q=A_(Z.floating,g.x),ee=A_(Z.floating,g.y);return u?{...B,transform:"translate("+Q+"px, "+ee+"px)",...aS(Z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Q,top:ee}},[t,u,Z.floating,g.x,g.y]);return _.useMemo(()=>({...g,update:M,refs:K,elements:Z,floatingStyles:X}),[g,M,K,Z,X])}const W2=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?j_({element:r.current,padding:s}).fn(t):{}:r?j_({element:r,padding:s}).fn(t):{}}}},H2=(n,e)=>({...M2(n),options:[n,e]}),K2=(n,e)=>({...F2(n),options:[n,e]}),G2=(n,e)=>({...z2(n),options:[n,e]}),Q2=(n,e)=>({...V2(n),options:[n,e]}),Y2=(n,e)=>({...U2(n),options:[n,e]}),X2=(n,e)=>({...$2(n),options:[n,e]}),J2=(n,e)=>({...W2(n),options:[n,e]});var Z2="Arrow",lS=_.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...a}=n;return l.jsx(He.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});lS.displayName=Z2;var eD=lS;function cS(n){const[e,t]=_.useState(void 0);return Wt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let c,u;if("borderBoxSize"in a){const h=a.borderBoxSize,m=Array.isArray(h)?h[0]:h;c=m.inlineSize,u=m.blockSize}else c=n.offsetWidth,u=n.offsetHeight;t({width:c,height:u})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Sy="Popper",[uS,om]=ji(Sy),[tD,dS]=uS(Sy),hS=n=>{const{__scopePopper:e,children:t}=n,[r,s]=_.useState(null);return l.jsx(tD,{scope:e,anchor:r,onAnchorChange:s,children:t})};hS.displayName=Sy;var fS="PopperAnchor",mS=_.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,a=dS(fS,t),c=_.useRef(null),u=vt(e,c);return _.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:l.jsx(He.div,{...s,ref:u})});mS.displayName=fS;var Ny="PopperContent",[nD,rD]=uS(Ny),pS=_.forwardRef((n,e)=>{var me,Te,ke,Ce,Me,Ke;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:m=[],collisionPadding:g=0,sticky:v="partial",hideWhenDetached:y=!1,updatePositionStrategy:b="optimized",onPlaced:S,...E}=n,x=dS(Ny,t),[A,I]=_.useState(null),C=vt(e,yt=>I(yt)),[L,V]=_.useState(null),q=cS(L),P=(q==null?void 0:q.width)??0,R=(q==null?void 0:q.height)??0,D=r+(a!=="center"?"-"+a:""),k=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},$=Array.isArray(m)?m:[m],z=$.length>0,M={padding:k,boundary:$.filter(iD),altBoundary:z},{refs:oe,floatingStyles:K,placement:Z,isPositioned:X,middlewareData:B}=q2({strategy:"fixed",placement:D,whileElementsMounted:(...yt)=>L2(...yt,{animationFrame:b==="always"}),elements:{reference:x.anchor},middleware:[H2({mainAxis:s+R,alignmentAxis:c}),h&&K2({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?G2():void 0,...M}),h&&Q2({...M}),Y2({...M,apply:({elements:yt,rects:bt,availableWidth:rn,availableHeight:Ot})=>{const{width:At,height:_t}=bt.reference,ft=yt.floating.style;ft.setProperty("--radix-popper-available-width",`${rn}px`),ft.setProperty("--radix-popper-available-height",`${Ot}px`),ft.setProperty("--radix-popper-anchor-width",`${At}px`),ft.setProperty("--radix-popper-anchor-height",`${_t}px`)}}),L&&J2({element:L,padding:u}),oD({arrowWidth:P,arrowHeight:R}),y&&X2({strategy:"referenceHidden",...M})]}),[Q,ee]=yS(Z),U=vn(S);Wt(()=>{X&&(U==null||U())},[X,U]);const Y=(me=B.arrow)==null?void 0:me.x,le=(Te=B.arrow)==null?void 0:Te.y,Ee=((ke=B.arrow)==null?void 0:ke.centerOffset)!==0,[ve,ce]=_.useState();return Wt(()=>{A&&ce(window.getComputedStyle(A).zIndex)},[A]),l.jsx("div",{ref:oe.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:X?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(Ce=B.transformOrigin)==null?void 0:Ce.x,(Me=B.transformOrigin)==null?void 0:Me.y].join(" "),...((Ke=B.hide)==null?void 0:Ke.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:l.jsx(nD,{scope:t,placedSide:Q,onArrowChange:V,arrowX:Y,arrowY:le,shouldHideArrow:Ee,children:l.jsx(He.div,{"data-side":Q,"data-align":ee,...E,ref:C,style:{...E.style,animation:X?void 0:"none"}})})})});pS.displayName=Ny;var gS="PopperArrow",sD={top:"bottom",right:"left",bottom:"top",left:"right"},vS=_.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,a=rD(gS,r),c=sD[a.placedSide];return l.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:l.jsx(eD,{...s,ref:t,style:{...s.style,display:"block"}})})});vS.displayName=gS;function iD(n){return n!==null}var oD=n=>({name:"transformOrigin",options:n,fn(e){var x,A,I;const{placement:t,rects:r,middlewareData:s}=e,c=((x=s.arrow)==null?void 0:x.centerOffset)!==0,u=c?0:n.arrowWidth,h=c?0:n.arrowHeight,[m,g]=yS(t),v={start:"0%",center:"50%",end:"100%"}[g],y=(((A=s.arrow)==null?void 0:A.x)??0)+u/2,b=(((I=s.arrow)==null?void 0:I.y)??0)+h/2;let S="",E="";return m==="bottom"?(S=c?v:`${y}px`,E=`${-h}px`):m==="top"?(S=c?v:`${y}px`,E=`${r.floating.height+h}px`):m==="right"?(S=`${-h}px`,E=c?v:`${b}px`):m==="left"&&(S=`${r.floating.width+h}px`,E=c?v:`${b}px`),{data:{x:S,y:E}}}});function yS(n){const[e,t="center"]=n.split("-");return[e,t]}var aD=hS,xS=mS,wS=pS,_S=vS,lD="Portal",ES=_.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,a]=_.useState(!1);Wt(()=>a(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Zf.createPortal(l.jsx(He.div,{...r,ref:e}),c):null});ES.displayName=lD;function cD(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var bS=n=>{const{present:e,children:t}=n,r=uD(e),s=typeof t=="function"?t({present:r.isPresent}):_.Children.only(t),a=vt(r.ref,dD(s));return typeof t=="function"||r.isPresent?_.cloneElement(s,{ref:a}):null};bS.displayName="Presence";function uD(n){const[e,t]=_.useState(),r=_.useRef({}),s=_.useRef(n),a=_.useRef("none"),c=n?"mounted":"unmounted",[u,h]=cD(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const m=$h(r.current);a.current=u==="mounted"?m:"none"},[u]),Wt(()=>{const m=r.current,g=s.current;if(g!==n){const y=a.current,b=$h(m);n?h("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?h("UNMOUNT"):h(g&&y!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Wt(()=>{if(e){let m;const g=e.ownerDocument.defaultView??window,v=b=>{const E=$h(r.current).includes(b.animationName);if(b.target===e&&E&&(h("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",m=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},y=b=>{b.target===e&&(a.current=$h(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{g.clearTimeout(m),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function $h(n){return(n==null?void 0:n.animationName)||"none"}function dD(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var[am,Az]=Wk("Tooltip",[om]),Ty=om(),SS="TooltipProvider",hD=700,P_="tooltip.open",[fD,NS]=am(SS),TS=n=>{const{__scopeTooltip:e,delayDuration:t=hD,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=n,[c,u]=_.useState(!0),h=_.useRef(!1),m=_.useRef(0);return _.useEffect(()=>{const g=m.current;return()=>window.clearTimeout(g)},[]),l.jsx(fD,{scope:e,isOpenDelayed:c,delayDuration:t,onOpen:_.useCallback(()=>{window.clearTimeout(m.current),u(!1)},[]),onClose:_.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:h,onPointerInTransitChange:_.useCallback(g=>{h.current=g},[]),disableHoverableContent:s,children:a})};TS.displayName=SS;var CS="Tooltip",[Pz,lm]=am(CS),pv="TooltipTrigger",mD=_.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=lm(pv,t),a=NS(pv,t),c=Ty(t),u=_.useRef(null),h=vt(e,u,s.onTriggerChange),m=_.useRef(!1),g=_.useRef(!1),v=_.useCallback(()=>m.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),l.jsx(xS,{asChild:!0,...c,children:l.jsx(He.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:h,onPointerMove:ze(n.onPointerMove,y=>{y.pointerType!=="touch"&&!g.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),g.current=!0)}),onPointerLeave:ze(n.onPointerLeave,()=>{s.onTriggerLeave(),g.current=!1}),onPointerDown:ze(n.onPointerDown,()=>{m.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:ze(n.onFocus,()=>{m.current||s.onOpen()}),onBlur:ze(n.onBlur,s.onClose),onClick:ze(n.onClick,s.onClose)})})});mD.displayName=pv;var pD="TooltipPortal",[Rz,gD]=am(pD,{forceMount:void 0}),ic="TooltipContent",IS=_.forwardRef((n,e)=>{const t=gD(ic,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...a}=n,c=lm(ic,n.__scopeTooltip);return l.jsx(bS,{present:r||c.open,children:c.disableHoverableContent?l.jsx(jS,{side:s,...a,ref:e}):l.jsx(vD,{side:s,...a,ref:e})})}),vD=_.forwardRef((n,e)=>{const t=lm(ic,n.__scopeTooltip),r=NS(ic,n.__scopeTooltip),s=_.useRef(null),a=vt(e,s),[c,u]=_.useState(null),{trigger:h,onClose:m}=t,g=s.current,{onPointerInTransitChange:v}=r,y=_.useCallback(()=>{u(null),v(!1)},[v]),b=_.useCallback((S,E)=>{const x=S.currentTarget,A={x:S.clientX,y:S.clientY},I=_D(A,x.getBoundingClientRect()),C=ED(A,I),L=bD(E.getBoundingClientRect()),V=ND([...C,...L]);u(V),v(!0)},[v]);return _.useEffect(()=>()=>y(),[y]),_.useEffect(()=>{if(h&&g){const S=x=>b(x,g),E=x=>b(x,h);return h.addEventListener("pointerleave",S),g.addEventListener("pointerleave",E),()=>{h.removeEventListener("pointerleave",S),g.removeEventListener("pointerleave",E)}}},[h,g,b,y]),_.useEffect(()=>{if(c){const S=E=>{const x=E.target,A={x:E.clientX,y:E.clientY},I=(h==null?void 0:h.contains(x))||(g==null?void 0:g.contains(x)),C=!SD(A,c);I?y():C&&(y(),m())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[h,g,c,m,y]),l.jsx(jS,{...n,ref:a})}),[yD,xD]=am(CS,{isInside:!1}),jS=_.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:c,...u}=n,h=lm(ic,t),m=Ty(t),{onClose:g}=h;return _.useEffect(()=>(document.addEventListener(P_,g),()=>document.removeEventListener(P_,g)),[g]),_.useEffect(()=>{if(h.trigger){const v=y=>{const b=y.target;b!=null&&b.contains(h.trigger)&&g()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[h.trigger,g]),l.jsx(vy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:v=>v.preventDefault(),onDismiss:g,children:l.jsxs(wS,{"data-state":h.stateAttribute,...m,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(c1,{children:r}),l.jsx(yD,{scope:t,isInside:!0,children:l.jsx(KP,{id:h.contentId,role:"tooltip",children:s||r})})]})})});IS.displayName=ic;var AS="TooltipArrow",wD=_.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Ty(t);return xD(AS,t).isInside?null:l.jsx(_S,{...s,...r,ref:e})});wD.displayName=AS;function _D(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,r,s,a)){case a:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ED(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function bD(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function SD(n,e){const{x:t,y:r}=n;let s=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const u=e[a].x,h=e[a].y,m=e[c].x,g=e[c].y;h>r!=g>r&&t<(m-u)*(r-h)/(g-h)+u&&(s=!s)}return s}function ND(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),TD(e)}function TD(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const a=e[e.length-1],c=e[e.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const a=t[t.length-1],c=t[t.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var CD=TS,PS=IS;const ID=CD,jD=_.forwardRef(({className:n,sideOffset:e=4,...t},r)=>l.jsx(PS,{ref:r,sideOffset:e,className:tt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));jD.displayName=PS.displayName;var cm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},um=typeof window>"u"||"Deno"in globalThis;function os(){}function AD(n,e){return typeof n=="function"?n(e):n}function PD(n){return typeof n=="number"&&n>=0&&n!==1/0}function RD(n,e){return Math.max(n+(e||0)-Date.now(),0)}function gv(n,e){return typeof n=="function"?n(e):n}function kD(n,e){return typeof n=="function"?n(e):n}function R_(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:a,queryKey:c,stale:u}=n;if(c){if(r){if(e.queryHash!==Cy(c,e.options))return!1}else if(!Uu(e.queryKey,c))return!1}if(t!=="all"){const h=e.isActive();if(t==="active"&&!h||t==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function k_(n,e){const{exact:t,status:r,predicate:s,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(Vu(e.options.mutationKey)!==Vu(a))return!1}else if(!Uu(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Cy(n,e){return((e==null?void 0:e.queryKeyHashFn)||Vu)(n)}function Vu(n){return JSON.stringify(n,(e,t)=>vv(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Uu(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Uu(n[t],e[t])):!1}function RS(n,e){if(n===e)return n;const t=D_(n)&&D_(e);if(t||vv(n)&&vv(e)){const r=t?n:Object.keys(n),s=r.length,a=t?e:Object.keys(e),c=a.length,u=t?[]:{},h=new Set(r);let m=0;for(let g=0;g<c;g++){const v=t?g:a[g];(!t&&h.has(v)||t)&&n[v]===void 0&&e[v]===void 0?(u[v]=void 0,m++):(u[v]=RS(n[v],e[v]),u[v]===n[v]&&n[v]!==void 0&&m++)}return s===c&&m===s?n:u}return e}function D_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function vv(n){if(!O_(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!O_(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function O_(n){return Object.prototype.toString.call(n)==="[object Object]"}function DD(n){return new Promise(e=>{setTimeout(e,n)})}function OD(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?RS(n,e):e}function LD(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function MD(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Iy=Symbol();function kS(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Iy?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var wa,po,Gl,Xb,FD=(Xb=class extends cm{constructor(){super();wt(this,wa);wt(this,po);wt(this,Gl);st(this,Gl,e=>{if(!um&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){de(this,po)||this.setEventListener(de(this,Gl))}onUnsubscribe(){var e;this.hasListeners()||((e=de(this,po))==null||e.call(this),st(this,po,void 0))}setEventListener(e){var t;st(this,Gl,e),(t=de(this,po))==null||t.call(this),st(this,po,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){de(this,wa)!==e&&(st(this,wa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof de(this,wa)=="boolean"?de(this,wa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},wa=new WeakMap,po=new WeakMap,Gl=new WeakMap,Xb),DS=new FD,Ql,go,Yl,Jb,VD=(Jb=class extends cm{constructor(){super();wt(this,Ql,!0);wt(this,go);wt(this,Yl);st(this,Yl,e=>{if(!um&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){de(this,go)||this.setEventListener(de(this,Yl))}onUnsubscribe(){var e;this.hasListeners()||((e=de(this,go))==null||e.call(this),st(this,go,void 0))}setEventListener(e){var t;st(this,Yl,e),(t=de(this,go))==null||t.call(this),st(this,go,e(this.setOnline.bind(this)))}setOnline(e){de(this,Ql)!==e&&(st(this,Ql,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return de(this,Ql)}},Ql=new WeakMap,go=new WeakMap,Yl=new WeakMap,Jb),Tf=new VD;function UD(){let n,e;const t=new Promise((s,a)=>{n=s,e=a});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function $D(n){return Math.min(1e3*2**n,3e4)}function OS(n){return(n??"online")==="online"?Tf.isOnline():!0}var LS=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function jg(n){return n instanceof LS}function MS(n){let e=!1,t=0,r=!1,s;const a=UD(),c=E=>{var x;r||(y(new LS(E)),(x=n.abort)==null||x.call(n))},u=()=>{e=!0},h=()=>{e=!1},m=()=>DS.isFocused()&&(n.networkMode==="always"||Tf.isOnline())&&n.canRun(),g=()=>OS(n.networkMode)&&n.canRun(),v=E=>{var x;r||(r=!0,(x=n.onSuccess)==null||x.call(n,E),s==null||s(),a.resolve(E))},y=E=>{var x;r||(r=!0,(x=n.onError)==null||x.call(n,E),s==null||s(),a.reject(E))},b=()=>new Promise(E=>{var x;s=A=>{(r||m())&&E(A)},(x=n.onPause)==null||x.call(n)}).then(()=>{var E;s=void 0,r||(E=n.onContinue)==null||E.call(n)}),S=()=>{if(r)return;let E;const x=t===0?n.initialPromise:void 0;try{E=x??n.fn()}catch(A){E=Promise.reject(A)}Promise.resolve(E).then(v).catch(A=>{var q;if(r)return;const I=n.retry??(um?0:3),C=n.retryDelay??$D,L=typeof C=="function"?C(t,A):C,V=I===!0||typeof I=="number"&&t<I||typeof I=="function"&&I(t,A);if(e||!V){y(A);return}t++,(q=n.onFail)==null||q.call(n,t,A),DD(L).then(()=>m()?void 0:b()).then(()=>{e?y(A):S()})})};return{promise:a,cancel:c,continue:()=>(s==null||s(),a),cancelRetry:u,continueRetry:h,canStart:g,start:()=>(g()?S():b().then(S),a)}}var zD=n=>setTimeout(n,0);function BD(){let n=[],e=0,t=u=>{u()},r=u=>{u()},s=zD;const a=u=>{e?n.push(u):s(()=>{t(u)})},c=()=>{const u=n;n=[],u.length&&s(()=>{r(()=>{u.forEach(h=>{t(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||c()}return h},batchCalls:u=>(...h)=>{a(()=>{u(...h)})},schedule:a,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Xn=BD(),_a,Zb,FS=(Zb=class{constructor(){wt(this,_a)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),PD(this.gcTime)&&st(this,_a,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(um?1/0:5*60*1e3))}clearGcTimeout(){de(this,_a)&&(clearTimeout(de(this,_a)),st(this,_a,void 0))}},_a=new WeakMap,Zb),Xl,Ea,Ur,ba,Vn,ed,Sa,as,pi,e1,qD=(e1=class extends FS{constructor(t){super();wt(this,as);wt(this,Xl);wt(this,Ea);wt(this,Ur);wt(this,ba);wt(this,Vn);wt(this,ed);wt(this,Sa);st(this,Sa,!1),st(this,ed,t.defaultOptions),this.setOptions(t.options),this.observers=[],st(this,ba,t.client),st(this,Ur,de(this,ba).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,st(this,Xl,HD(this.options)),this.state=t.state??de(this,Xl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=de(this,Vn))==null?void 0:t.promise}setOptions(t){this.options={...de(this,ed),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&de(this,Ur).remove(this)}setData(t,r){const s=OD(this.state.data,t,this.options);return Mn(this,as,pi).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){Mn(this,as,pi).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=de(this,Vn))==null?void 0:s.promise;return(a=de(this,Vn))==null||a.cancel(t),r?r.then(os).catch(os):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(de(this,Xl))}isActive(){return this.observers.some(t=>kD(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Iy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>gv(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!RD(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=de(this,Vn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=de(this,Vn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),de(this,Ur).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(de(this,Vn)&&(de(this,Sa)?de(this,Vn).cancel({revert:!0}):de(this,Vn).cancelRetry()),this.scheduleGc()),de(this,Ur).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Mn(this,as,pi).call(this,{type:"invalidate"})}fetch(t,r){var g,v,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(de(this,Vn))return de(this,Vn).continueRetry(),de(this,Vn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const b=this.observers.find(S=>S.options.queryFn);b&&this.setOptions(b.options)}const s=new AbortController,a=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(st(this,Sa,!0),s.signal)})},c=()=>{const b=kS(this.options,r),E=(()=>{const x={client:de(this,ba),queryKey:this.queryKey,meta:this.meta};return a(x),x})();return st(this,Sa,!1),this.options.persister?this.options.persister(b,E,this):b(E)},h=(()=>{const b={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:de(this,ba),state:this.state,fetchFn:c};return a(b),b})();(g=this.options.behavior)==null||g.onFetch(h,this),st(this,Ea,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=h.fetchOptions)==null?void 0:v.meta))&&Mn(this,as,pi).call(this,{type:"fetch",meta:(y=h.fetchOptions)==null?void 0:y.meta});const m=b=>{var S,E,x,A;jg(b)&&b.silent||Mn(this,as,pi).call(this,{type:"error",error:b}),jg(b)||((E=(S=de(this,Ur).config).onError)==null||E.call(S,b,this),(A=(x=de(this,Ur).config).onSettled)==null||A.call(x,this.state.data,b,this)),this.scheduleGc()};return st(this,Vn,MS({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:b=>{var S,E,x,A;if(b===void 0){m(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(b)}catch(I){m(I);return}(E=(S=de(this,Ur).config).onSuccess)==null||E.call(S,b,this),(A=(x=de(this,Ur).config).onSettled)==null||A.call(x,b,this.state.error,this),this.scheduleGc()},onError:m,onFail:(b,S)=>{Mn(this,as,pi).call(this,{type:"failed",failureCount:b,error:S})},onPause:()=>{Mn(this,as,pi).call(this,{type:"pause"})},onContinue:()=>{Mn(this,as,pi).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),de(this,Vn).start()}},Xl=new WeakMap,Ea=new WeakMap,Ur=new WeakMap,ba=new WeakMap,Vn=new WeakMap,ed=new WeakMap,Sa=new WeakMap,as=new WeakSet,pi=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...WD(s.data,this.options),fetchMeta:t.meta??null};case"success":return st(this,Ea,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return jg(a)&&a.revert&&de(this,Ea)?{...de(this,Ea),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),Xn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),de(this,Ur).notify({query:this,type:"updated",action:t})})},e1);function WD(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:OS(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function HD(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var As,t1,KD=(t1=class extends cm{constructor(e={}){super();wt(this,As);this.config=e,st(this,As,new Map)}build(e,t,r){const s=t.queryKey,a=t.queryHash??Cy(s,t);let c=this.get(a);return c||(c=new qD({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){de(this,As).has(e.queryHash)||(de(this,As).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=de(this,As).get(e.queryHash);t&&(e.destroy(),t===e&&de(this,As).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Xn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return de(this,As).get(e)}getAll(){return[...de(this,As).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>R_(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>R_(e,r)):t}notify(e){Xn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Xn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Xn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},As=new WeakMap,t1),Ps,Yn,Na,Rs,lo,n1,GD=(n1=class extends FS{constructor(t){super();wt(this,Rs);wt(this,Ps);wt(this,Yn);wt(this,Na);this.mutationId=t.mutationId,st(this,Yn,t.mutationCache),st(this,Ps,[]),this.state=t.state||QD(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){de(this,Ps).includes(t)||(de(this,Ps).push(t),this.clearGcTimeout(),de(this,Yn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){st(this,Ps,de(this,Ps).filter(r=>r!==t)),this.scheduleGc(),de(this,Yn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){de(this,Ps).length||(this.state.status==="pending"?this.scheduleGc():de(this,Yn).remove(this))}continue(){var t;return((t=de(this,Na))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var c,u,h,m,g,v,y,b,S,E,x,A,I,C,L,V,q,P,R,D;const r=()=>{Mn(this,Rs,lo).call(this,{type:"continue"})};st(this,Na,MS({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,$)=>{Mn(this,Rs,lo).call(this,{type:"failed",failureCount:k,error:$})},onPause:()=>{Mn(this,Rs,lo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>de(this,Yn).canRun(this)}));const s=this.state.status==="pending",a=!de(this,Na).canStart();try{if(s)r();else{Mn(this,Rs,lo).call(this,{type:"pending",variables:t,isPaused:a}),await((u=(c=de(this,Yn).config).onMutate)==null?void 0:u.call(c,t,this));const $=await((m=(h=this.options).onMutate)==null?void 0:m.call(h,t));$!==this.state.context&&Mn(this,Rs,lo).call(this,{type:"pending",context:$,variables:t,isPaused:a})}const k=await de(this,Na).start();return await((v=(g=de(this,Yn).config).onSuccess)==null?void 0:v.call(g,k,t,this.state.context,this)),await((b=(y=this.options).onSuccess)==null?void 0:b.call(y,k,t,this.state.context)),await((E=(S=de(this,Yn).config).onSettled)==null?void 0:E.call(S,k,null,this.state.variables,this.state.context,this)),await((A=(x=this.options).onSettled)==null?void 0:A.call(x,k,null,t,this.state.context)),Mn(this,Rs,lo).call(this,{type:"success",data:k}),k}catch(k){try{throw await((C=(I=de(this,Yn).config).onError)==null?void 0:C.call(I,k,t,this.state.context,this)),await((V=(L=this.options).onError)==null?void 0:V.call(L,k,t,this.state.context)),await((P=(q=de(this,Yn).config).onSettled)==null?void 0:P.call(q,void 0,k,this.state.variables,this.state.context,this)),await((D=(R=this.options).onSettled)==null?void 0:D.call(R,void 0,k,t,this.state.context)),k}finally{Mn(this,Rs,lo).call(this,{type:"error",error:k})}}finally{de(this,Yn).runNext(this)}}},Ps=new WeakMap,Yn=new WeakMap,Na=new WeakMap,Rs=new WeakSet,lo=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Xn.batch(()=>{de(this,Ps).forEach(s=>{s.onMutationUpdate(t)}),de(this,Yn).notify({mutation:this,type:"updated",action:t})})},n1);function QD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vi,ls,td,r1,YD=(r1=class extends cm{constructor(e={}){super();wt(this,vi);wt(this,ls);wt(this,td);this.config=e,st(this,vi,new Set),st(this,ls,new Map),st(this,td,0)}build(e,t,r){const s=new GD({mutationCache:this,mutationId:++Oh(this,td)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){de(this,vi).add(e);const t=zh(e);if(typeof t=="string"){const r=de(this,ls).get(t);r?r.push(e):de(this,ls).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(de(this,vi).delete(e)){const t=zh(e);if(typeof t=="string"){const r=de(this,ls).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&de(this,ls).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=zh(e);if(typeof t=="string"){const r=de(this,ls).get(t),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=zh(e);if(typeof t=="string"){const s=(r=de(this,ls).get(t))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Xn.batch(()=>{de(this,vi).forEach(e=>{this.notify({type:"removed",mutation:e})}),de(this,vi).clear(),de(this,ls).clear()})}getAll(){return Array.from(de(this,vi))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>k_(t,r))}findAll(e={}){return this.getAll().filter(t=>k_(e,t))}notify(e){Xn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Xn.batch(()=>Promise.all(e.map(t=>t.continue().catch(os))))}},vi=new WeakMap,ls=new WeakMap,td=new WeakMap,r1);function zh(n){var e;return(e=n.options.scope)==null?void 0:e.id}function L_(n){return{onFetch:(e,t)=>{var g,v,y,b,S;const r=e.options,s=(y=(v=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:v.fetchMore)==null?void 0:y.direction,a=((b=e.state.data)==null?void 0:b.pages)||[],c=((S=e.state.data)==null?void 0:S.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const m=async()=>{let E=!1;const x=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?E=!0:e.signal.addEventListener("abort",()=>{E=!0}),e.signal)})},A=kS(e.options,e.fetchOptions),I=async(C,L,V)=>{if(E)return Promise.reject();if(L==null&&C.pages.length)return Promise.resolve(C);const P=(()=>{const $={client:e.client,queryKey:e.queryKey,pageParam:L,direction:V?"backward":"forward",meta:e.options.meta};return x($),$})(),R=await A(P),{maxPages:D}=e.options,k=V?MD:LD;return{pages:k(C.pages,R,D),pageParams:k(C.pageParams,L,D)}};if(s&&a.length){const C=s==="backward",L=C?XD:M_,V={pages:a,pageParams:c},q=L(r,V);u=await I(V,q,C)}else{const C=n??a.length;do{const L=h===0?c[0]??r.initialPageParam:M_(r,u);if(h>0&&L==null)break;u=await I(u,L),h++}while(h<C)}return u};e.options.persister?e.fetchFn=()=>{var E,x;return(x=(E=e.options).persister)==null?void 0:x.call(E,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=m}}}function M_(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function XD(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Zt,vo,yo,Jl,Zl,xo,ec,tc,s1,JD=(s1=class{constructor(n={}){wt(this,Zt);wt(this,vo);wt(this,yo);wt(this,Jl);wt(this,Zl);wt(this,xo);wt(this,ec);wt(this,tc);st(this,Zt,n.queryCache||new KD),st(this,vo,n.mutationCache||new YD),st(this,yo,n.defaultOptions||{}),st(this,Jl,new Map),st(this,Zl,new Map),st(this,xo,0)}mount(){Oh(this,xo)._++,de(this,xo)===1&&(st(this,ec,DS.subscribe(async n=>{n&&(await this.resumePausedMutations(),de(this,Zt).onFocus())})),st(this,tc,Tf.subscribe(async n=>{n&&(await this.resumePausedMutations(),de(this,Zt).onOnline())})))}unmount(){var n,e;Oh(this,xo)._--,de(this,xo)===0&&((n=de(this,ec))==null||n.call(this),st(this,ec,void 0),(e=de(this,tc))==null||e.call(this),st(this,tc,void 0))}isFetching(n){return de(this,Zt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return de(this,vo).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=de(this,Zt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=de(this,Zt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(gv(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return de(this,Zt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=de(this,Zt).get(r.queryHash),a=s==null?void 0:s.state.data,c=AD(e,a);if(c!==void 0)return de(this,Zt).build(this,r).setData(c,{...t,manual:!0})}setQueriesData(n,e,t){return Xn.batch(()=>de(this,Zt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=de(this,Zt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=de(this,Zt);Xn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=de(this,Zt);return Xn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Xn.batch(()=>de(this,Zt).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(os).catch(os)}invalidateQueries(n,e={}){return Xn.batch(()=>(de(this,Zt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Xn.batch(()=>de(this,Zt).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,t);return t.throwOnError||(a=a.catch(os)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(os)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=de(this,Zt).build(this,e);return t.isStaleByTime(gv(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(os).catch(os)}fetchInfiniteQuery(n){return n.behavior=L_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(os).catch(os)}ensureInfiniteQueryData(n){return n.behavior=L_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Tf.isOnline()?de(this,vo).resumePausedMutations():Promise.resolve()}getQueryCache(){return de(this,Zt)}getMutationCache(){return de(this,vo)}getDefaultOptions(){return de(this,yo)}setDefaultOptions(n){st(this,yo,n)}setQueryDefaults(n,e){de(this,Jl).set(Vu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...de(this,Jl).values()],t={};return e.forEach(r=>{Uu(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){de(this,Zl).set(Vu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...de(this,Zl).values()],t={};return e.forEach(r=>{Uu(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...de(this,yo).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Cy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Iy&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...de(this,yo).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){de(this,Zt).clear(),de(this,vo).clear()}},Zt=new WeakMap,vo=new WeakMap,yo=new WeakMap,Jl=new WeakMap,Zl=new WeakMap,xo=new WeakMap,ec=new WeakMap,tc=new WeakMap,s1),ZD=_.createContext(void 0),eO=({client:n,children:e})=>(_.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),l.jsx(ZD.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $u(){return $u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$u.apply(this,arguments)}var _o;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(_o||(_o={}));const F_="popstate";function tO(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:c,hash:u}=r.location;return yv("",{pathname:a,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Cf(s)}return rO(e,t,null,n)}function Yt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function VS(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nO(){return Math.random().toString(36).substr(2,8)}function V_(n,e){return{usr:n.state,key:n.key,idx:e}}function yv(n,e,t,r){return t===void 0&&(t=null),$u({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?wc(e):e,{state:t,key:e&&e.key||r||nO()})}function Cf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function rO(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,u=_o.Pop,h=null,m=g();m==null&&(m=0,c.replaceState($u({},c.state,{idx:m}),""));function g(){return(c.state||{idx:null}).idx}function v(){u=_o.Pop;let x=g(),A=x==null?null:x-m;m=x,h&&h({action:u,location:E.location,delta:A})}function y(x,A){u=_o.Push;let I=yv(E.location,x,A);m=g()+1;let C=V_(I,m),L=E.createHref(I);try{c.pushState(C,"",L)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(L)}a&&h&&h({action:u,location:E.location,delta:1})}function b(x,A){u=_o.Replace;let I=yv(E.location,x,A);m=g();let C=V_(I,m),L=E.createHref(I);c.replaceState(C,"",L),a&&h&&h({action:u,location:E.location,delta:0})}function S(x){let A=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof x=="string"?x:Cf(x);return I=I.replace(/ $/,"%20"),Yt(A,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,A)}let E={get action(){return u},get location(){return n(s,c)},listen(x){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(F_,v),h=x,()=>{s.removeEventListener(F_,v),h=null}},createHref(x){return e(s,x)},createURL:S,encodeLocation(x){let A=S(x);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:b,go(x){return c.go(x)}};return E}var U_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(U_||(U_={}));function sO(n,e,t){return t===void 0&&(t="/"),iO(n,e,t)}function iO(n,e,t,r){let s=typeof e=="string"?wc(e):e,a=oc(s.pathname||"/",t);if(a==null)return null;let c=US(n);oO(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let m=vO(a);u=pO(c[h],m)}return u}function US(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,c,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(Yt(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let m=So([r,h.relativePath]),g=t.concat(h);a.children&&a.children.length>0&&(Yt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),US(a.children,e,g,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:fO(m,a.index),routesMeta:g})};return n.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,c);else for(let h of $S(a.path))s(a,c,h)}),e}function $S(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=$S(r.join("/")),u=[];return u.push(...c.map(h=>h===""?a:[a,h].join("/"))),s&&u.push(...c),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function oO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const aO=/^:[\w-]+$/,lO=3,cO=2,uO=1,dO=10,hO=-2,$_=n=>n==="*";function fO(n,e){let t=n.split("/"),r=t.length;return t.some($_)&&(r+=hO),e&&(r+=cO),t.filter(s=>!$_(s)).reduce((s,a)=>s+(aO.test(a)?lO:a===""?uO:dO),r)}function mO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function pO(n,e,t){let{routesMeta:r}=n,s={},a="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],m=u===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",v=xv({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},g),y=h.route;if(!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:So([a,v.pathname]),pathnameBase:_O(So([a,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(a=So([a,v.pathnameBase]))}return c}function xv(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=gO(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((m,g,v)=>{let{paramName:y,isOptional:b}=g;if(y==="*"){let E=u[v]||"";c=a.slice(0,a.length-E.length).replace(/(.)\/+$/,"$1")}const S=u[v];return b&&!S?m[y]=void 0:m[y]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:n}}function gO(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),VS(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function vO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return VS(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function oc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function yO(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?wc(n):n;return{pathname:t?t.startsWith("/")?t:xO(t,e):e,search:EO(r),hash:bO(s)}}function xO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ag(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jy(n,e){let t=wO(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Ay(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=wc(n):(s=$u({},n),Yt(!s.pathname||!s.pathname.includes("?"),Ag("?","pathname","search",s)),Yt(!s.pathname||!s.pathname.includes("#"),Ag("#","pathname","hash",s)),Yt(!s.search||!s.search.includes("#"),Ag("#","search","hash",s)));let a=n===""||s.pathname==="",c=a?"/":s.pathname,u;if(c==null)u=t;else{let v=e.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),v-=1;s.pathname=y.join("/")}u=v>=0?e[v]:"/"}let h=yO(s,u),m=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(m||g)&&(h.pathname+="/"),h}const So=n=>n.join("/").replace(/\/\/+/g,"/"),_O=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),EO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,bO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function SO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const zS=["post","put","patch","delete"];new Set(zS);const NO=["get",...zS];new Set(NO);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zu(){return zu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zu.apply(this,arguments)}const dm=_.createContext(null),BS=_.createContext(null),Ai=_.createContext(null),hm=_.createContext(null),Gs=_.createContext({outlet:null,matches:[],isDataRoute:!1}),qS=_.createContext(null);function TO(n,e){let{relative:t}=e===void 0?{}:e;_c()||Yt(!1);let{basename:r,navigator:s}=_.useContext(Ai),{hash:a,pathname:c,search:u}=fm(n,{relative:t}),h=c;return r!=="/"&&(h=c==="/"?r:So([r,c])),s.createHref({pathname:h,search:u,hash:a})}function _c(){return _.useContext(hm)!=null}function Pi(){return _c()||Yt(!1),_.useContext(hm).location}function WS(n){_.useContext(Ai).static||_.useLayoutEffect(n)}function Ec(){let{isDataRoute:n}=_.useContext(Gs);return n?$O():CO()}function CO(){_c()||Yt(!1);let n=_.useContext(dm),{basename:e,future:t,navigator:r}=_.useContext(Ai),{matches:s}=_.useContext(Gs),{pathname:a}=Pi(),c=JSON.stringify(jy(s,t.v7_relativeSplatPath)),u=_.useRef(!1);return WS(()=>{u.current=!0}),_.useCallback(function(m,g){if(g===void 0&&(g={}),!u.current)return;if(typeof m=="number"){r.go(m);return}let v=Ay(m,JSON.parse(c),a,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:So([e,v.pathname])),(g.replace?r.replace:r.push)(v,g.state,g)},[e,r,c,a,n])}const IO=_.createContext(null);function jO(n){let e=_.useContext(Gs).outlet;return e&&_.createElement(IO.Provider,{value:n},e)}function HS(){let{matches:n}=_.useContext(Gs),e=n[n.length-1];return e?e.params:{}}function fm(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=_.useContext(Ai),{matches:s}=_.useContext(Gs),{pathname:a}=Pi(),c=JSON.stringify(jy(s,r.v7_relativeSplatPath));return _.useMemo(()=>Ay(n,JSON.parse(c),a,t==="path"),[n,c,a,t])}function AO(n,e){return PO(n,e)}function PO(n,e,t,r){_c()||Yt(!1);let{navigator:s}=_.useContext(Ai),{matches:a}=_.useContext(Gs),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let m=Pi(),g;if(e){var v;let x=typeof e=="string"?wc(e):e;h==="/"||(v=x.pathname)!=null&&v.startsWith(h)||Yt(!1),g=x}else g=m;let y=g.pathname||"/",b=y;if(h!=="/"){let x=h.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(x.length).join("/")}let S=sO(n,{pathname:b}),E=LO(S&&S.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:So([h,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:So([h,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,t,r);return e&&E?_.createElement(hm.Provider,{value:{location:zu({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:_o.Pop}},E):E}function RO(){let n=UO(),e=SO(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),t?_.createElement("pre",{style:s},t):null,null)}const kO=_.createElement(RO,null);class DO extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?_.createElement(Gs.Provider,{value:this.props.routeContext},_.createElement(qS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OO(n){let{routeContext:e,match:t,children:r}=n,s=_.useContext(dm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(Gs.Provider,{value:e},r)}function LO(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,u=(s=t)==null?void 0:s.errors;if(u!=null){let g=c.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);g>=0||Yt(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let v=c[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=g),v.route.id){let{loaderData:y,errors:b}=t,S=v.route.loader&&y[v.route.id]===void 0&&(!b||b[v.route.id]===void 0);if(v.route.lazy||S){h=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((g,v,y)=>{let b,S=!1,E=null,x=null;t&&(b=u&&v.route.id?u[v.route.id]:void 0,E=v.route.errorElement||kO,h&&(m<0&&y===0?(zO("route-fallback"),S=!0,x=null):m===y&&(S=!0,x=v.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,y+1)),I=()=>{let C;return b?C=E:S?C=x:v.route.Component?C=_.createElement(v.route.Component,null):v.route.element?C=v.route.element:C=g,_.createElement(OO,{match:v,routeContext:{outlet:g,matches:A,isDataRoute:t!=null},children:C})};return t&&(v.route.ErrorBoundary||v.route.errorElement||y===0)?_.createElement(DO,{location:t.location,revalidation:t.revalidation,component:E,error:b,children:I(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):I()},null)}var KS=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(KS||{}),GS=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(GS||{});function MO(n){let e=_.useContext(dm);return e||Yt(!1),e}function FO(n){let e=_.useContext(BS);return e||Yt(!1),e}function VO(n){let e=_.useContext(Gs);return e||Yt(!1),e}function QS(n){let e=VO(),t=e.matches[e.matches.length-1];return t.route.id||Yt(!1),t.route.id}function UO(){var n;let e=_.useContext(qS),t=FO(),r=QS();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function $O(){let{router:n}=MO(KS.UseNavigateStable),e=QS(GS.UseNavigateStable),t=_.useRef(!1);return WS(()=>{t.current=!0}),_.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,zu({fromRouteId:e},a)))},[n,e])}const z_={};function zO(n,e,t){z_[n]||(z_[n]=!0)}function af(n){let{to:e,replace:t,state:r,relative:s}=n;_c()||Yt(!1);let{future:a,static:c}=_.useContext(Ai),{matches:u}=_.useContext(Gs),{pathname:h}=Pi(),m=Ec(),g=Ay(e,jy(u,a.v7_relativeSplatPath),h,s==="path"),v=JSON.stringify(g);return _.useEffect(()=>m(JSON.parse(v),{replace:t,state:r,relative:s}),[m,v,s,t,r]),null}function BO(n){return jO(n.context)}function Ut(n){Yt(!1)}function qO(n){let{basename:e="/",children:t=null,location:r,navigationType:s=_o.Pop,navigator:a,static:c=!1,future:u}=n;_c()&&Yt(!1);let h=e.replace(/^\/*/,"/"),m=_.useMemo(()=>({basename:h,navigator:a,static:c,future:zu({v7_relativeSplatPath:!1},u)}),[h,u,a,c]);typeof r=="string"&&(r=wc(r));let{pathname:g="/",search:v="",hash:y="",state:b=null,key:S="default"}=r,E=_.useMemo(()=>{let x=oc(g,h);return x==null?null:{location:{pathname:x,search:v,hash:y,state:b,key:S},navigationType:s}},[h,g,v,y,b,S,s]);return E==null?null:_.createElement(Ai.Provider,{value:m},_.createElement(hm.Provider,{children:t,value:E}))}function WO(n){let{children:e,location:t}=n;return AO(wv(e),t)}new Promise(()=>{});function wv(n,e){e===void 0&&(e=[]);let t=[];return _.Children.forEach(n,(r,s)=>{if(!_.isValidElement(r))return;let a=[...e,s];if(r.type===_.Fragment){t.push.apply(t,wv(r.props.children,a));return}r.type!==Ut&&Yt(!1),!r.props.index||!r.props.children||Yt(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=wv(r.props.children,a)),t.push(c)}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function If(){return If=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},If.apply(this,arguments)}function YS(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function HO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function KO(n,e){return n.button===0&&(!e||e==="_self")&&!HO(n)}function _v(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function GO(n,e){let t=_v(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(a=>{t.append(s,a)})}),t}const QO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],YO=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],XO="6";try{window.__reactRouterVersion=XO}catch{}const JO=_.createContext({isTransitioning:!1}),ZO="startTransition",B_=o1[ZO];function eL(n){let{basename:e,children:t,future:r,window:s}=n,a=_.useRef();a.current==null&&(a.current=tO({window:s,v5Compat:!0}));let c=a.current,[u,h]=_.useState({action:c.action,location:c.location}),{v7_startTransition:m}=r||{},g=_.useCallback(v=>{m&&B_?B_(()=>h(v)):h(v)},[h,m]);return _.useLayoutEffect(()=>c.listen(g),[c,g]),_.createElement(qO,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:c,future:r})}const tL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zn=_.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:a,replace:c,state:u,target:h,to:m,preventScrollReset:g,unstable_viewTransition:v}=e,y=YS(e,QO),{basename:b}=_.useContext(Ai),S,E=!1;if(typeof m=="string"&&nL.test(m)&&(S=m,tL))try{let C=new URL(window.location.href),L=m.startsWith("//")?new URL(C.protocol+m):new URL(m),V=oc(L.pathname,b);L.origin===C.origin&&V!=null?m=V+L.search+L.hash:E=!0}catch{}let x=TO(m,{relative:s}),A=sL(m,{replace:c,state:u,target:h,preventScrollReset:g,relative:s,unstable_viewTransition:v});function I(C){r&&r(C),C.defaultPrevented||A(C)}return _.createElement("a",If({},y,{href:S||x,onClick:E||a?r:I,ref:t,target:h}))}),q_=_.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:c=!1,style:u,to:h,unstable_viewTransition:m,children:g}=e,v=YS(e,YO),y=fm(h,{relative:v.relative}),b=Pi(),S=_.useContext(BS),{navigator:E,basename:x}=_.useContext(Ai),A=S!=null&&iL(y)&&m===!0,I=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,C=b.pathname,L=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;s||(C=C.toLowerCase(),L=L?L.toLowerCase():null,I=I.toLowerCase()),L&&x&&(L=oc(L,x)||L);const V=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let q=C===I||!c&&C.startsWith(I)&&C.charAt(V)==="/",P=L!=null&&(L===I||!c&&L.startsWith(I)&&L.charAt(I.length)==="/"),R={isActive:q,isPending:P,isTransitioning:A},D=q?r:void 0,k;typeof a=="function"?k=a(R):k=[a,q?"active":null,P?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let $=typeof u=="function"?u(R):u;return _.createElement(zn,If({},v,{"aria-current":D,className:k,ref:t,style:$,to:h,unstable_viewTransition:m}),typeof g=="function"?g(R):g)});var Ev;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ev||(Ev={}));var W_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(W_||(W_={}));function rL(n){let e=_.useContext(dm);return e||Yt(!1),e}function sL(n,e){let{target:t,replace:r,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u}=e===void 0?{}:e,h=Ec(),m=Pi(),g=fm(n,{relative:c});return _.useCallback(v=>{if(KO(v,t)){v.preventDefault();let y=r!==void 0?r:Cf(m)===Cf(g);h(n,{replace:y,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u})}},[m,h,g,r,s,t,n,a,c,u])}function od(n){let e=_.useRef(_v(n)),t=_.useRef(!1),r=Pi(),s=_.useMemo(()=>GO(r.search,t.current?null:e.current),[r.search]),a=Ec(),c=_.useCallback((u,h)=>{const m=_v(typeof u=="function"?u(s):u);t.current=!0,a("?"+m,h)},[a,s]);return[s,c]}function iL(n,e){e===void 0&&(e={});let t=_.useContext(JO);t==null&&Yt(!1);let{basename:r}=rL(Ev.useViewTransitionState),s=fm(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=oc(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=oc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return xv(s.pathname,c)!=null||xv(s.pathname,a)!=null}const oL=()=>{};var H_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},aL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],c=n[t++],u=n[t++],h=((s&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},JS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],c=s+1<n.length,u=c?n[s+1]:0,h=s+2<n.length,m=h?n[s+2]:0,g=a>>2,v=(a&3)<<4|u>>4;let y=(u&15)<<2|m>>6,b=m&63;h||(b=64,c||(y=64)),r.push(t[g],t[v],t[y],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(XS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||u==null||m==null||v==null)throw new lL;const y=a<<2|u>>4;if(r.push(y),m!==64){const b=u<<4&240|m>>2;if(r.push(b),v!==64){const S=m<<6&192|v;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class lL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cL=function(n){const e=XS(n);return JS.encodeByteArray(e,!0)},jf=function(n){return cL(n).replace(/\./g,"")},ZS=function(n){try{return JS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=()=>uL().__FIREBASE_DEFAULTS__,hL=()=>{if(typeof process>"u"||typeof H_>"u")return;const n=H_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ZS(n[1]);return e&&JSON.parse(e)},mm=()=>{try{return oL()||dL()||hL()||fL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},eN=n=>{var e,t;return(t=(e=mm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},mL=n=>{const e=eN(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},tN=()=>{var n;return(n=mm())===null||n===void 0?void 0:n.config},nN=n=>{var e;return(e=mm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Py(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jf(JSON.stringify(t)),jf(JSON.stringify(c)),""].join(".")}const Iu={};function vL(){const n={prod:[],emulator:[]};for(const e of Object.keys(Iu))Iu[e]?n.emulator.push(e):n.prod.push(e);return n}function yL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let K_=!1;function rN(n,e){if(typeof window>"u"||typeof document>"u"||!za(window.location.host)||Iu[n]===e||Iu[n]||K_)return;Iu[n]=e;function t(y){return`__firebase__banner__${y}`}const r="__firebase__banner",a=vL().prod.length>0;function c(){const y=document.getElementById(r);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function h(y,b){y.setAttribute("width","24"),y.setAttribute("id",b),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function m(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{K_=!0,c()},y}function g(y,b){y.setAttribute("id",b),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function v(){const y=yL(r),b=t("text"),S=document.getElementById(b)||document.createElement("span"),E=t("learnmore"),x=document.getElementById(E)||document.createElement("a"),A=t("preprendIcon"),I=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const C=y.element;u(C),g(x,E);const L=m();h(I,A),C.append(I,S,x,L),document.body.appendChild(C)}a?(S.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bn())}function wL(){var n;const e=(n=mm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _L(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function bL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SL(){const n=Bn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function NL(){return!wL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TL(){try{return typeof indexedDB=="object"}catch{return!1}}function CL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="FirebaseError";class Qs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=IL,Object.setPrototypeOf(this,Qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ad.prototype.create)}}class ad{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?jL(a,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Qs(s,u,r)}}function jL(n,e){return n.replace(AL,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const AL=/\{\$([^}]+)}/g;function PL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ra(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],c=e[s];if(G_(a)&&G_(c)){if(!Ra(a,c))return!1}else if(a!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function G_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function vu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function RL(n,e){const t=new kL(n,e);return t.subscribe.bind(t)}class kL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");DL(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Pg),s.error===void 0&&(s.error=Pg),s.complete===void 0&&(s.complete=Pg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Pg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(n){return n&&n._delegate?n._delegate:n}class Mo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new pL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ML(e))try{this.getOrInitializeService({instanceIdentifier:ya})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=ya){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ya){return this.instances.has(e)}getOptions(e=ya){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ya){return this.component?this.component.multipleInstances?e:ya:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LL(n){return n===ya?void 0:n}function ML(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new OL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ut||(ut={}));const VL={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},UL=ut.INFO,$L={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},zL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=$L[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ry{constructor(e){this.name=e,this._logLevel=UL,this._logHandler=zL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const BL=(n,e)=>e.some(t=>n instanceof t);let Q_,Y_;function qL(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WL(){return Y_||(Y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sN=new WeakMap,bv=new WeakMap,iN=new WeakMap,Rg=new WeakMap,ky=new WeakMap;function HL(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(No(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&sN.set(t,n)}).catch(()=>{}),ky.set(e,n),e}function KL(n){if(bv.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});bv.set(n,e)}let Sv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||iN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return No(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function GL(n){Sv=n(Sv)}function QL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(kg(this),e,...t);return iN.set(r,e.sort?e.sort():[e]),No(r)}:WL().includes(n)?function(...e){return n.apply(kg(this),e),No(sN.get(this))}:function(...e){return No(n.apply(kg(this),e))}}function YL(n){return typeof n=="function"?QL(n):(n instanceof IDBTransaction&&KL(n),BL(n,qL())?new Proxy(n,Sv):n)}function No(n){if(n instanceof IDBRequest)return HL(n);if(Rg.has(n))return Rg.get(n);const e=YL(n);return e!==n&&(Rg.set(n,e),ky.set(e,n)),e}const kg=n=>ky.get(n);function XL(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const c=indexedDB.open(n,e),u=No(c);return r&&c.addEventListener("upgradeneeded",h=>{r(No(c.result),h.oldVersion,h.newVersion,No(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}const JL=["get","getKey","getAll","getAllKeys","count"],ZL=["put","add","delete","clear"],Dg=new Map;function X_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Dg.get(e))return Dg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=ZL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||JL.includes(t)))return;const a=async function(c,...u){const h=this.transaction(c,s?"readwrite":"readonly");let m=h.store;return r&&(m=m.index(u.shift())),(await Promise.all([m[t](...u),s&&h.done]))[0]};return Dg.set(e,a),a}GL(n=>({...n,get:(e,t,r)=>X_(e,t)||n.get(e,t,r),has:(e,t)=>!!X_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(t4(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function t4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nv="@firebase/app",J_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new Ry("@firebase/app"),n4="@firebase/app-compat",r4="@firebase/analytics-compat",s4="@firebase/analytics",i4="@firebase/app-check-compat",o4="@firebase/app-check",a4="@firebase/auth",l4="@firebase/auth-compat",c4="@firebase/database",u4="@firebase/data-connect",d4="@firebase/database-compat",h4="@firebase/functions",f4="@firebase/functions-compat",m4="@firebase/installations",p4="@firebase/installations-compat",g4="@firebase/messaging",v4="@firebase/messaging-compat",y4="@firebase/performance",x4="@firebase/performance-compat",w4="@firebase/remote-config",_4="@firebase/remote-config-compat",E4="@firebase/storage",b4="@firebase/storage-compat",S4="@firebase/firestore",N4="@firebase/ai",T4="@firebase/firestore-compat",C4="firebase",I4="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="[DEFAULT]",j4={[Nv]:"fire-core",[n4]:"fire-core-compat",[s4]:"fire-analytics",[r4]:"fire-analytics-compat",[o4]:"fire-app-check",[i4]:"fire-app-check-compat",[a4]:"fire-auth",[l4]:"fire-auth-compat",[c4]:"fire-rtdb",[u4]:"fire-data-connect",[d4]:"fire-rtdb-compat",[h4]:"fire-fn",[f4]:"fire-fn-compat",[m4]:"fire-iid",[p4]:"fire-iid-compat",[g4]:"fire-fcm",[v4]:"fire-fcm-compat",[y4]:"fire-perf",[x4]:"fire-perf-compat",[w4]:"fire-rc",[_4]:"fire-rc-compat",[E4]:"fire-gcs",[b4]:"fire-gcs-compat",[S4]:"fire-fst",[T4]:"fire-fst-compat",[N4]:"fire-vertex","fire-js":"fire-js",[C4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Map,A4=new Map,Cv=new Map;function Z_(n,e){try{n.container.addComponent(e)}catch(t){Si.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ka(n){const e=n.name;if(Cv.has(e))return Si.debug(`There were multiple attempts to register component ${e}.`),!1;Cv.set(e,n);for(const t of Af.values())Z_(t,n);for(const t of A4.values())Z_(t,n);return!0}function pm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $r(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},To=new ad("app","Firebase",P4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw To.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=I4;function oN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Tv,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw To.create("bad-app-name",{appName:String(s)});if(t||(t=tN()),!t)throw To.create("no-options");const a=Af.get(s);if(a){if(Ra(t,a.options)&&Ra(r,a.config))return a;throw To.create("duplicate-app",{appName:s})}const c=new FL(s);for(const h of Cv.values())c.addComponent(h);const u=new R4(t,r,c);return Af.set(s,u),u}function aN(n=Tv){const e=Af.get(n);if(!e&&n===Tv&&tN())return oN();if(!e)throw To.create("no-app",{appName:n});return e}function Ds(n,e,t){var r;let s=(r=j4[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Si.warn(u.join(" "));return}ka(new Mo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4="firebase-heartbeat-database",D4=1,Bu="firebase-heartbeat-store";let Og=null;function lN(){return Og||(Og=XL(k4,D4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Bu)}catch(t){console.warn(t)}}}}).catch(n=>{throw To.create("idb-open",{originalErrorMessage:n.message})})),Og}async function O4(n){try{const t=(await lN()).transaction(Bu),r=await t.objectStore(Bu).get(cN(n));return await t.done,r}catch(e){if(e instanceof Qs)Si.warn(e.message);else{const t=To.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Si.warn(t.message)}}}async function eE(n,e){try{const r=(await lN()).transaction(Bu,"readwrite");await r.objectStore(Bu).put(e,cN(n)),await r.done}catch(t){if(t instanceof Qs)Si.warn(t.message);else{const r=To.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Si.warn(r.message)}}}function cN(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=1024,M4=30;class F4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new U4(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=tE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>M4){const c=$4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Si.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=tE(),{heartbeatsToSend:r,unsentEntries:s}=V4(this._heartbeatsCache.heartbeats),a=jf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Si.warn(t),""}}}function tE(){return new Date().toISOString().substring(0,10)}function V4(n,e=L4){const t=[];let r=n.slice();for(const s of n){const a=t.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),nE(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),nE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class U4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TL()?CL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await O4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return eE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return eE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nE(n){return jf(JSON.stringify({version:2,heartbeats:n})).length}function $4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(n){ka(new Mo("platform-logger",e=>new e4(e),"PRIVATE")),ka(new Mo("heartbeat",e=>new F4(e),"PRIVATE")),Ds(Nv,J_,n),Ds(Nv,J_,"esm2017"),Ds("fire-js","")}z4("");var $n=function(){return $n=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},$n.apply(this,arguments)};function bc(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function uN(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function dN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const B4=dN,hN=new ad("auth","Firebase",dN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new Ry("@firebase/auth");function q4(n,...e){Pf.logLevel<=ut.WARN&&Pf.warn(`Auth (${Ba}): ${n}`,...e)}function lf(n,...e){Pf.logLevel<=ut.ERROR&&Pf.error(`Auth (${Ba}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(n,...e){throw Dy(n,...e)}function Os(n,...e){return Dy(n,...e)}function fN(n,e,t){const r=Object.assign(Object.assign({},B4()),{[e]:t});return new ad("auth","Firebase",r).create(e,{appName:n.name})}function Co(n){return fN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return hN.create(n,...e)}function Ye(n,e,...t){if(!n)throw Dy(e,...t)}function yi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw lf(e),new Error(e)}function Ni(n,e){n||yi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function W4(){return rE()==="http:"||rE()==="https:"}function rE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W4()||EL()||"connection"in navigator)?navigator.onLine:!0}function K4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ni(t>e,"Short delay should be less than long delay!"),this.isMobile=xL()||bL()}get(){return H4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(n,e){Ni(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Y4=new cd(3e4,6e4);function qa(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Wo(n,e,t,r,s={}){return pN(n,s,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=ld(Object.assign({key:n.config.apiKey},c)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:h},a);return _L()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&za(n.emulatorConfig.host)&&(m.credentials="include"),mN.fetch()(await gN(n,n.config.apiHost,t,u),m)})}async function pN(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},G4),e);try{const s=new J4(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Bh(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[h,m]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bh(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Bh(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw Bh(n,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw fN(n,g,m);ps(n,g)}}catch(s){if(s instanceof Qs)throw s;ps(n,"network-request-failed",{message:String(s)})}}async function gm(n,e,t,r,s={}){const a=await Wo(n,e,t,r,s);return"mfaPendingCredential"in a&&ps(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function gN(n,e,t,r){const s=`${e}${t}?${r}`,a=n,c=a.config.emulator?Oy(n.config,s):`${n.config.apiScheme}://${s}`;return Q4.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function X4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class J4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Os(this.auth,"network-request-failed")),Y4.get())})}}function Bh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Os(n,e,r);return s.customData._tokenResponse=t,s}function sE(n){return n!==void 0&&n.enterprise!==void 0}class Z4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return X4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eM(n,e){return Wo(n,"GET","/v2/recaptchaConfig",qa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(n,e){return Wo(n,"POST","/v1/accounts:delete",e)}async function Rf(n,e){return Wo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nM(n,e=!1){const t=hn(n),r=await t.getIdToken(e),s=Ly(r);Ye(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:ju(Lg(s.auth_time)),issuedAtTime:ju(Lg(s.iat)),expirationTime:ju(Lg(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Lg(n){return Number(n)*1e3}function Ly(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return lf("JWT malformed, contained fewer than 3 sections"),null;try{const s=ZS(t);return s?JSON.parse(s):(lf("Failed to decode base64 JWT payload"),null)}catch(s){return lf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function iE(n){const e=Ly(n);return Ye(e,"internal-error"),Ye(typeof e.exp<"u","internal-error"),Ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Qs&&rM(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function rM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ju(this.lastLoginAt),this.creationTime=ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(n){var e;const t=n.auth,r=await n.getIdToken(),s=await qu(n,Rf(t,{idToken:r}));Ye(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?vN(a.providerUserInfo):[],u=oM(n.providerData,c),h=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),g=h?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new jv(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function iM(n){const e=hn(n);await kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oM(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function vN(n){return n.map(e=>{var{providerId:t}=e,r=bc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(n,e){const t=await pN(n,{},async()=>{const r=ld({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,c=await gN(n,s,"/v1/token",`key=${a}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return n.emulatorConfig&&za(n.emulatorConfig.host)&&(h.credentials="include"),mN.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function lM(n,e){return Wo(n,"POST","/v2/accounts:revokeToken",qa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ye(e.idToken,"internal-error"),Ye(typeof e.idToken<"u","internal-error"),Ye(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ye(e.length!==0,"internal-error");const t=iE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await aM(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,c=new Bl;return r&&(Ye(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Ye(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(Ye(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bl,this.toJSON())}_performRefresh(){return yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(n,e){Ye(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class us{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=bc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new jv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await qu(this,this.stsTokenManager.getToken(this.auth,e));return Ye(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nM(this,e)}reload(){return iM(this)}_assign(e){this!==e&&(Ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new us(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await kf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($r(this.auth.app))return Promise.reject(Co(this.auth));const e=await this.getIdToken();return await qu(this,tM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,c,u,h,m,g;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(s=t.email)!==null&&s!==void 0?s:void 0,b=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,S=(c=t.photoURL)!==null&&c!==void 0?c:void 0,E=(u=t.tenantId)!==null&&u!==void 0?u:void 0,x=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,A=(m=t.createdAt)!==null&&m!==void 0?m:void 0,I=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:C,emailVerified:L,isAnonymous:V,providerData:q,stsTokenManager:P}=t;Ye(C&&P,e,"internal-error");const R=Bl.fromJSON(this.name,P);Ye(typeof C=="string",e,"internal-error"),ao(v,e.name),ao(y,e.name),Ye(typeof L=="boolean",e,"internal-error"),Ye(typeof V=="boolean",e,"internal-error"),ao(b,e.name),ao(S,e.name),ao(E,e.name),ao(x,e.name),ao(A,e.name),ao(I,e.name);const D=new us({uid:C,auth:e,email:y,emailVerified:L,displayName:v,isAnonymous:V,photoURL:S,phoneNumber:b,tenantId:E,stsTokenManager:R,createdAt:A,lastLoginAt:I});return q&&Array.isArray(q)&&(D.providerData=q.map(k=>Object.assign({},k))),x&&(D._redirectEventId=x),D}static async _fromIdTokenResponse(e,t,r=!1){const s=new Bl;s.updateFromServerResponse(t);const a=new us({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kf(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ye(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?vN(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),u=new Bl;u.updateFromIdToken(r);const h=new us({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,m),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=new Map;function xi(n){Ni(n instanceof Function,"Expected a class definition");let e=oE.get(n);return e?(Ni(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,oE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yN.type="NONE";const aE=yN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(n,e,t){return`firebase:${n}:${e}:${t}`}class ql{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=cf(this.userKey,s.apiKey,a),this.fullPersistenceKey=cf("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Rf(this.auth,{idToken:e}).catch(()=>{});return t?us._fromGetAccountInfoResponse(this.auth,t,e):null}return us._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ql(xi(aE),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||xi(aE);const c=cf(r,e.config.apiKey,e.name);let u=null;for(const m of t)try{const g=await m._get(c);if(g){let v;if(typeof g=="string"){const y=await Rf(e,{idToken:g}).catch(()=>{});if(!y)break;v=await us._fromGetAccountInfoResponse(e,y,g)}else v=us._fromJSON(e,g);m!==a&&(u=v),a=m;break}}catch{}const h=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new ql(a,e,r):(a=h[0],u&&await a._set(c,u.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new ql(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SN(e))return"Blackberry";if(NN(e))return"Webos";if(wN(e))return"Safari";if((e.includes("chrome/")||_N(e))&&!e.includes("edge/"))return"Chrome";if(bN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xN(n=Bn()){return/firefox\//i.test(n)}function wN(n=Bn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _N(n=Bn()){return/crios\//i.test(n)}function EN(n=Bn()){return/iemobile/i.test(n)}function bN(n=Bn()){return/android/i.test(n)}function SN(n=Bn()){return/blackberry/i.test(n)}function NN(n=Bn()){return/webos/i.test(n)}function My(n=Bn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function cM(n=Bn()){var e;return My(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uM(){return SL()&&document.documentMode===10}function TN(n=Bn()){return My(n)||bN(n)||NN(n)||SN(n)||/windows phone/i.test(n)||EN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n,e=[]){let t;switch(n){case"Browser":t=lE(Bn());break;case"Worker":t=`${lE(Bn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ba}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,u)=>{try{const h=e(a);c(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(n,e={}){return Wo(n,"GET","/v2/passwordPolicy",qa(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=6;class mM{constructor(e){var t,r,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:fM,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,c,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cE(this),this.idTokenSubscription=new cE(this),this.beforeStateQueue=new dM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xi(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await ql.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Rf(this,{idToken:e}),r=await us._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if($r(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&(h!=null&&h.user)&&(s=h.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($r(this.app))return Promise.reject(Co(this));const t=e?hn(e):null;return t&&Ye(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $r(this.app)?Promise.reject(Co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $r(this.app)?Promise.reject(Co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hM(this),t=new mM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ad("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await lM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&xi(e)||this._popupRedirectResolver;Ye(t,this,"argument-error"),this.redirectPersistenceManager=await ql.create(this,[xi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ye(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,s);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if($r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&q4(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Sc(n){return hn(n)}class cE{constructor(e){this.auth=e,this.observer=null,this.addObserver=RL(t=>this.observer=t)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gM(n){vm=n}function IN(n){return vm.loadJS(n)}function vM(){return vm.recaptchaEnterpriseScript}function yM(){return vm.gapiScript}function xM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class wM{constructor(){this.enterprise=new _M}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _M{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const EM="recaptcha-enterprise",jN="NO_RECAPTCHA";class bM{constructor(e){this.type=EM,this.auth=Sc(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{eM(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const m=new Z4(h);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(h=>{u(h)})})}function s(a,c,u){const h=window.grecaptcha;sE(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(jN)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wM().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!t&&sE(window.grecaptcha))s(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=vM();h.length!==0&&(h+=u),IN(h).then(()=>{s(u,a,c)}).catch(m=>{c(m)})}}).catch(u=>{c(u)})})}}async function uE(n,e,t,r=!1,s=!1){const a=new bM(n);let c;if(s)c=jN;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,m=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function dE(n,e,t,r,s){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await uE(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await uE(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(n,e){const t=pm(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Ra(a,e??{}))return s;ps(s,"already-initialized")}return t.initialize({options:e})}function NM(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(xi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function TM(n,e,t){const r=Sc(n);Ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=AN(e),{host:c,port:u}=CM(e),h=u===null?"":`:${u}`,m={url:`${a}//${c}${h}/`},g=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ye(Ra(m,r.config.emulator)&&Ra(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,za(c)?(Py(`${a}//${c}${h}`),rN("Auth",!0)):IM()}function AN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function CM(n){const e=AN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:hE(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:hE(c)}}}function hE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function IM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yi("not implemented")}_getIdTokenResponse(e){return yi("not implemented")}_linkToIdToken(e,t){return yi("not implemented")}_getReauthenticationResolver(e){return yi("not implemented")}}async function jM(n,e){return Wo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AM(n,e){return gm(n,"POST","/v1/accounts:signInWithPassword",qa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(n,e){return gm(n,"POST","/v1/accounts:signInWithEmailLink",qa(n,e))}async function RM(n,e){return gm(n,"POST","/v1/accounts:signInWithEmailLink",qa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends Fy{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Wu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Wu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dE(e,t,"signInWithPassword",AM);case"emailLink":return PM(e,{email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dE(e,r,"signUpPassword",jM);case"emailLink":return RM(e,{idToken:t,email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(n,e){return gm(n,"POST","/v1/accounts:signInWithIdp",qa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM="http://localhost";class Da extends Fy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ps("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=bc(t,["providerId","signInMethod"]);if(!r||!s)return null;const c=new Da(r,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Wl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Wl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wl(e,t)}buildRequest(){const e={requestUri:kM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ld(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OM(n){const e=gu(vu(n)).link,t=e?gu(vu(e)).deep_link_id:null,r=gu(vu(n)).deep_link_id;return(r?gu(vu(r)).link:null)||r||t||e||n}class Vy{constructor(e){var t,r,s,a,c,u;const h=gu(vu(e)),m=(t=h.apiKey)!==null&&t!==void 0?t:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,v=DM((s=h.mode)!==null&&s!==void 0?s:null);Ye(m&&g&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=g,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=OM(e);try{return new Vy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this.providerId=Nc.PROVIDER_ID}static credential(e,t){return Wu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Vy.parseLink(t);return Ye(r,"argument-error"),Wu._fromEmailAndCode(e,r.code,r.tenantId)}}Nc.PROVIDER_ID="password";Nc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Nc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud extends PN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends ud{constructor(){super("facebook.com")}static credential(e){return Da._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uo.credential(e.oauthAccessToken)}catch{return null}}}uo.FACEBOOK_SIGN_IN_METHOD="facebook.com";uo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends ud{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Da._fromParams({providerId:ho.PROVIDER_ID,signInMethod:ho.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ho.credentialFromTaggedObject(e)}static credentialFromError(e){return ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ho.credential(t,r)}catch{return null}}}ho.GOOGLE_SIGN_IN_METHOD="google.com";ho.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo extends ud{constructor(){super("github.com")}static credential(e){return Da._fromParams({providerId:fo.PROVIDER_ID,signInMethod:fo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fo.credentialFromTaggedObject(e)}static credentialFromError(e){return fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fo.credential(e.oauthAccessToken)}catch{return null}}}fo.GITHUB_SIGN_IN_METHOD="github.com";fo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends ud{constructor(){super("twitter.com")}static credential(e,t){return Da._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return mo.credential(t,r)}catch{return null}}}mo.TWITTER_SIGN_IN_METHOD="twitter.com";mo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await us._fromIdTokenResponse(e,r,s),c=fE(r);return new ac({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=fE(r);return new ac({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function fE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends Qs{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Df.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Df(e,t,r,s)}}function RN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Df._fromErrorAndOperation(n,a,e,r):a})}async function LM(n,e,t=!1){const r=await qu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ac._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(n,e,t=!1){const{auth:r}=n;if($r(r.app))return Promise.reject(Co(r));const s="reauthenticate";try{const a=await qu(n,RN(r,s,e,n),t);Ye(a.idToken,r,"internal-error");const c=Ly(a.idToken);Ye(c,r,"internal-error");const{sub:u}=c;return Ye(n.uid===u,r,"user-mismatch"),ac._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ps(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(n,e,t=!1){if($r(n.app))return Promise.reject(Co(n));const r="signIn",s=await RN(n,r,e),a=await ac._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function FM(n,e){return kN(Sc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(n){const e=Sc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function UM(n,e,t){return $r(n.app)?Promise.reject(Co(n)):FM(hn(n),Nc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&VM(n),r})}function $M(n,e,t,r){return hn(n).onIdTokenChanged(e,t,r)}function zM(n,e,t){return hn(n).beforeAuthStateChanged(e,t)}function BM(n,e,t,r){return hn(n).onAuthStateChanged(e,t,r)}function qM(n){return hn(n).signOut()}const Of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Of,"1"),this.storage.removeItem(Of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=1e3,HM=10;class ON extends DN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);uM()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,HM):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},WM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ON.type="LOCAL";const KM=ON;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN extends DN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}LN.type="SESSION";const MN=LN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new ym(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async m=>m(t.origin,a)),h=await GM(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ym.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((u,h)=>{const m=Uy("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(v){const y=v;if(y.data.eventId===m)switch(y.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(y.data.response);break;default:clearTimeout(g),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(){return window}function YM(n){Ls().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(){return typeof Ls().WorkerGlobalScope<"u"&&typeof Ls().importScripts=="function"}async function XM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JM(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ZM(){return FN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="firebaseLocalStorageDb",eF=1,Lf="firebaseLocalStorage",UN="fbase_key";class dd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xm(n,e){return n.transaction([Lf],e?"readwrite":"readonly").objectStore(Lf)}function tF(){const n=indexedDB.deleteDatabase(VN);return new dd(n).toPromise()}function Av(){const n=indexedDB.open(VN,eF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Lf,{keyPath:UN})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Lf)?e(r):(r.close(),await tF(),e(await Av()))})})}async function mE(n,e,t){const r=xm(n,!0).put({[UN]:e,value:t});return new dd(r).toPromise()}async function nF(n,e){const t=xm(n,!1).get(e),r=await new dd(t).toPromise();return r===void 0?null:r.value}function pE(n,e){const t=xm(n,!0).delete(e);return new dd(t).toPromise()}const rF=800,sF=3;class $N{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Av(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>sF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ym._getInstance(ZM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await XM(),!this.activeServiceWorker)return;this.sender=new QM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Av();return await mE(e,Of,"1"),await pE(e,Of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>mE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>nF(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>pE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=xm(s,!1).getAll();return new dd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$N.type="LOCAL";const iF=$N;new cd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(n,e){return e?xi(e):(Ye(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y extends Fy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function aF(n){return kN(n.auth,new $y(n),n.bypassAuthState)}function lF(n){const{auth:e,user:t}=n;return Ye(t,e,"internal-error"),MM(t,new $y(n),n.bypassAuthState)}async function cF(n){const{auth:e,user:t}=n;return Ye(t,e,"internal-error"),LM(t,new $y(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aF;case"linkViaPopup":case"linkViaRedirect":return cF;case"reauthViaPopup":case"reauthViaRedirect":return lF;default:ps(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=new cd(2e3,1e4);class Ul extends zN{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Ul.currentPopupAction&&Ul.currentPopupAction.cancel(),Ul.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ye(e,this.auth,"internal-error"),e}async onExecution(){Ni(this.filter.length===1,"Popup operations only handle one event");const e=Uy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Os(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Os(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ul.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Os(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uF.get())};e()}}Ul.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF="pendingRedirect",uf=new Map;class hF extends zN{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=uf.get(this.auth._key());if(!e){try{const r=await fF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}uf.set(this.auth._key(),e)}return this.bypassAuthState||uf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fF(n,e){const t=gF(e),r=pF(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function mF(n,e){uf.set(n._key(),e)}function pF(n){return xi(n._redirectPersistence)}function gF(n){return cf(dF,n.config.apiKey,n.name)}async function vF(n,e,t=!1){if($r(n.app))return Promise.reject(Co(n));const r=Sc(n),s=oF(r,e),c=await new hF(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF=10*60*1e3;class xF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!BN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Os(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yF&&this.cachedEventUids.clear(),this.cachedEventUids.has(gE(e))}saveEventToCache(e){this.cachedEventUids.add(gE(e)),this.lastProcessedEventTime=Date.now()}}function gE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function BN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wF(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _F(n,e={}){return Wo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bF=/^https?/;async function SF(n){if(n.config.emulator)return;const{authorizedDomains:e}=await _F(n);for(const t of e)try{if(NF(t))return}catch{}ps(n,"unauthorized-domain")}function NF(n){const e=Iv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!bF.test(t))return!1;if(EF.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=new cd(3e4,6e4);function vE(){const n=Ls().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function CF(n){return new Promise((e,t)=>{var r,s,a;function c(){vE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vE(),t(Os(n,"network-request-failed"))},timeout:TF.get()})}if(!((s=(r=Ls().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Ls().gapi)===null||a===void 0)&&a.load)c();else{const u=xM("iframefcb");return Ls()[u]=()=>{gapi.load?c():t(Os(n,"network-request-failed"))},IN(`${yM()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw df=null,e})}let df=null;function IF(n){return df=df||CF(n),df}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF=new cd(5e3,15e3),AF="__/auth/iframe",PF="emulator/auth/iframe",RF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DF(n){const e=n.config;Ye(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Oy(e,PF):`https://${n.config.authDomain}/${AF}`,r={apiKey:e.apiKey,appName:n.name,v:Ba},s=kF.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${ld(r).slice(1)}`}async function OF(n){const e=await IF(n),t=Ls().gapi;return Ye(t,n,"internal-error"),e.open({where:document.body,url:DF(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RF,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const c=Os(n,"network-request-failed"),u=Ls().setTimeout(()=>{a(c)},jF.get());function h(){Ls().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MF=500,FF=600,VF="_blank",UF="http://localhost";class yE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $F(n,e,t,r=MF,s=FF){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},LF),{width:r.toString(),height:s.toString(),top:a,left:c}),m=Bn().toLowerCase();t&&(u=_N(m)?VF:t),xN(m)&&(e=e||UF,h.scrollbars="yes");const g=Object.entries(h).reduce((y,[b,S])=>`${y}${b}=${S},`,"");if(cM(m)&&u!=="_self")return zF(e||"",u),new yE(null);const v=window.open(e||"",u,g);Ye(v,n,"popup-blocked");try{v.focus()}catch{}return new yE(v)}function zF(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="__/auth/handler",qF="emulator/auth/handler",WF=encodeURIComponent("fac");async function xE(n,e,t,r,s,a){Ye(n.config.authDomain,n,"auth-domain-config-required"),Ye(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ba,eventId:s};if(e instanceof PN){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",PL(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))c[g]=v}if(e instanceof ud){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await n._getAppCheckToken(),m=h?`#${WF}=${encodeURIComponent(h)}`:"";return`${HF(n)}?${ld(u).slice(1)}${m}`}function HF({config:n}){return n.emulator?Oy(n,qF):`https://${n.authDomain}/${BF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="webStorageSupport";class KF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MN,this._completeRedirectFn=vF,this._overrideRedirectResult=mF}async _openPopup(e,t,r,s){var a;Ni((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await xE(e,t,r,Iv(),s);return $F(e,c,Uy())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await xE(e,t,r,Iv(),s);return YM(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Ni(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await OF(e),r=new xF(e);return t.register("authEvent",s=>(Ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mg,{type:Mg},s=>{var a;const c=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Mg];c!==void 0&&t(!!c),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=SF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TN()||wN()||My()}}const GF=KF;var wE="@firebase/auth",_E="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XF(n){ka(new Mo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Ye(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CN(n)},m=new pM(r,s,a,h);return NM(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ka(new Mo("auth-internal",e=>{const t=Sc(e.getProvider("auth").getImmediate());return(r=>new QF(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ds(wE,_E,YF(n)),Ds(wE,_E,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=5*60,ZF=nN("authIdTokenMaxAge")||JF;let EE=null;const eV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ZF)return;const s=t==null?void 0:t.token;EE!==s&&(EE=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function tV(n=aN()){const e=pm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=SM(n,{popupRedirectResolver:GF,persistence:[iF,KM,MN]}),r=nN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=eV(a.toString());zM(t,c,()=>c(t.currentUser)),$M(t,u=>c(u))}}const s=eN("auth");return s&&TM(t,`http://${s}`),t}function nV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}gM({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Os("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",nV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XF("Browser");var rV="firebase",sV="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ds(rV,sV,"app");var bE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Io,qN;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function D(){}D.prototype=R.prototype,P.D=R.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(k,$,z){for(var M=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)M[oe-2]=arguments[oe];return R.prototype[$].apply(k,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,R,D){D||(D=0);var k=Array(16);if(typeof R=="string")for(var $=0;16>$;++$)k[$]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for($=0;16>$;++$)k[$]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=P.g[0],D=P.g[1],$=P.g[2];var z=P.g[3],M=R+(z^D&($^z))+k[0]+3614090360&4294967295;R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[1]+3905402710&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[2]+606105819&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[3]+3250441966&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+(z^D&($^z))+k[4]+4118548399&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[5]+1200080426&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[6]+2821735955&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[7]+4249261313&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+(z^D&($^z))+k[8]+1770035416&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[9]+2336552879&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[10]+4294925233&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[11]+2304563134&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+(z^D&($^z))+k[12]+1804603682&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[13]+4254626195&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[14]+2792965006&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[15]+1236535329&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+($^z&(D^$))+k[1]+4129170786&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[6]+3225465664&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[11]+643717713&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[0]+3921069994&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+($^z&(D^$))+k[5]+3593408605&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[10]+38016083&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[15]+3634488961&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[4]+3889429448&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+($^z&(D^$))+k[9]+568446438&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[14]+3275163606&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[3]+4107603335&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[8]+1163531501&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+($^z&(D^$))+k[13]+2850285829&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[2]+4243563512&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[7]+1735328473&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[12]+2368359562&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+(D^$^z)+k[5]+4294588738&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[8]+2272392833&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[11]+1839030562&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[14]+4259657740&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+(D^$^z)+k[1]+2763975236&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[4]+1272893353&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[7]+4139469664&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[10]+3200236656&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+(D^$^z)+k[13]+681279174&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[0]+3936430074&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[3]+3572445317&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[6]+76029189&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+(D^$^z)+k[9]+3654602809&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[12]+3873151461&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[15]+530742520&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[2]+3299628645&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+($^(D|~z))+k[0]+4096336452&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[7]+1126891415&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[14]+2878612391&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[5]+4237533241&4294967295,D=$+(M<<21&4294967295|M>>>11),M=R+($^(D|~z))+k[12]+1700485571&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[3]+2399980690&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[10]+4293915773&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[1]+2240044497&4294967295,D=$+(M<<21&4294967295|M>>>11),M=R+($^(D|~z))+k[8]+1873313359&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[15]+4264355552&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[6]+2734768916&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[13]+1309151649&4294967295,D=$+(M<<21&4294967295|M>>>11),M=R+($^(D|~z))+k[4]+4149444226&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[11]+3174756917&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[2]+718787259&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+($+(M<<21&4294967295|M>>>11))&4294967295,P.g[2]=P.g[2]+$&4294967295,P.g[3]=P.g[3]+z&4294967295}r.prototype.u=function(P,R){R===void 0&&(R=P.length);for(var D=R-this.blockSize,k=this.B,$=this.h,z=0;z<R;){if($==0)for(;z<=D;)s(this,P,z),z+=this.blockSize;if(typeof P=="string"){for(;z<R;)if(k[$++]=P.charCodeAt(z++),$==this.blockSize){s(this,k),$=0;break}}else for(;z<R;)if(k[$++]=P[z++],$==this.blockSize){s(this,k),$=0;break}}this.h=$,this.o+=R},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;var D=8*this.o;for(R=P.length-8;R<P.length;++R)P[R]=D&255,D/=256;for(this.u(P),P=Array(16),R=D=0;4>R;++R)for(var k=0;32>k;k+=8)P[D++]=this.g[R]>>>k&255;return P};function a(P,R){var D=u;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=R(P)}function c(P,R){this.h=R;for(var D=[],k=!0,$=P.length-1;0<=$;$--){var z=P[$]|0;k&&z==R||(D[$]=z,k=!1)}this.g=D}var u={};function h(P){return-128<=P&&128>P?a(P,function(R){return new c([R|0],0>R?-1:0)}):new c([P|0],0>P?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return v;if(0>P)return x(m(-P));for(var R=[],D=1,k=0;P>=D;k++)R[k]=P/D|0,D*=4294967296;return new c(R,0)}function g(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return x(g(P.substring(1),R));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=m(Math.pow(R,8)),k=v,$=0;$<P.length;$+=8){var z=Math.min(8,P.length-$),M=parseInt(P.substring($,$+z),R);8>z?(z=m(Math.pow(R,z)),k=k.j(z).add(m(M))):(k=k.j(D),k=k.add(m(M)))}return k}var v=h(0),y=h(1),b=h(16777216);n=c.prototype,n.m=function(){if(E(this))return-x(this).m();for(var P=0,R=1,D=0;D<this.g.length;D++){var k=this.i(D);P+=(0<=k?k:4294967296+k)*R,R*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(S(this))return"0";if(E(this))return"-"+x(this).toString(P);for(var R=m(Math.pow(P,6)),D=this,k="";;){var $=L(D,R).g;D=A(D,$.j(R));var z=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=$,S(D))return z+k;for(;6>z.length;)z="0"+z;k=z+k}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function S(P){if(P.h!=0)return!1;for(var R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function E(P){return P.h==-1}n.l=function(P){return P=A(this,P),E(P)?-1:S(P)?0:1};function x(P){for(var R=P.g.length,D=[],k=0;k<R;k++)D[k]=~P.g[k];return new c(D,~P.h).add(y)}n.abs=function(){return E(this)?x(this):this},n.add=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0,$=0;$<=R;$++){var z=k+(this.i($)&65535)+(P.i($)&65535),M=(z>>>16)+(this.i($)>>>16)+(P.i($)>>>16);k=M>>>16,z&=65535,M&=65535,D[$]=M<<16|z}return new c(D,D[D.length-1]&-2147483648?-1:0)};function A(P,R){return P.add(x(R))}n.j=function(P){if(S(this)||S(P))return v;if(E(this))return E(P)?x(this).j(x(P)):x(x(this).j(P));if(E(P))return x(this.j(x(P)));if(0>this.l(b)&&0>P.l(b))return m(this.m()*P.m());for(var R=this.g.length+P.g.length,D=[],k=0;k<2*R;k++)D[k]=0;for(k=0;k<this.g.length;k++)for(var $=0;$<P.g.length;$++){var z=this.i(k)>>>16,M=this.i(k)&65535,oe=P.i($)>>>16,K=P.i($)&65535;D[2*k+2*$]+=M*K,I(D,2*k+2*$),D[2*k+2*$+1]+=z*K,I(D,2*k+2*$+1),D[2*k+2*$+1]+=M*oe,I(D,2*k+2*$+1),D[2*k+2*$+2]+=z*oe,I(D,2*k+2*$+2)}for(k=0;k<R;k++)D[k]=D[2*k+1]<<16|D[2*k];for(k=R;k<2*R;k++)D[k]=0;return new c(D,0)};function I(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function C(P,R){this.g=P,this.h=R}function L(P,R){if(S(R))throw Error("division by zero");if(S(P))return new C(v,v);if(E(P))return R=L(x(P),R),new C(x(R.g),x(R.h));if(E(R))return R=L(P,x(R)),new C(x(R.g),R.h);if(30<P.g.length){if(E(P)||E(R))throw Error("slowDivide_ only works with positive integers.");for(var D=y,k=R;0>=k.l(P);)D=V(D),k=V(k);var $=q(D,1),z=q(k,1);for(k=q(k,2),D=q(D,2);!S(k);){var M=z.add(k);0>=M.l(P)&&($=$.add(D),z=M),k=q(k,1),D=q(D,1)}return R=A(P,$.j(R)),new C($,R)}for($=v;0<=P.l(R);){for(D=Math.max(1,Math.floor(P.m()/R.m())),k=Math.ceil(Math.log(D)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),z=m(D),M=z.j(R);E(M)||0<M.l(P);)D-=k,z=m(D),M=z.j(R);S(z)&&(z=y),$=$.add(z),P=A(P,M)}return new C($,P)}n.A=function(P){return L(this,P).h},n.and=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)&P.i(k);return new c(D,this.h&P.h)},n.or=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)|P.i(k);return new c(D,this.h|P.h)},n.xor=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)^P.i(k);return new c(D,this.h^P.h)};function V(P){for(var R=P.g.length+1,D=[],k=0;k<R;k++)D[k]=P.i(k)<<1|P.i(k-1)>>>31;return new c(D,P.h)}function q(P,R){var D=R>>5;R%=32;for(var k=P.g.length-D,$=[],z=0;z<k;z++)$[z]=0<R?P.i(z+D)>>>R|P.i(z+D+1)<<32-R:P.i(z+D);return new c($,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qN=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,Io=c}).apply(typeof bE<"u"?bE:typeof self<"u"?self:typeof window<"u"?window:{});var qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WN,yu,HN,hf,Pv,KN,GN,QN;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,N,j){return f==Array.prototype||f==Object.prototype||(f[N]=j.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof qh=="object"&&qh];for(var N=0;N<f.length;++N){var j=f[N];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=t(this);function s(f,N){if(N)e:{var j=r;f=f.split(".");for(var F=0;F<f.length-1;F++){var te=f[F];if(!(te in j))break e;j=j[te]}f=f[f.length-1],F=j[f],N=N(F),N!=F&&N!=null&&e(j,f,{configurable:!0,writable:!0,value:N})}}function a(f,N){f instanceof String&&(f+="");var j=0,F=!1,te={next:function(){if(!F&&j<f.length){var ae=j++;return{value:N(ae,f[ae]),done:!1}}return F=!0,{done:!0,value:void 0}}};return te[Symbol.iterator]=function(){return te},te}s("Array.prototype.values",function(f){return f||function(){return a(this,function(N,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function h(f){var N=typeof f;return N=N!="object"?N:f?Array.isArray(f)?"array":N:"null",N=="array"||N=="object"&&typeof f.length=="number"}function m(f){var N=typeof f;return N=="object"&&f!=null||N=="function"}function g(f,N,j){return f.call.apply(f.bind,arguments)}function v(f,N,j){if(!f)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(te,F),f.apply(N,te)}}return function(){return f.apply(N,arguments)}}function y(f,N,j){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,y.apply(null,arguments)}function b(f,N){var j=Array.prototype.slice.call(arguments,1);return function(){var F=j.slice();return F.push.apply(F,arguments),f.apply(this,F)}}function S(f,N){function j(){}j.prototype=N.prototype,f.aa=N.prototype,f.prototype=new j,f.prototype.constructor=f,f.Qb=function(F,te,ae){for(var Se=Array(arguments.length-2),St=2;St<arguments.length;St++)Se[St-2]=arguments[St];return N.prototype[te].apply(F,Se)}}function E(f){const N=f.length;if(0<N){const j=Array(N);for(let F=0;F<N;F++)j[F]=f[F];return j}return[]}function x(f,N){for(let j=1;j<arguments.length;j++){const F=arguments[j];if(h(F)){const te=f.length||0,ae=F.length||0;f.length=te+ae;for(let Se=0;Se<ae;Se++)f[te+Se]=F[Se]}else f.push(F)}}class A{constructor(N,j){this.i=N,this.j=j,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function I(f){return/^[\s\xa0]*$/.test(f)}function C(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function L(f){return L[" "](f),f}L[" "]=function(){};var V=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function q(f,N,j){for(const F in f)N.call(j,f[F],F,f)}function P(f,N){for(const j in f)N.call(void 0,f[j],j,f)}function R(f){const N={};for(const j in f)N[j]=f[j];return N}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(f,N){let j,F;for(let te=1;te<arguments.length;te++){F=arguments[te];for(j in F)f[j]=F[j];for(let ae=0;ae<D.length;ae++)j=D[ae],Object.prototype.hasOwnProperty.call(F,j)&&(f[j]=F[j])}}function $(f){var N=1;f=f.split(":");const j=[];for(;0<N&&f.length;)j.push(f.shift()),N--;return f.length&&j.push(f.join(":")),j}function z(f){u.setTimeout(()=>{throw f},0)}function M(){var f=Q;let N=null;return f.g&&(N=f.g,f.g=f.g.next,f.g||(f.h=null),N.next=null),N}class oe{constructor(){this.h=this.g=null}add(N,j){const F=K.get();F.set(N,j),this.h?this.h.next=F:this.g=F,this.h=F}}var K=new A(()=>new Z,f=>f.reset());class Z{constructor(){this.next=this.g=this.h=null}set(N,j){this.h=N,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let X,B=!1,Q=new oe,ee=()=>{const f=u.Promise.resolve(void 0);X=()=>{f.then(U)}};var U=()=>{for(var f;f=M();){try{f.h.call(f.g)}catch(j){z(j)}var N=K;N.j(f),100>N.h&&(N.h++,f.next=N.g,N.g=f)}B=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(f,N){this.type=f,this.g=this.target=N,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,N=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const j=()=>{};u.addEventListener("test",j,N),u.removeEventListener("test",j,N)}catch{}return f}();function ve(f,N){if(le.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var j=this.type=f.type,F=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=N,N=f.relatedTarget){if(V){e:{try{L(N.nodeName);var te=!0;break e}catch{}te=!1}te||(N=null)}}else j=="mouseover"?N=f.fromElement:j=="mouseout"&&(N=f.toElement);this.relatedTarget=N,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ce[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ve.aa.h.call(this)}}S(ve,le);var ce={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),Te=0;function ke(f,N,j,F,te){this.listener=f,this.proxy=null,this.src=N,this.type=j,this.capture=!!F,this.ha=te,this.key=++Te,this.da=this.fa=!1}function Ce(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Me(f){this.src=f,this.g={},this.h=0}Me.prototype.add=function(f,N,j,F,te){var ae=f.toString();f=this.g[ae],f||(f=this.g[ae]=[],this.h++);var Se=yt(f,N,F,te);return-1<Se?(N=f[Se],j||(N.fa=!1)):(N=new ke(N,this.src,ae,!!F,te),N.fa=j,f.push(N)),N};function Ke(f,N){var j=N.type;if(j in f.g){var F=f.g[j],te=Array.prototype.indexOf.call(F,N,void 0),ae;(ae=0<=te)&&Array.prototype.splice.call(F,te,1),ae&&(Ce(N),f.g[j].length==0&&(delete f.g[j],f.h--))}}function yt(f,N,j,F){for(var te=0;te<f.length;++te){var ae=f[te];if(!ae.da&&ae.listener==N&&ae.capture==!!j&&ae.ha==F)return te}return-1}var bt="closure_lm_"+(1e6*Math.random()|0),rn={};function Ot(f,N,j,F,te){if(Array.isArray(N)){for(var ae=0;ae<N.length;ae++)Ot(f,N[ae],j,F,te);return null}return j=Wn(j),f&&f[me]?f.K(N,j,m(F)?!!F.capture:!1,te):At(f,N,j,!1,F,te)}function At(f,N,j,F,te,ae){if(!N)throw Error("Invalid event type");var Se=m(te)?!!te.capture:!!te,St=qn(f);if(St||(f[bt]=St=new Me(f)),j=St.add(N,j,F,Se,ae),j.proxy)return j;if(F=_t(),j.proxy=F,F.src=f,F.listener=j,f.addEventListener)Ee||(te=Se),te===void 0&&(te=!1),f.addEventListener(N.toString(),F,te);else if(f.attachEvent)f.attachEvent(fr(N.toString()),F);else if(f.addListener&&f.removeListener)f.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return j}function _t(){function f(j){return N.call(f.src,f.listener,j)}const N=Xs;return f}function ft(f,N,j,F,te){if(Array.isArray(N))for(var ae=0;ae<N.length;ae++)ft(f,N[ae],j,F,te);else F=m(F)?!!F.capture:!!F,j=Wn(j),f&&f[me]?(f=f.i,N=String(N).toString(),N in f.g&&(ae=f.g[N],j=yt(ae,j,F,te),-1<j&&(Ce(ae[j]),Array.prototype.splice.call(ae,j,1),ae.length==0&&(delete f.g[N],f.h--)))):f&&(f=qn(f))&&(N=f.g[N.toString()],f=-1,N&&(f=yt(N,j,F,te)),(j=-1<f?N[f]:null)&&Pt(j))}function Pt(f){if(typeof f!="number"&&f&&!f.da){var N=f.src;if(N&&N[me])Ke(N.i,f);else{var j=f.type,F=f.proxy;N.removeEventListener?N.removeEventListener(j,F,f.capture):N.detachEvent?N.detachEvent(fr(j),F):N.addListener&&N.removeListener&&N.removeListener(F),(j=qn(N))?(Ke(j,f),j.h==0&&(j.src=null,N[bt]=null)):Ce(f)}}}function fr(f){return f in rn?rn[f]:rn[f]="on"+f}function Xs(f,N){if(f.da)f=!0;else{N=new ve(N,this);var j=f.listener,F=f.ha||f.src;f.fa&&Pt(f),f=j.call(F,N)}return f}function qn(f){return f=f[bt],f instanceof Me?f:null}var Ir="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wn(f){return typeof f=="function"?f:(f[Ir]||(f[Ir]=function(N){return f.handleEvent(N)}),f[Ir])}function Lt(){Y.call(this),this.i=new Me(this),this.M=this,this.F=null}S(Lt,Y),Lt.prototype[me]=!0,Lt.prototype.removeEventListener=function(f,N,j,F){ft(this,f,N,j,F)};function Nt(f,N){var j,F=f.F;if(F)for(j=[];F;F=F.F)j.push(F);if(f=f.M,F=N.type||N,typeof N=="string")N=new le(N,f);else if(N instanceof le)N.target=N.target||f;else{var te=N;N=new le(F,f),k(N,te)}if(te=!0,j)for(var ae=j.length-1;0<=ae;ae--){var Se=N.g=j[ae];te=Jn(Se,F,!0,N)&&te}if(Se=N.g=f,te=Jn(Se,F,!0,N)&&te,te=Jn(Se,F,!1,N)&&te,j)for(ae=0;ae<j.length;ae++)Se=N.g=j[ae],te=Jn(Se,F,!1,N)&&te}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var f=this.i,N;for(N in f.g){for(var j=f.g[N],F=0;F<j.length;F++)Ce(j[F]);delete f.g[N],f.h--}}this.F=null},Lt.prototype.K=function(f,N,j,F){return this.i.add(String(f),N,!1,j,F)},Lt.prototype.L=function(f,N,j,F){return this.i.add(String(f),N,!0,j,F)};function Jn(f,N,j,F){if(N=f.i.g[String(N)],!N)return!0;N=N.concat();for(var te=!0,ae=0;ae<N.length;++ae){var Se=N[ae];if(Se&&!Se.da&&Se.capture==j){var St=Se.listener,fn=Se.ha||Se.src;Se.fa&&Ke(f.i,Se),te=St.call(fn,F)!==!1&&te}}return te&&!F.defaultPrevented}function Zn(f,N,j){if(typeof f=="function")j&&(f=y(f,j));else if(f&&typeof f.handleEvent=="function")f=y(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:u.setTimeout(f,N||0)}function mr(f){f.g=Zn(()=>{f.g=null,f.i&&(f.i=!1,mr(f))},f.l);const N=f.h;f.h=null,f.m.apply(null,N)}class Br extends Y{constructor(N,j){super(),this.m=N,this.l=j,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:mr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(f){Y.call(this),this.h=f,this.g={}}S(jr,Y);var qr=[];function Js(f){q(f.g,function(N,j){this.g.hasOwnProperty(j)&&Pt(N)},f),f.g={}}jr.prototype.N=function(){jr.aa.N.call(this),Js(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wr=u.JSON.stringify,Rn=u.JSON.parse,Zs=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function J(){}J.prototype.h=null;function ye(f){return f.h||(f.h=f.i())}function be(){}var Qe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ue(){le.call(this,"d")}S(Ue,le);function ct(){le.call(this,"c")}S(ct,le);var je={},ki=null;function ys(){return ki=ki||new Lt}je.La="serverreachability";function Di(f){le.call(this,je.La,f)}S(Di,le);function Ar(f){const N=ys();Nt(N,new Di(N))}je.STAT_EVENT="statevent";function Oi(f,N){le.call(this,je.STAT_EVENT,f),this.stat=N}S(Oi,le);function zt(f){const N=ys();Nt(N,new Oi(N,f))}je.Ma="timingevent";function ei(f,N){le.call(this,je.Ma,f),this.size=N}S(ei,le);function er(f,N){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},N)}function xs(){this.g=!0}xs.prototype.xa=function(){this.g=!1};function Ht(f,N,j,F,te,ae){f.info(function(){if(f.g)if(ae)for(var Se="",St=ae.split("&"),fn=0;fn<St.length;fn++){var mt=St[fn].split("=");if(1<mt.length){var yn=mt[0];mt=mt[1];var sn=yn.split("_");Se=2<=sn.length&&sn[1]=="type"?Se+(yn+"="+mt+"&"):Se+(yn+"=redacted&")}}else Se=null;else Se=ae;return"XMLHTTP REQ ("+F+") [attempt "+te+"]: "+N+`
`+j+`
`+Se})}function Ga(f,N,j,F,te,ae,Se){f.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+te+"]: "+N+`
`+j+`
`+ae+" "+Se})}function Hr(f,N,j,F){f.info(function(){return"XMLHTTP TEXT ("+N+"): "+Wm(f,j)+(F?" "+F:"")})}function Rc(f,N){f.info(function(){return"TIMEOUT: "+N})}xs.prototype.info=function(){};function Wm(f,N){if(!f.g)return N;if(!N)return null;try{var j=JSON.parse(N);if(j){for(f=0;f<j.length;f++)if(Array.isArray(j[f])){var F=j[f];if(!(2>F.length)){var te=F[1];if(Array.isArray(te)&&!(1>te.length)){var ae=te[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var Se=1;Se<te.length;Se++)te[Se]=""}}}}return Wr(j)}catch{return N}}var Qa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_d={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kr;function Xo(){}S(Xo,J),Xo.prototype.g=function(){return new XMLHttpRequest},Xo.prototype.i=function(){return{}},Kr=new Xo;function Gr(f,N,j,F){this.j=f,this.i=N,this.l=j,this.R=F||1,this.U=new jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ed}function Ed(){this.i=null,this.g="",this.h=!1}var kc={},Ya={};function Xa(f,N,j){f.L=1,f.v=Ui(gr(N)),f.m=j,f.P=!0,Dc(f,null)}function Dc(f,N){f.F=Date.now(),Rt(f),f.A=gr(f.v);var j=f.A,F=f.R;Array.isArray(F)||(F=[String(F)]),zi(j.i,"t",F),f.C=0,j=f.j.J,f.h=new Ed,f.g=Ud(f.j,j?N:null,!f.m),0<f.O&&(f.M=new Br(y(f.Y,f,f.g),f.O)),N=f.U,j=f.g,F=f.ca;var te="readystatechange";Array.isArray(te)||(te&&(qr[0]=te.toString()),te=qr);for(var ae=0;ae<te.length;ae++){var Se=Ot(j,te[ae],F||N.handleEvent,!1,N.h||N);if(!Se)break;N.g[Se.key]=Se}N=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,N)):(f.u="GET",f.g.ea(f.A,f.u,null,N)),Ar(),Ht(f.i,f.u,f.A,f.l,f.R,f.m)}Gr.prototype.ca=function(f){f=f.target;const N=this.M;N&&nr(f)==3?N.j():this.Y(f)},Gr.prototype.Y=function(f){try{if(f==this.g)e:{const sn=nr(this.g);var N=this.g.Ba();const kr=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||Uc(this.g)))){this.J||sn!=4||N==7||(N==8||0>=kr?Ar(3):Ar(2)),Jo(this);var j=this.g.Z();this.X=j;t:if(bd(this)){var F=Uc(this.g);f="";var te=F.length,ae=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pr(this),Li(this);var Se="";break t}this.h.i=new u.TextDecoder}for(N=0;N<te;N++)this.h.h=!0,f+=this.h.i.decode(F[N],{stream:!(ae&&N==te-1)});F.length=0,this.h.g+=f,this.C=0,Se=this.h.g}else Se=this.g.oa();if(this.o=j==200,Ga(this.i,this.u,this.A,this.l,this.R,sn,j),this.o){if(this.T&&!this.K){t:{if(this.g){var St,fn=this.g;if((St=fn.g?fn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(St)){var mt=St;break t}}mt=null}if(j=mt)Hr(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oc(this,j);else{this.o=!1,this.s=3,zt(12),Pr(this),Li(this);break e}}if(this.P){j=!0;let yr;for(;!this.J&&this.C<Se.length;)if(yr=Hm(this,Se),yr==Ya){sn==4&&(this.s=4,zt(14),j=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(yr==kc){this.s=4,zt(15),Hr(this.i,this.l,Se,"[Invalid Chunk]"),j=!1;break}else Hr(this.i,this.l,yr,null),Oc(this,yr);if(bd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||Se.length!=0||this.h.h||(this.s=1,zt(16),j=!1),this.o=this.o&&j,!j)Hr(this.i,this.l,Se,"[Invalid Chunked Response]"),Pr(this),Li(this);else if(0<Se.length&&!this.W){this.W=!0;var yn=this.j;yn.g==this&&yn.ba&&!yn.M&&(yn.j.info("Great, no buffering proxy detected. Bytes received: "+Se.length),zc(yn),yn.M=!0,zt(11))}}else Hr(this.i,this.l,Se,null),Oc(this,Se);sn==4&&Pr(this),this.o&&!this.J&&(sn==4?ll(this.j,this):(this.o=!1,Rt(this)))}else rl(this.g),j==400&&0<Se.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),Pr(this),Li(this)}}}catch{}finally{}};function bd(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Hm(f,N){var j=f.C,F=N.indexOf(`
`,j);return F==-1?Ya:(j=Number(N.substring(j,F)),isNaN(j)?kc:(F+=1,F+j>N.length?Ya:(N=N.slice(F,F+j),f.C=F+j,N)))}Gr.prototype.cancel=function(){this.J=!0,Pr(this)};function Rt(f){f.S=Date.now()+f.I,Sd(f,f.I)}function Sd(f,N){if(f.B!=null)throw Error("WatchDog timer not null");f.B=er(y(f.ba,f),N)}function Jo(f){f.B&&(u.clearTimeout(f.B),f.B=null)}Gr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Rc(this.i,this.A),this.L!=2&&(Ar(),zt(17)),Pr(this),this.s=2,Li(this)):Sd(this,this.S-f)};function Li(f){f.j.G==0||f.J||ll(f.j,f)}function Pr(f){Jo(f);var N=f.M;N&&typeof N.ma=="function"&&N.ma(),f.M=null,Js(f.U),f.g&&(N=f.g,f.g=null,N.abort(),N.ma())}function Oc(f,N){try{var j=f.j;if(j.G!=0&&(j.g==f||Hn(j.h,f))){if(!f.K&&Hn(j.h,f)&&j.G==3){try{var F=j.Da.g.parse(N)}catch{F=null}if(Array.isArray(F)&&F.length==3){var te=F;if(te[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<f.F)al(j),Zr(j);else break e;ol(j),zt(18)}}else j.za=te[1],0<j.za-j.T&&37500>te[2]&&j.F&&j.v==0&&!j.C&&(j.C=er(y(j.Za,j),6e3));if(1>=Td(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else ii(j,11)}else if((f.K||j.g==f)&&al(j),!I(N))for(te=j.Da.g.parse(N),N=0;N<te.length;N++){let mt=te[N];if(j.T=mt[0],mt=mt[1],j.G==2)if(mt[0]=="c"){j.K=mt[1],j.ia=mt[2];const yn=mt[3];yn!=null&&(j.la=yn,j.j.info("VER="+j.la));const sn=mt[4];sn!=null&&(j.Aa=sn,j.j.info("SVER="+j.Aa));const kr=mt[5];kr!=null&&typeof kr=="number"&&0<kr&&(F=1.5*kr,j.L=F,j.j.info("backChannelRequestTimeoutMs_="+F)),F=j;const yr=f.g;if(yr){const ia=yr.g?yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ia){var ae=F.h;ae.g||ia.indexOf("spdy")==-1&&ia.indexOf("quic")==-1&&ia.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Lc(ae,ae.h),ae.h=null))}if(F.D){const ul=yr.g?yr.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(F.ya=ul,It(F.I,F.D,ul))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-f.F,j.j.info("Handshake RTT: "+j.R+"ms")),F=j;var Se=f;if(F.qa=Vd(F,F.J?F.ia:null,F.W),Se.K){Cd(F.h,Se);var St=Se,fn=F.L;fn&&(St.I=fn),St.B&&(Jo(St),Rt(St)),F.g=Se}else sa(F);0<j.i.length&&bs(j)}else mt[0]!="stop"&&mt[0]!="close"||ii(j,7);else j.G==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?ii(j,7):Nn(j):mt[0]!="noop"&&j.l&&j.l.ta(mt),j.v=0)}}Ar(4)}catch{}}var Nd=class{constructor(f,N){this.g=f,this.map=N}};function Zo(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Td(f){return f.h?1:f.g?f.g.size:0}function Hn(f,N){return f.h?f.h==N:f.g?f.g.has(N):!1}function Lc(f,N){f.g?f.g.add(N):f.h=N}function Cd(f,N){f.h&&f.h==N?f.h=null:f.g&&f.g.has(N)&&f.g.delete(N)}Zo.prototype.cancel=function(){if(this.i=Id(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Id(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let N=f.i;for(const j of f.g.values())N=N.concat(j.D);return N}return E(f.i)}function Ja(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(h(f)){for(var N=[],j=f.length,F=0;F<j;F++)N.push(f[F]);return N}N=[],j=0;for(F in f)N[j++]=f[F];return N}function Za(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(h(f)||typeof f=="string"){var N=[];f=f.length;for(var j=0;j<f;j++)N.push(j);return N}N=[],j=0;for(const F in f)N[j++]=F;return N}}}function Mi(f,N){if(f.forEach&&typeof f.forEach=="function")f.forEach(N,void 0);else if(h(f)||typeof f=="string")Array.prototype.forEach.call(f,N,void 0);else for(var j=Za(f),F=Ja(f),te=F.length,ae=0;ae<te;ae++)N.call(void 0,F[ae],j&&j[ae],f)}var ea=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Km(f,N){if(f){f=f.split("&");for(var j=0;j<f.length;j++){var F=f[j].indexOf("="),te=null;if(0<=F){var ae=f[j].substring(0,F);te=f[j].substring(F+1)}else ae=f[j];N(ae,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function ti(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof ti){this.h=f.h,ta(this,f.j),this.o=f.o,this.g=f.g,Fi(this,f.s),this.l=f.l;var N=f.i,j=new ws;j.i=N.i,N.g&&(j.g=new Map(N.g),j.h=N.h),Vi(this,j),this.m=f.m}else f&&(N=String(f).match(ea))?(this.h=!1,ta(this,N[1]||"",!0),this.o=ht(N[2]||""),this.g=ht(N[3]||"",!0),Fi(this,N[4]),this.l=ht(N[5]||"",!0),Vi(this,N[6]||"",!0),this.m=ht(N[7]||"")):(this.h=!1,this.i=new ws(null,this.h))}ti.prototype.toString=function(){var f=[],N=this.j;N&&f.push($i(N,el,!0),":");var j=this.g;return(j||N=="file")&&(f.push("//"),(N=this.o)&&f.push($i(N,el,!0),"@"),f.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&f.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&f.push("/"),f.push($i(j,j.charAt(0)=="/"?Pd:Ad,!0))),(j=this.i.toString())&&f.push("?",j),(j=this.m)&&f.push("#",$i(j,Mc)),f.join("")};function gr(f){return new ti(f)}function ta(f,N,j){f.j=j?ht(N,!0):N,f.j&&(f.j=f.j.replace(/:$/,""))}function Fi(f,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);f.s=N}else f.s=null}function Vi(f,N,j){N instanceof ws?(f.i=N,_s(f.i,f.h)):(j||(N=$i(N,Rd)),f.i=new ws(N,f.h))}function It(f,N,j){f.i.set(N,j)}function Ui(f){return It(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ht(f,N){return f?N?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function $i(f,N,j){return typeof f=="string"?(f=encodeURI(f).replace(N,jd),j&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function jd(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var el=/[#\/\?@]/g,Ad=/[#\?:]/g,Pd=/[#\?]/g,Rd=/[#\?@]/g,Mc=/#/g;function ws(f,N){this.h=this.g=null,this.i=f||null,this.j=!!N}function Sn(f){f.g||(f.g=new Map,f.h=0,f.i&&Km(f.i,function(N,j){f.add(decodeURIComponent(N.replace(/\+/g," ")),j)}))}n=ws.prototype,n.add=function(f,N){Sn(this),this.i=null,f=Rr(this,f);var j=this.g.get(f);return j||this.g.set(f,j=[]),j.push(N),this.h+=1,this};function Qr(f,N){Sn(f),N=Rr(f,N),f.g.has(N)&&(f.i=null,f.h-=f.g.get(N).length,f.g.delete(N))}function Yr(f,N){return Sn(f),N=Rr(f,N),f.g.has(N)}n.forEach=function(f,N){Sn(this),this.g.forEach(function(j,F){j.forEach(function(te){f.call(N,te,F,this)},this)},this)},n.na=function(){Sn(this);const f=Array.from(this.g.values()),N=Array.from(this.g.keys()),j=[];for(let F=0;F<N.length;F++){const te=f[F];for(let ae=0;ae<te.length;ae++)j.push(N[F])}return j},n.V=function(f){Sn(this);let N=[];if(typeof f=="string")Yr(this,f)&&(N=N.concat(this.g.get(Rr(this,f))));else{f=Array.from(this.g.values());for(let j=0;j<f.length;j++)N=N.concat(f[j])}return N},n.set=function(f,N){return Sn(this),this.i=null,f=Rr(this,f),Yr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[N]),this.h+=1,this},n.get=function(f,N){return f?(f=this.V(f),0<f.length?String(f[0]):N):N};function zi(f,N,j){Qr(f,N),0<j.length&&(f.i=null,f.g.set(Rr(f,N),E(j)),f.h+=j.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],N=Array.from(this.g.keys());for(var j=0;j<N.length;j++){var F=N[j];const ae=encodeURIComponent(String(F)),Se=this.V(F);for(F=0;F<Se.length;F++){var te=ae;Se[F]!==""&&(te+="="+encodeURIComponent(String(Se[F]))),f.push(te)}}return this.i=f.join("&")};function Rr(f,N){return N=String(N),f.j&&(N=N.toLowerCase()),N}function _s(f,N){N&&!f.j&&(Sn(f),f.i=null,f.g.forEach(function(j,F){var te=F.toLowerCase();F!=te&&(Qr(this,F),zi(this,te,j))},f)),f.j=N}function Gm(f,N){const j=new xs;if(u.Image){const F=new Image;F.onload=b(tr,j,"TestLoadImage: loaded",!0,N,F),F.onerror=b(tr,j,"TestLoadImage: error",!1,N,F),F.onabort=b(tr,j,"TestLoadImage: abort",!1,N,F),F.ontimeout=b(tr,j,"TestLoadImage: timeout",!1,N,F),u.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=f}else N(!1)}function kd(f,N){const j=new xs,F=new AbortController,te=setTimeout(()=>{F.abort(),tr(j,"TestPingServer: timeout",!1,N)},1e4);fetch(f,{signal:F.signal}).then(ae=>{clearTimeout(te),ae.ok?tr(j,"TestPingServer: ok",!0,N):tr(j,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(te),tr(j,"TestPingServer: error",!1,N)})}function tr(f,N,j,F,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),F(j)}catch{}}function Qm(){this.g=new Zs}function Dd(f,N,j){const F=j||"";try{Mi(f,function(te,ae){let Se=te;m(te)&&(Se=Wr(te)),N.push(F+ae+"="+encodeURIComponent(Se))})}catch(te){throw N.push(F+"type="+encodeURIComponent("_badmap")),te}}function ni(f){this.l=f.Ub||null,this.j=f.eb||!1}S(ni,J),ni.prototype.g=function(){return new na(this.l,this.j)},ni.prototype.i=function(f){return function(){return f}}({});function na(f,N){Lt.call(this),this.D=f,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(na,Lt),n=na.prototype,n.open=function(f,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=N,this.readyState=1,Jr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(N.body=f),(this.D||u).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Jr(this)),this.g&&(this.readyState=3,Jr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Od(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Od(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var N=f.value?f.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!f.done}))&&(this.response=this.responseText+=N)}f.done?Xr(this):Jr(this),this.readyState==3&&Od(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Xr(this))},n.Qa=function(f){this.g&&(this.response=f,Xr(this))},n.ga=function(){this.g&&Xr(this)};function Xr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Jr(f)}n.setRequestHeader=function(f,N){this.u.append(f,N)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],N=this.h.entries();for(var j=N.next();!j.done;)j=j.value,f.push(j[0]+": "+j[1]),j=N.next();return f.join(`\r
`)};function Jr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ri(f){let N="";return q(f,function(j,F){N+=F,N+=":",N+=j,N+=`\r
`}),N}function Bi(f,N,j){e:{for(F in j){var F=!1;break e}F=!0}F||(j=ri(j),typeof f=="string"?j!=null&&encodeURIComponent(String(j)):It(f,N,j))}function Bt(f){Lt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Bt,Lt);var Ym=/^https?$/i,Fc=["POST","PUT"];n=Bt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,N,j,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);N=N?N.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kr.g(),this.v=this.o?ye(this.o):ye(Kr),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(N,String(f),!0),this.B=!1}catch(ae){ra(this,ae);return}if(f=j||"",j=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var te in F)j.set(te,F[te]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ae of F.keys())j.set(ae,F.get(ae));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(j.keys()).find(ae=>ae.toLowerCase()=="content-type"),te=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Fc,N,void 0))||F||te||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Se]of j)this.g.setRequestHeader(ae,Se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nl(this),this.u=!0,this.g.send(f),this.u=!1}catch(ae){ra(this,ae)}};function ra(f,N){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=N,f.m=5,tl(f),vr(f)}function tl(f){f.A||(f.A=!0,Nt(f,"complete"),Nt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Nt(this,"complete"),Nt(this,"abort"),vr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vr(this,!0)),Bt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Vc(this):this.bb())},n.bb=function(){Vc(this)};function Vc(f){if(f.h&&typeof c<"u"&&(!f.v[1]||nr(f)!=4||f.Z()!=2)){if(f.u&&nr(f)==4)Zn(f.Ea,0,f);else if(Nt(f,"readystatechange"),nr(f)==4){f.h=!1;try{const Se=f.Z();e:switch(Se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var j;if(!(j=N)){var F;if(F=Se===0){var te=String(f.D).match(ea)[1]||null;!te&&u.self&&u.self.location&&(te=u.self.location.protocol.slice(0,-1)),F=!Ym.test(te?te.toLowerCase():"")}j=F}if(j)Nt(f,"complete"),Nt(f,"success");else{f.m=6;try{var ae=2<nr(f)?f.g.statusText:""}catch{ae=""}f.l=ae+" ["+f.Z()+"]",tl(f)}}finally{vr(f)}}}}function vr(f,N){if(f.g){nl(f);const j=f.g,F=f.v[0]?()=>{}:null;f.g=null,f.v=null,N||Nt(f,"ready");try{j.onreadystatechange=F}catch{}}}function nl(f){f.I&&(u.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function nr(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var N=this.g.responseText;return f&&N.indexOf(f)==0&&(N=N.substring(f.length)),Rn(N)}};function Uc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function rl(f){const N={};f=(f.g&&2<=nr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<f.length;F++){if(I(f[F]))continue;var j=$(f[F]);const te=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const ae=N[te]||[];N[te]=ae,ae.push(j)}P(N,function(F){return F.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Es(f,N,j){return j&&j.internalChannelParams&&j.internalChannelParams[f]||N}function $c(f){this.Aa=0,this.i=[],this.j=new xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Es("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Es("baseRetryDelayMs",5e3,f),this.cb=Es("retryDelaySeedMs",1e4,f),this.Wa=Es("forwardChannelMaxRetries",2,f),this.wa=Es("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Zo(f&&f.concurrentRequestLimit),this.Da=new Qm,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=$c.prototype,n.la=8,n.G=1,n.connect=function(f,N,j,F){zt(0),this.W=f,this.H=N||{},j&&F!==void 0&&(this.H.OSID=j,this.H.OAID=F),this.F=this.X,this.I=Vd(this,null,this.W),bs(this)};function Nn(f){if(sl(f),f.G==3){var N=f.U++,j=gr(f.I);if(It(j,"SID",f.K),It(j,"RID",N),It(j,"TYPE","terminate"),si(f,j),N=new Gr(f,f.j,N),N.L=2,N.v=Ui(gr(j)),j=!1,u.navigator&&u.navigator.sendBeacon)try{j=u.navigator.sendBeacon(N.v.toString(),"")}catch{}!j&&u.Image&&(new Image().src=N.v,j=!0),j||(N.g=Ud(N.j,null),N.g.ea(N.v)),N.F=Date.now(),Rt(N)}Fd(f)}function Zr(f){f.g&&(zc(f),f.g.cancel(),f.g=null)}function sl(f){Zr(f),f.u&&(u.clearTimeout(f.u),f.u=null),al(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function bs(f){if(!pr(f.h)&&!f.s){f.s=!0;var N=f.Ga;X||ee(),B||(X(),B=!0),Q.add(N,f),f.B=0}}function Xm(f,N){return Td(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=N.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=er(y(f.Ga,f,N),Md(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const te=new Gr(this,this.j,f);let ae=this.o;if(this.S&&(ae?(ae=R(ae),k(ae,this.S)):ae=this.S),this.m!==null||this.O||(te.H=ae,ae=null),this.P)e:{for(var N=0,j=0;j<this.i.length;j++){t:{var F=this.i[j];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(N+=F,4096<N){N=j;break e}if(N===4096||j===this.i.length-1){N=j+1;break e}}N=1e3}else N=1e3;N=qi(this,te,N),j=gr(this.I),It(j,"RID",f),It(j,"CVER",22),this.D&&It(j,"X-HTTP-Session-Id",this.D),si(this,j),ae&&(this.O?N="headers="+encodeURIComponent(String(ri(ae)))+"&"+N:this.m&&Bi(j,this.m,ae)),Lc(this.h,te),this.Ua&&It(j,"TYPE","init"),this.P?(It(j,"$req",N),It(j,"SID","null"),te.T=!0,Xa(te,j,null)):Xa(te,j,N),this.G=2}}else this.G==3&&(f?il(this,f):this.i.length==0||pr(this.h)||il(this))};function il(f,N){var j;N?j=N.l:j=f.U++;const F=gr(f.I);It(F,"SID",f.K),It(F,"RID",j),It(F,"AID",f.T),si(f,F),f.m&&f.o&&Bi(F,f.m,f.o),j=new Gr(f,f.j,j,f.B+1),f.m===null&&(j.H=f.o),N&&(f.i=N.D.concat(f.i)),N=qi(f,j,1e3),j.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Lc(f.h,j),Xa(j,F,N)}function si(f,N){f.H&&q(f.H,function(j,F){It(N,F,j)}),f.l&&Mi({},function(j,F){It(N,F,j)})}function qi(f,N,j){j=Math.min(f.i.length,j);var F=f.l?y(f.l.Na,f.l,f):null;e:{var te=f.i;let ae=-1;for(;;){const Se=["count="+j];ae==-1?0<j?(ae=te[0].g,Se.push("ofs="+ae)):ae=0:Se.push("ofs="+ae);let St=!0;for(let fn=0;fn<j;fn++){let mt=te[fn].g;const yn=te[fn].map;if(mt-=ae,0>mt)ae=Math.max(0,te[fn].g-100),St=!1;else try{Dd(yn,Se,"req"+mt+"_")}catch{F&&F(yn)}}if(St){F=Se.join("&");break e}}}return f=f.i.splice(0,j),N.D=f,F}function sa(f){if(!f.g&&!f.u){f.Y=1;var N=f.Fa;X||ee(),B||(X(),B=!0),Q.add(N,f),f.v=0}}function ol(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=er(y(f.Fa,f),Md(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Ld(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=er(y(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),Zr(this),Ld(this))};function zc(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function Ld(f){f.g=new Gr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var N=gr(f.qa);It(N,"RID","rpc"),It(N,"SID",f.K),It(N,"AID",f.T),It(N,"CI",f.F?"0":"1"),!f.F&&f.ja&&It(N,"TO",f.ja),It(N,"TYPE","xmlhttp"),si(f,N),f.m&&f.o&&Bi(N,f.m,f.o),f.L&&(f.g.I=f.L);var j=f.g;f=f.ia,j.L=1,j.v=Ui(gr(N)),j.m=null,j.P=!0,Dc(j,f)}n.Za=function(){this.C!=null&&(this.C=null,Zr(this),ol(this),zt(19))};function al(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function ll(f,N){var j=null;if(f.g==N){al(f),zc(f),f.g=null;var F=2}else if(Hn(f.h,N))j=N.D,Cd(f.h,N),F=1;else return;if(f.G!=0){if(N.o)if(F==1){j=N.m?N.m.length:0,N=Date.now()-N.F;var te=f.B;F=ys(),Nt(F,new ei(F,j)),bs(f)}else sa(f);else if(te=N.s,te==3||te==0&&0<N.X||!(F==1&&Xm(f,N)||F==2&&ol(f)))switch(j&&0<j.length&&(N=f.h,N.i=N.i.concat(j)),te){case 1:ii(f,5);break;case 4:ii(f,10);break;case 3:ii(f,6);break;default:ii(f,2)}}}function Md(f,N){let j=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(j*=2),j*N}function ii(f,N){if(f.j.info("Error code "+N),N==2){var j=y(f.fb,f),F=f.Xa;const te=!F;F=new ti(F||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ta(F,"https"),Ui(F),te?Gm(F.toString(),j):kd(F.toString(),j)}else zt(2);f.G=0,f.l&&f.l.sa(N),Fd(f),sl(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Fd(f){if(f.G=0,f.ka=[],f.l){const N=Id(f.h);(N.length!=0||f.i.length!=0)&&(x(f.ka,N),x(f.ka,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.ra()}}function Vd(f,N,j){var F=j instanceof ti?gr(j):new ti(j);if(F.g!="")N&&(F.g=N+"."+F.g),Fi(F,F.s);else{var te=u.location;F=te.protocol,N=N?N+"."+te.hostname:te.hostname,te=+te.port;var ae=new ti(null);F&&ta(ae,F),N&&(ae.g=N),te&&Fi(ae,te),j&&(ae.l=j),F=ae}return j=f.D,N=f.ya,j&&N&&It(F,j,N),It(F,"VER",f.la),si(f,F),F}function Ud(f,N,j){if(N&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=f.Ca&&!f.pa?new Bt(new ni({eb:j})):new Bt(f.pa),N.Ha(f.J),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bc(){}n=Bc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function cl(){}cl.prototype.g=function(f,N){return new Kn(f,N)};function Kn(f,N){Lt.call(this),this.g=new $c(N),this.l=f,this.h=N&&N.messageUrlParams||null,f=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(f?f["X-WebChannel-Content-Type"]=N.messageContentType:f={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(f?f["X-WebChannel-Client-Profile"]=N.va:f={"X-WebChannel-Client-Profile":N.va}),this.g.S=f,(f=N&&N.Sb)&&!I(f)&&(this.g.m=f),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!I(N)&&(this.g.D=N,f=this.h,f!==null&&N in f&&(f=this.h,N in f&&delete f[N])),this.j=new Ss(this)}S(Kn,Lt),Kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){Nn(this.g)},Kn.prototype.o=function(f){var N=this.g;if(typeof f=="string"){var j={};j.__data__=f,f=j}else this.u&&(j={},j.__data__=Wr(f),f=j);N.i.push(new Nd(N.Ya++,f)),N.G==3&&bs(N)},Kn.prototype.N=function(){this.g.l=null,delete this.j,Nn(this.g),delete this.g,Kn.aa.N.call(this)};function $d(f){Ue.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var N=f.__sm__;if(N){e:{for(const j in N){f=j;break e}f=void 0}(this.i=f)&&(f=this.i,N=N!==null&&f in N?N[f]:void 0),this.data=N}else this.data=f}S($d,Ue);function zd(){ct.call(this),this.status=1}S(zd,ct);function Ss(f){this.g=f}S(Ss,Bc),Ss.prototype.ua=function(){Nt(this.g,"a")},Ss.prototype.ta=function(f){Nt(this.g,new $d(f))},Ss.prototype.sa=function(f){Nt(this.g,new zd)},Ss.prototype.ra=function(){Nt(this.g,"b")},cl.prototype.createWebChannel=cl.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,QN=function(){return new cl},GN=function(){return ys()},KN=je,Pv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qa.NO_ERROR=0,Qa.TIMEOUT=8,Qa.HTTP_ERROR=6,hf=Qa,_d.COMPLETE="complete",HN=_d,be.EventType=Qe,Qe.OPEN="a",Qe.CLOSE="b",Qe.ERROR="c",Qe.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,yu=be,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,WN=Bt}).apply(typeof qh<"u"?qh:typeof self<"u"?self:typeof window<"u"?window:{});const SE="@firebase/firestore",NE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cr.UNAUTHENTICATED=new cr(null),cr.GOOGLE_CREDENTIALS=new cr("google-credentials-uid"),cr.FIRST_PARTY=new cr("first-party-uid"),cr.MOCK_USER=new cr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new Ry("@firebase/firestore");function Ll(){return Oa.logLevel}function Re(n,...e){if(Oa.logLevel<=ut.DEBUG){const t=e.map(zy);Oa.debug(`Firestore (${Tc}): ${n}`,...t)}}function Ti(n,...e){if(Oa.logLevel<=ut.ERROR){const t=e.map(zy);Oa.error(`Firestore (${Tc}): ${n}`,...t)}}function La(n,...e){if(Oa.logLevel<=ut.WARN){const t=e.map(zy);Oa.warn(`Firestore (${Tc}): ${n}`,...t)}}function zy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,YN(n,r,t)}function YN(n,e,t){let r=`FIRESTORE (${Tc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ti(r),new Error(r)}function Et(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||YN(e,s,r)}function rt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends Qs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cr.UNAUTHENTICATED))}shutdown(){}}class aV{constructor(e){this.t=e,this.currentUser=cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Et(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let a=new jo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new jo,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},u=h=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new jo)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et(typeof r.accessToken=="string",31837,{l:r}),new iV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string",2055,{h:e}),new cr(e)}}class lV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=cr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new lV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$r(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Et(this.o===void 0,3512);const r=a=>{a.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new TE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new TE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=dV(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function at(n,e){return n<e?-1:n>e?1:0}function Rv(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return at(r,s);{const a=XN(),c=hV(a.encode(CE(n,t)),a.encode(CE(e,t)));return c!==0?c:at(r,s)}}t+=r>65535?2:1}return at(n.length,e.length)}function CE(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function hV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return at(n[t],e[t]);return at(n.length,e.length)}function lc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="__name__";class js{constructor(e,t,r){t===void 0?t=0:t>e.length&&Xe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Xe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return js.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof js?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=js.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return at(e.length,t.length)}static compareSegments(e,t){const r=js.isNumericId(e),s=js.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?js.extractNumericId(e).compare(js.extractNumericId(t)):Rv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Io.fromString(e.substring(4,e.length-2))}}class jt extends js{construct(e,t,r){return new jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new jt(t)}static emptyPath(){return new jt([])}}const fV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jn extends js{construct(e,t,r){return new jn(e,t,r)}static isValidIdentifier(e){return fV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kv}static keyField(){return new jn([kv])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Ie(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Ie(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ie(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(a(),s++)}if(a(),c)throw new Ie(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jn(t)}static emptyPath(){return new jn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(jt.fromString(e))}static fromName(e){return new Be(jt.fromString(e).popFirst(5))}static empty(){return new Be(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new jt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(n,e,t){if(!t)throw new Ie(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mV(n,e,t,r){if(e===!0&&r===!0)throw new Ie(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function IE(n){if(!Be.isDocumentKey(n))throw new Ie(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jE(n){if(Be.isDocumentKey(n))throw new Ie(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function wm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Xe(12329,{type:typeof n})}function Ms(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wm(n);throw new Ie(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(n,e){const t={typeString:n};return e&&(t.value=e),t}function hd(n,e){if(!JN(n))throw new Ie(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Ie(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=-62135596800,PE=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*PE);return new $t(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<AE)throw new Ie(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PE}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hd(e,$t._jsonSchema))return new $t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$t._jsonSchemaVersion="firestore/timestamp/1.0",$t._jsonSchema={type:un("string",$t._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static fromTimestamp(e){return new nt(e)}static min(){return new nt(new $t(0,0))}static max(){return new nt(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=-1;function pV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=nt.fromTimestamp(r===1e9?new $t(t+1,0):new $t(t,r));return new Fo(s,Be.empty(),e)}function gV(n){return new Fo(n.readTime,n.key,Hu)}class Fo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fo(nt.min(),Be.empty(),Hu)}static max(){return new Fo(nt.max(),Be.empty(),Hu)}}function vV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(n.documentKey,e.documentKey),t!==0?t:at(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==yV)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let s=0,a=0,c=!1;e.forEach(u=>{++s,u.next(()=>{++a,c&&a===s&&t()},h=>r(h))}),c=!0,a===s&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(s=>s?he.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new he((r,s)=>{const a=e.length,c=new Array(a);let u=0;for(let h=0;h<a;h++){const m=h;t(e[m]).next(g=>{c[m]=g,++u,u===a&&r(c)},g=>s(g))}})}static doWhile(e,t){return new he((r,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):r()};a()})}}function wV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ic(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}_m.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=-1;function Em(n){return n==null}function Mf(n){return n===0&&1/n==-1/0}function _V(n){return typeof n=="number"&&Number.isInteger(n)&&!Mf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="";function EV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=RE(e)),e=bV(n.get(t),e);return RE(e)}function bV(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case ZN:t+="";break;default:t+=a}}return t}function RE(n){return n+ZN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ho(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,t){this.comparator=e,this.root=t||In.EMPTY}insert(e,t){return new Xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new Xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wh(this.root,e,this.comparator,!0)}}class Wh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??In.RED,this.left=s??In.EMPTY,this.right=a??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new In(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return In.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Xe(27949);return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe(57766)}get value(){throw Xe(16141)}get color(){throw Xe(16727)}get left(){throw Xe(29726)}get right(){throw Xe(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new In(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new DE(this.data.getIterator())}getIteratorFrom(e){return new DE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gn(this.comparator);return t.data=e,t}}class DE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new Nr([])}unionWith(e){let t=new gn(jn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new tT("Invalid base64 string: "+a):a}}(e);return new Pn(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new Pn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const SV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vo(n){if(Et(!!n,39018),typeof n=="string"){let e=0;const t=SV.exec(n);if(Et(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nn(n.seconds),nanos:nn(n.nanos)}}function nn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Uo(n){return typeof n=="string"?Pn.fromBase64String(n):Pn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="server_timestamp",rT="__type__",sT="__previous_value__",iT="__local_write_time__";function Hy(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[rT])===null||t===void 0?void 0:t.stringValue)===nT}function bm(n){const e=n.mapValue.fields[sT];return Hy(e)?bm(e):e}function Ku(n){const e=Vo(n.mapValue.fields[iT].timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,t,r,s,a,c,u,h,m,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=m,this.isUsingEmulator=g}}const Ff="(default)";class Gu{constructor(e,t){this.projectId=e,this.database=t||Ff}static empty(){return new Gu("","")}get isDefaultDatabase(){return this.database===Ff}isEqual(e){return e instanceof Gu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="__type__",TV="__max__",Hh={mapValue:{}},aT="__vector__",Vf="value";function $o(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hy(n)?4:IV(n)?9007199254740991:CV(n)?10:11:Xe(28295,{value:n})}function qs(n,e){if(n===e)return!0;const t=$o(n);if(t!==$o(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ku(n).isEqual(Ku(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=Vo(s.timestampValue),u=Vo(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return Uo(s.bytesValue).isEqual(Uo(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return nn(s.geoPointValue.latitude)===nn(a.geoPointValue.latitude)&&nn(s.geoPointValue.longitude)===nn(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return nn(s.integerValue)===nn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=nn(s.doubleValue),u=nn(a.doubleValue);return c===u?Mf(c)===Mf(u):isNaN(c)&&isNaN(u)}return!1}(n,e);case 9:return lc(n.arrayValue.values||[],e.arrayValue.values||[],qs);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},u=a.mapValue.fields||{};if(kE(c)!==kE(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!qs(c[h],u[h])))return!1;return!0}(n,e);default:return Xe(52216,{left:n})}}function Qu(n,e){return(n.values||[]).find(t=>qs(t,e))!==void 0}function cc(n,e){if(n===e)return 0;const t=$o(n),r=$o(e);if(t!==r)return at(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(n.booleanValue,e.booleanValue);case 2:return function(a,c){const u=nn(a.integerValue||a.doubleValue),h=nn(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return OE(n.timestampValue,e.timestampValue);case 4:return OE(Ku(n),Ku(e));case 5:return Rv(n.stringValue,e.stringValue);case 6:return function(a,c){const u=Uo(a),h=Uo(c);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const u=a.split("/"),h=c.split("/");for(let m=0;m<u.length&&m<h.length;m++){const g=at(u[m],h[m]);if(g!==0)return g}return at(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const u=at(nn(a.latitude),nn(c.latitude));return u!==0?u:at(nn(a.longitude),nn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return LE(n.arrayValue,e.arrayValue);case 10:return function(a,c){var u,h,m,g;const v=a.fields||{},y=c.fields||{},b=(u=v[Vf])===null||u===void 0?void 0:u.arrayValue,S=(h=y[Vf])===null||h===void 0?void 0:h.arrayValue,E=at(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((g=S==null?void 0:S.values)===null||g===void 0?void 0:g.length)||0);return E!==0?E:LE(b,S)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===Hh.mapValue&&c===Hh.mapValue)return 0;if(a===Hh.mapValue)return 1;if(c===Hh.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),m=c.fields||{},g=Object.keys(m);h.sort(),g.sort();for(let v=0;v<h.length&&v<g.length;++v){const y=Rv(h[v],g[v]);if(y!==0)return y;const b=cc(u[h[v]],m[g[v]]);if(b!==0)return b}return at(h.length,g.length)}(n.mapValue,e.mapValue);default:throw Xe(23264,{le:t})}}function OE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return at(n,e);const t=Vo(n),r=Vo(e),s=at(t.seconds,r.seconds);return s!==0?s:at(t.nanos,r.nanos)}function LE(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=cc(t[s],r[s]);if(a)return a}return at(t.length,r.length)}function uc(n){return Dv(n)}function Dv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Vo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Uo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Be.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Dv(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${Dv(t.fields[c])}`;return s+"}"}(n.mapValue):Xe(61005,{value:n})}function ff(n){switch($o(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bm(n);return e?16+ff(e):16;case 5:return 2*n.stringValue.length;case 6:return Uo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+ff(a),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Ho(r.fields,(a,c)=>{s+=a.length+ff(c)}),s}(n.mapValue);default:throw Xe(13486,{value:n})}}function ME(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ov(n){return!!n&&"integerValue"in n}function Ky(n){return!!n&&"arrayValue"in n}function FE(n){return!!n&&"nullValue"in n}function VE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mf(n){return!!n&&"mapValue"in n}function CV(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[oT])===null||t===void 0?void 0:t.stringValue)===aT}function Au(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ho(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Au(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Au(n.arrayValue.values[t]);return e}return Object.assign({},n)}function IV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===TV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(t)}setAll(e){let t=jn.emptyPath(),r={},s=[];e.forEach((c,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,s),r={},s=[],t=u.popLast()}c?r[u.lastSegment()]=Au(c):s.push(u.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];mf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ho(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new dr(Au(this.value))}}function lT(n){const e=[];return Ho(n.fields,(t,r)=>{const s=new jn([t]);if(mf(r)){const a=lT(r.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new Nr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,t,r,s,a,c,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Un(e,0,nt.min(),nt.min(),nt.min(),dr.empty(),0)}static newFoundDocument(e,t,r,s){return new Un(e,1,t,nt.min(),r,s,0)}static newNoDocument(e,t){return new Un(e,2,t,nt.min(),nt.min(),dr.empty(),0)}static newUnknownDocument(e,t){return new Un(e,3,t,nt.min(),nt.min(),dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this.position=e,this.inclusive=t}}function UE(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],c=n.position[s];if(a.field.isKeyField()?r=Be.comparator(Be.fromName(c.referenceValue),t.key):r=cc(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function $E(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t="asc"){this.field=e,this.dir=t}}function jV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{}class cn extends cT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new PV(e,t,r):t==="array-contains"?new DV(e,r):t==="in"?new OV(e,r):t==="not-in"?new LV(e,r):t==="array-contains-any"?new MV(e,r):new cn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new RV(e,r):new kV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cc(t,this.value)):t!==null&&$o(this.value)===$o(t)&&this.matchesComparison(cc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gs extends cT{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new gs(e,t)}matches(e){return uT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function uT(n){return n.op==="and"}function dT(n){return AV(n)&&uT(n)}function AV(n){for(const e of n.filters)if(e instanceof gs)return!1;return!0}function Lv(n){if(n instanceof cn)return n.field.canonicalString()+n.op.toString()+uc(n.value);if(dT(n))return n.filters.map(e=>Lv(e)).join(",");{const e=n.filters.map(t=>Lv(t)).join(",");return`${n.op}(${e})`}}function hT(n,e){return n instanceof cn?function(r,s){return s instanceof cn&&r.op===s.op&&r.field.isEqual(s.field)&&qs(r.value,s.value)}(n,e):n instanceof gs?function(r,s){return s instanceof gs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,c,u)=>a&&hT(c,s.filters[u]),!0):!1}(n,e):void Xe(19439)}function fT(n){return n instanceof cn?function(t){return`${t.field.canonicalString()} ${t.op} ${uc(t.value)}`}(n):n instanceof gs?function(t){return t.op.toString()+" {"+t.getFilters().map(fT).join(" ,")+"}"}(n):"Filter"}class PV extends cn{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class RV extends cn{constructor(e,t){super(e,"in",t),this.keys=mT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kV extends cn{constructor(e,t){super(e,"not-in",t),this.keys=mT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class DV extends cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ky(t)&&Qu(t.arrayValue,this.value)}}class OV extends cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Qu(this.value.arrayValue,t)}}class LV extends cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Qu(this.value.arrayValue,t)}}class MV extends cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ky(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Qu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,t=null,r=[],s=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=u,this.Pe=null}}function zE(n,e=null,t=[],r=[],s=null,a=null,c=null){return new FV(n,e,t,r,s,a,c)}function Gy(n){const e=rt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Lv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Em(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>uc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>uc(r)).join(",")),e.Pe=t}return e.Pe}function Qy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$E(n.startAt,e.startAt)&&$E(n.endAt,e.endAt)}function Mv(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t=null,r=[],s=[],a=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function VV(n,e,t,r,s,a,c,u){return new Wa(n,e,t,r,s,a,c,u)}function Yy(n){return new Wa(n)}function BE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pT(n){return n.collectionGroup!==null}function Pu(n){const e=rt(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new gn(jn.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(m=>{m.isInequality()&&(u=u.add(m.field))})}),u})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Yu(a,r))}),t.has(jn.keyField().canonicalString())||e.Te.push(new Yu(jn.keyField(),r))}return e.Te}function Fs(n){const e=rt(n);return e.Ie||(e.Ie=UV(e,Pu(n))),e.Ie}function UV(n,e){if(n.limitType==="F")return zE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Yu(s.field,a)});const t=n.endAt?new Uf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Uf(n.startAt.position,n.startAt.inclusive):null;return zE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Fv(n,e){const t=n.filters.concat([e]);return new Wa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vv(n,e,t){return new Wa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sm(n,e){return Qy(Fs(n),Fs(e))&&n.limitType===e.limitType}function gT(n){return`${Gy(Fs(n))}|lt:${n.limitType}`}function Ml(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>fT(s)).join(", ")}]`),Em(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>uc(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>uc(s)).join(",")),`Target(${r})`}(Fs(n))}; limitType=${n.limitType})`}function Nm(n,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Be.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,s){for(const a of Pu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(c,u,h){const m=UE(c,u,h);return c.inclusive?m<=0:m<0}(r.startAt,Pu(r),s)||r.endAt&&!function(c,u,h){const m=UE(c,u,h);return c.inclusive?m>=0:m>0}(r.endAt,Pu(r),s))}(n,e)}function $V(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vT(n){return(e,t)=>{let r=!1;for(const s of Pu(n)){const a=zV(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function zV(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(a,c,u){const h=c.data.field(a),m=u.data.field(a);return h!==null&&m!==null?cc(h,m):Xe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ho(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return eT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=new Xt(Be.comparator);function Ci(){return BV}const yT=new Xt(Be.comparator);function xu(...n){let e=yT;for(const t of n)e=e.insert(t.key,t);return e}function xT(n){let e=yT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xa(){return Ru()}function wT(){return Ru()}function Ru(){return new Ha(n=>n.toString(),(n,e)=>n.isEqual(e))}const qV=new Xt(Be.comparator),WV=new gn(Be.comparator);function dt(...n){let e=WV;for(const t of n)e=e.add(t);return e}const HV=new gn(at);function KV(){return HV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mf(e)?"-0":e}}function _T(n){return{integerValue:""+n}}function GV(n,e){return _V(e)?_T(e):Xy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this._=void 0}}function QV(n,e,t){return n instanceof $f?function(s,a){const c={fields:{[rT]:{stringValue:nT},[iT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Hy(a)&&(a=bm(a)),a&&(c.fields[sT]=a),{mapValue:c}}(t,e):n instanceof Xu?bT(n,e):n instanceof Ju?ST(n,e):function(s,a){const c=ET(s,a),u=qE(c)+qE(s.Ee);return Ov(c)&&Ov(s.Ee)?_T(u):Xy(s.serializer,u)}(n,e)}function YV(n,e,t){return n instanceof Xu?bT(n,e):n instanceof Ju?ST(n,e):t}function ET(n,e){return n instanceof zf?function(r){return Ov(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class $f extends Tm{}class Xu extends Tm{constructor(e){super(),this.elements=e}}function bT(n,e){const t=NT(e);for(const r of n.elements)t.some(s=>qs(s,r))||t.push(r);return{arrayValue:{values:t}}}class Ju extends Tm{constructor(e){super(),this.elements=e}}function ST(n,e){let t=NT(e);for(const r of n.elements)t=t.filter(s=>!qs(s,r));return{arrayValue:{values:t}}}class zf extends Tm{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function qE(n){return nn(n.integerValue||n.doubleValue)}function NT(n){return Ky(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function XV(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Xu&&s instanceof Xu||r instanceof Ju&&s instanceof Ju?lc(r.elements,s.elements,qs):r instanceof zf&&s instanceof zf?qs(r.Ee,s.Ee):r instanceof $f&&s instanceof $f}(n.transform,e.transform)}class JV{constructor(e,t){this.version=e,this.transformResults=t}}class hs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hs}static exists(e){return new hs(void 0,e)}static updateTime(e){return new hs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Cm{}function TT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Jy(n.key,hs.none()):new fd(n.key,n.data,hs.none());{const t=n.data,r=dr.empty();let s=new gn(jn.comparator);for(let a of e.fields)if(!s.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),s=s.add(a)}return new Ko(n.key,r,new Nr(s.toArray()),hs.none())}}function ZV(n,e,t){n instanceof fd?function(s,a,c){const u=s.value.clone(),h=HE(s.fieldTransforms,a,c.transformResults);u.setAll(h),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Ko?function(s,a,c){if(!pf(s.precondition,a))return void a.convertToUnknownDocument(c.version);const u=HE(s.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(CT(s)),h.setAll(u),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function ku(n,e,t,r){return n instanceof fd?function(a,c,u,h){if(!pf(a.precondition,c))return u;const m=a.value.clone(),g=KE(a.fieldTransforms,h,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ko?function(a,c,u,h){if(!pf(a.precondition,c))return u;const m=KE(a.fieldTransforms,h,c),g=c.data;return g.setAll(CT(a)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(a,c,u){return pf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(n,e,t)}function e3(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=ET(r.transform,s||null);a!=null&&(t===null&&(t=dr.empty()),t.set(r.field,a))}return t||null}function WE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&lc(r,s,(a,c)=>XV(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fd extends Cm{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ko extends Cm{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function CT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function HE(n,e,t){const r=new Map;Et(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],c=a.transform,u=e.data.field(a.field);r.set(a.field,YV(c,u,t[s]))}return r}function KE(n,e,t){const r=new Map;for(const s of n){const a=s.transform,c=t.data.field(s.field);r.set(s.field,QV(a,c,e))}return r}class Jy extends Cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class t3 extends Cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&ZV(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wT();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=t.has(s.key)?null:u;const h=TT(c,u);h!==null&&r.set(s.key,h),c.isValidDocument()||c.convertToNoDocument(nt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dt())}isEqual(e){return this.batchId===e.batchId&&lc(this.mutations,e.mutations,(t,r)=>WE(t,r))&&lc(this.baseMutations,e.baseMutations,(t,r)=>WE(t,r))}}class Zy{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Et(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return qV}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new Zy(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r3=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an,pt;function i3(n){switch(n){case ue.OK:return Xe(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Xe(15467,{code:n})}}function IT(n){if(n===void 0)return Ti("GRPC error has no .code"),ue.UNKNOWN;switch(n){case an.OK:return ue.OK;case an.CANCELLED:return ue.CANCELLED;case an.UNKNOWN:return ue.UNKNOWN;case an.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case an.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case an.INTERNAL:return ue.INTERNAL;case an.UNAVAILABLE:return ue.UNAVAILABLE;case an.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case an.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case an.NOT_FOUND:return ue.NOT_FOUND;case an.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case an.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case an.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case an.ABORTED:return ue.ABORTED;case an.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case an.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case an.DATA_LOSS:return ue.DATA_LOSS;default:return Xe(39323,{code:n})}}(pt=an||(an={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=new Io([4294967295,4294967295],0);function GE(n){const e=XN().encode(n),t=new qN;return t.update(e),new Uint8Array(t.digest())}function QE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Io([t,r],0),new Io([s,a],0)]}class ex{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wu(`Invalid padding: ${t}`);if(r<0)throw new wu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new wu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Io.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(Io.fromNumber(r)));return s.compare(o3)===1&&(s=new Io([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=GE(e),[r,s]=QE(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);if(!this.ye(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new ex(a,s,t);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const t=GE(e),[r,s]=QE(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,md.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Im(nt.min(),s,new Xt(at),Ci(),dt())}}class md{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new md(r,t,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class jT{constructor(e,t){this.targetId=e,this.De=t}}class AT{constructor(e,t,r=Pn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class YE{constructor(){this.ve=0,this.Ce=XE(),this.Fe=Pn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=dt(),t=dt(),r=dt();return this.Ce.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Xe(38017,{changeType:a})}}),new md(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=XE()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Et(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class a3{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ci(),this.je=Kh(),this.Je=Kh(),this.He=new Xt(at)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Xe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(Mv(a))if(r===0){const c=new Be(a.path);this.Xe(t,c,Un.newNoDocument(c,nt.min()))}else Et(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const u=this._t(e),h=u?this.ut(u,e,c):1;if(h!==0){this.rt(t);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let c,u;try{c=Uo(r).toUint8Array()}catch(h){if(h instanceof tT)return La("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new ex(c,s,a)}catch(h){return La(h instanceof wu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.fe===0?null:u}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach(a=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.Xe(t,a,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((a,c)=>{const u=this.st(c);if(u){if(a.current&&Mv(u.target)){const h=new Be(u.target.path);this.Tt(h).has(c)||this.It(c,h)||this.Xe(c,h,Un.newNoDocument(h,e))}a.Ne&&(t.set(c,a.Le()),a.ke())}});let r=dt();this.Je.forEach((a,c)=>{let u=!0;c.forEachWhile(h=>{const m=this.st(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const s=new Im(e,t,this.He,this.ze,r);return this.ze=Ci(),this.je=Kh(),this.Je=Kh(),this.He=new Xt(at),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new YE,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new gn(at),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new gn(at),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new YE),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Kh(){return new Xt(Be.comparator)}function XE(){return new Xt(Be.comparator)}const l3={asc:"ASCENDING",desc:"DESCENDING"},c3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u3={and:"AND",or:"OR"};class d3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Uv(n,e){return n.useProto3Json||Em(e)?e:{value:e}}function Bf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function h3(n,e){return Bf(n,e.toTimestamp())}function Vs(n){return Et(!!n,49232),nt.fromTimestamp(function(t){const r=Vo(t);return new $t(r.seconds,r.nanos)}(n))}function tx(n,e){return $v(n,e).canonicalString()}function $v(n,e){const t=function(s){return new jt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function RT(n){const e=jt.fromString(n);return Et(MT(e),10190,{key:e.toString()}),e}function zv(n,e){return tx(n.databaseId,e.path)}function Fg(n,e){const t=RT(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(DT(t))}function kT(n,e){return tx(n.databaseId,e)}function f3(n){const e=RT(n);return e.length===4?jt.emptyPath():DT(e)}function Bv(n){return new jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DT(n){return Et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function JE(n,e,t){return{name:zv(n,e),fields:t.value.mapValue.fields}}function m3(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Xe(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(m,g){return m.useProto3Json?(Et(g===void 0||typeof g=="string",58123),Pn.fromBase64String(g||"")):(Et(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Pn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(m){const g=m.code===void 0?ue.UNKNOWN:IT(m.code);return new Ie(g,m.message||"")}(c);t=new AT(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Fg(n,r.document.name),a=Vs(r.document.updateTime),c=r.document.createTime?Vs(r.document.createTime):nt.min(),u=new dr({mapValue:{fields:r.document.fields}}),h=Un.newFoundDocument(s,a,c,u),m=r.targetIds||[],g=r.removedTargetIds||[];t=new gf(m,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Fg(n,r.document),a=r.readTime?Vs(r.readTime):nt.min(),c=Un.newNoDocument(s,a),u=r.removedTargetIds||[];t=new gf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Fg(n,r.document),a=r.removedTargetIds||[];t=new gf([],a,s,null)}else{if(!("filter"in e))return Xe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,c=new s3(s,a),u=r.targetId;t=new jT(u,c)}}return t}function p3(n,e){let t;if(e instanceof fd)t={update:JE(n,e.key,e.value)};else if(e instanceof Jy)t={delete:zv(n,e.key)};else if(e instanceof Ko)t={update:JE(n,e.key,e.data),updateMask:S3(e.fieldMask)};else{if(!(e instanceof t3))return Xe(16599,{Rt:e.type});t={verify:zv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const u=c.transform;if(u instanceof $f)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Xu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ju)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof zf)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw Xe(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:h3(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Xe(27497)}(n,e.precondition)),t}function g3(n,e){return n&&n.length>0?(Et(e!==void 0,14353),n.map(t=>function(s,a){let c=s.updateTime?Vs(s.updateTime):Vs(a);return c.isEqual(nt.min())&&(c=Vs(a)),new JV(c,s.transformResults||[])}(t,e))):[]}function v3(n,e){return{documents:[kT(n,e.path)]}}function y3(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kT(n,s);const a=function(m){if(m.length!==0)return LT(gs.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(m){if(m.length!==0)return m.map(g=>function(y){return{field:Fl(y.field),direction:_3(y.dir)}}(g))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=Uv(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{Vt:t,parent:s}}function x3(n){let e=f3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Et(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=function(v){const y=OT(v);return y instanceof gs&&dT(y)?y.getFilters():[y]}(t.where));let c=[];t.orderBy&&(c=function(v){return v.map(y=>function(S){return new Yu(Vl(S.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(t.orderBy));let u=null;t.limit&&(u=function(v){let y;return y=typeof v=="object"?v.value:v,Em(y)?null:y}(t.limit));let h=null;t.startAt&&(h=function(v){const y=!!v.before,b=v.values||[];return new Uf(b,y)}(t.startAt));let m=null;return t.endAt&&(m=function(v){const y=!v.before,b=v.values||[];return new Uf(b,y)}(t.endAt)),VV(e,s,c,a,u,"F",h,m)}function w3(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function OT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Vl(t.unaryFilter.field);return cn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Vl(t.unaryFilter.field);return cn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Vl(t.unaryFilter.field);return cn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Vl(t.unaryFilter.field);return cn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xe(61313);default:return Xe(60726)}}(n):n.fieldFilter!==void 0?function(t){return cn.create(Vl(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xe(58110);default:return Xe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return gs.create(t.compositeFilter.filters.map(r=>OT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Xe(1026)}}(t.compositeFilter.op))}(n):Xe(30097,{filter:n})}function _3(n){return l3[n]}function E3(n){return c3[n]}function b3(n){return u3[n]}function Fl(n){return{fieldPath:n.canonicalString()}}function Vl(n){return jn.fromServerFormat(n.fieldPath)}function LT(n){return n instanceof cn?function(t){if(t.op==="=="){if(VE(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NAN"}};if(FE(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(VE(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NOT_NAN"}};if(FE(t.value))return{unaryFilter:{field:Fl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fl(t.field),op:E3(t.op),value:t.value}}}(n):n instanceof gs?function(t){const r=t.getFilters().map(s=>LT(s));return r.length===1?r[0]:{compositeFilter:{op:b3(t.op),filters:r}}}(n):Xe(54877,{filter:n})}function S3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function MT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,t,r,s,a=nt.min(),c=nt.min(),u=Pn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Eo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Eo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.gt=e}}function T3(n){const e=x3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(){this.Dn=new I3}addToCollectionParentIndex(e,t){return this.Dn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Fo.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Fo.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class I3{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new gn(jt.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new gn(jt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FT=41943040;class ur{static withCacheSize(e){return new ur(e,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(FT,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new dc(0)}static ur(){return new dc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="LruGarbageCollector",VT=1048576;function tb([n,e],[t,r]){const s=at(n,t);return s===0?at(e,r):s}class j3{constructor(e){this.Tr=e,this.buffer=new gn(tb),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class A3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Re(eb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ic(t)?Re(eb,"Ignoring IndexedDB error during garbage collection: ",t):await Cc(t)}await this.Rr(3e5)})}}class P3{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return he.resolve(_m.ue);const r=new j3(t);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(ZE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZE):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,c,u,h,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,t))).next(v=>(a=v,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(m=Date.now(),Ll()<=ut.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${v} documents in `+(m-h)+`ms
Total Duration: ${m-g}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v})))}}function R3(n,e){return new P3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this.changes=new Ha(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&ku(r.mutation,s,Nr.empty(),$t.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,dt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=dt()){const s=xa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let c=xu();return a.forEach((u,h)=>{c=c.insert(u,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=xa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,dt()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,u)=>{t.set(c,u)})})}computeViews(e,t,r,s){let a=Ci();const c=Ru(),u=function(){return Ru()}();return t.forEach((h,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof Ko)?a=a.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),ku(g.mutation,m,g.mutation.getFieldMask(),$t.now())):c.set(m.key,Nr.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((m,g)=>c.set(m,g)),t.forEach((m,g)=>{var v;return u.set(m,new D3(g,(v=c.get(m))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,t){const r=Ru();let s=new Xt((c,u)=>c-u),a=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const u of c)u.keys().forEach(h=>{const m=t.get(h);if(m===null)return;let g=r.get(h)||Nr.empty();g=u.applyToLocalView(m,g),r.set(h,g);const v=(s.get(u.batchId)||dt()).add(h);s=s.insert(u.batchId,v)})}).next(()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),m=h.key,g=h.value,v=wT();g.forEach(y=>{if(!a.has(y)){const b=TT(t.get(y),r.get(y));b!==null&&v.set(y,b),a=a.add(y)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,v))}return he.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(c){return Be.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):he.resolve(xa());let u=Hu,h=a;return c.next(m=>he.forEach(m,(g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),a.get(g)?he.resolve():this.remoteDocumentCache.getEntry(e,g).next(y=>{h=h.insert(g,y)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,h,m,dt())).next(g=>({batchId:u,changes:xT(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let s=xu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let c=xu();return this.indexManager.getCollectionParents(e,a).next(u=>he.forEach(u,h=>{const m=function(v,y){return new Wa(y,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(g=>{g.forEach((v,y)=>{c=c.insert(v,y)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s))).next(c=>{a.forEach((h,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,Un.newInvalidDocument(g)))});let u=xu();return c.forEach((h,m)=>{const g=a.get(h);g!==void 0&&ku(g.mutation,m,Nr.empty(),$t.now()),Nm(t,m)&&(u=u.insert(h,m))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return he.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Vs(s.createTime)}}(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:T3(s.bundledQuery),readTime:Vs(s.readTime)}}(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.overlays=new Xt(Be.comparator),this.kr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=xa();return he.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.wt(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const s=xa(),a=t.length+1,c=new Be(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,m=h.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&h.largestBatchId>r&&s.set(h.getKey(),h)}return he.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Xt((m,g)=>m-g);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=a.get(m.largestBatchId);g===null&&(g=xa(),a=a.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const u=xa(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((m,g)=>u.set(m,g)),!(u.size()>=s)););return he.resolve(u)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new r3(t,r));let a=this.kr.get(t);a===void 0&&(a=dt(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.qr=new gn(En.Qr),this.$r=new gn(En.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new En(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new En(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new Be(new jt([])),r=new En(t,e),s=new En(t,e+1),a=[];return this.$r.forEachInRange([r,s],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Be(new jt([])),r=new En(t,e),s=new En(t,e+1);let a=dt();return this.$r.forEachInRange([r,s],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new En(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class En{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Be.comparator(e.key,t.key)||at(e.Hr,t.Hr)}static Ur(e,t){return at(e.Hr,t.Hr)||Be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new gn(En.Qr)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new n3(a,t,r,s);this.mutationQueue.push(c);for(const u of s)this.Yr=this.Yr.add(new En(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?Wy:this.er-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new En(t,0),s=new En(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],c=>{const u=this.Zr(c.Hr);a.push(u)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(at);return t.forEach(s=>{const a=new En(s,0),c=new En(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],u=>{r=r.add(u.Hr)})}),he.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;Be.isDocumentKey(a)||(a=a.child(""));const c=new En(new Be(a),0);let u=new gn(at);return this.Yr.forEachWhile(h=>{const m=h.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(u=u.add(h.Hr)),!0)},c),he.resolve(this.ei(u))}ei(e){const t=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Et(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return he.forEach(t.mutations,s=>{const a=new En(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new En(t,0),s=this.Yr.firstAfterOrEqual(r);return he.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.ni=e,this.docs=function(){return new Xt(Be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Un.newInvalidDocument(t))}getEntries(e,t){let r=Ci();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Un.newInvalidDocument(s))}),he.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Ci();const c=t.path,u=new Be(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:g}}=h.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||vV(gV(g),r)<=0||(s.has(g.key)||Nm(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return he.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Xe(9500)}ri(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $3(this)}getSize(e){return he.resolve(this.size)}}class $3 extends k3{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.persistence=e,this.ii=new Ha(t=>Gy(t),Qy),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.si=0,this.oi=new nx,this.targetCount=0,this._i=dc.ar()}forEachTarget(e,t){return this.ii.forEach((r,s)=>t(s)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),he.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new dc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.hr(t),he.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),he.waitFor(a).next(()=>s)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,t){this.ai={},this.overlays={},this.ui=new _m(0),this.ci=!1,this.ci=!0,this.li=new F3,this.referenceDelegate=e(this),this.hi=new z3(this),this.indexManager=new C3,this.remoteDocumentCache=function(s){return new U3(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new N3(t),this.Ti=new L3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new M3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new V3(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const s=new B3(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,t){return he.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class B3 extends xV{constructor(e){super(),this.currentSequenceNumber=e}}class rx{constructor(e){this.persistence=e,this.Ai=new nx,this.Ri=null}static Vi(e){return new rx(e)}get mi(){if(this.Ri)return this.Ri;throw Xe(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.mi,r=>{const s=Be.fromPath(r);return this.fi(e,s).next(a=>{a||t.removeEntry(s,nt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return he.or([()=>he.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class qf{constructor(e,t){this.persistence=e,this.gi=new Ha(r=>EV(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=R3(this,t)}static Vi(e,t){return new qf(e,t)}Ii(){}di(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return he.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(a=>a?he.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,c=>this.Sr(e,c,t).next(u=>{u||(r++,a.removeEntry(c,nt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),he.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ff(e.data.value)),t}Sr(e,t,r){return he.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return he.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=dt(),s=dt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new sx(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return NL()?8:wV(Bn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,t,s,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new q3;return this.ws(e,t,c).next(u=>{if(a.result=u,this.Rs)return this.Ss(e,t,c,u.size)})}).next(()=>a.result)}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Ll()<=ut.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Ml(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),he.resolve()):(Ll()<=ut.DEBUG&&Re("QueryEngine","Query:",Ml(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ll()<=ut.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Ml(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fs(t))):he.resolve())}ps(e,t){if(BE(t))return he.resolve(null);let r=Fs(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Vv(t,null,"F"),r=Fs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=dt(...a);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const m=this.bs(t,u);return this.Ds(t,m,c,h.readTime)?this.ps(e,Vv(t,null,"F")):this.vs(e,m,t,h)}))})))}ys(e,t,r,s){return BE(t)||s.isEqual(nt.min())?he.resolve(null):this.gs.getDocuments(e,r).next(a=>{const c=this.bs(t,a);return this.Ds(t,c,r,s)?he.resolve(null):(Ll()<=ut.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ml(t)),this.vs(e,c,t,pV(s,Hu)).next(u=>u))})}bs(e,t){let r=new gn(vT(e));return t.forEach((s,a)=>{Nm(e,a)&&(r=r.add(a))}),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return Ll()<=ut.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Ml(t)),this.gs.getDocumentsMatchingQuery(e,t,Fo.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="LocalStore",H3=3e8;class K3{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new Xt(at),this.Ms=new Ha(a=>Gy(a),Qy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O3(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function G3(n,e,t,r){return new K3(n,e,t,r)}async function $T(n,e){const t=rt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],u=[];let h=dt();for(const m of s){c.push(m.batchId);for(const g of m.mutations)h=h.add(g.key)}for(const m of a){u.push(m.batchId);for(const g of m.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next(m=>({Bs:m,removedBatchIds:c,addedBatchIds:u}))})})}function Q3(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(u,h,m,g){const v=m.batch,y=v.keys();let b=he.resolve();return y.forEach(S=>{b=b.next(()=>g.getEntry(h,S)).next(E=>{const x=m.docVersions.get(S);Et(x!==null,48541),E.version.compareTo(x)<0&&(v.applyToRemoteDocument(E,m),E.isValidDocument()&&(E.setReadTime(m.commitVersion),g.addEntry(E)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(h,v))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=dt();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(h=h.add(u.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function zT(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Y3(n,e){const t=rt(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const u=[];e.targetChanges.forEach((g,v)=>{const y=s.get(v);if(!y)return;u.push(t.hi.removeMatchingKeys(a,g.removedDocuments,v).next(()=>t.hi.addMatchingKeys(a,g.addedDocuments,v)));let b=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(Pn.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),s=s.insert(v,b),function(E,x,A){return E.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=H3?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(y,b,g)&&u.push(t.hi.updateTargetData(a,b))});let h=Ci(),m=dt();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))}),u.push(X3(a,c,e.documentUpdates).next(g=>{h=g.Ls,m=g.ks})),!r.isEqual(nt.min())){const g=t.hi.getLastRemoteSnapshotVersion(a).next(v=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(g)}return he.waitFor(u).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,h,m)).next(()=>h)}).then(a=>(t.Fs=s,a))}function X3(n,e,t){let r=dt(),s=dt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Ci();return t.forEach((u,h)=>{const m=a.get(u);h.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(nt.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||h.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):Re(ix,"Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",h.version)}),{Ls:c,ks:s}})}function J3(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Wy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Z3(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.hi.getTargetData(r,e).next(a=>a?(s=a,he.resolve(s)):t.hi.allocateTargetId(r).next(c=>(s=new Eo(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function qv(n,e,t){const r=rt(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!Ic(c))throw c;Re(ix,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function nb(n,e,t){const r=rt(n);let s=nt.min(),a=dt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,m,g){const v=rt(h),y=v.Ms.get(g);return y!==void 0?he.resolve(v.Fs.get(y)):v.hi.getTargetData(m,g)}(r,c,Fs(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(h=>{a=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,t?s:nt.min(),t?a:dt())).next(u=>(eU(r,$V(e),u),{documents:u,qs:a})))}function eU(n,e,t){let r=n.xs.get(e)||nt.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(e,r)}class rb{constructor(){this.activeTargetIds=KV()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tU{constructor(){this.Fo=new rb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new rb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="ConnectivityMonitor";class ib{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Re(sb,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Re(sb,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh=null;function Wv(){return Gh===null?Gh=function(){return 268435456+Math.round(2147483648*Math.random())}():Gh++,"0x"+Gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="RestConnection",rU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sU{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Ff?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const c=Wv(),u=this.Go(e,t.toUriEncodedString());Re(Vg,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,a);const{host:m}=new URL(u),g=za(m);return this.jo(e,u,h,r,g).then(v=>(Re(Vg,`Received RPC '${e}' ${c}: `,v),v),v=>{throw La(Vg,`RPC '${e}' ${c} failed with error: `,v,"url: ",u,"request:",r),v})}Jo(e,t,r,s,a,c){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Tc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Go(e,t){const r=rU[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="WebChannelConnection";class oU extends sU{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const c=Wv();return new Promise((u,h)=>{const m=new WN;m.setWithCredentials(!0),m.listenOnce(HN.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case hf.NO_ERROR:const v=m.getResponseJson();Re(Fn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),u(v);break;case hf.TIMEOUT:Re(Fn,`RPC '${e}' ${c} timed out`),h(new Ie(ue.DEADLINE_EXCEEDED,"Request time out"));break;case hf.HTTP_ERROR:const y=m.getStatus();if(Re(Fn,`RPC '${e}' ${c} failed with status:`,y,"response text:",m.getResponseText()),y>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b==null?void 0:b.error;if(S&&S.status&&S.message){const E=function(A){const I=A.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(I)>=0?I:ue.UNKNOWN}(S.status);h(new Ie(E,S.message))}else h(new Ie(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Ie(ue.UNAVAILABLE,"Connection failed."));break;default:Xe(9055,{c_:e,streamId:c,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{Re(Fn,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(s);Re(Fn,`RPC '${e}' ${c} sending request:`,s),m.send(t,"POST",g,r,15)})}P_(e,t,r){const s=Wv(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=QN(),u=GN(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=a.join("");Re(Fn,`Creating RPC '${e}' stream ${s}: ${g}`,h);const v=c.createWebChannel(g,h);this.T_(v);let y=!1,b=!1;const S=new iU({Ho:x=>{b?Re(Fn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(y||(Re(Fn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),y=!0),Re(Fn,`RPC '${e}' stream ${s} sending:`,x),v.send(x))},Yo:()=>v.close()}),E=(x,A,I)=>{x.listen(A,C=>{try{I(C)}catch(L){setTimeout(()=>{throw L},0)}})};return E(v,yu.EventType.OPEN,()=>{b||(Re(Fn,`RPC '${e}' stream ${s} transport opened.`),S.s_())}),E(v,yu.EventType.CLOSE,()=>{b||(b=!0,Re(Fn,`RPC '${e}' stream ${s} transport closed`),S.__(),this.I_(v))}),E(v,yu.EventType.ERROR,x=>{b||(b=!0,La(Fn,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),S.__(new Ie(ue.UNAVAILABLE,"The operation could not be completed")))}),E(v,yu.EventType.MESSAGE,x=>{var A;if(!b){const I=x.data[0];Et(!!I,16349);const C=I,L=(C==null?void 0:C.error)||((A=C[0])===null||A===void 0?void 0:A.error);if(L){Re(Fn,`RPC '${e}' stream ${s} received error:`,L);const V=L.status;let q=function(D){const k=an[D];if(k!==void 0)return IT(k)}(V),P=L.message;q===void 0&&(q=ue.INTERNAL,P="Unknown error status: "+V+" with message "+L.message),b=!0,S.__(new Ie(q,P)),v.close()}else Re(Fn,`RPC '${e}' stream ${s} received:`,I),S.a_(I)}}),E(u,KN.STAT_EVENT,x=>{x.stat===Pv.PROXY?Re(Fn,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Pv.NOPROXY&&Re(Fn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Ug(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(n){return new d3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&Re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="PersistentStream";class qT{constructor(e,t,r,s,a,c,u,h){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new BT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Ti(t.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===t&&this.W_(r,s)},r=>{e(()=>{const s=new Ie(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Re(ob,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Re(ob,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aU extends qT{constructor(e,t,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=m3(this.serializer,e),r=function(a){if(!("targetChange"in a))return nt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?nt.min():c.readTime?Vs(c.readTime):nt.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Bv(this.serializer),t.addTarget=function(a,c){let u;const h=c.target;if(u=Mv(h)?{documents:v3(a,h)}:{query:y3(a,h).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=PT(a,c.resumeToken);const m=Uv(a,c.expectedCount);m!==null&&(u.expectedCount=m)}else if(c.snapshotVersion.compareTo(nt.min())>0){u.readTime=Bf(a,c.snapshotVersion.toTimestamp());const m=Uv(a,c.expectedCount);m!==null&&(u.expectedCount=m)}return u}(this.serializer,e);const r=w3(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Bv(this.serializer),t.removeTarget=e,this.k_(t)}}class lU extends qT{constructor(e,t,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=g3(e.writeResults,e.commitTime),r=Vs(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Bv(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>p3(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{}class uU extends cU{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Ie(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,$v(t,r),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ie(ue.UNKNOWN,a.toString())})}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,$v(t,r),s,c,u,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ie(ue.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class dU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ti(t),this._a=!1):Re("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="RemoteStore";class hU{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{Ka(this)&&(Re(Ma,"Restarting streams for network reachability change."),await async function(h){const m=rt(h);m.Ia.add(4),await pd(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Am(m)}(this))})}),this.Aa=new dU(r,s)}}async function Am(n){if(Ka(n))for(const e of n.da)await e(!0)}async function pd(n){for(const e of n.da)await e(!1)}function WT(n,e){const t=rt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),cx(t)?lx(t):jc(t).x_()&&ax(t,e))}function ox(n,e){const t=rt(n),r=jc(t);t.Ta.delete(e),r.x_()&&HT(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ka(t)&&t.Aa.set("Unknown"))}function ax(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jc(n).H_(e)}function HT(n,e){n.Ra.$e(e),jc(n).Y_(e)}function lx(n){n.Ra=new a3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),jc(n).start(),n.Aa.aa()}function cx(n){return Ka(n)&&!jc(n).M_()&&n.Ta.size>0}function Ka(n){return rt(n).Ia.size===0}function KT(n){n.Ra=void 0}async function fU(n){n.Aa.set("Online")}async function mU(n){n.Ta.forEach((e,t)=>{ax(n,e)})}async function pU(n,e){KT(n),cx(n)?(n.Aa.la(e),lx(n)):n.Aa.set("Unknown")}async function gU(n,e,t){if(n.Aa.set("Online"),e instanceof AT&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const u of a.targetIds)s.Ta.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ta.delete(u),s.Ra.removeTarget(u))}(n,e)}catch(r){Re(Ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wf(n,r)}else if(e instanceof gf?n.Ra.Ye(e):e instanceof jT?n.Ra.it(e):n.Ra.et(e),!t.isEqual(nt.min()))try{const r=await zT(n.localStore);t.compareTo(r)>=0&&await function(a,c){const u=a.Ra.Pt(c);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const g=a.Ta.get(m);g&&a.Ta.set(m,g.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach((h,m)=>{const g=a.Ta.get(h);if(!g)return;a.Ta.set(h,g.withResumeToken(Pn.EMPTY_BYTE_STRING,g.snapshotVersion)),HT(a,h);const v=new Eo(g.target,h,m,g.sequenceNumber);ax(a,v)}),a.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){Re(Ma,"Failed to raise snapshot:",r),await Wf(n,r)}}async function Wf(n,e,t){if(!Ic(e))throw e;n.Ia.add(1),await pd(n),n.Aa.set("Offline"),t||(t=()=>zT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Re(Ma,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Am(n)})}function GT(n,e){return e().catch(t=>Wf(n,t,e))}async function Pm(n){const e=rt(n),t=zo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Wy;for(;vU(e);)try{const s=await J3(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,yU(e,s)}catch(s){await Wf(e,s)}QT(e)&&YT(e)}function vU(n){return Ka(n)&&n.Pa.length<10}function yU(n,e){n.Pa.push(e);const t=zo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function QT(n){return Ka(n)&&!zo(n).M_()&&n.Pa.length>0}function YT(n){zo(n).start()}async function xU(n){zo(n).na()}async function wU(n){const e=zo(n);for(const t of n.Pa)e.X_(t.mutations)}async function _U(n,e,t){const r=n.Pa.shift(),s=Zy.from(r,e,t);await GT(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Pm(n)}async function EU(n,e){e&&zo(n).Z_&&await async function(r,s){if(function(c){return i3(c)&&c!==ue.ABORTED}(s.code)){const a=r.Pa.shift();zo(r).N_(),await GT(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Pm(r)}}(n,e),QT(n)&&YT(n)}async function ab(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),Re(Ma,"RemoteStore received new credentials");const r=Ka(t);t.Ia.add(3),await pd(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Am(t)}async function bU(n,e){const t=rt(n);e?(t.Ia.delete(2),await Am(t)):e||(t.Ia.add(2),await pd(t),t.Aa.set("Unknown"))}function jc(n){return n.Va||(n.Va=function(t,r,s){const a=rt(t);return a.ia(),new aU(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:fU.bind(null,n),e_:mU.bind(null,n),n_:pU.bind(null,n),J_:gU.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),cx(n)?lx(n):n.Aa.set("Unknown")):(await n.Va.stop(),KT(n))})),n.Va}function zo(n){return n.ma||(n.ma=function(t,r,s){const a=rt(t);return a.ia(),new lU(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:xU.bind(null,n),n_:EU.bind(null,n),ea:wU.bind(null,n),ta:_U.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Pm(n)):(await n.ma.stop(),n.Pa.length>0&&(Re(Ma,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const c=Date.now()+r,u=new ux(e,t,c,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dx(n,e){if(Ti("AsyncQueue",`${e}: ${n}`),Ic(n))return new Ie(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{static emptySet(e){return new Hl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=xu(),this.sortedSet=new Xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Hl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(){this.fa=new Xt(Be.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Xe(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class hc{constructor(e,t,r,s,a,c,u,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const c=[];return t.forEach(u=>{c.push({type:0,doc:u})}),new hc(e,t,Hl.emptySet(t),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class NU{constructor(){this.queries=cb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=rt(t),a=s.queries;s.queries=cb(),a.forEach((c,u)=>{for(const h of u.wa)h.onError(r)})})(this,new Ie(ue.ABORTED,"Firestore shutting down"))}}function cb(){return new Ha(n=>gT(n),Sm)}async function XT(n,e){const t=rt(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new SU,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=dx(c,`Initialization of query '${Ml(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&hx(t)}async function JT(n,e){const t=rt(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function TU(n,e){const t=rt(n);let r=!1;for(const s of e){const a=s.query,c=t.queries.get(a);if(c){for(const u of c.wa)u.Ca(s)&&(r=!0);c.ya=s}}r&&hx(t)}function CU(n,e,t){const r=rt(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function hx(n){n.Da.forEach(e=>{e.next()})}var Hv,ub;(ub=Hv||(Hv={})).Fa="default",ub.Cache="cache";class ZT{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new hc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=hc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Hv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.key=e}}class tC{constructor(e){this.key=e}}class IU{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=dt(),this.mutatedKeys=dt(),this.Xa=vT(e),this.eu=new Hl(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new lb,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,v)=>{const y=s.get(g),b=Nm(this.query,v)?v:null,S=!!y&&this.mutatedKeys.has(y.key),E=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let x=!1;y&&b?y.data.isEqual(b.data)?S!==E&&(r.track({type:3,doc:b}),x=!0):this.iu(y,b)||(r.track({type:2,doc:b}),x=!0,(h&&this.Xa(b,h)>0||m&&this.Xa(b,m)<0)&&(u=!0)):!y&&b?(r.track({type:0,doc:b}),x=!0):y&&!b&&(r.track({type:1,doc:y}),x=!0,(h||m)&&(u=!0)),x&&(b?(c=c.add(b),a=E?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:u,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,v)=>function(b,S){const E=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe(20277,{At:x})}};return E(b)-E(S)}(g.type,v.type)||this.Xa(g.doc,v.doc)),this.su(r),s=s!=null&&s;const u=t&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,m=h!==this.Ya;return this.Ya=h,c.length!==0||m?{snapshot:new hc(this.query,e.eu,a,c,e.mutatedKeys,h===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new lb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=dt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new tC(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new eC(r))}),t}uu(e){this.Ha=e.qs,this.Za=dt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return hc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const fx="SyncEngine";class jU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class AU{constructor(e){this.key=e,this.lu=!1}}class PU{constructor(e,t,r,s,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Ha(u=>gT(u),Sm),this.Tu=new Map,this.Iu=new Set,this.du=new Xt(Be.comparator),this.Eu=new Map,this.Au=new nx,this.Ru={},this.Vu=new Map,this.mu=dc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function RU(n,e,t=!0){const r=aC(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await nC(r,e,t,!0),s}async function kU(n,e){const t=aC(n);await nC(t,e,!0,!1)}async function nC(n,e,t,r){const s=await Z3(n.localStore,Fs(e)),a=s.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let u;return r&&(u=await DU(n,e,a,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&WT(n.remoteStore,s),u}async function DU(n,e,t,r,s){n.gu=(v,y,b)=>async function(E,x,A,I){let C=x.view.nu(A);C.Ds&&(C=await nb(E.localStore,x.query,!1).then(({documents:P})=>x.view.nu(P,C)));const L=I&&I.targetChanges.get(x.targetId),V=I&&I.targetMismatches.get(x.targetId)!=null,q=x.view.applyChanges(C,E.isPrimaryClient,L,V);return hb(E,x.targetId,q._u),q.snapshot}(n,v,y,b);const a=await nb(n.localStore,e,!0),c=new IU(e,a.qs),u=c.nu(a.documents),h=md.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=c.applyChanges(u,n.isPrimaryClient,h);hb(n,t,m._u);const g=new jU(e,t,c);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function OU(n,e,t){const r=rt(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter(c=>!Sm(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await qv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&ox(r.remoteStore,s.targetId),Kv(r,s.targetId)}).catch(Cc)):(Kv(r,s.targetId),await qv(r.localStore,s.targetId,!0))}async function LU(n,e){const t=rt(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ox(t.remoteStore,r.targetId))}async function MU(n,e,t){const r=qU(n);try{const s=await function(c,u){const h=rt(c),m=$t.now(),g=u.reduce((b,S)=>b.add(S.key),dt());let v,y;return h.persistence.runTransaction("Locally write mutations","readwrite",b=>{let S=Ci(),E=dt();return h.Os.getEntries(b,g).next(x=>{S=x,S.forEach((A,I)=>{I.isValidDocument()||(E=E.add(A))})}).next(()=>h.localDocuments.getOverlayedDocuments(b,S)).next(x=>{v=x;const A=[];for(const I of u){const C=e3(I,v.get(I.key).overlayedDocument);C!=null&&A.push(new Ko(I.key,C,lT(C.value.mapValue),hs.exists(!0)))}return h.mutationQueue.addMutationBatch(b,m,A,u)}).next(x=>{y=x;const A=x.applyToLocalDocumentSet(v,E);return h.documentOverlayCache.saveOverlays(b,x.batchId,A)})}).then(()=>({batchId:y.batchId,changes:xT(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,h){let m=c.Ru[c.currentUser.toKey()];m||(m=new Xt(at)),m=m.insert(u,h),c.Ru[c.currentUser.toKey()]=m}(r,s.batchId,t),await gd(r,s.changes),await Pm(r.remoteStore)}catch(s){const a=dx(s,"Failed to persist write");t.reject(a)}}async function rC(n,e){const t=rt(n);try{const r=await Y3(t.localStore,e);e.targetChanges.forEach((s,a)=>{const c=t.Eu.get(a);c&&(Et(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.lu=!0:s.modifiedDocuments.size>0?Et(c.lu,14607):s.removedDocuments.size>0&&(Et(c.lu,42227),c.lu=!1))}),await gd(t,r,e)}catch(r){await Cc(r)}}function db(n,e,t){const r=rt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach((a,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(c,u){const h=rt(c);h.onlineState=u;let m=!1;h.queries.forEach((g,v)=>{for(const y of v.wa)y.va(u)&&(m=!0)}),m&&hx(h)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FU(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let c=new Xt(Be.comparator);c=c.insert(a,Un.newNoDocument(a,nt.min()));const u=dt().add(a),h=new Im(nt.min(),new Map,new Xt(at),c,u);await rC(r,h),r.du=r.du.remove(a),r.Eu.delete(e),mx(r)}else await qv(r.localStore,e,!1).then(()=>Kv(r,e,t)).catch(Cc)}async function VU(n,e){const t=rt(n),r=e.batch.batchId;try{const s=await Q3(t.localStore,e);iC(t,r,null),sC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await gd(t,s)}catch(s){await Cc(s)}}async function UU(n,e,t){const r=rt(n);try{const s=await function(c,u){const h=rt(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let g;return h.mutationQueue.lookupMutationBatch(m,u).next(v=>(Et(v!==null,37113),g=v.keys(),h.mutationQueue.removeMutationBatch(m,v))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g)).next(()=>h.localDocuments.getDocuments(m,g))})}(r.localStore,e);iC(r,e,t),sC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await gd(r,s)}catch(s){await Cc(s)}}function sC(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function iC(n,e,t){const r=rt(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Kv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||oC(n,r)})}function oC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ox(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),mx(n))}function hb(n,e,t){for(const r of t)r instanceof eC?(n.Au.addReference(r.key,e),$U(n,r)):r instanceof tC?(Re(fx,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||oC(n,r.key)):Xe(19791,{yu:r})}function $U(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(Re(fx,"New document in limbo: "+t),n.Iu.add(r),mx(n))}function mx(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Be(jt.fromString(e)),r=n.mu.next();n.Eu.set(r,new AU(t)),n.du=n.du.insert(t,r),WT(n.remoteStore,new Eo(Fs(Yy(t.path)),r,"TargetPurposeLimboResolution",_m.ue))}}async function gd(n,e,t){const r=rt(n),s=[],a=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,h)=>{c.push(r.gu(h,e,t).then(m=>{var g;if((m||t)&&r.isPrimaryClient){const v=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,v?"current":"not-current")}if(m){s.push(m);const v=sx.Es(h.targetId,m);a.push(v)}}))}),await Promise.all(c),r.hu.J_(s),await async function(h,m){const g=rt(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>he.forEach(m,y=>he.forEach(y.Is,b=>g.persistence.referenceDelegate.addReference(v,y.targetId,b)).next(()=>he.forEach(y.ds,b=>g.persistence.referenceDelegate.removeReference(v,y.targetId,b)))))}catch(v){if(!Ic(v))throw v;Re(ix,"Failed to update sequence numbers: "+v)}for(const v of m){const y=v.targetId;if(!v.fromCache){const b=g.Fs.get(y),S=b.snapshotVersion,E=b.withLastLimboFreeSnapshotVersion(S);g.Fs=g.Fs.insert(y,E)}}}(r.localStore,a))}async function zU(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){Re(fx,"User change. New user:",e.toKey());const r=await $T(t.localStore,e);t.currentUser=e,function(a,c){a.Vu.forEach(u=>{u.forEach(h=>{h.reject(new Ie(ue.CANCELLED,c))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gd(t,r.Bs)}}function BU(n,e){const t=rt(n),r=t.Eu.get(e);if(r&&r.lu)return dt().add(r.key);{let s=dt();const a=t.Tu.get(e);if(!a)return s;for(const c of a){const u=t.Pu.get(c);s=s.unionWith(u.view.tu)}return s}}function aC(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FU.bind(null,e),e.hu.J_=TU.bind(null,e.eventManager),e.hu.pu=CU.bind(null,e.eventManager),e}function qU(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UU.bind(null,e),e}class Hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return G3(this.persistence,new W3,e.initialUser,this.serializer)}Du(e){return new UT(rx.Vi,this.serializer)}bu(e){return new tU}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hf.provider={build:()=>new Hf};class WU extends Hf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Et(this.persistence.referenceDelegate instanceof qf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new A3(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new UT(r=>qf.Vi(r,t),this.serializer)}}class Gv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>db(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zU.bind(null,this.syncEngine),await bU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NU}()}createDatastore(e){const t=jm(e.databaseInfo.databaseId),r=function(a){return new oU(a)}(e.databaseInfo);return function(a,c,u,h){return new uU(a,c,u,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,a,c,u){return new hU(r,s,a,c,u)}(this.localStore,this.datastore,e.asyncQueue,t=>db(this.syncEngine,t,0),function(){return ib.C()?new ib:new nU}())}createSyncEngine(e,t){return function(s,a,c,u,h,m,g){const v=new PU(s,a,c,u,h,m);return g&&(v.fu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=rt(s);Re(Ma,"RemoteStore shutting down."),a.Ia.add(5),await pd(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Gv.provider={build:()=>new Gv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="FirestoreClient";class HU{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=cr.UNAUTHENTICATED,this.clientId=By.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{Re(Bo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Re(Bo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=dx(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $g(n,e){n.asyncQueue.verifyOperationInProgress(),Re(Bo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $T(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{La("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Re("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{La("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=e}async function fb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await KU(n);Re(Bo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ab(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>ab(e.remoteStore,s)),n._onlineComponents=e}async function KU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(Bo,"Using user provided OfflineComponentProvider");try{await $g(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;La("Error using user provided cache. Falling back to memory cache: "+t),await $g(n,new Hf)}}else Re(Bo,"Using default OfflineComponentProvider"),await $g(n,new WU(void 0));return n._offlineComponents}async function cC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(Bo,"Using user provided OnlineComponentProvider"),await fb(n,n._uninitializedComponentsProvider._online)):(Re(Bo,"Using default OnlineComponentProvider"),await fb(n,new Gv))),n._onlineComponents}function GU(n){return cC(n).then(e=>e.syncEngine)}async function Qv(n){const e=await cC(n),t=e.eventManager;return t.onListen=RU.bind(null,e.syncEngine),t.onUnlisten=OU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LU.bind(null,e.syncEngine),t}function QU(n,e,t={}){const r=new jo;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,m){const g=new lC({next:y=>{g.Ou(),c.enqueueAndForget(()=>JT(a,v)),y.fromCache&&h.source==="server"?m.reject(new Ie(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(y)},error:y=>m.reject(y)}),v=new ZT(u,g,{includeMetadataChanges:!0,ka:!0});return XT(a,v)}(await Qv(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU="firestore.googleapis.com",pb=!0;class gb{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=YU,this.ssl=pb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:pb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VT)throw new Ie(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ie(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ie(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ie(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rm{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oV;switch(r.type){case"firstParty":return new cV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=mb.get(t);r&&(Re("ComponentProvider","Removing Datastore"),mb.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ri(this.firestore,e,this._query)}}class dn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}toJSON(){return{type:dn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(hd(t,dn._jsonSchema))return new dn(e,r||null,new Be(jt.fromString(t.referencePath)))}}dn._jsonSchemaVersion="firestore/documentReference/1.0",dn._jsonSchema={type:un("string",dn._jsonSchemaVersion),referencePath:un("string")};class Ao extends Ri{constructor(e,t,r){super(e,t,Yy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new Be(e))}withConverter(e){return new Ao(this.firestore,e,this._path)}}function it(n,e,...t){if(n=hn(n),qy("collection","path",e),n instanceof Rm){const r=jt.fromString(e,...t);return jE(r),new Ao(n,null,r)}{if(!(n instanceof dn||n instanceof Ao))throw new Ie(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jt.fromString(e,...t));return jE(r),new Ao(n.firestore,null,r)}}function wi(n,e){if(n=Ms(n,Rm),qy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ie(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ri(n,null,function(r){return new Wa(jt.emptyPath(),r)}(e))}function Tt(n,e,...t){if(n=hn(n),arguments.length===1&&(e=By.newId()),qy("doc","path",e),n instanceof Rm){const r=jt.fromString(e,...t);return IE(r),new dn(n,null,new Be(r))}{if(!(n instanceof dn||n instanceof Ao))throw new Ie(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(jt.fromString(e,...t));return IE(r),new dn(n.firestore,n instanceof Ao?n.converter:null,new Be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="AsyncQueue";class yb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new BT(this,"async_queue_retry"),this.oc=()=>{const r=Ug();r&&Re(vb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Ug();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Ug();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new jo;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ic(e))throw e;Re(vb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ti("INTERNAL UNHANDLED ERROR: ",xb(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=ux.createAndSchedule(this,e,t,r,a=>this.lc(a));return this.ec.push(s),s}ac(){this.tc&&Xe(47125,{hc:xb(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function xb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Fa extends Rm{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new yb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yb(e),this._firestoreClient=void 0,await e}}}function XU(n,e,t){t||(t=Ff);const r=pm(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),a=r.getOptions(t);if(Ra(a,e))return s;throw new Ie(ue.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ie(ue.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VT)throw new Ie(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&za(e.host)&&Py(e.host),r.initialize({options:e,instanceIdentifier:t})}function px(n){if(n._terminated)throw new Ie(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||JU(n),n._firestoreClient}function JU(n){var e,t,r;const s=n._freezeSettings(),a=function(u,h,m,g){return new NV(u,h,m,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,uC(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new HU(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zr(Pn.fromBase64String(e))}catch(t){throw new Ie(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zr(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hd(e,zr._jsonSchema))return zr.fromBase64String(e.bytes)}}zr._jsonSchemaVersion="firestore/bytes/1.0",zr._jsonSchema={type:un("string",zr._jsonSchemaVersion),bytes:un("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ie(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function ZU(){return new vd(kv)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Us._jsonSchemaVersion}}static fromJSON(e){if(hd(e,Us._jsonSchema))return new Us(e.latitude,e.longitude)}}Us._jsonSchemaVersion="firestore/geoPoint/1.0",Us._jsonSchema={type:un("string",Us._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hd(e,$s._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new $s(e.vectorValues);throw new Ie(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$s._jsonSchemaVersion="firestore/vectorValue/1.0",$s._jsonSchema={type:un("string",$s._jsonSchemaVersion),vectorValues:un("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=/^__.*__$/;class t6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ko(e,this.data,this.fieldMask,t,this.fieldTransforms):new fd(e,this.data,t,this.fieldTransforms)}}class dC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ko(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe(40011,{Ec:n})}}class vx{constructor(e,t,r,s,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new vx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Kf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(hC(this.Ec)&&e6.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class n6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||jm(e)}Dc(e,t,r,s=!1){return new vx({Ec:e,methodName:t,bc:r,path:jn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yx(n){const e=n._freezeSettings(),t=jm(n._databaseId);return new n6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function r6(n,e,t,r,s,a={}){const c=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);xx("Data must be an object, but it was:",c,r);const u=fC(r,c);let h,m;if(a.merge)h=new Nr(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const v of a.mergeFields){const y=Yv(e,v,t);if(!c.contains(y))throw new Ie(ue.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);pC(g,y)||g.push(y)}h=new Nr(g),m=c.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,m=c.fieldTransforms;return new t6(new dr(u),h,m)}class km extends gx{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof km}}function s6(n,e,t,r){const s=n.Dc(1,e,t);xx("Data must be an object, but it was:",s,r);const a=[],c=dr.empty();Ho(r,(h,m)=>{const g=wx(e,h,t);m=hn(m);const v=s.gc(g);if(m instanceof km)a.push(g);else{const y=yd(m,v);y!=null&&(a.push(g),c.set(g,y))}});const u=new Nr(a);return new dC(c,u,s.fieldTransforms)}function i6(n,e,t,r,s,a){const c=n.Dc(1,e,t),u=[Yv(e,r,t)],h=[s];if(a.length%2!=0)throw new Ie(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)u.push(Yv(e,a[y])),h.push(a[y+1]);const m=[],g=dr.empty();for(let y=u.length-1;y>=0;--y)if(!pC(m,u[y])){const b=u[y];let S=h[y];S=hn(S);const E=c.gc(b);if(S instanceof km)m.push(b);else{const x=yd(S,E);x!=null&&(m.push(b),g.set(b,x))}}const v=new Nr(m);return new dC(g,v,c.fieldTransforms)}function o6(n,e,t,r=!1){return yd(t,n.Dc(r?4:3,e))}function yd(n,e){if(mC(n=hn(n)))return xx("Unsupported field value:",e,n),fC(n,e);if(n instanceof gx)return function(r,s){if(!hC(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const a=[];let c=0;for(const u of r){let h=yd(u,s.yc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}}(n,e)}return function(r,s){if((r=hn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=$t.fromDate(r);return{timestampValue:Bf(s.serializer,a)}}if(r instanceof $t){const a=new $t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bf(s.serializer,a)}}if(r instanceof Us)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zr)return{bytesValue:PT(s.serializer,r._byteString)};if(r instanceof dn){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:tx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof $s)return function(c,u){return{mapValue:{fields:{[oT]:{stringValue:aT},[Vf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw u.wc("VectorValues must only contain numeric values.");return Xy(u.serializer,m)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${wm(r)}`)}(n,e)}function fC(n,e){const t={};return eT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ho(n,(r,s)=>{const a=yd(s,e.Vc(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function mC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $t||n instanceof Us||n instanceof zr||n instanceof dn||n instanceof gx||n instanceof $s)}function xx(n,e,t){if(!mC(t)||!JN(t)){const r=wm(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Yv(n,e,t){if((e=hn(e))instanceof vd)return e._internalPath;if(typeof e=="string")return wx(n,e);throw Kf("Field path arguments must be of type string or ",n,!1,void 0,t)}const a6=new RegExp("[~\\*/\\[\\]]");function wx(n,e,t){if(e.search(a6)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vd(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kf(n,e,t,r,s){const a=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${s}`),h+=")"),new Ie(ue.INVALID_ARGUMENT,u+n+h)}function pC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class l6 extends gC{data(){return super.data()}}function Dm(n,e){return typeof e=="string"?wx(n,e):e instanceof vd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ie(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _x{}class yC extends _x{}function Cr(n,e,...t){let r=[];e instanceof _x&&r.push(e),r=r.concat(t),function(a){const c=a.filter(h=>h instanceof Ex).length,u=a.filter(h=>h instanceof Om).length;if(c>1||c>0&&u>0)throw new Ie(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Om extends yC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Om(e,t,r)}_apply(e){const t=this._parse(e);return xC(e._query,t),new Ri(e.firestore,e.converter,Fv(e._query,t))}_parse(e){const t=yx(e.firestore);return function(a,c,u,h,m,g,v){let y;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Ie(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Eb(v,g);const S=[];for(const E of v)S.push(_b(h,a,E));y={arrayValue:{values:S}}}else y=_b(h,a,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Eb(v,g),y=o6(u,c,v,g==="in"||g==="not-in");return cn.create(m,g,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function c6(n,e,t){const r=e,s=Dm("where",n);return Om._create(s,r,t)}class Ex extends _x{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ex(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:gs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,a){let c=s;const u=a.getFlattenedFilters();for(const h of u)xC(c,h),c=Fv(c,h)}(e._query,t),new Ri(e.firestore,e.converter,Fv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bx extends yC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bx(e,t)}_apply(e){const t=function(s,a,c){if(s.startAt!==null)throw new Ie(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ie(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yu(a,c)}(e._query,this._field,this._direction);return new Ri(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new Wa(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function xd(n,e="asc"){const t=e,r=Dm("orderBy",n);return bx._create(r,t)}function _b(n,e,t){if(typeof(t=hn(t))=="string"){if(t==="")throw new Ie(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pT(e)&&t.indexOf("/")!==-1)throw new Ie(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(jt.fromString(t));if(!Be.isDocumentKey(r))throw new Ie(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ME(n,new Be(r))}if(t instanceof dn)return ME(n,t._key);throw new Ie(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wm(t)}.`)}function Eb(n,e){if(!Array.isArray(n)||n.length===0)throw new Ie(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xC(n,e){const t=function(s,a){for(const c of s)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ie(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ie(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class u6{convertValue(e,t="none"){switch($o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ho(e,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Vf].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>nn(c.doubleValue));return new $s(a)}convertGeoPoint(e){return new Us(nn(e.latitude),nn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=bm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ku(e));default:return null}}convertTimestamp(e){const t=Vo(e);return new $t(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=jt.fromString(e);Et(MT(r),9688,{name:e});const s=new Gu(r.get(1),r.get(3)),a=new Be(r.popFirst(5));return s.isEqual(t)||Ti(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class _u{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ta extends gC{constructor(e,t,r,s,a,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Dm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ta._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ta._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ta._jsonSchema={type:un("string",Ta._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class vf extends Ta{data(e={}){return super.data(e)}}class Ca{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new _u(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new vf(this._firestore,this._userDataWriter,r.key,r,new _u(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(u=>{const h=new vf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new _u(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const h=new vf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new _u(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return u.type!==0&&(m=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:h6(u.type),doc:h,oldIndex:m,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ca._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=By.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function h6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe(61501,{type:n})}}Ca._jsonSchemaVersion="firestore/querySnapshot/1.0",Ca._jsonSchema={type:un("string",Ca._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};class Sx extends u6{constructor(e){super(),this.firestore=e}convertBytes(e){return new zr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,t)}}function Dt(n){n=Ms(n,Ri);const e=Ms(n.firestore,Fa),t=px(e),r=new Sx(e);return vC(n._query),QU(t,n._query).then(s=>new Ca(e,r,n,s))}function ln(n,e,t,...r){n=Ms(n,dn);const s=Ms(n.firestore,Fa),a=yx(s);let c;return c=typeof(e=hn(e))=="string"||e instanceof vd?i6(a,"updateDoc",n._key,e,t,r):s6(a,"updateDoc",n._key,e),Nx(s,[c.toMutation(n._key,hs.exists(!0))])}function Sr(n){return Nx(Ms(n.firestore,Fa),[new Jy(n._key,hs.none())])}function bn(n,e){const t=Ms(n.firestore,Fa),r=Tt(n),s=d6(n.converter,e);return Nx(t,[r6(yx(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,hs.exists(!1))]).then(()=>r)}function Go(n,...e){var t,r,s;n=hn(n);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||wb(e[c])||(a=e[c++]);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(wb(e[c])){const v=e[c];e[c]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[c+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[c+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let h,m,g;if(n instanceof dn)m=Ms(n.firestore,Fa),g=Yy(n._key.path),h={next:v=>{e[c]&&e[c](f6(m,n,v))},error:e[c+1],complete:e[c+2]};else{const v=Ms(n,Ri);m=Ms(v.firestore,Fa),g=v._query;const y=new Sx(m);h={next:b=>{e[c]&&e[c](new Ca(m,y,v,b))},error:e[c+1],complete:e[c+2]},vC(n._query)}return function(y,b,S,E){const x=new lC(E),A=new ZT(b,x,S);return y.asyncQueue.enqueueAndForget(async()=>XT(await Qv(y),A)),()=>{x.Ou(),y.asyncQueue.enqueueAndForget(async()=>JT(await Qv(y),A))}}(px(m),g,u,h)}function Nx(n,e){return function(r,s){const a=new jo;return r.asyncQueue.enqueueAndForget(async()=>MU(await GU(r),s,a)),a.promise}(px(n),e)}function f6(n,e,t){const r=t.docs.get(e._key),s=new Sx(n);return new Ta(n,s,e._key,r,new _u(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Tc=s})(Ba),ka(new Mo("firestore",(r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new Fa(new aV(r.getProvider("auth-internal")),new uV(c,r.getProvider("app-check-internal")),function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ie(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gu(m.options.projectId,g)}(c,s),c);return a=Object.assign({useFetchStreams:t},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Ds(SE,NE,e),Ds(SE,NE,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="firebasestorage.googleapis.com",m6="storageBucket",p6=2*60*1e3,g6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends Qs{constructor(e,t,r=0){super(zg(e),`Firebase Storage: ${t} (${zg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ys.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ws;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ws||(Ws={}));function zg(n){return"storage/"+n}function v6(){const n="An unknown error occurred, please check the error payload for server response.";return new Ys(Ws.UNKNOWN,n)}function y6(){return new Ys(Ws.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function x6(){return new Ys(Ws.CANCELED,"User canceled the upload/download.")}function w6(n){return new Ys(Ws.INVALID_URL,"Invalid URL '"+n+"'.")}function _6(n){return new Ys(Ws.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function bb(n){return new Ys(Ws.INVALID_ARGUMENT,n)}function _C(){return new Ys(Ws.APP_DELETED,"The Firebase app was deleted.")}function E6(n){return new Ys(Ws.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ds.makeFromUrl(e,t)}catch{return new ds(e,"")}if(r.path==="")return r;throw _6(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),h={bucket:1,path:3};function m(L){L.path_=decodeURIComponent(L.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${g}/b/${s}/o${y}`,"i"),S={bucket:1,path:3},E=t===wC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",A=new RegExp(`^https?://${E}/${s}/${x}`,"i"),C=[{regex:u,indices:h,postModify:a},{regex:b,indices:S,postModify:m},{regex:A,indices:{bucket:1,path:2},postModify:m}];for(let L=0;L<C.length;L++){const V=C[L],q=V.regex.exec(e);if(q){const P=q[V.indices.bucket];let R=q[V.indices.path];R||(R=""),r=new ds(P,R),V.postModify(r);break}}if(r==null)throw w6(e);return r}}class b6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(n,e,t){let r=1,s=null,a=null,c=!1,u=0;function h(){return u===2}let m=!1;function g(...x){m||(m=!0,e.apply(null,x))}function v(x){s=setTimeout(()=>{s=null,n(b,h())},x)}function y(){a&&clearTimeout(a)}function b(x,...A){if(m){y();return}if(x){y(),g.call(null,x,...A);return}if(h()||c){y(),g.call(null,x,...A);return}r<64&&(r*=2);let C;u===1?(u=2,C=0):C=(r+Math.random())*1e3,v(C)}let S=!1;function E(x){S||(S=!0,y(),!m&&(s!==null?(x||(u=2),clearTimeout(s),v(0)):x||(u=1)))}return v(0),a=setTimeout(()=>{c=!0,E(!0)},t),E}function N6(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(n){return n!==void 0}function Sb(n,e,t,r){if(r<e)throw bb(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw bb(`Invalid value for '${n}'. Expected ${t} or less.`)}function C6(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Gf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Gf||(Gf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,t,r,s,a,c,u,h,m,g,v,y=!0,b=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=m,this.progressCallback_=g,this.connectionFactory_=v,this.retry=y,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,E)=>{this.resolve_=S,this.reject_=E,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Qh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=u=>{const h=u.loaded,m=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,m)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const u=a.getErrorCode()===Gf.NO_ERROR,h=a.getStatus();if(!u||I6(h,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===Gf.ABORT;r(!1,new Qh(!1,null,g));return}const m=this.successCodes_.indexOf(h)!==-1;r(!0,new Qh(m,a))})},t=(r,s)=>{const a=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());T6(h)?a(h):a()}catch(h){c(h)}else if(u!==null){const h=v6();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(s.canceled){const h=this.appDelete_?_C():x6();c(h)}else{const h=y6();c(h)}};this.canceled_?t(!1,new Qh(!1,null,!0)):this.backoffId_=S6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&N6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function A6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function P6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function R6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function k6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function D6(n,e,t,r,s,a,c=!0,u=!1){const h=C6(n.urlParams),m=n.url+h,g=Object.assign({},n.headers);return R6(g,e),A6(g,t),P6(g,a),k6(g,r),new j6(m,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function L6(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t){this._service=e,t instanceof ds?this._location=t:this._location=ds.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qf(e,t)}get root(){const e=new ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return L6(this._location.path)}get storage(){return this._service}get parent(){const e=O6(this._location.path);if(e===null)return null;const t=new ds(this._location.bucket,e);return new Qf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw E6(e)}}function Nb(n,e){const t=e==null?void 0:e[m6];return t==null?null:ds.makeFromBucketSpec(t,n)}function M6(n,e,t,r={}){n.host=`${e}:${t}`;const s=za(e);s&&(Py(`https://${n.host}/b`),rN("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:gL(a,n.app.options.projectId))}class F6{constructor(e,t,r,s,a,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=wC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p6,this._maxUploadRetryTime=g6,this._requests=new Set,s!=null?this._bucket=ds.makeFromBucketSpec(s,this._host):this._bucket=Nb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ds.makeFromBucketSpec(this._url,e):this._bucket=Nb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Sb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Sb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if($r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qf(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new b6(_C());{const c=D6(e,this._appId,r,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Tb="@firebase/storage",Cb="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="storage";function V6(n=aN(),e){n=hn(n);const r=pm(n,EC).getImmediate({identifier:e}),s=mL("storage");return s&&U6(r,...s),r}function U6(n,e,t,r={}){M6(n,e,t,r)}function $6(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new F6(t,r,s,e,Ba)}function z6(){ka(new Mo(EC,$6,"PUBLIC").setMultipleInstances(!0)),Ds(Tb,Cb,""),Ds(Tb,Cb,"esm2017")}z6();const B6={apiKey:"AIzaSyDUR89i6kvh3bp51GCgBX0fTwh3bFt1Ksg",authDomain:"medjust-d26eb.firebaseapp.com",projectId:"medjust-d26eb",storageBucket:"medjust-d26eb.appspot.com",messagingSenderId:"631362355665",appId:"1:631362355665:web:4d7f8eadba1bca0969e0f0"},Tx=oN(B6),Bg=tV(Tx),$e=XU(Tx,{experimentalForceLongPolling:!0,useFetchStreams:!1});V6(Tx);const bC=_.createContext(void 0);function Cx(){const n=_.useContext(bC);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function q6({children:n}){const[e,t]=_.useState(null),[r,s]=_.useState(!0),[a,c]=_.useState(null),u=v=>new Promise(y=>setTimeout(y,v)),h=async(v,y)=>{if(typeof navigator<"u"&&!navigator.onLine){const x=new Error("No network connection (navigator offline)");throw console.error("Login pre-check failed:",x),c("No network connection - please connect to the internet"),x}const b=3;let S=0,E=null;for(;S<b;){S+=1;try{await UM(Bg,v,y),c(null);return}catch(x){if(E=x,console.error(`Login attempt ${S} failed:`,x),!((x==null?void 0:x.code)==="auth/network-request-failed"||(x==null?void 0:x.message)&&x.message.toLowerCase().includes("fetch")))throw(x==null?void 0:x.code)==="auth/wrong-password"||(x==null?void 0:x.code)==="auth/user-not-found"?c("Invalid email or password"):c("Authentication error - see console for details"),x;if(c(`Network error (attempt ${S} of ${b}) - checking connection...`),S<b){const I=500*Math.pow(2,S-1);console.log(`Retrying login in ${I}ms...`),await u(I);continue}}}throw console.error("Login failed after retries:",E),c("Network error - unable to reach Firebase. Check your internet connection, disabling browser extensions (adblockers), or ensure your site domain is added to Firebase Authentication -> Authorized domains."),E},m=async()=>{try{await qM(Bg),c(null)}catch(v){console.error("Logout error:",v),t(null)}};_.useEffect(()=>{const v=setTimeout(()=>{r&&(console.log("ðŸ”„ Auth taking too long - continuing without authentication"),s(!1))},5e3),y=BM(Bg,b=>{clearTimeout(v),t(b),s(!1),c(null)},b=>{clearTimeout(v),console.error("Auth state change error:",b),c("Authentication error - working offline"),s(!1)});return()=>{clearTimeout(v),y()}},[]);const g={currentUser:e,login:h,logout:m,loading:r,authError:a};return l.jsx(bC.Provider,{value:g,children:!r&&n})}const W6=rd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),se=_.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},a)=>{const c=r?ja:"button";return l.jsx(c,{className:tt(W6({variant:e,size:t,className:n})),ref:a,...s})});se.displayName="Button";const we=_.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:tt("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));we.displayName="Card";const Ge=_.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:tt("flex flex-col space-y-1.5 p-6",n),...e}));Ge.displayName="CardHeader";const Je=_.forwardRef(({className:n,...e},t)=>l.jsx("h3",{ref:t,className:tt("text-2xl font-semibold leading-none tracking-tight",n),...e}));Je.displayName="CardTitle";const Ct=_.forwardRef(({className:n,...e},t)=>l.jsx("p",{ref:t,className:tt("text-sm text-muted-foreground",n),...e}));Ct.displayName="CardDescription";const _e=_.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:tt("p-6 pt-0",n),...e}));_e.displayName="CardContent";const H6=_.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:tt("flex items-center p-6 pt-0",n),...e}));H6.displayName="CardFooter";class K6 extends Ne.Component{constructor(t){super(t);X0(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.replace(window.location.href)});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),(t.message.includes("fetch")||t.message.includes("Firebase")||t.message.includes("Firestore"))&&console.log("ðŸ”„ Firebase error detected - this is a known connectivity issue"),this.setState({error:t,errorInfo:r})}render(){var t,r,s;if(this.state.hasError){const a=((t=this.state.error)==null?void 0:t.message.includes("fetch"))||((r=this.state.error)==null?void 0:r.message.includes("Firebase"))||((s=this.state.error)==null?void 0:s.message.includes("Firestore"));return l.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:l.jsxs(we,{className:"max-w-md w-full",children:[l.jsx(Ge,{children:l.jsxs(Je,{className:"flex items-center gap-2 text-destructive",children:[l.jsx(IR,{className:"h-5 w-5"}),a?"Connection Error":"Application Error"]})}),l.jsxs(_e,{className:"space-y-4",children:[l.jsx("p",{className:"text-muted-foreground",children:a?"There's a connectivity issue with Firebase services. The app will work in offline mode.":"Something went wrong. Please try refreshing the page."}),!1,l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(se,{onClick:this.handleRetry,className:"flex-1",children:[l.jsx(NR,{className:"h-4 w-4 mr-2"}),"Retry"]}),l.jsx(se,{variant:"outline",onClick:()=>window.location.href="/admin/years",className:"flex-1",children:"Go to Years"})]})]})]})})}return this.props.children}}var Ix="Avatar",[G6,Mz]=ji(Ix),[Q6,SC]=G6(Ix),NC=_.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,a]=_.useState("idle");return l.jsx(Q6,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:l.jsx(He.span,{...r,ref:e})})});NC.displayName=Ix;var TC="AvatarImage",CC=_.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...a}=n,c=SC(TC,t),u=Y6(r),h=vn(m=>{s(m),c.onImageLoadingStatusChange(m)});return Wt(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?l.jsx(He.img,{...a,ref:e,src:r}):null});CC.displayName=TC;var IC="AvatarFallback",jC=_.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,a=SC(IC,t),[c,u]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&a.imageLoadingStatus!=="loaded"?l.jsx(He.span,{...s,ref:e}):null});jC.displayName=IC;function Y6(n){const[e,t]=_.useState("idle");return Wt(()=>{if(!n){t("error");return}let r=!0;const s=new window.Image,a=c=>()=>{r&&t(c)};return t("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=n,()=>{r=!1}},[n]),e}var AC=NC,PC=CC,RC=jC;const fc=_.forwardRef(({className:n,...e},t)=>l.jsx(AC,{ref:t,className:tt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));fc.displayName=AC.displayName;const Zu=_.forwardRef(({className:n,...e},t)=>l.jsx(PC,{ref:t,className:tt("aspect-square h-full w-full",n),...e}));Zu.displayName=PC.displayName;const mc=_.forwardRef(({className:n,...e},t)=>l.jsx(RC,{ref:t,className:tt("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));mc.displayName=RC.displayName;const X6=[{icon:_R,label:"Dashboard",path:"/admin"},{icon:_f,label:"News",path:"/admin/news"},{icon:cs,label:"Years",path:"/admin/years"},{icon:nc,label:"Users",path:"/admin/users"},{icon:nc,label:"Professors",path:"/admin/professors"},{icon:py,label:"Store",path:"/admin/store"},{icon:zs,label:"Orders",path:"/admin/orders"},{icon:_i,label:"Research",path:"/admin/research"},{icon:Lu,label:"Maps",path:"/admin/maps"},{icon:$1,label:"Settings",path:"/admin/settings"}];function J6({isOpen:n}){return l.jsx("div",{className:tt("fixed left-0 top-16 h-[calc(100vh-4rem)] bg-card border-r transition-all duration-300 z-40",n?"w-64":"w-16"),children:l.jsx("nav",{className:"p-4 space-y-2",children:X6.map(e=>l.jsxs("div",{children:[l.jsxs(q_,{to:e.path,className:({isActive:t})=>tt("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors","hover:bg-accent hover:text-accent-foreground",t&&"bg-primary text-primary-foreground hover:bg-primary/90",!n&&"justify-center"),children:[l.jsx(e.icon,{className:"h-5 w-5 flex-shrink-0"}),n&&l.jsx("span",{className:"font-medium",children:e.label})]}),e.children&&n&&l.jsx("div",{className:"ml-6 mt-2 space-y-1",children:e.children.map(t=>l.jsxs(q_,{to:t.path,className:({isActive:r})=>tt("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm","hover:bg-accent hover:text-accent-foreground",r&&"bg-primary text-primary-foreground hover:bg-primary/90"),children:[l.jsx(t.icon,{className:"h-4 w-4 flex-shrink-0"}),l.jsx("span",{children:t.label})]},t.path))})]},e.path))})})}function Z6(){var a;const[n,e]=_.useState(!0),{currentUser:t,logout:r}=Cx(),s=async()=>{try{await r()}catch(c){console.error("Error logging out:",c)}};return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-card shadow-sm",children:l.jsxs("div",{className:"flex h-16 items-center px-4",children:[l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>e(!n),className:"mr-4",children:l.jsx(SR,{className:"h-5 w-5"})}),l.jsx("div",{className:"flex-1",children:l.jsx("h1",{className:"text-xl font-semibold text-primary",children:"MedJust Admin Dashboard"})}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(fc,{className:"h-8 w-8",children:l.jsx(mc,{children:l.jsx(wo,{className:"h-4 w-4"})})}),l.jsx("span",{className:"text-sm font-medium",children:((a=t==null?void 0:t.email)==null?void 0:a.split("@")[0])||"Admin"})]}),l.jsx(se,{variant:"ghost",size:"icon",onClick:s,className:"text-muted-foreground hover:text-destructive",children:l.jsx(bR,{className:"h-4 w-4"})})]})]})}),l.jsxs("div",{className:"flex",children:[l.jsx(J6,{isOpen:n}),l.jsx("main",{className:`flex-1 transition-all duration-300 ${n?"ml-64":"ml-16"}`,children:l.jsx("div",{className:"p-6",children:l.jsx(BO,{})})})]})]})}const Pe=_.forwardRef(({className:n,type:e,...t},r)=>l.jsx("input",{type:e,className:tt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Pe.displayName="Input";var e5="Label",kC=_.forwardRef((n,e)=>l.jsx(He.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));kC.displayName=e5;var DC=kC;const t5=rd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),De=_.forwardRef(({className:n,...e},t)=>l.jsx(DC,{ref:t,className:tt(t5(),n),...e}));De.displayName=DC.displayName;const n5=rd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),OC=_.forwardRef(({className:n,variant:e,...t},r)=>l.jsx("div",{ref:r,role:"alert",className:tt(n5({variant:e}),n),...t}));OC.displayName="Alert";const r5=_.forwardRef(({className:n,...e},t)=>l.jsx("h5",{ref:t,className:tt("mb-1 font-medium leading-none tracking-tight",n),...e}));r5.displayName="AlertTitle";const LC=_.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:tt("text-sm [&_p]:leading-relaxed",n),...e}));LC.displayName="AlertDescription";function s5(){const[n,e]=_.useState(""),[t,r]=_.useState(""),[s,a]=_.useState(""),[c,u]=_.useState(!1),{login:h,authError:m}=Cx(),g=Ec(),v=async y=>{if(y.preventDefault(),!n||!t){a("Please fill in all fields");return}try{if(typeof navigator<"u"&&!navigator.onLine){a("No network connection. Please connect to the internet and try again.");return}a(""),u(!0),await h(n,t),g("/admin")}catch(b){console.error("Login error:",b),m?a(m):(b==null?void 0:b.code)==="auth/network-request-failed"?a("Network error - check your connection and try again."):(b==null?void 0:b.code)==="auth/wrong-password"||(b==null?void 0:b.code)==="auth/user-not-found"?a("Invalid email or password."):a("Failed to log in. Please check your credentials.")}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/20 flex items-center justify-center p-4",children:l.jsxs(we,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(Ge,{className:"space-y-1 text-center",children:[l.jsx("div",{className:"mx-auto w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-4",children:l.jsx(p_,{className:"h-6 w-6 text-primary-foreground"})}),l.jsx(Je,{className:"text-2xl font-bold",children:"MedJust Admin"}),l.jsx(Ct,{children:"Sign in to access the admin dashboard"})]}),l.jsx(_e,{children:l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s&&l.jsx(OC,{variant:"destructive",children:l.jsx(LC,{children:s})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"email",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(wf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Pe,{id:"email",type:"email",placeholder:"MedAdmin@gmail.com",value:n,onChange:y=>e(y.target.value),className:"pl-10",required:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"password",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(p_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Pe,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:t,onChange:y=>r(y.target.value),className:"pl-10",required:!0})]})]}),l.jsx(se,{type:"submit",className:"w-full",disabled:c,children:c?l.jsxs(l.Fragment,{children:[l.jsx(Ro,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}const i5=rd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function en({className:n,variant:e,...t}){return l.jsx("div",{className:tt(i5({variant:e}),n),...t})}const o5=[{id:"1",title:"Revolutionary Gene Therapy Shows Promise in Cancer Treatment",content:"Recent studies demonstrate significant progress in targeted gene therapy for various cancer types. This breakthrough research could change how we approach oncological treatments in the future.",authorName:"Dr. Sarah Johnson",authorId:"user1",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15"),tags:["oncology","gene-therapy","research"],isPinned:!0,viewsCount:1247,attachments:[],imageUrl:"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=300&h=200&fit=crop"},{id:"2",title:"Medical Education Technology Trends for 2024",content:"Exploring the latest innovations in medical education platforms, including VR simulations, AI-powered learning, and interactive case studies that are transforming how medical students learn.",authorName:"Prof. Michael Chen",authorId:"user2",createdAt:new Date("2024-01-14"),updatedAt:new Date("2024-01-14"),tags:["education","technology","trends"],isPinned:!1,viewsCount:892,attachments:[],imageUrl:"https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=300&h=200&fit=crop"},{id:"3",title:"New Guidelines for Emergency Medicine Protocols",content:"Updated protocols for emergency medical procedures and best practices have been released. These guidelines incorporate the latest research and improve patient care outcomes.",authorName:"Dr. Emily Rodriguez",authorId:"user3",createdAt:new Date("2024-01-13"),updatedAt:new Date("2024-01-13"),tags:["emergency","protocols","guidelines"],isPinned:!1,viewsCount:654,attachments:["protocol-guide.pdf"],imageUrl:"https://images.unsplash.com/photo-1551190822-a9333d879b1f?w=300&h=200&fit=crop"}];function jx(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const m=Cr(it($e,"news"),xd("updatedAt","desc")),g=Go(m,v=>{const y=[];v.forEach(b=>{var E,x;const S=b.data();y.push({id:b.id,title:S.title||"",content:S.content||"",imageUrl:S.imageUrl||"",videoUrl:S.videoUrl||"",createdAt:((E=S.createdAt)==null?void 0:E.toDate())||new Date,updatedAt:((x=S.updatedAt)==null?void 0:x.toDate())||new Date,authorName:S.authorName||"",authorId:S.newsId||b.id,tags:S.tags||[],isPinned:S.isPinned||!1,viewsCount:S.viewsCount||0,attachments:S.attachments||[],yearId:S.yearId||"",yearNumber:S.yearNumber||void 0})}),e(y),r(!1)},v=>{console.error("Error fetching news:",v),console.log("Using mock data for news"),e(o5),a(null),r(!1)});return()=>g()},[]),{news:n,loading:t,error:s,createNews:async m=>{try{await bn(it($e,"news"),m)}catch(g){console.error("Error creating news:",g);const v={id:`mock_${Date.now()}`,...m,createdAt:new Date,updatedAt:new Date,viewsCount:0,attachments:m.attachments||[]};e(y=>[v,...y]),console.log("Added news to mock data:",v)}},updateNews:async(m,g)=>{try{await ln(Tt($e,"news",m),g)}catch(v){console.error("Error updating news:",v),e(y=>y.map(b=>b.id===m?{...b,...g,updatedAt:new Date}:b)),console.log("Updated news in mock data")}},deleteNews:async m=>{try{await Sr(Tt($e,"news",m))}catch(g){console.error("Error deleting news:",g),e(v=>v.filter(y=>y.id!==m)),console.log("Removed news from mock data")}}}}function MC(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1),h=[{id:"product1",productId:"product1",name:"Medical Textbook",description:"Comprehensive medical textbook for students",price:89.99,images:["https://example.com/book1.jpg"],categoryId:"books",createdAt:new Date},{id:"product2",productId:"product2",name:"Stethoscope",description:"Professional grade stethoscope",price:120,images:["https://example.com/stethoscope.jpg"],categoryId:"equipment",createdAt:new Date}];_.useEffect(()=>{(async()=>{const S=setTimeout(()=>{t&&!c&&(console.log("ðŸ”„ Firebase taking too long - switching to offline mode"),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h))},3e3);try{console.log("ðŸ”„ Fetching products from Firebase...");const E=await Dt(it($e,"products")),x=[];E.forEach(A=>{var C;const I=A.data();x.push({id:A.id,productId:I.productId||A.id,name:I.name||"",description:I.description||"",price:I.price||0,types:I.types||(I.price?[{name:"Default",price:I.price}]:[]),images:I.images||[],categoryId:I.categoryId||"",createdAt:((C=I.createdAt)==null?void 0:C.toDate())||new Date})}),clearTimeout(S),e(x.sort((A,I)=>I.createdAt.getTime()-A.createdAt.getTime())),r(!1),a(null),console.log("âœ… Products loaded successfully:",x.length)}catch(E){clearTimeout(S),E.isFirebaseOfflineError?console.log("ðŸ”„ Firebase offline mode detected - using mock data"):console.error("Firebase error - switching to offline mode:",E.message),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h)}})()},[]);const m=async b=>{var S,E;if(c){const x={id:`product_${Date.now()}`,productId:`product_${Date.now()}`,...b,createdAt:new Date};e(A=>[x,...A]),console.log("âœ… Added product to offline mode:",x.name);return}try{const x={name:b.name,description:b.description,price:b.price||((E=(S=b.types)==null?void 0:S[0])==null?void 0:E.price)||0,types:b.types||(b.price?[{name:"Default",price:b.price}]:[]),images:b.images,categoryId:b.categoryId||"",createdAt:new Date,productId:""};console.log("ðŸ“ Creating new product:",x);const A=await bn(it($e,"products"),x);await ln(A,{productId:A.id}),console.log("âœ… Created product with ID:",A.id),window.location.replace(window.location.href)}catch(x){console.error("Error creating product:",x),u(!0),await m(b)}};return{products:n,loading:t,error:s,isOfflineMode:c,createProduct:m,updateProduct:async(b,S)=>{var E;if(c){e(x=>x.map(A=>A.id===b?{...A,...S}:A)),console.log("âœ… Updated product in offline mode");return}try{const x=Tt($e,"products",b),A={...S};S.types&&(A.types=S.types,A.price=((E=S.types[0])==null?void 0:E.price)||S.price||0),await ln(x,A),console.log("âœ… Updated product in Firebase:",b),window.location.replace(window.location.href)}catch(x){console.error("Error updating product:",x)}},deleteProduct:async b=>{if(c){e(S=>S.filter(E=>E.id!==b)),console.log("âœ… Deleted product from offline mode");return}try{await Sr(Tt($e,"products",b)),console.log("âœ… Deleted product from Firebase:",b),window.location.replace(window.location.href)}catch(S){console.error("Error deleting product:",S)}},retryConnection:()=>{console.log("ðŸ”„ Retrying Firebase connection..."),r(!0),a(null),u(!1),window.location.replace(window.location.href)}}}const a5=[{id:"1",name:"Dr. Sarah Johnson",department:"Internal Medicine",email:"sarah.johnson@medjust.com",officeLocation:"Medical Building, Room 301",imageUrl:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=300&h=300&fit=crop&crop=face"},{id:"2",name:"Prof. Michael Chen",department:"Surgery",email:"michael.chen@medjust.com",officeLocation:"Surgical Wing, Room 205",imageUrl:"https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=300&h=300&fit=crop&crop=face"},{id:"3",name:"Dr. Emily Rodriguez",department:"Emergency Medicine",email:"emily.rodriguez@medjust.com",officeLocation:"Emergency Department, Office 12",imageUrl:"https://images.unsplash.com/photo-1594824928909-90ad1d93d7c3?w=300&h=300&fit=crop&crop=face"}];function FC(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1);_.useEffect(()=>{const v=async()=>{try{const b=Cr(it($e,"professors"));await Dt(b);const S=Cr(it($e,"professors"),xd("name","asc"));return Go(S,x=>{const A=[];x.forEach(I=>{const C=I.data();A.push({id:I.id,name:C.name||"",title:C.title||"",department:C.department||"",email:C.email||"",phone:C.phone||"",officeLocation:C.officeLocation||"",bio:C.bio||"",researchAreas:C.researchAreas||[],website:C.website||"",linkedin:C.linkedin||"",imageUrl:C.imageUrl||""})}),e(A),r(!1)},x=>{console.error("Error in Firebase listener:",x),y()})}catch(b){return console.error("Firebase connection failed:",b),y(),null}},y=()=>{console.log("ðŸ”„ Switching to offline mode with mock data"),u(!0),e(a5),a(null),r(!1)};v()},[]);const h=async v=>{if(c){const y={id:`offline_${Date.now()}`,...v};e(b=>[...b,y]),console.log("âœ… Added professor in offline mode:",y.name);return}try{await bn(it($e,"professors"),{...v,professorId:`prof_${Date.now()}`}),console.log("âœ… Added professor to Firebase:",v.name)}catch(y){console.error("Error creating professor:",y),u(!0),await h(v)}};return{professors:n,loading:t,error:s,createProfessor:h,updateProfessor:async(v,y)=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(b=>b.map(S=>S.id===v?{...S,...y}:S)),console.log("âœ… Updated professor in offline mode");return}try{await ln(Tt($e,"professors",v),y),console.log("âœ… Updated professor in Firebase")}catch(b){console.error("Error updating professor:",b),e(S=>S.map(E=>E.id===v?{...E,...y}:E)),console.log("âœ… Updated professor locally (Firebase failed)")}},deleteProfessor:async v=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(y=>y.filter(b=>b.id!==v)),console.log("âœ… Deleted professor in offline mode");return}try{await Sr(Tt($e,"professors",v)),console.log("âœ… Deleted professor from Firebase")}catch(y){console.error("Error deleting professor:",y),e(b=>b.filter(S=>S.id!==v)),console.log("âœ… Deleted professor locally (Firebase failed)")}},isOfflineMode:c}}function Ac(){const[n,e]=_.useState([]),[t,r]=_.useState([]),[s,a]=_.useState([]),[c,u]=_.useState(!0),[h,m]=_.useState(null),[g,v]=_.useState(!1),[y,b]=_.useState(1),[S,E]=_.useState("connecting"),x=()=>{console.log("ðŸ”„ Activating offline mode immediately"),v(!0),E("offline"),u(!1),m(null),e([{id:"offline_year1",yearNumber:1,type:"basic",batchName:"",subjects:[]},{id:"offline_year2",yearNumber:2,type:"basic",batchName:"",subjects:[]},{id:"offline_year3",yearNumber:3,type:"basic",batchName:"",subjects:[]},{id:"offline_year4",yearNumber:4,type:"clinical",batchName:"",subjects:[]},{id:"offline_year5",yearNumber:5,type:"clinical",batchName:"",subjects:[]},{id:"offline_year6",yearNumber:6,type:"clinical",batchName:"",subjects:[]}]),a([])};_.useEffect(()=>{},[]),_.useEffect(()=>{(async()=>{var Z,X,B;if(!navigator.onLine){console.log("ðŸš« No internet connection detected - activating offline mode"),x();return}E("connecting"),u(!0);try{console.log("ðŸ”„ Attempting Firebase connection...");const Q=await Dt(it($e,"batches"));let ee=[];const U=[];for(const ve of Q.docs){const ce=ve.data(),me=ve.id,Te=ce.batch_name||ce.batchName||"";U.push({id:me,batchName:Te,imageUrl:ce.image_url||ce.imageUrl||"",aca_supervisor:ce.aca_supervisor||ce.acadmic_supervisor||ce.academic_supervisor||"",cr:ce.cr||"",actor:ce.actor||"",group_link:ce.group_link||ce.groupUrl||ce.group_url||""});try{(await Dt(it(ve.ref,"years"))).forEach(Ce=>{const Me=Ce.data();let Ke=Me.order||1;if(Me.name){const yt=String(Me.name).match(/\d+/);yt&&(Ke=parseInt(yt[0]))}ee.push({id:Ce.id,yearNumber:Ke,name:Me.name||Me.title||"",type:Ke<=3?"basic":"clinical",batchName:Te,imageUrl:Me.imageUrl||Me.image_url||"",academicSupervisor:Me.aca_supervisor||Me.acadmic_supervisor||Me.academic_supervisor||"",actor:Me.actor||"",cr:Me.cr||"",groupUrl:Me.group_link||Me.group_url||Me.groupUrl||"",subjects:[],batchId:me})})}catch(ke){console.warn("Failed to fetch years for batch",me,ke)}}r(U),typeof yearsSnapshot<"u"&&yearsSnapshot&&!yearsSnapshot.empty&&yearsSnapshot.forEach(ve=>{const ce=ve.data();let me=ce.order||1;if(ce.name){const Te=ce.name.match(/\d+/);Te&&(me=parseInt(Te[0]))}ee.push({id:ve.id,yearNumber:me,name:ce.name||ce.title||"",type:me<=3?"basic":"clinical",batchName:ce.batch_name||ce.batchName||"",imageUrl:ce.imageUrl||ce.image_url||"",academicSupervisor:ce.aca_supervisor||ce.acadmic_supervisor||ce.academic_supervisor||"",actor:ce.actor||"",cr:ce.cr||"",groupUrl:ce.group_url||ce.groupUrl||"",subjects:[]})});const Y=await Dt(it($e,"Subjects")),le=[];for(const ve of Y.docs){const ce=ve.data(),me=await Dt(it(ve.ref,"lectures")),Te=[];for(const ke of me.docs){const Ce=ke.data(),Me=await Dt(it(ke.ref,"videos")),Ke=[];Me.forEach(At=>{var ft;const _t=At.data();Ke.push({id:At.id,title:_t.title||_t.name||"",url:_t.url||"",thumbnailUrl:_t.thumbnailUrl||"",description:_t.description||"",uploadedAt:((ft=_t.uploadedAt)==null?void 0:ft.toDate())||new Date})});const yt=await Dt(it(ke.ref,"files")),bt=[];yt.forEach(At=>{var ft;const _t=At.data();bt.push({id:At.id,title:_t.title||_t.name||"",url:_t.url||"",description:_t.description||"",uploadedAt:((ft=_t.uploadedAt)==null?void 0:ft.toDate())||new Date})});const rn=await Dt(it(ke.ref,"quizzes")),Ot=[];rn.forEach(At=>{const _t=At.data();Ot.push({id:At.id,title:_t.title||_t.name||"",description:_t.description||"",duration:_t.duration||30,passRate:_t.passRate||70,questions:_t.questions||[]})}),Te.push({id:ke.id,name:Ce.name||Ce.title||"",description:Ce.description||"",subjectId:ve.id,order:Ce.order||1,imageUrl:Ce.imageUrl||"",createdAt:((Z=Ce.createdAt)==null?void 0:Z.toDate())||new Date,uploadedBy:Ce.uploadedBy||"Unknown",videos:Ke,files:bt,quizzes:Ot})}le.push({id:ve.id,name:ce.name||"",subjectId:ce.subjectId||ve.id,yearId:ce.yearId||"",imageUrl:ce.imageUrl||"",lectures:Te.sort((ke,Ce)=>ke.order-Ce.order)})}const Ee=ee.map(ve=>({...ve,subjects:le.filter(ce=>ce.yearId===ve.id).sort((ce,me)=>ce.name.localeCompare(me.name))}));e(Ee.sort((ve,ce)=>ve.yearNumber-ce.yearNumber)),a(Ee.flatMap(ve=>ve.subjects)),u(!1),v(!1),E("connected"),m(null),console.log("âœ… Firebase data loaded successfully");try{if(navigator.onLine)for(const ve of Q.docs)try{const ce=await Dt(it(ve.ref,"years"));for(const me of ce.docs){const Te=me.data(),ke=Tt(it(ve.ref,"years"),me.id),Ce={};if(Te.imageUrl===void 0&&(Ce.imageUrl=""),Te.batch_name===void 0&&Te.batchName===void 0&&(Ce.batch_name=((X=ve.data())==null?void 0:X.batch_name)||((B=ve.data())==null?void 0:B.batchName)||""),Object.keys(Ce).length>0)try{await ln(ke,Ce),console.log(`ðŸ”„ Set missing fields for year ${me.id}:`,Ce)}catch(Me){console.warn(`Failed to set defaults for ${me.id}:`,Me)}}}catch(ce){console.warn("Could not ensure fields for years under batch",ve.id,ce)}}catch(ve){console.warn("Could not ensure imageUrl fields:",ve)}}catch{console.log("âŒ Firebase connection failed - staying in offline mode"),x()}})()},[y]);const A=()=>{console.log("ï¿½ï¿½ï¿½ Retrying Firebase connection..."),u(!0),m(null),v(!1),E("connecting"),b(K=>K+1)},I=async(K,Z)=>{if(K){if(g||!navigator.onLine){e(X=>X.map(B=>B.id===K?{...B,...Z}:B));return}try{const X=wi($e,"years"),Q=(await Dt(X)).docs.find(ee=>ee.id===K);if(Q){await ln(Q.ref,{...Z,updatedAt:new Date}),b(ee=>ee+1);return}e(ee=>ee.map(U=>U.id===K?{...U,...Z}:U))}catch(X){console.error("Error updating year:",X),e(B=>B.map(Q=>Q.id===K?{...Q,...Z}:Q))}}},C=async(K,Z)=>{if(K){if(g||!navigator.onLine){r(X=>X.map(B=>B.id===K?{...B,...Z}:B));return}try{const X=Tt($e,"batches",K);await ln(X,{...Z,updatedAt:new Date}),b(B=>B+1)}catch(X){console.error("Failed to update batch:",X),r(B=>B.map(Q=>Q.id===K?{...Q,...Z}:Q))}}},L=async(K,Z=3)=>{for(let X=0;X<Z;X++)try{return await K()}catch(B){if(console.log(`Attempt ${X+1} failed:`,B.message),X===Z-1)throw B;await new Promise(Q=>setTimeout(Q,1e3*(X+1)))}},V=async K=>{if(g||!navigator.onLine){const Z={id:`subject_${Date.now()}`,name:K.name,subjectId:`subject_${Date.now()}`,yearId:K.yearId,imageUrl:K.imageUrl||"",lectures:[]};a(X=>[...X,Z]),e(X=>X.map(B=>B.id===K.yearId?{...B,subjects:[...B.subjects,Z]}:B)),console.log("âœ… Added subject to offline mode:",Z.name);return}try{console.log("ðŸ”„ Creating subject with data:",K),await L(async()=>{const Z="7RpQaRoWKFLKiPA7A9Aq",X=Tt($e,"Subjects",Z);await ln(X,{name:K.name,imageUrl:K.imageUrl||"",hours:K.hours||3,yearId:K.yearId,subjectId:Z,updatedAt:new Date}),console.log("âœ… Updated existing subject document:",Z);const B=it(X,"lectures");if((await Dt(B)).empty){const U=await bn(B,{name:"Sample Lecture",title:"Sample Lecture",description:"",imageUrl:"",order:1,uploadedBy:"System",createdAt:new Date,lectureId:""});await ln(U,{lectureId:U.id});const Y=["videos","files","quizzes"];for(const le of Y){const Ee=it(U,le);let ve={};le==="videos"?ve={title:"Sample Video",description:"",thumbnailUrl:"",url:"",uploadedAt:new Date,videoId:""}:le==="files"?ve={title:"Sample File",description:"",url:"",uploadedAt:new Date,fileId:""}:le==="quizzes"&&(ve={title:"Sample Quiz",description:"",duration:30,passRate:70,questions:[],quizId:""});const ce=await bn(Ee,ve),me=`${le.slice(0,-1)}Id`;await ln(ce,{[me]:ce.id})}console.log("âœ… Created complete lecture structure for subject:",Z)}b(ee=>ee+1)})}catch(Z){console.error("Error creating subject:",Z),v(!0),await V(K)}},q=async K=>{if(g){const Z={id:`lecture_${Date.now()}`,...K};a(X=>X.map(B=>B.id===K.subjectId?{...B,lectures:[...B.lectures,Z]}:B)),e(X=>X.map(B=>({...B,subjects:B.subjects.map(Q=>Q.id===K.subjectId?{...Q,lectures:[...Q.lectures,Z]}:Q)}))),console.log("âœ… Added lecture to offline mode:",Z.name);return}try{await L(async()=>{const Z=Tt($e,"Subjects",K.subjectId),X=it(Z,"lectures"),B={title:K.name,description:K.description||"",imageUrl:K.imageUrl||"",order:K.order||1,uploadedBy:K.uploadedBy||"Current User",createdAt:new Date,lectureId:""};console.log("ðŸ“ Creating lecture in subcollection:",B);const Q=await bn(X,B);await ln(Q,{lectureId:Q.id}),console.log("âœ… Created lecture document with ID:",Q.id),console.log("ðŸ“ Path: /Subjects/"+K.subjectId+"/lectures/"+Q.id),b(ee=>ee+1)})}catch(Z){console.error("Error creating lecture:",Z),v(!0),await q(K)}},P=async(K,Z)=>{if(g){a(X=>X.map(B=>B.id===K?{...B,lectures:B.lectures.filter(Q=>Q.id!==Z)}:B)),e(X=>X.map(B=>({...B,subjects:B.subjects.map(Q=>Q.id===K?{...Q,lectures:Q.lectures.filter(ee=>ee.id!==Z)}:Q)}))),console.log("âœ… Deleted lecture from offline mode");return}try{const X=Tt($e,"Subjects",K),B=Tt(X,"lectures",Z);await Sr(B),console.log("âœ… Deleted lecture from Firebase"),b(Q=>Q+1)}catch(X){console.error("Error deleting lecture:",X)}},R=async K=>{if(K){if(g){a(Z=>Z.filter(X=>X.id!==K)),e(Z=>Z.map(X=>({...X,subjects:X.subjects.filter(B=>B.id!==K)}))),console.log("âœ… Deleted subject in offline mode");return}try{const Z=Tt($e,"Subjects",K);await Sr(Z),console.log("âœ… Deleted subject from Firebase"),b(X=>X+1)}catch(Z){console.error("Error deleting subject:",Z)}}},D=async(K,Z,X)=>{if(!(!K||!Z)){if(g){e(B=>B.map(Q=>({...Q,subjects:Q.subjects.map(ee=>ee.id===K?{...ee,lectures:ee.lectures.map(U=>U.id===Z?{...U,videos:[...U.videos||[],{id:`video_${Date.now()}`,title:X.title,url:X.url,thumbnailUrl:X.thumbnailUrl||"",description:X.description||"",uploadedAt:new Date}]}:U)}:ee)})));return}try{const B=Tt($e,"Subjects",K,"lectures",Z);await bn(it(B,"videos"),{title:X.title,description:X.description||"",url:X.url,duration:X.duration||"",thumbnailUrl:X.thumbnailUrl||"",platform:X.platform||"",uploadedAt:new Date,uploadedBy:"Current User"}),b(Q=>Q+1)}catch(B){console.error("Error adding video:",B)}}},k=async(K,Z,X)=>{if(!(!K||!Z)){if(g){e(B=>B.map(Q=>({...Q,subjects:Q.subjects.map(ee=>ee.id===K?{...ee,lectures:ee.lectures.map(U=>U.id===Z?{...U,files:[...U.files||[],{id:`file_${Date.now()}`,title:X.title,url:X.fileUrl,description:X.description||"",uploadedAt:new Date}]}:U)}:ee)})));return}try{const B=Tt($e,"Subjects",K,"lectures",Z);await bn(it(B,"files"),{title:X.title,description:X.description||"",url:X.fileUrl,fileType:X.fileType||"",fileSize:X.fileSize||"",uploadedAt:new Date,uploadedBy:"Current User"}),b(Q=>Q+1)}catch(B){console.error("Error adding file:",B)}}},$=async(K,Z,X)=>{if(!(!K||!Z)){if(g){e(B=>B.map(Q=>({...Q,subjects:Q.subjects.map(ee=>ee.id===K?{...ee,lectures:ee.lectures.map(U=>U.id===Z?{...U,quizzes:[...U.quizzes||[],{id:`quiz_${Date.now()}`,title:X.title,description:X.description||"",duration:X.timeLimit||30,passRate:X.passingScore||70,questions:X.questions||[]}]}:U)}:ee)})));return}try{const B=Tt($e,"Subjects",K,"lectures",Z);await bn(it(B,"quizzes"),{title:X.title,description:X.description||"",duration:X.timeLimit||30,passRate:X.passingScore||70,questions:X.questions||[],createdAt:new Date,uploadedBy:"Current User"}),b(Q=>Q+1)}catch(B){console.error("Error adding quiz:",B)}}},z=async(K,Z={})=>{const X=Z.yearNumber||1,B=Z.name||`Year ${X}`,Q=Z.type||(X<=3?"basic":"clinical");if(g||!navigator.onLine){const ee={id:`year_${Date.now()}`,yearNumber:X,name:B,type:Q,batchName:"",batchId:K||void 0,imageUrl:"",academicSupervisor:"",actor:"",cr:"",groupUrl:"",subjects:[]};e(U=>[...U,ee]),K&&r(U=>U.map(Y=>Y.id===K?{...Y}:Y)),console.log("âœ… Added year in offline mode:",ee);return}try{await L(async()=>{if(K){const ee=Tt($e,"batches",K),U=it(ee,"years"),Y=await bn(U,{name:B,order:X,imageUrl:"",batch_name:B,createdAt:new Date});try{await ln(Y,{yearId:Y.id})}catch{}}else{const ee=it($e,"years"),U=await bn(ee,{name:B,order:X,imageUrl:"",batch_name:B,createdAt:new Date});try{await ln(U,{yearId:U.id})}catch{}}b(ee=>ee+1)})}catch(ee){console.error("Error creating year:",ee),v(!0),await z(K,Z)}};return{years:n,batches:t,subjects:s,loading:c,error:h,isOfflineMode:g,connectionStatus:S,retryConnection:A,updateYear:I,updateBatch:C,createSubject:V,createLecture:q,createYear:z,createBatch:async(K={})=>{const Z=K.batchName||"New Batch",X=K.imageUrl||"",B=K.cr||"",Q=`batch_temp_${Date.now()}`,ee={id:Q,batchName:Z,imageUrl:X,cr:B};if(r(U=>[ee,...U]),g||!navigator.onLine){console.log("âœ… Added batch in offline mode:",ee);return}try{await L(async()=>{const U=it($e,"batches"),Y=await bn(U,{batch_name:Z,image_url:X,cr:B,createdAt:new Date});try{await ln(Y,{batchId:Y.id})}catch{}const le={id:Y.id,batchName:Z,imageUrl:X,cr:B};r(Ee=>[le,...Ee.filter(ve=>ve.id!==Q)]),b(Ee=>Ee+1)})}catch(U){console.error("Error creating batch:",U),r(le=>le.filter(Ee=>Ee.id!==Q)),v(!0);const Y={id:`batch_${Date.now()}`,batchName:Z,imageUrl:X,cr:B};r(le=>[Y,...le])}},deleteBatch:async(K,Z={deleteYears:!0})=>{if(!K)return;const X=t,B=n;if(r(Q=>Q.filter(ee=>ee.id!==K)),e(Q=>Q.filter(ee=>(ee.batchId||ee.batch_name)!==K)),g||!navigator.onLine){console.log("âœ… Removed batch in offline mode:",K);return}try{await L(async()=>{const Q=Tt($e,"batches",K);if(Z.deleteYears)try{const ee=it(Q,"years"),U=await Dt(ee);for(const Y of U.docs)await Sr(Y.ref)}catch{const U=wi($e,"years"),Y=await Dt(U);for(const le of Y.docs){const Ee=le.data();(Ee.batchId||Ee.batch_id)===K&&await Sr(le.ref)}}else{const ee=wi($e,"years"),U=await Dt(ee);for(const Y of U.docs){const le=Y.data();if((le.batchId||le.batch_id)===K)try{await ln(Y.ref,{batchId:null,batch_name:null})}catch{}}}await Sr(Q),b(ee=>ee+1)})}catch(Q){throw console.error("Error deleting batch:",Q),r(X||[]),e(B||[]),Q}},deleteLecture:P,deleteSubject:R,addVideo:D,addFile:k,addQuiz:$}}const l5=[{id:1,type:"news",title:"New cardiology study published",time:"2 hours ago",author:"Dr. Smith"},{id:2,type:"video",title:"Anatomy lecture uploaded",time:"4 hours ago",author:"Prof. Johnson"},{id:3,type:"quiz",title:"Pharmacology quiz created",time:"6 hours ago",author:"Dr. Brown"},{id:4,type:"product",title:"New stethoscope added to store",time:"1 day ago",author:"Admin"}];function c5(){const{news:n,loading:e}=jx(),{products:t,loading:r}=MC(),{professors:s,loading:a}=FC(),{years:c,loading:u}=Ac(),h=n.length,m=s.length,g=t.reduce((b,S)=>b+(S.price||0),0);c.reduce((b,S)=>b+S.subjects.reduce((E,x)=>E+x.lectures.reduce((A,I)=>{var C;return A+(((C=I.videos)==null?void 0:C.length)||0)},0),0),0);const v=c.reduce((b,S)=>{var E;return b+(((E=S.subjects)==null?void 0:E.length)||0)},0),y=[{title:"Total News Articles",value:e?"...":String(h),change:"+12%",icon:_f,color:"text-blue-600"},{title:"Subjects",value:u?"...":String(v),change:"+5%",icon:cs,color:"text-green-600"},{title:"Active Professors",value:a?"...":String(m),change:"+2%",icon:nc,color:"text-purple-600"},{title:"Store Revenue",value:r?"...":`$${g.toLocaleString()}`,change:"+18%",icon:V1,color:"text-emerald-600"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),l.jsx("p",{className:"text-muted-foreground",children:"Welcome to the MedJust Admin Dashboard"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:y.map(b=>l.jsxs(we,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Je,{className:"text-sm font-medium",children:b.title}),l.jsx(b.icon,{className:`h-4 w-4 ${b.color}`})]}),l.jsxs(_e,{children:[l.jsx("div",{className:"text-2xl font-bold",children:b.value}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[l.jsxs(en,{variant:"secondary",className:"text-green-600",children:[l.jsx(CR,{className:"h-3 w-3 mr-1"}),b.change]}),l.jsx("span",{className:"text-muted-foreground",children:"from last month"})]})]})]},b.title))}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Recent Activity"}),l.jsx(Ct,{children:"Latest updates across all modules"})]}),l.jsx(_e,{children:l.jsx("div",{className:"space-y-4",children:l5.map(b=>l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium",children:b.title}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[l.jsx("span",{children:b.author}),l.jsx("span",{children:"â€¢"}),l.jsx("span",{children:b.time})]})]})]},b.id))})})]}),l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Quick Actions"}),l.jsx(Ct,{children:"Common administrative tasks"})]}),l.jsx(_e,{children:l.jsxs("div",{className:"grid gap-2",children:[l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(_f,{className:"h-5 w-5 text-blue-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Create News Article"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Publish new content"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(ks,{className:"h-5 w-5 text-green-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Upload Video"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Add learning resource"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(nc,{className:"h-5 w-5 text-purple-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Professor"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Register new faculty"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(py,{className:"h-5 w-5 text-emerald-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Product"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Expand store catalog"})]})]})]})})]})]})]})}const Ii=_.forwardRef(({className:n,...e},t)=>l.jsx("textarea",{className:tt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));Ii.displayName="Textarea";function VC(n){const e=_.useRef({value:n,previous:n});return _.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var Ax="Switch",[u5,Fz]=ji(Ax),[d5,h5]=u5(Ax),UC=_.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:s,defaultChecked:a,required:c,disabled:u,value:h="on",onCheckedChange:m,...g}=n,[v,y]=_.useState(null),b=vt(e,I=>y(I)),S=_.useRef(!1),E=v?!!v.closest("form"):!0,[x=!1,A]=Aa({prop:s,defaultProp:a,onChange:m});return l.jsxs(d5,{scope:t,checked:x,disabled:u,children:[l.jsx(He.button,{type:"button",role:"switch","aria-checked":x,"aria-required":c,"data-state":BC(x),"data-disabled":u?"":void 0,disabled:u,value:h,...g,ref:b,onClick:ze(n.onClick,I=>{A(C=>!C),E&&(S.current=I.isPropagationStopped(),S.current||I.stopPropagation())})}),E&&l.jsx(f5,{control:v,bubbles:!S.current,name:r,value:h,checked:x,required:c,disabled:u,style:{transform:"translateX(-100%)"}})]})});UC.displayName=Ax;var $C="SwitchThumb",zC=_.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,s=h5($C,t);return l.jsx(He.span,{"data-state":BC(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});zC.displayName=$C;var f5=n=>{const{control:e,checked:t,bubbles:r=!0,...s}=n,a=_.useRef(null),c=VC(t),u=cS(e);return _.useEffect(()=>{const h=a.current,m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==t&&v){const y=new Event("click",{bubbles:r});v.call(h,t),h.dispatchEvent(y)}},[c,t,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:a,style:{...n.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function BC(n){return n?"checked":"unchecked"}var qC=UC,m5=zC;const WC=_.forwardRef(({className:n,...e},t)=>l.jsx(qC,{className:tt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:l.jsx(m5,{className:tt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));WC.displayName=qC.displayName;function p5({news:n,onClose:e,onSave:t}){var x,A,I;const{years:r}=Ac(),[s,a]=_.useState(null),[c,u]=_.useState({title:"",content:"",imageUrl:"",videoUrl:"",tags:[],isPinned:!1,attachments:[],yearId:"",subjectId:""}),[h,m]=_.useState(""),[g,v]=_.useState(!1);_.useEffect(()=>{n&&u({title:n.title||"",content:n.content||"",imageUrl:n.imageUrl||"",videoUrl:n.videoUrl||"",tags:n.tags||[],isPinned:n.isPinned||!1,attachments:n.attachments||[],yearId:n.yearId||"",subjectId:n.subjectId||""})},[n]),_.useEffect(()=>{let C=!0;return(async()=>{try{if(r&&r.length>0||s)return;const V=await Dt(wi($e,"years")),q=[];V.forEach(P=>{const R=P.data();let D=R.order||1;if(R.name){const k=String(R.name).match(/\d+/);k&&(D=parseInt(k[0]))}q.push({id:P.id,yearNumber:D,type:D<=3?"basic":"clinical",subjects:R.subjects||[]})}),C&&q.length>0&&a(q)}catch{}})(),()=>{C=!1}},[r,s]);const y=async C=>{C.preventDefault(),v(!0);try{const L={...c,yearNumber:void 0,updatedAt:new Date,...n?{}:{createdAt:new Date,authorName:"Current User",authorId:"current-user-id",viewsCount:0}};if(c.yearId){const V=r.find(q=>q.id===c.yearId);V&&(L.yearNumber=V.yearNumber)}c.subjectId&&(L.subjectId=c.subjectId),t(L)}catch(L){console.error("Error saving news:",L)}finally{v(!1)}},b=()=>{h.trim()&&!c.tags.includes(h.trim())&&(u(C=>({...C,tags:[...C.tags,h.trim()]})),m(""))},S=C=>{u(L=>({...L,tags:L.tags.filter(V=>V!==C)}))},E=C=>{C.key==="Enter"&&(C.preventDefault(),b())};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Article":"Create Article"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the news article details":"Create a new news article for medical students"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(WC,{id:"pinned",checked:c.isPinned,onCheckedChange:C=>u(L=>({...L,isPinned:C}))}),l.jsxs(De,{htmlFor:"pinned",className:"flex items-center gap-2",children:[l.jsx(U1,{className:"h-4 w-4"}),"Pin Article"]})]})})]}),l.jsx("form",{onSubmit:y,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Article Content"}),l.jsx(Ct,{children:"Main article information and content"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"title",children:"Title *"}),l.jsx(Pe,{id:"title",placeholder:"Enter article title...",value:c.title,onChange:C=>u(L=>({...L,title:C.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"content",children:"Content *"}),l.jsx(Ii,{id:"content",placeholder:"Write your article content here...",value:c.content,onChange:C=>u(L=>({...L,content:C.target.value})),rows:12,required:!0})]})]})]}),l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Tags"}),l.jsx(Ct,{children:"Add relevant tags to help categorize this article"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Pe,{placeholder:"Add a tag...",value:h,onChange:C=>m(C.target.value),onKeyPress:E}),l.jsxs(se,{type:"button",onClick:b,variant:"outline",children:[l.jsx(Cu,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.tags.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(C=>l.jsxs(en,{variant:"secondary",className:"flex items-center gap-1",children:[C,l.jsx("button",{type:"button",onClick:()=>S(C),className:"ml-1 hover:text-destructive",children:l.jsx(rc,{className:"h-3 w-3"})})]},C))})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Media"}),l.jsx(Ct,{children:"Add images and videos to your article"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"imageUrl",children:"Featured Image URL"}),l.jsx(Pe,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:C=>u(L=>({...L,imageUrl:C.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"videoUrl",children:"Video URL"}),l.jsx(Pe,{id:"videoUrl",placeholder:"https://youtube.com/watch?v=...",value:c.videoUrl,onChange:C=>u(L=>({...L,videoUrl:C.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"yearId",children:"Related Year"}),l.jsxs("select",{id:"yearId",value:c.yearId,onChange:C=>u(L=>({...L,yearId:C.target.value,subjectId:""})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific year --"}),(s&&s.length>0?s:r)&&(s&&s.length>0?s:r).length>0?(s&&s.length>0?s:r).map(C=>l.jsx("option",{value:C.id,children:`Year ${C.yearNumber}`},C.id)):l.jsx("option",{value:"",children:"No years available"})]})]}),c.yearId&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(De,{htmlFor:"subjectId",children:"Related Subject"}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected year: ",(x=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))!=null&&x.yearNumber?`Year ${(A=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:A.yearNumber}`:""]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{id:"subjectId",value:c.subjectId,onChange:C=>u(L=>({...L,subjectId:C.target.value})),className:"flex-1 border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific subject --"}),(((I=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:I.subjects)||[]).map(C=>l.jsx("option",{value:C.id,children:C.name},C.id))]}),l.jsx(se,{type:"button",variant:"outline",size:"sm",onClick:()=>{var C;(C=navigator.clipboard)==null||C.writeText(c.yearId||""),alert("Year id copied")},children:"Copy ID"})]})]}),c.imageUrl&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{children:"Preview"}),l.jsx("img",{src:c.imageUrl,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border",onError:C=>{C.currentTarget.style.display="none"}})]})]})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsx(Je,{children:"Actions"})}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs(se,{type:"submit",className:"w-full",disabled:g,children:[l.jsx(qo,{className:"h-4 w-4 mr-2"}),g?"Saving...":n?"Update Article":"Create Article"]}),l.jsx(se,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Cancel"})]})]})]})]})})]})}function g5(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,a]=_.useState(!1),[c,u]=_.useState("all"),{news:h,loading:m,error:g,createNews:v,updateNews:y,deleteNews:b}=jx(),S=h.filter(I=>I.title.toLowerCase().includes(n.toLowerCase())||I.tags.some(C=>C.toLowerCase().includes(n.toLowerCase()))),E=I=>{r(I),a(!0)},x=async I=>{if(window.confirm("Are you sure you want to delete this article?"))try{await b(I)}catch(C){console.error("Error deleting news:",C),alert("Failed to delete article. Please try again.")}},A=()=>{r(null),a(!0)};return s?l.jsx(p5,{news:t,onClose:()=>{a(!1),r(null)},onSave:async I=>{try{t?await y(t.id,I):await v(I),a(!1),r(null)}catch(C){console.error("Error saving news:",C),alert("Failed to save article. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"News Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Create and manage news articles for medical students"})]}),l.jsxs(se,{onClick:A,className:"flex items-center gap-2",children:[l.jsx(Qt,{className:"h-4 w-4"}),"Create Article"]})]}),l.jsx(we,{children:l.jsx(_e,{className:"pt-6",children:l.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:l.jsxs("div",{className:"relative flex-1",children:[l.jsx(gc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Pe,{placeholder:"Search articles by title or tags...",value:n,onChange:I=>e(I.target.value),className:"pl-10"})]})})})}),m&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Ro,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading news articles..."})]})}),g&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading news"}),l.jsx("p",{className:"text-muted-foreground",children:g})]})}),!m&&!g&&l.jsx("div",{className:"space-y-4",children:S.map(I=>l.jsx(we,{className:"hover:shadow-md transition-shadow",children:l.jsx(_e,{className:"pt-6",children:l.jsxs("div",{className:"flex gap-4",children:[I.imageUrl&&l.jsx("img",{src:I.imageUrl,alt:I.title,className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:I.title}),I.isPinned&&l.jsx(U1,{className:"h-4 w-4 text-yellow-500"})]}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:I.content}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:I.tags.map(C=>l.jsxs(en,{variant:"secondary",className:"text-xs",children:[l.jsx(Cu,{className:"h-3 w-3 mr-1"}),C]},C))}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(wo,{className:"h-3 w-3"}),I.authorName]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(M1,{className:"h-3 w-3"}),I.createdAt.toLocaleDateString()]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(xR,{className:"h-3 w-3"}),I.viewsCount," views"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>E(I),children:l.jsx(sd,{className:"h-4 w-4"})}),l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>x(I.id),className:"text-destructive hover:text-destructive",children:l.jsx(An,{className:"h-4 w-4"})})]})]})})]})})},I.id))}),!m&&!g&&S.length===0&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(_f,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No articles match your search criteria.":"Start by creating your first news article."}),l.jsxs(se,{onClick:A,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Create Article"]})]})})]})}function v5(n,e){const t=_.createContext(e),r=a=>{const{children:c,...u}=a,h=_.useMemo(()=>u,Object.values(u));return l.jsx(t.Provider,{value:h,children:c})};r.displayName=n+"Provider";function s(a){const c=_.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[r,s]}function y5(n,e=[]){let t=[];function r(a,c){const u=_.createContext(c),h=t.length;t=[...t,c];const m=v=>{var A;const{scope:y,children:b,...S}=v,E=((A=y==null?void 0:y[n])==null?void 0:A[h])||u,x=_.useMemo(()=>S,Object.values(S));return l.jsx(E.Provider,{value:x,children:b})};m.displayName=a+"Provider";function g(v,y){var E;const b=((E=y==null?void 0:y[n])==null?void 0:E[h])||u,S=_.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${a}\``)}return[m,g]}const s=()=>{const a=t.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[n])||a;return _.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,x5(s,...e)]}function x5(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:m})=>{const v=h(a)[`__scope${m}`];return{...u,...v}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var qg="focusScope.autoFocusOnMount",Wg="focusScope.autoFocusOnUnmount",Ib={bubbles:!1,cancelable:!0},w5="FocusScope",Px=_.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...c}=n,[u,h]=_.useState(null),m=vn(s),g=vn(a),v=_.useRef(null),y=vt(e,E=>h(E)),b=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let E=function(C){if(b.paused||!u)return;const L=C.target;u.contains(L)?v.current=L:co(v.current,{select:!0})},x=function(C){if(b.paused||!u)return;const L=C.relatedTarget;L!==null&&(u.contains(L)||co(v.current,{select:!0}))},A=function(C){if(document.activeElement===document.body)for(const V of C)V.removedNodes.length>0&&co(u)};document.addEventListener("focusin",E),document.addEventListener("focusout",x);const I=new MutationObserver(A);return u&&I.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",x),I.disconnect()}}},[r,u,b.paused]),_.useEffect(()=>{if(u){Ab.add(b);const E=document.activeElement;if(!u.contains(E)){const A=new CustomEvent(qg,Ib);u.addEventListener(qg,m),u.dispatchEvent(A),A.defaultPrevented||(_5(T5(HC(u)),{select:!0}),document.activeElement===E&&co(u))}return()=>{u.removeEventListener(qg,m),setTimeout(()=>{const A=new CustomEvent(Wg,Ib);u.addEventListener(Wg,g),u.dispatchEvent(A),A.defaultPrevented||co(E??document.body,{select:!0}),u.removeEventListener(Wg,g),Ab.remove(b)},0)}}},[u,m,g,b]);const S=_.useCallback(E=>{if(!t&&!r||b.paused)return;const x=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,A=document.activeElement;if(x&&A){const I=E.currentTarget,[C,L]=E5(I);C&&L?!E.shiftKey&&A===L?(E.preventDefault(),t&&co(C,{select:!0})):E.shiftKey&&A===C&&(E.preventDefault(),t&&co(L,{select:!0})):A===I&&E.preventDefault()}},[t,r,b.paused]);return l.jsx(He.div,{tabIndex:-1,...c,ref:y,onKeyDown:S})});Px.displayName=w5;function _5(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(co(r,{select:e}),document.activeElement!==t)return}function E5(n){const e=HC(n),t=jb(e,n),r=jb(e.reverse(),n);return[t,r]}function HC(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function jb(n,e){for(const t of n)if(!b5(t,{upTo:e}))return t}function b5(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function S5(n){return n instanceof HTMLInputElement&&"select"in n}function co(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&S5(n)&&e&&n.select()}}var Ab=N5();function N5(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=Pb(n,e),n.unshift(e)},remove(e){var t;n=Pb(n,e),(t=n[0])==null||t.resume()}}}function Pb(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function T5(n){return n.filter(e=>e.tagName!=="A")}function C5(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var Lm=n=>{const{present:e,children:t}=n,r=I5(e),s=typeof t=="function"?t({present:r.isPresent}):_.Children.only(t),a=vt(r.ref,j5(s));return typeof t=="function"||r.isPresent?_.cloneElement(s,{ref:a}):null};Lm.displayName="Presence";function I5(n){const[e,t]=_.useState(),r=_.useRef({}),s=_.useRef(n),a=_.useRef("none"),c=n?"mounted":"unmounted",[u,h]=C5(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const m=Yh(r.current);a.current=u==="mounted"?m:"none"},[u]),Wt(()=>{const m=r.current,g=s.current;if(g!==n){const y=a.current,b=Yh(m);n?h("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?h("UNMOUNT"):h(g&&y!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Wt(()=>{if(e){let m;const g=e.ownerDocument.defaultView??window,v=b=>{const E=Yh(r.current).includes(b.animationName);if(b.target===e&&E&&(h("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",m=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},y=b=>{b.target===e&&(a.current=Yh(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{g.clearTimeout(m),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function Yh(n){return(n==null?void 0:n.animationName)||"none"}function j5(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Hg=0;function A5(){_.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Rb()),document.body.insertAdjacentElement("beforeend",n[1]??Rb()),Hg++,()=>{Hg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Hg--}},[])}function Rb(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Du="right-scroll-bar-position",Ou="width-before-scroll-bar",P5="with-scroll-bars-hidden",R5="--removed-body-scroll-bar-size";function Kg(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function k5(n,e){var t=_.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var D5=typeof window<"u"?_.useLayoutEffect:_.useEffect,kb=new WeakMap;function KC(n,e){var t=k5(null,function(r){return n.forEach(function(s){return Kg(s,r)})});return D5(function(){var r=kb.get(t);if(r){var s=new Set(r),a=new Set(n),c=t.current;s.forEach(function(u){a.has(u)||Kg(u,null)}),a.forEach(function(u){s.has(u)||Kg(u,c)})}kb.set(t,n)},[n]),t}function O5(n){return n}function L5(n,e){e===void 0&&(e=O5);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var c=e(a,r);return t.push(c),function(){t=t.filter(function(u){return u!==c})}},assignSyncMedium:function(a){for(r=!0;t.length;){var c=t;t=[],c.forEach(a)}t={push:function(u){return a(u)},filter:function(){return t}}},assignMedium:function(a){r=!0;var c=[];if(t.length){var u=t;t=[],u.forEach(a),c=t}var h=function(){var g=c;c=[],g.forEach(a)},m=function(){return Promise.resolve().then(h)};m(),t={push:function(g){c.push(g),m()},filter:function(g){return c=c.filter(g),t}}}};return s}function GC(n){n===void 0&&(n={});var e=L5(null);return e.options=$n({async:!0,ssr:!1},n),e}var QC=function(n){var e=n.sideCar,t=bc(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,$n({},t))};QC.isSideCarExport=!0;function YC(n,e){return n.useMedium(e),QC}var XC=GC(),Gg=function(){},Mm=_.forwardRef(function(n,e){var t=_.useRef(null),r=_.useState({onScrollCapture:Gg,onWheelCapture:Gg,onTouchMoveCapture:Gg}),s=r[0],a=r[1],c=n.forwardProps,u=n.children,h=n.className,m=n.removeScrollBar,g=n.enabled,v=n.shards,y=n.sideCar,b=n.noIsolation,S=n.inert,E=n.allowPinchZoom,x=n.as,A=x===void 0?"div":x,I=n.gapMode,C=bc(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=y,V=KC([t,e]),q=$n($n({},C),s);return _.createElement(_.Fragment,null,g&&_.createElement(L,{sideCar:XC,removeScrollBar:m,shards:v,noIsolation:b,inert:S,setCallbacks:a,allowPinchZoom:!!E,lockRef:t,gapMode:I}),c?_.cloneElement(_.Children.only(u),$n($n({},q),{ref:V})):_.createElement(A,$n({},q,{className:h,ref:V}),u))});Mm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Mm.classNames={fullWidth:Ou,zeroRight:Du};var M5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function F5(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=M5();return e&&n.setAttribute("nonce",e),n}function V5(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function U5(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var $5=function(){var n=0,e=null;return{add:function(t){n==0&&(e=F5())&&(V5(e,t),U5(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},z5=function(){var n=$5();return function(e,t){_.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},Rx=function(){var n=z5(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},B5={left:0,top:0,right:0,gap:0},Qg=function(n){return parseInt(n||"",10)||0},q5=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Qg(t),Qg(r),Qg(s)]},W5=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return B5;var e=q5(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},H5=Rx(),Kl="data-scroll-locked",K5=function(n,e,t,r){var s=n.left,a=n.top,c=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(P5,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Kl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Du,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Ou,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Du," .").concat(Du,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ou," .").concat(Ou,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Kl,`] {
    `).concat(R5,": ").concat(u,`px;
  }
`)},Db=function(){var n=parseInt(document.body.getAttribute(Kl)||"0",10);return isFinite(n)?n:0},G5=function(){_.useEffect(function(){return document.body.setAttribute(Kl,(Db()+1).toString()),function(){var n=Db()-1;n<=0?document.body.removeAttribute(Kl):document.body.setAttribute(Kl,n.toString())}},[])},JC=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;G5();var a=_.useMemo(function(){return W5(s)},[s]);return _.createElement(H5,{styles:K5(a,!e,s,t?"":"!important")})},Xv=!1;if(typeof window<"u")try{var Xh=Object.defineProperty({},"passive",{get:function(){return Xv=!0,!0}});window.addEventListener("test",Xh,Xh),window.removeEventListener("test",Xh,Xh)}catch{Xv=!1}var Pl=Xv?{passive:!1}:!1,Q5=function(n){return n.tagName==="TEXTAREA"},ZC=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Q5(n)&&t[e]==="visible")},Y5=function(n){return ZC(n,"overflowY")},X5=function(n){return ZC(n,"overflowX")},Ob=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=eI(n,r);if(s){var a=tI(n,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},J5=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},Z5=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},eI=function(n,e){return n==="v"?Y5(e):X5(e)},tI=function(n,e){return n==="v"?J5(e):Z5(e)},e9=function(n,e){return n==="h"&&e==="rtl"?-1:1},t9=function(n,e,t,r,s){var a=e9(n,window.getComputedStyle(e).direction),c=a*r,u=t.target,h=e.contains(u),m=!1,g=c>0,v=0,y=0;do{var b=tI(n,u),S=b[0],E=b[1],x=b[2],A=E-x-a*S;(S||A)&&eI(n,u)&&(v+=A,y+=S),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(v)<1||!g&&Math.abs(y)<1)&&(m=!0),m},Jh=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Lb=function(n){return[n.deltaX,n.deltaY]},Mb=function(n){return n&&"current"in n?n.current:n},n9=function(n,e){return n[0]===e[0]&&n[1]===e[1]},r9=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},s9=0,Rl=[];function i9(n){var e=_.useRef([]),t=_.useRef([0,0]),r=_.useRef(),s=_.useState(s9++)[0],a=_.useState(Rx)[0],c=_.useRef(n);_.useEffect(function(){c.current=n},[n]),_.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var E=uN([n.lockRef.current],(n.shards||[]).map(Mb),!0).filter(Boolean);return E.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),E.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=_.useCallback(function(E,x){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!c.current.allowPinchZoom;var A=Jh(E),I=t.current,C="deltaX"in E?E.deltaX:I[0]-A[0],L="deltaY"in E?E.deltaY:I[1]-A[1],V,q=E.target,P=Math.abs(C)>Math.abs(L)?"h":"v";if("touches"in E&&P==="h"&&q.type==="range")return!1;var R=Ob(P,q);if(!R)return!0;if(R?V=P:(V=P==="v"?"h":"v",R=Ob(P,q)),!R)return!1;if(!r.current&&"changedTouches"in E&&(C||L)&&(r.current=V),!V)return!0;var D=r.current||V;return t9(D,x,E,D==="h"?C:L)},[]),h=_.useCallback(function(E){var x=E;if(!(!Rl.length||Rl[Rl.length-1]!==a)){var A="deltaY"in x?Lb(x):Jh(x),I=e.current.filter(function(V){return V.name===x.type&&(V.target===x.target||x.target===V.shadowParent)&&n9(V.delta,A)})[0];if(I&&I.should){x.cancelable&&x.preventDefault();return}if(!I){var C=(c.current.shards||[]).map(Mb).filter(Boolean).filter(function(V){return V.contains(x.target)}),L=C.length>0?u(x,C[0]):!c.current.noIsolation;L&&x.cancelable&&x.preventDefault()}}},[]),m=_.useCallback(function(E,x,A,I){var C={name:E,delta:x,target:A,should:I,shadowParent:o9(A)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(L){return L!==C})},1)},[]),g=_.useCallback(function(E){t.current=Jh(E),r.current=void 0},[]),v=_.useCallback(function(E){m(E.type,Lb(E),E.target,u(E,n.lockRef.current))},[]),y=_.useCallback(function(E){m(E.type,Jh(E),E.target,u(E,n.lockRef.current))},[]);_.useEffect(function(){return Rl.push(a),n.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:y}),document.addEventListener("wheel",h,Pl),document.addEventListener("touchmove",h,Pl),document.addEventListener("touchstart",g,Pl),function(){Rl=Rl.filter(function(E){return E!==a}),document.removeEventListener("wheel",h,Pl),document.removeEventListener("touchmove",h,Pl),document.removeEventListener("touchstart",g,Pl)}},[]);var b=n.removeScrollBar,S=n.inert;return _.createElement(_.Fragment,null,S?_.createElement(a,{styles:r9(s)}):null,b?_.createElement(JC,{gapMode:n.gapMode}):null)}function o9(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const a9=YC(XC,i9);var nI=_.forwardRef(function(n,e){return _.createElement(Mm,$n({},n,{ref:e,sideCar:a9}))});nI.classNames=Mm.classNames;var l9=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},kl=new WeakMap,Zh=new WeakMap,ef={},Yg=0,rI=function(n){return n&&(n.host||rI(n.parentNode))},c9=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=rI(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},u9=function(n,e,t,r){var s=c9(e,Array.isArray(n)?n:[n]);ef[t]||(ef[t]=new WeakMap);var a=ef[t],c=[],u=new Set,h=new Set(s),m=function(v){!v||u.has(v)||(u.add(v),m(v.parentNode))};s.forEach(m);var g=function(v){!v||h.has(v)||Array.prototype.forEach.call(v.children,function(y){if(u.has(y))g(y);else try{var b=y.getAttribute(r),S=b!==null&&b!=="false",E=(kl.get(y)||0)+1,x=(a.get(y)||0)+1;kl.set(y,E),a.set(y,x),c.push(y),E===1&&S&&Zh.set(y,!0),x===1&&y.setAttribute(t,"true"),S||y.setAttribute(r,"true")}catch(A){console.error("aria-hidden: cannot operate on ",y,A)}})};return g(e),u.clear(),Yg++,function(){c.forEach(function(v){var y=kl.get(v)-1,b=a.get(v)-1;kl.set(v,y),a.set(v,b),y||(Zh.has(v)||v.removeAttribute(r),Zh.delete(v)),b||v.removeAttribute(t)}),Yg--,Yg||(kl=new WeakMap,kl=new WeakMap,Zh=new WeakMap,ef={})}},sI=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=l9(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),u9(r,s,t,"aria-hidden")):function(){return null}},kx="Dialog",[iI,Vz]=y5(kx),[d9,vs]=iI(kx),oI=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:a,modal:c=!0}=n,u=_.useRef(null),h=_.useRef(null),[m=!1,g]=Aa({prop:r,defaultProp:s,onChange:a});return l.jsx(d9,{scope:e,triggerRef:u,contentRef:h,contentId:bo(),titleId:bo(),descriptionId:bo(),open:m,onOpenChange:g,onOpenToggle:_.useCallback(()=>g(v=>!v),[g]),modal:c,children:t})};oI.displayName=kx;var aI="DialogTrigger",lI=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=vs(aI,t),a=vt(e,s.triggerRef);return l.jsx(He.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Lx(s.open),...r,ref:a,onClick:ze(n.onClick,s.onOpenToggle)})});lI.displayName=aI;var Dx="DialogPortal",[h9,cI]=iI(Dx,{forceMount:void 0}),uI=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,a=vs(Dx,e);return l.jsx(h9,{scope:e,forceMount:t,children:_.Children.map(r,c=>l.jsx(Lm,{present:t||a.open,children:l.jsx(ES,{asChild:!0,container:s,children:c})}))})};uI.displayName=Dx;var Yf="DialogOverlay",dI=_.forwardRef((n,e)=>{const t=cI(Yf,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,a=vs(Yf,n.__scopeDialog);return a.modal?l.jsx(Lm,{present:r||a.open,children:l.jsx(f9,{...s,ref:e})}):null});dI.displayName=Yf;var f9=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=vs(Yf,t);return l.jsx(nI,{as:ja,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(He.div,{"data-state":Lx(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Va="DialogContent",hI=_.forwardRef((n,e)=>{const t=cI(Va,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,a=vs(Va,n.__scopeDialog);return l.jsx(Lm,{present:r||a.open,children:a.modal?l.jsx(m9,{...s,ref:e}):l.jsx(p9,{...s,ref:e})})});hI.displayName=Va;var m9=_.forwardRef((n,e)=>{const t=vs(Va,n.__scopeDialog),r=_.useRef(null),s=vt(e,t.contentRef,r);return _.useEffect(()=>{const a=r.current;if(a)return sI(a)},[]),l.jsx(fI,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ze(n.onCloseAutoFocus,a=>{var c;a.preventDefault(),(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:ze(n.onPointerDownOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&a.preventDefault()}),onFocusOutside:ze(n.onFocusOutside,a=>a.preventDefault())})}),p9=_.forwardRef((n,e)=>{const t=vs(Va,n.__scopeDialog),r=_.useRef(!1),s=_.useRef(!1);return l.jsx(fI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,u;(c=n.onCloseAutoFocus)==null||c.call(n,a),a.defaultPrevented||(r.current||(u=t.triggerRef.current)==null||u.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var h,m;(h=n.onInteractOutside)==null||h.call(n,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=a.target;((m=t.triggerRef.current)==null?void 0:m.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),fI=_.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...c}=n,u=vs(Va,t),h=_.useRef(null),m=vt(e,h);return A5(),l.jsxs(l.Fragment,{children:[l.jsx(Px,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:l.jsx(vy,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Lx(u.open),...c,ref:m,onDismiss:()=>u.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(g9,{titleId:u.titleId}),l.jsx(y9,{contentRef:h,descriptionId:u.descriptionId})]})]})}),Ox="DialogTitle",mI=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=vs(Ox,t);return l.jsx(He.h2,{id:s.titleId,...r,ref:e})});mI.displayName=Ox;var pI="DialogDescription",gI=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=vs(pI,t);return l.jsx(He.p,{id:s.descriptionId,...r,ref:e})});gI.displayName=pI;var vI="DialogClose",yI=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=vs(vI,t);return l.jsx(He.button,{type:"button",...r,ref:e,onClick:ze(n.onClick,()=>s.onOpenChange(!1))})});yI.displayName=vI;function Lx(n){return n?"open":"closed"}var xI="DialogTitleWarning",[Uz,wI]=v5(xI,{contentName:Va,titleName:Ox,docsSlug:"dialog"}),g9=({titleId:n})=>{const e=wI(xI),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},v9="DialogDescriptionWarning",y9=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wI(v9).contentName}}.`;return _.useEffect(()=>{var a;const s=(a=n.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},x9=oI,w9=lI,_9=uI,_I=dI,EI=hI,bI=mI,SI=gI,NI=yI;const E9=x9,b9=w9,S9=_9,N9=NI,TI=_.forwardRef(({className:n,...e},t)=>l.jsx(_I,{ref:t,className:tt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));TI.displayName=_I.displayName;const CI=_.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(S9,{children:[l.jsx(TI,{}),l.jsxs(EI,{ref:r,className:tt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,l.jsxs(NI,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(rc,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));CI.displayName=EI.displayName;const II=({className:n,...e})=>l.jsx("div",{className:tt("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});II.displayName="DialogHeader";const jI=({className:n,...e})=>l.jsx("div",{className:tt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});jI.displayName="DialogFooter";const AI=_.forwardRef(({className:n,...e},t)=>l.jsx(bI,{ref:t,className:tt("text-lg font-semibold leading-none tracking-tight",n),...e}));AI.displayName=bI.displayName;const PI=_.forwardRef(({className:n,...e},t)=>l.jsx(SI,{ref:t,className:tt("text-sm text-muted-foreground",n),...e}));PI.displayName=SI.displayName;function RI({quiz:n,onClose:e,onSave:t}){const[r,s]=_.useState({title:"",description:"",timeLimit:30,passingScore:70,questions:[]}),[a,c]=_.useState({question:"",options:["","","",""],correctAnswer:0,imageUrl:"",weight:1}),[u,h]=_.useState(!1);_.useEffect(()=>{n&&s({title:n.title||"",description:n.description||"",timeLimit:n.timeLimit||30,passingScore:n.passingScore||70,questions:n.questions||[],type:n.type||"multiple_choice"})},[n]);const m=async E=>{E.preventDefault(),h(!0);try{const x={...r,...n?{}:{createdAt:new Date,createdBy:"Current User"}};x.type||(x.type="multiple_choice"),t(x)}catch(x){console.error("Error saving quiz:",x)}finally{h(!1)}},g=()=>{var A;const E=r.type==="flashcard",x=a.question.trim();if(E){const I=a.options&&String(a.options[0]).trim()||a.answer;if(x&&I){const C={...a,options:[String(((A=a.options)==null?void 0:A[0])||a.answer||"").trim()],correctAnswer:0};s(L=>({...L,questions:[...L.questions,C]})),c({question:"",options:[""],correctAnswer:0,imageUrl:"",weight:1})}return}x&&Array.isArray(a.options)&&a.options.filter(I=>String(I).trim()).length>=2&&typeof a.correctAnswer=="number"&&String(a.options[a.correctAnswer]||"").trim()&&(s(I=>({...I,questions:[...I.questions,{...a}]})),c({question:"",options:["","","",""],correctAnswer:0,imageUrl:"",weight:1}))},v=E=>{s(x=>({...x,questions:x.questions.filter((A,I)=>I!==E)}))},y=(E,x)=>{const A=[...a.options||[]];A[E]=x,c(I=>({...I,options:A}))},b=()=>{c(E=>({...E,options:[...E.options||[],""]}))},S=E=>{c(x=>{const A=[...x.options||[]];A.splice(E,1);let I=x.correctAnswer;return I>=A.length&&(I=Math.max(0,A.length-1)),{...x,options:A,correctAnswer:I}})};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Quiz":"Create Quiz"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the quiz details and questions":"Create a new quiz for students"})]})]})}),l.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Je,{className:"flex items-center gap-2",children:[l.jsx(_i,{className:"h-5 w-5"}),"Quiz Information"]}),l.jsx(Ct,{children:"Basic information about the quiz"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"title",children:"Quiz Title *"}),l.jsx(Pe,{id:"title",placeholder:"Enter quiz title...",value:r.title,onChange:E=>s(x=>({...x,title:E.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"description",children:"Description"}),l.jsx(Ii,{id:"description",placeholder:"Describe what this quiz covers...",value:r.description,onChange:E=>s(x=>({...x,description:E.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(De,{htmlFor:"timeLimit",className:"flex items-center gap-2",children:[l.jsx(xf,{className:"h-4 w-4"}),"Time Limit (minutes)"]}),l.jsx(Pe,{id:"timeLimit",type:"number",min:"1",value:r.timeLimit,onChange:E=>s(x=>({...x,timeLimit:parseInt(E.target.value)||30}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(De,{htmlFor:"passingScore",className:"flex items-center gap-2",children:[l.jsx(TR,{className:"h-4 w-4"}),"Passing Score (%)"]}),l.jsx(Pe,{id:"passingScore",type:"number",min:"0",max:"100",value:r.passingScore,onChange:E=>s(x=>({...x,passingScore:parseInt(E.target.value)||70}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"quizType",children:"Quiz Type"}),l.jsxs("select",{id:"quizType",value:r.type||"multiple_choice",onChange:E=>s(x=>({...x,type:E.target.value})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),l.jsx("option",{value:"flashcard",children:"Flashcard"})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how this quiz will be presented to students."})]})]})]}),l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Add Question"}),l.jsx(Ct,{children:"Create multiple choice questions for the quiz"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"question",children:"Question"}),l.jsx(Ii,{id:"question",placeholder:"Enter your question...",value:a.question,onChange:E=>c(x=>({...x,question:E.target.value})),rows:3})]}),l.jsx("div",{className:"space-y-2",children:r.type==="flashcard"?l.jsxs(l.Fragment,{children:[l.jsx(De,{children:"Correct Answer"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{placeholder:"Correct answer",value:a.options[0]??a.answer??"",onChange:E=>{c(x=>({...x,options:[E.target.value]}))}}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"For flashcards enter the correct answer (single). Use [[answer]] in the question to create blanks."})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(De,{children:"Answer Options"}),l.jsxs("div",{className:"space-y-2",children:[a.options.map((E,x)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l.jsx(De,{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-sm",children:String.fromCharCode(65+x)}),l.jsx(Pe,{placeholder:`Option ${String.fromCharCode(65+x)}`,value:E,onChange:A=>y(x,A.target.value),className:a.correctAnswer===x?"ring-2 ring-green-500":""})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(se,{type:"button",variant:a.correctAnswer===x?"default":"outline",size:"sm",onClick:()=>c(A=>({...A,correctAnswer:x})),children:a.correctAnswer===x?"Correct":"Mark Correct"}),a.options.length>2&&l.jsx(se,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(x),children:"Remove"})]})]},x)),l.jsx("div",{children:l.jsx(se,{type:"button",variant:"outline",onClick:b,className:"mt-2",children:"Add Option"})})]})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(Pe,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:E=>c(x=>({...x,imageUrl:E.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"weight",children:"Question Weight"}),l.jsx(Pe,{id:"weight",type:"number",min:1,value:a.weight,onChange:E=>c(x=>({...x,weight:parseFloat(E.target.value)||1}))})]}),l.jsxs(se,{type:"button",onClick:g,className:"w-full",children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),r.questions.length>0&&l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Je,{children:["Quiz Questions (",r.questions.length,")"]})}),l.jsx(_e,{children:l.jsx("div",{className:"space-y-4",children:r.questions.map((E,x)=>l.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("p",{className:"font-medium",children:[x+1,". ",E.question]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(De,{className:"text-sm",children:"Weight"}),l.jsx(Pe,{type:"number",min:1,value:E.weight||1,onChange:A=>{const I=parseFloat(A.target.value)||1;s(C=>({...C,questions:C.questions.map((L,V)=>V===x?{...L,weight:I}:L)}))},className:"w-20 text-sm"})]})]}),l.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:E.options.map((A,I)=>l.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${E.correctAnswer===I?"bg-green-100 text-green-800":"bg-secondary/50"}`,children:[l.jsx("span",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+I)}),l.jsx("span",{className:"text-sm",children:A}),E.correctAnswer===I&&l.jsx(en,{variant:"outline",className:"ml-auto text-xs bg-green-200",children:"Correct"})]},I))})]}),l.jsx("div",{className:"flex flex-col items-end gap-2",children:l.jsx(se,{type:"button",variant:"ghost",size:"icon",onClick:()=>v(x),className:"text-destructive hover:text-destructive",children:l.jsx(An,{className:"h-4 w-4"})})})]})},x))})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:u||r.questions.length===0,children:[l.jsx(qo,{className:"h-4 w-4 mr-2"}),u?"Saving...":n?"Update Quiz":"Create Quiz"]})]})]})]})}function kI({year:n,yearType:e,onClose:t,onSave:r}){const[s,a]=_.useState({name:"",imageUrl:"",hours:3}),[c,u]=_.useState(!1),h=async m=>{m.preventDefault(),u(!0);try{const g={name:s.name,imageUrl:s.imageUrl||"",hours:s.hours||3,createdAt:new Date};r(g)}catch(g){console.error("Error saving subject:",g)}finally{u(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:t,children:[l.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Add Subject to Year ",n]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e==="basic"?l.jsx(Nu,{className:"h-4 w-4 text-blue-600"}):l.jsx(Tu,{className:"h-4 w-4 text-red-600"}),l.jsxs("p",{className:"text-muted-foreground",children:["Adding to ",e==="basic"?"Basic":"Clinical"," Years â€¢ Year ",n]})]})]})]})}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsx(we,{className:`border-l-4 ${e==="basic"?"border-l-blue-500 bg-blue-50/50":"border-l-red-500 bg-red-50/50"}`,children:l.jsx(_e,{className:"pt-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[e==="basic"?l.jsx(Nu,{className:"h-8 w-8 text-blue-600"}):l.jsx(Tu,{className:"h-8 w-8 text-red-600"}),l.jsxs("div",{children:[l.jsxs("h3",{className:"font-semibold text-lg",children:["Year ",n]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:e==="basic"?"Basic Years":"Clinical Years"})]})]})})}),l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Je,{className:"flex items-center gap-2",children:[e==="basic"?l.jsx(Nu,{className:"h-5 w-5 text-blue-600"}):l.jsx(Tu,{className:"h-5 w-5 text-red-600"}),"Subject Information"]}),l.jsx(Ct,{children:"Basic information about the subject"})]}),l.jsx(_e,{className:"space-y-4",children:l.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"year",children:"Year"}),l.jsx(Pe,{id:"year",value:`Year ${n} (${e==="basic"?"Basic":"Clinical"})`,disabled:!0,className:"bg-muted"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"name",children:"Subject Name *"}),l.jsx(Pe,{id:"name",placeholder:"e.g., Anatomy & Physiology",value:s.name,onChange:m=>a(g=>({...g,name:m.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"hours",children:"Credit Hours"}),l.jsx(Pe,{id:"hours",type:"number",placeholder:"3",value:s.hours,onChange:m=>a(g=>({...g,hours:parseInt(m.target.value)||3})),min:"1",max:"12"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(Pe,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:s.imageUrl,onChange:m=>a(g=>({...g,imageUrl:m.target.value}))})]})]})})]}),s.name&&l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Preview"}),l.jsxs(Ct,{children:["How the subject will appear in Year ",n]})]}),l.jsx(_e,{children:l.jsxs("div",{className:"p-4 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.imageUrl?l.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-8 h-8 object-cover rounded",onError:m=>{m.currentTarget.style.display="none"}}):l.jsx(cs,{className:"h-5 w-5 text-primary"}),l.jsx("h3",{className:"font-semibold text-lg",children:s.name})]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Year ",n," â€¢ ",e," years"]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:c,children:[l.jsx(qo,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Subject"]})]})]})]})}function Fb(n,[e,t]){return Math.min(t,Math.max(e,n))}var T9=_.createContext(void 0);function Mx(n){const e=_.useContext(T9);return n||e||"ltr"}var C9="DismissableLayer",Jv="dismissableLayer.update",I9="dismissableLayer.pointerDownOutside",j9="dismissableLayer.focusOutside",Vb,DI=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),OI=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=n,m=_.useContext(DI),[g,v]=_.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=_.useState({}),S=vt(e,P=>v(P)),E=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),A=E.indexOf(x),I=g?E.indexOf(g):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,L=I>=A,V=R9(P=>{const R=P.target,D=[...m.branches].some(k=>k.contains(R));!L||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},y),q=k9(P=>{const R=P.target;[...m.branches].some(k=>k.contains(R))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},y);return uy(P=>{I===m.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},y),_.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Vb=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),Ub(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=Vb)}},[g,y,t,m]),_.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),Ub())},[g,m]),_.useEffect(()=>{const P=()=>b({});return document.addEventListener(Jv,P),()=>document.removeEventListener(Jv,P)},[]),l.jsx(He.div,{...h,ref:S,style:{pointerEvents:C?L?"auto":"none":void 0,...n.style},onFocusCapture:ze(n.onFocusCapture,q.onFocusCapture),onBlurCapture:ze(n.onBlurCapture,q.onBlurCapture),onPointerDownCapture:ze(n.onPointerDownCapture,V.onPointerDownCapture)})});OI.displayName=C9;var A9="DismissableLayerBranch",P9=_.forwardRef((n,e)=>{const t=_.useContext(DI),r=_.useRef(null),s=vt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(He.div,{...n,ref:s})});P9.displayName=A9;function R9(n,e=globalThis==null?void 0:globalThis.document){const t=vn(n),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){LI(I9,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function k9(n,e=globalThis==null?void 0:globalThis.document){const t=vn(n),r=_.useRef(!1);return _.useEffect(()=>{const s=a=>{a.target&&!r.current&&LI(j9,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Ub(){const n=new CustomEvent(Jv);document.dispatchEvent(n)}function LI(n,e,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?em(s,a):s.dispatchEvent(a)}var Xg=0;function D9(){_.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??$b()),document.body.insertAdjacentElement("beforeend",n[1]??$b()),Xg++,()=>{Xg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Xg--}},[])}function $b(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",n}var O9="Portal",MI=_.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,a]=_.useState(!1);Wt(()=>a(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Zf.createPortal(l.jsx(He.div,{...r,ref:e}),c):null});MI.displayName=O9;var FI=GC(),Jg=function(){},Fm=_.forwardRef(function(n,e){var t=_.useRef(null),r=_.useState({onScrollCapture:Jg,onWheelCapture:Jg,onTouchMoveCapture:Jg}),s=r[0],a=r[1],c=n.forwardProps,u=n.children,h=n.className,m=n.removeScrollBar,g=n.enabled,v=n.shards,y=n.sideCar,b=n.noIsolation,S=n.inert,E=n.allowPinchZoom,x=n.as,A=x===void 0?"div":x,I=n.gapMode,C=bc(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=y,V=KC([t,e]),q=$n($n({},C),s);return _.createElement(_.Fragment,null,g&&_.createElement(L,{sideCar:FI,removeScrollBar:m,shards:v,noIsolation:b,inert:S,setCallbacks:a,allowPinchZoom:!!E,lockRef:t,gapMode:I}),c?_.cloneElement(_.Children.only(u),$n($n({},q),{ref:V})):_.createElement(A,$n({},q,{className:h,ref:V}),u))});Fm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fm.classNames={fullWidth:Ou,zeroRight:Du};var Zv=!1;if(typeof window<"u")try{var tf=Object.defineProperty({},"passive",{get:function(){return Zv=!0,!0}});window.addEventListener("test",tf,tf),window.removeEventListener("test",tf,tf)}catch{Zv=!1}var Dl=Zv?{passive:!1}:!1,L9=function(n){return n.tagName==="TEXTAREA"},VI=function(n,e){var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!L9(n)&&t[e]==="visible")},M9=function(n){return VI(n,"overflowY")},F9=function(n){return VI(n,"overflowX")},zb=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=UI(n,r);if(s){var a=$I(n,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},V9=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},U9=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},UI=function(n,e){return n==="v"?M9(e):F9(e)},$I=function(n,e){return n==="v"?V9(e):U9(e)},$9=function(n,e){return n==="h"&&e==="rtl"?-1:1},z9=function(n,e,t,r,s){var a=$9(n,window.getComputedStyle(e).direction),c=a*r,u=t.target,h=e.contains(u),m=!1,g=c>0,v=0,y=0;do{var b=$I(n,u),S=b[0],E=b[1],x=b[2],A=E-x-a*S;(S||A)&&UI(n,u)&&(v+=A,y+=S),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(v)<1||!g&&Math.abs(y)<1)&&(m=!0),m},nf=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Bb=function(n){return[n.deltaX,n.deltaY]},qb=function(n){return n&&"current"in n?n.current:n},B9=function(n,e){return n[0]===e[0]&&n[1]===e[1]},q9=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},W9=0,Ol=[];function H9(n){var e=_.useRef([]),t=_.useRef([0,0]),r=_.useRef(),s=_.useState(W9++)[0],a=_.useState(Rx)[0],c=_.useRef(n);_.useEffect(function(){c.current=n},[n]),_.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var E=uN([n.lockRef.current],(n.shards||[]).map(qb),!0).filter(Boolean);return E.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),E.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=_.useCallback(function(E,x){if("touches"in E&&E.touches.length===2)return!c.current.allowPinchZoom;var A=nf(E),I=t.current,C="deltaX"in E?E.deltaX:I[0]-A[0],L="deltaY"in E?E.deltaY:I[1]-A[1],V,q=E.target,P=Math.abs(C)>Math.abs(L)?"h":"v";if("touches"in E&&P==="h"&&q.type==="range")return!1;var R=zb(P,q);if(!R)return!0;if(R?V=P:(V=P==="v"?"h":"v",R=zb(P,q)),!R)return!1;if(!r.current&&"changedTouches"in E&&(C||L)&&(r.current=V),!V)return!0;var D=r.current||V;return z9(D,x,E,D==="h"?C:L)},[]),h=_.useCallback(function(E){var x=E;if(!(!Ol.length||Ol[Ol.length-1]!==a)){var A="deltaY"in x?Bb(x):nf(x),I=e.current.filter(function(V){return V.name===x.type&&(V.target===x.target||x.target===V.shadowParent)&&B9(V.delta,A)})[0];if(I&&I.should){x.cancelable&&x.preventDefault();return}if(!I){var C=(c.current.shards||[]).map(qb).filter(Boolean).filter(function(V){return V.contains(x.target)}),L=C.length>0?u(x,C[0]):!c.current.noIsolation;L&&x.cancelable&&x.preventDefault()}}},[]),m=_.useCallback(function(E,x,A,I){var C={name:E,delta:x,target:A,should:I,shadowParent:K9(A)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(L){return L!==C})},1)},[]),g=_.useCallback(function(E){t.current=nf(E),r.current=void 0},[]),v=_.useCallback(function(E){m(E.type,Bb(E),E.target,u(E,n.lockRef.current))},[]),y=_.useCallback(function(E){m(E.type,nf(E),E.target,u(E,n.lockRef.current))},[]);_.useEffect(function(){return Ol.push(a),n.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:y}),document.addEventListener("wheel",h,Dl),document.addEventListener("touchmove",h,Dl),document.addEventListener("touchstart",g,Dl),function(){Ol=Ol.filter(function(E){return E!==a}),document.removeEventListener("wheel",h,Dl),document.removeEventListener("touchmove",h,Dl),document.removeEventListener("touchstart",g,Dl)}},[]);var b=n.removeScrollBar,S=n.inert;return _.createElement(_.Fragment,null,S?_.createElement(a,{styles:q9(s)}):null,b?_.createElement(JC,{gapMode:n.gapMode}):null)}function K9(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const G9=YC(FI,H9);var zI=_.forwardRef(function(n,e){return _.createElement(Fm,$n({},n,{ref:e,sideCar:G9}))});zI.classNames=Fm.classNames;var Q9=[" ","Enter","ArrowUp","ArrowDown"],Y9=[" ","Enter"],wd="Select",[Vm,Um,X9]=cy(wd),[Pc,$z]=ji(wd,[X9,om]),$m=om(),[J9,Qo]=Pc(wd),[Z9,e$]=Pc(wd),BI=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:a,value:c,defaultValue:u,onValueChange:h,dir:m,name:g,autoComplete:v,disabled:y,required:b}=n,S=$m(e),[E,x]=_.useState(null),[A,I]=_.useState(null),[C,L]=_.useState(!1),V=Mx(m),[q=!1,P]=Aa({prop:r,defaultProp:s,onChange:a}),[R,D]=Aa({prop:c,defaultProp:u,onChange:h}),k=_.useRef(null),$=E?!!E.closest("form"):!0,[z,M]=_.useState(new Set),oe=Array.from(z).map(K=>K.props.value).join(";");return l.jsx(aD,{...S,children:l.jsxs(J9,{required:b,scope:e,trigger:E,onTriggerChange:x,valueNode:A,onValueNodeChange:I,valueNodeHasChildren:C,onValueNodeHasChildrenChange:L,contentId:bo(),value:R,onValueChange:D,open:q,onOpenChange:P,dir:V,triggerPointerDownPosRef:k,disabled:y,children:[l.jsx(Vm.Provider,{scope:e,children:l.jsx(Z9,{scope:n.__scopeSelect,onNativeOptionAdd:_.useCallback(K=>{M(Z=>new Set(Z).add(K))},[]),onNativeOptionRemove:_.useCallback(K=>{M(Z=>{const X=new Set(Z);return X.delete(K),X})},[]),children:t})}),$?l.jsxs(mj,{"aria-hidden":!0,required:b,tabIndex:-1,name:g,autoComplete:v,value:R,onChange:K=>D(K.target.value),disabled:y,children:[R===void 0?l.jsx("option",{value:""}):null,Array.from(z)]},oe):null]})})};BI.displayName=wd;var qI="SelectTrigger",WI=_.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,a=$m(t),c=Qo(qI,t),u=c.disabled||r,h=vt(e,c.onTriggerChange),m=Um(t),[g,v,y]=pj(S=>{const E=m().filter(I=>!I.disabled),x=E.find(I=>I.value===c.value),A=gj(E,S,x);A!==void 0&&c.onValueChange(A.value)}),b=()=>{u||(c.onOpenChange(!0),y())};return l.jsx(xS,{asChild:!0,...a,children:l.jsx(He.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":fj(c.value)?"":void 0,...s,ref:h,onClick:ze(s.onClick,S=>{S.currentTarget.focus()}),onPointerDown:ze(s.onPointerDown,S=>{const E=S.target;E.hasPointerCapture(S.pointerId)&&E.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&(b(),c.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)},S.preventDefault())}),onKeyDown:ze(s.onKeyDown,S=>{const E=g.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&v(S.key),!(E&&S.key===" ")&&Q9.includes(S.key)&&(b(),S.preventDefault())})})})});WI.displayName=qI;var HI="SelectValue",KI=_.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:a,placeholder:c="",...u}=n,h=Qo(HI,t),{onValueNodeHasChildrenChange:m}=h,g=a!==void 0,v=vt(e,h.onValueNodeChange);return Wt(()=>{m(g)},[m,g]),l.jsx(He.span,{...u,ref:v,style:{pointerEvents:"none"},children:fj(h.value)?l.jsx(l.Fragment,{children:c}):a})});KI.displayName=HI;var t$="SelectIcon",GI=_.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return l.jsx(He.span,{"aria-hidden":!0,...s,ref:e,children:r||"â–¼"})});GI.displayName=t$;var n$="SelectPortal",QI=n=>l.jsx(MI,{asChild:!0,...n});QI.displayName=n$;var Ua="SelectContent",YI=_.forwardRef((n,e)=>{const t=Qo(Ua,n.__scopeSelect),[r,s]=_.useState();if(Wt(()=>{s(new DocumentFragment)},[]),!t.open){const a=r;return a?$a.createPortal(l.jsx(XI,{scope:n.__scopeSelect,children:l.jsx(Vm.Slot,{scope:n.__scopeSelect,children:l.jsx("div",{children:n.children})})}),a):null}return l.jsx(JI,{...n,ref:e})});YI.displayName=Ua;var gi=10,[XI,Yo]=Pc(Ua),r$="SelectContentImpl",JI=_.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:c,side:u,sideOffset:h,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:y,collisionPadding:b,sticky:S,hideWhenDetached:E,avoidCollisions:x,...A}=n,I=Qo(Ua,t),[C,L]=_.useState(null),[V,q]=_.useState(null),P=vt(e,me=>L(me)),[R,D]=_.useState(null),[k,$]=_.useState(null),z=Um(t),[M,oe]=_.useState(!1),K=_.useRef(!1);_.useEffect(()=>{if(C)return sI(C)},[C]),D9();const Z=_.useCallback(me=>{const[Te,...ke]=z().map(Ke=>Ke.ref.current),[Ce]=ke.slice(-1),Me=document.activeElement;for(const Ke of me)if(Ke===Me||(Ke==null||Ke.scrollIntoView({block:"nearest"}),Ke===Te&&V&&(V.scrollTop=0),Ke===Ce&&V&&(V.scrollTop=V.scrollHeight),Ke==null||Ke.focus(),document.activeElement!==Me))return},[z,V]),X=_.useCallback(()=>Z([R,C]),[Z,R,C]);_.useEffect(()=>{M&&X()},[M,X]);const{onOpenChange:B,triggerPointerDownPosRef:Q}=I;_.useEffect(()=>{if(C){let me={x:0,y:0};const Te=Ce=>{var Me,Ke;me={x:Math.abs(Math.round(Ce.pageX)-(((Me=Q.current)==null?void 0:Me.x)??0)),y:Math.abs(Math.round(Ce.pageY)-(((Ke=Q.current)==null?void 0:Ke.y)??0))}},ke=Ce=>{me.x<=10&&me.y<=10?Ce.preventDefault():C.contains(Ce.target)||B(!1),document.removeEventListener("pointermove",Te),Q.current=null};return Q.current!==null&&(document.addEventListener("pointermove",Te),document.addEventListener("pointerup",ke,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Te),document.removeEventListener("pointerup",ke,{capture:!0})}}},[C,B,Q]),_.useEffect(()=>{const me=()=>B(!1);return window.addEventListener("blur",me),window.addEventListener("resize",me),()=>{window.removeEventListener("blur",me),window.removeEventListener("resize",me)}},[B]);const[ee,U]=pj(me=>{const Te=z().filter(Me=>!Me.disabled),ke=Te.find(Me=>Me.ref.current===document.activeElement),Ce=gj(Te,me,ke);Ce&&setTimeout(()=>Ce.ref.current.focus())}),Y=_.useCallback((me,Te,ke)=>{const Ce=!K.current&&!ke;(I.value!==void 0&&I.value===Te||Ce)&&(D(me),Ce&&(K.current=!0))},[I.value]),le=_.useCallback(()=>C==null?void 0:C.focus(),[C]),Ee=_.useCallback((me,Te,ke)=>{const Ce=!K.current&&!ke;(I.value!==void 0&&I.value===Te||Ce)&&$(me)},[I.value]),ve=r==="popper"?ey:ZI,ce=ve===ey?{side:u,sideOffset:h,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:y,collisionPadding:b,sticky:S,hideWhenDetached:E,avoidCollisions:x}:{};return l.jsx(XI,{scope:t,content:C,viewport:V,onViewportChange:q,itemRefCallback:Y,selectedItem:R,onItemLeave:le,itemTextRefCallback:Ee,focusSelectedItem:X,selectedItemText:k,position:r,isPositioned:M,searchRef:ee,children:l.jsx(zI,{as:ja,allowPinchZoom:!0,children:l.jsx(Px,{asChild:!0,trapped:I.open,onMountAutoFocus:me=>{me.preventDefault()},onUnmountAutoFocus:ze(s,me=>{var Te;(Te=I.trigger)==null||Te.focus({preventScroll:!0}),me.preventDefault()}),children:l.jsx(OI,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:me=>me.preventDefault(),onDismiss:()=>I.onOpenChange(!1),children:l.jsx(ve,{role:"listbox",id:I.contentId,"data-state":I.open?"open":"closed",dir:I.dir,onContextMenu:me=>me.preventDefault(),...A,...ce,onPlaced:()=>oe(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:ze(A.onKeyDown,me=>{const Te=me.ctrlKey||me.altKey||me.metaKey;if(me.key==="Tab"&&me.preventDefault(),!Te&&me.key.length===1&&U(me.key),["ArrowUp","ArrowDown","Home","End"].includes(me.key)){let Ce=z().filter(Me=>!Me.disabled).map(Me=>Me.ref.current);if(["ArrowUp","End"].includes(me.key)&&(Ce=Ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(me.key)){const Me=me.target,Ke=Ce.indexOf(Me);Ce=Ce.slice(Ke+1)}setTimeout(()=>Z(Ce)),me.preventDefault()}})})})})})})});JI.displayName=r$;var s$="SelectItemAlignedPosition",ZI=_.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,a=Qo(Ua,t),c=Yo(Ua,t),[u,h]=_.useState(null),[m,g]=_.useState(null),v=vt(e,P=>g(P)),y=Um(t),b=_.useRef(!1),S=_.useRef(!0),{viewport:E,selectedItem:x,selectedItemText:A,focusSelectedItem:I}=c,C=_.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&m&&E&&x&&A){const P=a.trigger.getBoundingClientRect(),R=m.getBoundingClientRect(),D=a.valueNode.getBoundingClientRect(),k=A.getBoundingClientRect();if(a.dir!=="rtl"){const Me=k.left-R.left,Ke=D.left-Me,yt=P.left-Ke,bt=P.width+yt,rn=Math.max(bt,R.width),Ot=window.innerWidth-gi,At=Fb(Ke,[gi,Ot-rn]);u.style.minWidth=bt+"px",u.style.left=At+"px"}else{const Me=R.right-k.right,Ke=window.innerWidth-D.right-Me,yt=window.innerWidth-P.right-Ke,bt=P.width+yt,rn=Math.max(bt,R.width),Ot=window.innerWidth-gi,At=Fb(Ke,[gi,Ot-rn]);u.style.minWidth=bt+"px",u.style.right=At+"px"}const $=y(),z=window.innerHeight-gi*2,M=E.scrollHeight,oe=window.getComputedStyle(m),K=parseInt(oe.borderTopWidth,10),Z=parseInt(oe.paddingTop,10),X=parseInt(oe.borderBottomWidth,10),B=parseInt(oe.paddingBottom,10),Q=K+Z+M+B+X,ee=Math.min(x.offsetHeight*5,Q),U=window.getComputedStyle(E),Y=parseInt(U.paddingTop,10),le=parseInt(U.paddingBottom,10),Ee=P.top+P.height/2-gi,ve=z-Ee,ce=x.offsetHeight/2,me=x.offsetTop+ce,Te=K+Z+me,ke=Q-Te;if(Te<=Ee){const Me=x===$[$.length-1].ref.current;u.style.bottom="0px";const Ke=m.clientHeight-E.offsetTop-E.offsetHeight,yt=Math.max(ve,ce+(Me?le:0)+Ke+X),bt=Te+yt;u.style.height=bt+"px"}else{const Me=x===$[0].ref.current;u.style.top="0px";const yt=Math.max(Ee,K+E.offsetTop+(Me?Y:0)+ce)+ke;u.style.height=yt+"px",E.scrollTop=Te-Ee+E.offsetTop}u.style.margin=`${gi}px 0`,u.style.minHeight=ee+"px",u.style.maxHeight=z+"px",r==null||r(),requestAnimationFrame(()=>b.current=!0)}},[y,a.trigger,a.valueNode,u,m,E,x,A,a.dir,r]);Wt(()=>C(),[C]);const[L,V]=_.useState();Wt(()=>{m&&V(window.getComputedStyle(m).zIndex)},[m]);const q=_.useCallback(P=>{P&&S.current===!0&&(C(),I==null||I(),S.current=!1)},[C,I]);return l.jsx(o$,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:q,children:l.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:L},children:l.jsx(He.div,{...s,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});ZI.displayName=s$;var i$="SelectPopperPosition",ey=_.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=gi,...a}=n,c=$m(t);return l.jsx(wS,{...c,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ey.displayName=i$;var[o$,Fx]=Pc(Ua,{}),ty="SelectViewport",ej=_.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,a=Yo(ty,t),c=Fx(ty,t),u=vt(e,a.onViewportChange),h=_.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(Vm.Slot,{scope:t,children:l.jsx(He.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"auto",...s.style},onScroll:ze(s.onScroll,m=>{const g=m.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:y}=c;if(y!=null&&y.current&&v){const b=Math.abs(h.current-g.scrollTop);if(b>0){const S=window.innerHeight-gi*2,E=parseFloat(v.style.minHeight),x=parseFloat(v.style.height),A=Math.max(E,x);if(A<S){const I=A+b,C=Math.min(S,I),L=I-C;v.style.height=C+"px",v.style.bottom==="0px"&&(g.scrollTop=L>0?L:0,v.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});ej.displayName=ty;var tj="SelectGroup",[a$,l$]=Pc(tj),c$=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=bo();return l.jsx(a$,{scope:t,id:s,children:l.jsx(He.div,{role:"group","aria-labelledby":s,...r,ref:e})})});c$.displayName=tj;var nj="SelectLabel",rj=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=l$(nj,t);return l.jsx(He.div,{id:s.id,...r,ref:e})});rj.displayName=nj;var Xf="SelectItem",[u$,sj]=Pc(Xf),ij=_.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:a,...c}=n,u=Qo(Xf,t),h=Yo(Xf,t),m=u.value===r,[g,v]=_.useState(a??""),[y,b]=_.useState(!1),S=vt(e,A=>{var I;return(I=h.itemRefCallback)==null?void 0:I.call(h,A,r,s)}),E=bo(),x=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(u$,{scope:t,value:r,disabled:s,textId:E,isSelected:m,onItemTextChange:_.useCallback(A=>{v(I=>I||((A==null?void 0:A.textContent)??"").trim())},[]),children:l.jsx(Vm.ItemSlot,{scope:t,value:r,disabled:s,textValue:g,children:l.jsx(He.div,{role:"option","aria-labelledby":E,"data-highlighted":y?"":void 0,"aria-selected":m&&y,"data-state":m?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:S,onFocus:ze(c.onFocus,()=>b(!0)),onBlur:ze(c.onBlur,()=>b(!1)),onPointerUp:ze(c.onPointerUp,x),onPointerMove:ze(c.onPointerMove,A=>{var I;s?(I=h.onItemLeave)==null||I.call(h):A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ze(c.onPointerLeave,A=>{var I;A.currentTarget===document.activeElement&&((I=h.onItemLeave)==null||I.call(h))}),onKeyDown:ze(c.onKeyDown,A=>{var C;((C=h.searchRef)==null?void 0:C.current)!==""&&A.key===" "||(Y9.includes(A.key)&&x(),A.key===" "&&A.preventDefault())})})})})});ij.displayName=Xf;var Eu="SelectItemText",oj=_.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...a}=n,c=Qo(Eu,t),u=Yo(Eu,t),h=sj(Eu,t),m=e$(Eu,t),[g,v]=_.useState(null),y=vt(e,A=>v(A),h.onItemTextChange,A=>{var I;return(I=u.itemTextRefCallback)==null?void 0:I.call(u,A,h.value,h.disabled)}),b=g==null?void 0:g.textContent,S=_.useMemo(()=>l.jsx("option",{value:h.value,disabled:h.disabled,children:b},h.value),[h.disabled,h.value,b]),{onNativeOptionAdd:E,onNativeOptionRemove:x}=m;return Wt(()=>(E(S),()=>x(S)),[E,x,S]),l.jsxs(l.Fragment,{children:[l.jsx(He.span,{id:h.textId,...a,ref:y}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?$a.createPortal(a.children,c.valueNode):null]})});oj.displayName=Eu;var aj="SelectItemIndicator",lj=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return sj(aj,t).isSelected?l.jsx(He.span,{"aria-hidden":!0,...r,ref:e}):null});lj.displayName=aj;var ny="SelectScrollUpButton",cj=_.forwardRef((n,e)=>{const t=Yo(ny,n.__scopeSelect),r=Fx(ny,n.__scopeSelect),[s,a]=_.useState(!1),c=vt(e,r.onScrollButtonChange);return Wt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const m=h.scrollTop>0;a(m)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?l.jsx(dj,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});cj.displayName=ny;var ry="SelectScrollDownButton",uj=_.forwardRef((n,e)=>{const t=Yo(ry,n.__scopeSelect),r=Fx(ry,n.__scopeSelect),[s,a]=_.useState(!1),c=vt(e,r.onScrollButtonChange);return Wt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const m=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<m;a(g)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?l.jsx(dj,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});uj.displayName=ry;var dj=_.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,a=Yo("SelectScrollButton",t),c=_.useRef(null),u=Um(t),h=_.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return _.useEffect(()=>()=>h(),[h]),Wt(()=>{var g;const m=u().find(v=>v.ref.current===document.activeElement);(g=m==null?void 0:m.ref.current)==null||g.scrollIntoView({block:"nearest"})},[u]),l.jsx(He.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ze(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:ze(s.onPointerMove,()=>{var m;(m=a.onItemLeave)==null||m.call(a),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:ze(s.onPointerLeave,()=>{h()})})}),d$="SelectSeparator",hj=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return l.jsx(He.div,{"aria-hidden":!0,...r,ref:e})});hj.displayName=d$;var sy="SelectArrow",h$=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=$m(t),a=Qo(sy,t),c=Yo(sy,t);return a.open&&c.position==="popper"?l.jsx(_S,{...s,...r,ref:e}):null});h$.displayName=sy;function fj(n){return n===""||n===void 0}var mj=_.forwardRef((n,e)=>{const{value:t,...r}=n,s=_.useRef(null),a=vt(e,s),c=VC(t);return _.useEffect(()=>{const u=s.current,h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==t&&g){const v=new Event("change",{bubbles:!0});g.call(u,t),u.dispatchEvent(v)}},[c,t]),l.jsx(nd,{asChild:!0,children:l.jsx("select",{...r,ref:a,defaultValue:t})})});mj.displayName="BubbleSelect";function pj(n){const e=vn(n),t=_.useRef(""),r=_.useRef(0),s=_.useCallback(c=>{const u=t.current+c;e(u),function h(m){t.current=m,window.clearTimeout(r.current),m!==""&&(r.current=window.setTimeout(()=>h(""),1e3))}(u)},[e]),a=_.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,a]}function gj(n,e,t){const s=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let c=f$(n,Math.max(a,0));s.length===1&&(c=c.filter(m=>m!==t));const h=c.find(m=>m.textValue.toLowerCase().startsWith(s.toLowerCase()));return h!==t?h:void 0}function f$(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var m$=BI,vj=WI,p$=KI,g$=GI,v$=QI,yj=YI,y$=ej,xj=rj,wj=ij,x$=oj,w$=lj,_j=cj,Ej=uj,bj=hj;const _$=m$,E$=p$,Sj=_.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(vj,{ref:r,className:tt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,l.jsx(g$,{asChild:!0,children:l.jsx(F1,{className:"h-4 w-4 opacity-50"})})]}));Sj.displayName=vj.displayName;const Nj=_.forwardRef(({className:n,...e},t)=>l.jsx(_j,{ref:t,className:tt("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(vR,{className:"h-4 w-4"})}));Nj.displayName=_j.displayName;const Tj=_.forwardRef(({className:n,...e},t)=>l.jsx(Ej,{ref:t,className:tt("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(F1,{className:"h-4 w-4"})}));Tj.displayName=Ej.displayName;const Cj=_.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>l.jsx(v$,{children:l.jsxs(yj,{ref:s,className:tt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[l.jsx(Nj,{}),l.jsx(y$,{className:tt("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(Tj,{})]})}));Cj.displayName=yj.displayName;const b$=_.forwardRef(({className:n,...e},t)=>l.jsx(xj,{ref:t,className:tt("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));b$.displayName=xj.displayName;const Ij=_.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(wj,{ref:r,className:tt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(w$,{children:l.jsx(gR,{className:"h-4 w-4"})})}),l.jsx(x$,{children:e})]}));Ij.displayName=wj.displayName;const S$=_.forwardRef(({className:n,...e},t)=>l.jsx(bj,{ref:t,className:tt("-mx-1 my-1 h-px bg-muted",n),...e}));S$.displayName=bj.displayName;function jj({lectureId:n,onClose:e,onSave:t}){const[r,s]=_.useState({title:"",description:"",fileUrl:"",fileType:"",fileSize:""}),[a,c]=_.useState(!1),u=["PDF","DOCX","PPTX","XLSX","TXT","ZIP","MP3","MP4","JPG","PNG"],h=async m=>{m.preventDefault(),c(!0);try{const g={...r,id:`file_${Date.now()}`,lectureId:n,uploadedAt:new Date,uploadedBy:"Current User"};t(g)}catch(g){console.error("Error saving file:",g)}finally{c(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add File"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a file resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Je,{className:"flex items-center gap-2",children:[l.jsx(zs,{className:"h-5 w-5 text-blue-600"}),"File Information"]}),l.jsx(Ct,{children:"Upload or link to educational files"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"title",children:"File Title *"}),l.jsx(Pe,{id:"title",placeholder:"e.g., Anatomy Reference Guide",value:r.title,onChange:m=>s(g=>({...g,title:m.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"description",children:"Description"}),l.jsx(Ii,{id:"description",placeholder:"Describe the file content...",value:r.description,onChange:m=>s(g=>({...g,description:m.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"fileType",children:"File Type *"}),l.jsxs(_$,{value:r.fileType,onValueChange:m=>s(g=>({...g,fileType:m})),children:[l.jsx(Sj,{children:l.jsx(E$,{placeholder:"Select file type"})}),l.jsx(Cj,{children:u.map(m=>l.jsx(Ij,{value:m,children:m},m))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"fileSize",children:"File Size"}),l.jsx(Pe,{id:"fileSize",placeholder:"e.g., 2.5 MB",value:r.fileSize,onChange:m=>s(g=>({...g,fileSize:m.target.value}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"fileUrl",children:"File URL *"}),l.jsx(Pe,{id:"fileUrl",placeholder:"https://example.com/file.pdf or /uploads/file.pdf",value:r.fileUrl,onChange:m=>s(g=>({...g,fileUrl:m.target.value})),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload to Firebase Storage or use external links"})]})]})]}),r.title&&l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Preview"}),l.jsx(Ct,{children:"How the file will appear in the lecture"})]}),l.jsx(_e,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(zs,{className:"h-8 w-8 text-blue-600"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:r.title}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:r.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.fileType&&l.jsx(en,{variant:"secondary",children:r.fileType}),r.fileSize&&l.jsx(en,{variant:"outline",children:r.fileSize})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:a,children:[l.jsx(qo,{className:"h-4 w-4 mr-2"}),a?"Adding...":"Add File"]})]})]})]})}function Aj({lectureId:n,onClose:e,onSave:t}){const[r,s]=_.useState({title:"",description:"",url:"",duration:"",thumbnailUrl:"",platform:"YouTube"}),[a,c]=_.useState(!1),u=async v=>{v.preventDefault(),c(!0);try{const y={...r,id:`video_${Date.now()}`,lectureId:n,uploadedAt:new Date,uploadedBy:"Current User"};t(y)}catch(y){console.error("Error saving video:",y)}finally{c(!1)}},h=v=>{const y=v.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return y?y[1]:null},m=v=>{const y=h(v);return y?`https://img.youtube.com/vi/${y}/maxresdefault.jpg`:""},g=v=>{s(y=>({...y,url:v,thumbnailUrl:m(v)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Video"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a video resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Je,{className:"flex items-center gap-2",children:[l.jsx(ks,{className:"h-5 w-5 text-green-600"}),"Video Information"]}),l.jsx(Ct,{children:"Add YouTube videos or other video links"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"title",children:"Video Title *"}),l.jsx(Pe,{id:"title",placeholder:"e.g., Introduction to Human Anatomy",value:r.title,onChange:v=>s(y=>({...y,title:v.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"description",children:"Description"}),l.jsx(Ii,{id:"description",placeholder:"Describe the video content...",value:r.description,onChange:v=>s(y=>({...y,description:v.target.value})),rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"url",children:"Video URL *"}),l.jsx(Pe,{id:"url",placeholder:"https://youtube.com/watch?v=... or https://vimeo.com/...",value:r.url,onChange:v=>g(v.target.value),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports YouTube, Vimeo, and direct video links"})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"duration",children:"Duration"}),l.jsx(Pe,{id:"duration",placeholder:"e.g., 45:30",value:r.duration,onChange:v=>s(y=>({...y,duration:v.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"platform",children:"Platform"}),l.jsx(Pe,{id:"platform",value:r.platform,onChange:v=>s(y=>({...y,platform:v.target.value})),disabled:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"thumbnailUrl",children:"Thumbnail URL"}),l.jsx(Pe,{id:"thumbnailUrl",placeholder:"Auto-generated for YouTube videos",value:r.thumbnailUrl,onChange:v=>s(y=>({...y,thumbnailUrl:v.target.value}))})]})]})]}),r.title&&l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Preview"}),l.jsx(Ct,{children:"How the video will appear in the lecture"})]}),l.jsx(_e,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[r.thumbnailUrl?l.jsx("img",{src:r.thumbnailUrl,alt:r.title,className:"w-24 h-16 object-cover rounded"}):l.jsx("div",{className:"w-24 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(av,{className:"h-6 w-6 text-gray-400"})}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(ks,{className:"h-8 w-8 text-white opacity-80"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:r.title}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:r.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.duration&&l.jsxs(en,{variant:"secondary",className:"text-xs",children:[l.jsx(xf,{className:"h-3 w-3 mr-1"}),r.duration]}),l.jsxs(en,{variant:"outline",className:"text-xs",children:[l.jsx(ER,{className:"h-3 w-3 mr-1"}),r.platform]})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:a,children:[l.jsx(qo,{className:"h-4 w-4 mr-2"}),a?"Adding...":"Add Video"]})]})]})]})}function zm({subjectId:n,subjectName:e,yearType:t,onClose:r,onSave:s}){const[a,c]=_.useState({name:"",description:"",order:1,imageUrl:""}),[u,h]=_.useState(!1),m=async g=>{g.preventDefault(),h(!0);try{const v={...a,subjectId:n,createdAt:new Date,uploadedBy:"Current User"};s(v)}catch(v){console.error("Error saving lecture:",v)}finally{h(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:r,children:[l.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Lecture"}),l.jsxs("p",{className:"text-muted-foreground",children:["Add a new lecture to ",e]})]})]})}),l.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Je,{className:"flex items-center gap-2",children:[t==="basic"?l.jsx(Nu,{className:"h-5 w-5 text-blue-600"}):l.jsx(Tu,{className:"h-5 w-5 text-red-600"}),"Lecture Information"]}),l.jsx(Ct,{children:"Basic information about the lecture"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"name",children:"Lecture Name *"}),l.jsx(Pe,{id:"name",placeholder:"e.g., Introduction to Cell Biology",value:a.name,onChange:g=>c(v=>({...v,name:g.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"description",children:"Description"}),l.jsx(Ii,{id:"description",placeholder:"Describe what this lecture covers...",value:a.description,onChange:g=>c(v=>({...v,description:g.target.value})),rows:4})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"order",children:"Order"}),l.jsx(Pe,{id:"order",type:"number",min:"1",value:a.order,onChange:g=>c(v=>({...v,order:parseInt(g.target.value)||1}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(Pe,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:g=>c(v=>({...v,imageUrl:g.target.value}))})]})]})]})]}),a.name&&l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Preview"}),l.jsxs(Ct,{children:["How the lecture will appear in ",e]})]}),l.jsx(_e,{children:l.jsx("div",{className:"p-4 border rounded-lg bg-secondary/20",children:l.jsxs("div",{className:"flex items-start gap-3",children:[a.imageUrl?l.jsx("img",{src:a.imageUrl,alt:a.name,className:"w-16 h-16 object-cover rounded",onError:g=>{g.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(cs,{className:"h-6 w-6 text-gray-400"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:a.name}),a.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:a.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Lecture ",a.order," â€¢ ",e]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:u,children:[l.jsx(qo,{className:"h-4 w-4 mr-2"}),u?"Adding...":"Add Lecture"]})]})]})]})}async function hr(n){let e="dflp2vxn2",t="Med_just";const r="".replace(/\/$/,"");try{const I=await fetch(`${r}/api/cloudinary/config`);if(I.ok)try{const C=await I.json();e=C.cloudName||e,t=C.uploadPreset||C.upload_preset||t}catch{const C=I.headers.get("x-cloudinary-cloudname"),L=I.headers.get("x-cloudinary-upload-preset");C&&(e=e||C),L&&(t=t||L)}}catch{}if(!e)try{const I=localStorage.getItem("cloudinary.cloudName"),C=localStorage.getItem("cloudinary.uploadPreset");I&&(e=I,t=t||C||t)}catch{}if(!e)throw new Error("Cloudinary cloud name is not configured. Set VITE_CLOUDINARY_CLOUD_NAME in your environment or provide server config.");const s=`https://api.cloudinary.com/v1_1/${e}/upload`;try{const I=await Wb(n);if(I&&typeof I=="string"&&I.startsWith("http"))return I}catch(I){const C=String((I==null?void 0:I.message)||I||"");console.warn("Server upload failed, falling back to client upload:",C)}async function a(I){if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.");try{const C=I.clone();try{return{json:await C.json(),text:null}}catch{}}catch{if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}try{const C=await I.text();try{return{json:JSON.parse(C),text:C}}catch{return{json:null,text:C}}}catch(C){throw new Error("Could not read response body: "+String(C))}}async function c(I,C){const L=async(q,P)=>{const R=await fetch(q,P),D=await a(R).catch(k=>{throw k});return{res:R,body:D}},V=typeof I=="string"?I:I.url;try{return await L(V,C)}catch(q){const P=String((q==null?void 0:q.message)||q||"").toLowerCase();if(P.includes("response body already read")||P.includes("body already read")){const R=V+(V.includes("?")?`&_retry=${Date.now()}`:`?_retry=${Date.now()}`);try{return await L(R,C)}catch{}}if(P.includes("failed to fetch")||P.includes("networkerror")||P.includes("network request failed")||P.includes("script error")||P.includes("response body already read")||P.includes("body already read"))try{return await(async()=>await new Promise((R,D)=>{const k=new XMLHttpRequest;let $=C&&C.method||"GET",z=!1;try{if(k.open($,V,!0),C&&C.headers){const M=C.headers;Object.keys(M).forEach(oe=>{try{k.setRequestHeader(oe,M[oe])}catch{}})}if(k.onreadystatechange=()=>{if(k.readyState!==4)return;const M=k.status||0,oe={};(k.getAllResponseHeaders()||"").split(`\r
`).forEach(ee=>{const U=ee.indexOf(":");if(U>0){const Y=ee.substring(0,U).trim().toLowerCase(),le=ee.substring(U+1).trim();oe[Y]=le}});const Z={ok:M>=200&&M<400,status:M,headers:{get:ee=>oe[ee.toLowerCase()]||null}},X=k.responseText;let B=null;try{B=X?JSON.parse(X):null}catch{B=null}R({res:Z,body:{json:B,text:X}})},k.onerror=()=>D(new Error("XHR network error")),k.ontimeout=()=>D(new Error("XHR timeout")),C&&C.body)try{if(C.body instanceof FormData)z=!0,k.send(C.body);else if(typeof C.body=="string")k.send(C.body);else try{k.send(JSON.stringify(C.body))}catch{k.send(String(C.body))}}catch(M){D(M)}else k.send()}catch(M){D(M)}}))()}catch{}throw q}}if(t){const I=new FormData;I.append("file",n),I.append("upload_preset",t);const{res:C,body:L}=await c(s,{method:"POST",body:I});if(!C.ok){const V=L!=null&&L.json?JSON.stringify(L.json):(L==null?void 0:L.text)||"";throw new Error(`Cloudinary upload failed: ${C.status} ${V}`)}if(L.json&&(L.json.secure_url||L.json.url))return L.json.secure_url||L.json.url;if(L.text&&typeof L.text=="string"&&L.text.startsWith("http"))return L.text;throw new Error("Cloudinary upload returned unexpected response.")}const u="686641252611351";let h,m;try{const I=await c(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})});h=I.res,m=I.body}catch(I){const C=String((I==null?void 0:I.message)||I||"");if(C.toLowerCase().includes("response body already read")||C.toLowerCase().includes("body already read")){try{const L=await fetch(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})}),V=L.headers.get("x-cloudinary-signature"),q=L.headers.get("x-cloudinary-timestamp"),P=L.headers.get("x-cloudinary-apikey"),R=L.headers.get("x-cloudinary-cloudname"),D=L.headers.get("x-cloudinary-upload-preset");if(V&&q){const k=P||u||null,$=V,z=Number(q);R&&(e=e||R);const M=new FormData;M.append("file",n),k&&M.append("api_key",k),M.append("timestamp",String(z)),M.append("signature",$);const{res:oe,body:K}=await c(s,{method:"POST",body:M});if(!oe.ok){const Z=K!=null&&K.json?JSON.stringify(K.json):(K==null?void 0:K.text)||"",X=(Z||"").toLowerCase();if(X.includes("missing required parameter - api_key")||X.includes("missing required parameter - api key")||X.includes("missing required parameter 'api_key'")){const B=u||(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})();if(B){const Q=new FormData;Q.append("file",n),Q.append("api_key",B),Q.append("timestamp",String(z)),Q.append("signature",$);const{res:ee,body:U}=await c(s,{method:"POST",body:Q});if(!ee.ok){const Y=U!=null&&U.json?JSON.stringify(U.json):(U==null?void 0:U.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${ee.status} ${Y}`)}if(U.json&&(U.json.secure_url||U.json.url))return U.json.secure_url||U.json.url;if(U.text&&typeof U.text=="string"&&U.text.startsWith("http"))return U.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}if(t){const Q=new FormData;Q.append("file",n),Q.append("upload_preset",t);const ee=await fetch(s,{method:"POST",body:Q});if(!ee.ok){const le=await ee.text().catch(()=>"");throw new Error(`Cloudinary unsigned fallback failed: ${ee.status} ${le}`)}const U=await ee.json().catch(()=>null);if(U&&(U.secure_url||U.url))return U.secure_url||U.url;const Y=await ee.text().catch(()=>"");if(Y&&Y.startsWith("http"))return Y;throw new Error("Cloudinary unsigned fallback returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${oe.status} ${Z}`)}if(K.json&&(K.json.secure_url||K.json.url))return K.json.secure_url||K.json.url;if(K.text&&typeof K.text=="string"&&K.text.startsWith("http"))return K.text;throw new Error("Cloudinary signed upload returned unexpected response.")}if(D){const k=new FormData;k.append("file",n),k.append("upload_preset",D);const $=await fetch(s,{method:"POST",body:k});if(!$.ok){const oe=await $.text().catch(()=>"");throw new Error(`Cloudinary upload fallback failed: ${$.status} ${oe}`)}const z=await $.json().catch(()=>null);if(z&&(z.secure_url||z.url))return z.secure_url||z.url;const M=await $.text().catch(()=>"");if(M&&M.startsWith("http"))return M;throw new Error("Cloudinary fallback upload returned unexpected response.")}}catch{}try{const L=await Wb(n);if(L&&typeof L=="string"&&L.startsWith("http"))return L}catch{}throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}throw I}if(!h.ok){const I=m!=null&&m.json?JSON.stringify(m.json):(m==null?void 0:m.text)||"";throw new Error(`Cloudinary signing failed: ${h.status} ${I}`)}const g=m.json||{},{signature:v,apiKey:y,timestamp:b}=g,S=y||u;if(!v||!b)throw new Error("Cloudinary signing endpoint returned invalid data.");const E=new FormData;E.append("file",n),E.append("api_key",S),E.append("timestamp",String(b)),E.append("signature",v);const{res:x,body:A}=await c(s,{method:"POST",body:E});if(!x.ok){const I=A!=null&&A.json?JSON.stringify(A.json):(A==null?void 0:A.text)||"",C=(I||"").toLowerCase();if(C.includes("missing required parameter - api_key")||C.includes("missing required parameter - api key")||C.includes("missing required parameter 'api_key'")){const L=u;{const V=new FormData;V.append("file",n),V.append("api_key",L),V.append("timestamp",String(b)),V.append("signature",v);const{res:q,body:P}=await c(s,{method:"POST",body:V});if(!q.ok){const R=P!=null&&P.json?JSON.stringify(P.json):(P==null?void 0:P.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${q.status} ${R}`)}if(P.json&&(P.json.secure_url||P.json.url))return P.json.secure_url||P.json.url;if(P.text&&typeof P.text=="string"&&P.text.startsWith("http"))return P.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${x.status} ${I}`)}if(A.json&&(A.json.secure_url||A.json.url))return A.json.secure_url||A.json.url;if(A.text&&typeof A.text=="string"&&A.text.startsWith("http"))return A.text;throw new Error("Cloudinary signed upload returned unexpected response.")}async function Wb(n){const e=await new Promise((t,r)=>{const s=new FileReader;s.onload=()=>t(s.result),s.onerror=()=>r(new Error("Failed to read file")),s.readAsDataURL(n)});return await new Promise((t,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?t(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:e,filename:n.name}))}catch(s){r(s)}}).catch(async t=>{try{const r=String((t==null?void 0:t.message)||"").toLowerCase();if(r.includes("cloudinary not configured")||r.includes("404")||r.includes("server upload failed"))return await new Promise((s,a)=>{try{const c=new XMLHttpRequest;c.open("POST",`${API_BASE}/api/imagekit/upload`,!0),c.setRequestHeader("Content-Type","application/json"),c.onreadystatechange=()=>{if(c.readyState!==4)return;const u=c.status||0,h=c.responseText||"";if(u<200||u>=400){let m=h;try{const g=h?JSON.parse(h):null;g&&g.error&&(m=g.error)}catch{}return a(new Error(`ImageKit server upload failed: ${u} ${m}`))}try{const m=h?JSON.parse(h):{};return m&&(m.url||m.filePath)?s(m.url||m.filePath):a(new Error("ImageKit server upload returned unexpected response"))}catch{return a(new Error("ImageKit server upload returned non-JSON response"))}},c.onerror=()=>a(new Error("ImageKit server upload XHR error")),c.send(JSON.stringify({file:e,filename:n.name}))}catch(c){a(c)}})}catch{}throw t})}function Ia(n,e,t){try{n&&localStorage.setItem("cloudinary.cloudName",n),e&&localStorage.setItem("cloudinary.uploadPreset",e),t&&localStorage.setItem("cloudinary.apiKey",t)}catch(r){console.warn("Could not persist Cloudinary config to localStorage",r)}}async function Hb(n,e){if(!n)throw new Error("No URL provided");return await new Promise((t,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?t(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:n,filename:e||"remote"}))}catch(s){r(new Error("Failed to call server upload endpoint: "+String(s)))}})}const N$="".replace(/\/$/,"");async function T$(n,e){const t=await fetch(n,e);let r=null,s="";try{r=await t.json()}catch{try{s=await t.text()}catch{}}return{res:t,json:r,text:s}}async function Po(n,e){let t;typeof n=="string"?t=n:t=await new Promise((u,h)=>{const m=new FileReader;m.onload=()=>u(m.result),m.onerror=()=>h(new Error("Failed to read file")),m.readAsDataURL(n)});const r=`${N$}/api/imagekit/upload`,{res:s,json:a,text:c}=await T$(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:t,filename:e})});if(!s.ok){const u=a?JSON.stringify(a):c||"";throw new Error(`ImageKit server upload failed: ${s.status} ${u}`)}if(a&&(a.url||a.filePath||a.name))return a.url||a.filePath||a.name;throw new Error("ImageKit server upload returned unexpected response.")}function C$(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,a]=_.useState(!1),[c,u]=_.useState(!1),[h,m]=_.useState(!1),[g,v]=_.useState(!1),[y,b]=_.useState(!1),[S,E]=_.useState(null),[x,A]=_.useState(null),[I,C]=_.useState(null),[L,V]=_.useState("basic"),[q,P]=_.useState({}),[R,D]=_.useState(null),[k,$]=_.useState(""),[z,M]=_.useState(""),[oe,K]=_.useState(""),[Z,X]=_.useState(""),[B,Q]=_.useState(""),[ee,U]=_.useState(""),[Y,le]=_.useState(""),[Ee,ve]=_.useState(""),[ce,me]=_.useState(""),[Te,ke]=_.useState(null),Ce=Ec(),Me=Pi();Ne.useEffect(()=>{const ye=new URLSearchParams(Me.search).get("batch");ke(ye)},[Me.search]);const Ke=(J,ye)=>{P(be=>{var Qe;return{...be,[J]:{videos:!1,files:!1,quizzes:!1,...be[J]||{},[ye]:!((Qe=be[J])!=null&&Qe[ye])}}})},{years:yt,batches:bt,loading:rn,error:Ot,connectionStatus:At,retryConnection:_t,updateYear:ft,updateBatch:Pt,createSubject:fr,createLecture:Xs,createYear:qn,createBatch:Ir,deleteBatch:Wn,deleteLecture:Lt,deleteSubject:Nt,addVideo:Jn,addFile:Zn,addQuiz:mr}=Ac(),{news:Br}=jx(),jr=(J,ye)=>{C(J),A(ye),r(null),a(!0)},qr=(J,ye)=>{console.log("ðŸ”„ Opening subject form for year:",J.yearNumber,"type:",ye),E({id:J.id,number:J.yearNumber}),V(ye),u(!0)},Js=(J,ye)=>{C(J),V(ye),b(!0)},Wr=(J,ye)=>{C(J),A(ye),m(!0)},Rn=(J,ye)=>{C(J),A(ye),v(!0)};if(s)return l.jsx(RI,{quiz:t,onClose:()=>{a(!1),r(null),A(null)},onSave:async J=>{I!=null&&I.id&&x&&await mr(I.id,x,{title:J.title,description:J.description,questions:J.questions||[],timeLimit:J.timeLimit,passingScore:J.passingScore}),a(!1),r(null),A(null)}});if(console.log("ðŸ” Render check - isSubjectFormOpen:",c,"selectedYear:",S),c)return console.log("ðŸ“ Rendering SubjectForm"),l.jsx(kI,{year:S==null?void 0:S.number,yearType:L,onClose:()=>{u(!1),E(null)},onSave:async J=>{try{await fr({...J,yearId:(S==null?void 0:S.id)||"",order:1}),u(!1),E(null)}catch(ye){console.error("Error saving subject:",ye),alert("Failed to save subject. Please try again.")}}});if(y)return l.jsx(zm,{subjectId:I==null?void 0:I.id,subjectName:I==null?void 0:I.name,yearType:L,onClose:()=>{b(!1),C(null)},onSave:async J=>{try{await Xs(J),b(!1),C(null)}catch(ye){console.error("Error saving lecture:",ye),alert("Failed to save lecture. Please try again.")}}});if(h)return l.jsx(jj,{lectureId:x,onClose:()=>{m(!1),A(null)},onSave:async J=>{I!=null&&I.id&&x&&await Zn(I.id,x,J),m(!1),A(null)}});if(g)return l.jsx(Aj,{lectureId:x,onClose:()=>{v(!1),A(null)},onSave:async J=>{I!=null&&I.id&&x&&await Jn(I.id,x,J),v(!1),A(null)}});const Zs=(J,ye)=>{var be,Qe;return l.jsxs(we,{className:`border-l-4 ${ye==="basic"?"border-l-blue-500":"border-l-red-500"}`,children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[J.imageUrl?l.jsx("img",{src:J.imageUrl,alt:`Year ${J.yearNumber}`,className:"w-24 h-24 object-cover rounded-md flex-shrink-0",onError:Ue=>{Ue.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-24 h-24 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:ye==="basic"?l.jsx(Nu,{className:"h-6 w-6 text-blue-600"}):l.jsx(Tu,{className:"h-6 w-6 text-red-600"})}),l.jsx(Je,{className:"flex flex-col",children:R===J.id?l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(Pe,{value:k,onChange:Ue=>$(Ue.target.value),className:"w-48",placeholder:"Batch name"}),l.jsx(se,{size:"sm",onClick:async()=>{try{await(ft==null?void 0:ft(J.id,{batchName:k,batch_name:k})),D(null),$("")}catch(Ue){console.error(Ue),alert("Failed to save batch name")}},children:"Save"}),l.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{D(null),$("")},children:"Cancel"})]}):l.jsx(l.Fragment,{children:J.batchName?l.jsxs(l.Fragment,{children:[l.jsx(zn,{to:`/admin/years/${J.id}`,className:"text-lg font-bold text-foreground hover:underline",children:J.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[l.jsxs("span",{className:"text-sm text-muted",children:["Year ",J.yearNumber]}),J.name&&l.jsxs("span",{className:"ml-2",children:["â€¢ ",J.name]}),J.academicSupervisor&&l.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",J.academicSupervisor]}),J.cr&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",J.cr]}),J.actor&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",J.actor]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs(zn,{to:`/admin/years/${J.id}`,className:"text-lg font-medium text-blue-600 hover:underline",children:["Year ",J.yearNumber]}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[J.name?l.jsx("span",{className:"mr-2",children:J.name}):l.jsx("span",{className:"italic",children:"No batch name"}),J.academicSupervisor&&l.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",J.academicSupervisor]}),J.cr&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",J.cr]}),J.actor&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",J.actor]})]})]})})})]}),l.jsx("div",{className:"flex items-center gap-2"})]})}),l.jsx(_e,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(cs,{className:"h-4 w-4 text-blue-600"}),l.jsx("span",{className:"font-semibold",children:"Subjects"}),l.jsxs(en,{variant:"secondary",children:[((be=J.subjects)==null?void 0:be.length)||0," subjects"]}),l.jsxs(en,{variant:"outline",children:[(Br||[]).filter(Ue=>Ue.yearId===J.id).length," ","news"]})]}),l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>qr(J,ye),className:"flex items-center gap-1",children:[l.jsx(Qt,{className:"h-3 w-3"}),"Add Subject"]})]}),!J.subjects||J.subjects.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(cs,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),l.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No subjects added yet"}),l.jsx(se,{variant:"outline",size:"sm",onClick:()=>qr(J,ye),children:"Add first subject"})]}):l.jsx("div",{className:"grid gap-4",children:(Qe=J.subjects)==null?void 0:Qe.map(Ue=>{var ct;return l.jsxs(we,{className:"bg-secondary/10",children:[l.jsx(Ge,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[Ue.imageUrl?l.jsx("img",{src:Ue.imageUrl,alt:Ue.name,className:"w-8 h-8 object-cover rounded",onError:je=>{je.currentTarget.style.display="none"}}):l.jsx(cs,{className:"h-5 w-5 text-blue-600"}),l.jsx(zn,{to:`/admin/subjects/${Ue.id}`,className:"font-medium text-lg text-blue-600 hover:underline",children:Ue.name}),l.jsxs(en,{variant:"outline",className:"text-xs",children:[((ct=Ue.lectures)==null?void 0:ct.length)||0," lectures"]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>Js(Ue,ye),className:"h-8 px-3 text-xs",children:[l.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Add Lecture"]}),l.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:async()=>{if(confirm(`Delete subject "${Ue.name}"? This will remove its lectures.`))try{await Nt(Ue.id)}catch(je){console.error(je),alert("Failed to delete subject")}},children:l.jsx(An,{className:"h-3 w-3"})})]})]})}),Ue.lectures&&Ue.lectures.length>0&&l.jsx(_e,{className:"pt-0",children:l.jsxs("div",{className:"grid gap-3",children:[Ue.lectures.slice(0,3).map(je=>{var ki,ys,Di,Ar,Oi,zt,ei,er,xs;return l.jsx(we,{className:"bg-background border",children:l.jsx(_e,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:je.imageUrl?l.jsx("img",{src:je.imageUrl,alt:je.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(ks,{className:"h-6 w-6 text-muted-foreground"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:je.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:je.description||"No description available"}),l.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>Ke(je.id,"videos"),className:`h-6 px-2 text-xs ${(ki=q[je.id])!=null&&ki.videos?"bg-accent":""}`,children:[l.jsx(av,{className:"h-3 w-3 mr-1"}),"Videos (",((ys=je.videos)==null?void 0:ys.length)||0,")"]}),l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>Ke(je.id,"files"),className:`h-6 px-2 text-xs ${(Di=q[je.id])!=null&&Di.files?"bg-accent":""}`,children:[l.jsx(zs,{className:"h-3 w-3 mr-1"}),"Files (",((Ar=je.files)==null?void 0:Ar.length)||0,")"]}),l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>Ke(je.id,"quizzes"),className:`h-6 px-2 text-xs ${(Oi=q[je.id])!=null&&Oi.quizzes?"bg-accent":""}`,children:[l.jsx(_i,{className:"h-3 w-3 mr-1"}),"Quizzes (",((zt=je.quizzes)==null?void 0:zt.length)||0,")"]}),l.jsx(se,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${je.name}"?`))try{await Lt(Ue.id,je.id)}catch(Ht){console.error(Ht),alert("Failed to delete lecture")}},children:l.jsx(An,{className:"h-3 w-3"})})]}),((ei=q[je.id])==null?void 0:ei.videos)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Videos:"}),l.jsxs(se,{variant:"ghost",size:"xs",onClick:()=>Rn(Ue,je.id),className:"h-6 px-2 text-xs",children:[l.jsx(Qt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[je.videos&&je.videos.length>0?je.videos.slice(0,4).map(Ht=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(av,{className:"h-3 w-3 text-blue-600"}),l.jsx("a",{href:Ht.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate",children:Ht.title||Ht.name||"Untitled Video"})]},Ht.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"}),je.videos&&je.videos.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",je.videos.length-4," more videos"]})]})]}),((er=q[je.id])==null?void 0:er.files)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Files:"}),l.jsxs(se,{variant:"ghost",size:"xs",onClick:()=>Wr(Ue,je.id),className:"h-6 px-2 text-xs",children:[l.jsx(Qt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[je.files&&je.files.length>0?je.files.slice(0,4).map(Ht=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(zs,{className:"h-3 w-3 text-green-600"}),l.jsx("a",{href:Ht.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 hover:underline truncate",children:Ht.title||Ht.name||"Untitled File"})]},Ht.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"}),je.files&&je.files.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",je.files.length-4," more files"]})]})]}),((xs=q[je.id])==null?void 0:xs.quizzes)&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Quizzes:"}),l.jsxs(se,{variant:"ghost",size:"xs",onClick:()=>jr(Ue,je.id),className:"h-6 px-2 text-xs",children:[l.jsx(Qt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[je.quizzes&&je.quizzes.length>0?je.quizzes.slice(0,4).map(Ht=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_i,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{className:"text-xs text-purple-600",children:Ht.title||Ht.name||"Untitled Quiz"})]},Ht.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"}),je.quizzes&&je.quizzes.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",je.quizzes.length-4," more quizzes"]})]})]})]})]})})},je.id)}),Ue.lectures.length>3&&l.jsxs("div",{className:"text-center text-muted-foreground text-xs pt-2",children:["+",Ue.lectures.length-3," more lectures"]})]})})]},Ue.id)})})]})})]},J.yearNumber)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Academic Years Management"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-muted-foreground",children:"Manage curriculum by academic years, subjects, and lectures"}),At==="connecting"&&l.jsxs("span",{className:"flex items-center gap-1 text-blue-600 font-medium text-sm",children:[l.jsx(Ro,{className:"h-3 w-3 animate-spin"}),"Connecting..."]}),At==="connected"&&l.jsxs("span",{className:"flex items-center gap-1 text-green-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-green-600 rounded-full"}),"Connected"]}),At==="offline"&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs(E9,{children:[l.jsx(b9,{asChild:!0,children:l.jsxs(se,{children:[l.jsx(wR,{className:"h-4 w-4 mr-2"})," Add Batch"]})}),l.jsxs(CI,{children:[l.jsxs(II,{children:[l.jsx(AI,{children:"Add Batch"}),l.jsx(PI,{children:"Create a new batch for grouping years"})]}),l.jsxs("div",{className:"space-y-3 mt-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Batch name"}),l.jsx(Pe,{value:ee,onChange:J=>U(J.target.value),placeholder:"e.g., Batch A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"CR (optional)"}),l.jsx(Pe,{value:Y,onChange:J=>le(J.target.value),placeholder:"Class representative"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Group Link (optional)"}),l.jsx(Pe,{value:Ee,onChange:J=>ve(J.target.value),placeholder:"WhatsApp/Telegram group link"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Graduate Date (optional)"}),l.jsx(Pe,{value:ce,onChange:J=>me(J.target.value),placeholder:"e.g., 2025-06-15",type:"date"})]})]}),l.jsxs(jI,{className:"mt-4",children:[l.jsx(se,{onClick:async()=>{try{if(!ee||!ee.trim()){alert("Please provide a batch name");return}await(Ir==null?void 0:Ir({batchName:ee.trim(),cr:Y==null?void 0:Y.trim(),groupLink:Ee==null?void 0:Ee.trim(),group_link:Ee==null?void 0:Ee.trim(),graduateDate:ce==null?void 0:ce.trim(),graduate_date:ce==null?void 0:ce.trim()})),U(""),le(""),ve(""),me("");const J=document.querySelector("[data-dialog-close]");J&&J.click(),alert("Batch created")}catch(J){console.error(J),alert("Failed to create batch")}},children:"Create"}),l.jsx(N9,{asChild:!0,children:l.jsx(se,{variant:"ghost",className:"ml-2","data-dialog-close":!0,children:"Cancel"})})]})]})]})})]}),rn&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Ro,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading academic years..."})]})}),Ot&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading years"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:Ot}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(se,{onClick:_t,variant:"outline",children:"Retry Connection"}),l.jsx(se,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!rn&&!Ot&&l.jsxs(l.Fragment,{children:[l.jsx(we,{children:l.jsx(_e,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(gc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Pe,{placeholder:"Search lectures, subjects, or content...",value:n,onChange:J=>e(J.target.value),className:"pl-10"})]})})}),l.jsx("div",{className:"space-y-6",children:!bt||bt.length===0?l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(cs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No batches found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a batch to start adding academic years."})]})}):Te?(()=>{const J=(bt||[]).find(be=>be.id===Te)||null,ye=(yt||[]).filter(be=>(be.batchId||be.batch_name)===Te);return l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[J!=null&&J.imageUrl?l.jsx("img",{src:J.imageUrl,alt:J.batchName,className:"w-40 h-40 object-cover rounded-md flex-shrink-0"}):l.jsx("div",{className:"w-40 h-40 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:l.jsx(cs,{className:"h-6 w-6 text-muted-foreground"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:(J==null?void 0:J.batchName)||"Batch"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:J!=null&&J.cr?`CR: ${J.cr}`:""})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(se,{onClick:()=>{ke(null),Ce("/admin/years")},children:"Back to Batches"}),l.jsx(se,{size:"sm",variant:"ghost",onClick:async()=>{try{const be=document.createElement("input");be.type="file",be.accept="image/*",be.onchange=async()=>{var Ue;const Qe=(Ue=be.files)==null?void 0:Ue[0];if(Qe)try{let ct=null;try{ct=await hr(Qe)}catch(je){console.warn("Cloudinary upload failed, trying ImageKit",(je==null?void 0:je.message)||je),ct=await Po(Qe,Qe.name)}if(!ct){alert("Upload failed");return}await(Pt==null?void 0:Pt(J==null?void 0:J.id,{image_url:ct,imageUrl:ct})),alert("Image updated")}catch(ct){console.error(ct),alert("Failed to upload image")}},be.click()}catch(be){console.error(be),alert("Could not open file dialog")}},children:"Change Image"}),l.jsxs(se,{onClick:async()=>{try{const be=window.prompt("Enter year number for this batch:");if(!be)return;const Qe=parseInt(be,10);if(isNaN(Qe)){alert("Invalid");return}await(qn==null?void 0:qn((J==null?void 0:J.id)||null,{yearNumber:Qe})),alert("Year created")}catch(be){console.error(be),alert("Failed")}},children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"})," Add Year"]}),l.jsxs(se,{variant:"destructive",onClick:async()=>{try{if(!confirm("Delete this batch and all its years?"))return;await(Wn==null?void 0:Wn(J==null?void 0:J.id)),ke(null),Ce("/admin/years"),alert("Batch deleted")}catch(be){console.error(be),alert("Failed to delete batch")}},children:[l.jsx(An,{className:"h-4 w-4"})," Delete"]})]})]}),l.jsx("div",{className:"mt-4 space-y-4",children:ye.length===0?l.jsx(we,{children:l.jsx(_e,{className:"p-6 text-center",children:"No years in this batch yet."})}):ye.sort((be,Qe)=>be.yearNumber-Qe.yearNumber).map(be=>l.jsx("div",{children:Zs(be,be.type)},be.id))})]})})():l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:(bt||[]).map(J=>l.jsxs(we,{className:"cursor-pointer flex flex-col overflow-hidden",onClick:()=>{Ce(`/admin/years?batch=${J.id}`),ke(J.id)},children:[l.jsx(Ge,{className:"flex-1",children:l.jsxs("div",{className:"flex items-start gap-4",children:[J.imageUrl?l.jsx("img",{src:J.imageUrl,alt:J.batchName,className:"w-56 h-56 object-cover rounded-md flex-shrink-0"}):l.jsx("div",{className:"w-56 h-56 rounded-md flex-shrink-0 bg-muted"}),l.jsx("div",{className:"flex-1 min-w-0",children:R===J.id?l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Pe,{value:k,onChange:ye=>$(ye.target.value),placeholder:"Batch name",className:"w-48"}),l.jsx(Pe,{value:z||"",onChange:ye=>M(ye.target.value),placeholder:"CR",className:"w-32"}),l.jsx(Pe,{value:oe,onChange:ye=>K(ye.target.value),placeholder:"Image URL (or upload)",className:"w-64"}),l.jsx(Pe,{value:Z||"",onChange:ye=>X(ye.target.value),placeholder:"Group Link",className:"w-64"}),l.jsx(Pe,{value:B||"",onChange:ye=>Q(ye.target.value),placeholder:"Graduate Date (e.g., 2025-06-15)",type:"date",className:"w-64"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(se,{size:"sm",onClick:ye=>{ye.stopPropagation();try{const be=document.createElement("input");be.type="file",be.accept="image/*",be.onchange=async()=>{var Ue;const Qe=(Ue=be.files)==null?void 0:Ue[0];if(Qe)try{let ct=null;try{ct=await hr(Qe)}catch(je){console.warn("Cloudinary upload failed, trying ImageKit",(je==null?void 0:je.message)||je),ct=await Po(Qe,Qe.name)}if(!ct){alert("Upload failed");return}K(ct)}catch(ct){console.error(ct),alert("Upload failed")}},be.click()}catch(be){console.error(be),alert("Could not open file dialog")}},children:"Upload"}),l.jsx(se,{size:"sm",onClick:async ye=>{ye.stopPropagation();try{await(Pt==null?void 0:Pt(J.id,{batch_name:k,batchName:k,cr:z,image_url:oe,imageUrl:oe,group_link:Z,groupLink:Z,graduate_date:B,graduateDate:B})),D(null),$(""),M(""),K(""),X(""),Q(""),alert("Saved")}catch(be){console.error(be),alert("Failed to save")}},children:"Save"}),l.jsx(se,{size:"sm",variant:"ghost",onClick:ye=>{ye.stopPropagation(),D(null),$(""),M(""),K(""),X(""),Q("")},children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(Je,{className:"text-lg",children:J.batchName||"Batch"}),l.jsxs(Ct,{className:"text-sm text-muted-foreground space-y-1",children:[J.cr&&l.jsxs("div",{children:["CR: ",J.cr]}),J.graduateDate&&l.jsxs("div",{children:["Graduate: ",J.graduateDate]}),J.groupLink&&l.jsx("a",{href:J.groupLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",onClick:ye=>ye.stopPropagation(),children:"ðŸ“± Group Link"})]})]})})]})}),l.jsx(_e,{className:"mt-auto",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Years:"," ",(yt||[]).filter(ye=>(ye.batchId||ye.batch_name)===J.id).length]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(se,{size:"sm",variant:"outline",onClick:ye=>{ye.stopPropagation(),Ce(`/admin/years?batch=${J.id}`),ke(J.id)},children:"View Years"}),l.jsx(se,{size:"sm",variant:"ghost",onClick:ye=>{ye.stopPropagation(),D(J.id),$(J.batchName||""),M(J.cr||""),K(J.imageUrl||""),X(J.groupLink||J.group_link||""),Q(J.graduateDate||J.graduate_date||"")},children:"Edit"}),l.jsx(se,{size:"sm",variant:"ghost",onClick:async ye=>{ye.stopPropagation();try{const be=document.createElement("input");be.type="file",be.accept="image/*",be.onchange=async()=>{var Ue;const Qe=(Ue=be.files)==null?void 0:Ue[0];if(Qe)try{let ct=null;try{ct=await hr(Qe)}catch(je){console.warn("Cloudinary upload failed, trying ImageKit",(je==null?void 0:je.message)||je),ct=await Po(Qe,Qe.name)}if(!ct){alert("Upload failed");return}await(Pt==null?void 0:Pt(J.id,{image_url:ct,imageUrl:ct})),alert("Image updated")}catch(ct){console.error(ct),alert("Failed to upload image")}},be.click()}catch(be){console.error(be),alert("Could not open file dialog")}},children:"Change Image"}),l.jsx(se,{size:"sm",variant:"destructive",onClick:async ye=>{ye.stopPropagation();try{if(!confirm("Delete this batch and all its years? This cannot be undone."))return;await(Wn==null?void 0:Wn(J.id)),alert("Batch deleted")}catch(be){console.error(be),alert("Failed to delete batch")}},children:"Delete"})]})]})})]},J.id))})})]})]})}function I$(){var V;const{id:n}=HS(),[e,t]=_.useState(!1),[r,s]=_.useState(!1),[a,c]=_.useState(null),[u,h]=_.useState(null),[m,g]=_.useState(""),{years:v,loading:y,updateYear:b,createSubject:S,createLecture:E,deleteSubject:x,deleteLecture:A}=Ac(),I=v.find(q=>q.id===n);if(y)return l.jsx(we,{children:l.jsx(_e,{className:"text-center py-12",children:"Loading..."})});if(!I)return l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"Year not found"}),l.jsx("div",{className:"flex gap-2 justify-center",children:l.jsx(zn,{to:"/admin/years",children:l.jsx(se,{variant:"outline",children:"Back to Years"})})})]})});const C=async q=>{try{await S({...q,yearId:I.id}),t(!1)}catch(P){console.error(P),alert("Failed to add subject")}},L=async q=>{try{await E(q),s(!1),c(null)}catch(P){console.error(P),alert("Failed to add lecture")}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(zn,{to:"/admin/years",children:l.jsxs(se,{variant:"ghost",children:[l.jsx(Hs,{className:"h-4 w-4 mr-2"})," Back"]})}),l.jsxs("div",{children:[I.batchName?l.jsxs(l.Fragment,{children:[l.jsx("h1",{className:"text-2xl font-bold",children:I.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Year ",I.yearNumber]})]}):l.jsxs("h1",{className:"text-2xl font-bold",children:["Year ",I.yearNumber]}),l.jsx("p",{className:"text-muted-foreground",children:"Manage subjects and lectures for this year"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:!window.__yearEditing&&l.jsxs(l.Fragment,{children:[l.jsxs(se,{variant:"ghost",onClick:async()=>{try{const q=document.createElement("input");q.type="file",q.accept="image/*",q.onchange=async()=>{var R;const P=(R=q.files)==null?void 0:R[0];if(P)try{let D=null;try{D=await hr(P)}catch(k){console.warn("Cloudinary upload failed, attempting ImageKit fallback:",(k==null?void 0:k.message)||k);try{D=await Po(P,P.name)}catch($){throw console.error("ImageKit upload also failed:",$),k}}if(!D||typeof D!="string"||!D.startsWith("http")){console.error("Invalid upload response:",D),alert("Image upload failed: unexpected response from upload provider"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:D,image_url:D})),window.__yearEditing=!1}catch(D){console.error(D);const $=((D==null?void 0:D.message)||String(D)||"").toLowerCase();if($.includes("cloudinary cloud name is not configured")){const z=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!z){alert("No cloud name provided. Upload cancelled."),window.__yearEditing=!1;return}const M=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),oe=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{Ia(z,M||null,oe||null);const K=await hr(P);if(console.log("Cloudinary upload result after config:",K),!K||typeof K!="string"||!K.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:K,image_url:K}))}catch(K){console.error(K),alert("Image upload failed after configuring Cloudinary: "+(K.message||K))}window.__yearEditing=!1;return}else if($.includes("cloudinary signing did not return an api key")||$.includes("missing required parameter - api_key")||$.includes("missing required parameter 'api_key'")){const z=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(z&&z.trim())try{Ia(null,null,z.trim());const M=await hr(P);if(!M||typeof M!="string"||!M.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:M,image_url:M})),window.__yearEditing=!1;return}catch(M){console.error(M),alert("Image upload failed after setting API key: "+(M.message||M)),window.__yearEditing=!1;return}}alert("Image upload failed: "+(D.message||D))}},q.click()}catch(q){console.error(q),alert("Could not open file dialog")}},children:[l.jsx(jR,{className:"h-4 w-4 mr-2"})," ",I.imageUrl?"Change Image":"Add Image"]}),l.jsx(se,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("academicSupervisor"),g(I.academicSupervisor||I.acadmic_supervisor||"")},children:"Academic Supervisor"}),l.jsx(se,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("actor"),g(I.actor||"")},children:"Actor"}),l.jsx(se,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("groupUrl"),g(I.groupUrl||I.group_url||"")},children:"Group URL"}),l.jsx(se,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("batchName"),g(I.batchName||I.batch_name||"")},children:"Batch Name"}),I.imageUrl&&l.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm("Remove year image?"))try{await(b==null?void 0:b(I.id,{imageUrl:""}))}catch(q){console.error(q),alert("Failed to remove year image")}},children:l.jsx(An,{className:"h-3 w-3"})})]})})]}),u&&l.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[l.jsx(Pe,{placeholder:u==="image"?"Image URL":u==="groupUrl"?"Group URL":u==="academicSupervisor"?"Academic Supervisor":"Actor",value:m,onChange:q=>g(q.target.value),className:"w-full max-w-2xl"}),l.jsx(se,{onClick:async()=>{try{const q={};u==="image"?q.imageUrl=m:u==="academicSupervisor"?(q.academicSupervisor=m,q.acadmic_supervisor=m):u==="actor"?q.actor=m:u==="groupUrl"?(q.groupUrl=m,q.group_url=m):u==="batchName"&&(q.batchName=m,q.batch_name=m),await(b==null?void 0:b(I.id,q)),h(null),g(""),window.__yearEditing=!1}catch(q){console.error(q),alert("Failed to save field")}},children:"Save"}),l.jsx(se,{variant:"ghost",onClick:()=>{h(null),g(""),window.__yearEditing=!1},children:"Cancel"})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Je,{className:"flex items-center gap-2",children:["Subjects",l.jsxs(en,{variant:"secondary",children:[((V=I.subjects)==null?void 0:V.length)||0," subjects"]})]})}),l.jsxs(_e,{children:[l.jsx("div",{className:"flex justify-end mb-4",children:l.jsxs(se,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[l.jsx(Qt,{className:"h-3 w-3"})," Add Subject"]})}),!I.subjects||I.subjects.length===0?l.jsx("div",{className:"text-center py-8",children:"No subjects added yet."}):l.jsx("div",{className:"grid gap-4",children:I.subjects.map(q=>l.jsxs(we,{className:"bg-secondary/10",children:[l.jsx(Ge,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[q.imageUrl?l.jsx("img",{src:q.imageUrl,alt:q.name,className:"w-8 h-8 object-cover rounded"}):l.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-lg",children:q.name}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[(q.lectures||[]).length," lectures"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(se,{onClick:()=>{c(q),s(!0)},variant:"ghost",size:"sm",children:"Add Lecture"}),l.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete subject "${q.name}"?`))try{await x(q.id)}catch(P){console.error(P),alert("Failed to delete subject")}},children:l.jsx(An,{className:"h-3 w-3"})})]})]})}),q.lectures&&q.lectures.length>0&&l.jsx(_e,{children:l.jsx("div",{className:"grid gap-3",children:q.lectures.map(P=>l.jsx(we,{className:"bg-background border",children:l.jsx(_e,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:P.imageUrl?l.jsx("img",{src:P.imageUrl,alt:P.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"No image"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:P.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:P.description||"No description available"})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(se,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${P.name}"?`))try{await A(q.id,P.id)}catch(R){console.error(R),alert("Failed to delete lecture")}},children:l.jsx(An,{className:"h-3 w-3"})})})]})})},P.id))})})]},q.id))})]})]}),e&&l.jsx(kI,{year:I.yearNumber,yearType:I.type,onClose:()=>t(!1),onSave:C}),r&&a&&l.jsx(zm,{subjectId:a.id,subjectName:a.name,yearType:I.type,onClose:()=>{s(!1),c(null)},onSave:L})]})}function Bm(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const m=Cr(wi($e,"lectures")),g=Go(m,async v=>{var b;const y=[];for(const S of v.docs){const E=S.data(),x=S.id,A=S.ref,I=await Dt(it(A,"files")),C=[];I.forEach(R=>{var k;const D=R.data();C.push({id:R.id,title:D.title||"",fileUrl:D.fileUrl||"",fileType:D.fileType||"",fileSize:D.fileSize||"",description:D.description||"",uploadedAt:((k=D.uploadedAt)==null?void 0:k.toDate())||new Date,uploadedBy:D.uploadedBy||""})});const L=await Dt(it(A,"quizzes")),V=[];L.forEach(R=>{var k;const D=R.data();V.push({id:R.id,title:D.title||"",description:D.description||"",questions:D.questions||[],timeLimit:D.duration||30,passingScore:D.passRate||70,createdAt:((k=D.createdAt)==null?void 0:k.toDate())||new Date,createdBy:D.uploadedBy||""})});const q=await Dt(it(A,"videos")),P=[];q.empty?(E.videos||[]).forEach(D=>{var k,$;P.push({id:D.id||D.videoId||"",title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:(($=(k=D.uploadedAt)==null?void 0:k.toDate)==null?void 0:$.call(k))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}):q.forEach(R=>{var k,$;const D=R.data();P.push({id:R.id,title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:(($=(k=D.uploadedAt)==null?void 0:k.toDate)==null?void 0:$.call(k))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}),y.push({id:x,title:E.title||"",description:E.description||"",subject:E.subjectId||"Unknown",order:E.order||1,createdAt:((b=E.createdAt)==null?void 0:b.toDate())||new Date,createdBy:E.uploadedBy||"",videos:P,files:C,quizzes:V})}y.sort((S,E)=>(S.order||0)-(E.order||0)),e(y),r(!1)},v=>{console.error("Error fetching lectures:",v),a("Failed to fetch lectures"),r(!1)});return()=>g()},[]),{lectures:n,loading:t,error:s,createLecture:async(m,g)=>{try{const v=Tt($e,"Subjects",g),y=it(v,"lectures"),{videos:b,files:S,quizzes:E,...x}=m,A=await bn(y,{...x,videos:b,subjectId:g});if(S&&S.length>0){const I=it(A,"files");for(const C of S)await bn(I,C)}if(E&&E.length>0){const I=it(A,"quizzes");for(const C of E)await bn(I,C)}}catch(v){throw console.error("Error creating lecture:",v),v}},updateLecture:async(m,g)=>{try{const v=Cr(wi($e,"lectures")),y=await Dt(v);for(const b of y.docs)if(b.id===m){await ln(b.ref,g);break}}catch(v){throw console.error("Error updating lecture:",v),v}},deleteLecture:async m=>{try{const g=Cr(wi($e,"lectures")),v=await Dt(g);for(const y of v.docs)if(y.id===m){await Sr(y.ref);break}}catch(g){throw console.error("Error deleting lecture:",g),g}}}}function Kb(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,a]=_.useState(!1),{lectures:c,loading:u,error:h,createLecture:m,updateLecture:g}=Bm(),[v]=od(),y=v.get("lecture");v.get("tab");let b=c.filter(x=>x.title.toLowerCase().includes(n.toLowerCase())||x.subject.toLowerCase().includes(n.toLowerCase()));y&&(b=c.filter(x=>x.id===y));const S=()=>{r(null),a(!0)},E=x=>{r(x),a(!0)};return s?l.jsx(zm,{lecture:t,onClose:()=>{a(!1),r(null)},onSave:async x=>{try{t?await g(t.id,x):await m(x,"default-subject"),a(!1),r(null)}catch(A){console.error("Error saving lecture:",A)}}}):(y&&c.find(x=>x.id===y),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Resources Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Organize educational content by lectures with videos, files, and quizzes"})]}),l.jsxs(se,{onClick:S,className:"flex items-center gap-2",children:[l.jsx(Qt,{className:"h-4 w-4"}),"Create Lecture"]})]}),l.jsx(we,{children:l.jsx(_e,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(gc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Pe,{placeholder:"Search lectures by title or subject...",value:n,onChange:x=>e(x.target.value),className:"pl-10"})]})})}),u&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Ro,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading lectures..."})]})}),h&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading lectures"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&l.jsx("div",{className:"space-y-6",children:b.map(x=>l.jsxs(we,{className:`hover:shadow-lg transition-all duration-200 border-l-4 ${y===x.id?"border-l-primary bg-primary/5":"border-l-primary/20 hover:border-l-primary"}`,children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(cs,{className:"h-5 w-5 text-primary"}),l.jsx(Je,{className:"text-xl",children:x.title}),l.jsx(en,{variant:"secondary",children:x.subject})]}),l.jsx(Ct,{className:"text-base",children:x.description}),l.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(nc,{className:"h-3 w-3"}),x.createdBy]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(M1,{className:"h-3 w-3"}),x.createdAt.toLocaleDateString()]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>E(x),children:l.jsx(sd,{className:"h-4 w-4"})}),l.jsx(se,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:l.jsx(An,{className:"h-4 w-4"})})]})]})}),l.jsx(_e,{children:l.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(ks,{className:"h-4 w-4 text-green-600"}),"Videos (",x.videos.length,")"]}),x.videos.length>0&&l.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{x.videos.forEach(A=>window.open(A.youtubeUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Play All"})]}),x.videos.length>0?l.jsx("div",{className:"space-y-2",children:x.videos.map(A=>l.jsx("button",{onClick:()=>window.open(A.youtubeUrl,"_blank"),className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[A.thumbnailUrl&&l.jsx("img",{src:A.thumbnailUrl,alt:A.title,className:"w-16 h-12 object-cover rounded"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(ks,{className:"h-6 w-6 text-white"})})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:A.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(xf,{className:"h-3 w-3"}),A.duration]})]})]})},A.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(zs,{className:"h-4 w-4 text-blue-600"}),"Files (",x.files.length,")"]}),x.files.length>0&&l.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{x.files.forEach(A=>window.open(A.fileUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Download All"})]}),x.files.length>0?l.jsx("div",{className:"space-y-2",children:x.files.map(A=>l.jsx("button",{onClick:()=>window.open(A.fileUrl,"_blank"),className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(zs,{className:"h-4 w-4 text-blue-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:A.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(en,{variant:"outline",className:"text-xs",children:A.fileType}),l.jsx("span",{children:A.fileSize})]})]})]})},A.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(_i,{className:"h-4 w-4 text-purple-600"}),"Quizzes (",x.quizzes.length,")"]}),x.quizzes.length>0&&l.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{alert(`Starting all ${x.quizzes.length} quizzes for: ${x.title}`)},className:"h-6 px-2 text-xs",children:"Start All"})]}),x.quizzes.length>0?l.jsx("div",{className:"space-y-2",children:x.quizzes.map(A=>l.jsx("button",{onClick:()=>{alert(`Starting quiz: ${A.title}
Time limit: ${A.timeLimit} minutes
Passing score: ${A.passingScore}%`)},className:"w-full p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(_i,{className:"h-4 w-4 text-purple-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:A.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(xf,{className:"h-3 w-3"}),A.timeLimit,"min",l.jsx("span",{children:"â€¢"}),l.jsxs("span",{children:[A.passingScore,"% pass"]})]})]})]})},A.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"})]})]})})]},x.id))}),!u&&!h&&b.length===0&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(cs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No lectures found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No lectures match your search criteria.":"Start by creating your first lecture with videos, files, and quizzes."}),l.jsxs(se,{onClick:S,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Create Lecture"]})]})})]}))}function j$({professor:n,onClose:e,onSave:t}){const[r,s]=_.useState({name:"",title:"",department:"",email:"",others:"",officeLocation:"",researchAreas:"",imageUrl:""}),[a,c]=_.useState(!1);_.useEffect(()=>{n&&s({name:n.name||"",title:n.title||"",department:n.department||"",email:n.email||"",others:n.others||"",officeLocation:n.officeLocation||"",researchAreas:(n.researchAreas||[]).join(", "),imageUrl:n.imageUrl||""})},[n]);const u=async h=>{h.preventDefault(),c(!0);try{const m={...r,researchAreas:r.researchAreas?r.researchAreas.split(",").map(g=>g.trim()).filter(Boolean):[]};t(m)}catch(m){console.error("Error saving professor:",m)}finally{c(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Professor":"Add Professor"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update professor information":"Add a new professor to the faculty"})]})]})}),l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Je,{className:"flex items-center gap-2",children:[l.jsx(wo,{className:"h-5 w-5"}),"Professor Information"]}),l.jsx(Ct,{children:"Basic information about the professor"})]}),l.jsxs(_e,{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs(fc,{className:"w-20 h-20",children:[l.jsx(Zu,{src:r.imageUrl,alt:r.name}),l.jsx(mc,{children:l.jsx(wo,{className:"w-8 h-8"})})]}),l.jsxs("div",{className:"space-y-2 flex-1",children:[l.jsx(De,{htmlFor:"imageUrl",children:"Profile Image URL"}),l.jsx(Pe,{id:"imageUrl",placeholder:"https://example.com/profile.jpg",value:r.imageUrl,onChange:h=>s(m=>({...m,imageUrl:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"name",children:"Full Name *"}),l.jsx(Pe,{id:"name",placeholder:"Dr. John Smith",value:r.name,onChange:h=>s(m=>({...m,name:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"title",children:"Title"}),l.jsx(Pe,{id:"title",placeholder:"e.g., Associate Professor",value:r.title,onChange:h=>s(m=>({...m,title:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(De,{htmlFor:"department",className:"flex items-center gap-2",children:[l.jsx(pR,{className:"h-4 w-4"}),"Department"]}),l.jsx(Pe,{id:"department",placeholder:"Internal Medicine",value:r.department,onChange:h=>s(m=>({...m,department:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"others",children:"Others"}),l.jsx(Pe,{id:"others",placeholder:"Other contact or notes",value:r.others,onChange:h=>s(m=>({...m,others:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(De,{htmlFor:"email",className:"flex items-center gap-2",children:[l.jsx(wf,{className:"h-4 w-4"}),"Email Address"]}),l.jsx(Pe,{id:"email",type:"email",placeholder:"john.smith@university.edu",value:r.email,onChange:h=>s(m=>({...m,email:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(De,{htmlFor:"officeLocation",className:"flex items-center gap-2",children:[l.jsx(Lu,{className:"h-4 w-4"}),"Office Location"]}),l.jsx(Pe,{id:"officeLocation",placeholder:"Medical Building, Room 301",value:r.officeLocation,onChange:h=>s(m=>({...m,officeLocation:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"researchAreas",children:"Research Areas"}),l.jsx(Pe,{id:"researchAreas",placeholder:"e.g., Cardiology, Epidemiology",value:r.researchAreas,onChange:h=>s(m=>({...m,researchAreas:h.target.value}))})]}),l.jsx("div",{className:"space-y-2",children:l.jsx("div",{})})]})]})]}),r.name&&l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Preview"}),l.jsx(Ct,{children:"How the professor will appear in the system"})]}),l.jsx(_e,{children:l.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[l.jsxs(fc,{className:"h-12 w-12",children:[l.jsx(Zu,{src:r.imageUrl,alt:r.name}),l.jsx(mc,{children:l.jsx(wo,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold",children:r.name}),l.jsx("p",{className:"text-sm text-muted-foreground",children:r.department}),l.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm text-muted-foreground",children:[r.email&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(wf,{className:"h-3 w-3"}),l.jsx("span",{children:r.email})]}),r.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Lu,{className:"h-3 w-3"}),l.jsx("span",{children:r.officeLocation})]}),r.others&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(wo,{className:"h-3 w-3"}),l.jsx("span",{children:r.others})]})]})]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:a,children:[l.jsx(qo,{className:"h-4 w-4 mr-2"}),a?"Saving...":n?"Update Professor":"Add Professor"]})]})]})]})}function A$(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,a]=_.useState(!1),{professors:c,loading:u,error:h,createProfessor:m,updateProfessor:g,deleteProfessor:v,isOfflineMode:y}=FC(),b=c.filter(E=>E.name.toLowerCase().includes(n.toLowerCase())||E.department.toLowerCase().includes(n.toLowerCase())||E.email.toLowerCase().includes(n.toLowerCase())),S=async E=>{if(window.confirm("Are you sure you want to delete this professor?"))try{await v(E)}catch(x){console.error("Error deleting professor:",x),alert("Failed to delete professor. Please try again.")}};return s?l.jsx(j$,{professor:t,onClose:()=>{a(!1),r(null)},onSave:async E=>{try{t?await g(t.id,E):await m(E),a(!1),r(null)}catch(x){console.error("Error saving professor:",x),alert("Failed to save professor. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Professors Management"}),l.jsxs("p",{className:"text-muted-foreground",children:["Manage faculty information and profiles",y&&l.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:"â€¢ Working in offline mode"})]})]}),l.jsxs(se,{onClick:()=>a(!0),children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]}),l.jsx(we,{children:l.jsx(_e,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(gc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Pe,{placeholder:"Search professors by name, department, or email...",value:n,onChange:E=>e(E.target.value),className:"pl-10"})]})})}),u&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Ro,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading professors..."})]})}),h&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading professors"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:b.map(E=>l.jsxs(we,{className:"hover:shadow-md transition-shadow",children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs(fc,{className:"h-12 w-12",children:[l.jsx(Zu,{src:E.imageUrl,alt:E.name}),l.jsx(mc,{children:l.jsx(wo,{className:"h-6 w-6"})})]}),l.jsxs("div",{children:[l.jsx(Je,{className:"text-lg",children:E.name}),l.jsx(en,{variant:"secondary",className:"text-xs",children:E.department})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>{r(E),a(!0)},children:l.jsx(sd,{className:"h-4 w-4"})}),l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>S(E.id),className:"text-destructive hover:text-destructive",children:l.jsx(An,{className:"h-4 w-4"})})]})]})}),l.jsx(_e,{children:l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:E.title}),l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[l.jsx(wf,{className:"h-4 w-4"}),l.jsx("span",{children:E.email})]})]}),E.phone&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(wo,{className:"h-4 w-4"}),l.jsx("span",{children:E.phone})]}),E.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(Lu,{className:"h-4 w-4"}),l.jsx("span",{children:E.officeLocation})]}),E.bio&&l.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:E.bio}),E.researchAreas&&E.researchAreas.length>0&&l.jsx("div",{className:"flex gap-2 flex-wrap",children:E.researchAreas.map(x=>l.jsx(en,{children:x},x))}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[E.website&&l.jsx("a",{href:E.website,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Website"}),E.linkedin&&l.jsx("a",{href:E.linkedin,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"LinkedIn"})]})]})})]},E.id))}),!u&&!h&&b.length===0&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(nc,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No professors found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No professors match your search criteria.":"Start by adding your first professor."}),l.jsxs(se,{onClick:()=>a(!0),children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]})})]})}const P$=[{id:"user_1",displayName:"Ali Ahmed",email:"ali.ahmed@example.com",role:"student",photoURL:"",createdAt:new Date},{id:"user_2",displayName:"Mona Hassan",email:"mona.hassan@example.com",role:"staff",photoURL:"",createdAt:new Date(Date.now()-1e3*60*60*24)}];function R$(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1),{years:h}=Ac();return _.useEffect(()=>{const v=async()=>{try{const b=Cr(it($e,"users"));await Dt(b);const S=Cr(it($e,"users"),xd("createdAt","desc")),E=Go(S,x=>{const A=[];x.forEach(C=>{var R,D;const L=C.data(),V=L.yearId||L.year||L.year_id||L.yearId||null;let q=V,P="-";if(typeof V=="string"&&V.includes(":")){const[k,$]=V.split(":",2);q=k||null,$&&$.trim()&&(P=$.trim())}if(q&&P==="-"){const k=h.find($=>$.id===q);k&&(k.batchName?P=k.batchName:P=`Year ${{1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[k.yearNumber]||String(k.yearNumber)}`)}A.push({id:C.id,displayName:L.displayName||L.name||"",email:L.email||"",role:L.role||"student",photoURL:L.photoURL||L.avatar||"",createdAt:((D=(R=L.createdAt)==null?void 0:R.toDate)==null?void 0:D.call(R))||void 0,yearId:q||void 0,yearLabel:P})}),e(A);const I=Array.from(new Set(A.map(C=>C.yearId).filter(Boolean).filter(C=>!h.find(L=>L.id===C))));I.length>0&&Promise.all(I.map(async C=>{try{const V=(await Dt(wi($e,"years"))).docs.find(D=>D.id===C);if(!V)return null;const q=V.data(),P=q.yearNumber||q.order||(()=>{const D=(q.name||"").match(/\d+/);return D?parseInt(D[0]):void 0})(),R=q.batchName||(P?`Year ${P}`:void 0)||void 0;return{id:C,label:R}}catch{return null}})).then(C=>{const L={};C.forEach(V=>{V&&V.id&&V.label&&(L[V.id]=V.label)}),Object.keys(L).length>0&&e(V=>V.map(q=>q.yearId&&L[q.yearId]?{...q,yearLabel:L[q.yearId]}:q))}),r(!1)},x=>{console.error("Failed to listen to users:",x),y()});return()=>E()}catch(b){console.error("Failed to load users, entering offline mode:",b),y()}},y=()=>{u(!0),e(P$),r(!1),a(null)};v()},[]),_.useEffect(()=>{!h||h.length===0||e(v=>v.map(y=>{if(!y)return y;const b=y.yearId||null;if(!b)return y;const S=h.find(I=>I.id===b);if(!S)return y;const x={1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[S.yearNumber]||String(S.yearNumber),A=S.batchName?S.batchName:`Year ${x}`;return{...y,yearLabel:A}}))},[h]),{users:n,loading:t,error:s,updateUser:async(v,y)=>{if(c||v.startsWith("mock_")||v.startsWith("offline_")){e(b=>b.map(S=>S.id===v?{...S,...y}:S));return}try{await ln(Tt($e,"users",v),y)}catch(b){console.error("Failed to update user:",b),e(S=>S.map(E=>E.id===v?{...E,...y}:E))}},deleteUser:async v=>{if(c||v.startsWith("mock_")||v.startsWith("offline_")){e(y=>y.filter(b=>b.id!==v));return}try{await Sr(Tt($e,"users",v))}catch(y){console.error("Failed to delete user:",y),e(b=>b.filter(S=>S.id!==v))}},isOfflineMode:c}}function k$(){const{users:n,loading:e,error:t,updateUser:r,deleteUser:s}=R$(),a=async u=>{const h=u.role==="admin"?"user":"admin";await r(u.id,{role:h})},c=(u,h)=>{if(!u)return"-";const m=u.match(/(19|20)\d{2}/);if(m)return m[0];if(h)try{const g=new Date(h);if(!isNaN(g.getTime()))return String(g.getFullYear())}catch{}return"-"};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(AR,{className:"h-6 w-6 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold",children:"Users"})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Je,{children:["All Users (",n.length,")"]})}),l.jsx(_e,{children:e?l.jsx("div",{children:"Loading..."}):t?l.jsx("div",{className:"text-destructive",children:t}):n.length===0?l.jsx("div",{className:"text-muted-foreground",children:"No users found."}):(()=>{const u={};n.forEach(m=>{const g=m.yearLabel&&String(m.yearLabel).trim()!==""?String(m.yearLabel):"Unassigned";u[g]||(u[g]=[]),u[g].push(m)});const h=Object.keys(u).sort((m,g)=>{const v=m.match(/Year\s*(\d+)/i),y=g.match(/Year\s*(\d+)/i);return v&&y?parseInt(v[1],10)-parseInt(y[1],10):v?-1:y||m==="Unassigned"?1:g==="Unassigned"?-1:m.localeCompare(g)});return l.jsx("div",{className:"space-y-6",children:h.map(m=>l.jsxs("div",{children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsxs("h3",{className:"text-lg font-semibold",children:[m," ",l.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",u[m].length,")"]})]})}),l.jsx("div",{className:"space-y-2",children:u[m].map(g=>{var v;return l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[l.jsx(fc,{className:"h-12 w-12",children:g.photoURL?l.jsx(Zu,{src:g.photoURL,alt:g.displayName}):l.jsx(mc,{children:((v=g.displayName)==null?void 0:v[0])||"U"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:g.displayName}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:g.email}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",g.createdAt?new Date(g.createdAt).toLocaleString():"-",l.jsxs("span",{className:"ml-3",children:["Year: ",g.yearLabel||c(g.id,g.createdAt)]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(en,{children:g.role||"user"}),l.jsx(se,{size:"sm",variant:"outline",onClick:()=>a(g),children:g.role==="admin"?"Demote":"Make Admin"}),l.jsx(se,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>s(g.id),children:l.jsx(An,{className:"h-4 w-4"})})]})]},g.id)})})]},m))})})()})]})]})}function D$(n){if(!n)return 0;if(typeof n=="number")return n;const e=String(n).trim();if(/^\d+$/.test(e))return parseInt(e,10);const t=e.split(":").map(r=>parseInt(r,10));return t.length===3?t[0]*3600+(t[1]||0)*60+(t[2]||0):t.length===2?(t[0]||0)*60+(t[1]||0):0}function O$(n){if(!n||n<=0)return"0:00";const e=Math.floor(n/3600),t=Math.floor(n%3600/60),r=n%60;return e>0?`${e}:${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${t}:${String(r).padStart(2,"0")}`}function L$(){var D;const{id:n}=HS(),e=Ec(),{years:t,subjects:r,loading:s,createLecture:a,deleteLecture:c,deleteSubject:u,addVideo:h,addFile:m,addQuiz:g}=Ac(),[v,y]=_.useState(null),[b,S]=_.useState(!1),[E,x]=_.useState(!1),[A,I]=_.useState(!1),[C,L]=_.useState(!1),V=r.find(k=>k.id===n),q=k=>{y(k||null),S(!0)},P=k=>{y(k||null),x(!0)},R=k=>{y(k||null),I(!0)};return b&&v?l.jsx(Aj,{lectureId:v,onClose:()=>{S(!1),y(null)},onSave:async k=>{V!=null&&V.id&&v&&await h(V.id,v,k),S(!1),y(null)}}):E&&v?l.jsx(jj,{lectureId:v,onClose:()=>{x(!1),y(null)},onSave:async k=>{V!=null&&V.id&&v&&await m(V.id,v,k),x(!1),y(null)}}):A&&v?l.jsx(RI,{lectureId:v,onClose:()=>{I(!1),y(null)},onSave:async k=>{V!=null&&V.id&&v&&await g(V.id,v,k),I(!1),y(null)}}):C?l.jsx(zm,{subjectId:(V==null?void 0:V.id)||null,subjectName:V==null?void 0:V.name,yearType:(D=t.find(k=>k.id===(V==null?void 0:V.yearId)))==null?void 0:D.type,onClose:()=>L(!1),onSave:async k=>{V!=null&&V.id&&await a(k),L(!1)}}):s?l.jsx("div",{children:"Loading..."}):V?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:V.name}),l.jsx("p",{className:"text-muted-foreground",children:"Subject details and lectures"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(se,{variant:"outline",size:"sm",onClick:()=>L(!0),className:"flex items-center gap-2",children:[l.jsx(Qt,{className:"h-4 w-4"}),"Add Lecture"]}),l.jsx(se,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(V&&confirm(`Delete subject "${V.name}"? This will remove all lectures.`))try{await u(V.id),e("/admin/years")}catch(k){console.error(k),alert("Failed to delete subject")}},children:l.jsx(An,{className:"h-4 w-4"})}),l.jsx(zn,{to:"/admin/years",children:l.jsx(se,{variant:"ghost",children:"Back"})})]})]}),l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Lectures"}),l.jsx(Ct,{children:"All lectures for this subject"})]}),l.jsx(_e,{children:l.jsx("div",{className:"grid gap-4",children:V.lectures&&V.lectures.length>0?V.lectures.map(k=>{var z,M;const $=k.imageUrl||k.videos&&k.videos[0]&&k.videos[0].thumbnailUrl||"";return l.jsxs("div",{className:"p-3 border rounded-md flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[$?l.jsx("img",{src:$,alt:k.name,width:1280,height:720,style:{width:160,height:90,objectFit:"cover"},className:"rounded"}):l.jsx("div",{className:"w-40 h-24 bg-muted rounded flex items-center justify-center text-xs",children:"No image"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:k.name}),l.jsx("div",{className:"text-sm text-muted-foreground",children:k.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>q(k.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Video",children:[l.jsx(ks,{className:"h-3 w-3 text-blue-600"}),l.jsx("span",{children:"Add Video"})]}),l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>P(k.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add File",children:[l.jsx(zs,{className:"h-3 w-3 text-green-600"}),l.jsx("span",{children:"Add File"})]}),l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>R(k.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Quiz",children:[l.jsx(_i,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{children:"Add Quiz"})]}),l.jsx(se,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(V&&confirm(`Delete lecture "${k.name}"?`))try{await c(V.id,k.id)}catch(oe){console.error(oe),alert("Failed to delete lecture")}},children:l.jsx(An,{className:"h-3 w-3"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[k.videos&&k.videos.length>0?(()=>{const oe=(k.videos||[]).reduce((K,Z)=>K+D$(Z.duration||Z.time||Z.durationSeconds||Z.length),0);return l.jsxs("button",{onClick:()=>e(`/admin/videos?lecture=${k.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:[l.jsx(ks,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",k.videos.length,")"]}),l.jsx("span",{className:"text-muted-foreground",children:O$(oe)})]})})():l.jsx("button",{onClick:()=>e(`/admin/videos?lecture=${k.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:l.jsx(ks,{className:"h-4 w-4"})}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${k.id}&tab=files`),className:"text-xs text-green-600 flex items-center gap-1 px-2",title:"Files",children:[l.jsx(zs,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((z=k.files)==null?void 0:z.length)||0,")"]})]}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${k.id}&tab=quizzes`),className:"text-xs text-purple-600 flex items-center gap-1 px-2",title:"Quizzes",children:[l.jsx(_i,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((M=k.quizzes)==null?void 0:M.length)||0,")"]})]})]})]})]},k.id)}):l.jsx("div",{className:"text-muted-foreground",children:"No lectures yet for this subject."})})})]})]}):l.jsx(we,{children:l.jsxs(_e,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Subject not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"The subject you requested does not exist."}),l.jsx("div",{className:"mt-4",children:l.jsx(zn,{to:"/admin/years",children:l.jsx(se,{children:"Back to Years"})})})]})})}var Zg="rovingFocusGroup.onEntryFocus",M$={bubbles:!1,cancelable:!0},qm="RovingFocusGroup",[iy,Pj,F$]=cy(qm),[V$,Rj]=ji(qm,[F$]),[U$,$$]=V$(qm),kj=_.forwardRef((n,e)=>l.jsx(iy.Provider,{scope:n.__scopeRovingFocusGroup,children:l.jsx(iy.Slot,{scope:n.__scopeRovingFocusGroup,children:l.jsx(z$,{...n,ref:e})})}));kj.displayName=qm;var z$=_.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:m,preventScrollOnEntryFocus:g=!1,...v}=n,y=_.useRef(null),b=vt(e,y),S=Mx(a),[E=null,x]=Aa({prop:c,defaultProp:u,onChange:h}),[A,I]=_.useState(!1),C=vn(m),L=Pj(t),V=_.useRef(!1),[q,P]=_.useState(0);return _.useEffect(()=>{const R=y.current;if(R)return R.addEventListener(Zg,C),()=>R.removeEventListener(Zg,C)},[C]),l.jsx(U$,{scope:t,orientation:r,dir:S,loop:s,currentTabStopId:E,onItemFocus:_.useCallback(R=>x(R),[x]),onItemShiftTab:_.useCallback(()=>I(!0),[]),onFocusableItemAdd:_.useCallback(()=>P(R=>R+1),[]),onFocusableItemRemove:_.useCallback(()=>P(R=>R-1),[]),children:l.jsx(He.div,{tabIndex:A||q===0?-1:0,"data-orientation":r,...v,ref:b,style:{outline:"none",...n.style},onMouseDown:ze(n.onMouseDown,()=>{V.current=!0}),onFocus:ze(n.onFocus,R=>{const D=!V.current;if(R.target===R.currentTarget&&D&&!A){const k=new CustomEvent(Zg,M$);if(R.currentTarget.dispatchEvent(k),!k.defaultPrevented){const $=L().filter(Z=>Z.focusable),z=$.find(Z=>Z.active),M=$.find(Z=>Z.id===E),K=[z,M,...$].filter(Boolean).map(Z=>Z.ref.current);Lj(K,g)}}V.current=!1}),onBlur:ze(n.onBlur,()=>I(!1))})})}),Dj="RovingFocusGroupItem",Oj=_.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:a,...c}=n,u=bo(),h=a||u,m=$$(Dj,t),g=m.currentTabStopId===h,v=Pj(t),{onFocusableItemAdd:y,onFocusableItemRemove:b}=m;return _.useEffect(()=>{if(r)return y(),()=>b()},[r,y,b]),l.jsx(iy.ItemSlot,{scope:t,id:h,focusable:r,active:s,children:l.jsx(He.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:ze(n.onMouseDown,S=>{r?m.onItemFocus(h):S.preventDefault()}),onFocus:ze(n.onFocus,()=>m.onItemFocus(h)),onKeyDown:ze(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){m.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const E=W$(S,m.orientation,m.dir);if(E!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let A=v().filter(I=>I.focusable).map(I=>I.ref.current);if(E==="last")A.reverse();else if(E==="prev"||E==="next"){E==="prev"&&A.reverse();const I=A.indexOf(S.currentTarget);A=m.loop?H$(A,I+1):A.slice(I+1)}setTimeout(()=>Lj(A))}})})})});Oj.displayName=Dj;var B$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function q$(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function W$(n,e,t){const r=q$(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return B$[r]}function Lj(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function H$(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var K$=kj,G$=Oj,Vx="Tabs",[Q$,zz]=ji(Vx,[Rj]),Mj=Rj(),[Y$,Ux]=Q$(Vx),Fj=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:a,orientation:c="horizontal",dir:u,activationMode:h="automatic",...m}=n,g=Mx(u),[v,y]=Aa({prop:r,onChange:s,defaultProp:a});return l.jsx(Y$,{scope:t,baseId:bo(),value:v,onValueChange:y,orientation:c,dir:g,activationMode:h,children:l.jsx(He.div,{dir:g,"data-orientation":c,...m,ref:e})})});Fj.displayName=Vx;var Vj="TabsList",Uj=_.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,a=Ux(Vj,t),c=Mj(t);return l.jsx(K$,{asChild:!0,...c,orientation:a.orientation,dir:a.dir,loop:r,children:l.jsx(He.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});Uj.displayName=Vj;var $j="TabsTrigger",zj=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...a}=n,c=Ux($j,t),u=Mj(t),h=Wj(c.baseId,r),m=Hj(c.baseId,r),g=r===c.value;return l.jsx(G$,{asChild:!0,...u,focusable:!s,active:g,children:l.jsx(He.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":m,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:h,...a,ref:e,onMouseDown:ze(n.onMouseDown,v=>{!s&&v.button===0&&v.ctrlKey===!1?c.onValueChange(r):v.preventDefault()}),onKeyDown:ze(n.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&c.onValueChange(r)}),onFocus:ze(n.onFocus,()=>{const v=c.activationMode!=="manual";!g&&!s&&v&&c.onValueChange(r)})})})});zj.displayName=$j;var Bj="TabsContent",qj=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:a,...c}=n,u=Ux(Bj,t),h=Wj(u.baseId,r),m=Hj(u.baseId,r),g=r===u.value,v=_.useRef(g);return _.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),l.jsx(dy,{present:s||g,children:({present:y})=>l.jsx(He.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!y,id:m,tabIndex:0,...c,ref:e,style:{...n.style,animationDuration:v.current?"0s":void 0},children:y&&a})})});qj.displayName=Bj;function Wj(n,e){return`${n}-trigger-${e}`}function Hj(n,e){return`${n}-content-${e}`}var X$=Fj,Kj=Uj,Gj=zj,Qj=qj;const J$=X$,Yj=_.forwardRef(({className:n,...e},t)=>l.jsx(Kj,{ref:t,className:tt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));Yj.displayName=Kj.displayName;const oy=_.forwardRef(({className:n,...e},t)=>l.jsx(Gj,{ref:t,className:tt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));oy.displayName=Gj.displayName;const ay=_.forwardRef(({className:n,...e},t)=>l.jsx(Qj,{ref:t,className:tt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));ay.displayName=Qj.displayName;function Z$({product:n,onClose:e,onSave:t}){const[r,s]=_.useState({name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",price:(n==null?void 0:n.price)||0,types:(n==null?void 0:n.types)||(n!=null&&n.price?[{name:"Default",price:n.price}]:[]),images:(n==null?void 0:n.images)||[""],categoryId:(n==null?void 0:n.categoryId)||""}),[a,c]=_.useState(!1),[u,h]=_.useState(null),m=async b=>{b.preventDefault(),c(!0);try{const S={...r,images:r.images.filter(E=>E.trim()!=="")};S.types&&S.types.length>0?(S.types=S.types.map(E=>({name:String(E.name||"").trim(),price:parseFloat(E.price)||0})),S.price=S.types[0].price||0):S.types=[],t(S)}catch(S){console.error("Error saving product:",S)}finally{c(!1)}},g=()=>{s(b=>({...b,images:[...b.images,""]}))},v=(b,S)=>{s(E=>({...E,images:E.images.map((x,A)=>A===b?S:x)}))},y=b=>{s(S=>({...S,images:S.images.filter((E,x)=>x!==b)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Product":"Add Product"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update product details":"Create a new product"})]})]})}),l.jsxs("form",{onSubmit:m,className:"space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsxs(Je,{className:"flex items-center gap-2",children:[l.jsx(ov,{className:"h-5 w-5 text-blue-600"}),"Product Information"]}),l.jsx(Ct,{children:"Basic information about the product"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"name",children:"Product Name *"}),l.jsx(Pe,{id:"name",placeholder:"e.g., Medical Textbook",value:r.name,onChange:b=>s(S=>({...S,name:b.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{children:"Types & Prices"}),l.jsxs("div",{className:"space-y-2",children:[r.types&&r.types.length>0?r.types.map((b,S)=>l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Pe,{placeholder:"Type name (e.g., Pen)",value:b.name,onChange:E=>s(x=>({...x,types:x.types.map((A,I)=>I===S?{...A,name:E.target.value}:A)})),required:!0}),l.jsx(Pe,{type:"number",step:"0.01",placeholder:"0.00",value:b.price,onChange:E=>s(x=>({...x,types:x.types.map((A,I)=>I===S?{...A,price:parseFloat(E.target.value)||0}:A)})),required:!0,className:"w-32"}),l.jsx(se,{type:"button",variant:"ghost",onClick:()=>s(E=>({...E,types:E.types.filter((x,A)=>A!==S)})),children:"Remove"})]},S)):l.jsx("div",{className:"text-muted-foreground",children:"No types defined."}),l.jsx("div",{children:l.jsxs(se,{type:"button",variant:"outline",onClick:()=>s(b=>({...b,types:[...b.types||[],{name:"Default",price:0}]})),children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"})," Add Type"]})})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"description",children:"Description"}),l.jsx(Ii,{id:"description",placeholder:"Describe the product...",value:r.description,onChange:b=>s(S=>({...S,description:b.target.value})),rows:4})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"categoryId",children:"Category ID (Optional)"}),l.jsx(Pe,{id:"categoryId",placeholder:"e.g., books, equipment",value:r.categoryId,onChange:b=>s(S=>({...S,categoryId:b.target.value}))})]})]})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(Je,{children:"Product Images"}),l.jsx(Ct,{children:"Add image URLs for the product"})]}),l.jsxs(se,{type:"button",variant:"outline",onClick:g,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})}),l.jsx(_e,{className:"space-y-4",children:r.images.map((b,S)=>l.jsxs("div",{className:`flex gap-2 items-center ${u===S?"border-2 border-dashed p-2 rounded":""}`,onDragOver:E=>{E.preventDefault(),h(S)},onDragEnter:E=>{E.preventDefault(),h(S)},onDragLeave:()=>{h(null)},onDrop:async E=>{E.preventDefault(),h(null);try{const x=E.dataTransfer;if(!x)return;if(x.files&&x.files.length>0){const I=x.files[0];try{let C=null;try{C=await hr(I)}catch(L){console.warn("Cloudinary upload failed, trying ImageKit fallback",(L==null?void 0:L.message)||L),C=await Po(I,I.name)}C&&typeof C=="string"&&C.startsWith("http")?v(S,C):alert("Upload failed: unexpected response from upload provider")}catch(C){console.error("Drop upload error:",C);const V=((C==null?void 0:C.message)||String(C)||"").toLowerCase();if(V.includes("cloudinary signing did not return an api key")||V.includes("missing required parameter - api_key")||V.includes("missing required parameter 'api_key'")){const q=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(q&&q.trim())try{Ia(null,null,q.trim());const P=await hr(I);if(P&&typeof P=="string"&&P.startsWith("http")){v(S,P);return}}catch(P){console.error("Retry after API key failed:",P)}}alert("Upload failed: "+((C==null?void 0:C.message)||C))}return}const A=x.getData("text/uri-list")||x.getData("text/plain");if(A&&A.startsWith("http")){if(!window.confirm(`Upload the dragged URL to Cloudinary and replace it?
`+A))return;const C=await Hb(A);C&&typeof C=="string"&&C.startsWith("http")?v(S,C):alert("Upload failed: unexpected response from server")}}catch(x){console.error("Drop upload error:",x),alert("Image upload failed: "+((x==null?void 0:x.message)||x))}},children:[l.jsx(Pe,{placeholder:"https://example.com/image.jpg",value:b,onChange:E=>v(S,E.target.value)}),l.jsx(se,{type:"button",variant:"ghost",size:"icon",onClick:async()=>{var E;try{const x=(E=r.images[S])==null?void 0:E.trim();if(x&&(x.startsWith("http://")||x.startsWith("https://"))){try{if(!window.confirm(`Upload the current URL to Cloudinary/ImageKit and replace it?
`+x))return;try{const C=await Hb(x);if(C&&typeof C=="string"&&C.startsWith("http")){v(S,C);return}}catch(C){console.warn("uploadUrlToServer failed, will try ImageKit:",(C==null?void 0:C.message)||C)}try{const C=await Po(x);if(C&&typeof C=="string"&&C.startsWith("http")){v(S,C);return}else alert("Upload failed: unexpected response from ImageKit")}catch(C){console.error("ImageKit URL upload error:",C),alert("URL upload failed: "+((C==null?void 0:C.message)||C))}}catch(I){console.error("URL upload error:",I),alert("URL upload failed: "+((I==null?void 0:I.message)||I))}return}const A=document.createElement("input");A.type="file",A.accept="image/*",A.onchange=async()=>{var C;const I=(C=A.files)==null?void 0:C[0];if(I)try{let L=null;try{L=await hr(I)}catch(V){console.warn("Cloudinary upload failed, trying ImageKit fallback",(V==null?void 0:V.message)||V);try{L=await Po(I,I.name)}catch(q){throw console.error("ImageKit upload failed:",q),V}}if(!L||typeof L!="string"||!L.startsWith("http")){alert("Upload failed: unexpected response from upload provider");return}v(S,L)}catch(L){const V=(L==null?void 0:L.message)||String(L);console.error("Upload error:",L);const q=(V||"").toLowerCase();if(q.includes("cloudinary cloud name is not configured")){const P=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!P){alert("No cloud name provided.");return}const R=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),D=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");Ia(P,R||null,D||null);try{const k=await hr(I);if(!k||typeof k!="string"||!k.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}v(S,k)}catch(k){console.error("Retry upload error:",k),alert("Upload failed after configuring Cloudinary: "+(k.message||k))}}else if(q.includes("cloudinary signing did not return an api key")||q.includes("missing required parameter - api_key")||q.includes("missing required parameter 'api_key'")){const P=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(P&&P.trim())try{Ia(null,null,P.trim());const R=await hr(I);if(!R||typeof R!="string"||!R.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}v(S,R);return}catch(R){console.error("Retry upload error:",R),alert("Upload failed after setting API key: "+(R.message||R));return}}else alert("Image upload failed: "+(L.message||L))}},A.click()}catch(x){console.error(x),alert("Could not open file dialog")}},children:l.jsx(iv,{className:"h-4 w-4"})}),r.images.length>1&&l.jsx(se,{type:"button",variant:"outline",size:"icon",onClick:()=>y(S),children:l.jsx(rc,{className:"h-4 w-4"})})]},S))})]}),r.name&&l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Preview"}),l.jsx(Ct,{children:"How the product will appear"})]}),l.jsx(_e,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-4",children:[r.images[0]&&r.images[0].trim()&&(()=>{const b=ck(r.images[0]);return l.jsx("img",{src:b||void 0,alt:r.name,className:"w-20 h-20 object-cover rounded",onError:S=>{S.currentTarget.style.display="none",console.warn("Product preview image failed to load:",b||r.images[0])}})})(),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:r.name}),l.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["$",r.price.toFixed(2)]}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.description}),r.categoryId&&l.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Category: ",r.categoryId]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(se,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:a,children:[l.jsx(qo,{className:"h-4 w-4 mr-2"}),a?"Saving...":n?"Update Product":"Add Product"]})]})]})]})}function Xj(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const m=Cr(it($e,"orders"),xd("orderDate","desc")),g=Go(m,async v=>{try{const y=await Dt(it($e,"products")),b={};y.forEach(E=>{const x=E.data();b[E.id]={id:E.id,name:x.name||x.title||"",price:x.price||0}});const S=[];v.forEach(E=>{var q,P;const x=E.data();let A=[];x.items&&Array.isArray(x.items)&&x.items.length>0?A=x.items:x.productsIds&&Array.isArray(x.productsIds)&&(A=x.productsIds.map(R=>{var D,k;return{productId:R,name:((D=b[R])==null?void 0:D.name)||R,quantity:1,price:((k=b[R])==null?void 0:k.price)||0}}));const I=x.total||x.totalAmount||x.totalPrice||0,C=x.address||x.shippingaddress||x.shippingAddress||"",L=x.userPhone||x.user_phone||x.phone||"";let V=new Date;x.createdAt&&typeof x.createdAt.toDate=="function"?V=x.createdAt.toDate():x.orderDate&&typeof x.orderDate.toDate=="function"?V=x.orderDate.toDate():x.orderDate&&(V=new Date(x.orderDate)),S.push({id:E.id,userId:x.userId||x.user_id||"",username:x.username||x.userName||x.user_name||x.customerName||"",userName:x.userName||x.user_name||x.customerName||"",userEmail:x.userEmail||x.email||"",userPhone:L,address:C,items:A,total:I,iscompleted:x.iscompleted===!0||x.isCompleted===!0||!1,status:x.status||(x.iscompleted===!0?"completed":"pending"),createdAt:V,updatedAt:(P=(q=x.updatedAt)==null?void 0:q.toDate)==null?void 0:P.call(q)})}),e(S),r(!1)}catch(y){console.error("Error processing orders:",y),a("Failed to load orders"),r(!1)}},v=>{console.error("Failed to load orders:",v),a("Failed to load orders"),r(!1)});return()=>g()},[]),{orders:n,loading:t,error:s,createOrder:async m=>{try{await bn(it($e,"orders"),{...m,createdAt:new Date})}catch(g){console.error("Error creating order:",g)}},updateOrder:async(m,g)=>{try{const v={...g,updatedAt:new Date};(g.status==="completed"||g.isCompleted)&&(v.isCompleted=!0,v.iscompleted=!0,v.completedAt=new Date,v.status="completed"),await ln(Tt($e,"orders",m),v)}catch(v){console.error("Error updating order:",v)}},deleteOrder:async m=>{try{await Sr(Tt($e,"orders",m))}catch(g){console.error("Error deleting order:",g)}}}}function ez(){const[n,e]=_.useState(""),[t,r]=_.useState(!1),[s,a]=_.useState(null),{products:c,loading:u,error:h,isOfflineMode:m,createProduct:g,updateProduct:v,deleteProduct:y,retryConnection:b}=MC(),{createOrder:S}=Xj(),E=()=>{a(null),r(!0)},x=C=>{a(C),r(!0)},A=async(C,L)=>{confirm(`Are you sure you want to delete "${L}"?`)&&await y(C)};if(t)return l.jsx(Z$,{product:s,onClose:()=>{r(!1),a(null)},onSave:async C=>{try{s?await v(s.id,C):await g(C),r(!1),a(null)}catch(L){console.error("Error saving product:",L),alert("Failed to save product. Please try again.")}}});const I=c.filter(C=>C.name.toLowerCase().includes(n.toLowerCase())||C.description.toLowerCase().includes(n.toLowerCase()));return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Store Management"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-muted-foreground",children:"Manage store products and categories"}),m&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),u&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Ro,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}),h&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading products"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:h}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(se,{onClick:b,variant:"outline",children:"Retry Connection"}),l.jsx(se,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!u&&!h&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[l.jsxs(we,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Je,{className:"text-sm font-medium",children:"Total Products"}),l.jsx(ov,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(_e,{children:l.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),l.jsxs(we,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Je,{className:"text-sm font-medium",children:"Average Price"}),l.jsx(V1,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(_e,{children:l.jsxs("div",{className:"text-2xl font-bold",children:["$",c.length>0?(c.reduce((C,L)=>{const V=L.types&&L.types.length>0?L.types[0].price:L.price||0;return C+V},0)/c.length).toFixed(2):"0.00"]})})]}),l.jsxs(we,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Je,{className:"text-sm font-medium",children:"Categories"}),l.jsx(Cu,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(_e,{children:l.jsx("div",{className:"text-2xl font-bold",children:new Set(c.map(C=>C.categoryId).filter(C=>C&&C.trim())).size})})]})]}),l.jsxs(J$,{defaultValue:"products",className:"space-y-6",children:[l.jsxs(Yj,{className:"grid w-full grid-cols-2",children:[l.jsxs(oy,{value:"products",className:"flex items-center gap-2",children:[l.jsx(py,{className:"h-4 w-4"}),"Products (",c.length,")"]}),l.jsxs(oy,{value:"categories",className:"flex items-center gap-2",children:[l.jsx(Cu,{className:"h-4 w-4"}),"Categories"]})]}),l.jsxs(ay,{value:"products",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"relative flex-1 max-w-sm",children:[l.jsx(gc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Pe,{placeholder:"Search products...",value:n,onChange:C=>e(C.target.value),className:"pl-10"})]}),l.jsxs(se,{onClick:E,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),I.length===0?l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(ov,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:n?"No products found":"No products yet"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"Try adjusting your search terms":"Add your first product to get started"}),!n&&l.jsxs(se,{onClick:E,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add First Product"]})]})}):l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:I.map(C=>l.jsxs(we,{className:"overflow-hidden",children:[l.jsxs("div",{className:"aspect-video bg-muted relative",children:[C.images&&C.images[0]?l.jsx("img",{src:C.images[0],alt:C.name,className:"w-full h-full object-cover",onError:L=>{L.currentTarget.style.display="none",L.currentTarget.nextElementSibling.style.display="flex"}}):null,l.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:C.images&&C.images[0]?"none":"flex"},children:l.jsx(iv,{className:"h-12 w-12 text-muted-foreground"})})]}),l.jsxs(Ge,{className:"pb-2",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsx(Je,{className:"text-lg line-clamp-1",children:C.name}),l.jsx("div",{className:"mt-2",children:C.types&&C.types.length>0?l.jsx("div",{className:"flex gap-2 flex-wrap",children:C.types.map((L,V)=>l.jsxs(en,{variant:"secondary",className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:L.name}),l.jsxs("span",{className:"text-sm text-muted-foreground",children:["$",L.price.toFixed(2)]})]},V))}):l.jsxs("div",{className:"text-xl font-bold",children:["$",(C.price||0).toFixed(2)]})}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>x(C),className:"h-8 w-8",children:l.jsx(sd,{className:"h-3 w-3"})}),l.jsx(se,{variant:"ghost",size:"icon",onClick:async()=>{try{const L=document.createElement("input");L.type="file",L.accept="image/*",L.onchange=async()=>{var q;const V=(q=L.files)==null?void 0:q[0];if(V)try{let P=null;try{P=await hr(V)}catch(R){console.warn("Cloudinary upload failed, trying ImageKit fallback",(R==null?void 0:R.message)||R);try{P=await Po(V,V.name)}catch(D){throw console.error("ImageKit upload failed:",D),R}}if(!P||typeof P!="string"||!P.startsWith("http")){console.error("Invalid upload response:",P),alert("Image upload failed: unexpected response from upload provider");return}await v(C.id,{images:[P]})}catch(P){console.error(P);const D=((P==null?void 0:P.message)||String(P)||"").toLowerCase();if(D.includes("cloudinary cloud name is not configured")){const k=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!k){alert("No cloud name provided. Upload cancelled.");return}const $=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),z=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{Ia(k,$||null,z||null);const M=await hr(V);if(console.log("Cloudinary upload result after config:",M),!M||typeof M!="string"||!M.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await v(C.id,{images:[M]})}catch(M){console.error(M),alert("Image upload failed after configuring Cloudinary: "+(M.message||M))}return}else if(D.includes("cloudinary signing did not return an api key")||D.includes("missing required parameter - api_key")||D.includes("missing required parameter 'api_key'")){const k=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(k&&k.trim())try{Ia(null,null,k.trim());const $=await hr(V);if(!$||typeof $!="string"||!$.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await v(C.id,{images:[$]});return}catch($){console.error($),alert("Image upload failed after setting API key: "+($.message||$));return}}alert("Image upload failed: "+(P.message||P))}},L.click()}catch(L){console.error(L),alert("Could not open file dialog")}},className:"h-8 w-8",children:l.jsx(iv,{className:"h-3 w-3"})}),l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>A(C.id,C.name),className:"h-8 w-8 text-destructive hover:text-destructive",children:l.jsx(An,{className:"h-3 w-3"})}),l.jsx(se,{variant:"outline",size:"sm",onClick:async()=>{try{const L=window.prompt("Your full name:");if(!L)return;const V=window.prompt("Your email:");if(!V)return;const q=window.prompt("Quantity:","1")||"1",P=parseInt(q)||1,R=window.prompt("Phone (optional):","")||"",D=window.prompt("Address (optional):","")||"",k=C.types&&C.types.length>0?C.types[0].price:C.price||0;await S({username:L,userName:L,userEmail:V,userPhone:R,address:D,items:[{productId:C.id,name:C.name,quantity:P,price:k}],total:k*P,status:"pending",createdAt:new Date}),alert("Order placed successfully")}catch(L){console.error(L),alert("Failed to place order")}},children:"Buy"})]})]}),l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",(C.types&&C.types.length>0?C.types[0].price:C.price||0).toFixed(2)]})]}),l.jsxs(_e,{className:"pt-0",children:[C.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:C.description}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[l.jsx("span",{children:C.createdAt.toLocaleDateString()}),C.categoryId&&l.jsx(en,{variant:"secondary",className:"text-xs",children:C.categoryId})]})]})]},C.id))})]}),l.jsxs(ay,{value:"categories",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Categories"}),l.jsxs(se,{disabled:!0,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Cu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Category Management"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Category management will be implemented in the future."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"For now, you can specify category IDs when creating products."})]})})]})]})]})]})}function tz({order:n,onChangeStatus:e,onDelete:t}){var r,s;return l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(Je,{children:["Order for ",n.username||n.userName,l.jsx("div",{className:"text-xs text-muted-foreground",children:(s=(r=n.createdAt)==null?void 0:r.toLocaleString)==null?void 0:s.call(r)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(en,{variant:n.status==="completed"||n.iscompleted?"default":"secondary",children:[n.status,n.iscompleted?" â€¢ completed":""]}),l.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>e(n.id,"completed"),children:[l.jsx(m_,{className:"h-4 w-4 mr-1"})," Complete"]}),l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>t(n.id),className:"text-destructive",children:l.jsx(An,{className:"h-4 w-4"})})]})]})}),l.jsxs(_e,{children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact"}),l.jsx("div",{className:"font-medium",children:n.username||n.userName}),l.jsx("div",{className:"text-sm",children:n.userEmail}),n.userPhone&&l.jsx("div",{className:"text-sm",children:n.userPhone}),n.address&&l.jsx("div",{className:"text-sm",children:n.address})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Items"}),l.jsxs("div",{className:"space-y-2 mt-2",children:[n.items&&n.items.length>0?n.items.map((a,c)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm",children:[a.name," x",a.quantity]}),l.jsxs("div",{className:"font-medium",children:["$",(a.price*a.quantity).toFixed(2)]})]},c)):l.jsx("div",{className:"text-sm text-muted-foreground",children:"No item details. Products IDs may be attached in the raw order."}),n.productsIds&&n.productsIds.length>0&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Product IDs: ",(n.productsIds||[]).join(", ")]}),l.jsxs("div",{className:"flex items-center justify-between pt-2 border-t mt-2",children:[l.jsx("div",{className:"font-medium",children:"Total"}),l.jsxs("div",{className:"font-bold",children:["$",(n.total||0).toFixed(2)]})]})]})]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsxs(se,{onClick:()=>e(n.id,"paid"),children:[l.jsx(m_,{className:"h-4 w-4 mr-2"})," Mark Paid"]}),l.jsxs(se,{variant:"outline",onClick:()=>e(n.id,"cancelled"),children:[l.jsx(yR,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]})]},n.id)}function nz(){const{orders:n,loading:e,error:t,updateOrder:r,deleteOrder:s}=Xj(),a=async(u,h)=>{u&&await r(u,{status:h})},c=async u=>{u&&confirm("Delete this order?")&&await s(u)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Orders"}),l.jsx("p",{className:"text-muted-foreground",children:"View and manage store orders"})]})}),e&&l.jsx("div",{children:"Loading..."}),t&&l.jsx("div",{className:"text-destructive",children:t}),!e&&!t&&l.jsx("div",{className:"grid gap-4",children:n.map(u=>l.jsx(tz,{order:u,onChangeStatus:a,onDelete:c},u.id))})]})}function $x(n,e){const[t,r]=_.useState([]),[s,a]=_.useState(!0),[c,u]=_.useState(null);return _.useEffect(()=>{let h=null,m=!0;return(async()=>{if(!n){r([]),a(!1);return}try{const v=Cr(wi($e,"lectures"),c6(ZU(),"==",n)),y=await Dt(v);if(y.empty){m&&(r([]),a(!1));return}const b=y.docs[0],S=it(b.ref,e);h=Go(S,E=>{if(!m)return;const x=[];E.forEach(A=>{const I=A.data();x.push({id:A.id,...I})}),r(x),a(!1)},E=>{console.error(`Failed to subscribe to ${e}:`,E),u(`Failed to load ${e}`),a(!1)})}catch(v){console.error(`Error resolving lecture for ${e}:`,v),m&&(u(v.message||String(v)),a(!1))}})(),()=>{m=!1,h&&h()}},[n,e]),{items:t,loading:s,error:c}}function rz(n){return $x(n,"videos")}function sz(n){return $x(n,"files")}function Jj(n){return $x(n,"quizzes")}function iz(){var m;const[n]=od(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=Bm(),{items:a,loading:c,error:u}=rz(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Videos for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(zn,{to:"/admin/resources",children:l.jsx(se,{variant:"ghost",children:"Back"})})})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Je,{children:["Videos (",((m=h.videos)==null?void 0:m.length)||0,")"]})}),l.jsx(_e,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[g.thumbnailUrl?l.jsx("img",{src:g.thumbnailUrl,alt:g.title,className:"w-32 h-18 object-cover rounded"}):l.jsx("div",{className:"w-32 h-18 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsxs(se,{onClick:()=>window.open(g.url||g.youtubeUrl||"","_blank"),children:[" ",l.jsx(ks,{className:"h-4 w-4 mr-2"})," Play "]})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No videos available for this lecture."})})]})]}):l.jsx(we,{children:l.jsxs(_e,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its videos."}),l.jsx("div",{className:"mt-4",children:l.jsx(zn,{to:"/admin/years",children:l.jsx(se,{children:"Back to Years"})})})]})})}function oz(){var m;const[n]=od(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=Bm(),{items:a,loading:c,error:u}=sz(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Files for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(zn,{to:"/admin/resources",children:l.jsx(se,{variant:"ghost",children:"Back"})})})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Je,{children:["Files (",((m=h.files)==null?void 0:m.length)||0,")"]})}),l.jsx(_e,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(zs,{className:"h-6 w-6 text-blue-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||g.name||"Untitled File"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsx(se,{onClick:()=>window.open(g.fileUrl||g.url||"_blank"),children:"Download"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No files available for this lecture."})})]})]}):l.jsx(we,{children:l.jsxs(_e,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its files."}),l.jsx("div",{className:"mt-4",children:l.jsx(zn,{to:"/admin/years",children:l.jsx(se,{children:"Back to Years"})})})]})})}function az(){var m;const[n]=od(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=Bm(),{items:a,loading:c,error:u}=Jj(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Quizzes for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(zn,{to:"/admin/resources",children:l.jsx(se,{variant:"ghost",children:"Back"})})})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Je,{children:["Quizzes (",((m=h.quizzes)==null?void 0:m.length)||0,")"]})}),l.jsx(_e,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(_i,{className:"h-6 w-6 text-purple-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled Quiz"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("strong",{children:g.type||"multiple_choice"})]})]})]}),l.jsx("div",{children:(g.type||"multiple_choice")==="flashcard"?l.jsx(se,{onClick:()=>window.location.href=`/admin/flashcards?lecture=${e}&quiz=${g.id}`,children:"Flashcards"}):l.jsx(se,{onClick:()=>alert("Multiple choice runner not implemented. Use Flashcards or implement MCQ runner."),children:"Start"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No quizzes available for this lecture."})})]})]}):l.jsx(we,{children:l.jsxs(_e,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its quizzes."}),l.jsx("div",{className:"mt-4",children:l.jsx(zn,{to:"/admin/years",children:l.jsx(se,{children:"Back to Years"})})})]})})}var zx="Progress",Bx=100,[lz,Bz]=ji(zx),[cz,uz]=lz(zx),Zj=_.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:s,getValueLabel:a=dz,...c}=n;(s||s===0)&&!Gb(s)&&console.error(hz(`${s}`,"Progress"));const u=Gb(s)?s:Bx;r!==null&&!Qb(r,u)&&console.error(fz(`${r}`,"Progress"));const h=Qb(r,u)?r:null,m=Jf(h)?a(h,u):void 0;return l.jsx(cz,{scope:t,value:h,max:u,children:l.jsx(He.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":Jf(h)?h:void 0,"aria-valuetext":m,role:"progressbar","data-state":nA(h,u),"data-value":h??void 0,"data-max":u,...c,ref:e})})});Zj.displayName=zx;var eA="ProgressIndicator",tA=_.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,s=uz(eA,t);return l.jsx(He.div,{"data-state":nA(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});tA.displayName=eA;function dz(n,e){return`${Math.round(n/e*100)}%`}function nA(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function Jf(n){return typeof n=="number"}function Gb(n){return Jf(n)&&!isNaN(n)&&n>0}function Qb(n,e){return Jf(n)&&!isNaN(n)&&n<=e&&n>=0}function hz(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Bx}\`.`}function fz(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Bx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var rA=Zj,mz=tA;const sA=_.forwardRef(({className:n,value:e,...t},r)=>l.jsx(rA,{ref:r,className:tt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:l.jsx(mz,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));sA.displayName=rA.displayName;function pz(){const[n]=od(),e=n.get("lecture"),t=n.get("quiz"),{items:r,loading:s,error:a}=Jj(e),c=r.find(z=>z.id===t),[u,h]=_.useState(0),[m,g]=_.useState([]);if(s)return l.jsx("div",{children:"Loading..."});if(a)return l.jsx("div",{className:"text-destructive",children:a});if(!c)return l.jsx(we,{children:l.jsxs(_e,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Quiz not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a quiz to start flashcards."}),l.jsx("div",{className:"mt-4",children:l.jsx(zn,{to:"/admin/quizzes",children:l.jsx(se,{children:"Back"})})})]})});const v=c.questions||[],y=v.reduce((z,M)=>z+(M.weight&&Number(M.weight)||1),0),b=v[u],S=b&&(b.weight||1)||1,E=m[u]??0,[x,A]=_.useState(!1),[I,C]=_.useState([]),[L,V]=_.useState(null);_.useEffect(()=>{A(!1),C([]),V(null)},[u]);const q=(z,M)=>{const oe=[...m];oe[z]=M,g(oe)},P=m.reduce((z,M,oe)=>z+(M||0),0),R=Math.round(P/y*100),D=z=>{if(!z)return[{type:"text",value:""}];const M=[],oe=/\[\[(.+?)\]\]/g;let K=0,Z;for(;(Z=oe.exec(z))!==null;)Z.index>K&&M.push({type:"text",value:z.slice(K,Z.index)}),M.push({type:"blank",value:Z[1]}),K=oe.lastIndex;return K<z.length&&M.push({type:"text",value:z.slice(K)}),M},k=()=>{const z=(b==null?void 0:b.question)||"",oe=D(z).filter(K=>K.type==="blank");oe.length>0?C(oe.map(()=>"")):C([""]),V(null),A(!0)},$=()=>{const z=(b==null?void 0:b.question)||"",oe=D(z).filter(B=>B.type==="blank").map(B=>B.value);let K=[];oe.length>0?K=oe:b&&Array.isArray(b.options)&&typeof b.correctAnswer=="number"?K=[b.options[b.correctAnswer]||""]:b&&(b.answer||b.correct)&&(K=[String(b.answer||b.correct)]);const X=I.map((B,Q)=>{const ee=(K[Q]??K[0]??"").toString().trim().toLowerCase();return B.toString().trim().toLowerCase()===ee&&ee!==""}).every(Boolean);V(X?"Correct":"Incorrect"),X&&q(u,S)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Flashcards: ",c.title]}),l.jsx("p",{className:"text-muted-foreground",children:"Fill marks per question. Total progress shows weighted score."})]}),l.jsx("div",{children:l.jsx(zn,{to:"/admin/quizzes",children:l.jsx(se,{variant:"ghost",children:"Back"})})})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsx(Je,{children:"Progress"})}),l.jsxs(_e,{children:[l.jsxs("div",{className:"mb-2 text-sm",children:["Total: ",y," points â€” Current: ",P," points"]}),l.jsx(sA,{value:R}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[R,"%"]})]})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Je,{children:["Question ",u+1," / ",v.length]})}),l.jsx(_e,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"font-medium",children:x?l.jsxs("div",{className:"space-y-2",children:[(()=>{const z=D(b.question||"");let M=0;return l.jsxs("div",{children:[z.map((oe,K)=>{if(oe.type==="text")return l.jsx("span",{children:oe.value},K);const Z=M++;return l.jsx("input",{value:I[Z]??"",onChange:X=>C(B=>{const Q=[...B];return Q[Z]=X.target.value,Q}),placeholder:"Fill the blank",className:"border-b-2 border-gray-300 px-1 mx-1"},K)}),z.length===1&&z[0].type==="text"&&l.jsx("div",{children:l.jsx("input",{value:I[0]??"",onChange:oe=>C(K=>{const Z=[...K];return Z[0]=oe.target.value,Z}),placeholder:"Answer",className:"border-b-2 border-gray-300 px-1"})})]})})(),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx(se,{onClick:$,children:"Check"}),l.jsx(se,{variant:"outline",onClick:()=>{A(!1),V(null)},children:"Cancel"}),L&&l.jsx("div",{className:"ml-2 text-sm",children:L})]})]}):l.jsx("span",{role:"button",tabIndex:0,onClick:k,onKeyDown:z=>{z.key==="Enter"&&k()},children:b.question})}),b.imageUrl&&l.jsx("img",{src:b.imageUrl,alt:"question",className:"w-full max-w-md object-contain"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Weight: ",S]}),l.jsxs("label",{className:"text-sm",children:["Mark (0 - ",S,")"]}),l.jsx("input",{type:"number",min:0,max:S,value:E,onChange:z=>q(u,Math.max(0,Math.min(S,Number(z.target.value)||0))),className:"border rounded px-2 py-1 w-24"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(se,{disabled:u===0,onClick:()=>h(z=>Math.max(0,z-1)),children:"Previous"}),l.jsx(se,{disabled:u===v.length-1,onClick:()=>h(z=>Math.min(v.length-1,z+1)),children:"Next"}),l.jsx(se,{variant:"outline",onClick:()=>{g([]),h(0)},children:"Reset"})]}),l.jsx("div",{className:"mt-4",children:l.jsx(se,{onClick:()=>alert(`Final score: ${P}/${y} (${R}%)`),children:"Finish"})})]})})]})]})}function gz(){return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),l.jsx("p",{className:"text-muted-foreground",children:"Configure application settings and preferences"})]}),l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx($1,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"This section will provide configuration options for the admin panel."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Features: User management, system configuration, backup settings, security options."})]})})]})}function vz(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null);return _.useEffect(()=>{const m=Cr(it($e,"maps")),g=Go(m,v=>{const y=[];v.forEach(b=>{var E,x;const S=b.data();y.push({id:b.id,name:S.name||"",location:S.location||"",description:S.description||S.desc||"",type:S.type||S.mapType||"",video_url:S.video_url||S.videoUrl||"",createdAt:((x=(E=S.createdAt)==null?void 0:E.toDate)==null?void 0:x.call(E))||void 0})}),e(y),r(!1)},v=>{console.error("Failed to load maps:",v),a("Failed to load maps"),r(!1)});return()=>g()},[]),{maps:n,loading:t,error:s,createMap:async m=>{const g={...m,createdAt:new Date};g.type&&!g.mapType&&(g.mapType=g.type),g.mapType&&!g.type&&(g.type=g.mapType),["name","location","description","video_url","type","mapType"].forEach(v=>{typeof g[v]=="string"&&(g[v]=g[v].trim())}),await bn(it($e,"maps"),g)},updateMap:async(m,g)=>{const v={...g};v.type&&!v.mapType&&(v.mapType=v.type),v.mapType&&!v.type&&(v.type=v.mapType),["name","location","description","video_url","type","mapType"].forEach(y=>{typeof v[y]=="string"&&(v[y]=v[y].trim())}),await ln(Tt($e,"maps",m),v)},deleteMap:async m=>{await Sr(Tt($e,"maps",m))}}}function yz(){const{maps:n,loading:e,error:t,createMap:r,updateMap:s,deleteMap:a}=vz(),[c,u]=_.useState({name:"",location:"",description:"",video_url:"",type:""}),[h,m]=_.useState(!1),[g,v]=_.useState(null),y=()=>u({name:"",location:"",description:"",video_url:"",type:""}),b=async S=>{if(S.preventDefault(),!!c.name.trim()){m(!0);try{g?await s(g,c):await r(c),y(),v(null)}catch(E){console.error("Error saving map:",E),alert("Failed to save map")}finally{m(!1)}}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Lu,{className:"h-6 w-6 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold",children:"Maps"})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsx(Je,{children:"Add Map"})}),l.jsx(_e,{children:l.jsxs("form",{onSubmit:b,className:"grid md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{children:"Name"}),l.jsx(Pe,{value:c.name,onChange:S=>u(E=>({...E,name:S.target.value})),placeholder:"Map name",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{children:"Location"}),l.jsx(Pe,{value:c.location,onChange:S=>u(E=>({...E,location:S.target.value})),placeholder:"Location"})]}),l.jsxs("div",{className:"space-y-2 md:col-span-3",children:[l.jsx(De,{children:"Description"}),l.jsx("textarea",{value:c.description,onChange:S=>u(E=>({...E,description:S.target.value})),placeholder:"Short description",className:"w-full border rounded px-3 py-2",rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{children:"Type"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2",value:c.type,onChange:S=>u(E=>({...E,type:S.target.value})),children:[l.jsx("option",{value:"",children:"Select type"}),l.jsx("option",{value:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©",children:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©"}),l.jsx("option",{value:"Ù„Ø§Ø¨Ø§Øª",children:"Ù„Ø§Ø¨Ø§Øª"}),l.jsx("option",{value:"Ù…Ø¯Ø±Ø¬",children:"Ù…Ø¯Ø±Ø¬"}),l.jsx("option",{value:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª",children:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª"}),l.jsx("option",{value:"Ù…Ø·Ø¹Ù…",children:"Ù…Ø·Ø¹Ù…"}),l.jsx("option",{value:"Ù…ØµÙ„Ù‰",children:"Ù…ØµÙ„Ù‰"}),l.jsx("option",{value:"Ø£Ø®Ø±Ù‰",children:"Ø£Ø®Ø±Ù‰"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{children:"Video URL"}),l.jsx(Pe,{value:c.video_url,onChange:S=>u(E=>({...E,video_url:S.target.value})),placeholder:"https://..."})]}),l.jsx("div",{className:"md:col-span-3 flex justify-end space-x-2",children:g?l.jsxs(l.Fragment,{children:[l.jsx(se,{type:"button",variant:"outline",onClick:()=>{v(null),y()},children:"Cancel"}),l.jsxs(se,{type:"submit",disabled:h,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),h?"Saving...":"Save"]})]}):l.jsxs(se,{type:"submit",disabled:h,children:[l.jsx(Qt,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add"]})})]})})]}),l.jsxs(we,{children:[l.jsx(Ge,{children:l.jsxs(Je,{children:["All Maps (",n.length,")"]})}),l.jsx(_e,{children:e?l.jsx("div",{children:"Loading..."}):t?l.jsx("div",{className:"text-destructive",children:t}):n.length===0?l.jsx("div",{className:"text-muted-foreground",children:"No maps yet."}):l.jsx("div",{className:"grid gap-3",children:n.map(S=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:S.name}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:S.location}),S.type&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("span",{className:"font-medium",children:S.type})]}),S.description&&l.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:S.description}),S.video_url&&l.jsx("a",{className:"text-xs text-blue-600 hover:underline",href:S.video_url,target:"_blank",rel:"noreferrer",children:S.video_url})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{v(S.id),u({name:S.name||"",location:S.location||"",description:S.description||"",video_url:S.video_url||"",type:S.type||""}),window.scrollTo({top:0,behavior:"smooth"})},className:"",children:"Edit"}),l.jsx(se,{variant:"ghost",size:"icon",onClick:()=>a(S.id),className:"text-destructive",children:l.jsx(An,{className:"h-4 w-4"})})]})]},S.id))})})]})]})}function xz({research:n,onClose:e,onSave:t}){const[r,s]=_.useState({projectTitle:"",abstract:"",fieldOfResearch:[],contactPerson:[],authorshipPosition:[],projectDuration:"",requiredSkills:[],supervisor:""}),[a,c]=_.useState(""),[u,h]=_.useState("");_.useEffect(()=>{n&&s({projectTitle:n.projectTitle||"",abstract:n.abstract||"",fieldOfResearch:n.fieldOfResearch||[],contactPerson:n.contactPerson||[],authorshipPosition:n.authorshipPosition||[],projectDuration:n.projectDuration||"",requiredSkills:n.requiredSkills||[],supervisor:n.supervisor||""})},[n]);const m=()=>{const S=a.trim();S&&(r.fieldOfResearch.includes(S)||s(E=>({...E,fieldOfResearch:[...E.fieldOfResearch,S]})),c(""))},g=()=>{const S=u.trim();S&&(r.requiredSkills.includes(S)||s(E=>({...E,requiredSkills:[...E.requiredSkills,S]})),h(""))},v=S=>s(E=>({...E,fieldOfResearch:E.fieldOfResearch.filter(x=>x!==S)})),y=S=>s(E=>({...E,requiredSkills:E.requiredSkills.filter(x=>x!==S)})),b=S=>{S.preventDefault();const E={projectTitle:r.projectTitle,abstract:r.abstract,fieldOfResearch:r.fieldOfResearch,contactPerson:r.contactPerson,authorshipPosition:r.authorshipPosition,projectDuration:r.projectDuration,requiredSkills:r.requiredSkills,supervisor:r.supervisor,updatedAt:new Date,...n?{}:{createdAt:new Date}};t(E)};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(se,{variant:"ghost",onClick:e,children:[l.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Research":"Create Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Add or update research project details"})]})]})}),l.jsx("form",{onSubmit:b,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Project Details"}),l.jsx(Ct,{children:"Title and abstract"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"title",children:"Project Title *"}),l.jsx(Pe,{id:"title",placeholder:"Enter project title...",value:r.projectTitle,onChange:S=>s(E=>({...E,projectTitle:S.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{htmlFor:"abstract",children:"Abstract"}),l.jsx(Ii,{id:"abstract",placeholder:"Write a brief abstract...",value:r.abstract,onChange:S=>s(E=>({...E,abstract:S.target.value})),rows:8})]})]})]}),l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Fields & Skills"}),l.jsx(Ct,{children:"Fields of research and required skills"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(De,{children:"Field of Research"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(Pe,{placeholder:"Add field e.g., Oncology",value:a,onChange:S=>c(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),m())}}),l.jsx(se,{type:"button",onClick:m,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.fieldOfResearch.map(S=>l.jsxs(en,{variant:"secondary",className:"flex items-center gap-2",children:[S,l.jsx("button",{type:"button",onClick:()=>v(S),className:"ml-1 hover:text-destructive",children:l.jsx(rc,{className:"h-3 w-3"})})]},S))})]}),l.jsxs("div",{children:[l.jsx(De,{children:"Required Skills"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(Pe,{placeholder:"Add skill e.g., Data analysis",value:u,onChange:S=>h(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),g())}}),l.jsx(se,{type:"button",onClick:g,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.requiredSkills.map(S=>l.jsxs(en,{variant:"secondary",className:"flex items-center gap-2",children:[S,l.jsx("button",{type:"button",onClick:()=>y(S),className:"ml-1 hover:text-destructive",children:l.jsx(rc,{className:"h-3 w-3"})})]},S))})]})]})]})]}),l.jsx("div",{className:"space-y-6",children:l.jsxs(we,{children:[l.jsxs(Ge,{children:[l.jsx(Je,{children:"Meta"}),l.jsx(Ct,{children:"Contact, supervisor and duration"})]}),l.jsxs(_e,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{children:"Contact Person(s)"}),l.jsx(Pe,{placeholder:"Comma separated names",value:r.contactPerson.join(", "),onChange:S=>s(E=>({...E,contactPerson:S.target.value.split(",").map(x=>x.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{children:"Authorship Positions"}),l.jsx(Pe,{placeholder:"Comma separated positions",value:r.authorshipPosition.join(", "),onChange:S=>s(E=>({...E,authorshipPosition:S.target.value.split(",").map(x=>x.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{children:"Supervisor"}),l.jsx(Pe,{placeholder:"Supervisor name",value:r.supervisor,onChange:S=>s(E=>({...E,supervisor:S.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(De,{children:"Project Duration"}),l.jsx(Pe,{placeholder:"e.g., 6 months",value:r.projectDuration,onChange:S=>s(E=>({...E,projectDuration:S.target.value}))})]}),l.jsxs("div",{className:"flex justify-end",children:[l.jsx(se,{variant:"ghost",onClick:e,className:"mr-2",children:"Cancel"}),l.jsx(se,{type:"submit",children:"Save"})]})]})]})})]})})]})}const wz=[{id:"r1",projectTitle:"Impact of Early Clinical Exposure on Medical Students",abstract:"A study investigating how early clinical exposure affects students' clinical reasoning and confidence.",fieldOfResearch:["Medical Education","Clinical Skills"],contactPerson:["Dr. Sarah Johnson"],authorshipPosition:["Lead","Co-author"],projectDuration:"6 months",requiredSkills:["Clinical observation","Data analysis"],supervisor:"Prof. Michael Chen",createdAt:new Date,updatedAt:new Date}];function _z(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,a]=_.useState(null),[c,u]=_.useState(!1);_.useEffect(()=>{const v=async()=>{try{const b=Cr(it($e,"research"));await Dt(b);const S=Cr(it($e,"research"),xd("createdAt","desc"));return Go(S,x=>{const A=[];x.forEach(I=>{var L,V;const C=I.data();A.push({id:I.id,projectTitle:C.projectTitle||C.title||"",abstract:C.abstract||"",fieldOfResearch:C.fieldOfResearch||[],contactPerson:C.contactPerson||[],authorshipPosition:C.authorshipPosition||[],projectDuration:C.projectDuration||"",requiredSkills:C.requiredSkills||[],supervisor:C.supervisor||"",createdAt:(L=C.createdAt)!=null&&L.toDate?C.createdAt.toDate():C.createdAt||new Date,updatedAt:(V=C.updatedAt)!=null&&V.toDate?C.updatedAt.toDate():C.updatedAt||new Date})}),e(A),r(!1)},x=>{console.error("Error in research listener:",x),y()})}catch(b){return console.error("Firebase connection failed for research:",b),y(),null}},y=()=>{u(!0),e(wz),a(null),r(!1)};v()},[]);const h=async v=>{if(c){const y={id:`offline_${Date.now()}`,...v};e(b=>[y,...b]);return}try{await bn(it($e,"research"),v)}catch(y){console.error("Error creating research:",y),u(!0),await h(v)}};return{research:n,loading:t,error:s,createResearch:h,updateResearch:async(v,y)=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(b=>b.map(S=>S.id===v?{...S,...y}:S));return}try{await ln(Tt($e,"research",v),y)}catch(b){console.error("Error updating research:",b),e(S=>S.map(E=>E.id===v?{...E,...y}:E))}},deleteResearch:async v=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(y=>y.filter(b=>b.id!==v));return}try{await Sr(Tt($e,"research",v))}catch(y){console.error("Error deleting research:",y),e(b=>b.filter(S=>S.id!==v))}},isOfflineMode:c}}function Ez(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,a]=_.useState(!1),{research:c,loading:u,error:h,createResearch:m,updateResearch:g,deleteResearch:v}=_z(),y=c.filter(x=>x.projectTitle.toLowerCase().includes(n.toLowerCase())),b=()=>{r(null),a(!0)},S=x=>{r(x),a(!0)},E=async x=>{window.confirm("Are you sure you want to delete this research entry?")&&await v(x)};return s?l.jsx(xz,{research:t,onClose:()=>{a(!1),r(null)},onSave:async x=>{try{t?await g(t.id,x):await m(x),a(!1),r(null)}catch(A){console.error(A),alert("Failed to save. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage research projects and student/faculty submissions"})]}),l.jsxs(se,{onClick:b,className:"flex items-center gap-2",children:[l.jsx(Qt,{className:"h-4 w-4"}),"Create Research"]})]}),l.jsx(we,{children:l.jsx(_e,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(gc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Pe,{placeholder:"Search by project title...",value:n,onChange:x=>e(x.target.value),className:"pl-10"})]})})}),u&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx(Ro,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading research entries..."})]})}),h&&l.jsx(we,{children:l.jsxs(_e,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading research"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&l.jsx("div",{className:"space-y-4",children:y.map(x=>l.jsx(we,{className:"hover:shadow-md transition-shadow",children:l.jsx(_e,{className:"pt-6",children:l.jsx("div",{className:"flex gap-4",children:l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:x.projectTitle}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mt-2",children:x.abstract}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3 text-xs text-muted-foreground",children:(x.fieldOfResearch||[]).map(A=>l.jsx("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:A},A))})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(se,{variant:"ghost",onClick:()=>S(x),children:l.jsx(sd,{className:"h-4 w-4"})}),l.jsx(se,{variant:"ghost",onClick:()=>E(x.id),children:l.jsx(An,{className:"h-4 w-4"})})]})]})})})})},x.id))})]})}const bz=()=>{const n=Pi();return _.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),l.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Sz=new JD;function Nz({children:n}){const{currentUser:e}=Cx();return e?l.jsx(l.Fragment,{children:n}):l.jsx(af,{to:"/login"})}const Yb=()=>l.jsx(K6,{children:l.jsx(eO,{client:Sz,children:l.jsxs(ID,{children:[l.jsx(fk,{}),l.jsx(qk,{}),l.jsx(eL,{basename:"/builder-stellar-world/",children:l.jsx(q6,{children:l.jsxs(WO,{children:[l.jsx(Ut,{path:"/login",element:l.jsx(s5,{})}),l.jsxs(Ut,{path:"/admin",element:l.jsx(Nz,{children:l.jsx(Z6,{})}),children:[l.jsx(Ut,{index:!0,element:l.jsx(c5,{})}),l.jsx(Ut,{path:"news",element:l.jsx(g5,{})}),l.jsx(Ut,{path:"years",element:l.jsx(C$,{})}),l.jsx(Ut,{path:"years/:id",element:l.jsx(I$,{})}),l.jsx(Ut,{path:"subjects/:id",element:l.jsx(L$,{})}),l.jsx(Ut,{path:"resources",element:l.jsx(Kb,{})}),l.jsx(Ut,{path:"resources/*",element:l.jsx(Kb,{})}),l.jsx(Ut,{path:"VIDEOS",element:l.jsx(af,{to:"/admin/years",replace:!0})}),l.jsx(Ut,{path:"VIDEOS/*",element:l.jsx(af,{to:"/admin/years",replace:!0})}),l.jsx(Ut,{path:"professors",element:l.jsx(A$,{})}),l.jsx(Ut,{path:"users",element:l.jsx(k$,{})}),l.jsx(Ut,{path:"store",element:l.jsx(ez,{})}),l.jsx(Ut,{path:"orders",element:l.jsx(nz,{})}),l.jsx(Ut,{path:"videos",element:l.jsx(iz,{})}),l.jsx(Ut,{path:"files",element:l.jsx(oz,{})}),l.jsx(Ut,{path:"quizzes",element:l.jsx(az,{})}),l.jsx(Ut,{path:"flashcards",element:l.jsx(pz,{})}),l.jsx(Ut,{path:"research",element:l.jsx(Ez,{})}),l.jsx(Ut,{path:"maps",element:l.jsx(yz,{})}),l.jsx(Ut,{path:"settings",element:l.jsx(gz,{})})]}),l.jsx(Ut,{path:"/",element:l.jsx(af,{to:"/admin"})}),l.jsx(Ut,{path:"*",element:l.jsx(bz,{})})]})})})]})})}),Tz=document.getElementById("root");if(window.__appRoot)window.__appRoot.render(l.jsx(Yb,{}));else{const n=pk.createRoot(Tz);window.__appRoot=n,n.render(l.jsx(Yb,{}))}
