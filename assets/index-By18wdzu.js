var dR=Object.defineProperty;var z_=n=>{throw TypeError(n)};var hR=(n,e,t)=>e in n?dR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var $_=(n,e,t)=>hR(n,typeof e!="symbol"?e+"":e,t),Ug=(n,e,t)=>e.has(n)||z_("Cannot "+t);var Y=(n,e,t)=>(Ug(n,e,"read from private field"),t?t.call(n):e.get(n)),et=(n,e,t)=>e.has(n)?z_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Oe=(n,e,t,r)=>(Ug(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),vt=(n,e,t)=>(Ug(n,e,"access private method"),t);var sf=(n,e,t,r)=>({set _(s){Oe(n,e,s,t)},get _(){return Y(n,e,r)}});function fR(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function Z1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var zg={exports:{}},Ou={},$g={exports:{}},dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function pR(){if(B_)return dt;B_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=y&&B[y]||B["@@iterator"],typeof B=="function"?B:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function _(B,J,he){this.props=B,this.context=J,this.refs=x,this.updater=he||b}_.prototype.isReactComponent={},_.prototype.setState=function(B,J){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,J,"setState")},_.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function A(){}A.prototype=_.prototype;function I(B,J,he){this.props=B,this.context=J,this.refs=x,this.updater=he||b}var C=I.prototype=new A;C.constructor=I,S(C,_.prototype),C.isPureReactComponent=!0;var M=Array.isArray,U=Object.prototype.hasOwnProperty,$={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function k(B,J,he){var Ne,Ue={},Te=null,we=null;if(J!=null)for(Ne in J.ref!==void 0&&(we=J.ref),J.key!==void 0&&(Te=""+J.key),J)U.call(J,Ne)&&!P.hasOwnProperty(Ne)&&(Ue[Ne]=J[Ne]);var be=arguments.length-2;if(be===1)Ue.children=he;else if(1<be){for(var qe=Array(be),Me=0;Me<be;Me++)qe[Me]=arguments[Me+2];Ue.children=qe}if(B&&B.defaultProps)for(Ne in be=B.defaultProps,be)Ue[Ne]===void 0&&(Ue[Ne]=be[Ne]);return{$$typeof:n,type:B,key:Te,ref:we,props:Ue,_owner:$.current}}function D(B,J){return{$$typeof:n,type:B.type,key:J,ref:B.ref,props:B.props,_owner:B._owner}}function O(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function L(B){var J={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(he){return J[he]})}var V=/\/+/g;function R(B,J){return typeof B=="object"&&B!==null&&B.key!=null?L(""+B.key):J.toString(36)}function W(B,J,he,Ne,Ue){var Te=typeof B;(Te==="undefined"||Te==="boolean")&&(B=null);var we=!1;if(B===null)we=!0;else switch(Te){case"string":case"number":we=!0;break;case"object":switch(B.$$typeof){case n:case e:we=!0}}if(we)return we=B,Ue=Ue(we),B=Ne===""?"."+R(we,0):Ne,M(Ue)?(he="",B!=null&&(he=B.replace(V,"$&/")+"/"),W(Ue,J,he,"",function(Me){return Me})):Ue!=null&&(O(Ue)&&(Ue=D(Ue,he+(!Ue.key||we&&we.key===Ue.key?"":(""+Ue.key).replace(V,"$&/")+"/")+B)),J.push(Ue)),1;if(we=0,Ne=Ne===""?".":Ne+":",M(B))for(var be=0;be<B.length;be++){Te=B[be];var qe=Ne+R(Te,be);we+=W(Te,J,he,qe,Ue)}else if(qe=v(B),typeof qe=="function")for(B=qe.call(B),be=0;!(Te=B.next()).done;)Te=Te.value,qe=Ne+R(Te,be++),we+=W(Te,J,he,qe,Ue);else if(Te==="object")throw J=String(B),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return we}function K(B,J,he){if(B==null)return B;var Ne=[],Ue=0;return W(B,Ne,"","",function(Te){return J.call(he,Te,Ue++)}),Ne}function X(B){if(B._status===-1){var J=B._result;J=J(),J.then(function(he){(B._status===0||B._status===-1)&&(B._status=1,B._result=he)},function(he){(B._status===0||B._status===-1)&&(B._status=2,B._result=he)}),B._status===-1&&(B._status=0,B._result=J)}if(B._status===1)return B._result.default;throw B._result}var ie={current:null},G={transition:null},oe={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:G,ReactCurrentOwner:$};function le(){throw Error("act(...) is not supported in production builds of React.")}return dt.Children={map:K,forEach:function(B,J,he){K(B,function(){J.apply(this,arguments)},he)},count:function(B){var J=0;return K(B,function(){J++}),J},toArray:function(B){return K(B,function(J){return J})||[]},only:function(B){if(!O(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},dt.Component=_,dt.Fragment=t,dt.Profiler=s,dt.PureComponent=I,dt.StrictMode=r,dt.Suspense=h,dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,dt.act=le,dt.cloneElement=function(B,J,he){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Ne=S({},B.props),Ue=B.key,Te=B.ref,we=B._owner;if(J!=null){if(J.ref!==void 0&&(Te=J.ref,we=$.current),J.key!==void 0&&(Ue=""+J.key),B.type&&B.type.defaultProps)var be=B.type.defaultProps;for(qe in J)U.call(J,qe)&&!P.hasOwnProperty(qe)&&(Ne[qe]=J[qe]===void 0&&be!==void 0?be[qe]:J[qe])}var qe=arguments.length-2;if(qe===1)Ne.children=he;else if(1<qe){be=Array(qe);for(var Me=0;Me<qe;Me++)be[Me]=arguments[Me+2];Ne.children=be}return{$$typeof:n,type:B.type,key:Ue,ref:Te,props:Ne,_owner:we}},dt.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:o,_context:B},B.Consumer=B},dt.createElement=k,dt.createFactory=function(B){var J=k.bind(null,B);return J.type=B,J},dt.createRef=function(){return{current:null}},dt.forwardRef=function(B){return{$$typeof:u,render:B}},dt.isValidElement=O,dt.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:X}},dt.memo=function(B,J){return{$$typeof:p,type:B,compare:J===void 0?null:J}},dt.startTransition=function(B){var J=G.transition;G.transition={};try{B()}finally{G.transition=J}},dt.unstable_act=le,dt.useCallback=function(B,J){return ie.current.useCallback(B,J)},dt.useContext=function(B){return ie.current.useContext(B)},dt.useDebugValue=function(){},dt.useDeferredValue=function(B){return ie.current.useDeferredValue(B)},dt.useEffect=function(B,J){return ie.current.useEffect(B,J)},dt.useId=function(){return ie.current.useId()},dt.useImperativeHandle=function(B,J,he){return ie.current.useImperativeHandle(B,J,he)},dt.useInsertionEffect=function(B,J){return ie.current.useInsertionEffect(B,J)},dt.useLayoutEffect=function(B,J){return ie.current.useLayoutEffect(B,J)},dt.useMemo=function(B,J){return ie.current.useMemo(B,J)},dt.useReducer=function(B,J,he){return ie.current.useReducer(B,J,he)},dt.useRef=function(B){return ie.current.useRef(B)},dt.useState=function(B){return ie.current.useState(B)},dt.useSyncExternalStore=function(B,J,he){return ie.current.useSyncExternalStore(B,J,he)},dt.useTransition=function(){return ie.current.useTransition()},dt.version="18.3.1",dt}var q_;function qv(){return q_||(q_=1,$g.exports=pR()),$g.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function mR(){if(W_)return Ou;W_=1;var n=qv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,p){var g,y={},v=null,b=null;p!==void 0&&(v=""+p),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(b=h.ref);for(g in h)r.call(h,g)&&!o.hasOwnProperty(g)&&(y[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:u,key:v,ref:b,props:y,_owner:s.current}}return Ou.Fragment=t,Ou.jsx=c,Ou.jsxs=c,Ou}var H_;function gR(){return H_||(H_=1,zg.exports=mR()),zg.exports}var l=gR();let $f=!1,yR=[],Wu=0;const K_=3,Lc=n=>{$f!==n&&($f=n,console.log(`ðŸ”„ Firebase mode changed: ${n?"OFFLINE":"ONLINE"}`),yR.forEach(e=>e()))},G_=n=>{Wu++,console.log(`ðŸš¨ Firebase error ${Wu}/${K_}:`,n.message),Wu>=K_&&(console.log("ðŸ”„ Too many Firebase errors - switching to global offline mode"),Lc(!0))};if(!window.fetch.__firebasePatched){const n=window.fetch,e=(...t)=>{var o;const r=typeof t[0]=="string"?t[0]:(o=t[0])==null?void 0:o.url;if(!(!!r&&(r.includes("firestore.googleapis.com")||r.includes("firebase.googleapis.com")||r.includes("identitytoolkit.googleapis.com"))))try{return n(...t)}catch(c){return Promise.reject(c)}if($f){const c=new Error("Firebase offline mode - request blocked");return c.isFirebaseOfflineError=!0,Promise.reject(c)}try{const c=n(...t);return Promise.resolve(c).then(u=>(u.ok&&(Wu=0,$f&&(console.log("ðŸŸ¢ Firebase connection restored"),Lc(!1))),u)).catch(u=>{console.log("ðŸ”´ Firebase request failed:",(u==null?void 0:u.message)||String(u));const h=String(u&&(u.stack||"")||""),p=String((u==null?void 0:u.message)||u||"").toLowerCase();throw!(h.includes("chrome-extension://")||h.includes("extension://")||p.includes("extension"))&&navigator.onLine&&G_(u),u})}catch(c){console.log("ðŸ”´ Firebase request threw synchronously:",(c==null?void 0:c.message)||String(c));const u=String(c&&(c.stack||"")||""),h=String((c==null?void 0:c.message)||c||"").toLowerCase();return!(u.includes("chrome-extension://")||u.includes("extension://")||h.includes("extension"))&&navigator.onLine&&G_(c),Promise.reject(c)}};e.__firebasePatched=!0,window.fetch=e}console.log("ðŸ”„ Initializing Firebase monitoring...");navigator.onLine||(console.log("ðŸš« No internet connection - starting in offline mode"),Lc(!0));window.addEventListener("online",()=>{console.log("ðŸŸ¢ Internet connection restored"),Wu=0,Lc(!1)});window.addEventListener("offline",()=>{console.log("ðŸ”´ Internet connection lost"),Lc(!0)});console.log("ðŸ”„ Starting Firebase monitoring in ONLINE mode");window.addEventListener("unhandledrejection",n=>{var r;const e=String(((r=n==null?void 0:n.reason)==null?void 0:r.message)||(n==null?void 0:n.reason)||""),t=String((n==null?void 0:n.reason)&&(n.reason.stack||"")||"");if((e.includes("Failed to fetch")||e.toLowerCase().includes("extension"))&&(t.includes("chrome-extension://")||t.includes("extension://")||t.includes("fullstory.com"))){n.preventDefault();return}if(t.includes("chrome-extension://")||t.includes("extension://")){n.preventDefault();return}});const vR=console.error,xR=console.warn,wR=console.log;console.error=(...n)=>{const e=n.map(s=>s&&typeof s=="object"?String(s):s).join(" "),t=n.some(s=>s&&typeof s=="object"&&s.stack&&s.stack.includes("chrome-extension://"));["Firebase offline mode - request blocked","FirebaseError: [code=unavailable]","Could not reach Cloud Firestore backend","Connection failed","The operation could not be completed","device does not have a healthy Internet connection","client will operate in offline mode","Most recent error: FirebaseError","@firebase/firestore: Firestore","fullstory.com","TypeError: Failed to fetch"].some(s=>e.includes(s))||t||e.includes("chrome-extension://")||e.includes("extension://")||vR.apply(console,n)};console.warn=(...n)=>{const e=n.join(" ");e.includes("Firebase")&&e.includes("offline")||xR.apply(console,n)};console.log=(...n)=>{const e=n.join(" ");e.includes("@firebase/firestore")&&e.includes("offline")||wR.apply(console,n)};setTimeout(()=>{navigator.onLine?console.log("ðŸŒ Internet available - Firebase enabled and ready"):(console.log("ðŸš« No internet connection detected - switching to offline mode"),Lc(!0))},100);var E=qv();const _e=Z1(E),eS=fR({__proto__:null,default:_e},[E]),_R=1,ER=1e6;let Bg=0;function bR(){return Bg=(Bg+1)%Number.MAX_SAFE_INTEGER,Bg.toString()}const qg=new Map,Q_=n=>{if(qg.has(n))return;const e=setTimeout(()=>{qg.delete(n),Hu({type:"REMOVE_TOAST",toastId:n})},ER);qg.set(n,e)},SR=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,_R)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?Q_(t):n.toasts.forEach(r=>{Q_(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Cf=[];let If={toasts:[]};function Hu(n){If=SR(If,n),Cf.forEach(e=>{e(If)})}function NR({...n}){const e=bR(),t=s=>Hu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Hu({type:"DISMISS_TOAST",toastId:e});return Hu({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function TR(){const[n,e]=E.useState(If);return E.useEffect(()=>(Cf.push(e),()=>{const t=Cf.indexOf(e);t>-1&&Cf.splice(t,1)}),[n]),{...n,toast:NR,dismiss:t=>Hu({type:"DISMISS_TOAST",toastId:t})}}var Wg={exports:{}},gr={},Hg={exports:{}},Kg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function CR(){return Y_||(Y_=1,function(n){function e(G,oe){var le=G.length;G.push(oe);e:for(;0<le;){var B=le-1>>>1,J=G[B];if(0<s(J,oe))G[B]=oe,G[le]=J,le=B;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var oe=G[0],le=G.pop();if(le!==oe){G[0]=le;e:for(var B=0,J=G.length,he=J>>>1;B<he;){var Ne=2*(B+1)-1,Ue=G[Ne],Te=Ne+1,we=G[Te];if(0>s(Ue,le))Te<J&&0>s(we,Ue)?(G[B]=we,G[Te]=le,B=Te):(G[B]=Ue,G[Ne]=le,B=Ne);else if(Te<J&&0>s(we,le))G[B]=we,G[Te]=le,B=Te;else break e}}return oe}function s(G,oe){var le=G.sortIndex-oe.sortIndex;return le!==0?le:G.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var h=[],p=[],g=1,y=null,v=3,b=!1,S=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(G){for(var oe=t(p);oe!==null;){if(oe.callback===null)r(p);else if(oe.startTime<=G)r(p),oe.sortIndex=oe.expirationTime,e(h,oe);else break;oe=t(p)}}function M(G){if(x=!1,C(G),!S)if(t(h)!==null)S=!0,X(U);else{var oe=t(p);oe!==null&&ie(M,oe.startTime-G)}}function U(G,oe){S=!1,x&&(x=!1,A(k),k=-1),b=!0;var le=v;try{for(C(oe),y=t(h);y!==null&&(!(y.expirationTime>oe)||G&&!L());){var B=y.callback;if(typeof B=="function"){y.callback=null,v=y.priorityLevel;var J=B(y.expirationTime<=oe);oe=n.unstable_now(),typeof J=="function"?y.callback=J:y===t(h)&&r(h),C(oe)}else r(h);y=t(h)}if(y!==null)var he=!0;else{var Ne=t(p);Ne!==null&&ie(M,Ne.startTime-oe),he=!1}return he}finally{y=null,v=le,b=!1}}var $=!1,P=null,k=-1,D=5,O=-1;function L(){return!(n.unstable_now()-O<D)}function V(){if(P!==null){var G=n.unstable_now();O=G;var oe=!0;try{oe=P(!0,G)}finally{oe?R():($=!1,P=null)}}else $=!1}var R;if(typeof I=="function")R=function(){I(V)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,K=W.port2;W.port1.onmessage=V,R=function(){K.postMessage(null)}}else R=function(){_(V,0)};function X(G){P=G,$||($=!0,R())}function ie(G,oe){k=_(function(){G(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,X(U))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(G){switch(v){case 1:case 2:case 3:var oe=3;break;default:oe=v}var le=v;v=oe;try{return G()}finally{v=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,oe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var le=v;v=G;try{return oe()}finally{v=le}},n.unstable_scheduleCallback=function(G,oe,le){var B=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?B+le:B):le=B,G){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=le+J,G={id:g++,callback:oe,priorityLevel:G,startTime:le,expirationTime:J,sortIndex:-1},le>B?(G.sortIndex=le,e(p,G),t(h)===null&&G===t(p)&&(x?(A(k),k=-1):x=!0,ie(M,le-B))):(G.sortIndex=J,e(h,G),S||b||(S=!0,X(U))),G},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(G){var oe=v;return function(){var le=v;v=oe;try{return G.apply(this,arguments)}finally{v=le}}}}(Kg)),Kg}var X_;function IR(){return X_||(X_=1,Hg.exports=CR()),Hg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function jR(){if(J_)return gr;J_=1;var n=qv(),e=IR();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){c(i,a),c(i+"Capture",a)}function c(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(i){return h.call(y,i)?!0:h.call(g,i)?!1:p.test(i)?y[i]=!0:(g[i]=!0,!1)}function b(i,a,d,m){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function S(i,a,d,m){if(a===null||typeof a>"u"||b(i,a,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function x(i,a,d,m,w,T,F){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=w,this.mustUseProperty=d,this.propertyName=i,this.type=a,this.sanitizeURL=T,this.removeEmptyString=F}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){_[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];_[a]=new x(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){_[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){_[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){_[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){_[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){_[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){_[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){_[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function I(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(A,I);_[a]=new x(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(A,I);_[a]=new x(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(A,I);_[a]=new x(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){_[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),_.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){_[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,a,d,m){var w=_.hasOwnProperty(a)?_[a]:null;(w!==null?w.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(S(a,d,w,m)&&(d=null),m||w===null?v(a)&&(d===null?i.removeAttribute(a):i.setAttribute(a,""+d)):w.mustUseProperty?i[w.propertyName]=d===null?w.type===3?!1:"":d:(a=w.attributeName,m=w.attributeNamespace,d===null?i.removeAttribute(a):(w=w.type,d=w===3||w===4&&d===!0?"":""+d,m?i.setAttributeNS(m,a,d):i.setAttribute(a,d))))}var M=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),$=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),L=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),G=Symbol.iterator;function oe(i){return i===null||typeof i!="object"?null:(i=G&&i[G]||i["@@iterator"],typeof i=="function"?i:null)}var le=Object.assign,B;function J(i){if(B===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);B=a&&a[1]||""}return`
`+B+i}var he=!1;function Ne(i,a){if(!i||he)return"";he=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(se){var m=se}Reflect.construct(i,[],a)}else{try{a.call()}catch(se){m=se}i.call(a.prototype)}else{try{throw Error()}catch(se){m=se}i()}}catch(se){if(se&&m&&typeof se.stack=="string"){for(var w=se.stack.split(`
`),T=m.stack.split(`
`),F=w.length-1,q=T.length-1;1<=F&&0<=q&&w[F]!==T[q];)q--;for(;1<=F&&0<=q;F--,q--)if(w[F]!==T[q]){if(F!==1||q!==1)do if(F--,q--,0>q||w[F]!==T[q]){var H=`
`+w[F].replace(" at new "," at ");return i.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",i.displayName)),H}while(1<=F&&0<=q);break}}}finally{he=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?J(i):""}function Ue(i){switch(i.tag){case 5:return J(i.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return i=Ne(i.type,!1),i;case 11:return i=Ne(i.type.render,!1),i;case 1:return i=Ne(i.type,!0),i;default:return""}}function Te(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case $:return"Portal";case D:return"Profiler";case k:return"StrictMode";case R:return"Suspense";case W:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case O:return(i._context.displayName||"Context")+".Provider";case V:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case K:return a=i.displayName||null,a!==null?a:Te(i.type)||"Memo";case X:a=i._payload,i=i._init;try{return Te(i(a))}catch{}}return null}function we(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(a);case 8:return a===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function be(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function qe(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Me(i){var a=qe(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),m=""+i[a];if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var w=d.get,T=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return w.call(this)},set:function(F){m=""+F,T.call(this,F)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(F){m=""+F},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function rt(i){i._valueTracker||(i._valueTracker=Me(i))}function st(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return i&&(m=qe(i)?i.checked?"true":"false":i.value),i=m,i!==d?(a.setValue(i),!0):!1}function ge(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ie(i,a){var d=a.checked;return le({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function pt(i,a){var d=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;d=be(a.value!=null?a.value:d),i._wrapperState={initialChecked:m,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function sn(i,a){a=a.checked,a!=null&&C(i,"checked",a,!1)}function zn(i,a){sn(i,a);var d=be(a.value),m=a.type;if(d!=null)m==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?Ot(i,a.type,d):a.hasOwnProperty("defaultValue")&&Ot(i,a.type,be(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function br(i,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,d||a===i.value||(i.value=a),i.defaultValue=a}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function Ot(i,a,d){(a!=="number"||ge(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var dn=Array.isArray;function Sr(i,a,d,m){if(i=i.options,a){a={};for(var w=0;w<d.length;w++)a["$"+d[w]]=!0;for(d=0;d<i.length;d++)w=a.hasOwnProperty("$"+i[d].value),i[d].selected!==w&&(i[d].selected=w),w&&m&&(i[d].defaultSelected=!0)}else{for(d=""+be(d),a=null,w=0;w<i.length;w++){if(i[w].value===d){i[w].selected=!0,m&&(i[w].defaultSelected=!0);return}a!==null||i[w].disabled||(a=i[w])}a!==null&&(a.selected=!0)}}function Xr(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ln(i,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(t(92));if(dn(d)){if(1<d.length)throw Error(t(93));d=d[0]}a=d}a==null&&(a=""),d=a}i._wrapperState={initialValue:be(d)}}function Ts(i,a){var d=be(a.value),m=be(a.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),a.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),m!=null&&(i.defaultValue=""+m)}function Cs(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Ut(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Ut(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var $n,wn=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,m,w){MSApp.execUnsafeLocalFunction(function(){return i(a,d,m,w)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for($n=$n||document.createElement("div"),$n.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=$n.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Nr(i,a){if(a){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=a;return}}i.textContent=a}var Jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fr=["Webkit","ms","Moz","O"];Object.keys(Jr).forEach(function(i){Fr.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Jr[a]=Jr[i]})});function Is(i,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||Jr.hasOwnProperty(i)&&Jr[i]?(""+a).trim():a+"px"}function ui(i,a){i=i.style;for(var d in a)if(a.hasOwnProperty(d)){var m=d.indexOf("--")===0,w=Is(d,a[d],m);d==="float"&&(d="cssFloat"),m?i.setProperty(d,w):i[d]=w}}var Zr=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bn(i,a){if(a){if(Zr[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function js(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ye=null;function _t(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var mt=null,zt=null,Kt=null;function ne(i){if(i=xu(i)){if(typeof mt!="function")throw Error(t(280));var a=i.stateNode;a&&(a=xh(a),mt(i.stateNode,i.type,a))}}function me(i){zt?Kt?Kt.push(i):Kt=[i]:zt=i}function Fe(){if(zt){var i=zt,a=Kt;if(Kt=zt=null,ne(i),a)for(i=0;i<a.length;i++)ne(a[i])}}function St(i,a){return i(a)}function lt(){}var gt=!1;function Re(i,a,d){if(gt)return i(a,d);gt=!0;try{return St(i,a,d)}finally{gt=!1,(zt!==null||Kt!==null)&&(lt(),Fe())}}function Gt(i,a){var d=i.stateNode;if(d===null)return null;var m=xh(d);if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(t(231,a,typeof d));return d}var di=!1;if(u)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){di=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{di=!1}function As(i,a,d,m,w,T,F,q,H){var se=Array.prototype.slice.call(arguments,3);try{a.apply(d,se)}catch(fe){this.onError(fe)}}var Ps=!1,hi=null,lr=!1,qi=null,dl={onError:function(i){Ps=!0,hi=i}};function $t(i,a,d,m,w,T,F,q,H){Ps=!1,hi=null,As.apply(dl,arguments)}function hl(i,a,d,m,w,T,F,q,H){if($t.apply(this,arguments),Ps){if(Ps){var se=hi;Ps=!1,hi=null}else throw Error(t(198));lr||(lr=!0,qi=se)}}function es(i){var a=i,d=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(d=a.return),i=a.return;while(i)}return a.tag===3?d:null}function ua(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function ts(i){if(es(i)!==i)throw Error(t(188))}function Wd(i){var a=i.alternate;if(!a){if(a=es(i),a===null)throw Error(t(188));return a!==i?null:i}for(var d=i,m=a;;){var w=d.return;if(w===null)break;var T=w.alternate;if(T===null){if(m=w.return,m!==null){d=m;continue}break}if(w.child===T.child){for(T=w.child;T;){if(T===d)return ts(w),i;if(T===m)return ts(w),a;T=T.sibling}throw Error(t(188))}if(d.return!==m.return)d=w,m=T;else{for(var F=!1,q=w.child;q;){if(q===d){F=!0,d=w,m=T;break}if(q===m){F=!0,m=w,d=T;break}q=q.sibling}if(!F){for(q=T.child;q;){if(q===d){F=!0,d=T,m=w;break}if(q===m){F=!0,m=T,d=w;break}q=q.sibling}if(!F)throw Error(t(189))}}if(d.alternate!==m)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?i:a}function eu(i){return i=Wd(i),i!==null?fl(i):null}function fl(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=fl(i);if(a!==null)return a;i=i.sibling}return null}var pl=e.unstable_scheduleCallback,tu=e.unstable_cancelCallback,Hd=e.unstable_shouldYield,mm=e.unstable_requestPaint,Mt=e.unstable_now,Kd=e.unstable_getCurrentPriorityLevel,da=e.unstable_ImmediatePriority,Wi=e.unstable_UserBlockingPriority,Vr=e.unstable_NormalPriority,nu=e.unstable_LowPriority,Gd=e.unstable_IdlePriority,ha=null,Tr=null;function Qd(i){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(ha,i,void 0,(i.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:Xd,ru=Math.log,Yd=Math.LN2;function Xd(i){return i>>>=0,i===0?32:31-(ru(i)/Yd|0)|0}var ml=64,gl=4194304;function Hi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function fa(i,a){var d=i.pendingLanes;if(d===0)return 0;var m=0,w=i.suspendedLanes,T=i.pingedLanes,F=d&268435455;if(F!==0){var q=F&~w;q!==0?m=Hi(q):(T&=F,T!==0&&(m=Hi(T)))}else F=d&~w,F!==0?m=Hi(F):T!==0&&(m=Hi(T));if(m===0)return 0;if(a!==0&&a!==m&&(a&w)===0&&(w=m&-m,T=a&-a,w>=T||w===16&&(T&4194240)!==0))return a;if((m&4)!==0&&(m|=d&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=m;0<a;)d=31-er(a),w=1<<d,m|=i[d],a&=~w;return m}function gm(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fi(i,a){for(var d=i.suspendedLanes,m=i.pingedLanes,w=i.expirationTimes,T=i.pendingLanes;0<T;){var F=31-er(T),q=1<<F,H=w[F];H===-1?((q&d)===0||(q&m)!==0)&&(w[F]=gm(q,a)):H<=a&&(i.expiredLanes|=q),T&=~q}}function Cr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function pa(){var i=ml;return ml<<=1,(ml&4194240)===0&&(ml=64),i}function Ki(i){for(var a=[],d=0;31>d;d++)a.push(i);return a}function Gi(i,a,d){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-er(a),i[a]=d}function Dt(i,a){var d=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<d;){var w=31-er(d),T=1<<w;a[w]=0,m[w]=-1,i[w]=-1,d&=~T}}function Qi(i,a){var d=i.entangledLanes|=a;for(i=i.entanglements;d;){var m=31-er(d),w=1<<m;w&a|i[m]&a&&(i[m]|=a),d&=~w}}var yt=0;function Yi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Jd,yl,Zd,eh,th,su=!1,Rs=[],Rn=null,ns=null,rs=null,Xi=new Map,Ur=new Map,ks=[],ym="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nh(i,a){switch(i){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Xi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ur.delete(a.pointerId)}}function cr(i,a,d,m,w,T){return i===null||i.nativeEvent!==T?(i={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:T,targetContainers:[w]},a!==null&&(a=xu(a),a!==null&&yl(a)),i):(i.eventSystemFlags|=m,a=i.targetContainers,w!==null&&a.indexOf(w)===-1&&a.push(w),i)}function vm(i,a,d,m,w){switch(a){case"focusin":return Rn=cr(Rn,i,a,d,m,w),!0;case"dragenter":return ns=cr(ns,i,a,d,m,w),!0;case"mouseover":return rs=cr(rs,i,a,d,m,w),!0;case"pointerover":var T=w.pointerId;return Xi.set(T,cr(Xi.get(T)||null,i,a,d,m,w)),!0;case"gotpointercapture":return T=w.pointerId,Ur.set(T,cr(Ur.get(T)||null,i,a,d,m,w)),!0}return!1}function rh(i){var a=xa(i.target);if(a!==null){var d=es(a);if(d!==null){if(a=d.tag,a===13){if(a=ua(d),a!==null){i.blockedOn=a,th(i.priority,function(){Zd(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function pi(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var d=vl(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var m=new d.constructor(d.type,d);Ye=m,d.target.dispatchEvent(m),Ye=null}else return a=xu(d),a!==null&&yl(a),i.blockedOn=d,!1;a.shift()}return!0}function ma(i,a,d){pi(i)&&d.delete(a)}function sh(){su=!1,Rn!==null&&pi(Rn)&&(Rn=null),ns!==null&&pi(ns)&&(ns=null),rs!==null&&pi(rs)&&(rs=null),Xi.forEach(ma),Ur.forEach(ma)}function ss(i,a){i.blockedOn===a&&(i.blockedOn=null,su||(su=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sh)))}function is(i){function a(w){return ss(w,i)}if(0<Rs.length){ss(Rs[0],i);for(var d=1;d<Rs.length;d++){var m=Rs[d];m.blockedOn===i&&(m.blockedOn=null)}}for(Rn!==null&&ss(Rn,i),ns!==null&&ss(ns,i),rs!==null&&ss(rs,i),Xi.forEach(a),Ur.forEach(a),d=0;d<ks.length;d++)m=ks[d],m.blockedOn===i&&(m.blockedOn=null);for(;0<ks.length&&(d=ks[0],d.blockedOn===null);)rh(d),d.blockedOn===null&&ks.shift()}var mi=M.ReactCurrentBatchConfig,Ji=!0;function Qt(i,a,d,m){var w=yt,T=mi.transition;mi.transition=null;try{yt=1,iu(i,a,d,m)}finally{yt=w,mi.transition=T}}function xm(i,a,d,m){var w=yt,T=mi.transition;mi.transition=null;try{yt=4,iu(i,a,d,m)}finally{yt=w,mi.transition=T}}function iu(i,a,d,m){if(Ji){var w=vl(i,a,d,m);if(w===null)Am(i,a,m,ga,d),nh(i,m);else if(vm(w,i,a,d,m))m.stopPropagation();else if(nh(i,m),a&4&&-1<ym.indexOf(i)){for(;w!==null;){var T=xu(w);if(T!==null&&Jd(T),T=vl(i,a,d,m),T===null&&Am(i,a,m,ga,d),T===w)break;w=T}w!==null&&m.stopPropagation()}else Am(i,a,m,null,d)}}var ga=null;function vl(i,a,d,m){if(ga=null,i=_t(m),i=xa(i),i!==null)if(a=es(i),a===null)i=null;else if(d=a.tag,d===13){if(i=ua(a),i!==null)return i;i=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return ga=i,null}function ou(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kd()){case da:return 1;case Wi:return 4;case Vr:case nu:return 16;case Gd:return 536870912;default:return 16}default:return 16}}var Ir=null,xl=null,ur=null;function au(){if(ur)return ur;var i,a=xl,d=a.length,m,w="value"in Ir?Ir.value:Ir.textContent,T=w.length;for(i=0;i<d&&a[i]===w[i];i++);var F=d-i;for(m=1;m<=F&&a[d-m]===w[T-m];m++);return ur=w.slice(i,1<m?1-m:void 0)}function wl(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Os(){return!0}function lu(){return!1}function kn(i){function a(d,m,w,T,F){this._reactName=d,this._targetInst=w,this.type=m,this.nativeEvent=T,this.target=F,this.currentTarget=null;for(var q in i)i.hasOwnProperty(q)&&(d=i[q],this[q]=d?d(T):T[q]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Os:lu,this.isPropagationStopped=lu,this}return le(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Os)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Os)},persist:function(){},isPersistent:Os}),a}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=kn(os),Ds=le({},os,{view:0,detail:0}),wm=kn(Ds),El,gi,Zi,ya=le({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Zi&&(Zi&&i.type==="mousemove"?(El=i.screenX-Zi.screenX,gi=i.screenY-Zi.screenY):gi=El=0,Zi=i),El)},movementY:function(i){return"movementY"in i?i.movementY:gi}}),bl=kn(ya),cu=le({},ya,{dataTransfer:0}),ih=kn(cu),Sl=le({},Ds,{relatedTarget:0}),Nl=kn(Sl),oh=le({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),yi=kn(oh),ah=le({},os,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),lh=kn(ah),ch=le({},os,{data:0}),uu=kn(ch),Tl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dh(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=uh[i])?!!a[i]:!1}function Ls(){return dh}var f=le({},Ds,{key:function(i){if(i.key){var a=Tl[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=wl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?tr[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(i){return i.type==="keypress"?wl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?wl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),N=kn(f),j=le({},ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z=kn(j),Z=le({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),ae=kn(Z),Ee=le({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rt=kn(Ee),_n=le({},ya,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Et=kn(_n),Cn=[9,13,27,32],hn=u&&"CompositionEvent"in window,zr=null;u&&"documentMode"in document&&(zr=document.documentMode);var jr=u&&"TextEvent"in window&&!zr,va=u&&(!hn||zr&&8<zr&&11>=zr),Cl=" ",Dw=!1;function Lw(i,a){switch(i){case"keyup":return Cn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mw(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Il=!1;function lP(i,a){switch(i){case"compositionend":return Mw(a);case"keypress":return a.which!==32?null:(Dw=!0,Cl);case"textInput":return i=a.data,i===Cl&&Dw?null:i;default:return null}}function cP(i,a){if(Il)return i==="compositionend"||!hn&&Lw(i,a)?(i=au(),ur=xl=Ir=null,Il=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return va&&a.locale!=="ko"?null:a.data;default:return null}}var uP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fw(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!uP[i.type]:a==="textarea"}function Vw(i,a,d,m){me(m),a=gh(a,"onChange"),0<a.length&&(d=new _l("onChange","change",null,d,m),i.push({event:d,listeners:a}))}var du=null,hu=null;function dP(i){r0(i,0)}function hh(i){var a=kl(i);if(st(a))return i}function hP(i,a){if(i==="change")return a}var Uw=!1;if(u){var _m;if(u){var Em="oninput"in document;if(!Em){var zw=document.createElement("div");zw.setAttribute("oninput","return;"),Em=typeof zw.oninput=="function"}_m=Em}else _m=!1;Uw=_m&&(!document.documentMode||9<document.documentMode)}function $w(){du&&(du.detachEvent("onpropertychange",Bw),hu=du=null)}function Bw(i){if(i.propertyName==="value"&&hh(hu)){var a=[];Vw(a,hu,i,_t(i)),Re(dP,a)}}function fP(i,a,d){i==="focusin"?($w(),du=a,hu=d,du.attachEvent("onpropertychange",Bw)):i==="focusout"&&$w()}function pP(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return hh(hu)}function mP(i,a){if(i==="click")return hh(a)}function gP(i,a){if(i==="input"||i==="change")return hh(a)}function yP(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var as=typeof Object.is=="function"?Object.is:yP;function fu(i,a){if(as(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var d=Object.keys(i),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var w=d[m];if(!h.call(a,w)||!as(i[w],a[w]))return!1}return!0}function qw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ww(i,a){var d=qw(i);i=0;for(var m;d;){if(d.nodeType===3){if(m=i+d.textContent.length,i<=a&&m>=a)return{node:d,offset:a-i};i=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=qw(d)}}function Hw(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Hw(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Kw(){for(var i=window,a=ge();a instanceof i.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)i=a.contentWindow;else break;a=ge(i.document)}return a}function bm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function vP(i){var a=Kw(),d=i.focusedElem,m=i.selectionRange;if(a!==d&&d&&d.ownerDocument&&Hw(d.ownerDocument.documentElement,d)){if(m!==null&&bm(d)){if(a=m.start,i=m.end,i===void 0&&(i=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(i,d.value.length);else if(i=(a=d.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var w=d.textContent.length,T=Math.min(m.start,w);m=m.end===void 0?T:Math.min(m.end,w),!i.extend&&T>m&&(w=m,m=T,T=w),w=Ww(d,T);var F=Ww(d,m);w&&F&&(i.rangeCount!==1||i.anchorNode!==w.node||i.anchorOffset!==w.offset||i.focusNode!==F.node||i.focusOffset!==F.offset)&&(a=a.createRange(),a.setStart(w.node,w.offset),i.removeAllRanges(),T>m?(i.addRange(a),i.extend(F.node,F.offset)):(a.setEnd(F.node,F.offset),i.addRange(a)))}}for(a=[],i=d;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)i=a[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var xP=u&&"documentMode"in document&&11>=document.documentMode,jl=null,Sm=null,pu=null,Nm=!1;function Gw(i,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Nm||jl==null||jl!==ge(m)||(m=jl,"selectionStart"in m&&bm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),pu&&fu(pu,m)||(pu=m,m=gh(Sm,"onSelect"),0<m.length&&(a=new _l("onSelect","select",null,a,d),i.push({event:a,listeners:m}),a.target=jl)))}function fh(i,a){var d={};return d[i.toLowerCase()]=a.toLowerCase(),d["Webkit"+i]="webkit"+a,d["Moz"+i]="moz"+a,d}var Al={animationend:fh("Animation","AnimationEnd"),animationiteration:fh("Animation","AnimationIteration"),animationstart:fh("Animation","AnimationStart"),transitionend:fh("Transition","TransitionEnd")},Tm={},Qw={};u&&(Qw=document.createElement("div").style,"AnimationEvent"in window||(delete Al.animationend.animation,delete Al.animationiteration.animation,delete Al.animationstart.animation),"TransitionEvent"in window||delete Al.transitionend.transition);function ph(i){if(Tm[i])return Tm[i];if(!Al[i])return i;var a=Al[i],d;for(d in a)if(a.hasOwnProperty(d)&&d in Qw)return Tm[i]=a[d];return i}var Yw=ph("animationend"),Xw=ph("animationiteration"),Jw=ph("animationstart"),Zw=ph("transitionend"),e0=new Map,t0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eo(i,a){e0.set(i,a),o(a,[i])}for(var Cm=0;Cm<t0.length;Cm++){var Im=t0[Cm],wP=Im.toLowerCase(),_P=Im[0].toUpperCase()+Im.slice(1);eo(wP,"on"+_P)}eo(Yw,"onAnimationEnd"),eo(Xw,"onAnimationIteration"),eo(Jw,"onAnimationStart"),eo("dblclick","onDoubleClick"),eo("focusin","onFocus"),eo("focusout","onBlur"),eo(Zw,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EP=new Set("cancel close invalid load scroll toggle".split(" ").concat(mu));function n0(i,a,d){var m=i.type||"unknown-event";i.currentTarget=d,hl(m,a,void 0,i),i.currentTarget=null}function r0(i,a){a=(a&4)!==0;for(var d=0;d<i.length;d++){var m=i[d],w=m.event;m=m.listeners;e:{var T=void 0;if(a)for(var F=m.length-1;0<=F;F--){var q=m[F],H=q.instance,se=q.currentTarget;if(q=q.listener,H!==T&&w.isPropagationStopped())break e;n0(w,q,se),T=H}else for(F=0;F<m.length;F++){if(q=m[F],H=q.instance,se=q.currentTarget,q=q.listener,H!==T&&w.isPropagationStopped())break e;n0(w,q,se),T=H}}}if(lr)throw i=qi,lr=!1,qi=null,i}function Bt(i,a){var d=a[Lm];d===void 0&&(d=a[Lm]=new Set);var m=i+"__bubble";d.has(m)||(s0(a,i,2,!1),d.add(m))}function jm(i,a,d){var m=0;a&&(m|=4),s0(d,i,m,a)}var mh="_reactListening"+Math.random().toString(36).slice(2);function gu(i){if(!i[mh]){i[mh]=!0,r.forEach(function(d){d!=="selectionchange"&&(EP.has(d)||jm(d,!1,i),jm(d,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[mh]||(a[mh]=!0,jm("selectionchange",!1,a))}}function s0(i,a,d,m){switch(ou(a)){case 1:var w=Qt;break;case 4:w=xm;break;default:w=iu}d=w.bind(null,a,d,i),w=void 0,!di||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(w=!0),m?w!==void 0?i.addEventListener(a,d,{capture:!0,passive:w}):i.addEventListener(a,d,!0):w!==void 0?i.addEventListener(a,d,{passive:w}):i.addEventListener(a,d,!1)}function Am(i,a,d,m,w){var T=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var F=m.tag;if(F===3||F===4){var q=m.stateNode.containerInfo;if(q===w||q.nodeType===8&&q.parentNode===w)break;if(F===4)for(F=m.return;F!==null;){var H=F.tag;if((H===3||H===4)&&(H=F.stateNode.containerInfo,H===w||H.nodeType===8&&H.parentNode===w))return;F=F.return}for(;q!==null;){if(F=xa(q),F===null)return;if(H=F.tag,H===5||H===6){m=T=F;continue e}q=q.parentNode}}m=m.return}Re(function(){var se=T,fe=_t(d),pe=[];e:{var de=e0.get(i);if(de!==void 0){var je=_l,De=i;switch(i){case"keypress":if(wl(d)===0)break e;case"keydown":case"keyup":je=N;break;case"focusin":De="focus",je=Nl;break;case"focusout":De="blur",je=Nl;break;case"beforeblur":case"afterblur":je=Nl;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=ae;break;case Yw:case Xw:case Jw:je=yi;break;case Zw:je=Rt;break;case"scroll":je=wm;break;case"wheel":je=Et;break;case"copy":case"cut":case"paste":je=lh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=z}var Le=(a&4)!==0,cn=!Le&&i==="scroll",ee=Le?de!==null?de+"Capture":null:de;Le=[];for(var Q=se,re;Q!==null;){re=Q;var ye=re.stateNode;if(re.tag===5&&ye!==null&&(re=ye,ee!==null&&(ye=Gt(Q,ee),ye!=null&&Le.push(yu(Q,ye,re)))),cn)break;Q=Q.return}0<Le.length&&(de=new je(de,De,null,d,fe),pe.push({event:de,listeners:Le}))}}if((a&7)===0){e:{if(de=i==="mouseover"||i==="pointerover",je=i==="mouseout"||i==="pointerout",de&&d!==Ye&&(De=d.relatedTarget||d.fromElement)&&(xa(De)||De[vi]))break e;if((je||de)&&(de=fe.window===fe?fe:(de=fe.ownerDocument)?de.defaultView||de.parentWindow:window,je?(De=d.relatedTarget||d.toElement,je=se,De=De?xa(De):null,De!==null&&(cn=es(De),De!==cn||De.tag!==5&&De.tag!==6)&&(De=null)):(je=null,De=se),je!==De)){if(Le=bl,ye="onMouseLeave",ee="onMouseEnter",Q="mouse",(i==="pointerout"||i==="pointerover")&&(Le=z,ye="onPointerLeave",ee="onPointerEnter",Q="pointer"),cn=je==null?de:kl(je),re=De==null?de:kl(De),de=new Le(ye,Q+"leave",je,d,fe),de.target=cn,de.relatedTarget=re,ye=null,xa(fe)===se&&(Le=new Le(ee,Q+"enter",De,d,fe),Le.target=re,Le.relatedTarget=cn,ye=Le),cn=ye,je&&De)t:{for(Le=je,ee=De,Q=0,re=Le;re;re=Pl(re))Q++;for(re=0,ye=ee;ye;ye=Pl(ye))re++;for(;0<Q-re;)Le=Pl(Le),Q--;for(;0<re-Q;)ee=Pl(ee),re--;for(;Q--;){if(Le===ee||ee!==null&&Le===ee.alternate)break t;Le=Pl(Le),ee=Pl(ee)}Le=null}else Le=null;je!==null&&i0(pe,de,je,Le,!1),De!==null&&cn!==null&&i0(pe,cn,De,Le,!0)}}e:{if(de=se?kl(se):window,je=de.nodeName&&de.nodeName.toLowerCase(),je==="select"||je==="input"&&de.type==="file")var Ve=hP;else if(Fw(de))if(Uw)Ve=gP;else{Ve=pP;var He=fP}else(je=de.nodeName)&&je.toLowerCase()==="input"&&(de.type==="checkbox"||de.type==="radio")&&(Ve=mP);if(Ve&&(Ve=Ve(i,se))){Vw(pe,Ve,d,fe);break e}He&&He(i,de,se),i==="focusout"&&(He=de._wrapperState)&&He.controlled&&de.type==="number"&&Ot(de,"number",de.value)}switch(He=se?kl(se):window,i){case"focusin":(Fw(He)||He.contentEditable==="true")&&(jl=He,Sm=se,pu=null);break;case"focusout":pu=Sm=jl=null;break;case"mousedown":Nm=!0;break;case"contextmenu":case"mouseup":case"dragend":Nm=!1,Gw(pe,d,fe);break;case"selectionchange":if(xP)break;case"keydown":case"keyup":Gw(pe,d,fe)}var Ke;if(hn)e:{switch(i){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else Il?Lw(i,d)&&(nt="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(nt="onCompositionStart");nt&&(va&&d.locale!=="ko"&&(Il||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&Il&&(Ke=au()):(Ir=fe,xl="value"in Ir?Ir.value:Ir.textContent,Il=!0)),He=gh(se,nt),0<He.length&&(nt=new uu(nt,i,null,d,fe),pe.push({event:nt,listeners:He}),Ke?nt.data=Ke:(Ke=Mw(d),Ke!==null&&(nt.data=Ke)))),(Ke=jr?lP(i,d):cP(i,d))&&(se=gh(se,"onBeforeInput"),0<se.length&&(fe=new uu("onBeforeInput","beforeinput",null,d,fe),pe.push({event:fe,listeners:se}),fe.data=Ke))}r0(pe,a)})}function yu(i,a,d){return{instance:i,listener:a,currentTarget:d}}function gh(i,a){for(var d=a+"Capture",m=[];i!==null;){var w=i,T=w.stateNode;w.tag===5&&T!==null&&(w=T,T=Gt(i,d),T!=null&&m.unshift(yu(i,T,w)),T=Gt(i,a),T!=null&&m.push(yu(i,T,w))),i=i.return}return m}function Pl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function i0(i,a,d,m,w){for(var T=a._reactName,F=[];d!==null&&d!==m;){var q=d,H=q.alternate,se=q.stateNode;if(H!==null&&H===m)break;q.tag===5&&se!==null&&(q=se,w?(H=Gt(d,T),H!=null&&F.unshift(yu(d,H,q))):w||(H=Gt(d,T),H!=null&&F.push(yu(d,H,q)))),d=d.return}F.length!==0&&i.push({event:a,listeners:F})}var bP=/\r\n?/g,SP=/\u0000|\uFFFD/g;function o0(i){return(typeof i=="string"?i:""+i).replace(bP,`
`).replace(SP,"")}function yh(i,a,d){if(a=o0(a),o0(i)!==a&&d)throw Error(t(425))}function vh(){}var Pm=null,Rm=null;function km(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Om=typeof setTimeout=="function"?setTimeout:void 0,NP=typeof clearTimeout=="function"?clearTimeout:void 0,a0=typeof Promise=="function"?Promise:void 0,TP=typeof queueMicrotask=="function"?queueMicrotask:typeof a0<"u"?function(i){return a0.resolve(null).then(i).catch(CP)}:Om;function CP(i){setTimeout(function(){throw i})}function Dm(i,a){var d=a,m=0;do{var w=d.nextSibling;if(i.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(m===0){i.removeChild(w),is(a);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=w}while(d);is(a)}function to(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function l0(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return i;a--}else d==="/$"&&a++}i=i.previousSibling}return null}var Rl=Math.random().toString(36).slice(2),Ms="__reactFiber$"+Rl,vu="__reactProps$"+Rl,vi="__reactContainer$"+Rl,Lm="__reactEvents$"+Rl,IP="__reactListeners$"+Rl,jP="__reactHandles$"+Rl;function xa(i){var a=i[Ms];if(a)return a;for(var d=i.parentNode;d;){if(a=d[vi]||d[Ms]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(i=l0(i);i!==null;){if(d=i[Ms])return d;i=l0(i)}return a}i=d,d=i.parentNode}return null}function xu(i){return i=i[Ms]||i[vi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function kl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function xh(i){return i[vu]||null}var Mm=[],Ol=-1;function no(i){return{current:i}}function qt(i){0>Ol||(i.current=Mm[Ol],Mm[Ol]=null,Ol--)}function Ft(i,a){Ol++,Mm[Ol]=i.current,i.current=a}var ro={},qn=no(ro),dr=no(!1),wa=ro;function Dl(i,a){var d=i.type.contextTypes;if(!d)return ro;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var w={},T;for(T in d)w[T]=a[T];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=w),w}function hr(i){return i=i.childContextTypes,i!=null}function wh(){qt(dr),qt(qn)}function c0(i,a,d){if(qn.current!==ro)throw Error(t(168));Ft(qn,a),Ft(dr,d)}function u0(i,a,d){var m=i.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var w in m)if(!(w in a))throw Error(t(108,we(i)||"Unknown",w));return le({},d,m)}function _h(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ro,wa=qn.current,Ft(qn,i),Ft(dr,dr.current),!0}function d0(i,a,d){var m=i.stateNode;if(!m)throw Error(t(169));d?(i=u0(i,a,wa),m.__reactInternalMemoizedMergedChildContext=i,qt(dr),qt(qn),Ft(qn,i)):qt(dr),Ft(dr,d)}var xi=null,Eh=!1,Fm=!1;function h0(i){xi===null?xi=[i]:xi.push(i)}function AP(i){Eh=!0,h0(i)}function so(){if(!Fm&&xi!==null){Fm=!0;var i=0,a=yt;try{var d=xi;for(yt=1;i<d.length;i++){var m=d[i];do m=m(!0);while(m!==null)}xi=null,Eh=!1}catch(w){throw xi!==null&&(xi=xi.slice(i+1)),pl(da,so),w}finally{yt=a,Fm=!1}}return null}var Ll=[],Ml=0,bh=null,Sh=0,$r=[],Br=0,_a=null,wi=1,_i="";function Ea(i,a){Ll[Ml++]=Sh,Ll[Ml++]=bh,bh=i,Sh=a}function f0(i,a,d){$r[Br++]=wi,$r[Br++]=_i,$r[Br++]=_a,_a=i;var m=wi;i=_i;var w=32-er(m)-1;m&=~(1<<w),d+=1;var T=32-er(a)+w;if(30<T){var F=w-w%5;T=(m&(1<<F)-1).toString(32),m>>=F,w-=F,wi=1<<32-er(a)+w|d<<w|m,_i=T+i}else wi=1<<T|d<<w|m,_i=i}function Vm(i){i.return!==null&&(Ea(i,1),f0(i,1,0))}function Um(i){for(;i===bh;)bh=Ll[--Ml],Ll[Ml]=null,Sh=Ll[--Ml],Ll[Ml]=null;for(;i===_a;)_a=$r[--Br],$r[Br]=null,_i=$r[--Br],$r[Br]=null,wi=$r[--Br],$r[Br]=null}var Ar=null,Pr=null,Yt=!1,ls=null;function p0(i,a){var d=Kr(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=i,a=i.deletions,a===null?(i.deletions=[d],i.flags|=16):a.push(d)}function m0(i,a){switch(i.tag){case 5:var d=i.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Ar=i,Pr=to(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Ar=i,Pr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=_a!==null?{id:wi,overflow:_i}:null,i.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=Kr(18,null,null,0),d.stateNode=a,d.return=i,i.child=d,Ar=i,Pr=null,!0):!1;default:return!1}}function zm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function $m(i){if(Yt){var a=Pr;if(a){var d=a;if(!m0(i,a)){if(zm(i))throw Error(t(418));a=to(d.nextSibling);var m=Ar;a&&m0(i,a)?p0(m,d):(i.flags=i.flags&-4097|2,Yt=!1,Ar=i)}}else{if(zm(i))throw Error(t(418));i.flags=i.flags&-4097|2,Yt=!1,Ar=i}}}function g0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Ar=i}function Nh(i){if(i!==Ar)return!1;if(!Yt)return g0(i),Yt=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!km(i.type,i.memoizedProps)),a&&(a=Pr)){if(zm(i))throw y0(),Error(t(418));for(;a;)p0(i,a),a=to(a.nextSibling)}if(g0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(a===0){Pr=to(i.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}i=i.nextSibling}Pr=null}}else Pr=Ar?to(i.stateNode.nextSibling):null;return!0}function y0(){for(var i=Pr;i;)i=to(i.nextSibling)}function Fl(){Pr=Ar=null,Yt=!1}function Bm(i){ls===null?ls=[i]:ls.push(i)}var PP=M.ReactCurrentBatchConfig;function wu(i,a,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var m=d.stateNode}if(!m)throw Error(t(147,i));var w=m,T=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===T?a.ref:(a=function(F){var q=w.refs;F===null?delete q[T]:q[T]=F},a._stringRef=T,a)}if(typeof i!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,i))}return i}function Th(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function v0(i){var a=i._init;return a(i._payload)}function x0(i){function a(ee,Q){if(i){var re=ee.deletions;re===null?(ee.deletions=[Q],ee.flags|=16):re.push(Q)}}function d(ee,Q){if(!i)return null;for(;Q!==null;)a(ee,Q),Q=Q.sibling;return null}function m(ee,Q){for(ee=new Map;Q!==null;)Q.key!==null?ee.set(Q.key,Q):ee.set(Q.index,Q),Q=Q.sibling;return ee}function w(ee,Q){return ee=fo(ee,Q),ee.index=0,ee.sibling=null,ee}function T(ee,Q,re){return ee.index=re,i?(re=ee.alternate,re!==null?(re=re.index,re<Q?(ee.flags|=2,Q):re):(ee.flags|=2,Q)):(ee.flags|=1048576,Q)}function F(ee){return i&&ee.alternate===null&&(ee.flags|=2),ee}function q(ee,Q,re,ye){return Q===null||Q.tag!==6?(Q=Og(re,ee.mode,ye),Q.return=ee,Q):(Q=w(Q,re),Q.return=ee,Q)}function H(ee,Q,re,ye){var Ve=re.type;return Ve===P?fe(ee,Q,re.props.children,ye,re.key):Q!==null&&(Q.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===X&&v0(Ve)===Q.type)?(ye=w(Q,re.props),ye.ref=wu(ee,Q,re),ye.return=ee,ye):(ye=Yh(re.type,re.key,re.props,null,ee.mode,ye),ye.ref=wu(ee,Q,re),ye.return=ee,ye)}function se(ee,Q,re,ye){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==re.containerInfo||Q.stateNode.implementation!==re.implementation?(Q=Dg(re,ee.mode,ye),Q.return=ee,Q):(Q=w(Q,re.children||[]),Q.return=ee,Q)}function fe(ee,Q,re,ye,Ve){return Q===null||Q.tag!==7?(Q=Aa(re,ee.mode,ye,Ve),Q.return=ee,Q):(Q=w(Q,re),Q.return=ee,Q)}function pe(ee,Q,re){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=Og(""+Q,ee.mode,re),Q.return=ee,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case U:return re=Yh(Q.type,Q.key,Q.props,null,ee.mode,re),re.ref=wu(ee,null,Q),re.return=ee,re;case $:return Q=Dg(Q,ee.mode,re),Q.return=ee,Q;case X:var ye=Q._init;return pe(ee,ye(Q._payload),re)}if(dn(Q)||oe(Q))return Q=Aa(Q,ee.mode,re,null),Q.return=ee,Q;Th(ee,Q)}return null}function de(ee,Q,re,ye){var Ve=Q!==null?Q.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Ve!==null?null:q(ee,Q,""+re,ye);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case U:return re.key===Ve?H(ee,Q,re,ye):null;case $:return re.key===Ve?se(ee,Q,re,ye):null;case X:return Ve=re._init,de(ee,Q,Ve(re._payload),ye)}if(dn(re)||oe(re))return Ve!==null?null:fe(ee,Q,re,ye,null);Th(ee,re)}return null}function je(ee,Q,re,ye,Ve){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ee=ee.get(re)||null,q(Q,ee,""+ye,Ve);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case U:return ee=ee.get(ye.key===null?re:ye.key)||null,H(Q,ee,ye,Ve);case $:return ee=ee.get(ye.key===null?re:ye.key)||null,se(Q,ee,ye,Ve);case X:var He=ye._init;return je(ee,Q,re,He(ye._payload),Ve)}if(dn(ye)||oe(ye))return ee=ee.get(re)||null,fe(Q,ee,ye,Ve,null);Th(Q,ye)}return null}function De(ee,Q,re,ye){for(var Ve=null,He=null,Ke=Q,nt=Q=0,An=null;Ke!==null&&nt<re.length;nt++){Ke.index>nt?(An=Ke,Ke=null):An=Ke.sibling;var Ct=de(ee,Ke,re[nt],ye);if(Ct===null){Ke===null&&(Ke=An);break}i&&Ke&&Ct.alternate===null&&a(ee,Ke),Q=T(Ct,Q,nt),He===null?Ve=Ct:He.sibling=Ct,He=Ct,Ke=An}if(nt===re.length)return d(ee,Ke),Yt&&Ea(ee,nt),Ve;if(Ke===null){for(;nt<re.length;nt++)Ke=pe(ee,re[nt],ye),Ke!==null&&(Q=T(Ke,Q,nt),He===null?Ve=Ke:He.sibling=Ke,He=Ke);return Yt&&Ea(ee,nt),Ve}for(Ke=m(ee,Ke);nt<re.length;nt++)An=je(Ke,ee,nt,re[nt],ye),An!==null&&(i&&An.alternate!==null&&Ke.delete(An.key===null?nt:An.key),Q=T(An,Q,nt),He===null?Ve=An:He.sibling=An,He=An);return i&&Ke.forEach(function(po){return a(ee,po)}),Yt&&Ea(ee,nt),Ve}function Le(ee,Q,re,ye){var Ve=oe(re);if(typeof Ve!="function")throw Error(t(150));if(re=Ve.call(re),re==null)throw Error(t(151));for(var He=Ve=null,Ke=Q,nt=Q=0,An=null,Ct=re.next();Ke!==null&&!Ct.done;nt++,Ct=re.next()){Ke.index>nt?(An=Ke,Ke=null):An=Ke.sibling;var po=de(ee,Ke,Ct.value,ye);if(po===null){Ke===null&&(Ke=An);break}i&&Ke&&po.alternate===null&&a(ee,Ke),Q=T(po,Q,nt),He===null?Ve=po:He.sibling=po,He=po,Ke=An}if(Ct.done)return d(ee,Ke),Yt&&Ea(ee,nt),Ve;if(Ke===null){for(;!Ct.done;nt++,Ct=re.next())Ct=pe(ee,Ct.value,ye),Ct!==null&&(Q=T(Ct,Q,nt),He===null?Ve=Ct:He.sibling=Ct,He=Ct);return Yt&&Ea(ee,nt),Ve}for(Ke=m(ee,Ke);!Ct.done;nt++,Ct=re.next())Ct=je(Ke,ee,nt,Ct.value,ye),Ct!==null&&(i&&Ct.alternate!==null&&Ke.delete(Ct.key===null?nt:Ct.key),Q=T(Ct,Q,nt),He===null?Ve=Ct:He.sibling=Ct,He=Ct);return i&&Ke.forEach(function(uR){return a(ee,uR)}),Yt&&Ea(ee,nt),Ve}function cn(ee,Q,re,ye){if(typeof re=="object"&&re!==null&&re.type===P&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case U:e:{for(var Ve=re.key,He=Q;He!==null;){if(He.key===Ve){if(Ve=re.type,Ve===P){if(He.tag===7){d(ee,He.sibling),Q=w(He,re.props.children),Q.return=ee,ee=Q;break e}}else if(He.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===X&&v0(Ve)===He.type){d(ee,He.sibling),Q=w(He,re.props),Q.ref=wu(ee,He,re),Q.return=ee,ee=Q;break e}d(ee,He);break}else a(ee,He);He=He.sibling}re.type===P?(Q=Aa(re.props.children,ee.mode,ye,re.key),Q.return=ee,ee=Q):(ye=Yh(re.type,re.key,re.props,null,ee.mode,ye),ye.ref=wu(ee,Q,re),ye.return=ee,ee=ye)}return F(ee);case $:e:{for(He=re.key;Q!==null;){if(Q.key===He)if(Q.tag===4&&Q.stateNode.containerInfo===re.containerInfo&&Q.stateNode.implementation===re.implementation){d(ee,Q.sibling),Q=w(Q,re.children||[]),Q.return=ee,ee=Q;break e}else{d(ee,Q);break}else a(ee,Q);Q=Q.sibling}Q=Dg(re,ee.mode,ye),Q.return=ee,ee=Q}return F(ee);case X:return He=re._init,cn(ee,Q,He(re._payload),ye)}if(dn(re))return De(ee,Q,re,ye);if(oe(re))return Le(ee,Q,re,ye);Th(ee,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,Q!==null&&Q.tag===6?(d(ee,Q.sibling),Q=w(Q,re),Q.return=ee,ee=Q):(d(ee,Q),Q=Og(re,ee.mode,ye),Q.return=ee,ee=Q),F(ee)):d(ee,Q)}return cn}var Vl=x0(!0),w0=x0(!1),Ch=no(null),Ih=null,Ul=null,qm=null;function Wm(){qm=Ul=Ih=null}function Hm(i){var a=Ch.current;qt(Ch),i._currentValue=a}function Km(i,a,d){for(;i!==null;){var m=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),i===d)break;i=i.return}}function zl(i,a){Ih=i,qm=Ul=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(fr=!0),i.firstContext=null)}function qr(i){var a=i._currentValue;if(qm!==i)if(i={context:i,memoizedValue:a,next:null},Ul===null){if(Ih===null)throw Error(t(308));Ul=i,Ih.dependencies={lanes:0,firstContext:i}}else Ul=Ul.next=i;return a}var ba=null;function Gm(i){ba===null?ba=[i]:ba.push(i)}function _0(i,a,d,m){var w=a.interleaved;return w===null?(d.next=d,Gm(a)):(d.next=w.next,w.next=d),a.interleaved=d,Ei(i,m)}function Ei(i,a){i.lanes|=a;var d=i.alternate;for(d!==null&&(d.lanes|=a),d=i,i=i.return;i!==null;)i.childLanes|=a,d=i.alternate,d!==null&&(d.childLanes|=a),d=i,i=i.return;return d.tag===3?d.stateNode:null}var io=!1;function Qm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function E0(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function bi(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function oo(i,a,d){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Nt&2)!==0){var w=m.pending;return w===null?a.next=a:(a.next=w.next,w.next=a),m.pending=a,Ei(i,d)}return w=m.interleaved,w===null?(a.next=a,Gm(m)):(a.next=w.next,w.next=a),m.interleaved=a,Ei(i,d)}function jh(i,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,Qi(i,d)}}function b0(i,a){var d=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var w=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var F={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?w=T=F:T=T.next=F,d=d.next}while(d!==null);T===null?w=T=a:T=T.next=a}else w=T=a;d={baseState:m.baseState,firstBaseUpdate:w,lastBaseUpdate:T,shared:m.shared,effects:m.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=a:i.next=a,d.lastBaseUpdate=a}function Ah(i,a,d,m){var w=i.updateQueue;io=!1;var T=w.firstBaseUpdate,F=w.lastBaseUpdate,q=w.shared.pending;if(q!==null){w.shared.pending=null;var H=q,se=H.next;H.next=null,F===null?T=se:F.next=se,F=H;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,q=fe.lastBaseUpdate,q!==F&&(q===null?fe.firstBaseUpdate=se:q.next=se,fe.lastBaseUpdate=H))}if(T!==null){var pe=w.baseState;F=0,fe=se=H=null,q=T;do{var de=q.lane,je=q.eventTime;if((m&de)===de){fe!==null&&(fe=fe.next={eventTime:je,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var De=i,Le=q;switch(de=a,je=d,Le.tag){case 1:if(De=Le.payload,typeof De=="function"){pe=De.call(je,pe,de);break e}pe=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Le.payload,de=typeof De=="function"?De.call(je,pe,de):De,de==null)break e;pe=le({},pe,de);break e;case 2:io=!0}}q.callback!==null&&q.lane!==0&&(i.flags|=64,de=w.effects,de===null?w.effects=[q]:de.push(q))}else je={eventTime:je,lane:de,tag:q.tag,payload:q.payload,callback:q.callback,next:null},fe===null?(se=fe=je,H=pe):fe=fe.next=je,F|=de;if(q=q.next,q===null){if(q=w.shared.pending,q===null)break;de=q,q=de.next,de.next=null,w.lastBaseUpdate=de,w.shared.pending=null}}while(!0);if(fe===null&&(H=pe),w.baseState=H,w.firstBaseUpdate=se,w.lastBaseUpdate=fe,a=w.shared.interleaved,a!==null){w=a;do F|=w.lane,w=w.next;while(w!==a)}else T===null&&(w.shared.lanes=0);Ta|=F,i.lanes=F,i.memoizedState=pe}}function S0(i,a,d){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var m=i[a],w=m.callback;if(w!==null){if(m.callback=null,m=d,typeof w!="function")throw Error(t(191,w));w.call(m)}}}var _u={},Fs=no(_u),Eu=no(_u),bu=no(_u);function Sa(i){if(i===_u)throw Error(t(174));return i}function Ym(i,a){switch(Ft(bu,a),Ft(Eu,i),Ft(Fs,_u),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:It(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=It(a,i)}qt(Fs),Ft(Fs,a)}function $l(){qt(Fs),qt(Eu),qt(bu)}function N0(i){Sa(bu.current);var a=Sa(Fs.current),d=It(a,i.type);a!==d&&(Ft(Eu,i),Ft(Fs,d))}function Xm(i){Eu.current===i&&(qt(Fs),qt(Eu))}var Jt=no(0);function Ph(i){for(var a=i;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Jm=[];function Zm(){for(var i=0;i<Jm.length;i++)Jm[i]._workInProgressVersionPrimary=null;Jm.length=0}var Rh=M.ReactCurrentDispatcher,eg=M.ReactCurrentBatchConfig,Na=0,Zt=null,En=null,In=null,kh=!1,Su=!1,Nu=0,RP=0;function Wn(){throw Error(t(321))}function tg(i,a){if(a===null)return!1;for(var d=0;d<a.length&&d<i.length;d++)if(!as(i[d],a[d]))return!1;return!0}function ng(i,a,d,m,w,T){if(Na=T,Zt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Rh.current=i===null||i.memoizedState===null?LP:MP,i=d(m,w),Su){T=0;do{if(Su=!1,Nu=0,25<=T)throw Error(t(301));T+=1,In=En=null,a.updateQueue=null,Rh.current=FP,i=d(m,w)}while(Su)}if(Rh.current=Lh,a=En!==null&&En.next!==null,Na=0,In=En=Zt=null,kh=!1,a)throw Error(t(300));return i}function rg(){var i=Nu!==0;return Nu=0,i}function Vs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Zt.memoizedState=In=i:In=In.next=i,In}function Wr(){if(En===null){var i=Zt.alternate;i=i!==null?i.memoizedState:null}else i=En.next;var a=In===null?Zt.memoizedState:In.next;if(a!==null)In=a,En=i;else{if(i===null)throw Error(t(310));En=i,i={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},In===null?Zt.memoizedState=In=i:In=In.next=i}return In}function Tu(i,a){return typeof a=="function"?a(i):a}function sg(i){var a=Wr(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var m=En,w=m.baseQueue,T=d.pending;if(T!==null){if(w!==null){var F=w.next;w.next=T.next,T.next=F}m.baseQueue=w=T,d.pending=null}if(w!==null){T=w.next,m=m.baseState;var q=F=null,H=null,se=T;do{var fe=se.lane;if((Na&fe)===fe)H!==null&&(H=H.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),m=se.hasEagerState?se.eagerState:i(m,se.action);else{var pe={lane:fe,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};H===null?(q=H=pe,F=m):H=H.next=pe,Zt.lanes|=fe,Ta|=fe}se=se.next}while(se!==null&&se!==T);H===null?F=m:H.next=q,as(m,a.memoizedState)||(fr=!0),a.memoizedState=m,a.baseState=F,a.baseQueue=H,d.lastRenderedState=m}if(i=d.interleaved,i!==null){w=i;do T=w.lane,Zt.lanes|=T,Ta|=T,w=w.next;while(w!==i)}else w===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function ig(i){var a=Wr(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var m=d.dispatch,w=d.pending,T=a.memoizedState;if(w!==null){d.pending=null;var F=w=w.next;do T=i(T,F.action),F=F.next;while(F!==w);as(T,a.memoizedState)||(fr=!0),a.memoizedState=T,a.baseQueue===null&&(a.baseState=T),d.lastRenderedState=T}return[T,m]}function T0(){}function C0(i,a){var d=Zt,m=Wr(),w=a(),T=!as(m.memoizedState,w);if(T&&(m.memoizedState=w,fr=!0),m=m.queue,og(A0.bind(null,d,m,i),[i]),m.getSnapshot!==a||T||In!==null&&In.memoizedState.tag&1){if(d.flags|=2048,Cu(9,j0.bind(null,d,m,w,a),void 0,null),jn===null)throw Error(t(349));(Na&30)!==0||I0(d,a,w)}return w}function I0(i,a,d){i.flags|=16384,i={getSnapshot:a,value:d},a=Zt.updateQueue,a===null?(a={lastEffect:null,stores:null},Zt.updateQueue=a,a.stores=[i]):(d=a.stores,d===null?a.stores=[i]:d.push(i))}function j0(i,a,d,m){a.value=d,a.getSnapshot=m,P0(a)&&R0(i)}function A0(i,a,d){return d(function(){P0(a)&&R0(i)})}function P0(i){var a=i.getSnapshot;i=i.value;try{var d=a();return!as(i,d)}catch{return!0}}function R0(i){var a=Ei(i,1);a!==null&&hs(a,i,1,-1)}function k0(i){var a=Vs();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tu,lastRenderedState:i},a.queue=i,i=i.dispatch=DP.bind(null,Zt,i),[a.memoizedState,i]}function Cu(i,a,d,m){return i={tag:i,create:a,destroy:d,deps:m,next:null},a=Zt.updateQueue,a===null?(a={lastEffect:null,stores:null},Zt.updateQueue=a,a.lastEffect=i.next=i):(d=a.lastEffect,d===null?a.lastEffect=i.next=i:(m=d.next,d.next=i,i.next=m,a.lastEffect=i)),i}function O0(){return Wr().memoizedState}function Oh(i,a,d,m){var w=Vs();Zt.flags|=i,w.memoizedState=Cu(1|a,d,void 0,m===void 0?null:m)}function Dh(i,a,d,m){var w=Wr();m=m===void 0?null:m;var T=void 0;if(En!==null){var F=En.memoizedState;if(T=F.destroy,m!==null&&tg(m,F.deps)){w.memoizedState=Cu(a,d,T,m);return}}Zt.flags|=i,w.memoizedState=Cu(1|a,d,T,m)}function D0(i,a){return Oh(8390656,8,i,a)}function og(i,a){return Dh(2048,8,i,a)}function L0(i,a){return Dh(4,2,i,a)}function M0(i,a){return Dh(4,4,i,a)}function F0(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function V0(i,a,d){return d=d!=null?d.concat([i]):null,Dh(4,4,F0.bind(null,a,i),d)}function ag(){}function U0(i,a){var d=Wr();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&tg(a,m[1])?m[0]:(d.memoizedState=[i,a],i)}function z0(i,a){var d=Wr();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&tg(a,m[1])?m[0]:(i=i(),d.memoizedState=[i,a],i)}function $0(i,a,d){return(Na&21)===0?(i.baseState&&(i.baseState=!1,fr=!0),i.memoizedState=d):(as(d,a)||(d=pa(),Zt.lanes|=d,Ta|=d,i.baseState=!0),a)}function kP(i,a){var d=yt;yt=d!==0&&4>d?d:4,i(!0);var m=eg.transition;eg.transition={};try{i(!1),a()}finally{yt=d,eg.transition=m}}function B0(){return Wr().memoizedState}function OP(i,a,d){var m=uo(i);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},q0(i))W0(a,d);else if(d=_0(i,a,d,m),d!==null){var w=rr();hs(d,i,m,w),H0(d,a,m)}}function DP(i,a,d){var m=uo(i),w={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(q0(i))W0(a,w);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=a.lastRenderedReducer,T!==null))try{var F=a.lastRenderedState,q=T(F,d);if(w.hasEagerState=!0,w.eagerState=q,as(q,F)){var H=a.interleaved;H===null?(w.next=w,Gm(a)):(w.next=H.next,H.next=w),a.interleaved=w;return}}catch{}finally{}d=_0(i,a,w,m),d!==null&&(w=rr(),hs(d,i,m,w),H0(d,a,m))}}function q0(i){var a=i.alternate;return i===Zt||a!==null&&a===Zt}function W0(i,a){Su=kh=!0;var d=i.pending;d===null?a.next=a:(a.next=d.next,d.next=a),i.pending=a}function H0(i,a,d){if((d&4194240)!==0){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,Qi(i,d)}}var Lh={readContext:qr,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},LP={readContext:qr,useCallback:function(i,a){return Vs().memoizedState=[i,a===void 0?null:a],i},useContext:qr,useEffect:D0,useImperativeHandle:function(i,a,d){return d=d!=null?d.concat([i]):null,Oh(4194308,4,F0.bind(null,a,i),d)},useLayoutEffect:function(i,a){return Oh(4194308,4,i,a)},useInsertionEffect:function(i,a){return Oh(4,2,i,a)},useMemo:function(i,a){var d=Vs();return a=a===void 0?null:a,i=i(),d.memoizedState=[i,a],i},useReducer:function(i,a,d){var m=Vs();return a=d!==void 0?d(a):a,m.memoizedState=m.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},m.queue=i,i=i.dispatch=OP.bind(null,Zt,i),[m.memoizedState,i]},useRef:function(i){var a=Vs();return i={current:i},a.memoizedState=i},useState:k0,useDebugValue:ag,useDeferredValue:function(i){return Vs().memoizedState=i},useTransition:function(){var i=k0(!1),a=i[0];return i=kP.bind(null,i[1]),Vs().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,d){var m=Zt,w=Vs();if(Yt){if(d===void 0)throw Error(t(407));d=d()}else{if(d=a(),jn===null)throw Error(t(349));(Na&30)!==0||I0(m,a,d)}w.memoizedState=d;var T={value:d,getSnapshot:a};return w.queue=T,D0(A0.bind(null,m,T,i),[i]),m.flags|=2048,Cu(9,j0.bind(null,m,T,d,a),void 0,null),d},useId:function(){var i=Vs(),a=jn.identifierPrefix;if(Yt){var d=_i,m=wi;d=(m&~(1<<32-er(m)-1)).toString(32)+d,a=":"+a+"R"+d,d=Nu++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=RP++,a=":"+a+"r"+d.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},MP={readContext:qr,useCallback:U0,useContext:qr,useEffect:og,useImperativeHandle:V0,useInsertionEffect:L0,useLayoutEffect:M0,useMemo:z0,useReducer:sg,useRef:O0,useState:function(){return sg(Tu)},useDebugValue:ag,useDeferredValue:function(i){var a=Wr();return $0(a,En.memoizedState,i)},useTransition:function(){var i=sg(Tu)[0],a=Wr().memoizedState;return[i,a]},useMutableSource:T0,useSyncExternalStore:C0,useId:B0,unstable_isNewReconciler:!1},FP={readContext:qr,useCallback:U0,useContext:qr,useEffect:og,useImperativeHandle:V0,useInsertionEffect:L0,useLayoutEffect:M0,useMemo:z0,useReducer:ig,useRef:O0,useState:function(){return ig(Tu)},useDebugValue:ag,useDeferredValue:function(i){var a=Wr();return En===null?a.memoizedState=i:$0(a,En.memoizedState,i)},useTransition:function(){var i=ig(Tu)[0],a=Wr().memoizedState;return[i,a]},useMutableSource:T0,useSyncExternalStore:C0,useId:B0,unstable_isNewReconciler:!1};function cs(i,a){if(i&&i.defaultProps){a=le({},a),i=i.defaultProps;for(var d in i)a[d]===void 0&&(a[d]=i[d]);return a}return a}function lg(i,a,d,m){a=i.memoizedState,d=d(m,a),d=d==null?a:le({},a,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var Mh={isMounted:function(i){return(i=i._reactInternals)?es(i)===i:!1},enqueueSetState:function(i,a,d){i=i._reactInternals;var m=rr(),w=uo(i),T=bi(m,w);T.payload=a,d!=null&&(T.callback=d),a=oo(i,T,w),a!==null&&(hs(a,i,w,m),jh(a,i,w))},enqueueReplaceState:function(i,a,d){i=i._reactInternals;var m=rr(),w=uo(i),T=bi(m,w);T.tag=1,T.payload=a,d!=null&&(T.callback=d),a=oo(i,T,w),a!==null&&(hs(a,i,w,m),jh(a,i,w))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var d=rr(),m=uo(i),w=bi(d,m);w.tag=2,a!=null&&(w.callback=a),a=oo(i,w,m),a!==null&&(hs(a,i,m,d),jh(a,i,m))}};function K0(i,a,d,m,w,T,F){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,T,F):a.prototype&&a.prototype.isPureReactComponent?!fu(d,m)||!fu(w,T):!0}function G0(i,a,d){var m=!1,w=ro,T=a.contextType;return typeof T=="object"&&T!==null?T=qr(T):(w=hr(a)?wa:qn.current,m=a.contextTypes,T=(m=m!=null)?Dl(i,w):ro),a=new a(d,T),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Mh,i.stateNode=a,a._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=w,i.__reactInternalMemoizedMaskedChildContext=T),a}function Q0(i,a,d,m){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==i&&Mh.enqueueReplaceState(a,a.state,null)}function cg(i,a,d,m){var w=i.stateNode;w.props=d,w.state=i.memoizedState,w.refs={},Qm(i);var T=a.contextType;typeof T=="object"&&T!==null?w.context=qr(T):(T=hr(a)?wa:qn.current,w.context=Dl(i,T)),w.state=i.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(lg(i,a,T,d),w.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(a=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),a!==w.state&&Mh.enqueueReplaceState(w,w.state,null),Ah(i,d,w,m),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308)}function Bl(i,a){try{var d="",m=a;do d+=Ue(m),m=m.return;while(m);var w=d}catch(T){w=`
Error generating stack: `+T.message+`
`+T.stack}return{value:i,source:a,stack:w,digest:null}}function ug(i,a,d){return{value:i,source:null,stack:d??null,digest:a??null}}function dg(i,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var VP=typeof WeakMap=="function"?WeakMap:Map;function Y0(i,a,d){d=bi(-1,d),d.tag=3,d.payload={element:null};var m=a.value;return d.callback=function(){qh||(qh=!0,Tg=m),dg(i,a)},d}function X0(i,a,d){d=bi(-1,d),d.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var w=a.value;d.payload=function(){return m(w)},d.callback=function(){dg(i,a)}}var T=i.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){dg(i,a),typeof m!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var F=a.stack;this.componentDidCatch(a.value,{componentStack:F!==null?F:""})}),d}function J0(i,a,d){var m=i.pingCache;if(m===null){m=i.pingCache=new VP;var w=new Set;m.set(a,w)}else w=m.get(a),w===void 0&&(w=new Set,m.set(a,w));w.has(d)||(w.add(d),i=ZP.bind(null,i,a,d),a.then(i,i))}function Z0(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function e_(i,a,d,m,w){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=bi(-1,1),a.tag=2,oo(d,a,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=w,i)}var UP=M.ReactCurrentOwner,fr=!1;function nr(i,a,d,m){a.child=i===null?w0(a,null,d,m):Vl(a,i.child,d,m)}function t_(i,a,d,m,w){d=d.render;var T=a.ref;return zl(a,w),m=ng(i,a,d,m,T,w),d=rg(),i!==null&&!fr?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~w,Si(i,a,w)):(Yt&&d&&Vm(a),a.flags|=1,nr(i,a,m,w),a.child)}function n_(i,a,d,m,w){if(i===null){var T=d.type;return typeof T=="function"&&!kg(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=T,r_(i,a,T,m,w)):(i=Yh(d.type,null,m,a,a.mode,w),i.ref=a.ref,i.return=a,a.child=i)}if(T=i.child,(i.lanes&w)===0){var F=T.memoizedProps;if(d=d.compare,d=d!==null?d:fu,d(F,m)&&i.ref===a.ref)return Si(i,a,w)}return a.flags|=1,i=fo(T,m),i.ref=a.ref,i.return=a,a.child=i}function r_(i,a,d,m,w){if(i!==null){var T=i.memoizedProps;if(fu(T,m)&&i.ref===a.ref)if(fr=!1,a.pendingProps=m=T,(i.lanes&w)!==0)(i.flags&131072)!==0&&(fr=!0);else return a.lanes=i.lanes,Si(i,a,w)}return hg(i,a,d,m,w)}function s_(i,a,d){var m=a.pendingProps,w=m.children,T=i!==null?i.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(Wl,Rr),Rr|=d;else{if((d&1073741824)===0)return i=T!==null?T.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,Ft(Wl,Rr),Rr|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=T!==null?T.baseLanes:d,Ft(Wl,Rr),Rr|=m}else T!==null?(m=T.baseLanes|d,a.memoizedState=null):m=d,Ft(Wl,Rr),Rr|=m;return nr(i,a,w,d),a.child}function i_(i,a){var d=a.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function hg(i,a,d,m,w){var T=hr(d)?wa:qn.current;return T=Dl(a,T),zl(a,w),d=ng(i,a,d,m,T,w),m=rg(),i!==null&&!fr?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~w,Si(i,a,w)):(Yt&&m&&Vm(a),a.flags|=1,nr(i,a,d,w),a.child)}function o_(i,a,d,m,w){if(hr(d)){var T=!0;_h(a)}else T=!1;if(zl(a,w),a.stateNode===null)Vh(i,a),G0(a,d,m),cg(a,d,m,w),m=!0;else if(i===null){var F=a.stateNode,q=a.memoizedProps;F.props=q;var H=F.context,se=d.contextType;typeof se=="object"&&se!==null?se=qr(se):(se=hr(d)?wa:qn.current,se=Dl(a,se));var fe=d.getDerivedStateFromProps,pe=typeof fe=="function"||typeof F.getSnapshotBeforeUpdate=="function";pe||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(q!==m||H!==se)&&Q0(a,F,m,se),io=!1;var de=a.memoizedState;F.state=de,Ah(a,m,F,w),H=a.memoizedState,q!==m||de!==H||dr.current||io?(typeof fe=="function"&&(lg(a,d,fe,m),H=a.memoizedState),(q=io||K0(a,d,q,m,de,H,se))?(pe||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(a.flags|=4194308)):(typeof F.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=H),F.props=m,F.state=H,F.context=se,m=q):(typeof F.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{F=a.stateNode,E0(i,a),q=a.memoizedProps,se=a.type===a.elementType?q:cs(a.type,q),F.props=se,pe=a.pendingProps,de=F.context,H=d.contextType,typeof H=="object"&&H!==null?H=qr(H):(H=hr(d)?wa:qn.current,H=Dl(a,H));var je=d.getDerivedStateFromProps;(fe=typeof je=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(q!==pe||de!==H)&&Q0(a,F,m,H),io=!1,de=a.memoizedState,F.state=de,Ah(a,m,F,w);var De=a.memoizedState;q!==pe||de!==De||dr.current||io?(typeof je=="function"&&(lg(a,d,je,m),De=a.memoizedState),(se=io||K0(a,d,se,m,de,De,H)||!1)?(fe||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(m,De,H),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(m,De,H)),typeof F.componentDidUpdate=="function"&&(a.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof F.componentDidUpdate!="function"||q===i.memoizedProps&&de===i.memoizedState||(a.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&de===i.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=De),F.props=m,F.state=De,F.context=H,m=se):(typeof F.componentDidUpdate!="function"||q===i.memoizedProps&&de===i.memoizedState||(a.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&de===i.memoizedState||(a.flags|=1024),m=!1)}return fg(i,a,d,m,T,w)}function fg(i,a,d,m,w,T){i_(i,a);var F=(a.flags&128)!==0;if(!m&&!F)return w&&d0(a,d,!1),Si(i,a,T);m=a.stateNode,UP.current=a;var q=F&&typeof d.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,i!==null&&F?(a.child=Vl(a,i.child,null,T),a.child=Vl(a,null,q,T)):nr(i,a,q,T),a.memoizedState=m.state,w&&d0(a,d,!0),a.child}function a_(i){var a=i.stateNode;a.pendingContext?c0(i,a.pendingContext,a.pendingContext!==a.context):a.context&&c0(i,a.context,!1),Ym(i,a.containerInfo)}function l_(i,a,d,m,w){return Fl(),Bm(w),a.flags|=256,nr(i,a,d,m),a.child}var pg={dehydrated:null,treeContext:null,retryLane:0};function mg(i){return{baseLanes:i,cachePool:null,transitions:null}}function c_(i,a,d){var m=a.pendingProps,w=Jt.current,T=!1,F=(a.flags&128)!==0,q;if((q=F)||(q=i!==null&&i.memoizedState===null?!1:(w&2)!==0),q?(T=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(w|=1),Ft(Jt,w&1),i===null)return $m(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(F=m.children,i=m.fallback,T?(m=a.mode,T=a.child,F={mode:"hidden",children:F},(m&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=F):T=Xh(F,m,0,null),i=Aa(i,m,d,null),T.return=a,i.return=a,T.sibling=i,a.child=T,a.child.memoizedState=mg(d),a.memoizedState=pg,i):gg(a,F));if(w=i.memoizedState,w!==null&&(q=w.dehydrated,q!==null))return zP(i,a,F,m,q,w,d);if(T){T=m.fallback,F=a.mode,w=i.child,q=w.sibling;var H={mode:"hidden",children:m.children};return(F&1)===0&&a.child!==w?(m=a.child,m.childLanes=0,m.pendingProps=H,a.deletions=null):(m=fo(w,H),m.subtreeFlags=w.subtreeFlags&14680064),q!==null?T=fo(q,T):(T=Aa(T,F,d,null),T.flags|=2),T.return=a,m.return=a,m.sibling=T,a.child=m,m=T,T=a.child,F=i.child.memoizedState,F=F===null?mg(d):{baseLanes:F.baseLanes|d,cachePool:null,transitions:F.transitions},T.memoizedState=F,T.childLanes=i.childLanes&~d,a.memoizedState=pg,m}return T=i.child,i=T.sibling,m=fo(T,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=d),m.return=a,m.sibling=null,i!==null&&(d=a.deletions,d===null?(a.deletions=[i],a.flags|=16):d.push(i)),a.child=m,a.memoizedState=null,m}function gg(i,a){return a=Xh({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Fh(i,a,d,m){return m!==null&&Bm(m),Vl(a,i.child,null,d),i=gg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function zP(i,a,d,m,w,T,F){if(d)return a.flags&256?(a.flags&=-257,m=ug(Error(t(422))),Fh(i,a,F,m)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(T=m.fallback,w=a.mode,m=Xh({mode:"visible",children:m.children},w,0,null),T=Aa(T,w,F,null),T.flags|=2,m.return=a,T.return=a,m.sibling=T,a.child=m,(a.mode&1)!==0&&Vl(a,i.child,null,F),a.child.memoizedState=mg(F),a.memoizedState=pg,T);if((a.mode&1)===0)return Fh(i,a,F,null);if(w.data==="$!"){if(m=w.nextSibling&&w.nextSibling.dataset,m)var q=m.dgst;return m=q,T=Error(t(419)),m=ug(T,m,void 0),Fh(i,a,F,m)}if(q=(F&i.childLanes)!==0,fr||q){if(m=jn,m!==null){switch(F&-F){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(m.suspendedLanes|F))!==0?0:w,w!==0&&w!==T.retryLane&&(T.retryLane=w,Ei(i,w),hs(m,i,w,-1))}return Rg(),m=ug(Error(t(421))),Fh(i,a,F,m)}return w.data==="$?"?(a.flags|=128,a.child=i.child,a=eR.bind(null,i),w._reactRetry=a,null):(i=T.treeContext,Pr=to(w.nextSibling),Ar=a,Yt=!0,ls=null,i!==null&&($r[Br++]=wi,$r[Br++]=_i,$r[Br++]=_a,wi=i.id,_i=i.overflow,_a=a),a=gg(a,m.children),a.flags|=4096,a)}function u_(i,a,d){i.lanes|=a;var m=i.alternate;m!==null&&(m.lanes|=a),Km(i.return,a,d)}function yg(i,a,d,m,w){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:w}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=d,T.tailMode=w)}function d_(i,a,d){var m=a.pendingProps,w=m.revealOrder,T=m.tail;if(nr(i,a,m.children,d),m=Jt.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&u_(i,d,a);else if(i.tag===19)u_(i,d,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if(Ft(Jt,m),(a.mode&1)===0)a.memoizedState=null;else switch(w){case"forwards":for(d=a.child,w=null;d!==null;)i=d.alternate,i!==null&&Ph(i)===null&&(w=d),d=d.sibling;d=w,d===null?(w=a.child,a.child=null):(w=d.sibling,d.sibling=null),yg(a,!1,w,d,T);break;case"backwards":for(d=null,w=a.child,a.child=null;w!==null;){if(i=w.alternate,i!==null&&Ph(i)===null){a.child=w;break}i=w.sibling,w.sibling=d,d=w,w=i}yg(a,!0,d,null,T);break;case"together":yg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Vh(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Si(i,a,d){if(i!==null&&(a.dependencies=i.dependencies),Ta|=a.lanes,(d&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,d=fo(i,i.pendingProps),a.child=d,d.return=a;i.sibling!==null;)i=i.sibling,d=d.sibling=fo(i,i.pendingProps),d.return=a;d.sibling=null}return a.child}function $P(i,a,d){switch(a.tag){case 3:a_(a),Fl();break;case 5:N0(a);break;case 1:hr(a.type)&&_h(a);break;case 4:Ym(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,w=a.memoizedProps.value;Ft(Ch,m._currentValue),m._currentValue=w;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(Ft(Jt,Jt.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?c_(i,a,d):(Ft(Jt,Jt.current&1),i=Si(i,a,d),i!==null?i.sibling:null);Ft(Jt,Jt.current&1);break;case 19:if(m=(d&a.childLanes)!==0,(i.flags&128)!==0){if(m)return d_(i,a,d);a.flags|=128}if(w=a.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Ft(Jt,Jt.current),m)break;return null;case 22:case 23:return a.lanes=0,s_(i,a,d)}return Si(i,a,d)}var h_,vg,f_,p_;h_=function(i,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},vg=function(){},f_=function(i,a,d,m){var w=i.memoizedProps;if(w!==m){i=a.stateNode,Sa(Fs.current);var T=null;switch(d){case"input":w=Ie(i,w),m=Ie(i,m),T=[];break;case"select":w=le({},w,{value:void 0}),m=le({},m,{value:void 0}),T=[];break;case"textarea":w=Xr(i,w),m=Xr(i,m),T=[];break;default:typeof w.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=vh)}Bn(d,m);var F;d=null;for(se in w)if(!m.hasOwnProperty(se)&&w.hasOwnProperty(se)&&w[se]!=null)if(se==="style"){var q=w[se];for(F in q)q.hasOwnProperty(F)&&(d||(d={}),d[F]="")}else se!=="dangerouslySetInnerHTML"&&se!=="children"&&se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(s.hasOwnProperty(se)?T||(T=[]):(T=T||[]).push(se,null));for(se in m){var H=m[se];if(q=w!=null?w[se]:void 0,m.hasOwnProperty(se)&&H!==q&&(H!=null||q!=null))if(se==="style")if(q){for(F in q)!q.hasOwnProperty(F)||H&&H.hasOwnProperty(F)||(d||(d={}),d[F]="");for(F in H)H.hasOwnProperty(F)&&q[F]!==H[F]&&(d||(d={}),d[F]=H[F])}else d||(T||(T=[]),T.push(se,d)),d=H;else se==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,q=q?q.__html:void 0,H!=null&&q!==H&&(T=T||[]).push(se,H)):se==="children"?typeof H!="string"&&typeof H!="number"||(T=T||[]).push(se,""+H):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&(s.hasOwnProperty(se)?(H!=null&&se==="onScroll"&&Bt("scroll",i),T||q===H||(T=[])):(T=T||[]).push(se,H))}d&&(T=T||[]).push("style",d);var se=T;(a.updateQueue=se)&&(a.flags|=4)}},p_=function(i,a,d,m){d!==m&&(a.flags|=4)};function Iu(i,a){if(!Yt)switch(i.tailMode){case"hidden":a=i.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Hn(i){var a=i.alternate!==null&&i.alternate.child===i.child,d=0,m=0;if(a)for(var w=i.child;w!==null;)d|=w.lanes|w.childLanes,m|=w.subtreeFlags&14680064,m|=w.flags&14680064,w.return=i,w=w.sibling;else for(w=i.child;w!==null;)d|=w.lanes|w.childLanes,m|=w.subtreeFlags,m|=w.flags,w.return=i,w=w.sibling;return i.subtreeFlags|=m,i.childLanes=d,a}function BP(i,a,d){var m=a.pendingProps;switch(Um(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(a),null;case 1:return hr(a.type)&&wh(),Hn(a),null;case 3:return m=a.stateNode,$l(),qt(dr),qt(qn),Zm(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(Nh(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ls!==null&&(jg(ls),ls=null))),vg(i,a),Hn(a),null;case 5:Xm(a);var w=Sa(bu.current);if(d=a.type,i!==null&&a.stateNode!=null)f_(i,a,d,m,w),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(t(166));return Hn(a),null}if(i=Sa(Fs.current),Nh(a)){m=a.stateNode,d=a.type;var T=a.memoizedProps;switch(m[Ms]=a,m[vu]=T,i=(a.mode&1)!==0,d){case"dialog":Bt("cancel",m),Bt("close",m);break;case"iframe":case"object":case"embed":Bt("load",m);break;case"video":case"audio":for(w=0;w<mu.length;w++)Bt(mu[w],m);break;case"source":Bt("error",m);break;case"img":case"image":case"link":Bt("error",m),Bt("load",m);break;case"details":Bt("toggle",m);break;case"input":pt(m,T),Bt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!T.multiple},Bt("invalid",m);break;case"textarea":ln(m,T),Bt("invalid",m)}Bn(d,T),w=null;for(var F in T)if(T.hasOwnProperty(F)){var q=T[F];F==="children"?typeof q=="string"?m.textContent!==q&&(T.suppressHydrationWarning!==!0&&yh(m.textContent,q,i),w=["children",q]):typeof q=="number"&&m.textContent!==""+q&&(T.suppressHydrationWarning!==!0&&yh(m.textContent,q,i),w=["children",""+q]):s.hasOwnProperty(F)&&q!=null&&F==="onScroll"&&Bt("scroll",m)}switch(d){case"input":rt(m),br(m,T,!0);break;case"textarea":rt(m),Cs(m);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(m.onclick=vh)}m=w,a.updateQueue=m,m!==null&&(a.flags|=4)}else{F=w.nodeType===9?w:w.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ut(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=F.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=F.createElement(d,{is:m.is}):(i=F.createElement(d),d==="select"&&(F=i,m.multiple?F.multiple=!0:m.size&&(F.size=m.size))):i=F.createElementNS(i,d),i[Ms]=a,i[vu]=m,h_(i,a,!1,!1),a.stateNode=i;e:{switch(F=js(d,m),d){case"dialog":Bt("cancel",i),Bt("close",i),w=m;break;case"iframe":case"object":case"embed":Bt("load",i),w=m;break;case"video":case"audio":for(w=0;w<mu.length;w++)Bt(mu[w],i);w=m;break;case"source":Bt("error",i),w=m;break;case"img":case"image":case"link":Bt("error",i),Bt("load",i),w=m;break;case"details":Bt("toggle",i),w=m;break;case"input":pt(i,m),w=Ie(i,m),Bt("invalid",i);break;case"option":w=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},w=le({},m,{value:void 0}),Bt("invalid",i);break;case"textarea":ln(i,m),w=Xr(i,m),Bt("invalid",i);break;default:w=m}Bn(d,w),q=w;for(T in q)if(q.hasOwnProperty(T)){var H=q[T];T==="style"?ui(i,H):T==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&wn(i,H)):T==="children"?typeof H=="string"?(d!=="textarea"||H!=="")&&Nr(i,H):typeof H=="number"&&Nr(i,""+H):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(s.hasOwnProperty(T)?H!=null&&T==="onScroll"&&Bt("scroll",i):H!=null&&C(i,T,H,F))}switch(d){case"input":rt(i),br(i,m,!1);break;case"textarea":rt(i),Cs(i);break;case"option":m.value!=null&&i.setAttribute("value",""+be(m.value));break;case"select":i.multiple=!!m.multiple,T=m.value,T!=null?Sr(i,!!m.multiple,T,!1):m.defaultValue!=null&&Sr(i,!!m.multiple,m.defaultValue,!0);break;default:typeof w.onClick=="function"&&(i.onclick=vh)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Hn(a),null;case 6:if(i&&a.stateNode!=null)p_(i,a,i.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(t(166));if(d=Sa(bu.current),Sa(Fs.current),Nh(a)){if(m=a.stateNode,d=a.memoizedProps,m[Ms]=a,(T=m.nodeValue!==d)&&(i=Ar,i!==null))switch(i.tag){case 3:yh(m.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&yh(m.nodeValue,d,(i.mode&1)!==0)}T&&(a.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Ms]=a,a.stateNode=m}return Hn(a),null;case 13:if(qt(Jt),m=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Yt&&Pr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)y0(),Fl(),a.flags|=98560,T=!1;else if(T=Nh(a),m!==null&&m.dehydrated!==null){if(i===null){if(!T)throw Error(t(318));if(T=a.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(t(317));T[Ms]=a}else Fl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Hn(a),T=!1}else ls!==null&&(jg(ls),ls=null),T=!0;if(!T)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(Jt.current&1)!==0?bn===0&&(bn=3):Rg())),a.updateQueue!==null&&(a.flags|=4),Hn(a),null);case 4:return $l(),vg(i,a),i===null&&gu(a.stateNode.containerInfo),Hn(a),null;case 10:return Hm(a.type._context),Hn(a),null;case 17:return hr(a.type)&&wh(),Hn(a),null;case 19:if(qt(Jt),T=a.memoizedState,T===null)return Hn(a),null;if(m=(a.flags&128)!==0,F=T.rendering,F===null)if(m)Iu(T,!1);else{if(bn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(F=Ph(i),F!==null){for(a.flags|=128,Iu(T,!1),m=F.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=d,d=a.child;d!==null;)T=d,i=m,T.flags&=14680066,F=T.alternate,F===null?(T.childLanes=0,T.lanes=i,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=F.childLanes,T.lanes=F.lanes,T.child=F.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=F.memoizedProps,T.memoizedState=F.memoizedState,T.updateQueue=F.updateQueue,T.type=F.type,i=F.dependencies,T.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return Ft(Jt,Jt.current&1|2),a.child}i=i.sibling}T.tail!==null&&Mt()>Hl&&(a.flags|=128,m=!0,Iu(T,!1),a.lanes=4194304)}else{if(!m)if(i=Ph(F),i!==null){if(a.flags|=128,m=!0,d=i.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Iu(T,!0),T.tail===null&&T.tailMode==="hidden"&&!F.alternate&&!Yt)return Hn(a),null}else 2*Mt()-T.renderingStartTime>Hl&&d!==1073741824&&(a.flags|=128,m=!0,Iu(T,!1),a.lanes=4194304);T.isBackwards?(F.sibling=a.child,a.child=F):(d=T.last,d!==null?d.sibling=F:a.child=F,T.last=F)}return T.tail!==null?(a=T.tail,T.rendering=a,T.tail=a.sibling,T.renderingStartTime=Mt(),a.sibling=null,d=Jt.current,Ft(Jt,m?d&1|2:d&1),a):(Hn(a),null);case 22:case 23:return Pg(),m=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(Rr&1073741824)!==0&&(Hn(a),a.subtreeFlags&6&&(a.flags|=8192)):Hn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function qP(i,a){switch(Um(a),a.tag){case 1:return hr(a.type)&&wh(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return $l(),qt(dr),qt(qn),Zm(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return Xm(a),null;case 13:if(qt(Jt),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Fl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return qt(Jt),null;case 4:return $l(),null;case 10:return Hm(a.type._context),null;case 22:case 23:return Pg(),null;case 24:return null;default:return null}}var Uh=!1,Kn=!1,WP=typeof WeakSet=="function"?WeakSet:Set,ke=null;function ql(i,a){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){on(i,a,m)}else d.current=null}function xg(i,a,d){try{d()}catch(m){on(i,a,m)}}var m_=!1;function HP(i,a){if(Pm=Ji,i=Kw(),bm(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var w=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var F=0,q=-1,H=-1,se=0,fe=0,pe=i,de=null;t:for(;;){for(var je;pe!==d||w!==0&&pe.nodeType!==3||(q=F+w),pe!==T||m!==0&&pe.nodeType!==3||(H=F+m),pe.nodeType===3&&(F+=pe.nodeValue.length),(je=pe.firstChild)!==null;)de=pe,pe=je;for(;;){if(pe===i)break t;if(de===d&&++se===w&&(q=F),de===T&&++fe===m&&(H=F),(je=pe.nextSibling)!==null)break;pe=de,de=pe.parentNode}pe=je}d=q===-1||H===-1?null:{start:q,end:H}}else d=null}d=d||{start:0,end:0}}else d=null;for(Rm={focusedElem:i,selectionRange:d},Ji=!1,ke=a;ke!==null;)if(a=ke,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,ke=i;else for(;ke!==null;){a=ke;try{var De=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(De!==null){var Le=De.memoizedProps,cn=De.memoizedState,ee=a.stateNode,Q=ee.getSnapshotBeforeUpdate(a.elementType===a.type?Le:cs(a.type,Le),cn);ee.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var re=a.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ye){on(a,a.return,ye)}if(i=a.sibling,i!==null){i.return=a.return,ke=i;break}ke=a.return}return De=m_,m_=!1,De}function ju(i,a,d){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&i)===i){var T=w.destroy;w.destroy=void 0,T!==void 0&&xg(a,d,T)}w=w.next}while(w!==m)}}function zh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&i)===i){var m=d.create;d.destroy=m()}d=d.next}while(d!==a)}}function wg(i){var a=i.ref;if(a!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof a=="function"?a(i):a.current=i}}function g_(i){var a=i.alternate;a!==null&&(i.alternate=null,g_(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Ms],delete a[vu],delete a[Lm],delete a[IP],delete a[jP])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function y_(i){return i.tag===5||i.tag===3||i.tag===4}function v_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||y_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _g(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(i,a):d.insertBefore(i,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(i,d)):(a=d,a.appendChild(i)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=vh));else if(m!==4&&(i=i.child,i!==null))for(_g(i,a,d),i=i.sibling;i!==null;)_g(i,a,d),i=i.sibling}function Eg(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?d.insertBefore(i,a):d.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(Eg(i,a,d),i=i.sibling;i!==null;)Eg(i,a,d),i=i.sibling}var On=null,us=!1;function ao(i,a,d){for(d=d.child;d!==null;)x_(i,a,d),d=d.sibling}function x_(i,a,d){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(ha,d)}catch{}switch(d.tag){case 5:Kn||ql(d,a);case 6:var m=On,w=us;On=null,ao(i,a,d),On=m,us=w,On!==null&&(us?(i=On,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):On.removeChild(d.stateNode));break;case 18:On!==null&&(us?(i=On,d=d.stateNode,i.nodeType===8?Dm(i.parentNode,d):i.nodeType===1&&Dm(i,d),is(i)):Dm(On,d.stateNode));break;case 4:m=On,w=us,On=d.stateNode.containerInfo,us=!0,ao(i,a,d),On=m,us=w;break;case 0:case 11:case 14:case 15:if(!Kn&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){w=m=m.next;do{var T=w,F=T.destroy;T=T.tag,F!==void 0&&((T&2)!==0||(T&4)!==0)&&xg(d,a,F),w=w.next}while(w!==m)}ao(i,a,d);break;case 1:if(!Kn&&(ql(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(q){on(d,a,q)}ao(i,a,d);break;case 21:ao(i,a,d);break;case 22:d.mode&1?(Kn=(m=Kn)||d.memoizedState!==null,ao(i,a,d),Kn=m):ao(i,a,d);break;default:ao(i,a,d)}}function w_(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new WP),a.forEach(function(m){var w=tR.bind(null,i,m);d.has(m)||(d.add(m),m.then(w,w))})}}function ds(i,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var w=d[m];try{var T=i,F=a,q=F;e:for(;q!==null;){switch(q.tag){case 5:On=q.stateNode,us=!1;break e;case 3:On=q.stateNode.containerInfo,us=!0;break e;case 4:On=q.stateNode.containerInfo,us=!0;break e}q=q.return}if(On===null)throw Error(t(160));x_(T,F,w),On=null,us=!1;var H=w.alternate;H!==null&&(H.return=null),w.return=null}catch(se){on(w,a,se)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)__(a,i),a=a.sibling}function __(i,a){var d=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ds(a,i),Us(i),m&4){try{ju(3,i,i.return),zh(3,i)}catch(Le){on(i,i.return,Le)}try{ju(5,i,i.return)}catch(Le){on(i,i.return,Le)}}break;case 1:ds(a,i),Us(i),m&512&&d!==null&&ql(d,d.return);break;case 5:if(ds(a,i),Us(i),m&512&&d!==null&&ql(d,d.return),i.flags&32){var w=i.stateNode;try{Nr(w,"")}catch(Le){on(i,i.return,Le)}}if(m&4&&(w=i.stateNode,w!=null)){var T=i.memoizedProps,F=d!==null?d.memoizedProps:T,q=i.type,H=i.updateQueue;if(i.updateQueue=null,H!==null)try{q==="input"&&T.type==="radio"&&T.name!=null&&sn(w,T),js(q,F);var se=js(q,T);for(F=0;F<H.length;F+=2){var fe=H[F],pe=H[F+1];fe==="style"?ui(w,pe):fe==="dangerouslySetInnerHTML"?wn(w,pe):fe==="children"?Nr(w,pe):C(w,fe,pe,se)}switch(q){case"input":zn(w,T);break;case"textarea":Ts(w,T);break;case"select":var de=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!T.multiple;var je=T.value;je!=null?Sr(w,!!T.multiple,je,!1):de!==!!T.multiple&&(T.defaultValue!=null?Sr(w,!!T.multiple,T.defaultValue,!0):Sr(w,!!T.multiple,T.multiple?[]:"",!1))}w[vu]=T}catch(Le){on(i,i.return,Le)}}break;case 6:if(ds(a,i),Us(i),m&4){if(i.stateNode===null)throw Error(t(162));w=i.stateNode,T=i.memoizedProps;try{w.nodeValue=T}catch(Le){on(i,i.return,Le)}}break;case 3:if(ds(a,i),Us(i),m&4&&d!==null&&d.memoizedState.isDehydrated)try{is(a.containerInfo)}catch(Le){on(i,i.return,Le)}break;case 4:ds(a,i),Us(i);break;case 13:ds(a,i),Us(i),w=i.child,w.flags&8192&&(T=w.memoizedState!==null,w.stateNode.isHidden=T,!T||w.alternate!==null&&w.alternate.memoizedState!==null||(Ng=Mt())),m&4&&w_(i);break;case 22:if(fe=d!==null&&d.memoizedState!==null,i.mode&1?(Kn=(se=Kn)||fe,ds(a,i),Kn=se):ds(a,i),Us(i),m&8192){if(se=i.memoizedState!==null,(i.stateNode.isHidden=se)&&!fe&&(i.mode&1)!==0)for(ke=i,fe=i.child;fe!==null;){for(pe=ke=fe;ke!==null;){switch(de=ke,je=de.child,de.tag){case 0:case 11:case 14:case 15:ju(4,de,de.return);break;case 1:ql(de,de.return);var De=de.stateNode;if(typeof De.componentWillUnmount=="function"){m=de,d=de.return;try{a=m,De.props=a.memoizedProps,De.state=a.memoizedState,De.componentWillUnmount()}catch(Le){on(m,d,Le)}}break;case 5:ql(de,de.return);break;case 22:if(de.memoizedState!==null){S_(pe);continue}}je!==null?(je.return=de,ke=je):S_(pe)}fe=fe.sibling}e:for(fe=null,pe=i;;){if(pe.tag===5){if(fe===null){fe=pe;try{w=pe.stateNode,se?(T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(q=pe.stateNode,H=pe.memoizedProps.style,F=H!=null&&H.hasOwnProperty("display")?H.display:null,q.style.display=Is("display",F))}catch(Le){on(i,i.return,Le)}}}else if(pe.tag===6){if(fe===null)try{pe.stateNode.nodeValue=se?"":pe.memoizedProps}catch(Le){on(i,i.return,Le)}}else if((pe.tag!==22&&pe.tag!==23||pe.memoizedState===null||pe===i)&&pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===i)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===i)break e;fe===pe&&(fe=null),pe=pe.return}fe===pe&&(fe=null),pe.sibling.return=pe.return,pe=pe.sibling}}break;case 19:ds(a,i),Us(i),m&4&&w_(i);break;case 21:break;default:ds(a,i),Us(i)}}function Us(i){var a=i.flags;if(a&2){try{e:{for(var d=i.return;d!==null;){if(y_(d)){var m=d;break e}d=d.return}throw Error(t(160))}switch(m.tag){case 5:var w=m.stateNode;m.flags&32&&(Nr(w,""),m.flags&=-33);var T=v_(i);Eg(i,T,w);break;case 3:case 4:var F=m.stateNode.containerInfo,q=v_(i);_g(i,q,F);break;default:throw Error(t(161))}}catch(H){on(i,i.return,H)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function KP(i,a,d){ke=i,E_(i)}function E_(i,a,d){for(var m=(i.mode&1)!==0;ke!==null;){var w=ke,T=w.child;if(w.tag===22&&m){var F=w.memoizedState!==null||Uh;if(!F){var q=w.alternate,H=q!==null&&q.memoizedState!==null||Kn;q=Uh;var se=Kn;if(Uh=F,(Kn=H)&&!se)for(ke=w;ke!==null;)F=ke,H=F.child,F.tag===22&&F.memoizedState!==null?N_(w):H!==null?(H.return=F,ke=H):N_(w);for(;T!==null;)ke=T,E_(T),T=T.sibling;ke=w,Uh=q,Kn=se}b_(i)}else(w.subtreeFlags&8772)!==0&&T!==null?(T.return=w,ke=T):b_(i)}}function b_(i){for(;ke!==null;){var a=ke;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Kn||zh(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!Kn)if(d===null)m.componentDidMount();else{var w=a.elementType===a.type?d.memoizedProps:cs(a.type,d.memoizedProps);m.componentDidUpdate(w,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var T=a.updateQueue;T!==null&&S0(a,T,m);break;case 3:var F=a.updateQueue;if(F!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}S0(a,F,d)}break;case 5:var q=a.stateNode;if(d===null&&a.flags&4){d=q;var H=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&d.focus();break;case"img":H.src&&(d.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var se=a.alternate;if(se!==null){var fe=se.memoizedState;if(fe!==null){var pe=fe.dehydrated;pe!==null&&is(pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Kn||a.flags&512&&wg(a)}catch(de){on(a,a.return,de)}}if(a===i){ke=null;break}if(d=a.sibling,d!==null){d.return=a.return,ke=d;break}ke=a.return}}function S_(i){for(;ke!==null;){var a=ke;if(a===i){ke=null;break}var d=a.sibling;if(d!==null){d.return=a.return,ke=d;break}ke=a.return}}function N_(i){for(;ke!==null;){var a=ke;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{zh(4,a)}catch(H){on(a,d,H)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var w=a.return;try{m.componentDidMount()}catch(H){on(a,w,H)}}var T=a.return;try{wg(a)}catch(H){on(a,T,H)}break;case 5:var F=a.return;try{wg(a)}catch(H){on(a,F,H)}}}catch(H){on(a,a.return,H)}if(a===i){ke=null;break}var q=a.sibling;if(q!==null){q.return=a.return,ke=q;break}ke=a.return}}var GP=Math.ceil,$h=M.ReactCurrentDispatcher,bg=M.ReactCurrentOwner,Hr=M.ReactCurrentBatchConfig,Nt=0,jn=null,fn=null,Dn=0,Rr=0,Wl=no(0),bn=0,Au=null,Ta=0,Bh=0,Sg=0,Pu=null,pr=null,Ng=0,Hl=1/0,Ni=null,qh=!1,Tg=null,lo=null,Wh=!1,co=null,Hh=0,Ru=0,Cg=null,Kh=-1,Gh=0;function rr(){return(Nt&6)!==0?Mt():Kh!==-1?Kh:Kh=Mt()}function uo(i){return(i.mode&1)===0?1:(Nt&2)!==0&&Dn!==0?Dn&-Dn:PP.transition!==null?(Gh===0&&(Gh=pa()),Gh):(i=yt,i!==0||(i=window.event,i=i===void 0?16:ou(i.type)),i)}function hs(i,a,d,m){if(50<Ru)throw Ru=0,Cg=null,Error(t(185));Gi(i,d,m),((Nt&2)===0||i!==jn)&&(i===jn&&((Nt&2)===0&&(Bh|=d),bn===4&&ho(i,Dn)),mr(i,m),d===1&&Nt===0&&(a.mode&1)===0&&(Hl=Mt()+500,Eh&&so()))}function mr(i,a){var d=i.callbackNode;fi(i,a);var m=fa(i,i===jn?Dn:0);if(m===0)d!==null&&tu(d),i.callbackNode=null,i.callbackPriority=0;else if(a=m&-m,i.callbackPriority!==a){if(d!=null&&tu(d),a===1)i.tag===0?AP(C_.bind(null,i)):h0(C_.bind(null,i)),TP(function(){(Nt&6)===0&&so()}),d=null;else{switch(Yi(m)){case 1:d=da;break;case 4:d=Wi;break;case 16:d=Vr;break;case 536870912:d=Gd;break;default:d=Vr}d=D_(d,T_.bind(null,i))}i.callbackPriority=a,i.callbackNode=d}}function T_(i,a){if(Kh=-1,Gh=0,(Nt&6)!==0)throw Error(t(327));var d=i.callbackNode;if(Kl()&&i.callbackNode!==d)return null;var m=fa(i,i===jn?Dn:0);if(m===0)return null;if((m&30)!==0||(m&i.expiredLanes)!==0||a)a=Qh(i,m);else{a=m;var w=Nt;Nt|=2;var T=j_();(jn!==i||Dn!==a)&&(Ni=null,Hl=Mt()+500,Ia(i,a));do try{XP();break}catch(q){I_(i,q)}while(!0);Wm(),$h.current=T,Nt=w,fn!==null?a=0:(jn=null,Dn=0,a=bn)}if(a!==0){if(a===2&&(w=Cr(i),w!==0&&(m=w,a=Ig(i,w))),a===1)throw d=Au,Ia(i,0),ho(i,m),mr(i,Mt()),d;if(a===6)ho(i,m);else{if(w=i.current.alternate,(m&30)===0&&!QP(w)&&(a=Qh(i,m),a===2&&(T=Cr(i),T!==0&&(m=T,a=Ig(i,T))),a===1))throw d=Au,Ia(i,0),ho(i,m),mr(i,Mt()),d;switch(i.finishedWork=w,i.finishedLanes=m,a){case 0:case 1:throw Error(t(345));case 2:ja(i,pr,Ni);break;case 3:if(ho(i,m),(m&130023424)===m&&(a=Ng+500-Mt(),10<a)){if(fa(i,0)!==0)break;if(w=i.suspendedLanes,(w&m)!==m){rr(),i.pingedLanes|=i.suspendedLanes&w;break}i.timeoutHandle=Om(ja.bind(null,i,pr,Ni),a);break}ja(i,pr,Ni);break;case 4:if(ho(i,m),(m&4194240)===m)break;for(a=i.eventTimes,w=-1;0<m;){var F=31-er(m);T=1<<F,F=a[F],F>w&&(w=F),m&=~T}if(m=w,m=Mt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*GP(m/1960))-m,10<m){i.timeoutHandle=Om(ja.bind(null,i,pr,Ni),m);break}ja(i,pr,Ni);break;case 5:ja(i,pr,Ni);break;default:throw Error(t(329))}}}return mr(i,Mt()),i.callbackNode===d?T_.bind(null,i):null}function Ig(i,a){var d=Pu;return i.current.memoizedState.isDehydrated&&(Ia(i,a).flags|=256),i=Qh(i,a),i!==2&&(a=pr,pr=d,a!==null&&jg(a)),i}function jg(i){pr===null?pr=i:pr.push.apply(pr,i)}function QP(i){for(var a=i;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var w=d[m],T=w.getSnapshot;w=w.value;try{if(!as(T(),w))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ho(i,a){for(a&=~Sg,a&=~Bh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var d=31-er(a),m=1<<d;i[d]=-1,a&=~m}}function C_(i){if((Nt&6)!==0)throw Error(t(327));Kl();var a=fa(i,0);if((a&1)===0)return mr(i,Mt()),null;var d=Qh(i,a);if(i.tag!==0&&d===2){var m=Cr(i);m!==0&&(a=m,d=Ig(i,m))}if(d===1)throw d=Au,Ia(i,0),ho(i,a),mr(i,Mt()),d;if(d===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,ja(i,pr,Ni),mr(i,Mt()),null}function Ag(i,a){var d=Nt;Nt|=1;try{return i(a)}finally{Nt=d,Nt===0&&(Hl=Mt()+500,Eh&&so())}}function Ca(i){co!==null&&co.tag===0&&(Nt&6)===0&&Kl();var a=Nt;Nt|=1;var d=Hr.transition,m=yt;try{if(Hr.transition=null,yt=1,i)return i()}finally{yt=m,Hr.transition=d,Nt=a,(Nt&6)===0&&so()}}function Pg(){Rr=Wl.current,qt(Wl)}function Ia(i,a){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,NP(d)),fn!==null)for(d=fn.return;d!==null;){var m=d;switch(Um(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&wh();break;case 3:$l(),qt(dr),qt(qn),Zm();break;case 5:Xm(m);break;case 4:$l();break;case 13:qt(Jt);break;case 19:qt(Jt);break;case 10:Hm(m.type._context);break;case 22:case 23:Pg()}d=d.return}if(jn=i,fn=i=fo(i.current,null),Dn=Rr=a,bn=0,Au=null,Sg=Bh=Ta=0,pr=Pu=null,ba!==null){for(a=0;a<ba.length;a++)if(d=ba[a],m=d.interleaved,m!==null){d.interleaved=null;var w=m.next,T=d.pending;if(T!==null){var F=T.next;T.next=w,m.next=F}d.pending=m}ba=null}return i}function I_(i,a){do{var d=fn;try{if(Wm(),Rh.current=Lh,kh){for(var m=Zt.memoizedState;m!==null;){var w=m.queue;w!==null&&(w.pending=null),m=m.next}kh=!1}if(Na=0,In=En=Zt=null,Su=!1,Nu=0,bg.current=null,d===null||d.return===null){bn=1,Au=a,fn=null;break}e:{var T=i,F=d.return,q=d,H=a;if(a=Dn,q.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var se=H,fe=q,pe=fe.tag;if((fe.mode&1)===0&&(pe===0||pe===11||pe===15)){var de=fe.alternate;de?(fe.updateQueue=de.updateQueue,fe.memoizedState=de.memoizedState,fe.lanes=de.lanes):(fe.updateQueue=null,fe.memoizedState=null)}var je=Z0(F);if(je!==null){je.flags&=-257,e_(je,F,q,T,a),je.mode&1&&J0(T,se,a),a=je,H=se;var De=a.updateQueue;if(De===null){var Le=new Set;Le.add(H),a.updateQueue=Le}else De.add(H);break e}else{if((a&1)===0){J0(T,se,a),Rg();break e}H=Error(t(426))}}else if(Yt&&q.mode&1){var cn=Z0(F);if(cn!==null){(cn.flags&65536)===0&&(cn.flags|=256),e_(cn,F,q,T,a),Bm(Bl(H,q));break e}}T=H=Bl(H,q),bn!==4&&(bn=2),Pu===null?Pu=[T]:Pu.push(T),T=F;do{switch(T.tag){case 3:T.flags|=65536,a&=-a,T.lanes|=a;var ee=Y0(T,H,a);b0(T,ee);break e;case 1:q=H;var Q=T.type,re=T.stateNode;if((T.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(lo===null||!lo.has(re)))){T.flags|=65536,a&=-a,T.lanes|=a;var ye=X0(T,q,a);b0(T,ye);break e}}T=T.return}while(T!==null)}P_(d)}catch(Ve){a=Ve,fn===d&&d!==null&&(fn=d=d.return);continue}break}while(!0)}function j_(){var i=$h.current;return $h.current=Lh,i===null?Lh:i}function Rg(){(bn===0||bn===3||bn===2)&&(bn=4),jn===null||(Ta&268435455)===0&&(Bh&268435455)===0||ho(jn,Dn)}function Qh(i,a){var d=Nt;Nt|=2;var m=j_();(jn!==i||Dn!==a)&&(Ni=null,Ia(i,a));do try{YP();break}catch(w){I_(i,w)}while(!0);if(Wm(),Nt=d,$h.current=m,fn!==null)throw Error(t(261));return jn=null,Dn=0,bn}function YP(){for(;fn!==null;)A_(fn)}function XP(){for(;fn!==null&&!Hd();)A_(fn)}function A_(i){var a=O_(i.alternate,i,Rr);i.memoizedProps=i.pendingProps,a===null?P_(i):fn=a,bg.current=null}function P_(i){var a=i;do{var d=a.alternate;if(i=a.return,(a.flags&32768)===0){if(d=BP(d,a,Rr),d!==null){fn=d;return}}else{if(d=qP(d,a),d!==null){d.flags&=32767,fn=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{bn=6,fn=null;return}}if(a=a.sibling,a!==null){fn=a;return}fn=a=i}while(a!==null);bn===0&&(bn=5)}function ja(i,a,d){var m=yt,w=Hr.transition;try{Hr.transition=null,yt=1,JP(i,a,d,m)}finally{Hr.transition=w,yt=m}return null}function JP(i,a,d,m){do Kl();while(co!==null);if((Nt&6)!==0)throw Error(t(327));d=i.finishedWork;var w=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var T=d.lanes|d.childLanes;if(Dt(i,T),i===jn&&(fn=jn=null,Dn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Wh||(Wh=!0,D_(Vr,function(){return Kl(),null})),T=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||T){T=Hr.transition,Hr.transition=null;var F=yt;yt=1;var q=Nt;Nt|=4,bg.current=null,HP(i,d),__(d,i),vP(Rm),Ji=!!Pm,Rm=Pm=null,i.current=d,KP(d),mm(),Nt=q,yt=F,Hr.transition=T}else i.current=d;if(Wh&&(Wh=!1,co=i,Hh=w),T=i.pendingLanes,T===0&&(lo=null),Qd(d.stateNode),mr(i,Mt()),a!==null)for(m=i.onRecoverableError,d=0;d<a.length;d++)w=a[d],m(w.value,{componentStack:w.stack,digest:w.digest});if(qh)throw qh=!1,i=Tg,Tg=null,i;return(Hh&1)!==0&&i.tag!==0&&Kl(),T=i.pendingLanes,(T&1)!==0?i===Cg?Ru++:(Ru=0,Cg=i):Ru=0,so(),null}function Kl(){if(co!==null){var i=Yi(Hh),a=Hr.transition,d=yt;try{if(Hr.transition=null,yt=16>i?16:i,co===null)var m=!1;else{if(i=co,co=null,Hh=0,(Nt&6)!==0)throw Error(t(331));var w=Nt;for(Nt|=4,ke=i.current;ke!==null;){var T=ke,F=T.child;if((ke.flags&16)!==0){var q=T.deletions;if(q!==null){for(var H=0;H<q.length;H++){var se=q[H];for(ke=se;ke!==null;){var fe=ke;switch(fe.tag){case 0:case 11:case 15:ju(8,fe,T)}var pe=fe.child;if(pe!==null)pe.return=fe,ke=pe;else for(;ke!==null;){fe=ke;var de=fe.sibling,je=fe.return;if(g_(fe),fe===se){ke=null;break}if(de!==null){de.return=je,ke=de;break}ke=je}}}var De=T.alternate;if(De!==null){var Le=De.child;if(Le!==null){De.child=null;do{var cn=Le.sibling;Le.sibling=null,Le=cn}while(Le!==null)}}ke=T}}if((T.subtreeFlags&2064)!==0&&F!==null)F.return=T,ke=F;else e:for(;ke!==null;){if(T=ke,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:ju(9,T,T.return)}var ee=T.sibling;if(ee!==null){ee.return=T.return,ke=ee;break e}ke=T.return}}var Q=i.current;for(ke=Q;ke!==null;){F=ke;var re=F.child;if((F.subtreeFlags&2064)!==0&&re!==null)re.return=F,ke=re;else e:for(F=Q;ke!==null;){if(q=ke,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:zh(9,q)}}catch(Ve){on(q,q.return,Ve)}if(q===F){ke=null;break e}var ye=q.sibling;if(ye!==null){ye.return=q.return,ke=ye;break e}ke=q.return}}if(Nt=w,so(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(ha,i)}catch{}m=!0}return m}finally{yt=d,Hr.transition=a}}return!1}function R_(i,a,d){a=Bl(d,a),a=Y0(i,a,1),i=oo(i,a,1),a=rr(),i!==null&&(Gi(i,1,a),mr(i,a))}function on(i,a,d){if(i.tag===3)R_(i,i,d);else for(;a!==null;){if(a.tag===3){R_(a,i,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(lo===null||!lo.has(m))){i=Bl(d,i),i=X0(a,i,1),a=oo(a,i,1),i=rr(),a!==null&&(Gi(a,1,i),mr(a,i));break}}a=a.return}}function ZP(i,a,d){var m=i.pingCache;m!==null&&m.delete(a),a=rr(),i.pingedLanes|=i.suspendedLanes&d,jn===i&&(Dn&d)===d&&(bn===4||bn===3&&(Dn&130023424)===Dn&&500>Mt()-Ng?Ia(i,0):Sg|=d),mr(i,a)}function k_(i,a){a===0&&((i.mode&1)===0?a=1:(a=gl,gl<<=1,(gl&130023424)===0&&(gl=4194304)));var d=rr();i=Ei(i,a),i!==null&&(Gi(i,a,d),mr(i,d))}function eR(i){var a=i.memoizedState,d=0;a!==null&&(d=a.retryLane),k_(i,d)}function tR(i,a){var d=0;switch(i.tag){case 13:var m=i.stateNode,w=i.memoizedState;w!==null&&(d=w.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(a),k_(i,d)}var O_;O_=function(i,a,d){if(i!==null)if(i.memoizedProps!==a.pendingProps||dr.current)fr=!0;else{if((i.lanes&d)===0&&(a.flags&128)===0)return fr=!1,$P(i,a,d);fr=(i.flags&131072)!==0}else fr=!1,Yt&&(a.flags&1048576)!==0&&f0(a,Sh,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;Vh(i,a),i=a.pendingProps;var w=Dl(a,qn.current);zl(a,d),w=ng(null,a,m,i,w,d);var T=rg();return a.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,hr(m)?(T=!0,_h(a)):T=!1,a.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Qm(a),w.updater=Mh,a.stateNode=w,w._reactInternals=a,cg(a,m,i,d),a=fg(null,a,m,!0,T,d)):(a.tag=0,Yt&&T&&Vm(a),nr(null,a,w,d),a=a.child),a;case 16:m=a.elementType;e:{switch(Vh(i,a),i=a.pendingProps,w=m._init,m=w(m._payload),a.type=m,w=a.tag=rR(m),i=cs(m,i),w){case 0:a=hg(null,a,m,i,d);break e;case 1:a=o_(null,a,m,i,d);break e;case 11:a=t_(null,a,m,i,d);break e;case 14:a=n_(null,a,m,cs(m.type,i),d);break e}throw Error(t(306,m,""))}return a;case 0:return m=a.type,w=a.pendingProps,w=a.elementType===m?w:cs(m,w),hg(i,a,m,w,d);case 1:return m=a.type,w=a.pendingProps,w=a.elementType===m?w:cs(m,w),o_(i,a,m,w,d);case 3:e:{if(a_(a),i===null)throw Error(t(387));m=a.pendingProps,T=a.memoizedState,w=T.element,E0(i,a),Ah(a,m,null,d);var F=a.memoizedState;if(m=F.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},a.updateQueue.baseState=T,a.memoizedState=T,a.flags&256){w=Bl(Error(t(423)),a),a=l_(i,a,m,d,w);break e}else if(m!==w){w=Bl(Error(t(424)),a),a=l_(i,a,m,d,w);break e}else for(Pr=to(a.stateNode.containerInfo.firstChild),Ar=a,Yt=!0,ls=null,d=w0(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Fl(),m===w){a=Si(i,a,d);break e}nr(i,a,m,d)}a=a.child}return a;case 5:return N0(a),i===null&&$m(a),m=a.type,w=a.pendingProps,T=i!==null?i.memoizedProps:null,F=w.children,km(m,w)?F=null:T!==null&&km(m,T)&&(a.flags|=32),i_(i,a),nr(i,a,F,d),a.child;case 6:return i===null&&$m(a),null;case 13:return c_(i,a,d);case 4:return Ym(a,a.stateNode.containerInfo),m=a.pendingProps,i===null?a.child=Vl(a,null,m,d):nr(i,a,m,d),a.child;case 11:return m=a.type,w=a.pendingProps,w=a.elementType===m?w:cs(m,w),t_(i,a,m,w,d);case 7:return nr(i,a,a.pendingProps,d),a.child;case 8:return nr(i,a,a.pendingProps.children,d),a.child;case 12:return nr(i,a,a.pendingProps.children,d),a.child;case 10:e:{if(m=a.type._context,w=a.pendingProps,T=a.memoizedProps,F=w.value,Ft(Ch,m._currentValue),m._currentValue=F,T!==null)if(as(T.value,F)){if(T.children===w.children&&!dr.current){a=Si(i,a,d);break e}}else for(T=a.child,T!==null&&(T.return=a);T!==null;){var q=T.dependencies;if(q!==null){F=T.child;for(var H=q.firstContext;H!==null;){if(H.context===m){if(T.tag===1){H=bi(-1,d&-d),H.tag=2;var se=T.updateQueue;if(se!==null){se=se.shared;var fe=se.pending;fe===null?H.next=H:(H.next=fe.next,fe.next=H),se.pending=H}}T.lanes|=d,H=T.alternate,H!==null&&(H.lanes|=d),Km(T.return,d,a),q.lanes|=d;break}H=H.next}}else if(T.tag===10)F=T.type===a.type?null:T.child;else if(T.tag===18){if(F=T.return,F===null)throw Error(t(341));F.lanes|=d,q=F.alternate,q!==null&&(q.lanes|=d),Km(F,d,a),F=T.sibling}else F=T.child;if(F!==null)F.return=T;else for(F=T;F!==null;){if(F===a){F=null;break}if(T=F.sibling,T!==null){T.return=F.return,F=T;break}F=F.return}T=F}nr(i,a,w.children,d),a=a.child}return a;case 9:return w=a.type,m=a.pendingProps.children,zl(a,d),w=qr(w),m=m(w),a.flags|=1,nr(i,a,m,d),a.child;case 14:return m=a.type,w=cs(m,a.pendingProps),w=cs(m.type,w),n_(i,a,m,w,d);case 15:return r_(i,a,a.type,a.pendingProps,d);case 17:return m=a.type,w=a.pendingProps,w=a.elementType===m?w:cs(m,w),Vh(i,a),a.tag=1,hr(m)?(i=!0,_h(a)):i=!1,zl(a,d),G0(a,m,w),cg(a,m,w,d),fg(null,a,m,!0,i,d);case 19:return d_(i,a,d);case 22:return s_(i,a,d)}throw Error(t(156,a.tag))};function D_(i,a){return pl(i,a)}function nR(i,a,d,m){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(i,a,d,m){return new nR(i,a,d,m)}function kg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function rR(i){if(typeof i=="function")return kg(i)?1:0;if(i!=null){if(i=i.$$typeof,i===V)return 11;if(i===K)return 14}return 2}function fo(i,a){var d=i.alternate;return d===null?(d=Kr(i.tag,a,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=a,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,a=i.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function Yh(i,a,d,m,w,T){var F=2;if(m=i,typeof i=="function")kg(i)&&(F=1);else if(typeof i=="string")F=5;else e:switch(i){case P:return Aa(d.children,w,T,a);case k:F=8,w|=8;break;case D:return i=Kr(12,d,a,w|2),i.elementType=D,i.lanes=T,i;case R:return i=Kr(13,d,a,w),i.elementType=R,i.lanes=T,i;case W:return i=Kr(19,d,a,w),i.elementType=W,i.lanes=T,i;case ie:return Xh(d,w,T,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:F=10;break e;case L:F=9;break e;case V:F=11;break e;case K:F=14;break e;case X:F=16,m=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=Kr(F,d,a,w),a.elementType=i,a.type=m,a.lanes=T,a}function Aa(i,a,d,m){return i=Kr(7,i,m,a),i.lanes=d,i}function Xh(i,a,d,m){return i=Kr(22,i,m,a),i.elementType=ie,i.lanes=d,i.stateNode={isHidden:!1},i}function Og(i,a,d){return i=Kr(6,i,null,a),i.lanes=d,i}function Dg(i,a,d){return a=Kr(4,i.children!==null?i.children:[],i.key,a),a.lanes=d,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function sR(i,a,d,m,w){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ki(0),this.expirationTimes=Ki(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ki(0),this.identifierPrefix=m,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function Lg(i,a,d,m,w,T,F,q,H){return i=new sR(i,a,d,q,H),a===1?(a=1,T===!0&&(a|=8)):a=0,T=Kr(3,null,null,a),i.current=T,T.stateNode=i,T.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qm(T),i}function iR(i,a,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:m==null?null:""+m,children:i,containerInfo:a,implementation:d}}function L_(i){if(!i)return ro;i=i._reactInternals;e:{if(es(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(hr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var d=i.type;if(hr(d))return u0(i,d,a)}return a}function M_(i,a,d,m,w,T,F,q,H){return i=Lg(d,m,!0,i,w,T,F,q,H),i.context=L_(null),d=i.current,m=rr(),w=uo(d),T=bi(m,w),T.callback=a??null,oo(d,T,w),i.current.lanes=w,Gi(i,w,m),mr(i,m),i}function Jh(i,a,d,m){var w=a.current,T=rr(),F=uo(w);return d=L_(d),a.context===null?a.context=d:a.pendingContext=d,a=bi(T,F),a.payload={element:i},m=m===void 0?null:m,m!==null&&(a.callback=m),i=oo(w,a,F),i!==null&&(hs(i,w,F,T),jh(i,w,F)),F}function Zh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function F_(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<a?d:a}}function Mg(i,a){F_(i,a),(i=i.alternate)&&F_(i,a)}function oR(){return null}var V_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Fg(i){this._internalRoot=i}ef.prototype.render=Fg.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));Jh(i,a,null,null)},ef.prototype.unmount=Fg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Ca(function(){Jh(null,i,null,null)}),a[vi]=null}};function ef(i){this._internalRoot=i}ef.prototype.unstable_scheduleHydration=function(i){if(i){var a=eh();i={blockedOn:null,target:i,priority:a};for(var d=0;d<ks.length&&a!==0&&a<ks[d].priority;d++);ks.splice(d,0,i),d===0&&rh(i)}};function Vg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function tf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function U_(){}function aR(i,a,d,m,w){if(w){if(typeof m=="function"){var T=m;m=function(){var se=Zh(F);T.call(se)}}var F=M_(a,m,i,0,null,!1,!1,"",U_);return i._reactRootContainer=F,i[vi]=F.current,gu(i.nodeType===8?i.parentNode:i),Ca(),F}for(;w=i.lastChild;)i.removeChild(w);if(typeof m=="function"){var q=m;m=function(){var se=Zh(H);q.call(se)}}var H=Lg(i,0,!1,null,null,!1,!1,"",U_);return i._reactRootContainer=H,i[vi]=H.current,gu(i.nodeType===8?i.parentNode:i),Ca(function(){Jh(a,H,d,m)}),H}function nf(i,a,d,m,w){var T=d._reactRootContainer;if(T){var F=T;if(typeof w=="function"){var q=w;w=function(){var H=Zh(F);q.call(H)}}Jh(a,F,i,w)}else F=aR(d,a,i,w,m);return Zh(F)}Jd=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var d=Hi(a.pendingLanes);d!==0&&(Qi(a,d|1),mr(a,Mt()),(Nt&6)===0&&(Hl=Mt()+500,so()))}break;case 13:Ca(function(){var m=Ei(i,1);if(m!==null){var w=rr();hs(m,i,1,w)}}),Mg(i,1)}},yl=function(i){if(i.tag===13){var a=Ei(i,134217728);if(a!==null){var d=rr();hs(a,i,134217728,d)}Mg(i,134217728)}},Zd=function(i){if(i.tag===13){var a=uo(i),d=Ei(i,a);if(d!==null){var m=rr();hs(d,i,a,m)}Mg(i,a)}},eh=function(){return yt},th=function(i,a){var d=yt;try{return yt=i,a()}finally{yt=d}},mt=function(i,a,d){switch(a){case"input":if(zn(i,d),a=d.name,d.type==="radio"&&a!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==i&&m.form===i.form){var w=xh(m);if(!w)throw Error(t(90));st(m),zn(m,w)}}}break;case"textarea":Ts(i,d);break;case"select":a=d.value,a!=null&&Sr(i,!!d.multiple,a,!1)}},St=Ag,lt=Ca;var lR={usingClientEntryPoint:!1,Events:[xu,kl,xh,me,Fe,Ag]},ku={findFiberByHostInstance:xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cR={bundleType:ku.bundleType,version:ku.version,rendererPackageName:ku.rendererPackageName,rendererConfig:ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=eu(i),i===null?null:i.stateNode},findFiberByHostInstance:ku.findFiberByHostInstance||oR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{ha=rf.inject(cR),Tr=rf}catch{}}return gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lR,gr.createPortal=function(i,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vg(a))throw Error(t(200));return iR(i,a,null,d)},gr.createRoot=function(i,a){if(!Vg(i))throw Error(t(299));var d=!1,m="",w=V_;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),a=Lg(i,1,!1,null,null,d,!1,m,w),i[vi]=a.current,gu(i.nodeType===8?i.parentNode:i),new Fg(a)},gr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=eu(a),i=i===null?null:i.stateNode,i},gr.flushSync=function(i){return Ca(i)},gr.hydrate=function(i,a,d){if(!tf(a))throw Error(t(200));return nf(null,i,a,!0,d)},gr.hydrateRoot=function(i,a,d){if(!Vg(i))throw Error(t(405));var m=d!=null&&d.hydratedSources||null,w=!1,T="",F=V_;if(d!=null&&(d.unstable_strictMode===!0&&(w=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(F=d.onRecoverableError)),a=M_(a,null,i,1,d??null,w,!1,T,F),i[vi]=a.current,gu(i),m)for(i=0;i<m.length;i++)d=m[i],w=d._getVersion,w=w(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,w]:a.mutableSourceEagerHydrationData.push(d,w);return new ef(a)},gr.render=function(i,a,d){if(!tf(a))throw Error(t(200));return nf(null,i,a,!1,d)},gr.unmountComponentAtNode=function(i){if(!tf(i))throw Error(t(40));return i._reactRootContainer?(Ca(function(){nf(null,null,i,!1,function(){i._reactRootContainer=null,i[vi]=null})}),!0):!1},gr.unstable_batchedUpdates=Ag,gr.unstable_renderSubtreeIntoContainer=function(i,a,d,m){if(!tf(d))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return nf(i,a,d,!1,m)},gr.version="18.3.1-next-f1338f8080-20240426",gr}var Z_;function tS(){if(Z_)return Wg.exports;Z_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wg.exports=jR(),Wg.exports}var sl=tS();const bp=Z1(sl);function $e(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function AR(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function nS(...n){return e=>n.forEach(t=>AR(t,e))}function Tt(...n){return E.useCallback(nS(...n),n)}function Ui(n,e=[]){let t=[];function r(o,c){const u=E.createContext(c),h=t.length;t=[...t,c];function p(y){const{scope:v,children:b,...S}=y,x=(v==null?void 0:v[n][h])||u,_=E.useMemo(()=>S,Object.values(S));return l.jsx(x.Provider,{value:_,children:b})}function g(y,v){const b=(v==null?void 0:v[n][h])||u,S=E.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${o}\``)}return p.displayName=o+"Provider",[p,g]}const s=()=>{const o=t.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[n])||o;return E.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,PR(s,...e)]}function PR(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const c=r.reduce((u,{useScope:h,scopeName:p})=>{const y=h(o)[`__scope${p}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var Wa=E.forwardRef((n,e)=>{const{children:t,...r}=n,s=E.Children.toArray(t),o=s.find(RR);if(o){const c=o.props.children,u=s.map(h=>h===o?E.Children.count(c)>1?E.Children.only(null):E.isValidElement(c)?c.props.children:null:h);return l.jsx(Sy,{...r,ref:e,children:E.isValidElement(c)?E.cloneElement(c,void 0,u):null})}return l.jsx(Sy,{...r,ref:e,children:t})});Wa.displayName="Slot";var Sy=E.forwardRef((n,e)=>{const{children:t,...r}=n;if(E.isValidElement(t)){const s=OR(t);return E.cloneElement(t,{...kR(r,t.props),ref:e?nS(e,s):s})}return E.Children.count(t)>1?E.Children.only(null):null});Sy.displayName="SlotClone";var rS=({children:n})=>l.jsx(l.Fragment,{children:n});function RR(n){return E.isValidElement(n)&&n.type===rS}function kR(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...u)=>{o(...u),s(...u)}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function OR(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Wv(n){const e=n+"CollectionProvider",[t,r]=Ui(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=b=>{const{scope:S,children:x}=b,_=_e.useRef(null),A=_e.useRef(new Map).current;return l.jsx(s,{scope:S,itemMap:A,collectionRef:_,children:x})};c.displayName=e;const u=n+"CollectionSlot",h=_e.forwardRef((b,S)=>{const{scope:x,children:_}=b,A=o(u,x),I=Tt(S,A.collectionRef);return l.jsx(Wa,{ref:I,children:_})});h.displayName=u;const p=n+"CollectionItemSlot",g="data-radix-collection-item",y=_e.forwardRef((b,S)=>{const{scope:x,children:_,...A}=b,I=_e.useRef(null),C=Tt(S,I),M=o(p,x);return _e.useEffect(()=>(M.itemMap.set(I,{ref:I,...A}),()=>void M.itemMap.delete(I))),l.jsx(Wa,{[g]:"",ref:C,children:_})});y.displayName=p;function v(b){const S=o(n+"CollectionConsumer",b);return _e.useCallback(()=>{const _=S.collectionRef.current;if(!_)return[];const A=Array.from(_.querySelectorAll(`[${g}]`));return Array.from(S.itemMap.values()).sort((M,U)=>A.indexOf(M.ref.current)-A.indexOf(U.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:c,Slot:h,ItemSlot:y},v,r]}var DR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ge=DR.reduce((n,e)=>{const t=E.forwardRef((r,s)=>{const{asChild:o,...c}=r,u=o?Wa:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(u,{...c,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function Sp(n,e){n&&sl.flushSync(()=>n.dispatchEvent(e))}function Tn(n){const e=E.useRef(n);return E.useEffect(()=>{e.current=n}),E.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function Hv(n,e=globalThis==null?void 0:globalThis.document){const t=Tn(n);E.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var LR="DismissableLayer",Ny="dismissableLayer.update",MR="dismissableLayer.pointerDownOutside",FR="dismissableLayer.focusOutside",eE,sS=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),iS=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:c,onDismiss:u,...h}=n,p=E.useContext(sS),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=Tt(e,P=>y(P)),x=Array.from(p.layers),[_]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),A=x.indexOf(_),I=g?x.indexOf(g):-1,C=p.layersWithOutsidePointerEventsDisabled.size>0,M=I>=A,U=UR(P=>{const k=P.target,D=[...p.branches].some(O=>O.contains(k));!M||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},v),$=zR(P=>{const k=P.target;[...p.branches].some(O=>O.contains(k))||(o==null||o(P),c==null||c(P),P.defaultPrevented||u==null||u())},v);return Hv(P=>{I===p.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},v),E.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(eE=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),tE(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=eE)}},[g,v,t,p]),E.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),tE())},[g,p]),E.useEffect(()=>{const P=()=>b({});return document.addEventListener(Ny,P),()=>document.removeEventListener(Ny,P)},[]),l.jsx(Ge.div,{...h,ref:S,style:{pointerEvents:C?M?"auto":"none":void 0,...n.style},onFocusCapture:$e(n.onFocusCapture,$.onFocusCapture),onBlurCapture:$e(n.onBlurCapture,$.onBlurCapture),onPointerDownCapture:$e(n.onPointerDownCapture,U.onPointerDownCapture)})});iS.displayName=LR;var VR="DismissableLayerBranch",oS=E.forwardRef((n,e)=>{const t=E.useContext(sS),r=E.useRef(null),s=Tt(e,r);return E.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),l.jsx(Ge.div,{...n,ref:s})});oS.displayName=VR;function UR(n,e=globalThis==null?void 0:globalThis.document){const t=Tn(n),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const o=u=>{if(u.target&&!r.current){let h=function(){aS(MR,t,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function zR(n,e=globalThis==null?void 0:globalThis.document){const t=Tn(n),r=E.useRef(!1);return E.useEffect(()=>{const s=o=>{o.target&&!r.current&&aS(FR,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function tE(){const n=new CustomEvent(Ny);document.dispatchEvent(n)}function aS(n,e,t,{discrete:r}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Sp(s,o):s.dispatchEvent(o)}var $R=iS,BR=oS,Xt=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},qR="Portal",lS=E.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,o]=E.useState(!1);Xt(()=>o(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?bp.createPortal(l.jsx(Ge.div,{...r,ref:e}),c):null});lS.displayName=qR;function WR(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var Kv=n=>{const{present:e,children:t}=n,r=HR(e),s=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),o=Tt(r.ref,KR(s));return typeof t=="function"||r.isPresent?E.cloneElement(s,{ref:o}):null};Kv.displayName="Presence";function HR(n){const[e,t]=E.useState(),r=E.useRef({}),s=E.useRef(n),o=E.useRef("none"),c=n?"mounted":"unmounted",[u,h]=WR(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const p=of(r.current);o.current=u==="mounted"?p:"none"},[u]),Xt(()=>{const p=r.current,g=s.current;if(g!==n){const v=o.current,b=of(p);n?h("MOUNT"):b==="none"||(p==null?void 0:p.display)==="none"?h("UNMOUNT"):h(g&&v!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Xt(()=>{if(e){const p=y=>{const b=of(r.current).includes(y.animationName);y.target===e&&b&&sl.flushSync(()=>h("ANIMATION_END"))},g=y=>{y.target===e&&(o.current=of(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(p=>{p&&(r.current=getComputedStyle(p)),t(p)},[])}}function of(n){return(n==null?void 0:n.animationName)||"none"}function KR(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Ha({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=GR({defaultProp:e,onChange:t}),o=n!==void 0,c=o?n:r,u=Tn(t),h=E.useCallback(p=>{if(o){const y=typeof p=="function"?p(n):p;y!==n&&u(y)}else s(p)},[o,n,s,u]);return[c,h]}function GR({defaultProp:n,onChange:e}){const t=E.useState(n),[r]=t,s=E.useRef(r),o=Tn(e);return E.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),t}var QR="VisuallyHidden",Cd=E.forwardRef((n,e)=>l.jsx(Ge.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Cd.displayName=QR;var YR=Cd,Gv="ToastProvider",[Qv,XR,JR]=Wv("Toast"),[cS,JB]=Ui("Toast",[JR]),[ZR,Np]=cS(Gv),uS=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:c}=n,[u,h]=E.useState(null),[p,g]=E.useState(0),y=E.useRef(!1),v=E.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Gv}\`. Expected non-empty \`string\`.`),l.jsx(Qv.Provider,{scope:e,children:l.jsx(ZR,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:p,viewport:u,onViewportChange:h,onToastAdd:E.useCallback(()=>g(b=>b+1),[]),onToastRemove:E.useCallback(()=>g(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:v,children:c})})};uS.displayName=Gv;var dS="ToastViewport",ek=["F8"],Ty="toast.viewportPause",Cy="toast.viewportResume",hS=E.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=ek,label:s="Notifications ({hotkey})",...o}=n,c=Np(dS,t),u=XR(t),h=E.useRef(null),p=E.useRef(null),g=E.useRef(null),y=E.useRef(null),v=Tt(e,y,c.onViewportChange),b=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=c.toastCount>0;E.useEffect(()=>{const _=A=>{var C;r.every(M=>A[M]||A.code===M)&&((C=y.current)==null||C.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),E.useEffect(()=>{const _=h.current,A=y.current;if(S&&_&&A){const I=()=>{if(!c.isClosePausedRef.current){const $=new CustomEvent(Ty);A.dispatchEvent($),c.isClosePausedRef.current=!0}},C=()=>{if(c.isClosePausedRef.current){const $=new CustomEvent(Cy);A.dispatchEvent($),c.isClosePausedRef.current=!1}},M=$=>{!_.contains($.relatedTarget)&&C()},U=()=>{_.contains(document.activeElement)||C()};return _.addEventListener("focusin",I),_.addEventListener("focusout",M),_.addEventListener("pointermove",I),_.addEventListener("pointerleave",U),window.addEventListener("blur",I),window.addEventListener("focus",C),()=>{_.removeEventListener("focusin",I),_.removeEventListener("focusout",M),_.removeEventListener("pointermove",I),_.removeEventListener("pointerleave",U),window.removeEventListener("blur",I),window.removeEventListener("focus",C)}}},[S,c.isClosePausedRef]);const x=E.useCallback(({tabbingDirection:_})=>{const I=u().map(C=>{const M=C.ref.current,U=[M,...fk(M)];return _==="forwards"?U:U.reverse()});return(_==="forwards"?I.reverse():I).flat()},[u]);return E.useEffect(()=>{const _=y.current;if(_){const A=I=>{var U,$,P;const C=I.altKey||I.ctrlKey||I.metaKey;if(I.key==="Tab"&&!C){const k=document.activeElement,D=I.shiftKey;if(I.target===_&&D){(U=p.current)==null||U.focus();return}const V=x({tabbingDirection:D?"backwards":"forwards"}),R=V.findIndex(W=>W===k);Gg(V.slice(R+1))?I.preventDefault():D?($=p.current)==null||$.focus():(P=g.current)==null||P.focus()}};return _.addEventListener("keydown",A),()=>_.removeEventListener("keydown",A)}},[u,x]),l.jsxs(BR,{ref:h,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&l.jsx(Iy,{ref:p,onFocusFromOutsideViewport:()=>{const _=x({tabbingDirection:"forwards"});Gg(_)}}),l.jsx(Qv.Slot,{scope:t,children:l.jsx(Ge.ol,{tabIndex:-1,...o,ref:v})}),S&&l.jsx(Iy,{ref:g,onFocusFromOutsideViewport:()=>{const _=x({tabbingDirection:"backwards"});Gg(_)}})]})});hS.displayName=dS;var fS="ToastFocusProxy",Iy=E.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,o=Np(fS,t);return l.jsx(Cd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:c=>{var p;const u=c.relatedTarget;!((p=o.viewport)!=null&&p.contains(u))&&r()}})});Iy.displayName=fS;var Tp="Toast",tk="toast.swipeStart",nk="toast.swipeMove",rk="toast.swipeCancel",sk="toast.swipeEnd",pS=E.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:o,...c}=n,[u=!0,h]=Ha({prop:r,defaultProp:s,onChange:o});return l.jsx(Kv,{present:t||u,children:l.jsx(ak,{open:u,...c,ref:e,onClose:()=>h(!1),onPause:Tn(n.onPause),onResume:Tn(n.onResume),onSwipeStart:$e(n.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$e(n.onSwipeMove,p=>{const{x:g,y}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:$e(n.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$e(n.onSwipeEnd,p=>{const{x:g,y}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),h(!1)})})})});pS.displayName=Tp;var[ik,ok]=cS(Tp,{onClose(){}}),ak=E.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:o,onClose:c,onEscapeKeyDown:u,onPause:h,onResume:p,onSwipeStart:g,onSwipeMove:y,onSwipeCancel:v,onSwipeEnd:b,...S}=n,x=Np(Tp,t),[_,A]=E.useState(null),I=Tt(e,W=>A(W)),C=E.useRef(null),M=E.useRef(null),U=s||x.duration,$=E.useRef(0),P=E.useRef(U),k=E.useRef(0),{onToastAdd:D,onToastRemove:O}=x,L=Tn(()=>{var K;(_==null?void 0:_.contains(document.activeElement))&&((K=x.viewport)==null||K.focus()),c()}),V=E.useCallback(W=>{!W||W===1/0||(window.clearTimeout(k.current),$.current=new Date().getTime(),k.current=window.setTimeout(L,W))},[L]);E.useEffect(()=>{const W=x.viewport;if(W){const K=()=>{V(P.current),p==null||p()},X=()=>{const ie=new Date().getTime()-$.current;P.current=P.current-ie,window.clearTimeout(k.current),h==null||h()};return W.addEventListener(Ty,X),W.addEventListener(Cy,K),()=>{W.removeEventListener(Ty,X),W.removeEventListener(Cy,K)}}},[x.viewport,U,h,p,V]),E.useEffect(()=>{o&&!x.isClosePausedRef.current&&V(U)},[o,U,x.isClosePausedRef,V]),E.useEffect(()=>(D(),()=>O()),[D,O]);const R=E.useMemo(()=>_?_S(_):null,[_]);return x.viewport?l.jsxs(l.Fragment,{children:[R&&l.jsx(lk,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),l.jsx(ik,{scope:t,onClose:L,children:sl.createPortal(l.jsx(Qv.ItemSlot,{scope:t,children:l.jsx($R,{asChild:!0,onEscapeKeyDown:$e(u,()=>{x.isFocusedToastEscapeKeyDownRef.current||L(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(Ge.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":x.swipeDirection,...S,ref:I,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:$e(n.onKeyDown,W=>{W.key==="Escape"&&(u==null||u(W.nativeEvent),W.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:$e(n.onPointerDown,W=>{W.button===0&&(C.current={x:W.clientX,y:W.clientY})}),onPointerMove:$e(n.onPointerMove,W=>{if(!C.current)return;const K=W.clientX-C.current.x,X=W.clientY-C.current.y,ie=!!M.current,G=["left","right"].includes(x.swipeDirection),oe=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,le=G?oe(0,K):0,B=G?0:oe(0,X),J=W.pointerType==="touch"?10:2,he={x:le,y:B},Ne={originalEvent:W,delta:he};ie?(M.current=he,af(nk,y,Ne,{discrete:!1})):nE(he,x.swipeDirection,J)?(M.current=he,af(tk,g,Ne,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(K)>J||Math.abs(X)>J)&&(C.current=null)}),onPointerUp:$e(n.onPointerUp,W=>{const K=M.current,X=W.target;if(X.hasPointerCapture(W.pointerId)&&X.releasePointerCapture(W.pointerId),M.current=null,C.current=null,K){const ie=W.currentTarget,G={originalEvent:W,delta:K};nE(K,x.swipeDirection,x.swipeThreshold)?af(sk,b,G,{discrete:!0}):af(rk,v,G,{discrete:!0}),ie.addEventListener("click",oe=>oe.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),lk=n=>{const{__scopeToast:e,children:t,...r}=n,s=Np(Tp,e),[o,c]=E.useState(!1),[u,h]=E.useState(!1);return dk(()=>c(!0)),E.useEffect(()=>{const p=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(p)},[]),u?null:l.jsx(lS,{asChild:!0,children:l.jsx(Cd,{...r,children:o&&l.jsxs(l.Fragment,{children:[s.label," ",t]})})})},ck="ToastTitle",mS=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(Ge.div,{...r,ref:e})});mS.displayName=ck;var uk="ToastDescription",gS=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(Ge.div,{...r,ref:e})});gS.displayName=uk;var yS="ToastAction",vS=E.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?l.jsx(wS,{altText:t,asChild:!0,children:l.jsx(Yv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${yS}\`. Expected non-empty \`string\`.`),null)});vS.displayName=yS;var xS="ToastClose",Yv=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=ok(xS,t);return l.jsx(wS,{asChild:!0,children:l.jsx(Ge.button,{type:"button",...r,ref:e,onClick:$e(n.onClick,s.onClose)})})});Yv.displayName=xS;var wS=E.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return l.jsx(Ge.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function _S(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),hk(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(..._S(r))}}),e}function af(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Sp(s,o):s.dispatchEvent(o)}var nE=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),o=r>s;return e==="left"||e==="right"?o&&r>t:!o&&s>t};function dk(n=()=>{}){const e=Tn(n);Xt(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function hk(n){return n.nodeType===n.ELEMENT_NODE}function fk(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Gg(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var pk=uS,ES=hS,bS=pS,SS=mS,NS=gS,TS=vS,CS=Yv;function IS(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=IS(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function jS(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=IS(n))&&(r&&(r+=" "),r+=e);return r}const rE=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,sE=jS,Id=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return sE(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:o}=e,c=Object.keys(s).map(p=>{const g=t==null?void 0:t[p],y=o==null?void 0:o[p];if(g===null)return null;const v=rE(g)||rE(y);return s[p][v]}),u=t&&Object.entries(t).reduce((p,g)=>{let[y,v]=g;return v===void 0||(p[y]=v),p},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,g)=>{let{class:y,className:v,...b}=g;return Object.entries(b).every(S=>{let[x,_]=S;return Array.isArray(_)?_.includes({...o,...u}[x]):{...o,...u}[x]===_})?[...p,y,v]:p},[]);return sE(n,c,h,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=E.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:c,...u},h)=>E.createElement("svg",{ref:h,...gk,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:AS("lucide",s),...u},[...c.map(([p,g])=>E.createElement(p,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=(n,e)=>{const t=E.forwardRef(({className:r,...s},o)=>E.createElement(yk,{ref:o,iconNode:e,className:AS(`lucide-${mk(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=Qe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=Qe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=Qe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=Qe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=Qe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=Qe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=Qe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=Qe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=Qe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=Qe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=Qe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Qe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=Qe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=Qe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=Qe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=Qe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=Qe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=Qe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=Qe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=Qe("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=Qe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=Qe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=Qe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=Qe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=Qe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=Qe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=Qe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=Qe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=Qe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=Qe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=Qe("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=Qe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=Qe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=Qe("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=Qe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=Qe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=Qe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=Qe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=Qe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=Qe("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=Qe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=Qe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=Qe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=Qe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=Qe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=Qe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=Qe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=Qe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Qe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=Qe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=Qe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Qe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Jv="-",Mk=n=>{const e=Vk(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const u=c.split(Jv);return u[0]===""&&u.length!==1&&u.shift(),LS(u,e)||Fk(c)},getConflictingClassGroupIds:(c,u)=>{const h=t[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},LS=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?LS(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(Jv);return(c=e.validators.find(({validator:u})=>u(o)))==null?void 0:c.classGroupId},aE=/^\[(.+)\]$/,Fk=n=>{if(aE.test(n)){const e=aE.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Vk=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return zk(Object.entries(n.classGroups),t).forEach(([o,c])=>{Ry(c,r,o,e)}),r},Ry=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:lE(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(Uk(s)){Ry(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,c])=>{Ry(c,lE(e,o),t,r)})})},lE=(n,e)=>{let t=n;return e.split(Jv).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},Uk=n=>n.isThemeGetter,zk=(n,e)=>e?n.map(([t,r])=>{const s=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([c,u])=>[e+c,u])):o);return[t,s]}):n,$k=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(o,c)=>{t.set(o,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let c=t.get(o);if(c!==void 0)return c;if((c=r.get(o))!==void 0)return s(o,c),c},set(o,c){t.has(o)?t.set(o,c):s(o,c)}}},MS="!",Bk=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],o=e.length,c=u=>{const h=[];let p=0,g=0,y;for(let _=0;_<u.length;_++){let A=u[_];if(p===0){if(A===s&&(r||u.slice(_,_+o)===e)){h.push(u.slice(g,_)),g=_+o;continue}if(A==="/"){y=_;continue}}A==="["?p++:A==="]"&&p--}const v=h.length===0?u:u.substring(g),b=v.startsWith(MS),S=b?v.substring(1):v,x=y&&y>g?y-g:void 0;return{modifiers:h,hasImportantModifier:b,baseClassName:S,maybePostfixModifierPosition:x}};return t?u=>t({className:u,parseClassName:c}):c},qk=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},Wk=n=>({cache:$k(n.cacheSize),parseClassName:Bk(n),...Mk(n)}),Hk=/\s+/,Kk=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,o=[],c=n.trim().split(Hk);let u="";for(let h=c.length-1;h>=0;h-=1){const p=c[h],{modifiers:g,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:b}=t(p);let S=!!b,x=r(S?v.substring(0,b):v);if(!x){if(!S){u=p+(u.length>0?" "+u:u);continue}if(x=r(v),!x){u=p+(u.length>0?" "+u:u);continue}S=!1}const _=qk(g).join(":"),A=y?_+MS:_,I=A+x;if(o.includes(I))continue;o.push(I);const C=s(x,S);for(let M=0;M<C.length;++M){const U=C[M];o.push(A+U)}u=p+(u.length>0?" "+u:u)}return u};function Gk(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=FS(e))&&(r&&(r+=" "),r+=t);return r}const FS=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=FS(n[r]))&&(t&&(t+=" "),t+=e);return t};function Qk(n,...e){let t,r,s,o=c;function c(h){const p=e.reduce((g,y)=>y(g),n());return t=Wk(p),r=t.cache.get,s=t.cache.set,o=u,u(h)}function u(h){const p=r(h);if(p)return p;const g=Kk(h,t);return s(h,g),g}return function(){return o(Gk.apply(null,arguments))}}const Wt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},VS=/^\[(?:([a-z-]+):)?(.+)\]$/i,Yk=/^\d+\/\d+$/,Xk=new Set(["px","full","screen"]),Jk=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Zk=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,e2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,t2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,n2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ti=n=>sc(n)||Xk.has(n)||Yk.test(n),mo=n=>Fc(n,"length",u2),sc=n=>!!n&&!Number.isNaN(Number(n)),Yg=n=>Fc(n,"number",sc),Du=n=>!!n&&Number.isInteger(Number(n)),r2=n=>n.endsWith("%")&&sc(n.slice(0,-1)),ct=n=>VS.test(n),go=n=>Jk.test(n),s2=new Set(["length","size","percentage"]),i2=n=>Fc(n,s2,US),o2=n=>Fc(n,"position",US),a2=new Set(["image","url"]),l2=n=>Fc(n,a2,h2),c2=n=>Fc(n,"",d2),Lu=()=>!0,Fc=(n,e,t)=>{const r=VS.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},u2=n=>Zk.test(n)&&!e2.test(n),US=()=>!1,d2=n=>t2.test(n),h2=n=>n2.test(n),f2=()=>{const n=Wt("colors"),e=Wt("spacing"),t=Wt("blur"),r=Wt("brightness"),s=Wt("borderColor"),o=Wt("borderRadius"),c=Wt("borderSpacing"),u=Wt("borderWidth"),h=Wt("contrast"),p=Wt("grayscale"),g=Wt("hueRotate"),y=Wt("invert"),v=Wt("gap"),b=Wt("gradientColorStops"),S=Wt("gradientColorStopPositions"),x=Wt("inset"),_=Wt("margin"),A=Wt("opacity"),I=Wt("padding"),C=Wt("saturate"),M=Wt("scale"),U=Wt("sepia"),$=Wt("skew"),P=Wt("space"),k=Wt("translate"),D=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",ct,e],V=()=>[ct,e],R=()=>["",Ti,mo],W=()=>["auto",sc,ct],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],oe=()=>["","0",ct],le=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[sc,ct];return{cacheSize:500,separator:":",theme:{colors:[Lu],spacing:[Ti,mo],blur:["none","",go,ct],brightness:B(),borderColor:[n],borderRadius:["none","","full",go,ct],borderSpacing:V(),borderWidth:R(),contrast:B(),grayscale:oe(),hueRotate:B(),invert:oe(),gap:V(),gradientColorStops:[n],gradientColorStopPositions:[r2,mo],inset:L(),margin:L(),opacity:B(),padding:V(),saturate:B(),scale:B(),sepia:oe(),skew:B(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",ct]}],container:["container"],columns:[{columns:[go]}],"break-after":[{"break-after":le()}],"break-before":[{"break-before":le()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),ct]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Du,ct]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ct]}],grow:[{grow:oe()}],shrink:[{shrink:oe()}],order:[{order:["first","last","none",Du,ct]}],"grid-cols":[{"grid-cols":[Lu]}],"col-start-end":[{col:["auto",{span:["full",Du,ct]},ct]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Lu]}],"row-start-end":[{row:["auto",{span:[Du,ct]},ct]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ct]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ct]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ct,e]}],"min-w":[{"min-w":[ct,e,"min","max","fit"]}],"max-w":[{"max-w":[ct,e,"none","full","min","max","fit","prose",{screen:[go]},go]}],h:[{h:[ct,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ct,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ct,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ct,e,"auto","min","max","fit"]}],"font-size":[{text:["base",go,mo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Yg]}],"font-family":[{font:[Lu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ct]}],"line-clamp":[{"line-clamp":["none",sc,Yg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ti,ct]}],"list-image":[{"list-image":["none",ct]}],"list-style-type":[{list:["none","disc","decimal",ct]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ti,mo]}],"underline-offset":[{"underline-offset":["auto",Ti,ct]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ct]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ct]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),o2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",i2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},l2]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:X()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[Ti,ct]}],"outline-w":[{outline:[Ti,mo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[Ti,mo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",go,c2]}],"shadow-color":[{shadow:[Lu]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...ie(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ie()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",go,ct]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[y]}],saturate:[{saturate:[C]}],sepia:[{sepia:[U]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[U]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ct]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",ct]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",ct]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[Du,ct]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[$]}],"skew-y":[{"skew-y":[$]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ct]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ct]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ct]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Ti,mo,Yg]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},p2=Qk(f2);function We(...n){return p2(jS(n))}function m2(n){if(!n||typeof n!="string")return null;const e=n.trim();try{const t=e.match(/https?:\/\/(?:drive\.google\.com)\/(?:file\/d\/([a-zA-Z0-9_-]+)\/view|open\?id=([a-zA-Z0-9_-]+))/i);if(t){const r=t[1]||t[2];if(r)return`https://drive.google.com/uc?export=view&id=${r}`}if(/dropbox\.com\//i.test(e)){if(e.includes("dl=0"))return e.replace("dl=0","dl=1");if(!e.includes("dl="))return e+"?dl=1"}return e}catch{return e}}const g2=pk,zS=E.forwardRef(({className:n,...e},t)=>l.jsx(ES,{ref:t,className:We("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));zS.displayName=ES.displayName;const y2=Id("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),$S=E.forwardRef(({className:n,variant:e,...t},r)=>l.jsx(bS,{ref:r,className:We(y2({variant:e}),n),...t}));$S.displayName=bS.displayName;const v2=E.forwardRef(({className:n,...e},t)=>l.jsx(TS,{ref:t,className:We("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));v2.displayName=TS.displayName;const BS=E.forwardRef(({className:n,...e},t)=>l.jsx(CS,{ref:t,className:We("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:l.jsx(Sc,{className:"h-4 w-4"})}));BS.displayName=CS.displayName;const qS=E.forwardRef(({className:n,...e},t)=>l.jsx(SS,{ref:t,className:We("text-sm font-semibold",n),...e}));qS.displayName=SS.displayName;const WS=E.forwardRef(({className:n,...e},t)=>l.jsx(NS,{ref:t,className:We("text-sm opacity-90",n),...e}));WS.displayName=NS.displayName;function x2(){const{toasts:n}=TR();return l.jsxs(g2,{children:[n.map(function({id:e,title:t,description:r,action:s,...o}){return l.jsxs($S,{...o,children:[l.jsxs("div",{className:"grid gap-1",children:[t&&l.jsx(qS,{children:t}),r&&l.jsx(WS,{children:r})]}),s,l.jsx(BS,{})]},e)}),l.jsx(zS,{})]})}var lf={},cE;function w2(){if(cE)return lf;cE=1;var n=tS();return lf.createRoot=n.createRoot,lf.hydrateRoot=n.hydrateRoot,lf}var _2=w2(),uE=["light","dark"],E2="(prefers-color-scheme: dark)",b2=E.createContext(void 0),S2={setTheme:n=>{},themes:[]},N2=()=>{var n;return(n=E.useContext(b2))!=null?n:S2};E.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:c,attrs:u,nonce:h})=>{let p=o==="system",g=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,y=s?uE.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(S,x=!1,_=!0)=>{let A=c?c[S]:S,I=x?S+"|| ''":`'${A}'`,C="";return s&&_&&!x&&uE.includes(S)&&(C+=`d.style.colorScheme = '${S}';`),t==="class"?x||A?C+=`c.add(${I})`:C+="null":A&&(C+=`d[s](n,${I})`),C},b=n?`!function(){${g}${v(n)}}()`:r?`!function(){try{${g}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${p})){var t='${E2}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}${p?"":"else{"+v(o,!1,!1)+"}"}${y}}catch(e){}}()`:`!function(){try{${g}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}else{${v(o,!1,!1)};}${y}}catch(t){}}();`;return E.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:b}})});var T2=n=>{switch(n){case"success":return j2;case"info":return P2;case"warning":return A2;case"error":return R2;default:return null}},C2=Array(12).fill(0),I2=({visible:n})=>_e.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},_e.createElement("div",{className:"sonner-spinner"},C2.map((e,t)=>_e.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),j2=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),A2=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),P2=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),R2=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),k2=()=>{let[n,e]=_e.useState(document.hidden);return _e.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},ky=1,O2=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...s}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:ky++,c=this.toasts.find(h=>h.id===o),u=e.dismissible===void 0?!0:e.dismissible;return c?this.toasts=this.toasts.map(h=>h.id===o?(this.publish({...h,...e,id:o,title:r}),{...h,...e,id:o,dismissible:u,title:r}):h):this.addToast({title:r,...s,dismissible:u,id:o}),o},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),o=r!==void 0;return s.then(async c=>{if(L2(c)&&!c.ok){o=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:h})}else if(t.success!==void 0){o=!1;let u=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(t.error!==void 0){o=!1;let u=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;o&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||ky++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},kr=new O2,D2=(n,e)=>{let t=(e==null?void 0:e.id)||ky++;return kr.addToast({title:n,...e,id:t}),t},L2=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",M2=D2,F2=()=>kr.toasts;Object.assign(M2,{success:kr.success,info:kr.info,warning:kr.warning,error:kr.error,custom:kr.custom,message:kr.message,promise:kr.promise,dismiss:kr.dismiss,loading:kr.loading},{getHistory:F2});function V2(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}V2(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function cf(n){return n.label!==void 0}var U2=3,z2="32px",$2=4e3,B2=356,q2=14,W2=20,H2=200;function K2(...n){return n.filter(Boolean).join(" ")}var G2=n=>{var e,t,r,s,o,c,u,h,p,g;let{invert:y,toast:v,unstyled:b,interacting:S,setHeights:x,visibleToasts:_,heights:A,index:I,toasts:C,expanded:M,removeToast:U,defaultRichColors:$,closeButton:P,style:k,cancelButtonStyle:D,actionButtonStyle:O,className:L="",descriptionClassName:V="",duration:R,position:W,gap:K,loadingIcon:X,expandByDefault:ie,classNames:G,icons:oe,closeButtonAriaLabel:le="Close toast",pauseWhenPageIsHidden:B,cn:J}=n,[he,Ne]=_e.useState(!1),[Ue,Te]=_e.useState(!1),[we,be]=_e.useState(!1),[qe,Me]=_e.useState(!1),[rt,st]=_e.useState(0),[ge,Ie]=_e.useState(0),pt=_e.useRef(null),sn=_e.useRef(null),zn=I===0,br=I+1<=_,Ot=v.type,dn=v.dismissible!==!1,Sr=v.className||"",Xr=v.descriptionClassName||"",ln=_e.useMemo(()=>A.findIndex(Ye=>Ye.toastId===v.id)||0,[A,v.id]),Ts=_e.useMemo(()=>{var Ye;return(Ye=v.closeButton)!=null?Ye:P},[v.closeButton,P]),Cs=_e.useMemo(()=>v.duration||R||$2,[v.duration,R]),Ut=_e.useRef(0),It=_e.useRef(0),$n=_e.useRef(0),wn=_e.useRef(null),[Nr,Jr]=W.split("-"),Fr=_e.useMemo(()=>A.reduce((Ye,_t,mt)=>mt>=ln?Ye:Ye+_t.height,0),[A,ln]),Is=k2(),ui=v.invert||y,Zr=Ot==="loading";It.current=_e.useMemo(()=>ln*K+Fr,[ln,Fr]),_e.useEffect(()=>{Ne(!0)},[]),_e.useLayoutEffect(()=>{if(!he)return;let Ye=sn.current,_t=Ye.style.height;Ye.style.height="auto";let mt=Ye.getBoundingClientRect().height;Ye.style.height=_t,Ie(mt),x(zt=>zt.find(Kt=>Kt.toastId===v.id)?zt.map(Kt=>Kt.toastId===v.id?{...Kt,height:mt}:Kt):[{toastId:v.id,height:mt,position:v.position},...zt])},[he,v.title,v.description,x,v.id]);let Bn=_e.useCallback(()=>{Te(!0),st(It.current),x(Ye=>Ye.filter(_t=>_t.toastId!==v.id)),setTimeout(()=>{U(v)},H2)},[v,U,x,It]);_e.useEffect(()=>{if(v.promise&&Ot==="loading"||v.duration===1/0||v.type==="loading")return;let Ye,_t=Cs;return M||S||B&&Is?(()=>{if($n.current<Ut.current){let mt=new Date().getTime()-Ut.current;_t=_t-mt}$n.current=new Date().getTime()})():_t!==1/0&&(Ut.current=new Date().getTime(),Ye=setTimeout(()=>{var mt;(mt=v.onAutoClose)==null||mt.call(v,v),Bn()},_t)),()=>clearTimeout(Ye)},[M,S,ie,v,Cs,Bn,v.promise,Ot,B,Is]),_e.useEffect(()=>{let Ye=sn.current;if(Ye){let _t=Ye.getBoundingClientRect().height;return Ie(_t),x(mt=>[{toastId:v.id,height:_t,position:v.position},...mt]),()=>x(mt=>mt.filter(zt=>zt.toastId!==v.id))}},[x,v.id]),_e.useEffect(()=>{v.delete&&Bn()},[Bn,v.delete]);function js(){return oe!=null&&oe.loading?_e.createElement("div",{className:"sonner-loader","data-visible":Ot==="loading"},oe.loading):X?_e.createElement("div",{className:"sonner-loader","data-visible":Ot==="loading"},X):_e.createElement(I2,{visible:Ot==="loading"})}return _e.createElement("li",{"aria-live":v.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:sn,className:J(L,Sr,G==null?void 0:G.toast,(e=v==null?void 0:v.classNames)==null?void 0:e.toast,G==null?void 0:G.default,G==null?void 0:G[Ot],(t=v==null?void 0:v.classNames)==null?void 0:t[Ot]),"data-sonner-toast":"","data-rich-colors":(r=v.richColors)!=null?r:$,"data-styled":!(v.jsx||v.unstyled||b),"data-mounted":he,"data-promise":!!v.promise,"data-removed":Ue,"data-visible":br,"data-y-position":Nr,"data-x-position":Jr,"data-index":I,"data-front":zn,"data-swiping":we,"data-dismissible":dn,"data-type":Ot,"data-invert":ui,"data-swipe-out":qe,"data-expanded":!!(M||ie&&he),style:{"--index":I,"--toasts-before":I,"--z-index":C.length-I,"--offset":`${Ue?rt:It.current}px`,"--initial-height":ie?"auto":`${ge}px`,...k,...v.style},onPointerDown:Ye=>{Zr||!dn||(pt.current=new Date,st(It.current),Ye.target.setPointerCapture(Ye.pointerId),Ye.target.tagName!=="BUTTON"&&(be(!0),wn.current={x:Ye.clientX,y:Ye.clientY}))},onPointerUp:()=>{var Ye,_t,mt,zt;if(qe||!dn)return;wn.current=null;let Kt=Number(((Ye=sn.current)==null?void 0:Ye.style.getPropertyValue("--swipe-amount").replace("px",""))||0),ne=new Date().getTime()-((_t=pt.current)==null?void 0:_t.getTime()),me=Math.abs(Kt)/ne;if(Math.abs(Kt)>=W2||me>.11){st(It.current),(mt=v.onDismiss)==null||mt.call(v,v),Bn(),Me(!0);return}(zt=sn.current)==null||zt.style.setProperty("--swipe-amount","0px"),be(!1)},onPointerMove:Ye=>{var _t;if(!wn.current||!dn)return;let mt=Ye.clientY-wn.current.y,zt=Ye.clientX-wn.current.x,Kt=(Nr==="top"?Math.min:Math.max)(0,mt),ne=Ye.pointerType==="touch"?10:2;Math.abs(Kt)>ne?(_t=sn.current)==null||_t.style.setProperty("--swipe-amount",`${mt}px`):Math.abs(zt)>ne&&(wn.current=null)}},Ts&&!v.jsx?_e.createElement("button",{"aria-label":le,"data-disabled":Zr,"data-close-button":!0,onClick:Zr||!dn?()=>{}:()=>{var Ye;Bn(),(Ye=v.onDismiss)==null||Ye.call(v,v)},className:J(G==null?void 0:G.closeButton,(s=v==null?void 0:v.classNames)==null?void 0:s.closeButton)},_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},_e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,v.jsx||_e.isValidElement(v.title)?v.jsx||v.title:_e.createElement(_e.Fragment,null,Ot||v.icon||v.promise?_e.createElement("div",{"data-icon":"",className:J(G==null?void 0:G.icon,(o=v==null?void 0:v.classNames)==null?void 0:o.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||js():null,v.type!=="loading"?v.icon||(oe==null?void 0:oe[Ot])||T2(Ot):null):null,_e.createElement("div",{"data-content":"",className:J(G==null?void 0:G.content,(c=v==null?void 0:v.classNames)==null?void 0:c.content)},_e.createElement("div",{"data-title":"",className:J(G==null?void 0:G.title,(u=v==null?void 0:v.classNames)==null?void 0:u.title)},v.title),v.description?_e.createElement("div",{"data-description":"",className:J(V,Xr,G==null?void 0:G.description,(h=v==null?void 0:v.classNames)==null?void 0:h.description)},v.description):null),_e.isValidElement(v.cancel)?v.cancel:v.cancel&&cf(v.cancel)?_e.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||D,onClick:Ye=>{var _t,mt;cf(v.cancel)&&dn&&((mt=(_t=v.cancel).onClick)==null||mt.call(_t,Ye),Bn())},className:J(G==null?void 0:G.cancelButton,(p=v==null?void 0:v.classNames)==null?void 0:p.cancelButton)},v.cancel.label):null,_e.isValidElement(v.action)?v.action:v.action&&cf(v.action)?_e.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||O,onClick:Ye=>{var _t,mt;cf(v.action)&&(Ye.defaultPrevented||((mt=(_t=v.action).onClick)==null||mt.call(_t,Ye),Bn()))},className:J(G==null?void 0:G.actionButton,(g=v==null?void 0:v.classNames)==null?void 0:g.actionButton)},v.action.label):null))};function dE(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var Q2=n=>{let{invert:e,position:t="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:c,offset:u,theme:h="light",richColors:p,duration:g,style:y,visibleToasts:v=U2,toastOptions:b,dir:S=dE(),gap:x=q2,loadingIcon:_,icons:A,containerAriaLabel:I="Notifications",pauseWhenPageIsHidden:C,cn:M=K2}=n,[U,$]=_e.useState([]),P=_e.useMemo(()=>Array.from(new Set([t].concat(U.filter(B=>B.position).map(B=>B.position)))),[U,t]),[k,D]=_e.useState([]),[O,L]=_e.useState(!1),[V,R]=_e.useState(!1),[W,K]=_e.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),X=_e.useRef(null),ie=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),G=_e.useRef(null),oe=_e.useRef(!1),le=_e.useCallback(B=>{var J;(J=U.find(he=>he.id===B.id))!=null&&J.delete||kr.dismiss(B.id),$(he=>he.filter(({id:Ne})=>Ne!==B.id))},[U]);return _e.useEffect(()=>kr.subscribe(B=>{if(B.dismiss){$(J=>J.map(he=>he.id===B.id?{...he,delete:!0}:he));return}setTimeout(()=>{bp.flushSync(()=>{$(J=>{let he=J.findIndex(Ne=>Ne.id===B.id);return he!==-1?[...J.slice(0,he),{...J[he],...B},...J.slice(he+1)]:[B,...J]})})})}),[]),_e.useEffect(()=>{if(h!=="system"){K(h);return}h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?K("dark"):K("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:B})=>{K(B?"dark":"light")})},[h]),_e.useEffect(()=>{U.length<=1&&L(!1)},[U]),_e.useEffect(()=>{let B=J=>{var he,Ne;r.every(Ue=>J[Ue]||J.code===Ue)&&(L(!0),(he=X.current)==null||he.focus()),J.code==="Escape"&&(document.activeElement===X.current||(Ne=X.current)!=null&&Ne.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[r]),_e.useEffect(()=>{if(X.current)return()=>{G.current&&(G.current.focus({preventScroll:!0}),G.current=null,oe.current=!1)}},[X.current]),U.length?_e.createElement("section",{"aria-label":`${I} ${ie}`,tabIndex:-1},P.map((B,J)=>{var he;let[Ne,Ue]=B.split("-");return _e.createElement("ol",{key:B,dir:S==="auto"?dE():S,tabIndex:-1,ref:X,className:c,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":Ne,"data-x-position":Ue,style:{"--front-toast-height":`${((he=k[0])==null?void 0:he.height)||0}px`,"--offset":typeof u=="number"?`${u}px`:u||z2,"--width":`${B2}px`,"--gap":`${x}px`,...y},onBlur:Te=>{oe.current&&!Te.currentTarget.contains(Te.relatedTarget)&&(oe.current=!1,G.current&&(G.current.focus({preventScroll:!0}),G.current=null))},onFocus:Te=>{Te.target instanceof HTMLElement&&Te.target.dataset.dismissible==="false"||oe.current||(oe.current=!0,G.current=Te.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{V||L(!1)},onPointerDown:Te=>{Te.target instanceof HTMLElement&&Te.target.dataset.dismissible==="false"||R(!0)},onPointerUp:()=>R(!1)},U.filter(Te=>!Te.position&&J===0||Te.position===B).map((Te,we)=>{var be,qe;return _e.createElement(G2,{key:Te.id,icons:A,index:we,toast:Te,defaultRichColors:p,duration:(be=b==null?void 0:b.duration)!=null?be:g,className:b==null?void 0:b.className,descriptionClassName:b==null?void 0:b.descriptionClassName,invert:e,visibleToasts:v,closeButton:(qe=b==null?void 0:b.closeButton)!=null?qe:o,interacting:V,position:B,style:b==null?void 0:b.style,unstyled:b==null?void 0:b.unstyled,classNames:b==null?void 0:b.classNames,cancelButtonStyle:b==null?void 0:b.cancelButtonStyle,actionButtonStyle:b==null?void 0:b.actionButtonStyle,removeToast:le,toasts:U.filter(Me=>Me.position==Te.position),heights:k.filter(Me=>Me.position==Te.position),setHeights:D,expandByDefault:s,gap:x,loadingIcon:_,expanded:O,pauseWhenPageIsHidden:C,cn:M})}))})):null};const Y2=({...n})=>{const{theme:e="system"}=N2();return l.jsx(Q2,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};function X2(n,e=[]){let t=[];function r(o,c){const u=E.createContext(c),h=t.length;t=[...t,c];const p=y=>{var A;const{scope:v,children:b,...S}=y,x=((A=v==null?void 0:v[n])==null?void 0:A[h])||u,_=E.useMemo(()=>S,Object.values(S));return l.jsx(x.Provider,{value:_,children:b})};p.displayName=o+"Provider";function g(y,v){var x;const b=((x=v==null?void 0:v[n])==null?void 0:x[h])||u,S=E.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[p,g]}const s=()=>{const o=t.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[n])||o;return E.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,J2(s,...e)]}function J2(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const c=r.reduce((u,{useScope:h,scopeName:p})=>{const y=h(o)[`__scope${p}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var Z2="DismissableLayer",Oy="dismissableLayer.update",eO="dismissableLayer.pointerDownOutside",tO="dismissableLayer.focusOutside",hE,HS=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zv=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:c,onDismiss:u,...h}=n,p=E.useContext(HS),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=Tt(e,P=>y(P)),x=Array.from(p.layers),[_]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),A=x.indexOf(_),I=g?x.indexOf(g):-1,C=p.layersWithOutsidePointerEventsDisabled.size>0,M=I>=A,U=sO(P=>{const k=P.target,D=[...p.branches].some(O=>O.contains(k));!M||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},v),$=iO(P=>{const k=P.target;[...p.branches].some(O=>O.contains(k))||(o==null||o(P),c==null||c(P),P.defaultPrevented||u==null||u())},v);return Hv(P=>{I===p.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},v),E.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(hE=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),fE(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=hE)}},[g,v,t,p]),E.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),fE())},[g,p]),E.useEffect(()=>{const P=()=>b({});return document.addEventListener(Oy,P),()=>document.removeEventListener(Oy,P)},[]),l.jsx(Ge.div,{...h,ref:S,style:{pointerEvents:C?M?"auto":"none":void 0,...n.style},onFocusCapture:$e(n.onFocusCapture,$.onFocusCapture),onBlurCapture:$e(n.onBlurCapture,$.onBlurCapture),onPointerDownCapture:$e(n.onPointerDownCapture,U.onPointerDownCapture)})});Zv.displayName=Z2;var nO="DismissableLayerBranch",rO=E.forwardRef((n,e)=>{const t=E.useContext(HS),r=E.useRef(null),s=Tt(e,r);return E.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),l.jsx(Ge.div,{...n,ref:s})});rO.displayName=nO;function sO(n,e=globalThis==null?void 0:globalThis.document){const t=Tn(n),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const o=u=>{if(u.target&&!r.current){let h=function(){KS(eO,t,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function iO(n,e=globalThis==null?void 0:globalThis.document){const t=Tn(n),r=E.useRef(!1);return E.useEffect(()=>{const s=o=>{o.target&&!r.current&&KS(tO,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function fE(){const n=new CustomEvent(Oy);document.dispatchEvent(n)}function KS(n,e,t,{discrete:r}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Sp(s,o):s.dispatchEvent(o)}var oO=eS.useId||(()=>{}),aO=0;function Do(n){const[e,t]=E.useState(oO());return Xt(()=>{t(r=>r??String(aO++))},[n]),e?`radix-${e}`:""}const lO=["top","right","bottom","left"],Wo=Math.min,Or=Math.max,Hf=Math.round,uf=Math.floor,Ho=n=>({x:n,y:n}),cO={left:"right",right:"left",bottom:"top",top:"bottom"},uO={start:"end",end:"start"};function Dy(n,e,t){return Or(n,Wo(e,t))}function Oi(n,e){return typeof n=="function"?n(e):n}function Di(n){return n.split("-")[0]}function Vc(n){return n.split("-")[1]}function ex(n){return n==="x"?"y":"x"}function tx(n){return n==="y"?"height":"width"}function Ko(n){return["top","bottom"].includes(Di(n))?"y":"x"}function nx(n){return ex(Ko(n))}function dO(n,e,t){t===void 0&&(t=!1);const r=Vc(n),s=nx(n),o=tx(s);let c=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(c=Kf(c)),[c,Kf(c)]}function hO(n){const e=Kf(n);return[Ly(n),e,Ly(e)]}function Ly(n){return n.replace(/start|end/g,e=>uO[e])}function fO(n,e,t){const r=["left","right"],s=["right","left"],o=["top","bottom"],c=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?o:c;default:return[]}}function pO(n,e,t,r){const s=Vc(n);let o=fO(Di(n),t==="start",r);return s&&(o=o.map(c=>c+"-"+s),e&&(o=o.concat(o.map(Ly)))),o}function Kf(n){return n.replace(/left|right|bottom|top/g,e=>cO[e])}function mO(n){return{top:0,right:0,bottom:0,left:0,...n}}function GS(n){return typeof n!="number"?mO(n):{top:n,right:n,bottom:n,left:n}}function Gf(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function pE(n,e,t){let{reference:r,floating:s}=n;const o=Ko(e),c=nx(e),u=tx(c),h=Di(e),p=o==="y",g=r.x+r.width/2-s.width/2,y=r.y+r.height/2-s.height/2,v=r[u]/2-s[u]/2;let b;switch(h){case"top":b={x:g,y:r.y-s.height};break;case"bottom":b={x:g,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y};break;case"left":b={x:r.x-s.width,y};break;default:b={x:r.x,y:r.y}}switch(Vc(e)){case"start":b[c]-=v*(t&&p?-1:1);break;case"end":b[c]+=v*(t&&p?-1:1);break}return b}const gO=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:c}=t,u=o.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let p=await c.getElementRects({reference:n,floating:e,strategy:s}),{x:g,y}=pE(p,r,h),v=r,b={},S=0;for(let x=0;x<u.length;x++){const{name:_,fn:A}=u[x],{x:I,y:C,data:M,reset:U}=await A({x:g,y,initialPlacement:r,placement:v,strategy:s,middlewareData:b,rects:p,platform:c,elements:{reference:n,floating:e}});g=I??g,y=C??y,b={...b,[_]:{...b[_],...M}},U&&S<=50&&(S++,typeof U=="object"&&(U.placement&&(v=U.placement),U.rects&&(p=U.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:s}):U.rects),{x:g,y}=pE(p,v,h)),x=-1)}return{x:g,y,placement:v,strategy:s,middlewareData:b}};async function id(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:c,elements:u,strategy:h}=n,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:y="floating",altBoundary:v=!1,padding:b=0}=Oi(e,n),S=GS(b),_=u[v?y==="floating"?"reference":"floating":y],A=Gf(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(_)))==null||t?_:_.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:p,rootBoundary:g,strategy:h})),I=y==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),M=await(o.isElement==null?void 0:o.isElement(C))?await(o.getScale==null?void 0:o.getScale(C))||{x:1,y:1}:{x:1,y:1},U=Gf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:I,offsetParent:C,strategy:h}):I);return{top:(A.top-U.top+S.top)/M.y,bottom:(U.bottom-A.bottom+S.bottom)/M.y,left:(A.left-U.left+S.left)/M.x,right:(U.right-A.right+S.right)/M.x}}const yO=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:o,platform:c,elements:u,middlewareData:h}=e,{element:p,padding:g=0}=Oi(n,e)||{};if(p==null)return{};const y=GS(g),v={x:t,y:r},b=nx(s),S=tx(b),x=await c.getDimensions(p),_=b==="y",A=_?"top":"left",I=_?"bottom":"right",C=_?"clientHeight":"clientWidth",M=o.reference[S]+o.reference[b]-v[b]-o.floating[S],U=v[b]-o.reference[b],$=await(c.getOffsetParent==null?void 0:c.getOffsetParent(p));let P=$?$[C]:0;(!P||!await(c.isElement==null?void 0:c.isElement($)))&&(P=u.floating[C]||o.floating[S]);const k=M/2-U/2,D=P/2-x[S]/2-1,O=Wo(y[A],D),L=Wo(y[I],D),V=O,R=P-x[S]-L,W=P/2-x[S]/2+k,K=Dy(V,W,R),X=!h.arrow&&Vc(s)!=null&&W!==K&&o.reference[S]/2-(W<V?O:L)-x[S]/2<0,ie=X?W<V?W-V:W-R:0;return{[b]:v[b]+ie,data:{[b]:K,centerOffset:W-K-ie,...X&&{alignmentOffset:ie}},reset:X}}}),vO=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:o,rects:c,initialPlacement:u,platform:h,elements:p}=e,{mainAxis:g=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:x=!0,..._}=Oi(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const A=Di(s),I=Ko(u),C=Di(u)===u,M=await(h.isRTL==null?void 0:h.isRTL(p.floating)),U=v||(C||!x?[Kf(u)]:hO(u)),$=S!=="none";!v&&$&&U.push(...pO(u,x,S,M));const P=[u,...U],k=await id(e,_),D=[];let O=((r=o.flip)==null?void 0:r.overflows)||[];if(g&&D.push(k[A]),y){const W=dO(s,c,M);D.push(k[W[0]],k[W[1]])}if(O=[...O,{placement:s,overflows:D}],!D.every(W=>W<=0)){var L,V;const W=(((L=o.flip)==null?void 0:L.index)||0)+1,K=P[W];if(K)return{data:{index:W,overflows:O},reset:{placement:K}};let X=(V=O.filter(ie=>ie.overflows[0]<=0).sort((ie,G)=>ie.overflows[1]-G.overflows[1])[0])==null?void 0:V.placement;if(!X)switch(b){case"bestFit":{var R;const ie=(R=O.filter(G=>{if($){const oe=Ko(G.placement);return oe===I||oe==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(oe=>oe>0).reduce((oe,le)=>oe+le,0)]).sort((G,oe)=>G[1]-oe[1])[0])==null?void 0:R[0];ie&&(X=ie);break}case"initialPlacement":X=u;break}if(s!==X)return{reset:{placement:X}}}return{}}}};function mE(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function gE(n){return lO.some(e=>n[e]>=0)}const xO=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Oi(n,e);switch(r){case"referenceHidden":{const o=await id(e,{...s,elementContext:"reference"}),c=mE(o,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:gE(c)}}}case"escaped":{const o=await id(e,{...s,altBoundary:!0}),c=mE(o,t.floating);return{data:{escapedOffsets:c,escaped:gE(c)}}}default:return{}}}}};async function wO(n,e){const{placement:t,platform:r,elements:s}=n,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=Di(t),u=Vc(t),h=Ko(t)==="y",p=["left","top"].includes(c)?-1:1,g=o&&h?-1:1,y=Oi(e,n);let{mainAxis:v,crossAxis:b,alignmentAxis:S}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return u&&typeof S=="number"&&(b=u==="end"?S*-1:S),h?{x:b*g,y:v*p}:{x:v*p,y:b*g}}const _O=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:o,placement:c,middlewareData:u}=e,h=await wO(e,n);return c===((t=u.offset)==null?void 0:t.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+h.x,y:o+h.y,data:{...h,placement:c}}}}},EO=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:c=!1,limiter:u={fn:_=>{let{x:A,y:I}=_;return{x:A,y:I}}},...h}=Oi(n,e),p={x:t,y:r},g=await id(e,h),y=Ko(Di(s)),v=ex(y);let b=p[v],S=p[y];if(o){const _=v==="y"?"top":"left",A=v==="y"?"bottom":"right",I=b+g[_],C=b-g[A];b=Dy(I,b,C)}if(c){const _=y==="y"?"top":"left",A=y==="y"?"bottom":"right",I=S+g[_],C=S-g[A];S=Dy(I,S,C)}const x=u.fn({...e,[v]:b,[y]:S});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[v]:o,[y]:c}}}}}},bO=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:o,middlewareData:c}=e,{offset:u=0,mainAxis:h=!0,crossAxis:p=!0}=Oi(n,e),g={x:t,y:r},y=Ko(s),v=ex(y);let b=g[v],S=g[y];const x=Oi(u,e),_=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(h){const C=v==="y"?"height":"width",M=o.reference[v]-o.floating[C]+_.mainAxis,U=o.reference[v]+o.reference[C]-_.mainAxis;b<M?b=M:b>U&&(b=U)}if(p){var A,I;const C=v==="y"?"width":"height",M=["top","left"].includes(Di(s)),U=o.reference[y]-o.floating[C]+(M&&((A=c.offset)==null?void 0:A[y])||0)+(M?0:_.crossAxis),$=o.reference[y]+o.reference[C]+(M?0:((I=c.offset)==null?void 0:I[y])||0)-(M?_.crossAxis:0);S<U?S=U:S>$&&(S=$)}return{[v]:b,[y]:S}}}},SO=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:o,platform:c,elements:u}=e,{apply:h=()=>{},...p}=Oi(n,e),g=await id(e,p),y=Di(s),v=Vc(s),b=Ko(s)==="y",{width:S,height:x}=o.floating;let _,A;y==="top"||y==="bottom"?(_=y,A=v===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(A=y,_=v==="end"?"top":"bottom");const I=x-g.top-g.bottom,C=S-g.left-g.right,M=Wo(x-g[_],I),U=Wo(S-g[A],C),$=!e.middlewareData.shift;let P=M,k=U;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(k=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=I),$&&!v){const O=Or(g.left,0),L=Or(g.right,0),V=Or(g.top,0),R=Or(g.bottom,0);b?k=S-2*(O!==0||L!==0?O+L:Or(g.left,g.right)):P=x-2*(V!==0||R!==0?V+R:Or(g.top,g.bottom))}await h({...e,availableWidth:k,availableHeight:P});const D=await c.getDimensions(u.floating);return S!==D.width||x!==D.height?{reset:{rects:!0}}:{}}}};function Cp(){return typeof window<"u"}function Uc(n){return QS(n)?(n.nodeName||"").toLowerCase():"#document"}function Mr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function oi(n){var e;return(e=(QS(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function QS(n){return Cp()?n instanceof Node||n instanceof Mr(n).Node:!1}function _s(n){return Cp()?n instanceof Element||n instanceof Mr(n).Element:!1}function ni(n){return Cp()?n instanceof HTMLElement||n instanceof Mr(n).HTMLElement:!1}function yE(n){return!Cp()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Mr(n).ShadowRoot}function jd(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Es(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function NO(n){return["table","td","th"].includes(Uc(n))}function Ip(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function rx(n){const e=sx(),t=_s(n)?Es(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function TO(n){let e=Go(n);for(;ni(e)&&!Nc(e);){if(rx(e))return e;if(Ip(e))return null;e=Go(e)}return null}function sx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Nc(n){return["html","body","#document"].includes(Uc(n))}function Es(n){return Mr(n).getComputedStyle(n)}function jp(n){return _s(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Go(n){if(Uc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||yE(n)&&n.host||oi(n);return yE(e)?e.host:e}function YS(n){const e=Go(n);return Nc(e)?n.ownerDocument?n.ownerDocument.body:n.body:ni(e)&&jd(e)?e:YS(e)}function od(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=YS(n),o=s===((r=n.ownerDocument)==null?void 0:r.body),c=Mr(s);if(o){const u=My(c);return e.concat(c,c.visualViewport||[],jd(s)?s:[],u&&t?od(u):[])}return e.concat(s,od(s,[],t))}function My(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function XS(n){const e=Es(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ni(n),o=s?n.offsetWidth:t,c=s?n.offsetHeight:r,u=Hf(t)!==o||Hf(r)!==c;return u&&(t=o,r=c),{width:t,height:r,$:u}}function ix(n){return _s(n)?n:n.contextElement}function ic(n){const e=ix(n);if(!ni(e))return Ho(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:o}=XS(e);let c=(o?Hf(t.width):t.width)/r,u=(o?Hf(t.height):t.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const CO=Ho(0);function JS(n){const e=Mr(n);return!sx()||!e.visualViewport?CO:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function IO(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Mr(n)?!1:e}function Ka(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=ix(n);let c=Ho(1);e&&(r?_s(r)&&(c=ic(r)):c=ic(n));const u=IO(o,t,r)?JS(o):Ho(0);let h=(s.left+u.x)/c.x,p=(s.top+u.y)/c.y,g=s.width/c.x,y=s.height/c.y;if(o){const v=Mr(o),b=r&&_s(r)?Mr(r):r;let S=v,x=My(S);for(;x&&r&&b!==S;){const _=ic(x),A=x.getBoundingClientRect(),I=Es(x),C=A.left+(x.clientLeft+parseFloat(I.paddingLeft))*_.x,M=A.top+(x.clientTop+parseFloat(I.paddingTop))*_.y;h*=_.x,p*=_.y,g*=_.x,y*=_.y,h+=C,p+=M,S=Mr(x),x=My(S)}}return Gf({width:g,height:y,x:h,y:p})}function jO(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const o=s==="fixed",c=oi(r),u=e?Ip(e.floating):!1;if(r===c||u&&o)return t;let h={scrollLeft:0,scrollTop:0},p=Ho(1);const g=Ho(0),y=ni(r);if((y||!y&&!o)&&((Uc(r)!=="body"||jd(c))&&(h=jp(r)),ni(r))){const v=Ka(r);p=ic(r),g.x=v.x+r.clientLeft,g.y=v.y+r.clientTop}return{width:t.width*p.x,height:t.height*p.y,x:t.x*p.x-h.scrollLeft*p.x+g.x,y:t.y*p.y-h.scrollTop*p.y+g.y}}function AO(n){return Array.from(n.getClientRects())}function Fy(n,e){const t=jp(n).scrollLeft;return e?e.left+t:Ka(oi(n)).left+t}function PO(n){const e=oi(n),t=jp(n),r=n.ownerDocument.body,s=Or(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Or(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+Fy(n);const u=-t.scrollTop;return Es(r).direction==="rtl"&&(c+=Or(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:c,y:u}}function RO(n,e){const t=Mr(n),r=oi(n),s=t.visualViewport;let o=r.clientWidth,c=r.clientHeight,u=0,h=0;if(s){o=s.width,c=s.height;const p=sx();(!p||p&&e==="fixed")&&(u=s.offsetLeft,h=s.offsetTop)}return{width:o,height:c,x:u,y:h}}function kO(n,e){const t=Ka(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,o=ni(n)?ic(n):Ho(1),c=n.clientWidth*o.x,u=n.clientHeight*o.y,h=s*o.x,p=r*o.y;return{width:c,height:u,x:h,y:p}}function vE(n,e,t){let r;if(e==="viewport")r=RO(n,t);else if(e==="document")r=PO(oi(n));else if(_s(e))r=kO(e,t);else{const s=JS(n);r={...e,x:e.x-s.x,y:e.y-s.y}}return Gf(r)}function ZS(n,e){const t=Go(n);return t===e||!_s(t)||Nc(t)?!1:Es(t).position==="fixed"||ZS(t,e)}function OO(n,e){const t=e.get(n);if(t)return t;let r=od(n,[],!1).filter(u=>_s(u)&&Uc(u)!=="body"),s=null;const o=Es(n).position==="fixed";let c=o?Go(n):n;for(;_s(c)&&!Nc(c);){const u=Es(c),h=rx(c);!h&&u.position==="fixed"&&(s=null),(o?!h&&!s:!h&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||jd(c)&&!h&&ZS(n,c))?r=r.filter(g=>g!==c):s=u,c=Go(c)}return e.set(n,r),r}function DO(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const c=[...t==="clippingAncestors"?Ip(e)?[]:OO(e,this._c):[].concat(t),r],u=c[0],h=c.reduce((p,g)=>{const y=vE(e,g,s);return p.top=Or(y.top,p.top),p.right=Wo(y.right,p.right),p.bottom=Wo(y.bottom,p.bottom),p.left=Or(y.left,p.left),p},vE(e,u,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function LO(n){const{width:e,height:t}=XS(n);return{width:e,height:t}}function MO(n,e,t){const r=ni(e),s=oi(e),o=t==="fixed",c=Ka(n,!0,o,e);let u={scrollLeft:0,scrollTop:0};const h=Ho(0);if(r||!r&&!o)if((Uc(e)!=="body"||jd(s))&&(u=jp(e)),r){const b=Ka(e,!0,o,e);h.x=b.x+e.clientLeft,h.y=b.y+e.clientTop}else s&&(h.x=Fy(s));let p=0,g=0;if(s&&!r&&!o){const b=s.getBoundingClientRect();g=b.top+u.scrollTop,p=b.left+u.scrollLeft-Fy(s,b)}const y=c.left+u.scrollLeft-h.x-p,v=c.top+u.scrollTop-h.y-g;return{x:y,y:v,width:c.width,height:c.height}}function Xg(n){return Es(n).position==="static"}function xE(n,e){if(!ni(n)||Es(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return oi(n)===t&&(t=t.ownerDocument.body),t}function eN(n,e){const t=Mr(n);if(Ip(n))return t;if(!ni(n)){let s=Go(n);for(;s&&!Nc(s);){if(_s(s)&&!Xg(s))return s;s=Go(s)}return t}let r=xE(n,e);for(;r&&NO(r)&&Xg(r);)r=xE(r,e);return r&&Nc(r)&&Xg(r)&&!rx(r)?t:r||TO(n)||t}const FO=async function(n){const e=this.getOffsetParent||eN,t=this.getDimensions,r=await t(n.floating);return{reference:MO(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function VO(n){return Es(n).direction==="rtl"}const UO={convertOffsetParentRelativeRectToViewportRelativeRect:jO,getDocumentElement:oi,getClippingRect:DO,getOffsetParent:eN,getElementRects:FO,getClientRects:AO,getDimensions:LO,getScale:ic,isElement:_s,isRTL:VO};function zO(n,e){let t=null,r;const s=oi(n);function o(){var u;clearTimeout(r),(u=t)==null||u.disconnect(),t=null}function c(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),o();const{left:p,top:g,width:y,height:v}=n.getBoundingClientRect();if(u||e(),!y||!v)return;const b=uf(g),S=uf(s.clientWidth-(p+y)),x=uf(s.clientHeight-(g+v)),_=uf(p),I={rootMargin:-b+"px "+-S+"px "+-x+"px "+-_+"px",threshold:Or(0,Wo(1,h))||1};let C=!0;function M(U){const $=U[0].intersectionRatio;if($!==h){if(!C)return c();$?c(!1,$):r=setTimeout(()=>{c(!1,1e-7)},1e3)}C=!1}try{t=new IntersectionObserver(M,{...I,root:s.ownerDocument})}catch{t=new IntersectionObserver(M,I)}t.observe(n)}return c(!0),o}function $O(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,p=ix(n),g=s||o?[...p?od(p):[],...od(e)]:[];g.forEach(A=>{s&&A.addEventListener("scroll",t,{passive:!0}),o&&A.addEventListener("resize",t)});const y=p&&u?zO(p,t):null;let v=-1,b=null;c&&(b=new ResizeObserver(A=>{let[I]=A;I&&I.target===p&&b&&(b.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=b)==null||C.observe(e)})),t()}),p&&!h&&b.observe(p),b.observe(e));let S,x=h?Ka(n):null;h&&_();function _(){const A=Ka(n);x&&(A.x!==x.x||A.y!==x.y||A.width!==x.width||A.height!==x.height)&&t(),x=A,S=requestAnimationFrame(_)}return t(),()=>{var A;g.forEach(I=>{s&&I.removeEventListener("scroll",t),o&&I.removeEventListener("resize",t)}),y==null||y(),(A=b)==null||A.disconnect(),b=null,h&&cancelAnimationFrame(S)}}const BO=_O,qO=EO,WO=vO,HO=SO,KO=xO,wE=yO,GO=bO,QO=(n,e,t)=>{const r=new Map,s={platform:UO,...t},o={...s.platform,_c:r};return gO(n,e,{...s,platform:o})};var jf=typeof document<"u"?E.useLayoutEffect:E.useEffect;function Qf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Qf(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const o=s[r];if(!(o==="_owner"&&n.$$typeof)&&!Qf(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function tN(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function _E(n,e){const t=tN(n);return Math.round(e*t)/t}function Jg(n){const e=E.useRef(n);return jf(()=>{e.current=n}),e}function YO(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:c}={},transform:u=!0,whileElementsMounted:h,open:p}=n,[g,y]=E.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,b]=E.useState(r);Qf(v,r)||b(r);const[S,x]=E.useState(null),[_,A]=E.useState(null),I=E.useCallback(G=>{G!==$.current&&($.current=G,x(G))},[]),C=E.useCallback(G=>{G!==P.current&&(P.current=G,A(G))},[]),M=o||S,U=c||_,$=E.useRef(null),P=E.useRef(null),k=E.useRef(g),D=h!=null,O=Jg(h),L=Jg(s),V=Jg(p),R=E.useCallback(()=>{if(!$.current||!P.current)return;const G={placement:e,strategy:t,middleware:v};L.current&&(G.platform=L.current),QO($.current,P.current,G).then(oe=>{const le={...oe,isPositioned:V.current!==!1};W.current&&!Qf(k.current,le)&&(k.current=le,sl.flushSync(()=>{y(le)}))})},[v,e,t,L,V]);jf(()=>{p===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,y(G=>({...G,isPositioned:!1})))},[p]);const W=E.useRef(!1);jf(()=>(W.current=!0,()=>{W.current=!1}),[]),jf(()=>{if(M&&($.current=M),U&&(P.current=U),M&&U){if(O.current)return O.current(M,U,R);R()}},[M,U,R,O,D]);const K=E.useMemo(()=>({reference:$,floating:P,setReference:I,setFloating:C}),[I,C]),X=E.useMemo(()=>({reference:M,floating:U}),[M,U]),ie=E.useMemo(()=>{const G={position:t,left:0,top:0};if(!X.floating)return G;const oe=_E(X.floating,g.x),le=_E(X.floating,g.y);return u?{...G,transform:"translate("+oe+"px, "+le+"px)",...tN(X.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:oe,top:le}},[t,u,X.floating,g.x,g.y]);return E.useMemo(()=>({...g,update:R,refs:K,elements:X,floatingStyles:ie}),[g,R,K,X,ie])}const XO=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?wE({element:r.current,padding:s}).fn(t):{}:r?wE({element:r,padding:s}).fn(t):{}}}},JO=(n,e)=>({...BO(n),options:[n,e]}),ZO=(n,e)=>({...qO(n),options:[n,e]}),eD=(n,e)=>({...GO(n),options:[n,e]}),tD=(n,e)=>({...WO(n),options:[n,e]}),nD=(n,e)=>({...HO(n),options:[n,e]}),rD=(n,e)=>({...KO(n),options:[n,e]}),sD=(n,e)=>({...XO(n),options:[n,e]});var iD="Arrow",nN=E.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...o}=n;return l.jsx(Ge.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});nN.displayName=iD;var oD=nN;function rN(n){const[e,t]=E.useState(void 0);return Xt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let c,u;if("borderBoxSize"in o){const h=o.borderBoxSize,p=Array.isArray(h)?h[0]:h;c=p.inlineSize,u=p.blockSize}else c=n.offsetWidth,u=n.offsetHeight;t({width:c,height:u})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var ox="Popper",[sN,Ap]=Ui(ox),[aD,iN]=sN(ox),oN=n=>{const{__scopePopper:e,children:t}=n,[r,s]=E.useState(null);return l.jsx(aD,{scope:e,anchor:r,onAnchorChange:s,children:t})};oN.displayName=ox;var aN="PopperAnchor",lN=E.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,o=iN(aN,t),c=E.useRef(null),u=Tt(e,c);return E.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:l.jsx(Ge.div,{...s,ref:u})});lN.displayName=aN;var ax="PopperContent",[lD,cD]=sN(ax),cN=E.forwardRef((n,e)=>{var we,be,qe,Me,rt,st;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:S,...x}=n,_=iN(ax,t),[A,I]=E.useState(null),C=Tt(e,ge=>I(ge)),[M,U]=E.useState(null),$=rN(M),P=($==null?void 0:$.width)??0,k=($==null?void 0:$.height)??0,D=r+(o!=="center"?"-"+o:""),O=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},L=Array.isArray(p)?p:[p],V=L.length>0,R={padding:O,boundary:L.filter(dD),altBoundary:V},{refs:W,floatingStyles:K,placement:X,isPositioned:ie,middlewareData:G}=YO({strategy:"fixed",placement:D,whileElementsMounted:(...ge)=>$O(...ge,{animationFrame:b==="always"}),elements:{reference:_.anchor},middleware:[JO({mainAxis:s+k,alignmentAxis:c}),h&&ZO({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?eD():void 0,...R}),h&&tD({...R}),nD({...R,apply:({elements:ge,rects:Ie,availableWidth:pt,availableHeight:sn})=>{const{width:zn,height:br}=Ie.reference,Ot=ge.floating.style;Ot.setProperty("--radix-popper-available-width",`${pt}px`),Ot.setProperty("--radix-popper-available-height",`${sn}px`),Ot.setProperty("--radix-popper-anchor-width",`${zn}px`),Ot.setProperty("--radix-popper-anchor-height",`${br}px`)}}),M&&sD({element:M,padding:u}),hD({arrowWidth:P,arrowHeight:k}),v&&rD({strategy:"referenceHidden",...R})]}),[oe,le]=hN(X),B=Tn(S);Xt(()=>{ie&&(B==null||B())},[ie,B]);const J=(we=G.arrow)==null?void 0:we.x,he=(be=G.arrow)==null?void 0:be.y,Ne=((qe=G.arrow)==null?void 0:qe.centerOffset)!==0,[Ue,Te]=E.useState();return Xt(()=>{A&&Te(window.getComputedStyle(A).zIndex)},[A]),l.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:ie?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ue,"--radix-popper-transform-origin":[(Me=G.transformOrigin)==null?void 0:Me.x,(rt=G.transformOrigin)==null?void 0:rt.y].join(" "),...((st=G.hide)==null?void 0:st.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:l.jsx(lD,{scope:t,placedSide:oe,onArrowChange:U,arrowX:J,arrowY:he,shouldHideArrow:Ne,children:l.jsx(Ge.div,{"data-side":oe,"data-align":le,...x,ref:C,style:{...x.style,animation:ie?void 0:"none"}})})})});cN.displayName=ax;var uN="PopperArrow",uD={top:"bottom",right:"left",bottom:"top",left:"right"},dN=E.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,o=cD(uN,r),c=uD[o.placedSide];return l.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:l.jsx(oD,{...s,ref:t,style:{...s.style,display:"block"}})})});dN.displayName=uN;function dD(n){return n!==null}var hD=n=>({name:"transformOrigin",options:n,fn(e){var _,A,I;const{placement:t,rects:r,middlewareData:s}=e,c=((_=s.arrow)==null?void 0:_.centerOffset)!==0,u=c?0:n.arrowWidth,h=c?0:n.arrowHeight,[p,g]=hN(t),y={start:"0%",center:"50%",end:"100%"}[g],v=(((A=s.arrow)==null?void 0:A.x)??0)+u/2,b=(((I=s.arrow)==null?void 0:I.y)??0)+h/2;let S="",x="";return p==="bottom"?(S=c?y:`${v}px`,x=`${-h}px`):p==="top"?(S=c?y:`${v}px`,x=`${r.floating.height+h}px`):p==="right"?(S=`${-h}px`,x=c?y:`${b}px`):p==="left"&&(S=`${r.floating.width+h}px`,x=c?y:`${b}px`),{data:{x:S,y:x}}}});function hN(n){const[e,t="center"]=n.split("-");return[e,t]}var fD=oN,fN=lN,pN=cN,mN=dN,pD="Portal",gN=E.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,o]=E.useState(!1);Xt(()=>o(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?bp.createPortal(l.jsx(Ge.div,{...r,ref:e}),c):null});gN.displayName=pD;function mD(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var yN=n=>{const{present:e,children:t}=n,r=gD(e),s=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),o=Tt(r.ref,yD(s));return typeof t=="function"||r.isPresent?E.cloneElement(s,{ref:o}):null};yN.displayName="Presence";function gD(n){const[e,t]=E.useState(),r=E.useRef({}),s=E.useRef(n),o=E.useRef("none"),c=n?"mounted":"unmounted",[u,h]=mD(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const p=df(r.current);o.current=u==="mounted"?p:"none"},[u]),Xt(()=>{const p=r.current,g=s.current;if(g!==n){const v=o.current,b=df(p);n?h("MOUNT"):b==="none"||(p==null?void 0:p.display)==="none"?h("UNMOUNT"):h(g&&v!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Xt(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,y=b=>{const x=df(r.current).includes(b.animationName);if(b.target===e&&x&&(h("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},v=b=>{b.target===e&&(o.current=df(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(p=>{p&&(r.current=getComputedStyle(p)),t(p)},[])}}function df(n){return(n==null?void 0:n.animationName)||"none"}function yD(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var[Pp,e8]=X2("Tooltip",[Ap]),lx=Ap(),vN="TooltipProvider",vD=700,EE="tooltip.open",[xD,xN]=Pp(vN),wN=n=>{const{__scopeTooltip:e,delayDuration:t=vD,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=n,[c,u]=E.useState(!0),h=E.useRef(!1),p=E.useRef(0);return E.useEffect(()=>{const g=p.current;return()=>window.clearTimeout(g)},[]),l.jsx(xD,{scope:e,isOpenDelayed:c,delayDuration:t,onOpen:E.useCallback(()=>{window.clearTimeout(p.current),u(!1)},[]),onClose:E.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:h,onPointerInTransitChange:E.useCallback(g=>{h.current=g},[]),disableHoverableContent:s,children:o})};wN.displayName=vN;var _N="Tooltip",[t8,Rp]=Pp(_N),Vy="TooltipTrigger",wD=E.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Rp(Vy,t),o=xN(Vy,t),c=lx(t),u=E.useRef(null),h=Tt(e,u,s.onTriggerChange),p=E.useRef(!1),g=E.useRef(!1),y=E.useCallback(()=>p.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),l.jsx(fN,{asChild:!0,...c,children:l.jsx(Ge.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:h,onPointerMove:$e(n.onPointerMove,v=>{v.pointerType!=="touch"&&!g.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),g.current=!0)}),onPointerLeave:$e(n.onPointerLeave,()=>{s.onTriggerLeave(),g.current=!1}),onPointerDown:$e(n.onPointerDown,()=>{p.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:$e(n.onFocus,()=>{p.current||s.onOpen()}),onBlur:$e(n.onBlur,s.onClose),onClick:$e(n.onClick,s.onClose)})})});wD.displayName=Vy;var _D="TooltipPortal",[n8,ED]=Pp(_D,{forceMount:void 0}),Tc="TooltipContent",EN=E.forwardRef((n,e)=>{const t=ED(Tc,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...o}=n,c=Rp(Tc,n.__scopeTooltip);return l.jsx(yN,{present:r||c.open,children:c.disableHoverableContent?l.jsx(bN,{side:s,...o,ref:e}):l.jsx(bD,{side:s,...o,ref:e})})}),bD=E.forwardRef((n,e)=>{const t=Rp(Tc,n.__scopeTooltip),r=xN(Tc,n.__scopeTooltip),s=E.useRef(null),o=Tt(e,s),[c,u]=E.useState(null),{trigger:h,onClose:p}=t,g=s.current,{onPointerInTransitChange:y}=r,v=E.useCallback(()=>{u(null),y(!1)},[y]),b=E.useCallback((S,x)=>{const _=S.currentTarget,A={x:S.clientX,y:S.clientY},I=CD(A,_.getBoundingClientRect()),C=ID(A,I),M=jD(x.getBoundingClientRect()),U=PD([...C,...M]);u(U),y(!0)},[y]);return E.useEffect(()=>()=>v(),[v]),E.useEffect(()=>{if(h&&g){const S=_=>b(_,g),x=_=>b(_,h);return h.addEventListener("pointerleave",S),g.addEventListener("pointerleave",x),()=>{h.removeEventListener("pointerleave",S),g.removeEventListener("pointerleave",x)}}},[h,g,b,v]),E.useEffect(()=>{if(c){const S=x=>{const _=x.target,A={x:x.clientX,y:x.clientY},I=(h==null?void 0:h.contains(_))||(g==null?void 0:g.contains(_)),C=!AD(A,c);I?v():C&&(v(),p())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[h,g,c,p,v]),l.jsx(bN,{...n,ref:o})}),[SD,ND]=Pp(_N,{isInside:!1}),bN=E.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:c,...u}=n,h=Rp(Tc,t),p=lx(t),{onClose:g}=h;return E.useEffect(()=>(document.addEventListener(EE,g),()=>document.removeEventListener(EE,g)),[g]),E.useEffect(()=>{if(h.trigger){const y=v=>{const b=v.target;b!=null&&b.contains(h.trigger)&&g()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[h.trigger,g]),l.jsx(Zv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:y=>y.preventDefault(),onDismiss:g,children:l.jsxs(pN,{"data-state":h.stateAttribute,...p,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(rS,{children:r}),l.jsx(SD,{scope:t,isInside:!0,children:l.jsx(YR,{id:h.contentId,role:"tooltip",children:s||r})})]})})});EN.displayName=Tc;var SN="TooltipArrow",TD=E.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=lx(t);return ND(SN,t).isInside?null:l.jsx(mN,{...s,...r,ref:e})});TD.displayName=SN;function CD(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),o=Math.abs(e.left-n.x);switch(Math.min(t,r,s,o)){case o:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ID(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function jD(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function AD(n,e){const{x:t,y:r}=n;let s=!1;for(let o=0,c=e.length-1;o<e.length;c=o++){const u=e[o].x,h=e[o].y,p=e[c].x,g=e[c].y;h>r!=g>r&&t<(p-u)*(r-h)/(g-h)+u&&(s=!s)}return s}function PD(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),RD(e)}function RD(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const o=e[e.length-1],c=e[e.length-2];if((o.x-c.x)*(s.y-c.y)>=(o.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const o=t[t.length-1],c=t[t.length-2];if((o.x-c.x)*(s.y-c.y)>=(o.y-c.y)*(s.x-c.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var kD=wN,NN=EN;const OD=kD,DD=E.forwardRef(({className:n,sideOffset:e=4,...t},r)=>l.jsx(NN,{ref:r,sideOffset:e,className:We("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));DD.displayName=NN.displayName;var Ad=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ga=typeof window>"u"||"Deno"in globalThis;function vr(){}function LD(n,e){return typeof n=="function"?n(e):n}function Uy(n){return typeof n=="number"&&n>=0&&n!==1/0}function TN(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Lo(n,e){return typeof n=="function"?n(e):n}function ms(n,e){return typeof n=="function"?n(e):n}function bE(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:o,queryKey:c,stale:u}=n;if(c){if(r){if(e.queryHash!==cx(c,e.options))return!1}else if(!ld(e.queryKey,c))return!1}if(t!=="all"){const h=e.isActive();if(t==="active"&&!h||t==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||o&&!o(e))}function SE(n,e){const{exact:t,status:r,predicate:s,mutationKey:o}=n;if(o){if(!e.options.mutationKey)return!1;if(t){if(ad(e.options.mutationKey)!==ad(o))return!1}else if(!ld(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function cx(n,e){return((e==null?void 0:e.queryKeyHashFn)||ad)(n)}function ad(n){return JSON.stringify(n,(e,t)=>$y(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function ld(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>ld(n[t],e[t])):!1}function CN(n,e){if(n===e)return n;const t=NE(n)&&NE(e);if(t||$y(n)&&$y(e)){const r=t?n:Object.keys(n),s=r.length,o=t?e:Object.keys(e),c=o.length,u=t?[]:{},h=new Set(r);let p=0;for(let g=0;g<c;g++){const y=t?g:o[g];(!t&&h.has(y)||t)&&n[y]===void 0&&e[y]===void 0?(u[y]=void 0,p++):(u[y]=CN(n[y],e[y]),u[y]===n[y]&&n[y]!==void 0&&p++)}return s===c&&p===s?n:u}return e}function zy(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function NE(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function $y(n){if(!TE(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!TE(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function TE(n){return Object.prototype.toString.call(n)==="[object Object]"}function MD(n){return new Promise(e=>{setTimeout(e,n)})}function By(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?CN(n,e):e}function FD(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function VD(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var ux=Symbol();function IN(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===ux?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function UD(n,e){return typeof n=="function"?n(...e):!!n}var ka,So,dc,q1,zD=(q1=class extends Ad{constructor(){super();et(this,ka);et(this,So);et(this,dc);Oe(this,dc,e=>{if(!Ga&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){Y(this,So)||this.setEventListener(Y(this,dc))}onUnsubscribe(){var e;this.hasListeners()||((e=Y(this,So))==null||e.call(this),Oe(this,So,void 0))}setEventListener(e){var t;Oe(this,dc,e),(t=Y(this,So))==null||t.call(this),Oe(this,So,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Y(this,ka)!==e&&(Oe(this,ka,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof Y(this,ka)=="boolean"?Y(this,ka):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ka=new WeakMap,So=new WeakMap,dc=new WeakMap,q1),dx=new zD,hc,No,fc,W1,$D=(W1=class extends Ad{constructor(){super();et(this,hc,!0);et(this,No);et(this,fc);Oe(this,fc,e=>{if(!Ga&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){Y(this,No)||this.setEventListener(Y(this,fc))}onUnsubscribe(){var e;this.hasListeners()||((e=Y(this,No))==null||e.call(this),Oe(this,No,void 0))}setEventListener(e){var t;Oe(this,fc,e),(t=Y(this,No))==null||t.call(this),Oe(this,No,e(this.setOnline.bind(this)))}setOnline(e){Y(this,hc)!==e&&(Oe(this,hc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Y(this,hc)}},hc=new WeakMap,No=new WeakMap,fc=new WeakMap,W1),Yf=new $D;function qy(){let n,e;const t=new Promise((s,o)=>{n=s,e=o});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function BD(n){return Math.min(1e3*2**n,3e4)}function jN(n){return(n??"online")==="online"?Yf.isOnline():!0}var AN=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Zg(n){return n instanceof AN}function PN(n){let e=!1,t=0,r=!1,s;const o=qy(),c=x=>{var _;r||(v(new AN(x)),(_=n.abort)==null||_.call(n))},u=()=>{e=!0},h=()=>{e=!1},p=()=>dx.isFocused()&&(n.networkMode==="always"||Yf.isOnline())&&n.canRun(),g=()=>jN(n.networkMode)&&n.canRun(),y=x=>{var _;r||(r=!0,(_=n.onSuccess)==null||_.call(n,x),s==null||s(),o.resolve(x))},v=x=>{var _;r||(r=!0,(_=n.onError)==null||_.call(n,x),s==null||s(),o.reject(x))},b=()=>new Promise(x=>{var _;s=A=>{(r||p())&&x(A)},(_=n.onPause)==null||_.call(n)}).then(()=>{var x;s=void 0,r||(x=n.onContinue)==null||x.call(n)}),S=()=>{if(r)return;let x;const _=t===0?n.initialPromise:void 0;try{x=_??n.fn()}catch(A){x=Promise.reject(A)}Promise.resolve(x).then(y).catch(A=>{var $;if(r)return;const I=n.retry??(Ga?0:3),C=n.retryDelay??BD,M=typeof C=="function"?C(t,A):C,U=I===!0||typeof I=="number"&&t<I||typeof I=="function"&&I(t,A);if(e||!U){v(A);return}t++,($=n.onFail)==null||$.call(n,t,A),MD(M).then(()=>p()?void 0:b()).then(()=>{e?v(A):S()})})};return{promise:o,cancel:c,continue:()=>(s==null||s(),o),cancelRetry:u,continueRetry:h,canStart:g,start:()=>(g()?S():b().then(S),o)}}var qD=n=>setTimeout(n,0);function WD(){let n=[],e=0,t=u=>{u()},r=u=>{u()},s=qD;const o=u=>{e?n.push(u):s(()=>{t(u)})},c=()=>{const u=n;n=[],u.length&&s(()=>{r(()=>{u.forEach(h=>{t(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||c()}return h},batchCalls:u=>(...h)=>{o(()=>{u(...h)})},schedule:o,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Mn=WD(),Oa,H1,RN=(H1=class{constructor(){et(this,Oa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Uy(this.gcTime)&&Oe(this,Oa,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Ga?1/0:5*60*1e3))}clearGcTimeout(){Y(this,Oa)&&(clearTimeout(Y(this,Oa)),Oe(this,Oa,void 0))}},Oa=new WeakMap,H1),pc,Da,Gr,La,Qn,bd,Ma,fs,Ci,K1,HD=(K1=class extends RN{constructor(t){super();et(this,fs);et(this,pc);et(this,Da);et(this,Gr);et(this,La);et(this,Qn);et(this,bd);et(this,Ma);Oe(this,Ma,!1),Oe(this,bd,t.defaultOptions),this.setOptions(t.options),this.observers=[],Oe(this,La,t.client),Oe(this,Gr,Y(this,La).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Oe(this,pc,KD(this.options)),this.state=t.state??Y(this,pc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Y(this,Qn))==null?void 0:t.promise}setOptions(t){this.options={...Y(this,bd),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Y(this,Gr).remove(this)}setData(t,r){const s=By(this.state.data,t,this.options);return vt(this,fs,Ci).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){vt(this,fs,Ci).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,o;const r=(s=Y(this,Qn))==null?void 0:s.promise;return(o=Y(this,Qn))==null||o.cancel(t),r?r.then(vr).catch(vr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Y(this,pc))}isActive(){return this.observers.some(t=>ms(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ux||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Lo(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!TN(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Y(this,Qn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Y(this,Qn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Y(this,Gr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Y(this,Qn)&&(Y(this,Ma)?Y(this,Qn).cancel({revert:!0}):Y(this,Qn).cancelRetry()),this.scheduleGc()),Y(this,Gr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||vt(this,fs,Ci).call(this,{type:"invalidate"})}fetch(t,r){var g,y,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Y(this,Qn))return Y(this,Qn).continueRetry(),Y(this,Qn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const b=this.observers.find(S=>S.options.queryFn);b&&this.setOptions(b.options)}const s=new AbortController,o=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(Oe(this,Ma,!0),s.signal)})},c=()=>{const b=IN(this.options,r),x=(()=>{const _={client:Y(this,La),queryKey:this.queryKey,meta:this.meta};return o(_),_})();return Oe(this,Ma,!1),this.options.persister?this.options.persister(b,x,this):b(x)},h=(()=>{const b={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Y(this,La),state:this.state,fetchFn:c};return o(b),b})();(g=this.options.behavior)==null||g.onFetch(h,this),Oe(this,Da,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=h.fetchOptions)==null?void 0:y.meta))&&vt(this,fs,Ci).call(this,{type:"fetch",meta:(v=h.fetchOptions)==null?void 0:v.meta});const p=b=>{var S,x,_,A;Zg(b)&&b.silent||vt(this,fs,Ci).call(this,{type:"error",error:b}),Zg(b)||((x=(S=Y(this,Gr).config).onError)==null||x.call(S,b,this),(A=(_=Y(this,Gr).config).onSettled)==null||A.call(_,this.state.data,b,this)),this.scheduleGc()};return Oe(this,Qn,PN({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:b=>{var S,x,_,A;if(b===void 0){p(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(b)}catch(I){p(I);return}(x=(S=Y(this,Gr).config).onSuccess)==null||x.call(S,b,this),(A=(_=Y(this,Gr).config).onSettled)==null||A.call(_,b,this.state.error,this),this.scheduleGc()},onError:p,onFail:(b,S)=>{vt(this,fs,Ci).call(this,{type:"failed",failureCount:b,error:S})},onPause:()=>{vt(this,fs,Ci).call(this,{type:"pause"})},onContinue:()=>{vt(this,fs,Ci).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),Y(this,Qn).start()}},pc=new WeakMap,Da=new WeakMap,Gr=new WeakMap,La=new WeakMap,Qn=new WeakMap,bd=new WeakMap,Ma=new WeakMap,fs=new WeakSet,Ci=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...kN(s.data,this.options),fetchMeta:t.meta??null};case"success":return Oe(this,Da,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=t.error;return Zg(o)&&o.revert&&Y(this,Da)?{...Y(this,Da),fetchStatus:"idle"}:{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),Mn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Y(this,Gr).notify({query:this,type:"updated",action:t})})},K1);function kN(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:jN(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function KD(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var $s,G1,GD=(G1=class extends Ad{constructor(e={}){super();et(this,$s);this.config=e,Oe(this,$s,new Map)}build(e,t,r){const s=t.queryKey,o=t.queryHash??cx(s,t);let c=this.get(o);return c||(c=new HD({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){Y(this,$s).has(e.queryHash)||(Y(this,$s).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Y(this,$s).get(e.queryHash);t&&(e.destroy(),t===e&&Y(this,$s).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Mn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Y(this,$s).get(e)}getAll(){return[...Y(this,$s).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>bE(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>bE(e,r)):t}notify(e){Mn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Mn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Mn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$s=new WeakMap,G1),Bs,sr,Fa,qs,vo,Q1,QD=(Q1=class extends RN{constructor(t){super();et(this,qs);et(this,Bs);et(this,sr);et(this,Fa);this.mutationId=t.mutationId,Oe(this,sr,t.mutationCache),Oe(this,Bs,[]),this.state=t.state||YD(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Y(this,Bs).includes(t)||(Y(this,Bs).push(t),this.clearGcTimeout(),Y(this,sr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Oe(this,Bs,Y(this,Bs).filter(r=>r!==t)),this.scheduleGc(),Y(this,sr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Y(this,Bs).length||(this.state.status==="pending"?this.scheduleGc():Y(this,sr).remove(this))}continue(){var t;return((t=Y(this,Fa))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var c,u,h,p,g,y,v,b,S,x,_,A,I,C,M,U,$,P,k,D;const r=()=>{vt(this,qs,vo).call(this,{type:"continue"})};Oe(this,Fa,PN({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(O,L)=>{vt(this,qs,vo).call(this,{type:"failed",failureCount:O,error:L})},onPause:()=>{vt(this,qs,vo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Y(this,sr).canRun(this)}));const s=this.state.status==="pending",o=!Y(this,Fa).canStart();try{if(s)r();else{vt(this,qs,vo).call(this,{type:"pending",variables:t,isPaused:o}),await((u=(c=Y(this,sr).config).onMutate)==null?void 0:u.call(c,t,this));const L=await((p=(h=this.options).onMutate)==null?void 0:p.call(h,t));L!==this.state.context&&vt(this,qs,vo).call(this,{type:"pending",context:L,variables:t,isPaused:o})}const O=await Y(this,Fa).start();return await((y=(g=Y(this,sr).config).onSuccess)==null?void 0:y.call(g,O,t,this.state.context,this)),await((b=(v=this.options).onSuccess)==null?void 0:b.call(v,O,t,this.state.context)),await((x=(S=Y(this,sr).config).onSettled)==null?void 0:x.call(S,O,null,this.state.variables,this.state.context,this)),await((A=(_=this.options).onSettled)==null?void 0:A.call(_,O,null,t,this.state.context)),vt(this,qs,vo).call(this,{type:"success",data:O}),O}catch(O){try{throw await((C=(I=Y(this,sr).config).onError)==null?void 0:C.call(I,O,t,this.state.context,this)),await((U=(M=this.options).onError)==null?void 0:U.call(M,O,t,this.state.context)),await((P=($=Y(this,sr).config).onSettled)==null?void 0:P.call($,void 0,O,this.state.variables,this.state.context,this)),await((D=(k=this.options).onSettled)==null?void 0:D.call(k,void 0,O,t,this.state.context)),O}finally{vt(this,qs,vo).call(this,{type:"error",error:O})}}finally{Y(this,sr).runNext(this)}}},Bs=new WeakMap,sr=new WeakMap,Fa=new WeakMap,qs=new WeakSet,vo=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Mn.batch(()=>{Y(this,Bs).forEach(s=>{s.onMutationUpdate(t)}),Y(this,sr).notify({mutation:this,type:"updated",action:t})})},Q1);function YD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ji,ps,Sd,Y1,XD=(Y1=class extends Ad{constructor(e={}){super();et(this,ji);et(this,ps);et(this,Sd);this.config=e,Oe(this,ji,new Set),Oe(this,ps,new Map),Oe(this,Sd,0)}build(e,t,r){const s=new QD({mutationCache:this,mutationId:++sf(this,Sd)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){Y(this,ji).add(e);const t=hf(e);if(typeof t=="string"){const r=Y(this,ps).get(t);r?r.push(e):Y(this,ps).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Y(this,ji).delete(e)){const t=hf(e);if(typeof t=="string"){const r=Y(this,ps).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Y(this,ps).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=hf(e);if(typeof t=="string"){const r=Y(this,ps).get(t),s=r==null?void 0:r.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=hf(e);if(typeof t=="string"){const s=(r=Y(this,ps).get(t))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Mn.batch(()=>{Y(this,ji).forEach(e=>{this.notify({type:"removed",mutation:e})}),Y(this,ji).clear(),Y(this,ps).clear()})}getAll(){return Array.from(Y(this,ji))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>SE(t,r))}findAll(e={}){return this.getAll().filter(t=>SE(e,t))}notify(e){Mn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Mn.batch(()=>Promise.all(e.map(t=>t.continue().catch(vr))))}},ji=new WeakMap,ps=new WeakMap,Sd=new WeakMap,Y1);function hf(n){var e;return(e=n.options.scope)==null?void 0:e.id}function Xf(n){return{onFetch:(e,t)=>{var g,y,v,b,S;const r=e.options,s=(v=(y=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:y.fetchMore)==null?void 0:v.direction,o=((b=e.state.data)==null?void 0:b.pages)||[],c=((S=e.state.data)==null?void 0:S.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const p=async()=>{let x=!1;const _=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},A=IN(e.options,e.fetchOptions),I=async(C,M,U)=>{if(x)return Promise.reject();if(M==null&&C.pages.length)return Promise.resolve(C);const P=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:M,direction:U?"backward":"forward",meta:e.options.meta};return _(L),L})(),k=await A(P),{maxPages:D}=e.options,O=U?VD:FD;return{pages:O(C.pages,k,D),pageParams:O(C.pageParams,M,D)}};if(s&&o.length){const C=s==="backward",M=C?ON:Wy,U={pages:o,pageParams:c},$=M(r,U);u=await I(U,$,C)}else{const C=n??o.length;do{const M=h===0?c[0]??r.initialPageParam:Wy(r,u);if(h>0&&M==null)break;u=await I(u,M),h++}while(h<C)}return u};e.options.persister?e.fetchFn=()=>{var x,_;return(_=(x=e.options).persister)==null?void 0:_.call(x,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=p}}}function Wy(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function ON(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}function JD(n,e){return e?Wy(n,e)!=null:!1}function ZD(n,e){return!e||!n.getPreviousPageParam?!1:ON(n,e)!=null}var an,To,Co,mc,gc,Io,yc,vc,X1,eL=(X1=class{constructor(n={}){et(this,an);et(this,To);et(this,Co);et(this,mc);et(this,gc);et(this,Io);et(this,yc);et(this,vc);Oe(this,an,n.queryCache||new GD),Oe(this,To,n.mutationCache||new XD),Oe(this,Co,n.defaultOptions||{}),Oe(this,mc,new Map),Oe(this,gc,new Map),Oe(this,Io,0)}mount(){sf(this,Io)._++,Y(this,Io)===1&&(Oe(this,yc,dx.subscribe(async n=>{n&&(await this.resumePausedMutations(),Y(this,an).onFocus())})),Oe(this,vc,Yf.subscribe(async n=>{n&&(await this.resumePausedMutations(),Y(this,an).onOnline())})))}unmount(){var n,e;sf(this,Io)._--,Y(this,Io)===0&&((n=Y(this,yc))==null||n.call(this),Oe(this,yc,void 0),(e=Y(this,vc))==null||e.call(this),Oe(this,vc,void 0))}isFetching(n){return Y(this,an).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return Y(this,To).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=Y(this,an).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=Y(this,an).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Lo(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return Y(this,an).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=Y(this,an).get(r.queryHash),o=s==null?void 0:s.state.data,c=LD(e,o);if(c!==void 0)return Y(this,an).build(this,r).setData(c,{...t,manual:!0})}setQueriesData(n,e,t){return Mn.batch(()=>Y(this,an).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=Y(this,an).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=Y(this,an);Mn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=Y(this,an);return Mn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Mn.batch(()=>Y(this,an).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(vr).catch(vr)}invalidateQueries(n,e={}){return Mn.batch(()=>(Y(this,an).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Mn.batch(()=>Y(this,an).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,t);return t.throwOnError||(o=o.catch(vr)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(vr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=Y(this,an).build(this,e);return t.isStaleByTime(Lo(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(vr).catch(vr)}fetchInfiniteQuery(n){return n.behavior=Xf(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(vr).catch(vr)}ensureInfiniteQueryData(n){return n.behavior=Xf(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Yf.isOnline()?Y(this,To).resumePausedMutations():Promise.resolve()}getQueryCache(){return Y(this,an)}getMutationCache(){return Y(this,To)}getDefaultOptions(){return Y(this,Co)}setDefaultOptions(n){Oe(this,Co,n)}setQueryDefaults(n,e){Y(this,mc).set(ad(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...Y(this,mc).values()],t={};return e.forEach(r=>{ld(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){Y(this,gc).set(ad(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...Y(this,gc).values()],t={};return e.forEach(r=>{ld(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...Y(this,Co).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=cx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ux&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...Y(this,Co).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){Y(this,an).clear(),Y(this,To).clear()}},an=new WeakMap,To=new WeakMap,Co=new WeakMap,mc=new WeakMap,gc=new WeakMap,Io=new WeakMap,yc=new WeakMap,vc=new WeakMap,X1),yr,xt,Nd,ir,Va,xc,jo,Ao,Td,wc,_c,Ua,za,Po,Ec,At,Mu,Hy,Ky,Gy,Qy,Yy,Xy,Jy,LN,J1,DN=(J1=class extends Ad{constructor(e,t){super();et(this,At);et(this,yr);et(this,xt);et(this,Nd);et(this,ir);et(this,Va);et(this,xc);et(this,jo);et(this,Ao);et(this,Td);et(this,wc);et(this,_c);et(this,Ua);et(this,za);et(this,Po);et(this,Ec,new Set);this.options=t,Oe(this,yr,e),Oe(this,Ao,null),Oe(this,jo,qy()),this.options.experimental_prefetchInRender||Y(this,jo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Y(this,xt).addObserver(this),CE(Y(this,xt),this.options)?vt(this,At,Mu).call(this):this.updateResult(),vt(this,At,Qy).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Zy(Y(this,xt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Zy(Y(this,xt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,vt(this,At,Yy).call(this),vt(this,At,Xy).call(this),Y(this,xt).removeObserver(this)}setOptions(e){const t=this.options,r=Y(this,xt);if(this.options=Y(this,yr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ms(this.options.enabled,Y(this,xt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");vt(this,At,Jy).call(this),Y(this,xt).setOptions(this.options),t._defaulted&&!zy(this.options,t)&&Y(this,yr).getQueryCache().notify({type:"observerOptionsUpdated",query:Y(this,xt),observer:this});const s=this.hasListeners();s&&IE(Y(this,xt),r,this.options,t)&&vt(this,At,Mu).call(this),this.updateResult(),s&&(Y(this,xt)!==r||ms(this.options.enabled,Y(this,xt))!==ms(t.enabled,Y(this,xt))||Lo(this.options.staleTime,Y(this,xt))!==Lo(t.staleTime,Y(this,xt)))&&vt(this,At,Hy).call(this);const o=vt(this,At,Ky).call(this);s&&(Y(this,xt)!==r||ms(this.options.enabled,Y(this,xt))!==ms(t.enabled,Y(this,xt))||o!==Y(this,Po))&&vt(this,At,Gy).call(this,o)}getOptimisticResult(e){const t=Y(this,yr).getQueryCache().build(Y(this,yr),e),r=this.createResult(t,e);return nL(this,r)&&(Oe(this,ir,r),Oe(this,xc,this.options),Oe(this,Va,Y(this,xt).state)),r}getCurrentResult(){return Y(this,ir)}trackResult(e,t){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),t==null||t(s),Reflect.get(r,s))})}trackProp(e){Y(this,Ec).add(e)}getCurrentQuery(){return Y(this,xt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=Y(this,yr).defaultQueryOptions(e),r=Y(this,yr).getQueryCache().build(Y(this,yr),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return vt(this,At,Mu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Y(this,ir)))}createResult(e,t){var D;const r=Y(this,xt),s=this.options,o=Y(this,ir),c=Y(this,Va),u=Y(this,xc),p=e!==r?e.state:Y(this,Nd),{state:g}=e;let y={...g},v=!1,b;if(t._optimisticResults){const O=this.hasListeners(),L=!O&&CE(e,t),V=O&&IE(e,r,t,s);(L||V)&&(y={...y,...kN(g.data,e.options)}),t._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:S,errorUpdatedAt:x,status:_}=y;b=y.data;let A=!1;if(t.placeholderData!==void 0&&b===void 0&&_==="pending"){let O;o!=null&&o.isPlaceholderData&&t.placeholderData===(u==null?void 0:u.placeholderData)?(O=o.data,A=!0):O=typeof t.placeholderData=="function"?t.placeholderData((D=Y(this,_c))==null?void 0:D.state.data,Y(this,_c)):t.placeholderData,O!==void 0&&(_="success",b=By(o==null?void 0:o.data,O,t),v=!0)}if(t.select&&b!==void 0&&!A)if(o&&b===(c==null?void 0:c.data)&&t.select===Y(this,Td))b=Y(this,wc);else try{Oe(this,Td,t.select),b=t.select(b),b=By(o==null?void 0:o.data,b,t),Oe(this,wc,b),Oe(this,Ao,null)}catch(O){Oe(this,Ao,O)}Y(this,Ao)&&(S=Y(this,Ao),b=Y(this,wc),x=Date.now(),_="error");const I=y.fetchStatus==="fetching",C=_==="pending",M=_==="error",U=C&&I,$=b!==void 0,k={status:_,fetchStatus:y.fetchStatus,isPending:C,isSuccess:_==="success",isError:M,isInitialLoading:U,isLoading:U,data:b,dataUpdatedAt:y.dataUpdatedAt,error:S,errorUpdatedAt:x,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>p.dataUpdateCount||y.errorUpdateCount>p.errorUpdateCount,isFetching:I,isRefetching:I&&!C,isLoadingError:M&&!$,isPaused:y.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:M&&$,isStale:hx(e,t),refetch:this.refetch,promise:Y(this,jo)};if(this.options.experimental_prefetchInRender){const O=R=>{k.status==="error"?R.reject(k.error):k.data!==void 0&&R.resolve(k.data)},L=()=>{const R=Oe(this,jo,k.promise=qy());O(R)},V=Y(this,jo);switch(V.status){case"pending":e.queryHash===r.queryHash&&O(V);break;case"fulfilled":(k.status==="error"||k.data!==V.value)&&L();break;case"rejected":(k.status!=="error"||k.error!==V.reason)&&L();break}}return k}updateResult(){const e=Y(this,ir),t=this.createResult(Y(this,xt),this.options);if(Oe(this,Va,Y(this,xt).state),Oe(this,xc,this.options),Y(this,Va).data!==void 0&&Oe(this,_c,Y(this,xt)),zy(t,e))return;Oe(this,ir,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!Y(this,Ec).size)return!0;const c=new Set(o??Y(this,Ec));return this.options.throwOnError&&c.add("error"),Object.keys(Y(this,ir)).some(u=>{const h=u;return Y(this,ir)[h]!==e[h]&&c.has(h)})};vt(this,At,LN).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&vt(this,At,Qy).call(this)}},yr=new WeakMap,xt=new WeakMap,Nd=new WeakMap,ir=new WeakMap,Va=new WeakMap,xc=new WeakMap,jo=new WeakMap,Ao=new WeakMap,Td=new WeakMap,wc=new WeakMap,_c=new WeakMap,Ua=new WeakMap,za=new WeakMap,Po=new WeakMap,Ec=new WeakMap,At=new WeakSet,Mu=function(e){vt(this,At,Jy).call(this);let t=Y(this,xt).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(vr)),t},Hy=function(){vt(this,At,Yy).call(this);const e=Lo(this.options.staleTime,Y(this,xt));if(Ga||Y(this,ir).isStale||!Uy(e))return;const r=TN(Y(this,ir).dataUpdatedAt,e)+1;Oe(this,Ua,setTimeout(()=>{Y(this,ir).isStale||this.updateResult()},r))},Ky=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Y(this,xt)):this.options.refetchInterval)??!1},Gy=function(e){vt(this,At,Xy).call(this),Oe(this,Po,e),!(Ga||ms(this.options.enabled,Y(this,xt))===!1||!Uy(Y(this,Po))||Y(this,Po)===0)&&Oe(this,za,setInterval(()=>{(this.options.refetchIntervalInBackground||dx.isFocused())&&vt(this,At,Mu).call(this)},Y(this,Po)))},Qy=function(){vt(this,At,Hy).call(this),vt(this,At,Gy).call(this,vt(this,At,Ky).call(this))},Yy=function(){Y(this,Ua)&&(clearTimeout(Y(this,Ua)),Oe(this,Ua,void 0))},Xy=function(){Y(this,za)&&(clearInterval(Y(this,za)),Oe(this,za,void 0))},Jy=function(){const e=Y(this,yr).getQueryCache().build(Y(this,yr),this.options);if(e===Y(this,xt))return;const t=Y(this,xt);Oe(this,xt,e),Oe(this,Nd,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},LN=function(e){Mn.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(Y(this,ir))}),Y(this,yr).getQueryCache().notify({query:Y(this,xt),type:"observerResultsUpdated"})})},J1);function tL(n,e){return ms(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function CE(n,e){return tL(n,e)||n.state.data!==void 0&&Zy(n,e,e.refetchOnMount)}function Zy(n,e,t){if(ms(e.enabled,n)!==!1&&Lo(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&hx(n,e)}return!1}function IE(n,e,t,r){return(n!==e||ms(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&hx(n,t)}function hx(n,e){return ms(e.enabled,n)!==!1&&n.isStaleByTime(Lo(e.staleTime,n))}function nL(n,e){return!zy(n.getCurrentResult(),e)}var rL=class extends DN{constructor(n,e){super(n,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(n){super.setOptions({...n,behavior:Xf()})}getOptimisticResult(n){return n.behavior=Xf(),super.getOptimisticResult(n)}fetchNextPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"backward"}}})}createResult(n,e){var S,x;const{state:t}=n,r=super.createResult(n,e),{isFetching:s,isRefetching:o,isError:c,isRefetchError:u}=r,h=(x=(S=t.fetchMeta)==null?void 0:S.fetchMore)==null?void 0:x.direction,p=c&&h==="forward",g=s&&h==="forward",y=c&&h==="backward",v=s&&h==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:JD(e,t.data),hasPreviousPage:ZD(e,t.data),isFetchNextPageError:p,isFetchingNextPage:g,isFetchPreviousPageError:y,isFetchingPreviousPage:v,isRefetchError:u&&!p&&!y,isRefetching:o&&!g&&!v}}},MN=E.createContext(void 0),fx=n=>{const e=E.useContext(MN);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},sL=({client:n,children:e})=>(E.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),l.jsx(MN.Provider,{value:n,children:e})),FN=E.createContext(!1),iL=()=>E.useContext(FN);FN.Provider;function oL(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var aL=E.createContext(oL()),lL=()=>E.useContext(aL),cL=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},uL=n=>{E.useEffect(()=>{n.clearReset()},[n])},dL=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:s})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(s&&n.data===void 0||UD(t,[n.error,r])),hL=n=>{if(n.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),t=n.staleTime;n.staleTime=typeof t=="function"?(...r)=>e(t(...r)):e(t),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},fL=(n,e)=>n.isLoading&&n.isFetching&&!e,pL=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,jE=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function VN(n,e,t){var y,v,b,S,x;const r=iL(),s=lL(),o=fx(),c=o.defaultQueryOptions(n);(v=(y=o.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||v.call(y,c),c._optimisticResults=r?"isRestoring":"optimistic",hL(c),cL(c,s),uL(s);const u=!o.getQueryCache().get(c.queryHash),[h]=E.useState(()=>new e(o,c)),p=h.getOptimisticResult(c),g=!r&&n.subscribed!==!1;if(E.useSyncExternalStore(E.useCallback(_=>{const A=g?h.subscribe(Mn.batchCalls(_)):vr;return h.updateResult(),A},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),E.useEffect(()=>{h.setOptions(c)},[c,h]),pL(c,p))throw jE(c,h,s);if(dL({result:p,errorResetBoundary:s,throwOnError:c.throwOnError,query:o.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw p.error;if((S=(b=o.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||S.call(b,c,p),c.experimental_prefetchInRender&&!Ga&&fL(p,r)){const _=u?jE(c,h,s):(x=o.getQueryCache().get(c.queryHash))==null?void 0:x.promise;_==null||_.catch(vr).finally(()=>{h.updateResult()})}return c.notifyOnChangeProps?p:h.trackResult(p)}function mL(n,e){return VN(n,DN)}function gL(n,e){return VN(n,rL)}/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cd(){return cd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cd.apply(this,arguments)}var ko;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ko||(ko={}));const AE="popstate";function yL(n){n===void 0&&(n={});function e(r,s){let{pathname:o,search:c,hash:u}=r.location;return ev("",{pathname:o,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Jf(s)}return xL(e,t,null,n)}function tn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function UN(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vL(){return Math.random().toString(36).substr(2,8)}function PE(n,e){return{usr:n.state,key:n.key,idx:e}}function ev(n,e,t,r){return t===void 0&&(t=null),cd({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?zc(e):e,{state:t,key:e&&e.key||r||vL()})}function Jf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function xL(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,c=s.history,u=ko.Pop,h=null,p=g();p==null&&(p=0,c.replaceState(cd({},c.state,{idx:p}),""));function g(){return(c.state||{idx:null}).idx}function y(){u=ko.Pop;let _=g(),A=_==null?null:_-p;p=_,h&&h({action:u,location:x.location,delta:A})}function v(_,A){u=ko.Push;let I=ev(x.location,_,A);p=g()+1;let C=PE(I,p),M=x.createHref(I);try{c.pushState(C,"",M)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(M)}o&&h&&h({action:u,location:x.location,delta:1})}function b(_,A){u=ko.Replace;let I=ev(x.location,_,A);p=g();let C=PE(I,p),M=x.createHref(I);c.replaceState(C,"",M),o&&h&&h({action:u,location:x.location,delta:0})}function S(_){let A=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof _=="string"?_:Jf(_);return I=I.replace(/ $/,"%20"),tn(A,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,A)}let x={get action(){return u},get location(){return n(s,c)},listen(_){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(AE,y),h=_,()=>{s.removeEventListener(AE,y),h=null}},createHref(_){return e(s,_)},createURL:S,encodeLocation(_){let A=S(_);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:v,replace:b,go(_){return c.go(_)}};return x}var RE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(RE||(RE={}));function wL(n,e,t){return t===void 0&&(t="/"),_L(n,e,t)}function _L(n,e,t,r){let s=typeof e=="string"?zc(e):e,o=Cc(s.pathname||"/",t);if(o==null)return null;let c=zN(n);EL(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let p=kL(o);u=PL(c[h],p)}return u}function zN(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(o,c,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};h.relativePath.startsWith("/")&&(tn(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let p=Mo([r,h.relativePath]),g=t.concat(h);o.children&&o.children.length>0&&(tn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),zN(o.children,e,g,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:jL(p,o.index),routesMeta:g})};return n.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,c);else for(let h of $N(o.path))s(o,c,h)}),e}function $N(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let c=$N(r.join("/")),u=[];return u.push(...c.map(h=>h===""?o:[o,h].join("/"))),s&&u.push(...c),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function EL(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:AL(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const bL=/^:[\w-]+$/,SL=3,NL=2,TL=1,CL=10,IL=-2,kE=n=>n==="*";function jL(n,e){let t=n.split("/"),r=t.length;return t.some(kE)&&(r+=IL),e&&(r+=NL),t.filter(s=>!kE(s)).reduce((s,o)=>s+(bL.test(o)?SL:o===""?TL:CL),r)}function AL(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function PL(n,e,t){let{routesMeta:r}=n,s={},o="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],p=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=tv({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},g),v=h.route;if(!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:Mo([o,y.pathname]),pathnameBase:ML(Mo([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=Mo([o,y.pathnameBase]))}return c}function tv(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=RL(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((p,g,y)=>{let{paramName:v,isOptional:b}=g;if(v==="*"){let x=u[y]||"";c=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const S=u[y];return b&&!S?p[v]=void 0:p[v]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:c,pattern:n}}function RL(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),UN(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function kL(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return UN(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Cc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function OL(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?zc(n):n;return{pathname:t?t.startsWith("/")?t:DL(t,e):e,search:FL(r),hash:VL(s)}}function DL(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function ey(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LL(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function px(n,e){let t=LL(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function mx(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=zc(n):(s=cd({},n),tn(!s.pathname||!s.pathname.includes("?"),ey("?","pathname","search",s)),tn(!s.pathname||!s.pathname.includes("#"),ey("#","pathname","hash",s)),tn(!s.search||!s.search.includes("#"),ey("#","search","hash",s)));let o=n===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let h=OL(s,u),p=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||g)&&(h.pathname+="/"),h}const Mo=n=>n.join("/").replace(/\/\/+/g,"/"),ML=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FL=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,VL=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function UL(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const BN=["post","put","patch","delete"];new Set(BN);const zL=["get",...BN];new Set(zL);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ud(){return ud=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ud.apply(this,arguments)}const kp=E.createContext(null),qN=E.createContext(null),zi=E.createContext(null),Op=E.createContext(null),ai=E.createContext({outlet:null,matches:[],isDataRoute:!1}),WN=E.createContext(null);function $L(n,e){let{relative:t}=e===void 0?{}:e;$c()||tn(!1);let{basename:r,navigator:s}=E.useContext(zi),{hash:o,pathname:c,search:u}=Dp(n,{relative:t}),h=c;return r!=="/"&&(h=c==="/"?r:Mo([r,c])),s.createHref({pathname:h,search:u,hash:o})}function $c(){return E.useContext(Op)!=null}function $i(){return $c()||tn(!1),E.useContext(Op).location}function HN(n){E.useContext(zi).static||E.useLayoutEffect(n)}function Bc(){let{isDataRoute:n}=E.useContext(ai);return n?rM():BL()}function BL(){$c()||tn(!1);let n=E.useContext(kp),{basename:e,future:t,navigator:r}=E.useContext(zi),{matches:s}=E.useContext(ai),{pathname:o}=$i(),c=JSON.stringify(px(s,t.v7_relativeSplatPath)),u=E.useRef(!1);return HN(()=>{u.current=!0}),E.useCallback(function(p,g){if(g===void 0&&(g={}),!u.current)return;if(typeof p=="number"){r.go(p);return}let y=mx(p,JSON.parse(c),o,g.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Mo([e,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[e,r,c,o,n])}const qL=E.createContext(null);function WL(n){let e=E.useContext(ai).outlet;return e&&E.createElement(qL.Provider,{value:n},e)}function KN(){let{matches:n}=E.useContext(ai),e=n[n.length-1];return e?e.params:{}}function Dp(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=E.useContext(zi),{matches:s}=E.useContext(ai),{pathname:o}=$i(),c=JSON.stringify(px(s,r.v7_relativeSplatPath));return E.useMemo(()=>mx(n,JSON.parse(c),o,t==="path"),[n,c,o,t])}function HL(n,e){return KL(n,e)}function KL(n,e,t,r){$c()||tn(!1);let{navigator:s}=E.useContext(zi),{matches:o}=E.useContext(ai),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let p=$i(),g;if(e){var y;let _=typeof e=="string"?zc(e):e;h==="/"||(y=_.pathname)!=null&&y.startsWith(h)||tn(!1),g=_}else g=p;let v=g.pathname||"/",b=v;if(h!=="/"){let _=h.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let S=wL(n,{pathname:b}),x=JL(S&&S.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:Mo([h,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:Mo([h,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,t,r);return e&&x?E.createElement(Op.Provider,{value:{location:ud({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:ko.Pop}},x):x}function GL(){let n=nM(),e=UL(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:s},t):null,null)}const QL=E.createElement(GL,null);class YL extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?E.createElement(ai.Provider,{value:this.props.routeContext},E.createElement(WN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XL(n){let{routeContext:e,match:t,children:r}=n,s=E.useContext(kp);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(ai.Provider,{value:e},r)}function JL(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,u=(s=t)==null?void 0:s.errors;if(u!=null){let g=c.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);g>=0||tn(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,p=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let y=c[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:v,errors:b}=t,S=y.route.loader&&v[y.route.id]===void 0&&(!b||b[y.route.id]===void 0);if(y.route.lazy||S){h=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((g,y,v)=>{let b,S=!1,x=null,_=null;t&&(b=u&&y.route.id?u[y.route.id]:void 0,x=y.route.errorElement||QL,h&&(p<0&&v===0?(sM("route-fallback"),S=!0,_=null):p===v&&(S=!0,_=y.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,v+1)),I=()=>{let C;return b?C=x:S?C=_:y.route.Component?C=E.createElement(y.route.Component,null):y.route.element?C=y.route.element:C=g,E.createElement(XL,{match:y,routeContext:{outlet:g,matches:A,isDataRoute:t!=null},children:C})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?E.createElement(YL,{location:t.location,revalidation:t.revalidation,component:x,error:b,children:I(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):I()},null)}var GN=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(GN||{}),QN=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(QN||{});function ZL(n){let e=E.useContext(kp);return e||tn(!1),e}function eM(n){let e=E.useContext(qN);return e||tn(!1),e}function tM(n){let e=E.useContext(ai);return e||tn(!1),e}function YN(n){let e=tM(),t=e.matches[e.matches.length-1];return t.route.id||tn(!1),t.route.id}function nM(){var n;let e=E.useContext(WN),t=eM(),r=YN();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function rM(){let{router:n}=ZL(GN.UseNavigateStable),e=YN(QN.UseNavigateStable),t=E.useRef(!1);return HN(()=>{t.current=!0}),E.useCallback(function(s,o){o===void 0&&(o={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,ud({fromRouteId:e},o)))},[n,e])}const OE={};function sM(n,e,t){OE[n]||(OE[n]=!0)}function Af(n){let{to:e,replace:t,state:r,relative:s}=n;$c()||tn(!1);let{future:o,static:c}=E.useContext(zi),{matches:u}=E.useContext(ai),{pathname:h}=$i(),p=Bc(),g=mx(e,px(u,o.v7_relativeSplatPath),h,s==="path"),y=JSON.stringify(g);return E.useEffect(()=>p(JSON.parse(y),{replace:t,state:r,relative:s}),[p,y,s,t,r]),null}function iM(n){return WL(n.context)}function Ht(n){tn(!1)}function oM(n){let{basename:e="/",children:t=null,location:r,navigationType:s=ko.Pop,navigator:o,static:c=!1,future:u}=n;$c()&&tn(!1);let h=e.replace(/^\/*/,"/"),p=E.useMemo(()=>({basename:h,navigator:o,static:c,future:ud({v7_relativeSplatPath:!1},u)}),[h,u,o,c]);typeof r=="string"&&(r=zc(r));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:S="default"}=r,x=E.useMemo(()=>{let _=Cc(g,h);return _==null?null:{location:{pathname:_,search:y,hash:v,state:b,key:S},navigationType:s}},[h,g,y,v,b,S,s]);return x==null?null:E.createElement(zi.Provider,{value:p},E.createElement(Op.Provider,{children:t,value:x}))}function aM(n){let{children:e,location:t}=n;return HL(nv(e),t)}new Promise(()=>{});function nv(n,e){e===void 0&&(e=[]);let t=[];return E.Children.forEach(n,(r,s)=>{if(!E.isValidElement(r))return;let o=[...e,s];if(r.type===E.Fragment){t.push.apply(t,nv(r.props.children,o));return}r.type!==Ht&&tn(!1),!r.props.index||!r.props.children||tn(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=nv(r.props.children,o)),t.push(c)}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zf(){return Zf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Zf.apply(this,arguments)}function XN(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function lM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function cM(n,e){return n.button===0&&(!e||e==="_self")&&!lM(n)}function rv(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function uM(n,e){let t=rv(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(o=>{t.append(s,o)})}),t}const dM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],hM=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],fM="6";try{window.__reactRouterVersion=fM}catch{}const pM=E.createContext({isTransitioning:!1}),mM="startTransition",DE=eS[mM];function gM(n){let{basename:e,children:t,future:r,window:s}=n,o=E.useRef();o.current==null&&(o.current=yL({window:s,v5Compat:!0}));let c=o.current,[u,h]=E.useState({action:c.action,location:c.location}),{v7_startTransition:p}=r||{},g=E.useCallback(y=>{p&&DE?DE(()=>h(y)):h(y)},[h,p]);return E.useLayoutEffect(()=>c.listen(g),[c,g]),E.createElement(oM,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:c,future:r})}const yM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jn=E.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:o,replace:c,state:u,target:h,to:p,preventScrollReset:g,unstable_viewTransition:y}=e,v=XN(e,dM),{basename:b}=E.useContext(zi),S,x=!1;if(typeof p=="string"&&vM.test(p)&&(S=p,yM))try{let C=new URL(window.location.href),M=p.startsWith("//")?new URL(C.protocol+p):new URL(p),U=Cc(M.pathname,b);M.origin===C.origin&&U!=null?p=U+M.search+M.hash:x=!0}catch{}let _=$L(p,{relative:s}),A=wM(p,{replace:c,state:u,target:h,preventScrollReset:g,relative:s,unstable_viewTransition:y});function I(C){r&&r(C),C.defaultPrevented||A(C)}return E.createElement("a",Zf({},v,{href:S||_,onClick:x||o?r:I,ref:t,target:h}))}),LE=E.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:s=!1,className:o="",end:c=!1,style:u,to:h,unstable_viewTransition:p,children:g}=e,y=XN(e,hM),v=Dp(h,{relative:y.relative}),b=$i(),S=E.useContext(qN),{navigator:x,basename:_}=E.useContext(zi),A=S!=null&&_M(v)&&p===!0,I=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,C=b.pathname,M=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;s||(C=C.toLowerCase(),M=M?M.toLowerCase():null,I=I.toLowerCase()),M&&_&&(M=Cc(M,_)||M);const U=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let $=C===I||!c&&C.startsWith(I)&&C.charAt(U)==="/",P=M!=null&&(M===I||!c&&M.startsWith(I)&&M.charAt(I.length)==="/"),k={isActive:$,isPending:P,isTransitioning:A},D=$?r:void 0,O;typeof o=="function"?O=o(k):O=[o,$?"active":null,P?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let L=typeof u=="function"?u(k):u;return E.createElement(Jn,Zf({},y,{"aria-current":D,className:O,ref:t,style:L,to:h,unstable_viewTransition:p}),typeof g=="function"?g(k):g)});var sv;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(sv||(sv={}));var ME;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(ME||(ME={}));function xM(n){let e=E.useContext(kp);return e||tn(!1),e}function wM(n,e){let{target:t,replace:r,state:s,preventScrollReset:o,relative:c,unstable_viewTransition:u}=e===void 0?{}:e,h=Bc(),p=$i(),g=Dp(n,{relative:c});return E.useCallback(y=>{if(cM(y,t)){y.preventDefault();let v=r!==void 0?r:Jf(p)===Jf(g);h(n,{replace:v,state:s,preventScrollReset:o,relative:c,unstable_viewTransition:u})}},[p,h,g,r,s,t,n,o,c,u])}function Pd(n){let e=E.useRef(rv(n)),t=E.useRef(!1),r=$i(),s=E.useMemo(()=>uM(r.search,t.current?null:e.current),[r.search]),o=Bc(),c=E.useCallback((u,h)=>{const p=rv(typeof u=="function"?u(s):u);t.current=!0,o("?"+p,h)},[o,s]);return[s,c]}function _M(n,e){e===void 0&&(e={});let t=E.useContext(pM);t==null&&tn(!1);let{basename:r}=xM(sv.useViewTransitionState),s=Dp(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Cc(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Cc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return tv(s.pathname,c)!=null||tv(s.pathname,o)!=null}const EM=()=>{};var FE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},bM=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],c=n[t++],u=n[t++],h=((s&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},ZN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],c=s+1<n.length,u=c?n[s+1]:0,h=s+2<n.length,p=h?n[s+2]:0,g=o>>2,y=(o&3)<<4|u>>4;let v=(u&15)<<2|p>>6,b=p&63;h||(b=64,c||(v=64)),r.push(t[g],t[y],t[v],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(JN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):bM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||u==null||p==null||y==null)throw new SM;const v=o<<2|u>>4;if(r.push(v),p!==64){const b=u<<4&240|p>>2;if(r.push(b),y!==64){const S=p<<6&192|y;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class SM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NM=function(n){const e=JN(n);return ZN.encodeByteArray(e,!0)},ep=function(n){return NM(n).replace(/\./g,"")},eT=function(n){try{return ZN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=()=>TM().__FIREBASE_DEFAULTS__,IM=()=>{if(typeof process>"u"||typeof FE>"u")return;const n=FE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&eT(n[1]);return e&&JSON.parse(e)},Lp=()=>{try{return EM()||CM()||IM()||jM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tT=n=>{var e,t;return(t=(e=Lp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},AM=n=>{const e=tT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},nT=()=>{var n;return(n=Lp())===null||n===void 0?void 0:n.config},rT=n=>{var e;return(e=Lp())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gx(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ep(JSON.stringify(t)),ep(JSON.stringify(c)),""].join(".")}const Yu={};function kM(){const n={prod:[],emulator:[]};for(const e of Object.keys(Yu))Yu[e]?n.emulator.push(e):n.prod.push(e);return n}function OM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let VE=!1;function sT(n,e){if(typeof window>"u"||typeof document>"u"||!il(window.location.host)||Yu[n]===e||Yu[n]||VE)return;Yu[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=kM().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function p(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{VE=!0,c()},v}function g(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=OM(r),b=t("text"),S=document.getElementById(b)||document.createElement("span"),x=t("learnmore"),_=document.getElementById(x)||document.createElement("a"),A=t("preprendIcon"),I=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const C=v.element;u(C),g(_,x);const M=p();h(I,A),C.append(I,S,_,M),document.body.appendChild(C)}o?(S.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zn())}function LM(){var n;const e=(n=Lp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FM(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function VM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UM(){const n=Zn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function zM(){return!LM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $M(){try{return typeof indexedDB=="object"}catch{return!1}}function BM(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="FirebaseError";class li extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=qM,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rd.prototype.create)}}class Rd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?WM(o,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new li(s,u,r)}}function WM(n,e){return n.replace(HM,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const HM=/\{\$([^}]+)}/g;function KM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],c=e[s];if(UE(o)&&UE(c)){if(!Qa(o,c))return!1}else if(o!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function UE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Vu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function GM(n,e){const t=new QM(n,e);return t.subscribe.bind(t)}class QM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");YM(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=ty),s.error===void 0&&(s.error=ty),s.complete===void 0&&(s.complete=ty);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ty(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(n){return n&&n._delegate?n._delegate:n}class Qo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new PM;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZM(e))try{this.getOrInitializeService({instanceIdentifier:Pa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pa){return this.instances.has(e)}getOptions(e=Pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&c.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JM(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pa){return this.component?this.component.multipleInstances?e:Pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JM(n){return n===Pa?void 0:n}function ZM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new XM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ht||(ht={}));const t4={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},n4=ht.INFO,r4={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},s4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=r4[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yx{constructor(e){this.name=e,this._logLevel=n4,this._logHandler=s4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?t4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}}const i4=(n,e)=>e.some(t=>n instanceof t);let zE,$E;function o4(){return zE||(zE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a4(){return $E||($E=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iT=new WeakMap,iv=new WeakMap,oT=new WeakMap,ny=new WeakMap,vx=new WeakMap;function l4(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Fo(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&iT.set(t,n)}).catch(()=>{}),vx.set(e,n),e}function c4(n){if(iv.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});iv.set(n,e)}let ov={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return iv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||oT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function u4(n){ov=n(ov)}function d4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ry(this),e,...t);return oT.set(r,e.sort?e.sort():[e]),Fo(r)}:a4().includes(n)?function(...e){return n.apply(ry(this),e),Fo(iT.get(this))}:function(...e){return Fo(n.apply(ry(this),e))}}function h4(n){return typeof n=="function"?d4(n):(n instanceof IDBTransaction&&c4(n),i4(n,o4())?new Proxy(n,ov):n)}function Fo(n){if(n instanceof IDBRequest)return l4(n);if(ny.has(n))return ny.get(n);const e=h4(n);return e!==n&&(ny.set(n,e),vx.set(e,n)),e}const ry=n=>vx.get(n);function f4(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const c=indexedDB.open(n,e),u=Fo(c);return r&&c.addEventListener("upgradeneeded",h=>{r(Fo(c.result),h.oldVersion,h.newVersion,Fo(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const p4=["get","getKey","getAll","getAllKeys","count"],m4=["put","add","delete","clear"],sy=new Map;function BE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(sy.get(e))return sy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=m4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||p4.includes(t)))return;const o=async function(c,...u){const h=this.transaction(c,s?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[t](...u),s&&h.done]))[0]};return sy.set(e,o),o}u4(n=>({...n,get:(e,t,r)=>BE(e,t)||n.get(e,t,r),has:(e,t)=>!!BE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(y4(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function y4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const av="@firebase/app",qE="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new yx("@firebase/app"),v4="@firebase/app-compat",x4="@firebase/analytics-compat",w4="@firebase/analytics",_4="@firebase/app-check-compat",E4="@firebase/app-check",b4="@firebase/auth",S4="@firebase/auth-compat",N4="@firebase/database",T4="@firebase/data-connect",C4="@firebase/database-compat",I4="@firebase/functions",j4="@firebase/functions-compat",A4="@firebase/installations",P4="@firebase/installations-compat",R4="@firebase/messaging",k4="@firebase/messaging-compat",O4="@firebase/performance",D4="@firebase/performance-compat",L4="@firebase/remote-config",M4="@firebase/remote-config-compat",F4="@firebase/storage",V4="@firebase/storage-compat",U4="@firebase/firestore",z4="@firebase/ai",$4="@firebase/firestore-compat",B4="firebase",q4="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="[DEFAULT]",W4={[av]:"fire-core",[v4]:"fire-core-compat",[w4]:"fire-analytics",[x4]:"fire-analytics-compat",[E4]:"fire-app-check",[_4]:"fire-app-check-compat",[b4]:"fire-auth",[S4]:"fire-auth-compat",[N4]:"fire-rtdb",[T4]:"fire-data-connect",[C4]:"fire-rtdb-compat",[I4]:"fire-fn",[j4]:"fire-fn-compat",[A4]:"fire-iid",[P4]:"fire-iid-compat",[R4]:"fire-fcm",[k4]:"fire-fcm-compat",[O4]:"fire-perf",[D4]:"fire-perf-compat",[L4]:"fire-rc",[M4]:"fire-rc-compat",[F4]:"fire-gcs",[V4]:"fire-gcs-compat",[U4]:"fire-fst",[$4]:"fire-fst-compat",[z4]:"fire-vertex","fire-js":"fire-js",[B4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=new Map,H4=new Map,cv=new Map;function WE(n,e){try{n.container.addComponent(e)}catch(t){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ya(n){const e=n.name;if(cv.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;cv.set(e,n);for(const t of tp.values())WE(t,n);for(const t of H4.values())WE(t,n);return!0}function Mp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Qr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vo=new Rd("app","Firebase",K4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=q4;function aT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:lv,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Vo.create("bad-app-name",{appName:String(s)});if(t||(t=nT()),!t)throw Vo.create("no-options");const o=tp.get(s);if(o){if(Qa(t,o.options)&&Qa(r,o.config))return o;throw Vo.create("duplicate-app",{appName:s})}const c=new e4(s);for(const h of cv.values())c.addComponent(h);const u=new G4(t,r,c);return tp.set(s,u),u}function lT(n=lv){const e=tp.get(n);if(!e&&n===lv&&nT())return aT();if(!e)throw Vo.create("no-app",{appName:n});return e}function Hs(n,e,t){var r;let s=(r=W4[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(u.join(" "));return}Ya(new Qo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4="firebase-heartbeat-database",Y4=1,dd="firebase-heartbeat-store";let iy=null;function cT(){return iy||(iy=f4(Q4,Y4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(dd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vo.create("idb-open",{originalErrorMessage:n.message})})),iy}async function X4(n){try{const t=(await cT()).transaction(dd),r=await t.objectStore(dd).get(uT(n));return await t.done,r}catch(e){if(e instanceof li)Li.warn(e.message);else{const t=Vo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Li.warn(t.message)}}}async function HE(n,e){try{const r=(await cT()).transaction(dd,"readwrite");await r.objectStore(dd).put(e,uT(n)),await r.done}catch(t){if(t instanceof li)Li.warn(t.message);else{const r=Vo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Li.warn(r.message)}}}function uT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=1024,Z4=30;class eF{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nF(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=KE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>Z4){const c=rF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Li.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=KE(),{heartbeatsToSend:r,unsentEntries:s}=tF(this._heartbeatsCache.heartbeats),o=ep(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Li.warn(t),""}}}function KE(){return new Date().toISOString().substring(0,10)}function tF(n,e=J4){const t=[];let r=n.slice();for(const s of n){const o=t.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),GE(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),GE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class nF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $M()?BM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await X4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return HE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return HE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function GE(n){return ep(JSON.stringify({version:2,heartbeats:n})).length}function rF(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(n){Ya(new Qo("platform-logger",e=>new g4(e),"PRIVATE")),Ya(new Qo("heartbeat",e=>new eF(e),"PRIVATE")),Hs(av,qE,n),Hs(av,qE,"esm2017"),Hs("fire-js","")}sF("");var Xn=function(){return Xn=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Xn.apply(this,arguments)};function qc(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function dT(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}function hT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iF=hT,fT=new Rd("auth","Firebase",hT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=new yx("@firebase/auth");function oF(n,...e){np.logLevel<=ht.WARN&&np.warn(`Auth (${ol}): ${n}`,...e)}function Pf(n,...e){np.logLevel<=ht.ERROR&&np.error(`Auth (${ol}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(n,...e){throw xx(n,...e)}function Ks(n,...e){return xx(n,...e)}function pT(n,e,t){const r=Object.assign(Object.assign({},iF()),{[e]:t});return new Rd("auth","Firebase",r).create(e,{appName:n.name})}function Uo(n){return pT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xx(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return fT.create(n,...e)}function Je(n,e,...t){if(!n)throw xx(e,...t)}function Pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Pf(e),new Error(e)}function Mi(n,e){n||Pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function aF(){return QE()==="http:"||QE()==="https:"}function QE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aF()||FM()||"connection"in navigator)?navigator.onLine:!0}function cF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mi(t>e,"Short delay should be less than long delay!"),this.isMobile=DM()||VM()}get(){return lF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(n,e){Mi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hF=new Od(3e4,6e4);function al(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function sa(n,e,t,r,s={}){return gT(n,s,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const u=kd(Object.assign({key:n.config.apiKey},c)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:h},o);return MM()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&il(n.emulatorConfig.host)&&(p.credentials="include"),mT.fetch()(await yT(n,n.config.apiHost,t,u),p)})}async function gT(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},uF),e);try{const s=new pF(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw ff(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[h,p]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ff(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw ff(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw ff(n,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw pT(n,g,p);bs(n,g)}}catch(s){if(s instanceof li)throw s;bs(n,"network-request-failed",{message:String(s)})}}async function Fp(n,e,t,r,s={}){const o=await sa(n,e,t,r,s);return"mfaPendingCredential"in o&&bs(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function yT(n,e,t,r){const s=`${e}${t}?${r}`,o=n,c=o.config.emulator?wx(n.config,s):`${n.config.apiScheme}://${s}`;return dF.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function fF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ks(this.auth,"network-request-failed")),hF.get())})}}function ff(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Ks(n,e,r);return s.customData._tokenResponse=t,s}function YE(n){return n!==void 0&&n.enterprise!==void 0}class mF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return fF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gF(n,e){return sa(n,"GET","/v2/recaptchaConfig",al(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yF(n,e){return sa(n,"POST","/v1/accounts:delete",e)}async function rp(n,e){return sa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vF(n,e=!1){const t=xn(n),r=await t.getIdToken(e),s=_x(r);Je(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Xu(oy(s.auth_time)),issuedAtTime:Xu(oy(s.iat)),expirationTime:Xu(oy(s.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function oy(n){return Number(n)*1e3}function _x(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{const s=eT(t);return s?JSON.parse(s):(Pf("Failed to decode base64 JWT payload"),null)}catch(s){return Pf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function XE(n){const e=_x(n);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof li&&xF(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function xF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xu(this.lastLoginAt),this.creationTime=Xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sp(n){var e;const t=n.auth,r=await n.getIdToken(),s=await hd(n,rp(t,{idToken:r}));Je(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?vT(o.providerUserInfo):[],u=EF(n.providerData,c),h=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),g=h?p:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new dv(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function _F(n){const e=xn(n);await sp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EF(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function vT(n){return n.map(e=>{var{providerId:t}=e,r=qc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bF(n,e){const t=await gT(n,{},async()=>{const r=kd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,c=await yT(n,s,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return n.emulatorConfig&&il(n.emulatorConfig.host)&&(h.credentials="include"),mT.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function SF(n,e){return sa(n,"POST","/v2/accounts:revokeToken",al(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Je(e.length!==0,"internal-error");const t=XE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await bF(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,c=new oc;return r&&(Je(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Je(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(Je(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oc,this.toJSON())}_performRefresh(){return Pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(n,e){Je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ys{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=qc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new dv(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await hd(this,this.stsTokenManager.getToken(this.auth,e));return Je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vF(this,e)}reload(){return _F(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ys(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await sp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qr(this.auth.app))return Promise.reject(Uo(this.auth));const e=await this.getIdToken();return await hd(this,yF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,c,u,h,p,g;const y=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(s=t.email)!==null&&s!==void 0?s:void 0,b=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(c=t.photoURL)!==null&&c!==void 0?c:void 0,x=(u=t.tenantId)!==null&&u!==void 0?u:void 0,_=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,A=(p=t.createdAt)!==null&&p!==void 0?p:void 0,I=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:C,emailVerified:M,isAnonymous:U,providerData:$,stsTokenManager:P}=t;Je(C&&P,e,"internal-error");const k=oc.fromJSON(this.name,P);Je(typeof C=="string",e,"internal-error"),yo(y,e.name),yo(v,e.name),Je(typeof M=="boolean",e,"internal-error"),Je(typeof U=="boolean",e,"internal-error"),yo(b,e.name),yo(S,e.name),yo(x,e.name),yo(_,e.name),yo(A,e.name),yo(I,e.name);const D=new ys({uid:C,auth:e,email:v,emailVerified:M,displayName:y,isAnonymous:U,photoURL:S,phoneNumber:b,tenantId:x,stsTokenManager:k,createdAt:A,lastLoginAt:I});return $&&Array.isArray($)&&(D.providerData=$.map(O=>Object.assign({},O))),_&&(D._redirectEventId=_),D}static async _fromIdTokenResponse(e,t,r=!1){const s=new oc;s.updateFromServerResponse(t);const o=new ys({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await sp(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Je(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?vT(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),u=new oc;u.updateFromIdToken(r);const h=new ys({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new dv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=new Map;function Ri(n){Mi(n instanceof Function,"Expected a class definition");let e=JE.get(n);return e?(Mi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,JE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xT.type="NONE";const ZE=xT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(n,e,t){return`firebase:${n}:${e}:${t}`}class ac{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Rf(this.userKey,s.apiKey,o),this.fullPersistenceKey=Rf("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await rp(this.auth,{idToken:e}).catch(()=>{});return t?ys._fromGetAccountInfoResponse(this.auth,t,e):null}return ys._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ac(Ri(ZE),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Ri(ZE);const c=Rf(r,e.config.apiKey,e.name);let u=null;for(const p of t)try{const g=await p._get(c);if(g){let y;if(typeof g=="string"){const v=await rp(e,{idToken:g}).catch(()=>{});if(!v)break;y=await ys._fromGetAccountInfoResponse(e,v,g)}else y=ys._fromJSON(e,g);p!==o&&(u=y),o=p;break}}catch{}const h=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new ac(o,e,r):(o=h[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(c)}catch{}})),new ac(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NT(e))return"Blackberry";if(TT(e))return"Webos";if(_T(e))return"Safari";if((e.includes("chrome/")||ET(e))&&!e.includes("edge/"))return"Chrome";if(ST(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wT(n=Zn()){return/firefox\//i.test(n)}function _T(n=Zn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ET(n=Zn()){return/crios\//i.test(n)}function bT(n=Zn()){return/iemobile/i.test(n)}function ST(n=Zn()){return/android/i.test(n)}function NT(n=Zn()){return/blackberry/i.test(n)}function TT(n=Zn()){return/webos/i.test(n)}function Ex(n=Zn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function NF(n=Zn()){var e;return Ex(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TF(){return UM()&&document.documentMode===10}function CT(n=Zn()){return Ex(n)||ST(n)||TT(n)||NT(n)||/windows phone/i.test(n)||bT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(n,e=[]){let t;switch(n){case"Browser":t=eb(Zn());break;case"Worker":t=`${eb(Zn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ol}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,u)=>{try{const h=e(o);c(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IF(n,e={}){return sa(n,"GET","/v2/passwordPolicy",al(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF=6;class AF{constructor(e){var t,r,s,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:jF,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,c,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tb(this),this.idTokenSubscription=new tb(this),this.beforeStateQueue=new CF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ri(t)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await ac.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rp(this,{idToken:e}),r=await ys._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Qr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&(h!=null&&h.user)&&(s=h.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sp(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qr(this.app))return Promise.reject(Uo(this));const t=e?xn(e):null;return t&&Je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qr(this.app)?Promise.reject(Uo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qr(this.app)?Promise.reject(Uo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IF(this),t=new AF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await SF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ri(e)||this._popupRedirectResolver;Je(t,this,"argument-error"),this.redirectPersistenceManager=await ac.create(this,[Ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,s);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&oF(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Wc(n){return xn(n)}class tb{constructor(e){this.auth=e,this.observer=null,this.addObserver=GM(t=>this.observer=t)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RF(n){Vp=n}function jT(n){return Vp.loadJS(n)}function kF(){return Vp.recaptchaEnterpriseScript}function OF(){return Vp.gapiScript}function DF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class LF{constructor(){this.enterprise=new MF}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class MF{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const FF="recaptcha-enterprise",AT="NO_RECAPTCHA";class VF{constructor(e){this.type=FF,this.auth=Wc(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{gF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const p=new mF(h);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,c(p.siteKey)}}).catch(h=>{u(h)})})}function s(o,c,u){const h=window.grecaptcha;YE(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(p=>{c(p)}).catch(()=>{c(AT)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new LF().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(u=>{if(!t&&YE(window.grecaptcha))s(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=kF();h.length!==0&&(h+=u),jT(h).then(()=>{s(u,o,c)}).catch(p=>{c(p)})}}).catch(u=>{c(u)})})}}async function nb(n,e,t,r=!1,s=!1){const o=new VF(n);let c;if(s)c=AT;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,p=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function rb(n,e,t,r,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await nb(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await nb(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(n,e){const t=Mp(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Qa(o,e??{}))return s;bs(s,"already-initialized")}return t.initialize({options:e})}function zF(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ri);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $F(n,e,t){const r=Wc(n);Je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=PT(e),{host:c,port:u}=BF(e),h=u===null?"":`:${u}`,p={url:`${o}//${c}${h}/`},g=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Je(Qa(p,r.config.emulator)&&Qa(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,il(c)?(gx(`${o}//${c}${h}`),sT("Auth",!0)):qF()}function PT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function BF(n){const e=PT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:sb(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:sb(c)}}}function sb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function qF(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pi("not implemented")}_getIdTokenResponse(e){return Pi("not implemented")}_linkToIdToken(e,t){return Pi("not implemented")}_getReauthenticationResolver(e){return Pi("not implemented")}}async function WF(n,e){return sa(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HF(n,e){return Fp(n,"POST","/v1/accounts:signInWithPassword",al(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KF(n,e){return Fp(n,"POST","/v1/accounts:signInWithEmailLink",al(n,e))}async function GF(n,e){return Fp(n,"POST","/v1/accounts:signInWithEmailLink",al(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd extends bx{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new fd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new fd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rb(e,t,"signInWithPassword",HF);case"emailLink":return KF(e,{email:this._email,oobCode:this._password});default:bs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rb(e,r,"signUpPassword",WF);case"emailLink":return GF(e,{idToken:t,email:this._email,oobCode:this._password});default:bs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(n,e){return Fp(n,"POST","/v1/accounts:signInWithIdp",al(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF="http://localhost";class Xa extends bx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):bs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=qc(t,["providerId","signInMethod"]);if(!r||!s)return null;const c=new Xa(r,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return lc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,lc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,lc(e,t)}buildRequest(){const e={requestUri:QF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=kd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XF(n){const e=Fu(Vu(n)).link,t=e?Fu(Vu(e)).deep_link_id:null,r=Fu(Vu(n)).deep_link_id;return(r?Fu(Vu(r)).link:null)||r||t||e||n}class Sx{constructor(e){var t,r,s,o,c,u;const h=Fu(Vu(e)),p=(t=h.apiKey)!==null&&t!==void 0?t:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,y=YF((s=h.mode)!==null&&s!==void 0?s:null);Je(p&&g&&y,"argument-error"),this.apiKey=p,this.operation=y,this.code=g,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=XF(e);try{return new Sx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this.providerId=Hc.PROVIDER_ID}static credential(e,t){return fd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Sx.parseLink(t);return Je(r,"argument-error"),fd._fromEmailAndCode(e,r.code,r.tenantId)}}Hc.PROVIDER_ID="password";Hc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends RT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Dd{constructor(){super("facebook.com")}static credential(e){return Xa._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wo.credential(e.oauthAccessToken)}catch{return null}}}wo.FACEBOOK_SIGN_IN_METHOD="facebook.com";wo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends Dd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Xa._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return _o.credential(t,r)}catch{return null}}}_o.GOOGLE_SIGN_IN_METHOD="google.com";_o.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Dd{constructor(){super("github.com")}static credential(e){return Xa._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Eo.credential(e.oauthAccessToken)}catch{return null}}}Eo.GITHUB_SIGN_IN_METHOD="github.com";Eo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends Dd{constructor(){super("twitter.com")}static credential(e,t){return Xa._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return bo.credential(t,r)}catch{return null}}}bo.TWITTER_SIGN_IN_METHOD="twitter.com";bo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await ys._fromIdTokenResponse(e,r,s),c=ib(r);return new Ic({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=ib(r);return new Ic({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function ib(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip extends li{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ip.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new ip(e,t,r,s)}}function kT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ip._fromErrorAndOperation(n,o,e,r):o})}async function JF(n,e,t=!1){const r=await hd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ic._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZF(n,e,t=!1){const{auth:r}=n;if(Qr(r.app))return Promise.reject(Uo(r));const s="reauthenticate";try{const o=await hd(n,kT(r,s,e,n),t);Je(o.idToken,r,"internal-error");const c=_x(o.idToken);Je(c,r,"internal-error");const{sub:u}=c;return Je(n.uid===u,r,"user-mismatch"),Ic._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&bs(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OT(n,e,t=!1){if(Qr(n.app))return Promise.reject(Uo(n));const r="signIn",s=await kT(n,r,e),o=await Ic._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function eV(n,e){return OT(Wc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tV(n){const e=Wc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function nV(n,e,t){return Qr(n.app)?Promise.reject(Uo(n)):eV(xn(n),Hc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tV(n),r})}function rV(n,e,t,r){return xn(n).onIdTokenChanged(e,t,r)}function sV(n,e,t){return xn(n).beforeAuthStateChanged(e,t)}function iV(n,e,t,r){return xn(n).onAuthStateChanged(e,t,r)}function oV(n){return xn(n).signOut()}const op="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(op,"1"),this.storage.removeItem(op),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=1e3,lV=10;class LT extends DT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);TF()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,lV):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},aV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}LT.type="LOCAL";const cV=LT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT extends DT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}MT.type="SESSION";const FT=MT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Up(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async p=>p(t.origin,o)),h=await uV(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Up.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((u,h)=>{const p=Nx("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===p)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(){return window}function hV(n){Gs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(){return typeof Gs().WorkerGlobalScope<"u"&&typeof Gs().importScripts=="function"}async function fV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function mV(){return VT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="firebaseLocalStorageDb",gV=1,ap="firebaseLocalStorage",zT="fbase_key";class Ld{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zp(n,e){return n.transaction([ap],e?"readwrite":"readonly").objectStore(ap)}function yV(){const n=indexedDB.deleteDatabase(UT);return new Ld(n).toPromise()}function hv(){const n=indexedDB.open(UT,gV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ap,{keyPath:zT})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ap)?e(r):(r.close(),await yV(),e(await hv()))})})}async function ob(n,e,t){const r=zp(n,!0).put({[zT]:e,value:t});return new Ld(r).toPromise()}async function vV(n,e){const t=zp(n,!1).get(e),r=await new Ld(t).toPromise();return r===void 0?null:r.value}function ab(n,e){const t=zp(n,!0).delete(e);return new Ld(t).toPromise()}const xV=800,wV=3;class $T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>wV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Up._getInstance(mV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await fV(),!this.activeServiceWorker)return;this.sender=new dV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hv();return await ob(e,op,"1"),await ab(e,op),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ob(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>vV(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ab(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=zp(s,!1).getAll();return new Ld(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$T.type="LOCAL";const _V=$T;new Od(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(n,e){return e?Ri(e):(Je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx extends bx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return lc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return lc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function bV(n){return OT(n.auth,new Tx(n),n.bypassAuthState)}function SV(n){const{auth:e,user:t}=n;return Je(t,e,"internal-error"),ZF(t,new Tx(n),n.bypassAuthState)}async function NV(n){const{auth:e,user:t}=n;return Je(t,e,"internal-error"),JF(t,new Tx(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bV;case"linkViaPopup":case"linkViaRedirect":return NV;case"reauthViaPopup":case"reauthViaRedirect":return SV;default:bs(this.auth,"internal-error")}}resolve(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=new Od(2e3,1e4);class rc extends BT{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,rc.currentPopupAction&&rc.currentPopupAction.cancel(),rc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Je(e,this.auth,"internal-error"),e}async onExecution(){Mi(this.filter.length===1,"Popup operations only handle one event");const e=Nx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TV.get())};e()}}rc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="pendingRedirect",kf=new Map;class IV extends BT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=kf.get(this.auth._key());if(!e){try{const r=await jV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}kf.set(this.auth._key(),e)}return this.bypassAuthState||kf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jV(n,e){const t=RV(e),r=PV(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function AV(n,e){kf.set(n._key(),e)}function PV(n){return Ri(n._redirectPersistence)}function RV(n){return Rf(CV,n.config.apiKey,n.name)}async function kV(n,e,t=!1){if(Qr(n.app))return Promise.reject(Uo(n));const r=Wc(n),s=EV(r,e),c=await new IV(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=10*60*1e3;class DV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!qT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ks(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OV&&this.cachedEventUids.clear(),this.cachedEventUids.has(lb(e))}saveEventToCache(e){this.cachedEventUids.add(lb(e)),this.lastProcessedEventTime=Date.now()}}function lb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function qT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(n,e={}){return sa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VV=/^https?/;async function UV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await MV(n);for(const t of e)try{if(zV(t))return}catch{}bs(n,"unauthorized-domain")}function zV(n){const e=uv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!VV.test(t))return!1;if(FV.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=new Od(3e4,6e4);function cb(){const n=Gs().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function BV(n){return new Promise((e,t)=>{var r,s,o;function c(){cb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cb(),t(Ks(n,"network-request-failed"))},timeout:$V.get()})}if(!((s=(r=Gs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Gs().gapi)===null||o===void 0)&&o.load)c();else{const u=DF("iframefcb");return Gs()[u]=()=>{gapi.load?c():t(Ks(n,"network-request-failed"))},jT(`${OF()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw Of=null,e})}let Of=null;function qV(n){return Of=Of||BV(n),Of}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=new Od(5e3,15e3),HV="__/auth/iframe",KV="emulator/auth/iframe",GV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YV(n){const e=n.config;Je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?wx(e,KV):`https://${n.config.authDomain}/${HV}`,r={apiKey:e.apiKey,appName:n.name,v:ol},s=QV.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${kd(r).slice(1)}`}async function XV(n){const e=await qV(n),t=Gs().gapi;return Je(t,n,"internal-error"),e.open({where:document.body,url:YV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GV,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const c=Ks(n,"network-request-failed"),u=Gs().setTimeout(()=>{o(c)},WV.get());function h(){Gs().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZV=500,e3=600,t3="_blank",n3="http://localhost";class ub{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function r3(n,e,t,r=ZV,s=e3){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},JV),{width:r.toString(),height:s.toString(),top:o,left:c}),p=Zn().toLowerCase();t&&(u=ET(p)?t3:t),wT(p)&&(e=e||n3,h.scrollbars="yes");const g=Object.entries(h).reduce((v,[b,S])=>`${v}${b}=${S},`,"");if(NF(p)&&u!=="_self")return s3(e||"",u),new ub(null);const y=window.open(e||"",u,g);Je(y,n,"popup-blocked");try{y.focus()}catch{}return new ub(y)}function s3(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3="__/auth/handler",o3="emulator/auth/handler",a3=encodeURIComponent("fac");async function db(n,e,t,r,s,o){Je(n.config.authDomain,n,"auth-domain-config-required"),Je(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ol,eventId:s};if(e instanceof RT){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",KM(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Dd){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await n._getAppCheckToken(),p=h?`#${a3}=${encodeURIComponent(h)}`:"";return`${l3(n)}?${kd(u).slice(1)}${p}`}function l3({config:n}){return n.emulator?wx(n,o3):`https://${n.authDomain}/${i3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="webStorageSupport";class c3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FT,this._completeRedirectFn=kV,this._overrideRedirectResult=AV}async _openPopup(e,t,r,s){var o;Mi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await db(e,t,r,uv(),s);return r3(e,c,Nx())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await db(e,t,r,uv(),s);return hV(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Mi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await XV(e),r=new DV(e);return t.register("authEvent",s=>(Je(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ay,{type:ay},s=>{var o;const c=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[ay];c!==void 0&&t(!!c),bs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=UV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return CT()||_T()||Ex()}}const u3=c3;var hb="@firebase/auth",fb="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f3(n){Ya(new Qo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Je(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IT(n)},p=new PF(r,s,o,h);return zF(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ya(new Qo("auth-internal",e=>{const t=Wc(e.getProvider("auth").getImmediate());return(r=>new d3(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(hb,fb,h3(n)),Hs(hb,fb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=5*60,m3=rT("authIdTokenMaxAge")||p3;let pb=null;const g3=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>m3)return;const s=t==null?void 0:t.token;pb!==s&&(pb=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function y3(n=lT()){const e=Mp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=UF(n,{popupRedirectResolver:u3,persistence:[_V,cV,FT]}),r=rT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=g3(o.toString());sV(t,c,()=>c(t.currentUser)),rV(t,u=>c(u))}}const s=tT("auth");return s&&$F(t,`http://${s}`),t}function v3(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}RF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Ks("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",v3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f3("Browser");var x3="firebase",w3="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(x3,w3,"app");var mb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zo,WT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,k){function D(){}D.prototype=k.prototype,P.D=k.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(O,L,V){for(var R=Array(arguments.length-2),W=2;W<arguments.length;W++)R[W-2]=arguments[W];return k.prototype[L].apply(O,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,k,D){D||(D=0);var O=Array(16);if(typeof k=="string")for(var L=0;16>L;++L)O[L]=k.charCodeAt(D++)|k.charCodeAt(D++)<<8|k.charCodeAt(D++)<<16|k.charCodeAt(D++)<<24;else for(L=0;16>L;++L)O[L]=k[D++]|k[D++]<<8|k[D++]<<16|k[D++]<<24;k=P.g[0],D=P.g[1],L=P.g[2];var V=P.g[3],R=k+(V^D&(L^V))+O[0]+3614090360&4294967295;k=D+(R<<7&4294967295|R>>>25),R=V+(L^k&(D^L))+O[1]+3905402710&4294967295,V=k+(R<<12&4294967295|R>>>20),R=L+(D^V&(k^D))+O[2]+606105819&4294967295,L=V+(R<<17&4294967295|R>>>15),R=D+(k^L&(V^k))+O[3]+3250441966&4294967295,D=L+(R<<22&4294967295|R>>>10),R=k+(V^D&(L^V))+O[4]+4118548399&4294967295,k=D+(R<<7&4294967295|R>>>25),R=V+(L^k&(D^L))+O[5]+1200080426&4294967295,V=k+(R<<12&4294967295|R>>>20),R=L+(D^V&(k^D))+O[6]+2821735955&4294967295,L=V+(R<<17&4294967295|R>>>15),R=D+(k^L&(V^k))+O[7]+4249261313&4294967295,D=L+(R<<22&4294967295|R>>>10),R=k+(V^D&(L^V))+O[8]+1770035416&4294967295,k=D+(R<<7&4294967295|R>>>25),R=V+(L^k&(D^L))+O[9]+2336552879&4294967295,V=k+(R<<12&4294967295|R>>>20),R=L+(D^V&(k^D))+O[10]+4294925233&4294967295,L=V+(R<<17&4294967295|R>>>15),R=D+(k^L&(V^k))+O[11]+2304563134&4294967295,D=L+(R<<22&4294967295|R>>>10),R=k+(V^D&(L^V))+O[12]+1804603682&4294967295,k=D+(R<<7&4294967295|R>>>25),R=V+(L^k&(D^L))+O[13]+4254626195&4294967295,V=k+(R<<12&4294967295|R>>>20),R=L+(D^V&(k^D))+O[14]+2792965006&4294967295,L=V+(R<<17&4294967295|R>>>15),R=D+(k^L&(V^k))+O[15]+1236535329&4294967295,D=L+(R<<22&4294967295|R>>>10),R=k+(L^V&(D^L))+O[1]+4129170786&4294967295,k=D+(R<<5&4294967295|R>>>27),R=V+(D^L&(k^D))+O[6]+3225465664&4294967295,V=k+(R<<9&4294967295|R>>>23),R=L+(k^D&(V^k))+O[11]+643717713&4294967295,L=V+(R<<14&4294967295|R>>>18),R=D+(V^k&(L^V))+O[0]+3921069994&4294967295,D=L+(R<<20&4294967295|R>>>12),R=k+(L^V&(D^L))+O[5]+3593408605&4294967295,k=D+(R<<5&4294967295|R>>>27),R=V+(D^L&(k^D))+O[10]+38016083&4294967295,V=k+(R<<9&4294967295|R>>>23),R=L+(k^D&(V^k))+O[15]+3634488961&4294967295,L=V+(R<<14&4294967295|R>>>18),R=D+(V^k&(L^V))+O[4]+3889429448&4294967295,D=L+(R<<20&4294967295|R>>>12),R=k+(L^V&(D^L))+O[9]+568446438&4294967295,k=D+(R<<5&4294967295|R>>>27),R=V+(D^L&(k^D))+O[14]+3275163606&4294967295,V=k+(R<<9&4294967295|R>>>23),R=L+(k^D&(V^k))+O[3]+4107603335&4294967295,L=V+(R<<14&4294967295|R>>>18),R=D+(V^k&(L^V))+O[8]+1163531501&4294967295,D=L+(R<<20&4294967295|R>>>12),R=k+(L^V&(D^L))+O[13]+2850285829&4294967295,k=D+(R<<5&4294967295|R>>>27),R=V+(D^L&(k^D))+O[2]+4243563512&4294967295,V=k+(R<<9&4294967295|R>>>23),R=L+(k^D&(V^k))+O[7]+1735328473&4294967295,L=V+(R<<14&4294967295|R>>>18),R=D+(V^k&(L^V))+O[12]+2368359562&4294967295,D=L+(R<<20&4294967295|R>>>12),R=k+(D^L^V)+O[5]+4294588738&4294967295,k=D+(R<<4&4294967295|R>>>28),R=V+(k^D^L)+O[8]+2272392833&4294967295,V=k+(R<<11&4294967295|R>>>21),R=L+(V^k^D)+O[11]+1839030562&4294967295,L=V+(R<<16&4294967295|R>>>16),R=D+(L^V^k)+O[14]+4259657740&4294967295,D=L+(R<<23&4294967295|R>>>9),R=k+(D^L^V)+O[1]+2763975236&4294967295,k=D+(R<<4&4294967295|R>>>28),R=V+(k^D^L)+O[4]+1272893353&4294967295,V=k+(R<<11&4294967295|R>>>21),R=L+(V^k^D)+O[7]+4139469664&4294967295,L=V+(R<<16&4294967295|R>>>16),R=D+(L^V^k)+O[10]+3200236656&4294967295,D=L+(R<<23&4294967295|R>>>9),R=k+(D^L^V)+O[13]+681279174&4294967295,k=D+(R<<4&4294967295|R>>>28),R=V+(k^D^L)+O[0]+3936430074&4294967295,V=k+(R<<11&4294967295|R>>>21),R=L+(V^k^D)+O[3]+3572445317&4294967295,L=V+(R<<16&4294967295|R>>>16),R=D+(L^V^k)+O[6]+76029189&4294967295,D=L+(R<<23&4294967295|R>>>9),R=k+(D^L^V)+O[9]+3654602809&4294967295,k=D+(R<<4&4294967295|R>>>28),R=V+(k^D^L)+O[12]+3873151461&4294967295,V=k+(R<<11&4294967295|R>>>21),R=L+(V^k^D)+O[15]+530742520&4294967295,L=V+(R<<16&4294967295|R>>>16),R=D+(L^V^k)+O[2]+3299628645&4294967295,D=L+(R<<23&4294967295|R>>>9),R=k+(L^(D|~V))+O[0]+4096336452&4294967295,k=D+(R<<6&4294967295|R>>>26),R=V+(D^(k|~L))+O[7]+1126891415&4294967295,V=k+(R<<10&4294967295|R>>>22),R=L+(k^(V|~D))+O[14]+2878612391&4294967295,L=V+(R<<15&4294967295|R>>>17),R=D+(V^(L|~k))+O[5]+4237533241&4294967295,D=L+(R<<21&4294967295|R>>>11),R=k+(L^(D|~V))+O[12]+1700485571&4294967295,k=D+(R<<6&4294967295|R>>>26),R=V+(D^(k|~L))+O[3]+2399980690&4294967295,V=k+(R<<10&4294967295|R>>>22),R=L+(k^(V|~D))+O[10]+4293915773&4294967295,L=V+(R<<15&4294967295|R>>>17),R=D+(V^(L|~k))+O[1]+2240044497&4294967295,D=L+(R<<21&4294967295|R>>>11),R=k+(L^(D|~V))+O[8]+1873313359&4294967295,k=D+(R<<6&4294967295|R>>>26),R=V+(D^(k|~L))+O[15]+4264355552&4294967295,V=k+(R<<10&4294967295|R>>>22),R=L+(k^(V|~D))+O[6]+2734768916&4294967295,L=V+(R<<15&4294967295|R>>>17),R=D+(V^(L|~k))+O[13]+1309151649&4294967295,D=L+(R<<21&4294967295|R>>>11),R=k+(L^(D|~V))+O[4]+4149444226&4294967295,k=D+(R<<6&4294967295|R>>>26),R=V+(D^(k|~L))+O[11]+3174756917&4294967295,V=k+(R<<10&4294967295|R>>>22),R=L+(k^(V|~D))+O[2]+718787259&4294967295,L=V+(R<<15&4294967295|R>>>17),R=D+(V^(L|~k))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+k&4294967295,P.g[1]=P.g[1]+(L+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+L&4294967295,P.g[3]=P.g[3]+V&4294967295}r.prototype.u=function(P,k){k===void 0&&(k=P.length);for(var D=k-this.blockSize,O=this.B,L=this.h,V=0;V<k;){if(L==0)for(;V<=D;)s(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<k;)if(O[L++]=P.charCodeAt(V++),L==this.blockSize){s(this,O),L=0;break}}else for(;V<k;)if(O[L++]=P[V++],L==this.blockSize){s(this,O),L=0;break}}this.h=L,this.o+=k},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var k=1;k<P.length-8;++k)P[k]=0;var D=8*this.o;for(k=P.length-8;k<P.length;++k)P[k]=D&255,D/=256;for(this.u(P),P=Array(16),k=D=0;4>k;++k)for(var O=0;32>O;O+=8)P[D++]=this.g[k]>>>O&255;return P};function o(P,k){var D=u;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=k(P)}function c(P,k){this.h=k;for(var D=[],O=!0,L=P.length-1;0<=L;L--){var V=P[L]|0;O&&V==k||(D[L]=V,O=!1)}this.g=D}var u={};function h(P){return-128<=P&&128>P?o(P,function(k){return new c([k|0],0>k?-1:0)}):new c([P|0],0>P?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return y;if(0>P)return _(p(-P));for(var k=[],D=1,O=0;P>=D;O++)k[O]=P/D|0,D*=4294967296;return new c(k,0)}function g(P,k){if(P.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(P.charAt(0)=="-")return _(g(P.substring(1),k));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=p(Math.pow(k,8)),O=y,L=0;L<P.length;L+=8){var V=Math.min(8,P.length-L),R=parseInt(P.substring(L,L+V),k);8>V?(V=p(Math.pow(k,V)),O=O.j(V).add(p(R))):(O=O.j(D),O=O.add(p(R)))}return O}var y=h(0),v=h(1),b=h(16777216);n=c.prototype,n.m=function(){if(x(this))return-_(this).m();for(var P=0,k=1,D=0;D<this.g.length;D++){var O=this.i(D);P+=(0<=O?O:4294967296+O)*k,k*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(S(this))return"0";if(x(this))return"-"+_(this).toString(P);for(var k=p(Math.pow(P,6)),D=this,O="";;){var L=M(D,k).g;D=A(D,L.j(k));var V=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=L,S(D))return V+O;for(;6>V.length;)V="0"+V;O=V+O}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function S(P){if(P.h!=0)return!1;for(var k=0;k<P.g.length;k++)if(P.g[k]!=0)return!1;return!0}function x(P){return P.h==-1}n.l=function(P){return P=A(this,P),x(P)?-1:S(P)?0:1};function _(P){for(var k=P.g.length,D=[],O=0;O<k;O++)D[O]=~P.g[O];return new c(D,~P.h).add(v)}n.abs=function(){return x(this)?_(this):this},n.add=function(P){for(var k=Math.max(this.g.length,P.g.length),D=[],O=0,L=0;L<=k;L++){var V=O+(this.i(L)&65535)+(P.i(L)&65535),R=(V>>>16)+(this.i(L)>>>16)+(P.i(L)>>>16);O=R>>>16,V&=65535,R&=65535,D[L]=R<<16|V}return new c(D,D[D.length-1]&-2147483648?-1:0)};function A(P,k){return P.add(_(k))}n.j=function(P){if(S(this)||S(P))return y;if(x(this))return x(P)?_(this).j(_(P)):_(_(this).j(P));if(x(P))return _(this.j(_(P)));if(0>this.l(b)&&0>P.l(b))return p(this.m()*P.m());for(var k=this.g.length+P.g.length,D=[],O=0;O<2*k;O++)D[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<P.g.length;L++){var V=this.i(O)>>>16,R=this.i(O)&65535,W=P.i(L)>>>16,K=P.i(L)&65535;D[2*O+2*L]+=R*K,I(D,2*O+2*L),D[2*O+2*L+1]+=V*K,I(D,2*O+2*L+1),D[2*O+2*L+1]+=R*W,I(D,2*O+2*L+1),D[2*O+2*L+2]+=V*W,I(D,2*O+2*L+2)}for(O=0;O<k;O++)D[O]=D[2*O+1]<<16|D[2*O];for(O=k;O<2*k;O++)D[O]=0;return new c(D,0)};function I(P,k){for(;(P[k]&65535)!=P[k];)P[k+1]+=P[k]>>>16,P[k]&=65535,k++}function C(P,k){this.g=P,this.h=k}function M(P,k){if(S(k))throw Error("division by zero");if(S(P))return new C(y,y);if(x(P))return k=M(_(P),k),new C(_(k.g),_(k.h));if(x(k))return k=M(P,_(k)),new C(_(k.g),k.h);if(30<P.g.length){if(x(P)||x(k))throw Error("slowDivide_ only works with positive integers.");for(var D=v,O=k;0>=O.l(P);)D=U(D),O=U(O);var L=$(D,1),V=$(O,1);for(O=$(O,2),D=$(D,2);!S(O);){var R=V.add(O);0>=R.l(P)&&(L=L.add(D),V=R),O=$(O,1),D=$(D,1)}return k=A(P,L.j(k)),new C(L,k)}for(L=y;0<=P.l(k);){for(D=Math.max(1,Math.floor(P.m()/k.m())),O=Math.ceil(Math.log(D)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),V=p(D),R=V.j(k);x(R)||0<R.l(P);)D-=O,V=p(D),R=V.j(k);S(V)&&(V=v),L=L.add(V),P=A(P,R)}return new C(L,P)}n.A=function(P){return M(this,P).h},n.and=function(P){for(var k=Math.max(this.g.length,P.g.length),D=[],O=0;O<k;O++)D[O]=this.i(O)&P.i(O);return new c(D,this.h&P.h)},n.or=function(P){for(var k=Math.max(this.g.length,P.g.length),D=[],O=0;O<k;O++)D[O]=this.i(O)|P.i(O);return new c(D,this.h|P.h)},n.xor=function(P){for(var k=Math.max(this.g.length,P.g.length),D=[],O=0;O<k;O++)D[O]=this.i(O)^P.i(O);return new c(D,this.h^P.h)};function U(P){for(var k=P.g.length+1,D=[],O=0;O<k;O++)D[O]=P.i(O)<<1|P.i(O-1)>>>31;return new c(D,P.h)}function $(P,k){var D=k>>5;k%=32;for(var O=P.g.length-D,L=[],V=0;V<O;V++)L[V]=0<k?P.i(V+D)>>>k|P.i(V+D+1)<<32-k:P.i(V+D);return new c(L,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,WT=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=g,zo=c}).apply(typeof mb<"u"?mb:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HT,Uu,KT,Df,fv,GT,QT,YT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,N,j){return f==Array.prototype||f==Object.prototype||(f[N]=j.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var N=0;N<f.length;++N){var j=f[N];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=t(this);function s(f,N){if(N)e:{var j=r;f=f.split(".");for(var z=0;z<f.length-1;z++){var Z=f[z];if(!(Z in j))break e;j=j[Z]}f=f[f.length-1],z=j[f],N=N(z),N!=z&&N!=null&&e(j,f,{configurable:!0,writable:!0,value:N})}}function o(f,N){f instanceof String&&(f+="");var j=0,z=!1,Z={next:function(){if(!z&&j<f.length){var ae=j++;return{value:N(ae,f[ae]),done:!1}}return z=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}s("Array.prototype.values",function(f){return f||function(){return o(this,function(N,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function h(f){var N=typeof f;return N=N!="object"?N:f?Array.isArray(f)?"array":N:"null",N=="array"||N=="object"&&typeof f.length=="number"}function p(f){var N=typeof f;return N=="object"&&f!=null||N=="function"}function g(f,N,j){return f.call.apply(f.bind,arguments)}function y(f,N,j){if(!f)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,z),f.apply(N,Z)}}return function(){return f.apply(N,arguments)}}function v(f,N,j){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,v.apply(null,arguments)}function b(f,N){var j=Array.prototype.slice.call(arguments,1);return function(){var z=j.slice();return z.push.apply(z,arguments),f.apply(this,z)}}function S(f,N){function j(){}j.prototype=N.prototype,f.aa=N.prototype,f.prototype=new j,f.prototype.constructor=f,f.Qb=function(z,Z,ae){for(var Ee=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)Ee[Rt-2]=arguments[Rt];return N.prototype[Z].apply(z,Ee)}}function x(f){const N=f.length;if(0<N){const j=Array(N);for(let z=0;z<N;z++)j[z]=f[z];return j}return[]}function _(f,N){for(let j=1;j<arguments.length;j++){const z=arguments[j];if(h(z)){const Z=f.length||0,ae=z.length||0;f.length=Z+ae;for(let Ee=0;Ee<ae;Ee++)f[Z+Ee]=z[Ee]}else f.push(z)}}class A{constructor(N,j){this.i=N,this.j=j,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function I(f){return/^[\s\xa0]*$/.test(f)}function C(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function M(f){return M[" "](f),f}M[" "]=function(){};var U=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function $(f,N,j){for(const z in f)N.call(j,f[z],z,f)}function P(f,N){for(const j in f)N.call(void 0,f[j],j,f)}function k(f){const N={};for(const j in f)N[j]=f[j];return N}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(f,N){let j,z;for(let Z=1;Z<arguments.length;Z++){z=arguments[Z];for(j in z)f[j]=z[j];for(let ae=0;ae<D.length;ae++)j=D[ae],Object.prototype.hasOwnProperty.call(z,j)&&(f[j]=z[j])}}function L(f){var N=1;f=f.split(":");const j=[];for(;0<N&&f.length;)j.push(f.shift()),N--;return f.length&&j.push(f.join(":")),j}function V(f){u.setTimeout(()=>{throw f},0)}function R(){var f=oe;let N=null;return f.g&&(N=f.g,f.g=f.g.next,f.g||(f.h=null),N.next=null),N}class W{constructor(){this.h=this.g=null}add(N,j){const z=K.get();z.set(N,j),this.h?this.h.next=z:this.g=z,this.h=z}}var K=new A(()=>new X,f=>f.reset());class X{constructor(){this.next=this.g=this.h=null}set(N,j){this.h=N,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,G=!1,oe=new W,le=()=>{const f=u.Promise.resolve(void 0);ie=()=>{f.then(B)}};var B=()=>{for(var f;f=R();){try{f.h.call(f.g)}catch(j){V(j)}var N=K;N.j(f),100>N.h&&(N.h++,f.next=N.g,N.g=f)}G=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(f,N){this.type=f,this.g=this.target=N,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,N=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const j=()=>{};u.addEventListener("test",j,N),u.removeEventListener("test",j,N)}catch{}return f}();function Ue(f,N){if(he.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var j=this.type=f.type,z=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=N,N=f.relatedTarget){if(U){e:{try{M(N.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(N=null)}}else j=="mouseover"?N=f.fromElement:j=="mouseout"&&(N=f.toElement);this.relatedTarget=N,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Te[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Ue.aa.h.call(this)}}S(Ue,he);var Te={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),be=0;function qe(f,N,j,z,Z){this.listener=f,this.proxy=null,this.src=N,this.type=j,this.capture=!!z,this.ha=Z,this.key=++be,this.da=this.fa=!1}function Me(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function rt(f){this.src=f,this.g={},this.h=0}rt.prototype.add=function(f,N,j,z,Z){var ae=f.toString();f=this.g[ae],f||(f=this.g[ae]=[],this.h++);var Ee=ge(f,N,z,Z);return-1<Ee?(N=f[Ee],j||(N.fa=!1)):(N=new qe(N,this.src,ae,!!z,Z),N.fa=j,f.push(N)),N};function st(f,N){var j=N.type;if(j in f.g){var z=f.g[j],Z=Array.prototype.indexOf.call(z,N,void 0),ae;(ae=0<=Z)&&Array.prototype.splice.call(z,Z,1),ae&&(Me(N),f.g[j].length==0&&(delete f.g[j],f.h--))}}function ge(f,N,j,z){for(var Z=0;Z<f.length;++Z){var ae=f[Z];if(!ae.da&&ae.listener==N&&ae.capture==!!j&&ae.ha==z)return Z}return-1}var Ie="closure_lm_"+(1e6*Math.random()|0),pt={};function sn(f,N,j,z,Z){if(Array.isArray(N)){for(var ae=0;ae<N.length;ae++)sn(f,N[ae],j,z,Z);return null}return j=Cs(j),f&&f[we]?f.K(N,j,p(z)?!!z.capture:!1,Z):zn(f,N,j,!1,z,Z)}function zn(f,N,j,z,Z,ae){if(!N)throw Error("Invalid event type");var Ee=p(Z)?!!Z.capture:!!Z,Rt=ln(f);if(Rt||(f[Ie]=Rt=new rt(f)),j=Rt.add(N,j,z,Ee,ae),j.proxy)return j;if(z=br(),j.proxy=z,z.src=f,z.listener=j,f.addEventListener)Ne||(Z=Ee),Z===void 0&&(Z=!1),f.addEventListener(N.toString(),z,Z);else if(f.attachEvent)f.attachEvent(Sr(N.toString()),z);else if(f.addListener&&f.removeListener)f.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return j}function br(){function f(j){return N.call(f.src,f.listener,j)}const N=Xr;return f}function Ot(f,N,j,z,Z){if(Array.isArray(N))for(var ae=0;ae<N.length;ae++)Ot(f,N[ae],j,z,Z);else z=p(z)?!!z.capture:!!z,j=Cs(j),f&&f[we]?(f=f.i,N=String(N).toString(),N in f.g&&(ae=f.g[N],j=ge(ae,j,z,Z),-1<j&&(Me(ae[j]),Array.prototype.splice.call(ae,j,1),ae.length==0&&(delete f.g[N],f.h--)))):f&&(f=ln(f))&&(N=f.g[N.toString()],f=-1,N&&(f=ge(N,j,z,Z)),(j=-1<f?N[f]:null)&&dn(j))}function dn(f){if(typeof f!="number"&&f&&!f.da){var N=f.src;if(N&&N[we])st(N.i,f);else{var j=f.type,z=f.proxy;N.removeEventListener?N.removeEventListener(j,z,f.capture):N.detachEvent?N.detachEvent(Sr(j),z):N.addListener&&N.removeListener&&N.removeListener(z),(j=ln(N))?(st(j,f),j.h==0&&(j.src=null,N[Ie]=null)):Me(f)}}}function Sr(f){return f in pt?pt[f]:pt[f]="on"+f}function Xr(f,N){if(f.da)f=!0;else{N=new Ue(N,this);var j=f.listener,z=f.ha||f.src;f.fa&&dn(f),f=j.call(z,N)}return f}function ln(f){return f=f[Ie],f instanceof rt?f:null}var Ts="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cs(f){return typeof f=="function"?f:(f[Ts]||(f[Ts]=function(N){return f.handleEvent(N)}),f[Ts])}function Ut(){J.call(this),this.i=new rt(this),this.M=this,this.F=null}S(Ut,J),Ut.prototype[we]=!0,Ut.prototype.removeEventListener=function(f,N,j,z){Ot(this,f,N,j,z)};function It(f,N){var j,z=f.F;if(z)for(j=[];z;z=z.F)j.push(z);if(f=f.M,z=N.type||N,typeof N=="string")N=new he(N,f);else if(N instanceof he)N.target=N.target||f;else{var Z=N;N=new he(z,f),O(N,Z)}if(Z=!0,j)for(var ae=j.length-1;0<=ae;ae--){var Ee=N.g=j[ae];Z=$n(Ee,z,!0,N)&&Z}if(Ee=N.g=f,Z=$n(Ee,z,!0,N)&&Z,Z=$n(Ee,z,!1,N)&&Z,j)for(ae=0;ae<j.length;ae++)Ee=N.g=j[ae],Z=$n(Ee,z,!1,N)&&Z}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var f=this.i,N;for(N in f.g){for(var j=f.g[N],z=0;z<j.length;z++)Me(j[z]);delete f.g[N],f.h--}}this.F=null},Ut.prototype.K=function(f,N,j,z){return this.i.add(String(f),N,!1,j,z)},Ut.prototype.L=function(f,N,j,z){return this.i.add(String(f),N,!0,j,z)};function $n(f,N,j,z){if(N=f.i.g[String(N)],!N)return!0;N=N.concat();for(var Z=!0,ae=0;ae<N.length;++ae){var Ee=N[ae];if(Ee&&!Ee.da&&Ee.capture==j){var Rt=Ee.listener,_n=Ee.ha||Ee.src;Ee.fa&&st(f.i,Ee),Z=Rt.call(_n,z)!==!1&&Z}}return Z&&!z.defaultPrevented}function wn(f,N,j){if(typeof f=="function")j&&(f=v(f,j));else if(f&&typeof f.handleEvent=="function")f=v(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:u.setTimeout(f,N||0)}function Nr(f){f.g=wn(()=>{f.g=null,f.i&&(f.i=!1,Nr(f))},f.l);const N=f.h;f.h=null,f.m.apply(null,N)}class Jr extends J{constructor(N,j){super(),this.m=N,this.l=j,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Nr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fr(f){J.call(this),this.h=f,this.g={}}S(Fr,J);var Is=[];function ui(f){$(f.g,function(N,j){this.g.hasOwnProperty(j)&&dn(N)},f),f.g={}}Fr.prototype.N=function(){Fr.aa.N.call(this),ui(this)},Fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zr=u.JSON.stringify,Bn=u.JSON.parse,js=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function Ye(){}Ye.prototype.h=null;function _t(f){return f.h||(f.h=f.i())}function mt(){}var zt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kt(){he.call(this,"d")}S(Kt,he);function ne(){he.call(this,"c")}S(ne,he);var me={},Fe=null;function St(){return Fe=Fe||new Ut}me.La="serverreachability";function lt(f){he.call(this,me.La,f)}S(lt,he);function gt(f){const N=St();It(N,new lt(N))}me.STAT_EVENT="statevent";function Re(f,N){he.call(this,me.STAT_EVENT,f),this.stat=N}S(Re,he);function Gt(f){const N=St();It(N,new Re(N,f))}me.Ma="timingevent";function di(f,N){he.call(this,me.Ma,f),this.size=N}S(di,he);function ar(f,N){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},N)}function As(){this.g=!0}As.prototype.xa=function(){this.g=!1};function Ps(f,N,j,z,Z,ae){f.info(function(){if(f.g)if(ae)for(var Ee="",Rt=ae.split("&"),_n=0;_n<Rt.length;_n++){var Et=Rt[_n].split("=");if(1<Et.length){var Cn=Et[0];Et=Et[1];var hn=Cn.split("_");Ee=2<=hn.length&&hn[1]=="type"?Ee+(Cn+"="+Et+"&"):Ee+(Cn+"=redacted&")}}else Ee=null;else Ee=ae;return"XMLHTTP REQ ("+z+") [attempt "+Z+"]: "+N+`
`+j+`
`+Ee})}function hi(f,N,j,z,Z,ae,Ee){f.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+Z+"]: "+N+`
`+j+`
`+ae+" "+Ee})}function lr(f,N,j,z){f.info(function(){return"XMLHTTP TEXT ("+N+"): "+dl(f,j)+(z?" "+z:"")})}function qi(f,N){f.info(function(){return"TIMEOUT: "+N})}As.prototype.info=function(){};function dl(f,N){if(!f.g)return N;if(!N)return null;try{var j=JSON.parse(N);if(j){for(f=0;f<j.length;f++)if(Array.isArray(j[f])){var z=j[f];if(!(2>z.length)){var Z=z[1];if(Array.isArray(Z)&&!(1>Z.length)){var ae=Z[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var Ee=1;Ee<Z.length;Ee++)Z[Ee]=""}}}}return Zr(j)}catch{return N}}var $t={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},es;function ua(){}S(ua,Ye),ua.prototype.g=function(){return new XMLHttpRequest},ua.prototype.i=function(){return{}},es=new ua;function ts(f,N,j,z){this.j=f,this.i=N,this.l=j,this.R=z||1,this.U=new Fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wd}function Wd(){this.i=null,this.g="",this.h=!1}var eu={},fl={};function pl(f,N,j){f.L=1,f.v=Qi(Cr(N)),f.m=j,f.P=!0,tu(f,null)}function tu(f,N){f.F=Date.now(),Mt(f),f.A=Cr(f.v);var j=f.A,z=f.R;Array.isArray(z)||(z=[String(z)]),Xi(j.i,"t",z),f.C=0,j=f.j.J,f.h=new Wd,f.g=ch(f.j,j?N:null,!f.m),0<f.O&&(f.M=new Jr(v(f.Y,f,f.g),f.O)),N=f.U,j=f.g,z=f.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(Is[0]=Z.toString()),Z=Is);for(var ae=0;ae<Z.length;ae++){var Ee=sn(j,Z[ae],z||N.handleEvent,!1,N.h||N);if(!Ee)break;N.g[Ee.key]=Ee}N=f.H?k(f.H):{},f.m?(f.u||(f.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,N)):(f.u="GET",f.g.ea(f.A,f.u,null,N)),gt(),Ps(f.i,f.u,f.A,f.l,f.R,f.m)}ts.prototype.ca=function(f){f=f.target;const N=this.M;N&&ur(f)==3?N.j():this.Y(f)},ts.prototype.Y=function(f){try{if(f==this.g)e:{const hn=ur(this.g);var N=this.g.Ba();const zr=this.g.Z();if(!(3>hn)&&(hn!=3||this.g&&(this.h.h||this.g.oa()||au(this.g)))){this.J||hn!=4||N==7||(N==8||0>=zr?gt(3):gt(2)),da(this);var j=this.g.Z();this.X=j;t:if(Hd(this)){var z=au(this.g);f="";var Z=z.length,ae=ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vr(this),Wi(this);var Ee="";break t}this.h.i=new u.TextDecoder}for(N=0;N<Z;N++)this.h.h=!0,f+=this.h.i.decode(z[N],{stream:!(ae&&N==Z-1)});z.length=0,this.h.g+=f,this.C=0,Ee=this.h.g}else Ee=this.g.oa();if(this.o=j==200,hi(this.i,this.u,this.A,this.l,this.R,hn,j),this.o){if(this.T&&!this.K){t:{if(this.g){var Rt,_n=this.g;if((Rt=_n.g?_n.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Rt)){var Et=Rt;break t}}Et=null}if(j=Et)lr(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nu(this,j);else{this.o=!1,this.s=3,Gt(12),Vr(this),Wi(this);break e}}if(this.P){j=!0;let jr;for(;!this.J&&this.C<Ee.length;)if(jr=mm(this,Ee),jr==fl){hn==4&&(this.s=4,Gt(14),j=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(jr==eu){this.s=4,Gt(15),lr(this.i,this.l,Ee,"[Invalid Chunk]"),j=!1;break}else lr(this.i,this.l,jr,null),nu(this,jr);if(Hd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hn!=4||Ee.length!=0||this.h.h||(this.s=1,Gt(16),j=!1),this.o=this.o&&j,!j)lr(this.i,this.l,Ee,"[Invalid Chunked Response]"),Vr(this),Wi(this);else if(0<Ee.length&&!this.W){this.W=!0;var Cn=this.j;Cn.g==this&&Cn.ba&&!Cn.M&&(Cn.j.info("Great, no buffering proxy detected. Bytes received: "+Ee.length),cu(Cn),Cn.M=!0,Gt(11))}}else lr(this.i,this.l,Ee,null),nu(this,Ee);hn==4&&Vr(this),this.o&&!this.J&&(hn==4?Nl(this.j,this):(this.o=!1,Mt(this)))}else wl(this.g),j==400&&0<Ee.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),Vr(this),Wi(this)}}}catch{}finally{}};function Hd(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function mm(f,N){var j=f.C,z=N.indexOf(`
`,j);return z==-1?fl:(j=Number(N.substring(j,z)),isNaN(j)?eu:(z+=1,z+j>N.length?fl:(N=N.slice(z,z+j),f.C=z+j,N)))}ts.prototype.cancel=function(){this.J=!0,Vr(this)};function Mt(f){f.S=Date.now()+f.I,Kd(f,f.I)}function Kd(f,N){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ar(v(f.ba,f),N)}function da(f){f.B&&(u.clearTimeout(f.B),f.B=null)}ts.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(qi(this.i,this.A),this.L!=2&&(gt(),Gt(17)),Vr(this),this.s=2,Wi(this)):Kd(this,this.S-f)};function Wi(f){f.j.G==0||f.J||Nl(f.j,f)}function Vr(f){da(f);var N=f.M;N&&typeof N.ma=="function"&&N.ma(),f.M=null,ui(f.U),f.g&&(N=f.g,f.g=null,N.abort(),N.ma())}function nu(f,N){try{var j=f.j;if(j.G!=0&&(j.g==f||er(j.h,f))){if(!f.K&&er(j.h,f)&&j.G==3){try{var z=j.Da.g.parse(N)}catch{z=null}if(Array.isArray(z)&&z.length==3){var Z=z;if(Z[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<f.F)Sl(j),os(j);else break e;bl(j),Gt(18)}}else j.za=Z[1],0<j.za-j.T&&37500>Z[2]&&j.F&&j.v==0&&!j.C&&(j.C=ar(v(j.Za,j),6e3));if(1>=Qd(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else yi(j,11)}else if((f.K||j.g==f)&&Sl(j),!I(N))for(Z=j.Da.g.parse(N),N=0;N<Z.length;N++){let Et=Z[N];if(j.T=Et[0],Et=Et[1],j.G==2)if(Et[0]=="c"){j.K=Et[1],j.ia=Et[2];const Cn=Et[3];Cn!=null&&(j.la=Cn,j.j.info("VER="+j.la));const hn=Et[4];hn!=null&&(j.Aa=hn,j.j.info("SVER="+j.Aa));const zr=Et[5];zr!=null&&typeof zr=="number"&&0<zr&&(z=1.5*zr,j.L=z,j.j.info("backChannelRequestTimeoutMs_="+z)),z=j;const jr=f.g;if(jr){const va=jr.g?jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(va){var ae=z.h;ae.g||va.indexOf("spdy")==-1&&va.indexOf("quic")==-1&&va.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(ru(ae,ae.h),ae.h=null))}if(z.D){const Cl=jr.g?jr.g.getResponseHeader("X-HTTP-Session-Id"):null;Cl&&(z.ya=Cl,Dt(z.I,z.D,Cl))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-f.F,j.j.info("Handshake RTT: "+j.R+"ms")),z=j;var Ee=f;if(z.qa=lh(z,z.J?z.ia:null,z.W),Ee.K){Yd(z.h,Ee);var Rt=Ee,_n=z.L;_n&&(Rt.I=_n),Rt.B&&(da(Rt),Mt(Rt)),z.g=Ee}else ya(z);0<j.i.length&&Ds(j)}else Et[0]!="stop"&&Et[0]!="close"||yi(j,7);else j.G==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?yi(j,7):kn(j):Et[0]!="noop"&&j.l&&j.l.ta(Et),j.v=0)}}gt(4)}catch{}}var Gd=class{constructor(f,N){this.g=f,this.map=N}};function ha(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Qd(f){return f.h?1:f.g?f.g.size:0}function er(f,N){return f.h?f.h==N:f.g?f.g.has(N):!1}function ru(f,N){f.g?f.g.add(N):f.h=N}function Yd(f,N){f.h&&f.h==N?f.h=null:f.g&&f.g.has(N)&&f.g.delete(N)}ha.prototype.cancel=function(){if(this.i=Xd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Xd(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let N=f.i;for(const j of f.g.values())N=N.concat(j.D);return N}return x(f.i)}function ml(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(h(f)){for(var N=[],j=f.length,z=0;z<j;z++)N.push(f[z]);return N}N=[],j=0;for(z in f)N[j++]=f[z];return N}function gl(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(h(f)||typeof f=="string"){var N=[];f=f.length;for(var j=0;j<f;j++)N.push(j);return N}N=[],j=0;for(const z in f)N[j++]=z;return N}}}function Hi(f,N){if(f.forEach&&typeof f.forEach=="function")f.forEach(N,void 0);else if(h(f)||typeof f=="string")Array.prototype.forEach.call(f,N,void 0);else for(var j=gl(f),z=ml(f),Z=z.length,ae=0;ae<Z;ae++)N.call(void 0,z[ae],j&&j[ae],f)}var fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gm(f,N){if(f){f=f.split("&");for(var j=0;j<f.length;j++){var z=f[j].indexOf("="),Z=null;if(0<=z){var ae=f[j].substring(0,z);Z=f[j].substring(z+1)}else ae=f[j];N(ae,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function fi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof fi){this.h=f.h,pa(this,f.j),this.o=f.o,this.g=f.g,Ki(this,f.s),this.l=f.l;var N=f.i,j=new Rs;j.i=N.i,N.g&&(j.g=new Map(N.g),j.h=N.h),Gi(this,j),this.m=f.m}else f&&(N=String(f).match(fa))?(this.h=!1,pa(this,N[1]||"",!0),this.o=yt(N[2]||""),this.g=yt(N[3]||"",!0),Ki(this,N[4]),this.l=yt(N[5]||"",!0),Gi(this,N[6]||"",!0),this.m=yt(N[7]||"")):(this.h=!1,this.i=new Rs(null,this.h))}fi.prototype.toString=function(){var f=[],N=this.j;N&&f.push(Yi(N,yl,!0),":");var j=this.g;return(j||N=="file")&&(f.push("//"),(N=this.o)&&f.push(Yi(N,yl,!0),"@"),f.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&f.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&f.push("/"),f.push(Yi(j,j.charAt(0)=="/"?eh:Zd,!0))),(j=this.i.toString())&&f.push("?",j),(j=this.m)&&f.push("#",Yi(j,su)),f.join("")};function Cr(f){return new fi(f)}function pa(f,N,j){f.j=j?yt(N,!0):N,f.j&&(f.j=f.j.replace(/:$/,""))}function Ki(f,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);f.s=N}else f.s=null}function Gi(f,N,j){N instanceof Rs?(f.i=N,ks(f.i,f.h)):(j||(N=Yi(N,th)),f.i=new Rs(N,f.h))}function Dt(f,N,j){f.i.set(N,j)}function Qi(f){return Dt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function yt(f,N){return f?N?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Yi(f,N,j){return typeof f=="string"?(f=encodeURI(f).replace(N,Jd),j&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Jd(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var yl=/[#\/\?@]/g,Zd=/[#\?:]/g,eh=/[#\?]/g,th=/[#\?@]/g,su=/#/g;function Rs(f,N){this.h=this.g=null,this.i=f||null,this.j=!!N}function Rn(f){f.g||(f.g=new Map,f.h=0,f.i&&gm(f.i,function(N,j){f.add(decodeURIComponent(N.replace(/\+/g," ")),j)}))}n=Rs.prototype,n.add=function(f,N){Rn(this),this.i=null,f=Ur(this,f);var j=this.g.get(f);return j||this.g.set(f,j=[]),j.push(N),this.h+=1,this};function ns(f,N){Rn(f),N=Ur(f,N),f.g.has(N)&&(f.i=null,f.h-=f.g.get(N).length,f.g.delete(N))}function rs(f,N){return Rn(f),N=Ur(f,N),f.g.has(N)}n.forEach=function(f,N){Rn(this),this.g.forEach(function(j,z){j.forEach(function(Z){f.call(N,Z,z,this)},this)},this)},n.na=function(){Rn(this);const f=Array.from(this.g.values()),N=Array.from(this.g.keys()),j=[];for(let z=0;z<N.length;z++){const Z=f[z];for(let ae=0;ae<Z.length;ae++)j.push(N[z])}return j},n.V=function(f){Rn(this);let N=[];if(typeof f=="string")rs(this,f)&&(N=N.concat(this.g.get(Ur(this,f))));else{f=Array.from(this.g.values());for(let j=0;j<f.length;j++)N=N.concat(f[j])}return N},n.set=function(f,N){return Rn(this),this.i=null,f=Ur(this,f),rs(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[N]),this.h+=1,this},n.get=function(f,N){return f?(f=this.V(f),0<f.length?String(f[0]):N):N};function Xi(f,N,j){ns(f,N),0<j.length&&(f.i=null,f.g.set(Ur(f,N),x(j)),f.h+=j.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],N=Array.from(this.g.keys());for(var j=0;j<N.length;j++){var z=N[j];const ae=encodeURIComponent(String(z)),Ee=this.V(z);for(z=0;z<Ee.length;z++){var Z=ae;Ee[z]!==""&&(Z+="="+encodeURIComponent(String(Ee[z]))),f.push(Z)}}return this.i=f.join("&")};function Ur(f,N){return N=String(N),f.j&&(N=N.toLowerCase()),N}function ks(f,N){N&&!f.j&&(Rn(f),f.i=null,f.g.forEach(function(j,z){var Z=z.toLowerCase();z!=Z&&(ns(this,z),Xi(this,Z,j))},f)),f.j=N}function ym(f,N){const j=new As;if(u.Image){const z=new Image;z.onload=b(cr,j,"TestLoadImage: loaded",!0,N,z),z.onerror=b(cr,j,"TestLoadImage: error",!1,N,z),z.onabort=b(cr,j,"TestLoadImage: abort",!1,N,z),z.ontimeout=b(cr,j,"TestLoadImage: timeout",!1,N,z),u.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=f}else N(!1)}function nh(f,N){const j=new As,z=new AbortController,Z=setTimeout(()=>{z.abort(),cr(j,"TestPingServer: timeout",!1,N)},1e4);fetch(f,{signal:z.signal}).then(ae=>{clearTimeout(Z),ae.ok?cr(j,"TestPingServer: ok",!0,N):cr(j,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(Z),cr(j,"TestPingServer: error",!1,N)})}function cr(f,N,j,z,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),z(j)}catch{}}function vm(){this.g=new js}function rh(f,N,j){const z=j||"";try{Hi(f,function(Z,ae){let Ee=Z;p(Z)&&(Ee=Zr(Z)),N.push(z+ae+"="+encodeURIComponent(Ee))})}catch(Z){throw N.push(z+"type="+encodeURIComponent("_badmap")),Z}}function pi(f){this.l=f.Ub||null,this.j=f.eb||!1}S(pi,Ye),pi.prototype.g=function(){return new ma(this.l,this.j)},pi.prototype.i=function(f){return function(){return f}}({});function ma(f,N){Ut.call(this),this.D=f,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(ma,Ut),n=ma.prototype,n.open=function(f,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=N,this.readyState=1,is(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(N.body=f),(this.D||u).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ss(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sh(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function sh(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var N=f.value?f.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!f.done}))&&(this.response=this.responseText+=N)}f.done?ss(this):is(this),this.readyState==3&&sh(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,ss(this))},n.Qa=function(f){this.g&&(this.response=f,ss(this))},n.ga=function(){this.g&&ss(this)};function ss(f){f.readyState=4,f.l=null,f.j=null,f.v=null,is(f)}n.setRequestHeader=function(f,N){this.u.append(f,N)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],N=this.h.entries();for(var j=N.next();!j.done;)j=j.value,f.push(j[0]+": "+j[1]),j=N.next();return f.join(`\r
`)};function is(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function mi(f){let N="";return $(f,function(j,z){N+=z,N+=":",N+=j,N+=`\r
`}),N}function Ji(f,N,j){e:{for(z in j){var z=!1;break e}z=!0}z||(j=mi(j),typeof f=="string"?j!=null&&encodeURIComponent(String(j)):Dt(f,N,j))}function Qt(f){Ut.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Qt,Ut);var xm=/^https?$/i,iu=["POST","PUT"];n=Qt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,N,j,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);N=N?N.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():es.g(),this.v=this.o?_t(this.o):_t(es),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(N,String(f),!0),this.B=!1}catch(ae){ga(this,ae);return}if(f=j||"",j=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var Z in z)j.set(Z,z[Z]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ae of z.keys())j.set(ae,z.get(ae));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(j.keys()).find(ae=>ae.toLowerCase()=="content-type"),Z=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(iu,N,void 0))||z||Z||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Ee]of j)this.g.setRequestHeader(ae,Ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xl(this),this.u=!0,this.g.send(f),this.u=!1}catch(ae){ga(this,ae)}};function ga(f,N){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=N,f.m=5,vl(f),Ir(f)}function vl(f){f.A||(f.A=!0,It(f,"complete"),It(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,It(this,"complete"),It(this,"abort"),Ir(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ir(this,!0)),Qt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ou(this):this.bb())},n.bb=function(){ou(this)};function ou(f){if(f.h&&typeof c<"u"&&(!f.v[1]||ur(f)!=4||f.Z()!=2)){if(f.u&&ur(f)==4)wn(f.Ea,0,f);else if(It(f,"readystatechange"),ur(f)==4){f.h=!1;try{const Ee=f.Z();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var j;if(!(j=N)){var z;if(z=Ee===0){var Z=String(f.D).match(fa)[1]||null;!Z&&u.self&&u.self.location&&(Z=u.self.location.protocol.slice(0,-1)),z=!xm.test(Z?Z.toLowerCase():"")}j=z}if(j)It(f,"complete"),It(f,"success");else{f.m=6;try{var ae=2<ur(f)?f.g.statusText:""}catch{ae=""}f.l=ae+" ["+f.Z()+"]",vl(f)}}finally{Ir(f)}}}}function Ir(f,N){if(f.g){xl(f);const j=f.g,z=f.v[0]?()=>{}:null;f.g=null,f.v=null,N||It(f,"ready");try{j.onreadystatechange=z}catch{}}}function xl(f){f.I&&(u.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function ur(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<ur(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var N=this.g.responseText;return f&&N.indexOf(f)==0&&(N=N.substring(f.length)),Bn(N)}};function au(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function wl(f){const N={};f=(f.g&&2<=ur(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<f.length;z++){if(I(f[z]))continue;var j=L(f[z]);const Z=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const ae=N[Z]||[];N[Z]=ae,ae.push(j)}P(N,function(z){return z.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(f,N,j){return j&&j.internalChannelParams&&j.internalChannelParams[f]||N}function lu(f){this.Aa=0,this.i=[],this.j=new As,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,f),this.cb=Os("retryDelaySeedMs",1e4,f),this.Wa=Os("forwardChannelMaxRetries",2,f),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new ha(f&&f.concurrentRequestLimit),this.Da=new vm,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=lu.prototype,n.la=8,n.G=1,n.connect=function(f,N,j,z){Gt(0),this.W=f,this.H=N||{},j&&z!==void 0&&(this.H.OSID=j,this.H.OAID=z),this.F=this.X,this.I=lh(this,null,this.W),Ds(this)};function kn(f){if(_l(f),f.G==3){var N=f.U++,j=Cr(f.I);if(Dt(j,"SID",f.K),Dt(j,"RID",N),Dt(j,"TYPE","terminate"),gi(f,j),N=new ts(f,f.j,N),N.L=2,N.v=Qi(Cr(j)),j=!1,u.navigator&&u.navigator.sendBeacon)try{j=u.navigator.sendBeacon(N.v.toString(),"")}catch{}!j&&u.Image&&(new Image().src=N.v,j=!0),j||(N.g=ch(N.j,null),N.g.ea(N.v)),N.F=Date.now(),Mt(N)}ah(f)}function os(f){f.g&&(cu(f),f.g.cancel(),f.g=null)}function _l(f){os(f),f.u&&(u.clearTimeout(f.u),f.u=null),Sl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function Ds(f){if(!Tr(f.h)&&!f.s){f.s=!0;var N=f.Ga;ie||le(),G||(ie(),G=!0),oe.add(N,f),f.B=0}}function wm(f,N){return Qd(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=N.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ar(v(f.Ga,f,N),oh(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const Z=new ts(this,this.j,f);let ae=this.o;if(this.S&&(ae?(ae=k(ae),O(ae,this.S)):ae=this.S),this.m!==null||this.O||(Z.H=ae,ae=null),this.P)e:{for(var N=0,j=0;j<this.i.length;j++){t:{var z=this.i[j];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(N+=z,4096<N){N=j;break e}if(N===4096||j===this.i.length-1){N=j+1;break e}}N=1e3}else N=1e3;N=Zi(this,Z,N),j=Cr(this.I),Dt(j,"RID",f),Dt(j,"CVER",22),this.D&&Dt(j,"X-HTTP-Session-Id",this.D),gi(this,j),ae&&(this.O?N="headers="+encodeURIComponent(String(mi(ae)))+"&"+N:this.m&&Ji(j,this.m,ae)),ru(this.h,Z),this.Ua&&Dt(j,"TYPE","init"),this.P?(Dt(j,"$req",N),Dt(j,"SID","null"),Z.T=!0,pl(Z,j,null)):pl(Z,j,N),this.G=2}}else this.G==3&&(f?El(this,f):this.i.length==0||Tr(this.h)||El(this))};function El(f,N){var j;N?j=N.l:j=f.U++;const z=Cr(f.I);Dt(z,"SID",f.K),Dt(z,"RID",j),Dt(z,"AID",f.T),gi(f,z),f.m&&f.o&&Ji(z,f.m,f.o),j=new ts(f,f.j,j,f.B+1),f.m===null&&(j.H=f.o),N&&(f.i=N.D.concat(f.i)),N=Zi(f,j,1e3),j.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),ru(f.h,j),pl(j,z,N)}function gi(f,N){f.H&&$(f.H,function(j,z){Dt(N,z,j)}),f.l&&Hi({},function(j,z){Dt(N,z,j)})}function Zi(f,N,j){j=Math.min(f.i.length,j);var z=f.l?v(f.l.Na,f.l,f):null;e:{var Z=f.i;let ae=-1;for(;;){const Ee=["count="+j];ae==-1?0<j?(ae=Z[0].g,Ee.push("ofs="+ae)):ae=0:Ee.push("ofs="+ae);let Rt=!0;for(let _n=0;_n<j;_n++){let Et=Z[_n].g;const Cn=Z[_n].map;if(Et-=ae,0>Et)ae=Math.max(0,Z[_n].g-100),Rt=!1;else try{rh(Cn,Ee,"req"+Et+"_")}catch{z&&z(Cn)}}if(Rt){z=Ee.join("&");break e}}}return f=f.i.splice(0,j),N.D=f,z}function ya(f){if(!f.g&&!f.u){f.Y=1;var N=f.Fa;ie||le(),G||(ie(),G=!0),oe.add(N,f),f.v=0}}function bl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ar(v(f.Fa,f),oh(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,ih(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ar(v(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),os(this),ih(this))};function cu(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function ih(f){f.g=new ts(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var N=Cr(f.qa);Dt(N,"RID","rpc"),Dt(N,"SID",f.K),Dt(N,"AID",f.T),Dt(N,"CI",f.F?"0":"1"),!f.F&&f.ja&&Dt(N,"TO",f.ja),Dt(N,"TYPE","xmlhttp"),gi(f,N),f.m&&f.o&&Ji(N,f.m,f.o),f.L&&(f.g.I=f.L);var j=f.g;f=f.ia,j.L=1,j.v=Qi(Cr(N)),j.m=null,j.P=!0,tu(j,f)}n.Za=function(){this.C!=null&&(this.C=null,os(this),bl(this),Gt(19))};function Sl(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function Nl(f,N){var j=null;if(f.g==N){Sl(f),cu(f),f.g=null;var z=2}else if(er(f.h,N))j=N.D,Yd(f.h,N),z=1;else return;if(f.G!=0){if(N.o)if(z==1){j=N.m?N.m.length:0,N=Date.now()-N.F;var Z=f.B;z=St(),It(z,new di(z,j)),Ds(f)}else ya(f);else if(Z=N.s,Z==3||Z==0&&0<N.X||!(z==1&&wm(f,N)||z==2&&bl(f)))switch(j&&0<j.length&&(N=f.h,N.i=N.i.concat(j)),Z){case 1:yi(f,5);break;case 4:yi(f,10);break;case 3:yi(f,6);break;default:yi(f,2)}}}function oh(f,N){let j=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(j*=2),j*N}function yi(f,N){if(f.j.info("Error code "+N),N==2){var j=v(f.fb,f),z=f.Xa;const Z=!z;z=new fi(z||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||pa(z,"https"),Qi(z),Z?ym(z.toString(),j):nh(z.toString(),j)}else Gt(2);f.G=0,f.l&&f.l.sa(N),ah(f),_l(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function ah(f){if(f.G=0,f.ka=[],f.l){const N=Xd(f.h);(N.length!=0||f.i.length!=0)&&(_(f.ka,N),_(f.ka,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.ra()}}function lh(f,N,j){var z=j instanceof fi?Cr(j):new fi(j);if(z.g!="")N&&(z.g=N+"."+z.g),Ki(z,z.s);else{var Z=u.location;z=Z.protocol,N=N?N+"."+Z.hostname:Z.hostname,Z=+Z.port;var ae=new fi(null);z&&pa(ae,z),N&&(ae.g=N),Z&&Ki(ae,Z),j&&(ae.l=j),z=ae}return j=f.D,N=f.ya,j&&N&&Dt(z,j,N),Dt(z,"VER",f.la),gi(f,z),z}function ch(f,N,j){if(N&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=f.Ca&&!f.pa?new Qt(new pi({eb:j})):new Qt(f.pa),N.Ha(f.J),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function uu(){}n=uu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Tl(){}Tl.prototype.g=function(f,N){return new tr(f,N)};function tr(f,N){Ut.call(this),this.g=new lu(N),this.l=f,this.h=N&&N.messageUrlParams||null,f=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(f?f["X-WebChannel-Content-Type"]=N.messageContentType:f={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(f?f["X-WebChannel-Client-Profile"]=N.va:f={"X-WebChannel-Client-Profile":N.va}),this.g.S=f,(f=N&&N.Sb)&&!I(f)&&(this.g.m=f),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!I(N)&&(this.g.D=N,f=this.h,f!==null&&N in f&&(f=this.h,N in f&&delete f[N])),this.j=new Ls(this)}S(tr,Ut),tr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tr.prototype.close=function(){kn(this.g)},tr.prototype.o=function(f){var N=this.g;if(typeof f=="string"){var j={};j.__data__=f,f=j}else this.u&&(j={},j.__data__=Zr(f),f=j);N.i.push(new Gd(N.Ya++,f)),N.G==3&&Ds(N)},tr.prototype.N=function(){this.g.l=null,delete this.j,kn(this.g),delete this.g,tr.aa.N.call(this)};function uh(f){Kt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var N=f.__sm__;if(N){e:{for(const j in N){f=j;break e}f=void 0}(this.i=f)&&(f=this.i,N=N!==null&&f in N?N[f]:void 0),this.data=N}else this.data=f}S(uh,Kt);function dh(){ne.call(this),this.status=1}S(dh,ne);function Ls(f){this.g=f}S(Ls,uu),Ls.prototype.ua=function(){It(this.g,"a")},Ls.prototype.ta=function(f){It(this.g,new uh(f))},Ls.prototype.sa=function(f){It(this.g,new dh)},Ls.prototype.ra=function(){It(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,tr.prototype.send=tr.prototype.o,tr.prototype.open=tr.prototype.m,tr.prototype.close=tr.prototype.close,YT=function(){return new Tl},QT=function(){return St()},GT=me,fv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$t.NO_ERROR=0,$t.TIMEOUT=8,$t.HTTP_ERROR=6,Df=$t,hl.COMPLETE="complete",KT=hl,mt.EventType=zt,zt.OPEN="a",zt.CLOSE="b",zt.ERROR="c",zt.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,Uu=mt,Qt.prototype.listenOnce=Qt.prototype.L,Qt.prototype.getLastError=Qt.prototype.Ka,Qt.prototype.getLastErrorCode=Qt.prototype.Ba,Qt.prototype.getStatus=Qt.prototype.Z,Qt.prototype.getResponseJson=Qt.prototype.Oa,Qt.prototype.getResponseText=Qt.prototype.oa,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Ha,HT=Qt}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});const gb="@firebase/firestore",yb="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xr.UNAUTHENTICATED=new xr(null),xr.GOOGLE_CREDENTIALS=new xr("google-credentials-uid"),xr.FIRST_PARTY=new xr("first-party-uid"),xr.MOCK_USER=new xr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=new yx("@firebase/firestore");function Zl(){return Ja.logLevel}function Ae(n,...e){if(Ja.logLevel<=ht.DEBUG){const t=e.map(Cx);Ja.debug(`Firestore (${Kc}): ${n}`,...t)}}function Fi(n,...e){if(Ja.logLevel<=ht.ERROR){const t=e.map(Cx);Ja.error(`Firestore (${Kc}): ${n}`,...t)}}function Za(n,...e){if(Ja.logLevel<=ht.WARN){const t=e.map(Cx);Ja.warn(`Firestore (${Kc}): ${n}`,...t)}}function Cx(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,XT(n,r,t)}function XT(n,e,t){let r=`FIRESTORE (${Kc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Fi(r),new Error(r)}function Pt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||XT(e,s,r)}function at(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xr.UNAUTHENTICATED))}shutdown(){}}class b3{constructor(e){this.t=e,this.currentUser=xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pt(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new $o;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new $o,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},u=h=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new $o)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt(typeof r.accessToken=="string",31837,{l:r}),new _3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pt(e===null||typeof e=="string",2055,{h:e}),new xr(e)}}class S3{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=xr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class N3{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new S3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(xr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pt(this.o===void 0,3512);const r=o=>{o.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Ae("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=C3(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function ut(n,e){return n<e?-1:n>e?1:0}function pv(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return ut(r,s);{const o=JT(),c=I3(o.encode(xb(n,t)),o.encode(xb(e,t)));return c!==0?c:ut(r,s)}}t+=r>65535?2:1}return ut(n.length,e.length)}function xb(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function I3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ut(n[t],e[t]);return ut(n.length,e.length)}function jc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="__name__";class zs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ze(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ze(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zs?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=zs.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return ut(e.length,t.length)}static compareSegments(e,t){const r=zs.isNumericId(e),s=zs.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?zs.extractNumericId(e).compare(zs.extractNumericId(t)):pv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zo.fromString(e.substring(4,e.length-2))}}class Lt extends zs{construct(e,t,r){return new Lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Lt(t)}static emptyPath(){return new Lt([])}}const j3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fn extends zs{construct(e,t,r){return new Fn(e,t,r)}static isValidIdentifier(e){return j3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mv}static keyField(){return new Fn([mv])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Se(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Se(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Se(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(o(),s++)}if(o(),c)throw new Se(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fn(t)}static emptyPath(){return new Fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Lt.fromString(e))}static fromName(e){return new Be(Lt.fromString(e).popFirst(5))}static empty(){return new Be(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(n,e,t){if(!t)throw new Se(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function A3(n,e,t,r){if(e===!0&&r===!0)throw new Se(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wb(n){if(!Be.isDocumentKey(n))throw new Se(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _b(n){if(Be.isDocumentKey(n))throw new Se(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function $p(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ze(12329,{type:typeof n})}function Qs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$p(n);throw new Se(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Md(n,e){if(!ZT(n))throw new Se(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new Se(ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=-62135596800,bb=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*bb);return new wt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Eb)throw new Se(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bb}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Md(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Eb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:yn("string",wt._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{static fromTimestamp(e){return new ot(e)}static min(){return new ot(new wt(0,0))}static max(){return new ot(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=-1;function P3(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=ot.fromTimestamp(r===1e9?new wt(t+1,0):new wt(t,r));return new Yo(s,Be.empty(),e)}function R3(n){return new Yo(n.readTime,n.key,pd)}class Yo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yo(ot.min(),Be.empty(),pd)}static max(){return new Yo(ot.max(),Be.empty(),pd)}}function k3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(n.documentKey,e.documentKey),t!==0?t:ut(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==O3)throw n;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let s=0,o=0,c=!1;e.forEach(u=>{++s,u.next(()=>{++o,c&&o===s&&t()},h=>r(h))}),c=!0,o===s&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(s=>s?ue.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,s)=>{const o=e.length,c=new Array(o);let u=0;for(let h=0;h<o;h++){const p=h;t(e[p]).next(g=>{c[p]=g,++u,u===o&&r(c)},g=>s(g))}})}static doWhile(e,t){return new ue((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}function L3(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Bp.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=-1;function qp(n){return n==null}function lp(n){return n===0&&1/n==-1/0}function M3(n){return typeof n=="number"&&Number.isInteger(n)&&!lp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="";function F3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sb(e)),e=V3(n.get(t),e);return Sb(e)}function V3(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case eC:t+="";break;default:t+=o}}return t}function Sb(n){return n+eC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ia(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function tC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t){this.comparator=e,this.root=t||Ln.EMPTY}insert(e,t){return new rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mf(this.root,e,this.comparator,!0)}}class mf{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Ln.RED,this.left=s??Ln.EMPTY,this.right=o??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Ln(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ln.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ze(27949);return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze(57766)}get value(){throw Ze(16141)}get color(){throw Ze(16727)}get left(){throw Ze(29726)}get right(){throw Ze(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new Ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tb(this.data.getIterator())}getIteratorFrom(e){return new Tb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class Tb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.fields=e,e.sort(Fn.comparator)}static empty(){return new Lr([])}unionWith(e){let t=new Nn(Fn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Lr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nC("Invalid base64 string: "+o):o}}(e);return new Un(t)}static fromUint8Array(e){const t=function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o}(e);return new Un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Un.EMPTY_BYTE_STRING=new Un("");const U3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xo(n){if(Pt(!!n,39018),typeof n=="string"){let e=0;const t=U3.exec(n);if(Pt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:un(n.seconds),nanos:un(n.nanos)}}function un(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Jo(n){return typeof n=="string"?Un.fromBase64String(n):Un.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="server_timestamp",sC="__type__",iC="__previous_value__",oC="__local_write_time__";function Px(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[sC])===null||t===void 0?void 0:t.stringValue)===rC}function Wp(n){const e=n.mapValue.fields[iC];return Px(e)?Wp(e):e}function md(n){const e=Xo(n.mapValue.fields[oC].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,t,r,s,o,c,u,h,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=p,this.isUsingEmulator=g}}const cp="(default)";class gd{constructor(e,t){this.projectId=e,this.database=t||cp}static empty(){return new gd("","")}get isDefaultDatabase(){return this.database===cp}isEqual(e){return e instanceof gd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="__type__",$3="__max__",gf={mapValue:{}},lC="__vector__",up="value";function Zo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Px(n)?4:q3(n)?9007199254740991:B3(n)?10:11:Ze(28295,{value:n})}function ri(n,e){if(n===e)return!0;const t=Zo(n);if(t!==Zo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return md(n).isEqual(md(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const c=Xo(s.timestampValue),u=Xo(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Jo(s.bytesValue).isEqual(Jo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return un(s.geoPointValue.latitude)===un(o.geoPointValue.latitude)&&un(s.geoPointValue.longitude)===un(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return un(s.integerValue)===un(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const c=un(s.doubleValue),u=un(o.doubleValue);return c===u?lp(c)===lp(u):isNaN(c)&&isNaN(u)}return!1}(n,e);case 9:return jc(n.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return function(s,o){const c=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Nb(c)!==Nb(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!ri(c[h],u[h])))return!1;return!0}(n,e);default:return Ze(52216,{left:n})}}function yd(n,e){return(n.values||[]).find(t=>ri(t,e))!==void 0}function Ac(n,e){if(n===e)return 0;const t=Zo(n),r=Zo(e);if(t!==r)return ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ut(n.booleanValue,e.booleanValue);case 2:return function(o,c){const u=un(o.integerValue||o.doubleValue),h=un(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return Cb(n.timestampValue,e.timestampValue);case 4:return Cb(md(n),md(e));case 5:return pv(n.stringValue,e.stringValue);case 6:return function(o,c){const u=Jo(o),h=Jo(c);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const u=o.split("/"),h=c.split("/");for(let p=0;p<u.length&&p<h.length;p++){const g=ut(u[p],h[p]);if(g!==0)return g}return ut(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const u=ut(un(o.latitude),un(c.latitude));return u!==0?u:ut(un(o.longitude),un(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Ib(n.arrayValue,e.arrayValue);case 10:return function(o,c){var u,h,p,g;const y=o.fields||{},v=c.fields||{},b=(u=y[up])===null||u===void 0?void 0:u.arrayValue,S=(h=v[up])===null||h===void 0?void 0:h.arrayValue,x=ut(((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0,((g=S==null?void 0:S.values)===null||g===void 0?void 0:g.length)||0);return x!==0?x:Ib(b,S)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===gf.mapValue&&c===gf.mapValue)return 0;if(o===gf.mapValue)return 1;if(c===gf.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),p=c.fields||{},g=Object.keys(p);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const v=pv(h[y],g[y]);if(v!==0)return v;const b=Ac(u[h[y]],p[g[y]]);if(b!==0)return b}return ut(h.length,g.length)}(n.mapValue,e.mapValue);default:throw Ze(23264,{le:t})}}function Cb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ut(n,e);const t=Xo(n),r=Xo(e),s=ut(t.seconds,r.seconds);return s!==0?s:ut(t.nanos,r.nanos)}function Ib(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Ac(t[s],r[s]);if(o)return o}return ut(t.length,r.length)}function Pc(n){return gv(n)}function gv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Xo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Jo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Be.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=gv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const c of r)o?o=!1:s+=",",s+=`${c}:${gv(t.fields[c])}`;return s+"}"}(n.mapValue):Ze(61005,{value:n})}function Lf(n){switch(Zo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wp(n);return e?16+Lf(e):16;case 5:return 2*n.stringValue.length;case 6:return Jo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Lf(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return ia(r.fields,(o,c)=>{s+=o.length+Lf(c)}),s}(n.mapValue);default:throw Ze(13486,{value:n})}}function jb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yv(n){return!!n&&"integerValue"in n}function Rx(n){return!!n&&"arrayValue"in n}function Ab(n){return!!n&&"nullValue"in n}function Pb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mf(n){return!!n&&"mapValue"in n}function B3(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[aC])===null||t===void 0?void 0:t.stringValue)===lC}function Ju(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ia(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ju(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ju(n.arrayValue.values[t]);return e}return Object.assign({},n)}function q3(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===$3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.value=e}static empty(){return new _r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ju(t)}setAll(e){let t=Fn.emptyPath(),r={},s=[];e.forEach((c,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,s),r={},s=[],t=u.popLast()}c?r[u.lastSegment()]=Ju(c):s.push(u.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Mf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ia(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new _r(Ju(this.value))}}function cC(n){const e=[];return ia(n.fields,(t,r)=>{const s=new Fn([t]);if(Mf(r)){const o=cC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const c of o)e.push(s.child(c))}else e.push(s)}),new Lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t,r,s,o,c,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Yn(e,0,ot.min(),ot.min(),ot.min(),_r.empty(),0)}static newFoundDocument(e,t,r,s){return new Yn(e,1,t,ot.min(),r,s,0)}static newNoDocument(e,t){return new Yn(e,2,t,ot.min(),ot.min(),_r.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,ot.min(),ot.min(),_r.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t){this.position=e,this.inclusive=t}}function Rb(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],c=n.position[s];if(o.field.isKeyField()?r=Be.comparator(Be.fromName(c.referenceValue),t.key):r=Ac(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function kb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ri(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t="asc"){this.field=e,this.dir=t}}function W3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{}class gn extends uC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new K3(e,t,r):t==="array-contains"?new Y3(e,r):t==="in"?new X3(e,r):t==="not-in"?new J3(e,r):t==="array-contains-any"?new Z3(e,r):new gn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new G3(e,r):new Q3(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ac(t,this.value)):t!==null&&Zo(this.value)===Zo(t)&&this.matchesComparison(Ac(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ss extends uC{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Ss(e,t)}matches(e){return dC(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function dC(n){return n.op==="and"}function hC(n){return H3(n)&&dC(n)}function H3(n){for(const e of n.filters)if(e instanceof Ss)return!1;return!0}function vv(n){if(n instanceof gn)return n.field.canonicalString()+n.op.toString()+Pc(n.value);if(hC(n))return n.filters.map(e=>vv(e)).join(",");{const e=n.filters.map(t=>vv(t)).join(",");return`${n.op}(${e})`}}function fC(n,e){return n instanceof gn?function(r,s){return s instanceof gn&&r.op===s.op&&r.field.isEqual(s.field)&&ri(r.value,s.value)}(n,e):n instanceof Ss?function(r,s){return s instanceof Ss&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,c,u)=>o&&fC(c,s.filters[u]),!0):!1}(n,e):void Ze(19439)}function pC(n){return n instanceof gn?function(t){return`${t.field.canonicalString()} ${t.op} ${Pc(t.value)}`}(n):n instanceof Ss?function(t){return t.op.toString()+" {"+t.getFilters().map(pC).join(" ,")+"}"}(n):"Filter"}class K3 extends gn{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class G3 extends gn{constructor(e,t){super(e,"in",t),this.keys=mC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Q3 extends gn{constructor(e,t){super(e,"not-in",t),this.keys=mC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class Y3 extends gn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rx(t)&&yd(t.arrayValue,this.value)}}class X3 extends gn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yd(this.value.arrayValue,t)}}class J3 extends gn{constructor(e,t){super(e,"not-in",t)}matches(e){if(yd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yd(this.value.arrayValue,t)}}class Z3 extends gn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rx(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,t=null,r=[],s=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=c,this.endAt=u,this.Pe=null}}function Ob(n,e=null,t=[],r=[],s=null,o=null,c=null){return new eU(n,e,t,r,s,o,c)}function kx(n){const e=at(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>vv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),qp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Pc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Pc(r)).join(",")),e.Pe=t}return e.Pe}function Ox(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!W3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!fC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kb(n.startAt,e.startAt)&&kb(n.endAt,e.endAt)}function xv(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t=null,r=[],s=[],o=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function tU(n,e,t,r,s,o,c,u){return new ll(n,e,t,r,s,o,c,u)}function Dx(n){return new ll(n)}function Db(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gC(n){return n.collectionGroup!==null}function Zu(n){const e=at(n);if(e.Te===null){e.Te=[];const t=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Nn(Fn.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(p=>{p.isInequality()&&(u=u.add(p.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new vd(o,r))}),t.has(Fn.keyField().canonicalString())||e.Te.push(new vd(Fn.keyField(),r))}return e.Te}function Ys(n){const e=at(n);return e.Ie||(e.Ie=nU(e,Zu(n))),e.Ie}function nU(n,e){if(n.limitType==="F")return Ob(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new vd(s.field,o)});const t=n.endAt?new dp(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new dp(n.startAt.position,n.startAt.inclusive):null;return Ob(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function wv(n,e){const t=n.filters.concat([e]);return new ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _v(n,e,t){return new ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hp(n,e){return Ox(Ys(n),Ys(e))&&n.limitType===e.limitType}function yC(n){return`${kx(Ys(n))}|lt:${n.limitType}`}function ec(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>pC(s)).join(", ")}]`),qp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Pc(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Pc(s)).join(",")),`Target(${r})`}(Ys(n))}; limitType=${n.limitType})`}function Kp(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Be.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of Zu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(c,u,h){const p=Rb(c,u,h);return c.inclusive?p<=0:p<0}(r.startAt,Zu(r),s)||r.endAt&&!function(c,u,h){const p=Rb(c,u,h);return c.inclusive?p>=0:p>0}(r.endAt,Zu(r),s))}(n,e)}function rU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vC(n){return(e,t)=>{let r=!1;for(const s of Zu(n)){const o=sU(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function sU(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(o,c,u){const h=c.data.field(o),p=u.data.field(o);return h!==null&&p!==null?Ac(h,p):Ze(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ze(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return tC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=new rn(Be.comparator);function Vi(){return iU}const xC=new rn(Be.comparator);function zu(...n){let e=xC;for(const t of n)e=e.insert(t.key,t);return e}function wC(n){let e=xC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ra(){return ed()}function _C(){return ed()}function ed(){return new cl(n=>n.toString(),(n,e)=>n.isEqual(e))}const oU=new rn(Be.comparator),aU=new Nn(Be.comparator);function ft(...n){let e=aU;for(const t of n)e=e.add(t);return e}const lU=new Nn(ut);function cU(){return lU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lp(e)?"-0":e}}function EC(n){return{integerValue:""+n}}function uU(n,e){return M3(e)?EC(e):Lx(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this._=void 0}}function dU(n,e,t){return n instanceof xd?function(s,o){const c={fields:{[sC]:{stringValue:rC},[oC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Px(o)&&(o=Wp(o)),o&&(c.fields[iC]=o),{mapValue:c}}(t,e):n instanceof wd?SC(n,e):n instanceof _d?NC(n,e):function(s,o){const c=bC(s,o),u=Lb(c)+Lb(s.Ee);return yv(c)&&yv(s.Ee)?EC(u):Lx(s.serializer,u)}(n,e)}function hU(n,e,t){return n instanceof wd?SC(n,e):n instanceof _d?NC(n,e):t}function bC(n,e){return n instanceof hp?function(r){return yv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class xd extends Gp{}class wd extends Gp{constructor(e){super(),this.elements=e}}function SC(n,e){const t=TC(e);for(const r of n.elements)t.some(s=>ri(s,r))||t.push(r);return{arrayValue:{values:t}}}class _d extends Gp{constructor(e){super(),this.elements=e}}function NC(n,e){let t=TC(e);for(const r of n.elements)t=t.filter(s=>!ri(s,r));return{arrayValue:{values:t}}}class hp extends Gp{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Lb(n){return un(n.integerValue||n.doubleValue)}function TC(n){return Rx(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,t){this.field=e,this.transform=t}}function pU(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof wd&&s instanceof wd||r instanceof _d&&s instanceof _d?jc(r.elements,s.elements,ri):r instanceof hp&&s instanceof hp?ri(r.Ee,s.Ee):r instanceof xd&&s instanceof xd}(n.transform,e.transform)}class mU{constructor(e,t){this.version=e,this.transformResults=t}}class ws{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ws}static exists(e){return new ws(void 0,e)}static updateTime(e){return new ws(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ff(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Qp{}function CC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Mx(n.key,ws.none()):new Fd(n.key,n.data,ws.none());{const t=n.data,r=_r.empty();let s=new Nn(Fn.comparator);for(let o of e.fields)if(!s.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),s=s.add(o)}return new oa(n.key,r,new Lr(s.toArray()),ws.none())}}function gU(n,e,t){n instanceof Fd?function(s,o,c){const u=s.value.clone(),h=Fb(s.fieldTransforms,o,c.transformResults);u.setAll(h),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(n,e,t):n instanceof oa?function(s,o,c){if(!Ff(s.precondition,o))return void o.convertToUnknownDocument(c.version);const u=Fb(s.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(IC(s)),h.setAll(u),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):function(s,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function td(n,e,t,r){return n instanceof Fd?function(o,c,u,h){if(!Ff(o.precondition,c))return u;const p=o.value.clone(),g=Vb(o.fieldTransforms,h,c);return p.setAll(g),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof oa?function(o,c,u,h){if(!Ff(o.precondition,c))return u;const p=Vb(o.fieldTransforms,h,c),g=c.data;return g.setAll(IC(o)),g.setAll(p),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,c,u){return Ff(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(n,e,t)}function yU(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=bC(r.transform,s||null);o!=null&&(t===null&&(t=_r.empty()),t.set(r.field,o))}return t||null}function Mb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&jc(r,s,(o,c)=>pU(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Fd extends Qp{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class oa extends Qp{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function IC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Fb(n,e,t){const r=new Map;Pt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const o=n[s],c=o.transform,u=e.data.field(o.field);r.set(o.field,hU(c,u,t[s]))}return r}function Vb(n,e,t){const r=new Map;for(const s of n){const o=s.transform,c=t.data.field(s.field);r.set(s.field,dU(o,c,e))}return r}class Mx extends Qp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vU extends Qp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&gU(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=td(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=td(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_C();return this.mutations.forEach(s=>{const o=e.get(s.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=t.has(s.key)?null:u;const h=CC(c,u);h!==null&&r.set(s.key,h),c.isValidDocument()||c.convertToNoDocument(ot.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ft())}isEqual(e){return this.batchId===e.batchId&&jc(this.mutations,e.mutations,(t,r)=>Mb(t,r))&&jc(this.baseMutations,e.baseMutations,(t,r)=>Mb(t,r))}}class Fx{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Pt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return oU}();const o=e.mutations;for(let c=0;c<o.length;c++)s=s.insert(o[c].key,r[c].version);return new Fx(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wU=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pn,bt;function EU(n){switch(n){case ce.OK:return Ze(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Ze(15467,{code:n})}}function jC(n){if(n===void 0)return Fi("GRPC error has no .code"),ce.UNKNOWN;switch(n){case pn.OK:return ce.OK;case pn.CANCELLED:return ce.CANCELLED;case pn.UNKNOWN:return ce.UNKNOWN;case pn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case pn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case pn.INTERNAL:return ce.INTERNAL;case pn.UNAVAILABLE:return ce.UNAVAILABLE;case pn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case pn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case pn.NOT_FOUND:return ce.NOT_FOUND;case pn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case pn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case pn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case pn.ABORTED:return ce.ABORTED;case pn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case pn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case pn.DATA_LOSS:return ce.DATA_LOSS;default:return Ze(39323,{code:n})}}(bt=pn||(pn={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=new zo([4294967295,4294967295],0);function Ub(n){const e=JT().encode(n),t=new WT;return t.update(e),new Uint8Array(t.digest())}function zb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new zo([t,r],0),new zo([s,o],0)]}class Vx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $u(`Invalid padding: ${t}`);if(r<0)throw new $u(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $u(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=zo.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(zo.fromNumber(r)));return s.compare(bU)===1&&(s=new zo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Ub(e),[r,s]=zb(t);for(let o=0;o<this.hashCount;o++){const c=this.pe(r,s,o);if(!this.ye(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Vx(o,s,t);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const t=Ub(e),[r,s]=zb(t);for(let o=0;o<this.hashCount;o++){const c=this.pe(r,s,o);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Vd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Yp(ot.min(),s,new rn(ut),Vi(),ft())}}class Vd{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Vd(r,t,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class AC{constructor(e,t){this.targetId=e,this.De=t}}class PC{constructor(e,t,r=Un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class $b{constructor(){this.ve=0,this.Ce=Bb(),this.Fe=Un.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ft(),t=ft(),r=ft();return this.Ce.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ze(38017,{changeType:o})}}),new Vd(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Bb()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Pt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class SU{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vi(),this.je=yf(),this.Je=yf(),this.He=new rn(ut)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Ze(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const o=s.target;if(xv(o))if(r===0){const c=new Be(o.path);this.Xe(t,c,Yn.newNoDocument(c,ot.min()))}else Pt(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const u=this._t(e),h=u?this.ut(u,e,c):1;if(h!==0){this.rt(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,p)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let c,u;try{c=Jo(r).toUint8Array()}catch(h){if(h instanceof nC)return Za("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Vx(c,s,o)}catch(h){return Za(h instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.fe===0?null:u}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Xe(t,o,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((o,c)=>{const u=this.st(c);if(u){if(o.current&&xv(u.target)){const h=new Be(u.target.path);this.Tt(h).has(c)||this.It(c,h)||this.Xe(c,h,Yn.newNoDocument(h,e))}o.Ne&&(t.set(c,o.Le()),o.ke())}});let r=ft();this.Je.forEach((o,c)=>{let u=!0;c.forEachWhile(h=>{const p=this.st(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ze.forEach((o,c)=>c.setReadTime(e));const s=new Yp(e,t,this.He,this.ze,r);return this.ze=Vi(),this.je=yf(),this.Je=yf(),this.He=new rn(ut),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new $b,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Nn(ut),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Nn(ut),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new $b),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function yf(){return new rn(Be.comparator)}function Bb(){return new rn(Be.comparator)}const NU={asc:"ASCENDING",desc:"DESCENDING"},TU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CU={and:"AND",or:"OR"};class IU{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ev(n,e){return n.useProto3Json||qp(e)?e:{value:e}}function fp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function jU(n,e){return fp(n,e.toTimestamp())}function Xs(n){return Pt(!!n,49232),ot.fromTimestamp(function(t){const r=Xo(t);return new wt(r.seconds,r.nanos)}(n))}function Ux(n,e){return bv(n,e).canonicalString()}function bv(n,e){const t=function(s){return new Lt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function kC(n){const e=Lt.fromString(n);return Pt(FC(e),10190,{key:e.toString()}),e}function Sv(n,e){return Ux(n.databaseId,e.path)}function ly(n,e){const t=kC(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(DC(t))}function OC(n,e){return Ux(n.databaseId,e)}function AU(n){const e=kC(n);return e.length===4?Lt.emptyPath():DC(e)}function Nv(n){return new Lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DC(n){return Pt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function qb(n,e,t){return{name:Sv(n,e),fields:t.value.mapValue.fields}}function PU(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ze(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,g){return p.useProto3Json?(Pt(g===void 0||typeof g=="string",58123),Un.fromBase64String(g||"")):(Pt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Un.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(p){const g=p.code===void 0?ce.UNKNOWN:jC(p.code);return new Se(g,p.message||"")}(c);t=new PC(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ly(n,r.document.name),o=Xs(r.document.updateTime),c=r.document.createTime?Xs(r.document.createTime):ot.min(),u=new _r({mapValue:{fields:r.document.fields}}),h=Yn.newFoundDocument(s,o,c,u),p=r.targetIds||[],g=r.removedTargetIds||[];t=new Vf(p,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ly(n,r.document),o=r.readTime?Xs(r.readTime):ot.min(),c=Yn.newNoDocument(s,o),u=r.removedTargetIds||[];t=new Vf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ly(n,r.document),o=r.removedTargetIds||[];t=new Vf([],o,s,null)}else{if(!("filter"in e))return Ze(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,c=new _U(s,o),u=r.targetId;t=new AC(u,c)}}return t}function RU(n,e){let t;if(e instanceof Fd)t={update:qb(n,e.key,e.value)};else if(e instanceof Mx)t={delete:Sv(n,e.key)};else if(e instanceof oa)t={update:qb(n,e.key,e.data),updateMask:zU(e.fieldMask)};else{if(!(e instanceof vU))return Ze(16599,{Rt:e.type});t={verify:Sv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const u=c.transform;if(u instanceof xd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof wd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof _d)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof hp)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw Ze(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:jU(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ze(27497)}(n,e.precondition)),t}function kU(n,e){return n&&n.length>0?(Pt(e!==void 0,14353),n.map(t=>function(s,o){let c=s.updateTime?Xs(s.updateTime):Xs(o);return c.isEqual(ot.min())&&(c=Xs(o)),new mU(c,s.transformResults||[])}(t,e))):[]}function OU(n,e){return{documents:[OC(n,e.path)]}}function DU(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=OC(n,s);const o=function(p){if(p.length!==0)return MC(Ss.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const c=function(p){if(p.length!==0)return p.map(g=>function(v){return{field:tc(v.field),direction:FU(v.dir)}}(g))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=Ev(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{Vt:t,parent:s}}function LU(n){let e=AU(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Pt(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(y){const v=LC(y);return v instanceof Ss&&hC(v)?v.getFilters():[v]}(t.where));let c=[];t.orderBy&&(c=function(y){return y.map(v=>function(S){return new vd(nc(S.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(t.orderBy));let u=null;t.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,qp(v)?null:v}(t.limit));let h=null;t.startAt&&(h=function(y){const v=!!y.before,b=y.values||[];return new dp(b,v)}(t.startAt));let p=null;return t.endAt&&(p=function(y){const v=!y.before,b=y.values||[];return new dp(b,v)}(t.endAt)),tU(e,s,c,o,u,"F",h,p)}function MU(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function LC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=nc(t.unaryFilter.field);return gn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=nc(t.unaryFilter.field);return gn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=nc(t.unaryFilter.field);return gn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=nc(t.unaryFilter.field);return gn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ze(61313);default:return Ze(60726)}}(n):n.fieldFilter!==void 0?function(t){return gn.create(nc(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ze(58110);default:return Ze(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ss.create(t.compositeFilter.filters.map(r=>LC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ze(1026)}}(t.compositeFilter.op))}(n):Ze(30097,{filter:n})}function FU(n){return NU[n]}function VU(n){return TU[n]}function UU(n){return CU[n]}function tc(n){return{fieldPath:n.canonicalString()}}function nc(n){return Fn.fromServerFormat(n.fieldPath)}function MC(n){return n instanceof gn?function(t){if(t.op==="=="){if(Pb(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NAN"}};if(Ab(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Pb(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NAN"}};if(Ab(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tc(t.field),op:VU(t.op),value:t.value}}}(n):n instanceof Ss?function(t){const r=t.getFilters().map(s=>MC(s));return r.length===1?r[0]:{compositeFilter:{op:UU(t.op),filters:r}}}(n):Ze(54877,{filter:n})}function zU(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function FC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t,r,s,o=ot.min(),c=ot.min(),u=Un.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.gt=e}}function BU(n){const e=LU({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_v(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(){this.Dn=new WU}addToCollectionParentIndex(e,t){return this.Dn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Yo.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Yo.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class WU{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Nn(Lt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Nn(Lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VC=41943040;class wr{static withCacheSize(e){return new wr(e,wr.DEFAULT_COLLECTION_PERCENTILE,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr.DEFAULT_COLLECTION_PERCENTILE=10,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wr.DEFAULT=new wr(VC,wr.DEFAULT_COLLECTION_PERCENTILE,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wr.DISABLED=new wr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Rc(0)}static ur(){return new Rc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="LruGarbageCollector",UC=1048576;function Kb([n,e],[t,r]){const s=ut(n,t);return s===0?ut(e,r):s}class HU{constructor(e){this.Tr=e,this.buffer=new Nn(Kb),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Kb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KU{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ae(Hb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qc(t)?Ae(Hb,"Ignoring IndexedDB error during garbage collection: ",t):await Gc(t)}await this.Rr(3e5)})}}class GU{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Bp.ue);const r=new HU(t);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Wb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wb):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,o,c,u,h,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(p=Date.now(),Zl()<=ht.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${y} documents in `+(p-h)+`ms
Total Duration: ${p-g}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y})))}}function QU(n,e){return new GU(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(){this.changes=new cl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&td(r.mutation,s,Lr.empty(),wt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ft()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ft()){const s=Ra();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let c=zu();return o.forEach((u,h)=>{c=c.insert(u,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Ra();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ft()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((c,u)=>{t.set(c,u)})})}computeViews(e,t,r,s){let o=Vi();const c=ed(),u=function(){return ed()}();return t.forEach((h,p)=>{const g=r.get(p.key);s.has(p.key)&&(g===void 0||g.mutation instanceof oa)?o=o.insert(p.key,p):g!==void 0?(c.set(p.key,g.mutation.getFieldMask()),td(g.mutation,p,g.mutation.getFieldMask(),wt.now())):c.set(p.key,Lr.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((p,g)=>c.set(p,g)),t.forEach((p,g)=>{var y;return u.set(p,new XU(g,(y=c.get(p))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,t){const r=ed();let s=new rn((c,u)=>c-u),o=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const u of c)u.keys().forEach(h=>{const p=t.get(h);if(p===null)return;let g=r.get(h)||Lr.empty();g=u.applyToLocalView(p,g),r.set(h,g);const y=(s.get(u.batchId)||ft()).add(h);s=s.insert(u.batchId,y)})}).next(()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),p=h.key,g=h.value,y=_C();g.forEach(v=>{if(!o.has(v)){const b=CC(t.get(v),r.get(v));b!==null&&y.set(v,b),o=o.add(v)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,y))}return ue.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(c){return Be.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const c=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ue.resolve(Ra());let u=pd,h=o;return c.next(p=>ue.forEach(p,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?ue.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{h=h.insert(g,v)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,h,p,ft())).next(g=>({batchId:u,changes:wC(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let s=zu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let c=zu();return this.indexManager.getCollectionParents(e,o).next(u=>ue.forEach(u,h=>{const p=function(y,v){return new ll(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(g=>{g.forEach((y,v)=>{c=c.insert(y,v)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(c=>{o.forEach((h,p)=>{const g=p.getKey();c.get(g)===null&&(c=c.insert(g,Yn.newInvalidDocument(g)))});let u=zu();return c.forEach((h,p)=>{const g=o.get(h);g!==void 0&&td(g.mutation,p,Lr.empty(),wt.now()),Kp(t,p)&&(u=u.insert(h,p))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Xs(s.createTime)}}(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:BU(s.bundledQuery),readTime:Xs(s.readTime)}}(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(){this.overlays=new rn(Be.comparator),this.kr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ra();return ue.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.wt(e,t,o)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const s=Ra(),o=t.length+1,c=new Be(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>r&&s.set(h.getKey(),h)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new rn((p,g)=>p-g);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let g=o.get(p.largestBatchId);g===null&&(g=Ra(),o=o.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const u=Ra(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,g)=>u.set(p,g)),!(u.size()>=s)););return ue.resolve(u)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new wU(t,r));let o=this.kr.get(t);o===void 0&&(o=ft(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(){this.sessionToken=Un.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.qr=new Nn(Pn.Qr),this.$r=new Nn(Pn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Pn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Pn(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new Be(new Lt([])),r=new Pn(t,e),s=new Pn(t,e+1),o=[];return this.$r.forEachInRange([r,s],c=>{this.Wr(c),o.push(c.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Be(new Lt([])),r=new Pn(t,e),s=new Pn(t,e+1);let o=ft();return this.$r.forEachInRange([r,s],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new Pn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Pn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Be.comparator(e.key,t.key)||ut(e.Hr,t.Hr)}static Ur(e,t){return ut(e.Hr,t.Hr)||Be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Nn(Pn.Qr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new xU(o,t,r,s);this.mutationQueue.push(c);for(const u of s)this.Yr=this.Yr.add(new Pn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,t){return ue.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),o=s<0?0:s;return ue.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?Ax:this.er-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pn(t,0),s=new Pn(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,s],c=>{const u=this.Zr(c.Hr);o.push(u)}),ue.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(ut);return t.forEach(s=>{const o=new Pn(s,0),c=new Pn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,c],u=>{r=r.add(u.Hr)})}),ue.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Be.isDocumentKey(o)||(o=o.child(""));const c=new Pn(new Be(o),0);let u=new Nn(ut);return this.Yr.forEachWhile(h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(u=u.add(h.Hr)),!0)},c),ue.resolve(this.ei(u))}ei(e){const t=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Pt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ue.forEach(t.mutations,s=>{const o=new Pn(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new Pn(t,0),s=this.Yr.firstAfterOrEqual(r);return ue.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.ni=e,this.docs=function(){return new rn(Be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let r=Vi();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Yn.newInvalidDocument(s))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=Vi();const c=t.path,u=new Be(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:p,value:{document:g}}=h.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||k3(R3(g),r)<=0||(s.has(g.key)||Kp(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ue.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Ze(9500)}ri(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new s6(this)}getSize(e){return ue.resolve(this.size)}}class s6 extends YU{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this.persistence=e,this.ii=new cl(t=>kx(t),Ox),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.si=0,this.oi=new zx,this.targetCount=0,this._i=Rc.ar()}forEachTarget(e,t){return this.ii.forEach((r,s)=>t(s)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),ue.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Rc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.hr(t),ue.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ii.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),ue.waitFor(o).next(()=>s)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(c=>{o.push(s.markPotentiallyOrphaned(e,c))}),ue.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,t){this.ai={},this.overlays={},this.ui=new Bp(0),this.ci=!1,this.ci=!0,this.li=new t6,this.referenceDelegate=e(this),this.hi=new i6(this),this.indexManager=new qU,this.remoteDocumentCache=function(s){return new r6(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new $U(t),this.Ti=new ZU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new e6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new n6(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const s=new o6(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ei(e,t){return ue.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class o6 extends D3{constructor(e){super(),this.currentSequenceNumber=e}}class $x{constructor(e){this.persistence=e,this.Ai=new zx,this.Ri=null}static Vi(e){return new $x(e)}get mi(){if(this.Ri)return this.Ri;throw Ze(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.mi,r=>{const s=Be.fromPath(r);return this.fi(e,s).next(o=>{o||t.removeEntry(s,ot.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ue.or([()=>ue.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class pp{constructor(e,t){this.persistence=e,this.gi=new cl(r=>F3(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=QU(this,t)}static Vi(e,t){return new pp(e,t)}Ii(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return ue.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(o=>o?ue.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ri(e,c=>this.Sr(e,c,t).next(u=>{u||(r++,o.removeEntry(c,ot.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ue.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lf(e.data.value)),t}Sr(e,t,r){return ue.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return ue.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=ft(),s=ft();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Bx(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return zM()?8:L3(Zn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ps(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ys(e,t,s,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new a6;return this.ws(e,t,c).next(u=>{if(o.result=u,this.Rs)return this.Ss(e,t,c,u.size)})}).next(()=>o.result)}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Zl()<=ht.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",ec(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(Zl()<=ht.DEBUG&&Ae("QueryEngine","Query:",ec(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Zl()<=ht.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",ec(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ys(t))):ue.resolve())}ps(e,t){if(Db(t))return ue.resolve(null);let r=Ys(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=_v(t,null,"F"),r=Ys(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=ft(...o);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const p=this.bs(t,u);return this.Ds(t,p,c,h.readTime)?this.ps(e,_v(t,null,"F")):this.vs(e,p,t,h)}))})))}ys(e,t,r,s){return Db(t)||s.isEqual(ot.min())?ue.resolve(null):this.gs.getDocuments(e,r).next(o=>{const c=this.bs(t,o);return this.Ds(t,c,r,s)?ue.resolve(null):(Zl()<=ht.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ec(t)),this.vs(e,c,t,P3(s,pd)).next(u=>u))})}bs(e,t){let r=new Nn(vC(e));return t.forEach((s,o)=>{Kp(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ws(e,t,r){return Zl()<=ht.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",ec(t)),this.gs.getDocumentsMatchingQuery(e,t,Yo.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="LocalStore",c6=3e8;class u6{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new rn(ut),this.Ms=new cl(o=>kx(o),Ox),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JU(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function d6(n,e,t,r){return new u6(n,e,t,r)}async function $C(n,e){const t=at(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],u=[];let h=ft();for(const p of s){c.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}for(const p of o){u.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next(p=>({Bs:p,removedBatchIds:c,addedBatchIds:u}))})})}function h6(n,e){const t=at(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(u,h,p,g){const y=p.batch,v=y.keys();let b=ue.resolve();return v.forEach(S=>{b=b.next(()=>g.getEntry(h,S)).next(x=>{const _=p.docVersions.get(S);Pt(_!==null,48541),x.version.compareTo(_)<0&&(y.applyToRemoteDocument(x,p),x.isValidDocument()&&(x.setReadTime(p.commitVersion),g.addEntry(x)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(h,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=ft();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(h=h.add(u.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function BC(n){const e=at(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function f6(n,e){const t=at(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const u=[];e.targetChanges.forEach((g,y)=>{const v=s.get(y);if(!v)return;u.push(t.hi.removeMatchingKeys(o,g.removedDocuments,y).next(()=>t.hi.addMatchingKeys(o,g.addedDocuments,y)));let b=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(Un.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),s=s.insert(y,b),function(x,_,A){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=c6?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(v,b,g)&&u.push(t.hi.updateTargetData(o,b))});let h=Vi(),p=ft();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(p6(o,c,e.documentUpdates).next(g=>{h=g.Ls,p=g.ks})),!r.isEqual(ot.min())){const g=t.hi.getLastRemoteSnapshotVersion(o).next(y=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return ue.waitFor(u).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,p)).next(()=>h)}).then(o=>(t.Fs=s,o))}function p6(n,e,t){let r=ft(),s=ft();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=Vi();return t.forEach((u,h)=>{const p=o.get(u);h.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(ot.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):Ae(qx,"Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",h.version)}),{Ls:c,ks:s}})}function m6(n,e){const t=at(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ax),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function g6(n,e){const t=at(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.hi.getTargetData(r,e).next(o=>o?(s=o,ue.resolve(s)):t.hi.allocateTargetId(r).next(c=>(s=new Oo(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function Tv(n,e,t){const r=at(n),s=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!Qc(c))throw c;Ae(qx,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Gb(n,e,t){const r=at(n);let s=ot.min(),o=ft();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,p,g){const y=at(h),v=y.Ms.get(g);return v!==void 0?ue.resolve(y.Fs.get(v)):y.hi.getTargetData(p,g)}(r,c,Ys(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(h=>{o=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,t?s:ot.min(),t?o:ft())).next(u=>(y6(r,rU(e),u),{documents:u,qs:o})))}function y6(n,e,t){let r=n.xs.get(e)||ot.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}class Qb{constructor(){this.activeTargetIds=cU()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class v6{constructor(){this.Fo=new Qb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Qb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="ConnectivityMonitor";class Xb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ae(Yb,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ae(Yb,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf=null;function Cv(){return vf===null?vf=function(){return 268435456+Math.round(2147483648*Math.random())}():vf++,"0x"+vf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="RestConnection",w6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===cp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,o){const c=Cv(),u=this.Go(e,t.toUriEncodedString());Ae(cy,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,o);const{host:p}=new URL(u),g=il(p);return this.jo(e,u,h,r,g).then(y=>(Ae(cy,`Received RPC '${e}' ${c}: `,y),y),y=>{throw Za(cy,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,t,r,s,o,c){return this.Wo(e,t,r,s,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Kc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}Go(e,t){const r=w6[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="WebChannelConnection";class b6 extends _6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,o){const c=Cv();return new Promise((u,h)=>{const p=new HT;p.setWithCredentials(!0),p.listenOnce(KT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Df.NO_ERROR:const y=p.getResponseJson();Ae(Gn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Df.TIMEOUT:Ae(Gn,`RPC '${e}' ${c} timed out`),h(new Se(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Df.HTTP_ERROR:const v=p.getStatus();if(Ae(Gn,`RPC '${e}' ${c} failed with status:`,v,"response text:",p.getResponseText()),v>0){let b=p.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b==null?void 0:b.error;if(S&&S.status&&S.message){const x=function(A){const I=A.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(I)>=0?I:ce.UNKNOWN}(S.status);h(new Se(x,S.message))}else h(new Se(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new Se(ce.UNAVAILABLE,"Connection failed."));break;default:Ze(9055,{c_:e,streamId:c,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{Ae(Gn,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(s);Ae(Gn,`RPC '${e}' ${c} sending request:`,s),p.send(t,"POST",g,r,15)})}P_(e,t,r){const s=Cv(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=YT(),u=QT(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=o.join("");Ae(Gn,`Creating RPC '${e}' stream ${s}: ${g}`,h);const y=c.createWebChannel(g,h);this.T_(y);let v=!1,b=!1;const S=new E6({Ho:_=>{b?Ae(Gn,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(v||(Ae(Gn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),Ae(Gn,`RPC '${e}' stream ${s} sending:`,_),y.send(_))},Yo:()=>y.close()}),x=(_,A,I)=>{_.listen(A,C=>{try{I(C)}catch(M){setTimeout(()=>{throw M},0)}})};return x(y,Uu.EventType.OPEN,()=>{b||(Ae(Gn,`RPC '${e}' stream ${s} transport opened.`),S.s_())}),x(y,Uu.EventType.CLOSE,()=>{b||(b=!0,Ae(Gn,`RPC '${e}' stream ${s} transport closed`),S.__(),this.I_(y))}),x(y,Uu.EventType.ERROR,_=>{b||(b=!0,Za(Gn,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),S.__(new Se(ce.UNAVAILABLE,"The operation could not be completed")))}),x(y,Uu.EventType.MESSAGE,_=>{var A;if(!b){const I=_.data[0];Pt(!!I,16349);const C=I,M=(C==null?void 0:C.error)||((A=C[0])===null||A===void 0?void 0:A.error);if(M){Ae(Gn,`RPC '${e}' stream ${s} received error:`,M);const U=M.status;let $=function(D){const O=pn[D];if(O!==void 0)return jC(O)}(U),P=M.message;$===void 0&&($=ce.INTERNAL,P="Unknown error status: "+U+" with message "+M.message),b=!0,S.__(new Se($,P)),y.close()}else Ae(Gn,`RPC '${e}' stream ${s} received:`,I),S.a_(I)}}),x(u,GT.STAT_EVENT,_=>{_.stat===fv.PROXY?Ae(Gn,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===fv.NOPROXY&&Ae(Gn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function uy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(n){return new IU(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&Ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="PersistentStream";class WC{constructor(e,t,r,s,o,c,u,h){this.Fi=e,this.w_=r,this.S_=s,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new qC(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Fi(t.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===t&&this.W_(r,s)},r=>{e(()=>{const s=new Se(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Ae(Jb,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Ae(Jb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class S6 extends WC{constructor(e,t,r,s,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=PU(this.serializer,e),r=function(o){if(!("targetChange"in o))return ot.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?ot.min():c.readTime?Xs(c.readTime):ot.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Nv(this.serializer),t.addTarget=function(o,c){let u;const h=c.target;if(u=xv(h)?{documents:OU(o,h)}:{query:DU(o,h).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=RC(o,c.resumeToken);const p=Ev(o,c.expectedCount);p!==null&&(u.expectedCount=p)}else if(c.snapshotVersion.compareTo(ot.min())>0){u.readTime=fp(o,c.snapshotVersion.toTimestamp());const p=Ev(o,c.expectedCount);p!==null&&(u.expectedCount=p)}return u}(this.serializer,e);const r=MU(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Nv(this.serializer),t.removeTarget=e,this.k_(t)}}class N6 extends WC{constructor(e,t,r,s,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=kU(e.writeResults,e.commitTime),r=Xs(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Nv(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>RU(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{}class C6 extends T6{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Se(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Wo(e,bv(t,r),s,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(ce.UNKNOWN,o.toString())})}Jo(e,t,r,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,bv(t,r),s,c,u,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(ce.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class I6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Fi(t),this._a=!1):Ae("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="RemoteStore";class j6{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{ul(this)&&(Ae(el,"Restarting streams for network reachability change."),await async function(h){const p=at(h);p.Ia.add(4),await Ud(p),p.Aa.set("Unknown"),p.Ia.delete(4),await Jp(p)}(this))})}),this.Aa=new I6(r,s)}}async function Jp(n){if(ul(n))for(const e of n.da)await e(!0)}async function Ud(n){for(const e of n.da)await e(!1)}function HC(n,e){const t=at(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Gx(t)?Kx(t):Yc(t).x_()&&Hx(t,e))}function Wx(n,e){const t=at(n),r=Yc(t);t.Ta.delete(e),r.x_()&&KC(t,e),t.Ta.size===0&&(r.x_()?r.B_():ul(t)&&t.Aa.set("Unknown"))}function Hx(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ot.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yc(n).H_(e)}function KC(n,e){n.Ra.$e(e),Yc(n).Y_(e)}function Kx(n){n.Ra=new SU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Yc(n).start(),n.Aa.aa()}function Gx(n){return ul(n)&&!Yc(n).M_()&&n.Ta.size>0}function ul(n){return at(n).Ia.size===0}function GC(n){n.Ra=void 0}async function A6(n){n.Aa.set("Online")}async function P6(n){n.Ta.forEach((e,t)=>{Hx(n,e)})}async function R6(n,e){GC(n),Gx(n)?(n.Aa.la(e),Kx(n)):n.Aa.set("Unknown")}async function k6(n,e,t){if(n.Aa.set("Online"),e instanceof PC&&e.state===2&&e.cause)try{await async function(s,o){const c=o.cause;for(const u of o.targetIds)s.Ta.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ta.delete(u),s.Ra.removeTarget(u))}(n,e)}catch(r){Ae(el,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mp(n,r)}else if(e instanceof Vf?n.Ra.Ye(e):e instanceof AC?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ot.min()))try{const r=await BC(n.localStore);t.compareTo(r)>=0&&await function(o,c){const u=o.Ra.Pt(c);return u.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ta.get(p);g&&o.Ta.set(p,g.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach((h,p)=>{const g=o.Ta.get(h);if(!g)return;o.Ta.set(h,g.withResumeToken(Un.EMPTY_BYTE_STRING,g.snapshotVersion)),KC(o,h);const y=new Oo(g.target,h,p,g.sequenceNumber);Hx(o,y)}),o.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){Ae(el,"Failed to raise snapshot:",r),await mp(n,r)}}async function mp(n,e,t){if(!Qc(e))throw e;n.Ia.add(1),await Ud(n),n.Aa.set("Offline"),t||(t=()=>BC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ae(el,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Jp(n)})}function QC(n,e){return e().catch(t=>mp(n,t,e))}async function Zp(n){const e=at(n),t=ea(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ax;for(;O6(e);)try{const s=await m6(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,D6(e,s)}catch(s){await mp(e,s)}YC(e)&&XC(e)}function O6(n){return ul(n)&&n.Pa.length<10}function D6(n,e){n.Pa.push(e);const t=ea(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function YC(n){return ul(n)&&!ea(n).M_()&&n.Pa.length>0}function XC(n){ea(n).start()}async function L6(n){ea(n).na()}async function M6(n){const e=ea(n);for(const t of n.Pa)e.X_(t.mutations)}async function F6(n,e,t){const r=n.Pa.shift(),s=Fx.from(r,e,t);await QC(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Zp(n)}async function V6(n,e){e&&ea(n).Z_&&await async function(r,s){if(function(c){return EU(c)&&c!==ce.ABORTED}(s.code)){const o=r.Pa.shift();ea(r).N_(),await QC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Zp(r)}}(n,e),YC(n)&&XC(n)}async function Zb(n,e){const t=at(n);t.asyncQueue.verifyOperationInProgress(),Ae(el,"RemoteStore received new credentials");const r=ul(t);t.Ia.add(3),await Ud(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Jp(t)}async function U6(n,e){const t=at(n);e?(t.Ia.delete(2),await Jp(t)):e||(t.Ia.add(2),await Ud(t),t.Aa.set("Unknown"))}function Yc(n){return n.Va||(n.Va=function(t,r,s){const o=at(t);return o.ia(),new S6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:A6.bind(null,n),e_:P6.bind(null,n),n_:R6.bind(null,n),J_:k6.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Gx(n)?Kx(n):n.Aa.set("Unknown")):(await n.Va.stop(),GC(n))})),n.Va}function ea(n){return n.ma||(n.ma=function(t,r,s){const o=at(t);return o.ia(),new N6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:L6.bind(null,n),n_:V6.bind(null,n),ea:M6.bind(null,n),ta:F6.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Zp(n)):(await n.ma.stop(),n.Pa.length>0&&(Ae(el,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new $o,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const c=Date.now()+r,u=new Qx(e,t,c,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yx(n,e){if(Fi("AsyncQueue",`${e}: ${n}`),Qc(n))return new Se(ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{static emptySet(e){return new cc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=zu(),this.sortedSet=new rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new cc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.fa=new rn(Be.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ze(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class kc{constructor(e,t,r,s,o,c,u,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const c=[];return t.forEach(u=>{c.push({type:0,doc:u})}),new kc(e,t,cc.emptySet(t),c,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class $6{constructor(){this.queries=t1(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=at(t),o=s.queries;s.queries=t1(),o.forEach((c,u)=>{for(const h of u.wa)h.onError(r)})})(this,new Se(ce.ABORTED,"Firestore shutting down"))}}function t1(){return new cl(n=>yC(n),Hp)}async function JC(n,e){const t=at(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.Sa()&&e.ba()&&(r=2):(o=new z6,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await t.onListen(s,!0);break;case 1:o.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=Yx(c,`Initialization of query '${ec(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&Xx(t)}async function ZC(n,e){const t=at(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const c=o.wa.indexOf(e);c>=0&&(o.wa.splice(c,1),o.wa.length===0?s=e.ba()?0:1:!o.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function B6(n,e){const t=at(n);let r=!1;for(const s of e){const o=s.query,c=t.queries.get(o);if(c){for(const u of c.wa)u.Ca(s)&&(r=!0);c.ya=s}}r&&Xx(t)}function q6(n,e,t){const r=at(n),s=r.queries.get(e);if(s)for(const o of s.wa)o.onError(t);r.queries.delete(e)}function Xx(n){n.Da.forEach(e=>{e.next()})}var Iv,n1;(n1=Iv||(Iv={})).Fa="default",n1.Cache="cache";class eI{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new kc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Iv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.key=e}}class nI{constructor(e){this.key=e}}class W6{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ft(),this.mutatedKeys=ft(),this.Xa=vC(e),this.eu=new cc(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new e1,s=t?t.eu:this.eu;let o=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,y)=>{const v=s.get(g),b=Kp(this.query,y)?y:null,S=!!v&&this.mutatedKeys.has(v.key),x=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let _=!1;v&&b?v.data.isEqual(b.data)?S!==x&&(r.track({type:3,doc:b}),_=!0):this.iu(v,b)||(r.track({type:2,doc:b}),_=!0,(h&&this.Xa(b,h)>0||p&&this.Xa(b,p)<0)&&(u=!0)):!v&&b?(r.track({type:0,doc:b}),_=!0):v&&!b&&(r.track({type:1,doc:v}),_=!0,(h||p)&&(u=!0)),_&&(b?(c=c.add(b),o=x?o.add(g):o.delete(g)):(c=c.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:u,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,y)=>function(b,S){const x=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze(20277,{At:_})}};return x(b)-x(S)}(g.type,y.type)||this.Xa(g.doc,y.doc)),this.su(r),s=s!=null&&s;const u=t&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,p=h!==this.Ya;return this.Ya=h,c.length!==0||p?{snapshot:new kc(this.query,e.eu,o,c,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new e1,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ft(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new nI(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new tI(r))}),t}uu(e){this.Ha=e.qs,this.Za=ft();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return kc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Jx="SyncEngine";class H6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class K6{constructor(e){this.key=e,this.lu=!1}}class G6{constructor(e,t,r,s,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new cl(u=>yC(u),Hp),this.Tu=new Map,this.Iu=new Set,this.du=new rn(Be.comparator),this.Eu=new Map,this.Au=new zx,this.Ru={},this.Vu=new Map,this.mu=Rc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Q6(n,e,t=!0){const r=lI(n);let s;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.cu()):s=await rI(r,e,t,!0),s}async function Y6(n,e){const t=lI(n);await rI(t,e,!0,!1)}async function rI(n,e,t,r){const s=await g6(n.localStore,Ys(e)),o=s.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await X6(n,e,o,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&HC(n.remoteStore,s),u}async function X6(n,e,t,r,s){n.gu=(y,v,b)=>async function(x,_,A,I){let C=_.view.nu(A);C.Ds&&(C=await Gb(x.localStore,_.query,!1).then(({documents:P})=>_.view.nu(P,C)));const M=I&&I.targetChanges.get(_.targetId),U=I&&I.targetMismatches.get(_.targetId)!=null,$=_.view.applyChanges(C,x.isPrimaryClient,M,U);return s1(x,_.targetId,$._u),$.snapshot}(n,y,v,b);const o=await Gb(n.localStore,e,!0),c=new W6(e,o.qs),u=c.nu(o.documents),h=Vd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=c.applyChanges(u,n.isPrimaryClient,h);s1(n,t,p._u);const g=new H6(e,t,c);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),p.snapshot}async function J6(n,e,t){const r=at(n),s=r.Pu.get(e),o=r.Tu.get(s.targetId);if(o.length>1)return r.Tu.set(s.targetId,o.filter(c=>!Hp(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Tv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Wx(r.remoteStore,s.targetId),jv(r,s.targetId)}).catch(Gc)):(jv(r,s.targetId),await Tv(r.localStore,s.targetId,!0))}async function Z6(n,e){const t=at(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Wx(t.remoteStore,r.targetId))}async function e5(n,e,t){const r=a5(n);try{const s=await function(c,u){const h=at(c),p=wt.now(),g=u.reduce((b,S)=>b.add(S.key),ft());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",b=>{let S=Vi(),x=ft();return h.Os.getEntries(b,g).next(_=>{S=_,S.forEach((A,I)=>{I.isValidDocument()||(x=x.add(A))})}).next(()=>h.localDocuments.getOverlayedDocuments(b,S)).next(_=>{y=_;const A=[];for(const I of u){const C=yU(I,y.get(I.key).overlayedDocument);C!=null&&A.push(new oa(I.key,C,cC(C.value.mapValue),ws.exists(!0)))}return h.mutationQueue.addMutationBatch(b,p,A,u)}).next(_=>{v=_;const A=_.applyToLocalDocumentSet(y,x);return h.documentOverlayCache.saveOverlays(b,_.batchId,A)})}).then(()=>({batchId:v.batchId,changes:wC(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,h){let p=c.Ru[c.currentUser.toKey()];p||(p=new rn(ut)),p=p.insert(u,h),c.Ru[c.currentUser.toKey()]=p}(r,s.batchId,t),await zd(r,s.changes),await Zp(r.remoteStore)}catch(s){const o=Yx(s,"Failed to persist write");t.reject(o)}}async function sI(n,e){const t=at(n);try{const r=await f6(t.localStore,e);e.targetChanges.forEach((s,o)=>{const c=t.Eu.get(o);c&&(Pt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.lu=!0:s.modifiedDocuments.size>0?Pt(c.lu,14607):s.removedDocuments.size>0&&(Pt(c.lu,42227),c.lu=!1))}),await zd(t,r,e)}catch(r){await Gc(r)}}function r1(n,e,t){const r=at(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach((o,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(c,u){const h=at(c);h.onlineState=u;let p=!1;h.queries.forEach((g,y)=>{for(const v of y.wa)v.va(u)&&(p=!0)}),p&&Xx(h)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function t5(n,e,t){const r=at(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),o=s&&s.key;if(o){let c=new rn(Be.comparator);c=c.insert(o,Yn.newNoDocument(o,ot.min()));const u=ft().add(o),h=new Yp(ot.min(),new Map,new rn(ut),c,u);await sI(r,h),r.du=r.du.remove(o),r.Eu.delete(e),Zx(r)}else await Tv(r.localStore,e,!1).then(()=>jv(r,e,t)).catch(Gc)}async function n5(n,e){const t=at(n),r=e.batch.batchId;try{const s=await h6(t.localStore,e);oI(t,r,null),iI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await zd(t,s)}catch(s){await Gc(s)}}async function r5(n,e,t){const r=at(n);try{const s=await function(c,u){const h=at(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return h.mutationQueue.lookupMutationBatch(p,u).next(y=>(Pt(y!==null,37113),g=y.keys(),h.mutationQueue.removeMutationBatch(p,y))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>h.localDocuments.getDocuments(p,g))})}(r.localStore,e);oI(r,e,t),iI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await zd(r,s)}catch(s){await Gc(s)}}function iI(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function oI(n,e,t){const r=at(n);let s=r.Ru[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function jv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||aI(n,r)})}function aI(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Wx(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Zx(n))}function s1(n,e,t){for(const r of t)r instanceof tI?(n.Au.addReference(r.key,e),s5(n,r)):r instanceof nI?(Ae(Jx,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||aI(n,r.key)):Ze(19791,{yu:r})}function s5(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(Ae(Jx,"New document in limbo: "+t),n.Iu.add(r),Zx(n))}function Zx(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Be(Lt.fromString(e)),r=n.mu.next();n.Eu.set(r,new K6(t)),n.du=n.du.insert(t,r),HC(n.remoteStore,new Oo(Ys(Dx(t.path)),r,"TargetPurposeLimboResolution",Bp.ue))}}async function zd(n,e,t){const r=at(n),s=[],o=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,h)=>{c.push(r.gu(h,e,t).then(p=>{var g;if((p||t)&&r.isPrimaryClient){const y=p?!p.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(p){s.push(p);const y=Bx.Es(h.targetId,p);o.push(y)}}))}),await Promise.all(c),r.hu.J_(s),await async function(h,p){const g=at(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ue.forEach(p,v=>ue.forEach(v.Is,b=>g.persistence.referenceDelegate.addReference(y,v.targetId,b)).next(()=>ue.forEach(v.ds,b=>g.persistence.referenceDelegate.removeReference(y,v.targetId,b)))))}catch(y){if(!Qc(y))throw y;Ae(qx,"Failed to update sequence numbers: "+y)}for(const y of p){const v=y.targetId;if(!y.fromCache){const b=g.Fs.get(v),S=b.snapshotVersion,x=b.withLastLimboFreeSnapshotVersion(S);g.Fs=g.Fs.insert(v,x)}}}(r.localStore,o))}async function i5(n,e){const t=at(n);if(!t.currentUser.isEqual(e)){Ae(Jx,"User change. New user:",e.toKey());const r=await $C(t.localStore,e);t.currentUser=e,function(o,c){o.Vu.forEach(u=>{u.forEach(h=>{h.reject(new Se(ce.CANCELLED,c))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zd(t,r.Bs)}}function o5(n,e){const t=at(n),r=t.Eu.get(e);if(r&&r.lu)return ft().add(r.key);{let s=ft();const o=t.Tu.get(e);if(!o)return s;for(const c of o){const u=t.Pu.get(c);s=s.unionWith(u.view.tu)}return s}}function lI(n){const e=at(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t5.bind(null,e),e.hu.J_=B6.bind(null,e.eventManager),e.hu.pu=q6.bind(null,e.eventManager),e}function a5(n){const e=at(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r5.bind(null,e),e}class gp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return d6(this.persistence,new l6,e.initialUser,this.serializer)}Du(e){return new zC($x.Vi,this.serializer)}bu(e){return new v6}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gp.provider={build:()=>new gp};class l5 extends gp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Pt(this.persistence.referenceDelegate instanceof pp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new KU(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?wr.withCacheSize(this.cacheSizeBytes):wr.DEFAULT;return new zC(r=>pp.Vi(r,t),this.serializer)}}class Av{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>r1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=i5.bind(null,this.syncEngine),await U6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $6}()}createDatastore(e){const t=Xp(e.databaseInfo.databaseId),r=function(o){return new b6(o)}(e.databaseInfo);return function(o,c,u,h){return new C6(o,c,u,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,c,u){return new j6(r,s,o,c,u)}(this.localStore,this.datastore,e.asyncQueue,t=>r1(this.syncEngine,t,0),function(){return Xb.C()?new Xb:new x6}())}createSyncEngine(e,t){return function(s,o,c,u,h,p,g){const y=new G6(s,o,c,u,h,p);return g&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=at(s);Ae(el,"RemoteStore shutting down."),o.Ia.add(5),await Ud(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Av.provider={build:()=>new Av};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="FirestoreClient";class c5{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=xr.UNAUTHENTICATED,this.clientId=Ix.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{Ae(ta,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Ae(ta,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $o;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Yx(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dy(n,e){n.asyncQueue.verifyOperationInProgress(),Ae(ta,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $C(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Za("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Ae("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Za("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=e}async function i1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await u5(n);Ae(ta,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Zb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Zb(e.remoteStore,s)),n._onlineComponents=e}async function u5(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae(ta,"Using user provided OfflineComponentProvider");try{await dy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ce.FAILED_PRECONDITION||s.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Za("Error using user provided cache. Falling back to memory cache: "+t),await dy(n,new gp)}}else Ae(ta,"Using default OfflineComponentProvider"),await dy(n,new l5(void 0));return n._offlineComponents}async function uI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae(ta,"Using user provided OnlineComponentProvider"),await i1(n,n._uninitializedComponentsProvider._online)):(Ae(ta,"Using default OnlineComponentProvider"),await i1(n,new Av))),n._onlineComponents}function d5(n){return uI(n).then(e=>e.syncEngine)}async function Pv(n){const e=await uI(n),t=e.eventManager;return t.onListen=Q6.bind(null,e.syncEngine),t.onUnlisten=J6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Y6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Z6.bind(null,e.syncEngine),t}function h5(n,e,t={}){const r=new $o;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,u,h,p){const g=new cI({next:v=>{g.Ou(),c.enqueueAndForget(()=>ZC(o,y)),v.fromCache&&h.source==="server"?p.reject(new Se(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(v)},error:v=>p.reject(v)}),y=new eI(u,g,{includeMetadataChanges:!0,ka:!0});return JC(o,y)}(await Pv(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5="firestore.googleapis.com",a1=!0;class l1{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=f5,this.ssl=a1}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:a1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UC)throw new Se(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Se(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Se(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Se(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class em{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new E3;switch(r.type){case"firstParty":return new N3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Se(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=o1.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),o1.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class vn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}toJSON(){return{type:vn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Md(t,vn._jsonSchema))return new vn(e,r||null,new Be(Lt.fromString(t.referencePath)))}}vn._jsonSchemaVersion="firestore/documentReference/1.0",vn._jsonSchema={type:yn("string",vn._jsonSchemaVersion),referencePath:yn("string")};class Bo extends Bi{constructor(e,t,r){super(e,t,Dx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new Be(e))}withConverter(e){return new Bo(this.firestore,e,this._path)}}function it(n,e,...t){if(n=xn(n),jx("collection","path",e),n instanceof em){const r=Lt.fromString(e,...t);return _b(r),new Bo(n,null,r)}{if(!(n instanceof vn||n instanceof Bo))throw new Se(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return _b(r),new Bo(n.firestore,null,r)}}function vs(n,e){if(n=Qs(n,em),jx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bi(n,null,function(r){return new ll(Lt.emptyPath(),r)}(e))}function Vt(n,e,...t){if(n=xn(n),arguments.length===1&&(e=Ix.newId()),jx("doc","path",e),n instanceof em){const r=Lt.fromString(e,...t);return wb(r),new vn(n,null,new Be(r))}{if(!(n instanceof vn||n instanceof Bo))throw new Se(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return wb(r),new vn(n.firestore,n instanceof Bo?n.converter:null,new Be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="AsyncQueue";class u1{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new qC(this,"async_queue_retry"),this.oc=()=>{const r=uy();r&&Ae(c1,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=uy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=uy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new $o;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Qc(e))throw e;Ae(c1,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Fi("INTERNAL UNHANDLED ERROR: ",d1(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Qx.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(s),s}ac(){this.tc&&Ze(47125,{hc:d1(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function d1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1}(n,["next","error","complete"])}class tl extends em{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new u1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u1(e),this._firestoreClient=void 0,await e}}}function p5(n,e,t){t||(t=cp);const r=Mp(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),o=r.getOptions(t);if(Qa(o,e))return s;throw new Se(ce.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Se(ce.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UC)throw new Se(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&il(e.host)&&gx(e.host),r.initialize({options:e,instanceIdentifier:t})}function ew(n){if(n._terminated)throw new Se(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||m5(n),n._firestoreClient}function m5(n){var e,t,r;const s=n._freezeSettings(),o=function(u,h,p,g){return new z3(u,h,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,dI(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new c5(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yr(Un.fromBase64String(e))}catch(t){throw new Se(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yr(Un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Md(e,Yr._jsonSchema))return Yr.fromBase64String(e.bytes)}}Yr._jsonSchemaVersion="firestore/bytes/1.0",Yr._jsonSchema={type:yn("string",Yr._jsonSchemaVersion),bytes:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function g5(){return new $d(mv)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Js._jsonSchemaVersion}}static fromJSON(e){if(Md(e,Js._jsonSchema))return new Js(e.latitude,e.longitude)}}Js._jsonSchemaVersion="firestore/geoPoint/1.0",Js._jsonSchema={type:yn("string",Js._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Zs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Md(e,Zs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Zs(e.vectorValues);throw new Se(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zs._jsonSchemaVersion="firestore/vectorValue/1.0",Zs._jsonSchema={type:yn("string",Zs._jsonSchemaVersion),vectorValues:yn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=/^__.*__$/;class v5{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new oa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fd(e,this.data,t,this.fieldTransforms)}}class hI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new oa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze(40011,{Ec:n})}}class tw{constructor(e,t,r,s,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new tw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return yp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(fI(this.Ec)&&y5.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class x5{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Xp(e)}Dc(e,t,r,s=!1){return new tw({Ec:e,methodName:t,bc:r,path:Fn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nw(n){const e=n._freezeSettings(),t=Xp(n._databaseId);return new x5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function w5(n,e,t,r,s,o={}){const c=n.Dc(o.merge||o.mergeFields?2:0,e,t,s);sw("Data must be an object, but it was:",c,r);const u=pI(r,c);let h,p;if(o.merge)h=new Lr(c.fieldMask),p=c.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const v=Rv(e,y,t);if(!c.contains(v))throw new Se(ce.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);gI(g,v)||g.push(v)}h=new Lr(g),p=c.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,p=c.fieldTransforms;return new v5(new _r(u),h,p)}class nm extends tm{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nm}}class rw extends tm{_toFieldTransform(e){return new fU(e.path,new xd)}isEqual(e){return e instanceof rw}}function _5(n,e,t,r){const s=n.Dc(1,e,t);sw("Data must be an object, but it was:",s,r);const o=[],c=_r.empty();ia(r,(h,p)=>{const g=iw(e,h,t);p=xn(p);const y=s.gc(g);if(p instanceof nm)o.push(g);else{const v=Bd(p,y);v!=null&&(o.push(g),c.set(g,v))}});const u=new Lr(o);return new hI(c,u,s.fieldTransforms)}function E5(n,e,t,r,s,o){const c=n.Dc(1,e,t),u=[Rv(e,r,t)],h=[s];if(o.length%2!=0)throw new Se(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)u.push(Rv(e,o[v])),h.push(o[v+1]);const p=[],g=_r.empty();for(let v=u.length-1;v>=0;--v)if(!gI(p,u[v])){const b=u[v];let S=h[v];S=xn(S);const x=c.gc(b);if(S instanceof nm)p.push(b);else{const _=Bd(S,x);_!=null&&(p.push(b),g.set(b,_))}}const y=new Lr(p);return new hI(g,y,c.fieldTransforms)}function b5(n,e,t,r=!1){return Bd(t,n.Dc(r?4:3,e))}function Bd(n,e){if(mI(n=xn(n)))return sw("Unsupported field value:",e,n),pI(n,e);if(n instanceof tm)return function(r,s){if(!fI(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const o=[];let c=0;for(const u of r){let h=Bd(u,s.yc(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uU(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=wt.fromDate(r);return{timestampValue:fp(s.serializer,o)}}if(r instanceof wt){const o=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fp(s.serializer,o)}}if(r instanceof Js)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yr)return{bytesValue:RC(s.serializer,r._byteString)};if(r instanceof vn){const o=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw s.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ux(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Zs)return function(c,u){return{mapValue:{fields:{[aC]:{stringValue:lC},[up]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw u.wc("VectorValues must only contain numeric values.");return Lx(u.serializer,p)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${$p(r)}`)}(n,e)}function pI(n,e){const t={};return tC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(n,(r,s)=>{const o=Bd(s,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function mI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof Js||n instanceof Yr||n instanceof vn||n instanceof tm||n instanceof Zs)}function sw(n,e,t){if(!mI(t)||!ZT(t)){const r=$p(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Rv(n,e,t){if((e=xn(e))instanceof $d)return e._internalPath;if(typeof e=="string")return iw(n,e);throw yp("Field path arguments must be of type string or ",n,!1,void 0,t)}const S5=new RegExp("[~\\*/\\[\\]]");function iw(n,e,t){if(e.search(S5)>=0)throw yp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $d(...e.split("."))._internalPath}catch{throw yp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yp(n,e,t,r,s){const o=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${r}`),c&&(h+=` in document ${s}`),h+=")"),new Se(ce.INVALID_ARGUMENT,u+n+h)}function gI(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class N5 extends yI{data(){return super.data()}}function rm(n,e){return typeof e=="string"?iw(n,e):e instanceof $d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Se(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ow{}class xI extends ow{}function or(n,e,...t){let r=[];e instanceof ow&&r.push(e),r=r.concat(t),function(o){const c=o.filter(h=>h instanceof aw).length,u=o.filter(h=>h instanceof sm).length;if(c>1||c>0&&u>0)throw new Se(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class sm extends xI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new sm(e,t,r)}_apply(e){const t=this._parse(e);return wI(e._query,t),new Bi(e.firestore,e.converter,wv(e._query,t))}_parse(e){const t=nw(e.firestore);return function(o,c,u,h,p,g,y){let v;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Se(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){p1(y,g);const S=[];for(const x of y)S.push(f1(h,o,x));v={arrayValue:{values:S}}}else v=f1(h,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||p1(y,g),v=b5(u,c,y,g==="in"||g==="not-in");return gn.create(p,g,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function T5(n,e,t){const r=e,s=rm("where",n);return sm._create(s,r,t)}class aw extends ow{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new aw(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ss.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let c=s;const u=o.getFlattenedFilters();for(const h of u)wI(c,h),c=wv(c,h)}(e._query,t),new Bi(e.firestore,e.converter,wv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lw extends xI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lw(e,t)}_apply(e){const t=function(s,o,c){if(s.startAt!==null)throw new Se(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Se(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vd(o,c)}(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,function(s,o){const c=s.explicitOrderBy.concat([o]);return new ll(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function Xc(n,e="asc"){const t=e,r=rm("orderBy",n);return lw._create(r,t)}function f1(n,e,t){if(typeof(t=xn(t))=="string"){if(t==="")throw new Se(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gC(e)&&t.indexOf("/")!==-1)throw new Se(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Lt.fromString(t));if(!Be.isDocumentKey(r))throw new Se(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jb(n,new Be(r))}if(t instanceof vn)return jb(n,t._key);throw new Se(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$p(t)}.`)}function p1(n,e){if(!Array.isArray(n)||n.length===0)throw new Se(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wI(n,e){const t=function(s,o){for(const c of s)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Se(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class C5{convertValue(e,t="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ze(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ia(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[up].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>un(c.doubleValue));return new Zs(o)}convertGeoPoint(e){return new Js(un(e.latitude),un(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Wp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(md(e));default:return null}}convertTimestamp(e){const t=Xo(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Lt.fromString(e);Pt(FC(r),9688,{name:e});const s=new gd(r.get(1),r.get(3)),o=new Be(r.popFirst(5));return s.isEqual(t)||Fi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Bu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $a extends yI{constructor(e,t,r,s,o,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(rm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=$a._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}$a._jsonSchemaVersion="firestore/documentSnapshot/1.0",$a._jsonSchema={type:yn("string",$a._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class Uf extends $a{data(e={}){return super.data(e)}}class Ba{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Bu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Uf(this._firestore,this._userDataWriter,r.key,r,new Bu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(u=>{const h=new Uf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Bu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new Uf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Bu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,g=-1;return u.type!==0&&(p=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:j5(u.type),doc:h,oldIndex:p,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ba._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ix.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function j5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze(61501,{type:n})}}Ba._jsonSchemaVersion="firestore/querySnapshot/1.0",Ba._jsonSchema={type:yn("string",Ba._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};class cw extends C5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,t)}}function jt(n){n=Qs(n,Bi);const e=Qs(n.firestore,tl),t=ew(e),r=new cw(e);return vI(n._query),h5(t,n._query).then(s=>new Ba(e,r,n,s))}function mn(n,e,t,...r){n=Qs(n,vn);const s=Qs(n.firestore,tl),o=nw(s);let c;return c=typeof(e=xn(e))=="string"||e instanceof $d?E5(o,"updateDoc",n._key,e,t,r):_5(o,"updateDoc",n._key,e),uw(s,[c.toMutation(n._key,ws.exists(!0))])}function Dr(n){return uw(Qs(n.firestore,tl),[new Mx(n._key,ws.none())])}function Sn(n,e){const t=Qs(n.firestore,tl),r=Vt(n),s=I5(n.converter,e);return uw(t,[w5(nw(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,ws.exists(!1))]).then(()=>r)}function aa(n,...e){var t,r,s;n=xn(n);let o={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||h1(e[c])||(o=e[c++]);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(h1(e[c])){const y=e[c];e[c]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[c+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[c+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let h,p,g;if(n instanceof vn)p=Qs(n.firestore,tl),g=Dx(n._key.path),h={next:y=>{e[c]&&e[c](A5(p,n,y))},error:e[c+1],complete:e[c+2]};else{const y=Qs(n,Bi);p=Qs(y.firestore,tl),g=y._query;const v=new cw(p);h={next:b=>{e[c]&&e[c](new Ba(p,v,y,b))},error:e[c+1],complete:e[c+2]},vI(n._query)}return function(v,b,S,x){const _=new cI(x),A=new eI(b,_,S);return v.asyncQueue.enqueueAndForget(async()=>JC(await Pv(v),A)),()=>{_.Ou(),v.asyncQueue.enqueueAndForget(async()=>ZC(await Pv(v),A))}}(ew(p),g,u,h)}function uw(n,e){return function(r,s){const o=new $o;return r.asyncQueue.enqueueAndForget(async()=>e5(await d5(r),s,o)),o.promise}(ew(n),e)}function A5(n,e,t){const r=t.docs.get(e._key),s=new cw(n);return new $a(n,s,e._key,r,new Bu(t.hasPendingWrites,t.fromCache),e.converter)}function m1(){return new rw("serverTimestamp")}(function(e,t=!0){(function(s){Kc=s})(ol),Ya(new Qo("firestore",(r,{instanceIdentifier:s,options:o})=>{const c=r.getProvider("app").getImmediate(),u=new tl(new b3(r.getProvider("auth-internal")),new T3(c,r.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Se(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gd(p.options.projectId,g)}(c,s),c);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Hs(gb,yb,e),Hs(gb,yb,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="firebasestorage.googleapis.com",P5="storageBucket",R5=2*60*1e3,k5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends li{constructor(e,t,r=0){super(hy(e),`Firebase Storage: ${t} (${hy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ci.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var si;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(si||(si={}));function hy(n){return"storage/"+n}function O5(){const n="An unknown error occurred, please check the error payload for server response.";return new ci(si.UNKNOWN,n)}function D5(){return new ci(si.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function L5(){return new ci(si.CANCELED,"User canceled the upload/download.")}function M5(n){return new ci(si.INVALID_URL,"Invalid URL '"+n+"'.")}function F5(n){return new ci(si.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function g1(n){return new ci(si.INVALID_ARGUMENT,n)}function EI(){return new ci(si.APP_DELETED,"The Firebase app was deleted.")}function V5(n){return new ci(si.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=xs.makeFromUrl(e,t)}catch{return new xs(e,"")}if(r.path==="")return r;throw F5(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),h={bucket:1,path:3};function p(M){M.path_=decodeURIComponent(M.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",b=new RegExp(`^https?://${y}/${g}/b/${s}/o${v}`,"i"),S={bucket:1,path:3},x=t===_I?"(?:storage.googleapis.com|storage.cloud.google.com)":t,_="([^?#]*)",A=new RegExp(`^https?://${x}/${s}/${_}`,"i"),C=[{regex:u,indices:h,postModify:o},{regex:b,indices:S,postModify:p},{regex:A,indices:{bucket:1,path:2},postModify:p}];for(let M=0;M<C.length;M++){const U=C[M],$=U.regex.exec(e);if($){const P=$[U.indices.bucket];let k=$[U.indices.path];k||(k=""),r=new xs(P,k),U.postModify(r);break}}if(r==null)throw M5(e);return r}}class U5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(n,e,t){let r=1,s=null,o=null,c=!1,u=0;function h(){return u===2}let p=!1;function g(..._){p||(p=!0,e.apply(null,_))}function y(_){s=setTimeout(()=>{s=null,n(b,h())},_)}function v(){o&&clearTimeout(o)}function b(_,...A){if(p){v();return}if(_){v(),g.call(null,_,...A);return}if(h()||c){v(),g.call(null,_,...A);return}r<64&&(r*=2);let C;u===1?(u=2,C=0):C=(r+Math.random())*1e3,y(C)}let S=!1;function x(_){S||(S=!0,v(),!p&&(s!==null?(_||(u=2),clearTimeout(s),y(0)):_||(u=1)))}return y(0),o=setTimeout(()=>{c=!0,x(!0)},t),x}function $5(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(n){return n!==void 0}function y1(n,e,t,r){if(r<e)throw g1(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw g1(`Invalid value for '${n}'. Expected ${t} or less.`)}function q5(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var vp;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(vp||(vp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,t,r,s,o,c,u,h,p,g,y,v=!0,b=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,x)=>{this.resolve_=S,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new xf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const h=u.loaded,p=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===vp.NO_ERROR,h=o.getStatus();if(!u||W5(h,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===vp.ABORT;r(!1,new xf(!1,null,g));return}const p=this.successCodes_.indexOf(h)!==-1;r(!0,new xf(p,o))})},t=(r,s)=>{const o=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());B5(h)?o(h):o()}catch(h){c(h)}else if(u!==null){const h=O5();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(s.canceled){const h=this.appDelete_?EI():L5();c(h)}else{const h=D5();c(h)}};this.canceled_?t(!1,new xf(!1,null,!0)):this.backoffId_=z5(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function K5(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function G5(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Q5(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Y5(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function X5(n,e,t,r,s,o,c=!0,u=!1){const h=q5(n.urlParams),p=n.url+h,g=Object.assign({},n.headers);return Q5(g,e),K5(g,t),G5(g,o),Y5(g,r),new H5(p,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Z5(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,t){this._service=e,t instanceof xs?this._location=t:this._location=xs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xp(e,t)}get root(){const e=new xs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Z5(this._location.path)}get storage(){return this._service}get parent(){const e=J5(this._location.path);if(e===null)return null;const t=new xs(this._location.bucket,e);return new xp(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw V5(e)}}function v1(n,e){const t=e==null?void 0:e[P5];return t==null?null:xs.makeFromBucketSpec(t,n)}function ez(n,e,t,r={}){n.host=`${e}:${t}`;const s=il(e);s&&(gx(`https://${n.host}/b`),sT("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:RM(o,n.app.options.projectId))}class tz{constructor(e,t,r,s,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=_I,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=R5,this._maxUploadRetryTime=k5,this._requests=new Set,s!=null?this._bucket=xs.makeFromBucketSpec(s,this._host):this._bucket=v1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xs.makeFromBucketSpec(this._url,e):this._bucket=v1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){y1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){y1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xp(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new U5(EI());{const c=X5(e,this._appId,r,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const x1="@firebase/storage",w1="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="storage";function nz(n=lT(),e){n=xn(n);const r=Mp(n,bI).getImmediate({identifier:e}),s=AM("storage");return s&&rz(r,...s),r}function rz(n,e,t,r={}){ez(n,e,t,r)}function sz(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new tz(t,r,s,e,ol)}function iz(){Ya(new Qo(bI,sz,"PUBLIC").setMultipleInstances(!0)),Hs(x1,w1,""),Hs(x1,w1,"esm2017")}iz();const oz={apiKey:"AIzaSyDUR89i6kvh3bp51GCgBX0fTwh3bFt1Ksg",authDomain:"medjust-d26eb.firebaseapp.com",projectId:"medjust-d26eb",storageBucket:"medjust-d26eb.appspot.com",messagingSenderId:"631362355665",appId:"1:631362355665:web:4d7f8eadba1bca0969e0f0"},dw=aT(oz),fy=y3(dw),ze=p5(dw,{experimentalForceLongPolling:!0,useFetchStreams:!1});nz(dw);const SI=E.createContext(void 0);function hw(){const n=E.useContext(SI);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function az({children:n}){const[e,t]=E.useState(null),[r,s]=E.useState(!0),[o,c]=E.useState(null),u=y=>new Promise(v=>setTimeout(v,y)),h=async(y,v)=>{if(typeof navigator<"u"&&!navigator.onLine){const _=new Error("No network connection (navigator offline)");throw console.error("Login pre-check failed:",_),c("No network connection - please connect to the internet"),_}const b=3;let S=0,x=null;for(;S<b;){S+=1;try{await nV(fy,y,v),c(null);return}catch(_){if(x=_,console.error(`Login attempt ${S} failed:`,_),!((_==null?void 0:_.code)==="auth/network-request-failed"||(_==null?void 0:_.message)&&_.message.toLowerCase().includes("fetch")))throw(_==null?void 0:_.code)==="auth/wrong-password"||(_==null?void 0:_.code)==="auth/user-not-found"?c("Invalid email or password"):c("Authentication error - see console for details"),_;if(c(`Network error (attempt ${S} of ${b}) - checking connection...`),S<b){const I=500*Math.pow(2,S-1);console.log(`Retrying login in ${I}ms...`),await u(I);continue}}}throw console.error("Login failed after retries:",x),c("Network error - unable to reach Firebase. Check your internet connection, disabling browser extensions (adblockers), or ensure your site domain is added to Firebase Authentication -> Authorized domains."),x},p=async()=>{try{await oV(fy),c(null)}catch(y){console.error("Logout error:",y),t(null)}};E.useEffect(()=>{const y=setTimeout(()=>{r&&(console.log("ðŸ”„ Auth taking too long - continuing without authentication"),s(!1))},5e3),v=iV(fy,b=>{clearTimeout(y),t(b),s(!1),c(null)},b=>{clearTimeout(y),console.error("Auth state change error:",b),c("Authentication error - working offline"),s(!1)});return()=>{clearTimeout(y),v()}},[]);const g={currentUser:e,login:h,logout:p,loading:r,authError:o};return l.jsx(SI.Provider,{value:g,children:!r&&n})}const NI=Id("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=E.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},o)=>{const c=r?Wa:"button";return l.jsx(c,{className:We(NI({variant:e,size:t,className:n})),ref:o,...s})});te.displayName="Button";const ve=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:We("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));ve.displayName="Card";const Xe=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:We("flex flex-col space-y-1.5 p-6",n),...e}));Xe.displayName="CardHeader";const tt=E.forwardRef(({className:n,...e},t)=>l.jsx("h3",{ref:t,className:We("text-2xl font-semibold leading-none tracking-tight",n),...e}));tt.displayName="CardTitle";const kt=E.forwardRef(({className:n,...e},t)=>l.jsx("p",{ref:t,className:We("text-sm text-muted-foreground",n),...e}));kt.displayName="CardDescription";const xe=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:We("p-6 pt-0",n),...e}));xe.displayName="CardContent";const lz=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:We("flex items-center p-6 pt-0",n),...e}));lz.displayName="CardFooter";class cz extends _e.Component{constructor(t){super(t);$_(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.replace(window.location.href)});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),(t.message.includes("fetch")||t.message.includes("Firebase")||t.message.includes("Firestore"))&&console.log("ðŸ”„ Firebase error detected - this is a known connectivity issue"),this.setState({error:t,errorInfo:r})}render(){var t,r,s;if(this.state.hasError){const o=((t=this.state.error)==null?void 0:t.message.includes("fetch"))||((r=this.state.error)==null?void 0:r.message.includes("Firebase"))||((s=this.state.error)==null?void 0:s.message.includes("Firestore"));return l.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:l.jsxs(ve,{className:"max-w-md w-full",children:[l.jsx(Xe,{children:l.jsxs(tt,{className:"flex items-center gap-2 text-destructive",children:[l.jsx(Ok,{className:"h-5 w-5"}),o?"Connection Error":"Application Error"]})}),l.jsxs(xe,{className:"space-y-4",children:[l.jsx("p",{className:"text-muted-foreground",children:o?"There's a connectivity issue with Firebase services. The app will work in offline mode.":"Something went wrong. Please try refreshing the page."}),!1,l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(te,{onClick:this.handleRetry,className:"flex-1",children:[l.jsx(Pk,{className:"h-4 w-4 mr-2"}),"Retry"]}),l.jsx(te,{variant:"outline",onClick:()=>window.location.href="/admin/years",className:"flex-1",children:"Go to Years"})]})]})]})})}return this.props.children}}var fw="Avatar",[uz,a8]=Ui(fw),[dz,TI]=uz(fw),CI=E.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,o]=E.useState("idle");return l.jsx(dz,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:l.jsx(Ge.span,{...r,ref:e})})});CI.displayName=fw;var II="AvatarImage",jI=E.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...o}=n,c=TI(II,t),u=hz(r),h=Tn(p=>{s(p),c.onImageLoadingStatusChange(p)});return Xt(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?l.jsx(Ge.img,{...o,ref:e,src:r}):null});jI.displayName=II;var AI="AvatarFallback",PI=E.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,o=TI(AI,t),[c,u]=E.useState(r===void 0);return E.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&o.imageLoadingStatus!=="loaded"?l.jsx(Ge.span,{...s,ref:e}):null});PI.displayName=AI;function hz(n){const[e,t]=E.useState("idle");return Xt(()=>{if(!n){t("error");return}let r=!0;const s=new window.Image,o=c=>()=>{r&&t(c)};return t("loading"),s.onload=o("loaded"),s.onerror=o("error"),s.src=n,()=>{r=!1}},[n]),e}var RI=CI,kI=jI,OI=PI;const Oc=E.forwardRef(({className:n,...e},t)=>l.jsx(RI,{ref:t,className:We("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));Oc.displayName=RI.displayName;const Ed=E.forwardRef(({className:n,...e},t)=>l.jsx(kI,{ref:t,className:We("aspect-square h-full w-full",n),...e}));Ed.displayName=kI.displayName;const Dc=E.forwardRef(({className:n,...e},t)=>l.jsx(OI,{ref:t,className:We("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));Dc.displayName=OI.displayName;const fz=[{icon:Ck,label:"Dashboard",path:"/admin"},{icon:Wf,label:"News",path:"/admin/news"},{icon:gs,label:"Years",path:"/admin/years"},{icon:bc,label:"Users",path:"/admin/users"},{icon:bc,label:"Professors",path:"/admin/professors"},{icon:Xv,label:"Store",path:"/admin/store"},{icon:ti,label:"Orders",path:"/admin/orders"},{icon:ki,label:"Research",path:"/admin/research"},{icon:sd,label:"Maps",path:"/admin/maps"},{icon:DS,label:"Settings",path:"/admin/settings"}];function pz({isOpen:n}){return l.jsx("div",{className:We("fixed left-0 top-16 h-[calc(100vh-4rem)] bg-card border-r transition-all duration-300 z-40",n?"w-64":"w-16"),children:l.jsx("nav",{className:"p-4 space-y-2",children:fz.map(e=>l.jsxs("div",{children:[l.jsxs(LE,{to:e.path,className:({isActive:t})=>We("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors","hover:bg-accent hover:text-accent-foreground",t&&"bg-primary text-primary-foreground hover:bg-primary/90",!n&&"justify-center"),children:[l.jsx(e.icon,{className:"h-5 w-5 flex-shrink-0"}),n&&l.jsx("span",{className:"font-medium",children:e.label})]}),e.children&&n&&l.jsx("div",{className:"ml-6 mt-2 space-y-1",children:e.children.map(t=>l.jsxs(LE,{to:t.path,className:({isActive:r})=>We("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm","hover:bg-accent hover:text-accent-foreground",r&&"bg-primary text-primary-foreground hover:bg-primary/90"),children:[l.jsx(t.icon,{className:"h-4 w-4 flex-shrink-0"}),l.jsx("span",{children:t.label})]},t.path))})]},e.path))})})}function mz(){var o;const[n,e]=E.useState(!0),{currentUser:t,logout:r}=hw(),s=async()=>{try{await r()}catch(c){console.error("Error logging out:",c)}};return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-card shadow-sm",children:l.jsxs("div",{className:"flex h-16 items-center px-4",children:[l.jsx(te,{variant:"ghost",size:"icon",onClick:()=>e(!n),className:"mr-4",children:l.jsx(Ak,{className:"h-5 w-5"})}),l.jsx("div",{className:"flex-1",children:l.jsx("h1",{className:"text-xl font-semibold text-primary",children:"MedJust Admin Dashboard"})}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Oc,{className:"h-8 w-8",children:l.jsx(Dc,{children:l.jsx(Ro,{className:"h-4 w-4"})})}),l.jsx("span",{className:"text-sm font-medium",children:((o=t==null?void 0:t.email)==null?void 0:o.split("@")[0])||"Admin"})]}),l.jsx(te,{variant:"ghost",size:"icon",onClick:s,className:"text-muted-foreground hover:text-destructive",children:l.jsx(jk,{className:"h-4 w-4"})})]})]})}),l.jsxs("div",{className:"flex",children:[l.jsx(pz,{isOpen:n}),l.jsx("main",{className:`flex-1 transition-all duration-300 ${n?"ml-64":"ml-16"}`,children:l.jsx("div",{className:"p-6",children:l.jsx(iM,{})})})]})]})}const Ce=E.forwardRef(({className:n,type:e,...t},r)=>l.jsx("input",{type:e,className:We("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Ce.displayName="Input";var gz="Label",DI=E.forwardRef((n,e)=>l.jsx(Ge.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));DI.displayName=gz;var LI=DI;const yz=Id("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Pe=E.forwardRef(({className:n,...e},t)=>l.jsx(LI,{ref:t,className:We(yz(),n),...e}));Pe.displayName=LI.displayName;const vz=Id("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),MI=E.forwardRef(({className:n,variant:e,...t},r)=>l.jsx("div",{ref:r,role:"alert",className:We(vz({variant:e}),n),...t}));MI.displayName="Alert";const xz=E.forwardRef(({className:n,...e},t)=>l.jsx("h5",{ref:t,className:We("mb-1 font-medium leading-none tracking-tight",n),...e}));xz.displayName="AlertTitle";const FI=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:We("text-sm [&_p]:leading-relaxed",n),...e}));FI.displayName="AlertDescription";function wz(){const[n,e]=E.useState(""),[t,r]=E.useState(""),[s,o]=E.useState(""),[c,u]=E.useState(!1),{login:h,authError:p}=hw(),g=Bc(),y=async v=>{if(v.preventDefault(),!n||!t){o("Please fill in all fields");return}try{if(typeof navigator<"u"&&!navigator.onLine){o("No network connection. Please connect to the internet and try again.");return}o(""),u(!0),await h(n,t),g("/admin")}catch(b){console.error("Login error:",b),p?o(p):(b==null?void 0:b.code)==="auth/network-request-failed"?o("Network error - check your connection and try again."):(b==null?void 0:b.code)==="auth/wrong-password"||(b==null?void 0:b.code)==="auth/user-not-found"?o("Invalid email or password."):o("Failed to log in. Please check your credentials.")}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/20 flex items-center justify-center p-4",children:l.jsxs(ve,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(Xe,{className:"space-y-1 text-center",children:[l.jsx("div",{className:"mx-auto w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-4",children:l.jsx(oE,{className:"h-6 w-6 text-primary-foreground"})}),l.jsx(tt,{className:"text-2xl font-bold",children:"MedJust Admin"}),l.jsx(kt,{children:"Sign in to access the admin dashboard"})]}),l.jsx(xe,{children:l.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s&&l.jsx(MI,{variant:"destructive",children:l.jsx(FI,{children:s})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"email",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(qf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ce,{id:"email",type:"email",placeholder:"MedAdmin@gmail.com",value:n,onChange:v=>e(v.target.value),className:"pl-10",required:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"password",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(oE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ce,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:t,onChange:v=>r(v.target.value),className:"pl-10",required:!0})]})]}),l.jsx(te,{type:"submit",className:"w-full",disabled:c,children:c?l.jsxs(l.Fragment,{children:[l.jsx(na,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}const _z=Id("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function nn({className:n,variant:e,...t}){return l.jsx("div",{className:We(_z({variant:e}),n),...t})}function pw(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,o]=E.useState(null);return E.useEffect(()=>{const p=or(it(ze,"news"),Xc("updatedAt","desc")),g=aa(p,y=>{const v=[];y.forEach(b=>{var x,_;const S=b.data();v.push({id:b.id,title:S.title||"",content:S.content||"",imageUrl:S.imageUrl||"",videoUrl:S.videoUrl||"",createdAt:((x=S.createdAt)==null?void 0:x.toDate())||new Date,updatedAt:((_=S.updatedAt)==null?void 0:_.toDate())||new Date,authorName:S.authorName||"",authorId:S.newsId||b.id,tags:S.tags||[],isPinned:S.isPinned||!1,viewsCount:S.viewsCount||0,attachments:S.attachments||[],yearId:S.yearId||"",yearNumber:S.yearNumber||void 0})}),console.log(`âœ… Successfully loaded ${v.length} news articles from Firebase`),e(v),r(!1)},y=>{console.error("Error fetching news:",y),o(y.message||"Failed to fetch news from Firebase"),r(!1)});return()=>g()},[]),{news:n,loading:t,error:s,createNews:async p=>{try{console.log("ðŸ“ Creating news article:",p.title);const g={...p,createdAt:p.createdAt instanceof Date?wt.fromDate(p.createdAt):m1(),updatedAt:p.updatedAt instanceof Date?wt.fromDate(p.updatedAt):m1()};Object.keys(g).forEach(v=>{g[v]===void 0&&delete g[v]});const y=await Sn(it(ze,"news"),g);console.log("âœ… News article created successfully with ID:",y.id)}catch(g){throw console.error("âŒ Error creating news:",g),console.error("Error details:",g.code,g.message),new Error(`Failed to create news article: ${g.message||"Check Firebase permissions"}`)}},updateNews:async(p,g)=>{try{const y={...g};g.createdAt instanceof Date&&(y.createdAt=wt.fromDate(g.createdAt)),g.updatedAt instanceof Date&&(y.updatedAt=wt.fromDate(g.updatedAt)),Object.keys(y).forEach(v=>{y[v]===void 0&&delete y[v]}),await mn(Vt(ze,"news",p),y)}catch(y){throw console.error("Error updating news:",y),console.error("Error details:",y.code,y.message),new Error(`Failed to update news article: ${y.message||"Check Firebase permissions"}`)}},deleteNews:async p=>{try{await Dr(Vt(ze,"news",p))}catch(g){throw console.error("Error deleting news:",g),console.error("Error details:",g.code,g.message),new Error(`Failed to delete news article: ${g.message||"Check Firebase permissions"}`)}}}}function VI(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,o]=E.useState(null),[c,u]=E.useState(!1),h=[{id:"product1",productId:"product1",name:"Medical Textbook",description:"Comprehensive medical textbook for students",price:89.99,images:["https://example.com/book1.jpg"],categoryId:"books",createdAt:new Date},{id:"product2",productId:"product2",name:"Stethoscope",description:"Professional grade stethoscope",price:120,images:["https://example.com/stethoscope.jpg"],categoryId:"equipment",createdAt:new Date}];E.useEffect(()=>{(async()=>{const S=setTimeout(()=>{t&&!c&&(console.log("ðŸ”„ Firebase taking too long - switching to offline mode"),u(!0),r(!1),o("Working in offline mode - Firebase unavailable"),e(h))},3e3);try{console.log("ðŸ”„ Fetching products from Firebase...");const x=await jt(it(ze,"products")),_=[];x.forEach(A=>{var C;const I=A.data();_.push({id:A.id,productId:I.productId||A.id,name:I.name||"",description:I.description||"",price:I.price||0,types:I.types||(I.price?[{name:"Default",price:I.price}]:[]),images:I.images||[],categoryId:I.categoryId||"",createdAt:((C=I.createdAt)==null?void 0:C.toDate())||new Date})}),clearTimeout(S),e(_.sort((A,I)=>I.createdAt.getTime()-A.createdAt.getTime())),r(!1),o(null),console.log("âœ… Products loaded successfully:",_.length)}catch(x){clearTimeout(S),x.isFirebaseOfflineError?console.log("ðŸ”„ Firebase offline mode detected - using mock data"):console.error("Firebase error - switching to offline mode:",x.message),u(!0),r(!1),o("Working in offline mode - Firebase unavailable"),e(h)}})()},[]);const p=async b=>{var S,x;if(c){const _={id:`product_${Date.now()}`,productId:`product_${Date.now()}`,...b,createdAt:new Date};e(A=>[_,...A]),console.log("âœ… Added product to offline mode:",_.name);return}try{const _={name:b.name,description:b.description,price:b.price||((x=(S=b.types)==null?void 0:S[0])==null?void 0:x.price)||0,types:b.types||(b.price?[{name:"Default",price:b.price}]:[]),images:b.images,categoryId:b.categoryId||"",createdAt:new Date,productId:""};console.log("ðŸ“ Creating new product:",_);const A=await Sn(it(ze,"products"),_);await mn(A,{productId:A.id}),console.log("âœ… Created product with ID:",A.id),window.location.replace(window.location.href)}catch(_){console.error("Error creating product:",_),u(!0),await p(b)}};return{products:n,loading:t,error:s,isOfflineMode:c,createProduct:p,updateProduct:async(b,S)=>{var x;if(c){e(_=>_.map(A=>A.id===b?{...A,...S}:A)),console.log("âœ… Updated product in offline mode");return}try{const _=Vt(ze,"products",b),A={...S};S.types&&(A.types=S.types,A.price=((x=S.types[0])==null?void 0:x.price)||S.price||0),await mn(_,A),console.log("âœ… Updated product in Firebase:",b),window.location.replace(window.location.href)}catch(_){console.error("Error updating product:",_)}},deleteProduct:async b=>{if(c){e(S=>S.filter(x=>x.id!==b)),console.log("âœ… Deleted product from offline mode");return}try{await Dr(Vt(ze,"products",b)),console.log("âœ… Deleted product from Firebase:",b),window.location.replace(window.location.href)}catch(S){console.error("Error deleting product:",S)}},retryConnection:()=>{console.log("ðŸ”„ Retrying Firebase connection..."),r(!0),o(null),u(!1),window.location.replace(window.location.href)}}}const Ez=[{id:"1",name:"Dr. Sarah Johnson",department:"Internal Medicine",email:"sarah.johnson@medjust.com",officeLocation:"Medical Building, Room 301",imageUrl:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=300&h=300&fit=crop&crop=face"},{id:"2",name:"Prof. Michael Chen",department:"Surgery",email:"michael.chen@medjust.com",officeLocation:"Surgical Wing, Room 205",imageUrl:"https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=300&h=300&fit=crop&crop=face"},{id:"3",name:"Dr. Emily Rodriguez",department:"Emergency Medicine",email:"emily.rodriguez@medjust.com",officeLocation:"Emergency Department, Office 12",imageUrl:"https://images.unsplash.com/photo-1594824928909-90ad1d93d7c3?w=300&h=300&fit=crop&crop=face"}];function UI(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,o]=E.useState(null),[c,u]=E.useState(!1);E.useEffect(()=>{const y=async()=>{try{const b=or(it(ze,"professors"));await jt(b);const S=or(it(ze,"professors"),Xc("name","asc"));return aa(S,_=>{const A=[];_.forEach(I=>{const C=I.data();A.push({id:I.id,name:C.name||"",title:C.title||"",department:C.department||"",email:C.email||"",phone:C.phone||"",officeLocation:C.officeLocation||"",bio:C.bio||"",researchAreas:C.researchAreas||[],website:C.website||"",linkedin:C.linkedin||"",imageUrl:C.imageUrl||""})}),e(A),r(!1)},_=>{console.error("Error in Firebase listener:",_),v()})}catch(b){return console.error("Firebase connection failed:",b),v(),null}},v=()=>{console.log("ðŸ”„ Switching to offline mode with mock data"),u(!0),e(Ez),o(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(b=>[...b,v]),console.log("âœ… Added professor in offline mode:",v.name);return}try{await Sn(it(ze,"professors"),{...y,professorId:`prof_${Date.now()}`}),console.log("âœ… Added professor to Firebase:",y.name)}catch(v){console.error("Error creating professor:",v),u(!0),await h(y)}};return{professors:n,loading:t,error:s,createProfessor:h,updateProfessor:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(b=>b.map(S=>S.id===y?{...S,...v}:S)),console.log("âœ… Updated professor in offline mode");return}try{await mn(Vt(ze,"professors",y),v),console.log("âœ… Updated professor in Firebase")}catch(b){console.error("Error updating professor:",b),e(S=>S.map(x=>x.id===y?{...x,...v}:x)),console.log("âœ… Updated professor locally (Firebase failed)")}},deleteProfessor:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(b=>b.id!==y)),console.log("âœ… Deleted professor in offline mode");return}try{await Dr(Vt(ze,"professors",y)),console.log("âœ… Deleted professor from Firebase")}catch(v){console.error("Error deleting professor:",v),e(b=>b.filter(S=>S.id!==y)),console.log("âœ… Deleted professor locally (Firebase failed)")}},isOfflineMode:c}}async function bz(){return(await jt(it(ze,"batches"))).docs.map(e=>{const t=e.data();return{id:e.id,batchName:t.batch_name||t.batchName||"",imageUrl:t.image_url||t.imageUrl||"",aca_supervisor:t.aca_supervisor||t.acadmic_supervisor||t.academic_supervisor||"",cr:t.cr||"",actor:t.actor||"",group_link:t.group_link||t.groupUrl||t.group_url||"",ref:e.ref}})}async function Sz(n){const e=n.map(async r=>{try{return(await jt(it(r.ref,"years"))).docs.map(o=>{const c=o.data();let u=c.order||1;if(c.name){const h=String(c.name).match(/\d+/);h&&(u=parseInt(h[0]))}return{id:o.id,yearNumber:u,name:c.name||c.title||"",type:u<=3?"basic":"clinical",batchName:r.batchName,imageUrl:c.imageUrl||c.image_url||"",academicSupervisor:c.aca_supervisor||c.acadmic_supervisor||c.academic_supervisor||"",actor:c.actor||"",cr:c.cr||"",groupUrl:c.group_link||c.group_url||c.groupUrl||"",subjects:[],batchId:r.id}})}catch(s){return console.warn("Failed to fetch years for batch",r.id,s),[]}});return(await Promise.all(e)).flat()}async function Nz(){return(await jt(it(ze,"Subjects"))).docs}async function Tz(n){const t=(await jt(it(n.ref,"lectures"))).docs.map(async s=>{var v;const o=s.data(),[c,u,h]=await Promise.all([jt(it(s.ref,"videos")),jt(it(s.ref,"files")),jt(it(s.ref,"quizzes"))]),p=[];c.forEach(b=>{var x;const S=b.data();p.push({id:b.id,title:S.title||S.name||"",url:S.url||S.youtubeUrl||"",thumbnailUrl:S.thumbnailUrl||"",description:S.description||"",uploadedAt:((x=S.uploadedAt)==null?void 0:x.toDate())||new Date,youtubeUrl:S.youtubeUrl||S.url||""})});const g=[];u.forEach(b=>{var x;const S=b.data();g.push({id:b.id,title:S.title||S.name||"",url:S.fileUrl||S.url||"",description:S.description||"",uploadedAt:((x=S.uploadedAt)==null?void 0:x.toDate())||new Date,fileUrl:S.fileUrl||S.url||""})});const y=[];return h.forEach(b=>{const S=b.data();y.push({id:b.id,title:S.title||S.name||"",description:S.description||"",duration:S.duration||30,passRate:S.passRate||70,questions:S.questions||[]})}),{id:s.id,name:o.name||o.title||"",description:o.description||"",subjectId:n.id,order:o.order||1,imageUrl:o.imageUrl||"",createdAt:((v=o.createdAt)==null?void 0:v.toDate())||new Date,uploadedBy:o.uploadedBy||"Unknown",videos:p,files:g,quizzes:y}});return(await Promise.all(t)).sort((s,o)=>s.order-o.order)}async function Cz(){const n=await Nz(),e=10,t=[];for(let r=0;r<n.length;r+=e){const o=n.slice(r,r+e).map(async u=>{const h=u.data(),p=await Tz(u);return{id:u.id,name:h.name||"",subjectId:h.subjectId||u.id,yearId:h.yearId||"",imageUrl:h.imageUrl||"",lectures:p}}),c=await Promise.all(o);t.push(...c)}return t}async function Iz(){if(!navigator.onLine)throw new Error("No internet connection");const n=await bz(),[e,t]=await Promise.all([Sz(n),Cz()]),r=e.map(o=>({...o,subjects:t.filter(c=>c.yearId===o.id).sort((c,u)=>c.name.localeCompare(u.name))})),s=n.map(o=>({id:o.id,batchName:o.batchName,imageUrl:o.imageUrl||"",aca_supervisor:o.aca_supervisor||"",cr:o.cr||"",actor:o.actor||"",group_link:o.group_link||""}));return{years:r.sort((o,c)=>o.yearNumber-c.yearNumber),batches:s,subjects:r.flatMap(o=>o.subjects)}}function Jc(){const n=fx(),[e,t]=E.useState(!1),{data:r,isLoading:s,error:o,refetch:c}=mL({queryKey:["years-data"],queryFn:Iz,staleTime:5*60*1e3,gcTime:30*60*1e3,retry:1,retryDelay:1e3,enabled:navigator.onLine&&!e}),u=(r==null?void 0:r.years)||[],h=(r==null?void 0:r.batches)||[],p=(r==null?void 0:r.subjects)||[],g=s,y=o?o.message:null;E.useEffect(()=>{navigator.onLine||t(!0)},[]),E.useEffect(()=>{const L=()=>{t(!1),n.invalidateQueries({queryKey:["years-data"]})},V=()=>{t(!0)};return window.addEventListener("online",L),window.addEventListener("offline",V),()=>{window.removeEventListener("online",L),window.removeEventListener("offline",V)}},[n]);const v=()=>{console.log("ï¿½ï¿½ï¿½ Retrying Firebase connection..."),setLoading(!0),setError(null),t(!1),setConnectionStatus("connecting"),setRetryCount(L=>L+1)},b=async(L,V)=>{if(L){if(e||!navigator.onLine){setYears(R=>R.map(W=>W.id===L?{...W,...V}:W));return}try{const R=vs(ze,"years"),K=(await jt(R)).docs.find(X=>X.id===L);if(K){await mn(K.ref,{...V,updatedAt:new Date}),n.invalidateQueries({queryKey:["years-data"]});return}setYears(X=>X.map(ie=>ie.id===L?{...ie,...V}:ie))}catch(R){console.error("Error updating year:",R),setYears(W=>W.map(K=>K.id===L?{...K,...V}:K))}}},S=async(L,V)=>{if(L){if(e||!navigator.onLine){setBatches(R=>R.map(W=>W.id===L?{...W,...V}:W));return}try{const R=Vt(ze,"batches",L);await mn(R,{...V,updatedAt:new Date}),n.invalidateQueries({queryKey:["years-data"]})}catch(R){console.error("Failed to update batch:",R),setBatches(W=>W.map(K=>K.id===L?{...K,...V}:K))}}},x=async(L,V=3)=>{for(let R=0;R<V;R++)try{return await L()}catch(W){if(console.log(`Attempt ${R+1} failed:`,W.message),R===V-1)throw W;await new Promise(K=>setTimeout(K,1e3*(R+1)))}},_=async L=>{if(e||!navigator.onLine){const V={id:`subject_${Date.now()}`,name:L.name,subjectId:`subject_${Date.now()}`,yearId:L.yearId,imageUrl:L.imageUrl||"",lectures:[]};setSubjects(R=>[...R,V]),setYears(R=>R.map(W=>W.id===L.yearId?{...W,subjects:[...W.subjects,V]}:W)),console.log("âœ… Added subject to offline mode:",V.name);return}try{console.log("ðŸ”„ Creating subject with data:",L),await x(async()=>{const V={name:L.name,imageUrl:L.imageUrl||"",hours:L.hours||3,yearId:L.yearId,createdAt:wt.fromDate(new Date),updatedAt:wt.fromDate(new Date)};Object.keys(V).forEach(ie=>{V[ie]===void 0&&delete V[ie]});const R=await Sn(it(ze,"Subjects"),V);await mn(R,{subjectId:R.id}),console.log("âœ… Created new subject document:",R.id);const W=R,K=it(W,"lectures");if((await jt(K)).empty){const G=await Sn(K,{name:"Sample Lecture",title:"Sample Lecture",description:"",imageUrl:"",order:1,uploadedBy:"System",createdAt:new Date,lectureId:""});await mn(G,{lectureId:G.id});const oe=["videos","files","quizzes"];for(const le of oe){const B=it(G,le);let J={};le==="videos"?J={title:"Sample Video",description:"",thumbnailUrl:"",url:"",uploadedAt:new Date,videoId:""}:le==="files"?J={title:"Sample File",description:"",url:"",uploadedAt:new Date,fileId:""}:le==="quizzes"&&(J={title:"Sample Quiz",description:"",duration:30,passRate:70,questions:[],quizId:""});const he=await Sn(B,J),Ne=`${le.slice(0,-1)}Id`;await mn(he,{[Ne]:he.id})}console.log("âœ… Created complete lecture structure for subject:",W.id)}n.invalidateQueries({queryKey:["years-data"]})})}catch(V){console.error("Error creating subject:",V),t(!0),await _(L)}},A=async L=>{if(e){const V={id:`lecture_${Date.now()}`,...L};setSubjects(R=>R.map(W=>W.id===L.subjectId?{...W,lectures:[...W.lectures,V]}:W)),setYears(R=>R.map(W=>({...W,subjects:W.subjects.map(K=>K.id===L.subjectId?{...K,lectures:[...K.lectures,V]}:K)}))),console.log("âœ… Added lecture to offline mode:",V.name);return}try{await x(async()=>{const V=Vt(ze,"Subjects",L.subjectId),R=it(V,"lectures"),W={title:L.name,description:L.description||"",imageUrl:L.imageUrl||"",order:L.order||1,uploadedBy:L.uploadedBy||"Current User",createdAt:new Date,lectureId:""};console.log("ðŸ“ Creating lecture in subcollection:",W);const K=await Sn(R,W);await mn(K,{lectureId:K.id}),console.log("âœ… Created lecture document with ID:",K.id),console.log("ðŸ“ Path: /Subjects/"+L.subjectId+"/lectures/"+K.id),n.invalidateQueries({queryKey:["years-data"]})})}catch(V){console.error("Error creating lecture:",V),t(!0),await A(L)}},I=async(L,V)=>{if(e){setYears(R=>R.map(W=>({...W,subjects:W.subjects.map(K=>({...K,lectures:K.lectures.map(X=>X.id===L?{...X,...V}:X)}))}))),console.log("âœ… Updated lecture in offline mode");return}try{console.log("ðŸ”„ Updating lecture:",L,V),await x(async()=>{const R=or(vs(ze,"lectures")),W=await jt(R);let K=null;for(const ie of W.docs)if(ie.id===L){K=ie.ref;break}if(!K)throw new Error(`Lecture ${L} not found`);const X={...V};X.name&&(X.title=X.name,delete X.name),Object.keys(X).forEach(ie=>{X[ie]===void 0&&delete X[ie]}),X.createdAt instanceof Date&&(X.createdAt=wt.fromDate(X.createdAt)),X.updatedAt instanceof Date&&(X.updatedAt=wt.fromDate(X.updatedAt)),X.updatedAt||(X.updatedAt=wt.fromDate(new Date)),await mn(K,X),console.log("âœ… Updated lecture successfully:",L),n.invalidateQueries({queryKey:["years-data"]})})}catch(R){throw console.error("âŒ Error updating lecture:",R),console.error("Error details:",R.code,R.message),new Error(`Failed to update lecture: ${R.message||"Check Firebase permissions"}`)}},C=async(L,V)=>{if(e){setSubjects(R=>R.map(W=>W.id===L?{...W,lectures:W.lectures.filter(K=>K.id!==V)}:W)),setYears(R=>R.map(W=>({...W,subjects:W.subjects.map(K=>K.id===L?{...K,lectures:K.lectures.filter(X=>X.id!==V)}:K)}))),console.log("âœ… Deleted lecture from offline mode");return}try{const R=Vt(ze,"Subjects",L),W=Vt(R,"lectures",V);await Dr(W),console.log("âœ… Deleted lecture from Firebase"),n.invalidateQueries({queryKey:["years-data"]})}catch(R){console.error("Error deleting lecture:",R)}},M=async L=>{if(L){if(e){setSubjects(V=>V.filter(R=>R.id!==L)),setYears(V=>V.map(R=>({...R,subjects:R.subjects.filter(W=>W.id!==L)}))),console.log("âœ… Deleted subject in offline mode");return}try{const V=Vt(ze,"Subjects",L);await Dr(V),console.log("âœ… Deleted subject from Firebase"),n.invalidateQueries({queryKey:["years-data"]})}catch(V){console.error("Error deleting subject:",V)}}},U=async(L,V,R)=>{if(!(!L||!V)){if(e){setYears(W=>W.map(K=>({...K,subjects:K.subjects.map(X=>X.id===L?{...X,lectures:X.lectures.map(ie=>ie.id===V?{...ie,videos:[...ie.videos||[],{id:`video_${Date.now()}`,title:R.title,url:R.url,thumbnailUrl:R.thumbnailUrl||"",description:R.description||"",uploadedAt:new Date}]}:ie)}:X)})));return}try{const W=Vt(ze,"Subjects",L,"lectures",V);await Sn(it(W,"videos"),{title:R.title,description:R.description||"",url:R.url,duration:R.duration||"",thumbnailUrl:R.thumbnailUrl||"",platform:R.platform||"",uploadedAt:new Date,uploadedBy:"Current User"}),n.invalidateQueries({queryKey:["years-data"]})}catch(W){console.error("Error adding video:",W)}}},$=async(L,V,R)=>{if(!(!L||!V)){if(e){setYears(W=>W.map(K=>({...K,subjects:K.subjects.map(X=>X.id===L?{...X,lectures:X.lectures.map(ie=>ie.id===V?{...ie,files:[...ie.files||[],{id:`file_${Date.now()}`,title:R.title,fileUrl:R.fileUrl,url:R.fileUrl,description:R.description||"",uploadedAt:new Date}]}:ie)}:X)})));return}try{const W=Vt(ze,"Subjects",L,"lectures",V),K={title:R.title,description:R.description||"",fileUrl:R.fileUrl,url:R.fileUrl,fileType:R.fileType||"",fileSize:R.fileSize||"",uploadedAt:wt.fromDate(new Date),uploadedBy:"Current User"};Object.keys(K).forEach(X=>{K[X]===void 0&&delete K[X]}),await Sn(it(W,"files"),K),console.log("âœ… File added successfully:",R.title),n.invalidateQueries({queryKey:["years-data"]})}catch(W){throw console.error("âŒ Error adding file:",W),console.error("Error details:",W.code,W.message),new Error(`Failed to add file: ${W.message||"Check Firebase permissions"}`)}}},P=async(L,V,R)=>{if(!(!L||!V)){if(e){setYears(W=>W.map(K=>({...K,subjects:K.subjects.map(X=>X.id===L?{...X,lectures:X.lectures.map(ie=>ie.id===V?{...ie,quizzes:[...ie.quizzes||[],{id:`quiz_${Date.now()}`,title:R.title,description:R.description||"",duration:R.timeLimit||30,passRate:R.passingScore||70,questions:R.questions||[]}]}:ie)}:X)})));return}try{const W=Vt(ze,"Subjects",L,"lectures",V);await Sn(it(W,"quizzes"),{title:R.title,description:R.description||"",duration:R.timeLimit||30,passRate:R.passingScore||70,questions:R.questions||[],createdAt:new Date,uploadedBy:"Current User"}),n.invalidateQueries({queryKey:["years-data"]})}catch(W){console.error("Error adding quiz:",W)}}},k=async(L,V={})=>{const R=V.yearNumber||1,W=V.name||`Year ${R}`,K=V.type||(R<=3?"basic":"clinical");if(e||!navigator.onLine){const X={id:`year_${Date.now()}`,yearNumber:R,name:W,type:K,batchName:"",batchId:L||void 0,imageUrl:"",academicSupervisor:"",actor:"",cr:"",groupUrl:"",subjects:[]};setYears(ie=>[...ie,X]),L&&setBatches(ie=>ie.map(G=>G.id===L?{...G}:G)),console.log("âœ… Added year in offline mode:",X);return}try{await x(async()=>{if(L){const X=Vt(ze,"batches",L),ie=it(X,"years"),G=await Sn(ie,{name:W,order:R,imageUrl:"",batch_name:W,createdAt:new Date});try{await mn(G,{yearId:G.id})}catch{}}else{const X=it(ze,"years"),ie=await Sn(X,{name:W,order:R,imageUrl:"",batch_name:W,createdAt:new Date});try{await mn(ie,{yearId:ie.id})}catch{}}n.invalidateQueries({queryKey:["years-data"]})})}catch(X){console.error("Error creating year:",X),t(!0),await k(L,V)}};return{years:u,batches:h,subjects:p,loading:g,error:y,isOfflineMode:e,retryConnection:v,updateYear:b,updateBatch:S,createSubject:_,createLecture:A,updateLecture:I,createYear:k,createBatch:async(L={})=>{const V=L.batchName||"New Batch",R=L.imageUrl||"",W=L.cr||"",K=`batch_temp_${Date.now()}`,X={id:K,batchName:V,imageUrl:R,cr:W};if(setBatches(ie=>[X,...ie]),e||!navigator.onLine){console.log("âœ… Added batch in offline mode:",X);return}try{await x(async()=>{const ie=it(ze,"batches"),G=await Sn(ie,{batch_name:V,image_url:R,cr:W,createdAt:new Date});try{await mn(G,{batchId:G.id})}catch{}const oe={id:G.id,batchName:V,imageUrl:R,cr:W};setBatches(le=>[oe,...le.filter(B=>B.id!==K)]),n.invalidateQueries({queryKey:["years-data"]})})}catch(ie){console.error("Error creating batch:",ie),setBatches(oe=>oe.filter(le=>le.id!==K)),t(!0);const G={id:`batch_${Date.now()}`,batchName:V,imageUrl:R,cr:W};setBatches(oe=>[G,...oe])}},deleteBatch:async(L,V={deleteYears:!0})=>{if(!L)return;const R=h,W=u;if(setBatches(K=>K.filter(X=>X.id!==L)),setYears(K=>K.filter(X=>(X.batchId||X.batchName)!==L)),e||!navigator.onLine){console.log("âœ… Removed batch in offline mode:",L);return}try{await x(async()=>{const K=Vt(ze,"batches",L);if(V.deleteYears)try{const X=it(K,"years"),ie=await jt(X);for(const G of ie.docs)await Dr(G.ref)}catch{const ie=vs(ze,"years"),G=await jt(ie);for(const oe of G.docs){const le=oe.data();(le.batchId||le.batch_id)===L&&await Dr(oe.ref)}}else{const X=vs(ze,"years"),ie=await jt(X);for(const G of ie.docs){const oe=G.data();if((oe.batchId||oe.batch_id)===L)try{await mn(G.ref,{batchId:null,batch_name:null})}catch{}}}await Dr(K),n.invalidateQueries({queryKey:["years-data"]})})}catch(K){throw console.error("Error deleting batch:",K),setBatches(R||[]),setYears(W||[]),K}},deleteLecture:C,deleteSubject:M,addVideo:U,addFile:$,addQuiz:P}}const jz=[{id:1,type:"news",title:"New cardiology study published",time:"2 hours ago",author:"Dr. Smith"},{id:2,type:"video",title:"Anatomy lecture uploaded",time:"4 hours ago",author:"Prof. Johnson"},{id:3,type:"quiz",title:"Pharmacology quiz created",time:"6 hours ago",author:"Dr. Brown"},{id:4,type:"product",title:"New stethoscope added to store",time:"1 day ago",author:"Admin"}];function Az(){const{news:n,loading:e}=pw(),{products:t,loading:r}=VI(),{professors:s,loading:o}=UI(),{years:c,loading:u}=Jc(),h=n.length,p=s.length,g=t.reduce((b,S)=>b+(S.price||0),0);c.reduce((b,S)=>b+S.subjects.reduce((x,_)=>x+_.lectures.reduce((A,I)=>{var C;return A+(((C=I.videos)==null?void 0:C.length)||0)},0),0),0);const y=c.reduce((b,S)=>{var x;return b+(((x=S.subjects)==null?void 0:x.length)||0)},0),v=[{title:"Total News Articles",value:e?"...":String(h),change:"+12%",icon:Wf,color:"text-blue-600"},{title:"Subjects",value:u?"...":String(y),change:"+5%",icon:gs,color:"text-green-600"},{title:"Active Professors",value:o?"...":String(p),change:"+2%",icon:bc,color:"text-purple-600"},{title:"Store Revenue",value:r?"...":`$${g.toLocaleString()}`,change:"+18%",icon:kS,color:"text-emerald-600"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),l.jsx("p",{className:"text-muted-foreground",children:"Welcome to the MedJust Admin Dashboard"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:v.map(b=>l.jsxs(ve,{children:[l.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(tt,{className:"text-sm font-medium",children:b.title}),l.jsx(b.icon,{className:`h-4 w-4 ${b.color}`})]}),l.jsxs(xe,{children:[l.jsx("div",{className:"text-2xl font-bold",children:b.value}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[l.jsxs(nn,{variant:"secondary",className:"text-green-600",children:[l.jsx(kk,{className:"h-3 w-3 mr-1"}),b.change]}),l.jsx("span",{className:"text-muted-foreground",children:"from last month"})]})]})]},b.title))}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Recent Activity"}),l.jsx(kt,{children:"Latest updates across all modules"})]}),l.jsx(xe,{children:l.jsx("div",{className:"space-y-4",children:jz.map(b=>l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium",children:b.title}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[l.jsx("span",{children:b.author}),l.jsx("span",{children:"â€¢"}),l.jsx("span",{children:b.time})]})]})]},b.id))})})]}),l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Quick Actions"}),l.jsx(kt,{children:"Common administrative tasks"})]}),l.jsx(xe,{children:l.jsxs("div",{className:"grid gap-2",children:[l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(Wf,{className:"h-5 w-5 text-blue-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Create News Article"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Publish new content"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(Ws,{className:"h-5 w-5 text-green-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Upload Video"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Add learning resource"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(bc,{className:"h-5 w-5 text-purple-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Professor"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Register new faculty"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(Xv,{className:"h-5 w-5 text-emerald-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Product"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Expand store catalog"})]})]})]})})]})]})]})}const ei=E.forwardRef(({className:n,...e},t)=>l.jsx("textarea",{className:We("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));ei.displayName="Textarea";function zI(n){const e=E.useRef({value:n,previous:n});return E.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var mw="Switch",[Pz,l8]=Ui(mw),[Rz,kz]=Pz(mw),$I=E.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:s,defaultChecked:o,required:c,disabled:u,value:h="on",onCheckedChange:p,...g}=n,[y,v]=E.useState(null),b=Tt(e,I=>v(I)),S=E.useRef(!1),x=y?!!y.closest("form"):!0,[_=!1,A]=Ha({prop:s,defaultProp:o,onChange:p});return l.jsxs(Rz,{scope:t,checked:_,disabled:u,children:[l.jsx(Ge.button,{type:"button",role:"switch","aria-checked":_,"aria-required":c,"data-state":WI(_),"data-disabled":u?"":void 0,disabled:u,value:h,...g,ref:b,onClick:$e(n.onClick,I=>{A(C=>!C),x&&(S.current=I.isPropagationStopped(),S.current||I.stopPropagation())})}),x&&l.jsx(Oz,{control:y,bubbles:!S.current,name:r,value:h,checked:_,required:c,disabled:u,style:{transform:"translateX(-100%)"}})]})});$I.displayName=mw;var BI="SwitchThumb",qI=E.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,s=kz(BI,t);return l.jsx(Ge.span,{"data-state":WI(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});qI.displayName=BI;var Oz=n=>{const{control:e,checked:t,bubbles:r=!0,...s}=n,o=E.useRef(null),c=zI(t),u=rN(e);return E.useEffect(()=>{const h=o.current,p=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==t&&y){const v=new Event("click",{bubbles:r});y.call(h,t),h.dispatchEvent(v)}},[c,t,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:o,style:{...n.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function WI(n){return n?"checked":"unchecked"}var HI=$I,Dz=qI;const KI=E.forwardRef(({className:n,...e},t)=>l.jsx(HI,{className:We("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:l.jsx(Dz,{className:We("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));KI.displayName=HI.displayName;function Lz({news:n,onClose:e,onSave:t}){var _,A,I;const{years:r}=Jc(),[s,o]=E.useState(null),[c,u]=E.useState({title:"",content:"",imageUrl:"",videoUrl:"",tags:[],isPinned:!1,attachments:[],yearId:"",subjectId:""}),[h,p]=E.useState(""),[g,y]=E.useState(!1);E.useEffect(()=>{n&&u({title:n.title||"",content:n.content||"",imageUrl:n.imageUrl||"",videoUrl:n.videoUrl||"",tags:n.tags||[],isPinned:n.isPinned||!1,attachments:n.attachments||[],yearId:n.yearId||"",subjectId:n.subjectId||""})},[n]),E.useEffect(()=>{let C=!0;return(async()=>{try{if(r&&r.length>0||s)return;const U=await jt(vs(ze,"years")),$=[];U.forEach(P=>{const k=P.data();let D=k.order||1;if(k.name){const O=String(k.name).match(/\d+/);O&&(D=parseInt(O[0]))}$.push({id:P.id,yearNumber:D,type:D<=3?"basic":"clinical",subjects:k.subjects||[]})}),C&&$.length>0&&o($)}catch{}})(),()=>{C=!1}},[r,s]);const v=async C=>{C.preventDefault(),y(!0);try{const M={...c,yearNumber:void 0,updatedAt:new Date,...n?{}:{createdAt:new Date,authorName:"Current User",authorId:"current-user-id",viewsCount:0}};if(c.yearId){const U=r.find($=>$.id===c.yearId);U&&(M.yearNumber=U.yearNumber)}c.subjectId&&(M.subjectId=c.subjectId),t(M)}catch(M){console.error("Error saving news:",M)}finally{y(!1)}},b=()=>{h.trim()&&!c.tags.includes(h.trim())&&(u(C=>({...C,tags:[...C.tags,h.trim()]})),p(""))},S=C=>{u(M=>({...M,tags:M.tags.filter(U=>U!==C)}))},x=C=>{C.key==="Enter"&&(C.preventDefault(),b())};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(te,{variant:"ghost",onClick:e,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Article":"Create Article"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the news article details":"Create a new news article for medical students"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(KI,{id:"pinned",checked:c.isPinned,onCheckedChange:C=>u(M=>({...M,isPinned:C}))}),l.jsxs(Pe,{htmlFor:"pinned",className:"flex items-center gap-2",children:[l.jsx(OS,{className:"h-4 w-4"}),"Pin Article"]})]})})]}),l.jsx("form",{onSubmit:v,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Article Content"}),l.jsx(kt,{children:"Main article information and content"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"title",children:"Title *"}),l.jsx(Ce,{id:"title",placeholder:"Enter article title...",value:c.title,onChange:C=>u(M=>({...M,title:C.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"content",children:"Content *"}),l.jsx(ei,{id:"content",placeholder:"Write your article content here...",value:c.content,onChange:C=>u(M=>({...M,content:C.target.value})),rows:12,required:!0})]})]})]}),l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Tags"}),l.jsx(kt,{children:"Add relevant tags to help categorize this article"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ce,{placeholder:"Add a tag...",value:h,onChange:C=>p(C.target.value),onKeyPress:x}),l.jsxs(te,{type:"button",onClick:b,variant:"outline",children:[l.jsx(Qu,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.tags.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(C=>l.jsxs(nn,{variant:"secondary",className:"flex items-center gap-1",children:[C,l.jsx("button",{type:"button",onClick:()=>S(C),className:"ml-1 hover:text-destructive",children:l.jsx(Sc,{className:"h-3 w-3"})})]},C))})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Media"}),l.jsx(kt,{children:"Add images and videos to your article"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"imageUrl",children:"Featured Image URL"}),l.jsx(Ce,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:C=>u(M=>({...M,imageUrl:C.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"videoUrl",children:"Video URL"}),l.jsx(Ce,{id:"videoUrl",placeholder:"https://youtube.com/watch?v=...",value:c.videoUrl,onChange:C=>u(M=>({...M,videoUrl:C.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"yearId",children:"Related Year"}),l.jsxs("select",{id:"yearId",value:c.yearId,onChange:C=>u(M=>({...M,yearId:C.target.value,subjectId:""})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific year --"}),(s&&s.length>0?s:r)&&(s&&s.length>0?s:r).length>0?(s&&s.length>0?s:r).map(C=>l.jsx("option",{value:C.id,children:`Year ${C.yearNumber}`},C.id)):l.jsx("option",{value:"",children:"No years available"})]})]}),c.yearId&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Pe,{htmlFor:"subjectId",children:"Related Subject"}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected year: ",(_=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))!=null&&_.yearNumber?`Year ${(A=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:A.yearNumber}`:""]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{id:"subjectId",value:c.subjectId,onChange:C=>u(M=>({...M,subjectId:C.target.value})),className:"flex-1 border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific subject --"}),(((I=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:I.subjects)||[]).map(C=>l.jsx("option",{value:C.id,children:C.name},C.id))]}),l.jsx(te,{type:"button",variant:"outline",size:"sm",onClick:()=>{var C;(C=navigator.clipboard)==null||C.writeText(c.yearId||""),alert("Year id copied")},children:"Copy ID"})]})]}),c.imageUrl&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Preview"}),l.jsx("img",{src:c.imageUrl,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border",onError:C=>{C.currentTarget.style.display="none"}})]})]})]}),l.jsxs(ve,{children:[l.jsx(Xe,{children:l.jsx(tt,{children:"Actions"})}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs(te,{type:"submit",className:"w-full",disabled:g,children:[l.jsx(ra,{className:"h-4 w-4 mr-2"}),g?"Saving...":n?"Update Article":"Create Article"]}),l.jsx(te,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Cancel"})]})]})]})]})})]})}function Mz(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,o]=E.useState(!1),[c,u]=E.useState("all"),{news:h,loading:p,error:g,createNews:y,updateNews:v,deleteNews:b}=pw(),S=h.filter(I=>I.title.toLowerCase().includes(n.toLowerCase())||I.tags.some(C=>C.toLowerCase().includes(n.toLowerCase()))),x=I=>{r(I),o(!0)},_=async I=>{if(window.confirm("Are you sure you want to delete this article?"))try{await b(I)}catch(C){console.error("Error deleting news:",C),alert("Failed to delete article. Please try again.")}},A=()=>{r(null),o(!0)};return s?l.jsx(Lz,{news:t,onClose:()=>{o(!1),r(null)},onSave:async I=>{try{t?await v(t.id,I):await y(I),o(!1),r(null)}catch(C){console.error("Error saving news:",C),alert("Failed to save article. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"News Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Create and manage news articles for medical students"})]}),l.jsxs(te,{onClick:A,className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-4 w-4"}),"Create Article"]})]}),l.jsx(ve,{children:l.jsx(xe,{className:"pt-6",children:l.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ce,{placeholder:"Search articles by title or tags...",value:n,onChange:I=>e(I.target.value),className:"pl-10"})]})})})}),p&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(na,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading news articles..."})]})}),g&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading news"}),l.jsx("p",{className:"text-muted-foreground",children:g})]})}),!p&&!g&&l.jsx("div",{className:"space-y-4",children:S.map(I=>l.jsx(ve,{className:"hover:shadow-md transition-shadow",children:l.jsx(xe,{className:"pt-6",children:l.jsxs("div",{className:"flex gap-4",children:[I.imageUrl&&l.jsx("img",{src:I.imageUrl,alt:I.title,className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:I.title}),I.isPinned&&l.jsx(OS,{className:"h-4 w-4 text-yellow-500"})]}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:I.content}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:I.tags.map(C=>l.jsxs(nn,{variant:"secondary",className:"text-xs",children:[l.jsx(Qu,{className:"h-3 w-3 mr-1"}),C]},C))}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ro,{className:"h-3 w-3"}),I.authorName]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(PS,{className:"h-3 w-3"}),I.createdAt.toLocaleDateString()]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Nk,{className:"h-3 w-3"}),I.viewsCount," views"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(te,{variant:"ghost",size:"icon",onClick:()=>x(I),children:l.jsx(Ai,{className:"h-4 w-4"})}),l.jsx(te,{variant:"ghost",size:"icon",onClick:()=>_(I.id),className:"text-destructive hover:text-destructive",children:l.jsx(Vn,{className:"h-4 w-4"})})]})]})})]})})},I.id))}),!p&&!g&&S.length===0&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(Wf,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No articles match your search criteria.":"Start by creating your first news article."}),l.jsxs(te,{onClick:A,children:[l.jsx(en,{className:"h-4 w-4 mr-2"}),"Create Article"]})]})})]})}function Fz(n,e){const t=E.createContext(e),r=o=>{const{children:c,...u}=o,h=E.useMemo(()=>u,Object.values(u));return l.jsx(t.Provider,{value:h,children:c})};r.displayName=n+"Provider";function s(o){const c=E.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${n}\``)}return[r,s]}function Vz(n,e=[]){let t=[];function r(o,c){const u=E.createContext(c),h=t.length;t=[...t,c];const p=y=>{var A;const{scope:v,children:b,...S}=y,x=((A=v==null?void 0:v[n])==null?void 0:A[h])||u,_=E.useMemo(()=>S,Object.values(S));return l.jsx(x.Provider,{value:_,children:b})};p.displayName=o+"Provider";function g(y,v){var x;const b=((x=v==null?void 0:v[n])==null?void 0:x[h])||u,S=E.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[p,g]}const s=()=>{const o=t.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[n])||o;return E.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,Uz(s,...e)]}function Uz(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const c=r.reduce((u,{useScope:h,scopeName:p})=>{const y=h(o)[`__scope${p}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var py="focusScope.autoFocusOnMount",my="focusScope.autoFocusOnUnmount",_1={bubbles:!1,cancelable:!0},zz="FocusScope",gw=E.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...c}=n,[u,h]=E.useState(null),p=Tn(s),g=Tn(o),y=E.useRef(null),v=Tt(e,x=>h(x)),b=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let x=function(C){if(b.paused||!u)return;const M=C.target;u.contains(M)?y.current=M:xo(y.current,{select:!0})},_=function(C){if(b.paused||!u)return;const M=C.relatedTarget;M!==null&&(u.contains(M)||xo(y.current,{select:!0}))},A=function(C){if(document.activeElement===document.body)for(const U of C)U.removedNodes.length>0&&xo(u)};document.addEventListener("focusin",x),document.addEventListener("focusout",_);const I=new MutationObserver(A);return u&&I.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",_),I.disconnect()}}},[r,u,b.paused]),E.useEffect(()=>{if(u){b1.add(b);const x=document.activeElement;if(!u.contains(x)){const A=new CustomEvent(py,_1);u.addEventListener(py,p),u.dispatchEvent(A),A.defaultPrevented||($z(Kz(GI(u)),{select:!0}),document.activeElement===x&&xo(u))}return()=>{u.removeEventListener(py,p),setTimeout(()=>{const A=new CustomEvent(my,_1);u.addEventListener(my,g),u.dispatchEvent(A),A.defaultPrevented||xo(x??document.body,{select:!0}),u.removeEventListener(my,g),b1.remove(b)},0)}}},[u,p,g,b]);const S=E.useCallback(x=>{if(!t&&!r||b.paused)return;const _=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,A=document.activeElement;if(_&&A){const I=x.currentTarget,[C,M]=Bz(I);C&&M?!x.shiftKey&&A===M?(x.preventDefault(),t&&xo(C,{select:!0})):x.shiftKey&&A===C&&(x.preventDefault(),t&&xo(M,{select:!0})):A===I&&x.preventDefault()}},[t,r,b.paused]);return l.jsx(Ge.div,{tabIndex:-1,...c,ref:v,onKeyDown:S})});gw.displayName=zz;function $z(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(xo(r,{select:e}),document.activeElement!==t)return}function Bz(n){const e=GI(n),t=E1(e,n),r=E1(e.reverse(),n);return[t,r]}function GI(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function E1(n,e){for(const t of n)if(!qz(t,{upTo:e}))return t}function qz(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Wz(n){return n instanceof HTMLInputElement&&"select"in n}function xo(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Wz(n)&&e&&n.select()}}var b1=Hz();function Hz(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=S1(n,e),n.unshift(e)},remove(e){var t;n=S1(n,e),(t=n[0])==null||t.resume()}}}function S1(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function Kz(n){return n.filter(e=>e.tagName!=="A")}function Gz(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var im=n=>{const{present:e,children:t}=n,r=Qz(e),s=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),o=Tt(r.ref,Yz(s));return typeof t=="function"||r.isPresent?E.cloneElement(s,{ref:o}):null};im.displayName="Presence";function Qz(n){const[e,t]=E.useState(),r=E.useRef({}),s=E.useRef(n),o=E.useRef("none"),c=n?"mounted":"unmounted",[u,h]=Gz(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const p=wf(r.current);o.current=u==="mounted"?p:"none"},[u]),Xt(()=>{const p=r.current,g=s.current;if(g!==n){const v=o.current,b=wf(p);n?h("MOUNT"):b==="none"||(p==null?void 0:p.display)==="none"?h("UNMOUNT"):h(g&&v!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Xt(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,y=b=>{const x=wf(r.current).includes(b.animationName);if(b.target===e&&x&&(h("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},v=b=>{b.target===e&&(o.current=wf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(p=>{p&&(r.current=getComputedStyle(p)),t(p)},[])}}function wf(n){return(n==null?void 0:n.animationName)||"none"}function Yz(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var gy=0;function Xz(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??N1()),document.body.insertAdjacentElement("beforeend",n[1]??N1()),gy++,()=>{gy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),gy--}},[])}function N1(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var nd="right-scroll-bar-position",rd="width-before-scroll-bar",Jz="with-scroll-bars-hidden",Zz="--removed-body-scroll-bar-size";function yy(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function e9(n,e){var t=E.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var t9=typeof window<"u"?E.useLayoutEffect:E.useEffect,T1=new WeakMap;function QI(n,e){var t=e9(null,function(r){return n.forEach(function(s){return yy(s,r)})});return t9(function(){var r=T1.get(t);if(r){var s=new Set(r),o=new Set(n),c=t.current;s.forEach(function(u){o.has(u)||yy(u,null)}),o.forEach(function(u){s.has(u)||yy(u,c)})}T1.set(t,n)},[n]),t}function n9(n){return n}function r9(n,e){e===void 0&&(e=n9);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var c=e(o,r);return t.push(c),function(){t=t.filter(function(u){return u!==c})}},assignSyncMedium:function(o){for(r=!0;t.length;){var c=t;t=[],c.forEach(o)}t={push:function(u){return o(u)},filter:function(){return t}}},assignMedium:function(o){r=!0;var c=[];if(t.length){var u=t;t=[],u.forEach(o),c=t}var h=function(){var g=c;c=[],g.forEach(o)},p=function(){return Promise.resolve().then(h)};p(),t={push:function(g){c.push(g),p()},filter:function(g){return c=c.filter(g),t}}}};return s}function YI(n){n===void 0&&(n={});var e=r9(null);return e.options=Xn({async:!0,ssr:!1},n),e}var XI=function(n){var e=n.sideCar,t=qc(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,Xn({},t))};XI.isSideCarExport=!0;function JI(n,e){return n.useMedium(e),XI}var ZI=YI(),vy=function(){},om=E.forwardRef(function(n,e){var t=E.useRef(null),r=E.useState({onScrollCapture:vy,onWheelCapture:vy,onTouchMoveCapture:vy}),s=r[0],o=r[1],c=n.forwardProps,u=n.children,h=n.className,p=n.removeScrollBar,g=n.enabled,y=n.shards,v=n.sideCar,b=n.noIsolation,S=n.inert,x=n.allowPinchZoom,_=n.as,A=_===void 0?"div":_,I=n.gapMode,C=qc(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=v,U=QI([t,e]),$=Xn(Xn({},C),s);return E.createElement(E.Fragment,null,g&&E.createElement(M,{sideCar:ZI,removeScrollBar:p,shards:y,noIsolation:b,inert:S,setCallbacks:o,allowPinchZoom:!!x,lockRef:t,gapMode:I}),c?E.cloneElement(E.Children.only(u),Xn(Xn({},$),{ref:U})):E.createElement(A,Xn({},$,{className:h,ref:U}),u))});om.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};om.classNames={fullWidth:rd,zeroRight:nd};var s9=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function i9(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=s9();return e&&n.setAttribute("nonce",e),n}function o9(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function a9(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var l9=function(){var n=0,e=null;return{add:function(t){n==0&&(e=i9())&&(o9(e,t),a9(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},c9=function(){var n=l9();return function(e,t){E.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},yw=function(){var n=c9(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},u9={left:0,top:0,right:0,gap:0},xy=function(n){return parseInt(n||"",10)||0},d9=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[xy(t),xy(r),xy(s)]},h9=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return u9;var e=d9(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},f9=yw(),uc="data-scroll-locked",p9=function(n,e,t,r){var s=n.left,o=n.top,c=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(Jz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(uc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(nd,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(rd,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(nd," .").concat(nd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(rd," .").concat(rd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(uc,`] {
    `).concat(Zz,": ").concat(u,`px;
  }
`)},C1=function(){var n=parseInt(document.body.getAttribute(uc)||"0",10);return isFinite(n)?n:0},m9=function(){E.useEffect(function(){return document.body.setAttribute(uc,(C1()+1).toString()),function(){var n=C1()-1;n<=0?document.body.removeAttribute(uc):document.body.setAttribute(uc,n.toString())}},[])},ej=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;m9();var o=E.useMemo(function(){return h9(s)},[s]);return E.createElement(f9,{styles:p9(o,!e,s,t?"":"!important")})},kv=!1;if(typeof window<"u")try{var _f=Object.defineProperty({},"passive",{get:function(){return kv=!0,!0}});window.addEventListener("test",_f,_f),window.removeEventListener("test",_f,_f)}catch{kv=!1}var Gl=kv?{passive:!1}:!1,g9=function(n){return n.tagName==="TEXTAREA"},tj=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!g9(n)&&t[e]==="visible")},y9=function(n){return tj(n,"overflowY")},v9=function(n){return tj(n,"overflowX")},I1=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=nj(n,r);if(s){var o=rj(n,r),c=o[1],u=o[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},x9=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},w9=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},nj=function(n,e){return n==="v"?y9(e):v9(e)},rj=function(n,e){return n==="v"?x9(e):w9(e)},_9=function(n,e){return n==="h"&&e==="rtl"?-1:1},E9=function(n,e,t,r,s){var o=_9(n,window.getComputedStyle(e).direction),c=o*r,u=t.target,h=e.contains(u),p=!1,g=c>0,y=0,v=0;do{var b=rj(n,u),S=b[0],x=b[1],_=b[2],A=x-_-o*S;(S||A)&&nj(n,u)&&(y+=A,v+=S),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(y)<1||!g&&Math.abs(v)<1)&&(p=!0),p},Ef=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},j1=function(n){return[n.deltaX,n.deltaY]},A1=function(n){return n&&"current"in n?n.current:n},b9=function(n,e){return n[0]===e[0]&&n[1]===e[1]},S9=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},N9=0,Ql=[];function T9(n){var e=E.useRef([]),t=E.useRef([0,0]),r=E.useRef(),s=E.useState(N9++)[0],o=E.useState(yw)[0],c=E.useRef(n);E.useEffect(function(){c.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var x=dT([n.lockRef.current],(n.shards||[]).map(A1),!0).filter(Boolean);return x.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=E.useCallback(function(x,_){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!c.current.allowPinchZoom;var A=Ef(x),I=t.current,C="deltaX"in x?x.deltaX:I[0]-A[0],M="deltaY"in x?x.deltaY:I[1]-A[1],U,$=x.target,P=Math.abs(C)>Math.abs(M)?"h":"v";if("touches"in x&&P==="h"&&$.type==="range")return!1;var k=I1(P,$);if(!k)return!0;if(k?U=P:(U=P==="v"?"h":"v",k=I1(P,$)),!k)return!1;if(!r.current&&"changedTouches"in x&&(C||M)&&(r.current=U),!U)return!0;var D=r.current||U;return E9(D,_,x,D==="h"?C:M)},[]),h=E.useCallback(function(x){var _=x;if(!(!Ql.length||Ql[Ql.length-1]!==o)){var A="deltaY"in _?j1(_):Ef(_),I=e.current.filter(function(U){return U.name===_.type&&(U.target===_.target||_.target===U.shadowParent)&&b9(U.delta,A)})[0];if(I&&I.should){_.cancelable&&_.preventDefault();return}if(!I){var C=(c.current.shards||[]).map(A1).filter(Boolean).filter(function(U){return U.contains(_.target)}),M=C.length>0?u(_,C[0]):!c.current.noIsolation;M&&_.cancelable&&_.preventDefault()}}},[]),p=E.useCallback(function(x,_,A,I){var C={name:x,delta:_,target:A,should:I,shadowParent:C9(A)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(M){return M!==C})},1)},[]),g=E.useCallback(function(x){t.current=Ef(x),r.current=void 0},[]),y=E.useCallback(function(x){p(x.type,j1(x),x.target,u(x,n.lockRef.current))},[]),v=E.useCallback(function(x){p(x.type,Ef(x),x.target,u(x,n.lockRef.current))},[]);E.useEffect(function(){return Ql.push(o),n.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,Gl),document.addEventListener("touchmove",h,Gl),document.addEventListener("touchstart",g,Gl),function(){Ql=Ql.filter(function(x){return x!==o}),document.removeEventListener("wheel",h,Gl),document.removeEventListener("touchmove",h,Gl),document.removeEventListener("touchstart",g,Gl)}},[]);var b=n.removeScrollBar,S=n.inert;return E.createElement(E.Fragment,null,S?E.createElement(o,{styles:S9(s)}):null,b?E.createElement(ej,{gapMode:n.gapMode}):null)}function C9(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const I9=JI(ZI,T9);var sj=E.forwardRef(function(n,e){return E.createElement(om,Xn({},n,{ref:e,sideCar:I9}))});sj.classNames=om.classNames;var j9=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Yl=new WeakMap,bf=new WeakMap,Sf={},wy=0,ij=function(n){return n&&(n.host||ij(n.parentNode))},A9=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=ij(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},P9=function(n,e,t,r){var s=A9(e,Array.isArray(n)?n:[n]);Sf[t]||(Sf[t]=new WeakMap);var o=Sf[t],c=[],u=new Set,h=new Set(s),p=function(y){!y||u.has(y)||(u.add(y),p(y.parentNode))};s.forEach(p);var g=function(y){!y||h.has(y)||Array.prototype.forEach.call(y.children,function(v){if(u.has(v))g(v);else try{var b=v.getAttribute(r),S=b!==null&&b!=="false",x=(Yl.get(v)||0)+1,_=(o.get(v)||0)+1;Yl.set(v,x),o.set(v,_),c.push(v),x===1&&S&&bf.set(v,!0),_===1&&v.setAttribute(t,"true"),S||v.setAttribute(r,"true")}catch(A){console.error("aria-hidden: cannot operate on ",v,A)}})};return g(e),u.clear(),wy++,function(){c.forEach(function(y){var v=Yl.get(y)-1,b=o.get(y)-1;Yl.set(y,v),o.set(y,b),v||(bf.has(y)||y.removeAttribute(r),bf.delete(y)),b||y.removeAttribute(t)}),wy--,wy||(Yl=new WeakMap,Yl=new WeakMap,bf=new WeakMap,Sf={})}},oj=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=j9(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),P9(r,s,t,"aria-hidden")):function(){return null}},vw="Dialog",[aj,c8]=Vz(vw),[R9,Ns]=aj(vw),lj=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:o,modal:c=!0}=n,u=E.useRef(null),h=E.useRef(null),[p=!1,g]=Ha({prop:r,defaultProp:s,onChange:o});return l.jsx(R9,{scope:e,triggerRef:u,contentRef:h,contentId:Do(),titleId:Do(),descriptionId:Do(),open:p,onOpenChange:g,onOpenToggle:E.useCallback(()=>g(y=>!y),[g]),modal:c,children:t})};lj.displayName=vw;var cj="DialogTrigger",uj=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ns(cj,t),o=Tt(e,s.triggerRef);return l.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":_w(s.open),...r,ref:o,onClick:$e(n.onClick,s.onOpenToggle)})});uj.displayName=cj;var xw="DialogPortal",[k9,dj]=aj(xw,{forceMount:void 0}),hj=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,o=Ns(xw,e);return l.jsx(k9,{scope:e,forceMount:t,children:E.Children.map(r,c=>l.jsx(im,{present:t||o.open,children:l.jsx(gN,{asChild:!0,container:s,children:c})}))})};hj.displayName=xw;var wp="DialogOverlay",fj=E.forwardRef((n,e)=>{const t=dj(wp,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,o=Ns(wp,n.__scopeDialog);return o.modal?l.jsx(im,{present:r||o.open,children:l.jsx(O9,{...s,ref:e})}):null});fj.displayName=wp;var O9=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ns(wp,t);return l.jsx(sj,{as:Wa,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(Ge.div,{"data-state":_w(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),nl="DialogContent",pj=E.forwardRef((n,e)=>{const t=dj(nl,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,o=Ns(nl,n.__scopeDialog);return l.jsx(im,{present:r||o.open,children:o.modal?l.jsx(D9,{...s,ref:e}):l.jsx(L9,{...s,ref:e})})});pj.displayName=nl;var D9=E.forwardRef((n,e)=>{const t=Ns(nl,n.__scopeDialog),r=E.useRef(null),s=Tt(e,t.contentRef,r);return E.useEffect(()=>{const o=r.current;if(o)return oj(o)},[]),l.jsx(mj,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e(n.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:$e(n.onPointerDownOutside,o=>{const c=o.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&o.preventDefault()}),onFocusOutside:$e(n.onFocusOutside,o=>o.preventDefault())})}),L9=E.forwardRef((n,e)=>{const t=Ns(nl,n.__scopeDialog),r=E.useRef(!1),s=E.useRef(!1);return l.jsx(mj,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,u;(c=n.onCloseAutoFocus)==null||c.call(n,o),o.defaultPrevented||(r.current||(u=t.triggerRef.current)==null||u.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var h,p;(h=n.onInteractOutside)==null||h.call(n,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=o.target;((p=t.triggerRef.current)==null?void 0:p.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),mj=E.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...c}=n,u=Ns(nl,t),h=E.useRef(null),p=Tt(e,h);return Xz(),l.jsxs(l.Fragment,{children:[l.jsx(gw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:l.jsx(Zv,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":_w(u.open),...c,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(M9,{titleId:u.titleId}),l.jsx(V9,{contentRef:h,descriptionId:u.descriptionId})]})]})}),ww="DialogTitle",gj=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ns(ww,t);return l.jsx(Ge.h2,{id:s.titleId,...r,ref:e})});gj.displayName=ww;var yj="DialogDescription",vj=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ns(yj,t);return l.jsx(Ge.p,{id:s.descriptionId,...r,ref:e})});vj.displayName=yj;var xj="DialogClose",wj=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ns(xj,t);return l.jsx(Ge.button,{type:"button",...r,ref:e,onClick:$e(n.onClick,()=>s.onOpenChange(!1))})});wj.displayName=xj;function _w(n){return n?"open":"closed"}var _j="DialogTitleWarning",[u8,Ej]=Fz(_j,{contentName:nl,titleName:ww,docsSlug:"dialog"}),M9=({titleId:n})=>{const e=Ej(_j),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},F9="DialogDescriptionWarning",V9=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ej(F9).contentName}}.`;return E.useEffect(()=>{var o;const s=(o=n.current)==null?void 0:o.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},U9=lj,z9=uj,$9=hj,bj=fj,Sj=pj,Nj=gj,Tj=vj,Cj=wj;const B9=U9,q9=z9,W9=$9,H9=Cj,Ij=E.forwardRef(({className:n,...e},t)=>l.jsx(bj,{ref:t,className:We("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));Ij.displayName=bj.displayName;const jj=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(W9,{children:[l.jsx(Ij,{}),l.jsxs(Sj,{ref:r,className:We("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,l.jsxs(Cj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(Sc,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));jj.displayName=Sj.displayName;const Aj=({className:n,...e})=>l.jsx("div",{className:We("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});Aj.displayName="DialogHeader";const Pj=({className:n,...e})=>l.jsx("div",{className:We("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});Pj.displayName="DialogFooter";const Rj=E.forwardRef(({className:n,...e},t)=>l.jsx(Nj,{ref:t,className:We("text-lg font-semibold leading-none tracking-tight",n),...e}));Rj.displayName=Nj.displayName;const kj=E.forwardRef(({className:n,...e},t)=>l.jsx(Tj,{ref:t,className:We("text-sm text-muted-foreground",n),...e}));kj.displayName=Tj.displayName;function Ew({quiz:n,onClose:e,onSave:t}){const[r,s]=E.useState({title:"",description:"",timeLimit:30,passingScore:70,questions:[],type:"multiple_choice"}),[o,c]=E.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",imageUrl:"",weight:1}),[u,h]=E.useState(!1);E.useEffect(()=>{n&&s({title:n.title||"",description:n.description||"",timeLimit:n.timeLimit||30,passingScore:n.passingScore||70,questions:n.questions||[],type:n.type||"multiple_choice"})},[n]);const p=async x=>{x.preventDefault(),h(!0);try{const _={...r,...n?{}:{createdAt:new Date,createdBy:"Current User"}};_.type||(_.type="multiple_choice"),t(_)}catch(_){console.error("Error saving quiz:",_)}finally{h(!1)}},g=()=>{var A;const x=r.type==="flashcard",_=o.question.trim();if(x){const I=o.options&&String(o.options[0]).trim()||o.answer;if(_&&I){const C={...o,options:[String(((A=o.options)==null?void 0:A[0])||o.answer||"").trim()],correctAnswer:0};s(M=>({...M,questions:[...M.questions,C]})),c({question:"",options:[""],correctAnswer:0,explanation:"",imageUrl:"",weight:1})}return}_&&Array.isArray(o.options)&&o.options.filter(I=>String(I).trim()).length>=2&&typeof o.correctAnswer=="number"&&String(o.options[o.correctAnswer]||"").trim()&&(s(I=>({...I,questions:[...I.questions,{...o}]})),c({question:"",options:["","","",""],correctAnswer:0,explanation:"",imageUrl:"",weight:1}))},y=x=>{s(_=>({..._,questions:_.questions.filter((A,I)=>I!==x)}))},v=(x,_)=>{const A=[...o.options||[]];A[x]=_,c(I=>({...I,options:A}))},b=()=>{c(x=>({...x,options:[...x.options||[],""]}))},S=x=>{c(_=>{const A=[..._.options||[]];A.splice(x,1);let I=_.correctAnswer;return I>=A.length&&(I=Math.max(0,A.length-1)),{..._,options:A,correctAnswer:I}})};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(te,{variant:"ghost",onClick:e,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Quiz":"Create Quiz"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the quiz details and questions":"Create a new quiz for students"})]})]})}),l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsxs(tt,{className:"flex items-center gap-2",children:[l.jsx(ki,{className:"h-5 w-5"}),"Quiz Information"]}),l.jsx(kt,{children:"Basic information about the quiz"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"title",children:"Quiz Title *"}),l.jsx(Ce,{id:"title",placeholder:"Enter quiz title...",value:r.title,onChange:x=>s(_=>({..._,title:x.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"description",children:"Description"}),l.jsx(ei,{id:"description",placeholder:"Describe what this quiz covers...",value:r.description,onChange:x=>s(_=>({..._,description:x.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Pe,{htmlFor:"timeLimit",className:"flex items-center gap-2",children:[l.jsx(Bf,{className:"h-4 w-4"}),"Time Limit (minutes)"]}),l.jsx(Ce,{id:"timeLimit",type:"number",min:"1",value:r.timeLimit,onChange:x=>s(_=>({..._,timeLimit:parseInt(x.target.value)||30}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Pe,{htmlFor:"passingScore",className:"flex items-center gap-2",children:[l.jsx(Rk,{className:"h-4 w-4"}),"Passing Score (%)"]}),l.jsx(Ce,{id:"passingScore",type:"number",min:"0",max:"100",value:r.passingScore,onChange:x=>s(_=>({..._,passingScore:parseInt(x.target.value)||70}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"quizType",children:"Quiz Type"}),l.jsxs("select",{id:"quizType",value:r.type||"multiple_choice",onChange:x=>s(_=>({..._,type:x.target.value})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),l.jsx("option",{value:"flashcard",children:"Flashcard"})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how this quiz will be presented to students."})]})]})]}),l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Add Question"}),l.jsx(kt,{children:"Create multiple choice questions for the quiz"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"question",children:"Question"}),l.jsx(ei,{id:"question",placeholder:"Enter your question...",value:o.question,onChange:x=>c(_=>({..._,question:x.target.value})),rows:3})]}),l.jsx("div",{className:"space-y-2",children:r.type==="flashcard"?l.jsxs(l.Fragment,{children:[l.jsx(Pe,{children:"Correct Answer"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ce,{placeholder:"Correct answer",value:o.options[0]??o.answer??"",onChange:x=>{c(_=>({..._,options:[x.target.value]}))}}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"For flashcards enter the correct answer (single). Use [[answer]] in the question to create blanks."})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(Pe,{children:"Answer Options"}),l.jsxs("div",{className:"space-y-2",children:[o.options.map((x,_)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l.jsx(Pe,{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-sm",children:String.fromCharCode(65+_)}),l.jsx(Ce,{placeholder:`Option ${String.fromCharCode(65+_)}`,value:x,onChange:A=>v(_,A.target.value),className:o.correctAnswer===_?"ring-2 ring-green-500":""})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(te,{type:"button",variant:o.correctAnswer===_?"default":"outline",size:"sm",onClick:()=>c(A=>({...A,correctAnswer:_})),children:o.correctAnswer===_?"Correct":"Mark Correct"}),o.options.length>2&&l.jsx(te,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(_),children:"Remove"})]})]},_)),l.jsx("div",{children:l.jsx(te,{type:"button",variant:"outline",onClick:b,className:"mt-2",children:"Add Option"})})]})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"explanation",children:"Explanation (Optional)"}),l.jsx(ei,{id:"explanation",placeholder:"Explain why this is the correct answer...",value:o.explanation||"",onChange:x=>c(_=>({..._,explanation:x.target.value})),rows:3}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"This explanation will be shown to students after they answer the question"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(Ce,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:o.imageUrl,onChange:x=>c(_=>({..._,imageUrl:x.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"weight",children:"Question Weight"}),l.jsx(Ce,{id:"weight",type:"number",min:1,value:o.weight,onChange:x=>c(_=>({..._,weight:parseFloat(x.target.value)||1}))})]}),l.jsxs(te,{type:"button",onClick:g,className:"w-full",children:[l.jsx(en,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),r.questions.length>0&&l.jsxs(ve,{children:[l.jsx(Xe,{children:l.jsxs(tt,{children:["Quiz Questions (",r.questions.length,")"]})}),l.jsx(xe,{children:l.jsx("div",{className:"space-y-4",children:r.questions.map((x,_)=>l.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("p",{className:"font-medium",children:[_+1,". ",x.question]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Pe,{className:"text-sm",children:"Weight"}),l.jsx(Ce,{type:"number",min:1,value:x.weight||1,onChange:A=>{const I=parseFloat(A.target.value)||1;s(C=>({...C,questions:C.questions.map((M,U)=>U===_?{...M,weight:I}:M)}))},className:"w-20 text-sm"})]})]}),l.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:x.options.map((A,I)=>l.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${x.correctAnswer===I?"bg-green-100 text-green-800":"bg-secondary/50"}`,children:[l.jsx("span",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+I)}),l.jsx("span",{className:"text-sm",children:A}),x.correctAnswer===I&&l.jsx(nn,{variant:"outline",className:"ml-auto text-xs bg-green-200",children:"Correct"})]},I))}),x.explanation&&l.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:l.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[l.jsx("span",{className:"font-semibold",children:"Explanation:"})," ",x.explanation]})})]}),l.jsx("div",{className:"flex flex-col items-end gap-2",children:l.jsx(te,{type:"button",variant:"ghost",size:"icon",onClick:()=>y(_),className:"text-destructive hover:text-destructive",children:l.jsx(Vn,{className:"h-4 w-4"})})})]})},_))})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(te,{type:"submit",disabled:u||r.questions.length===0,children:[l.jsx(ra,{className:"h-4 w-4 mr-2"}),u?"Saving...":n?"Update Quiz":"Create Quiz"]})]})]})]})}function Oj({year:n,yearType:e,onClose:t,onSave:r}){const[s,o]=E.useState({name:"",imageUrl:"",hours:3}),[c,u]=E.useState(!1),h=async p=>{p.preventDefault(),u(!0);try{const g={name:s.name,imageUrl:s.imageUrl||"",hours:s.hours||3,createdAt:new Date};r(g)}catch(g){console.error("Error saving subject:",g)}finally{u(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(te,{variant:"ghost",onClick:t,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Add Subject to Year ",n]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e==="basic"?l.jsx(Ku,{className:"h-4 w-4 text-blue-600"}):l.jsx(Gu,{className:"h-4 w-4 text-red-600"}),l.jsxs("p",{className:"text-muted-foreground",children:["Adding to ",e==="basic"?"Basic":"Clinical"," Years â€¢ Year ",n]})]})]})]})}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsx(ve,{className:`border-l-4 ${e==="basic"?"border-l-blue-500 bg-blue-50/50":"border-l-red-500 bg-red-50/50"}`,children:l.jsx(xe,{className:"pt-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[e==="basic"?l.jsx(Ku,{className:"h-8 w-8 text-blue-600"}):l.jsx(Gu,{className:"h-8 w-8 text-red-600"}),l.jsxs("div",{children:[l.jsxs("h3",{className:"font-semibold text-lg",children:["Year ",n]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:e==="basic"?"Basic Years":"Clinical Years"})]})]})})}),l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsxs(tt,{className:"flex items-center gap-2",children:[e==="basic"?l.jsx(Ku,{className:"h-5 w-5 text-blue-600"}):l.jsx(Gu,{className:"h-5 w-5 text-red-600"}),"Subject Information"]}),l.jsx(kt,{children:"Basic information about the subject"})]}),l.jsx(xe,{className:"space-y-4",children:l.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"year",children:"Year"}),l.jsx(Ce,{id:"year",value:`Year ${n} (${e==="basic"?"Basic":"Clinical"})`,disabled:!0,className:"bg-muted"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"name",children:"Subject Name *"}),l.jsx(Ce,{id:"name",placeholder:"e.g., Anatomy & Physiology",value:s.name,onChange:p=>o(g=>({...g,name:p.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"hours",children:"Credit Hours"}),l.jsx(Ce,{id:"hours",type:"number",placeholder:"3",value:s.hours,onChange:p=>o(g=>({...g,hours:parseInt(p.target.value)||3})),min:"1",max:"12"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(Ce,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:s.imageUrl,onChange:p=>o(g=>({...g,imageUrl:p.target.value}))})]})]})})]}),s.name&&l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Preview"}),l.jsxs(kt,{children:["How the subject will appear in Year ",n]})]}),l.jsx(xe,{children:l.jsxs("div",{className:"p-4 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.imageUrl?l.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-8 h-8 object-cover rounded",onError:p=>{p.currentTarget.style.display="none"}}):l.jsx(gs,{className:"h-5 w-5 text-primary"}),l.jsx("h3",{className:"font-semibold text-lg",children:s.name})]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Year ",n," â€¢ ",e," years"]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(te,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),l.jsxs(te,{type:"submit",disabled:c,children:[l.jsx(ra,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Subject"]})]})]})]})}function P1(n,[e,t]){return Math.min(t,Math.max(e,n))}var K9=E.createContext(void 0);function bw(n){const e=E.useContext(K9);return n||e||"ltr"}var G9="DismissableLayer",Ov="dismissableLayer.update",Q9="dismissableLayer.pointerDownOutside",Y9="dismissableLayer.focusOutside",R1,Dj=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lj=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:c,onDismiss:u,...h}=n,p=E.useContext(Dj),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=Tt(e,P=>y(P)),x=Array.from(p.layers),[_]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),A=x.indexOf(_),I=g?x.indexOf(g):-1,C=p.layersWithOutsidePointerEventsDisabled.size>0,M=I>=A,U=Z9(P=>{const k=P.target,D=[...p.branches].some(O=>O.contains(k));!M||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},v),$=e$(P=>{const k=P.target;[...p.branches].some(O=>O.contains(k))||(o==null||o(P),c==null||c(P),P.defaultPrevented||u==null||u())},v);return Hv(P=>{I===p.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},v),E.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(R1=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),k1(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=R1)}},[g,v,t,p]),E.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),k1())},[g,p]),E.useEffect(()=>{const P=()=>b({});return document.addEventListener(Ov,P),()=>document.removeEventListener(Ov,P)},[]),l.jsx(Ge.div,{...h,ref:S,style:{pointerEvents:C?M?"auto":"none":void 0,...n.style},onFocusCapture:$e(n.onFocusCapture,$.onFocusCapture),onBlurCapture:$e(n.onBlurCapture,$.onBlurCapture),onPointerDownCapture:$e(n.onPointerDownCapture,U.onPointerDownCapture)})});Lj.displayName=G9;var X9="DismissableLayerBranch",J9=E.forwardRef((n,e)=>{const t=E.useContext(Dj),r=E.useRef(null),s=Tt(e,r);return E.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),l.jsx(Ge.div,{...n,ref:s})});J9.displayName=X9;function Z9(n,e=globalThis==null?void 0:globalThis.document){const t=Tn(n),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const o=u=>{if(u.target&&!r.current){let h=function(){Mj(Q9,t,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function e$(n,e=globalThis==null?void 0:globalThis.document){const t=Tn(n),r=E.useRef(!1);return E.useEffect(()=>{const s=o=>{o.target&&!r.current&&Mj(Y9,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function k1(){const n=new CustomEvent(Ov);document.dispatchEvent(n)}function Mj(n,e,t,{discrete:r}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Sp(s,o):s.dispatchEvent(o)}var _y=0;function t$(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??O1()),document.body.insertAdjacentElement("beforeend",n[1]??O1()),_y++,()=>{_y===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),_y--}},[])}function O1(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",n}var n$="Portal",Fj=E.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,o]=E.useState(!1);Xt(()=>o(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?bp.createPortal(l.jsx(Ge.div,{...r,ref:e}),c):null});Fj.displayName=n$;var Vj=YI(),Ey=function(){},am=E.forwardRef(function(n,e){var t=E.useRef(null),r=E.useState({onScrollCapture:Ey,onWheelCapture:Ey,onTouchMoveCapture:Ey}),s=r[0],o=r[1],c=n.forwardProps,u=n.children,h=n.className,p=n.removeScrollBar,g=n.enabled,y=n.shards,v=n.sideCar,b=n.noIsolation,S=n.inert,x=n.allowPinchZoom,_=n.as,A=_===void 0?"div":_,I=n.gapMode,C=qc(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=v,U=QI([t,e]),$=Xn(Xn({},C),s);return E.createElement(E.Fragment,null,g&&E.createElement(M,{sideCar:Vj,removeScrollBar:p,shards:y,noIsolation:b,inert:S,setCallbacks:o,allowPinchZoom:!!x,lockRef:t,gapMode:I}),c?E.cloneElement(E.Children.only(u),Xn(Xn({},$),{ref:U})):E.createElement(A,Xn({},$,{className:h,ref:U}),u))});am.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};am.classNames={fullWidth:rd,zeroRight:nd};var Dv=!1;if(typeof window<"u")try{var Nf=Object.defineProperty({},"passive",{get:function(){return Dv=!0,!0}});window.addEventListener("test",Nf,Nf),window.removeEventListener("test",Nf,Nf)}catch{Dv=!1}var Xl=Dv?{passive:!1}:!1,r$=function(n){return n.tagName==="TEXTAREA"},Uj=function(n,e){var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!r$(n)&&t[e]==="visible")},s$=function(n){return Uj(n,"overflowY")},i$=function(n){return Uj(n,"overflowX")},D1=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=zj(n,r);if(s){var o=$j(n,r),c=o[1],u=o[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},o$=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},a$=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},zj=function(n,e){return n==="v"?s$(e):i$(e)},$j=function(n,e){return n==="v"?o$(e):a$(e)},l$=function(n,e){return n==="h"&&e==="rtl"?-1:1},c$=function(n,e,t,r,s){var o=l$(n,window.getComputedStyle(e).direction),c=o*r,u=t.target,h=e.contains(u),p=!1,g=c>0,y=0,v=0;do{var b=$j(n,u),S=b[0],x=b[1],_=b[2],A=x-_-o*S;(S||A)&&zj(n,u)&&(y+=A,v+=S),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(y)<1||!g&&Math.abs(v)<1)&&(p=!0),p},Tf=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},L1=function(n){return[n.deltaX,n.deltaY]},M1=function(n){return n&&"current"in n?n.current:n},u$=function(n,e){return n[0]===e[0]&&n[1]===e[1]},d$=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},h$=0,Jl=[];function f$(n){var e=E.useRef([]),t=E.useRef([0,0]),r=E.useRef(),s=E.useState(h$++)[0],o=E.useState(yw)[0],c=E.useRef(n);E.useEffect(function(){c.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var x=dT([n.lockRef.current],(n.shards||[]).map(M1),!0).filter(Boolean);return x.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=E.useCallback(function(x,_){if("touches"in x&&x.touches.length===2)return!c.current.allowPinchZoom;var A=Tf(x),I=t.current,C="deltaX"in x?x.deltaX:I[0]-A[0],M="deltaY"in x?x.deltaY:I[1]-A[1],U,$=x.target,P=Math.abs(C)>Math.abs(M)?"h":"v";if("touches"in x&&P==="h"&&$.type==="range")return!1;var k=D1(P,$);if(!k)return!0;if(k?U=P:(U=P==="v"?"h":"v",k=D1(P,$)),!k)return!1;if(!r.current&&"changedTouches"in x&&(C||M)&&(r.current=U),!U)return!0;var D=r.current||U;return c$(D,_,x,D==="h"?C:M)},[]),h=E.useCallback(function(x){var _=x;if(!(!Jl.length||Jl[Jl.length-1]!==o)){var A="deltaY"in _?L1(_):Tf(_),I=e.current.filter(function(U){return U.name===_.type&&(U.target===_.target||_.target===U.shadowParent)&&u$(U.delta,A)})[0];if(I&&I.should){_.cancelable&&_.preventDefault();return}if(!I){var C=(c.current.shards||[]).map(M1).filter(Boolean).filter(function(U){return U.contains(_.target)}),M=C.length>0?u(_,C[0]):!c.current.noIsolation;M&&_.cancelable&&_.preventDefault()}}},[]),p=E.useCallback(function(x,_,A,I){var C={name:x,delta:_,target:A,should:I,shadowParent:p$(A)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(M){return M!==C})},1)},[]),g=E.useCallback(function(x){t.current=Tf(x),r.current=void 0},[]),y=E.useCallback(function(x){p(x.type,L1(x),x.target,u(x,n.lockRef.current))},[]),v=E.useCallback(function(x){p(x.type,Tf(x),x.target,u(x,n.lockRef.current))},[]);E.useEffect(function(){return Jl.push(o),n.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,Xl),document.addEventListener("touchmove",h,Xl),document.addEventListener("touchstart",g,Xl),function(){Jl=Jl.filter(function(x){return x!==o}),document.removeEventListener("wheel",h,Xl),document.removeEventListener("touchmove",h,Xl),document.removeEventListener("touchstart",g,Xl)}},[]);var b=n.removeScrollBar,S=n.inert;return E.createElement(E.Fragment,null,S?E.createElement(o,{styles:d$(s)}):null,b?E.createElement(ej,{gapMode:n.gapMode}):null)}function p$(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const m$=JI(Vj,f$);var Bj=E.forwardRef(function(n,e){return E.createElement(am,Xn({},n,{ref:e,sideCar:m$}))});Bj.classNames=am.classNames;var g$=[" ","Enter","ArrowUp","ArrowDown"],y$=[" ","Enter"],qd="Select",[lm,cm,v$]=Wv(qd),[Zc,d8]=Ui(qd,[v$,Ap]),um=Ap(),[x$,la]=Zc(qd),[w$,_$]=Zc(qd),qj=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:o,value:c,defaultValue:u,onValueChange:h,dir:p,name:g,autoComplete:y,disabled:v,required:b}=n,S=um(e),[x,_]=E.useState(null),[A,I]=E.useState(null),[C,M]=E.useState(!1),U=bw(p),[$=!1,P]=Ha({prop:r,defaultProp:s,onChange:o}),[k,D]=Ha({prop:c,defaultProp:u,onChange:h}),O=E.useRef(null),L=x?!!x.closest("form"):!0,[V,R]=E.useState(new Set),W=Array.from(V).map(K=>K.props.value).join(";");return l.jsx(fD,{...S,children:l.jsxs(x$,{required:b,scope:e,trigger:x,onTriggerChange:_,valueNode:A,onValueNodeChange:I,valueNodeHasChildren:C,onValueNodeHasChildrenChange:M,contentId:Do(),value:k,onValueChange:D,open:$,onOpenChange:P,dir:U,triggerPointerDownPosRef:O,disabled:v,children:[l.jsx(lm.Provider,{scope:e,children:l.jsx(w$,{scope:n.__scopeSelect,onNativeOptionAdd:E.useCallback(K=>{R(X=>new Set(X).add(K))},[]),onNativeOptionRemove:E.useCallback(K=>{R(X=>{const ie=new Set(X);return ie.delete(K),ie})},[]),children:t})}),L?l.jsxs(mA,{"aria-hidden":!0,required:b,tabIndex:-1,name:g,autoComplete:y,value:k,onChange:K=>D(K.target.value),disabled:v,children:[k===void 0?l.jsx("option",{value:""}):null,Array.from(V)]},W):null]})})};qj.displayName=qd;var Wj="SelectTrigger",Hj=E.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,o=um(t),c=la(Wj,t),u=c.disabled||r,h=Tt(e,c.onTriggerChange),p=cm(t),[g,y,v]=gA(S=>{const x=p().filter(I=>!I.disabled),_=x.find(I=>I.value===c.value),A=yA(x,S,_);A!==void 0&&c.onValueChange(A.value)}),b=()=>{u||(c.onOpenChange(!0),v())};return l.jsx(fN,{asChild:!0,...o,children:l.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":pA(c.value)?"":void 0,...s,ref:h,onClick:$e(s.onClick,S=>{S.currentTarget.focus()}),onPointerDown:$e(s.onPointerDown,S=>{const x=S.target;x.hasPointerCapture(S.pointerId)&&x.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&(b(),c.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)},S.preventDefault())}),onKeyDown:$e(s.onKeyDown,S=>{const x=g.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&y(S.key),!(x&&S.key===" ")&&g$.includes(S.key)&&(b(),S.preventDefault())})})})});Hj.displayName=Wj;var Kj="SelectValue",Gj=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:o,placeholder:c="",...u}=n,h=la(Kj,t),{onValueNodeHasChildrenChange:p}=h,g=o!==void 0,y=Tt(e,h.onValueNodeChange);return Xt(()=>{p(g)},[p,g]),l.jsx(Ge.span,{...u,ref:y,style:{pointerEvents:"none"},children:pA(h.value)?l.jsx(l.Fragment,{children:c}):o})});Gj.displayName=Kj;var E$="SelectIcon",Qj=E.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return l.jsx(Ge.span,{"aria-hidden":!0,...s,ref:e,children:r||"â–¼"})});Qj.displayName=E$;var b$="SelectPortal",Yj=n=>l.jsx(Fj,{asChild:!0,...n});Yj.displayName=b$;var rl="SelectContent",Xj=E.forwardRef((n,e)=>{const t=la(rl,n.__scopeSelect),[r,s]=E.useState();if(Xt(()=>{s(new DocumentFragment)},[]),!t.open){const o=r;return o?sl.createPortal(l.jsx(Jj,{scope:n.__scopeSelect,children:l.jsx(lm.Slot,{scope:n.__scopeSelect,children:l.jsx("div",{children:n.children})})}),o):null}return l.jsx(Zj,{...n,ref:e})});Xj.displayName=rl;var Ii=10,[Jj,ca]=Zc(rl),S$="SelectContentImpl",Zj=E.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:c,side:u,sideOffset:h,align:p,alignOffset:g,arrowPadding:y,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:x,avoidCollisions:_,...A}=n,I=la(rl,t),[C,M]=E.useState(null),[U,$]=E.useState(null),P=Tt(e,we=>M(we)),[k,D]=E.useState(null),[O,L]=E.useState(null),V=cm(t),[R,W]=E.useState(!1),K=E.useRef(!1);E.useEffect(()=>{if(C)return oj(C)},[C]),t$();const X=E.useCallback(we=>{const[be,...qe]=V().map(st=>st.ref.current),[Me]=qe.slice(-1),rt=document.activeElement;for(const st of we)if(st===rt||(st==null||st.scrollIntoView({block:"nearest"}),st===be&&U&&(U.scrollTop=0),st===Me&&U&&(U.scrollTop=U.scrollHeight),st==null||st.focus(),document.activeElement!==rt))return},[V,U]),ie=E.useCallback(()=>X([k,C]),[X,k,C]);E.useEffect(()=>{R&&ie()},[R,ie]);const{onOpenChange:G,triggerPointerDownPosRef:oe}=I;E.useEffect(()=>{if(C){let we={x:0,y:0};const be=Me=>{var rt,st;we={x:Math.abs(Math.round(Me.pageX)-(((rt=oe.current)==null?void 0:rt.x)??0)),y:Math.abs(Math.round(Me.pageY)-(((st=oe.current)==null?void 0:st.y)??0))}},qe=Me=>{we.x<=10&&we.y<=10?Me.preventDefault():C.contains(Me.target)||G(!1),document.removeEventListener("pointermove",be),oe.current=null};return oe.current!==null&&(document.addEventListener("pointermove",be),document.addEventListener("pointerup",qe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",be),document.removeEventListener("pointerup",qe,{capture:!0})}}},[C,G,oe]),E.useEffect(()=>{const we=()=>G(!1);return window.addEventListener("blur",we),window.addEventListener("resize",we),()=>{window.removeEventListener("blur",we),window.removeEventListener("resize",we)}},[G]);const[le,B]=gA(we=>{const be=V().filter(rt=>!rt.disabled),qe=be.find(rt=>rt.ref.current===document.activeElement),Me=yA(be,we,qe);Me&&setTimeout(()=>Me.ref.current.focus())}),J=E.useCallback((we,be,qe)=>{const Me=!K.current&&!qe;(I.value!==void 0&&I.value===be||Me)&&(D(we),Me&&(K.current=!0))},[I.value]),he=E.useCallback(()=>C==null?void 0:C.focus(),[C]),Ne=E.useCallback((we,be,qe)=>{const Me=!K.current&&!qe;(I.value!==void 0&&I.value===be||Me)&&L(we)},[I.value]),Ue=r==="popper"?Lv:eA,Te=Ue===Lv?{side:u,sideOffset:h,align:p,alignOffset:g,arrowPadding:y,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:x,avoidCollisions:_}:{};return l.jsx(Jj,{scope:t,content:C,viewport:U,onViewportChange:$,itemRefCallback:J,selectedItem:k,onItemLeave:he,itemTextRefCallback:Ne,focusSelectedItem:ie,selectedItemText:O,position:r,isPositioned:R,searchRef:le,children:l.jsx(Bj,{as:Wa,allowPinchZoom:!0,children:l.jsx(gw,{asChild:!0,trapped:I.open,onMountAutoFocus:we=>{we.preventDefault()},onUnmountAutoFocus:$e(s,we=>{var be;(be=I.trigger)==null||be.focus({preventScroll:!0}),we.preventDefault()}),children:l.jsx(Lj,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:we=>we.preventDefault(),onDismiss:()=>I.onOpenChange(!1),children:l.jsx(Ue,{role:"listbox",id:I.contentId,"data-state":I.open?"open":"closed",dir:I.dir,onContextMenu:we=>we.preventDefault(),...A,...Te,onPlaced:()=>W(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:$e(A.onKeyDown,we=>{const be=we.ctrlKey||we.altKey||we.metaKey;if(we.key==="Tab"&&we.preventDefault(),!be&&we.key.length===1&&B(we.key),["ArrowUp","ArrowDown","Home","End"].includes(we.key)){let Me=V().filter(rt=>!rt.disabled).map(rt=>rt.ref.current);if(["ArrowUp","End"].includes(we.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(we.key)){const rt=we.target,st=Me.indexOf(rt);Me=Me.slice(st+1)}setTimeout(()=>X(Me)),we.preventDefault()}})})})})})})});Zj.displayName=S$;var N$="SelectItemAlignedPosition",eA=E.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,o=la(rl,t),c=ca(rl,t),[u,h]=E.useState(null),[p,g]=E.useState(null),y=Tt(e,P=>g(P)),v=cm(t),b=E.useRef(!1),S=E.useRef(!0),{viewport:x,selectedItem:_,selectedItemText:A,focusSelectedItem:I}=c,C=E.useCallback(()=>{if(o.trigger&&o.valueNode&&u&&p&&x&&_&&A){const P=o.trigger.getBoundingClientRect(),k=p.getBoundingClientRect(),D=o.valueNode.getBoundingClientRect(),O=A.getBoundingClientRect();if(o.dir!=="rtl"){const rt=O.left-k.left,st=D.left-rt,ge=P.left-st,Ie=P.width+ge,pt=Math.max(Ie,k.width),sn=window.innerWidth-Ii,zn=P1(st,[Ii,sn-pt]);u.style.minWidth=Ie+"px",u.style.left=zn+"px"}else{const rt=k.right-O.right,st=window.innerWidth-D.right-rt,ge=window.innerWidth-P.right-st,Ie=P.width+ge,pt=Math.max(Ie,k.width),sn=window.innerWidth-Ii,zn=P1(st,[Ii,sn-pt]);u.style.minWidth=Ie+"px",u.style.right=zn+"px"}const L=v(),V=window.innerHeight-Ii*2,R=x.scrollHeight,W=window.getComputedStyle(p),K=parseInt(W.borderTopWidth,10),X=parseInt(W.paddingTop,10),ie=parseInt(W.borderBottomWidth,10),G=parseInt(W.paddingBottom,10),oe=K+X+R+G+ie,le=Math.min(_.offsetHeight*5,oe),B=window.getComputedStyle(x),J=parseInt(B.paddingTop,10),he=parseInt(B.paddingBottom,10),Ne=P.top+P.height/2-Ii,Ue=V-Ne,Te=_.offsetHeight/2,we=_.offsetTop+Te,be=K+X+we,qe=oe-be;if(be<=Ne){const rt=_===L[L.length-1].ref.current;u.style.bottom="0px";const st=p.clientHeight-x.offsetTop-x.offsetHeight,ge=Math.max(Ue,Te+(rt?he:0)+st+ie),Ie=be+ge;u.style.height=Ie+"px"}else{const rt=_===L[0].ref.current;u.style.top="0px";const ge=Math.max(Ne,K+x.offsetTop+(rt?J:0)+Te)+qe;u.style.height=ge+"px",x.scrollTop=be-Ne+x.offsetTop}u.style.margin=`${Ii}px 0`,u.style.minHeight=le+"px",u.style.maxHeight=V+"px",r==null||r(),requestAnimationFrame(()=>b.current=!0)}},[v,o.trigger,o.valueNode,u,p,x,_,A,o.dir,r]);Xt(()=>C(),[C]);const[M,U]=E.useState();Xt(()=>{p&&U(window.getComputedStyle(p).zIndex)},[p]);const $=E.useCallback(P=>{P&&S.current===!0&&(C(),I==null||I(),S.current=!1)},[C,I]);return l.jsx(C$,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:$,children:l.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:l.jsx(Ge.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});eA.displayName=N$;var T$="SelectPopperPosition",Lv=E.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Ii,...o}=n,c=um(t);return l.jsx(pN,{...c,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Lv.displayName=T$;var[C$,Sw]=Zc(rl,{}),Mv="SelectViewport",tA=E.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,o=ca(Mv,t),c=Sw(Mv,t),u=Tt(e,o.onViewportChange),h=E.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(lm.Slot,{scope:t,children:l.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"auto",...s.style},onScroll:$e(s.onScroll,p=>{const g=p.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:v}=c;if(v!=null&&v.current&&y){const b=Math.abs(h.current-g.scrollTop);if(b>0){const S=window.innerHeight-Ii*2,x=parseFloat(y.style.minHeight),_=parseFloat(y.style.height),A=Math.max(x,_);if(A<S){const I=A+b,C=Math.min(S,I),M=I-C;y.style.height=C+"px",y.style.bottom==="0px"&&(g.scrollTop=M>0?M:0,y.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});tA.displayName=Mv;var nA="SelectGroup",[I$,j$]=Zc(nA),A$=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Do();return l.jsx(I$,{scope:t,id:s,children:l.jsx(Ge.div,{role:"group","aria-labelledby":s,...r,ref:e})})});A$.displayName=nA;var rA="SelectLabel",sA=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=j$(rA,t);return l.jsx(Ge.div,{id:s.id,...r,ref:e})});sA.displayName=rA;var _p="SelectItem",[P$,iA]=Zc(_p),oA=E.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:o,...c}=n,u=la(_p,t),h=ca(_p,t),p=u.value===r,[g,y]=E.useState(o??""),[v,b]=E.useState(!1),S=Tt(e,A=>{var I;return(I=h.itemRefCallback)==null?void 0:I.call(h,A,r,s)}),x=Do(),_=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(P$,{scope:t,value:r,disabled:s,textId:x,isSelected:p,onItemTextChange:E.useCallback(A=>{y(I=>I||((A==null?void 0:A.textContent)??"").trim())},[]),children:l.jsx(lm.ItemSlot,{scope:t,value:r,disabled:s,textValue:g,children:l.jsx(Ge.div,{role:"option","aria-labelledby":x,"data-highlighted":v?"":void 0,"aria-selected":p&&v,"data-state":p?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:S,onFocus:$e(c.onFocus,()=>b(!0)),onBlur:$e(c.onBlur,()=>b(!1)),onPointerUp:$e(c.onPointerUp,_),onPointerMove:$e(c.onPointerMove,A=>{var I;s?(I=h.onItemLeave)==null||I.call(h):A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e(c.onPointerLeave,A=>{var I;A.currentTarget===document.activeElement&&((I=h.onItemLeave)==null||I.call(h))}),onKeyDown:$e(c.onKeyDown,A=>{var C;((C=h.searchRef)==null?void 0:C.current)!==""&&A.key===" "||(y$.includes(A.key)&&_(),A.key===" "&&A.preventDefault())})})})})});oA.displayName=_p;var qu="SelectItemText",aA=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...o}=n,c=la(qu,t),u=ca(qu,t),h=iA(qu,t),p=_$(qu,t),[g,y]=E.useState(null),v=Tt(e,A=>y(A),h.onItemTextChange,A=>{var I;return(I=u.itemTextRefCallback)==null?void 0:I.call(u,A,h.value,h.disabled)}),b=g==null?void 0:g.textContent,S=E.useMemo(()=>l.jsx("option",{value:h.value,disabled:h.disabled,children:b},h.value),[h.disabled,h.value,b]),{onNativeOptionAdd:x,onNativeOptionRemove:_}=p;return Xt(()=>(x(S),()=>_(S)),[x,_,S]),l.jsxs(l.Fragment,{children:[l.jsx(Ge.span,{id:h.textId,...o,ref:v}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?sl.createPortal(o.children,c.valueNode):null]})});aA.displayName=qu;var lA="SelectItemIndicator",cA=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return iA(lA,t).isSelected?l.jsx(Ge.span,{"aria-hidden":!0,...r,ref:e}):null});cA.displayName=lA;var Fv="SelectScrollUpButton",uA=E.forwardRef((n,e)=>{const t=ca(Fv,n.__scopeSelect),r=Sw(Fv,n.__scopeSelect),[s,o]=E.useState(!1),c=Tt(e,r.onScrollButtonChange);return Xt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const p=h.scrollTop>0;o(p)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?l.jsx(hA,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});uA.displayName=Fv;var Vv="SelectScrollDownButton",dA=E.forwardRef((n,e)=>{const t=ca(Vv,n.__scopeSelect),r=Sw(Vv,n.__scopeSelect),[s,o]=E.useState(!1),c=Tt(e,r.onScrollButtonChange);return Xt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const p=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<p;o(g)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?l.jsx(hA,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});dA.displayName=Vv;var hA=E.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,o=ca("SelectScrollButton",t),c=E.useRef(null),u=cm(t),h=E.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return E.useEffect(()=>()=>h(),[h]),Xt(()=>{var g;const p=u().find(y=>y.ref.current===document.activeElement);(g=p==null?void 0:p.ref.current)==null||g.scrollIntoView({block:"nearest"})},[u]),l.jsx(Ge.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:$e(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:$e(s.onPointerMove,()=>{var p;(p=o.onItemLeave)==null||p.call(o),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:$e(s.onPointerLeave,()=>{h()})})}),R$="SelectSeparator",fA=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return l.jsx(Ge.div,{"aria-hidden":!0,...r,ref:e})});fA.displayName=R$;var Uv="SelectArrow",k$=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=um(t),o=la(Uv,t),c=ca(Uv,t);return o.open&&c.position==="popper"?l.jsx(mN,{...s,...r,ref:e}):null});k$.displayName=Uv;function pA(n){return n===""||n===void 0}var mA=E.forwardRef((n,e)=>{const{value:t,...r}=n,s=E.useRef(null),o=Tt(e,s),c=zI(t);return E.useEffect(()=>{const u=s.current,h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==t&&g){const y=new Event("change",{bubbles:!0});g.call(u,t),u.dispatchEvent(y)}},[c,t]),l.jsx(Cd,{asChild:!0,children:l.jsx("select",{...r,ref:o,defaultValue:t})})});mA.displayName="BubbleSelect";function gA(n){const e=Tn(n),t=E.useRef(""),r=E.useRef(0),s=E.useCallback(c=>{const u=t.current+c;e(u),function h(p){t.current=p,window.clearTimeout(r.current),p!==""&&(r.current=window.setTimeout(()=>h(""),1e3))}(u)},[e]),o=E.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,o]}function yA(n,e,t){const s=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let c=O$(n,Math.max(o,0));s.length===1&&(c=c.filter(p=>p!==t));const h=c.find(p=>p.textValue.toLowerCase().startsWith(s.toLowerCase()));return h!==t?h:void 0}function O$(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var D$=qj,vA=Hj,L$=Gj,M$=Qj,F$=Yj,xA=Xj,V$=tA,wA=sA,_A=oA,U$=aA,z$=cA,EA=uA,bA=dA,SA=fA;const NA=D$,TA=L$,Nw=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(vA,{ref:r,className:We("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,l.jsx(M$,{asChild:!0,children:l.jsx(RS,{className:"h-4 w-4 opacity-50"})})]}));Nw.displayName=vA.displayName;const CA=E.forwardRef(({className:n,...e},t)=>l.jsx(EA,{ref:t,className:We("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(Ek,{className:"h-4 w-4"})}));CA.displayName=EA.displayName;const IA=E.forwardRef(({className:n,...e},t)=>l.jsx(bA,{ref:t,className:We("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(RS,{className:"h-4 w-4"})}));IA.displayName=bA.displayName;const Tw=E.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>l.jsx(F$,{children:l.jsxs(xA,{ref:s,className:We("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[l.jsx(CA,{}),l.jsx(V$,{className:We("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(IA,{})]})}));Tw.displayName=xA.displayName;const $$=E.forwardRef(({className:n,...e},t)=>l.jsx(wA,{ref:t,className:We("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));$$.displayName=wA.displayName;const Cw=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(_A,{ref:r,className:We("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(z$,{children:l.jsx(xk,{className:"h-4 w-4"})})}),l.jsx(U$,{children:e})]}));Cw.displayName=_A.displayName;const B$=E.forwardRef(({className:n,...e},t)=>l.jsx(SA,{ref:t,className:We("-mx-1 my-1 h-px bg-muted",n),...e}));B$.displayName=SA.displayName;function Iw({file:n,lectureId:e,onClose:t,onSave:r}){const[s,o]=E.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",fileUrl:(n==null?void 0:n.fileUrl)||(n==null?void 0:n.url)||"",fileType:(n==null?void 0:n.fileType)||"",fileSize:(n==null?void 0:n.fileSize)||""}),[c,u]=E.useState(!1),h=["PDF","DOCX","PPTX","XLSX","TXT","ZIP","MP3","MP4","JPG","PNG"],p=async g=>{g.preventDefault(),u(!0);try{const y={...s,id:`file_${Date.now()}`,lectureId:e,uploadedAt:new Date,uploadedBy:"Current User"};r(y)}catch(y){console.error("Error saving file:",y)}finally{u(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(te,{variant:"ghost",onClick:t,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add File"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a file resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsxs(tt,{className:"flex items-center gap-2",children:[l.jsx(ti,{className:"h-5 w-5 text-blue-600"}),"File Information"]}),l.jsx(kt,{children:"Upload or link to educational files"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"title",children:"File Title *"}),l.jsx(Ce,{id:"title",placeholder:"e.g., Anatomy Reference Guide",value:s.title,onChange:g=>o(y=>({...y,title:g.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"description",children:"Description"}),l.jsx(ei,{id:"description",placeholder:"Describe the file content...",value:s.description,onChange:g=>o(y=>({...y,description:g.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"fileType",children:"File Type *"}),l.jsxs(NA,{value:s.fileType,onValueChange:g=>o(y=>({...y,fileType:g})),children:[l.jsx(Nw,{children:l.jsx(TA,{placeholder:"Select file type"})}),l.jsx(Tw,{children:h.map(g=>l.jsx(Cw,{value:g,children:g},g))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"fileSize",children:"File Size"}),l.jsx(Ce,{id:"fileSize",placeholder:"e.g., 2.5 MB",value:s.fileSize,onChange:g=>o(y=>({...y,fileSize:g.target.value}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"fileUrl",children:"File URL *"}),l.jsx(Ce,{id:"fileUrl",placeholder:"https://example.com/file.pdf or /uploads/file.pdf",value:s.fileUrl,onChange:g=>o(y=>({...y,fileUrl:g.target.value})),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload to Firebase Storage or use external links"})]})]})]}),s.title&&l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Preview"}),l.jsx(kt,{children:"How the file will appear in the lecture"})]}),l.jsx(xe,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ti,{className:"h-8 w-8 text-blue-600"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:s.title}),s.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.fileType&&l.jsx(nn,{variant:"secondary",children:s.fileType}),s.fileSize&&l.jsx(nn,{variant:"outline",children:s.fileSize})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(te,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),l.jsxs(te,{type:"submit",disabled:c,children:[l.jsx(ra,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add File"]})]})]})]})}function jw({video:n,lectureId:e,onClose:t,onSave:r}){const[s,o]=E.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",url:(n==null?void 0:n.url)||(n==null?void 0:n.youtubeUrl)||"",duration:(n==null?void 0:n.duration)||"",thumbnailUrl:(n==null?void 0:n.thumbnailUrl)||"",platform:(n==null?void 0:n.platform)||"YouTube"}),[c,u]=E.useState(!1),h=async v=>{v.preventDefault(),u(!0);try{const b={...s,id:`video_${Date.now()}`,lectureId:e,uploadedAt:new Date,uploadedBy:"Current User"};r(b)}catch(b){console.error("Error saving video:",b)}finally{u(!1)}},p=v=>{const b=v.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return b?b[1]:null},g=v=>{const b=p(v);return b?`https://img.youtube.com/vi/${b}/maxresdefault.jpg`:""},y=v=>{o(b=>({...b,url:v,thumbnailUrl:g(v)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(te,{variant:"ghost",onClick:t,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Video"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a video resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsxs(tt,{className:"flex items-center gap-2",children:[l.jsx(Ws,{className:"h-5 w-5 text-green-600"}),"Video Information"]}),l.jsx(kt,{children:"Add YouTube videos or other video links"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"title",children:"Video Title *"}),l.jsx(Ce,{id:"title",placeholder:"e.g., Introduction to Human Anatomy",value:s.title,onChange:v=>o(b=>({...b,title:v.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"description",children:"Description"}),l.jsx(ei,{id:"description",placeholder:"Describe the video content...",value:s.description,onChange:v=>o(b=>({...b,description:v.target.value})),rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"url",children:"Video URL *"}),l.jsx(Ce,{id:"url",placeholder:"https://youtube.com/watch?v=... or https://vimeo.com/...",value:s.url,onChange:v=>y(v.target.value),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports YouTube, Vimeo, and direct video links"})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"duration",children:"Duration"}),l.jsx(Ce,{id:"duration",placeholder:"e.g., 45:30",value:s.duration,onChange:v=>o(b=>({...b,duration:v.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"platform",children:"Platform"}),l.jsx(Ce,{id:"platform",value:s.platform,onChange:v=>o(b=>({...b,platform:v.target.value})),disabled:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"thumbnailUrl",children:"Thumbnail URL"}),l.jsx(Ce,{id:"thumbnailUrl",placeholder:"Auto-generated for YouTube videos",value:s.thumbnailUrl,onChange:v=>o(b=>({...b,thumbnailUrl:v.target.value}))})]})]})]}),s.title&&l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Preview"}),l.jsx(kt,{children:"How the video will appear in the lecture"})]}),l.jsx(xe,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[s.thumbnailUrl?l.jsx("img",{src:s.thumbnailUrl,alt:s.title,className:"w-24 h-16 object-cover rounded"}):l.jsx("div",{className:"w-24 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(Py,{className:"h-6 w-6 text-gray-400"})}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(Ws,{className:"h-8 w-8 text-white opacity-80"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:s.title}),s.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.duration&&l.jsxs(nn,{variant:"secondary",className:"text-xs",children:[l.jsx(Bf,{className:"h-3 w-3 mr-1"}),s.duration]}),l.jsxs(nn,{variant:"outline",className:"text-xs",children:[l.jsx(Ik,{className:"h-3 w-3 mr-1"}),s.platform]})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(te,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),l.jsxs(te,{type:"submit",disabled:c,children:[l.jsx(ra,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Video"]})]})]})]})}function dm({lecture:n,subjectId:e,subjectName:t,yearType:r,onClose:s,onSave:o}){const[c,u]=E.useState({name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",order:(n==null?void 0:n.order)||1,imageUrl:(n==null?void 0:n.imageUrl)||""}),[h,p]=E.useState(!1),g=async y=>{y.preventDefault(),p(!0);try{const v={...c,subjectId:e,createdAt:new Date,uploadedBy:"Current User"};o(v)}catch(v){console.error("Error saving lecture:",v)}finally{p(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(te,{variant:"ghost",onClick:s,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Lecture"}),l.jsxs("p",{className:"text-muted-foreground",children:["Add a new lecture to ",t]})]})]})}),l.jsxs("form",{onSubmit:g,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsxs(tt,{className:"flex items-center gap-2",children:[r==="basic"?l.jsx(Ku,{className:"h-5 w-5 text-blue-600"}):l.jsx(Gu,{className:"h-5 w-5 text-red-600"}),"Lecture Information"]}),l.jsx(kt,{children:"Basic information about the lecture"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"name",children:"Lecture Name *"}),l.jsx(Ce,{id:"name",placeholder:"e.g., Introduction to Cell Biology",value:c.name,onChange:y=>u(v=>({...v,name:y.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"description",children:"Description"}),l.jsx(ei,{id:"description",placeholder:"Describe what this lecture covers...",value:c.description,onChange:y=>u(v=>({...v,description:y.target.value})),rows:4})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"order",children:"Order"}),l.jsx(Ce,{id:"order",type:"number",min:"1",value:c.order,onChange:y=>u(v=>({...v,order:parseInt(y.target.value)||1}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(Ce,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:y=>u(v=>({...v,imageUrl:y.target.value}))})]})]})]})]}),c.name&&l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Preview"}),l.jsxs(kt,{children:["How the lecture will appear in ",t]})]}),l.jsx(xe,{children:l.jsx("div",{className:"p-4 border rounded-lg bg-secondary/20",children:l.jsxs("div",{className:"flex items-start gap-3",children:[c.imageUrl?l.jsx("img",{src:c.imageUrl,alt:c.name,className:"w-16 h-16 object-cover rounded",onError:y=>{y.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(gs,{className:"h-6 w-6 text-gray-400"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:c.name}),c.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:c.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Lecture ",c.order," â€¢ ",t]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(te,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),l.jsxs(te,{type:"submit",disabled:h,children:[l.jsx(ra,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add Lecture"]})]})]})]})}async function Er(n){let e="dflp2vxn2",t="Med_just";const r="".replace(/\/$/,"");try{const I=await fetch(`${r}/api/cloudinary/config`);if(I.ok)try{const C=await I.json();e=C.cloudName||e,t=C.uploadPreset||C.upload_preset||t}catch{const C=I.headers.get("x-cloudinary-cloudname"),M=I.headers.get("x-cloudinary-upload-preset");C&&(e=e||C),M&&(t=t||M)}}catch{}if(!e)try{const I=localStorage.getItem("cloudinary.cloudName"),C=localStorage.getItem("cloudinary.uploadPreset");I&&(e=I,t=t||C||t)}catch{}if(!e)throw new Error("Cloudinary cloud name is not configured. Set VITE_CLOUDINARY_CLOUD_NAME in your environment or provide server config.");const s=`https://api.cloudinary.com/v1_1/${e}/upload`;try{const I=await F1(n);if(I&&typeof I=="string"&&I.startsWith("http"))return I}catch(I){const C=String((I==null?void 0:I.message)||I||"");console.warn("Server upload failed, falling back to client upload:",C)}async function o(I){if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.");try{const C=I.clone();try{return{json:await C.json(),text:null}}catch{}}catch{if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}try{const C=await I.text();try{return{json:JSON.parse(C),text:C}}catch{return{json:null,text:C}}}catch(C){throw new Error("Could not read response body: "+String(C))}}async function c(I,C){const M=async($,P)=>{const k=await fetch($,P),D=await o(k).catch(O=>{throw O});return{res:k,body:D}},U=typeof I=="string"?I:I.url;try{return await M(U,C)}catch($){const P=String(($==null?void 0:$.message)||$||"").toLowerCase();if(P.includes("response body already read")||P.includes("body already read")){const k=U+(U.includes("?")?`&_retry=${Date.now()}`:`?_retry=${Date.now()}`);try{return await M(k,C)}catch{}}if(P.includes("failed to fetch")||P.includes("networkerror")||P.includes("network request failed")||P.includes("script error")||P.includes("response body already read")||P.includes("body already read"))try{return await(async()=>await new Promise((k,D)=>{const O=new XMLHttpRequest;let L=C&&C.method||"GET",V=!1;try{if(O.open(L,U,!0),C&&C.headers){const R=C.headers;Object.keys(R).forEach(W=>{try{O.setRequestHeader(W,R[W])}catch{}})}if(O.onreadystatechange=()=>{if(O.readyState!==4)return;const R=O.status||0,W={};(O.getAllResponseHeaders()||"").split(`\r
`).forEach(le=>{const B=le.indexOf(":");if(B>0){const J=le.substring(0,B).trim().toLowerCase(),he=le.substring(B+1).trim();W[J]=he}});const X={ok:R>=200&&R<400,status:R,headers:{get:le=>W[le.toLowerCase()]||null}},ie=O.responseText;let G=null;try{G=ie?JSON.parse(ie):null}catch{G=null}k({res:X,body:{json:G,text:ie}})},O.onerror=()=>D(new Error("XHR network error")),O.ontimeout=()=>D(new Error("XHR timeout")),C&&C.body)try{if(C.body instanceof FormData)V=!0,O.send(C.body);else if(typeof C.body=="string")O.send(C.body);else try{O.send(JSON.stringify(C.body))}catch{O.send(String(C.body))}}catch(R){D(R)}else O.send()}catch(R){D(R)}}))()}catch{}throw $}}if(t){const I=new FormData;I.append("file",n),I.append("upload_preset",t);const{res:C,body:M}=await c(s,{method:"POST",body:I});if(!C.ok){const U=M!=null&&M.json?JSON.stringify(M.json):(M==null?void 0:M.text)||"";throw new Error(`Cloudinary upload failed: ${C.status} ${U}`)}if(M.json&&(M.json.secure_url||M.json.url))return M.json.secure_url||M.json.url;if(M.text&&typeof M.text=="string"&&M.text.startsWith("http"))return M.text;throw new Error("Cloudinary upload returned unexpected response.")}const u="686641252611351";let h,p;try{const I=await c(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})});h=I.res,p=I.body}catch(I){const C=String((I==null?void 0:I.message)||I||"");if(C.toLowerCase().includes("response body already read")||C.toLowerCase().includes("body already read")){try{const M=await fetch(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})}),U=M.headers.get("x-cloudinary-signature"),$=M.headers.get("x-cloudinary-timestamp"),P=M.headers.get("x-cloudinary-apikey"),k=M.headers.get("x-cloudinary-cloudname"),D=M.headers.get("x-cloudinary-upload-preset");if(U&&$){const O=P||u||null,L=U,V=Number($);k&&(e=e||k);const R=new FormData;R.append("file",n),O&&R.append("api_key",O),R.append("timestamp",String(V)),R.append("signature",L);const{res:W,body:K}=await c(s,{method:"POST",body:R});if(!W.ok){const X=K!=null&&K.json?JSON.stringify(K.json):(K==null?void 0:K.text)||"",ie=(X||"").toLowerCase();if(ie.includes("missing required parameter - api_key")||ie.includes("missing required parameter - api key")||ie.includes("missing required parameter 'api_key'")){const G=u||(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})();if(G){const oe=new FormData;oe.append("file",n),oe.append("api_key",G),oe.append("timestamp",String(V)),oe.append("signature",L);const{res:le,body:B}=await c(s,{method:"POST",body:oe});if(!le.ok){const J=B!=null&&B.json?JSON.stringify(B.json):(B==null?void 0:B.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${le.status} ${J}`)}if(B.json&&(B.json.secure_url||B.json.url))return B.json.secure_url||B.json.url;if(B.text&&typeof B.text=="string"&&B.text.startsWith("http"))return B.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}if(t){const oe=new FormData;oe.append("file",n),oe.append("upload_preset",t);const le=await fetch(s,{method:"POST",body:oe});if(!le.ok){const he=await le.text().catch(()=>"");throw new Error(`Cloudinary unsigned fallback failed: ${le.status} ${he}`)}const B=await le.json().catch(()=>null);if(B&&(B.secure_url||B.url))return B.secure_url||B.url;const J=await le.text().catch(()=>"");if(J&&J.startsWith("http"))return J;throw new Error("Cloudinary unsigned fallback returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${W.status} ${X}`)}if(K.json&&(K.json.secure_url||K.json.url))return K.json.secure_url||K.json.url;if(K.text&&typeof K.text=="string"&&K.text.startsWith("http"))return K.text;throw new Error("Cloudinary signed upload returned unexpected response.")}if(D){const O=new FormData;O.append("file",n),O.append("upload_preset",D);const L=await fetch(s,{method:"POST",body:O});if(!L.ok){const W=await L.text().catch(()=>"");throw new Error(`Cloudinary upload fallback failed: ${L.status} ${W}`)}const V=await L.json().catch(()=>null);if(V&&(V.secure_url||V.url))return V.secure_url||V.url;const R=await L.text().catch(()=>"");if(R&&R.startsWith("http"))return R;throw new Error("Cloudinary fallback upload returned unexpected response.")}}catch{}try{const M=await F1(n);if(M&&typeof M=="string"&&M.startsWith("http"))return M}catch{}throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}throw I}if(!h.ok){const I=p!=null&&p.json?JSON.stringify(p.json):(p==null?void 0:p.text)||"";throw new Error(`Cloudinary signing failed: ${h.status} ${I}`)}const g=p.json||{},{signature:y,apiKey:v,timestamp:b}=g,S=v||u;if(!y||!b)throw new Error("Cloudinary signing endpoint returned invalid data.");const x=new FormData;x.append("file",n),x.append("api_key",S),x.append("timestamp",String(b)),x.append("signature",y);const{res:_,body:A}=await c(s,{method:"POST",body:x});if(!_.ok){const I=A!=null&&A.json?JSON.stringify(A.json):(A==null?void 0:A.text)||"",C=(I||"").toLowerCase();if(C.includes("missing required parameter - api_key")||C.includes("missing required parameter - api key")||C.includes("missing required parameter 'api_key'")){const M=u;{const U=new FormData;U.append("file",n),U.append("api_key",M),U.append("timestamp",String(b)),U.append("signature",y);const{res:$,body:P}=await c(s,{method:"POST",body:U});if(!$.ok){const k=P!=null&&P.json?JSON.stringify(P.json):(P==null?void 0:P.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${$.status} ${k}`)}if(P.json&&(P.json.secure_url||P.json.url))return P.json.secure_url||P.json.url;if(P.text&&typeof P.text=="string"&&P.text.startsWith("http"))return P.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${_.status} ${I}`)}if(A.json&&(A.json.secure_url||A.json.url))return A.json.secure_url||A.json.url;if(A.text&&typeof A.text=="string"&&A.text.startsWith("http"))return A.text;throw new Error("Cloudinary signed upload returned unexpected response.")}async function F1(n){const e=await new Promise((t,r)=>{const s=new FileReader;s.onload=()=>t(s.result),s.onerror=()=>r(new Error("Failed to read file")),s.readAsDataURL(n)});return await new Promise((t,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const o=s.status||0,c=s.responseText||"";if(o<200||o>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${o} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?t(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:e,filename:n.name}))}catch(s){r(s)}}).catch(async t=>{try{const r=String((t==null?void 0:t.message)||"").toLowerCase();if(r.includes("cloudinary not configured")||r.includes("404")||r.includes("server upload failed"))return await new Promise((s,o)=>{try{const c=new XMLHttpRequest;c.open("POST",`${API_BASE}/api/imagekit/upload`,!0),c.setRequestHeader("Content-Type","application/json"),c.onreadystatechange=()=>{if(c.readyState!==4)return;const u=c.status||0,h=c.responseText||"";if(u<200||u>=400){let p=h;try{const g=h?JSON.parse(h):null;g&&g.error&&(p=g.error)}catch{}return o(new Error(`ImageKit server upload failed: ${u} ${p}`))}try{const p=h?JSON.parse(h):{};return p&&(p.url||p.filePath)?s(p.url||p.filePath):o(new Error("ImageKit server upload returned unexpected response"))}catch{return o(new Error("ImageKit server upload returned non-JSON response"))}},c.onerror=()=>o(new Error("ImageKit server upload XHR error")),c.send(JSON.stringify({file:e,filename:n.name}))}catch(c){o(c)}})}catch{}throw t})}function qa(n,e,t){try{n&&localStorage.setItem("cloudinary.cloudName",n),e&&localStorage.setItem("cloudinary.uploadPreset",e),t&&localStorage.setItem("cloudinary.apiKey",t)}catch(r){console.warn("Could not persist Cloudinary config to localStorage",r)}}async function V1(n,e){if(!n)throw new Error("No URL provided");return await new Promise((t,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const o=s.status||0,c=s.responseText||"";if(o<200||o>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${o} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?t(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:n,filename:e||"remote"}))}catch(s){r(new Error("Failed to call server upload endpoint: "+String(s)))}})}const q$="".replace(/\/$/,"");async function W$(n,e){const t=await fetch(n,e);let r=null,s="";try{r=await t.json()}catch{try{s=await t.text()}catch{}}return{res:t,json:r,text:s}}async function qo(n,e){let t;typeof n=="string"?t=n:t=await new Promise((u,h)=>{const p=new FileReader;p.onload=()=>u(p.result),p.onerror=()=>h(new Error("Failed to read file")),p.readAsDataURL(n)});const r=`${q$}/api/imagekit/upload`,{res:s,json:o,text:c}=await W$(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:t,filename:e})});if(!s.ok){const u=o?JSON.stringify(o):c||"";throw new Error(`ImageKit server upload failed: ${s.status} ${u}`)}if(o&&(o.url||o.filePath||o.name))return o.url||o.filePath||o.name;throw new Error("ImageKit server upload returned unexpected response.")}function H$(){var Kt;const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,o]=E.useState(!1),[c,u]=E.useState(!1),[h,p]=E.useState(!1),[g,y]=E.useState(!1),[v,b]=E.useState(!1),[S,x]=E.useState(null),[_,A]=E.useState(null),[I,C]=E.useState(null),[M,U]=E.useState("basic"),[$,P]=E.useState({}),[k,D]=E.useState(null),[O,L]=E.useState(""),[V,R]=E.useState(""),[W,K]=E.useState(""),[X,ie]=E.useState(""),[G,oe]=E.useState(""),[le,B]=E.useState(""),[J,he]=E.useState(""),[Ne,Ue]=E.useState(""),[Te,we]=E.useState(""),[be,qe]=E.useState(""),[Me,rt]=E.useState(""),[st,ge]=E.useState(null),Ie=Bc(),pt=$i();_e.useEffect(()=>{const me=new URLSearchParams(pt.search).get("batch");ge(me)},[pt.search]);const sn=(ne,me)=>{P(Fe=>{var St;return{...Fe,[ne]:{videos:!1,files:!1,quizzes:!1,...Fe[ne]||{},[me]:!((St=Fe[ne])!=null&&St[me])}}})},{years:zn,batches:br,loading:Ot,error:dn,retryConnection:Sr,updateYear:Xr,updateBatch:ln,createSubject:Ts,createLecture:Cs,updateLecture:Ut,createYear:It,createBatch:$n,deleteBatch:wn,deleteLecture:Nr,deleteSubject:Jr,addVideo:Fr,addFile:Is,addQuiz:ui}=Jc(),{news:Zr}=pw(),Bn=(ne,me)=>{C(ne),A(me),r(null),o(!0)},js=(ne,me)=>{console.log("ðŸ”„ Opening subject form for year:",ne.yearNumber,"type:",me),x({id:ne.id,number:ne.yearNumber}),U(me),u(!0)},Ye=(ne,me)=>{C(ne),U(me),b(!0)},_t=(ne,me)=>{C(ne),A(me),p(!0)},mt=(ne,me)=>{C(ne),A(me),y(!0)};if(s)return l.jsx(Ew,{quiz:t,onClose:()=>{o(!1),r(null),A(null)},onSave:async ne=>{I!=null&&I.id&&_&&await ui(I.id,_,{title:ne.title,description:ne.description,questions:ne.questions||[],timeLimit:ne.timeLimit,passingScore:ne.passingScore}),o(!1),r(null),A(null)}});if(console.log("ðŸ” Render check - isSubjectFormOpen:",c,"selectedYear:",S),c)return console.log("ðŸ“ Rendering SubjectForm"),l.jsx(Oj,{year:S==null?void 0:S.number,yearType:M,onClose:()=>{u(!1),x(null)},onSave:async ne=>{try{await Ts({...ne,yearId:(S==null?void 0:S.id)||"",order:1}),u(!1),x(null)}catch(me){console.error("Error saving subject:",me),alert("Failed to save subject. Please try again.")}}});if(v){const ne=_?(Kt=I==null?void 0:I.lectures)==null?void 0:Kt.find(me=>me.id===_):null;return l.jsx(dm,{lecture:ne,subjectId:I==null?void 0:I.id,subjectName:I==null?void 0:I.name,yearType:M,onClose:()=>{b(!1),C(null),A(null)},onSave:async me=>{try{ne?await Ut(ne.id,me):await Cs(me),b(!1),C(null),A(null)}catch(Fe){console.error("Error saving lecture:",Fe),alert("Failed to save lecture. Please try again.")}}})}if(h)return l.jsx(Iw,{lectureId:_,onClose:()=>{p(!1),A(null)},onSave:async ne=>{I!=null&&I.id&&_&&await Is(I.id,_,ne),p(!1),A(null)}});if(g)return l.jsx(jw,{lectureId:_,onClose:()=>{y(!1),A(null)},onSave:async ne=>{I!=null&&I.id&&_&&await Fr(I.id,_,ne),y(!1),A(null)}});const zt=(ne,me)=>{var Fe,St;return l.jsxs(ve,{className:`border-l-4 ${me==="basic"?"border-l-blue-500":"border-l-red-500"}`,children:[l.jsx(Xe,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[ne.imageUrl?l.jsx("img",{src:ne.imageUrl,alt:`Year ${ne.yearNumber}`,className:"w-24 h-24 object-cover rounded-md flex-shrink-0",onError:lt=>{lt.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-24 h-24 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:me==="basic"?l.jsx(Ku,{className:"h-6 w-6 text-blue-600"}):l.jsx(Gu,{className:"h-6 w-6 text-red-600"})}),l.jsx(tt,{className:"flex flex-col",children:k===ne.id?l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(Ce,{value:O,onChange:lt=>L(lt.target.value),className:"w-48",placeholder:"Batch name"}),l.jsx(te,{size:"sm",onClick:async()=>{try{await(Xr==null?void 0:Xr(ne.id,{batchName:O,batch_name:O})),D(null),L("")}catch(lt){console.error(lt),alert("Failed to save batch name")}},children:"Save"}),l.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{D(null),L("")},children:"Cancel"})]}):l.jsx(l.Fragment,{children:ne.batchName?l.jsxs(l.Fragment,{children:[l.jsx(Jn,{to:`/admin/years/${ne.id}`,className:"text-lg font-bold text-foreground hover:underline",children:ne.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[l.jsxs("span",{className:"text-sm text-muted",children:["Year ",ne.yearNumber]}),ne.name&&l.jsxs("span",{className:"ml-2",children:["â€¢ ",ne.name]}),ne.academicSupervisor&&l.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ne.academicSupervisor]}),ne.cr&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ne.cr]}),ne.actor&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ne.actor]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs(Jn,{to:`/admin/years/${ne.id}`,className:"text-lg font-medium text-blue-600 hover:underline",children:["Year ",ne.yearNumber]}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[ne.name?l.jsx("span",{className:"mr-2",children:ne.name}):l.jsx("span",{className:"italic",children:"No batch name"}),ne.academicSupervisor&&l.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ne.academicSupervisor]}),ne.cr&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ne.cr]}),ne.actor&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ne.actor]})]})]})})})]}),l.jsx("div",{className:"flex items-center gap-2"})]})}),l.jsx(xe,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(gs,{className:"h-4 w-4 text-blue-600"}),l.jsx("span",{className:"font-semibold",children:"Subjects"}),l.jsxs(nn,{variant:"secondary",children:[((Fe=ne.subjects)==null?void 0:Fe.length)||0," subjects"]}),l.jsxs(nn,{variant:"outline",children:[(Zr||[]).filter(lt=>lt.yearId===ne.id).length," ","news"]})]}),l.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>js(ne,me),className:"flex items-center gap-1",children:[l.jsx(en,{className:"h-3 w-3"}),"Add Subject"]})]}),!ne.subjects||ne.subjects.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(gs,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),l.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No subjects added yet"}),l.jsx(te,{variant:"outline",size:"sm",onClick:()=>js(ne,me),children:"Add first subject"})]}):l.jsx("div",{className:"grid gap-4",children:(St=ne.subjects)==null?void 0:St.map(lt=>{var gt;return l.jsxs(ve,{className:"bg-secondary/10",children:[l.jsx(Xe,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[lt.imageUrl?l.jsx("img",{src:lt.imageUrl,alt:lt.name,className:"w-8 h-8 object-cover rounded",onError:Re=>{Re.currentTarget.style.display="none"}}):l.jsx(gs,{className:"h-5 w-5 text-blue-600"}),l.jsx(Jn,{to:`/admin/subjects/${lt.id}`,className:"font-medium text-lg text-blue-600 hover:underline",children:lt.name}),l.jsxs(nn,{variant:"outline",className:"text-xs",children:[((gt=lt.lectures)==null?void 0:gt.length)||0," lectures"]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>Ye(lt,me),className:"h-8 px-3 text-xs",children:[l.jsx(en,{className:"h-3 w-3 mr-1"}),"Add Lecture"]}),l.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:async()=>{if(confirm(`Delete subject "${lt.name}"? This will remove its lectures.`))try{await Jr(lt.id)}catch(Re){console.error(Re),alert("Failed to delete subject")}},children:l.jsx(Vn,{className:"h-3 w-3"})})]})]})}),lt.lectures&&lt.lectures.length>0&&l.jsx(xe,{className:"pt-0",children:l.jsxs("div",{className:"grid gap-3",children:[lt.lectures.slice(0,3).map(Re=>{var Gt,di,ar,As,Ps,hi,lr,qi,dl;return l.jsx(ve,{className:"bg-background border",children:l.jsx(xe,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:Re.imageUrl?l.jsx("img",{src:Re.imageUrl,alt:Re.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Ws,{className:"h-6 w-6 text-muted-foreground"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:Re.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:Re.description||"No description available"}),l.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[l.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>sn(Re.id,"videos"),className:`h-6 px-2 text-xs ${(Gt=$[Re.id])!=null&&Gt.videos?"bg-accent":""}`,children:[l.jsx(Py,{className:"h-3 w-3 mr-1"}),"Videos (",((di=Re.videos)==null?void 0:di.length)||0,")"]}),l.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>sn(Re.id,"files"),className:`h-6 px-2 text-xs ${(ar=$[Re.id])!=null&&ar.files?"bg-accent":""}`,children:[l.jsx(ti,{className:"h-3 w-3 mr-1"}),"Files (",((As=Re.files)==null?void 0:As.length)||0,")"]}),l.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>sn(Re.id,"quizzes"),className:`h-6 px-2 text-xs ${(Ps=$[Re.id])!=null&&Ps.quizzes?"bg-accent":""}`,children:[l.jsx(ki,{className:"h-3 w-3 mr-1"}),"Quizzes (",((hi=Re.quizzes)==null?void 0:hi.length)||0,")"]}),l.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{A(Re.id),C(lt),b(!0)},title:"Edit Lecture",children:l.jsx(Ai,{className:"h-3 w-3"})}),l.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${Re.name}"?`))try{await Nr(lt.id,Re.id)}catch($t){console.error($t),alert("Failed to delete lecture")}},children:l.jsx(Vn,{className:"h-3 w-3"})})]}),((lr=$[Re.id])==null?void 0:lr.videos)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Videos:"}),l.jsxs(te,{variant:"ghost",size:"xs",onClick:()=>mt(lt,Re.id),className:"h-6 px-2 text-xs",children:[l.jsx(en,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[Re.videos&&Re.videos.length>0?Re.videos.slice(0,4).map($t=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Py,{className:"h-3 w-3 text-blue-600"}),l.jsx("a",{href:$t.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate",children:$t.title||$t.name||"Untitled Video"})]},$t.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"}),Re.videos&&Re.videos.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Re.videos.length-4," more videos"]})]})]}),((qi=$[Re.id])==null?void 0:qi.files)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Files:"}),l.jsxs(te,{variant:"ghost",size:"xs",onClick:()=>_t(lt,Re.id),className:"h-6 px-2 text-xs",children:[l.jsx(en,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[Re.files&&Re.files.length>0?Re.files.slice(0,4).map($t=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ti,{className:"h-3 w-3 text-green-600"}),l.jsx("a",{href:$t.fileUrl||$t.url||"#",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 hover:underline truncate",onClick:hl=>{!$t.fileUrl&&!$t.url&&(hl.preventDefault(),alert("No file URL available"))},children:$t.title||$t.name||"Untitled File"})]},$t.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"}),Re.files&&Re.files.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Re.files.length-4," more files"]})]})]}),((dl=$[Re.id])==null?void 0:dl.quizzes)&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Quizzes:"}),l.jsxs(te,{variant:"ghost",size:"xs",onClick:()=>Bn(lt,Re.id),className:"h-6 px-2 text-xs",children:[l.jsx(en,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[Re.quizzes&&Re.quizzes.length>0?Re.quizzes.slice(0,4).map($t=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ki,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{className:"text-xs text-purple-600",children:$t.title||$t.name||"Untitled Quiz"})]},$t.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"}),Re.quizzes&&Re.quizzes.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Re.quizzes.length-4," more quizzes"]})]})]})]})]})})},Re.id)}),lt.lectures.length>3&&l.jsxs("div",{className:"text-center text-muted-foreground text-xs pt-2",children:["+",lt.lectures.length-3," more lectures"]})]})})]},lt.id)})})]})})]},ne.yearNumber)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Academic Years Management"}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("p",{className:"text-muted-foreground",children:"Manage curriculum by academic years, subjects, and lectures"})})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs(B9,{children:[l.jsx(q9,{asChild:!0,children:l.jsxs(te,{children:[l.jsx(Tk,{className:"h-4 w-4 mr-2"})," Add Batch"]})}),l.jsxs(jj,{children:[l.jsxs(Aj,{children:[l.jsx(Rj,{children:"Add Batch"}),l.jsx(kj,{children:"Create a new batch for grouping years"})]}),l.jsxs("div",{className:"space-y-3 mt-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Batch name"}),l.jsx(Ce,{value:J,onChange:ne=>he(ne.target.value),placeholder:"e.g., Batch A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"CR (optional)"}),l.jsx(Ce,{value:Ne,onChange:ne=>Ue(ne.target.value),placeholder:"Class representative"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Group Link (optional)"}),l.jsx(Ce,{value:Te,onChange:ne=>we(ne.target.value),placeholder:"WhatsApp/Telegram group link"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Graduate Date (optional)"}),l.jsx(Ce,{value:be,onChange:ne=>qe(ne.target.value),placeholder:"e.g., 2025-06-15",type:"date"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Academic Supervisor (optional)"}),l.jsx(Ce,{value:Me,onChange:ne=>rt(ne.target.value),placeholder:"e.g., Dr. Ahmed Hassan"})]})]}),l.jsxs(Pj,{className:"mt-4",children:[l.jsx(te,{onClick:async()=>{try{if(!J||!J.trim()){alert("Please provide a batch name");return}await($n==null?void 0:$n({batchName:J.trim(),cr:Ne==null?void 0:Ne.trim(),groupLink:Te==null?void 0:Te.trim(),group_link:Te==null?void 0:Te.trim(),graduateDate:be==null?void 0:be.trim(),graduate_date:be==null?void 0:be.trim(),academicSupervisor:Me==null?void 0:Me.trim(),academic_supervisor:Me==null?void 0:Me.trim()})),he(""),Ue(""),we(""),qe(""),rt("");const ne=document.querySelector("[data-dialog-close]");ne&&ne.click(),alert("Batch created")}catch(ne){console.error(ne),alert("Failed to create batch")}},children:"Create"}),l.jsx(H9,{asChild:!0,children:l.jsx(te,{variant:"ghost",className:"ml-2","data-dialog-close":!0,children:"Cancel"})})]})]})]})})]}),Ot&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(na,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading academic years..."})]})}),dn&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading years"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:dn}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(te,{onClick:Sr,variant:"outline",children:"Retry Connection"}),l.jsx(te,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!Ot&&!dn&&l.jsxs(l.Fragment,{children:[l.jsx(ve,{children:l.jsx(xe,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ce,{placeholder:"Search lectures, subjects, or content...",value:n,onChange:ne=>e(ne.target.value),className:"pl-10"})]})})}),l.jsx("div",{className:"space-y-6",children:!br||br.length===0?l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(gs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No batches found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a batch to start adding academic years."})]})}):st?(()=>{const ne=(br||[]).find(Fe=>Fe.id===st)||null,me=(zn||[]).filter(Fe=>(Fe.batchId||Fe.batch_name)===st);return l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[ne!=null&&ne.imageUrl?l.jsx("img",{src:ne.imageUrl,alt:ne.batchName,className:"w-40 h-40 object-cover rounded-md flex-shrink-0"}):l.jsx("div",{className:"w-40 h-40 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:l.jsx(gs,{className:"h-6 w-6 text-muted-foreground"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:(ne==null?void 0:ne.batchName)||"Batch"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:ne!=null&&ne.cr?`CR: ${ne.cr}`:""})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(te,{onClick:()=>{ge(null),Ie("/admin/years")},children:"Back to Batches"}),l.jsx(te,{size:"sm",variant:"ghost",onClick:async()=>{try{const Fe=document.createElement("input");Fe.type="file",Fe.accept="image/*",Fe.onchange=async()=>{var lt;const St=(lt=Fe.files)==null?void 0:lt[0];if(St)try{let gt=null;try{gt=await Er(St)}catch(Re){console.warn("Cloudinary upload failed, trying ImageKit",(Re==null?void 0:Re.message)||Re),gt=await qo(St,St.name)}if(!gt){alert("Upload failed");return}await(ln==null?void 0:ln(ne==null?void 0:ne.id,{image_url:gt,imageUrl:gt})),alert("Image updated")}catch(gt){console.error(gt),alert("Failed to upload image")}},Fe.click()}catch(Fe){console.error(Fe),alert("Could not open file dialog")}},children:"Change Image"}),l.jsxs(te,{onClick:async()=>{try{const Fe=window.prompt("Enter year number for this batch:");if(!Fe)return;const St=parseInt(Fe,10);if(isNaN(St)){alert("Invalid");return}await(It==null?void 0:It((ne==null?void 0:ne.id)||null,{yearNumber:St})),alert("Year created")}catch(Fe){console.error(Fe),alert("Failed")}},children:[l.jsx(en,{className:"h-4 w-4 mr-2"})," Add Year"]}),l.jsxs(te,{variant:"destructive",onClick:async()=>{try{if(!confirm("Delete this batch and all its years?"))return;await(wn==null?void 0:wn(ne==null?void 0:ne.id)),ge(null),Ie("/admin/years"),alert("Batch deleted")}catch(Fe){console.error(Fe),alert("Failed to delete batch")}},children:[l.jsx(Vn,{className:"h-4 w-4"})," Delete"]})]})]}),l.jsx("div",{className:"mt-4 space-y-4",children:me.length===0?l.jsx(ve,{children:l.jsx(xe,{className:"p-6 text-center",children:"No years in this batch yet."})}):me.sort((Fe,St)=>Fe.yearNumber-St.yearNumber).map(Fe=>l.jsx("div",{children:zt(Fe,Fe.type)},Fe.id))})]})})():l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:(br||[]).map(ne=>l.jsxs(ve,{className:"cursor-pointer flex flex-col overflow-hidden",onClick:()=>{Ie(`/admin/years?batch=${ne.id}`),ge(ne.id)},children:[l.jsx(Xe,{className:"flex-1",onClick:me=>k===ne.id&&me.stopPropagation(),children:l.jsxs("div",{className:"flex items-start gap-4",children:[ne.imageUrl?l.jsx("img",{src:ne.imageUrl,alt:ne.batchName,className:"w-56 h-56 object-cover rounded-md flex-shrink-0"}):l.jsx("div",{className:"w-56 h-56 rounded-md flex-shrink-0 bg-muted"}),l.jsx("div",{className:"flex-1 min-w-0",children:k===ne.id?l.jsxs("div",{className:"flex flex-col gap-2 w-full",onClick:me=>me.stopPropagation(),children:[l.jsx(Ce,{value:O,onChange:me=>L(me.target.value),placeholder:"Batch name",className:"w-full",onClick:me=>me.stopPropagation()}),l.jsx(Ce,{value:V||"",onChange:me=>R(me.target.value),placeholder:"CR",className:"w-full",onClick:me=>me.stopPropagation()}),l.jsx(Ce,{value:W,onChange:me=>K(me.target.value),placeholder:"Image URL (or upload)",className:"w-full",onClick:me=>me.stopPropagation()}),l.jsx(Ce,{value:X||"",onChange:me=>ie(me.target.value),placeholder:"Group Link",className:"w-full",onClick:me=>me.stopPropagation()}),l.jsx(Ce,{value:G||"",onChange:me=>oe(me.target.value),placeholder:"Graduate Date (e.g., 2025-06-15)",type:"date",className:"w-full",onClick:me=>me.stopPropagation()}),l.jsx(Ce,{value:le||"",onChange:me=>B(me.target.value),placeholder:"Academic Supervisor",className:"w-full",onClick:me=>me.stopPropagation()}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(te,{size:"sm",onClick:me=>{me.stopPropagation();try{const Fe=document.createElement("input");Fe.type="file",Fe.accept="image/*",Fe.onchange=async()=>{var lt;const St=(lt=Fe.files)==null?void 0:lt[0];if(St)try{let gt=null;try{gt=await Er(St)}catch(Re){console.warn("Cloudinary upload failed, trying ImageKit",(Re==null?void 0:Re.message)||Re),gt=await qo(St,St.name)}if(!gt){alert("Upload failed");return}K(gt)}catch(gt){console.error(gt),alert("Upload failed")}},Fe.click()}catch(Fe){console.error(Fe),alert("Could not open file dialog")}},children:"Upload"}),l.jsx(te,{size:"sm",onClick:async me=>{me.stopPropagation();try{await(ln==null?void 0:ln(ne.id,{batch_name:O,batchName:O,cr:V,image_url:W,imageUrl:W,group_link:X,groupLink:X,graduate_date:G,graduateDate:G,academic_supervisor:le,academicSupervisor:le})),D(null),L(""),R(""),K(""),ie(""),oe(""),B(""),alert("Saved")}catch(Fe){console.error(Fe),alert("Failed to save")}},children:"Save"}),l.jsx(te,{size:"sm",variant:"ghost",onClick:me=>{me.stopPropagation(),D(null),L(""),R(""),K(""),ie(""),oe(""),B("")},children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(tt,{className:"text-lg",children:ne.batchName||"Batch"}),l.jsxs(kt,{className:"text-sm text-muted-foreground space-y-1",children:[ne.cr&&l.jsxs("div",{children:["CR: ",ne.cr]}),(ne.academicSupervisor||ne.academic_supervisor)&&l.jsxs("div",{children:["Supervisor: ",ne.academicSupervisor||ne.academic_supervisor]}),ne.graduateDate&&l.jsxs("div",{children:["Graduate: ",ne.graduateDate]}),ne.groupLink&&l.jsx("a",{href:ne.groupLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",onClick:me=>me.stopPropagation(),children:"ðŸ“± Group Link"})]})]})})]})}),l.jsx(xe,{className:"mt-auto",onClick:me=>k===ne.id&&me.stopPropagation(),children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Years:"," ",(zn||[]).filter(me=>(me.batchId||me.batch_name)===ne.id).length]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(te,{size:"sm",variant:"outline",onClick:me=>{me.stopPropagation(),Ie(`/admin/years?batch=${ne.id}`),ge(ne.id)},children:"View Years"}),l.jsx(te,{size:"sm",variant:"ghost",onClick:me=>{me.stopPropagation(),D(ne.id),L(ne.batchName||""),R(ne.cr||""),K(ne.imageUrl||""),ie(ne.groupLink||ne.group_link||""),oe(ne.graduateDate||ne.graduate_date||""),B(ne.academicSupervisor||ne.academic_supervisor||"")},children:"Edit"}),l.jsx(te,{size:"sm",variant:"ghost",onClick:async me=>{me.stopPropagation();try{const Fe=document.createElement("input");Fe.type="file",Fe.accept="image/*",Fe.onchange=async()=>{var lt;const St=(lt=Fe.files)==null?void 0:lt[0];if(St)try{let gt=null;try{gt=await Er(St)}catch(Re){console.warn("Cloudinary upload failed, trying ImageKit",(Re==null?void 0:Re.message)||Re),gt=await qo(St,St.name)}if(!gt){alert("Upload failed");return}await(ln==null?void 0:ln(ne.id,{image_url:gt,imageUrl:gt})),alert("Image updated")}catch(gt){console.error(gt),alert("Failed to upload image")}},Fe.click()}catch(Fe){console.error(Fe),alert("Could not open file dialog")}},children:"Change Image"}),l.jsx(te,{size:"sm",variant:"destructive",onClick:async me=>{me.stopPropagation();try{if(!confirm("Delete this batch and all its years? This cannot be undone."))return;await(wn==null?void 0:wn(ne.id)),alert("Batch deleted")}catch(Fe){console.error(Fe),alert("Failed to delete batch")}},children:"Delete"})]})]})})]},ne.id))})})]})]})}function K$(){var U;const{id:n}=KN(),[e,t]=E.useState(!1),[r,s]=E.useState(!1),[o,c]=E.useState(null),[u,h]=E.useState(null),[p,g]=E.useState(""),{years:y,loading:v,updateYear:b,createSubject:S,createLecture:x,deleteSubject:_,deleteLecture:A}=Jc(),I=y.find($=>$.id===n);if(v)return l.jsx(ve,{children:l.jsx(xe,{className:"text-center py-12",children:"Loading..."})});if(!I)return l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"Year not found"}),l.jsx("div",{className:"flex gap-2 justify-center",children:l.jsx(Jn,{to:"/admin/years",children:l.jsx(te,{variant:"outline",children:"Back to Years"})})})]})});const C=async $=>{try{await S({...$,yearId:I.id}),t(!1)}catch(P){console.error(P),alert("Failed to add subject")}},M=async $=>{try{await x($),s(!1),c(null)}catch(P){console.error(P),alert("Failed to add lecture")}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Jn,{to:"/admin/years",children:l.jsxs(te,{variant:"ghost",children:[l.jsx(ii,{className:"h-4 w-4 mr-2"})," Back"]})}),l.jsxs("div",{children:[I.batchName?l.jsxs(l.Fragment,{children:[l.jsx("h1",{className:"text-2xl font-bold",children:I.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Year ",I.yearNumber]})]}):l.jsxs("h1",{className:"text-2xl font-bold",children:["Year ",I.yearNumber]}),l.jsx("p",{className:"text-muted-foreground",children:"Manage subjects and lectures for this year"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:!window.__yearEditing&&l.jsxs(l.Fragment,{children:[l.jsxs(te,{variant:"ghost",onClick:async()=>{try{const $=document.createElement("input");$.type="file",$.accept="image/*",$.onchange=async()=>{var k;const P=(k=$.files)==null?void 0:k[0];if(P)try{let D=null;try{D=await Er(P)}catch(O){console.warn("Cloudinary upload failed, attempting ImageKit fallback:",(O==null?void 0:O.message)||O);try{D=await qo(P,P.name)}catch(L){throw console.error("ImageKit upload also failed:",L),O}}if(!D||typeof D!="string"||!D.startsWith("http")){console.error("Invalid upload response:",D),alert("Image upload failed: unexpected response from upload provider"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:D,image_url:D})),window.__yearEditing=!1}catch(D){console.error(D);const L=((D==null?void 0:D.message)||String(D)||"").toLowerCase();if(L.includes("cloudinary cloud name is not configured")){const V=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!V){alert("No cloud name provided. Upload cancelled."),window.__yearEditing=!1;return}const R=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),W=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{qa(V,R||null,W||null);const K=await Er(P);if(console.log("Cloudinary upload result after config:",K),!K||typeof K!="string"||!K.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:K,image_url:K}))}catch(K){console.error(K),alert("Image upload failed after configuring Cloudinary: "+(K.message||K))}window.__yearEditing=!1;return}else if(L.includes("cloudinary signing did not return an api key")||L.includes("missing required parameter - api_key")||L.includes("missing required parameter 'api_key'")){const V=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(V&&V.trim())try{qa(null,null,V.trim());const R=await Er(P);if(!R||typeof R!="string"||!R.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:R,image_url:R})),window.__yearEditing=!1;return}catch(R){console.error(R),alert("Image upload failed after setting API key: "+(R.message||R)),window.__yearEditing=!1;return}}alert("Image upload failed: "+(D.message||D))}},$.click()}catch($){console.error($),alert("Could not open file dialog")}},children:[l.jsx(Dk,{className:"h-4 w-4 mr-2"})," ",I.imageUrl?"Change Image":"Add Image"]}),l.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("academicSupervisor"),g(I.academicSupervisor||I.acadmic_supervisor||"")},children:"Academic Supervisor"}),l.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("actor"),g(I.actor||"")},children:"Actor"}),l.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("groupUrl"),g(I.groupUrl||I.group_url||"")},children:"Group URL"}),l.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("batchName"),g(I.batchName||I.batch_name||"")},children:"Batch Name"}),I.imageUrl&&l.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm("Remove year image?"))try{await(b==null?void 0:b(I.id,{imageUrl:""}))}catch($){console.error($),alert("Failed to remove year image")}},children:l.jsx(Vn,{className:"h-3 w-3"})})]})})]}),u&&l.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[l.jsx(Ce,{placeholder:u==="image"?"Image URL":u==="groupUrl"?"Group URL":u==="academicSupervisor"?"Academic Supervisor":"Actor",value:p,onChange:$=>g($.target.value),className:"w-full max-w-2xl"}),l.jsx(te,{onClick:async()=>{try{const $={};u==="image"?$.imageUrl=p:u==="academicSupervisor"?($.academicSupervisor=p,$.acadmic_supervisor=p):u==="actor"?$.actor=p:u==="groupUrl"?($.groupUrl=p,$.group_url=p):u==="batchName"&&($.batchName=p,$.batch_name=p),await(b==null?void 0:b(I.id,$)),h(null),g(""),window.__yearEditing=!1}catch($){console.error($),alert("Failed to save field")}},children:"Save"}),l.jsx(te,{variant:"ghost",onClick:()=>{h(null),g(""),window.__yearEditing=!1},children:"Cancel"})]}),l.jsxs(ve,{children:[l.jsx(Xe,{children:l.jsxs(tt,{className:"flex items-center gap-2",children:["Subjects",l.jsxs(nn,{variant:"secondary",children:[((U=I.subjects)==null?void 0:U.length)||0," subjects"]})]})}),l.jsxs(xe,{children:[l.jsx("div",{className:"flex justify-end mb-4",children:l.jsxs(te,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-3 w-3"})," Add Subject"]})}),!I.subjects||I.subjects.length===0?l.jsx("div",{className:"text-center py-8",children:"No subjects added yet."}):l.jsx("div",{className:"grid gap-4",children:I.subjects.map($=>l.jsxs(ve,{className:"bg-secondary/10",children:[l.jsx(Xe,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[$.imageUrl?l.jsx("img",{src:$.imageUrl,alt:$.name,className:"w-8 h-8 object-cover rounded"}):l.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-lg",children:$.name}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[($.lectures||[]).length," lectures"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(te,{onClick:()=>{c($),s(!0)},variant:"ghost",size:"sm",children:"Add Lecture"}),l.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete subject "${$.name}"?`))try{await _($.id)}catch(P){console.error(P),alert("Failed to delete subject")}},children:l.jsx(Vn,{className:"h-3 w-3"})})]})]})}),$.lectures&&$.lectures.length>0&&l.jsx(xe,{children:l.jsx("div",{className:"grid gap-3",children:$.lectures.map(P=>l.jsx(ve,{className:"bg-background border",children:l.jsx(xe,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:P.imageUrl?l.jsx("img",{src:P.imageUrl,alt:P.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"No image"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:P.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:P.description||"No description available"})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${P.name}"?`))try{await A($.id,P.id)}catch(k){console.error(k),alert("Failed to delete lecture")}},children:l.jsx(Vn,{className:"h-3 w-3"})})})]})})},P.id))})})]},$.id))})]})]}),e&&l.jsx(Oj,{year:I.yearNumber,yearType:I.type,onClose:()=>t(!1),onSave:C}),r&&o&&l.jsx(dm,{subjectId:o.id,subjectName:o.name,yearType:I.type,onClose:()=>{s(!1),c(null)},onSave:M})]})}function G$({queryKey:n,queryFn:e,pageSize:t=10,enabled:r=!0,staleTime:s=5*60*1e3,gcTime:o=30*60*1e3}){var P,k;const c=fx(),{data:u,fetchNextPage:h,hasNextPage:p,isFetchingNextPage:g,isLoading:y,error:v,refetch:b}=gL({queryKey:[...n,t],queryFn:({pageParam:D=0})=>e(D,t),getNextPageParam:(D,O)=>{if(D.hasMore)return O.length},initialPageParam:0,enabled:r,staleTime:s,gcTime:o,refetchOnWindowFocus:!1,refetchOnMount:!1}),S=(u==null?void 0:u.pages.flatMap(D=>D.data))??[],x=u!=null&&u.pages.length?u.pages.length-1:0,_=((P=u==null?void 0:u.pages[x])==null?void 0:P.data)??[],A=((k=u==null?void 0:u.pages[0])==null?void 0:k.total)??0,I=D=>{var O;return((O=u==null?void 0:u.pages[D])==null?void 0:O.data)??[]},C=D=>((u==null?void 0:u.pages.length)??0)>D,M=()=>{p&&!g&&h()},U=D=>{c.setQueryData([...n,t],O=>{if(!O)return O;const L=[...O.pages];return L[D]&&L.splice(D,1),{...O,pages:L}})},$=()=>{c.invalidateQueries({queryKey:n})};return{data:_,allData:S,currentPage:x,totalPages:Math.ceil(A/t),totalCount:A,hasNextPage:p??!1,isLoading:y,isFetchingNextPage:g,error:v,loadNextPage:h,prefetchNextPage:M,getPage:I,isPageCached:C,invalidatePage:U,clearCache:$,refetch:b}}const Q$=10;async function Y$(n,e,t){var r;try{const s=or(vs(ze,"lectures"),Xc("order","asc")),o=await jt(s),c=[];for(const y of o.docs.slice(0,100)){const v=y.data(),b=y.id,S=y.ref,[x,_,A]=await Promise.all([jt(it(S,"files")),jt(it(S,"quizzes")),jt(it(S,"videos"))]),I=x.docs.map(U=>{var P;const $=U.data();return{id:U.id,title:$.title||"",fileUrl:$.url||$.fileUrl||"",fileType:$.fileType||"",fileSize:$.fileSize||"",description:$.description||"",uploadedAt:((P=$.uploadedAt)==null?void 0:P.toDate())||new Date,uploadedBy:$.uploadedBy||""}}),C=_.docs.map(U=>{var P;const $=U.data();return{id:U.id,title:$.title||"",description:$.description||"",questions:$.questions||[],timeLimit:$.duration||30,passingScore:$.passRate||70,createdAt:((P=$.createdAt)==null?void 0:P.toDate())||new Date,createdBy:$.uploadedBy||""}}),M=A.docs.map(U=>{var P,k;const $=U.data();return{id:U.id,title:$.title||$.name||"",youtubeUrl:$.url||$.youtubeUrl||"",thumbnailUrl:$.thumbnailUrl||$.thumbnail||"",duration:$.duration||$.time||"",description:$.description||"",uploadedAt:((k=(P=$.uploadedAt)==null?void 0:P.toDate)==null?void 0:k.call(P))||new Date,uploadedBy:$.uploadedBy||$.uploader||"",imageUrl:$.thumbnailUrl||""}});c.push({id:b,title:v.title||"",description:v.description||"",subject:v.subjectId||"Unknown",order:v.order||1,createdAt:((r=v.createdAt)==null?void 0:r.toDate())||new Date,createdBy:v.uploadedBy||"",videos:M,files:I,quizzes:C})}c.sort((y,v)=>(y.order||0)-(v.order||0));const u=n*e,h=u+e,p=c.slice(u,h),g=h<c.length;return{data:p,total:c.length,hasMore:g}}catch(s){throw console.error("Error fetching lectures page:",s),s}}function X$(n=Q$){return G$({queryKey:["lectures-paginated"],queryFn:Y$,pageSize:n,staleTime:5*60*1e3,gcTime:30*60*1e3})}function hm(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,o]=E.useState(null);return E.useEffect(()=>{const p=or(vs(ze,"lectures")),g=aa(p,async y=>{var b;const v=[];for(const S of y.docs){const x=S.data(),_=S.id,A=S.ref,I=await jt(it(A,"files")),C=[];I.forEach(k=>{var O;const D=k.data();C.push({id:k.id,title:D.title||"",fileUrl:D.url||D.fileUrl||"",fileType:D.fileType||"",fileSize:D.fileSize||"",description:D.description||"",uploadedAt:((O=D.uploadedAt)==null?void 0:O.toDate())||new Date,uploadedBy:D.uploadedBy||""})});const M=await jt(it(A,"quizzes")),U=[];M.forEach(k=>{var O;const D=k.data();U.push({id:k.id,title:D.title||"",description:D.description||"",questions:D.questions||[],timeLimit:D.duration||30,passingScore:D.passRate||70,createdAt:((O=D.createdAt)==null?void 0:O.toDate())||new Date,createdBy:D.uploadedBy||""})});const $=await jt(it(A,"videos")),P=[];$.empty?(x.videos||[]).forEach(D=>{var O,L;P.push({id:D.id||D.videoId||"",title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:((L=(O=D.uploadedAt)==null?void 0:O.toDate)==null?void 0:L.call(O))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}):$.forEach(k=>{var O,L;const D=k.data();P.push({id:k.id,title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:((L=(O=D.uploadedAt)==null?void 0:O.toDate)==null?void 0:L.call(O))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}),v.push({id:_,title:x.title||"",description:x.description||"",subject:x.subjectId||"Unknown",order:x.order||1,createdAt:((b=x.createdAt)==null?void 0:b.toDate())||new Date,createdBy:x.uploadedBy||"",videos:P,files:C,quizzes:U})}v.sort((S,x)=>(S.order||0)-(x.order||0)),e(v),r(!1)},y=>{console.error("Error fetching lectures:",y),o("Failed to fetch lectures"),r(!1)});return()=>g()},[]),{lectures:n,loading:t,error:s,createLecture:async(p,g)=>{try{const y=Vt(ze,"Subjects",g),v=it(y,"lectures"),{videos:b,files:S,quizzes:x,..._}=p,A=await Sn(v,{..._,videos:b,subjectId:g});if(S&&S.length>0){const I=it(A,"files");for(const C of S)await Sn(I,C)}if(x&&x.length>0){const I=it(A,"quizzes");for(const C of x)await Sn(I,C)}}catch(y){throw console.error("Error creating lecture:",y),y}},updateLecture:async(p,g)=>{try{const y=or(vs(ze,"lectures")),v=await jt(y);for(const b of v.docs)if(b.id===p){await mn(b.ref,g);break}}catch(y){throw console.error("Error updating lecture:",y),y}},deleteLecture:async p=>{try{const g=or(vs(ze,"lectures")),y=await jt(g);for(const v of y.docs)if(v.id===p){await Dr(v.ref);break}}catch(g){throw console.error("Error deleting lecture:",g),g}}}}const jA=({className:n,...e})=>l.jsx("nav",{role:"navigation","aria-label":"pagination",className:We("mx-auto flex w-full justify-center",n),...e});jA.displayName="Pagination";const AA=E.forwardRef(({className:n,...e},t)=>l.jsx("ul",{ref:t,className:We("flex flex-row items-center gap-1",n),...e}));AA.displayName="PaginationContent";const zf=E.forwardRef(({className:n,...e},t)=>l.jsx("li",{ref:t,className:We("",n),...e}));zf.displayName="PaginationItem";const fm=({className:n,isActive:e,size:t="icon",...r})=>l.jsx("a",{"aria-current":e?"page":void 0,className:We(NI({variant:e?"outline":"ghost",size:t}),n),...r});fm.displayName="PaginationLink";const PA=({className:n,...e})=>l.jsxs(fm,{"aria-label":"Go to previous page",size:"default",className:We("gap-1 pl-2.5",n),...e,children:[l.jsx(wk,{className:"h-4 w-4"}),l.jsx("span",{children:"Previous"})]});PA.displayName="PaginationPrevious";const RA=({className:n,...e})=>l.jsxs(fm,{"aria-label":"Go to next page",size:"default",className:We("gap-1 pr-2.5",n),...e,children:[l.jsx("span",{children:"Next"}),l.jsx(_k,{className:"h-4 w-4"})]});RA.displayName="PaginationNext";const kA=({className:n,...e})=>l.jsxs("span",{"aria-hidden":!0,className:We("flex h-9 w-9 items-center justify-center",n),...e,children:[l.jsx(Sk,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"More pages"})]});kA.displayName="PaginationEllipsis";function J$({currentPage:n,totalPages:e,totalCount:t,pageSize:r,hasNextPage:s,isLoading:o,isFetchingNextPage:c,cachedPages:u,onPageChange:h,onPageSizeChange:p,onLoadNext:g,pageSizeOptions:y=[5,10,20,50]}){const v=()=>{const b=[];if(e<=7)for(let x=0;x<e;x++)b.push(x);else if(n<3){for(let x=0;x<5;x++)b.push(x);b.push("ellipsis"),b.push(e-1)}else if(n>e-4){b.push(0),b.push("ellipsis");for(let x=e-5;x<e;x++)b.push(x)}else{b.push(0),b.push("ellipsis");for(let x=n-1;x<=n+1;x++)b.push(x);b.push("ellipsis"),b.push(e-1)}return b};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Qg,{className:"h-4 w-4"}),l.jsxs("span",{children:["Showing page ",n+1," of ",e," (",t," total)"]})]}),u.length>0&&l.jsxs(nn,{variant:"secondary",className:"gap-1",children:[l.jsx(Qg,{className:"h-3 w-3"}),u.length," page",u.length!==1?"s":""," cached"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-muted-foreground",children:"Items per page:"}),l.jsxs(NA,{value:r.toString(),onValueChange:b=>p(Number(b)),children:[l.jsx(Nw,{className:"w-20",children:l.jsx(TA,{})}),l.jsx(Tw,{children:y.map(b=>l.jsx(Cw,{value:b.toString(),children:b},b))})]})]})]}),l.jsx(jA,{children:l.jsxs(AA,{children:[l.jsx(zf,{children:l.jsx(PA,{onClick:()=>n>0&&h(n-1),className:n===0?"pointer-events-none opacity-50":"cursor-pointer"})}),v().map((b,S)=>l.jsx(zf,{children:b==="ellipsis"?l.jsx(kA,{}):l.jsxs(fm,{onClick:()=>h(b),isActive:b===n,className:"cursor-pointer",children:[b+1,u.includes(b)&&l.jsx(Qg,{className:"h-3 w-3 ml-1 text-primary"})]})},S)),l.jsx(zf,{children:l.jsx(RA,{onClick:()=>{s&&(g(),h(n+1))},className:s?"cursor-pointer":"pointer-events-none opacity-50"})})]})}),c&&l.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[l.jsx(na,{className:"h-4 w-4 animate-spin"}),l.jsx("span",{children:"Loading next page..."})]})]})}function U1(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,o]=E.useState(!1),[c,u]=E.useState(10),[h,p]=E.useState(0),[g,y]=E.useState(!1),[v,b]=E.useState(!1),[S,x]=E.useState(!1),[_,A]=E.useState(null),[I,C]=E.useState(null),[M,U]=E.useState(null),{data:$,allData:P,currentPage:k,totalPages:D,totalCount:O,hasNextPage:L,isLoading:V,isFetchingNextPage:R,error:W,loadNextPage:K,isPageCached:X,prefetchNextPage:ie}=X$(c),{createLecture:G,updateLecture:oe}=hm(),le=W?W.message:null,[B]=Pd(),J=B.get("lecture");B.get("tab");let Ne=n?P.filter(ge=>ge.title.toLowerCase().includes(n.toLowerCase())||ge.subject.toLowerCase().includes(n.toLowerCase())):$;J&&(Ne=P.filter(ge=>ge.id===J));const Ue=[];for(let ge=0;ge<=k;ge++)X(ge)&&Ue.push(ge);const Te=ge=>{p(ge),!X(ge)&&ge>k&&K()},we=ge=>{u(ge),p(0)};_e.useEffect(()=>{if(L&&!R){const ge=setTimeout(()=>{ie()},1e3);return()=>clearTimeout(ge)}},[L,R,ie]);const be=()=>{r(null),o(!0)},qe=ge=>{r(ge),o(!0)},Me=ge=>{A(ge),y(!0)},rt=ge=>{C(ge),b(!0)},st=ge=>{U(ge),x(!0)};return g?l.jsx(jw,{video:_,onClose:()=>{y(!1),A(null)},onSave:async ge=>{try{_&&(console.log("âœ… Video updated successfully"),alert("Video updated! The page will reload to show changes."),window.location.reload()),y(!1),A(null)}catch(Ie){console.error("Error saving video:",Ie),alert("Failed to save video")}}}):v?l.jsx(Iw,{file:I,onClose:()=>{b(!1),C(null)},onSave:async ge=>{try{I&&(console.log("âœ… File updated successfully"),alert("File updated! The page will reload to show changes."),window.location.reload()),b(!1),C(null)}catch(Ie){console.error("Error saving file:",Ie),alert("Failed to save file")}}}):S?l.jsx(Ew,{quiz:M,onClose:()=>{x(!1),U(null)},onSave:async ge=>{try{M&&(console.log("âœ… Quiz updated successfully"),alert("Quiz updated! The page will reload to show changes."),window.location.reload()),x(!1),U(null)}catch(Ie){console.error("Error saving quiz:",Ie),alert("Failed to save quiz")}}}):s?l.jsx(dm,{lecture:t,onClose:()=>{o(!1),r(null)},onSave:async ge=>{try{t?await oe(t.id,ge):await G(ge,"default-subject"),o(!1),r(null)}catch(Ie){console.error("Error saving lecture:",Ie)}}}):(J&&$.find(ge=>ge.id===J),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Resources Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Organize educational content by lectures with videos, files, and quizzes"})]}),l.jsxs(te,{onClick:be,className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-4 w-4"}),"Create Lecture"]})]}),l.jsx(ve,{children:l.jsx(xe,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ce,{placeholder:"Search lectures by title or subject...",value:n,onChange:ge=>e(ge.target.value),className:"pl-10"})]})})}),V&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(na,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading lectures..."})]})}),le&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading lectures"}),l.jsx("p",{className:"text-muted-foreground",children:le})]})}),!V&&!le&&l.jsx("div",{className:"space-y-6",children:Ne.map(ge=>l.jsxs(ve,{className:`hover:shadow-lg transition-all duration-200 border-l-4 ${J===ge.id?"border-l-primary bg-primary/5":"border-l-primary/20 hover:border-l-primary"}`,children:[l.jsx(Xe,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(gs,{className:"h-5 w-5 text-primary"}),l.jsx(tt,{className:"text-xl",children:ge.title}),l.jsx(nn,{variant:"secondary",children:ge.subject})]}),l.jsx(kt,{className:"text-base",children:ge.description}),l.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(bc,{className:"h-3 w-3"}),ge.createdBy]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(PS,{className:"h-3 w-3"}),ge.createdAt.toLocaleDateString()]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(te,{variant:"ghost",size:"icon",onClick:()=>qe(ge),children:l.jsx(Ai,{className:"h-4 w-4"})}),l.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:l.jsx(Vn,{className:"h-4 w-4"})})]})]})}),l.jsx(xe,{children:l.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(Ws,{className:"h-4 w-4 text-green-600"}),"Videos (",ge.videos.length,")"]}),ge.videos.length>0&&l.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{ge.videos.forEach(Ie=>window.open(Ie.youtubeUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Play All"})]}),ge.videos.length>0?l.jsx("div",{className:"space-y-2",children:ge.videos.map(Ie=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{const pt=Ie.youtubeUrl||Ie.url;pt&&pt!==""&&pt!=="#"?window.open(pt,"_blank"):alert("No URL available for this video. Click the edit button to add a URL.")},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[Ie.thumbnailUrl&&l.jsx("img",{src:Ie.thumbnailUrl,alt:Ie.title,className:"w-16 h-12 object-cover rounded"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(Ws,{className:"h-6 w-6 text-white"})})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:Ie.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(Bf,{className:"h-3 w-3"}),Ie.duration]})]})]})}),l.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:pt=>{pt.stopPropagation(),Me(Ie)},title:"Edit Video",children:l.jsx(Ai,{className:"h-4 w-4"})})]},Ie.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(ti,{className:"h-4 w-4 text-blue-600"}),"Files (",ge.files.length,")"]}),ge.files.length>0&&l.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{ge.files.forEach(Ie=>window.open(Ie.fileUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Download All"})]}),ge.files.length>0?l.jsx("div",{className:"space-y-2",children:ge.files.map(Ie=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{console.log("ðŸ” File clicked:",Ie),console.log("ðŸ”— File URL:",Ie.fileUrl),console.log("ðŸ”— Fallback URL:",Ie.url);const pt=Ie.fileUrl||Ie.url;console.log("ðŸš€ Opening URL:",pt),pt&&pt!==""&&pt!=="#"?window.open(pt,"_blank"):(console.error("âŒ No valid URL found"),alert(`No URL available for this file.
fileUrl: ${Ie.fileUrl}
url: ${Ie.url}`))},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(ti,{className:"h-4 w-4 text-blue-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:Ie.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(nn,{variant:"outline",className:"text-xs",children:Ie.fileType}),l.jsx("span",{children:Ie.fileSize})]})]})]})}),l.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:pt=>{pt.stopPropagation(),rt(Ie)},title:"Edit File",children:l.jsx(Ai,{className:"h-4 w-4"})})]},Ie.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(ki,{className:"h-4 w-4 text-purple-600"}),"Quizzes (",ge.quizzes.length,")"]}),ge.quizzes.length>0&&l.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{alert(`Starting all ${ge.quizzes.length} quizzes for: ${ge.title}`)},className:"h-6 px-2 text-xs",children:"Start All"})]}),ge.quizzes.length>0?l.jsx("div",{className:"space-y-2",children:ge.quizzes.map(Ie=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{alert(`Starting quiz: ${Ie.title}
Time limit: ${Ie.timeLimit} minutes
Passing score: ${Ie.passingScore}%`)},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(ki,{className:"h-4 w-4 text-purple-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:Ie.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(Bf,{className:"h-3 w-3"}),Ie.timeLimit,"min",l.jsx("span",{children:"â€¢"}),l.jsxs("span",{children:[Ie.passingScore,"% pass"]})]})]})]})}),l.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:pt=>{pt.stopPropagation(),st(Ie)},title:"Edit Quiz",children:l.jsx(Ai,{className:"h-4 w-4"})})]},Ie.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"})]})]})})]},ge.id))}),!V&&!le&&Ne.length===0&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(gs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No lectures found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No lectures match your search criteria.":"Start by creating your first lecture with videos, files, and quizzes."}),l.jsxs(te,{onClick:be,children:[l.jsx(en,{className:"h-4 w-4 mr-2"}),"Create Lecture"]})]})}),!V&&!le&&!n&&l.jsx(ve,{children:l.jsx(xe,{className:"pt-6",children:l.jsx(J$,{currentPage:k,totalPages:D,totalCount:O,pageSize:c,hasNextPage:L,isLoading:V,isFetchingNextPage:R,cachedPages:Ue,onPageChange:Te,onPageSizeChange:we,onLoadNext:K})})})]}))}function Z$({professor:n,onClose:e,onSave:t}){const[r,s]=E.useState({name:"",title:"",department:"",email:"",others:"",officeLocation:"",researchAreas:"",imageUrl:""}),[o,c]=E.useState(!1);E.useEffect(()=>{n&&s({name:n.name||"",title:n.title||"",department:n.department||"",email:n.email||"",others:n.others||"",officeLocation:n.officeLocation||"",researchAreas:(n.researchAreas||[]).join(", "),imageUrl:n.imageUrl||""})},[n]);const u=async h=>{h.preventDefault(),c(!0);try{const p={...r,researchAreas:r.researchAreas?r.researchAreas.split(",").map(g=>g.trim()).filter(Boolean):[]};t(p)}catch(p){console.error("Error saving professor:",p)}finally{c(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(te,{variant:"ghost",onClick:e,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Professor":"Add Professor"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update professor information":"Add a new professor to the faculty"})]})]})}),l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsxs(tt,{className:"flex items-center gap-2",children:[l.jsx(Ro,{className:"h-5 w-5"}),"Professor Information"]}),l.jsx(kt,{children:"Basic information about the professor"})]}),l.jsxs(xe,{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs(Oc,{className:"w-20 h-20",children:[l.jsx(Ed,{src:r.imageUrl,alt:r.name}),l.jsx(Dc,{children:l.jsx(Ro,{className:"w-8 h-8"})})]}),l.jsxs("div",{className:"space-y-2 flex-1",children:[l.jsx(Pe,{htmlFor:"imageUrl",children:"Profile Image URL"}),l.jsx(Ce,{id:"imageUrl",placeholder:"https://example.com/profile.jpg",value:r.imageUrl,onChange:h=>s(p=>({...p,imageUrl:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"name",children:"Full Name *"}),l.jsx(Ce,{id:"name",placeholder:"Dr. John Smith",value:r.name,onChange:h=>s(p=>({...p,name:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"title",children:"Title"}),l.jsx(Ce,{id:"title",placeholder:"e.g., Associate Professor",value:r.title,onChange:h=>s(p=>({...p,title:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Pe,{htmlFor:"department",className:"flex items-center gap-2",children:[l.jsx(vk,{className:"h-4 w-4"}),"Department"]}),l.jsx(Ce,{id:"department",placeholder:"Internal Medicine",value:r.department,onChange:h=>s(p=>({...p,department:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"others",children:"Others"}),l.jsx(Ce,{id:"others",placeholder:"Other contact or notes",value:r.others,onChange:h=>s(p=>({...p,others:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Pe,{htmlFor:"email",className:"flex items-center gap-2",children:[l.jsx(qf,{className:"h-4 w-4"}),"Email Address"]}),l.jsx(Ce,{id:"email",type:"email",placeholder:"john.smith@university.edu",value:r.email,onChange:h=>s(p=>({...p,email:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Pe,{htmlFor:"officeLocation",className:"flex items-center gap-2",children:[l.jsx(sd,{className:"h-4 w-4"}),"Office Location"]}),l.jsx(Ce,{id:"officeLocation",placeholder:"Medical Building, Room 301",value:r.officeLocation,onChange:h=>s(p=>({...p,officeLocation:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"researchAreas",children:"Research Areas"}),l.jsx(Ce,{id:"researchAreas",placeholder:"e.g., Cardiology, Epidemiology",value:r.researchAreas,onChange:h=>s(p=>({...p,researchAreas:h.target.value}))})]}),l.jsx("div",{className:"space-y-2",children:l.jsx("div",{})})]})]})]}),r.name&&l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Preview"}),l.jsx(kt,{children:"How the professor will appear in the system"})]}),l.jsx(xe,{children:l.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[l.jsxs(Oc,{className:"h-12 w-12",children:[l.jsx(Ed,{src:r.imageUrl,alt:r.name}),l.jsx(Dc,{children:l.jsx(Ro,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold",children:r.name}),l.jsx("p",{className:"text-sm text-muted-foreground",children:r.department}),l.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm text-muted-foreground",children:[r.email&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(qf,{className:"h-3 w-3"}),l.jsx("span",{children:r.email})]}),r.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(sd,{className:"h-3 w-3"}),l.jsx("span",{children:r.officeLocation})]}),r.others&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ro,{className:"h-3 w-3"}),l.jsx("span",{children:r.others})]})]})]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(te,{type:"submit",disabled:o,children:[l.jsx(ra,{className:"h-4 w-4 mr-2"}),o?"Saving...":n?"Update Professor":"Add Professor"]})]})]})]})}function eB(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,o]=E.useState(!1),{professors:c,loading:u,error:h,createProfessor:p,updateProfessor:g,deleteProfessor:y,isOfflineMode:v}=UI(),b=c.filter(x=>x.name.toLowerCase().includes(n.toLowerCase())||x.department.toLowerCase().includes(n.toLowerCase())||x.email.toLowerCase().includes(n.toLowerCase())),S=async x=>{if(window.confirm("Are you sure you want to delete this professor?"))try{await y(x)}catch(_){console.error("Error deleting professor:",_),alert("Failed to delete professor. Please try again.")}};return s?l.jsx(Z$,{professor:t,onClose:()=>{o(!1),r(null)},onSave:async x=>{try{t?await g(t.id,x):await p(x),o(!1),r(null)}catch(_){console.error("Error saving professor:",_),alert("Failed to save professor. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Professors Management"}),l.jsxs("p",{className:"text-muted-foreground",children:["Manage faculty information and profiles",v&&l.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:"â€¢ Working in offline mode"})]})]}),l.jsxs(te,{onClick:()=>o(!0),children:[l.jsx(en,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]}),l.jsx(ve,{children:l.jsx(xe,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ce,{placeholder:"Search professors by name, department, or email...",value:n,onChange:x=>e(x.target.value),className:"pl-10"})]})})}),u&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(na,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading professors..."})]})}),h&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading professors"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:b.map(x=>l.jsxs(ve,{className:"hover:shadow-md transition-shadow",children:[l.jsx(Xe,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs(Oc,{className:"h-12 w-12",children:[l.jsx(Ed,{src:x.imageUrl,alt:x.name}),l.jsx(Dc,{children:l.jsx(Ro,{className:"h-6 w-6"})})]}),l.jsxs("div",{children:[l.jsx(tt,{className:"text-lg",children:x.name}),l.jsx(nn,{variant:"secondary",className:"text-xs",children:x.department})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(te,{variant:"ghost",size:"icon",onClick:()=>{r(x),o(!0)},children:l.jsx(Ai,{className:"h-4 w-4"})}),l.jsx(te,{variant:"ghost",size:"icon",onClick:()=>S(x.id),className:"text-destructive hover:text-destructive",children:l.jsx(Vn,{className:"h-4 w-4"})})]})]})}),l.jsx(xe,{children:l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:x.title}),l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[l.jsx(qf,{className:"h-4 w-4"}),l.jsx("span",{children:x.email})]})]}),x.phone&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(Ro,{className:"h-4 w-4"}),l.jsx("span",{children:x.phone})]}),x.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(sd,{className:"h-4 w-4"}),l.jsx("span",{children:x.officeLocation})]}),x.bio&&l.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:x.bio}),x.researchAreas&&x.researchAreas.length>0&&l.jsx("div",{className:"flex gap-2 flex-wrap",children:x.researchAreas.map(_=>l.jsx(nn,{children:_},_))}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.website&&l.jsx("a",{href:x.website,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Website"}),x.linkedin&&l.jsx("a",{href:x.linkedin,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"LinkedIn"})]})]})})]},x.id))}),!u&&!h&&b.length===0&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(bc,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No professors found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No professors match your search criteria.":"Start by adding your first professor."}),l.jsxs(te,{onClick:()=>o(!0),children:[l.jsx(en,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]})})]})}const tB=[{id:"user_1",displayName:"Ali Ahmed",email:"ali.ahmed@example.com",role:"student",photoURL:"",createdAt:new Date},{id:"user_2",displayName:"Mona Hassan",email:"mona.hassan@example.com",role:"staff",photoURL:"",createdAt:new Date(Date.now()-1e3*60*60*24)}];function nB(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,o]=E.useState(null),[c,u]=E.useState(!1),{years:h}=Jc();return E.useEffect(()=>{const y=async()=>{try{const b=or(it(ze,"users"));await jt(b);const S=or(it(ze,"users"),Xc("createdAt","desc")),x=aa(S,_=>{const A=[];_.forEach(C=>{var k,D;const M=C.data(),U=M.yearId||M.year||M.year_id||M.yearId||null;let $=U,P="-";if(typeof U=="string"&&U.includes(":")){const[O,L]=U.split(":",2);$=O||null,L&&L.trim()&&(P=L.trim())}if($&&P==="-"){const O=h.find(L=>L.id===$);O&&(O.batchName?P=O.batchName:P=`Year ${{1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[O.yearNumber]||String(O.yearNumber)}`)}A.push({id:C.id,displayName:M.displayName||M.name||"",email:M.email||"",role:M.role||"student",photoURL:M.photoURL||M.avatar||"",createdAt:((D=(k=M.createdAt)==null?void 0:k.toDate)==null?void 0:D.call(k))||void 0,yearId:$||void 0,yearLabel:P})}),e(A);const I=Array.from(new Set(A.map(C=>C.yearId).filter(Boolean).filter(C=>!h.find(M=>M.id===C))));I.length>0&&Promise.all(I.map(async C=>{try{const U=(await jt(vs(ze,"years"))).docs.find(D=>D.id===C);if(!U)return null;const $=U.data(),P=$.yearNumber||$.order||(()=>{const D=($.name||"").match(/\d+/);return D?parseInt(D[0]):void 0})(),k=$.batchName||(P?`Year ${P}`:void 0)||void 0;return{id:C,label:k}}catch{return null}})).then(C=>{const M={};C.forEach(U=>{U&&U.id&&U.label&&(M[U.id]=U.label)}),Object.keys(M).length>0&&e(U=>U.map($=>$.yearId&&M[$.yearId]?{...$,yearLabel:M[$.yearId]}:$))}),r(!1)},_=>{console.error("Failed to listen to users:",_),v()});return()=>x()}catch(b){console.error("Failed to load users, entering offline mode:",b),v()}},v=()=>{u(!0),e(tB),r(!1),o(null)};y()},[]),E.useEffect(()=>{!h||h.length===0||e(y=>y.map(v=>{if(!v)return v;const b=v.yearId||null;if(!b)return v;const S=h.find(I=>I.id===b);if(!S)return v;const _={1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[S.yearNumber]||String(S.yearNumber),A=S.batchName?S.batchName:`Year ${_}`;return{...v,yearLabel:A}}))},[h]),{users:n,loading:t,error:s,updateUser:async(y,v)=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(b=>b.map(S=>S.id===y?{...S,...v}:S));return}try{await mn(Vt(ze,"users",y),v)}catch(b){console.error("Failed to update user:",b),e(S=>S.map(x=>x.id===y?{...x,...v}:x))}},deleteUser:async y=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(v=>v.filter(b=>b.id!==y));return}try{await Dr(Vt(ze,"users",y))}catch(v){console.error("Failed to delete user:",v),e(b=>b.filter(S=>S.id!==y))}},isOfflineMode:c}}function rB(){const{users:n,loading:e,error:t,updateUser:r,deleteUser:s}=nB(),o=async u=>{const h=u.role==="admin"?"user":"admin";await r(u.id,{role:h})},c=(u,h)=>{if(!u)return"-";const p=u.match(/(19|20)\d{2}/);if(p)return p[0];if(h)try{const g=new Date(h);if(!isNaN(g.getTime()))return String(g.getFullYear())}catch{}return"-"};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Lk,{className:"h-6 w-6 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold",children:"Users"})]}),l.jsxs(ve,{children:[l.jsx(Xe,{children:l.jsxs(tt,{children:["All Users (",n.length,")"]})}),l.jsx(xe,{children:e?l.jsx("div",{children:"Loading..."}):t?l.jsx("div",{className:"text-destructive",children:t}):n.length===0?l.jsx("div",{className:"text-muted-foreground",children:"No users found."}):(()=>{const u={};n.forEach(p=>{const g=p.yearLabel&&String(p.yearLabel).trim()!==""?String(p.yearLabel):"Unassigned";u[g]||(u[g]=[]),u[g].push(p)});const h=Object.keys(u).sort((p,g)=>{const y=p.match(/Year\s*(\d+)/i),v=g.match(/Year\s*(\d+)/i);return y&&v?parseInt(y[1],10)-parseInt(v[1],10):y?-1:v||p==="Unassigned"?1:g==="Unassigned"?-1:p.localeCompare(g)});return l.jsx("div",{className:"space-y-6",children:h.map(p=>l.jsxs("div",{children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsxs("h3",{className:"text-lg font-semibold",children:[p," ",l.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",u[p].length,")"]})]})}),l.jsx("div",{className:"space-y-2",children:u[p].map(g=>{var y;return l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[l.jsx(Oc,{className:"h-12 w-12",children:g.photoURL?l.jsx(Ed,{src:g.photoURL,alt:g.displayName}):l.jsx(Dc,{children:((y=g.displayName)==null?void 0:y[0])||"U"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:g.displayName}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:g.email}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",g.createdAt?new Date(g.createdAt).toLocaleString():"-",l.jsxs("span",{className:"ml-3",children:["Year: ",g.yearLabel||c(g.id,g.createdAt)]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(nn,{children:g.role||"user"}),l.jsx(te,{size:"sm",variant:"outline",onClick:()=>o(g),children:g.role==="admin"?"Demote":"Make Admin"}),l.jsx(te,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>s(g.id),children:l.jsx(Vn,{className:"h-4 w-4"})})]})]},g.id)})})]},p))})})()})]})]})}function sB(n){if(!n)return 0;if(typeof n=="number")return n;const e=String(n).trim();if(/^\d+$/.test(e))return parseInt(e,10);const t=e.split(":").map(r=>parseInt(r,10));return t.length===3?t[0]*3600+(t[1]||0)*60+(t[2]||0):t.length===2?(t[0]||0)*60+(t[1]||0):0}function iB(n){if(!n||n<=0)return"0:00";const e=Math.floor(n/3600),t=Math.floor(n%3600/60),r=n%60;return e>0?`${e}:${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${t}:${String(r).padStart(2,"0")}`}function oB(){var D;const{id:n}=KN(),e=Bc(),{years:t,subjects:r,loading:s,createLecture:o,deleteLecture:c,deleteSubject:u,addVideo:h,addFile:p,addQuiz:g}=Jc(),[y,v]=E.useState(null),[b,S]=E.useState(!1),[x,_]=E.useState(!1),[A,I]=E.useState(!1),[C,M]=E.useState(!1),U=r.find(O=>O.id===n),$=O=>{v(O||null),S(!0)},P=O=>{v(O||null),_(!0)},k=O=>{v(O||null),I(!0)};return b&&y?l.jsx(jw,{lectureId:y,onClose:()=>{S(!1),v(null)},onSave:async O=>{U!=null&&U.id&&y&&await h(U.id,y,O),S(!1),v(null)}}):x&&y?l.jsx(Iw,{lectureId:y,onClose:()=>{_(!1),v(null)},onSave:async O=>{U!=null&&U.id&&y&&await p(U.id,y,O),_(!1),v(null)}}):A&&y?l.jsx(Ew,{lectureId:y,onClose:()=>{I(!1),v(null)},onSave:async O=>{U!=null&&U.id&&y&&await g(U.id,y,O),I(!1),v(null)}}):C?l.jsx(dm,{subjectId:(U==null?void 0:U.id)||null,subjectName:U==null?void 0:U.name,yearType:(D=t.find(O=>O.id===(U==null?void 0:U.yearId)))==null?void 0:D.type,onClose:()=>M(!1),onSave:async O=>{U!=null&&U.id&&await o(O),M(!1)}}):s?l.jsx("div",{children:"Loading..."}):U?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:U.name}),l.jsx("p",{className:"text-muted-foreground",children:"Subject details and lectures"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(te,{variant:"outline",size:"sm",onClick:()=>M(!0),className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-4 w-4"}),"Add Lecture"]}),l.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(U&&confirm(`Delete subject "${U.name}"? This will remove all lectures.`))try{await u(U.id),e("/admin/years")}catch(O){console.error(O),alert("Failed to delete subject")}},children:l.jsx(Vn,{className:"h-4 w-4"})}),l.jsx(Jn,{to:"/admin/years",children:l.jsx(te,{variant:"ghost",children:"Back"})})]})]}),l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Lectures"}),l.jsx(kt,{children:"All lectures for this subject"})]}),l.jsx(xe,{children:l.jsx("div",{className:"grid gap-4",children:U.lectures&&U.lectures.length>0?U.lectures.map(O=>{var V,R;const L=O.imageUrl||O.videos&&O.videos[0]&&O.videos[0].thumbnailUrl||"";return l.jsxs("div",{className:"p-3 border rounded-md flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[L?l.jsx("img",{src:L,alt:O.name,width:1280,height:720,style:{width:160,height:90,objectFit:"cover"},className:"rounded"}):l.jsx("div",{className:"w-40 h-24 bg-muted rounded flex items-center justify-center text-xs",children:"No image"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:O.name}),l.jsx("div",{className:"text-sm text-muted-foreground",children:O.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>$(O.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Video",children:[l.jsx(Ws,{className:"h-3 w-3 text-blue-600"}),l.jsx("span",{children:"Add Video"})]}),l.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>P(O.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add File",children:[l.jsx(ti,{className:"h-3 w-3 text-green-600"}),l.jsx("span",{children:"Add File"})]}),l.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>k(O.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Quiz",children:[l.jsx(ki,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{children:"Add Quiz"})]}),l.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(U&&confirm(`Delete lecture "${O.name}"?`))try{await c(U.id,O.id)}catch(W){console.error(W),alert("Failed to delete lecture")}},children:l.jsx(Vn,{className:"h-3 w-3"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[O.videos&&O.videos.length>0?(()=>{const W=(O.videos||[]).reduce((K,X)=>K+sB(X.duration||X.time||X.durationSeconds||X.length),0);return l.jsxs("button",{onClick:()=>e(`/admin/videos?lecture=${O.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:[l.jsx(Ws,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",O.videos.length,")"]}),l.jsx("span",{className:"text-muted-foreground",children:iB(W)})]})})():l.jsx("button",{onClick:()=>e(`/admin/videos?lecture=${O.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:l.jsx(Ws,{className:"h-4 w-4"})}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${O.id}&tab=files`),className:"text-xs text-green-600 flex items-center gap-1 px-2",title:"Files",children:[l.jsx(ti,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((V=O.files)==null?void 0:V.length)||0,")"]})]}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${O.id}&tab=quizzes`),className:"text-xs text-purple-600 flex items-center gap-1 px-2",title:"Quizzes",children:[l.jsx(ki,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((R=O.quizzes)==null?void 0:R.length)||0,")"]})]})]})]})]},O.id)}):l.jsx("div",{className:"text-muted-foreground",children:"No lectures yet for this subject."})})})]})]}):l.jsx(ve,{children:l.jsxs(xe,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Subject not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"The subject you requested does not exist."}),l.jsx("div",{className:"mt-4",children:l.jsx(Jn,{to:"/admin/years",children:l.jsx(te,{children:"Back to Years"})})})]})})}var by="rovingFocusGroup.onEntryFocus",aB={bubbles:!1,cancelable:!0},pm="RovingFocusGroup",[zv,OA,lB]=Wv(pm),[cB,DA]=Ui(pm,[lB]),[uB,dB]=cB(pm),LA=E.forwardRef((n,e)=>l.jsx(zv.Provider,{scope:n.__scopeRovingFocusGroup,children:l.jsx(zv.Slot,{scope:n.__scopeRovingFocusGroup,children:l.jsx(hB,{...n,ref:e})})}));LA.displayName=pm;var hB=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:o,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:g=!1,...y}=n,v=E.useRef(null),b=Tt(e,v),S=bw(o),[x=null,_]=Ha({prop:c,defaultProp:u,onChange:h}),[A,I]=E.useState(!1),C=Tn(p),M=OA(t),U=E.useRef(!1),[$,P]=E.useState(0);return E.useEffect(()=>{const k=v.current;if(k)return k.addEventListener(by,C),()=>k.removeEventListener(by,C)},[C]),l.jsx(uB,{scope:t,orientation:r,dir:S,loop:s,currentTabStopId:x,onItemFocus:E.useCallback(k=>_(k),[_]),onItemShiftTab:E.useCallback(()=>I(!0),[]),onFocusableItemAdd:E.useCallback(()=>P(k=>k+1),[]),onFocusableItemRemove:E.useCallback(()=>P(k=>k-1),[]),children:l.jsx(Ge.div,{tabIndex:A||$===0?-1:0,"data-orientation":r,...y,ref:b,style:{outline:"none",...n.style},onMouseDown:$e(n.onMouseDown,()=>{U.current=!0}),onFocus:$e(n.onFocus,k=>{const D=!U.current;if(k.target===k.currentTarget&&D&&!A){const O=new CustomEvent(by,aB);if(k.currentTarget.dispatchEvent(O),!O.defaultPrevented){const L=M().filter(X=>X.focusable),V=L.find(X=>X.active),R=L.find(X=>X.id===x),K=[V,R,...L].filter(Boolean).map(X=>X.ref.current);VA(K,g)}}U.current=!1}),onBlur:$e(n.onBlur,()=>I(!1))})})}),MA="RovingFocusGroupItem",FA=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:o,...c}=n,u=Do(),h=o||u,p=dB(MA,t),g=p.currentTabStopId===h,y=OA(t),{onFocusableItemAdd:v,onFocusableItemRemove:b}=p;return E.useEffect(()=>{if(r)return v(),()=>b()},[r,v,b]),l.jsx(zv.ItemSlot,{scope:t,id:h,focusable:r,active:s,children:l.jsx(Ge.span,{tabIndex:g?0:-1,"data-orientation":p.orientation,...c,ref:e,onMouseDown:$e(n.onMouseDown,S=>{r?p.onItemFocus(h):S.preventDefault()}),onFocus:$e(n.onFocus,()=>p.onItemFocus(h)),onKeyDown:$e(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){p.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const x=mB(S,p.orientation,p.dir);if(x!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let A=y().filter(I=>I.focusable).map(I=>I.ref.current);if(x==="last")A.reverse();else if(x==="prev"||x==="next"){x==="prev"&&A.reverse();const I=A.indexOf(S.currentTarget);A=p.loop?gB(A,I+1):A.slice(I+1)}setTimeout(()=>VA(A))}})})})});FA.displayName=MA;var fB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function pB(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function mB(n,e,t){const r=pB(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return fB[r]}function VA(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function gB(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var yB=LA,vB=FA,Aw="Tabs",[xB,h8]=Ui(Aw,[DA]),UA=DA(),[wB,Pw]=xB(Aw),zA=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:o,orientation:c="horizontal",dir:u,activationMode:h="automatic",...p}=n,g=bw(u),[y,v]=Ha({prop:r,onChange:s,defaultProp:o});return l.jsx(wB,{scope:t,baseId:Do(),value:y,onValueChange:v,orientation:c,dir:g,activationMode:h,children:l.jsx(Ge.div,{dir:g,"data-orientation":c,...p,ref:e})})});zA.displayName=Aw;var $A="TabsList",BA=E.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,o=Pw($A,t),c=UA(t);return l.jsx(yB,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:r,children:l.jsx(Ge.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});BA.displayName=$A;var qA="TabsTrigger",WA=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...o}=n,c=Pw(qA,t),u=UA(t),h=GA(c.baseId,r),p=QA(c.baseId,r),g=r===c.value;return l.jsx(vB,{asChild:!0,...u,focusable:!s,active:g,children:l.jsx(Ge.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":p,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:h,...o,ref:e,onMouseDown:$e(n.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?c.onValueChange(r):y.preventDefault()}),onKeyDown:$e(n.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&c.onValueChange(r)}),onFocus:$e(n.onFocus,()=>{const y=c.activationMode!=="manual";!g&&!s&&y&&c.onValueChange(r)})})})});WA.displayName=qA;var HA="TabsContent",KA=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:o,...c}=n,u=Pw(HA,t),h=GA(u.baseId,r),p=QA(u.baseId,r),g=r===u.value,y=E.useRef(g);return E.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),l.jsx(Kv,{present:s||g,children:({present:v})=>l.jsx(Ge.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!v,id:p,tabIndex:0,...c,ref:e,style:{...n.style,animationDuration:y.current?"0s":void 0},children:v&&o})})});KA.displayName=HA;function GA(n,e){return`${n}-trigger-${e}`}function QA(n,e){return`${n}-content-${e}`}var _B=zA,YA=BA,XA=WA,JA=KA;const EB=_B,ZA=E.forwardRef(({className:n,...e},t)=>l.jsx(YA,{ref:t,className:We("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));ZA.displayName=YA.displayName;const $v=E.forwardRef(({className:n,...e},t)=>l.jsx(XA,{ref:t,className:We("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));$v.displayName=XA.displayName;const Bv=E.forwardRef(({className:n,...e},t)=>l.jsx(JA,{ref:t,className:We("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));Bv.displayName=JA.displayName;function bB({product:n,onClose:e,onSave:t}){const[r,s]=E.useState({name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",price:(n==null?void 0:n.price)||0,types:(n==null?void 0:n.types)||(n!=null&&n.price?[{name:"Default",price:n.price}]:[]),images:(n==null?void 0:n.images)||[""],categoryId:(n==null?void 0:n.categoryId)||""}),[o,c]=E.useState(!1),[u,h]=E.useState(null),p=async b=>{b.preventDefault(),c(!0);try{const S={...r,images:r.images.filter(x=>x.trim()!=="")};S.types&&S.types.length>0?(S.types=S.types.map(x=>({name:String(x.name||"").trim(),price:parseFloat(x.price)||0})),S.price=S.types[0].price||0):S.types=[],t(S)}catch(S){console.error("Error saving product:",S)}finally{c(!1)}},g=()=>{s(b=>({...b,images:[...b.images,""]}))},y=(b,S)=>{s(x=>({...x,images:x.images.map((_,A)=>A===b?S:_)}))},v=b=>{s(S=>({...S,images:S.images.filter((x,_)=>_!==b)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(te,{variant:"ghost",onClick:e,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Product":"Add Product"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update product details":"Create a new product"})]})]})}),l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsxs(tt,{className:"flex items-center gap-2",children:[l.jsx(Ay,{className:"h-5 w-5 text-blue-600"}),"Product Information"]}),l.jsx(kt,{children:"Basic information about the product"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"name",children:"Product Name *"}),l.jsx(Ce,{id:"name",placeholder:"e.g., Medical Textbook",value:r.name,onChange:b=>s(S=>({...S,name:b.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Types & Prices"}),l.jsxs("div",{className:"space-y-2",children:[r.types&&r.types.length>0?r.types.map((b,S)=>l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ce,{placeholder:"Type name (e.g., Pen)",value:b.name,onChange:x=>s(_=>({..._,types:_.types.map((A,I)=>I===S?{...A,name:x.target.value}:A)})),required:!0}),l.jsx(Ce,{type:"number",step:"0.01",placeholder:"0.00",value:b.price,onChange:x=>s(_=>({..._,types:_.types.map((A,I)=>I===S?{...A,price:parseFloat(x.target.value)||0}:A)})),required:!0,className:"w-32"}),l.jsx(te,{type:"button",variant:"ghost",onClick:()=>s(x=>({...x,types:x.types.filter((_,A)=>A!==S)})),children:"Remove"})]},S)):l.jsx("div",{className:"text-muted-foreground",children:"No types defined."}),l.jsx("div",{children:l.jsxs(te,{type:"button",variant:"outline",onClick:()=>s(b=>({...b,types:[...b.types||[],{name:"Default",price:0}]})),children:[l.jsx(en,{className:"h-4 w-4 mr-2"})," Add Type"]})})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"description",children:"Description"}),l.jsx(ei,{id:"description",placeholder:"Describe the product...",value:r.description,onChange:b=>s(S=>({...S,description:b.target.value})),rows:4})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"categoryId",children:"Category ID (Optional)"}),l.jsx(Ce,{id:"categoryId",placeholder:"e.g., books, equipment",value:r.categoryId,onChange:b=>s(S=>({...S,categoryId:b.target.value}))})]})]})]}),l.jsxs(ve,{children:[l.jsx(Xe,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(tt,{children:"Product Images"}),l.jsx(kt,{children:"Add image URLs for the product"})]}),l.jsxs(te,{type:"button",variant:"outline",onClick:g,children:[l.jsx(en,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})}),l.jsx(xe,{className:"space-y-4",children:r.images.map((b,S)=>l.jsxs("div",{className:`flex gap-2 items-center ${u===S?"border-2 border-dashed p-2 rounded":""}`,onDragOver:x=>{x.preventDefault(),h(S)},onDragEnter:x=>{x.preventDefault(),h(S)},onDragLeave:()=>{h(null)},onDrop:async x=>{x.preventDefault(),h(null);try{const _=x.dataTransfer;if(!_)return;if(_.files&&_.files.length>0){const I=_.files[0];try{let C=null;try{C=await Er(I)}catch(M){console.warn("Cloudinary upload failed, trying ImageKit fallback",(M==null?void 0:M.message)||M),C=await qo(I,I.name)}C&&typeof C=="string"&&C.startsWith("http")?y(S,C):alert("Upload failed: unexpected response from upload provider")}catch(C){console.error("Drop upload error:",C);const U=((C==null?void 0:C.message)||String(C)||"").toLowerCase();if(U.includes("cloudinary signing did not return an api key")||U.includes("missing required parameter - api_key")||U.includes("missing required parameter 'api_key'")){const $=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if($&&$.trim())try{qa(null,null,$.trim());const P=await Er(I);if(P&&typeof P=="string"&&P.startsWith("http")){y(S,P);return}}catch(P){console.error("Retry after API key failed:",P)}}alert("Upload failed: "+((C==null?void 0:C.message)||C))}return}const A=_.getData("text/uri-list")||_.getData("text/plain");if(A&&A.startsWith("http")){if(!window.confirm(`Upload the dragged URL to Cloudinary and replace it?
`+A))return;const C=await V1(A);C&&typeof C=="string"&&C.startsWith("http")?y(S,C):alert("Upload failed: unexpected response from server")}}catch(_){console.error("Drop upload error:",_),alert("Image upload failed: "+((_==null?void 0:_.message)||_))}},children:[l.jsx(Ce,{placeholder:"https://example.com/image.jpg",value:b,onChange:x=>y(S,x.target.value)}),l.jsx(te,{type:"button",variant:"ghost",size:"icon",onClick:async()=>{var x;try{const _=(x=r.images[S])==null?void 0:x.trim();if(_&&(_.startsWith("http://")||_.startsWith("https://"))){try{if(!window.confirm(`Upload the current URL to Cloudinary/ImageKit and replace it?
`+_))return;try{const C=await V1(_);if(C&&typeof C=="string"&&C.startsWith("http")){y(S,C);return}}catch(C){console.warn("uploadUrlToServer failed, will try ImageKit:",(C==null?void 0:C.message)||C)}try{const C=await qo(_);if(C&&typeof C=="string"&&C.startsWith("http")){y(S,C);return}else alert("Upload failed: unexpected response from ImageKit")}catch(C){console.error("ImageKit URL upload error:",C),alert("URL upload failed: "+((C==null?void 0:C.message)||C))}}catch(I){console.error("URL upload error:",I),alert("URL upload failed: "+((I==null?void 0:I.message)||I))}return}const A=document.createElement("input");A.type="file",A.accept="image/*",A.onchange=async()=>{var C;const I=(C=A.files)==null?void 0:C[0];if(I)try{let M=null;try{M=await Er(I)}catch(U){console.warn("Cloudinary upload failed, trying ImageKit fallback",(U==null?void 0:U.message)||U);try{M=await qo(I,I.name)}catch($){throw console.error("ImageKit upload failed:",$),U}}if(!M||typeof M!="string"||!M.startsWith("http")){alert("Upload failed: unexpected response from upload provider");return}y(S,M)}catch(M){const U=(M==null?void 0:M.message)||String(M);console.error("Upload error:",M);const $=(U||"").toLowerCase();if($.includes("cloudinary cloud name is not configured")){const P=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!P){alert("No cloud name provided.");return}const k=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),D=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");qa(P,k||null,D||null);try{const O=await Er(I);if(!O||typeof O!="string"||!O.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(S,O)}catch(O){console.error("Retry upload error:",O),alert("Upload failed after configuring Cloudinary: "+(O.message||O))}}else if($.includes("cloudinary signing did not return an api key")||$.includes("missing required parameter - api_key")||$.includes("missing required parameter 'api_key'")){const P=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(P&&P.trim())try{qa(null,null,P.trim());const k=await Er(I);if(!k||typeof k!="string"||!k.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(S,k);return}catch(k){console.error("Retry upload error:",k),alert("Upload failed after setting API key: "+(k.message||k));return}}else alert("Image upload failed: "+(M.message||M))}},A.click()}catch(_){console.error(_),alert("Could not open file dialog")}},children:l.jsx(jy,{className:"h-4 w-4"})}),r.images.length>1&&l.jsx(te,{type:"button",variant:"outline",size:"icon",onClick:()=>v(S),children:l.jsx(Sc,{className:"h-4 w-4"})})]},S))})]}),r.name&&l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Preview"}),l.jsx(kt,{children:"How the product will appear"})]}),l.jsx(xe,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-4",children:[r.images[0]&&r.images[0].trim()&&(()=>{const b=m2(r.images[0]);return l.jsx("img",{src:b||void 0,alt:r.name,className:"w-20 h-20 object-cover rounded",onError:S=>{S.currentTarget.style.display="none",console.warn("Product preview image failed to load:",b||r.images[0])}})})(),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:r.name}),l.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["$",r.price.toFixed(2)]}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.description}),r.categoryId&&l.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Category: ",r.categoryId]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(te,{type:"submit",disabled:o,children:[l.jsx(ra,{className:"h-4 w-4 mr-2"}),o?"Saving...":n?"Update Product":"Add Product"]})]})]})]})}function eP(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,o]=E.useState(null);return E.useEffect(()=>{const p=or(it(ze,"orders"),Xc("orderDate","desc")),g=aa(p,async y=>{try{const v=await jt(it(ze,"products")),b={};v.forEach(x=>{const _=x.data();b[x.id]={id:x.id,name:_.name||_.title||"",price:_.price||0}});const S=[];y.forEach(x=>{var $,P;const _=x.data();let A=[];_.items&&Array.isArray(_.items)&&_.items.length>0?A=_.items:_.productsIds&&Array.isArray(_.productsIds)&&(A=_.productsIds.map(k=>{var D,O;return{productId:k,name:((D=b[k])==null?void 0:D.name)||k,quantity:1,price:((O=b[k])==null?void 0:O.price)||0}}));const I=_.total||_.totalAmount||_.totalPrice||0,C=_.address||_.shippingaddress||_.shippingAddress||"",M=_.userPhone||_.user_phone||_.phone||"";let U=new Date;_.createdAt&&typeof _.createdAt.toDate=="function"?U=_.createdAt.toDate():_.orderDate&&typeof _.orderDate.toDate=="function"?U=_.orderDate.toDate():_.orderDate&&(U=new Date(_.orderDate)),S.push({id:x.id,userId:_.userId||_.user_id||"",username:_.username||_.userName||_.user_name||_.customerName||"",userName:_.userName||_.user_name||_.customerName||"",userEmail:_.userEmail||_.email||"",userPhone:M,address:C,items:A,total:I,iscompleted:_.iscompleted===!0||_.isCompleted===!0||!1,status:_.status||(_.iscompleted===!0?"completed":"pending"),createdAt:U,updatedAt:(P=($=_.updatedAt)==null?void 0:$.toDate)==null?void 0:P.call($)})}),e(S),r(!1)}catch(v){console.error("Error processing orders:",v),o("Failed to load orders"),r(!1)}},y=>{console.error("Failed to load orders:",y),o("Failed to load orders"),r(!1)});return()=>g()},[]),{orders:n,loading:t,error:s,createOrder:async p=>{try{await Sn(it(ze,"orders"),{...p,createdAt:new Date})}catch(g){console.error("Error creating order:",g)}},updateOrder:async(p,g)=>{try{const y={...g,updatedAt:new Date};(g.status==="completed"||g.isCompleted)&&(y.isCompleted=!0,y.iscompleted=!0,y.completedAt=new Date,y.status="completed"),await mn(Vt(ze,"orders",p),y)}catch(y){console.error("Error updating order:",y)}},deleteOrder:async p=>{try{await Dr(Vt(ze,"orders",p))}catch(g){console.error("Error deleting order:",g)}}}}function SB(){const[n,e]=E.useState(""),[t,r]=E.useState(!1),[s,o]=E.useState(null),{products:c,loading:u,error:h,isOfflineMode:p,createProduct:g,updateProduct:y,deleteProduct:v,retryConnection:b}=VI(),{createOrder:S}=eP(),x=()=>{o(null),r(!0)},_=C=>{o(C),r(!0)},A=async(C,M)=>{confirm(`Are you sure you want to delete "${M}"?`)&&await v(C)};if(t)return l.jsx(bB,{product:s,onClose:()=>{r(!1),o(null)},onSave:async C=>{try{s?await y(s.id,C):await g(C),r(!1),o(null)}catch(M){console.error("Error saving product:",M),alert("Failed to save product. Please try again.")}}});const I=c.filter(C=>C.name.toLowerCase().includes(n.toLowerCase())||C.description.toLowerCase().includes(n.toLowerCase()));return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Store Management"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-muted-foreground",children:"Manage store products and categories"}),p&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),u&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(na,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}),h&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading products"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:h}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(te,{onClick:b,variant:"outline",children:"Retry Connection"}),l.jsx(te,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!u&&!h&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[l.jsxs(ve,{children:[l.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(tt,{className:"text-sm font-medium",children:"Total Products"}),l.jsx(Ay,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(xe,{children:l.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),l.jsxs(ve,{children:[l.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(tt,{className:"text-sm font-medium",children:"Average Price"}),l.jsx(kS,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(xe,{children:l.jsxs("div",{className:"text-2xl font-bold",children:["$",c.length>0?(c.reduce((C,M)=>{const U=M.types&&M.types.length>0?M.types[0].price:M.price||0;return C+U},0)/c.length).toFixed(2):"0.00"]})})]}),l.jsxs(ve,{children:[l.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(tt,{className:"text-sm font-medium",children:"Categories"}),l.jsx(Qu,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(xe,{children:l.jsx("div",{className:"text-2xl font-bold",children:new Set(c.map(C=>C.categoryId).filter(C=>C&&C.trim())).size})})]})]}),l.jsxs(EB,{defaultValue:"products",className:"space-y-6",children:[l.jsxs(ZA,{className:"grid w-full grid-cols-2",children:[l.jsxs($v,{value:"products",className:"flex items-center gap-2",children:[l.jsx(Xv,{className:"h-4 w-4"}),"Products (",c.length,")"]}),l.jsxs($v,{value:"categories",className:"flex items-center gap-2",children:[l.jsx(Qu,{className:"h-4 w-4"}),"Categories"]})]}),l.jsxs(Bv,{value:"products",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"relative flex-1 max-w-sm",children:[l.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ce,{placeholder:"Search products...",value:n,onChange:C=>e(C.target.value),className:"pl-10"})]}),l.jsxs(te,{onClick:x,children:[l.jsx(en,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),I.length===0?l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(Ay,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:n?"No products found":"No products yet"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"Try adjusting your search terms":"Add your first product to get started"}),!n&&l.jsxs(te,{onClick:x,children:[l.jsx(en,{className:"h-4 w-4 mr-2"}),"Add First Product"]})]})}):l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:I.map(C=>l.jsxs(ve,{className:"overflow-hidden",children:[l.jsxs("div",{className:"aspect-video bg-muted relative",children:[C.images&&C.images[0]?l.jsx("img",{src:C.images[0],alt:C.name,className:"w-full h-full object-cover",onError:M=>{M.currentTarget.style.display="none";const U=M.currentTarget.nextElementSibling;U&&(U.style.display="flex")}}):null,l.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:C.images&&C.images[0]?"none":"flex"},children:l.jsx(jy,{className:"h-12 w-12 text-muted-foreground"})})]}),l.jsxs(Xe,{className:"pb-2",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx(tt,{className:"text-lg line-clamp-1",children:C.name}),C.types&&C.types.length>1&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[C.types.length," options available"]})]}),l.jsx("div",{className:"mt-2",children:C.types&&C.types.length>0?l.jsx("div",{className:"flex gap-2 flex-wrap",children:C.types.map((M,U)=>l.jsxs(nn,{variant:"secondary",className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:M.name}),l.jsxs("span",{className:"text-sm text-muted-foreground",children:["$",M.price.toFixed(2)]})]},U))}):l.jsxs("div",{className:"text-xl font-bold",children:["$",(C.price||0).toFixed(2)]})}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(te,{variant:"ghost",size:"icon",onClick:()=>_(C),className:"h-8 w-8",children:l.jsx(Ai,{className:"h-3 w-3"})}),l.jsx(te,{variant:"ghost",size:"icon",onClick:async()=>{try{const M=document.createElement("input");M.type="file",M.accept="image/*",M.onchange=async()=>{var $;const U=($=M.files)==null?void 0:$[0];if(U)try{let P=null;try{P=await Er(U)}catch(k){console.warn("Cloudinary upload failed, trying ImageKit fallback",(k==null?void 0:k.message)||k);try{P=await qo(U,U.name)}catch(D){throw console.error("ImageKit upload failed:",D),k}}if(!P||typeof P!="string"||!P.startsWith("http")){console.error("Invalid upload response:",P),alert("Image upload failed: unexpected response from upload provider");return}await y(C.id,{images:[P]})}catch(P){console.error(P);const D=((P==null?void 0:P.message)||String(P)||"").toLowerCase();if(D.includes("cloudinary cloud name is not configured")){const O=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!O){alert("No cloud name provided. Upload cancelled.");return}const L=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),V=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{qa(O,L||null,V||null);const R=await Er(U);if(console.log("Cloudinary upload result after config:",R),!R||typeof R!="string"||!R.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(C.id,{images:[R]})}catch(R){console.error(R),alert("Image upload failed after configuring Cloudinary: "+(R.message||R))}return}else if(D.includes("cloudinary signing did not return an api key")||D.includes("missing required parameter - api_key")||D.includes("missing required parameter 'api_key'")){const O=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(O&&O.trim())try{qa(null,null,O.trim());const L=await Er(U);if(!L||typeof L!="string"||!L.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(C.id,{images:[L]});return}catch(L){console.error(L),alert("Image upload failed after setting API key: "+(L.message||L));return}}alert("Image upload failed: "+(P.message||P))}},M.click()}catch(M){console.error(M),alert("Could not open file dialog")}},className:"h-8 w-8",children:l.jsx(jy,{className:"h-3 w-3"})}),l.jsx(te,{variant:"ghost",size:"icon",onClick:()=>A(C.id,C.name),className:"h-8 w-8 text-destructive hover:text-destructive",children:l.jsx(Vn,{className:"h-3 w-3"})}),l.jsx(te,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:async()=>{try{let M,U;if(C.types&&C.types.length>0)if(C.types.length===1)M=C.types[0].name,U=C.types[0].price;else{const R=C.types.map((X,ie)=>`${ie+1}. ${X.name} - $${X.price.toFixed(2)}`).join(`
`),W=window.prompt(`Select a type for "${C.name}":

${R}

Enter the number (1-${C.types.length}):`,"1");if(!W)return;const K=parseInt(W)-1;if(K<0||K>=C.types.length){alert("Invalid selection. Please try again.");return}M=C.types[K].name,U=C.types[K].price}else U=C.price||0;const $=window.prompt("Your full name:");if(!$)return;const P=window.prompt("Your email:");if(!P)return;const k=window.prompt("Quantity:","1")||"1",D=parseInt(k)||1,O=window.prompt("Phone (optional):","")||"",L=window.prompt("Address (optional):","")||"",V=M?`${C.name} (${M})`:C.name;await S({username:$,userName:$,userEmail:P,userPhone:O,address:L,items:[{productId:C.id,name:V,quantity:D,price:U,selectedType:M}],total:U*D,status:"pending",createdAt:new Date}),alert(`Order placed successfully!

Product: ${V}
Quantity: ${D}
Total: $${(U*D).toFixed(2)}`)}catch(M){console.error(M),alert("Failed to place order")}},children:C.types&&C.types.length>1?"Select & Buy":"Buy Now"})]})]}),l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",(C.types&&C.types.length>0?C.types[0].price:C.price||0).toFixed(2)]})]}),l.jsxs(xe,{className:"pt-0",children:[C.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:C.description}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[l.jsx("span",{children:C.createdAt.toLocaleDateString()}),C.categoryId&&l.jsx(nn,{variant:"secondary",className:"text-xs",children:C.categoryId})]})]})]},C.id))})]}),l.jsxs(Bv,{value:"categories",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Categories"}),l.jsxs(te,{disabled:!0,children:[l.jsx(en,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(Qu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Category Management"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Category management will be implemented in the future."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"For now, you can specify category IDs when creating products."})]})})]})]})]})]})}function NB({order:n,onChangeStatus:e,onDelete:t}){var r,s;return l.jsxs(ve,{children:[l.jsx(Xe,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(tt,{children:["Order for ",n.username||n.userName,l.jsx("div",{className:"text-xs text-muted-foreground",children:(s=(r=n.createdAt)==null?void 0:r.toLocaleString)==null?void 0:s.call(r)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(nn,{variant:n.status==="completed"||n.iscompleted?"default":"secondary",children:[n.status,n.iscompleted?" â€¢ completed":""]}),l.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>e(n.id,"completed"),children:[l.jsx(iE,{className:"h-4 w-4 mr-1"})," Complete"]}),l.jsx(te,{variant:"ghost",size:"icon",onClick:()=>t(n.id),className:"text-destructive",children:l.jsx(Vn,{className:"h-4 w-4"})})]})]})}),l.jsxs(xe,{children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact"}),l.jsx("div",{className:"font-medium",children:n.username||n.userName}),l.jsx("div",{className:"text-sm",children:n.userEmail}),n.userPhone&&l.jsx("div",{className:"text-sm",children:n.userPhone}),n.address&&l.jsx("div",{className:"text-sm",children:n.address})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Items"}),l.jsxs("div",{className:"space-y-2 mt-2",children:[n.items&&n.items.length>0?n.items.map((o,c)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm",children:[o.name," x",o.quantity]}),l.jsxs("div",{className:"font-medium",children:["$",(o.price*o.quantity).toFixed(2)]})]},c)):l.jsx("div",{className:"text-sm text-muted-foreground",children:"No item details. Products IDs may be attached in the raw order."}),n.productsIds&&n.productsIds.length>0&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Product IDs: ",(n.productsIds||[]).join(", ")]}),l.jsxs("div",{className:"flex items-center justify-between pt-2 border-t mt-2",children:[l.jsx("div",{className:"font-medium",children:"Total"}),l.jsxs("div",{className:"font-bold",children:["$",(n.total||0).toFixed(2)]})]})]})]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsxs(te,{onClick:()=>e(n.id,"paid"),children:[l.jsx(iE,{className:"h-4 w-4 mr-2"})," Mark Paid"]}),l.jsxs(te,{variant:"outline",onClick:()=>e(n.id,"cancelled"),children:[l.jsx(bk,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]})]},n.id)}function TB(){const{orders:n,loading:e,error:t,updateOrder:r,deleteOrder:s}=eP(),o=async(u,h)=>{u&&await r(u,{status:h})},c=async u=>{u&&confirm("Delete this order?")&&await s(u)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Orders"}),l.jsx("p",{className:"text-muted-foreground",children:"View and manage store orders"})]})}),e&&l.jsx("div",{children:"Loading..."}),t&&l.jsx("div",{className:"text-destructive",children:t}),!e&&!t&&l.jsx("div",{className:"grid gap-4",children:n.map(u=>l.jsx(NB,{order:u,onChangeStatus:o,onDelete:c},u.id))})]})}function Rw(n,e){const[t,r]=E.useState([]),[s,o]=E.useState(!0),[c,u]=E.useState(null);return E.useEffect(()=>{let h=null,p=!0;return(async()=>{if(!n){r([]),o(!1);return}try{const y=or(vs(ze,"lectures"),T5(g5(),"==",n)),v=await jt(y);if(v.empty){p&&(r([]),o(!1));return}const b=v.docs[0],S=it(b.ref,e);h=aa(S,x=>{if(!p)return;const _=[];x.forEach(A=>{const I=A.data();_.push({id:A.id,...I})}),r(_),o(!1)},x=>{console.error(`Failed to subscribe to ${e}:`,x),u(`Failed to load ${e}`),o(!1)})}catch(y){console.error(`Error resolving lecture for ${e}:`,y),p&&(u(y.message||String(y)),o(!1))}})(),()=>{p=!1,h&&h()}},[n,e]),{items:t,loading:s,error:c}}function CB(n){return Rw(n,"videos")}function IB(n){return Rw(n,"files")}function tP(n){return Rw(n,"quizzes")}function jB(){var p;const[n]=Pd(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=hm(),{items:o,loading:c,error:u}=CB(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Videos for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Jn,{to:"/admin/resources",children:l.jsx(te,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ve,{children:[l.jsx(Xe,{children:l.jsxs(tt,{children:["Videos (",((p=h.videos)==null?void 0:p.length)||0,")"]})}),l.jsx(xe,{children:o&&o.length>0?l.jsx("div",{className:"space-y-3",children:o.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[g.thumbnailUrl?l.jsx("img",{src:g.thumbnailUrl,alt:g.title,className:"w-32 h-18 object-cover rounded"}):l.jsx("div",{className:"w-32 h-18 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsxs(te,{onClick:()=>window.open(g.url||g.youtubeUrl||"","_blank"),children:[" ",l.jsx(Ws,{className:"h-4 w-4 mr-2"})," Play "]})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No videos available for this lecture."})})]})]}):l.jsx(ve,{children:l.jsxs(xe,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its videos."}),l.jsx("div",{className:"mt-4",children:l.jsx(Jn,{to:"/admin/years",children:l.jsx(te,{children:"Back to Years"})})})]})})}function AB(){var p;const[n]=Pd(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=hm(),{items:o,loading:c,error:u}=IB(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Files for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Jn,{to:"/admin/resources",children:l.jsx(te,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ve,{children:[l.jsx(Xe,{children:l.jsxs(tt,{children:["Files (",((p=h.files)==null?void 0:p.length)||0,")"]})}),l.jsx(xe,{children:o&&o.length>0?l.jsx("div",{className:"space-y-3",children:o.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ti,{className:"h-6 w-6 text-blue-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||g.name||"Untitled File"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsx(te,{onClick:()=>window.open(g.fileUrl||g.url||"_blank"),children:"Download"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No files available for this lecture."})})]})]}):l.jsx(ve,{children:l.jsxs(xe,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its files."}),l.jsx("div",{className:"mt-4",children:l.jsx(Jn,{to:"/admin/years",children:l.jsx(te,{children:"Back to Years"})})})]})})}function PB(){var p;const[n]=Pd(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=hm(),{items:o,loading:c,error:u}=tP(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Quizzes for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Jn,{to:"/admin/resources",children:l.jsx(te,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ve,{children:[l.jsx(Xe,{children:l.jsxs(tt,{children:["Quizzes (",((p=h.quizzes)==null?void 0:p.length)||0,")"]})}),l.jsx(xe,{children:o&&o.length>0?l.jsx("div",{className:"space-y-3",children:o.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ki,{className:"h-6 w-6 text-purple-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled Quiz"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("strong",{children:g.type||"multiple_choice"})]})]})]}),l.jsx("div",{children:(g.type||"multiple_choice")==="flashcard"?l.jsx(te,{onClick:()=>window.location.href=`/admin/flashcards?lecture=${e}&quiz=${g.id}`,children:"Flashcards"}):l.jsx(te,{onClick:()=>alert("Multiple choice runner not implemented. Use Flashcards or implement MCQ runner."),children:"Start"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No quizzes available for this lecture."})})]})]}):l.jsx(ve,{children:l.jsxs(xe,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its quizzes."}),l.jsx("div",{className:"mt-4",children:l.jsx(Jn,{to:"/admin/years",children:l.jsx(te,{children:"Back to Years"})})})]})})}var kw="Progress",Ow=100,[RB,f8]=Ui(kw),[kB,OB]=RB(kw),nP=E.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:s,getValueLabel:o=DB,...c}=n;(s||s===0)&&!z1(s)&&console.error(LB(`${s}`,"Progress"));const u=z1(s)?s:Ow;r!==null&&!$1(r,u)&&console.error(MB(`${r}`,"Progress"));const h=$1(r,u)?r:null,p=Ep(h)?o(h,u):void 0;return l.jsx(kB,{scope:t,value:h,max:u,children:l.jsx(Ge.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":Ep(h)?h:void 0,"aria-valuetext":p,role:"progressbar","data-state":iP(h,u),"data-value":h??void 0,"data-max":u,...c,ref:e})})});nP.displayName=kw;var rP="ProgressIndicator",sP=E.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,s=OB(rP,t);return l.jsx(Ge.div,{"data-state":iP(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});sP.displayName=rP;function DB(n,e){return`${Math.round(n/e*100)}%`}function iP(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function Ep(n){return typeof n=="number"}function z1(n){return Ep(n)&&!isNaN(n)&&n>0}function $1(n,e){return Ep(n)&&!isNaN(n)&&n<=e&&n>=0}function LB(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ow}\`.`}function MB(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ow} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var oP=nP,FB=sP;const aP=E.forwardRef(({className:n,value:e,...t},r)=>l.jsx(oP,{ref:r,className:We("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:l.jsx(FB,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));aP.displayName=oP.displayName;function VB(){const[n]=Pd(),e=n.get("lecture"),t=n.get("quiz"),{items:r,loading:s,error:o}=tP(e),c=r.find(V=>V.id===t),[u,h]=E.useState(0),[p,g]=E.useState([]);if(s)return l.jsx("div",{children:"Loading..."});if(o)return l.jsx("div",{className:"text-destructive",children:o});if(!c)return l.jsx(ve,{children:l.jsxs(xe,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Quiz not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a quiz to start flashcards."}),l.jsx("div",{className:"mt-4",children:l.jsx(Jn,{to:"/admin/quizzes",children:l.jsx(te,{children:"Back"})})})]})});const y=c.questions||[],v=y.reduce((V,R)=>V+(R.weight&&Number(R.weight)||1),0),b=y[u],S=b&&(b.weight||1)||1,x=p[u]??0,[_,A]=E.useState(!1),[I,C]=E.useState([]),[M,U]=E.useState(null);E.useEffect(()=>{A(!1),C([]),U(null)},[u]);const $=(V,R)=>{const W=[...p];W[V]=R,g(W)},P=p.reduce((V,R,W)=>V+(R||0),0),k=Math.round(P/v*100),D=V=>{if(!V)return[{type:"text",value:""}];const R=[],W=/\[\[(.+?)\]\]/g;let K=0,X;for(;(X=W.exec(V))!==null;)X.index>K&&R.push({type:"text",value:V.slice(K,X.index)}),R.push({type:"blank",value:X[1]}),K=W.lastIndex;return K<V.length&&R.push({type:"text",value:V.slice(K)}),R},O=()=>{const V=(b==null?void 0:b.question)||"",W=D(V).filter(K=>K.type==="blank");W.length>0?C(W.map(()=>"")):C([""]),U(null),A(!0)},L=()=>{const V=(b==null?void 0:b.question)||"",W=D(V).filter(G=>G.type==="blank").map(G=>G.value);let K=[];W.length>0?K=W:b&&Array.isArray(b.options)&&typeof b.correctAnswer=="number"?K=[b.options[b.correctAnswer]||""]:b&&(b.answer||b.correct)&&(K=[String(b.answer||b.correct)]);const ie=I.map((G,oe)=>{const le=(K[oe]??K[0]??"").toString().trim().toLowerCase();return G.toString().trim().toLowerCase()===le&&le!==""}).every(Boolean);U(ie?"Correct":"Incorrect"),ie&&$(u,S)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Flashcards: ",c.title]}),l.jsx("p",{className:"text-muted-foreground",children:"Fill marks per question. Total progress shows weighted score."})]}),l.jsx("div",{children:l.jsx(Jn,{to:"/admin/quizzes",children:l.jsx(te,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ve,{children:[l.jsx(Xe,{children:l.jsx(tt,{children:"Progress"})}),l.jsxs(xe,{children:[l.jsxs("div",{className:"mb-2 text-sm",children:["Total: ",v," points â€” Current: ",P," points"]}),l.jsx(aP,{value:k}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[k,"%"]})]})]}),l.jsxs(ve,{children:[l.jsx(Xe,{children:l.jsxs(tt,{children:["Question ",u+1," / ",y.length]})}),l.jsx(xe,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"font-medium",children:_?l.jsxs("div",{className:"space-y-2",children:[(()=>{const V=D(b.question||"");let R=0;return l.jsxs("div",{children:[V.map((W,K)=>{if(W.type==="text")return l.jsx("span",{children:W.value},K);const X=R++;return l.jsx("input",{value:I[X]??"",onChange:ie=>C(G=>{const oe=[...G];return oe[X]=ie.target.value,oe}),placeholder:"Fill the blank",className:"border-b-2 border-gray-300 px-1 mx-1"},K)}),V.length===1&&V[0].type==="text"&&l.jsx("div",{children:l.jsx("input",{value:I[0]??"",onChange:W=>C(K=>{const X=[...K];return X[0]=W.target.value,X}),placeholder:"Answer",className:"border-b-2 border-gray-300 px-1"})})]})})(),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx(te,{onClick:L,children:"Check"}),l.jsx(te,{variant:"outline",onClick:()=>{A(!1),U(null)},children:"Cancel"}),M&&l.jsx("div",{className:"ml-2 text-sm",children:M})]})]}):l.jsx("span",{role:"button",tabIndex:0,onClick:O,onKeyDown:V=>{V.key==="Enter"&&O()},children:b.question})}),b.imageUrl&&l.jsx("img",{src:b.imageUrl,alt:"question",className:"w-full max-w-md object-contain"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Weight: ",S]}),l.jsxs("label",{className:"text-sm",children:["Mark (0 - ",S,")"]}),l.jsx("input",{type:"number",min:0,max:S,value:x,onChange:V=>$(u,Math.max(0,Math.min(S,Number(V.target.value)||0))),className:"border rounded px-2 py-1 w-24"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(te,{disabled:u===0,onClick:()=>h(V=>Math.max(0,V-1)),children:"Previous"}),l.jsx(te,{disabled:u===y.length-1,onClick:()=>h(V=>Math.min(y.length-1,V+1)),children:"Next"}),l.jsx(te,{variant:"outline",onClick:()=>{g([]),h(0)},children:"Reset"})]}),l.jsx("div",{className:"mt-4",children:l.jsx(te,{onClick:()=>alert(`Final score: ${P}/${v} (${k}%)`),children:"Finish"})})]})})]})]})}function UB(){return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),l.jsx("p",{className:"text-muted-foreground",children:"Configure application settings and preferences"})]}),l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(DS,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"This section will provide configuration options for the admin panel."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Features: User management, system configuration, backup settings, security options."})]})})]})}function zB(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,o]=E.useState(null);return E.useEffect(()=>{const p=or(it(ze,"maps")),g=aa(p,y=>{const v=[];y.forEach(b=>{var x,_;const S=b.data();v.push({id:b.id,name:S.name||"",location:S.location||"",description:S.description||S.desc||"",type:S.type||S.mapType||"",video_url:S.video_url||S.videoUrl||"",createdAt:((_=(x=S.createdAt)==null?void 0:x.toDate)==null?void 0:_.call(x))||void 0})}),e(v),r(!1)},y=>{console.error("Failed to load maps:",y),o("Failed to load maps"),r(!1)});return()=>g()},[]),{maps:n,loading:t,error:s,createMap:async p=>{const g={...p,createdAt:new Date};g.type&&!g.mapType&&(g.mapType=g.type),g.mapType&&!g.type&&(g.type=g.mapType),["name","location","description","video_url","type","mapType"].forEach(y=>{typeof g[y]=="string"&&(g[y]=g[y].trim())}),await Sn(it(ze,"maps"),g)},updateMap:async(p,g)=>{const y={...g};y.type&&!y.mapType&&(y.mapType=y.type),y.mapType&&!y.type&&(y.type=y.mapType),["name","location","description","video_url","type","mapType"].forEach(v=>{typeof y[v]=="string"&&(y[v]=y[v].trim())}),await mn(Vt(ze,"maps",p),y)},deleteMap:async p=>{await Dr(Vt(ze,"maps",p))}}}function $B(){const{maps:n,loading:e,error:t,createMap:r,updateMap:s,deleteMap:o}=zB(),[c,u]=E.useState({name:"",location:"",description:"",video_url:"",type:""}),[h,p]=E.useState(!1),[g,y]=E.useState(null),v=()=>u({name:"",location:"",description:"",video_url:"",type:""}),b=async S=>{if(S.preventDefault(),!!c.name.trim()){p(!0);try{g?await s(g,c):await r(c),v(),y(null)}catch(x){console.error("Error saving map:",x),alert("Failed to save map")}finally{p(!1)}}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(sd,{className:"h-6 w-6 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold",children:"Maps"})]}),l.jsxs(ve,{children:[l.jsx(Xe,{children:l.jsx(tt,{children:"Add Map"})}),l.jsx(xe,{children:l.jsxs("form",{onSubmit:b,className:"grid md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Name"}),l.jsx(Ce,{value:c.name,onChange:S=>u(x=>({...x,name:S.target.value})),placeholder:"Map name",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Location"}),l.jsx(Ce,{value:c.location,onChange:S=>u(x=>({...x,location:S.target.value})),placeholder:"Location"})]}),l.jsxs("div",{className:"space-y-2 md:col-span-3",children:[l.jsx(Pe,{children:"Description"}),l.jsx("textarea",{value:c.description,onChange:S=>u(x=>({...x,description:S.target.value})),placeholder:"Short description",className:"w-full border rounded px-3 py-2",rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Type"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2",value:c.type,onChange:S=>u(x=>({...x,type:S.target.value})),children:[l.jsx("option",{value:"",children:"Select type"}),l.jsx("option",{value:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©",children:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©"}),l.jsx("option",{value:"Ù„Ø§Ø¨Ø§Øª",children:"Ù„Ø§Ø¨Ø§Øª"}),l.jsx("option",{value:"Ù…Ø¯Ø±Ø¬",children:"Ù…Ø¯Ø±Ø¬"}),l.jsx("option",{value:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª",children:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª"}),l.jsx("option",{value:"Ù…Ø·Ø¹Ù…",children:"Ù…Ø·Ø¹Ù…"}),l.jsx("option",{value:"Ù…ØµÙ„Ù‰",children:"Ù…ØµÙ„Ù‰"}),l.jsx("option",{value:"Ø£Ø®Ø±Ù‰",children:"Ø£Ø®Ø±Ù‰"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Video URL"}),l.jsx(Ce,{value:c.video_url,onChange:S=>u(x=>({...x,video_url:S.target.value})),placeholder:"https://..."})]}),l.jsx("div",{className:"md:col-span-3 flex justify-end space-x-2",children:g?l.jsxs(l.Fragment,{children:[l.jsx(te,{type:"button",variant:"outline",onClick:()=>{y(null),v()},children:"Cancel"}),l.jsxs(te,{type:"submit",disabled:h,children:[l.jsx(en,{className:"h-4 w-4 mr-2"}),h?"Saving...":"Save"]})]}):l.jsxs(te,{type:"submit",disabled:h,children:[l.jsx(en,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add"]})})]})})]}),l.jsxs(ve,{children:[l.jsx(Xe,{children:l.jsxs(tt,{children:["All Maps (",n.length,")"]})}),l.jsx(xe,{children:e?l.jsx("div",{children:"Loading..."}):t?l.jsx("div",{className:"text-destructive",children:t}):n.length===0?l.jsx("div",{className:"text-muted-foreground",children:"No maps yet."}):l.jsx("div",{className:"grid gap-3",children:n.map(S=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:S.name}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:S.location}),S.type&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("span",{className:"font-medium",children:S.type})]}),S.description&&l.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:S.description}),S.video_url&&l.jsx("a",{className:"text-xs text-blue-600 hover:underline",href:S.video_url,target:"_blank",rel:"noreferrer",children:S.video_url})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{y(S.id),u({name:S.name||"",location:S.location||"",description:S.description||"",video_url:S.video_url||"",type:S.type||""}),window.scrollTo({top:0,behavior:"smooth"})},className:"",children:"Edit"}),l.jsx(te,{variant:"ghost",size:"icon",onClick:()=>o(S.id),className:"text-destructive",children:l.jsx(Vn,{className:"h-4 w-4"})})]})]},S.id))})})]})]})}function BB({research:n,onClose:e,onSave:t}){const[r,s]=E.useState({projectTitle:"",abstract:"",fieldOfResearch:[],contactPerson:[],authorshipPosition:[],projectDuration:"",requiredSkills:[],supervisor:""}),[o,c]=E.useState(""),[u,h]=E.useState("");E.useEffect(()=>{n&&s({projectTitle:n.projectTitle||"",abstract:n.abstract||"",fieldOfResearch:n.fieldOfResearch||[],contactPerson:n.contactPerson||[],authorshipPosition:n.authorshipPosition||[],projectDuration:n.projectDuration||"",requiredSkills:n.requiredSkills||[],supervisor:n.supervisor||""})},[n]);const p=()=>{const S=o.trim();S&&(r.fieldOfResearch.includes(S)||s(x=>({...x,fieldOfResearch:[...x.fieldOfResearch,S]})),c(""))},g=()=>{const S=u.trim();S&&(r.requiredSkills.includes(S)||s(x=>({...x,requiredSkills:[...x.requiredSkills,S]})),h(""))},y=S=>s(x=>({...x,fieldOfResearch:x.fieldOfResearch.filter(_=>_!==S)})),v=S=>s(x=>({...x,requiredSkills:x.requiredSkills.filter(_=>_!==S)})),b=S=>{S.preventDefault();const x={projectTitle:r.projectTitle,abstract:r.abstract,fieldOfResearch:r.fieldOfResearch,contactPerson:r.contactPerson,authorshipPosition:r.authorshipPosition,projectDuration:r.projectDuration,requiredSkills:r.requiredSkills,supervisor:r.supervisor,updatedAt:new Date,...n?{}:{createdAt:new Date}};t(x)};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(te,{variant:"ghost",onClick:e,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Research":"Create Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Add or update research project details"})]})]})}),l.jsx("form",{onSubmit:b,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Project Details"}),l.jsx(kt,{children:"Title and abstract"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"title",children:"Project Title *"}),l.jsx(Ce,{id:"title",placeholder:"Enter project title...",value:r.projectTitle,onChange:S=>s(x=>({...x,projectTitle:S.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{htmlFor:"abstract",children:"Abstract"}),l.jsx(ei,{id:"abstract",placeholder:"Write a brief abstract...",value:r.abstract,onChange:S=>s(x=>({...x,abstract:S.target.value})),rows:8})]})]})]}),l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Fields & Skills"}),l.jsx(kt,{children:"Fields of research and required skills"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Pe,{children:"Field of Research"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(Ce,{placeholder:"Add field e.g., Oncology",value:o,onChange:S=>c(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),p())}}),l.jsx(te,{type:"button",onClick:p,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.fieldOfResearch.map(S=>l.jsxs(nn,{variant:"secondary",className:"flex items-center gap-2",children:[S,l.jsx("button",{type:"button",onClick:()=>y(S),className:"ml-1 hover:text-destructive",children:l.jsx(Sc,{className:"h-3 w-3"})})]},S))})]}),l.jsxs("div",{children:[l.jsx(Pe,{children:"Required Skills"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(Ce,{placeholder:"Add skill e.g., Data analysis",value:u,onChange:S=>h(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),g())}}),l.jsx(te,{type:"button",onClick:g,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.requiredSkills.map(S=>l.jsxs(nn,{variant:"secondary",className:"flex items-center gap-2",children:[S,l.jsx("button",{type:"button",onClick:()=>v(S),className:"ml-1 hover:text-destructive",children:l.jsx(Sc,{className:"h-3 w-3"})})]},S))})]})]})]})]}),l.jsx("div",{className:"space-y-6",children:l.jsxs(ve,{children:[l.jsxs(Xe,{children:[l.jsx(tt,{children:"Meta"}),l.jsx(kt,{children:"Contact, supervisor and duration"})]}),l.jsxs(xe,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Contact Person(s)"}),l.jsx(Ce,{placeholder:"Comma separated names",value:r.contactPerson.join(", "),onChange:S=>s(x=>({...x,contactPerson:S.target.value.split(",").map(_=>_.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Authorship Positions"}),l.jsx(Ce,{placeholder:"Comma separated positions",value:r.authorshipPosition.join(", "),onChange:S=>s(x=>({...x,authorshipPosition:S.target.value.split(",").map(_=>_.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Supervisor"}),l.jsx(Ce,{placeholder:"Supervisor name",value:r.supervisor,onChange:S=>s(x=>({...x,supervisor:S.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pe,{children:"Project Duration"}),l.jsx(Ce,{placeholder:"e.g., 6 months",value:r.projectDuration,onChange:S=>s(x=>({...x,projectDuration:S.target.value}))})]}),l.jsxs("div",{className:"flex justify-end",children:[l.jsx(te,{variant:"ghost",onClick:e,className:"mr-2",children:"Cancel"}),l.jsx(te,{type:"submit",children:"Save"})]})]})]})})]})})]})}const qB=[{id:"r1",projectTitle:"Impact of Early Clinical Exposure on Medical Students",abstract:"A study investigating how early clinical exposure affects students' clinical reasoning and confidence.",fieldOfResearch:["Medical Education","Clinical Skills"],contactPerson:["Dr. Sarah Johnson"],authorshipPosition:["Lead","Co-author"],projectDuration:"6 months",requiredSkills:["Clinical observation","Data analysis"],supervisor:"Prof. Michael Chen",createdAt:new Date,updatedAt:new Date}];function WB(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,o]=E.useState(null),[c,u]=E.useState(!1);E.useEffect(()=>{const y=async()=>{try{const b=or(it(ze,"research"));await jt(b);const S=or(it(ze,"research"),Xc("createdAt","desc"));return aa(S,_=>{const A=[];_.forEach(I=>{var M,U;const C=I.data();A.push({id:I.id,projectTitle:C.projectTitle||C.title||"",abstract:C.abstract||"",fieldOfResearch:C.fieldOfResearch||[],contactPerson:C.contactPerson||[],authorshipPosition:C.authorshipPosition||[],projectDuration:C.projectDuration||"",requiredSkills:C.requiredSkills||[],supervisor:C.supervisor||"",createdAt:(M=C.createdAt)!=null&&M.toDate?C.createdAt.toDate():C.createdAt||new Date,updatedAt:(U=C.updatedAt)!=null&&U.toDate?C.updatedAt.toDate():C.updatedAt||new Date})}),e(A),r(!1)},_=>{console.error("Error in research listener:",_),v()})}catch(b){return console.error("Firebase connection failed for research:",b),v(),null}},v=()=>{u(!0),e(qB),o(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(b=>[v,...b]);return}try{await Sn(it(ze,"research"),y)}catch(v){console.error("Error creating research:",v),u(!0),await h(y)}};return{research:n,loading:t,error:s,createResearch:h,updateResearch:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(b=>b.map(S=>S.id===y?{...S,...v}:S));return}try{await mn(Vt(ze,"research",y),v)}catch(b){console.error("Error updating research:",b),e(S=>S.map(x=>x.id===y?{...x,...v}:x))}},deleteResearch:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(b=>b.id!==y));return}try{await Dr(Vt(ze,"research",y))}catch(v){console.error("Error deleting research:",v),e(b=>b.filter(S=>S.id!==y))}},isOfflineMode:c}}function HB(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,o]=E.useState(!1),{research:c,loading:u,error:h,createResearch:p,updateResearch:g,deleteResearch:y}=WB(),v=c.filter(_=>_.projectTitle.toLowerCase().includes(n.toLowerCase())),b=()=>{r(null),o(!0)},S=_=>{r(_),o(!0)},x=async _=>{window.confirm("Are you sure you want to delete this research entry?")&&await y(_)};return s?l.jsx(BB,{research:t,onClose:()=>{o(!1),r(null)},onSave:async _=>{try{t?await g(t.id,_):await p(_),o(!1),r(null)}catch(A){console.error(A),alert("Failed to save. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage research projects and student/faculty submissions"})]}),l.jsxs(te,{onClick:b,className:"flex items-center gap-2",children:[l.jsx(en,{className:"h-4 w-4"}),"Create Research"]})]}),l.jsx(ve,{children:l.jsx(xe,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(Ce,{placeholder:"Search by project title...",value:n,onChange:_=>e(_.target.value),className:"pl-10"})]})})}),u&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx(na,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading research entries..."})]})}),h&&l.jsx(ve,{children:l.jsxs(xe,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading research"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&l.jsx("div",{className:"space-y-4",children:v.map(_=>l.jsx(ve,{className:"hover:shadow-md transition-shadow",children:l.jsx(xe,{className:"pt-6",children:l.jsx("div",{className:"flex gap-4",children:l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:_.projectTitle}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mt-2",children:_.abstract}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3 text-xs text-muted-foreground",children:(_.fieldOfResearch||[]).map(A=>l.jsx("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:A},A))})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(te,{variant:"ghost",onClick:()=>S(_),children:l.jsx(Ai,{className:"h-4 w-4"})}),l.jsx(te,{variant:"ghost",onClick:()=>x(_.id),children:l.jsx(Vn,{className:"h-4 w-4"})})]})]})})})})},_.id))})]})}const KB=()=>{const n=$i();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),l.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},GB=new eL({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!1,retry:1}}});function QB({children:n}){const{currentUser:e}=hw();return e?l.jsx(l.Fragment,{children:n}):l.jsx(Af,{to:"/login"})}const B1=()=>l.jsx(cz,{children:l.jsx(sL,{client:GB,children:l.jsxs(OD,{children:[l.jsx(x2,{}),l.jsx(Y2,{}),l.jsx(gM,{basename:"/builder-stellar-world/",children:l.jsx(az,{children:l.jsxs(aM,{children:[l.jsx(Ht,{path:"/login",element:l.jsx(wz,{})}),l.jsxs(Ht,{path:"/admin",element:l.jsx(QB,{children:l.jsx(mz,{})}),children:[l.jsx(Ht,{index:!0,element:l.jsx(Az,{})}),l.jsx(Ht,{path:"news",element:l.jsx(Mz,{})}),l.jsx(Ht,{path:"years",element:l.jsx(H$,{})}),l.jsx(Ht,{path:"years/:id",element:l.jsx(K$,{})}),l.jsx(Ht,{path:"subjects/:id",element:l.jsx(oB,{})}),l.jsx(Ht,{path:"resources",element:l.jsx(U1,{})}),l.jsx(Ht,{path:"resources/*",element:l.jsx(U1,{})}),l.jsx(Ht,{path:"VIDEOS",element:l.jsx(Af,{to:"/admin/years",replace:!0})}),l.jsx(Ht,{path:"VIDEOS/*",element:l.jsx(Af,{to:"/admin/years",replace:!0})}),l.jsx(Ht,{path:"professors",element:l.jsx(eB,{})}),l.jsx(Ht,{path:"users",element:l.jsx(rB,{})}),l.jsx(Ht,{path:"store",element:l.jsx(SB,{})}),l.jsx(Ht,{path:"orders",element:l.jsx(TB,{})}),l.jsx(Ht,{path:"videos",element:l.jsx(jB,{})}),l.jsx(Ht,{path:"files",element:l.jsx(AB,{})}),l.jsx(Ht,{path:"quizzes",element:l.jsx(PB,{})}),l.jsx(Ht,{path:"flashcards",element:l.jsx(VB,{})}),l.jsx(Ht,{path:"research",element:l.jsx(HB,{})}),l.jsx(Ht,{path:"maps",element:l.jsx($B,{})}),l.jsx(Ht,{path:"settings",element:l.jsx(UB,{})})]}),l.jsx(Ht,{path:"/",element:l.jsx(Af,{to:"/admin"})}),l.jsx(Ht,{path:"*",element:l.jsx(KB,{})})]})})})]})})}),YB=document.getElementById("root");if(window.__appRoot)window.__appRoot.render(l.jsx(B1,{}));else{const n=_2.createRoot(YB);window.__appRoot=n,n.render(l.jsx(B1,{}))}
