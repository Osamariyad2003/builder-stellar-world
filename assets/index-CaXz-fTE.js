var uP=Object.defineProperty;var X0=n=>{throw TypeError(n)};var dP=(n,e,t)=>e in n?uP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var J0=(n,e,t)=>dP(n,typeof e!="symbol"?e+"":e,t),yg=(n,e,t)=>e.has(n)||X0("Cannot "+t);var de=(n,e,t)=>(yg(n,e,"read from private field"),t?t.call(n):e.get(n)),Et=(n,e,t)=>e.has(n)?X0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ot=(n,e,t,r)=>(yg(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Wn=(n,e,t)=>(yg(n,e,"access private method"),t);var Mh=(n,e,t,r)=>({set _(s){ot(n,e,s,t)},get _(){return de(n,e,r)}});function hP(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(r,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function a1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xg={exports:{}},gu={},wg={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0;function fP(){if(Z0)return ct;Z0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function y(F){return F===null||typeof F!="object"?null:(F=v&&F[v]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function x(F,H,le){this.props=F,this.context=H,this.refs=E,this.updater=le||b}x.prototype.isReactComponent={},x.prototype.setState=function(F,H){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,H,"setState")},x.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function j(){}j.prototype=x.prototype;function I(F,H,le){this.props=F,this.context=H,this.refs=E,this.updater=le||b}var C=I.prototype=new j;C.constructor=I,S(C,x.prototype),C.isPureReactComponent=!0;var O=Array.isArray,U=Object.prototype.hasOwnProperty,q={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function R(F,H,le){var Ee,Te={},pe=null,ue=null;if(H!=null)for(Ee in H.ref!==void 0&&(ue=H.ref),H.key!==void 0&&(pe=""+H.key),H)U.call(H,Ee)&&!P.hasOwnProperty(Ee)&&(Te[Ee]=H[Ee]);var ye=arguments.length-2;if(ye===1)Te.children=le;else if(1<ye){for(var De=Array(ye),Ie=0;Ie<ye;Ie++)De[Ie]=arguments[Ie+2];Te.children=De}if(F&&F.defaultProps)for(Ee in ye=F.defaultProps,ye)Te[Ee]===void 0&&(Te[Ee]=ye[Ee]);return{$$typeof:n,type:F,key:pe,ref:ue,props:Te,_owner:q.current}}function D(F,H){return{$$typeof:n,type:F.type,key:H,ref:F.ref,props:F.props,_owner:F._owner}}function k(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function $(F){var H={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(le){return H[le]})}var z=/\/+/g;function M(F,H){return typeof F=="object"&&F!==null&&F.key!=null?$(""+F.key):H.toString(36)}function ie(F,H,le,Ee,Te){var pe=typeof F;(pe==="undefined"||pe==="boolean")&&(F=null);var ue=!1;if(F===null)ue=!0;else switch(pe){case"string":case"number":ue=!0;break;case"object":switch(F.$$typeof){case n:case e:ue=!0}}if(ue)return ue=F,Te=Te(ue),F=Ee===""?"."+M(ue,0):Ee,O(Te)?(le="",F!=null&&(le=F.replace(z,"$&/")+"/"),ie(Te,H,le,"",function(Ie){return Ie})):Te!=null&&(k(Te)&&(Te=D(Te,le+(!Te.key||ue&&ue.key===Te.key?"":(""+Te.key).replace(z,"$&/")+"/")+F)),H.push(Te)),1;if(ue=0,Ee=Ee===""?".":Ee+":",O(F))for(var ye=0;ye<F.length;ye++){pe=F[ye];var De=Ee+M(pe,ye);ue+=ie(pe,H,le,De,Te)}else if(De=y(F),typeof De=="function")for(F=De.call(F),ye=0;!(pe=F.next()).done;)pe=pe.value,De=Ee+M(pe,ye++),ue+=ie(pe,H,le,De,Te);else if(pe==="object")throw H=String(F),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return ue}function ae(F,H,le){if(F==null)return F;var Ee=[],Te=0;return ie(F,Ee,"","",function(pe){return H.call(le,pe,Te++)}),Ee}function Y(F){if(F._status===-1){var H=F._result;H=H(),H.then(function(le){(F._status===0||F._status===-1)&&(F._status=1,F._result=le)},function(le){(F._status===0||F._status===-1)&&(F._status=2,F._result=le)}),F._status===-1&&(F._status=0,F._result=H)}if(F._status===1)return F._result.default;throw F._result}var J={current:null},B={transition:null},K={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:B,ReactCurrentOwner:q};function Q(){throw Error("act(...) is not supported in production builds of React.")}return ct.Children={map:ae,forEach:function(F,H,le){ae(F,function(){H.apply(this,arguments)},le)},count:function(F){var H=0;return ae(F,function(){H++}),H},toArray:function(F){return ae(F,function(H){return H})||[]},only:function(F){if(!k(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},ct.Component=x,ct.Fragment=t,ct.Profiler=s,ct.PureComponent=I,ct.StrictMode=r,ct.Suspense=h,ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,ct.act=Q,ct.cloneElement=function(F,H,le){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Ee=S({},F.props),Te=F.key,pe=F.ref,ue=F._owner;if(H!=null){if(H.ref!==void 0&&(pe=H.ref,ue=q.current),H.key!==void 0&&(Te=""+H.key),F.type&&F.type.defaultProps)var ye=F.type.defaultProps;for(De in H)U.call(H,De)&&!P.hasOwnProperty(De)&&(Ee[De]=H[De]===void 0&&ye!==void 0?ye[De]:H[De])}var De=arguments.length-2;if(De===1)Ee.children=le;else if(1<De){ye=Array(De);for(var Ie=0;Ie<De;Ie++)ye[Ie]=arguments[Ie+2];Ee.children=ye}return{$$typeof:n,type:F.type,key:Te,ref:pe,props:Ee,_owner:ue}},ct.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:l,_context:F},F.Consumer=F},ct.createElement=R,ct.createFactory=function(F){var H=R.bind(null,F);return H.type=F,H},ct.createRef=function(){return{current:null}},ct.forwardRef=function(F){return{$$typeof:u,render:F}},ct.isValidElement=k,ct.lazy=function(F){return{$$typeof:g,_payload:{_status:-1,_result:F},_init:Y}},ct.memo=function(F,H){return{$$typeof:m,type:F,compare:H===void 0?null:H}},ct.startTransition=function(F){var H=B.transition;B.transition={};try{F()}finally{B.transition=H}},ct.unstable_act=Q,ct.useCallback=function(F,H){return J.current.useCallback(F,H)},ct.useContext=function(F){return J.current.useContext(F)},ct.useDebugValue=function(){},ct.useDeferredValue=function(F){return J.current.useDeferredValue(F)},ct.useEffect=function(F,H){return J.current.useEffect(F,H)},ct.useId=function(){return J.current.useId()},ct.useImperativeHandle=function(F,H,le){return J.current.useImperativeHandle(F,H,le)},ct.useInsertionEffect=function(F,H){return J.current.useInsertionEffect(F,H)},ct.useLayoutEffect=function(F,H){return J.current.useLayoutEffect(F,H)},ct.useMemo=function(F,H){return J.current.useMemo(F,H)},ct.useReducer=function(F,H,le){return J.current.useReducer(F,H,le)},ct.useRef=function(F){return J.current.useRef(F)},ct.useState=function(F){return J.current.useState(F)},ct.useSyncExternalStore=function(F,H,le){return J.current.useSyncExternalStore(F,H,le)},ct.useTransition=function(){return J.current.useTransition()},ct.version="18.3.1",ct}var e_;function cy(){return e_||(e_=1,wg.exports=fP()),wg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function mP(){if(t_)return gu;t_=1;var n=cy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,m){var g,v={},y=null,b=null;m!==void 0&&(y=""+m),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(b=h.ref);for(g in h)r.call(h,g)&&!l.hasOwnProperty(g)&&(v[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)v[g]===void 0&&(v[g]=h[g]);return{$$typeof:e,type:u,key:y,ref:b,props:v,_owner:s.current}}return gu.Fragment=t,gu.jsx=c,gu.jsxs=c,gu}var n_;function pP(){return n_||(n_=1,xg.exports=mP()),xg.exports}var a=pP();let wf=!1,gP=[],Tu=0;const r_=3,xc=n=>{wf!==n&&(wf=n,console.log(`ðŸ”„ Firebase mode changed: ${n?"OFFLINE":"ONLINE"}`),gP.forEach(e=>e()))},s_=n=>{Tu++,console.log(`ðŸš¨ Firebase error ${Tu}/${r_}:`,n.message),Tu>=r_&&(console.log("ðŸ”„ Too many Firebase errors - switching to global offline mode"),xc(!0))};if(!window.fetch.__firebasePatched){const n=window.fetch,e=(...t)=>{var l;const r=typeof t[0]=="string"?t[0]:(l=t[0])==null?void 0:l.url;if(!(!!r&&(r.includes("firestore.googleapis.com")||r.includes("firebase.googleapis.com")||r.includes("identitytoolkit.googleapis.com"))))try{return n(...t)}catch(c){return Promise.reject(c)}if(wf){const c=new Error("Firebase offline mode - request blocked");return c.isFirebaseOfflineError=!0,Promise.reject(c)}try{const c=n(...t);return Promise.resolve(c).then(u=>(u.ok&&(Tu=0,wf&&(console.log("ðŸŸ¢ Firebase connection restored"),xc(!1))),u)).catch(u=>{console.log("ðŸ”´ Firebase request failed:",(u==null?void 0:u.message)||String(u));const h=String(u&&(u.stack||"")||""),m=String((u==null?void 0:u.message)||u||"").toLowerCase();throw!(h.includes("chrome-extension://")||h.includes("extension://")||m.includes("extension"))&&navigator.onLine&&s_(u),u})}catch(c){console.log("ðŸ”´ Firebase request threw synchronously:",(c==null?void 0:c.message)||String(c));const u=String(c&&(c.stack||"")||""),h=String((c==null?void 0:c.message)||c||"").toLowerCase();return!(u.includes("chrome-extension://")||u.includes("extension://")||h.includes("extension"))&&navigator.onLine&&s_(c),Promise.reject(c)}};e.__firebasePatched=!0,window.fetch=e}console.log("ðŸ”„ Initializing Firebase monitoring...");navigator.onLine||(console.log("ðŸš« No internet connection - starting in offline mode"),xc(!0));window.addEventListener("online",()=>{console.log("ðŸŸ¢ Internet connection restored"),Tu=0,xc(!1)});window.addEventListener("offline",()=>{console.log("ðŸ”´ Internet connection lost"),xc(!0)});console.log("ðŸ”„ Starting Firebase monitoring in ONLINE mode");window.addEventListener("unhandledrejection",n=>{var r;const e=String(((r=n==null?void 0:n.reason)==null?void 0:r.message)||(n==null?void 0:n.reason)||""),t=String((n==null?void 0:n.reason)&&(n.reason.stack||"")||"");if((e.includes("Failed to fetch")||e.toLowerCase().includes("extension"))&&(t.includes("chrome-extension://")||t.includes("extension://")||t.includes("fullstory.com"))){n.preventDefault();return}if(t.includes("chrome-extension://")||t.includes("extension://")){n.preventDefault();return}});const vP=console.error,yP=console.warn,xP=console.log;console.error=(...n)=>{const e=n.map(s=>s&&typeof s=="object"?String(s):s).join(" "),t=n.some(s=>s&&typeof s=="object"&&s.stack&&s.stack.includes("chrome-extension://"));["Firebase offline mode - request blocked","FirebaseError: [code=unavailable]","Could not reach Cloud Firestore backend","Connection failed","The operation could not be completed","device does not have a healthy Internet connection","client will operate in offline mode","Most recent error: FirebaseError","@firebase/firestore: Firestore","fullstory.com","TypeError: Failed to fetch"].some(s=>e.includes(s))||t||e.includes("chrome-extension://")||e.includes("extension://")||vP.apply(console,n)};console.warn=(...n)=>{const e=n.join(" ");e.includes("Firebase")&&e.includes("offline")||yP.apply(console,n)};console.log=(...n)=>{const e=n.join(" ");e.includes("@firebase/firestore")&&e.includes("offline")||xP.apply(console,n)};setTimeout(()=>{navigator.onLine?console.log("ðŸŒ Internet available - Firebase enabled and ready"):(console.log("ðŸš« No internet connection detected - switching to offline mode"),xc(!0))},100);var _=cy();const Ne=a1(_),l1=hP({__proto__:null,default:Ne},[_]),wP=1,_P=1e6;let _g=0;function EP(){return _g=(_g+1)%Number.MAX_SAFE_INTEGER,_g.toString()}const Eg=new Map,i_=n=>{if(Eg.has(n))return;const e=setTimeout(()=>{Eg.delete(n),Cu({type:"REMOVE_TOAST",toastId:n})},_P);Eg.set(n,e)},bP=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,wP)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?i_(t):n.toasts.forEach(r=>{i_(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},of=[];let af={toasts:[]};function Cu(n){af=bP(af,n),of.forEach(e=>{e(af)})}function SP({...n}){const e=EP(),t=s=>Cu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Cu({type:"DISMISS_TOAST",toastId:e});return Cu({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function NP(){const[n,e]=_.useState(af);return _.useEffect(()=>(of.push(e),()=>{const t=of.indexOf(e);t>-1&&of.splice(t,1)}),[n]),{...n,toast:SP,dismiss:t=>Cu({type:"DISMISS_TOAST",toastId:t})}}var bg={exports:{}},gr={},Sg={exports:{}},Ng={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function TP(){return o_||(o_=1,function(n){function e(B,K){var Q=B.length;B.push(K);e:for(;0<Q;){var F=Q-1>>>1,H=B[F];if(0<s(H,K))B[F]=K,B[Q]=H,Q=F;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],Q=B.pop();if(Q!==K){B[0]=Q;e:for(var F=0,H=B.length,le=H>>>1;F<le;){var Ee=2*(F+1)-1,Te=B[Ee],pe=Ee+1,ue=B[pe];if(0>s(Te,Q))pe<H&&0>s(ue,Te)?(B[F]=ue,B[pe]=Q,F=pe):(B[F]=Te,B[Ee]=Q,F=Ee);else if(pe<H&&0>s(ue,Q))B[F]=ue,B[pe]=Q,F=pe;else break e}}return K}function s(B,K){var Q=B.sortIndex-K.sortIndex;return Q!==0?Q:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var h=[],m=[],g=1,v=null,y=3,b=!1,S=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(B){for(var K=t(m);K!==null;){if(K.callback===null)r(m);else if(K.startTime<=B)r(m),K.sortIndex=K.expirationTime,e(h,K);else break;K=t(m)}}function O(B){if(E=!1,C(B),!S)if(t(h)!==null)S=!0,Y(U);else{var K=t(m);K!==null&&J(O,K.startTime-B)}}function U(B,K){S=!1,E&&(E=!1,j(R),R=-1),b=!0;var Q=y;try{for(C(K),v=t(h);v!==null&&(!(v.expirationTime>K)||B&&!$());){var F=v.callback;if(typeof F=="function"){v.callback=null,y=v.priorityLevel;var H=F(v.expirationTime<=K);K=n.unstable_now(),typeof H=="function"?v.callback=H:v===t(h)&&r(h),C(K)}else r(h);v=t(h)}if(v!==null)var le=!0;else{var Ee=t(m);Ee!==null&&J(O,Ee.startTime-K),le=!1}return le}finally{v=null,y=Q,b=!1}}var q=!1,P=null,R=-1,D=5,k=-1;function $(){return!(n.unstable_now()-k<D)}function z(){if(P!==null){var B=n.unstable_now();k=B;var K=!0;try{K=P(!0,B)}finally{K?M():(q=!1,P=null)}}else q=!1}var M;if(typeof I=="function")M=function(){I(z)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ae=ie.port2;ie.port1.onmessage=z,M=function(){ae.postMessage(null)}}else M=function(){x(z,0)};function Y(B){P=B,q||(q=!0,M())}function J(B,K){R=x(function(){B(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,Y(U))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(B){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var Q=y;y=K;try{return B()}finally{y=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Q=y;y=B;try{return K()}finally{y=Q}},n.unstable_scheduleCallback=function(B,K,Q){var F=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?F+Q:F):Q=F,B){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Q+H,B={id:g++,callback:K,priorityLevel:B,startTime:Q,expirationTime:H,sortIndex:-1},Q>F?(B.sortIndex=Q,e(m,B),t(h)===null&&B===t(m)&&(E?(j(R),R=-1):E=!0,J(O,Q-F))):(B.sortIndex=H,e(h,B),S||b||(S=!0,Y(U))),B},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(B){var K=y;return function(){var Q=y;y=K;try{return B.apply(this,arguments)}finally{y=Q}}}}(Ng)),Ng}var a_;function CP(){return a_||(a_=1,Sg.exports=TP()),Sg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function IP(){if(l_)return gr;l_=1;var n=cy(),e=CP();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function y(i){return h.call(v,i)?!0:h.call(g,i)?!1:m.test(i)?v[i]=!0:(g[i]=!0,!1)}function b(i,o,d,p){if(d!==null&&d.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function S(i,o,d,p){if(o===null||typeof o>"u"||b(i,o,d,p))return!0;if(p)return!1;if(d!==null)switch(d.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function E(i,o,d,p,w,T,L){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=w,this.mustUseProperty=d,this.propertyName=i,this.type=o,this.sanitizeURL=T,this.removeEmptyString=L}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){x[i]=new E(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];x[o]=new E(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){x[i]=new E(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){x[i]=new E(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){x[i]=new E(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){x[i]=new E(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){x[i]=new E(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){x[i]=new E(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){x[i]=new E(i,5,!1,i.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function I(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(j,I);x[o]=new E(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(j,I);x[o]=new E(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(j,I);x[o]=new E(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){x[i]=new E(i,1,!1,i.toLowerCase(),null,!1,!1)}),x.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){x[i]=new E(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,o,d,p){var w=x.hasOwnProperty(o)?x[o]:null;(w!==null?w.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,d,w,p)&&(d=null),p||w===null?y(o)&&(d===null?i.removeAttribute(o):i.setAttribute(o,""+d)):w.mustUseProperty?i[w.propertyName]=d===null?w.type===3?!1:"":d:(o=w.attributeName,p=w.attributeNamespace,d===null?i.removeAttribute(o):(w=w.type,d=w===3||w===4&&d===!0?"":""+d,p?i.setAttributeNS(p,o,d):i.setAttribute(o,d))))}var O=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),q=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),$=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),B=Symbol.iterator;function K(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var Q=Object.assign,F;function H(i){if(F===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);F=o&&o[1]||""}return`
`+F+i}var le=!1;function Ee(i,o){if(!i||le)return"";le=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(se){var p=se}Reflect.construct(i,[],o)}else{try{o.call()}catch(se){p=se}i.call(o.prototype)}else{try{throw Error()}catch(se){p=se}i()}}catch(se){if(se&&p&&typeof se.stack=="string"){for(var w=se.stack.split(`
`),T=p.stack.split(`
`),L=w.length-1,W=T.length-1;1<=L&&0<=W&&w[L]!==T[W];)W--;for(;1<=L&&0<=W;L--,W--)if(w[L]!==T[W]){if(L!==1||W!==1)do if(L--,W--,0>W||w[L]!==T[W]){var G=`
`+w[L].replace(" at new "," at ");return i.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",i.displayName)),G}while(1<=L&&0<=W);break}}}finally{le=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?H(i):""}function Te(i){switch(i.tag){case 5:return H(i.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return i=Ee(i.type,!1),i;case 11:return i=Ee(i.type.render,!1),i;case 1:return i=Ee(i.type,!0),i;default:return""}}function pe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case q:return"Portal";case D:return"Profiler";case R:return"StrictMode";case M:return"Suspense";case ie:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case $:return(i.displayName||"Context")+".Consumer";case k:return(i._context.displayName||"Context")+".Provider";case z:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ae:return o=i.displayName||null,o!==null?o:pe(i.type)||"Memo";case Y:o=i._payload,i=i._init;try{return pe(i(o))}catch{}}return null}function ue(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ye(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function De(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ie(i){var o=De(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var w=d.get,T=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return w.call(this)},set:function(L){p=""+L,T.call(this,L)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return p},setValue:function(L){p=""+L},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Me(i){i._valueTracker||(i._valueTracker=Ie(i))}function Le(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var d=o.getValue(),p="";return i&&(p=De(i)?i.checked?"true":"false":i.value),i=p,i!==d?(o.setValue(i),!0):!1}function ut(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function bt(i,o){var d=o.checked;return Q({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function sn(i,o){var d=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;d=ye(o.value!=null?o.value:d),i._wrapperState={initialChecked:p,initialValue:d,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Bt(i,o){o=o.checked,o!=null&&C(i,"checked",o,!1)}function gn(i,o){Bt(i,o);var d=ye(o.value),p=o.type;if(d!=null)p==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Ze(i,o.type,d):o.hasOwnProperty("defaultValue")&&Ze(i,o.type,ye(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function en(i,o,d){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,d||o===i.value||(i.value=o),i.defaultValue=o}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function Ze(i,o,d){(o!=="number"||ut(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var Dt=Array.isArray;function Jn(i,o,d,p){if(i=i.options,o){o={};for(var w=0;w<d.length;w++)o["$"+d[w]]=!0;for(d=0;d<i.length;d++)w=o.hasOwnProperty("$"+i[d].value),i[d].selected!==w&&(i[d].selected=w),w&&p&&(i[d].defaultSelected=!0)}else{for(d=""+ye(d),o=null,w=0;w<i.length;w++){if(i[w].value===d){i[w].selected=!0,p&&(i[w].defaultSelected=!0);return}o!==null||i[w].disabled||(o=i[w])}o!==null&&(o.selected=!0)}}function ni(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Zn(i,o){var d=o.value;if(d==null){if(d=o.children,o=o.defaultValue,d!=null){if(o!=null)throw Error(t(92));if(Dt(d)){if(1<d.length)throw Error(t(93));d=d[0]}o=d}o==null&&(o=""),d=o}i._wrapperState={initialValue:ye(d)}}function bn(i,o){var d=ye(o.value),p=ye(o.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),o.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),p!=null&&(i.defaultValue=""+p)}function ws(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Mt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Mt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Fn,Vn=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,d,p,w){MSApp.execUnsafeLocalFunction(function(){return i(o,d,p,w)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Fn=Fn||document.createElement("div"),Fn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Fn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Sn(i,o){if(o){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=o;return}}i.textContent=o}var Gr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Or=["Webkit","ms","Moz","O"];Object.keys(Gr).forEach(function(i){Or.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Gr[o]=Gr[i]})});function _s(i,o,d){return o==null||typeof o=="boolean"||o===""?"":d||typeof o!="number"||o===0||Gr.hasOwnProperty(i)&&Gr[i]?(""+o).trim():o+"px"}function ri(i,o){i=i.style;for(var d in o)if(o.hasOwnProperty(d)){var p=d.indexOf("--")===0,w=_s(d,o[d],p);d==="float"&&(d="cssFloat"),p?i.setProperty(d,w):i[d]=w}}var Qr=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Un(i,o){if(o){if(Qr[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function si(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qe=null;function gt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ft=null,Ft=null,Kt=null;function or(i){if(i=tu(i)){if(typeof ft!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Jd(o),ft(i.stateNode,i.type,o))}}function ne(i){Ft?Kt?Kt.push(i):Kt=[i]:Ft=i}function _e(){if(Ft){var i=Ft,o=Kt;if(Kt=Ft=null,or(i),o)for(i=0;i<o.length;i++)or(o[i])}}function Fe(i,o){return i(o)}function St(){}var et=!1;function Nt(i,o,d){if(et)return i(o,d);et=!0;try{return Fe(i,o,d)}finally{et=!1,(Ft!==null||Kt!==null)&&(St(),_e())}}function be(i,o){var d=i.stateNode;if(d===null)return null;var p=Jd(d);if(p===null)return null;d=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(t(231,o,typeof d));return d}var ii=!1;if(u)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){ii=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{ii=!1}function Es(i,o,d,p,w,T,L,W,G){var se=Array.prototype.slice.call(arguments,3);try{o.apply(d,se)}catch(me){this.onError(me)}}var bs=!1,oi=null,lr=!1,Ui=null,Za={onError:function(i){bs=!0,oi=i}};function ai(i,o,d,p,w,T,L,W,G){bs=!1,oi=null,Es.apply(Za,arguments)}function Gt(i,o,d,p,w,T,L,W,G){if(ai.apply(this,arguments),bs){if(bs){var se=oi;bs=!1,oi=null}else throw Error(t(198));lr||(lr=!0,Ui=se)}}function Er(i){var o=i,d=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(d=o.return),i=o.return;while(i)}return o.tag===3?d:null}function na(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Yr(i){if(Er(i)!==i)throw Error(t(188))}function Sd(i){var o=i.alternate;if(!o){if(o=Er(i),o===null)throw Error(t(188));return o!==i?null:i}for(var d=i,p=o;;){var w=d.return;if(w===null)break;var T=w.alternate;if(T===null){if(p=w.return,p!==null){d=p;continue}break}if(w.child===T.child){for(T=w.child;T;){if(T===d)return Yr(w),i;if(T===p)return Yr(w),o;T=T.sibling}throw Error(t(188))}if(d.return!==p.return)d=w,p=T;else{for(var L=!1,W=w.child;W;){if(W===d){L=!0,d=w,p=T;break}if(W===p){L=!0,p=w,d=T;break}W=W.sibling}if(!L){for(W=T.child;W;){if(W===d){L=!0,d=T,p=w;break}if(W===p){L=!0,p=T,d=w;break}W=W.sibling}if(!L)throw Error(t(189))}}if(d.alternate!==p)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?i:o}function Lc(i){return i=Sd(i),i!==null?el(i):null}function el(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=el(i);if(o!==null)return o;i=i.sibling}return null}var tl=e.unstable_scheduleCallback,Mc=e.unstable_cancelCallback,Nd=e.unstable_shouldYield,Km=e.unstable_requestPaint,Ot=e.unstable_now,Td=e.unstable_getCurrentPriorityLevel,ra=e.unstable_ImmediatePriority,$i=e.unstable_UserBlockingPriority,Lr=e.unstable_NormalPriority,Fc=e.unstable_LowPriority,Cd=e.unstable_IdlePriority,sa=null,br=null;function Id(i){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(sa,i,void 0,(i.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:Ad,Vc=Math.log,jd=Math.LN2;function Ad(i){return i>>>=0,i===0?32:31-(Vc(i)/jd|0)|0}var nl=64,rl=4194304;function zi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ia(i,o){var d=i.pendingLanes;if(d===0)return 0;var p=0,w=i.suspendedLanes,T=i.pingedLanes,L=d&268435455;if(L!==0){var W=L&~w;W!==0?p=zi(W):(T&=L,T!==0&&(p=zi(T)))}else L=d&~w,L!==0?p=zi(L):T!==0&&(p=zi(T));if(p===0)return 0;if(o!==0&&o!==p&&(o&w)===0&&(w=p&-p,T=o&-o,w>=T||w===16&&(T&4194240)!==0))return o;if((p&4)!==0&&(p|=d&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)d=31-er(o),w=1<<d,p|=i[d],o&=~w;return p}function Gm(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function li(i,o){for(var d=i.suspendedLanes,p=i.pingedLanes,w=i.expirationTimes,T=i.pendingLanes;0<T;){var L=31-er(T),W=1<<L,G=w[L];G===-1?((W&d)===0||(W&p)!==0)&&(w[L]=Gm(W,o)):G<=o&&(i.expiredLanes|=W),T&=~W}}function Sr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function oa(){var i=nl;return nl<<=1,(nl&4194240)===0&&(nl=64),i}function Bi(i){for(var o=[],d=0;31>d;d++)o.push(i);return o}function qi(i,o,d){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-er(o),i[o]=d}function At(i,o){var d=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<d;){var w=31-er(d),T=1<<w;o[w]=0,p[w]=-1,i[w]=-1,d&=~T}}function Wi(i,o){var d=i.entangledLanes|=o;for(i=i.entanglements;d;){var p=31-er(d),w=1<<p;w&o|i[p]&o&&(i[p]|=o),d&=~w}}var mt=0;function Hi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Pd,sl,Rd,kd,Dd,Uc=!1,Ss=[],An=null,Xr=null,Jr=null,Ki=new Map,Mr=new Map,Ns=[],Qm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Od(i,o){switch(i){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":Ki.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mr.delete(o.pointerId)}}function cr(i,o,d,p,w,T){return i===null||i.nativeEvent!==T?(i={blockedOn:o,domEventName:d,eventSystemFlags:p,nativeEvent:T,targetContainers:[w]},o!==null&&(o=tu(o),o!==null&&sl(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,w!==null&&o.indexOf(w)===-1&&o.push(w),i)}function Ym(i,o,d,p,w){switch(o){case"focusin":return An=cr(An,i,o,d,p,w),!0;case"dragenter":return Xr=cr(Xr,i,o,d,p,w),!0;case"mouseover":return Jr=cr(Jr,i,o,d,p,w),!0;case"pointerover":var T=w.pointerId;return Ki.set(T,cr(Ki.get(T)||null,i,o,d,p,w)),!0;case"gotpointercapture":return T=w.pointerId,Mr.set(T,cr(Mr.get(T)||null,i,o,d,p,w)),!0}return!1}function Ld(i){var o=da(i.target);if(o!==null){var d=Er(o);if(d!==null){if(o=d.tag,o===13){if(o=na(d),o!==null){i.blockedOn=o,Dd(i.priority,function(){Rd(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ci(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var d=il(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var p=new d.constructor(d.type,d);qe=p,d.target.dispatchEvent(p),qe=null}else return o=tu(d),o!==null&&sl(o),i.blockedOn=d,!1;o.shift()}return!0}function aa(i,o,d){ci(i)&&d.delete(o)}function Md(){Uc=!1,An!==null&&ci(An)&&(An=null),Xr!==null&&ci(Xr)&&(Xr=null),Jr!==null&&ci(Jr)&&(Jr=null),Ki.forEach(aa),Mr.forEach(aa)}function Zr(i,o){i.blockedOn===o&&(i.blockedOn=null,Uc||(Uc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Md)))}function es(i){function o(w){return Zr(w,i)}if(0<Ss.length){Zr(Ss[0],i);for(var d=1;d<Ss.length;d++){var p=Ss[d];p.blockedOn===i&&(p.blockedOn=null)}}for(An!==null&&Zr(An,i),Xr!==null&&Zr(Xr,i),Jr!==null&&Zr(Jr,i),Ki.forEach(o),Mr.forEach(o),d=0;d<Ns.length;d++)p=Ns[d],p.blockedOn===i&&(p.blockedOn=null);for(;0<Ns.length&&(d=Ns[0],d.blockedOn===null);)Ld(d),d.blockedOn===null&&Ns.shift()}var ui=O.ReactCurrentBatchConfig,Gi=!0;function qt(i,o,d,p){var w=mt,T=ui.transition;ui.transition=null;try{mt=1,$c(i,o,d,p)}finally{mt=w,ui.transition=T}}function Xm(i,o,d,p){var w=mt,T=ui.transition;ui.transition=null;try{mt=4,$c(i,o,d,p)}finally{mt=w,ui.transition=T}}function $c(i,o,d,p){if(Gi){var w=il(i,o,d,p);if(w===null)lp(i,o,p,la,d),Od(i,p);else if(Ym(w,i,o,d,p))p.stopPropagation();else if(Od(i,p),o&4&&-1<Qm.indexOf(i)){for(;w!==null;){var T=tu(w);if(T!==null&&Pd(T),T=il(i,o,d,p),T===null&&lp(i,o,p,la,d),T===w)break;w=T}w!==null&&p.stopPropagation()}else lp(i,o,p,null,d)}}var la=null;function il(i,o,d,p){if(la=null,i=gt(p),i=da(i),i!==null)if(o=Er(i),o===null)i=null;else if(d=o.tag,d===13){if(i=na(o),i!==null)return i;i=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return la=i,null}function zc(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Td()){case ra:return 1;case $i:return 4;case Lr:case Fc:return 16;case Cd:return 536870912;default:return 16}default:return 16}}var Nr=null,ol=null,ur=null;function Bc(){if(ur)return ur;var i,o=ol,d=o.length,p,w="value"in Nr?Nr.value:Nr.textContent,T=w.length;for(i=0;i<d&&o[i]===w[i];i++);var L=d-i;for(p=1;p<=L&&o[d-p]===w[T-p];p++);return ur=w.slice(i,1<p?1-p:void 0)}function al(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ts(){return!0}function qc(){return!1}function Pn(i){function o(d,p,w,T,L){this._reactName=d,this._targetInst=w,this.type=p,this.nativeEvent=T,this.target=L,this.currentTarget=null;for(var W in i)i.hasOwnProperty(W)&&(d=i[W],this[W]=d?d(T):T[W]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Ts:qc,this.isPropagationStopped=qc,this}return Q(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),o}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ll=Pn(ts),Cs=Q({},ts,{view:0,detail:0}),Jm=Pn(Cs),cl,di,Qi,ca=Q({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Is,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Qi&&(Qi&&i.type==="mousemove"?(cl=i.screenX-Qi.screenX,di=i.screenY-Qi.screenY):di=cl=0,Qi=i),cl)},movementY:function(i){return"movementY"in i?i.movementY:di}}),ul=Pn(ca),Wc=Q({},ca,{dataTransfer:0}),Fd=Pn(Wc),dl=Q({},Cs,{relatedTarget:0}),hl=Pn(dl),Vd=Q({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),hi=Pn(Vd),Ud=Q({},ts,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),$d=Pn(Ud),zd=Q({},ts,{data:0}),Hc=Pn(zd),fl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qd(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Bd[i])?!!o[i]:!1}function Is(){return qd}var f=Q({},Cs,{key:function(i){if(i.key){var o=fl[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=al(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?tr[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Is,charCode:function(i){return i.type==="keypress"?al(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?al(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),N=Pn(f),A=Q({},ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),V=Pn(A),Z=Q({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Is}),oe=Pn(Z),Se=Q({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ct=Pn(Se),vn=Q({},ca,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),vt=Pn(vn),Nn=[9,13,27,32],cn=u&&"CompositionEvent"in window,Fr=null;u&&"documentMode"in document&&(Fr=document.documentMode);var Tr=u&&"TextEvent"in window&&!Fr,ua=u&&(!cn||Fr&&8<Fr&&11>=Fr),ml=" ",Wx=!1;function Hx(i,o){switch(i){case"keyup":return Nn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var pl=!1;function aA(i,o){switch(i){case"compositionend":return Kx(o);case"keypress":return o.which!==32?null:(Wx=!0,ml);case"textInput":return i=o.data,i===ml&&Wx?null:i;default:return null}}function lA(i,o){if(pl)return i==="compositionend"||!cn&&Hx(i,o)?(i=Bc(),ur=ol=Nr=null,pl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ua&&o.locale!=="ko"?null:o.data;default:return null}}var cA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gx(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!cA[i.type]:o==="textarea"}function Qx(i,o,d,p){ne(p),o=Qd(o,"onChange"),0<o.length&&(d=new ll("onChange","change",null,d,p),i.push({event:d,listeners:o}))}var Kc=null,Gc=null;function uA(i){fw(i,0)}function Wd(i){var o=wl(i);if(Le(o))return i}function dA(i,o){if(i==="change")return o}var Yx=!1;if(u){var Zm;if(u){var ep="oninput"in document;if(!ep){var Xx=document.createElement("div");Xx.setAttribute("oninput","return;"),ep=typeof Xx.oninput=="function"}Zm=ep}else Zm=!1;Yx=Zm&&(!document.documentMode||9<document.documentMode)}function Jx(){Kc&&(Kc.detachEvent("onpropertychange",Zx),Gc=Kc=null)}function Zx(i){if(i.propertyName==="value"&&Wd(Gc)){var o=[];Qx(o,Gc,i,gt(i)),Nt(uA,o)}}function hA(i,o,d){i==="focusin"?(Jx(),Kc=o,Gc=d,Kc.attachEvent("onpropertychange",Zx)):i==="focusout"&&Jx()}function fA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Wd(Gc)}function mA(i,o){if(i==="click")return Wd(o)}function pA(i,o){if(i==="input"||i==="change")return Wd(o)}function gA(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var ns=typeof Object.is=="function"?Object.is:gA;function Qc(i,o){if(ns(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var d=Object.keys(i),p=Object.keys(o);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var w=d[p];if(!h.call(o,w)||!ns(i[w],o[w]))return!1}return!0}function ew(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function tw(i,o){var d=ew(i);i=0;for(var p;d;){if(d.nodeType===3){if(p=i+d.textContent.length,i<=o&&p>=o)return{node:d,offset:o-i};i=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=ew(d)}}function nw(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?nw(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function rw(){for(var i=window,o=ut();o instanceof i.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)i=o.contentWindow;else break;o=ut(i.document)}return o}function tp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function vA(i){var o=rw(),d=i.focusedElem,p=i.selectionRange;if(o!==d&&d&&d.ownerDocument&&nw(d.ownerDocument.documentElement,d)){if(p!==null&&tp(d)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in d)d.selectionStart=o,d.selectionEnd=Math.min(i,d.value.length);else if(i=(o=d.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var w=d.textContent.length,T=Math.min(p.start,w);p=p.end===void 0?T:Math.min(p.end,w),!i.extend&&T>p&&(w=p,p=T,T=w),w=tw(d,T);var L=tw(d,p);w&&L&&(i.rangeCount!==1||i.anchorNode!==w.node||i.anchorOffset!==w.offset||i.focusNode!==L.node||i.focusOffset!==L.offset)&&(o=o.createRange(),o.setStart(w.node,w.offset),i.removeAllRanges(),T>p?(i.addRange(o),i.extend(L.node,L.offset)):(o.setEnd(L.node,L.offset),i.addRange(o)))}}for(o=[],i=d;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<o.length;d++)i=o[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var yA=u&&"documentMode"in document&&11>=document.documentMode,gl=null,np=null,Yc=null,rp=!1;function sw(i,o,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;rp||gl==null||gl!==ut(p)||(p=gl,"selectionStart"in p&&tp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Yc&&Qc(Yc,p)||(Yc=p,p=Qd(np,"onSelect"),0<p.length&&(o=new ll("onSelect","select",null,o,d),i.push({event:o,listeners:p}),o.target=gl)))}function Hd(i,o){var d={};return d[i.toLowerCase()]=o.toLowerCase(),d["Webkit"+i]="webkit"+o,d["Moz"+i]="moz"+o,d}var vl={animationend:Hd("Animation","AnimationEnd"),animationiteration:Hd("Animation","AnimationIteration"),animationstart:Hd("Animation","AnimationStart"),transitionend:Hd("Transition","TransitionEnd")},sp={},iw={};u&&(iw=document.createElement("div").style,"AnimationEvent"in window||(delete vl.animationend.animation,delete vl.animationiteration.animation,delete vl.animationstart.animation),"TransitionEvent"in window||delete vl.transitionend.transition);function Kd(i){if(sp[i])return sp[i];if(!vl[i])return i;var o=vl[i],d;for(d in o)if(o.hasOwnProperty(d)&&d in iw)return sp[i]=o[d];return i}var ow=Kd("animationend"),aw=Kd("animationiteration"),lw=Kd("animationstart"),cw=Kd("transitionend"),uw=new Map,dw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yi(i,o){uw.set(i,o),l(o,[i])}for(var ip=0;ip<dw.length;ip++){var op=dw[ip],xA=op.toLowerCase(),wA=op[0].toUpperCase()+op.slice(1);Yi(xA,"on"+wA)}Yi(ow,"onAnimationEnd"),Yi(aw,"onAnimationIteration"),Yi(lw,"onAnimationStart"),Yi("dblclick","onDoubleClick"),Yi("focusin","onFocus"),Yi("focusout","onBlur"),Yi(cw,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_A=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xc));function hw(i,o,d){var p=i.type||"unknown-event";i.currentTarget=d,Gt(p,o,void 0,i),i.currentTarget=null}function fw(i,o){o=(o&4)!==0;for(var d=0;d<i.length;d++){var p=i[d],w=p.event;p=p.listeners;e:{var T=void 0;if(o)for(var L=p.length-1;0<=L;L--){var W=p[L],G=W.instance,se=W.currentTarget;if(W=W.listener,G!==T&&w.isPropagationStopped())break e;hw(w,W,se),T=G}else for(L=0;L<p.length;L++){if(W=p[L],G=W.instance,se=W.currentTarget,W=W.listener,G!==T&&w.isPropagationStopped())break e;hw(w,W,se),T=G}}}if(lr)throw i=Ui,lr=!1,Ui=null,i}function Vt(i,o){var d=o[mp];d===void 0&&(d=o[mp]=new Set);var p=i+"__bubble";d.has(p)||(mw(o,i,2,!1),d.add(p))}function ap(i,o,d){var p=0;o&&(p|=4),mw(d,i,p,o)}var Gd="_reactListening"+Math.random().toString(36).slice(2);function Jc(i){if(!i[Gd]){i[Gd]=!0,r.forEach(function(d){d!=="selectionchange"&&(_A.has(d)||ap(d,!1,i),ap(d,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Gd]||(o[Gd]=!0,ap("selectionchange",!1,o))}}function mw(i,o,d,p){switch(zc(o)){case 1:var w=qt;break;case 4:w=Xm;break;default:w=$c}d=w.bind(null,o,d,i),w=void 0,!ii||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(w=!0),p?w!==void 0?i.addEventListener(o,d,{capture:!0,passive:w}):i.addEventListener(o,d,!0):w!==void 0?i.addEventListener(o,d,{passive:w}):i.addEventListener(o,d,!1)}function lp(i,o,d,p,w){var T=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var L=p.tag;if(L===3||L===4){var W=p.stateNode.containerInfo;if(W===w||W.nodeType===8&&W.parentNode===w)break;if(L===4)for(L=p.return;L!==null;){var G=L.tag;if((G===3||G===4)&&(G=L.stateNode.containerInfo,G===w||G.nodeType===8&&G.parentNode===w))return;L=L.return}for(;W!==null;){if(L=da(W),L===null)return;if(G=L.tag,G===5||G===6){p=T=L;continue e}W=W.parentNode}}p=p.return}Nt(function(){var se=T,me=gt(d),ge=[];e:{var fe=uw.get(i);if(fe!==void 0){var Ae=ll,Oe=i;switch(i){case"keypress":if(al(d)===0)break e;case"keydown":case"keyup":Ae=N;break;case"focusin":Oe="focus",Ae=hl;break;case"focusout":Oe="blur",Ae=hl;break;case"beforeblur":case"afterblur":Ae=hl;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=Fd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=oe;break;case ow:case aw:case lw:Ae=hi;break;case cw:Ae=Ct;break;case"scroll":Ae=Jm;break;case"wheel":Ae=vt;break;case"copy":case"cut":case"paste":Ae=$d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=V}var Ve=(o&4)!==0,on=!Ve&&i==="scroll",ee=Ve?fe!==null?fe+"Capture":null:fe;Ve=[];for(var X=se,re;X!==null;){re=X;var ve=re.stateNode;if(re.tag===5&&ve!==null&&(re=ve,ee!==null&&(ve=be(X,ee),ve!=null&&Ve.push(Zc(X,ve,re)))),on)break;X=X.return}0<Ve.length&&(fe=new Ae(fe,Oe,null,d,me),ge.push({event:fe,listeners:Ve}))}}if((o&7)===0){e:{if(fe=i==="mouseover"||i==="pointerover",Ae=i==="mouseout"||i==="pointerout",fe&&d!==qe&&(Oe=d.relatedTarget||d.fromElement)&&(da(Oe)||Oe[fi]))break e;if((Ae||fe)&&(fe=me.window===me?me:(fe=me.ownerDocument)?fe.defaultView||fe.parentWindow:window,Ae?(Oe=d.relatedTarget||d.toElement,Ae=se,Oe=Oe?da(Oe):null,Oe!==null&&(on=Er(Oe),Oe!==on||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(Ae=null,Oe=se),Ae!==Oe)){if(Ve=ul,ve="onMouseLeave",ee="onMouseEnter",X="mouse",(i==="pointerout"||i==="pointerover")&&(Ve=V,ve="onPointerLeave",ee="onPointerEnter",X="pointer"),on=Ae==null?fe:wl(Ae),re=Oe==null?fe:wl(Oe),fe=new Ve(ve,X+"leave",Ae,d,me),fe.target=on,fe.relatedTarget=re,ve=null,da(me)===se&&(Ve=new Ve(ee,X+"enter",Oe,d,me),Ve.target=re,Ve.relatedTarget=on,ve=Ve),on=ve,Ae&&Oe)t:{for(Ve=Ae,ee=Oe,X=0,re=Ve;re;re=yl(re))X++;for(re=0,ve=ee;ve;ve=yl(ve))re++;for(;0<X-re;)Ve=yl(Ve),X--;for(;0<re-X;)ee=yl(ee),re--;for(;X--;){if(Ve===ee||ee!==null&&Ve===ee.alternate)break t;Ve=yl(Ve),ee=yl(ee)}Ve=null}else Ve=null;Ae!==null&&pw(ge,fe,Ae,Ve,!1),Oe!==null&&on!==null&&pw(ge,on,Oe,Ve,!0)}}e:{if(fe=se?wl(se):window,Ae=fe.nodeName&&fe.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&fe.type==="file")var Ue=dA;else if(Gx(fe))if(Yx)Ue=pA;else{Ue=fA;var We=hA}else(Ae=fe.nodeName)&&Ae.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Ue=mA);if(Ue&&(Ue=Ue(i,se))){Qx(ge,Ue,d,me);break e}We&&We(i,fe,se),i==="focusout"&&(We=fe._wrapperState)&&We.controlled&&fe.type==="number"&&Ze(fe,"number",fe.value)}switch(We=se?wl(se):window,i){case"focusin":(Gx(We)||We.contentEditable==="true")&&(gl=We,np=se,Yc=null);break;case"focusout":Yc=np=gl=null;break;case"mousedown":rp=!0;break;case"contextmenu":case"mouseup":case"dragend":rp=!1,sw(ge,d,me);break;case"selectionchange":if(yA)break;case"keydown":case"keyup":sw(ge,d,me)}var He;if(cn)e:{switch(i){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else pl?Hx(i,d)&&(tt="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(tt="onCompositionStart");tt&&(ua&&d.locale!=="ko"&&(pl||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&pl&&(He=Bc()):(Nr=me,ol="value"in Nr?Nr.value:Nr.textContent,pl=!0)),We=Qd(se,tt),0<We.length&&(tt=new Hc(tt,i,null,d,me),ge.push({event:tt,listeners:We}),He?tt.data=He:(He=Kx(d),He!==null&&(tt.data=He)))),(He=Tr?aA(i,d):lA(i,d))&&(se=Qd(se,"onBeforeInput"),0<se.length&&(me=new Hc("onBeforeInput","beforeinput",null,d,me),ge.push({event:me,listeners:se}),me.data=He))}fw(ge,o)})}function Zc(i,o,d){return{instance:i,listener:o,currentTarget:d}}function Qd(i,o){for(var d=o+"Capture",p=[];i!==null;){var w=i,T=w.stateNode;w.tag===5&&T!==null&&(w=T,T=be(i,d),T!=null&&p.unshift(Zc(i,T,w)),T=be(i,o),T!=null&&p.push(Zc(i,T,w))),i=i.return}return p}function yl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function pw(i,o,d,p,w){for(var T=o._reactName,L=[];d!==null&&d!==p;){var W=d,G=W.alternate,se=W.stateNode;if(G!==null&&G===p)break;W.tag===5&&se!==null&&(W=se,w?(G=be(d,T),G!=null&&L.unshift(Zc(d,G,W))):w||(G=be(d,T),G!=null&&L.push(Zc(d,G,W)))),d=d.return}L.length!==0&&i.push({event:o,listeners:L})}var EA=/\r\n?/g,bA=/\u0000|\uFFFD/g;function gw(i){return(typeof i=="string"?i:""+i).replace(EA,`
`).replace(bA,"")}function Yd(i,o,d){if(o=gw(o),gw(i)!==o&&d)throw Error(t(425))}function Xd(){}var cp=null,up=null;function dp(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var hp=typeof setTimeout=="function"?setTimeout:void 0,SA=typeof clearTimeout=="function"?clearTimeout:void 0,vw=typeof Promise=="function"?Promise:void 0,NA=typeof queueMicrotask=="function"?queueMicrotask:typeof vw<"u"?function(i){return vw.resolve(null).then(i).catch(TA)}:hp;function TA(i){setTimeout(function(){throw i})}function fp(i,o){var d=o,p=0;do{var w=d.nextSibling;if(i.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(p===0){i.removeChild(w),es(o);return}p--}else d!=="$"&&d!=="$?"&&d!=="$!"||p++;d=w}while(d);es(o)}function Xi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function yw(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return i;o--}else d==="/$"&&o++}i=i.previousSibling}return null}var xl=Math.random().toString(36).slice(2),js="__reactFiber$"+xl,eu="__reactProps$"+xl,fi="__reactContainer$"+xl,mp="__reactEvents$"+xl,CA="__reactListeners$"+xl,IA="__reactHandles$"+xl;function da(i){var o=i[js];if(o)return o;for(var d=i.parentNode;d;){if(o=d[fi]||d[js]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(i=yw(i);i!==null;){if(d=i[js])return d;i=yw(i)}return o}i=d,d=i.parentNode}return null}function tu(i){return i=i[js]||i[fi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function wl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Jd(i){return i[eu]||null}var pp=[],_l=-1;function Ji(i){return{current:i}}function Ut(i){0>_l||(i.current=pp[_l],pp[_l]=null,_l--)}function Lt(i,o){_l++,pp[_l]=i.current,i.current=o}var Zi={},$n=Ji(Zi),dr=Ji(!1),ha=Zi;function El(i,o){var d=i.type.contextTypes;if(!d)return Zi;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var w={},T;for(T in d)w[T]=o[T];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=w),w}function hr(i){return i=i.childContextTypes,i!=null}function Zd(){Ut(dr),Ut($n)}function xw(i,o,d){if($n.current!==Zi)throw Error(t(168));Lt($n,o),Lt(dr,d)}function ww(i,o,d){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return d;p=p.getChildContext();for(var w in p)if(!(w in o))throw Error(t(108,ue(i)||"Unknown",w));return Q({},d,p)}function eh(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Zi,ha=$n.current,Lt($n,i),Lt(dr,dr.current),!0}function _w(i,o,d){var p=i.stateNode;if(!p)throw Error(t(169));d?(i=ww(i,o,ha),p.__reactInternalMemoizedMergedChildContext=i,Ut(dr),Ut($n),Lt($n,i)):Ut(dr),Lt(dr,d)}var mi=null,th=!1,gp=!1;function Ew(i){mi===null?mi=[i]:mi.push(i)}function jA(i){th=!0,Ew(i)}function eo(){if(!gp&&mi!==null){gp=!0;var i=0,o=mt;try{var d=mi;for(mt=1;i<d.length;i++){var p=d[i];do p=p(!0);while(p!==null)}mi=null,th=!1}catch(w){throw mi!==null&&(mi=mi.slice(i+1)),tl(ra,eo),w}finally{mt=o,gp=!1}}return null}var bl=[],Sl=0,nh=null,rh=0,Vr=[],Ur=0,fa=null,pi=1,gi="";function ma(i,o){bl[Sl++]=rh,bl[Sl++]=nh,nh=i,rh=o}function bw(i,o,d){Vr[Ur++]=pi,Vr[Ur++]=gi,Vr[Ur++]=fa,fa=i;var p=pi;i=gi;var w=32-er(p)-1;p&=~(1<<w),d+=1;var T=32-er(o)+w;if(30<T){var L=w-w%5;T=(p&(1<<L)-1).toString(32),p>>=L,w-=L,pi=1<<32-er(o)+w|d<<w|p,gi=T+i}else pi=1<<T|d<<w|p,gi=i}function vp(i){i.return!==null&&(ma(i,1),bw(i,1,0))}function yp(i){for(;i===nh;)nh=bl[--Sl],bl[Sl]=null,rh=bl[--Sl],bl[Sl]=null;for(;i===fa;)fa=Vr[--Ur],Vr[Ur]=null,gi=Vr[--Ur],Vr[Ur]=null,pi=Vr[--Ur],Vr[Ur]=null}var Cr=null,Ir=null,Wt=!1,rs=null;function Sw(i,o){var d=qr(5,null,null,0);d.elementType="DELETED",d.stateNode=o,d.return=i,o=i.deletions,o===null?(i.deletions=[d],i.flags|=16):o.push(d)}function Nw(i,o){switch(i.tag){case 5:var d=i.type;return o=o.nodeType!==1||d.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Cr=i,Ir=Xi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Cr=i,Ir=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(d=fa!==null?{id:pi,overflow:gi}:null,i.memoizedState={dehydrated:o,treeContext:d,retryLane:1073741824},d=qr(18,null,null,0),d.stateNode=o,d.return=i,i.child=d,Cr=i,Ir=null,!0):!1;default:return!1}}function xp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function wp(i){if(Wt){var o=Ir;if(o){var d=o;if(!Nw(i,o)){if(xp(i))throw Error(t(418));o=Xi(d.nextSibling);var p=Cr;o&&Nw(i,o)?Sw(p,d):(i.flags=i.flags&-4097|2,Wt=!1,Cr=i)}}else{if(xp(i))throw Error(t(418));i.flags=i.flags&-4097|2,Wt=!1,Cr=i}}}function Tw(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Cr=i}function sh(i){if(i!==Cr)return!1;if(!Wt)return Tw(i),Wt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!dp(i.type,i.memoizedProps)),o&&(o=Ir)){if(xp(i))throw Cw(),Error(t(418));for(;o;)Sw(i,o),o=Xi(o.nextSibling)}if(Tw(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(o===0){Ir=Xi(i.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++}i=i.nextSibling}Ir=null}}else Ir=Cr?Xi(i.stateNode.nextSibling):null;return!0}function Cw(){for(var i=Ir;i;)i=Xi(i.nextSibling)}function Nl(){Ir=Cr=null,Wt=!1}function _p(i){rs===null?rs=[i]:rs.push(i)}var AA=O.ReactCurrentBatchConfig;function nu(i,o,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var p=d.stateNode}if(!p)throw Error(t(147,i));var w=p,T=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===T?o.ref:(o=function(L){var W=w.refs;L===null?delete W[T]:W[T]=L},o._stringRef=T,o)}if(typeof i!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,i))}return i}function ih(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Iw(i){var o=i._init;return o(i._payload)}function jw(i){function o(ee,X){if(i){var re=ee.deletions;re===null?(ee.deletions=[X],ee.flags|=16):re.push(X)}}function d(ee,X){if(!i)return null;for(;X!==null;)o(ee,X),X=X.sibling;return null}function p(ee,X){for(ee=new Map;X!==null;)X.key!==null?ee.set(X.key,X):ee.set(X.index,X),X=X.sibling;return ee}function w(ee,X){return ee=lo(ee,X),ee.index=0,ee.sibling=null,ee}function T(ee,X,re){return ee.index=re,i?(re=ee.alternate,re!==null?(re=re.index,re<X?(ee.flags|=2,X):re):(ee.flags|=2,X)):(ee.flags|=1048576,X)}function L(ee){return i&&ee.alternate===null&&(ee.flags|=2),ee}function W(ee,X,re,ve){return X===null||X.tag!==6?(X=hg(re,ee.mode,ve),X.return=ee,X):(X=w(X,re),X.return=ee,X)}function G(ee,X,re,ve){var Ue=re.type;return Ue===P?me(ee,X,re.props.children,ve,re.key):X!==null&&(X.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===Y&&Iw(Ue)===X.type)?(ve=w(X,re.props),ve.ref=nu(ee,X,re),ve.return=ee,ve):(ve=jh(re.type,re.key,re.props,null,ee.mode,ve),ve.ref=nu(ee,X,re),ve.return=ee,ve)}function se(ee,X,re,ve){return X===null||X.tag!==4||X.stateNode.containerInfo!==re.containerInfo||X.stateNode.implementation!==re.implementation?(X=fg(re,ee.mode,ve),X.return=ee,X):(X=w(X,re.children||[]),X.return=ee,X)}function me(ee,X,re,ve,Ue){return X===null||X.tag!==7?(X=Ea(re,ee.mode,ve,Ue),X.return=ee,X):(X=w(X,re),X.return=ee,X)}function ge(ee,X,re){if(typeof X=="string"&&X!==""||typeof X=="number")return X=hg(""+X,ee.mode,re),X.return=ee,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case U:return re=jh(X.type,X.key,X.props,null,ee.mode,re),re.ref=nu(ee,null,X),re.return=ee,re;case q:return X=fg(X,ee.mode,re),X.return=ee,X;case Y:var ve=X._init;return ge(ee,ve(X._payload),re)}if(Dt(X)||K(X))return X=Ea(X,ee.mode,re,null),X.return=ee,X;ih(ee,X)}return null}function fe(ee,X,re,ve){var Ue=X!==null?X.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Ue!==null?null:W(ee,X,""+re,ve);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case U:return re.key===Ue?G(ee,X,re,ve):null;case q:return re.key===Ue?se(ee,X,re,ve):null;case Y:return Ue=re._init,fe(ee,X,Ue(re._payload),ve)}if(Dt(re)||K(re))return Ue!==null?null:me(ee,X,re,ve,null);ih(ee,re)}return null}function Ae(ee,X,re,ve,Ue){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ee=ee.get(re)||null,W(X,ee,""+ve,Ue);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case U:return ee=ee.get(ve.key===null?re:ve.key)||null,G(X,ee,ve,Ue);case q:return ee=ee.get(ve.key===null?re:ve.key)||null,se(X,ee,ve,Ue);case Y:var We=ve._init;return Ae(ee,X,re,We(ve._payload),Ue)}if(Dt(ve)||K(ve))return ee=ee.get(re)||null,me(X,ee,ve,Ue,null);ih(X,ve)}return null}function Oe(ee,X,re,ve){for(var Ue=null,We=null,He=X,tt=X=0,In=null;He!==null&&tt<re.length;tt++){He.index>tt?(In=He,He=null):In=He.sibling;var _t=fe(ee,He,re[tt],ve);if(_t===null){He===null&&(He=In);break}i&&He&&_t.alternate===null&&o(ee,He),X=T(_t,X,tt),We===null?Ue=_t:We.sibling=_t,We=_t,He=In}if(tt===re.length)return d(ee,He),Wt&&ma(ee,tt),Ue;if(He===null){for(;tt<re.length;tt++)He=ge(ee,re[tt],ve),He!==null&&(X=T(He,X,tt),We===null?Ue=He:We.sibling=He,We=He);return Wt&&ma(ee,tt),Ue}for(He=p(ee,He);tt<re.length;tt++)In=Ae(He,ee,tt,re[tt],ve),In!==null&&(i&&In.alternate!==null&&He.delete(In.key===null?tt:In.key),X=T(In,X,tt),We===null?Ue=In:We.sibling=In,We=In);return i&&He.forEach(function(co){return o(ee,co)}),Wt&&ma(ee,tt),Ue}function Ve(ee,X,re,ve){var Ue=K(re);if(typeof Ue!="function")throw Error(t(150));if(re=Ue.call(re),re==null)throw Error(t(151));for(var We=Ue=null,He=X,tt=X=0,In=null,_t=re.next();He!==null&&!_t.done;tt++,_t=re.next()){He.index>tt?(In=He,He=null):In=He.sibling;var co=fe(ee,He,_t.value,ve);if(co===null){He===null&&(He=In);break}i&&He&&co.alternate===null&&o(ee,He),X=T(co,X,tt),We===null?Ue=co:We.sibling=co,We=co,He=In}if(_t.done)return d(ee,He),Wt&&ma(ee,tt),Ue;if(He===null){for(;!_t.done;tt++,_t=re.next())_t=ge(ee,_t.value,ve),_t!==null&&(X=T(_t,X,tt),We===null?Ue=_t:We.sibling=_t,We=_t);return Wt&&ma(ee,tt),Ue}for(He=p(ee,He);!_t.done;tt++,_t=re.next())_t=Ae(He,ee,tt,_t.value,ve),_t!==null&&(i&&_t.alternate!==null&&He.delete(_t.key===null?tt:_t.key),X=T(_t,X,tt),We===null?Ue=_t:We.sibling=_t,We=_t);return i&&He.forEach(function(cP){return o(ee,cP)}),Wt&&ma(ee,tt),Ue}function on(ee,X,re,ve){if(typeof re=="object"&&re!==null&&re.type===P&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case U:e:{for(var Ue=re.key,We=X;We!==null;){if(We.key===Ue){if(Ue=re.type,Ue===P){if(We.tag===7){d(ee,We.sibling),X=w(We,re.props.children),X.return=ee,ee=X;break e}}else if(We.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===Y&&Iw(Ue)===We.type){d(ee,We.sibling),X=w(We,re.props),X.ref=nu(ee,We,re),X.return=ee,ee=X;break e}d(ee,We);break}else o(ee,We);We=We.sibling}re.type===P?(X=Ea(re.props.children,ee.mode,ve,re.key),X.return=ee,ee=X):(ve=jh(re.type,re.key,re.props,null,ee.mode,ve),ve.ref=nu(ee,X,re),ve.return=ee,ee=ve)}return L(ee);case q:e:{for(We=re.key;X!==null;){if(X.key===We)if(X.tag===4&&X.stateNode.containerInfo===re.containerInfo&&X.stateNode.implementation===re.implementation){d(ee,X.sibling),X=w(X,re.children||[]),X.return=ee,ee=X;break e}else{d(ee,X);break}else o(ee,X);X=X.sibling}X=fg(re,ee.mode,ve),X.return=ee,ee=X}return L(ee);case Y:return We=re._init,on(ee,X,We(re._payload),ve)}if(Dt(re))return Oe(ee,X,re,ve);if(K(re))return Ve(ee,X,re,ve);ih(ee,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,X!==null&&X.tag===6?(d(ee,X.sibling),X=w(X,re),X.return=ee,ee=X):(d(ee,X),X=hg(re,ee.mode,ve),X.return=ee,ee=X),L(ee)):d(ee,X)}return on}var Tl=jw(!0),Aw=jw(!1),oh=Ji(null),ah=null,Cl=null,Ep=null;function bp(){Ep=Cl=ah=null}function Sp(i){var o=oh.current;Ut(oh),i._currentValue=o}function Np(i,o,d){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===d)break;i=i.return}}function Il(i,o){ah=i,Ep=Cl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(fr=!0),i.firstContext=null)}function $r(i){var o=i._currentValue;if(Ep!==i)if(i={context:i,memoizedValue:o,next:null},Cl===null){if(ah===null)throw Error(t(308));Cl=i,ah.dependencies={lanes:0,firstContext:i}}else Cl=Cl.next=i;return o}var pa=null;function Tp(i){pa===null?pa=[i]:pa.push(i)}function Pw(i,o,d,p){var w=o.interleaved;return w===null?(d.next=d,Tp(o)):(d.next=w.next,w.next=d),o.interleaved=d,vi(i,p)}function vi(i,o){i.lanes|=o;var d=i.alternate;for(d!==null&&(d.lanes|=o),d=i,i=i.return;i!==null;)i.childLanes|=o,d=i.alternate,d!==null&&(d.childLanes|=o),d=i,i=i.return;return d.tag===3?d.stateNode:null}var to=!1;function Cp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rw(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function yi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function no(i,o,d){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(xt&2)!==0){var w=p.pending;return w===null?o.next=o:(o.next=w.next,w.next=o),p.pending=o,vi(i,d)}return w=p.interleaved,w===null?(o.next=o,Tp(p)):(o.next=w.next,w.next=o),p.interleaved=o,vi(i,d)}function lh(i,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,d|=p,o.lanes=d,Wi(i,d)}}function kw(i,o){var d=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var w=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var L={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?w=T=L:T=T.next=L,d=d.next}while(d!==null);T===null?w=T=o:T=T.next=o}else w=T=o;d={baseState:p.baseState,firstBaseUpdate:w,lastBaseUpdate:T,shared:p.shared,effects:p.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=o:i.next=o,d.lastBaseUpdate=o}function ch(i,o,d,p){var w=i.updateQueue;to=!1;var T=w.firstBaseUpdate,L=w.lastBaseUpdate,W=w.shared.pending;if(W!==null){w.shared.pending=null;var G=W,se=G.next;G.next=null,L===null?T=se:L.next=se,L=G;var me=i.alternate;me!==null&&(me=me.updateQueue,W=me.lastBaseUpdate,W!==L&&(W===null?me.firstBaseUpdate=se:W.next=se,me.lastBaseUpdate=G))}if(T!==null){var ge=w.baseState;L=0,me=se=G=null,W=T;do{var fe=W.lane,Ae=W.eventTime;if((p&fe)===fe){me!==null&&(me=me.next={eventTime:Ae,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var Oe=i,Ve=W;switch(fe=o,Ae=d,Ve.tag){case 1:if(Oe=Ve.payload,typeof Oe=="function"){ge=Oe.call(Ae,ge,fe);break e}ge=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ve.payload,fe=typeof Oe=="function"?Oe.call(Ae,ge,fe):Oe,fe==null)break e;ge=Q({},ge,fe);break e;case 2:to=!0}}W.callback!==null&&W.lane!==0&&(i.flags|=64,fe=w.effects,fe===null?w.effects=[W]:fe.push(W))}else Ae={eventTime:Ae,lane:fe,tag:W.tag,payload:W.payload,callback:W.callback,next:null},me===null?(se=me=Ae,G=ge):me=me.next=Ae,L|=fe;if(W=W.next,W===null){if(W=w.shared.pending,W===null)break;fe=W,W=fe.next,fe.next=null,w.lastBaseUpdate=fe,w.shared.pending=null}}while(!0);if(me===null&&(G=ge),w.baseState=G,w.firstBaseUpdate=se,w.lastBaseUpdate=me,o=w.shared.interleaved,o!==null){w=o;do L|=w.lane,w=w.next;while(w!==o)}else T===null&&(w.shared.lanes=0);ya|=L,i.lanes=L,i.memoizedState=ge}}function Dw(i,o,d){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],w=p.callback;if(w!==null){if(p.callback=null,p=d,typeof w!="function")throw Error(t(191,w));w.call(p)}}}var ru={},As=Ji(ru),su=Ji(ru),iu=Ji(ru);function ga(i){if(i===ru)throw Error(t(174));return i}function Ip(i,o){switch(Lt(iu,o),Lt(su,i),Lt(As,ru),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:It(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=It(o,i)}Ut(As),Lt(As,o)}function jl(){Ut(As),Ut(su),Ut(iu)}function Ow(i){ga(iu.current);var o=ga(As.current),d=It(o,i.type);o!==d&&(Lt(su,i),Lt(As,d))}function jp(i){su.current===i&&(Ut(As),Ut(su))}var Qt=Ji(0);function uh(i){for(var o=i;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ap=[];function Pp(){for(var i=0;i<Ap.length;i++)Ap[i]._workInProgressVersionPrimary=null;Ap.length=0}var dh=O.ReactCurrentDispatcher,Rp=O.ReactCurrentBatchConfig,va=0,Yt=null,yn=null,Tn=null,hh=!1,ou=!1,au=0,PA=0;function zn(){throw Error(t(321))}function kp(i,o){if(o===null)return!1;for(var d=0;d<o.length&&d<i.length;d++)if(!ns(i[d],o[d]))return!1;return!0}function Dp(i,o,d,p,w,T){if(va=T,Yt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,dh.current=i===null||i.memoizedState===null?OA:LA,i=d(p,w),ou){T=0;do{if(ou=!1,au=0,25<=T)throw Error(t(301));T+=1,Tn=yn=null,o.updateQueue=null,dh.current=MA,i=d(p,w)}while(ou)}if(dh.current=ph,o=yn!==null&&yn.next!==null,va=0,Tn=yn=Yt=null,hh=!1,o)throw Error(t(300));return i}function Op(){var i=au!==0;return au=0,i}function Ps(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Yt.memoizedState=Tn=i:Tn=Tn.next=i,Tn}function zr(){if(yn===null){var i=Yt.alternate;i=i!==null?i.memoizedState:null}else i=yn.next;var o=Tn===null?Yt.memoizedState:Tn.next;if(o!==null)Tn=o,yn=i;else{if(i===null)throw Error(t(310));yn=i,i={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},Tn===null?Yt.memoizedState=Tn=i:Tn=Tn.next=i}return Tn}function lu(i,o){return typeof o=="function"?o(i):o}function Lp(i){var o=zr(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var p=yn,w=p.baseQueue,T=d.pending;if(T!==null){if(w!==null){var L=w.next;w.next=T.next,T.next=L}p.baseQueue=w=T,d.pending=null}if(w!==null){T=w.next,p=p.baseState;var W=L=null,G=null,se=T;do{var me=se.lane;if((va&me)===me)G!==null&&(G=G.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),p=se.hasEagerState?se.eagerState:i(p,se.action);else{var ge={lane:me,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};G===null?(W=G=ge,L=p):G=G.next=ge,Yt.lanes|=me,ya|=me}se=se.next}while(se!==null&&se!==T);G===null?L=p:G.next=W,ns(p,o.memoizedState)||(fr=!0),o.memoizedState=p,o.baseState=L,o.baseQueue=G,d.lastRenderedState=p}if(i=d.interleaved,i!==null){w=i;do T=w.lane,Yt.lanes|=T,ya|=T,w=w.next;while(w!==i)}else w===null&&(d.lanes=0);return[o.memoizedState,d.dispatch]}function Mp(i){var o=zr(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var p=d.dispatch,w=d.pending,T=o.memoizedState;if(w!==null){d.pending=null;var L=w=w.next;do T=i(T,L.action),L=L.next;while(L!==w);ns(T,o.memoizedState)||(fr=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),d.lastRenderedState=T}return[T,p]}function Lw(){}function Mw(i,o){var d=Yt,p=zr(),w=o(),T=!ns(p.memoizedState,w);if(T&&(p.memoizedState=w,fr=!0),p=p.queue,Fp(Uw.bind(null,d,p,i),[i]),p.getSnapshot!==o||T||Tn!==null&&Tn.memoizedState.tag&1){if(d.flags|=2048,cu(9,Vw.bind(null,d,p,w,o),void 0,null),Cn===null)throw Error(t(349));(va&30)!==0||Fw(d,o,w)}return w}function Fw(i,o,d){i.flags|=16384,i={getSnapshot:o,value:d},o=Yt.updateQueue,o===null?(o={lastEffect:null,stores:null},Yt.updateQueue=o,o.stores=[i]):(d=o.stores,d===null?o.stores=[i]:d.push(i))}function Vw(i,o,d,p){o.value=d,o.getSnapshot=p,$w(o)&&zw(i)}function Uw(i,o,d){return d(function(){$w(o)&&zw(i)})}function $w(i){var o=i.getSnapshot;i=i.value;try{var d=o();return!ns(i,d)}catch{return!0}}function zw(i){var o=vi(i,1);o!==null&&as(o,i,1,-1)}function Bw(i){var o=Ps();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:i},o.queue=i,i=i.dispatch=DA.bind(null,Yt,i),[o.memoizedState,i]}function cu(i,o,d,p){return i={tag:i,create:o,destroy:d,deps:p,next:null},o=Yt.updateQueue,o===null?(o={lastEffect:null,stores:null},Yt.updateQueue=o,o.lastEffect=i.next=i):(d=o.lastEffect,d===null?o.lastEffect=i.next=i:(p=d.next,d.next=i,i.next=p,o.lastEffect=i)),i}function qw(){return zr().memoizedState}function fh(i,o,d,p){var w=Ps();Yt.flags|=i,w.memoizedState=cu(1|o,d,void 0,p===void 0?null:p)}function mh(i,o,d,p){var w=zr();p=p===void 0?null:p;var T=void 0;if(yn!==null){var L=yn.memoizedState;if(T=L.destroy,p!==null&&kp(p,L.deps)){w.memoizedState=cu(o,d,T,p);return}}Yt.flags|=i,w.memoizedState=cu(1|o,d,T,p)}function Ww(i,o){return fh(8390656,8,i,o)}function Fp(i,o){return mh(2048,8,i,o)}function Hw(i,o){return mh(4,2,i,o)}function Kw(i,o){return mh(4,4,i,o)}function Gw(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Qw(i,o,d){return d=d!=null?d.concat([i]):null,mh(4,4,Gw.bind(null,o,i),d)}function Vp(){}function Yw(i,o){var d=zr();o=o===void 0?null:o;var p=d.memoizedState;return p!==null&&o!==null&&kp(o,p[1])?p[0]:(d.memoizedState=[i,o],i)}function Xw(i,o){var d=zr();o=o===void 0?null:o;var p=d.memoizedState;return p!==null&&o!==null&&kp(o,p[1])?p[0]:(i=i(),d.memoizedState=[i,o],i)}function Jw(i,o,d){return(va&21)===0?(i.baseState&&(i.baseState=!1,fr=!0),i.memoizedState=d):(ns(d,o)||(d=oa(),Yt.lanes|=d,ya|=d,i.baseState=!0),o)}function RA(i,o){var d=mt;mt=d!==0&&4>d?d:4,i(!0);var p=Rp.transition;Rp.transition={};try{i(!1),o()}finally{mt=d,Rp.transition=p}}function Zw(){return zr().memoizedState}function kA(i,o,d){var p=oo(i);if(d={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null},e0(i))t0(o,d);else if(d=Pw(i,o,d,p),d!==null){var w=rr();as(d,i,p,w),n0(d,o,p)}}function DA(i,o,d){var p=oo(i),w={lane:p,action:d,hasEagerState:!1,eagerState:null,next:null};if(e0(i))t0(o,w);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var L=o.lastRenderedState,W=T(L,d);if(w.hasEagerState=!0,w.eagerState=W,ns(W,L)){var G=o.interleaved;G===null?(w.next=w,Tp(o)):(w.next=G.next,G.next=w),o.interleaved=w;return}}catch{}finally{}d=Pw(i,o,w,p),d!==null&&(w=rr(),as(d,i,p,w),n0(d,o,p))}}function e0(i){var o=i.alternate;return i===Yt||o!==null&&o===Yt}function t0(i,o){ou=hh=!0;var d=i.pending;d===null?o.next=o:(o.next=d.next,d.next=o),i.pending=o}function n0(i,o,d){if((d&4194240)!==0){var p=o.lanes;p&=i.pendingLanes,d|=p,o.lanes=d,Wi(i,d)}}var ph={readContext:$r,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useInsertionEffect:zn,useLayoutEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useMutableSource:zn,useSyncExternalStore:zn,useId:zn,unstable_isNewReconciler:!1},OA={readContext:$r,useCallback:function(i,o){return Ps().memoizedState=[i,o===void 0?null:o],i},useContext:$r,useEffect:Ww,useImperativeHandle:function(i,o,d){return d=d!=null?d.concat([i]):null,fh(4194308,4,Gw.bind(null,o,i),d)},useLayoutEffect:function(i,o){return fh(4194308,4,i,o)},useInsertionEffect:function(i,o){return fh(4,2,i,o)},useMemo:function(i,o){var d=Ps();return o=o===void 0?null:o,i=i(),d.memoizedState=[i,o],i},useReducer:function(i,o,d){var p=Ps();return o=d!==void 0?d(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=kA.bind(null,Yt,i),[p.memoizedState,i]},useRef:function(i){var o=Ps();return i={current:i},o.memoizedState=i},useState:Bw,useDebugValue:Vp,useDeferredValue:function(i){return Ps().memoizedState=i},useTransition:function(){var i=Bw(!1),o=i[0];return i=RA.bind(null,i[1]),Ps().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,d){var p=Yt,w=Ps();if(Wt){if(d===void 0)throw Error(t(407));d=d()}else{if(d=o(),Cn===null)throw Error(t(349));(va&30)!==0||Fw(p,o,d)}w.memoizedState=d;var T={value:d,getSnapshot:o};return w.queue=T,Ww(Uw.bind(null,p,T,i),[i]),p.flags|=2048,cu(9,Vw.bind(null,p,T,d,o),void 0,null),d},useId:function(){var i=Ps(),o=Cn.identifierPrefix;if(Wt){var d=gi,p=pi;d=(p&~(1<<32-er(p)-1)).toString(32)+d,o=":"+o+"R"+d,d=au++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=PA++,o=":"+o+"r"+d.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},LA={readContext:$r,useCallback:Yw,useContext:$r,useEffect:Fp,useImperativeHandle:Qw,useInsertionEffect:Hw,useLayoutEffect:Kw,useMemo:Xw,useReducer:Lp,useRef:qw,useState:function(){return Lp(lu)},useDebugValue:Vp,useDeferredValue:function(i){var o=zr();return Jw(o,yn.memoizedState,i)},useTransition:function(){var i=Lp(lu)[0],o=zr().memoizedState;return[i,o]},useMutableSource:Lw,useSyncExternalStore:Mw,useId:Zw,unstable_isNewReconciler:!1},MA={readContext:$r,useCallback:Yw,useContext:$r,useEffect:Fp,useImperativeHandle:Qw,useInsertionEffect:Hw,useLayoutEffect:Kw,useMemo:Xw,useReducer:Mp,useRef:qw,useState:function(){return Mp(lu)},useDebugValue:Vp,useDeferredValue:function(i){var o=zr();return yn===null?o.memoizedState=i:Jw(o,yn.memoizedState,i)},useTransition:function(){var i=Mp(lu)[0],o=zr().memoizedState;return[i,o]},useMutableSource:Lw,useSyncExternalStore:Mw,useId:Zw,unstable_isNewReconciler:!1};function ss(i,o){if(i&&i.defaultProps){o=Q({},o),i=i.defaultProps;for(var d in i)o[d]===void 0&&(o[d]=i[d]);return o}return o}function Up(i,o,d,p){o=i.memoizedState,d=d(p,o),d=d==null?o:Q({},o,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var gh={isMounted:function(i){return(i=i._reactInternals)?Er(i)===i:!1},enqueueSetState:function(i,o,d){i=i._reactInternals;var p=rr(),w=oo(i),T=yi(p,w);T.payload=o,d!=null&&(T.callback=d),o=no(i,T,w),o!==null&&(as(o,i,w,p),lh(o,i,w))},enqueueReplaceState:function(i,o,d){i=i._reactInternals;var p=rr(),w=oo(i),T=yi(p,w);T.tag=1,T.payload=o,d!=null&&(T.callback=d),o=no(i,T,w),o!==null&&(as(o,i,w,p),lh(o,i,w))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var d=rr(),p=oo(i),w=yi(d,p);w.tag=2,o!=null&&(w.callback=o),o=no(i,w,p),o!==null&&(as(o,i,p,d),lh(o,i,p))}};function r0(i,o,d,p,w,T,L){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,T,L):o.prototype&&o.prototype.isPureReactComponent?!Qc(d,p)||!Qc(w,T):!0}function s0(i,o,d){var p=!1,w=Zi,T=o.contextType;return typeof T=="object"&&T!==null?T=$r(T):(w=hr(o)?ha:$n.current,p=o.contextTypes,T=(p=p!=null)?El(i,w):Zi),o=new o(d,T),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=gh,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=w,i.__reactInternalMemoizedMaskedChildContext=T),o}function i0(i,o,d,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,p),o.state!==i&&gh.enqueueReplaceState(o,o.state,null)}function $p(i,o,d,p){var w=i.stateNode;w.props=d,w.state=i.memoizedState,w.refs={},Cp(i);var T=o.contextType;typeof T=="object"&&T!==null?w.context=$r(T):(T=hr(o)?ha:$n.current,w.context=El(i,T)),w.state=i.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Up(i,o,T,d),w.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(o=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),o!==w.state&&gh.enqueueReplaceState(w,w.state,null),ch(i,d,w,p),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308)}function Al(i,o){try{var d="",p=o;do d+=Te(p),p=p.return;while(p);var w=d}catch(T){w=`
Error generating stack: `+T.message+`
`+T.stack}return{value:i,source:o,stack:w,digest:null}}function zp(i,o,d){return{value:i,source:null,stack:d??null,digest:o??null}}function Bp(i,o){try{console.error(o.value)}catch(d){setTimeout(function(){throw d})}}var FA=typeof WeakMap=="function"?WeakMap:Map;function o0(i,o,d){d=yi(-1,d),d.tag=3,d.payload={element:null};var p=o.value;return d.callback=function(){bh||(bh=!0,sg=p),Bp(i,o)},d}function a0(i,o,d){d=yi(-1,d),d.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var w=o.value;d.payload=function(){return p(w)},d.callback=function(){Bp(i,o)}}var T=i.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){Bp(i,o),typeof p!="function"&&(so===null?so=new Set([this]):so.add(this));var L=o.stack;this.componentDidCatch(o.value,{componentStack:L!==null?L:""})}),d}function l0(i,o,d){var p=i.pingCache;if(p===null){p=i.pingCache=new FA;var w=new Set;p.set(o,w)}else w=p.get(o),w===void 0&&(w=new Set,p.set(o,w));w.has(d)||(w.add(d),i=JA.bind(null,i,o,d),o.then(i,i))}function c0(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function u0(i,o,d,p,w){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(o=yi(-1,1),o.tag=2,no(d,o,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=w,i)}var VA=O.ReactCurrentOwner,fr=!1;function nr(i,o,d,p){o.child=i===null?Aw(o,null,d,p):Tl(o,i.child,d,p)}function d0(i,o,d,p,w){d=d.render;var T=o.ref;return Il(o,w),p=Dp(i,o,d,p,T,w),d=Op(),i!==null&&!fr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~w,xi(i,o,w)):(Wt&&d&&vp(o),o.flags|=1,nr(i,o,p,w),o.child)}function h0(i,o,d,p,w){if(i===null){var T=d.type;return typeof T=="function"&&!dg(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(o.tag=15,o.type=T,f0(i,o,T,p,w)):(i=jh(d.type,null,p,o,o.mode,w),i.ref=o.ref,i.return=o,o.child=i)}if(T=i.child,(i.lanes&w)===0){var L=T.memoizedProps;if(d=d.compare,d=d!==null?d:Qc,d(L,p)&&i.ref===o.ref)return xi(i,o,w)}return o.flags|=1,i=lo(T,p),i.ref=o.ref,i.return=o,o.child=i}function f0(i,o,d,p,w){if(i!==null){var T=i.memoizedProps;if(Qc(T,p)&&i.ref===o.ref)if(fr=!1,o.pendingProps=p=T,(i.lanes&w)!==0)(i.flags&131072)!==0&&(fr=!0);else return o.lanes=i.lanes,xi(i,o,w)}return qp(i,o,d,p,w)}function m0(i,o,d){var p=o.pendingProps,w=p.children,T=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(Rl,jr),jr|=d;else{if((d&1073741824)===0)return i=T!==null?T.baseLanes|d:d,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Lt(Rl,jr),jr|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=T!==null?T.baseLanes:d,Lt(Rl,jr),jr|=p}else T!==null?(p=T.baseLanes|d,o.memoizedState=null):p=d,Lt(Rl,jr),jr|=p;return nr(i,o,w,d),o.child}function p0(i,o){var d=o.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(o.flags|=512,o.flags|=2097152)}function qp(i,o,d,p,w){var T=hr(d)?ha:$n.current;return T=El(o,T),Il(o,w),d=Dp(i,o,d,p,T,w),p=Op(),i!==null&&!fr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~w,xi(i,o,w)):(Wt&&p&&vp(o),o.flags|=1,nr(i,o,d,w),o.child)}function g0(i,o,d,p,w){if(hr(d)){var T=!0;eh(o)}else T=!1;if(Il(o,w),o.stateNode===null)yh(i,o),s0(o,d,p),$p(o,d,p,w),p=!0;else if(i===null){var L=o.stateNode,W=o.memoizedProps;L.props=W;var G=L.context,se=d.contextType;typeof se=="object"&&se!==null?se=$r(se):(se=hr(d)?ha:$n.current,se=El(o,se));var me=d.getDerivedStateFromProps,ge=typeof me=="function"||typeof L.getSnapshotBeforeUpdate=="function";ge||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(W!==p||G!==se)&&i0(o,L,p,se),to=!1;var fe=o.memoizedState;L.state=fe,ch(o,p,L,w),G=o.memoizedState,W!==p||fe!==G||dr.current||to?(typeof me=="function"&&(Up(o,d,me,p),G=o.memoizedState),(W=to||r0(o,d,W,p,fe,G,se))?(ge||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(o.flags|=4194308)):(typeof L.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=G),L.props=p,L.state=G,L.context=se,p=W):(typeof L.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{L=o.stateNode,Rw(i,o),W=o.memoizedProps,se=o.type===o.elementType?W:ss(o.type,W),L.props=se,ge=o.pendingProps,fe=L.context,G=d.contextType,typeof G=="object"&&G!==null?G=$r(G):(G=hr(d)?ha:$n.current,G=El(o,G));var Ae=d.getDerivedStateFromProps;(me=typeof Ae=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(W!==ge||fe!==G)&&i0(o,L,p,G),to=!1,fe=o.memoizedState,L.state=fe,ch(o,p,L,w);var Oe=o.memoizedState;W!==ge||fe!==Oe||dr.current||to?(typeof Ae=="function"&&(Up(o,d,Ae,p),Oe=o.memoizedState),(se=to||r0(o,d,se,p,fe,Oe,G)||!1)?(me||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(p,Oe,G),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(p,Oe,G)),typeof L.componentDidUpdate=="function"&&(o.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof L.componentDidUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=Oe),L.props=p,L.state=Oe,L.context=G,p=se):(typeof L.componentDidUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&fe===i.memoizedState||(o.flags|=1024),p=!1)}return Wp(i,o,d,p,T,w)}function Wp(i,o,d,p,w,T){p0(i,o);var L=(o.flags&128)!==0;if(!p&&!L)return w&&_w(o,d,!1),xi(i,o,T);p=o.stateNode,VA.current=o;var W=L&&typeof d.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&L?(o.child=Tl(o,i.child,null,T),o.child=Tl(o,null,W,T)):nr(i,o,W,T),o.memoizedState=p.state,w&&_w(o,d,!0),o.child}function v0(i){var o=i.stateNode;o.pendingContext?xw(i,o.pendingContext,o.pendingContext!==o.context):o.context&&xw(i,o.context,!1),Ip(i,o.containerInfo)}function y0(i,o,d,p,w){return Nl(),_p(w),o.flags|=256,nr(i,o,d,p),o.child}var Hp={dehydrated:null,treeContext:null,retryLane:0};function Kp(i){return{baseLanes:i,cachePool:null,transitions:null}}function x0(i,o,d){var p=o.pendingProps,w=Qt.current,T=!1,L=(o.flags&128)!==0,W;if((W=L)||(W=i!==null&&i.memoizedState===null?!1:(w&2)!==0),W?(T=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(w|=1),Lt(Qt,w&1),i===null)return wp(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(L=p.children,i=p.fallback,T?(p=o.mode,T=o.child,L={mode:"hidden",children:L},(p&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=L):T=Ah(L,p,0,null),i=Ea(i,p,d,null),T.return=o,i.return=o,T.sibling=i,o.child=T,o.child.memoizedState=Kp(d),o.memoizedState=Hp,i):Gp(o,L));if(w=i.memoizedState,w!==null&&(W=w.dehydrated,W!==null))return UA(i,o,L,p,W,w,d);if(T){T=p.fallback,L=o.mode,w=i.child,W=w.sibling;var G={mode:"hidden",children:p.children};return(L&1)===0&&o.child!==w?(p=o.child,p.childLanes=0,p.pendingProps=G,o.deletions=null):(p=lo(w,G),p.subtreeFlags=w.subtreeFlags&14680064),W!==null?T=lo(W,T):(T=Ea(T,L,d,null),T.flags|=2),T.return=o,p.return=o,p.sibling=T,o.child=p,p=T,T=o.child,L=i.child.memoizedState,L=L===null?Kp(d):{baseLanes:L.baseLanes|d,cachePool:null,transitions:L.transitions},T.memoizedState=L,T.childLanes=i.childLanes&~d,o.memoizedState=Hp,p}return T=i.child,i=T.sibling,p=lo(T,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=d),p.return=o,p.sibling=null,i!==null&&(d=o.deletions,d===null?(o.deletions=[i],o.flags|=16):d.push(i)),o.child=p,o.memoizedState=null,p}function Gp(i,o){return o=Ah({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function vh(i,o,d,p){return p!==null&&_p(p),Tl(o,i.child,null,d),i=Gp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function UA(i,o,d,p,w,T,L){if(d)return o.flags&256?(o.flags&=-257,p=zp(Error(t(422))),vh(i,o,L,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(T=p.fallback,w=o.mode,p=Ah({mode:"visible",children:p.children},w,0,null),T=Ea(T,w,L,null),T.flags|=2,p.return=o,T.return=o,p.sibling=T,o.child=p,(o.mode&1)!==0&&Tl(o,i.child,null,L),o.child.memoizedState=Kp(L),o.memoizedState=Hp,T);if((o.mode&1)===0)return vh(i,o,L,null);if(w.data==="$!"){if(p=w.nextSibling&&w.nextSibling.dataset,p)var W=p.dgst;return p=W,T=Error(t(419)),p=zp(T,p,void 0),vh(i,o,L,p)}if(W=(L&i.childLanes)!==0,fr||W){if(p=Cn,p!==null){switch(L&-L){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(p.suspendedLanes|L))!==0?0:w,w!==0&&w!==T.retryLane&&(T.retryLane=w,vi(i,w),as(p,i,w,-1))}return ug(),p=zp(Error(t(421))),vh(i,o,L,p)}return w.data==="$?"?(o.flags|=128,o.child=i.child,o=ZA.bind(null,i),w._reactRetry=o,null):(i=T.treeContext,Ir=Xi(w.nextSibling),Cr=o,Wt=!0,rs=null,i!==null&&(Vr[Ur++]=pi,Vr[Ur++]=gi,Vr[Ur++]=fa,pi=i.id,gi=i.overflow,fa=o),o=Gp(o,p.children),o.flags|=4096,o)}function w0(i,o,d){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),Np(i.return,o,d)}function Qp(i,o,d,p,w){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:w}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=p,T.tail=d,T.tailMode=w)}function _0(i,o,d){var p=o.pendingProps,w=p.revealOrder,T=p.tail;if(nr(i,o,p.children,d),p=Qt.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&w0(i,d,o);else if(i.tag===19)w0(i,d,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Lt(Qt,p),(o.mode&1)===0)o.memoizedState=null;else switch(w){case"forwards":for(d=o.child,w=null;d!==null;)i=d.alternate,i!==null&&uh(i)===null&&(w=d),d=d.sibling;d=w,d===null?(w=o.child,o.child=null):(w=d.sibling,d.sibling=null),Qp(o,!1,w,d,T);break;case"backwards":for(d=null,w=o.child,o.child=null;w!==null;){if(i=w.alternate,i!==null&&uh(i)===null){o.child=w;break}i=w.sibling,w.sibling=d,d=w,w=i}Qp(o,!0,d,null,T);break;case"together":Qp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function yh(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function xi(i,o,d){if(i!==null&&(o.dependencies=i.dependencies),ya|=o.lanes,(d&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,d=lo(i,i.pendingProps),o.child=d,d.return=o;i.sibling!==null;)i=i.sibling,d=d.sibling=lo(i,i.pendingProps),d.return=o;d.sibling=null}return o.child}function $A(i,o,d){switch(o.tag){case 3:v0(o),Nl();break;case 5:Ow(o);break;case 1:hr(o.type)&&eh(o);break;case 4:Ip(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,w=o.memoizedProps.value;Lt(oh,p._currentValue),p._currentValue=w;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Lt(Qt,Qt.current&1),o.flags|=128,null):(d&o.child.childLanes)!==0?x0(i,o,d):(Lt(Qt,Qt.current&1),i=xi(i,o,d),i!==null?i.sibling:null);Lt(Qt,Qt.current&1);break;case 19:if(p=(d&o.childLanes)!==0,(i.flags&128)!==0){if(p)return _0(i,o,d);o.flags|=128}if(w=o.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Lt(Qt,Qt.current),p)break;return null;case 22:case 23:return o.lanes=0,m0(i,o,d)}return xi(i,o,d)}var E0,Yp,b0,S0;E0=function(i,o){for(var d=o.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Yp=function(){},b0=function(i,o,d,p){var w=i.memoizedProps;if(w!==p){i=o.stateNode,ga(As.current);var T=null;switch(d){case"input":w=bt(i,w),p=bt(i,p),T=[];break;case"select":w=Q({},w,{value:void 0}),p=Q({},p,{value:void 0}),T=[];break;case"textarea":w=ni(i,w),p=ni(i,p),T=[];break;default:typeof w.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Xd)}Un(d,p);var L;d=null;for(se in w)if(!p.hasOwnProperty(se)&&w.hasOwnProperty(se)&&w[se]!=null)if(se==="style"){var W=w[se];for(L in W)W.hasOwnProperty(L)&&(d||(d={}),d[L]="")}else se!=="dangerouslySetInnerHTML"&&se!=="children"&&se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(s.hasOwnProperty(se)?T||(T=[]):(T=T||[]).push(se,null));for(se in p){var G=p[se];if(W=w!=null?w[se]:void 0,p.hasOwnProperty(se)&&G!==W&&(G!=null||W!=null))if(se==="style")if(W){for(L in W)!W.hasOwnProperty(L)||G&&G.hasOwnProperty(L)||(d||(d={}),d[L]="");for(L in G)G.hasOwnProperty(L)&&W[L]!==G[L]&&(d||(d={}),d[L]=G[L])}else d||(T||(T=[]),T.push(se,d)),d=G;else se==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,W=W?W.__html:void 0,G!=null&&W!==G&&(T=T||[]).push(se,G)):se==="children"?typeof G!="string"&&typeof G!="number"||(T=T||[]).push(se,""+G):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&(s.hasOwnProperty(se)?(G!=null&&se==="onScroll"&&Vt("scroll",i),T||W===G||(T=[])):(T=T||[]).push(se,G))}d&&(T=T||[]).push("style",d);var se=T;(o.updateQueue=se)&&(o.flags|=4)}},S0=function(i,o,d,p){d!==p&&(o.flags|=4)};function uu(i,o){if(!Wt)switch(i.tailMode){case"hidden":o=i.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Bn(i){var o=i.alternate!==null&&i.alternate.child===i.child,d=0,p=0;if(o)for(var w=i.child;w!==null;)d|=w.lanes|w.childLanes,p|=w.subtreeFlags&14680064,p|=w.flags&14680064,w.return=i,w=w.sibling;else for(w=i.child;w!==null;)d|=w.lanes|w.childLanes,p|=w.subtreeFlags,p|=w.flags,w.return=i,w=w.sibling;return i.subtreeFlags|=p,i.childLanes=d,o}function zA(i,o,d){var p=o.pendingProps;switch(yp(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(o),null;case 1:return hr(o.type)&&Zd(),Bn(o),null;case 3:return p=o.stateNode,jl(),Ut(dr),Ut($n),Pp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(sh(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,rs!==null&&(ag(rs),rs=null))),Yp(i,o),Bn(o),null;case 5:jp(o);var w=ga(iu.current);if(d=o.type,i!==null&&o.stateNode!=null)b0(i,o,d,p,w),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return Bn(o),null}if(i=ga(As.current),sh(o)){p=o.stateNode,d=o.type;var T=o.memoizedProps;switch(p[js]=o,p[eu]=T,i=(o.mode&1)!==0,d){case"dialog":Vt("cancel",p),Vt("close",p);break;case"iframe":case"object":case"embed":Vt("load",p);break;case"video":case"audio":for(w=0;w<Xc.length;w++)Vt(Xc[w],p);break;case"source":Vt("error",p);break;case"img":case"image":case"link":Vt("error",p),Vt("load",p);break;case"details":Vt("toggle",p);break;case"input":sn(p,T),Vt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!T.multiple},Vt("invalid",p);break;case"textarea":Zn(p,T),Vt("invalid",p)}Un(d,T),w=null;for(var L in T)if(T.hasOwnProperty(L)){var W=T[L];L==="children"?typeof W=="string"?p.textContent!==W&&(T.suppressHydrationWarning!==!0&&Yd(p.textContent,W,i),w=["children",W]):typeof W=="number"&&p.textContent!==""+W&&(T.suppressHydrationWarning!==!0&&Yd(p.textContent,W,i),w=["children",""+W]):s.hasOwnProperty(L)&&W!=null&&L==="onScroll"&&Vt("scroll",p)}switch(d){case"input":Me(p),en(p,T,!0);break;case"textarea":Me(p),ws(p);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(p.onclick=Xd)}p=w,o.updateQueue=p,p!==null&&(o.flags|=4)}else{L=w.nodeType===9?w:w.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Mt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=L.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=L.createElement(d,{is:p.is}):(i=L.createElement(d),d==="select"&&(L=i,p.multiple?L.multiple=!0:p.size&&(L.size=p.size))):i=L.createElementNS(i,d),i[js]=o,i[eu]=p,E0(i,o,!1,!1),o.stateNode=i;e:{switch(L=si(d,p),d){case"dialog":Vt("cancel",i),Vt("close",i),w=p;break;case"iframe":case"object":case"embed":Vt("load",i),w=p;break;case"video":case"audio":for(w=0;w<Xc.length;w++)Vt(Xc[w],i);w=p;break;case"source":Vt("error",i),w=p;break;case"img":case"image":case"link":Vt("error",i),Vt("load",i),w=p;break;case"details":Vt("toggle",i),w=p;break;case"input":sn(i,p),w=bt(i,p),Vt("invalid",i);break;case"option":w=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},w=Q({},p,{value:void 0}),Vt("invalid",i);break;case"textarea":Zn(i,p),w=ni(i,p),Vt("invalid",i);break;default:w=p}Un(d,w),W=w;for(T in W)if(W.hasOwnProperty(T)){var G=W[T];T==="style"?ri(i,G):T==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&Vn(i,G)):T==="children"?typeof G=="string"?(d!=="textarea"||G!=="")&&Sn(i,G):typeof G=="number"&&Sn(i,""+G):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(s.hasOwnProperty(T)?G!=null&&T==="onScroll"&&Vt("scroll",i):G!=null&&C(i,T,G,L))}switch(d){case"input":Me(i),en(i,p,!1);break;case"textarea":Me(i),ws(i);break;case"option":p.value!=null&&i.setAttribute("value",""+ye(p.value));break;case"select":i.multiple=!!p.multiple,T=p.value,T!=null?Jn(i,!!p.multiple,T,!1):p.defaultValue!=null&&Jn(i,!!p.multiple,p.defaultValue,!0);break;default:typeof w.onClick=="function"&&(i.onclick=Xd)}switch(d){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Bn(o),null;case 6:if(i&&o.stateNode!=null)S0(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(d=ga(iu.current),ga(As.current),sh(o)){if(p=o.stateNode,d=o.memoizedProps,p[js]=o,(T=p.nodeValue!==d)&&(i=Cr,i!==null))switch(i.tag){case 3:Yd(p.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Yd(p.nodeValue,d,(i.mode&1)!==0)}T&&(o.flags|=4)}else p=(d.nodeType===9?d:d.ownerDocument).createTextNode(p),p[js]=o,o.stateNode=p}return Bn(o),null;case 13:if(Ut(Qt),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Wt&&Ir!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Cw(),Nl(),o.flags|=98560,T=!1;else if(T=sh(o),p!==null&&p.dehydrated!==null){if(i===null){if(!T)throw Error(t(318));if(T=o.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(t(317));T[js]=o}else Nl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Bn(o),T=!1}else rs!==null&&(ag(rs),rs=null),T=!0;if(!T)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=d,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Qt.current&1)!==0?xn===0&&(xn=3):ug())),o.updateQueue!==null&&(o.flags|=4),Bn(o),null);case 4:return jl(),Yp(i,o),i===null&&Jc(o.stateNode.containerInfo),Bn(o),null;case 10:return Sp(o.type._context),Bn(o),null;case 17:return hr(o.type)&&Zd(),Bn(o),null;case 19:if(Ut(Qt),T=o.memoizedState,T===null)return Bn(o),null;if(p=(o.flags&128)!==0,L=T.rendering,L===null)if(p)uu(T,!1);else{if(xn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(L=uh(i),L!==null){for(o.flags|=128,uu(T,!1),p=L.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=d,d=o.child;d!==null;)T=d,i=p,T.flags&=14680066,L=T.alternate,L===null?(T.childLanes=0,T.lanes=i,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=L.childLanes,T.lanes=L.lanes,T.child=L.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=L.memoizedProps,T.memoizedState=L.memoizedState,T.updateQueue=L.updateQueue,T.type=L.type,i=L.dependencies,T.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return Lt(Qt,Qt.current&1|2),o.child}i=i.sibling}T.tail!==null&&Ot()>kl&&(o.flags|=128,p=!0,uu(T,!1),o.lanes=4194304)}else{if(!p)if(i=uh(L),i!==null){if(o.flags|=128,p=!0,d=i.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),uu(T,!0),T.tail===null&&T.tailMode==="hidden"&&!L.alternate&&!Wt)return Bn(o),null}else 2*Ot()-T.renderingStartTime>kl&&d!==1073741824&&(o.flags|=128,p=!0,uu(T,!1),o.lanes=4194304);T.isBackwards?(L.sibling=o.child,o.child=L):(d=T.last,d!==null?d.sibling=L:o.child=L,T.last=L)}return T.tail!==null?(o=T.tail,T.rendering=o,T.tail=o.sibling,T.renderingStartTime=Ot(),o.sibling=null,d=Qt.current,Lt(Qt,p?d&1|2:d&1),o):(Bn(o),null);case 22:case 23:return cg(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(jr&1073741824)!==0&&(Bn(o),o.subtreeFlags&6&&(o.flags|=8192)):Bn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function BA(i,o){switch(yp(o),o.tag){case 1:return hr(o.type)&&Zd(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return jl(),Ut(dr),Ut($n),Pp(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return jp(o),null;case 13:if(Ut(Qt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Nl()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Ut(Qt),null;case 4:return jl(),null;case 10:return Sp(o.type._context),null;case 22:case 23:return cg(),null;case 24:return null;default:return null}}var xh=!1,qn=!1,qA=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Pl(i,o){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(p){tn(i,o,p)}else d.current=null}function Xp(i,o,d){try{d()}catch(p){tn(i,o,p)}}var N0=!1;function WA(i,o){if(cp=Gi,i=rw(),tp(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var w=p.anchorOffset,T=p.focusNode;p=p.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var L=0,W=-1,G=-1,se=0,me=0,ge=i,fe=null;t:for(;;){for(var Ae;ge!==d||w!==0&&ge.nodeType!==3||(W=L+w),ge!==T||p!==0&&ge.nodeType!==3||(G=L+p),ge.nodeType===3&&(L+=ge.nodeValue.length),(Ae=ge.firstChild)!==null;)fe=ge,ge=Ae;for(;;){if(ge===i)break t;if(fe===d&&++se===w&&(W=L),fe===T&&++me===p&&(G=L),(Ae=ge.nextSibling)!==null)break;ge=fe,fe=ge.parentNode}ge=Ae}d=W===-1||G===-1?null:{start:W,end:G}}else d=null}d=d||{start:0,end:0}}else d=null;for(up={focusedElem:i,selectionRange:d},Gi=!1,ke=o;ke!==null;)if(o=ke,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ke=i;else for(;ke!==null;){o=ke;try{var Oe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var Ve=Oe.memoizedProps,on=Oe.memoizedState,ee=o.stateNode,X=ee.getSnapshotBeforeUpdate(o.elementType===o.type?Ve:ss(o.type,Ve),on);ee.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var re=o.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ve){tn(o,o.return,ve)}if(i=o.sibling,i!==null){i.return=o.return,ke=i;break}ke=o.return}return Oe=N0,N0=!1,Oe}function du(i,o,d){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&i)===i){var T=w.destroy;w.destroy=void 0,T!==void 0&&Xp(o,d,T)}w=w.next}while(w!==p)}}function wh(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&i)===i){var p=d.create;d.destroy=p()}d=d.next}while(d!==o)}}function Jp(i){var o=i.ref;if(o!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof o=="function"?o(i):o.current=i}}function T0(i){var o=i.alternate;o!==null&&(i.alternate=null,T0(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[js],delete o[eu],delete o[mp],delete o[CA],delete o[IA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function C0(i){return i.tag===5||i.tag===3||i.tag===4}function I0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||C0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Zp(i,o,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?d.nodeType===8?d.parentNode.insertBefore(i,o):d.insertBefore(i,o):(d.nodeType===8?(o=d.parentNode,o.insertBefore(i,d)):(o=d,o.appendChild(i)),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Xd));else if(p!==4&&(i=i.child,i!==null))for(Zp(i,o,d),i=i.sibling;i!==null;)Zp(i,o,d),i=i.sibling}function eg(i,o,d){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?d.insertBefore(i,o):d.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(eg(i,o,d),i=i.sibling;i!==null;)eg(i,o,d),i=i.sibling}var Rn=null,is=!1;function ro(i,o,d){for(d=d.child;d!==null;)j0(i,o,d),d=d.sibling}function j0(i,o,d){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(sa,d)}catch{}switch(d.tag){case 5:qn||Pl(d,o);case 6:var p=Rn,w=is;Rn=null,ro(i,o,d),Rn=p,is=w,Rn!==null&&(is?(i=Rn,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Rn.removeChild(d.stateNode));break;case 18:Rn!==null&&(is?(i=Rn,d=d.stateNode,i.nodeType===8?fp(i.parentNode,d):i.nodeType===1&&fp(i,d),es(i)):fp(Rn,d.stateNode));break;case 4:p=Rn,w=is,Rn=d.stateNode.containerInfo,is=!0,ro(i,o,d),Rn=p,is=w;break;case 0:case 11:case 14:case 15:if(!qn&&(p=d.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){w=p=p.next;do{var T=w,L=T.destroy;T=T.tag,L!==void 0&&((T&2)!==0||(T&4)!==0)&&Xp(d,o,L),w=w.next}while(w!==p)}ro(i,o,d);break;case 1:if(!qn&&(Pl(d,o),p=d.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=d.memoizedProps,p.state=d.memoizedState,p.componentWillUnmount()}catch(W){tn(d,o,W)}ro(i,o,d);break;case 21:ro(i,o,d);break;case 22:d.mode&1?(qn=(p=qn)||d.memoizedState!==null,ro(i,o,d),qn=p):ro(i,o,d);break;default:ro(i,o,d)}}function A0(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new qA),o.forEach(function(p){var w=eP.bind(null,i,p);d.has(p)||(d.add(p),p.then(w,w))})}}function os(i,o){var d=o.deletions;if(d!==null)for(var p=0;p<d.length;p++){var w=d[p];try{var T=i,L=o,W=L;e:for(;W!==null;){switch(W.tag){case 5:Rn=W.stateNode,is=!1;break e;case 3:Rn=W.stateNode.containerInfo,is=!0;break e;case 4:Rn=W.stateNode.containerInfo,is=!0;break e}W=W.return}if(Rn===null)throw Error(t(160));j0(T,L,w),Rn=null,is=!1;var G=w.alternate;G!==null&&(G.return=null),w.return=null}catch(se){tn(w,o,se)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)P0(o,i),o=o.sibling}function P0(i,o){var d=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(os(o,i),Rs(i),p&4){try{du(3,i,i.return),wh(3,i)}catch(Ve){tn(i,i.return,Ve)}try{du(5,i,i.return)}catch(Ve){tn(i,i.return,Ve)}}break;case 1:os(o,i),Rs(i),p&512&&d!==null&&Pl(d,d.return);break;case 5:if(os(o,i),Rs(i),p&512&&d!==null&&Pl(d,d.return),i.flags&32){var w=i.stateNode;try{Sn(w,"")}catch(Ve){tn(i,i.return,Ve)}}if(p&4&&(w=i.stateNode,w!=null)){var T=i.memoizedProps,L=d!==null?d.memoizedProps:T,W=i.type,G=i.updateQueue;if(i.updateQueue=null,G!==null)try{W==="input"&&T.type==="radio"&&T.name!=null&&Bt(w,T),si(W,L);var se=si(W,T);for(L=0;L<G.length;L+=2){var me=G[L],ge=G[L+1];me==="style"?ri(w,ge):me==="dangerouslySetInnerHTML"?Vn(w,ge):me==="children"?Sn(w,ge):C(w,me,ge,se)}switch(W){case"input":gn(w,T);break;case"textarea":bn(w,T);break;case"select":var fe=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!T.multiple;var Ae=T.value;Ae!=null?Jn(w,!!T.multiple,Ae,!1):fe!==!!T.multiple&&(T.defaultValue!=null?Jn(w,!!T.multiple,T.defaultValue,!0):Jn(w,!!T.multiple,T.multiple?[]:"",!1))}w[eu]=T}catch(Ve){tn(i,i.return,Ve)}}break;case 6:if(os(o,i),Rs(i),p&4){if(i.stateNode===null)throw Error(t(162));w=i.stateNode,T=i.memoizedProps;try{w.nodeValue=T}catch(Ve){tn(i,i.return,Ve)}}break;case 3:if(os(o,i),Rs(i),p&4&&d!==null&&d.memoizedState.isDehydrated)try{es(o.containerInfo)}catch(Ve){tn(i,i.return,Ve)}break;case 4:os(o,i),Rs(i);break;case 13:os(o,i),Rs(i),w=i.child,w.flags&8192&&(T=w.memoizedState!==null,w.stateNode.isHidden=T,!T||w.alternate!==null&&w.alternate.memoizedState!==null||(rg=Ot())),p&4&&A0(i);break;case 22:if(me=d!==null&&d.memoizedState!==null,i.mode&1?(qn=(se=qn)||me,os(o,i),qn=se):os(o,i),Rs(i),p&8192){if(se=i.memoizedState!==null,(i.stateNode.isHidden=se)&&!me&&(i.mode&1)!==0)for(ke=i,me=i.child;me!==null;){for(ge=ke=me;ke!==null;){switch(fe=ke,Ae=fe.child,fe.tag){case 0:case 11:case 14:case 15:du(4,fe,fe.return);break;case 1:Pl(fe,fe.return);var Oe=fe.stateNode;if(typeof Oe.componentWillUnmount=="function"){p=fe,d=fe.return;try{o=p,Oe.props=o.memoizedProps,Oe.state=o.memoizedState,Oe.componentWillUnmount()}catch(Ve){tn(p,d,Ve)}}break;case 5:Pl(fe,fe.return);break;case 22:if(fe.memoizedState!==null){D0(ge);continue}}Ae!==null?(Ae.return=fe,ke=Ae):D0(ge)}me=me.sibling}e:for(me=null,ge=i;;){if(ge.tag===5){if(me===null){me=ge;try{w=ge.stateNode,se?(T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(W=ge.stateNode,G=ge.memoizedProps.style,L=G!=null&&G.hasOwnProperty("display")?G.display:null,W.style.display=_s("display",L))}catch(Ve){tn(i,i.return,Ve)}}}else if(ge.tag===6){if(me===null)try{ge.stateNode.nodeValue=se?"":ge.memoizedProps}catch(Ve){tn(i,i.return,Ve)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===i)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===i)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===i)break e;me===ge&&(me=null),ge=ge.return}me===ge&&(me=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:os(o,i),Rs(i),p&4&&A0(i);break;case 21:break;default:os(o,i),Rs(i)}}function Rs(i){var o=i.flags;if(o&2){try{e:{for(var d=i.return;d!==null;){if(C0(d)){var p=d;break e}d=d.return}throw Error(t(160))}switch(p.tag){case 5:var w=p.stateNode;p.flags&32&&(Sn(w,""),p.flags&=-33);var T=I0(i);eg(i,T,w);break;case 3:case 4:var L=p.stateNode.containerInfo,W=I0(i);Zp(i,W,L);break;default:throw Error(t(161))}}catch(G){tn(i,i.return,G)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function HA(i,o,d){ke=i,R0(i)}function R0(i,o,d){for(var p=(i.mode&1)!==0;ke!==null;){var w=ke,T=w.child;if(w.tag===22&&p){var L=w.memoizedState!==null||xh;if(!L){var W=w.alternate,G=W!==null&&W.memoizedState!==null||qn;W=xh;var se=qn;if(xh=L,(qn=G)&&!se)for(ke=w;ke!==null;)L=ke,G=L.child,L.tag===22&&L.memoizedState!==null?O0(w):G!==null?(G.return=L,ke=G):O0(w);for(;T!==null;)ke=T,R0(T),T=T.sibling;ke=w,xh=W,qn=se}k0(i)}else(w.subtreeFlags&8772)!==0&&T!==null?(T.return=w,ke=T):k0(i)}}function k0(i){for(;ke!==null;){var o=ke;if((o.flags&8772)!==0){var d=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:qn||wh(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!qn)if(d===null)p.componentDidMount();else{var w=o.elementType===o.type?d.memoizedProps:ss(o.type,d.memoizedProps);p.componentDidUpdate(w,d.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var T=o.updateQueue;T!==null&&Dw(o,T,p);break;case 3:var L=o.updateQueue;if(L!==null){if(d=null,o.child!==null)switch(o.child.tag){case 5:d=o.child.stateNode;break;case 1:d=o.child.stateNode}Dw(o,L,d)}break;case 5:var W=o.stateNode;if(d===null&&o.flags&4){d=W;var G=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&d.focus();break;case"img":G.src&&(d.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var se=o.alternate;if(se!==null){var me=se.memoizedState;if(me!==null){var ge=me.dehydrated;ge!==null&&es(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qn||o.flags&512&&Jp(o)}catch(fe){tn(o,o.return,fe)}}if(o===i){ke=null;break}if(d=o.sibling,d!==null){d.return=o.return,ke=d;break}ke=o.return}}function D0(i){for(;ke!==null;){var o=ke;if(o===i){ke=null;break}var d=o.sibling;if(d!==null){d.return=o.return,ke=d;break}ke=o.return}}function O0(i){for(;ke!==null;){var o=ke;try{switch(o.tag){case 0:case 11:case 15:var d=o.return;try{wh(4,o)}catch(G){tn(o,d,G)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var w=o.return;try{p.componentDidMount()}catch(G){tn(o,w,G)}}var T=o.return;try{Jp(o)}catch(G){tn(o,T,G)}break;case 5:var L=o.return;try{Jp(o)}catch(G){tn(o,L,G)}}}catch(G){tn(o,o.return,G)}if(o===i){ke=null;break}var W=o.sibling;if(W!==null){W.return=o.return,ke=W;break}ke=o.return}}var KA=Math.ceil,_h=O.ReactCurrentDispatcher,tg=O.ReactCurrentOwner,Br=O.ReactCurrentBatchConfig,xt=0,Cn=null,un=null,kn=0,jr=0,Rl=Ji(0),xn=0,hu=null,ya=0,Eh=0,ng=0,fu=null,mr=null,rg=0,kl=1/0,wi=null,bh=!1,sg=null,so=null,Sh=!1,io=null,Nh=0,mu=0,ig=null,Th=-1,Ch=0;function rr(){return(xt&6)!==0?Ot():Th!==-1?Th:Th=Ot()}function oo(i){return(i.mode&1)===0?1:(xt&2)!==0&&kn!==0?kn&-kn:AA.transition!==null?(Ch===0&&(Ch=oa()),Ch):(i=mt,i!==0||(i=window.event,i=i===void 0?16:zc(i.type)),i)}function as(i,o,d,p){if(50<mu)throw mu=0,ig=null,Error(t(185));qi(i,d,p),((xt&2)===0||i!==Cn)&&(i===Cn&&((xt&2)===0&&(Eh|=d),xn===4&&ao(i,kn)),pr(i,p),d===1&&xt===0&&(o.mode&1)===0&&(kl=Ot()+500,th&&eo()))}function pr(i,o){var d=i.callbackNode;li(i,o);var p=ia(i,i===Cn?kn:0);if(p===0)d!==null&&Mc(d),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(d!=null&&Mc(d),o===1)i.tag===0?jA(M0.bind(null,i)):Ew(M0.bind(null,i)),NA(function(){(xt&6)===0&&eo()}),d=null;else{switch(Hi(p)){case 1:d=ra;break;case 4:d=$i;break;case 16:d=Lr;break;case 536870912:d=Cd;break;default:d=Lr}d=W0(d,L0.bind(null,i))}i.callbackPriority=o,i.callbackNode=d}}function L0(i,o){if(Th=-1,Ch=0,(xt&6)!==0)throw Error(t(327));var d=i.callbackNode;if(Dl()&&i.callbackNode!==d)return null;var p=ia(i,i===Cn?kn:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||o)o=Ih(i,p);else{o=p;var w=xt;xt|=2;var T=V0();(Cn!==i||kn!==o)&&(wi=null,kl=Ot()+500,wa(i,o));do try{YA();break}catch(W){F0(i,W)}while(!0);bp(),_h.current=T,xt=w,un!==null?o=0:(Cn=null,kn=0,o=xn)}if(o!==0){if(o===2&&(w=Sr(i),w!==0&&(p=w,o=og(i,w))),o===1)throw d=hu,wa(i,0),ao(i,p),pr(i,Ot()),d;if(o===6)ao(i,p);else{if(w=i.current.alternate,(p&30)===0&&!GA(w)&&(o=Ih(i,p),o===2&&(T=Sr(i),T!==0&&(p=T,o=og(i,T))),o===1))throw d=hu,wa(i,0),ao(i,p),pr(i,Ot()),d;switch(i.finishedWork=w,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:_a(i,mr,wi);break;case 3:if(ao(i,p),(p&130023424)===p&&(o=rg+500-Ot(),10<o)){if(ia(i,0)!==0)break;if(w=i.suspendedLanes,(w&p)!==p){rr(),i.pingedLanes|=i.suspendedLanes&w;break}i.timeoutHandle=hp(_a.bind(null,i,mr,wi),o);break}_a(i,mr,wi);break;case 4:if(ao(i,p),(p&4194240)===p)break;for(o=i.eventTimes,w=-1;0<p;){var L=31-er(p);T=1<<L,L=o[L],L>w&&(w=L),p&=~T}if(p=w,p=Ot()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*KA(p/1960))-p,10<p){i.timeoutHandle=hp(_a.bind(null,i,mr,wi),p);break}_a(i,mr,wi);break;case 5:_a(i,mr,wi);break;default:throw Error(t(329))}}}return pr(i,Ot()),i.callbackNode===d?L0.bind(null,i):null}function og(i,o){var d=fu;return i.current.memoizedState.isDehydrated&&(wa(i,o).flags|=256),i=Ih(i,o),i!==2&&(o=mr,mr=d,o!==null&&ag(o)),i}function ag(i){mr===null?mr=i:mr.push.apply(mr,i)}function GA(i){for(var o=i;;){if(o.flags&16384){var d=o.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var p=0;p<d.length;p++){var w=d[p],T=w.getSnapshot;w=w.value;try{if(!ns(T(),w))return!1}catch{return!1}}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ao(i,o){for(o&=~ng,o&=~Eh,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var d=31-er(o),p=1<<d;i[d]=-1,o&=~p}}function M0(i){if((xt&6)!==0)throw Error(t(327));Dl();var o=ia(i,0);if((o&1)===0)return pr(i,Ot()),null;var d=Ih(i,o);if(i.tag!==0&&d===2){var p=Sr(i);p!==0&&(o=p,d=og(i,p))}if(d===1)throw d=hu,wa(i,0),ao(i,o),pr(i,Ot()),d;if(d===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,_a(i,mr,wi),pr(i,Ot()),null}function lg(i,o){var d=xt;xt|=1;try{return i(o)}finally{xt=d,xt===0&&(kl=Ot()+500,th&&eo())}}function xa(i){io!==null&&io.tag===0&&(xt&6)===0&&Dl();var o=xt;xt|=1;var d=Br.transition,p=mt;try{if(Br.transition=null,mt=1,i)return i()}finally{mt=p,Br.transition=d,xt=o,(xt&6)===0&&eo()}}function cg(){jr=Rl.current,Ut(Rl)}function wa(i,o){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,SA(d)),un!==null)for(d=un.return;d!==null;){var p=d;switch(yp(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Zd();break;case 3:jl(),Ut(dr),Ut($n),Pp();break;case 5:jp(p);break;case 4:jl();break;case 13:Ut(Qt);break;case 19:Ut(Qt);break;case 10:Sp(p.type._context);break;case 22:case 23:cg()}d=d.return}if(Cn=i,un=i=lo(i.current,null),kn=jr=o,xn=0,hu=null,ng=Eh=ya=0,mr=fu=null,pa!==null){for(o=0;o<pa.length;o++)if(d=pa[o],p=d.interleaved,p!==null){d.interleaved=null;var w=p.next,T=d.pending;if(T!==null){var L=T.next;T.next=w,p.next=L}d.pending=p}pa=null}return i}function F0(i,o){do{var d=un;try{if(bp(),dh.current=ph,hh){for(var p=Yt.memoizedState;p!==null;){var w=p.queue;w!==null&&(w.pending=null),p=p.next}hh=!1}if(va=0,Tn=yn=Yt=null,ou=!1,au=0,tg.current=null,d===null||d.return===null){xn=1,hu=o,un=null;break}e:{var T=i,L=d.return,W=d,G=o;if(o=kn,W.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var se=G,me=W,ge=me.tag;if((me.mode&1)===0&&(ge===0||ge===11||ge===15)){var fe=me.alternate;fe?(me.updateQueue=fe.updateQueue,me.memoizedState=fe.memoizedState,me.lanes=fe.lanes):(me.updateQueue=null,me.memoizedState=null)}var Ae=c0(L);if(Ae!==null){Ae.flags&=-257,u0(Ae,L,W,T,o),Ae.mode&1&&l0(T,se,o),o=Ae,G=se;var Oe=o.updateQueue;if(Oe===null){var Ve=new Set;Ve.add(G),o.updateQueue=Ve}else Oe.add(G);break e}else{if((o&1)===0){l0(T,se,o),ug();break e}G=Error(t(426))}}else if(Wt&&W.mode&1){var on=c0(L);if(on!==null){(on.flags&65536)===0&&(on.flags|=256),u0(on,L,W,T,o),_p(Al(G,W));break e}}T=G=Al(G,W),xn!==4&&(xn=2),fu===null?fu=[T]:fu.push(T),T=L;do{switch(T.tag){case 3:T.flags|=65536,o&=-o,T.lanes|=o;var ee=o0(T,G,o);kw(T,ee);break e;case 1:W=G;var X=T.type,re=T.stateNode;if((T.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(so===null||!so.has(re)))){T.flags|=65536,o&=-o,T.lanes|=o;var ve=a0(T,W,o);kw(T,ve);break e}}T=T.return}while(T!==null)}$0(d)}catch(Ue){o=Ue,un===d&&d!==null&&(un=d=d.return);continue}break}while(!0)}function V0(){var i=_h.current;return _h.current=ph,i===null?ph:i}function ug(){(xn===0||xn===3||xn===2)&&(xn=4),Cn===null||(ya&268435455)===0&&(Eh&268435455)===0||ao(Cn,kn)}function Ih(i,o){var d=xt;xt|=2;var p=V0();(Cn!==i||kn!==o)&&(wi=null,wa(i,o));do try{QA();break}catch(w){F0(i,w)}while(!0);if(bp(),xt=d,_h.current=p,un!==null)throw Error(t(261));return Cn=null,kn=0,xn}function QA(){for(;un!==null;)U0(un)}function YA(){for(;un!==null&&!Nd();)U0(un)}function U0(i){var o=q0(i.alternate,i,jr);i.memoizedProps=i.pendingProps,o===null?$0(i):un=o,tg.current=null}function $0(i){var o=i;do{var d=o.alternate;if(i=o.return,(o.flags&32768)===0){if(d=zA(d,o,jr),d!==null){un=d;return}}else{if(d=BA(d,o),d!==null){d.flags&=32767,un=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{xn=6,un=null;return}}if(o=o.sibling,o!==null){un=o;return}un=o=i}while(o!==null);xn===0&&(xn=5)}function _a(i,o,d){var p=mt,w=Br.transition;try{Br.transition=null,mt=1,XA(i,o,d,p)}finally{Br.transition=w,mt=p}return null}function XA(i,o,d,p){do Dl();while(io!==null);if((xt&6)!==0)throw Error(t(327));d=i.finishedWork;var w=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var T=d.lanes|d.childLanes;if(At(i,T),i===Cn&&(un=Cn=null,kn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Sh||(Sh=!0,W0(Lr,function(){return Dl(),null})),T=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||T){T=Br.transition,Br.transition=null;var L=mt;mt=1;var W=xt;xt|=4,tg.current=null,WA(i,d),P0(d,i),vA(up),Gi=!!cp,up=cp=null,i.current=d,HA(d),Km(),xt=W,mt=L,Br.transition=T}else i.current=d;if(Sh&&(Sh=!1,io=i,Nh=w),T=i.pendingLanes,T===0&&(so=null),Id(d.stateNode),pr(i,Ot()),o!==null)for(p=i.onRecoverableError,d=0;d<o.length;d++)w=o[d],p(w.value,{componentStack:w.stack,digest:w.digest});if(bh)throw bh=!1,i=sg,sg=null,i;return(Nh&1)!==0&&i.tag!==0&&Dl(),T=i.pendingLanes,(T&1)!==0?i===ig?mu++:(mu=0,ig=i):mu=0,eo(),null}function Dl(){if(io!==null){var i=Hi(Nh),o=Br.transition,d=mt;try{if(Br.transition=null,mt=16>i?16:i,io===null)var p=!1;else{if(i=io,io=null,Nh=0,(xt&6)!==0)throw Error(t(331));var w=xt;for(xt|=4,ke=i.current;ke!==null;){var T=ke,L=T.child;if((ke.flags&16)!==0){var W=T.deletions;if(W!==null){for(var G=0;G<W.length;G++){var se=W[G];for(ke=se;ke!==null;){var me=ke;switch(me.tag){case 0:case 11:case 15:du(8,me,T)}var ge=me.child;if(ge!==null)ge.return=me,ke=ge;else for(;ke!==null;){me=ke;var fe=me.sibling,Ae=me.return;if(T0(me),me===se){ke=null;break}if(fe!==null){fe.return=Ae,ke=fe;break}ke=Ae}}}var Oe=T.alternate;if(Oe!==null){var Ve=Oe.child;if(Ve!==null){Oe.child=null;do{var on=Ve.sibling;Ve.sibling=null,Ve=on}while(Ve!==null)}}ke=T}}if((T.subtreeFlags&2064)!==0&&L!==null)L.return=T,ke=L;else e:for(;ke!==null;){if(T=ke,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:du(9,T,T.return)}var ee=T.sibling;if(ee!==null){ee.return=T.return,ke=ee;break e}ke=T.return}}var X=i.current;for(ke=X;ke!==null;){L=ke;var re=L.child;if((L.subtreeFlags&2064)!==0&&re!==null)re.return=L,ke=re;else e:for(L=X;ke!==null;){if(W=ke,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:wh(9,W)}}catch(Ue){tn(W,W.return,Ue)}if(W===L){ke=null;break e}var ve=W.sibling;if(ve!==null){ve.return=W.return,ke=ve;break e}ke=W.return}}if(xt=w,eo(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(sa,i)}catch{}p=!0}return p}finally{mt=d,Br.transition=o}}return!1}function z0(i,o,d){o=Al(d,o),o=o0(i,o,1),i=no(i,o,1),o=rr(),i!==null&&(qi(i,1,o),pr(i,o))}function tn(i,o,d){if(i.tag===3)z0(i,i,d);else for(;o!==null;){if(o.tag===3){z0(o,i,d);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(so===null||!so.has(p))){i=Al(d,i),i=a0(o,i,1),o=no(o,i,1),i=rr(),o!==null&&(qi(o,1,i),pr(o,i));break}}o=o.return}}function JA(i,o,d){var p=i.pingCache;p!==null&&p.delete(o),o=rr(),i.pingedLanes|=i.suspendedLanes&d,Cn===i&&(kn&d)===d&&(xn===4||xn===3&&(kn&130023424)===kn&&500>Ot()-rg?wa(i,0):ng|=d),pr(i,o)}function B0(i,o){o===0&&((i.mode&1)===0?o=1:(o=rl,rl<<=1,(rl&130023424)===0&&(rl=4194304)));var d=rr();i=vi(i,o),i!==null&&(qi(i,o,d),pr(i,d))}function ZA(i){var o=i.memoizedState,d=0;o!==null&&(d=o.retryLane),B0(i,d)}function eP(i,o){var d=0;switch(i.tag){case 13:var p=i.stateNode,w=i.memoizedState;w!==null&&(d=w.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),B0(i,d)}var q0;q0=function(i,o,d){if(i!==null)if(i.memoizedProps!==o.pendingProps||dr.current)fr=!0;else{if((i.lanes&d)===0&&(o.flags&128)===0)return fr=!1,$A(i,o,d);fr=(i.flags&131072)!==0}else fr=!1,Wt&&(o.flags&1048576)!==0&&bw(o,rh,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;yh(i,o),i=o.pendingProps;var w=El(o,$n.current);Il(o,d),w=Dp(null,o,p,i,w,d);var T=Op();return o.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,hr(p)?(T=!0,eh(o)):T=!1,o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Cp(o),w.updater=gh,o.stateNode=w,w._reactInternals=o,$p(o,p,i,d),o=Wp(null,o,p,!0,T,d)):(o.tag=0,Wt&&T&&vp(o),nr(null,o,w,d),o=o.child),o;case 16:p=o.elementType;e:{switch(yh(i,o),i=o.pendingProps,w=p._init,p=w(p._payload),o.type=p,w=o.tag=nP(p),i=ss(p,i),w){case 0:o=qp(null,o,p,i,d);break e;case 1:o=g0(null,o,p,i,d);break e;case 11:o=d0(null,o,p,i,d);break e;case 14:o=h0(null,o,p,ss(p.type,i),d);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:ss(p,w),qp(i,o,p,w,d);case 1:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:ss(p,w),g0(i,o,p,w,d);case 3:e:{if(v0(o),i===null)throw Error(t(387));p=o.pendingProps,T=o.memoizedState,w=T.element,Rw(i,o),ch(o,p,null,d);var L=o.memoizedState;if(p=L.element,T.isDehydrated)if(T={element:p,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){w=Al(Error(t(423)),o),o=y0(i,o,p,d,w);break e}else if(p!==w){w=Al(Error(t(424)),o),o=y0(i,o,p,d,w);break e}else for(Ir=Xi(o.stateNode.containerInfo.firstChild),Cr=o,Wt=!0,rs=null,d=Aw(o,null,p,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Nl(),p===w){o=xi(i,o,d);break e}nr(i,o,p,d)}o=o.child}return o;case 5:return Ow(o),i===null&&wp(o),p=o.type,w=o.pendingProps,T=i!==null?i.memoizedProps:null,L=w.children,dp(p,w)?L=null:T!==null&&dp(p,T)&&(o.flags|=32),p0(i,o),nr(i,o,L,d),o.child;case 6:return i===null&&wp(o),null;case 13:return x0(i,o,d);case 4:return Ip(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=Tl(o,null,p,d):nr(i,o,p,d),o.child;case 11:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:ss(p,w),d0(i,o,p,w,d);case 7:return nr(i,o,o.pendingProps,d),o.child;case 8:return nr(i,o,o.pendingProps.children,d),o.child;case 12:return nr(i,o,o.pendingProps.children,d),o.child;case 10:e:{if(p=o.type._context,w=o.pendingProps,T=o.memoizedProps,L=w.value,Lt(oh,p._currentValue),p._currentValue=L,T!==null)if(ns(T.value,L)){if(T.children===w.children&&!dr.current){o=xi(i,o,d);break e}}else for(T=o.child,T!==null&&(T.return=o);T!==null;){var W=T.dependencies;if(W!==null){L=T.child;for(var G=W.firstContext;G!==null;){if(G.context===p){if(T.tag===1){G=yi(-1,d&-d),G.tag=2;var se=T.updateQueue;if(se!==null){se=se.shared;var me=se.pending;me===null?G.next=G:(G.next=me.next,me.next=G),se.pending=G}}T.lanes|=d,G=T.alternate,G!==null&&(G.lanes|=d),Np(T.return,d,o),W.lanes|=d;break}G=G.next}}else if(T.tag===10)L=T.type===o.type?null:T.child;else if(T.tag===18){if(L=T.return,L===null)throw Error(t(341));L.lanes|=d,W=L.alternate,W!==null&&(W.lanes|=d),Np(L,d,o),L=T.sibling}else L=T.child;if(L!==null)L.return=T;else for(L=T;L!==null;){if(L===o){L=null;break}if(T=L.sibling,T!==null){T.return=L.return,L=T;break}L=L.return}T=L}nr(i,o,w.children,d),o=o.child}return o;case 9:return w=o.type,p=o.pendingProps.children,Il(o,d),w=$r(w),p=p(w),o.flags|=1,nr(i,o,p,d),o.child;case 14:return p=o.type,w=ss(p,o.pendingProps),w=ss(p.type,w),h0(i,o,p,w,d);case 15:return f0(i,o,o.type,o.pendingProps,d);case 17:return p=o.type,w=o.pendingProps,w=o.elementType===p?w:ss(p,w),yh(i,o),o.tag=1,hr(p)?(i=!0,eh(o)):i=!1,Il(o,d),s0(o,p,w),$p(o,p,w,d),Wp(null,o,p,!0,i,d);case 19:return _0(i,o,d);case 22:return m0(i,o,d)}throw Error(t(156,o.tag))};function W0(i,o){return tl(i,o)}function tP(i,o,d,p){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(i,o,d,p){return new tP(i,o,d,p)}function dg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function nP(i){if(typeof i=="function")return dg(i)?1:0;if(i!=null){if(i=i.$$typeof,i===z)return 11;if(i===ae)return 14}return 2}function lo(i,o){var d=i.alternate;return d===null?(d=qr(i.tag,o,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=o,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,o=i.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function jh(i,o,d,p,w,T){var L=2;if(p=i,typeof i=="function")dg(i)&&(L=1);else if(typeof i=="string")L=5;else e:switch(i){case P:return Ea(d.children,w,T,o);case R:L=8,w|=8;break;case D:return i=qr(12,d,o,w|2),i.elementType=D,i.lanes=T,i;case M:return i=qr(13,d,o,w),i.elementType=M,i.lanes=T,i;case ie:return i=qr(19,d,o,w),i.elementType=ie,i.lanes=T,i;case J:return Ah(d,w,T,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:L=10;break e;case $:L=9;break e;case z:L=11;break e;case ae:L=14;break e;case Y:L=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=qr(L,d,o,w),o.elementType=i,o.type=p,o.lanes=T,o}function Ea(i,o,d,p){return i=qr(7,i,p,o),i.lanes=d,i}function Ah(i,o,d,p){return i=qr(22,i,p,o),i.elementType=J,i.lanes=d,i.stateNode={isHidden:!1},i}function hg(i,o,d){return i=qr(6,i,null,o),i.lanes=d,i}function fg(i,o,d){return o=qr(4,i.children!==null?i.children:[],i.key,o),o.lanes=d,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function rP(i,o,d,p,w){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bi(0),this.expirationTimes=Bi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.identifierPrefix=p,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function mg(i,o,d,p,w,T,L,W,G){return i=new rP(i,o,d,W,G),o===1?(o=1,T===!0&&(o|=8)):o=0,T=qr(3,null,null,o),i.current=T,T.stateNode=i,T.memoizedState={element:p,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cp(T),i}function sP(i,o,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:p==null?null:""+p,children:i,containerInfo:o,implementation:d}}function H0(i){if(!i)return Zi;i=i._reactInternals;e:{if(Er(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(hr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var d=i.type;if(hr(d))return ww(i,d,o)}return o}function K0(i,o,d,p,w,T,L,W,G){return i=mg(d,p,!0,i,w,T,L,W,G),i.context=H0(null),d=i.current,p=rr(),w=oo(d),T=yi(p,w),T.callback=o??null,no(d,T,w),i.current.lanes=w,qi(i,w,p),pr(i,p),i}function Ph(i,o,d,p){var w=o.current,T=rr(),L=oo(w);return d=H0(d),o.context===null?o.context=d:o.pendingContext=d,o=yi(T,L),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=no(w,o,L),i!==null&&(as(i,w,L,T),lh(i,w,L)),L}function Rh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function G0(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<o?d:o}}function pg(i,o){G0(i,o),(i=i.alternate)&&G0(i,o)}function iP(){return null}var Q0=typeof reportError=="function"?reportError:function(i){console.error(i)};function gg(i){this._internalRoot=i}kh.prototype.render=gg.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Ph(i,o,null,null)},kh.prototype.unmount=gg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;xa(function(){Ph(null,i,null,null)}),o[fi]=null}};function kh(i){this._internalRoot=i}kh.prototype.unstable_scheduleHydration=function(i){if(i){var o=kd();i={blockedOn:null,target:i,priority:o};for(var d=0;d<Ns.length&&o!==0&&o<Ns[d].priority;d++);Ns.splice(d,0,i),d===0&&Ld(i)}};function vg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Dh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Y0(){}function oP(i,o,d,p,w){if(w){if(typeof p=="function"){var T=p;p=function(){var se=Rh(L);T.call(se)}}var L=K0(o,p,i,0,null,!1,!1,"",Y0);return i._reactRootContainer=L,i[fi]=L.current,Jc(i.nodeType===8?i.parentNode:i),xa(),L}for(;w=i.lastChild;)i.removeChild(w);if(typeof p=="function"){var W=p;p=function(){var se=Rh(G);W.call(se)}}var G=mg(i,0,!1,null,null,!1,!1,"",Y0);return i._reactRootContainer=G,i[fi]=G.current,Jc(i.nodeType===8?i.parentNode:i),xa(function(){Ph(o,G,d,p)}),G}function Oh(i,o,d,p,w){var T=d._reactRootContainer;if(T){var L=T;if(typeof w=="function"){var W=w;w=function(){var G=Rh(L);W.call(G)}}Ph(o,L,i,w)}else L=oP(d,o,i,w,p);return Rh(L)}Pd=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var d=zi(o.pendingLanes);d!==0&&(Wi(o,d|1),pr(o,Ot()),(xt&6)===0&&(kl=Ot()+500,eo()))}break;case 13:xa(function(){var p=vi(i,1);if(p!==null){var w=rr();as(p,i,1,w)}}),pg(i,1)}},sl=function(i){if(i.tag===13){var o=vi(i,134217728);if(o!==null){var d=rr();as(o,i,134217728,d)}pg(i,134217728)}},Rd=function(i){if(i.tag===13){var o=oo(i),d=vi(i,o);if(d!==null){var p=rr();as(d,i,o,p)}pg(i,o)}},kd=function(){return mt},Dd=function(i,o){var d=mt;try{return mt=i,o()}finally{mt=d}},ft=function(i,o,d){switch(o){case"input":if(gn(i,d),o=d.name,d.type==="radio"&&o!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<d.length;o++){var p=d[o];if(p!==i&&p.form===i.form){var w=Jd(p);if(!w)throw Error(t(90));Le(p),gn(p,w)}}}break;case"textarea":bn(i,d);break;case"select":o=d.value,o!=null&&Jn(i,!!d.multiple,o,!1)}},Fe=lg,St=xa;var aP={usingClientEntryPoint:!1,Events:[tu,wl,Jd,ne,_e,lg]},pu={findFiberByHostInstance:da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lP={bundleType:pu.bundleType,version:pu.version,rendererPackageName:pu.rendererPackageName,rendererConfig:pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Lc(i),i===null?null:i.stateNode},findFiberByHostInstance:pu.findFiberByHostInstance||iP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{sa=Lh.inject(lP),br=Lh}catch{}}return gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aP,gr.createPortal=function(i,o){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vg(o))throw Error(t(200));return sP(i,o,null,d)},gr.createRoot=function(i,o){if(!vg(i))throw Error(t(299));var d=!1,p="",w=Q0;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(w=o.onRecoverableError)),o=mg(i,1,!1,null,null,d,!1,p,w),i[fi]=o.current,Jc(i.nodeType===8?i.parentNode:i),new gg(o)},gr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Lc(o),i=i===null?null:i.stateNode,i},gr.flushSync=function(i){return xa(i)},gr.hydrate=function(i,o,d){if(!Dh(o))throw Error(t(200));return Oh(null,i,o,!0,d)},gr.hydrateRoot=function(i,o,d){if(!vg(i))throw Error(t(405));var p=d!=null&&d.hydratedSources||null,w=!1,T="",L=Q0;if(d!=null&&(d.unstable_strictMode===!0&&(w=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(L=d.onRecoverableError)),o=K0(o,null,i,1,d??null,w,!1,T,L),i[fi]=o.current,Jc(i),p)for(i=0;i<p.length;i++)d=p[i],w=d._getVersion,w=w(d._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[d,w]:o.mutableSourceEagerHydrationData.push(d,w);return new kh(o)},gr.render=function(i,o,d){if(!Dh(o))throw Error(t(200));return Oh(null,i,o,!1,d)},gr.unmountComponentAtNode=function(i){if(!Dh(i))throw Error(t(40));return i._reactRootContainer?(xa(function(){Oh(null,null,i,!1,function(){i._reactRootContainer=null,i[fi]=null})}),!0):!1},gr.unstable_batchedUpdates=lg,gr.unstable_renderSubtreeIntoContainer=function(i,o,d,p){if(!Dh(d))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Oh(i,o,d,!1,p)},gr.version="18.3.1-next-f1338f8080-20240426",gr}var c_;function c1(){if(c_)return bg.exports;c_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bg.exports=IP(),bg.exports}var Ha=c1();const em=a1(Ha);function ze(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function jP(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function u1(...n){return e=>n.forEach(t=>jP(t,e))}function wt(...n){return _.useCallback(u1(...n),n)}function Li(n,e=[]){let t=[];function r(l,c){const u=_.createContext(c),h=t.length;t=[...t,c];function m(v){const{scope:y,children:b,...S}=v,E=(y==null?void 0:y[n][h])||u,x=_.useMemo(()=>S,Object.values(S));return a.jsx(E.Provider,{value:x,children:b})}function g(v,y){const b=(y==null?void 0:y[n][h])||u,S=_.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${l}\``)}return m.displayName=l+"Provider",[m,g]}const s=()=>{const l=t.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[n])||l;return _.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,AP(s,...e)]}function AP(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(l){const c=r.reduce((u,{useScope:h,scopeName:m})=>{const v=h(l)[`__scope${m}`];return{...u,...v}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var Da=_.forwardRef((n,e)=>{const{children:t,...r}=n,s=_.Children.toArray(t),l=s.find(PP);if(l){const c=l.props.children,u=s.map(h=>h===l?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:h);return a.jsx(tv,{...r,ref:e,children:_.isValidElement(c)?_.cloneElement(c,void 0,u):null})}return a.jsx(tv,{...r,ref:e,children:t})});Da.displayName="Slot";var tv=_.forwardRef((n,e)=>{const{children:t,...r}=n;if(_.isValidElement(t)){const s=kP(t);return _.cloneElement(t,{...RP(r,t.props),ref:e?u1(e,s):s})}return _.Children.count(t)>1?_.Children.only(null):null});tv.displayName="SlotClone";var d1=({children:n})=>a.jsx(a.Fragment,{children:n});function PP(n){return _.isValidElement(n)&&n.type===d1}function RP(n,e){const t={...e};for(const r in e){const s=n[r],l=e[r];/^on[A-Z]/.test(r)?s&&l?t[r]=(...u)=>{l(...u),s(...u)}:s&&(t[r]=s):r==="style"?t[r]={...s,...l}:r==="className"&&(t[r]=[s,l].filter(Boolean).join(" "))}return{...n,...t}}function kP(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function uy(n){const e=n+"CollectionProvider",[t,r]=Li(e),[s,l]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=b=>{const{scope:S,children:E}=b,x=Ne.useRef(null),j=Ne.useRef(new Map).current;return a.jsx(s,{scope:S,itemMap:j,collectionRef:x,children:E})};c.displayName=e;const u=n+"CollectionSlot",h=Ne.forwardRef((b,S)=>{const{scope:E,children:x}=b,j=l(u,E),I=wt(S,j.collectionRef);return a.jsx(Da,{ref:I,children:x})});h.displayName=u;const m=n+"CollectionItemSlot",g="data-radix-collection-item",v=Ne.forwardRef((b,S)=>{const{scope:E,children:x,...j}=b,I=Ne.useRef(null),C=wt(S,I),O=l(m,E);return Ne.useEffect(()=>(O.itemMap.set(I,{ref:I,...j}),()=>void O.itemMap.delete(I))),a.jsx(Da,{[g]:"",ref:C,children:x})});v.displayName=m;function y(b){const S=l(n+"CollectionConsumer",b);return Ne.useCallback(()=>{const x=S.collectionRef.current;if(!x)return[];const j=Array.from(x.querySelectorAll(`[${g}]`));return Array.from(S.itemMap.values()).sort((O,U)=>j.indexOf(O.ref.current)-j.indexOf(U.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:c,Slot:h,ItemSlot:v},y,r]}var DP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ke=DP.reduce((n,e)=>{const t=_.forwardRef((r,s)=>{const{asChild:l,...c}=r,u=l?Da:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(u,{...c,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function tm(n,e){n&&Ha.flushSync(()=>n.dispatchEvent(e))}function En(n){const e=_.useRef(n);return _.useEffect(()=>{e.current=n}),_.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function dy(n,e=globalThis==null?void 0:globalThis.document){const t=En(n);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var OP="DismissableLayer",nv="dismissableLayer.update",LP="dismissableLayer.pointerDownOutside",MP="dismissableLayer.focusOutside",u_,h1=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),f1=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:l,onInteractOutside:c,onDismiss:u,...h}=n,m=_.useContext(h1),[g,v]=_.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=_.useState({}),S=wt(e,P=>v(P)),E=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),j=E.indexOf(x),I=g?E.indexOf(g):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,O=I>=j,U=VP(P=>{const R=P.target,D=[...m.branches].some(k=>k.contains(R));!O||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},y),q=UP(P=>{const R=P.target;[...m.branches].some(k=>k.contains(R))||(l==null||l(P),c==null||c(P),P.defaultPrevented||u==null||u())},y);return dy(P=>{I===m.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},y),_.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(u_=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),d_(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=u_)}},[g,y,t,m]),_.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),d_())},[g,m]),_.useEffect(()=>{const P=()=>b({});return document.addEventListener(nv,P),()=>document.removeEventListener(nv,P)},[]),a.jsx(Ke.div,{...h,ref:S,style:{pointerEvents:C?O?"auto":"none":void 0,...n.style},onFocusCapture:ze(n.onFocusCapture,q.onFocusCapture),onBlurCapture:ze(n.onBlurCapture,q.onBlurCapture),onPointerDownCapture:ze(n.onPointerDownCapture,U.onPointerDownCapture)})});f1.displayName=OP;var FP="DismissableLayerBranch",m1=_.forwardRef((n,e)=>{const t=_.useContext(h1),r=_.useRef(null),s=wt(e,r);return _.useEffect(()=>{const l=r.current;if(l)return t.branches.add(l),()=>{t.branches.delete(l)}},[t.branches]),a.jsx(Ke.div,{...n,ref:s})});m1.displayName=FP;function VP(n,e=globalThis==null?void 0:globalThis.document){const t=En(n),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const l=u=>{if(u.target&&!r.current){let h=function(){p1(LP,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",l),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function UP(n,e=globalThis==null?void 0:globalThis.document){const t=En(n),r=_.useRef(!1);return _.useEffect(()=>{const s=l=>{l.target&&!r.current&&p1(MP,t,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function d_(){const n=new CustomEvent(nv);document.dispatchEvent(n)}function p1(n,e,t,{discrete:r}){const s=t.originalEvent.target,l=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?tm(s,l):s.dispatchEvent(l)}var $P=f1,zP=m1,Ht=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},BP="Portal",g1=_.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,l]=_.useState(!1);Ht(()=>l(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?em.createPortal(a.jsx(Ke.div,{...r,ref:e}),c):null});g1.displayName=BP;function qP(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var hy=n=>{const{present:e,children:t}=n,r=WP(e),s=typeof t=="function"?t({present:r.isPresent}):_.Children.only(t),l=wt(r.ref,HP(s));return typeof t=="function"||r.isPresent?_.cloneElement(s,{ref:l}):null};hy.displayName="Presence";function WP(n){const[e,t]=_.useState(),r=_.useRef({}),s=_.useRef(n),l=_.useRef("none"),c=n?"mounted":"unmounted",[u,h]=qP(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const m=Fh(r.current);l.current=u==="mounted"?m:"none"},[u]),Ht(()=>{const m=r.current,g=s.current;if(g!==n){const y=l.current,b=Fh(m);n?h("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?h("UNMOUNT"):h(g&&y!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Ht(()=>{if(e){const m=v=>{const b=Fh(r.current).includes(v.animationName);v.target===e&&b&&Ha.flushSync(()=>h("ANIMATION_END"))},g=v=>{v.target===e&&(l.current=Fh(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function Fh(n){return(n==null?void 0:n.animationName)||"none"}function HP(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Oa({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=KP({defaultProp:e,onChange:t}),l=n!==void 0,c=l?n:r,u=En(t),h=_.useCallback(m=>{if(l){const v=typeof m=="function"?m(n):m;v!==n&&u(v)}else s(m)},[l,n,s,u]);return[c,h]}function KP({defaultProp:n,onChange:e}){const t=_.useState(n),[r]=t,s=_.useRef(r),l=En(e);return _.useEffect(()=>{s.current!==r&&(l(r),s.current=r)},[r,s,l]),t}var GP="VisuallyHidden",od=_.forwardRef((n,e)=>a.jsx(Ke.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));od.displayName=GP;var QP=od,fy="ToastProvider",[my,YP,XP]=uy("Toast"),[v1,Az]=Li("Toast",[XP]),[JP,nm]=v1(fy),y1=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:l=50,children:c}=n,[u,h]=_.useState(null),[m,g]=_.useState(0),v=_.useRef(!1),y=_.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${fy}\`. Expected non-empty \`string\`.`),a.jsx(my.Provider,{scope:e,children:a.jsx(JP,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:l,toastCount:m,viewport:u,onViewportChange:h,onToastAdd:_.useCallback(()=>g(b=>b+1),[]),onToastRemove:_.useCallback(()=>g(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:y,children:c})})};y1.displayName=fy;var x1="ToastViewport",ZP=["F8"],rv="toast.viewportPause",sv="toast.viewportResume",w1=_.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=ZP,label:s="Notifications ({hotkey})",...l}=n,c=nm(x1,t),u=YP(t),h=_.useRef(null),m=_.useRef(null),g=_.useRef(null),v=_.useRef(null),y=wt(e,v,c.onViewportChange),b=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=c.toastCount>0;_.useEffect(()=>{const x=j=>{var C;r.every(O=>j[O]||j.code===O)&&((C=v.current)==null||C.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),_.useEffect(()=>{const x=h.current,j=v.current;if(S&&x&&j){const I=()=>{if(!c.isClosePausedRef.current){const q=new CustomEvent(rv);j.dispatchEvent(q),c.isClosePausedRef.current=!0}},C=()=>{if(c.isClosePausedRef.current){const q=new CustomEvent(sv);j.dispatchEvent(q),c.isClosePausedRef.current=!1}},O=q=>{!x.contains(q.relatedTarget)&&C()},U=()=>{x.contains(document.activeElement)||C()};return x.addEventListener("focusin",I),x.addEventListener("focusout",O),x.addEventListener("pointermove",I),x.addEventListener("pointerleave",U),window.addEventListener("blur",I),window.addEventListener("focus",C),()=>{x.removeEventListener("focusin",I),x.removeEventListener("focusout",O),x.removeEventListener("pointermove",I),x.removeEventListener("pointerleave",U),window.removeEventListener("blur",I),window.removeEventListener("focus",C)}}},[S,c.isClosePausedRef]);const E=_.useCallback(({tabbingDirection:x})=>{const I=u().map(C=>{const O=C.ref.current,U=[O,...hR(O)];return x==="forwards"?U:U.reverse()});return(x==="forwards"?I.reverse():I).flat()},[u]);return _.useEffect(()=>{const x=v.current;if(x){const j=I=>{var U,q,P;const C=I.altKey||I.ctrlKey||I.metaKey;if(I.key==="Tab"&&!C){const R=document.activeElement,D=I.shiftKey;if(I.target===x&&D){(U=m.current)==null||U.focus();return}const z=E({tabbingDirection:D?"backwards":"forwards"}),M=z.findIndex(ie=>ie===R);Tg(z.slice(M+1))?I.preventDefault():D?(q=m.current)==null||q.focus():(P=g.current)==null||P.focus()}};return x.addEventListener("keydown",j),()=>x.removeEventListener("keydown",j)}},[u,E]),a.jsxs(zP,{ref:h,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&a.jsx(iv,{ref:m,onFocusFromOutsideViewport:()=>{const x=E({tabbingDirection:"forwards"});Tg(x)}}),a.jsx(my.Slot,{scope:t,children:a.jsx(Ke.ol,{tabIndex:-1,...l,ref:y})}),S&&a.jsx(iv,{ref:g,onFocusFromOutsideViewport:()=>{const x=E({tabbingDirection:"backwards"});Tg(x)}})]})});w1.displayName=x1;var _1="ToastFocusProxy",iv=_.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,l=nm(_1,t);return a.jsx(od,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:c=>{var m;const u=c.relatedTarget;!((m=l.viewport)!=null&&m.contains(u))&&r()}})});iv.displayName=_1;var rm="Toast",eR="toast.swipeStart",tR="toast.swipeMove",nR="toast.swipeCancel",rR="toast.swipeEnd",E1=_.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:l,...c}=n,[u=!0,h]=Oa({prop:r,defaultProp:s,onChange:l});return a.jsx(hy,{present:t||u,children:a.jsx(oR,{open:u,...c,ref:e,onClose:()=>h(!1),onPause:En(n.onPause),onResume:En(n.onResume),onSwipeStart:ze(n.onSwipeStart,m=>{m.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ze(n.onSwipeMove,m=>{const{x:g,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","move"),m.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:ze(n.onSwipeCancel,m=>{m.currentTarget.setAttribute("data-swipe","cancel"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ze(n.onSwipeEnd,m=>{const{x:g,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","end"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),h(!1)})})})});E1.displayName=rm;var[sR,iR]=v1(rm,{onClose(){}}),oR=_.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:l,onClose:c,onEscapeKeyDown:u,onPause:h,onResume:m,onSwipeStart:g,onSwipeMove:v,onSwipeCancel:y,onSwipeEnd:b,...S}=n,E=nm(rm,t),[x,j]=_.useState(null),I=wt(e,ie=>j(ie)),C=_.useRef(null),O=_.useRef(null),U=s||E.duration,q=_.useRef(0),P=_.useRef(U),R=_.useRef(0),{onToastAdd:D,onToastRemove:k}=E,$=En(()=>{var ae;(x==null?void 0:x.contains(document.activeElement))&&((ae=E.viewport)==null||ae.focus()),c()}),z=_.useCallback(ie=>{!ie||ie===1/0||(window.clearTimeout(R.current),q.current=new Date().getTime(),R.current=window.setTimeout($,ie))},[$]);_.useEffect(()=>{const ie=E.viewport;if(ie){const ae=()=>{z(P.current),m==null||m()},Y=()=>{const J=new Date().getTime()-q.current;P.current=P.current-J,window.clearTimeout(R.current),h==null||h()};return ie.addEventListener(rv,Y),ie.addEventListener(sv,ae),()=>{ie.removeEventListener(rv,Y),ie.removeEventListener(sv,ae)}}},[E.viewport,U,h,m,z]),_.useEffect(()=>{l&&!E.isClosePausedRef.current&&z(U)},[l,U,E.isClosePausedRef,z]),_.useEffect(()=>(D(),()=>k()),[D,k]);const M=_.useMemo(()=>x?j1(x):null,[x]);return E.viewport?a.jsxs(a.Fragment,{children:[M&&a.jsx(aR,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:M}),a.jsx(sR,{scope:t,onClose:$,children:Ha.createPortal(a.jsx(my.ItemSlot,{scope:t,children:a.jsx($P,{asChild:!0,onEscapeKeyDown:ze(u,()=>{E.isFocusedToastEscapeKeyDownRef.current||$(),E.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(Ke.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":E.swipeDirection,...S,ref:I,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:ze(n.onKeyDown,ie=>{ie.key==="Escape"&&(u==null||u(ie.nativeEvent),ie.nativeEvent.defaultPrevented||(E.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:ze(n.onPointerDown,ie=>{ie.button===0&&(C.current={x:ie.clientX,y:ie.clientY})}),onPointerMove:ze(n.onPointerMove,ie=>{if(!C.current)return;const ae=ie.clientX-C.current.x,Y=ie.clientY-C.current.y,J=!!O.current,B=["left","right"].includes(E.swipeDirection),K=["left","up"].includes(E.swipeDirection)?Math.min:Math.max,Q=B?K(0,ae):0,F=B?0:K(0,Y),H=ie.pointerType==="touch"?10:2,le={x:Q,y:F},Ee={originalEvent:ie,delta:le};J?(O.current=le,Vh(tR,v,Ee,{discrete:!1})):h_(le,E.swipeDirection,H)?(O.current=le,Vh(eR,g,Ee,{discrete:!1}),ie.target.setPointerCapture(ie.pointerId)):(Math.abs(ae)>H||Math.abs(Y)>H)&&(C.current=null)}),onPointerUp:ze(n.onPointerUp,ie=>{const ae=O.current,Y=ie.target;if(Y.hasPointerCapture(ie.pointerId)&&Y.releasePointerCapture(ie.pointerId),O.current=null,C.current=null,ae){const J=ie.currentTarget,B={originalEvent:ie,delta:ae};h_(ae,E.swipeDirection,E.swipeThreshold)?Vh(rR,b,B,{discrete:!0}):Vh(nR,y,B,{discrete:!0}),J.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),E.viewport)})]}):null}),aR=n=>{const{__scopeToast:e,children:t,...r}=n,s=nm(rm,e),[l,c]=_.useState(!1),[u,h]=_.useState(!1);return uR(()=>c(!0)),_.useEffect(()=>{const m=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(m)},[]),u?null:a.jsx(g1,{asChild:!0,children:a.jsx(od,{...r,children:l&&a.jsxs(a.Fragment,{children:[s.label," ",t]})})})},lR="ToastTitle",b1=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return a.jsx(Ke.div,{...r,ref:e})});b1.displayName=lR;var cR="ToastDescription",S1=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return a.jsx(Ke.div,{...r,ref:e})});S1.displayName=cR;var N1="ToastAction",T1=_.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?a.jsx(I1,{altText:t,asChild:!0,children:a.jsx(py,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${N1}\`. Expected non-empty \`string\`.`),null)});T1.displayName=N1;var C1="ToastClose",py=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=iR(C1,t);return a.jsx(I1,{asChild:!0,children:a.jsx(Ke.button,{type:"button",...r,ref:e,onClick:ze(n.onClick,s.onClose)})})});py.displayName=C1;var I1=_.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return a.jsx(Ke.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function j1(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),dR(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",l=r.dataset.radixToastAnnounceExclude==="";if(!s)if(l){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...j1(r))}}),e}function Vh(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,l=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?tm(s,l):s.dispatchEvent(l)}var h_=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),l=r>s;return e==="left"||e==="right"?l&&r>t:!l&&s>t};function uR(n=()=>{}){const e=En(n);Ht(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function dR(n){return n.nodeType===n.ELEMENT_NODE}function hR(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Tg(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var fR=y1,A1=w1,P1=E1,R1=b1,k1=S1,D1=T1,O1=py;function L1(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=L1(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function M1(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=L1(n))&&(r&&(r+=" "),r+=e);return r}const f_=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,m_=M1,ad=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return m_(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:l}=e,c=Object.keys(s).map(m=>{const g=t==null?void 0:t[m],v=l==null?void 0:l[m];if(g===null)return null;const y=f_(g)||f_(v);return s[m][y]}),u=t&&Object.entries(t).reduce((m,g)=>{let[v,y]=g;return y===void 0||(m[v]=y),m},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,g)=>{let{class:v,className:y,...b}=g;return Object.entries(b).every(S=>{let[E,x]=S;return Array.isArray(x)?x.includes({...l,...u}[E]):{...l,...u}[E]===x})?[...m,v,y]:m},[]);return m_(n,c,h,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),F1=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=_.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:l,iconNode:c,...u},h)=>_.createElement("svg",{ref:h,...pR,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:F1("lucide",s),...u},[...c.map(([m,g])=>_.createElement(m,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(n,e)=>{const t=_.forwardRef(({className:r,...s},l)=>_.createElement(gR,{ref:l,iconNode:e,className:F1(`lucide-${mR(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=Je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Je("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=Je("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=Je("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=Je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=Je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=Je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=Je("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=Je("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=Je("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=Je("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=Je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Je("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=Je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=Je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=Je("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Je("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=Je("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Je("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=Je("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Je("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=Je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=Je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=Je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=Je("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=Je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=Je("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Je("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=Je("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=Je("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=Je("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=Je("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=Je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=Je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=Je("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=Je("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=Je("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=Je("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=Je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=Je("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=Je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=Je("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=Je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=Je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Je("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vy="-",kR=n=>{const e=OR(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const u=c.split(vy);return u[0]===""&&u.length!==1&&u.shift(),q1(u,e)||DR(c)},getConflictingClassGroupIds:(c,u)=>{const h=t[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},q1=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?q1(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const l=n.join(vy);return(c=e.validators.find(({validator:u})=>u(l)))==null?void 0:c.classGroupId},v_=/^\[(.+)\]$/,DR=n=>{if(v_.test(n)){const e=v_.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},OR=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return MR(Object.entries(n.classGroups),t).forEach(([l,c])=>{cv(c,r,l,e)}),r},cv=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const l=s===""?e:y_(e,s);l.classGroupId=t;return}if(typeof s=="function"){if(LR(s)){cv(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([l,c])=>{cv(c,y_(e,l),t,r)})})},y_=(n,e)=>{let t=n;return e.split(vy).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},LR=n=>n.isThemeGetter,MR=(n,e)=>e?n.map(([t,r])=>{const s=r.map(l=>typeof l=="string"?e+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([c,u])=>[e+c,u])):l);return[t,s]}):n,FR=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(l,c)=>{t.set(l,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(l){let c=t.get(l);if(c!==void 0)return c;if((c=r.get(l))!==void 0)return s(l,c),c},set(l,c){t.has(l)?t.set(l,c):s(l,c)}}},W1="!",VR=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],l=e.length,c=u=>{const h=[];let m=0,g=0,v;for(let x=0;x<u.length;x++){let j=u[x];if(m===0){if(j===s&&(r||u.slice(x,x+l)===e)){h.push(u.slice(g,x)),g=x+l;continue}if(j==="/"){v=x;continue}}j==="["?m++:j==="]"&&m--}const y=h.length===0?u:u.substring(g),b=y.startsWith(W1),S=b?y.substring(1):y,E=v&&v>g?v-g:void 0;return{modifiers:h,hasImportantModifier:b,baseClassName:S,maybePostfixModifierPosition:E}};return t?u=>t({className:u,parseClassName:c}):c},UR=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},$R=n=>({cache:FR(n.cacheSize),parseClassName:VR(n),...kR(n)}),zR=/\s+/,BR=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,l=[],c=n.trim().split(zR);let u="";for(let h=c.length-1;h>=0;h-=1){const m=c[h],{modifiers:g,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:b}=t(m);let S=!!b,E=r(S?y.substring(0,b):y);if(!E){if(!S){u=m+(u.length>0?" "+u:u);continue}if(E=r(y),!E){u=m+(u.length>0?" "+u:u);continue}S=!1}const x=UR(g).join(":"),j=v?x+W1:x,I=j+E;if(l.includes(I))continue;l.push(I);const C=s(E,S);for(let O=0;O<C.length;++O){const U=C[O];l.push(j+U)}u=m+(u.length>0?" "+u:u)}return u};function qR(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=H1(e))&&(r&&(r+=" "),r+=t);return r}const H1=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=H1(n[r]))&&(t&&(t+=" "),t+=e);return t};function WR(n,...e){let t,r,s,l=c;function c(h){const m=e.reduce((g,v)=>v(g),n());return t=$R(m),r=t.cache.get,s=t.cache.set,l=u,u(h)}function u(h){const m=r(h);if(m)return m;const g=BR(h,t);return s(h,g),g}return function(){return l(qR.apply(null,arguments))}}const $t=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},K1=/^\[(?:([a-z-]+):)?(.+)\]$/i,HR=/^\d+\/\d+$/,KR=new Set(["px","full","screen"]),GR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,QR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,YR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,XR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,JR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_i=n=>Wl(n)||KR.has(n)||HR.test(n),uo=n=>_c(n,"length",ok),Wl=n=>!!n&&!Number.isNaN(Number(n)),Cg=n=>_c(n,"number",Wl),vu=n=>!!n&&Number.isInteger(Number(n)),ZR=n=>n.endsWith("%")&&Wl(n.slice(0,-1)),at=n=>K1.test(n),ho=n=>GR.test(n),ek=new Set(["length","size","percentage"]),tk=n=>_c(n,ek,G1),nk=n=>_c(n,"position",G1),rk=new Set(["image","url"]),sk=n=>_c(n,rk,lk),ik=n=>_c(n,"",ak),yu=()=>!0,_c=(n,e,t)=>{const r=K1.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},ok=n=>QR.test(n)&&!YR.test(n),G1=()=>!1,ak=n=>XR.test(n),lk=n=>JR.test(n),ck=()=>{const n=$t("colors"),e=$t("spacing"),t=$t("blur"),r=$t("brightness"),s=$t("borderColor"),l=$t("borderRadius"),c=$t("borderSpacing"),u=$t("borderWidth"),h=$t("contrast"),m=$t("grayscale"),g=$t("hueRotate"),v=$t("invert"),y=$t("gap"),b=$t("gradientColorStops"),S=$t("gradientColorStopPositions"),E=$t("inset"),x=$t("margin"),j=$t("opacity"),I=$t("padding"),C=$t("saturate"),O=$t("scale"),U=$t("sepia"),q=$t("skew"),P=$t("space"),R=$t("translate"),D=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",at,e],z=()=>[at,e],M=()=>["",_i,uo],ie=()=>["auto",Wl,at],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",at],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[Wl,at];return{cacheSize:500,separator:":",theme:{colors:[yu],spacing:[_i,uo],blur:["none","",ho,at],brightness:F(),borderColor:[n],borderRadius:["none","","full",ho,at],borderSpacing:z(),borderWidth:M(),contrast:F(),grayscale:K(),hueRotate:F(),invert:K(),gap:z(),gradientColorStops:[n],gradientColorStopPositions:[ZR,uo],inset:$(),margin:$(),opacity:F(),padding:z(),saturate:F(),scale:F(),sepia:K(),skew:F(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",at]}],container:["container"],columns:[{columns:[ho]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),at]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vu,at]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",at]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",vu,at]}],"grid-cols":[{"grid-cols":[yu]}],"col-start-end":[{col:["auto",{span:["full",vu,at]},at]}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":[yu]}],"row-start-end":[{row:["auto",{span:[vu,at]},at]}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",at]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",at]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",at,e]}],"min-w":[{"min-w":[at,e,"min","max","fit"]}],"max-w":[{"max-w":[at,e,"none","full","min","max","fit","prose",{screen:[ho]},ho]}],h:[{h:[at,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[at,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[at,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[at,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ho,uo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Cg]}],"font-family":[{font:[yu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",at]}],"line-clamp":[{"line-clamp":["none",Wl,Cg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_i,at]}],"list-image":[{"list-image":["none",at]}],"list-style-type":[{list:["none","disc","decimal",at]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",_i,uo]}],"underline-offset":[{"underline-offset":["auto",_i,at]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",at]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",at]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),nk]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",tk]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},sk]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:Y()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[_i,at]}],"outline-w":[{outline:[_i,uo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[_i,uo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",ho,ik]}],"shadow-color":[{shadow:[yu]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...J(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":J()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",ho,at]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[v]}],saturate:[{saturate:[C]}],sepia:[{sepia:[U]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[U]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",at]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",at]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",at]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[O]}],"scale-x":[{"scale-x":[O]}],"scale-y":[{"scale-y":[O]}],rotate:[{rotate:[vu,at]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[q]}],"skew-y":[{"skew-y":[q]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",at]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",at]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",at]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[_i,uo,Cg]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},uk=WR(ck);function nt(...n){return uk(M1(n))}function dk(n){if(!n||typeof n!="string")return null;const e=n.trim();try{const t=e.match(/https?:\/\/(?:drive\.google\.com)\/(?:file\/d\/([a-zA-Z0-9_-]+)\/view|open\?id=([a-zA-Z0-9_-]+))/i);if(t){const r=t[1]||t[2];if(r)return`https://drive.google.com/uc?export=view&id=${r}`}if(/dropbox\.com\//i.test(e)){if(e.includes("dl=0"))return e.replace("dl=0","dl=1");if(!e.includes("dl="))return e+"?dl=1"}return e}catch{return e}}const hk=fR,Q1=_.forwardRef(({className:n,...e},t)=>a.jsx(A1,{ref:t,className:nt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));Q1.displayName=A1.displayName;const fk=ad("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Y1=_.forwardRef(({className:n,variant:e,...t},r)=>a.jsx(P1,{ref:r,className:nt(fk({variant:e}),n),...t}));Y1.displayName=P1.displayName;const mk=_.forwardRef(({className:n,...e},t)=>a.jsx(D1,{ref:t,className:nt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));mk.displayName=D1.displayName;const X1=_.forwardRef(({className:n,...e},t)=>a.jsx(O1,{ref:t,className:nt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:a.jsx(ac,{className:"h-4 w-4"})}));X1.displayName=O1.displayName;const J1=_.forwardRef(({className:n,...e},t)=>a.jsx(R1,{ref:t,className:nt("text-sm font-semibold",n),...e}));J1.displayName=R1.displayName;const Z1=_.forwardRef(({className:n,...e},t)=>a.jsx(k1,{ref:t,className:nt("text-sm opacity-90",n),...e}));Z1.displayName=k1.displayName;function pk(){const{toasts:n}=NP();return a.jsxs(hk,{children:[n.map(function({id:e,title:t,description:r,action:s,...l}){return a.jsxs(Y1,{...l,children:[a.jsxs("div",{className:"grid gap-1",children:[t&&a.jsx(J1,{children:t}),r&&a.jsx(Z1,{children:r})]}),s,a.jsx(X1,{})]},e)}),a.jsx(Q1,{})]})}var Uh={},x_;function gk(){if(x_)return Uh;x_=1;var n=c1();return Uh.createRoot=n.createRoot,Uh.hydrateRoot=n.hydrateRoot,Uh}var vk=gk(),w_=["light","dark"],yk="(prefers-color-scheme: dark)",xk=_.createContext(void 0),wk={setTheme:n=>{},themes:[]},_k=()=>{var n;return(n=_.useContext(xk))!=null?n:wk};_.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:l,value:c,attrs:u,nonce:h})=>{let m=l==="system",g=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,v=s?w_.includes(l)&&l?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${l}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",y=(S,E=!1,x=!0)=>{let j=c?c[S]:S,I=E?S+"|| ''":`'${j}'`,C="";return s&&x&&!E&&w_.includes(S)&&(C+=`d.style.colorScheme = '${S}';`),t==="class"?E||j?C+=`c.add(${I})`:C+="null":j&&(C+=`d[s](n,${I})`),C},b=n?`!function(){${g}${y(n)}}()`:r?`!function(){try{${g}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${m})){var t='${yk}',m=window.matchMedia(t);if(m.media!==t||m.matches){${y("dark")}}else{${y("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${y(c?"x[e]":"e",!0)}}${m?"":"else{"+y(l,!1,!1)+"}"}${v}}catch(e){}}()`:`!function(){try{${g}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${y(c?"x[e]":"e",!0)}}else{${y(l,!1,!1)};}${v}}catch(t){}}();`;return _.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:b}})});var Ek=n=>{switch(n){case"success":return Nk;case"info":return Ck;case"warning":return Tk;case"error":return Ik;default:return null}},bk=Array(12).fill(0),Sk=({visible:n})=>Ne.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},Ne.createElement("div",{className:"sonner-spinner"},bk.map((e,t)=>Ne.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),Nk=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Tk=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ck=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ik=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),jk=()=>{let[n,e]=Ne.useState(document.hidden);return Ne.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},uv=1,Ak=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...s}=e,l=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:uv++,c=this.toasts.find(h=>h.id===l),u=e.dismissible===void 0?!0:e.dismissible;return c?this.toasts=this.toasts.map(h=>h.id===l?(this.publish({...h,...e,id:l,title:r}),{...h,...e,id:l,dismissible:u,title:r}):h):this.addToast({title:r,...s,dismissible:u,id:l}),l},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),l=r!==void 0;return s.then(async c=>{if(Rk(c)&&!c.ok){l=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:h})}else if(t.success!==void 0){l=!1;let u=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(t.error!==void 0){l=!1;let u=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;l&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||uv++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Ar=new Ak,Pk=(n,e)=>{let t=(e==null?void 0:e.id)||uv++;return Ar.addToast({title:n,...e,id:t}),t},Rk=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",kk=Pk,Dk=()=>Ar.toasts;Object.assign(kk,{success:Ar.success,info:Ar.info,warning:Ar.warning,error:Ar.error,custom:Ar.custom,message:Ar.message,promise:Ar.promise,dismiss:Ar.dismiss,loading:Ar.loading},{getHistory:Dk});function Ok(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}Ok(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function $h(n){return n.label!==void 0}var Lk=3,Mk="32px",Fk=4e3,Vk=356,Uk=14,$k=20,zk=200;function Bk(...n){return n.filter(Boolean).join(" ")}var qk=n=>{var e,t,r,s,l,c,u,h,m,g;let{invert:v,toast:y,unstyled:b,interacting:S,setHeights:E,visibleToasts:x,heights:j,index:I,toasts:C,expanded:O,removeToast:U,defaultRichColors:q,closeButton:P,style:R,cancelButtonStyle:D,actionButtonStyle:k,className:$="",descriptionClassName:z="",duration:M,position:ie,gap:ae,loadingIcon:Y,expandByDefault:J,classNames:B,icons:K,closeButtonAriaLabel:Q="Close toast",pauseWhenPageIsHidden:F,cn:H}=n,[le,Ee]=Ne.useState(!1),[Te,pe]=Ne.useState(!1),[ue,ye]=Ne.useState(!1),[De,Ie]=Ne.useState(!1),[Me,Le]=Ne.useState(0),[ut,bt]=Ne.useState(0),sn=Ne.useRef(null),Bt=Ne.useRef(null),gn=I===0,en=I+1<=x,Ze=y.type,Dt=y.dismissible!==!1,Jn=y.className||"",ni=y.descriptionClassName||"",Zn=Ne.useMemo(()=>j.findIndex(qe=>qe.toastId===y.id)||0,[j,y.id]),bn=Ne.useMemo(()=>{var qe;return(qe=y.closeButton)!=null?qe:P},[y.closeButton,P]),ws=Ne.useMemo(()=>y.duration||M||Fk,[y.duration,M]),Mt=Ne.useRef(0),It=Ne.useRef(0),Fn=Ne.useRef(0),Vn=Ne.useRef(null),[Sn,Gr]=ie.split("-"),Or=Ne.useMemo(()=>j.reduce((qe,gt,ft)=>ft>=Zn?qe:qe+gt.height,0),[j,Zn]),_s=jk(),ri=y.invert||v,Qr=Ze==="loading";It.current=Ne.useMemo(()=>Zn*ae+Or,[Zn,Or]),Ne.useEffect(()=>{Ee(!0)},[]),Ne.useLayoutEffect(()=>{if(!le)return;let qe=Bt.current,gt=qe.style.height;qe.style.height="auto";let ft=qe.getBoundingClientRect().height;qe.style.height=gt,bt(ft),E(Ft=>Ft.find(Kt=>Kt.toastId===y.id)?Ft.map(Kt=>Kt.toastId===y.id?{...Kt,height:ft}:Kt):[{toastId:y.id,height:ft,position:y.position},...Ft])},[le,y.title,y.description,E,y.id]);let Un=Ne.useCallback(()=>{pe(!0),Le(It.current),E(qe=>qe.filter(gt=>gt.toastId!==y.id)),setTimeout(()=>{U(y)},zk)},[y,U,E,It]);Ne.useEffect(()=>{if(y.promise&&Ze==="loading"||y.duration===1/0||y.type==="loading")return;let qe,gt=ws;return O||S||F&&_s?(()=>{if(Fn.current<Mt.current){let ft=new Date().getTime()-Mt.current;gt=gt-ft}Fn.current=new Date().getTime()})():gt!==1/0&&(Mt.current=new Date().getTime(),qe=setTimeout(()=>{var ft;(ft=y.onAutoClose)==null||ft.call(y,y),Un()},gt)),()=>clearTimeout(qe)},[O,S,J,y,ws,Un,y.promise,Ze,F,_s]),Ne.useEffect(()=>{let qe=Bt.current;if(qe){let gt=qe.getBoundingClientRect().height;return bt(gt),E(ft=>[{toastId:y.id,height:gt,position:y.position},...ft]),()=>E(ft=>ft.filter(Ft=>Ft.toastId!==y.id))}},[E,y.id]),Ne.useEffect(()=>{y.delete&&Un()},[Un,y.delete]);function si(){return K!=null&&K.loading?Ne.createElement("div",{className:"sonner-loader","data-visible":Ze==="loading"},K.loading):Y?Ne.createElement("div",{className:"sonner-loader","data-visible":Ze==="loading"},Y):Ne.createElement(Sk,{visible:Ze==="loading"})}return Ne.createElement("li",{"aria-live":y.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Bt,className:H($,Jn,B==null?void 0:B.toast,(e=y==null?void 0:y.classNames)==null?void 0:e.toast,B==null?void 0:B.default,B==null?void 0:B[Ze],(t=y==null?void 0:y.classNames)==null?void 0:t[Ze]),"data-sonner-toast":"","data-rich-colors":(r=y.richColors)!=null?r:q,"data-styled":!(y.jsx||y.unstyled||b),"data-mounted":le,"data-promise":!!y.promise,"data-removed":Te,"data-visible":en,"data-y-position":Sn,"data-x-position":Gr,"data-index":I,"data-front":gn,"data-swiping":ue,"data-dismissible":Dt,"data-type":Ze,"data-invert":ri,"data-swipe-out":De,"data-expanded":!!(O||J&&le),style:{"--index":I,"--toasts-before":I,"--z-index":C.length-I,"--offset":`${Te?Me:It.current}px`,"--initial-height":J?"auto":`${ut}px`,...R,...y.style},onPointerDown:qe=>{Qr||!Dt||(sn.current=new Date,Le(It.current),qe.target.setPointerCapture(qe.pointerId),qe.target.tagName!=="BUTTON"&&(ye(!0),Vn.current={x:qe.clientX,y:qe.clientY}))},onPointerUp:()=>{var qe,gt,ft,Ft;if(De||!Dt)return;Vn.current=null;let Kt=Number(((qe=Bt.current)==null?void 0:qe.style.getPropertyValue("--swipe-amount").replace("px",""))||0),or=new Date().getTime()-((gt=sn.current)==null?void 0:gt.getTime()),ne=Math.abs(Kt)/or;if(Math.abs(Kt)>=$k||ne>.11){Le(It.current),(ft=y.onDismiss)==null||ft.call(y,y),Un(),Ie(!0);return}(Ft=Bt.current)==null||Ft.style.setProperty("--swipe-amount","0px"),ye(!1)},onPointerMove:qe=>{var gt;if(!Vn.current||!Dt)return;let ft=qe.clientY-Vn.current.y,Ft=qe.clientX-Vn.current.x,Kt=(Sn==="top"?Math.min:Math.max)(0,ft),or=qe.pointerType==="touch"?10:2;Math.abs(Kt)>or?(gt=Bt.current)==null||gt.style.setProperty("--swipe-amount",`${ft}px`):Math.abs(Ft)>or&&(Vn.current=null)}},bn&&!y.jsx?Ne.createElement("button",{"aria-label":Q,"data-disabled":Qr,"data-close-button":!0,onClick:Qr||!Dt?()=>{}:()=>{var qe;Un(),(qe=y.onDismiss)==null||qe.call(y,y)},className:H(B==null?void 0:B.closeButton,(s=y==null?void 0:y.classNames)==null?void 0:s.closeButton)},Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ne.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ne.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,y.jsx||Ne.isValidElement(y.title)?y.jsx||y.title:Ne.createElement(Ne.Fragment,null,Ze||y.icon||y.promise?Ne.createElement("div",{"data-icon":"",className:H(B==null?void 0:B.icon,(l=y==null?void 0:y.classNames)==null?void 0:l.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||si():null,y.type!=="loading"?y.icon||(K==null?void 0:K[Ze])||Ek(Ze):null):null,Ne.createElement("div",{"data-content":"",className:H(B==null?void 0:B.content,(c=y==null?void 0:y.classNames)==null?void 0:c.content)},Ne.createElement("div",{"data-title":"",className:H(B==null?void 0:B.title,(u=y==null?void 0:y.classNames)==null?void 0:u.title)},y.title),y.description?Ne.createElement("div",{"data-description":"",className:H(z,ni,B==null?void 0:B.description,(h=y==null?void 0:y.classNames)==null?void 0:h.description)},y.description):null),Ne.isValidElement(y.cancel)?y.cancel:y.cancel&&$h(y.cancel)?Ne.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||D,onClick:qe=>{var gt,ft;$h(y.cancel)&&Dt&&((ft=(gt=y.cancel).onClick)==null||ft.call(gt,qe),Un())},className:H(B==null?void 0:B.cancelButton,(m=y==null?void 0:y.classNames)==null?void 0:m.cancelButton)},y.cancel.label):null,Ne.isValidElement(y.action)?y.action:y.action&&$h(y.action)?Ne.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||k,onClick:qe=>{var gt,ft;$h(y.action)&&(qe.defaultPrevented||((ft=(gt=y.action).onClick)==null||ft.call(gt,qe),Un()))},className:H(B==null?void 0:B.actionButton,(g=y==null?void 0:y.classNames)==null?void 0:g.actionButton)},y.action.label):null))};function __(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var Wk=n=>{let{invert:e,position:t="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:l,className:c,offset:u,theme:h="light",richColors:m,duration:g,style:v,visibleToasts:y=Lk,toastOptions:b,dir:S=__(),gap:E=Uk,loadingIcon:x,icons:j,containerAriaLabel:I="Notifications",pauseWhenPageIsHidden:C,cn:O=Bk}=n,[U,q]=Ne.useState([]),P=Ne.useMemo(()=>Array.from(new Set([t].concat(U.filter(F=>F.position).map(F=>F.position)))),[U,t]),[R,D]=Ne.useState([]),[k,$]=Ne.useState(!1),[z,M]=Ne.useState(!1),[ie,ae]=Ne.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=Ne.useRef(null),J=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=Ne.useRef(null),K=Ne.useRef(!1),Q=Ne.useCallback(F=>{var H;(H=U.find(le=>le.id===F.id))!=null&&H.delete||Ar.dismiss(F.id),q(le=>le.filter(({id:Ee})=>Ee!==F.id))},[U]);return Ne.useEffect(()=>Ar.subscribe(F=>{if(F.dismiss){q(H=>H.map(le=>le.id===F.id?{...le,delete:!0}:le));return}setTimeout(()=>{em.flushSync(()=>{q(H=>{let le=H.findIndex(Ee=>Ee.id===F.id);return le!==-1?[...H.slice(0,le),{...H[le],...F},...H.slice(le+1)]:[F,...H]})})})}),[]),Ne.useEffect(()=>{if(h!=="system"){ae(h);return}h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ae("dark"):ae("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:F})=>{ae(F?"dark":"light")})},[h]),Ne.useEffect(()=>{U.length<=1&&$(!1)},[U]),Ne.useEffect(()=>{let F=H=>{var le,Ee;r.every(Te=>H[Te]||H.code===Te)&&($(!0),(le=Y.current)==null||le.focus()),H.code==="Escape"&&(document.activeElement===Y.current||(Ee=Y.current)!=null&&Ee.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[r]),Ne.useEffect(()=>{if(Y.current)return()=>{B.current&&(B.current.focus({preventScroll:!0}),B.current=null,K.current=!1)}},[Y.current]),U.length?Ne.createElement("section",{"aria-label":`${I} ${J}`,tabIndex:-1},P.map((F,H)=>{var le;let[Ee,Te]=F.split("-");return Ne.createElement("ol",{key:F,dir:S==="auto"?__():S,tabIndex:-1,ref:Y,className:c,"data-sonner-toaster":!0,"data-theme":ie,"data-y-position":Ee,"data-x-position":Te,style:{"--front-toast-height":`${((le=R[0])==null?void 0:le.height)||0}px`,"--offset":typeof u=="number"?`${u}px`:u||Mk,"--width":`${Vk}px`,"--gap":`${E}px`,...v},onBlur:pe=>{K.current&&!pe.currentTarget.contains(pe.relatedTarget)&&(K.current=!1,B.current&&(B.current.focus({preventScroll:!0}),B.current=null))},onFocus:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||K.current||(K.current=!0,B.current=pe.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{z||$(!1)},onPointerDown:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},U.filter(pe=>!pe.position&&H===0||pe.position===F).map((pe,ue)=>{var ye,De;return Ne.createElement(qk,{key:pe.id,icons:j,index:ue,toast:pe,defaultRichColors:m,duration:(ye=b==null?void 0:b.duration)!=null?ye:g,className:b==null?void 0:b.className,descriptionClassName:b==null?void 0:b.descriptionClassName,invert:e,visibleToasts:y,closeButton:(De=b==null?void 0:b.closeButton)!=null?De:l,interacting:z,position:F,style:b==null?void 0:b.style,unstyled:b==null?void 0:b.unstyled,classNames:b==null?void 0:b.classNames,cancelButtonStyle:b==null?void 0:b.cancelButtonStyle,actionButtonStyle:b==null?void 0:b.actionButtonStyle,removeToast:Q,toasts:U.filter(Ie=>Ie.position==pe.position),heights:R.filter(Ie=>Ie.position==pe.position),setHeights:D,expandByDefault:s,gap:E,loadingIcon:x,expanded:k,pauseWhenPageIsHidden:C,cn:O})}))})):null};const Hk=({...n})=>{const{theme:e="system"}=_k();return a.jsx(Wk,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};function Kk(n,e=[]){let t=[];function r(l,c){const u=_.createContext(c),h=t.length;t=[...t,c];const m=v=>{var j;const{scope:y,children:b,...S}=v,E=((j=y==null?void 0:y[n])==null?void 0:j[h])||u,x=_.useMemo(()=>S,Object.values(S));return a.jsx(E.Provider,{value:x,children:b})};m.displayName=l+"Provider";function g(v,y){var E;const b=((E=y==null?void 0:y[n])==null?void 0:E[h])||u,S=_.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${l}\``)}return[m,g]}const s=()=>{const l=t.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[n])||l;return _.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,Gk(s,...e)]}function Gk(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(l){const c=r.reduce((u,{useScope:h,scopeName:m})=>{const v=h(l)[`__scope${m}`];return{...u,...v}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var Qk="DismissableLayer",dv="dismissableLayer.update",Yk="dismissableLayer.pointerDownOutside",Xk="dismissableLayer.focusOutside",E_,eS=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yy=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:l,onInteractOutside:c,onDismiss:u,...h}=n,m=_.useContext(eS),[g,v]=_.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=_.useState({}),S=wt(e,P=>v(P)),E=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),j=E.indexOf(x),I=g?E.indexOf(g):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,O=I>=j,U=e2(P=>{const R=P.target,D=[...m.branches].some(k=>k.contains(R));!O||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},y),q=t2(P=>{const R=P.target;[...m.branches].some(k=>k.contains(R))||(l==null||l(P),c==null||c(P),P.defaultPrevented||u==null||u())},y);return dy(P=>{I===m.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},y),_.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(E_=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),b_(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=E_)}},[g,y,t,m]),_.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),b_())},[g,m]),_.useEffect(()=>{const P=()=>b({});return document.addEventListener(dv,P),()=>document.removeEventListener(dv,P)},[]),a.jsx(Ke.div,{...h,ref:S,style:{pointerEvents:C?O?"auto":"none":void 0,...n.style},onFocusCapture:ze(n.onFocusCapture,q.onFocusCapture),onBlurCapture:ze(n.onBlurCapture,q.onBlurCapture),onPointerDownCapture:ze(n.onPointerDownCapture,U.onPointerDownCapture)})});yy.displayName=Qk;var Jk="DismissableLayerBranch",Zk=_.forwardRef((n,e)=>{const t=_.useContext(eS),r=_.useRef(null),s=wt(e,r);return _.useEffect(()=>{const l=r.current;if(l)return t.branches.add(l),()=>{t.branches.delete(l)}},[t.branches]),a.jsx(Ke.div,{...n,ref:s})});Zk.displayName=Jk;function e2(n,e=globalThis==null?void 0:globalThis.document){const t=En(n),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const l=u=>{if(u.target&&!r.current){let h=function(){tS(Yk,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",l),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function t2(n,e=globalThis==null?void 0:globalThis.document){const t=En(n),r=_.useRef(!1);return _.useEffect(()=>{const s=l=>{l.target&&!r.current&&tS(Xk,t,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function b_(){const n=new CustomEvent(dv);document.dispatchEvent(n)}function tS(n,e,t,{discrete:r}){const s=t.originalEvent.target,l=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?tm(s,l):s.dispatchEvent(l)}var n2=l1.useId||(()=>{}),r2=0;function Io(n){const[e,t]=_.useState(n2());return Ht(()=>{t(r=>r??String(r2++))},[n]),e?`radix-${e}`:""}const s2=["top","right","bottom","left"],Fo=Math.min,Pr=Math.max,Sf=Math.round,zh=Math.floor,Vo=n=>({x:n,y:n}),i2={left:"right",right:"left",bottom:"top",top:"bottom"},o2={start:"end",end:"start"};function hv(n,e,t){return Pr(n,Fo(e,t))}function ji(n,e){return typeof n=="function"?n(e):n}function Ai(n){return n.split("-")[0]}function Ec(n){return n.split("-")[1]}function xy(n){return n==="x"?"y":"x"}function wy(n){return n==="y"?"height":"width"}function Uo(n){return["top","bottom"].includes(Ai(n))?"y":"x"}function _y(n){return xy(Uo(n))}function a2(n,e,t){t===void 0&&(t=!1);const r=Ec(n),s=_y(n),l=wy(s);let c=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(c=Nf(c)),[c,Nf(c)]}function l2(n){const e=Nf(n);return[fv(n),e,fv(e)]}function fv(n){return n.replace(/start|end/g,e=>o2[e])}function c2(n,e,t){const r=["left","right"],s=["right","left"],l=["top","bottom"],c=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?l:c;default:return[]}}function u2(n,e,t,r){const s=Ec(n);let l=c2(Ai(n),t==="start",r);return s&&(l=l.map(c=>c+"-"+s),e&&(l=l.concat(l.map(fv)))),l}function Nf(n){return n.replace(/left|right|bottom|top/g,e=>i2[e])}function d2(n){return{top:0,right:0,bottom:0,left:0,...n}}function nS(n){return typeof n!="number"?d2(n):{top:n,right:n,bottom:n,left:n}}function Tf(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function S_(n,e,t){let{reference:r,floating:s}=n;const l=Uo(e),c=_y(e),u=wy(c),h=Ai(e),m=l==="y",g=r.x+r.width/2-s.width/2,v=r.y+r.height/2-s.height/2,y=r[u]/2-s[u]/2;let b;switch(h){case"top":b={x:g,y:r.y-s.height};break;case"bottom":b={x:g,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:v};break;case"left":b={x:r.x-s.width,y:v};break;default:b={x:r.x,y:r.y}}switch(Ec(e)){case"start":b[c]-=y*(t&&m?-1:1);break;case"end":b[c]+=y*(t&&m?-1:1);break}return b}const h2=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:l=[],platform:c}=t,u=l.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let m=await c.getElementRects({reference:n,floating:e,strategy:s}),{x:g,y:v}=S_(m,r,h),y=r,b={},S=0;for(let E=0;E<u.length;E++){const{name:x,fn:j}=u[E],{x:I,y:C,data:O,reset:U}=await j({x:g,y:v,initialPlacement:r,placement:y,strategy:s,middlewareData:b,rects:m,platform:c,elements:{reference:n,floating:e}});g=I??g,v=C??v,b={...b,[x]:{...b[x],...O}},U&&S<=50&&(S++,typeof U=="object"&&(U.placement&&(y=U.placement),U.rects&&(m=U.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:s}):U.rects),{x:g,y:v}=S_(m,y,h)),E=-1)}return{x:g,y:v,placement:y,strategy:s,middlewareData:b}};async function Uu(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:l,rects:c,elements:u,strategy:h}=n,{boundary:m="clippingAncestors",rootBoundary:g="viewport",elementContext:v="floating",altBoundary:y=!1,padding:b=0}=ji(e,n),S=nS(b),x=u[y?v==="floating"?"reference":"floating":v],j=Tf(await l.getClippingRect({element:(t=await(l.isElement==null?void 0:l.isElement(x)))==null||t?x:x.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(u.floating)),boundary:m,rootBoundary:g,strategy:h})),I=v==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,C=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u.floating)),O=await(l.isElement==null?void 0:l.isElement(C))?await(l.getScale==null?void 0:l.getScale(C))||{x:1,y:1}:{x:1,y:1},U=Tf(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:I,offsetParent:C,strategy:h}):I);return{top:(j.top-U.top+S.top)/O.y,bottom:(U.bottom-j.bottom+S.bottom)/O.y,left:(j.left-U.left+S.left)/O.x,right:(U.right-j.right+S.right)/O.x}}const f2=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:l,platform:c,elements:u,middlewareData:h}=e,{element:m,padding:g=0}=ji(n,e)||{};if(m==null)return{};const v=nS(g),y={x:t,y:r},b=_y(s),S=wy(b),E=await c.getDimensions(m),x=b==="y",j=x?"top":"left",I=x?"bottom":"right",C=x?"clientHeight":"clientWidth",O=l.reference[S]+l.reference[b]-y[b]-l.floating[S],U=y[b]-l.reference[b],q=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let P=q?q[C]:0;(!P||!await(c.isElement==null?void 0:c.isElement(q)))&&(P=u.floating[C]||l.floating[S]);const R=O/2-U/2,D=P/2-E[S]/2-1,k=Fo(v[j],D),$=Fo(v[I],D),z=k,M=P-E[S]-$,ie=P/2-E[S]/2+R,ae=hv(z,ie,M),Y=!h.arrow&&Ec(s)!=null&&ie!==ae&&l.reference[S]/2-(ie<z?k:$)-E[S]/2<0,J=Y?ie<z?ie-z:ie-M:0;return{[b]:y[b]+J,data:{[b]:ae,centerOffset:ie-ae-J,...Y&&{alignmentOffset:J}},reset:Y}}}),m2=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:l,rects:c,initialPlacement:u,platform:h,elements:m}=e,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:y,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:E=!0,...x}=ji(n,e);if((t=l.arrow)!=null&&t.alignmentOffset)return{};const j=Ai(s),I=Uo(u),C=Ai(u)===u,O=await(h.isRTL==null?void 0:h.isRTL(m.floating)),U=y||(C||!E?[Nf(u)]:l2(u)),q=S!=="none";!y&&q&&U.push(...u2(u,E,S,O));const P=[u,...U],R=await Uu(e,x),D=[];let k=((r=l.flip)==null?void 0:r.overflows)||[];if(g&&D.push(R[j]),v){const ie=a2(s,c,O);D.push(R[ie[0]],R[ie[1]])}if(k=[...k,{placement:s,overflows:D}],!D.every(ie=>ie<=0)){var $,z;const ie=((($=l.flip)==null?void 0:$.index)||0)+1,ae=P[ie];if(ae)return{data:{index:ie,overflows:k},reset:{placement:ae}};let Y=(z=k.filter(J=>J.overflows[0]<=0).sort((J,B)=>J.overflows[1]-B.overflows[1])[0])==null?void 0:z.placement;if(!Y)switch(b){case"bestFit":{var M;const J=(M=k.filter(B=>{if(q){const K=Uo(B.placement);return K===I||K==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(K=>K>0).reduce((K,Q)=>K+Q,0)]).sort((B,K)=>B[1]-K[1])[0])==null?void 0:M[0];J&&(Y=J);break}case"initialPlacement":Y=u;break}if(s!==Y)return{reset:{placement:Y}}}return{}}}};function N_(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function T_(n){return s2.some(e=>n[e]>=0)}const p2=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=ji(n,e);switch(r){case"referenceHidden":{const l=await Uu(e,{...s,elementContext:"reference"}),c=N_(l,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:T_(c)}}}case"escaped":{const l=await Uu(e,{...s,altBoundary:!0}),c=N_(l,t.floating);return{data:{escapedOffsets:c,escaped:T_(c)}}}default:return{}}}}};async function g2(n,e){const{placement:t,platform:r,elements:s}=n,l=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=Ai(t),u=Ec(t),h=Uo(t)==="y",m=["left","top"].includes(c)?-1:1,g=l&&h?-1:1,v=ji(e,n);let{mainAxis:y,crossAxis:b,alignmentAxis:S}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return u&&typeof S=="number"&&(b=u==="end"?S*-1:S),h?{x:b*g,y:y*m}:{x:y*m,y:b*g}}const v2=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:l,placement:c,middlewareData:u}=e,h=await g2(e,n);return c===((t=u.offset)==null?void 0:t.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+h.x,y:l+h.y,data:{...h,placement:c}}}}},y2=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:u={fn:x=>{let{x:j,y:I}=x;return{x:j,y:I}}},...h}=ji(n,e),m={x:t,y:r},g=await Uu(e,h),v=Uo(Ai(s)),y=xy(v);let b=m[y],S=m[v];if(l){const x=y==="y"?"top":"left",j=y==="y"?"bottom":"right",I=b+g[x],C=b-g[j];b=hv(I,b,C)}if(c){const x=v==="y"?"top":"left",j=v==="y"?"bottom":"right",I=S+g[x],C=S-g[j];S=hv(I,S,C)}const E=u.fn({...e,[y]:b,[v]:S});return{...E,data:{x:E.x-t,y:E.y-r,enabled:{[y]:l,[v]:c}}}}}},x2=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:l,middlewareData:c}=e,{offset:u=0,mainAxis:h=!0,crossAxis:m=!0}=ji(n,e),g={x:t,y:r},v=Uo(s),y=xy(v);let b=g[y],S=g[v];const E=ji(u,e),x=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(h){const C=y==="y"?"height":"width",O=l.reference[y]-l.floating[C]+x.mainAxis,U=l.reference[y]+l.reference[C]-x.mainAxis;b<O?b=O:b>U&&(b=U)}if(m){var j,I;const C=y==="y"?"width":"height",O=["top","left"].includes(Ai(s)),U=l.reference[v]-l.floating[C]+(O&&((j=c.offset)==null?void 0:j[v])||0)+(O?0:x.crossAxis),q=l.reference[v]+l.reference[C]+(O?0:((I=c.offset)==null?void 0:I[v])||0)-(O?x.crossAxis:0);S<U?S=U:S>q&&(S=q)}return{[y]:b,[v]:S}}}},w2=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:l,platform:c,elements:u}=e,{apply:h=()=>{},...m}=ji(n,e),g=await Uu(e,m),v=Ai(s),y=Ec(s),b=Uo(s)==="y",{width:S,height:E}=l.floating;let x,j;v==="top"||v==="bottom"?(x=v,j=y===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(j=v,x=y==="end"?"top":"bottom");const I=E-g.top-g.bottom,C=S-g.left-g.right,O=Fo(E-g[x],I),U=Fo(S-g[j],C),q=!e.middlewareData.shift;let P=O,R=U;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(R=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=I),q&&!y){const k=Pr(g.left,0),$=Pr(g.right,0),z=Pr(g.top,0),M=Pr(g.bottom,0);b?R=S-2*(k!==0||$!==0?k+$:Pr(g.left,g.right)):P=E-2*(z!==0||M!==0?z+M:Pr(g.top,g.bottom))}await h({...e,availableWidth:R,availableHeight:P});const D=await c.getDimensions(u.floating);return S!==D.width||E!==D.height?{reset:{rects:!0}}:{}}}};function sm(){return typeof window<"u"}function bc(n){return rS(n)?(n.nodeName||"").toLowerCase():"#document"}function Dr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Js(n){var e;return(e=(rS(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function rS(n){return sm()?n instanceof Node||n instanceof Dr(n).Node:!1}function ps(n){return sm()?n instanceof Element||n instanceof Dr(n).Element:!1}function Gs(n){return sm()?n instanceof HTMLElement||n instanceof Dr(n).HTMLElement:!1}function C_(n){return!sm()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Dr(n).ShadowRoot}function ld(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=gs(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function _2(n){return["table","td","th"].includes(bc(n))}function im(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Ey(n){const e=by(),t=ps(n)?gs(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function E2(n){let e=$o(n);for(;Gs(e)&&!lc(e);){if(Ey(e))return e;if(im(e))return null;e=$o(e)}return null}function by(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function lc(n){return["html","body","#document"].includes(bc(n))}function gs(n){return Dr(n).getComputedStyle(n)}function om(n){return ps(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function $o(n){if(bc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||C_(n)&&n.host||Js(n);return C_(e)?e.host:e}function sS(n){const e=$o(n);return lc(e)?n.ownerDocument?n.ownerDocument.body:n.body:Gs(e)&&ld(e)?e:sS(e)}function $u(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=sS(n),l=s===((r=n.ownerDocument)==null?void 0:r.body),c=Dr(s);if(l){const u=mv(c);return e.concat(c,c.visualViewport||[],ld(s)?s:[],u&&t?$u(u):[])}return e.concat(s,$u(s,[],t))}function mv(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function iS(n){const e=gs(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Gs(n),l=s?n.offsetWidth:t,c=s?n.offsetHeight:r,u=Sf(t)!==l||Sf(r)!==c;return u&&(t=l,r=c),{width:t,height:r,$:u}}function Sy(n){return ps(n)?n:n.contextElement}function Hl(n){const e=Sy(n);if(!Gs(e))return Vo(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:l}=iS(e);let c=(l?Sf(t.width):t.width)/r,u=(l?Sf(t.height):t.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const b2=Vo(0);function oS(n){const e=Dr(n);return!by()||!e.visualViewport?b2:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function S2(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Dr(n)?!1:e}function La(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),l=Sy(n);let c=Vo(1);e&&(r?ps(r)&&(c=Hl(r)):c=Hl(n));const u=S2(l,t,r)?oS(l):Vo(0);let h=(s.left+u.x)/c.x,m=(s.top+u.y)/c.y,g=s.width/c.x,v=s.height/c.y;if(l){const y=Dr(l),b=r&&ps(r)?Dr(r):r;let S=y,E=mv(S);for(;E&&r&&b!==S;){const x=Hl(E),j=E.getBoundingClientRect(),I=gs(E),C=j.left+(E.clientLeft+parseFloat(I.paddingLeft))*x.x,O=j.top+(E.clientTop+parseFloat(I.paddingTop))*x.y;h*=x.x,m*=x.y,g*=x.x,v*=x.y,h+=C,m+=O,S=Dr(E),E=mv(S)}}return Tf({width:g,height:v,x:h,y:m})}function N2(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const l=s==="fixed",c=Js(r),u=e?im(e.floating):!1;if(r===c||u&&l)return t;let h={scrollLeft:0,scrollTop:0},m=Vo(1);const g=Vo(0),v=Gs(r);if((v||!v&&!l)&&((bc(r)!=="body"||ld(c))&&(h=om(r)),Gs(r))){const y=La(r);m=Hl(r),g.x=y.x+r.clientLeft,g.y=y.y+r.clientTop}return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-h.scrollLeft*m.x+g.x,y:t.y*m.y-h.scrollTop*m.y+g.y}}function T2(n){return Array.from(n.getClientRects())}function pv(n,e){const t=om(n).scrollLeft;return e?e.left+t:La(Js(n)).left+t}function C2(n){const e=Js(n),t=om(n),r=n.ownerDocument.body,s=Pr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),l=Pr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+pv(n);const u=-t.scrollTop;return gs(r).direction==="rtl"&&(c+=Pr(e.clientWidth,r.clientWidth)-s),{width:s,height:l,x:c,y:u}}function I2(n,e){const t=Dr(n),r=Js(n),s=t.visualViewport;let l=r.clientWidth,c=r.clientHeight,u=0,h=0;if(s){l=s.width,c=s.height;const m=by();(!m||m&&e==="fixed")&&(u=s.offsetLeft,h=s.offsetTop)}return{width:l,height:c,x:u,y:h}}function j2(n,e){const t=La(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,l=Gs(n)?Hl(n):Vo(1),c=n.clientWidth*l.x,u=n.clientHeight*l.y,h=s*l.x,m=r*l.y;return{width:c,height:u,x:h,y:m}}function I_(n,e,t){let r;if(e==="viewport")r=I2(n,t);else if(e==="document")r=C2(Js(n));else if(ps(e))r=j2(e,t);else{const s=oS(n);r={...e,x:e.x-s.x,y:e.y-s.y}}return Tf(r)}function aS(n,e){const t=$o(n);return t===e||!ps(t)||lc(t)?!1:gs(t).position==="fixed"||aS(t,e)}function A2(n,e){const t=e.get(n);if(t)return t;let r=$u(n,[],!1).filter(u=>ps(u)&&bc(u)!=="body"),s=null;const l=gs(n).position==="fixed";let c=l?$o(n):n;for(;ps(c)&&!lc(c);){const u=gs(c),h=Ey(c);!h&&u.position==="fixed"&&(s=null),(l?!h&&!s:!h&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ld(c)&&!h&&aS(n,c))?r=r.filter(g=>g!==c):s=u,c=$o(c)}return e.set(n,r),r}function P2(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const c=[...t==="clippingAncestors"?im(e)?[]:A2(e,this._c):[].concat(t),r],u=c[0],h=c.reduce((m,g)=>{const v=I_(e,g,s);return m.top=Pr(v.top,m.top),m.right=Fo(v.right,m.right),m.bottom=Fo(v.bottom,m.bottom),m.left=Pr(v.left,m.left),m},I_(e,u,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function R2(n){const{width:e,height:t}=iS(n);return{width:e,height:t}}function k2(n,e,t){const r=Gs(e),s=Js(e),l=t==="fixed",c=La(n,!0,l,e);let u={scrollLeft:0,scrollTop:0};const h=Vo(0);if(r||!r&&!l)if((bc(e)!=="body"||ld(s))&&(u=om(e)),r){const b=La(e,!0,l,e);h.x=b.x+e.clientLeft,h.y=b.y+e.clientTop}else s&&(h.x=pv(s));let m=0,g=0;if(s&&!r&&!l){const b=s.getBoundingClientRect();g=b.top+u.scrollTop,m=b.left+u.scrollLeft-pv(s,b)}const v=c.left+u.scrollLeft-h.x-m,y=c.top+u.scrollTop-h.y-g;return{x:v,y,width:c.width,height:c.height}}function Ig(n){return gs(n).position==="static"}function j_(n,e){if(!Gs(n)||gs(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Js(n)===t&&(t=t.ownerDocument.body),t}function lS(n,e){const t=Dr(n);if(im(n))return t;if(!Gs(n)){let s=$o(n);for(;s&&!lc(s);){if(ps(s)&&!Ig(s))return s;s=$o(s)}return t}let r=j_(n,e);for(;r&&_2(r)&&Ig(r);)r=j_(r,e);return r&&lc(r)&&Ig(r)&&!Ey(r)?t:r||E2(n)||t}const D2=async function(n){const e=this.getOffsetParent||lS,t=this.getDimensions,r=await t(n.floating);return{reference:k2(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function O2(n){return gs(n).direction==="rtl"}const L2={convertOffsetParentRelativeRectToViewportRelativeRect:N2,getDocumentElement:Js,getClippingRect:P2,getOffsetParent:lS,getElementRects:D2,getClientRects:T2,getDimensions:R2,getScale:Hl,isElement:ps,isRTL:O2};function M2(n,e){let t=null,r;const s=Js(n);function l(){var u;clearTimeout(r),(u=t)==null||u.disconnect(),t=null}function c(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),l();const{left:m,top:g,width:v,height:y}=n.getBoundingClientRect();if(u||e(),!v||!y)return;const b=zh(g),S=zh(s.clientWidth-(m+v)),E=zh(s.clientHeight-(g+y)),x=zh(m),I={rootMargin:-b+"px "+-S+"px "+-E+"px "+-x+"px",threshold:Pr(0,Fo(1,h))||1};let C=!0;function O(U){const q=U[0].intersectionRatio;if(q!==h){if(!C)return c();q?c(!1,q):r=setTimeout(()=>{c(!1,1e-7)},1e3)}C=!1}try{t=new IntersectionObserver(O,{...I,root:s.ownerDocument})}catch{t=new IntersectionObserver(O,I)}t.observe(n)}return c(!0),l}function F2(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,m=Sy(n),g=s||l?[...m?$u(m):[],...$u(e)]:[];g.forEach(j=>{s&&j.addEventListener("scroll",t,{passive:!0}),l&&j.addEventListener("resize",t)});const v=m&&u?M2(m,t):null;let y=-1,b=null;c&&(b=new ResizeObserver(j=>{let[I]=j;I&&I.target===m&&b&&(b.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var C;(C=b)==null||C.observe(e)})),t()}),m&&!h&&b.observe(m),b.observe(e));let S,E=h?La(n):null;h&&x();function x(){const j=La(n);E&&(j.x!==E.x||j.y!==E.y||j.width!==E.width||j.height!==E.height)&&t(),E=j,S=requestAnimationFrame(x)}return t(),()=>{var j;g.forEach(I=>{s&&I.removeEventListener("scroll",t),l&&I.removeEventListener("resize",t)}),v==null||v(),(j=b)==null||j.disconnect(),b=null,h&&cancelAnimationFrame(S)}}const V2=v2,U2=y2,$2=m2,z2=w2,B2=p2,A_=f2,q2=x2,W2=(n,e,t)=>{const r=new Map,s={platform:L2,...t},l={...s.platform,_c:r};return h2(n,e,{...s,platform:l})};var lf=typeof document<"u"?_.useLayoutEffect:_.useEffect;function Cf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Cf(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const l=s[r];if(!(l==="_owner"&&n.$$typeof)&&!Cf(n[l],e[l]))return!1}return!0}return n!==n&&e!==e}function cS(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function P_(n,e){const t=cS(n);return Math.round(e*t)/t}function jg(n){const e=_.useRef(n);return lf(()=>{e.current=n}),e}function H2(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:l,floating:c}={},transform:u=!0,whileElementsMounted:h,open:m}=n,[g,v]=_.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[y,b]=_.useState(r);Cf(y,r)||b(r);const[S,E]=_.useState(null),[x,j]=_.useState(null),I=_.useCallback(B=>{B!==q.current&&(q.current=B,E(B))},[]),C=_.useCallback(B=>{B!==P.current&&(P.current=B,j(B))},[]),O=l||S,U=c||x,q=_.useRef(null),P=_.useRef(null),R=_.useRef(g),D=h!=null,k=jg(h),$=jg(s),z=jg(m),M=_.useCallback(()=>{if(!q.current||!P.current)return;const B={placement:e,strategy:t,middleware:y};$.current&&(B.platform=$.current),W2(q.current,P.current,B).then(K=>{const Q={...K,isPositioned:z.current!==!1};ie.current&&!Cf(R.current,Q)&&(R.current=Q,Ha.flushSync(()=>{v(Q)}))})},[y,e,t,$,z]);lf(()=>{m===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,v(B=>({...B,isPositioned:!1})))},[m]);const ie=_.useRef(!1);lf(()=>(ie.current=!0,()=>{ie.current=!1}),[]),lf(()=>{if(O&&(q.current=O),U&&(P.current=U),O&&U){if(k.current)return k.current(O,U,M);M()}},[O,U,M,k,D]);const ae=_.useMemo(()=>({reference:q,floating:P,setReference:I,setFloating:C}),[I,C]),Y=_.useMemo(()=>({reference:O,floating:U}),[O,U]),J=_.useMemo(()=>{const B={position:t,left:0,top:0};if(!Y.floating)return B;const K=P_(Y.floating,g.x),Q=P_(Y.floating,g.y);return u?{...B,transform:"translate("+K+"px, "+Q+"px)",...cS(Y.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:K,top:Q}},[t,u,Y.floating,g.x,g.y]);return _.useMemo(()=>({...g,update:M,refs:ae,elements:Y,floatingStyles:J}),[g,M,ae,Y,J])}const K2=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?A_({element:r.current,padding:s}).fn(t):{}:r?A_({element:r,padding:s}).fn(t):{}}}},G2=(n,e)=>({...V2(n),options:[n,e]}),Q2=(n,e)=>({...U2(n),options:[n,e]}),Y2=(n,e)=>({...q2(n),options:[n,e]}),X2=(n,e)=>({...$2(n),options:[n,e]}),J2=(n,e)=>({...z2(n),options:[n,e]}),Z2=(n,e)=>({...B2(n),options:[n,e]}),eD=(n,e)=>({...K2(n),options:[n,e]});var tD="Arrow",uS=_.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...l}=n;return a.jsx(Ke.svg,{...l,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});uS.displayName=tD;var nD=uS;function dS(n){const[e,t]=_.useState(void 0);return Ht(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const l=s[0];let c,u;if("borderBoxSize"in l){const h=l.borderBoxSize,m=Array.isArray(h)?h[0]:h;c=m.inlineSize,u=m.blockSize}else c=n.offsetWidth,u=n.offsetHeight;t({width:c,height:u})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Ny="Popper",[hS,am]=Li(Ny),[rD,fS]=hS(Ny),mS=n=>{const{__scopePopper:e,children:t}=n,[r,s]=_.useState(null);return a.jsx(rD,{scope:e,anchor:r,onAnchorChange:s,children:t})};mS.displayName=Ny;var pS="PopperAnchor",gS=_.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,l=fS(pS,t),c=_.useRef(null),u=wt(e,c);return _.useEffect(()=>{l.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:a.jsx(Ke.div,{...s,ref:u})});gS.displayName=pS;var Ty="PopperContent",[sD,iD]=hS(Ty),vS=_.forwardRef((n,e)=>{var ue,ye,De,Ie,Me,Le;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:l="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:m=[],collisionPadding:g=0,sticky:v="partial",hideWhenDetached:y=!1,updatePositionStrategy:b="optimized",onPlaced:S,...E}=n,x=fS(Ty,t),[j,I]=_.useState(null),C=wt(e,ut=>I(ut)),[O,U]=_.useState(null),q=dS(O),P=(q==null?void 0:q.width)??0,R=(q==null?void 0:q.height)??0,D=r+(l!=="center"?"-"+l:""),k=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},$=Array.isArray(m)?m:[m],z=$.length>0,M={padding:k,boundary:$.filter(aD),altBoundary:z},{refs:ie,floatingStyles:ae,placement:Y,isPositioned:J,middlewareData:B}=H2({strategy:"fixed",placement:D,whileElementsMounted:(...ut)=>F2(...ut,{animationFrame:b==="always"}),elements:{reference:x.anchor},middleware:[G2({mainAxis:s+R,alignmentAxis:c}),h&&Q2({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?Y2():void 0,...M}),h&&X2({...M}),J2({...M,apply:({elements:ut,rects:bt,availableWidth:sn,availableHeight:Bt})=>{const{width:gn,height:en}=bt.reference,Ze=ut.floating.style;Ze.setProperty("--radix-popper-available-width",`${sn}px`),Ze.setProperty("--radix-popper-available-height",`${Bt}px`),Ze.setProperty("--radix-popper-anchor-width",`${gn}px`),Ze.setProperty("--radix-popper-anchor-height",`${en}px`)}}),O&&eD({element:O,padding:u}),lD({arrowWidth:P,arrowHeight:R}),y&&Z2({strategy:"referenceHidden",...M})]}),[K,Q]=wS(Y),F=En(S);Ht(()=>{J&&(F==null||F())},[J,F]);const H=(ue=B.arrow)==null?void 0:ue.x,le=(ye=B.arrow)==null?void 0:ye.y,Ee=((De=B.arrow)==null?void 0:De.centerOffset)!==0,[Te,pe]=_.useState();return Ht(()=>{j&&pe(window.getComputedStyle(j).zIndex)},[j]),a.jsx("div",{ref:ie.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:J?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Te,"--radix-popper-transform-origin":[(Ie=B.transformOrigin)==null?void 0:Ie.x,(Me=B.transformOrigin)==null?void 0:Me.y].join(" "),...((Le=B.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:a.jsx(sD,{scope:t,placedSide:K,onArrowChange:U,arrowX:H,arrowY:le,shouldHideArrow:Ee,children:a.jsx(Ke.div,{"data-side":K,"data-align":Q,...E,ref:C,style:{...E.style,animation:J?void 0:"none"}})})})});vS.displayName=Ty;var yS="PopperArrow",oD={top:"bottom",right:"left",bottom:"top",left:"right"},xS=_.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,l=iD(yS,r),c=oD[l.placedSide];return a.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:a.jsx(nD,{...s,ref:t,style:{...s.style,display:"block"}})})});xS.displayName=yS;function aD(n){return n!==null}var lD=n=>({name:"transformOrigin",options:n,fn(e){var x,j,I;const{placement:t,rects:r,middlewareData:s}=e,c=((x=s.arrow)==null?void 0:x.centerOffset)!==0,u=c?0:n.arrowWidth,h=c?0:n.arrowHeight,[m,g]=wS(t),v={start:"0%",center:"50%",end:"100%"}[g],y=(((j=s.arrow)==null?void 0:j.x)??0)+u/2,b=(((I=s.arrow)==null?void 0:I.y)??0)+h/2;let S="",E="";return m==="bottom"?(S=c?v:`${y}px`,E=`${-h}px`):m==="top"?(S=c?v:`${y}px`,E=`${r.floating.height+h}px`):m==="right"?(S=`${-h}px`,E=c?v:`${b}px`):m==="left"&&(S=`${r.floating.width+h}px`,E=c?v:`${b}px`),{data:{x:S,y:E}}}});function wS(n){const[e,t="center"]=n.split("-");return[e,t]}var cD=mS,_S=gS,ES=vS,bS=xS,uD="Portal",SS=_.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,l]=_.useState(!1);Ht(()=>l(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?em.createPortal(a.jsx(Ke.div,{...r,ref:e}),c):null});SS.displayName=uD;function dD(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var NS=n=>{const{present:e,children:t}=n,r=hD(e),s=typeof t=="function"?t({present:r.isPresent}):_.Children.only(t),l=wt(r.ref,fD(s));return typeof t=="function"||r.isPresent?_.cloneElement(s,{ref:l}):null};NS.displayName="Presence";function hD(n){const[e,t]=_.useState(),r=_.useRef({}),s=_.useRef(n),l=_.useRef("none"),c=n?"mounted":"unmounted",[u,h]=dD(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const m=Bh(r.current);l.current=u==="mounted"?m:"none"},[u]),Ht(()=>{const m=r.current,g=s.current;if(g!==n){const y=l.current,b=Bh(m);n?h("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?h("UNMOUNT"):h(g&&y!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Ht(()=>{if(e){let m;const g=e.ownerDocument.defaultView??window,v=b=>{const E=Bh(r.current).includes(b.animationName);if(b.target===e&&E&&(h("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",m=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},y=b=>{b.target===e&&(l.current=Bh(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{g.clearTimeout(m),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function Bh(n){return(n==null?void 0:n.animationName)||"none"}function fD(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var[lm,Rz]=Kk("Tooltip",[am]),Cy=am(),TS="TooltipProvider",mD=700,R_="tooltip.open",[pD,CS]=lm(TS),IS=n=>{const{__scopeTooltip:e,delayDuration:t=mD,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:l}=n,[c,u]=_.useState(!0),h=_.useRef(!1),m=_.useRef(0);return _.useEffect(()=>{const g=m.current;return()=>window.clearTimeout(g)},[]),a.jsx(pD,{scope:e,isOpenDelayed:c,delayDuration:t,onOpen:_.useCallback(()=>{window.clearTimeout(m.current),u(!1)},[]),onClose:_.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:h,onPointerInTransitChange:_.useCallback(g=>{h.current=g},[]),disableHoverableContent:s,children:l})};IS.displayName=TS;var jS="Tooltip",[kz,cm]=lm(jS),gv="TooltipTrigger",gD=_.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=cm(gv,t),l=CS(gv,t),c=Cy(t),u=_.useRef(null),h=wt(e,u,s.onTriggerChange),m=_.useRef(!1),g=_.useRef(!1),v=_.useCallback(()=>m.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),a.jsx(_S,{asChild:!0,...c,children:a.jsx(Ke.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:h,onPointerMove:ze(n.onPointerMove,y=>{y.pointerType!=="touch"&&!g.current&&!l.isPointerInTransitRef.current&&(s.onTriggerEnter(),g.current=!0)}),onPointerLeave:ze(n.onPointerLeave,()=>{s.onTriggerLeave(),g.current=!1}),onPointerDown:ze(n.onPointerDown,()=>{m.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:ze(n.onFocus,()=>{m.current||s.onOpen()}),onBlur:ze(n.onBlur,s.onClose),onClick:ze(n.onClick,s.onClose)})})});gD.displayName=gv;var vD="TooltipPortal",[Dz,yD]=lm(vD,{forceMount:void 0}),cc="TooltipContent",AS=_.forwardRef((n,e)=>{const t=yD(cc,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...l}=n,c=cm(cc,n.__scopeTooltip);return a.jsx(NS,{present:r||c.open,children:c.disableHoverableContent?a.jsx(PS,{side:s,...l,ref:e}):a.jsx(xD,{side:s,...l,ref:e})})}),xD=_.forwardRef((n,e)=>{const t=cm(cc,n.__scopeTooltip),r=CS(cc,n.__scopeTooltip),s=_.useRef(null),l=wt(e,s),[c,u]=_.useState(null),{trigger:h,onClose:m}=t,g=s.current,{onPointerInTransitChange:v}=r,y=_.useCallback(()=>{u(null),v(!1)},[v]),b=_.useCallback((S,E)=>{const x=S.currentTarget,j={x:S.clientX,y:S.clientY},I=bD(j,x.getBoundingClientRect()),C=SD(j,I),O=ND(E.getBoundingClientRect()),U=CD([...C,...O]);u(U),v(!0)},[v]);return _.useEffect(()=>()=>y(),[y]),_.useEffect(()=>{if(h&&g){const S=x=>b(x,g),E=x=>b(x,h);return h.addEventListener("pointerleave",S),g.addEventListener("pointerleave",E),()=>{h.removeEventListener("pointerleave",S),g.removeEventListener("pointerleave",E)}}},[h,g,b,y]),_.useEffect(()=>{if(c){const S=E=>{const x=E.target,j={x:E.clientX,y:E.clientY},I=(h==null?void 0:h.contains(x))||(g==null?void 0:g.contains(x)),C=!TD(j,c);I?y():C&&(y(),m())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[h,g,c,m,y]),a.jsx(PS,{...n,ref:l})}),[wD,_D]=lm(jS,{isInside:!1}),PS=_.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:l,onPointerDownOutside:c,...u}=n,h=cm(cc,t),m=Cy(t),{onClose:g}=h;return _.useEffect(()=>(document.addEventListener(R_,g),()=>document.removeEventListener(R_,g)),[g]),_.useEffect(()=>{if(h.trigger){const v=y=>{const b=y.target;b!=null&&b.contains(h.trigger)&&g()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[h.trigger,g]),a.jsx(yy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:v=>v.preventDefault(),onDismiss:g,children:a.jsxs(ES,{"data-state":h.stateAttribute,...m,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(d1,{children:r}),a.jsx(wD,{scope:t,isInside:!0,children:a.jsx(QP,{id:h.contentId,role:"tooltip",children:s||r})})]})})});AS.displayName=cc;var RS="TooltipArrow",ED=_.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Cy(t);return _D(RS,t).isInside?null:a.jsx(bS,{...s,...r,ref:e})});ED.displayName=RS;function bD(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),l=Math.abs(e.left-n.x);switch(Math.min(t,r,s,l)){case l:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function SD(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function ND(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function TD(n,e){const{x:t,y:r}=n;let s=!1;for(let l=0,c=e.length-1;l<e.length;c=l++){const u=e[l].x,h=e[l].y,m=e[c].x,g=e[c].y;h>r!=g>r&&t<(m-u)*(r-h)/(g-h)+u&&(s=!s)}return s}function CD(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),ID(e)}function ID(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const l=e[e.length-1],c=e[e.length-2];if((l.x-c.x)*(s.y-c.y)>=(l.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const l=t[t.length-1],c=t[t.length-2];if((l.x-c.x)*(s.y-c.y)>=(l.y-c.y)*(s.x-c.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var jD=IS,kS=AS;const AD=jD,PD=_.forwardRef(({className:n,sideOffset:e=4,...t},r)=>a.jsx(kS,{ref:r,sideOffset:e,className:nt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));PD.displayName=kS.displayName;var um=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dm=typeof window>"u"||"Deno"in globalThis;function ls(){}function RD(n,e){return typeof n=="function"?n(e):n}function kD(n){return typeof n=="number"&&n>=0&&n!==1/0}function DD(n,e){return Math.max(n+(e||0)-Date.now(),0)}function vv(n,e){return typeof n=="function"?n(e):n}function OD(n,e){return typeof n=="function"?n(e):n}function k_(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:l,queryKey:c,stale:u}=n;if(c){if(r){if(e.queryHash!==Iy(c,e.options))return!1}else if(!Bu(e.queryKey,c))return!1}if(t!=="all"){const h=e.isActive();if(t==="active"&&!h||t==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||l&&!l(e))}function D_(n,e){const{exact:t,status:r,predicate:s,mutationKey:l}=n;if(l){if(!e.options.mutationKey)return!1;if(t){if(zu(e.options.mutationKey)!==zu(l))return!1}else if(!Bu(e.options.mutationKey,l))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Iy(n,e){return((e==null?void 0:e.queryKeyHashFn)||zu)(n)}function zu(n){return JSON.stringify(n,(e,t)=>yv(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Bu(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Bu(n[t],e[t])):!1}function DS(n,e){if(n===e)return n;const t=O_(n)&&O_(e);if(t||yv(n)&&yv(e)){const r=t?n:Object.keys(n),s=r.length,l=t?e:Object.keys(e),c=l.length,u=t?[]:{},h=new Set(r);let m=0;for(let g=0;g<c;g++){const v=t?g:l[g];(!t&&h.has(v)||t)&&n[v]===void 0&&e[v]===void 0?(u[v]=void 0,m++):(u[v]=DS(n[v],e[v]),u[v]===n[v]&&n[v]!==void 0&&m++)}return s===c&&m===s?n:u}return e}function O_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function yv(n){if(!L_(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!L_(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function L_(n){return Object.prototype.toString.call(n)==="[object Object]"}function LD(n){return new Promise(e=>{setTimeout(e,n)})}function MD(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?DS(n,e):e}function FD(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function VD(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var jy=Symbol();function OS(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===jy?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Na,wo,Jl,Zb,UD=(Zb=class extends um{constructor(){super();Et(this,Na);Et(this,wo);Et(this,Jl);ot(this,Jl,e=>{if(!dm&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){de(this,wo)||this.setEventListener(de(this,Jl))}onUnsubscribe(){var e;this.hasListeners()||((e=de(this,wo))==null||e.call(this),ot(this,wo,void 0))}setEventListener(e){var t;ot(this,Jl,e),(t=de(this,wo))==null||t.call(this),ot(this,wo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){de(this,Na)!==e&&(ot(this,Na,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof de(this,Na)=="boolean"?de(this,Na):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Na=new WeakMap,wo=new WeakMap,Jl=new WeakMap,Zb),LS=new UD,Zl,_o,ec,e1,$D=(e1=class extends um{constructor(){super();Et(this,Zl,!0);Et(this,_o);Et(this,ec);ot(this,ec,e=>{if(!dm&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){de(this,_o)||this.setEventListener(de(this,ec))}onUnsubscribe(){var e;this.hasListeners()||((e=de(this,_o))==null||e.call(this),ot(this,_o,void 0))}setEventListener(e){var t;ot(this,ec,e),(t=de(this,_o))==null||t.call(this),ot(this,_o,e(this.setOnline.bind(this)))}setOnline(e){de(this,Zl)!==e&&(ot(this,Zl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return de(this,Zl)}},Zl=new WeakMap,_o=new WeakMap,ec=new WeakMap,e1),If=new $D;function zD(){let n,e;const t=new Promise((s,l)=>{n=s,e=l});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function BD(n){return Math.min(1e3*2**n,3e4)}function MS(n){return(n??"online")==="online"?If.isOnline():!0}var FS=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Ag(n){return n instanceof FS}function VS(n){let e=!1,t=0,r=!1,s;const l=zD(),c=E=>{var x;r||(y(new FS(E)),(x=n.abort)==null||x.call(n))},u=()=>{e=!0},h=()=>{e=!1},m=()=>LS.isFocused()&&(n.networkMode==="always"||If.isOnline())&&n.canRun(),g=()=>MS(n.networkMode)&&n.canRun(),v=E=>{var x;r||(r=!0,(x=n.onSuccess)==null||x.call(n,E),s==null||s(),l.resolve(E))},y=E=>{var x;r||(r=!0,(x=n.onError)==null||x.call(n,E),s==null||s(),l.reject(E))},b=()=>new Promise(E=>{var x;s=j=>{(r||m())&&E(j)},(x=n.onPause)==null||x.call(n)}).then(()=>{var E;s=void 0,r||(E=n.onContinue)==null||E.call(n)}),S=()=>{if(r)return;let E;const x=t===0?n.initialPromise:void 0;try{E=x??n.fn()}catch(j){E=Promise.reject(j)}Promise.resolve(E).then(v).catch(j=>{var q;if(r)return;const I=n.retry??(dm?0:3),C=n.retryDelay??BD,O=typeof C=="function"?C(t,j):C,U=I===!0||typeof I=="number"&&t<I||typeof I=="function"&&I(t,j);if(e||!U){y(j);return}t++,(q=n.onFail)==null||q.call(n,t,j),LD(O).then(()=>m()?void 0:b()).then(()=>{e?y(j):S()})})};return{promise:l,cancel:c,continue:()=>(s==null||s(),l),cancelRetry:u,continueRetry:h,canStart:g,start:()=>(g()?S():b().then(S),l)}}var qD=n=>setTimeout(n,0);function WD(){let n=[],e=0,t=u=>{u()},r=u=>{u()},s=qD;const l=u=>{e?n.push(u):s(()=>{t(u)})},c=()=>{const u=n;n=[],u.length&&s(()=>{r(()=>{u.forEach(h=>{t(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||c()}return h},batchCalls:u=>(...h)=>{l(()=>{u(...h)})},schedule:l,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var ir=WD(),Ta,t1,US=(t1=class{constructor(){Et(this,Ta)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),kD(this.gcTime)&&ot(this,Ta,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(dm?1/0:5*60*1e3))}clearGcTimeout(){de(this,Ta)&&(clearTimeout(de(this,Ta)),ot(this,Ta,void 0))}},Ta=new WeakMap,t1),tc,Ca,Wr,Ia,Kn,sd,ja,cs,Ei,n1,HD=(n1=class extends US{constructor(t){super();Et(this,cs);Et(this,tc);Et(this,Ca);Et(this,Wr);Et(this,Ia);Et(this,Kn);Et(this,sd);Et(this,ja);ot(this,ja,!1),ot(this,sd,t.defaultOptions),this.setOptions(t.options),this.observers=[],ot(this,Ia,t.client),ot(this,Wr,de(this,Ia).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ot(this,tc,GD(this.options)),this.state=t.state??de(this,tc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=de(this,Kn))==null?void 0:t.promise}setOptions(t){this.options={...de(this,sd),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&de(this,Wr).remove(this)}setData(t,r){const s=MD(this.state.data,t,this.options);return Wn(this,cs,Ei).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){Wn(this,cs,Ei).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,l;const r=(s=de(this,Kn))==null?void 0:s.promise;return(l=de(this,Kn))==null||l.cancel(t),r?r.then(ls).catch(ls):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(de(this,tc))}isActive(){return this.observers.some(t=>OD(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>vv(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!DD(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=de(this,Kn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=de(this,Kn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),de(this,Wr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(de(this,Kn)&&(de(this,ja)?de(this,Kn).cancel({revert:!0}):de(this,Kn).cancelRetry()),this.scheduleGc()),de(this,Wr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Wn(this,cs,Ei).call(this,{type:"invalidate"})}fetch(t,r){var g,v,y;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(de(this,Kn))return de(this,Kn).continueRetry(),de(this,Kn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const b=this.observers.find(S=>S.options.queryFn);b&&this.setOptions(b.options)}const s=new AbortController,l=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(ot(this,ja,!0),s.signal)})},c=()=>{const b=OS(this.options,r),E=(()=>{const x={client:de(this,Ia),queryKey:this.queryKey,meta:this.meta};return l(x),x})();return ot(this,ja,!1),this.options.persister?this.options.persister(b,E,this):b(E)},h=(()=>{const b={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:de(this,Ia),state:this.state,fetchFn:c};return l(b),b})();(g=this.options.behavior)==null||g.onFetch(h,this),ot(this,Ca,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((v=h.fetchOptions)==null?void 0:v.meta))&&Wn(this,cs,Ei).call(this,{type:"fetch",meta:(y=h.fetchOptions)==null?void 0:y.meta});const m=b=>{var S,E,x,j;Ag(b)&&b.silent||Wn(this,cs,Ei).call(this,{type:"error",error:b}),Ag(b)||((E=(S=de(this,Wr).config).onError)==null||E.call(S,b,this),(j=(x=de(this,Wr).config).onSettled)==null||j.call(x,this.state.data,b,this)),this.scheduleGc()};return ot(this,Kn,VS({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:b=>{var S,E,x,j;if(b===void 0){m(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(b)}catch(I){m(I);return}(E=(S=de(this,Wr).config).onSuccess)==null||E.call(S,b,this),(j=(x=de(this,Wr).config).onSettled)==null||j.call(x,b,this.state.error,this),this.scheduleGc()},onError:m,onFail:(b,S)=>{Wn(this,cs,Ei).call(this,{type:"failed",failureCount:b,error:S})},onPause:()=>{Wn(this,cs,Ei).call(this,{type:"pause"})},onContinue:()=>{Wn(this,cs,Ei).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),de(this,Kn).start()}},tc=new WeakMap,Ca=new WeakMap,Wr=new WeakMap,Ia=new WeakMap,Kn=new WeakMap,sd=new WeakMap,ja=new WeakMap,cs=new WeakSet,Ei=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...KD(s.data,this.options),fetchMeta:t.meta??null};case"success":return ot(this,Ca,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const l=t.error;return Ag(l)&&l.revert&&de(this,Ca)?{...de(this,Ca),fetchStatus:"idle"}:{...s,error:l,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),ir.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),de(this,Wr).notify({query:this,type:"updated",action:t})})},n1);function KD(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:MS(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function GD(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ds,r1,QD=(r1=class extends um{constructor(e={}){super();Et(this,Ds);this.config=e,ot(this,Ds,new Map)}build(e,t,r){const s=t.queryKey,l=t.queryHash??Iy(s,t);let c=this.get(l);return c||(c=new HD({client:e,queryKey:s,queryHash:l,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){de(this,Ds).has(e.queryHash)||(de(this,Ds).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=de(this,Ds).get(e.queryHash);t&&(e.destroy(),t===e&&de(this,Ds).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ir.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return de(this,Ds).get(e)}getAll(){return[...de(this,Ds).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>k_(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>k_(e,r)):t}notify(e){ir.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ir.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ir.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ds=new WeakMap,r1),Os,sr,Aa,Ls,mo,s1,YD=(s1=class extends US{constructor(t){super();Et(this,Ls);Et(this,Os);Et(this,sr);Et(this,Aa);this.mutationId=t.mutationId,ot(this,sr,t.mutationCache),ot(this,Os,[]),this.state=t.state||XD(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){de(this,Os).includes(t)||(de(this,Os).push(t),this.clearGcTimeout(),de(this,sr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ot(this,Os,de(this,Os).filter(r=>r!==t)),this.scheduleGc(),de(this,sr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){de(this,Os).length||(this.state.status==="pending"?this.scheduleGc():de(this,sr).remove(this))}continue(){var t;return((t=de(this,Aa))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var c,u,h,m,g,v,y,b,S,E,x,j,I,C,O,U,q,P,R,D;const r=()=>{Wn(this,Ls,mo).call(this,{type:"continue"})};ot(this,Aa,VS({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,$)=>{Wn(this,Ls,mo).call(this,{type:"failed",failureCount:k,error:$})},onPause:()=>{Wn(this,Ls,mo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>de(this,sr).canRun(this)}));const s=this.state.status==="pending",l=!de(this,Aa).canStart();try{if(s)r();else{Wn(this,Ls,mo).call(this,{type:"pending",variables:t,isPaused:l}),await((u=(c=de(this,sr).config).onMutate)==null?void 0:u.call(c,t,this));const $=await((m=(h=this.options).onMutate)==null?void 0:m.call(h,t));$!==this.state.context&&Wn(this,Ls,mo).call(this,{type:"pending",context:$,variables:t,isPaused:l})}const k=await de(this,Aa).start();return await((v=(g=de(this,sr).config).onSuccess)==null?void 0:v.call(g,k,t,this.state.context,this)),await((b=(y=this.options).onSuccess)==null?void 0:b.call(y,k,t,this.state.context)),await((E=(S=de(this,sr).config).onSettled)==null?void 0:E.call(S,k,null,this.state.variables,this.state.context,this)),await((j=(x=this.options).onSettled)==null?void 0:j.call(x,k,null,t,this.state.context)),Wn(this,Ls,mo).call(this,{type:"success",data:k}),k}catch(k){try{throw await((C=(I=de(this,sr).config).onError)==null?void 0:C.call(I,k,t,this.state.context,this)),await((U=(O=this.options).onError)==null?void 0:U.call(O,k,t,this.state.context)),await((P=(q=de(this,sr).config).onSettled)==null?void 0:P.call(q,void 0,k,this.state.variables,this.state.context,this)),await((D=(R=this.options).onSettled)==null?void 0:D.call(R,void 0,k,t,this.state.context)),k}finally{Wn(this,Ls,mo).call(this,{type:"error",error:k})}}finally{de(this,sr).runNext(this)}}},Os=new WeakMap,sr=new WeakMap,Aa=new WeakMap,Ls=new WeakSet,mo=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ir.batch(()=>{de(this,Os).forEach(s=>{s.onMutationUpdate(t)}),de(this,sr).notify({mutation:this,type:"updated",action:t})})},s1);function XD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Si,us,id,i1,JD=(i1=class extends um{constructor(e={}){super();Et(this,Si);Et(this,us);Et(this,id);this.config=e,ot(this,Si,new Set),ot(this,us,new Map),ot(this,id,0)}build(e,t,r){const s=new YD({mutationCache:this,mutationId:++Mh(this,id)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){de(this,Si).add(e);const t=qh(e);if(typeof t=="string"){const r=de(this,us).get(t);r?r.push(e):de(this,us).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(de(this,Si).delete(e)){const t=qh(e);if(typeof t=="string"){const r=de(this,us).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&de(this,us).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=qh(e);if(typeof t=="string"){const r=de(this,us).get(t),s=r==null?void 0:r.find(l=>l.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=qh(e);if(typeof t=="string"){const s=(r=de(this,us).get(t))==null?void 0:r.find(l=>l!==e&&l.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ir.batch(()=>{de(this,Si).forEach(e=>{this.notify({type:"removed",mutation:e})}),de(this,Si).clear(),de(this,us).clear()})}getAll(){return Array.from(de(this,Si))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>D_(t,r))}findAll(e={}){return this.getAll().filter(t=>D_(e,t))}notify(e){ir.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ir.batch(()=>Promise.all(e.map(t=>t.continue().catch(ls))))}},Si=new WeakMap,us=new WeakMap,id=new WeakMap,i1);function qh(n){var e;return(e=n.options.scope)==null?void 0:e.id}function M_(n){return{onFetch:(e,t)=>{var g,v,y,b,S;const r=e.options,s=(y=(v=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:v.fetchMore)==null?void 0:y.direction,l=((b=e.state.data)==null?void 0:b.pages)||[],c=((S=e.state.data)==null?void 0:S.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const m=async()=>{let E=!1;const x=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?E=!0:e.signal.addEventListener("abort",()=>{E=!0}),e.signal)})},j=OS(e.options,e.fetchOptions),I=async(C,O,U)=>{if(E)return Promise.reject();if(O==null&&C.pages.length)return Promise.resolve(C);const P=(()=>{const $={client:e.client,queryKey:e.queryKey,pageParam:O,direction:U?"backward":"forward",meta:e.options.meta};return x($),$})(),R=await j(P),{maxPages:D}=e.options,k=U?VD:FD;return{pages:k(C.pages,R,D),pageParams:k(C.pageParams,O,D)}};if(s&&l.length){const C=s==="backward",O=C?ZD:F_,U={pages:l,pageParams:c},q=O(r,U);u=await I(U,q,C)}else{const C=n??l.length;do{const O=h===0?c[0]??r.initialPageParam:F_(r,u);if(h>0&&O==null)break;u=await I(u,O),h++}while(h<C)}return u};e.options.persister?e.fetchFn=()=>{var E,x;return(x=(E=e.options).persister)==null?void 0:x.call(E,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=m}}}function F_(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function ZD(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var nn,Eo,bo,nc,rc,So,sc,ic,o1,eO=(o1=class{constructor(n={}){Et(this,nn);Et(this,Eo);Et(this,bo);Et(this,nc);Et(this,rc);Et(this,So);Et(this,sc);Et(this,ic);ot(this,nn,n.queryCache||new QD),ot(this,Eo,n.mutationCache||new JD),ot(this,bo,n.defaultOptions||{}),ot(this,nc,new Map),ot(this,rc,new Map),ot(this,So,0)}mount(){Mh(this,So)._++,de(this,So)===1&&(ot(this,sc,LS.subscribe(async n=>{n&&(await this.resumePausedMutations(),de(this,nn).onFocus())})),ot(this,ic,If.subscribe(async n=>{n&&(await this.resumePausedMutations(),de(this,nn).onOnline())})))}unmount(){var n,e;Mh(this,So)._--,de(this,So)===0&&((n=de(this,sc))==null||n.call(this),ot(this,sc,void 0),(e=de(this,ic))==null||e.call(this),ot(this,ic,void 0))}isFetching(n){return de(this,nn).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return de(this,Eo).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=de(this,nn).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=de(this,nn).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(vv(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return de(this,nn).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=de(this,nn).get(r.queryHash),l=s==null?void 0:s.state.data,c=RD(e,l);if(c!==void 0)return de(this,nn).build(this,r).setData(c,{...t,manual:!0})}setQueriesData(n,e,t){return ir.batch(()=>de(this,nn).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=de(this,nn).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=de(this,nn);ir.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=de(this,nn);return ir.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=ir.batch(()=>de(this,nn).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(ls).catch(ls)}invalidateQueries(n,e={}){return ir.batch(()=>(de(this,nn).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=ir.batch(()=>de(this,nn).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let l=s.fetch(void 0,t);return t.throwOnError||(l=l.catch(ls)),s.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(r).then(ls)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=de(this,nn).build(this,e);return t.isStaleByTime(vv(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(ls).catch(ls)}fetchInfiniteQuery(n){return n.behavior=M_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(ls).catch(ls)}ensureInfiniteQueryData(n){return n.behavior=M_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return If.isOnline()?de(this,Eo).resumePausedMutations():Promise.resolve()}getQueryCache(){return de(this,nn)}getMutationCache(){return de(this,Eo)}getDefaultOptions(){return de(this,bo)}setDefaultOptions(n){ot(this,bo,n)}setQueryDefaults(n,e){de(this,nc).set(zu(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...de(this,nc).values()],t={};return e.forEach(r=>{Bu(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){de(this,rc).set(zu(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...de(this,rc).values()],t={};return e.forEach(r=>{Bu(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...de(this,bo).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Iy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===jy&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...de(this,bo).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){de(this,nn).clear(),de(this,Eo).clear()}},nn=new WeakMap,Eo=new WeakMap,bo=new WeakMap,nc=new WeakMap,rc=new WeakMap,So=new WeakMap,sc=new WeakMap,ic=new WeakMap,o1),tO=_.createContext(void 0),nO=({client:n,children:e})=>(_.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),a.jsx(tO.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qu(){return qu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qu.apply(this,arguments)}var To;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(To||(To={}));const V_="popstate";function rO(n){n===void 0&&(n={});function e(r,s){let{pathname:l,search:c,hash:u}=r.location;return xv("",{pathname:l,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:jf(s)}return iO(e,t,null,n)}function Jt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function $S(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sO(){return Math.random().toString(36).substr(2,8)}function U_(n,e){return{usr:n.state,key:n.key,idx:e}}function xv(n,e,t,r){return t===void 0&&(t=null),qu({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Sc(e):e,{state:t,key:e&&e.key||r||sO()})}function jf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Sc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function iO(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:l=!1}=r,c=s.history,u=To.Pop,h=null,m=g();m==null&&(m=0,c.replaceState(qu({},c.state,{idx:m}),""));function g(){return(c.state||{idx:null}).idx}function v(){u=To.Pop;let x=g(),j=x==null?null:x-m;m=x,h&&h({action:u,location:E.location,delta:j})}function y(x,j){u=To.Push;let I=xv(E.location,x,j);m=g()+1;let C=U_(I,m),O=E.createHref(I);try{c.pushState(C,"",O)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(O)}l&&h&&h({action:u,location:E.location,delta:1})}function b(x,j){u=To.Replace;let I=xv(E.location,x,j);m=g();let C=U_(I,m),O=E.createHref(I);c.replaceState(C,"",O),l&&h&&h({action:u,location:E.location,delta:0})}function S(x){let j=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof x=="string"?x:jf(x);return I=I.replace(/ $/,"%20"),Jt(j,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,j)}let E={get action(){return u},get location(){return n(s,c)},listen(x){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(V_,v),h=x,()=>{s.removeEventListener(V_,v),h=null}},createHref(x){return e(s,x)},createURL:S,encodeLocation(x){let j=S(x);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:y,replace:b,go(x){return c.go(x)}};return E}var $_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})($_||($_={}));function oO(n,e,t){return t===void 0&&(t="/"),aO(n,e,t)}function aO(n,e,t,r){let s=typeof e=="string"?Sc(e):e,l=uc(s.pathname||"/",t);if(l==null)return null;let c=zS(n);lO(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let m=xO(l);u=vO(c[h],m)}return u}function zS(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(l,c,u)=>{let h={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};h.relativePath.startsWith("/")&&(Jt(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let m=jo([r,h.relativePath]),g=t.concat(h);l.children&&l.children.length>0&&(Jt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),zS(l.children,e,g,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:pO(m,l.index),routesMeta:g})};return n.forEach((l,c)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))s(l,c);else for(let h of BS(l.path))s(l,c,h)}),e}function BS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let c=BS(r.join("/")),u=[];return u.push(...c.map(h=>h===""?l:[l,h].join("/"))),s&&u.push(...c),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function lO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:gO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const cO=/^:[\w-]+$/,uO=3,dO=2,hO=1,fO=10,mO=-2,z_=n=>n==="*";function pO(n,e){let t=n.split("/"),r=t.length;return t.some(z_)&&(r+=mO),e&&(r+=dO),t.filter(s=>!z_(s)).reduce((s,l)=>s+(cO.test(l)?uO:l===""?hO:fO),r)}function gO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function vO(n,e,t){let{routesMeta:r}=n,s={},l="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],m=u===r.length-1,g=l==="/"?e:e.slice(l.length)||"/",v=wv({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},g),y=h.route;if(!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:jo([l,v.pathname]),pathnameBase:bO(jo([l,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(l=jo([l,v.pathnameBase]))}return c}function wv(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=yO(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((m,g,v)=>{let{paramName:y,isOptional:b}=g;if(y==="*"){let E=u[v]||"";c=l.slice(0,l.length-E.length).replace(/(.)\/+$/,"$1")}const S=u[v];return b&&!S?m[y]=void 0:m[y]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:n}}function yO(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),$S(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function xO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $S(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function uc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function wO(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Sc(n):n;return{pathname:t?t.startsWith("/")?t:_O(t,e):e,search:SO(r),hash:NO(s)}}function _O(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Pg(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ay(n,e){let t=EO(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Py(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Sc(n):(s=qu({},n),Jt(!s.pathname||!s.pathname.includes("?"),Pg("?","pathname","search",s)),Jt(!s.pathname||!s.pathname.includes("#"),Pg("#","pathname","hash",s)),Jt(!s.search||!s.search.includes("#"),Pg("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,u;if(c==null)u=t;else{let v=e.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),v-=1;s.pathname=y.join("/")}u=v>=0?e[v]:"/"}let h=wO(s,u),m=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(m||g)&&(h.pathname+="/"),h}const jo=n=>n.join("/").replace(/\/\/+/g,"/"),bO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),SO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,NO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function TO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const qS=["post","put","patch","delete"];new Set(qS);const CO=["get",...qS];new Set(CO);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wu(){return Wu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wu.apply(this,arguments)}const hm=_.createContext(null),WS=_.createContext(null),Mi=_.createContext(null),fm=_.createContext(null),Zs=_.createContext({outlet:null,matches:[],isDataRoute:!1}),HS=_.createContext(null);function IO(n,e){let{relative:t}=e===void 0?{}:e;Nc()||Jt(!1);let{basename:r,navigator:s}=_.useContext(Mi),{hash:l,pathname:c,search:u}=mm(n,{relative:t}),h=c;return r!=="/"&&(h=c==="/"?r:jo([r,c])),s.createHref({pathname:h,search:u,hash:l})}function Nc(){return _.useContext(fm)!=null}function Fi(){return Nc()||Jt(!1),_.useContext(fm).location}function KS(n){_.useContext(Mi).static||_.useLayoutEffect(n)}function Tc(){let{isDataRoute:n}=_.useContext(Zs);return n?BO():jO()}function jO(){Nc()||Jt(!1);let n=_.useContext(hm),{basename:e,future:t,navigator:r}=_.useContext(Mi),{matches:s}=_.useContext(Zs),{pathname:l}=Fi(),c=JSON.stringify(Ay(s,t.v7_relativeSplatPath)),u=_.useRef(!1);return KS(()=>{u.current=!0}),_.useCallback(function(m,g){if(g===void 0&&(g={}),!u.current)return;if(typeof m=="number"){r.go(m);return}let v=Py(m,JSON.parse(c),l,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:jo([e,v.pathname])),(g.replace?r.replace:r.push)(v,g.state,g)},[e,r,c,l,n])}const AO=_.createContext(null);function PO(n){let e=_.useContext(Zs).outlet;return e&&_.createElement(AO.Provider,{value:n},e)}function GS(){let{matches:n}=_.useContext(Zs),e=n[n.length-1];return e?e.params:{}}function mm(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=_.useContext(Mi),{matches:s}=_.useContext(Zs),{pathname:l}=Fi(),c=JSON.stringify(Ay(s,r.v7_relativeSplatPath));return _.useMemo(()=>Py(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function RO(n,e){return kO(n,e)}function kO(n,e,t,r){Nc()||Jt(!1);let{navigator:s}=_.useContext(Mi),{matches:l}=_.useContext(Zs),c=l[l.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let m=Fi(),g;if(e){var v;let x=typeof e=="string"?Sc(e):e;h==="/"||(v=x.pathname)!=null&&v.startsWith(h)||Jt(!1),g=x}else g=m;let y=g.pathname||"/",b=y;if(h!=="/"){let x=h.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(x.length).join("/")}let S=oO(n,{pathname:b}),E=FO(S&&S.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:jo([h,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:jo([h,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),l,t,r);return e&&E?_.createElement(fm.Provider,{value:{location:Wu({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:To.Pop}},E):E}function DO(){let n=zO(),e=TO(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),t?_.createElement("pre",{style:s},t):null,null)}const OO=_.createElement(DO,null);class LO extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?_.createElement(Zs.Provider,{value:this.props.routeContext},_.createElement(HS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MO(n){let{routeContext:e,match:t,children:r}=n,s=_.useContext(hm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(Zs.Provider,{value:e},r)}function FO(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=r)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,u=(s=t)==null?void 0:s.errors;if(u!=null){let g=c.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);g>=0||Jt(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let v=c[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=g),v.route.id){let{loaderData:y,errors:b}=t,S=v.route.loader&&y[v.route.id]===void 0&&(!b||b[v.route.id]===void 0);if(v.route.lazy||S){h=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((g,v,y)=>{let b,S=!1,E=null,x=null;t&&(b=u&&v.route.id?u[v.route.id]:void 0,E=v.route.errorElement||OO,h&&(m<0&&y===0?(qO("route-fallback"),S=!0,x=null):m===y&&(S=!0,x=v.route.hydrateFallbackElement||null)));let j=e.concat(c.slice(0,y+1)),I=()=>{let C;return b?C=E:S?C=x:v.route.Component?C=_.createElement(v.route.Component,null):v.route.element?C=v.route.element:C=g,_.createElement(MO,{match:v,routeContext:{outlet:g,matches:j,isDataRoute:t!=null},children:C})};return t&&(v.route.ErrorBoundary||v.route.errorElement||y===0)?_.createElement(LO,{location:t.location,revalidation:t.revalidation,component:E,error:b,children:I(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):I()},null)}var QS=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(QS||{}),YS=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(YS||{});function VO(n){let e=_.useContext(hm);return e||Jt(!1),e}function UO(n){let e=_.useContext(WS);return e||Jt(!1),e}function $O(n){let e=_.useContext(Zs);return e||Jt(!1),e}function XS(n){let e=$O(),t=e.matches[e.matches.length-1];return t.route.id||Jt(!1),t.route.id}function zO(){var n;let e=_.useContext(HS),t=UO(),r=XS();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function BO(){let{router:n}=VO(QS.UseNavigateStable),e=XS(YS.UseNavigateStable),t=_.useRef(!1);return KS(()=>{t.current=!0}),_.useCallback(function(s,l){l===void 0&&(l={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Wu({fromRouteId:e},l)))},[n,e])}const B_={};function qO(n,e,t){B_[n]||(B_[n]=!0)}function cf(n){let{to:e,replace:t,state:r,relative:s}=n;Nc()||Jt(!1);let{future:l,static:c}=_.useContext(Mi),{matches:u}=_.useContext(Zs),{pathname:h}=Fi(),m=Tc(),g=Py(e,Ay(u,l.v7_relativeSplatPath),h,s==="path"),v=JSON.stringify(g);return _.useEffect(()=>m(JSON.parse(v),{replace:t,state:r,relative:s}),[m,v,s,t,r]),null}function WO(n){return PO(n.context)}function zt(n){Jt(!1)}function HO(n){let{basename:e="/",children:t=null,location:r,navigationType:s=To.Pop,navigator:l,static:c=!1,future:u}=n;Nc()&&Jt(!1);let h=e.replace(/^\/*/,"/"),m=_.useMemo(()=>({basename:h,navigator:l,static:c,future:Wu({v7_relativeSplatPath:!1},u)}),[h,u,l,c]);typeof r=="string"&&(r=Sc(r));let{pathname:g="/",search:v="",hash:y="",state:b=null,key:S="default"}=r,E=_.useMemo(()=>{let x=uc(g,h);return x==null?null:{location:{pathname:x,search:v,hash:y,state:b,key:S},navigationType:s}},[h,g,v,y,b,S,s]);return E==null?null:_.createElement(Mi.Provider,{value:m},_.createElement(fm.Provider,{children:t,value:E}))}function KO(n){let{children:e,location:t}=n;return RO(_v(e),t)}new Promise(()=>{});function _v(n,e){e===void 0&&(e=[]);let t=[];return _.Children.forEach(n,(r,s)=>{if(!_.isValidElement(r))return;let l=[...e,s];if(r.type===_.Fragment){t.push.apply(t,_v(r.props.children,l));return}r.type!==zt&&Jt(!1),!r.props.index||!r.props.children||Jt(!1);let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=_v(r.props.children,l)),t.push(c)}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Af(){return Af=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Af.apply(this,arguments)}function JS(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,l;for(l=0;l<r.length;l++)s=r[l],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function GO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function QO(n,e){return n.button===0&&(!e||e==="_self")&&!GO(n)}function Ev(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function YO(n,e){let t=Ev(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(l=>{t.append(s,l)})}),t}const XO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],JO=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],ZO="6";try{window.__reactRouterVersion=ZO}catch{}const eL=_.createContext({isTransitioning:!1}),tL="startTransition",q_=l1[tL];function nL(n){let{basename:e,children:t,future:r,window:s}=n,l=_.useRef();l.current==null&&(l.current=rO({window:s,v5Compat:!0}));let c=l.current,[u,h]=_.useState({action:c.action,location:c.location}),{v7_startTransition:m}=r||{},g=_.useCallback(v=>{m&&q_?q_(()=>h(v)):h(v)},[h,m]);return _.useLayoutEffect(()=>c.listen(g),[c,g]),_.createElement(HO,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:c,future:r})}const rL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yn=_.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:l,replace:c,state:u,target:h,to:m,preventScrollReset:g,unstable_viewTransition:v}=e,y=JS(e,XO),{basename:b}=_.useContext(Mi),S,E=!1;if(typeof m=="string"&&sL.test(m)&&(S=m,rL))try{let C=new URL(window.location.href),O=m.startsWith("//")?new URL(C.protocol+m):new URL(m),U=uc(O.pathname,b);O.origin===C.origin&&U!=null?m=U+O.search+O.hash:E=!0}catch{}let x=IO(m,{relative:s}),j=oL(m,{replace:c,state:u,target:h,preventScrollReset:g,relative:s,unstable_viewTransition:v});function I(C){r&&r(C),C.defaultPrevented||j(C)}return _.createElement("a",Af({},y,{href:S||x,onClick:E||l?r:I,ref:t,target:h}))}),W_=_.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:s=!1,className:l="",end:c=!1,style:u,to:h,unstable_viewTransition:m,children:g}=e,v=JS(e,JO),y=mm(h,{relative:v.relative}),b=Fi(),S=_.useContext(WS),{navigator:E,basename:x}=_.useContext(Mi),j=S!=null&&aL(y)&&m===!0,I=E.encodeLocation?E.encodeLocation(y).pathname:y.pathname,C=b.pathname,O=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;s||(C=C.toLowerCase(),O=O?O.toLowerCase():null,I=I.toLowerCase()),O&&x&&(O=uc(O,x)||O);const U=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let q=C===I||!c&&C.startsWith(I)&&C.charAt(U)==="/",P=O!=null&&(O===I||!c&&O.startsWith(I)&&O.charAt(I.length)==="/"),R={isActive:q,isPending:P,isTransitioning:j},D=q?r:void 0,k;typeof l=="function"?k=l(R):k=[l,q?"active":null,P?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let $=typeof u=="function"?u(R):u;return _.createElement(Yn,Af({},v,{"aria-current":D,className:k,ref:t,style:$,to:h,unstable_viewTransition:m}),typeof g=="function"?g(R):g)});var bv;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(bv||(bv={}));var H_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(H_||(H_={}));function iL(n){let e=_.useContext(hm);return e||Jt(!1),e}function oL(n,e){let{target:t,replace:r,state:s,preventScrollReset:l,relative:c,unstable_viewTransition:u}=e===void 0?{}:e,h=Tc(),m=Fi(),g=mm(n,{relative:c});return _.useCallback(v=>{if(QO(v,t)){v.preventDefault();let y=r!==void 0?r:jf(m)===jf(g);h(n,{replace:y,state:s,preventScrollReset:l,relative:c,unstable_viewTransition:u})}},[m,h,g,r,s,t,n,l,c,u])}function cd(n){let e=_.useRef(Ev(n)),t=_.useRef(!1),r=Fi(),s=_.useMemo(()=>YO(r.search,t.current?null:e.current),[r.search]),l=Tc(),c=_.useCallback((u,h)=>{const m=Ev(typeof u=="function"?u(s):u);t.current=!0,l("?"+m,h)},[l,s]);return[s,c]}function aL(n,e){e===void 0&&(e={});let t=_.useContext(eL);t==null&&Jt(!1);let{basename:r}=iL(bv.useViewTransitionState),s=mm(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=uc(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=uc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return wv(s.pathname,c)!=null||wv(s.pathname,l)!=null}const lL=()=>{};var K_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},cL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],u=n[t++],h=((s&7)<<18|(l&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},eN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,u=c?n[s+1]:0,h=s+2<n.length,m=h?n[s+2]:0,g=l>>2,v=(l&3)<<4|u>>4;let y=(u&15)<<2|m>>6,b=m&63;h||(b=64,c||(y=64)),r.push(t[g],t[v],t[y],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ZS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||u==null||m==null||v==null)throw new uL;const y=l<<2|u>>4;if(r.push(y),m!==64){const b=u<<4&240|m>>2;if(r.push(b),v!==64){const S=m<<6&192|v;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class uL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dL=function(n){const e=ZS(n);return eN.encodeByteArray(e,!0)},Pf=function(n){return dL(n).replace(/\./g,"")},tN=function(n){try{return eN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=()=>hL().__FIREBASE_DEFAULTS__,mL=()=>{if(typeof process>"u"||typeof K_>"u")return;const n=K_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&tN(n[1]);return e&&JSON.parse(e)},pm=()=>{try{return lL()||fL()||mL()||pL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},nN=n=>{var e,t;return(t=(e=pm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},gL=n=>{const e=nN(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},rN=()=>{var n;return(n=pm())===null||n===void 0?void 0:n.config},sN=n=>{var e;return(e=pm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ry(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Pf(JSON.stringify(t)),Pf(JSON.stringify(c)),""].join(".")}const Pu={};function xL(){const n={prod:[],emulator:[]};for(const e of Object.keys(Pu))Pu[e]?n.emulator.push(e):n.prod.push(e);return n}function wL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let G_=!1;function iN(n,e){if(typeof window>"u"||typeof document>"u"||!Ka(window.location.host)||Pu[n]===e||Pu[n]||G_)return;Pu[n]=e;function t(y){return`__firebase__banner__${y}`}const r="__firebase__banner",l=xL().prod.length>0;function c(){const y=document.getElementById(r);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function h(y,b){y.setAttribute("width","24"),y.setAttribute("id",b),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function m(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{G_=!0,c()},y}function g(y,b){y.setAttribute("id",b),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function v(){const y=wL(r),b=t("text"),S=document.getElementById(b)||document.createElement("span"),E=t("learnmore"),x=document.getElementById(E)||document.createElement("a"),j=t("preprendIcon"),I=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const C=y.element;u(C),g(x,E);const O=m();h(I,j),C.append(I,S,x,O),document.body.appendChild(C)}l?(S.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _L(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xn())}function EL(){var n;const e=(n=pm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function NL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TL(){const n=Xn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function CL(){return!EL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IL(){try{return typeof indexedDB=="object"}catch{return!1}}function jL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL="FirebaseError";class ei extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=AL,Object.setPrototypeOf(this,ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ud.prototype.create)}}class ud{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?PL(l,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new ei(s,u,r)}}function PL(n,e){return n.replace(RL,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const RL=/\{\$([^}]+)}/g;function kL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ma(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const l=n[s],c=e[s];if(Q_(l)&&Q_(c)){if(!Ma(l,c))return!1}else if(l!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Q_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function wu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function DL(n,e){const t=new OL(n,e);return t.subscribe.bind(t)}class OL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");LL(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Rg),s.error===void 0&&(s.error=Rg),s.complete===void 0&&(s.complete=Rg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Rg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(n){return n&&n._delegate?n._delegate:n}class zo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new vL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VL(e))try{this.getOrInitializeService({instanceIdentifier:ba})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ba){return this.instances.has(e)}getOptions(e=ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(l);r===u&&c.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ba){return this.component?this.component.multipleInstances?e:ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FL(n){return n===ba?void 0:n}function VL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ML(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(dt||(dt={}));const $L={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},zL=dt.INFO,BL={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},qL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=BL[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ky{constructor(e){this.name=e,this._logLevel=zL,this._logHandler=qL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$L[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const WL=(n,e)=>e.some(t=>n instanceof t);let Y_,X_;function HL(){return Y_||(Y_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KL(){return X_||(X_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oN=new WeakMap,Sv=new WeakMap,aN=new WeakMap,kg=new WeakMap,Dy=new WeakMap;function GL(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ao(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&oN.set(t,n)}).catch(()=>{}),Dy.set(e,n),e}function QL(n){if(Sv.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Sv.set(n,e)}let Nv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Sv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||aN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ao(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function YL(n){Nv=n(Nv)}function XL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Dg(this),e,...t);return aN.set(r,e.sort?e.sort():[e]),Ao(r)}:KL().includes(n)?function(...e){return n.apply(Dg(this),e),Ao(oN.get(this))}:function(...e){return Ao(n.apply(Dg(this),e))}}function JL(n){return typeof n=="function"?XL(n):(n instanceof IDBTransaction&&QL(n),WL(n,HL())?new Proxy(n,Nv):n)}function Ao(n){if(n instanceof IDBRequest)return GL(n);if(kg.has(n))return kg.get(n);const e=JL(n);return e!==n&&(kg.set(n,e),Dy.set(e,n)),e}const Dg=n=>Dy.get(n);function ZL(n,e,{blocked:t,upgrade:r,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),u=Ao(c);return r&&c.addEventListener("upgradeneeded",h=>{r(Ao(c.result),h.oldVersion,h.newVersion,Ao(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{l&&h.addEventListener("close",()=>l()),s&&h.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),u}const e4=["get","getKey","getAll","getAllKeys","count"],t4=["put","add","delete","clear"],Og=new Map;function J_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Og.get(e))return Og.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=t4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||e4.includes(t)))return;const l=async function(c,...u){const h=this.transaction(c,s?"readwrite":"readonly");let m=h.store;return r&&(m=m.index(u.shift())),(await Promise.all([m[t](...u),s&&h.done]))[0]};return Og.set(e,l),l}YL(n=>({...n,get:(e,t,r)=>J_(e,t)||n.get(e,t,r),has:(e,t)=>!!J_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(r4(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function r4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tv="@firebase/app",Z_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new ky("@firebase/app"),s4="@firebase/app-compat",i4="@firebase/analytics-compat",o4="@firebase/analytics",a4="@firebase/app-check-compat",l4="@firebase/app-check",c4="@firebase/auth",u4="@firebase/auth-compat",d4="@firebase/database",h4="@firebase/data-connect",f4="@firebase/database-compat",m4="@firebase/functions",p4="@firebase/functions-compat",g4="@firebase/installations",v4="@firebase/installations-compat",y4="@firebase/messaging",x4="@firebase/messaging-compat",w4="@firebase/performance",_4="@firebase/performance-compat",E4="@firebase/remote-config",b4="@firebase/remote-config-compat",S4="@firebase/storage",N4="@firebase/storage-compat",T4="@firebase/firestore",C4="@firebase/ai",I4="@firebase/firestore-compat",j4="firebase",A4="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="[DEFAULT]",P4={[Tv]:"fire-core",[s4]:"fire-core-compat",[o4]:"fire-analytics",[i4]:"fire-analytics-compat",[l4]:"fire-app-check",[a4]:"fire-app-check-compat",[c4]:"fire-auth",[u4]:"fire-auth-compat",[d4]:"fire-rtdb",[h4]:"fire-data-connect",[f4]:"fire-rtdb-compat",[m4]:"fire-fn",[p4]:"fire-fn-compat",[g4]:"fire-iid",[v4]:"fire-iid-compat",[y4]:"fire-fcm",[x4]:"fire-fcm-compat",[w4]:"fire-perf",[_4]:"fire-perf-compat",[E4]:"fire-rc",[b4]:"fire-rc-compat",[S4]:"fire-gcs",[N4]:"fire-gcs-compat",[T4]:"fire-fst",[I4]:"fire-fst-compat",[C4]:"fire-vertex","fire-js":"fire-js",[j4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=new Map,R4=new Map,Iv=new Map;function eE(n,e){try{n.container.addComponent(e)}catch(t){Pi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fa(n){const e=n.name;if(Iv.has(e))return Pi.debug(`There were multiple attempts to register component ${e}.`),!1;Iv.set(e,n);for(const t of Rf.values())eE(t,n);for(const t of R4.values())eE(t,n);return!0}function gm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Hr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Po=new ud("app","Firebase",k4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Po.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=A4;function lN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cv,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Po.create("bad-app-name",{appName:String(s)});if(t||(t=rN()),!t)throw Po.create("no-options");const l=Rf.get(s);if(l){if(Ma(t,l.options)&&Ma(r,l.config))return l;throw Po.create("duplicate-app",{appName:s})}const c=new UL(s);for(const h of Iv.values())c.addComponent(h);const u=new D4(t,r,c);return Rf.set(s,u),u}function cN(n=Cv){const e=Rf.get(n);if(!e&&n===Cv&&rN())return lN();if(!e)throw Po.create("no-app",{appName:n});return e}function Vs(n,e,t){var r;let s=(r=P4[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const u=[`Unable to register library "${s}" with version "${e}":`];l&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pi.warn(u.join(" "));return}Fa(new zo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="firebase-heartbeat-database",L4=1,Hu="firebase-heartbeat-store";let Lg=null;function uN(){return Lg||(Lg=ZL(O4,L4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Hu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Po.create("idb-open",{originalErrorMessage:n.message})})),Lg}async function M4(n){try{const t=(await uN()).transaction(Hu),r=await t.objectStore(Hu).get(dN(n));return await t.done,r}catch(e){if(e instanceof ei)Pi.warn(e.message);else{const t=Po.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pi.warn(t.message)}}}async function tE(n,e){try{const r=(await uN()).transaction(Hu,"readwrite");await r.objectStore(Hu).put(e,dN(n)),await r.done}catch(t){if(t instanceof ei)Pi.warn(t.message);else{const r=Po.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Pi.warn(r.message)}}}function dN(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=1024,V4=30;class U4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new z4(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=nE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>V4){const c=B4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Pi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nE(),{heartbeatsToSend:r,unsentEntries:s}=$4(this._heartbeatsCache.heartbeats),l=Pf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Pi.warn(t),""}}}function nE(){return new Date().toISOString().substring(0,10)}function $4(n,e=F4){const t=[];let r=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),rE(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),rE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class z4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IL()?jL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await M4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return tE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return tE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rE(n){return Pf(JSON.stringify({version:2,heartbeats:n})).length}function B4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(n){Fa(new zo("platform-logger",e=>new n4(e),"PRIVATE")),Fa(new zo("heartbeat",e=>new U4(e),"PRIVATE")),Vs(Tv,Z_,n),Vs(Tv,Z_,"esm2017"),Vs("fire-js","")}q4("");var Qn=function(){return Qn=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Qn.apply(this,arguments)};function Cc(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function hN(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,l;r<s;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return n.concat(l||Array.prototype.slice.call(e))}function fN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W4=fN,mN=new ud("auth","Firebase",fN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=new ky("@firebase/auth");function H4(n,...e){kf.logLevel<=dt.WARN&&kf.warn(`Auth (${Ga}): ${n}`,...e)}function uf(n,...e){kf.logLevel<=dt.ERROR&&kf.error(`Auth (${Ga}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(n,...e){throw Oy(n,...e)}function Us(n,...e){return Oy(n,...e)}function pN(n,e,t){const r=Object.assign(Object.assign({},W4()),{[e]:t});return new ud("auth","Firebase",r).create(e,{appName:n.name})}function Ro(n){return pN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Oy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return mN.create(n,...e)}function Qe(n,e,...t){if(!n)throw Oy(e,...t)}function Ti(n){const e="INTERNAL ASSERTION FAILED: "+n;throw uf(e),new Error(e)}function Ri(n,e){n||Ti(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function K4(){return sE()==="http:"||sE()==="https:"}function sE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K4()||SL()||"connection"in navigator)?navigator.onLine:!0}function Q4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ri(t>e,"Short delay should be less than long delay!"),this.isMobile=_L()||NL()}get(){return G4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(n,e){Ri(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],J4=new hd(3e4,6e4);function Qa(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Yo(n,e,t,r,s={}){return vN(n,s,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const u=dd(Object.assign({key:n.config.apiKey},c)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:h},l);return bL()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Ka(n.emulatorConfig.host)&&(m.credentials="include"),gN.fetch()(await yN(n,n.config.apiHost,t,u),m)})}async function vN(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Y4),e);try{const s=new eM(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Wh(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const u=l.ok?c.errorMessage:c.error.message,[h,m]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wh(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Wh(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw Wh(n,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw pN(n,g,m);vs(n,g)}}catch(s){if(s instanceof ei)throw s;vs(n,"network-request-failed",{message:String(s)})}}async function vm(n,e,t,r,s={}){const l=await Yo(n,e,t,r,s);return"mfaPendingCredential"in l&&vs(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function yN(n,e,t,r){const s=`${e}${t}?${r}`,l=n,c=l.config.emulator?Ly(n.config,s):`${n.config.apiScheme}://${s}`;return X4.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function Z4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Us(this.auth,"network-request-failed")),J4.get())})}}function Wh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Us(n,e,r);return s.customData._tokenResponse=t,s}function iE(n){return n!==void 0&&n.enterprise!==void 0}class tM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Z4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nM(n,e){return Yo(n,"GET","/v2/recaptchaConfig",Qa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(n,e){return Yo(n,"POST","/v1/accounts:delete",e)}async function Df(n,e){return Yo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sM(n,e=!1){const t=pn(n),r=await t.getIdToken(e),s=My(r);Qe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:r,authTime:Ru(Mg(s.auth_time)),issuedAtTime:Ru(Mg(s.iat)),expirationTime:Ru(Mg(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Mg(n){return Number(n)*1e3}function My(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return uf("JWT malformed, contained fewer than 3 sections"),null;try{const s=tN(t);return s?JSON.parse(s):(uf("Failed to decode base64 JWT payload"),null)}catch(s){return uf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function oE(n){const e=My(n);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ei&&iM(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function iM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Of(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Ku(n,Df(t,{idToken:r}));Qe(s==null?void 0:s.users.length,t,"internal-error");const l=s.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?xN(l.providerUserInfo):[],u=lM(n.providerData,c),h=n.isAnonymous,m=!(n.email&&l.passwordHash)&&!(u!=null&&u.length),g=h?m:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Av(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function aM(n){const e=pn(n);await Of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lM(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function xN(n){return n.map(e=>{var{providerId:t}=e,r=Cc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM(n,e){const t=await vN(n,{},async()=>{const r=dd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await yN(n,s,"/v1/token",`key=${l}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return n.emulatorConfig&&Ka(n.emulatorConfig.host)&&(h.credentials="include"),gN.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function uM(n,e){return Yo(n,"POST","/v2/accounts:revokeToken",Qa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const t=oE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:l}=await cM(e,t);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:l}=t,c=new Kl;return r&&(Qe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Qe(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(Qe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kl,this.toJSON())}_performRefresh(){return Ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(n,e){Qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class hs{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,l=Cc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Av(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ku(this,this.stsTokenManager.getToken(this.auth,e));return Qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sM(this,e)}reload(){return aM(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Of(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hr(this.auth.app))return Promise.reject(Ro(this.auth));const e=await this.getIdToken();return await Ku(this,rM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,l,c,u,h,m,g;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(s=t.email)!==null&&s!==void 0?s:void 0,b=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,S=(c=t.photoURL)!==null&&c!==void 0?c:void 0,E=(u=t.tenantId)!==null&&u!==void 0?u:void 0,x=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,j=(m=t.createdAt)!==null&&m!==void 0?m:void 0,I=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:C,emailVerified:O,isAnonymous:U,providerData:q,stsTokenManager:P}=t;Qe(C&&P,e,"internal-error");const R=Kl.fromJSON(this.name,P);Qe(typeof C=="string",e,"internal-error"),fo(v,e.name),fo(y,e.name),Qe(typeof O=="boolean",e,"internal-error"),Qe(typeof U=="boolean",e,"internal-error"),fo(b,e.name),fo(S,e.name),fo(E,e.name),fo(x,e.name),fo(j,e.name),fo(I,e.name);const D=new hs({uid:C,auth:e,email:y,emailVerified:O,displayName:v,isAnonymous:U,photoURL:S,phoneNumber:b,tenantId:E,stsTokenManager:R,createdAt:j,lastLoginAt:I});return q&&Array.isArray(q)&&(D.providerData=q.map(k=>Object.assign({},k))),x&&(D._redirectEventId=x),D}static async _fromIdTokenResponse(e,t,r=!1){const s=new Kl;s.updateFromServerResponse(t);const l=new hs({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Of(l),l}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Qe(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?xN(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),u=new Kl;u.updateFromIdToken(r);const h=new hs({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Av(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(h,m),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=new Map;function Ci(n){Ri(n instanceof Function,"Expected a class definition");let e=aE.get(n);return e?(Ri(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,aE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wN.type="NONE";const lE=wN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(n,e,t){return`firebase:${n}:${e}:${t}`}class Gl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=df(this.userKey,s.apiKey,l),this.fullPersistenceKey=df("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Df(this.auth,{idToken:e}).catch(()=>{});return t?hs._fromGetAccountInfoResponse(this.auth,t,e):null}return hs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Gl(Ci(lE),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=s[0]||Ci(lE);const c=df(r,e.config.apiKey,e.name);let u=null;for(const m of t)try{const g=await m._get(c);if(g){let v;if(typeof g=="string"){const y=await Df(e,{idToken:g}).catch(()=>{});if(!y)break;v=await hs._fromGetAccountInfoResponse(e,y,g)}else v=hs._fromJSON(e,g);m!==l&&(u=v),l=m;break}}catch{}const h=s.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!h.length?new Gl(l,e,r):(l=h[0],u&&await l._set(c,u.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Gl(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_N(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TN(e))return"Blackberry";if(CN(e))return"Webos";if(EN(e))return"Safari";if((e.includes("chrome/")||bN(e))&&!e.includes("edge/"))return"Chrome";if(NN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _N(n=Xn()){return/firefox\//i.test(n)}function EN(n=Xn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bN(n=Xn()){return/crios\//i.test(n)}function SN(n=Xn()){return/iemobile/i.test(n)}function NN(n=Xn()){return/android/i.test(n)}function TN(n=Xn()){return/blackberry/i.test(n)}function CN(n=Xn()){return/webos/i.test(n)}function Fy(n=Xn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dM(n=Xn()){var e;return Fy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hM(){return TL()&&document.documentMode===10}function IN(n=Xn()){return Fy(n)||NN(n)||CN(n)||TN(n)||/windows phone/i.test(n)||SN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(n,e=[]){let t;switch(n){case"Browser":t=cE(Xn());break;case"Worker":t=`${cE(Xn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ga}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,u)=>{try{const h=e(l);c(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(n,e={}){return Yo(n,"GET","/v2/passwordPolicy",Qa(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=6;class gM{constructor(e){var t,r,s,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:pM,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,l,c,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(l=h.containsUppercaseLetter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uE(this),this.idTokenSubscription=new uE(this),this.beforeStateQueue=new fM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ci(t)),this._initializationPromise=this.queue(async()=>{var r,s,l;if(!this._deleted&&(this.persistenceManager=await Gl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Df(this,{idToken:e}),r=await hs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Hr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&(h!=null&&h.user)&&(s=h.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Of(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Q4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hr(this.app))return Promise.reject(Ro(this));const t=e?pn(e):null;return t&&Qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hr(this.app)?Promise.reject(Ro(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hr(this.app)?Promise.reject(Ro(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mM(this),t=new gM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ud("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await uM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ci(e)||this._popupRedirectResolver;Qe(t,this,"argument-error"),this.redirectPersistenceManager=await Gl.create(this,[Ci(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(u,this,"internal-error"),u.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,s);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&H4(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ic(n){return pn(n)}class uE{constructor(e){this.auth=e,this.observer=null,this.addObserver=DL(t=>this.observer=t)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yM(n){ym=n}function AN(n){return ym.loadJS(n)}function xM(){return ym.recaptchaEnterpriseScript}function wM(){return ym.gapiScript}function _M(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class EM{constructor(){this.enterprise=new bM}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class bM{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const SM="recaptcha-enterprise",PN="NO_RECAPTCHA";class NM{constructor(e){this.type=SM,this.auth=Ic(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,u)=>{nM(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const m=new tM(h);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(h=>{u(h)})})}function s(l,c,u){const h=window.grecaptcha;iE(h)?h.enterprise.ready(()=>{h.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(PN)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new EM().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(u=>{if(!t&&iE(window.grecaptcha))s(u,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=xM();h.length!==0&&(h+=u),AN(h).then(()=>{s(u,l,c)}).catch(m=>{c(m)})}}).catch(u=>{c(u)})})}}async function dE(n,e,t,r=!1,s=!1){const l=new NM(n);let c;if(s)c=PN;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,m=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function hE(n,e,t,r,s){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await dE(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await dE(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(n,e){const t=gm(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(Ma(l,e??{}))return s;vs(s,"already-initialized")}return t.initialize({options:e})}function CM(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ci);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function IM(n,e,t){const r=Ic(n);Qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,l=RN(e),{host:c,port:u}=jM(e),h=u===null?"":`:${u}`,m={url:`${l}//${c}${h}/`},g=Object.freeze({host:c,port:u,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Qe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Qe(Ma(m,r.config.emulator)&&Ma(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Ka(c)?(Ry(`${l}//${c}${h}`),iN("Auth",!0)):AM()}function RN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function jM(n){const e=RN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:fE(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:fE(c)}}}function fE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function AM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ti("not implemented")}_getIdTokenResponse(e){return Ti("not implemented")}_linkToIdToken(e,t){return Ti("not implemented")}_getReauthenticationResolver(e){return Ti("not implemented")}}async function PM(n,e){return Yo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(n,e){return vm(n,"POST","/v1/accounts:signInWithPassword",Qa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(n,e){return vm(n,"POST","/v1/accounts:signInWithEmailLink",Qa(n,e))}async function DM(n,e){return vm(n,"POST","/v1/accounts:signInWithEmailLink",Qa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends Vy{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Gu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Gu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hE(e,t,"signInWithPassword",RM);case"emailLink":return kM(e,{email:this._email,oobCode:this._password});default:vs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hE(e,r,"signUpPassword",PM);case"emailLink":return DM(e,{idToken:t,email:this._email,oobCode:this._password});default:vs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(n,e){return vm(n,"POST","/v1/accounts:signInWithIdp",Qa(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM="http://localhost";class Va extends Vy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,l=Cc(t,["providerId","signInMethod"]);if(!r||!s)return null;const c=new Va(r,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ql(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ql(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ql(e,t)}buildRequest(){const e={requestUri:OM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MM(n){const e=xu(wu(n)).link,t=e?xu(wu(e)).deep_link_id:null,r=xu(wu(n)).deep_link_id;return(r?xu(wu(r)).link:null)||r||t||e||n}class Uy{constructor(e){var t,r,s,l,c,u;const h=xu(wu(e)),m=(t=h.apiKey)!==null&&t!==void 0?t:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,v=LM((s=h.mode)!==null&&s!==void 0?s:null);Qe(m&&g&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=g,this.continueUrl=(l=h.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=MM(e);try{return new Uy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(){this.providerId=jc.PROVIDER_ID}static credential(e,t){return Gu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Uy.parseLink(t);return Qe(r,"argument-error"),Gu._fromEmailAndCode(e,r.code,r.tenantId)}}jc.PROVIDER_ID="password";jc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd extends kN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends fd{constructor(){super("facebook.com")}static credential(e){return Va._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return go.credential(e.oauthAccessToken)}catch{return null}}}go.FACEBOOK_SIGN_IN_METHOD="facebook.com";go.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends fd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Va._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return vo.credential(t,r)}catch{return null}}}vo.GOOGLE_SIGN_IN_METHOD="google.com";vo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends fd{constructor(){super("github.com")}static credential(e){return Va._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yo.credential(e.oauthAccessToken)}catch{return null}}}yo.GITHUB_SIGN_IN_METHOD="github.com";yo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends fd{constructor(){super("twitter.com")}static credential(e,t){return Va._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return xo.credential(t,r)}catch{return null}}}xo.TWITTER_SIGN_IN_METHOD="twitter.com";xo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const l=await hs._fromIdTokenResponse(e,r,s),c=mE(r);return new dc({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=mE(r);return new dc({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function mE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends ei{constructor(e,t,r,s){var l;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Lf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Lf(e,t,r,s)}}function DN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Lf._fromErrorAndOperation(n,l,e,r):l})}async function FM(n,e,t=!1){const r=await Ku(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return dc._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(n,e,t=!1){const{auth:r}=n;if(Hr(r.app))return Promise.reject(Ro(r));const s="reauthenticate";try{const l=await Ku(n,DN(r,s,e,n),t);Qe(l.idToken,r,"internal-error");const c=My(l.idToken);Qe(c,r,"internal-error");const{sub:u}=c;return Qe(n.uid===u,r,"user-mismatch"),dc._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&vs(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(n,e,t=!1){if(Hr(n.app))return Promise.reject(Ro(n));const r="signIn",s=await DN(n,r,e),l=await dc._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(l.user),l}async function UM(n,e){return ON(Ic(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(n){const e=Ic(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function zM(n,e,t){return Hr(n.app)?Promise.reject(Ro(n)):UM(pn(n),jc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$M(n),r})}function BM(n,e,t,r){return pn(n).onIdTokenChanged(e,t,r)}function qM(n,e,t){return pn(n).beforeAuthStateChanged(e,t)}function WM(n,e,t,r){return pn(n).onAuthStateChanged(e,t,r)}function HM(n){return pn(n).signOut()}const Mf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mf,"1"),this.storage.removeItem(Mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=1e3,GM=10;class MN extends LN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);hM()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,GM):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},KM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}MN.type="LOCAL";const QM=MN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN extends LN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}FN.type="SESSION";const VN=FN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new xm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async m=>m(t.origin,l)),h=await YM(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((u,h)=>{const m=$y("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(v){const y=v;if(y.data.eventId===m)switch(y.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),u(y.data.response);break;default:clearTimeout(g),clearTimeout(l),h(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(){return window}function JM(n){$s().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){return typeof $s().WorkerGlobalScope<"u"&&typeof $s().importScripts=="function"}async function ZM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function tF(){return UN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="firebaseLocalStorageDb",nF=1,Ff="firebaseLocalStorage",zN="fbase_key";class md{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wm(n,e){return n.transaction([Ff],e?"readwrite":"readonly").objectStore(Ff)}function rF(){const n=indexedDB.deleteDatabase($N);return new md(n).toPromise()}function Pv(){const n=indexedDB.open($N,nF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ff,{keyPath:zN})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ff)?e(r):(r.close(),await rF(),e(await Pv()))})})}async function pE(n,e,t){const r=wm(n,!0).put({[zN]:e,value:t});return new md(r).toPromise()}async function sF(n,e){const t=wm(n,!1).get(e),r=await new md(t).toPromise();return r===void 0?null:r.value}function gE(n,e){const t=wm(n,!0).delete(e);return new md(t).toPromise()}const iF=800,oF=3;class BN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>oF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xm._getInstance(tF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ZM(),!this.activeServiceWorker)return;this.sender=new XM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pv();return await pE(e,Mf,"1"),await gE(e,Mf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>pE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>sF(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>gE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=wm(s,!1).getAll();return new md(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BN.type="LOCAL";const aF=BN;new hd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(n,e){return e?Ci(e):(Qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy extends Vy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ql(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ql(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cF(n){return ON(n.auth,new zy(n),n.bypassAuthState)}function uF(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),VM(t,new zy(n),n.bypassAuthState)}async function dF(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),FM(t,new zy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:l,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cF;case"linkViaPopup":case"linkViaRedirect":return dF;case"reauthViaPopup":case"reauthViaRedirect":return uF;default:vs(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=new hd(2e3,1e4);class ql extends qN{constructor(e,t,r,s,l){super(e,t,s,l),this.provider=r,this.authWindow=null,this.pollId=null,ql.currentPopupAction&&ql.currentPopupAction.cancel(),ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=$y();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Us(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Us(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Us(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hF.get())};e()}}ql.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF="pendingRedirect",hf=new Map;class mF extends qN{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=hf.get(this.auth._key());if(!e){try{const r=await pF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}hf.set(this.auth._key(),e)}return this.bypassAuthState||hf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pF(n,e){const t=yF(e),r=vF(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function gF(n,e){hf.set(n._key(),e)}function vF(n){return Ci(n._redirectPersistence)}function yF(n){return df(fF,n.config.apiKey,n.name)}async function xF(n,e,t=!1){if(Hr(n.app))return Promise.reject(Ro(n));const r=Ic(n),s=lF(r,e),c=await new mF(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=10*60*1e3;class _F{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!WN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Us(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wF&&this.cachedEventUids.clear(),this.cachedEventUids.has(vE(e))}saveEventToCache(e){this.cachedEventUids.add(vE(e)),this.lastProcessedEventTime=Date.now()}}function vE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function WN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EF(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bF(n,e={}){return Yo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NF=/^https?/;async function TF(n){if(n.config.emulator)return;const{authorizedDomains:e}=await bF(n);for(const t of e)try{if(CF(t))return}catch{}vs(n,"unauthorized-domain")}function CF(n){const e=jv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!NF.test(t))return!1;if(SF.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=new hd(3e4,6e4);function yE(){const n=$s().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function jF(n){return new Promise((e,t)=>{var r,s,l;function c(){yE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yE(),t(Us(n,"network-request-failed"))},timeout:IF.get()})}if(!((s=(r=$s().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((l=$s().gapi)===null||l===void 0)&&l.load)c();else{const u=_M("iframefcb");return $s()[u]=()=>{gapi.load?c():t(Us(n,"network-request-failed"))},AN(`${wM()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw ff=null,e})}let ff=null;function AF(n){return ff=ff||jF(n),ff}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=new hd(5e3,15e3),RF="__/auth/iframe",kF="emulator/auth/iframe",DF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LF(n){const e=n.config;Qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ly(e,kF):`https://${n.config.authDomain}/${RF}`,r={apiKey:e.apiKey,appName:n.name,v:Ga},s=OF.get(n.config.apiHost);s&&(r.eid=s);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${dd(r).slice(1)}`}async function MF(n){const e=await AF(n),t=$s().gapi;return Qe(t,n,"internal-error"),e.open({where:document.body,url:LF(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DF,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const c=Us(n,"network-request-failed"),u=$s().setTimeout(()=>{l(c)},PF.get());function h(){$s().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VF=500,UF=600,$F="_blank",zF="http://localhost";class xE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BF(n,e,t,r=VF,s=UF){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},FF),{width:r.toString(),height:s.toString(),top:l,left:c}),m=Xn().toLowerCase();t&&(u=bN(m)?$F:t),_N(m)&&(e=e||zF,h.scrollbars="yes");const g=Object.entries(h).reduce((y,[b,S])=>`${y}${b}=${S},`,"");if(dM(m)&&u!=="_self")return qF(e||"",u),new xE(null);const v=window.open(e||"",u,g);Qe(v,n,"popup-blocked");try{v.focus()}catch{}return new xE(v)}function qF(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF="__/auth/handler",HF="emulator/auth/handler",KF=encodeURIComponent("fac");async function wE(n,e,t,r,s,l){Qe(n.config.authDomain,n,"auth-domain-config-required"),Qe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ga,eventId:s};if(e instanceof kN){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",kL(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))c[g]=v}if(e instanceof fd){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await n._getAppCheckToken(),m=h?`#${KF}=${encodeURIComponent(h)}`:"";return`${GF(n)}?${dd(u).slice(1)}${m}`}function GF({config:n}){return n.emulator?Ly(n,HF):`https://${n.authDomain}/${WF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="webStorageSupport";class QF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VN,this._completeRedirectFn=xF,this._overrideRedirectResult=gF}async _openPopup(e,t,r,s){var l;Ri((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await wE(e,t,r,jv(),s);return BF(e,c,$y())}async _openRedirect(e,t,r,s){await this._originValidation(e);const l=await wE(e,t,r,jv(),s);return JM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(Ri(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await MF(e),r=new _F(e);return t.register("authEvent",s=>(Qe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fg,{type:Fg},s=>{var l;const c=(l=s==null?void 0:s[0])===null||l===void 0?void 0:l[Fg];c!==void 0&&t(!!c),vs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=TF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return IN()||EN()||Fy()}}const YF=QF;var _E="@firebase/auth",EE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZF(n){Fa(new zo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Qe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jN(n)},m=new vM(r,s,l,h);return CM(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Fa(new zo("auth-internal",e=>{const t=Ic(e.getProvider("auth").getImmediate());return(r=>new XF(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vs(_E,EE,JF(n)),Vs(_E,EE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV=5*60,tV=sN("authIdTokenMaxAge")||eV;let bE=null;const nV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>tV)return;const s=t==null?void 0:t.token;bE!==s&&(bE=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function rV(n=cN()){const e=gm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=TM(n,{popupRedirectResolver:YF,persistence:[aF,QM,VN]}),r=sN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=nV(l.toString());qM(t,c,()=>c(t.currentUser)),BM(t,u=>c(u))}}const s=nN("auth");return s&&IM(t,`http://${s}`),t}function sV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}yM({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const l=Us("internal-error");l.customData=s,t(l)},r.type="text/javascript",r.charset="UTF-8",sV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZF("Browser");var iV="firebase",oV="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs(iV,oV,"app");var SE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ko,HN;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function D(){}D.prototype=R.prototype,P.D=R.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(k,$,z){for(var M=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)M[ie-2]=arguments[ie];return R.prototype[$].apply(k,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,R,D){D||(D=0);var k=Array(16);if(typeof R=="string")for(var $=0;16>$;++$)k[$]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for($=0;16>$;++$)k[$]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=P.g[0],D=P.g[1],$=P.g[2];var z=P.g[3],M=R+(z^D&($^z))+k[0]+3614090360&4294967295;R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[1]+3905402710&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[2]+606105819&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[3]+3250441966&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+(z^D&($^z))+k[4]+4118548399&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[5]+1200080426&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[6]+2821735955&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[7]+4249261313&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+(z^D&($^z))+k[8]+1770035416&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[9]+2336552879&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[10]+4294925233&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[11]+2304563134&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+(z^D&($^z))+k[12]+1804603682&4294967295,R=D+(M<<7&4294967295|M>>>25),M=z+($^R&(D^$))+k[13]+4254626195&4294967295,z=R+(M<<12&4294967295|M>>>20),M=$+(D^z&(R^D))+k[14]+2792965006&4294967295,$=z+(M<<17&4294967295|M>>>15),M=D+(R^$&(z^R))+k[15]+1236535329&4294967295,D=$+(M<<22&4294967295|M>>>10),M=R+($^z&(D^$))+k[1]+4129170786&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[6]+3225465664&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[11]+643717713&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[0]+3921069994&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+($^z&(D^$))+k[5]+3593408605&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[10]+38016083&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[15]+3634488961&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[4]+3889429448&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+($^z&(D^$))+k[9]+568446438&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[14]+3275163606&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[3]+4107603335&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[8]+1163531501&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+($^z&(D^$))+k[13]+2850285829&4294967295,R=D+(M<<5&4294967295|M>>>27),M=z+(D^$&(R^D))+k[2]+4243563512&4294967295,z=R+(M<<9&4294967295|M>>>23),M=$+(R^D&(z^R))+k[7]+1735328473&4294967295,$=z+(M<<14&4294967295|M>>>18),M=D+(z^R&($^z))+k[12]+2368359562&4294967295,D=$+(M<<20&4294967295|M>>>12),M=R+(D^$^z)+k[5]+4294588738&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[8]+2272392833&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[11]+1839030562&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[14]+4259657740&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+(D^$^z)+k[1]+2763975236&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[4]+1272893353&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[7]+4139469664&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[10]+3200236656&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+(D^$^z)+k[13]+681279174&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[0]+3936430074&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[3]+3572445317&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[6]+76029189&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+(D^$^z)+k[9]+3654602809&4294967295,R=D+(M<<4&4294967295|M>>>28),M=z+(R^D^$)+k[12]+3873151461&4294967295,z=R+(M<<11&4294967295|M>>>21),M=$+(z^R^D)+k[15]+530742520&4294967295,$=z+(M<<16&4294967295|M>>>16),M=D+($^z^R)+k[2]+3299628645&4294967295,D=$+(M<<23&4294967295|M>>>9),M=R+($^(D|~z))+k[0]+4096336452&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[7]+1126891415&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[14]+2878612391&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[5]+4237533241&4294967295,D=$+(M<<21&4294967295|M>>>11),M=R+($^(D|~z))+k[12]+1700485571&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[3]+2399980690&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[10]+4293915773&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[1]+2240044497&4294967295,D=$+(M<<21&4294967295|M>>>11),M=R+($^(D|~z))+k[8]+1873313359&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[15]+4264355552&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[6]+2734768916&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[13]+1309151649&4294967295,D=$+(M<<21&4294967295|M>>>11),M=R+($^(D|~z))+k[4]+4149444226&4294967295,R=D+(M<<6&4294967295|M>>>26),M=z+(D^(R|~$))+k[11]+3174756917&4294967295,z=R+(M<<10&4294967295|M>>>22),M=$+(R^(z|~D))+k[2]+718787259&4294967295,$=z+(M<<15&4294967295|M>>>17),M=D+(z^($|~R))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+($+(M<<21&4294967295|M>>>11))&4294967295,P.g[2]=P.g[2]+$&4294967295,P.g[3]=P.g[3]+z&4294967295}r.prototype.u=function(P,R){R===void 0&&(R=P.length);for(var D=R-this.blockSize,k=this.B,$=this.h,z=0;z<R;){if($==0)for(;z<=D;)s(this,P,z),z+=this.blockSize;if(typeof P=="string"){for(;z<R;)if(k[$++]=P.charCodeAt(z++),$==this.blockSize){s(this,k),$=0;break}}else for(;z<R;)if(k[$++]=P[z++],$==this.blockSize){s(this,k),$=0;break}}this.h=$,this.o+=R},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;var D=8*this.o;for(R=P.length-8;R<P.length;++R)P[R]=D&255,D/=256;for(this.u(P),P=Array(16),R=D=0;4>R;++R)for(var k=0;32>k;k+=8)P[D++]=this.g[R]>>>k&255;return P};function l(P,R){var D=u;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=R(P)}function c(P,R){this.h=R;for(var D=[],k=!0,$=P.length-1;0<=$;$--){var z=P[$]|0;k&&z==R||(D[$]=z,k=!1)}this.g=D}var u={};function h(P){return-128<=P&&128>P?l(P,function(R){return new c([R|0],0>R?-1:0)}):new c([P|0],0>P?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return v;if(0>P)return x(m(-P));for(var R=[],D=1,k=0;P>=D;k++)R[k]=P/D|0,D*=4294967296;return new c(R,0)}function g(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return x(g(P.substring(1),R));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=m(Math.pow(R,8)),k=v,$=0;$<P.length;$+=8){var z=Math.min(8,P.length-$),M=parseInt(P.substring($,$+z),R);8>z?(z=m(Math.pow(R,z)),k=k.j(z).add(m(M))):(k=k.j(D),k=k.add(m(M)))}return k}var v=h(0),y=h(1),b=h(16777216);n=c.prototype,n.m=function(){if(E(this))return-x(this).m();for(var P=0,R=1,D=0;D<this.g.length;D++){var k=this.i(D);P+=(0<=k?k:4294967296+k)*R,R*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(S(this))return"0";if(E(this))return"-"+x(this).toString(P);for(var R=m(Math.pow(P,6)),D=this,k="";;){var $=O(D,R).g;D=j(D,$.j(R));var z=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=$,S(D))return z+k;for(;6>z.length;)z="0"+z;k=z+k}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function S(P){if(P.h!=0)return!1;for(var R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function E(P){return P.h==-1}n.l=function(P){return P=j(this,P),E(P)?-1:S(P)?0:1};function x(P){for(var R=P.g.length,D=[],k=0;k<R;k++)D[k]=~P.g[k];return new c(D,~P.h).add(y)}n.abs=function(){return E(this)?x(this):this},n.add=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0,$=0;$<=R;$++){var z=k+(this.i($)&65535)+(P.i($)&65535),M=(z>>>16)+(this.i($)>>>16)+(P.i($)>>>16);k=M>>>16,z&=65535,M&=65535,D[$]=M<<16|z}return new c(D,D[D.length-1]&-2147483648?-1:0)};function j(P,R){return P.add(x(R))}n.j=function(P){if(S(this)||S(P))return v;if(E(this))return E(P)?x(this).j(x(P)):x(x(this).j(P));if(E(P))return x(this.j(x(P)));if(0>this.l(b)&&0>P.l(b))return m(this.m()*P.m());for(var R=this.g.length+P.g.length,D=[],k=0;k<2*R;k++)D[k]=0;for(k=0;k<this.g.length;k++)for(var $=0;$<P.g.length;$++){var z=this.i(k)>>>16,M=this.i(k)&65535,ie=P.i($)>>>16,ae=P.i($)&65535;D[2*k+2*$]+=M*ae,I(D,2*k+2*$),D[2*k+2*$+1]+=z*ae,I(D,2*k+2*$+1),D[2*k+2*$+1]+=M*ie,I(D,2*k+2*$+1),D[2*k+2*$+2]+=z*ie,I(D,2*k+2*$+2)}for(k=0;k<R;k++)D[k]=D[2*k+1]<<16|D[2*k];for(k=R;k<2*R;k++)D[k]=0;return new c(D,0)};function I(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function C(P,R){this.g=P,this.h=R}function O(P,R){if(S(R))throw Error("division by zero");if(S(P))return new C(v,v);if(E(P))return R=O(x(P),R),new C(x(R.g),x(R.h));if(E(R))return R=O(P,x(R)),new C(x(R.g),R.h);if(30<P.g.length){if(E(P)||E(R))throw Error("slowDivide_ only works with positive integers.");for(var D=y,k=R;0>=k.l(P);)D=U(D),k=U(k);var $=q(D,1),z=q(k,1);for(k=q(k,2),D=q(D,2);!S(k);){var M=z.add(k);0>=M.l(P)&&($=$.add(D),z=M),k=q(k,1),D=q(D,1)}return R=j(P,$.j(R)),new C($,R)}for($=v;0<=P.l(R);){for(D=Math.max(1,Math.floor(P.m()/R.m())),k=Math.ceil(Math.log(D)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),z=m(D),M=z.j(R);E(M)||0<M.l(P);)D-=k,z=m(D),M=z.j(R);S(z)&&(z=y),$=$.add(z),P=j(P,M)}return new C($,P)}n.A=function(P){return O(this,P).h},n.and=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)&P.i(k);return new c(D,this.h&P.h)},n.or=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)|P.i(k);return new c(D,this.h|P.h)},n.xor=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],k=0;k<R;k++)D[k]=this.i(k)^P.i(k);return new c(D,this.h^P.h)};function U(P){for(var R=P.g.length+1,D=[],k=0;k<R;k++)D[k]=P.i(k)<<1|P.i(k-1)>>>31;return new c(D,P.h)}function q(P,R){var D=R>>5;R%=32;for(var k=P.g.length-D,$=[],z=0;z<k;z++)$[z]=0<R?P.i(z+D)>>>R|P.i(z+D+1)<<32-R:P.i(z+D);return new c($,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HN=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,ko=c}).apply(typeof SE<"u"?SE:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KN,_u,GN,mf,Rv,QN,YN,XN;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,N,A){return f==Array.prototype||f==Object.prototype||(f[N]=A.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var N=0;N<f.length;++N){var A=f[N];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=t(this);function s(f,N){if(N)e:{var A=r;f=f.split(".");for(var V=0;V<f.length-1;V++){var Z=f[V];if(!(Z in A))break e;A=A[Z]}f=f[f.length-1],V=A[f],N=N(V),N!=V&&N!=null&&e(A,f,{configurable:!0,writable:!0,value:N})}}function l(f,N){f instanceof String&&(f+="");var A=0,V=!1,Z={next:function(){if(!V&&A<f.length){var oe=A++;return{value:N(oe,f[oe]),done:!1}}return V=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}s("Array.prototype.values",function(f){return f||function(){return l(this,function(N,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function h(f){var N=typeof f;return N=N!="object"?N:f?Array.isArray(f)?"array":N:"null",N=="array"||N=="object"&&typeof f.length=="number"}function m(f){var N=typeof f;return N=="object"&&f!=null||N=="function"}function g(f,N,A){return f.call.apply(f.bind,arguments)}function v(f,N,A){if(!f)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,V),f.apply(N,Z)}}return function(){return f.apply(N,arguments)}}function y(f,N,A){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,y.apply(null,arguments)}function b(f,N){var A=Array.prototype.slice.call(arguments,1);return function(){var V=A.slice();return V.push.apply(V,arguments),f.apply(this,V)}}function S(f,N){function A(){}A.prototype=N.prototype,f.aa=N.prototype,f.prototype=new A,f.prototype.constructor=f,f.Qb=function(V,Z,oe){for(var Se=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)Se[Ct-2]=arguments[Ct];return N.prototype[Z].apply(V,Se)}}function E(f){const N=f.length;if(0<N){const A=Array(N);for(let V=0;V<N;V++)A[V]=f[V];return A}return[]}function x(f,N){for(let A=1;A<arguments.length;A++){const V=arguments[A];if(h(V)){const Z=f.length||0,oe=V.length||0;f.length=Z+oe;for(let Se=0;Se<oe;Se++)f[Z+Se]=V[Se]}else f.push(V)}}class j{constructor(N,A){this.i=N,this.j=A,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function I(f){return/^[\s\xa0]*$/.test(f)}function C(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function O(f){return O[" "](f),f}O[" "]=function(){};var U=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function q(f,N,A){for(const V in f)N.call(A,f[V],V,f)}function P(f,N){for(const A in f)N.call(void 0,f[A],A,f)}function R(f){const N={};for(const A in f)N[A]=f[A];return N}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(f,N){let A,V;for(let Z=1;Z<arguments.length;Z++){V=arguments[Z];for(A in V)f[A]=V[A];for(let oe=0;oe<D.length;oe++)A=D[oe],Object.prototype.hasOwnProperty.call(V,A)&&(f[A]=V[A])}}function $(f){var N=1;f=f.split(":");const A=[];for(;0<N&&f.length;)A.push(f.shift()),N--;return f.length&&A.push(f.join(":")),A}function z(f){u.setTimeout(()=>{throw f},0)}function M(){var f=K;let N=null;return f.g&&(N=f.g,f.g=f.g.next,f.g||(f.h=null),N.next=null),N}class ie{constructor(){this.h=this.g=null}add(N,A){const V=ae.get();V.set(N,A),this.h?this.h.next=V:this.g=V,this.h=V}}var ae=new j(()=>new Y,f=>f.reset());class Y{constructor(){this.next=this.g=this.h=null}set(N,A){this.h=N,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let J,B=!1,K=new ie,Q=()=>{const f=u.Promise.resolve(void 0);J=()=>{f.then(F)}};var F=()=>{for(var f;f=M();){try{f.h.call(f.g)}catch(A){z(A)}var N=ae;N.j(f),100>N.h&&(N.h++,f.next=N.g,N.g=f)}B=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(f,N){this.type=f,this.g=this.target=N,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,N=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const A=()=>{};u.addEventListener("test",A,N),u.removeEventListener("test",A,N)}catch{}return f}();function Te(f,N){if(le.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var A=this.type=f.type,V=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=N,N=f.relatedTarget){if(U){e:{try{O(N.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(N=null)}}else A=="mouseover"?N=f.fromElement:A=="mouseout"&&(N=f.toElement);this.relatedTarget=N,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:pe[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Te.aa.h.call(this)}}S(Te,le);var pe={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),ye=0;function De(f,N,A,V,Z){this.listener=f,this.proxy=null,this.src=N,this.type=A,this.capture=!!V,this.ha=Z,this.key=++ye,this.da=this.fa=!1}function Ie(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Me(f){this.src=f,this.g={},this.h=0}Me.prototype.add=function(f,N,A,V,Z){var oe=f.toString();f=this.g[oe],f||(f=this.g[oe]=[],this.h++);var Se=ut(f,N,V,Z);return-1<Se?(N=f[Se],A||(N.fa=!1)):(N=new De(N,this.src,oe,!!V,Z),N.fa=A,f.push(N)),N};function Le(f,N){var A=N.type;if(A in f.g){var V=f.g[A],Z=Array.prototype.indexOf.call(V,N,void 0),oe;(oe=0<=Z)&&Array.prototype.splice.call(V,Z,1),oe&&(Ie(N),f.g[A].length==0&&(delete f.g[A],f.h--))}}function ut(f,N,A,V){for(var Z=0;Z<f.length;++Z){var oe=f[Z];if(!oe.da&&oe.listener==N&&oe.capture==!!A&&oe.ha==V)return Z}return-1}var bt="closure_lm_"+(1e6*Math.random()|0),sn={};function Bt(f,N,A,V,Z){if(Array.isArray(N)){for(var oe=0;oe<N.length;oe++)Bt(f,N[oe],A,V,Z);return null}return A=ws(A),f&&f[ue]?f.K(N,A,m(V)?!!V.capture:!1,Z):gn(f,N,A,!1,V,Z)}function gn(f,N,A,V,Z,oe){if(!N)throw Error("Invalid event type");var Se=m(Z)?!!Z.capture:!!Z,Ct=Zn(f);if(Ct||(f[bt]=Ct=new Me(f)),A=Ct.add(N,A,V,Se,oe),A.proxy)return A;if(V=en(),A.proxy=V,V.src=f,V.listener=A,f.addEventListener)Ee||(Z=Se),Z===void 0&&(Z=!1),f.addEventListener(N.toString(),V,Z);else if(f.attachEvent)f.attachEvent(Jn(N.toString()),V);else if(f.addListener&&f.removeListener)f.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return A}function en(){function f(A){return N.call(f.src,f.listener,A)}const N=ni;return f}function Ze(f,N,A,V,Z){if(Array.isArray(N))for(var oe=0;oe<N.length;oe++)Ze(f,N[oe],A,V,Z);else V=m(V)?!!V.capture:!!V,A=ws(A),f&&f[ue]?(f=f.i,N=String(N).toString(),N in f.g&&(oe=f.g[N],A=ut(oe,A,V,Z),-1<A&&(Ie(oe[A]),Array.prototype.splice.call(oe,A,1),oe.length==0&&(delete f.g[N],f.h--)))):f&&(f=Zn(f))&&(N=f.g[N.toString()],f=-1,N&&(f=ut(N,A,V,Z)),(A=-1<f?N[f]:null)&&Dt(A))}function Dt(f){if(typeof f!="number"&&f&&!f.da){var N=f.src;if(N&&N[ue])Le(N.i,f);else{var A=f.type,V=f.proxy;N.removeEventListener?N.removeEventListener(A,V,f.capture):N.detachEvent?N.detachEvent(Jn(A),V):N.addListener&&N.removeListener&&N.removeListener(V),(A=Zn(N))?(Le(A,f),A.h==0&&(A.src=null,N[bt]=null)):Ie(f)}}}function Jn(f){return f in sn?sn[f]:sn[f]="on"+f}function ni(f,N){if(f.da)f=!0;else{N=new Te(N,this);var A=f.listener,V=f.ha||f.src;f.fa&&Dt(f),f=A.call(V,N)}return f}function Zn(f){return f=f[bt],f instanceof Me?f:null}var bn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ws(f){return typeof f=="function"?f:(f[bn]||(f[bn]=function(N){return f.handleEvent(N)}),f[bn])}function Mt(){H.call(this),this.i=new Me(this),this.M=this,this.F=null}S(Mt,H),Mt.prototype[ue]=!0,Mt.prototype.removeEventListener=function(f,N,A,V){Ze(this,f,N,A,V)};function It(f,N){var A,V=f.F;if(V)for(A=[];V;V=V.F)A.push(V);if(f=f.M,V=N.type||N,typeof N=="string")N=new le(N,f);else if(N instanceof le)N.target=N.target||f;else{var Z=N;N=new le(V,f),k(N,Z)}if(Z=!0,A)for(var oe=A.length-1;0<=oe;oe--){var Se=N.g=A[oe];Z=Fn(Se,V,!0,N)&&Z}if(Se=N.g=f,Z=Fn(Se,V,!0,N)&&Z,Z=Fn(Se,V,!1,N)&&Z,A)for(oe=0;oe<A.length;oe++)Se=N.g=A[oe],Z=Fn(Se,V,!1,N)&&Z}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var f=this.i,N;for(N in f.g){for(var A=f.g[N],V=0;V<A.length;V++)Ie(A[V]);delete f.g[N],f.h--}}this.F=null},Mt.prototype.K=function(f,N,A,V){return this.i.add(String(f),N,!1,A,V)},Mt.prototype.L=function(f,N,A,V){return this.i.add(String(f),N,!0,A,V)};function Fn(f,N,A,V){if(N=f.i.g[String(N)],!N)return!0;N=N.concat();for(var Z=!0,oe=0;oe<N.length;++oe){var Se=N[oe];if(Se&&!Se.da&&Se.capture==A){var Ct=Se.listener,vn=Se.ha||Se.src;Se.fa&&Le(f.i,Se),Z=Ct.call(vn,V)!==!1&&Z}}return Z&&!V.defaultPrevented}function Vn(f,N,A){if(typeof f=="function")A&&(f=y(f,A));else if(f&&typeof f.handleEvent=="function")f=y(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:u.setTimeout(f,N||0)}function Sn(f){f.g=Vn(()=>{f.g=null,f.i&&(f.i=!1,Sn(f))},f.l);const N=f.h;f.h=null,f.m.apply(null,N)}class Gr extends H{constructor(N,A){super(),this.m=N,this.l=A,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Sn(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Or(f){H.call(this),this.h=f,this.g={}}S(Or,H);var _s=[];function ri(f){q(f.g,function(N,A){this.g.hasOwnProperty(A)&&Dt(N)},f),f.g={}}Or.prototype.N=function(){Or.aa.N.call(this),ri(this)},Or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qr=u.JSON.stringify,Un=u.JSON.parse,si=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function qe(){}qe.prototype.h=null;function gt(f){return f.h||(f.h=f.i())}function ft(){}var Ft={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kt(){le.call(this,"d")}S(Kt,le);function or(){le.call(this,"c")}S(or,le);var ne={},_e=null;function Fe(){return _e=_e||new Mt}ne.La="serverreachability";function St(f){le.call(this,ne.La,f)}S(St,le);function et(f){const N=Fe();It(N,new St(N))}ne.STAT_EVENT="statevent";function Nt(f,N){le.call(this,ne.STAT_EVENT,f),this.stat=N}S(Nt,le);function be(f){const N=Fe();It(N,new Nt(N,f))}ne.Ma="timingevent";function ii(f,N){le.call(this,ne.Ma,f),this.size=N}S(ii,le);function ar(f,N){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},N)}function Es(){this.g=!0}Es.prototype.xa=function(){this.g=!1};function bs(f,N,A,V,Z,oe){f.info(function(){if(f.g)if(oe)for(var Se="",Ct=oe.split("&"),vn=0;vn<Ct.length;vn++){var vt=Ct[vn].split("=");if(1<vt.length){var Nn=vt[0];vt=vt[1];var cn=Nn.split("_");Se=2<=cn.length&&cn[1]=="type"?Se+(Nn+"="+vt+"&"):Se+(Nn+"=redacted&")}}else Se=null;else Se=oe;return"XMLHTTP REQ ("+V+") [attempt "+Z+"]: "+N+`
`+A+`
`+Se})}function oi(f,N,A,V,Z,oe,Se){f.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+Z+"]: "+N+`
`+A+`
`+oe+" "+Se})}function lr(f,N,A,V){f.info(function(){return"XMLHTTP TEXT ("+N+"): "+Za(f,A)+(V?" "+V:"")})}function Ui(f,N){f.info(function(){return"TIMEOUT: "+N})}Es.prototype.info=function(){};function Za(f,N){if(!f.g)return N;if(!N)return null;try{var A=JSON.parse(N);if(A){for(f=0;f<A.length;f++)if(Array.isArray(A[f])){var V=A[f];if(!(2>V.length)){var Z=V[1];if(Array.isArray(Z)&&!(1>Z.length)){var oe=Z[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var Se=1;Se<Z.length;Se++)Z[Se]=""}}}}return Qr(A)}catch{return N}}var ai={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Er;function na(){}S(na,qe),na.prototype.g=function(){return new XMLHttpRequest},na.prototype.i=function(){return{}},Er=new na;function Yr(f,N,A,V){this.j=f,this.i=N,this.l=A,this.R=V||1,this.U=new Or(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sd}function Sd(){this.i=null,this.g="",this.h=!1}var Lc={},el={};function tl(f,N,A){f.L=1,f.v=Wi(Sr(N)),f.m=A,f.P=!0,Mc(f,null)}function Mc(f,N){f.F=Date.now(),Ot(f),f.A=Sr(f.v);var A=f.A,V=f.R;Array.isArray(V)||(V=[String(V)]),Ki(A.i,"t",V),f.C=0,A=f.j.J,f.h=new Sd,f.g=zd(f.j,A?N:null,!f.m),0<f.O&&(f.M=new Gr(y(f.Y,f,f.g),f.O)),N=f.U,A=f.g,V=f.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(_s[0]=Z.toString()),Z=_s);for(var oe=0;oe<Z.length;oe++){var Se=Bt(A,Z[oe],V||N.handleEvent,!1,N.h||N);if(!Se)break;N.g[Se.key]=Se}N=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,N)):(f.u="GET",f.g.ea(f.A,f.u,null,N)),et(),bs(f.i,f.u,f.A,f.l,f.R,f.m)}Yr.prototype.ca=function(f){f=f.target;const N=this.M;N&&ur(f)==3?N.j():this.Y(f)},Yr.prototype.Y=function(f){try{if(f==this.g)e:{const cn=ur(this.g);var N=this.g.Ba();const Fr=this.g.Z();if(!(3>cn)&&(cn!=3||this.g&&(this.h.h||this.g.oa()||Bc(this.g)))){this.J||cn!=4||N==7||(N==8||0>=Fr?et(3):et(2)),ra(this);var A=this.g.Z();this.X=A;t:if(Nd(this)){var V=Bc(this.g);f="";var Z=V.length,oe=ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lr(this),$i(this);var Se="";break t}this.h.i=new u.TextDecoder}for(N=0;N<Z;N++)this.h.h=!0,f+=this.h.i.decode(V[N],{stream:!(oe&&N==Z-1)});V.length=0,this.h.g+=f,this.C=0,Se=this.h.g}else Se=this.g.oa();if(this.o=A==200,oi(this.i,this.u,this.A,this.l,this.R,cn,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Ct,vn=this.g;if((Ct=vn.g?vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Ct)){var vt=Ct;break t}}vt=null}if(A=vt)lr(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fc(this,A);else{this.o=!1,this.s=3,be(12),Lr(this),$i(this);break e}}if(this.P){A=!0;let Tr;for(;!this.J&&this.C<Se.length;)if(Tr=Km(this,Se),Tr==el){cn==4&&(this.s=4,be(14),A=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(Tr==Lc){this.s=4,be(15),lr(this.i,this.l,Se,"[Invalid Chunk]"),A=!1;break}else lr(this.i,this.l,Tr,null),Fc(this,Tr);if(Nd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),cn!=4||Se.length!=0||this.h.h||(this.s=1,be(16),A=!1),this.o=this.o&&A,!A)lr(this.i,this.l,Se,"[Invalid Chunked Response]"),Lr(this),$i(this);else if(0<Se.length&&!this.W){this.W=!0;var Nn=this.j;Nn.g==this&&Nn.ba&&!Nn.M&&(Nn.j.info("Great, no buffering proxy detected. Bytes received: "+Se.length),Wc(Nn),Nn.M=!0,be(11))}}else lr(this.i,this.l,Se,null),Fc(this,Se);cn==4&&Lr(this),this.o&&!this.J&&(cn==4?hl(this.j,this):(this.o=!1,Ot(this)))}else al(this.g),A==400&&0<Se.indexOf("Unknown SID")?(this.s=3,be(12)):(this.s=0,be(13)),Lr(this),$i(this)}}}catch{}finally{}};function Nd(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Km(f,N){var A=f.C,V=N.indexOf(`
`,A);return V==-1?el:(A=Number(N.substring(A,V)),isNaN(A)?Lc:(V+=1,V+A>N.length?el:(N=N.slice(V,V+A),f.C=V+A,N)))}Yr.prototype.cancel=function(){this.J=!0,Lr(this)};function Ot(f){f.S=Date.now()+f.I,Td(f,f.I)}function Td(f,N){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ar(y(f.ba,f),N)}function ra(f){f.B&&(u.clearTimeout(f.B),f.B=null)}Yr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ui(this.i,this.A),this.L!=2&&(et(),be(17)),Lr(this),this.s=2,$i(this)):Td(this,this.S-f)};function $i(f){f.j.G==0||f.J||hl(f.j,f)}function Lr(f){ra(f);var N=f.M;N&&typeof N.ma=="function"&&N.ma(),f.M=null,ri(f.U),f.g&&(N=f.g,f.g=null,N.abort(),N.ma())}function Fc(f,N){try{var A=f.j;if(A.G!=0&&(A.g==f||er(A.h,f))){if(!f.K&&er(A.h,f)&&A.G==3){try{var V=A.Da.g.parse(N)}catch{V=null}if(Array.isArray(V)&&V.length==3){var Z=V;if(Z[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<f.F)dl(A),ts(A);else break e;ul(A),be(18)}}else A.za=Z[1],0<A.za-A.T&&37500>Z[2]&&A.F&&A.v==0&&!A.C&&(A.C=ar(y(A.Za,A),6e3));if(1>=Id(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else hi(A,11)}else if((f.K||A.g==f)&&dl(A),!I(N))for(Z=A.Da.g.parse(N),N=0;N<Z.length;N++){let vt=Z[N];if(A.T=vt[0],vt=vt[1],A.G==2)if(vt[0]=="c"){A.K=vt[1],A.ia=vt[2];const Nn=vt[3];Nn!=null&&(A.la=Nn,A.j.info("VER="+A.la));const cn=vt[4];cn!=null&&(A.Aa=cn,A.j.info("SVER="+A.Aa));const Fr=vt[5];Fr!=null&&typeof Fr=="number"&&0<Fr&&(V=1.5*Fr,A.L=V,A.j.info("backChannelRequestTimeoutMs_="+V)),V=A;const Tr=f.g;if(Tr){const ua=Tr.g?Tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ua){var oe=V.h;oe.g||ua.indexOf("spdy")==-1&&ua.indexOf("quic")==-1&&ua.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(Vc(oe,oe.h),oe.h=null))}if(V.D){const ml=Tr.g?Tr.g.getResponseHeader("X-HTTP-Session-Id"):null;ml&&(V.ya=ml,At(V.I,V.D,ml))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-f.F,A.j.info("Handshake RTT: "+A.R+"ms")),V=A;var Se=f;if(V.qa=$d(V,V.J?V.ia:null,V.W),Se.K){jd(V.h,Se);var Ct=Se,vn=V.L;vn&&(Ct.I=vn),Ct.B&&(ra(Ct),Ot(Ct)),V.g=Se}else ca(V);0<A.i.length&&Cs(A)}else vt[0]!="stop"&&vt[0]!="close"||hi(A,7);else A.G==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?hi(A,7):Pn(A):vt[0]!="noop"&&A.l&&A.l.ta(vt),A.v=0)}}et(4)}catch{}}var Cd=class{constructor(f,N){this.g=f,this.map=N}};function sa(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function br(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Id(f){return f.h?1:f.g?f.g.size:0}function er(f,N){return f.h?f.h==N:f.g?f.g.has(N):!1}function Vc(f,N){f.g?f.g.add(N):f.h=N}function jd(f,N){f.h&&f.h==N?f.h=null:f.g&&f.g.has(N)&&f.g.delete(N)}sa.prototype.cancel=function(){if(this.i=Ad(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ad(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let N=f.i;for(const A of f.g.values())N=N.concat(A.D);return N}return E(f.i)}function nl(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(h(f)){for(var N=[],A=f.length,V=0;V<A;V++)N.push(f[V]);return N}N=[],A=0;for(V in f)N[A++]=f[V];return N}function rl(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(h(f)||typeof f=="string"){var N=[];f=f.length;for(var A=0;A<f;A++)N.push(A);return N}N=[],A=0;for(const V in f)N[A++]=V;return N}}}function zi(f,N){if(f.forEach&&typeof f.forEach=="function")f.forEach(N,void 0);else if(h(f)||typeof f=="string")Array.prototype.forEach.call(f,N,void 0);else for(var A=rl(f),V=nl(f),Z=V.length,oe=0;oe<Z;oe++)N.call(void 0,V[oe],A&&A[oe],f)}var ia=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gm(f,N){if(f){f=f.split("&");for(var A=0;A<f.length;A++){var V=f[A].indexOf("="),Z=null;if(0<=V){var oe=f[A].substring(0,V);Z=f[A].substring(V+1)}else oe=f[A];N(oe,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function li(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof li){this.h=f.h,oa(this,f.j),this.o=f.o,this.g=f.g,Bi(this,f.s),this.l=f.l;var N=f.i,A=new Ss;A.i=N.i,N.g&&(A.g=new Map(N.g),A.h=N.h),qi(this,A),this.m=f.m}else f&&(N=String(f).match(ia))?(this.h=!1,oa(this,N[1]||"",!0),this.o=mt(N[2]||""),this.g=mt(N[3]||"",!0),Bi(this,N[4]),this.l=mt(N[5]||"",!0),qi(this,N[6]||"",!0),this.m=mt(N[7]||"")):(this.h=!1,this.i=new Ss(null,this.h))}li.prototype.toString=function(){var f=[],N=this.j;N&&f.push(Hi(N,sl,!0),":");var A=this.g;return(A||N=="file")&&(f.push("//"),(N=this.o)&&f.push(Hi(N,sl,!0),"@"),f.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&f.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&f.push("/"),f.push(Hi(A,A.charAt(0)=="/"?kd:Rd,!0))),(A=this.i.toString())&&f.push("?",A),(A=this.m)&&f.push("#",Hi(A,Uc)),f.join("")};function Sr(f){return new li(f)}function oa(f,N,A){f.j=A?mt(N,!0):N,f.j&&(f.j=f.j.replace(/:$/,""))}function Bi(f,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);f.s=N}else f.s=null}function qi(f,N,A){N instanceof Ss?(f.i=N,Ns(f.i,f.h)):(A||(N=Hi(N,Dd)),f.i=new Ss(N,f.h))}function At(f,N,A){f.i.set(N,A)}function Wi(f){return At(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function mt(f,N){return f?N?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Hi(f,N,A){return typeof f=="string"?(f=encodeURI(f).replace(N,Pd),A&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Pd(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var sl=/[#\/\?@]/g,Rd=/[#\?:]/g,kd=/[#\?]/g,Dd=/[#\?@]/g,Uc=/#/g;function Ss(f,N){this.h=this.g=null,this.i=f||null,this.j=!!N}function An(f){f.g||(f.g=new Map,f.h=0,f.i&&Gm(f.i,function(N,A){f.add(decodeURIComponent(N.replace(/\+/g," ")),A)}))}n=Ss.prototype,n.add=function(f,N){An(this),this.i=null,f=Mr(this,f);var A=this.g.get(f);return A||this.g.set(f,A=[]),A.push(N),this.h+=1,this};function Xr(f,N){An(f),N=Mr(f,N),f.g.has(N)&&(f.i=null,f.h-=f.g.get(N).length,f.g.delete(N))}function Jr(f,N){return An(f),N=Mr(f,N),f.g.has(N)}n.forEach=function(f,N){An(this),this.g.forEach(function(A,V){A.forEach(function(Z){f.call(N,Z,V,this)},this)},this)},n.na=function(){An(this);const f=Array.from(this.g.values()),N=Array.from(this.g.keys()),A=[];for(let V=0;V<N.length;V++){const Z=f[V];for(let oe=0;oe<Z.length;oe++)A.push(N[V])}return A},n.V=function(f){An(this);let N=[];if(typeof f=="string")Jr(this,f)&&(N=N.concat(this.g.get(Mr(this,f))));else{f=Array.from(this.g.values());for(let A=0;A<f.length;A++)N=N.concat(f[A])}return N},n.set=function(f,N){return An(this),this.i=null,f=Mr(this,f),Jr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[N]),this.h+=1,this},n.get=function(f,N){return f?(f=this.V(f),0<f.length?String(f[0]):N):N};function Ki(f,N,A){Xr(f,N),0<A.length&&(f.i=null,f.g.set(Mr(f,N),E(A)),f.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],N=Array.from(this.g.keys());for(var A=0;A<N.length;A++){var V=N[A];const oe=encodeURIComponent(String(V)),Se=this.V(V);for(V=0;V<Se.length;V++){var Z=oe;Se[V]!==""&&(Z+="="+encodeURIComponent(String(Se[V]))),f.push(Z)}}return this.i=f.join("&")};function Mr(f,N){return N=String(N),f.j&&(N=N.toLowerCase()),N}function Ns(f,N){N&&!f.j&&(An(f),f.i=null,f.g.forEach(function(A,V){var Z=V.toLowerCase();V!=Z&&(Xr(this,V),Ki(this,Z,A))},f)),f.j=N}function Qm(f,N){const A=new Es;if(u.Image){const V=new Image;V.onload=b(cr,A,"TestLoadImage: loaded",!0,N,V),V.onerror=b(cr,A,"TestLoadImage: error",!1,N,V),V.onabort=b(cr,A,"TestLoadImage: abort",!1,N,V),V.ontimeout=b(cr,A,"TestLoadImage: timeout",!1,N,V),u.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=f}else N(!1)}function Od(f,N){const A=new Es,V=new AbortController,Z=setTimeout(()=>{V.abort(),cr(A,"TestPingServer: timeout",!1,N)},1e4);fetch(f,{signal:V.signal}).then(oe=>{clearTimeout(Z),oe.ok?cr(A,"TestPingServer: ok",!0,N):cr(A,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(Z),cr(A,"TestPingServer: error",!1,N)})}function cr(f,N,A,V,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),V(A)}catch{}}function Ym(){this.g=new si}function Ld(f,N,A){const V=A||"";try{zi(f,function(Z,oe){let Se=Z;m(Z)&&(Se=Qr(Z)),N.push(V+oe+"="+encodeURIComponent(Se))})}catch(Z){throw N.push(V+"type="+encodeURIComponent("_badmap")),Z}}function ci(f){this.l=f.Ub||null,this.j=f.eb||!1}S(ci,qe),ci.prototype.g=function(){return new aa(this.l,this.j)},ci.prototype.i=function(f){return function(){return f}}({});function aa(f,N){Mt.call(this),this.D=f,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(aa,Mt),n=aa.prototype,n.open=function(f,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=N,this.readyState=1,es(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(N.body=f),(this.D||u).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Md(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Md(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var N=f.value?f.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!f.done}))&&(this.response=this.responseText+=N)}f.done?Zr(this):es(this),this.readyState==3&&Md(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Zr(this))},n.Qa=function(f){this.g&&(this.response=f,Zr(this))},n.ga=function(){this.g&&Zr(this)};function Zr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,es(f)}n.setRequestHeader=function(f,N){this.u.append(f,N)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],N=this.h.entries();for(var A=N.next();!A.done;)A=A.value,f.push(A[0]+": "+A[1]),A=N.next();return f.join(`\r
`)};function es(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ui(f){let N="";return q(f,function(A,V){N+=V,N+=":",N+=A,N+=`\r
`}),N}function Gi(f,N,A){e:{for(V in A){var V=!1;break e}V=!0}V||(A=ui(A),typeof f=="string"?A!=null&&encodeURIComponent(String(A)):At(f,N,A))}function qt(f){Mt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(qt,Mt);var Xm=/^https?$/i,$c=["POST","PUT"];n=qt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,N,A,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);N=N?N.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Er.g(),this.v=this.o?gt(this.o):gt(Er),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(N,String(f),!0),this.B=!1}catch(oe){la(this,oe);return}if(f=A||"",A=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var Z in V)A.set(Z,V[Z]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const oe of V.keys())A.set(oe,V.get(oe));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(A.keys()).find(oe=>oe.toLowerCase()=="content-type"),Z=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call($c,N,void 0))||V||Z||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,Se]of A)this.g.setRequestHeader(oe,Se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ol(this),this.u=!0,this.g.send(f),this.u=!1}catch(oe){la(this,oe)}};function la(f,N){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=N,f.m=5,il(f),Nr(f)}function il(f){f.A||(f.A=!0,It(f,"complete"),It(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,It(this,"complete"),It(this,"abort"),Nr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nr(this,!0)),qt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?zc(this):this.bb())},n.bb=function(){zc(this)};function zc(f){if(f.h&&typeof c<"u"&&(!f.v[1]||ur(f)!=4||f.Z()!=2)){if(f.u&&ur(f)==4)Vn(f.Ea,0,f);else if(It(f,"readystatechange"),ur(f)==4){f.h=!1;try{const Se=f.Z();e:switch(Se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var A;if(!(A=N)){var V;if(V=Se===0){var Z=String(f.D).match(ia)[1]||null;!Z&&u.self&&u.self.location&&(Z=u.self.location.protocol.slice(0,-1)),V=!Xm.test(Z?Z.toLowerCase():"")}A=V}if(A)It(f,"complete"),It(f,"success");else{f.m=6;try{var oe=2<ur(f)?f.g.statusText:""}catch{oe=""}f.l=oe+" ["+f.Z()+"]",il(f)}}finally{Nr(f)}}}}function Nr(f,N){if(f.g){ol(f);const A=f.g,V=f.v[0]?()=>{}:null;f.g=null,f.v=null,N||It(f,"ready");try{A.onreadystatechange=V}catch{}}}function ol(f){f.I&&(u.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function ur(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<ur(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var N=this.g.responseText;return f&&N.indexOf(f)==0&&(N=N.substring(f.length)),Un(N)}};function Bc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function al(f){const N={};f=(f.g&&2<=ur(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<f.length;V++){if(I(f[V]))continue;var A=$(f[V]);const Z=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const oe=N[Z]||[];N[Z]=oe,oe.push(A)}P(N,function(V){return V.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ts(f,N,A){return A&&A.internalChannelParams&&A.internalChannelParams[f]||N}function qc(f){this.Aa=0,this.i=[],this.j=new Es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ts("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ts("baseRetryDelayMs",5e3,f),this.cb=Ts("retryDelaySeedMs",1e4,f),this.Wa=Ts("forwardChannelMaxRetries",2,f),this.wa=Ts("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new sa(f&&f.concurrentRequestLimit),this.Da=new Ym,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qc.prototype,n.la=8,n.G=1,n.connect=function(f,N,A,V){be(0),this.W=f,this.H=N||{},A&&V!==void 0&&(this.H.OSID=A,this.H.OAID=V),this.F=this.X,this.I=$d(this,null,this.W),Cs(this)};function Pn(f){if(ll(f),f.G==3){var N=f.U++,A=Sr(f.I);if(At(A,"SID",f.K),At(A,"RID",N),At(A,"TYPE","terminate"),di(f,A),N=new Yr(f,f.j,N),N.L=2,N.v=Wi(Sr(A)),A=!1,u.navigator&&u.navigator.sendBeacon)try{A=u.navigator.sendBeacon(N.v.toString(),"")}catch{}!A&&u.Image&&(new Image().src=N.v,A=!0),A||(N.g=zd(N.j,null),N.g.ea(N.v)),N.F=Date.now(),Ot(N)}Ud(f)}function ts(f){f.g&&(Wc(f),f.g.cancel(),f.g=null)}function ll(f){ts(f),f.u&&(u.clearTimeout(f.u),f.u=null),dl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function Cs(f){if(!br(f.h)&&!f.s){f.s=!0;var N=f.Ga;J||Q(),B||(J(),B=!0),K.add(N,f),f.B=0}}function Jm(f,N){return Id(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=N.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ar(y(f.Ga,f,N),Vd(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const Z=new Yr(this,this.j,f);let oe=this.o;if(this.S&&(oe?(oe=R(oe),k(oe,this.S)):oe=this.S),this.m!==null||this.O||(Z.H=oe,oe=null),this.P)e:{for(var N=0,A=0;A<this.i.length;A++){t:{var V=this.i[A];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(N+=V,4096<N){N=A;break e}if(N===4096||A===this.i.length-1){N=A+1;break e}}N=1e3}else N=1e3;N=Qi(this,Z,N),A=Sr(this.I),At(A,"RID",f),At(A,"CVER",22),this.D&&At(A,"X-HTTP-Session-Id",this.D),di(this,A),oe&&(this.O?N="headers="+encodeURIComponent(String(ui(oe)))+"&"+N:this.m&&Gi(A,this.m,oe)),Vc(this.h,Z),this.Ua&&At(A,"TYPE","init"),this.P?(At(A,"$req",N),At(A,"SID","null"),Z.T=!0,tl(Z,A,null)):tl(Z,A,N),this.G=2}}else this.G==3&&(f?cl(this,f):this.i.length==0||br(this.h)||cl(this))};function cl(f,N){var A;N?A=N.l:A=f.U++;const V=Sr(f.I);At(V,"SID",f.K),At(V,"RID",A),At(V,"AID",f.T),di(f,V),f.m&&f.o&&Gi(V,f.m,f.o),A=new Yr(f,f.j,A,f.B+1),f.m===null&&(A.H=f.o),N&&(f.i=N.D.concat(f.i)),N=Qi(f,A,1e3),A.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Vc(f.h,A),tl(A,V,N)}function di(f,N){f.H&&q(f.H,function(A,V){At(N,V,A)}),f.l&&zi({},function(A,V){At(N,V,A)})}function Qi(f,N,A){A=Math.min(f.i.length,A);var V=f.l?y(f.l.Na,f.l,f):null;e:{var Z=f.i;let oe=-1;for(;;){const Se=["count="+A];oe==-1?0<A?(oe=Z[0].g,Se.push("ofs="+oe)):oe=0:Se.push("ofs="+oe);let Ct=!0;for(let vn=0;vn<A;vn++){let vt=Z[vn].g;const Nn=Z[vn].map;if(vt-=oe,0>vt)oe=Math.max(0,Z[vn].g-100),Ct=!1;else try{Ld(Nn,Se,"req"+vt+"_")}catch{V&&V(Nn)}}if(Ct){V=Se.join("&");break e}}}return f=f.i.splice(0,A),N.D=f,V}function ca(f){if(!f.g&&!f.u){f.Y=1;var N=f.Fa;J||Q(),B||(J(),B=!0),K.add(N,f),f.v=0}}function ul(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ar(y(f.Fa,f),Vd(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Fd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ar(y(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,be(10),ts(this),Fd(this))};function Wc(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function Fd(f){f.g=new Yr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var N=Sr(f.qa);At(N,"RID","rpc"),At(N,"SID",f.K),At(N,"AID",f.T),At(N,"CI",f.F?"0":"1"),!f.F&&f.ja&&At(N,"TO",f.ja),At(N,"TYPE","xmlhttp"),di(f,N),f.m&&f.o&&Gi(N,f.m,f.o),f.L&&(f.g.I=f.L);var A=f.g;f=f.ia,A.L=1,A.v=Wi(Sr(N)),A.m=null,A.P=!0,Mc(A,f)}n.Za=function(){this.C!=null&&(this.C=null,ts(this),ul(this),be(19))};function dl(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function hl(f,N){var A=null;if(f.g==N){dl(f),Wc(f),f.g=null;var V=2}else if(er(f.h,N))A=N.D,jd(f.h,N),V=1;else return;if(f.G!=0){if(N.o)if(V==1){A=N.m?N.m.length:0,N=Date.now()-N.F;var Z=f.B;V=Fe(),It(V,new ii(V,A)),Cs(f)}else ca(f);else if(Z=N.s,Z==3||Z==0&&0<N.X||!(V==1&&Jm(f,N)||V==2&&ul(f)))switch(A&&0<A.length&&(N=f.h,N.i=N.i.concat(A)),Z){case 1:hi(f,5);break;case 4:hi(f,10);break;case 3:hi(f,6);break;default:hi(f,2)}}}function Vd(f,N){let A=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(A*=2),A*N}function hi(f,N){if(f.j.info("Error code "+N),N==2){var A=y(f.fb,f),V=f.Xa;const Z=!V;V=new li(V||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||oa(V,"https"),Wi(V),Z?Qm(V.toString(),A):Od(V.toString(),A)}else be(2);f.G=0,f.l&&f.l.sa(N),Ud(f),ll(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))};function Ud(f){if(f.G=0,f.ka=[],f.l){const N=Ad(f.h);(N.length!=0||f.i.length!=0)&&(x(f.ka,N),x(f.ka,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.ra()}}function $d(f,N,A){var V=A instanceof li?Sr(A):new li(A);if(V.g!="")N&&(V.g=N+"."+V.g),Bi(V,V.s);else{var Z=u.location;V=Z.protocol,N=N?N+"."+Z.hostname:Z.hostname,Z=+Z.port;var oe=new li(null);V&&oa(oe,V),N&&(oe.g=N),Z&&Bi(oe,Z),A&&(oe.l=A),V=oe}return A=f.D,N=f.ya,A&&N&&At(V,A,N),At(V,"VER",f.la),di(f,V),V}function zd(f,N,A){if(N&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=f.Ca&&!f.pa?new qt(new ci({eb:A})):new qt(f.pa),N.Ha(f.J),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hc(){}n=Hc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function fl(){}fl.prototype.g=function(f,N){return new tr(f,N)};function tr(f,N){Mt.call(this),this.g=new qc(N),this.l=f,this.h=N&&N.messageUrlParams||null,f=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(f?f["X-WebChannel-Content-Type"]=N.messageContentType:f={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(f?f["X-WebChannel-Client-Profile"]=N.va:f={"X-WebChannel-Client-Profile":N.va}),this.g.S=f,(f=N&&N.Sb)&&!I(f)&&(this.g.m=f),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!I(N)&&(this.g.D=N,f=this.h,f!==null&&N in f&&(f=this.h,N in f&&delete f[N])),this.j=new Is(this)}S(tr,Mt),tr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tr.prototype.close=function(){Pn(this.g)},tr.prototype.o=function(f){var N=this.g;if(typeof f=="string"){var A={};A.__data__=f,f=A}else this.u&&(A={},A.__data__=Qr(f),f=A);N.i.push(new Cd(N.Ya++,f)),N.G==3&&Cs(N)},tr.prototype.N=function(){this.g.l=null,delete this.j,Pn(this.g),delete this.g,tr.aa.N.call(this)};function Bd(f){Kt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var N=f.__sm__;if(N){e:{for(const A in N){f=A;break e}f=void 0}(this.i=f)&&(f=this.i,N=N!==null&&f in N?N[f]:void 0),this.data=N}else this.data=f}S(Bd,Kt);function qd(){or.call(this),this.status=1}S(qd,or);function Is(f){this.g=f}S(Is,Hc),Is.prototype.ua=function(){It(this.g,"a")},Is.prototype.ta=function(f){It(this.g,new Bd(f))},Is.prototype.sa=function(f){It(this.g,new qd)},Is.prototype.ra=function(){It(this.g,"b")},fl.prototype.createWebChannel=fl.prototype.g,tr.prototype.send=tr.prototype.o,tr.prototype.open=tr.prototype.m,tr.prototype.close=tr.prototype.close,XN=function(){return new fl},YN=function(){return Fe()},QN=ne,Rv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ai.NO_ERROR=0,ai.TIMEOUT=8,ai.HTTP_ERROR=6,mf=ai,Gt.COMPLETE="complete",GN=Gt,ft.EventType=Ft,Ft.OPEN="a",Ft.CLOSE="b",Ft.ERROR="c",Ft.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,_u=ft,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,KN=qt}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});const NE="@firebase/firestore",TE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vr.UNAUTHENTICATED=new vr(null),vr.GOOGLE_CREDENTIALS=new vr("google-credentials-uid"),vr.FIRST_PARTY=new vr("first-party-uid"),vr.MOCK_USER=new vr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=new ky("@firebase/firestore");function Ul(){return Ua.logLevel}function Pe(n,...e){if(Ua.logLevel<=dt.DEBUG){const t=e.map(By);Ua.debug(`Firestore (${Ac}): ${n}`,...t)}}function ki(n,...e){if(Ua.logLevel<=dt.ERROR){const t=e.map(By);Ua.error(`Firestore (${Ac}): ${n}`,...t)}}function $a(n,...e){if(Ua.logLevel<=dt.WARN){const t=e.map(By);Ua.warn(`Firestore (${Ac}): ${n}`,...t)}}function By(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,JN(n,r,t)}function JN(n,e,t){let r=`FIRESTORE (${Ac}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ki(r),new Error(r)}function Tt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||JN(e,s,r)}function it(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends ei{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vr.UNAUTHENTICATED))}shutdown(){}}class cV{constructor(e){this.t=e,this.currentUser=vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Tt(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let l=new Do;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Do,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const h=l;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},u=h=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Do)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt(typeof r.accessToken=="string",31837,{l:r}),new aV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new vr(e)}}class uV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new uV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Tt(this.o===void 0,3512);const r=l=>{l.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const s=l=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>s(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new CE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new CE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=fV(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<t&&(r+=e.charAt(s[l]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function kv(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return lt(r,s);{const l=ZN(),c=mV(l.encode(IE(n,t)),l.encode(IE(e,t)));return c!==0?c:lt(r,s)}}t+=r>65535?2:1}return lt(n.length,e.length)}function IE(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function mV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return lt(n[t],e[t]);return lt(n.length,e.length)}function hc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="__name__";class ks{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ye(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ye(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ks.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ks?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const l=ks.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return lt(e.length,t.length)}static compareSegments(e,t){const r=ks.isNumericId(e),s=ks.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?ks.extractNumericId(e).compare(ks.extractNumericId(t)):kv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ko.fromString(e.substring(4,e.length-2))}}class kt extends ks{construct(e,t,r){return new kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new kt(t)}static emptyPath(){return new kt([])}}const pV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends ks{construct(e,t,r){return new On(e,t,r)}static isValidIdentifier(e){return pV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dv}static keyField(){return new On([Dv])}static fromServerFormat(e){const t=[];let r="",s=0;const l=()=>{if(r.length===0)throw new Ce(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Ce(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ce(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(l(),s++)}if(l(),c)throw new Ce(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new On(t)}static emptyPath(){return new On([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(kt.fromString(e))}static fromName(e){return new Be(kt.fromString(e).popFirst(5))}static empty(){return new Be(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(n,e,t){if(!t)throw new Ce(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gV(n,e,t,r){if(e===!0&&r===!0)throw new Ce(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jE(n){if(!Be.isDocumentKey(n))throw new Ce(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AE(n){if(Be.isDocumentKey(n))throw new Ce(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _m(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ye(12329,{type:typeof n})}function zs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_m(n);throw new Ce(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(n,e){const t={typeString:n};return e&&(t.value=e),t}function pd(n,e){if(!eT(n))throw new Ce(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new Ce(ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=-62135596800,RE=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*RE);return new pt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<PE)throw new Ce(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/RE}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pd(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-PE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:fn("string",pt._jsonSchemaVersion),seconds:fn("number"),nanoseconds:fn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{static fromTimestamp(e){return new rt(e)}static min(){return new rt(new pt(0,0))}static max(){return new rt(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=-1;function vV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=rt.fromTimestamp(r===1e9?new pt(t+1,0):new pt(t,r));return new Bo(s,Be.empty(),e)}function yV(n){return new Bo(n.readTime,n.key,Qu)}class Bo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Bo(rt.min(),Be.empty(),Qu)}static max(){return new Bo(rt.max(),Be.empty(),Qu)}}function xV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _V{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==wV)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let s=0,l=0,c=!1;e.forEach(u=>{++s,u.next(()=>{++l,c&&l===s&&t()},h=>r(h))}),c=!0,l===s&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(s=>s?he.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,l)=>{r.push(t.call(this,s,l))}),this.waitFor(r)}static mapArray(e,t){return new he((r,s)=>{const l=e.length,c=new Array(l);let u=0;for(let h=0;h<l;h++){const m=h;t(e[m]).next(g=>{c[m]=g,++u,u===l&&r(c)},g=>s(g))}})}static doWhile(e,t){return new he((r,s)=>{const l=()=>{e()===!0?t().next(()=>{l()},s):r()};l()})}}function EV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Rc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Em.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=-1;function bm(n){return n==null}function Vf(n){return n===0&&1/n==-1/0}function bV(n){return typeof n=="number"&&Number.isInteger(n)&&!Vf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="";function SV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kE(e)),e=NV(n.get(t),e);return kE(e)}function NV(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case tT:t+="";break;default:t+=l}}return t}function kE(n){return n+tT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t){this.comparator=e,this.root=t||Dn.EMPTY}insert(e,t){return new Zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kh(this.root,e,this.comparator,!0)}}class Kh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,t,r,s,l){this.key=e,this.value=t,this.color=r??Dn.RED,this.left=s??Dn.EMPTY,this.right=l??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,l){return new Dn(e??this.key,t??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,r),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Dn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ye(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye(57766)}get value(){throw Ye(16141)}get color(){throw Ye(16727)}get left(){throw Ye(29726)}get right(){throw Ye(36894)}copy(e,t,r,s,l){return this}insert(e,t,r){return new Dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.comparator=e,this.data=new Zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new OE(this.data.getIterator())}getIteratorFrom(e){return new OE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class OE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.fields=e,e.sort(On.comparator)}static empty(){return new kr([])}unionWith(e){let t=new _n(On.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new kr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new rT("Invalid base64 string: "+l):l}}(e);return new Mn(t)}static fromUint8Array(e){const t=function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l}(e);return new Mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const TV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qo(n){if(Tt(!!n,39018),typeof n=="string"){let e=0;const t=TV.exec(n);if(Tt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ln(n.seconds),nanos:ln(n.nanos)}}function ln(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wo(n){return typeof n=="string"?Mn.fromBase64String(n):Mn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="server_timestamp",iT="__type__",oT="__previous_value__",aT="__local_write_time__";function Ky(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[iT])===null||t===void 0?void 0:t.stringValue)===sT}function Sm(n){const e=n.mapValue.fields[oT];return Ky(e)?Sm(e):e}function Yu(n){const e=qo(n.mapValue.fields[aT].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,t,r,s,l,c,u,h,m,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=m,this.isUsingEmulator=g}}const Uf="(default)";class Xu{constructor(e,t){this.projectId=e,this.database=t||Uf}static empty(){return new Xu("","")}get isDefaultDatabase(){return this.database===Uf}isEqual(e){return e instanceof Xu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="__type__",IV="__max__",Gh={mapValue:{}},cT="__vector__",$f="value";function Ho(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ky(n)?4:AV(n)?9007199254740991:jV(n)?10:11:Ye(28295,{value:n})}function Qs(n,e){if(n===e)return!0;const t=Ho(n);if(t!==Ho(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yu(n).isEqual(Yu(e));case 3:return function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=qo(s.timestampValue),u=qo(l.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,l){return Wo(s.bytesValue).isEqual(Wo(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,l){return ln(s.geoPointValue.latitude)===ln(l.geoPointValue.latitude)&&ln(s.geoPointValue.longitude)===ln(l.geoPointValue.longitude)}(n,e);case 2:return function(s,l){if("integerValue"in s&&"integerValue"in l)return ln(s.integerValue)===ln(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=ln(s.doubleValue),u=ln(l.doubleValue);return c===u?Vf(c)===Vf(u):isNaN(c)&&isNaN(u)}return!1}(n,e);case 9:return hc(n.arrayValue.values||[],e.arrayValue.values||[],Qs);case 10:case 11:return function(s,l){const c=s.mapValue.fields||{},u=l.mapValue.fields||{};if(DE(c)!==DE(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!Qs(c[h],u[h])))return!1;return!0}(n,e);default:return Ye(52216,{left:n})}}function Ju(n,e){return(n.values||[]).find(t=>Qs(t,e))!==void 0}function fc(n,e){if(n===e)return 0;const t=Ho(n),r=Ho(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return function(l,c){const u=ln(l.integerValue||l.doubleValue),h=ln(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return LE(n.timestampValue,e.timestampValue);case 4:return LE(Yu(n),Yu(e));case 5:return kv(n.stringValue,e.stringValue);case 6:return function(l,c){const u=Wo(l),h=Wo(c);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const u=l.split("/"),h=c.split("/");for(let m=0;m<u.length&&m<h.length;m++){const g=lt(u[m],h[m]);if(g!==0)return g}return lt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const u=lt(ln(l.latitude),ln(c.latitude));return u!==0?u:lt(ln(l.longitude),ln(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ME(n.arrayValue,e.arrayValue);case 10:return function(l,c){var u,h,m,g;const v=l.fields||{},y=c.fields||{},b=(u=v[$f])===null||u===void 0?void 0:u.arrayValue,S=(h=y[$f])===null||h===void 0?void 0:h.arrayValue,E=lt(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((g=S==null?void 0:S.values)===null||g===void 0?void 0:g.length)||0);return E!==0?E:ME(b,S)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===Gh.mapValue&&c===Gh.mapValue)return 0;if(l===Gh.mapValue)return 1;if(c===Gh.mapValue)return-1;const u=l.fields||{},h=Object.keys(u),m=c.fields||{},g=Object.keys(m);h.sort(),g.sort();for(let v=0;v<h.length&&v<g.length;++v){const y=kv(h[v],g[v]);if(y!==0)return y;const b=fc(u[h[v]],m[g[v]]);if(b!==0)return b}return lt(h.length,g.length)}(n.mapValue,e.mapValue);default:throw Ye(23264,{le:t})}}function LE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=qo(n),r=qo(e),s=lt(t.seconds,r.seconds);return s!==0?s:lt(t.nanos,r.nanos)}function ME(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const l=fc(t[s],r[s]);if(l)return l}return lt(t.length,r.length)}function mc(n){return Ov(n)}function Ov(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=qo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Wo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Be.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const l of t.values||[])s?s=!1:r+=",",r+=Ov(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of r)l?l=!1:s+=",",s+=`${c}:${Ov(t.fields[c])}`;return s+"}"}(n.mapValue):Ye(61005,{value:n})}function pf(n){switch(Ho(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sm(n);return e?16+pf(e):16;case 5:return 2*n.stringValue.length;case 6:return Wo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,l)=>s+pf(l),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Xo(r.fields,(l,c)=>{s+=l.length+pf(c)}),s}(n.mapValue);default:throw Ye(13486,{value:n})}}function FE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lv(n){return!!n&&"integerValue"in n}function Gy(n){return!!n&&"arrayValue"in n}function VE(n){return!!n&&"nullValue"in n}function UE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gf(n){return!!n&&"mapValue"in n}function jV(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[lT])===null||t===void 0?void 0:t.stringValue)===cT}function ku(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ku(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ku(n.arrayValue.values[t]);return e}return Object.assign({},n)}function AV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===IV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.value=e}static empty(){return new xr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(t)}setAll(e){let t=On.emptyPath(),r={},s=[];e.forEach((c,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,s),r={},s=[],t=u.popLast()}c?r[u.lastSegment()]=ku(c):s.push(u.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,s)}delete(e){const t=this.field(e.popLast());gf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];gf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Xo(t,(s,l)=>e[s]=l);for(const s of r)delete e[s]}clone(){return new xr(ku(this.value))}}function uT(n){const e=[];return Xo(n.fields,(t,r)=>{const s=new On([t]);if(gf(r)){const l=uT(r.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)}),new kr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,t,r,s,l,c,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=l,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Gn(e,0,rt.min(),rt.min(),rt.min(),xr.empty(),0)}static newFoundDocument(e,t,r,s){return new Gn(e,1,t,rt.min(),r,s,0)}static newNoDocument(e,t){return new Gn(e,2,t,rt.min(),rt.min(),xr.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,rt.min(),rt.min(),xr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t){this.position=e,this.inclusive=t}}function $E(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?r=Be.comparator(Be.fromName(c.referenceValue),t.key):r=fc(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function zE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t="asc"){this.field=e,this.dir=t}}function PV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{}class hn extends dT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new kV(e,t,r):t==="array-contains"?new LV(e,r):t==="in"?new MV(e,r):t==="not-in"?new FV(e,r):t==="array-contains-any"?new VV(e,r):new hn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new DV(e,r):new OV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fc(t,this.value)):t!==null&&Ho(this.value)===Ho(t)&&this.matchesComparison(fc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ys extends dT{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new ys(e,t)}matches(e){return hT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function hT(n){return n.op==="and"}function fT(n){return RV(n)&&hT(n)}function RV(n){for(const e of n.filters)if(e instanceof ys)return!1;return!0}function Mv(n){if(n instanceof hn)return n.field.canonicalString()+n.op.toString()+mc(n.value);if(fT(n))return n.filters.map(e=>Mv(e)).join(",");{const e=n.filters.map(t=>Mv(t)).join(",");return`${n.op}(${e})`}}function mT(n,e){return n instanceof hn?function(r,s){return s instanceof hn&&r.op===s.op&&r.field.isEqual(s.field)&&Qs(r.value,s.value)}(n,e):n instanceof ys?function(r,s){return s instanceof ys&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((l,c,u)=>l&&mT(c,s.filters[u]),!0):!1}(n,e):void Ye(19439)}function pT(n){return n instanceof hn?function(t){return`${t.field.canonicalString()} ${t.op} ${mc(t.value)}`}(n):n instanceof ys?function(t){return t.op.toString()+" {"+t.getFilters().map(pT).join(" ,")+"}"}(n):"Filter"}class kV extends hn{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class DV extends hn{constructor(e,t){super(e,"in",t),this.keys=gT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class OV extends hn{constructor(e,t){super(e,"not-in",t),this.keys=gT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class LV extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gy(t)&&Ju(t.arrayValue,this.value)}}class MV extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ju(this.value.arrayValue,t)}}class FV extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ju(this.value.arrayValue,t)}}class VV extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ju(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,t=null,r=[],s=[],l=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=c,this.endAt=u,this.Pe=null}}function BE(n,e=null,t=[],r=[],s=null,l=null,c=null){return new UV(n,e,t,r,s,l,c)}function Qy(n){const e=it(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Mv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),bm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>mc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>mc(r)).join(",")),e.Pe=t}return e.Pe}function Yy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!PV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zE(n.startAt,e.startAt)&&zE(n.endAt,e.endAt)}function Fv(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t=null,r=[],s=[],l=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=c,this.startAt=u,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function $V(n,e,t,r,s,l,c,u){return new Ya(n,e,t,r,s,l,c,u)}function Xy(n){return new Ya(n)}function qE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vT(n){return n.collectionGroup!==null}function Du(n){const e=it(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new _n(On.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(m=>{m.isInequality()&&(u=u.add(m.field))})}),u})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Zu(l,r))}),t.has(On.keyField().canonicalString())||e.Te.push(new Zu(On.keyField(),r))}return e.Te}function Bs(n){const e=it(n);return e.Ie||(e.Ie=zV(e,Du(n))),e.Ie}function zV(n,e){if(n.limitType==="F")return BE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const l=s.dir==="desc"?"asc":"desc";return new Zu(s.field,l)});const t=n.endAt?new zf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new zf(n.startAt.position,n.startAt.inclusive):null;return BE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Vv(n,e){const t=n.filters.concat([e]);return new Ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Uv(n,e,t){return new Ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nm(n,e){return Yy(Bs(n),Bs(e))&&n.limitType===e.limitType}function yT(n){return`${Qy(Bs(n))}|lt:${n.limitType}`}function $l(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>pT(s)).join(", ")}]`),bm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>mc(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>mc(s)).join(",")),`Target(${r})`}(Bs(n))}; limitType=${n.limitType})`}function Tm(n,e){return e.isFoundDocument()&&function(r,s){const l=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Be.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(n,e)&&function(r,s){for(const l of Du(r))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const l of r.filters)if(!l.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(c,u,h){const m=$E(c,u,h);return c.inclusive?m<=0:m<0}(r.startAt,Du(r),s)||r.endAt&&!function(c,u,h){const m=$E(c,u,h);return c.inclusive?m>=0:m>0}(r.endAt,Du(r),s))}(n,e)}function BV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xT(n){return(e,t)=>{let r=!1;for(const s of Du(n)){const l=qV(s,e,t);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function qV(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(l,c,u){const h=c.data.field(l),m=u.data.field(l);return h!==null&&m!==null?fc(h,m):Ye(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ye(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Xo(this.inner,(t,r)=>{for(const[s,l]of r)e(s,l)})}isEmpty(){return nT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=new Zt(Be.comparator);function Di(){return WV}const wT=new Zt(Be.comparator);function Eu(...n){let e=wT;for(const t of n)e=e.insert(t.key,t);return e}function _T(n){let e=wT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Sa(){return Ou()}function ET(){return Ou()}function Ou(){return new Xa(n=>n.toString(),(n,e)=>n.isEqual(e))}const HV=new Zt(Be.comparator),KV=new _n(Be.comparator);function ht(...n){let e=KV;for(const t of n)e=e.add(t);return e}const GV=new _n(lt);function QV(){return GV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vf(e)?"-0":e}}function bT(n){return{integerValue:""+n}}function YV(n,e){return bV(e)?bT(e):Jy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(){this._=void 0}}function XV(n,e,t){return n instanceof ed?function(s,l){const c={fields:{[iT]:{stringValue:sT},[aT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&Ky(l)&&(l=Sm(l)),l&&(c.fields[oT]=l),{mapValue:c}}(t,e):n instanceof td?NT(n,e):n instanceof nd?TT(n,e):function(s,l){const c=ST(s,l),u=WE(c)+WE(s.Ee);return Lv(c)&&Lv(s.Ee)?bT(u):Jy(s.serializer,u)}(n,e)}function JV(n,e,t){return n instanceof td?NT(n,e):n instanceof nd?TT(n,e):t}function ST(n,e){return n instanceof Bf?function(r){return Lv(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class ed extends Cm{}class td extends Cm{constructor(e){super(),this.elements=e}}function NT(n,e){const t=CT(e);for(const r of n.elements)t.some(s=>Qs(s,r))||t.push(r);return{arrayValue:{values:t}}}class nd extends Cm{constructor(e){super(),this.elements=e}}function TT(n,e){let t=CT(e);for(const r of n.elements)t=t.filter(s=>!Qs(s,r));return{arrayValue:{values:t}}}class Bf extends Cm{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function WE(n){return ln(n.integerValue||n.doubleValue)}function CT(n){return Gy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,t){this.field=e,this.transform=t}}function e3(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof td&&s instanceof td||r instanceof nd&&s instanceof nd?hc(r.elements,s.elements,Qs):r instanceof Bf&&s instanceof Bf?Qs(r.Ee,s.Ee):r instanceof ed&&s instanceof ed}(n.transform,e.transform)}class t3{constructor(e,t){this.version=e,this.transformResults=t}}class ms{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ms}static exists(e){return new ms(void 0,e)}static updateTime(e){return new ms(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Im{}function IT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zy(n.key,ms.none()):new gd(n.key,n.data,ms.none());{const t=n.data,r=xr.empty();let s=new _n(On.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),s=s.add(l)}return new Jo(n.key,r,new kr(s.toArray()),ms.none())}}function n3(n,e,t){n instanceof gd?function(s,l,c){const u=s.value.clone(),h=KE(s.fieldTransforms,l,c.transformResults);u.setAll(h),l.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Jo?function(s,l,c){if(!vf(s.precondition,l))return void l.convertToUnknownDocument(c.version);const u=KE(s.fieldTransforms,l,c.transformResults),h=l.data;h.setAll(jT(s)),h.setAll(u),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Lu(n,e,t,r){return n instanceof gd?function(l,c,u,h){if(!vf(l.precondition,c))return u;const m=l.value.clone(),g=GE(l.fieldTransforms,h,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Jo?function(l,c,u,h){if(!vf(l.precondition,c))return u;const m=GE(l.fieldTransforms,h,c),g=c.data;return g.setAll(jT(l)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(l,c,u){return vf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(n,e,t)}function r3(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),l=ST(r.transform,s||null);l!=null&&(t===null&&(t=xr.empty()),t.set(r.field,l))}return t||null}function HE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&hc(r,s,(l,c)=>e3(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class gd extends Im{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Jo extends Im{constructor(e,t,r,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function jT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function KE(n,e,t){const r=new Map;Tt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,u=e.data.field(l.field);r.set(l.field,JV(c,u,t[s]))}return r}function GE(n,e,t){const r=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);r.set(s.field,XV(l,c,e))}return r}class Zy extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s3 extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&n3(l,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Lu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Lu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ET();return this.mutations.forEach(s=>{const l=e.get(s.key),c=l.overlayedDocument;let u=this.applyToLocalView(c,l.mutatedFields);u=t.has(s.key)?null:u;const h=IT(c,u);h!==null&&r.set(s.key,h),c.isValidDocument()||c.convertToNoDocument(rt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ht())}isEqual(e){return this.batchId===e.batchId&&hc(this.mutations,e.mutations,(t,r)=>HE(t,r))&&hc(this.baseMutations,e.baseMutations,(t,r)=>HE(t,r))}}class ex{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Tt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return HV}();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,r[c].version);return new ex(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o3=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,yt;function l3(n){switch(n){case ce.OK:return Ye(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Ye(15467,{code:n})}}function AT(n){if(n===void 0)return ki("GRPC error has no .code"),ce.UNKNOWN;switch(n){case dn.OK:return ce.OK;case dn.CANCELLED:return ce.CANCELLED;case dn.UNKNOWN:return ce.UNKNOWN;case dn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case dn.INTERNAL:return ce.INTERNAL;case dn.UNAVAILABLE:return ce.UNAVAILABLE;case dn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case dn.NOT_FOUND:return ce.NOT_FOUND;case dn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case dn.ABORTED:return ce.ABORTED;case dn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case dn.DATA_LOSS:return ce.DATA_LOSS;default:return Ye(39323,{code:n})}}(yt=dn||(dn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=new ko([4294967295,4294967295],0);function QE(n){const e=ZN().encode(n),t=new HN;return t.update(e),new Uint8Array(t.digest())}function YE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ko([t,r],0),new ko([s,l],0)]}class tx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bu(`Invalid padding: ${t}`);if(r<0)throw new bu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new bu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ko.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(ko.fromNumber(r)));return s.compare(c3)===1&&(s=new ko([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=QE(e),[r,s]=YE(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,s,l);if(!this.ye(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new tx(l,s,t);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const t=QE(e),[r,s]=YE(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,s,l);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t,r,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,vd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new jm(rt.min(),s,new Zt(lt),Di(),ht())}}class vd{constructor(e,t,r,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new vd(r,t,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class PT{constructor(e,t){this.targetId=e,this.De=t}}class RT{constructor(e,t,r=Mn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class XE{constructor(){this.ve=0,this.Ce=JE(),this.Fe=Mn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ht(),t=ht(),r=ht();return this.Ce.forEach((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ye(38017,{changeType:l})}}),new vd(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=JE()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class u3{constructor(e){this.We=e,this.Ge=new Map,this.ze=Di(),this.je=Qh(),this.Je=Qh(),this.He=new Zt(lt)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Ye(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const l=s.target;if(Fv(l))if(r===0){const c=new Be(l.path);this.Xe(t,c,Gn.newNoDocument(c,rt.min()))}else Tt(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const u=this._t(e),h=u?this.ut(u,e,c):1;if(h!==0){this.rt(t);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:l=0}=t;let c,u;try{c=Wo(r).toUint8Array()}catch(h){if(h instanceof rT)return $a("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new tx(c,s,l)}catch(h){return $a(h instanceof bu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.fe===0?null:u}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach(l=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(u)||(this.Xe(t,l,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((l,c)=>{const u=this.st(c);if(u){if(l.current&&Fv(u.target)){const h=new Be(u.target.path);this.Tt(h).has(c)||this.It(c,h)||this.Xe(c,h,Gn.newNoDocument(h,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}});let r=ht();this.Je.forEach((l,c)=>{let u=!0;c.forEachWhile(h=>{const m=this.st(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(l))}),this.ze.forEach((l,c)=>c.setReadTime(e));const s=new jm(e,t,this.He,this.ze,r);return this.ze=Di(),this.je=Qh(),this.Je=Qh(),this.He=new Zt(lt),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new XE,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new _n(lt),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new _n(lt),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new XE),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Qh(){return new Zt(Be.comparator)}function JE(){return new Zt(Be.comparator)}const d3={asc:"ASCENDING",desc:"DESCENDING"},h3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f3={and:"AND",or:"OR"};class m3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $v(n,e){return n.useProto3Json||bm(e)?e:{value:e}}function qf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function p3(n,e){return qf(n,e.toTimestamp())}function qs(n){return Tt(!!n,49232),rt.fromTimestamp(function(t){const r=qo(t);return new pt(r.seconds,r.nanos)}(n))}function nx(n,e){return zv(n,e).canonicalString()}function zv(n,e){const t=function(s){return new kt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function DT(n){const e=kt.fromString(n);return Tt(VT(e),10190,{key:e.toString()}),e}function Bv(n,e){return nx(n.databaseId,e.path)}function Vg(n,e){const t=DT(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(LT(t))}function OT(n,e){return nx(n.databaseId,e)}function g3(n){const e=DT(n);return e.length===4?kt.emptyPath():LT(e)}function qv(n){return new kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LT(n){return Tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ZE(n,e,t){return{name:Bv(n,e),fields:t.value.mapValue.fields}}function v3(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ye(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=function(m,g){return m.useProto3Json?(Tt(g===void 0||typeof g=="string",58123),Mn.fromBase64String(g||"")):(Tt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Mn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(m){const g=m.code===void 0?ce.UNKNOWN:AT(m.code);return new Ce(g,m.message||"")}(c);t=new RT(r,s,l,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Vg(n,r.document.name),l=qs(r.document.updateTime),c=r.document.createTime?qs(r.document.createTime):rt.min(),u=new xr({mapValue:{fields:r.document.fields}}),h=Gn.newFoundDocument(s,l,c,u),m=r.targetIds||[],g=r.removedTargetIds||[];t=new yf(m,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Vg(n,r.document),l=r.readTime?qs(r.readTime):rt.min(),c=Gn.newNoDocument(s,l),u=r.removedTargetIds||[];t=new yf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Vg(n,r.document),l=r.removedTargetIds||[];t=new yf([],l,s,null)}else{if(!("filter"in e))return Ye(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:l}=r,c=new a3(s,l),u=r.targetId;t=new PT(u,c)}}return t}function y3(n,e){let t;if(e instanceof gd)t={update:ZE(n,e.key,e.value)};else if(e instanceof Zy)t={delete:Bv(n,e.key)};else if(e instanceof Jo)t={update:ZE(n,e.key,e.data),updateMask:C3(e.fieldMask)};else{if(!(e instanceof s3))return Ye(16599,{Rt:e.type});t={verify:Bv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,c){const u=c.transform;if(u instanceof ed)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof td)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof nd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Bf)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw Ye(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,l){return l.updateTime!==void 0?{updateTime:p3(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ye(27497)}(n,e.precondition)),t}function x3(n,e){return n&&n.length>0?(Tt(e!==void 0,14353),n.map(t=>function(s,l){let c=s.updateTime?qs(s.updateTime):qs(l);return c.isEqual(rt.min())&&(c=qs(l)),new t3(c,s.transformResults||[])}(t,e))):[]}function w3(n,e){return{documents:[OT(n,e.path)]}}function _3(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=OT(n,s);const l=function(m){if(m.length!==0)return FT(ys.create(m,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(m){if(m.length!==0)return m.map(g=>function(y){return{field:zl(y.field),direction:S3(y.dir)}}(g))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=$v(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{Vt:t,parent:s}}function E3(n){let e=g3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Tt(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let l=[];t.where&&(l=function(v){const y=MT(v);return y instanceof ys&&fT(y)?y.getFilters():[y]}(t.where));let c=[];t.orderBy&&(c=function(v){return v.map(y=>function(S){return new Zu(Bl(S.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(y))}(t.orderBy));let u=null;t.limit&&(u=function(v){let y;return y=typeof v=="object"?v.value:v,bm(y)?null:y}(t.limit));let h=null;t.startAt&&(h=function(v){const y=!!v.before,b=v.values||[];return new zf(b,y)}(t.startAt));let m=null;return t.endAt&&(m=function(v){const y=!v.before,b=v.values||[];return new zf(b,y)}(t.endAt)),$V(e,s,c,l,u,"F",h,m)}function b3(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Bl(t.unaryFilter.field);return hn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Bl(t.unaryFilter.field);return hn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Bl(t.unaryFilter.field);return hn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Bl(t.unaryFilter.field);return hn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ye(61313);default:return Ye(60726)}}(n):n.fieldFilter!==void 0?function(t){return hn.create(Bl(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ye(58110);default:return Ye(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ys.create(t.compositeFilter.filters.map(r=>MT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ye(1026)}}(t.compositeFilter.op))}(n):Ye(30097,{filter:n})}function S3(n){return d3[n]}function N3(n){return h3[n]}function T3(n){return f3[n]}function zl(n){return{fieldPath:n.canonicalString()}}function Bl(n){return On.fromServerFormat(n.fieldPath)}function FT(n){return n instanceof hn?function(t){if(t.op==="=="){if(UE(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NAN"}};if(VE(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(UE(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NOT_NAN"}};if(VE(t.value))return{unaryFilter:{field:zl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zl(t.field),op:N3(t.op),value:t.value}}}(n):n instanceof ys?function(t){const r=t.getFilters().map(s=>FT(s));return r.length===1?r[0]:{compositeFilter:{op:T3(t.op),filters:r}}}(n):Ye(54877,{filter:n})}function C3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function VT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t,r,s,l=rt.min(),c=rt.min(),u=Mn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e){this.gt=e}}function j3(n){const e=E3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(){this.Dn=new P3}addToCollectionParentIndex(e,t){return this.Dn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Bo.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Bo.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class P3{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new _n(kt.comparator),l=!s.has(r);return this.index[t]=s.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _n(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UT=41943040;class yr{static withCacheSize(e){return new yr(e,yr.DEFAULT_COLLECTION_PERCENTILE,yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr.DEFAULT_COLLECTION_PERCENTILE=10,yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yr.DEFAULT=new yr(UT,yr.DEFAULT_COLLECTION_PERCENTILE,yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yr.DISABLED=new yr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new pc(0)}static ur(){return new pc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="LruGarbageCollector",$T=1048576;function nb([n,e],[t,r]){const s=lt(n,t);return s===0?lt(e,r):s}class R3{constructor(e){this.Tr=e,this.buffer=new _n(nb),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class k3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Pe(tb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Rc(t)?Pe(tb,"Ignoring IndexedDB error during garbage collection: ",t):await Pc(t)}await this.Rr(3e5)})}}class D3{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return he.resolve(Em.ue);const r=new R3(t);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(eb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eb):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,l,c,u,h,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,t))).next(v=>(l=v,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(m=Date.now(),Ul()<=dt.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${l} targets in `+(h-u)+`ms
	Removed ${v} documents in `+(m-h)+`ms
Total Duration: ${m-g}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:v})))}}function O3(n,e){return new D3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(){this.changes=new Xa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Lu(r.mutation,s,kr.empty(),pt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ht()){const s=Sa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(l=>{let c=Eu();return l.forEach((u,h)=>{c=c.insert(u,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Sa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ht()))}populateOverlays(e,t,r){const s=[];return r.forEach(l=>{t.has(l)||s.push(l)}),this.documentOverlayCache.getOverlays(e,s).next(l=>{l.forEach((c,u)=>{t.set(c,u)})})}computeViews(e,t,r,s){let l=Di();const c=Ou(),u=function(){return Ou()}();return t.forEach((h,m)=>{const g=r.get(m.key);s.has(m.key)&&(g===void 0||g.mutation instanceof Jo)?l=l.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),Lu(g.mutation,m,g.mutation.getFieldMask(),pt.now())):c.set(m.key,kr.empty())}),this.recalculateAndSaveOverlays(e,l).next(h=>(h.forEach((m,g)=>c.set(m,g)),t.forEach((m,g)=>{var v;return u.set(m,new M3(g,(v=c.get(m))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,t){const r=Ou();let s=new Zt((c,u)=>c-u),l=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const u of c)u.keys().forEach(h=>{const m=t.get(h);if(m===null)return;let g=r.get(h)||kr.empty();g=u.applyToLocalView(m,g),r.set(h,g);const v=(s.get(u.batchId)||ht()).add(h);s=s.insert(u.batchId,v)})}).next(()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),m=h.key,g=h.value,v=ET();g.forEach(y=>{if(!l.has(y)){const b=IT(t.get(y),r.get(y));b!==null&&v.set(y,b),l=l.add(y)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,v))}return he.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(c){return Be.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-l.size):he.resolve(Sa());let u=Qu,h=l;return c.next(m=>he.forEach(m,(g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),l.get(g)?he.resolve():this.remoteDocumentCache.getEntry(e,g).next(y=>{h=h.insert(g,y)}))).next(()=>this.populateOverlays(e,m,l)).next(()=>this.computeViews(e,h,m,ht())).next(g=>({batchId:u,changes:_T(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let s=Eu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const l=t.collectionGroup;let c=Eu();return this.indexManager.getCollectionParents(e,l).next(u=>he.forEach(u,h=>{const m=function(v,y){return new Ya(y,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,h.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next(g=>{g.forEach((v,y)=>{c=c.insert(v,y)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,s))).next(c=>{l.forEach((h,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,Gn.newInvalidDocument(g)))});let u=Eu();return c.forEach((h,m)=>{const g=l.get(h);g!==void 0&&Lu(g.mutation,m,kr.empty(),pt.now()),Tm(t,m)&&(u=u.insert(h,m))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return he.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:qs(s.createTime)}}(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:j3(s.bundledQuery),readTime:qs(s.readTime)}}(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(){this.overlays=new Zt(Be.comparator),this.kr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Sa();return he.forEach(t,s=>this.getOverlay(e,s).next(l=>{l!==null&&r.set(s,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,l)=>{this.wt(e,t,l)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const s=Sa(),l=t.length+1,c=new Be(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,m=h.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&h.largestBatchId>r&&s.set(h.getKey(),h)}return he.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let l=new Zt((m,g)=>m-g);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let g=l.get(m.largestBatchId);g===null&&(g=Sa(),l=l.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const u=Sa(),h=l.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((m,g)=>u.set(m,g)),!(u.size()>=s)););return he.resolve(u)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new o3(t,r));let l=this.kr.get(t);l===void 0&&(l=ht(),this.kr.set(t,l)),this.kr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.sessionToken=Mn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.qr=new _n(jn.Qr),this.$r=new _n(jn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new jn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new jn(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new Be(new kt([])),r=new jn(t,e),s=new jn(t,e+1),l=[];return this.$r.forEachInRange([r,s],c=>{this.Wr(c),l.push(c.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Be(new kt([])),r=new jn(t,e),s=new jn(t,e+1);let l=ht();return this.$r.forEachInRange([r,s],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new jn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class jn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Be.comparator(e.key,t.key)||lt(e.Hr,t.Hr)}static Ur(e,t){return lt(e.Hr,t.Hr)||Be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new _n(jn.Qr)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new i3(l,t,r,s);this.mutationQueue.push(c);for(const u of s)this.Yr=this.Yr.add(new jn(u.key,l)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),l=s<0?0:s;return he.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?Hy:this.er-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new jn(t,0),s=new jn(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([r,s],c=>{const u=this.Zr(c.Hr);l.push(u)}),he.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(lt);return t.forEach(s=>{const l=new jn(s,0),c=new jn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],u=>{r=r.add(u.Hr)})}),he.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let l=r;Be.isDocumentKey(l)||(l=l.child(""));const c=new jn(new Be(l),0);let u=new _n(lt);return this.Yr.forEachWhile(h=>{const m=h.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(u=u.add(h.Hr)),!0)},c),he.resolve(this.ei(u))}ei(e){const t=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Tt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return he.forEach(t.mutations,s=>{const l=new jn(s.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new jn(t,0),s=this.Yr.firstAfterOrEqual(r);return he.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.ni=e,this.docs=function(){return new Zt(Be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),l=s?s.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let r=Di();return t.forEach(s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():Gn.newInvalidDocument(s))}),he.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let l=Di();const c=t.path,u=new Be(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:g}}=h.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||xV(yV(g),r)<=0||(s.has(g.key)||Tm(t,g))&&(l=l.insert(g.key,g.mutableCopy()))}return he.resolve(l)}getAllFromCollectionGroup(e,t,r,s){Ye(9500)}ri(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new q3(this)}getSize(e){return he.resolve(this.size)}}class q3 extends L3{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.persistence=e,this.ii=new Xa(t=>Qy(t),Yy),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.si=0,this.oi=new rx,this.targetCount=0,this._i=pc.ar()}forEachTarget(e,t){return this.ii.forEach((r,s)=>t(s)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),he.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new pc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.hr(t),he.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let s=0;const l=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),he.waitFor(l).next(()=>s)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach(c=>{l.push(s.markPotentiallyOrphaned(e,c))}),he.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t){this.ai={},this.overlays={},this.ui=new Em(0),this.ci=!1,this.ci=!0,this.li=new $3,this.referenceDelegate=e(this),this.hi=new W3(this),this.indexManager=new A3,this.remoteDocumentCache=function(s){return new B3(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new I3(t),this.Ti=new V3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new U3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new z3(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const s=new H3(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(l=>this.referenceDelegate.di(s).next(()=>l)).toPromise().then(l=>(s.raiseOnCommittedEvent(),l))}Ei(e,t){return he.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class H3 extends _V{constructor(e){super(),this.currentSequenceNumber=e}}class sx{constructor(e){this.persistence=e,this.Ai=new rx,this.Ri=null}static Vi(e){return new sx(e)}get mi(){if(this.Ri)return this.Ri;throw Ye(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(l=>this.mi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.mi,r=>{const s=Be.fromPath(r);return this.fi(e,s).next(l=>{l||t.removeEntry(s,rt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return he.or([()=>he.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Wf{constructor(e,t){this.persistence=e,this.gi=new Xa(r=>SV(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=O3(this,t)}static Vi(e,t){return new Wf(e,t)}Ii(){}di(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return he.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(l=>l?he.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ri(e,c=>this.Sr(e,c,t).next(u=>{u||(r++,l.removeEntry(c,rt.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),he.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pf(e.data.value)),t}Sr(e,t,r){return he.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return he.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=ht(),s=ht();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new ix(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return CL()?8:EV(Xn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const l={result:null};return this.ps(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ys(e,t,s,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new K3;return this.ws(e,t,c).next(u=>{if(l.result=u,this.Rs)return this.Ss(e,t,c,u.size)})}).next(()=>l.result)}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Ul()<=dt.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",$l(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),he.resolve()):(Ul()<=dt.DEBUG&&Pe("QueryEngine","Query:",$l(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ul()<=dt.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",$l(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bs(t))):he.resolve())}ps(e,t){if(qE(t))return he.resolve(null);let r=Bs(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Uv(t,null,"F"),r=Bs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=ht(...l);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const m=this.bs(t,u);return this.Ds(t,m,c,h.readTime)?this.ps(e,Uv(t,null,"F")):this.vs(e,m,t,h)}))})))}ys(e,t,r,s){return qE(t)||s.isEqual(rt.min())?he.resolve(null):this.gs.getDocuments(e,r).next(l=>{const c=this.bs(t,l);return this.Ds(t,c,r,s)?he.resolve(null):(Ul()<=dt.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$l(t)),this.vs(e,c,t,vV(s,Qu)).next(u=>u))})}bs(e,t){let r=new _n(xT(e));return t.forEach((s,l)=>{Tm(e,l)&&(r=r.add(l))}),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ws(e,t,r){return Ul()<=dt.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",$l(t)),this.gs.getDocumentsMatchingQuery(e,t,Bo.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="LocalStore",Q3=3e8;class Y3{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new Zt(lt),this.Ms=new Xa(l=>Qy(l),Yy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F3(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function X3(n,e,t,r){return new Y3(n,e,t,r)}async function BT(n,e){const t=it(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(l=>(s=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],u=[];let h=ht();for(const m of s){c.push(m.batchId);for(const g of m.mutations)h=h.add(g.key)}for(const m of l){u.push(m.batchId);for(const g of m.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next(m=>({Bs:m,removedBatchIds:c,addedBatchIds:u}))})})}function J3(n,e){const t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(u,h,m,g){const v=m.batch,y=v.keys();let b=he.resolve();return y.forEach(S=>{b=b.next(()=>g.getEntry(h,S)).next(E=>{const x=m.docVersions.get(S);Tt(x!==null,48541),E.version.compareTo(x)<0&&(v.applyToRemoteDocument(E,m),E.isValidDocument()&&(E.setReadTime(m.commitVersion),g.addEntry(E)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(h,v))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=ht();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(h=h.add(u.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function qT(n){const e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Z3(n,e){const t=it(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const u=[];e.targetChanges.forEach((g,v)=>{const y=s.get(v);if(!y)return;u.push(t.hi.removeMatchingKeys(l,g.removedDocuments,v).next(()=>t.hi.addMatchingKeys(l,g.addedDocuments,v)));let b=y.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(Mn.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),s=s.insert(v,b),function(E,x,j){return E.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=Q3?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(y,b,g)&&u.push(t.hi.updateTargetData(l,b))});let h=Di(),m=ht();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(l,g))}),u.push(eU(l,c,e.documentUpdates).next(g=>{h=g.Ls,m=g.ks})),!r.isEqual(rt.min())){const g=t.hi.getLastRemoteSnapshotVersion(l).next(v=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,r));u.push(g)}return he.waitFor(u).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,h,m)).next(()=>h)}).then(l=>(t.Fs=s,l))}function eU(n,e,t){let r=ht(),s=ht();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let c=Di();return t.forEach((u,h)=>{const m=l.get(u);h.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(rt.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||h.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):Pe(ox,"Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",h.version)}),{Ls:c,ks:s}})}function tU(n,e){const t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Hy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nU(n,e){const t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.hi.getTargetData(r,e).next(l=>l?(s=l,he.resolve(s)):t.hi.allocateTargetId(r).next(c=>(s=new Co(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function Wv(n,e,t){const r=it(n),s=r.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!Rc(c))throw c;Pe(ox,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function rb(n,e,t){const r=it(n);let s=rt.min(),l=ht();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,m,g){const v=it(h),y=v.Ms.get(g);return y!==void 0?he.resolve(v.Fs.get(y)):v.hi.getTargetData(m,g)}(r,c,Bs(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(h=>{l=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,t?s:rt.min(),t?l:ht())).next(u=>(rU(r,BV(e),u),{documents:u,qs:l})))}function rU(n,e,t){let r=n.xs.get(e)||rt.min();t.forEach((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.xs.set(e,r)}class sb{constructor(){this.activeTargetIds=QV()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sU{constructor(){this.Fo=new sb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new sb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="ConnectivityMonitor";class ob{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Pe(ib,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Pe(ib,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yh=null;function Hv(){return Yh===null?Yh=function(){return 268435456+Math.round(2147483648*Math.random())}():Yh++,"0x"+Yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="RestConnection",oU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aU{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Uf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,l){const c=Hv(),u=this.Go(e,t.toUriEncodedString());Pe(Ug,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,l);const{host:m}=new URL(u),g=Ka(m);return this.jo(e,u,h,r,g).then(v=>(Pe(Ug,`Received RPC '${e}' ${c}: `,v),v),v=>{throw $a(Ug,`RPC '${e}' ${c} failed with error: `,v,"url: ",u,"request:",r),v})}Jo(e,t,r,s,l,c){return this.Wo(e,t,r,s,l)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ac}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,l)=>e[l]=s),r&&r.headers.forEach((s,l)=>e[l]=s)}Go(e,t){const r=oU[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="WebChannelConnection";class cU extends aU{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,l){const c=Hv();return new Promise((u,h)=>{const m=new KN;m.setWithCredentials(!0),m.listenOnce(GN.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case mf.NO_ERROR:const v=m.getResponseJson();Pe(Hn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),u(v);break;case mf.TIMEOUT:Pe(Hn,`RPC '${e}' ${c} timed out`),h(new Ce(ce.DEADLINE_EXCEEDED,"Request time out"));break;case mf.HTTP_ERROR:const y=m.getStatus();if(Pe(Hn,`RPC '${e}' ${c} failed with status:`,y,"response text:",m.getResponseText()),y>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b==null?void 0:b.error;if(S&&S.status&&S.message){const E=function(j){const I=j.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(I)>=0?I:ce.UNKNOWN}(S.status);h(new Ce(E,S.message))}else h(new Ce(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Ce(ce.UNAVAILABLE,"Connection failed."));break;default:Ye(9055,{c_:e,streamId:c,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{Pe(Hn,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(s);Pe(Hn,`RPC '${e}' ${c} sending request:`,s),m.send(t,"POST",g,r,15)})}P_(e,t,r){const s=Hv(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=XN(),u=YN(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=l.join("");Pe(Hn,`Creating RPC '${e}' stream ${s}: ${g}`,h);const v=c.createWebChannel(g,h);this.T_(v);let y=!1,b=!1;const S=new lU({Ho:x=>{b?Pe(Hn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(y||(Pe(Hn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),y=!0),Pe(Hn,`RPC '${e}' stream ${s} sending:`,x),v.send(x))},Yo:()=>v.close()}),E=(x,j,I)=>{x.listen(j,C=>{try{I(C)}catch(O){setTimeout(()=>{throw O},0)}})};return E(v,_u.EventType.OPEN,()=>{b||(Pe(Hn,`RPC '${e}' stream ${s} transport opened.`),S.s_())}),E(v,_u.EventType.CLOSE,()=>{b||(b=!0,Pe(Hn,`RPC '${e}' stream ${s} transport closed`),S.__(),this.I_(v))}),E(v,_u.EventType.ERROR,x=>{b||(b=!0,$a(Hn,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),S.__(new Ce(ce.UNAVAILABLE,"The operation could not be completed")))}),E(v,_u.EventType.MESSAGE,x=>{var j;if(!b){const I=x.data[0];Tt(!!I,16349);const C=I,O=(C==null?void 0:C.error)||((j=C[0])===null||j===void 0?void 0:j.error);if(O){Pe(Hn,`RPC '${e}' stream ${s} received error:`,O);const U=O.status;let q=function(D){const k=dn[D];if(k!==void 0)return AT(k)}(U),P=O.message;q===void 0&&(q=ce.INTERNAL,P="Unknown error status: "+U+" with message "+O.message),b=!0,S.__(new Ce(q,P)),v.close()}else Pe(Hn,`RPC '${e}' stream ${s} received:`,I),S.a_(I)}}),E(u,QN.STAT_EVENT,x=>{x.stat===Rv.PROXY?Pe(Hn,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Rv.NOPROXY&&Pe(Hn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function $g(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n){return new m3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,t,r=1e3,s=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&Pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="PersistentStream";class HT{constructor(e,t,r,s,l,c,u,h){this.Fi=e,this.w_=r,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new WT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(ki(t.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===t&&this.W_(r,s)},r=>{e(()=>{const s=new Ce(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Pe(ab,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Pe(ab,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uU extends HT{constructor(e,t,r,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=v3(this.serializer,e),r=function(l){if(!("targetChange"in l))return rt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?rt.min():c.readTime?qs(c.readTime):rt.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=qv(this.serializer),t.addTarget=function(l,c){let u;const h=c.target;if(u=Fv(h)?{documents:w3(l,h)}:{query:_3(l,h).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=kT(l,c.resumeToken);const m=$v(l,c.expectedCount);m!==null&&(u.expectedCount=m)}else if(c.snapshotVersion.compareTo(rt.min())>0){u.readTime=qf(l,c.snapshotVersion.toTimestamp());const m=$v(l,c.expectedCount);m!==null&&(u.expectedCount=m)}return u}(this.serializer,e);const r=b3(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=qv(this.serializer),t.removeTarget=e,this.k_(t)}}class dU extends HT{constructor(e,t,r,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=x3(e.writeResults,e.commitTime),r=qs(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=qv(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>y3(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{}class fU extends hU{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Ce(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Wo(e,zv(t,r),s,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ce(ce.UNKNOWN,l.toString())})}Jo(e,t,r,s,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,zv(t,r),s,c,u,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ce(ce.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class mU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ki(t),this._a=!1):Pe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="RemoteStore";class pU{constructor(e,t,r,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{Ja(this)&&(Pe(za,"Restarting streams for network reachability change."),await async function(h){const m=it(h);m.Ia.add(4),await yd(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Pm(m)}(this))})}),this.Aa=new mU(r,s)}}async function Pm(n){if(Ja(n))for(const e of n.da)await e(!0)}async function yd(n){for(const e of n.da)await e(!1)}function KT(n,e){const t=it(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),ux(t)?cx(t):kc(t).x_()&&lx(t,e))}function ax(n,e){const t=it(n),r=kc(t);t.Ta.delete(e),r.x_()&&GT(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ja(t)&&t.Aa.set("Unknown"))}function lx(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}kc(n).H_(e)}function GT(n,e){n.Ra.$e(e),kc(n).Y_(e)}function cx(n){n.Ra=new u3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),kc(n).start(),n.Aa.aa()}function ux(n){return Ja(n)&&!kc(n).M_()&&n.Ta.size>0}function Ja(n){return it(n).Ia.size===0}function QT(n){n.Ra=void 0}async function gU(n){n.Aa.set("Online")}async function vU(n){n.Ta.forEach((e,t)=>{lx(n,e)})}async function yU(n,e){QT(n),ux(n)?(n.Aa.la(e),cx(n)):n.Aa.set("Unknown")}async function xU(n,e,t){if(n.Aa.set("Online"),e instanceof RT&&e.state===2&&e.cause)try{await async function(s,l){const c=l.cause;for(const u of l.targetIds)s.Ta.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ta.delete(u),s.Ra.removeTarget(u))}(n,e)}catch(r){Pe(za,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hf(n,r)}else if(e instanceof yf?n.Ra.Ye(e):e instanceof PT?n.Ra.it(e):n.Ra.et(e),!t.isEqual(rt.min()))try{const r=await qT(n.localStore);t.compareTo(r)>=0&&await function(l,c){const u=l.Ra.Pt(c);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const g=l.Ta.get(m);g&&l.Ta.set(m,g.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach((h,m)=>{const g=l.Ta.get(h);if(!g)return;l.Ta.set(h,g.withResumeToken(Mn.EMPTY_BYTE_STRING,g.snapshotVersion)),GT(l,h);const v=new Co(g.target,h,m,g.sequenceNumber);lx(l,v)}),l.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){Pe(za,"Failed to raise snapshot:",r),await Hf(n,r)}}async function Hf(n,e,t){if(!Rc(e))throw e;n.Ia.add(1),await yd(n),n.Aa.set("Offline"),t||(t=()=>qT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Pe(za,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Pm(n)})}function YT(n,e){return e().catch(t=>Hf(n,t,e))}async function Rm(n){const e=it(n),t=Ko(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Hy;for(;wU(e);)try{const s=await tU(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,_U(e,s)}catch(s){await Hf(e,s)}XT(e)&&JT(e)}function wU(n){return Ja(n)&&n.Pa.length<10}function _U(n,e){n.Pa.push(e);const t=Ko(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function XT(n){return Ja(n)&&!Ko(n).M_()&&n.Pa.length>0}function JT(n){Ko(n).start()}async function EU(n){Ko(n).na()}async function bU(n){const e=Ko(n);for(const t of n.Pa)e.X_(t.mutations)}async function SU(n,e,t){const r=n.Pa.shift(),s=ex.from(r,e,t);await YT(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Rm(n)}async function NU(n,e){e&&Ko(n).Z_&&await async function(r,s){if(function(c){return l3(c)&&c!==ce.ABORTED}(s.code)){const l=r.Pa.shift();Ko(r).N_(),await YT(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),await Rm(r)}}(n,e),XT(n)&&JT(n)}async function lb(n,e){const t=it(n);t.asyncQueue.verifyOperationInProgress(),Pe(za,"RemoteStore received new credentials");const r=Ja(t);t.Ia.add(3),await yd(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Pm(t)}async function TU(n,e){const t=it(n);e?(t.Ia.delete(2),await Pm(t)):e||(t.Ia.add(2),await yd(t),t.Aa.set("Unknown"))}function kc(n){return n.Va||(n.Va=function(t,r,s){const l=it(t);return l.ia(),new uU(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(n.datastore,n.asyncQueue,{Zo:gU.bind(null,n),e_:vU.bind(null,n),n_:yU.bind(null,n),J_:xU.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),ux(n)?cx(n):n.Aa.set("Unknown")):(await n.Va.stop(),QT(n))})),n.Va}function Ko(n){return n.ma||(n.ma=function(t,r,s){const l=it(t);return l.ia(),new dU(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:EU.bind(null,n),n_:NU.bind(null,n),ea:bU.bind(null,n),ta:SU.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Rm(n)):(await n.ma.stop(),n.Pa.length>0&&(Pe(za,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,t,r,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new Do,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,l){const c=Date.now()+r,u=new dx(e,t,c,s,l);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ce(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hx(n,e){if(ki("AsyncQueue",`${e}: ${n}`),Rc(n))return new Ce(ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=Eu(),this.sortedSet=new Zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Yl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.fa=new Zt(Be.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ye(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class gc{constructor(e,t,r,s,l,c,u,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,l){const c=[];return t.forEach(u=>{c.push({type:0,doc:u})}),new gc(e,t,Yl.emptySet(t),c,r,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class IU{constructor(){this.queries=ub(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=it(t),l=s.queries;s.queries=ub(),l.forEach((c,u)=>{for(const h of u.wa)h.onError(r)})})(this,new Ce(ce.ABORTED,"Firestore shutting down"))}}function ub(){return new Xa(n=>yT(n),Nm)}async function ZT(n,e){const t=it(n);let r=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.ba()&&(r=2):(l=new CU,r=e.ba()?0:1);try{switch(r){case 0:l.ya=await t.onListen(s,!0);break;case 1:l.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=hx(c,`Initialization of query '${$l(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&fx(t)}async function eC(n,e){const t=it(n),r=e.query;let s=3;const l=t.queries.get(r);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?s=e.ba()?0:1:!l.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function jU(n,e){const t=it(n);let r=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const u of c.wa)u.Ca(s)&&(r=!0);c.ya=s}}r&&fx(t)}function AU(n,e,t){const r=it(n),s=r.queries.get(e);if(s)for(const l of s.wa)l.onError(t);r.queries.delete(e)}function fx(n){n.Da.forEach(e=>{e.next()})}var Kv,db;(db=Kv||(Kv={})).Fa="default",db.Cache="cache";class tC{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new gc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Kv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.key=e}}class rC{constructor(e){this.key=e}}class PU{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ht(),this.mutatedKeys=ht(),this.Xa=xT(e),this.eu=new Yl(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new cb,s=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,v)=>{const y=s.get(g),b=Tm(this.query,v)?v:null,S=!!y&&this.mutatedKeys.has(y.key),E=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let x=!1;y&&b?y.data.isEqual(b.data)?S!==E&&(r.track({type:3,doc:b}),x=!0):this.iu(y,b)||(r.track({type:2,doc:b}),x=!0,(h&&this.Xa(b,h)>0||m&&this.Xa(b,m)<0)&&(u=!0)):!y&&b?(r.track({type:0,doc:b}),x=!0):y&&!b&&(r.track({type:1,doc:y}),x=!0,(h||m)&&(u=!0)),x&&(b?(c=c.add(b),l=E?l.add(g):l.delete(g)):(c=c.delete(g),l=l.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),l=l.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:u,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,v)=>function(b,S){const E=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye(20277,{At:x})}};return E(b)-E(S)}(g.type,v.type)||this.Xa(g.doc,v.doc)),this.su(r),s=s!=null&&s;const u=t&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,m=h!==this.Ya;return this.Ya=h,c.length!==0||m?{snapshot:new gc(this.query,e.eu,l,c,e.mutatedKeys,h===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new cb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ht(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new rC(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new nC(r))}),t}uu(e){this.Ha=e.qs,this.Za=ht();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return gc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const mx="SyncEngine";class RU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class kU{constructor(e){this.key=e,this.lu=!1}}class DU{constructor(e,t,r,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Xa(u=>yT(u),Nm),this.Tu=new Map,this.Iu=new Set,this.du=new Zt(Be.comparator),this.Eu=new Map,this.Au=new rx,this.Ru={},this.Vu=new Map,this.mu=pc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function OU(n,e,t=!0){const r=cC(n);let s;const l=r.Pu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.cu()):s=await sC(r,e,t,!0),s}async function LU(n,e){const t=cC(n);await sC(t,e,!0,!1)}async function sC(n,e,t,r){const s=await nU(n.localStore,Bs(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let u;return r&&(u=await MU(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&KT(n.remoteStore,s),u}async function MU(n,e,t,r,s){n.gu=(v,y,b)=>async function(E,x,j,I){let C=x.view.nu(j);C.Ds&&(C=await rb(E.localStore,x.query,!1).then(({documents:P})=>x.view.nu(P,C)));const O=I&&I.targetChanges.get(x.targetId),U=I&&I.targetMismatches.get(x.targetId)!=null,q=x.view.applyChanges(C,E.isPrimaryClient,O,U);return fb(E,x.targetId,q._u),q.snapshot}(n,v,y,b);const l=await rb(n.localStore,e,!0),c=new PU(e,l.qs),u=c.nu(l.documents),h=vd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=c.applyChanges(u,n.isPrimaryClient,h);fb(n,t,m._u);const g=new RU(e,t,c);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function FU(n,e,t){const r=it(n),s=r.Pu.get(e),l=r.Tu.get(s.targetId);if(l.length>1)return r.Tu.set(s.targetId,l.filter(c=>!Nm(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Wv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&ax(r.remoteStore,s.targetId),Gv(r,s.targetId)}).catch(Pc)):(Gv(r,s.targetId),await Wv(r.localStore,s.targetId,!0))}async function VU(n,e){const t=it(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ax(t.remoteStore,r.targetId))}async function UU(n,e,t){const r=KU(n);try{const s=await function(c,u){const h=it(c),m=pt.now(),g=u.reduce((b,S)=>b.add(S.key),ht());let v,y;return h.persistence.runTransaction("Locally write mutations","readwrite",b=>{let S=Di(),E=ht();return h.Os.getEntries(b,g).next(x=>{S=x,S.forEach((j,I)=>{I.isValidDocument()||(E=E.add(j))})}).next(()=>h.localDocuments.getOverlayedDocuments(b,S)).next(x=>{v=x;const j=[];for(const I of u){const C=r3(I,v.get(I.key).overlayedDocument);C!=null&&j.push(new Jo(I.key,C,uT(C.value.mapValue),ms.exists(!0)))}return h.mutationQueue.addMutationBatch(b,m,j,u)}).next(x=>{y=x;const j=x.applyToLocalDocumentSet(v,E);return h.documentOverlayCache.saveOverlays(b,x.batchId,j)})}).then(()=>({batchId:y.batchId,changes:_T(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,h){let m=c.Ru[c.currentUser.toKey()];m||(m=new Zt(lt)),m=m.insert(u,h),c.Ru[c.currentUser.toKey()]=m}(r,s.batchId,t),await xd(r,s.changes),await Rm(r.remoteStore)}catch(s){const l=hx(s,"Failed to persist write");t.reject(l)}}async function iC(n,e){const t=it(n);try{const r=await Z3(t.localStore,e);e.targetChanges.forEach((s,l)=>{const c=t.Eu.get(l);c&&(Tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.lu=!0:s.modifiedDocuments.size>0?Tt(c.lu,14607):s.removedDocuments.size>0&&(Tt(c.lu,42227),c.lu=!1))}),await xd(t,r,e)}catch(r){await Pc(r)}}function hb(n,e,t){const r=it(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach((l,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(c,u){const h=it(c);h.onlineState=u;let m=!1;h.queries.forEach((g,v)=>{for(const y of v.wa)y.va(u)&&(m=!0)}),m&&fx(h)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $U(n,e,t){const r=it(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),l=s&&s.key;if(l){let c=new Zt(Be.comparator);c=c.insert(l,Gn.newNoDocument(l,rt.min()));const u=ht().add(l),h=new jm(rt.min(),new Map,new Zt(lt),c,u);await iC(r,h),r.du=r.du.remove(l),r.Eu.delete(e),px(r)}else await Wv(r.localStore,e,!1).then(()=>Gv(r,e,t)).catch(Pc)}async function zU(n,e){const t=it(n),r=e.batch.batchId;try{const s=await J3(t.localStore,e);aC(t,r,null),oC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await xd(t,s)}catch(s){await Pc(s)}}async function BU(n,e,t){const r=it(n);try{const s=await function(c,u){const h=it(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let g;return h.mutationQueue.lookupMutationBatch(m,u).next(v=>(Tt(v!==null,37113),g=v.keys(),h.mutationQueue.removeMutationBatch(m,v))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g)).next(()=>h.localDocuments.getDocuments(m,g))})}(r.localStore,e);aC(r,e,t),oC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await xd(r,s)}catch(s){await Pc(s)}}function oC(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function aC(n,e,t){const r=it(n);let s=r.Ru[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Gv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||lC(n,r)})}function lC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ax(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),px(n))}function fb(n,e,t){for(const r of t)r instanceof nC?(n.Au.addReference(r.key,e),qU(n,r)):r instanceof rC?(Pe(mx,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||lC(n,r.key)):Ye(19791,{yu:r})}function qU(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(Pe(mx,"New document in limbo: "+t),n.Iu.add(r),px(n))}function px(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Be(kt.fromString(e)),r=n.mu.next();n.Eu.set(r,new kU(t)),n.du=n.du.insert(t,r),KT(n.remoteStore,new Co(Bs(Xy(t.path)),r,"TargetPurposeLimboResolution",Em.ue))}}async function xd(n,e,t){const r=it(n),s=[],l=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,h)=>{c.push(r.gu(h,e,t).then(m=>{var g;if((m||t)&&r.isPrimaryClient){const v=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,v?"current":"not-current")}if(m){s.push(m);const v=ix.Es(h.targetId,m);l.push(v)}}))}),await Promise.all(c),r.hu.J_(s),await async function(h,m){const g=it(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>he.forEach(m,y=>he.forEach(y.Is,b=>g.persistence.referenceDelegate.addReference(v,y.targetId,b)).next(()=>he.forEach(y.ds,b=>g.persistence.referenceDelegate.removeReference(v,y.targetId,b)))))}catch(v){if(!Rc(v))throw v;Pe(ox,"Failed to update sequence numbers: "+v)}for(const v of m){const y=v.targetId;if(!v.fromCache){const b=g.Fs.get(y),S=b.snapshotVersion,E=b.withLastLimboFreeSnapshotVersion(S);g.Fs=g.Fs.insert(y,E)}}}(r.localStore,l))}async function WU(n,e){const t=it(n);if(!t.currentUser.isEqual(e)){Pe(mx,"User change. New user:",e.toKey());const r=await BT(t.localStore,e);t.currentUser=e,function(l,c){l.Vu.forEach(u=>{u.forEach(h=>{h.reject(new Ce(ce.CANCELLED,c))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xd(t,r.Bs)}}function HU(n,e){const t=it(n),r=t.Eu.get(e);if(r&&r.lu)return ht().add(r.key);{let s=ht();const l=t.Tu.get(e);if(!l)return s;for(const c of l){const u=t.Pu.get(c);s=s.unionWith(u.view.tu)}return s}}function cC(n){const e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$U.bind(null,e),e.hu.J_=jU.bind(null,e.eventManager),e.hu.pu=AU.bind(null,e.eventManager),e}function KU(n){const e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BU.bind(null,e),e}class Kf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Am(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return X3(this.persistence,new G3,e.initialUser,this.serializer)}Du(e){return new zT(sx.Vi,this.serializer)}bu(e){return new sU}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kf.provider={build:()=>new Kf};class GU extends Kf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Tt(this.persistence.referenceDelegate instanceof Wf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new k3(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?yr.withCacheSize(this.cacheSizeBytes):yr.DEFAULT;return new zT(r=>Wf.Vi(r,t),this.serializer)}}class Qv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WU.bind(null,this.syncEngine),await TU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IU}()}createDatastore(e){const t=Am(e.databaseInfo.databaseId),r=function(l){return new cU(l)}(e.databaseInfo);return function(l,c,u,h){return new fU(l,c,u,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,l,c,u){return new pU(r,s,l,c,u)}(this.localStore,this.datastore,e.asyncQueue,t=>hb(this.syncEngine,t,0),function(){return ob.C()?new ob:new iU}())}createSyncEngine(e,t){return function(s,l,c,u,h,m,g){const v=new DU(s,l,c,u,h,m);return g&&(v.fu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const l=it(s);Pe(za,"RemoteStore shutting down."),l.Ia.add(5),await yd(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Qv.provider={build:()=>new Qv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="FirestoreClient";class QU{constructor(e,t,r,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=vr.UNAUTHENTICATED,this.clientId=qy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{Pe(Go,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Pe(Go,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Do;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=hx(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zg(n,e){n.asyncQueue.verifyOperationInProgress(),Pe(Go,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await BT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{$a("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Pe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{$a("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=e}async function mb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await YU(n);Pe(Go,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>lb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>lb(e.remoteStore,s)),n._onlineComponents=e}async function YU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe(Go,"Using user provided OfflineComponentProvider");try{await zg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ce.FAILED_PRECONDITION||s.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;$a("Error using user provided cache. Falling back to memory cache: "+t),await zg(n,new Kf)}}else Pe(Go,"Using default OfflineComponentProvider"),await zg(n,new GU(void 0));return n._offlineComponents}async function dC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe(Go,"Using user provided OnlineComponentProvider"),await mb(n,n._uninitializedComponentsProvider._online)):(Pe(Go,"Using default OnlineComponentProvider"),await mb(n,new Qv))),n._onlineComponents}function XU(n){return dC(n).then(e=>e.syncEngine)}async function Yv(n){const e=await dC(n),t=e.eventManager;return t.onListen=OU.bind(null,e.syncEngine),t.onUnlisten=FU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=LU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=VU.bind(null,e.syncEngine),t}function JU(n,e,t={}){const r=new Do;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,u,h,m){const g=new uC({next:y=>{g.Ou(),c.enqueueAndForget(()=>eC(l,v)),y.fromCache&&h.source==="server"?m.reject(new Ce(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(y)},error:y=>m.reject(y)}),v=new tC(u,g,{includeMetadataChanges:!0,ka:!0});return ZT(l,v)}(await Yv(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU="firestore.googleapis.com",gb=!0;class vb{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ce(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZU,this.ssl=gb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:gb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$T)throw new Ce(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ce(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ce(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ce(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class km{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ce(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ce(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lV;switch(r.type){case"firstParty":return new dV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ce(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=pb.get(t);r&&(Pe("ComponentProvider","Removing Datastore"),pb.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vi(this.firestore,e,this._query)}}class mn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(pd(t,mn._jsonSchema))return new mn(e,r||null,new Be(kt.fromString(t.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:fn("string",mn._jsonSchemaVersion),referencePath:fn("string")};class Oo extends Vi{constructor(e,t,r){super(e,t,Xy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new Be(e))}withConverter(e){return new Oo(this.firestore,e,this._path)}}function st(n,e,...t){if(n=pn(n),Wy("collection","path",e),n instanceof km){const r=kt.fromString(e,...t);return AE(r),new Oo(n,null,r)}{if(!(n instanceof mn||n instanceof Oo))throw new Ce(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return AE(r),new Oo(n.firestore,null,r)}}function Ms(n,e){if(n=zs(n,km),Wy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ce(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vi(n,null,function(r){return new Ya(kt.emptyPath(),r)}(e))}function Rt(n,e,...t){if(n=pn(n),arguments.length===1&&(e=qy.newId()),Wy("doc","path",e),n instanceof km){const r=kt.fromString(e,...t);return jE(r),new mn(n,null,new Be(r))}{if(!(n instanceof mn||n instanceof Oo))throw new Ce(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return jE(r),new mn(n.firestore,n instanceof Oo?n.converter:null,new Be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="AsyncQueue";class xb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new WT(this,"async_queue_retry"),this.oc=()=>{const r=$g();r&&Pe(yb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=$g();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=$g();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Do;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Rc(e))throw e;Pe(yb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ki("INTERNAL UNHANDLED ERROR: ",wb(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=dx.createAndSchedule(this,e,t,r,l=>this.lc(l));return this.ec.push(s),s}ac(){this.tc&&Ye(47125,{hc:wb(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function wb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of r)if(l in s&&typeof s[l]=="function")return!0;return!1}(n,["next","error","complete"])}class Ba extends km{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new xb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xb(e),this._firestoreClient=void 0,await e}}}function e6(n,e,t){t||(t=Uf);const r=gm(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),l=r.getOptions(t);if(Ma(l,e))return s;throw new Ce(ce.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ce(ce.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$T)throw new Ce(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ka(e.host)&&Ry(e.host),r.initialize({options:e,instanceIdentifier:t})}function gx(n){if(n._terminated)throw new Ce(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||t6(n),n._firestoreClient}function t6(n){var e,t,r;const s=n._freezeSettings(),l=function(u,h,m,g){return new CV(u,h,m,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,hC(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new QU(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kr(Mn.fromBase64String(e))}catch(t){throw new Ce(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kr(Mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pd(e,Kr._jsonSchema))return Kr.fromBase64String(e.bytes)}}Kr._jsonSchemaVersion="firestore/bytes/1.0",Kr._jsonSchema={type:fn("string",Kr._jsonSchemaVersion),bytes:fn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ce(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function n6(){return new wd(Dv)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ws._jsonSchemaVersion}}static fromJSON(e){if(pd(e,Ws._jsonSchema))return new Ws(e.latitude,e.longitude)}}Ws._jsonSchemaVersion="firestore/geoPoint/1.0",Ws._jsonSchema={type:fn("string",Ws._jsonSchemaVersion),latitude:fn("number"),longitude:fn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==s[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pd(e,Hs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Hs(e.vectorValues);throw new Ce(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hs._jsonSchemaVersion="firestore/vectorValue/1.0",Hs._jsonSchema={type:fn("string",Hs._jsonSchemaVersion),vectorValues:fn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=/^__.*__$/;class s6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Jo(e,this.data,this.fieldMask,t,this.fieldTransforms):new gd(e,this.data,t,this.fieldTransforms)}}class fC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye(40011,{Ec:n})}}class vx{constructor(e,t,r,s,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new vx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Gf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(mC(this.Ec)&&r6.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class i6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Am(e)}Dc(e,t,r,s=!1){return new vx({Ec:e,methodName:t,bc:r,path:On.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yx(n){const e=n._freezeSettings(),t=Am(n._databaseId);return new i6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function o6(n,e,t,r,s,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,s);wx("Data must be an object, but it was:",c,r);const u=pC(r,c);let h,m;if(l.merge)h=new kr(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const g=[];for(const v of l.mergeFields){const y=Xv(e,v,t);if(!c.contains(y))throw new Ce(ce.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);vC(g,y)||g.push(y)}h=new kr(g),m=c.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,m=c.fieldTransforms;return new s6(new xr(u),h,m)}class Om extends Dm{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Om}}class xx extends Dm{_toFieldTransform(e){return new ZV(e.path,new ed)}isEqual(e){return e instanceof xx}}function a6(n,e,t,r){const s=n.Dc(1,e,t);wx("Data must be an object, but it was:",s,r);const l=[],c=xr.empty();Xo(r,(h,m)=>{const g=_x(e,h,t);m=pn(m);const v=s.gc(g);if(m instanceof Om)l.push(g);else{const y=_d(m,v);y!=null&&(l.push(g),c.set(g,y))}});const u=new kr(l);return new fC(c,u,s.fieldTransforms)}function l6(n,e,t,r,s,l){const c=n.Dc(1,e,t),u=[Xv(e,r,t)],h=[s];if(l.length%2!=0)throw new Ce(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<l.length;y+=2)u.push(Xv(e,l[y])),h.push(l[y+1]);const m=[],g=xr.empty();for(let y=u.length-1;y>=0;--y)if(!vC(m,u[y])){const b=u[y];let S=h[y];S=pn(S);const E=c.gc(b);if(S instanceof Om)m.push(b);else{const x=_d(S,E);x!=null&&(m.push(b),g.set(b,x))}}const v=new kr(m);return new fC(g,v,c.fieldTransforms)}function c6(n,e,t,r=!1){return _d(t,n.Dc(r?4:3,e))}function _d(n,e){if(gC(n=pn(n)))return wx("Unsupported field value:",e,n),pC(n,e);if(n instanceof Dm)return function(r,s){if(!mC(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(s);l&&s.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const l=[];let c=0;for(const u of r){let h=_d(u,s.yc(c));h==null&&(h={nullValue:"NULL_VALUE"}),l.push(h),c++}return{arrayValue:{values:l}}}(n,e)}return function(r,s){if((r=pn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=pt.fromDate(r);return{timestampValue:qf(s.serializer,l)}}if(r instanceof pt){const l=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qf(s.serializer,l)}}if(r instanceof Ws)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kr)return{bytesValue:kT(s.serializer,r._byteString)};if(r instanceof mn){const l=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw s.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:nx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Hs)return function(c,u){return{mapValue:{fields:{[lT]:{stringValue:cT},[$f]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw u.wc("VectorValues must only contain numeric values.");return Jy(u.serializer,m)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${_m(r)}`)}(n,e)}function pC(n,e){const t={};return nT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xo(n,(r,s)=>{const l=_d(s,e.Vc(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function gC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof Ws||n instanceof Kr||n instanceof mn||n instanceof Dm||n instanceof Hs)}function wx(n,e,t){if(!gC(t)||!eT(t)){const r=_m(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Xv(n,e,t){if((e=pn(e))instanceof wd)return e._internalPath;if(typeof e=="string")return _x(n,e);throw Gf("Field path arguments must be of type string or ",n,!1,void 0,t)}const u6=new RegExp("[~\\*/\\[\\]]");function _x(n,e,t){if(e.search(u6)>=0)throw Gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wd(...e.split("."))._internalPath}catch{throw Gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gf(n,e,t,r,s){const l=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(l||c)&&(h+=" (found",l&&(h+=` in field ${r}`),c&&(h+=` in document ${s}`),h+=")"),new Ce(ce.INVALID_ARGUMENT,u+n+h)}function vC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,t,r,s,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new d6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class d6 extends yC{data(){return super.data()}}function Lm(n,e){return typeof e=="string"?_x(n,e):e instanceof wd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ce(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ex{}class wC extends Ex{}function _r(n,e,...t){let r=[];e instanceof Ex&&r.push(e),r=r.concat(t),function(l){const c=l.filter(h=>h instanceof bx).length,u=l.filter(h=>h instanceof Mm).length;if(c>1||c>0&&u>0)throw new Ce(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Mm extends wC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Mm(e,t,r)}_apply(e){const t=this._parse(e);return _C(e._query,t),new Vi(e.firestore,e.converter,Vv(e._query,t))}_parse(e){const t=yx(e.firestore);return function(l,c,u,h,m,g,v){let y;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Ce(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){bb(v,g);const S=[];for(const E of v)S.push(Eb(h,l,E));y={arrayValue:{values:S}}}else y=Eb(h,l,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||bb(v,g),y=c6(u,c,v,g==="in"||g==="not-in");return hn.create(m,g,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function h6(n,e,t){const r=e,s=Lm("where",n);return Mm._create(s,r,t)}class bx extends Ex{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bx(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ys.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,l){let c=s;const u=l.getFlattenedFilters();for(const h of u)_C(c,h),c=Vv(c,h)}(e._query,t),new Vi(e.firestore,e.converter,Vv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sx extends wC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Sx(e,t)}_apply(e){const t=function(s,l,c){if(s.startAt!==null)throw new Ce(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ce(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zu(l,c)}(e._query,this._field,this._direction);return new Vi(e.firestore,e.converter,function(s,l){const c=s.explicitOrderBy.concat([l]);return new Ya(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function Ed(n,e="asc"){const t=e,r=Lm("orderBy",n);return Sx._create(r,t)}function Eb(n,e,t){if(typeof(t=pn(t))=="string"){if(t==="")throw new Ce(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vT(e)&&t.indexOf("/")!==-1)throw new Ce(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(kt.fromString(t));if(!Be.isDocumentKey(r))throw new Ce(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return FE(n,new Be(r))}if(t instanceof mn)return FE(n,t._key);throw new Ce(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_m(t)}.`)}function bb(n,e){if(!Array.isArray(n)||n.length===0)throw new Ce(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _C(n,e){const t=function(s,l){for(const c of s)for(const u of c.getFlattenedFilters())if(l.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ce(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ce(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class f6{convertValue(e,t="none"){switch(Ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Xo(e,(s,l)=>{r[s]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,s;const l=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[$f].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>ln(c.doubleValue));return new Hs(l)}convertGeoPoint(e){return new Ws(ln(e.latitude),ln(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Sm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yu(e));default:return null}}convertTimestamp(e){const t=qo(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=kt.fromString(e);Tt(VT(r),9688,{name:e});const s=new Xu(r.get(1),r.get(3)),l=new Be(r.popFirst(5));return s.isEqual(t)||ki(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pa extends yC{constructor(e,t,r,s,l,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Lm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Pa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Pa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pa._jsonSchema={type:fn("string",Pa._jsonSchemaVersion),bundleSource:fn("string","DocumentSnapshot"),bundleName:fn("string"),bundle:fn("string")};class xf extends Pa{data(e={}){return super.data(e)}}class Ra{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Su(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xf(this._firestore,this._userDataWriter,r.key,r,new Su(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(u=>{const h=new xf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Su(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>l||u.type!==3).map(u=>{const h=new xf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Su(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,g=-1;return u.type!==0&&(m=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:p6(u.type),doc:h,oldIndex:m,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ce(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function p6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye(61501,{type:n})}}Ra._jsonSchemaVersion="firestore/querySnapshot/1.0",Ra._jsonSchema={type:fn("string",Ra._jsonSchemaVersion),bundleSource:fn("string","QuerySnapshot"),bundleName:fn("string"),bundle:fn("string")};class Nx extends f6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function Pt(n){n=zs(n,Vi);const e=zs(n.firestore,Ba),t=gx(e),r=new Nx(e);return xC(n._query),JU(t,n._query).then(s=>new Ra(e,r,n,s))}function an(n,e,t,...r){n=zs(n,mn);const s=zs(n.firestore,Ba),l=yx(s);let c;return c=typeof(e=pn(e))=="string"||e instanceof wd?l6(l,"updateDoc",n._key,e,t,r):a6(l,"updateDoc",n._key,e),Tx(s,[c.toMutation(n._key,ms.exists(!0))])}function Rr(n){return Tx(zs(n.firestore,Ba),[new Zy(n._key,ms.none())])}function wn(n,e){const t=zs(n.firestore,Ba),r=Rt(n),s=m6(n.converter,e);return Tx(t,[o6(yx(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,ms.exists(!1))]).then(()=>r)}function Zo(n,...e){var t,r,s;n=pn(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||_b(e[c])||(l=e[c++]);const u={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(_b(e[c])){const v=e[c];e[c]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[c+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[c+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let h,m,g;if(n instanceof mn)m=zs(n.firestore,Ba),g=Xy(n._key.path),h={next:v=>{e[c]&&e[c](g6(m,n,v))},error:e[c+1],complete:e[c+2]};else{const v=zs(n,Vi);m=zs(v.firestore,Ba),g=v._query;const y=new Nx(m);h={next:b=>{e[c]&&e[c](new Ra(m,y,v,b))},error:e[c+1],complete:e[c+2]},xC(n._query)}return function(y,b,S,E){const x=new uC(E),j=new tC(b,x,S);return y.asyncQueue.enqueueAndForget(async()=>ZT(await Yv(y),j)),()=>{x.Ou(),y.asyncQueue.enqueueAndForget(async()=>eC(await Yv(y),j))}}(gx(m),g,u,h)}function Tx(n,e){return function(r,s){const l=new Do;return r.asyncQueue.enqueueAndForget(async()=>UU(await XU(r),s,l)),l.promise}(gx(n),e)}function g6(n,e,t){const r=t.docs.get(e._key),s=new Nx(n);return new Pa(n,s,e._key,r,new Su(t.hasPendingWrites,t.fromCache),e.converter)}function Sb(){return new xx("serverTimestamp")}(function(e,t=!0){(function(s){Ac=s})(Ga),Fa(new zo("firestore",(r,{instanceIdentifier:s,options:l})=>{const c=r.getProvider("app").getImmediate(),u=new Ba(new cV(r.getProvider("auth-internal")),new hV(c,r.getProvider("app-check-internal")),function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ce(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xu(m.options.projectId,g)}(c,s),c);return l=Object.assign({useFetchStreams:t},l),u._setSettings(l),u},"PUBLIC").setMultipleInstances(!0)),Vs(NE,TE,e),Vs(NE,TE,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="firebasestorage.googleapis.com",v6="storageBucket",y6=2*60*1e3,x6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends ei{constructor(e,t,r=0){super(Bg(e),`Firebase Storage: ${t} (${Bg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ti.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Bg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ys;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ys||(Ys={}));function Bg(n){return"storage/"+n}function w6(){const n="An unknown error occurred, please check the error payload for server response.";return new ti(Ys.UNKNOWN,n)}function _6(){return new ti(Ys.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function E6(){return new ti(Ys.CANCELED,"User canceled the upload/download.")}function b6(n){return new ti(Ys.INVALID_URL,"Invalid URL '"+n+"'.")}function S6(n){return new ti(Ys.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Nb(n){return new ti(Ys.INVALID_ARGUMENT,n)}function bC(){return new ti(Ys.APP_DELETED,"The Firebase app was deleted.")}function N6(n){return new ti(Ys.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=fs.makeFromUrl(e,t)}catch{return new fs(e,"")}if(r.path==="")return r;throw S6(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function l(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),h={bucket:1,path:3};function m(O){O.path_=decodeURIComponent(O.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${g}/b/${s}/o${y}`,"i"),S={bucket:1,path:3},E=t===EC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",j=new RegExp(`^https?://${E}/${s}/${x}`,"i"),C=[{regex:u,indices:h,postModify:l},{regex:b,indices:S,postModify:m},{regex:j,indices:{bucket:1,path:2},postModify:m}];for(let O=0;O<C.length;O++){const U=C[O],q=U.regex.exec(e);if(q){const P=q[U.indices.bucket];let R=q[U.indices.path];R||(R=""),r=new fs(P,R),U.postModify(r);break}}if(r==null)throw b6(e);return r}}class T6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(n,e,t){let r=1,s=null,l=null,c=!1,u=0;function h(){return u===2}let m=!1;function g(...x){m||(m=!0,e.apply(null,x))}function v(x){s=setTimeout(()=>{s=null,n(b,h())},x)}function y(){l&&clearTimeout(l)}function b(x,...j){if(m){y();return}if(x){y(),g.call(null,x,...j);return}if(h()||c){y(),g.call(null,x,...j);return}r<64&&(r*=2);let C;u===1?(u=2,C=0):C=(r+Math.random())*1e3,v(C)}let S=!1;function E(x){S||(S=!0,y(),!m&&(s!==null?(x||(u=2),clearTimeout(s),v(0)):x||(u=1)))}return v(0),l=setTimeout(()=>{c=!0,E(!0)},t),E}function I6(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(n){return n!==void 0}function Tb(n,e,t,r){if(r<e)throw Nb(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Nb(`Invalid value for '${n}'. Expected ${t} or less.`)}function A6(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Qf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Qf||(Qf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||s||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,t,r,s,l,c,u,h,m,g,v,y=!0,b=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=m,this.progressCallback_=g,this.connectionFactory_=v,this.retry=y,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,E)=>{this.resolve_=S,this.reject_=E,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Xh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=u=>{const h=u.loaded,m=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,m)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const u=l.getErrorCode()===Qf.NO_ERROR,h=l.getStatus();if(!u||P6(h,this.additionalRetryCodes_)&&this.retry){const g=l.getErrorCode()===Qf.ABORT;r(!1,new Xh(!1,null,g));return}const m=this.successCodes_.indexOf(h)!==-1;r(!0,new Xh(m,l))})},t=(r,s)=>{const l=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());j6(h)?l(h):l()}catch(h){c(h)}else if(u!==null){const h=w6();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(s.canceled){const h=this.appDelete_?bC():E6();c(h)}else{const h=_6();c(h)}};this.canceled_?t(!1,new Xh(!1,null,!0)):this.backoffId_=C6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&I6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function k6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function D6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function O6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function L6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function M6(n,e,t,r,s,l,c=!0,u=!1){const h=A6(n.urlParams),m=n.url+h,g=Object.assign({},n.headers);return O6(g,e),k6(g,t),D6(g,l),L6(g,r),new R6(m,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function V6(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t){this._service=e,t instanceof fs?this._location=t:this._location=fs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Yf(e,t)}get root(){const e=new fs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return V6(this._location.path)}get storage(){return this._service}get parent(){const e=F6(this._location.path);if(e===null)return null;const t=new fs(this._location.bucket,e);return new Yf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw N6(e)}}function Cb(n,e){const t=e==null?void 0:e[v6];return t==null?null:fs.makeFromBucketSpec(t,n)}function U6(n,e,t,r={}){n.host=`${e}:${t}`;const s=Ka(e);s&&(Ry(`https://${n.host}/b`),iN("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:l}=r;l&&(n._overrideAuthToken=typeof l=="string"?l:yL(l,n.app.options.projectId))}class $6{constructor(e,t,r,s,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=EC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=y6,this._maxUploadRetryTime=x6,this._requests=new Set,s!=null?this._bucket=fs.makeFromBucketSpec(s,this._host):this._bucket=Cb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fs.makeFromBucketSpec(this._url,e):this._bucket=Cb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Tb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Tb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yf(this,e)}_makeRequest(e,t,r,s,l=!0){if(this._deleted)return new T6(bC());{const c=M6(e,this._appId,r,s,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Ib="@firebase/storage",jb="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="storage";function z6(n=cN(),e){n=pn(n);const r=gm(n,SC).getImmediate({identifier:e}),s=gL("storage");return s&&B6(r,...s),r}function B6(n,e,t,r={}){U6(n,e,t,r)}function q6(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new $6(t,r,s,e,Ga)}function W6(){Fa(new zo(SC,q6,"PUBLIC").setMultipleInstances(!0)),Vs(Ib,jb,""),Vs(Ib,jb,"esm2017")}W6();const H6={apiKey:"AIzaSyDUR89i6kvh3bp51GCgBX0fTwh3bFt1Ksg",authDomain:"medjust-d26eb.firebaseapp.com",projectId:"medjust-d26eb",storageBucket:"medjust-d26eb.appspot.com",messagingSenderId:"631362355665",appId:"1:631362355665:web:4d7f8eadba1bca0969e0f0"},Cx=lN(H6),qg=rV(Cx),$e=e6(Cx,{experimentalForceLongPolling:!0,useFetchStreams:!1});z6(Cx);const NC=_.createContext(void 0);function Ix(){const n=_.useContext(NC);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function K6({children:n}){const[e,t]=_.useState(null),[r,s]=_.useState(!0),[l,c]=_.useState(null),u=v=>new Promise(y=>setTimeout(y,v)),h=async(v,y)=>{if(typeof navigator<"u"&&!navigator.onLine){const x=new Error("No network connection (navigator offline)");throw console.error("Login pre-check failed:",x),c("No network connection - please connect to the internet"),x}const b=3;let S=0,E=null;for(;S<b;){S+=1;try{await zM(qg,v,y),c(null);return}catch(x){if(E=x,console.error(`Login attempt ${S} failed:`,x),!((x==null?void 0:x.code)==="auth/network-request-failed"||(x==null?void 0:x.message)&&x.message.toLowerCase().includes("fetch")))throw(x==null?void 0:x.code)==="auth/wrong-password"||(x==null?void 0:x.code)==="auth/user-not-found"?c("Invalid email or password"):c("Authentication error - see console for details"),x;if(c(`Network error (attempt ${S} of ${b}) - checking connection...`),S<b){const I=500*Math.pow(2,S-1);console.log(`Retrying login in ${I}ms...`),await u(I);continue}}}throw console.error("Login failed after retries:",E),c("Network error - unable to reach Firebase. Check your internet connection, disabling browser extensions (adblockers), or ensure your site domain is added to Firebase Authentication -> Authorized domains."),E},m=async()=>{try{await HM(qg),c(null)}catch(v){console.error("Logout error:",v),t(null)}};_.useEffect(()=>{const v=setTimeout(()=>{r&&(console.log("ðŸ”„ Auth taking too long - continuing without authentication"),s(!1))},5e3),y=WM(qg,b=>{clearTimeout(v),t(b),s(!1),c(null)},b=>{clearTimeout(v),console.error("Auth state change error:",b),c("Authentication error - working offline"),s(!1)});return()=>{clearTimeout(v),y()}},[]);const g={currentUser:e,login:h,logout:m,loading:r,authError:l};return a.jsx(NC.Provider,{value:g,children:!r&&n})}const G6=ad("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=_.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},l)=>{const c=r?Da:"button";return a.jsx(c,{className:nt(G6({variant:e,size:t,className:n})),ref:l,...s})});te.displayName="Button";const xe=_.forwardRef(({className:n,...e},t)=>a.jsx("div",{ref:t,className:nt("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));xe.displayName="Card";const Ge=_.forwardRef(({className:n,...e},t)=>a.jsx("div",{ref:t,className:nt("flex flex-col space-y-1.5 p-6",n),...e}));Ge.displayName="CardHeader";const Xe=_.forwardRef(({className:n,...e},t)=>a.jsx("h3",{ref:t,className:nt("text-2xl font-semibold leading-none tracking-tight",n),...e}));Xe.displayName="CardTitle";const jt=_.forwardRef(({className:n,...e},t)=>a.jsx("p",{ref:t,className:nt("text-sm text-muted-foreground",n),...e}));jt.displayName="CardDescription";const we=_.forwardRef(({className:n,...e},t)=>a.jsx("div",{ref:t,className:nt("p-6 pt-0",n),...e}));we.displayName="CardContent";const Q6=_.forwardRef(({className:n,...e},t)=>a.jsx("div",{ref:t,className:nt("flex items-center p-6 pt-0",n),...e}));Q6.displayName="CardFooter";class Y6 extends Ne.Component{constructor(t){super(t);J0(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.replace(window.location.href)});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),(t.message.includes("fetch")||t.message.includes("Firebase")||t.message.includes("Firestore"))&&console.log("ðŸ”„ Firebase error detected - this is a known connectivity issue"),this.setState({error:t,errorInfo:r})}render(){var t,r,s;if(this.state.hasError){const l=((t=this.state.error)==null?void 0:t.message.includes("fetch"))||((r=this.state.error)==null?void 0:r.message.includes("Firebase"))||((s=this.state.error)==null?void 0:s.message.includes("Firestore"));return a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:a.jsxs(xe,{className:"max-w-md w-full",children:[a.jsx(Ge,{children:a.jsxs(Xe,{className:"flex items-center gap-2 text-destructive",children:[a.jsx(AR,{className:"h-5 w-5"}),l?"Connection Error":"Application Error"]})}),a.jsxs(we,{className:"space-y-4",children:[a.jsx("p",{className:"text-muted-foreground",children:l?"There's a connectivity issue with Firebase services. The app will work in offline mode.":"Something went wrong. Please try refreshing the page."}),!1,a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(te,{onClick:this.handleRetry,className:"flex-1",children:[a.jsx(CR,{className:"h-4 w-4 mr-2"}),"Retry"]}),a.jsx(te,{variant:"outline",onClick:()=>window.location.href="/admin/years",className:"flex-1",children:"Go to Years"})]})]})]})})}return this.props.children}}var jx="Avatar",[X6,Vz]=Li(jx),[J6,TC]=X6(jx),CC=_.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,l]=_.useState("idle");return a.jsx(J6,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:l,children:a.jsx(Ke.span,{...r,ref:e})})});CC.displayName=jx;var IC="AvatarImage",jC=_.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...l}=n,c=TC(IC,t),u=Z6(r),h=En(m=>{s(m),c.onImageLoadingStatusChange(m)});return Ht(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?a.jsx(Ke.img,{...l,ref:e,src:r}):null});jC.displayName=IC;var AC="AvatarFallback",PC=_.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,l=TC(AC,t),[c,u]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&l.imageLoadingStatus!=="loaded"?a.jsx(Ke.span,{...s,ref:e}):null});PC.displayName=AC;function Z6(n){const[e,t]=_.useState("idle");return Ht(()=>{if(!n){t("error");return}let r=!0;const s=new window.Image,l=c=>()=>{r&&t(c)};return t("loading"),s.onload=l("loaded"),s.onerror=l("error"),s.src=n,()=>{r=!1}},[n]),e}var RC=CC,kC=jC,DC=PC;const vc=_.forwardRef(({className:n,...e},t)=>a.jsx(RC,{ref:t,className:nt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));vc.displayName=RC.displayName;const rd=_.forwardRef(({className:n,...e},t)=>a.jsx(kC,{ref:t,className:nt("aspect-square h-full w-full",n),...e}));rd.displayName=kC.displayName;const yc=_.forwardRef(({className:n,...e},t)=>a.jsx(DC,{ref:t,className:nt("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));yc.displayName=DC.displayName;const e5=[{icon:bR,label:"Dashboard",path:"/admin"},{icon:bf,label:"News",path:"/admin/news"},{icon:ds,label:"Years",path:"/admin/years"},{icon:oc,label:"Users",path:"/admin/users"},{icon:oc,label:"Professors",path:"/admin/professors"},{icon:gy,label:"Store",path:"/admin/store"},{icon:Ks,label:"Orders",path:"/admin/orders"},{icon:Ii,label:"Research",path:"/admin/research"},{icon:Vu,label:"Maps",path:"/admin/maps"},{icon:B1,label:"Settings",path:"/admin/settings"}];function t5({isOpen:n}){return a.jsx("div",{className:nt("fixed left-0 top-16 h-[calc(100vh-4rem)] bg-card border-r transition-all duration-300 z-40",n?"w-64":"w-16"),children:a.jsx("nav",{className:"p-4 space-y-2",children:e5.map(e=>a.jsxs("div",{children:[a.jsxs(W_,{to:e.path,className:({isActive:t})=>nt("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors","hover:bg-accent hover:text-accent-foreground",t&&"bg-primary text-primary-foreground hover:bg-primary/90",!n&&"justify-center"),children:[a.jsx(e.icon,{className:"h-5 w-5 flex-shrink-0"}),n&&a.jsx("span",{className:"font-medium",children:e.label})]}),e.children&&n&&a.jsx("div",{className:"ml-6 mt-2 space-y-1",children:e.children.map(t=>a.jsxs(W_,{to:t.path,className:({isActive:r})=>nt("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm","hover:bg-accent hover:text-accent-foreground",r&&"bg-primary text-primary-foreground hover:bg-primary/90"),children:[a.jsx(t.icon,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{children:t.label})]},t.path))})]},e.path))})})}function n5(){var l;const[n,e]=_.useState(!0),{currentUser:t,logout:r}=Ix(),s=async()=>{try{await r()}catch(c){console.error("Error logging out:",c)}};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-card shadow-sm",children:a.jsxs("div",{className:"flex h-16 items-center px-4",children:[a.jsx(te,{variant:"ghost",size:"icon",onClick:()=>e(!n),className:"mr-4",children:a.jsx(TR,{className:"h-5 w-5"})}),a.jsx("div",{className:"flex-1",children:a.jsx("h1",{className:"text-xl font-semibold text-primary",children:"MedJust Admin Dashboard"})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(vc,{className:"h-8 w-8",children:a.jsx(yc,{children:a.jsx(No,{className:"h-4 w-4"})})}),a.jsx("span",{className:"text-sm font-medium",children:((l=t==null?void 0:t.email)==null?void 0:l.split("@")[0])||"Admin"})]}),a.jsx(te,{variant:"ghost",size:"icon",onClick:s,className:"text-muted-foreground hover:text-destructive",children:a.jsx(NR,{className:"h-4 w-4"})})]})]})}),a.jsxs("div",{className:"flex",children:[a.jsx(t5,{isOpen:n}),a.jsx("main",{className:`flex-1 transition-all duration-300 ${n?"ml-64":"ml-16"}`,children:a.jsx("div",{className:"p-6",children:a.jsx(WO,{})})})]})]})}const je=_.forwardRef(({className:n,type:e,...t},r)=>a.jsx("input",{type:e,className:nt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));je.displayName="Input";var r5="Label",OC=_.forwardRef((n,e)=>a.jsx(Ke.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));OC.displayName=r5;var LC=OC;const s5=ad("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Re=_.forwardRef(({className:n,...e},t)=>a.jsx(LC,{ref:t,className:nt(s5(),n),...e}));Re.displayName=LC.displayName;const i5=ad("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),MC=_.forwardRef(({className:n,variant:e,...t},r)=>a.jsx("div",{ref:r,role:"alert",className:nt(i5({variant:e}),n),...t}));MC.displayName="Alert";const o5=_.forwardRef(({className:n,...e},t)=>a.jsx("h5",{ref:t,className:nt("mb-1 font-medium leading-none tracking-tight",n),...e}));o5.displayName="AlertTitle";const FC=_.forwardRef(({className:n,...e},t)=>a.jsx("div",{ref:t,className:nt("text-sm [&_p]:leading-relaxed",n),...e}));FC.displayName="AlertDescription";function a5(){const[n,e]=_.useState(""),[t,r]=_.useState(""),[s,l]=_.useState(""),[c,u]=_.useState(!1),{login:h,authError:m}=Ix(),g=Tc(),v=async y=>{if(y.preventDefault(),!n||!t){l("Please fill in all fields");return}try{if(typeof navigator<"u"&&!navigator.onLine){l("No network connection. Please connect to the internet and try again.");return}l(""),u(!0),await h(n,t),g("/admin")}catch(b){console.error("Login error:",b),m?l(m):(b==null?void 0:b.code)==="auth/network-request-failed"?l("Network error - check your connection and try again."):(b==null?void 0:b.code)==="auth/wrong-password"||(b==null?void 0:b.code)==="auth/user-not-found"?l("Invalid email or password."):l("Failed to log in. Please check your credentials.")}finally{u(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/20 flex items-center justify-center p-4",children:a.jsxs(xe,{className:"w-full max-w-md shadow-xl",children:[a.jsxs(Ge,{className:"space-y-1 text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-4",children:a.jsx(g_,{className:"h-6 w-6 text-primary-foreground"})}),a.jsx(Xe,{className:"text-2xl font-bold",children:"MedJust Admin"}),a.jsx(jt,{children:"Sign in to access the admin dashboard"})]}),a.jsx(we,{children:a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s&&a.jsx(MC,{variant:"destructive",children:a.jsx(FC,{children:s})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"email",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ef,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(je,{id:"email",type:"email",placeholder:"MedAdmin@gmail.com",value:n,onChange:y=>e(y.target.value),className:"pl-10",required:!0})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"password",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(g_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(je,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:t,onChange:y=>r(y.target.value),className:"pl-10",required:!0})]})]}),a.jsx(te,{type:"submit",className:"w-full",disabled:c,children:c?a.jsxs(a.Fragment,{children:[a.jsx(Mo,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}const l5=ad("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function rn({className:n,variant:e,...t}){return a.jsx("div",{className:nt(l5({variant:e}),n),...t})}function Ax(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,l]=_.useState(null);return _.useEffect(()=>{const m=_r(st($e,"news"),Ed("updatedAt","desc")),g=Zo(m,v=>{const y=[];v.forEach(b=>{var E,x;const S=b.data();y.push({id:b.id,title:S.title||"",content:S.content||"",imageUrl:S.imageUrl||"",videoUrl:S.videoUrl||"",createdAt:((E=S.createdAt)==null?void 0:E.toDate())||new Date,updatedAt:((x=S.updatedAt)==null?void 0:x.toDate())||new Date,authorName:S.authorName||"",authorId:S.newsId||b.id,tags:S.tags||[],isPinned:S.isPinned||!1,viewsCount:S.viewsCount||0,attachments:S.attachments||[],yearId:S.yearId||"",yearNumber:S.yearNumber||void 0})}),console.log(`âœ… Successfully loaded ${y.length} news articles from Firebase`),e(y),r(!1)},v=>{console.error("Error fetching news:",v),l(v.message||"Failed to fetch news from Firebase"),r(!1)});return()=>g()},[]),{news:n,loading:t,error:s,createNews:async m=>{try{console.log("ðŸ“ Creating news article:",m.title);const g={...m,createdAt:m.createdAt instanceof Date?pt.fromDate(m.createdAt):Sb(),updatedAt:m.updatedAt instanceof Date?pt.fromDate(m.updatedAt):Sb()};Object.keys(g).forEach(y=>{g[y]===void 0&&delete g[y]});const v=await wn(st($e,"news"),g);console.log("âœ… News article created successfully with ID:",v.id)}catch(g){throw console.error("âŒ Error creating news:",g),console.error("Error details:",g.code,g.message),new Error(`Failed to create news article: ${g.message||"Check Firebase permissions"}`)}},updateNews:async(m,g)=>{try{const v={...g};g.createdAt instanceof Date&&(v.createdAt=pt.fromDate(g.createdAt)),g.updatedAt instanceof Date&&(v.updatedAt=pt.fromDate(g.updatedAt)),Object.keys(v).forEach(y=>{v[y]===void 0&&delete v[y]}),await an(Rt($e,"news",m),v)}catch(v){throw console.error("Error updating news:",v),console.error("Error details:",v.code,v.message),new Error(`Failed to update news article: ${v.message||"Check Firebase permissions"}`)}},deleteNews:async m=>{try{await Rr(Rt($e,"news",m))}catch(g){throw console.error("Error deleting news:",g),console.error("Error details:",g.code,g.message),new Error(`Failed to delete news article: ${g.message||"Check Firebase permissions"}`)}}}}function VC(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,l]=_.useState(null),[c,u]=_.useState(!1),h=[{id:"product1",productId:"product1",name:"Medical Textbook",description:"Comprehensive medical textbook for students",price:89.99,images:["https://example.com/book1.jpg"],categoryId:"books",createdAt:new Date},{id:"product2",productId:"product2",name:"Stethoscope",description:"Professional grade stethoscope",price:120,images:["https://example.com/stethoscope.jpg"],categoryId:"equipment",createdAt:new Date}];_.useEffect(()=>{(async()=>{const S=setTimeout(()=>{t&&!c&&(console.log("ðŸ”„ Firebase taking too long - switching to offline mode"),u(!0),r(!1),l("Working in offline mode - Firebase unavailable"),e(h))},3e3);try{console.log("ðŸ”„ Fetching products from Firebase...");const E=await Pt(st($e,"products")),x=[];E.forEach(j=>{var C;const I=j.data();x.push({id:j.id,productId:I.productId||j.id,name:I.name||"",description:I.description||"",price:I.price||0,types:I.types||(I.price?[{name:"Default",price:I.price}]:[]),images:I.images||[],categoryId:I.categoryId||"",createdAt:((C=I.createdAt)==null?void 0:C.toDate())||new Date})}),clearTimeout(S),e(x.sort((j,I)=>I.createdAt.getTime()-j.createdAt.getTime())),r(!1),l(null),console.log("âœ… Products loaded successfully:",x.length)}catch(E){clearTimeout(S),E.isFirebaseOfflineError?console.log("ðŸ”„ Firebase offline mode detected - using mock data"):console.error("Firebase error - switching to offline mode:",E.message),u(!0),r(!1),l("Working in offline mode - Firebase unavailable"),e(h)}})()},[]);const m=async b=>{var S,E;if(c){const x={id:`product_${Date.now()}`,productId:`product_${Date.now()}`,...b,createdAt:new Date};e(j=>[x,...j]),console.log("âœ… Added product to offline mode:",x.name);return}try{const x={name:b.name,description:b.description,price:b.price||((E=(S=b.types)==null?void 0:S[0])==null?void 0:E.price)||0,types:b.types||(b.price?[{name:"Default",price:b.price}]:[]),images:b.images,categoryId:b.categoryId||"",createdAt:new Date,productId:""};console.log("ðŸ“ Creating new product:",x);const j=await wn(st($e,"products"),x);await an(j,{productId:j.id}),console.log("âœ… Created product with ID:",j.id),window.location.replace(window.location.href)}catch(x){console.error("Error creating product:",x),u(!0),await m(b)}};return{products:n,loading:t,error:s,isOfflineMode:c,createProduct:m,updateProduct:async(b,S)=>{var E;if(c){e(x=>x.map(j=>j.id===b?{...j,...S}:j)),console.log("âœ… Updated product in offline mode");return}try{const x=Rt($e,"products",b),j={...S};S.types&&(j.types=S.types,j.price=((E=S.types[0])==null?void 0:E.price)||S.price||0),await an(x,j),console.log("âœ… Updated product in Firebase:",b),window.location.replace(window.location.href)}catch(x){console.error("Error updating product:",x)}},deleteProduct:async b=>{if(c){e(S=>S.filter(E=>E.id!==b)),console.log("âœ… Deleted product from offline mode");return}try{await Rr(Rt($e,"products",b)),console.log("âœ… Deleted product from Firebase:",b),window.location.replace(window.location.href)}catch(S){console.error("Error deleting product:",S)}},retryConnection:()=>{console.log("ðŸ”„ Retrying Firebase connection..."),r(!0),l(null),u(!1),window.location.replace(window.location.href)}}}const c5=[{id:"1",name:"Dr. Sarah Johnson",department:"Internal Medicine",email:"sarah.johnson@medjust.com",officeLocation:"Medical Building, Room 301",imageUrl:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=300&h=300&fit=crop&crop=face"},{id:"2",name:"Prof. Michael Chen",department:"Surgery",email:"michael.chen@medjust.com",officeLocation:"Surgical Wing, Room 205",imageUrl:"https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=300&h=300&fit=crop&crop=face"},{id:"3",name:"Dr. Emily Rodriguez",department:"Emergency Medicine",email:"emily.rodriguez@medjust.com",officeLocation:"Emergency Department, Office 12",imageUrl:"https://images.unsplash.com/photo-1594824928909-90ad1d93d7c3?w=300&h=300&fit=crop&crop=face"}];function UC(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,l]=_.useState(null),[c,u]=_.useState(!1);_.useEffect(()=>{const v=async()=>{try{const b=_r(st($e,"professors"));await Pt(b);const S=_r(st($e,"professors"),Ed("name","asc"));return Zo(S,x=>{const j=[];x.forEach(I=>{const C=I.data();j.push({id:I.id,name:C.name||"",title:C.title||"",department:C.department||"",email:C.email||"",phone:C.phone||"",officeLocation:C.officeLocation||"",bio:C.bio||"",researchAreas:C.researchAreas||[],website:C.website||"",linkedin:C.linkedin||"",imageUrl:C.imageUrl||""})}),e(j),r(!1)},x=>{console.error("Error in Firebase listener:",x),y()})}catch(b){return console.error("Firebase connection failed:",b),y(),null}},y=()=>{console.log("ðŸ”„ Switching to offline mode with mock data"),u(!0),e(c5),l(null),r(!1)};v()},[]);const h=async v=>{if(c){const y={id:`offline_${Date.now()}`,...v};e(b=>[...b,y]),console.log("âœ… Added professor in offline mode:",y.name);return}try{await wn(st($e,"professors"),{...v,professorId:`prof_${Date.now()}`}),console.log("âœ… Added professor to Firebase:",v.name)}catch(y){console.error("Error creating professor:",y),u(!0),await h(v)}};return{professors:n,loading:t,error:s,createProfessor:h,updateProfessor:async(v,y)=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(b=>b.map(S=>S.id===v?{...S,...y}:S)),console.log("âœ… Updated professor in offline mode");return}try{await an(Rt($e,"professors",v),y),console.log("âœ… Updated professor in Firebase")}catch(b){console.error("Error updating professor:",b),e(S=>S.map(E=>E.id===v?{...E,...y}:E)),console.log("âœ… Updated professor locally (Firebase failed)")}},deleteProfessor:async v=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(y=>y.filter(b=>b.id!==v)),console.log("âœ… Deleted professor in offline mode");return}try{await Rr(Rt($e,"professors",v)),console.log("âœ… Deleted professor from Firebase")}catch(y){console.error("Error deleting professor:",y),e(b=>b.filter(S=>S.id!==v)),console.log("âœ… Deleted professor locally (Firebase failed)")}},isOfflineMode:c}}function Dc(){const[n,e]=_.useState([]),[t,r]=_.useState([]),[s,l]=_.useState([]),[c,u]=_.useState(!0),[h,m]=_.useState(null),[g,v]=_.useState(!1),[y,b]=_.useState(1),[S,E]=_.useState("connecting"),x=()=>{console.log("ðŸ”„ Activating offline mode immediately"),v(!0),E("offline"),u(!1),m(null),e([{id:"offline_year1",yearNumber:1,type:"basic",batchName:"",subjects:[]},{id:"offline_year2",yearNumber:2,type:"basic",batchName:"",subjects:[]},{id:"offline_year3",yearNumber:3,type:"basic",batchName:"",subjects:[]},{id:"offline_year4",yearNumber:4,type:"clinical",batchName:"",subjects:[]},{id:"offline_year5",yearNumber:5,type:"clinical",batchName:"",subjects:[]},{id:"offline_year6",yearNumber:6,type:"clinical",batchName:"",subjects:[]}]),l([])};_.useEffect(()=>{},[]),_.useEffect(()=>{(async()=>{var J,B,K;if(!navigator.onLine){console.log("ðŸš« No internet connection detected - activating offline mode"),x();return}E("connecting"),u(!0);try{console.log("ðŸ”„ Attempting Firebase connection...");const Q=await Pt(st($e,"batches"));let F=[];const H=[];for(const pe of Q.docs){const ue=pe.data(),ye=pe.id,De=ue.batch_name||ue.batchName||"";H.push({id:ye,batchName:De,imageUrl:ue.image_url||ue.imageUrl||"",aca_supervisor:ue.aca_supervisor||ue.acadmic_supervisor||ue.academic_supervisor||"",cr:ue.cr||"",actor:ue.actor||"",group_link:ue.group_link||ue.groupUrl||ue.group_url||""});try{(await Pt(st(pe.ref,"years"))).forEach(Me=>{const Le=Me.data();let ut=Le.order||1;if(Le.name){const bt=String(Le.name).match(/\d+/);bt&&(ut=parseInt(bt[0]))}F.push({id:Me.id,yearNumber:ut,name:Le.name||Le.title||"",type:ut<=3?"basic":"clinical",batchName:De,imageUrl:Le.imageUrl||Le.image_url||"",academicSupervisor:Le.aca_supervisor||Le.acadmic_supervisor||Le.academic_supervisor||"",actor:Le.actor||"",cr:Le.cr||"",groupUrl:Le.group_link||Le.group_url||Le.groupUrl||"",subjects:[],batchId:ye})})}catch(Ie){console.warn("Failed to fetch years for batch",ye,Ie)}}r(H);const le=await Pt(st($e,"Subjects")),Ee=[];for(const pe of le.docs){const ue=pe.data(),ye=await Pt(st(pe.ref,"lectures")),De=[];for(const Ie of ye.docs){const Me=Ie.data(),Le=await Pt(st(Ie.ref,"videos")),ut=[];Le.forEach(en=>{var Dt;const Ze=en.data();ut.push({id:en.id,title:Ze.title||Ze.name||"",url:Ze.url||"",thumbnailUrl:Ze.thumbnailUrl||"",description:Ze.description||"",uploadedAt:((Dt=Ze.uploadedAt)==null?void 0:Dt.toDate())||new Date})});const bt=await Pt(st(Ie.ref,"files")),sn=[];bt.forEach(en=>{var Dt;const Ze=en.data();sn.push({id:en.id,title:Ze.title||Ze.name||"",url:Ze.url||"",description:Ze.description||"",uploadedAt:((Dt=Ze.uploadedAt)==null?void 0:Dt.toDate())||new Date})});const Bt=await Pt(st(Ie.ref,"quizzes")),gn=[];Bt.forEach(en=>{const Ze=en.data();gn.push({id:en.id,title:Ze.title||Ze.name||"",description:Ze.description||"",duration:Ze.duration||30,passRate:Ze.passRate||70,questions:Ze.questions||[]})}),De.push({id:Ie.id,name:Me.name||Me.title||"",description:Me.description||"",subjectId:pe.id,order:Me.order||1,imageUrl:Me.imageUrl||"",createdAt:((J=Me.createdAt)==null?void 0:J.toDate())||new Date,uploadedBy:Me.uploadedBy||"Unknown",videos:ut,files:sn,quizzes:gn})}Ee.push({id:pe.id,name:ue.name||"",subjectId:ue.subjectId||pe.id,yearId:ue.yearId||"",imageUrl:ue.imageUrl||"",lectures:De.sort((Ie,Me)=>Ie.order-Me.order)})}const Te=F.map(pe=>({...pe,subjects:Ee.filter(ue=>ue.yearId===pe.id).sort((ue,ye)=>ue.name.localeCompare(ye.name))}));e(Te.sort((pe,ue)=>pe.yearNumber-ue.yearNumber)),l(Te.flatMap(pe=>pe.subjects)),u(!1),v(!1),E("connected"),m(null),console.log("âœ… Firebase data loaded successfully");try{if(navigator.onLine)for(const pe of Q.docs)try{const ue=await Pt(st(pe.ref,"years"));for(const ye of ue.docs){const De=ye.data(),Ie=Rt(st(pe.ref,"years"),ye.id),Me={};if(De.imageUrl===void 0&&(Me.imageUrl=""),De.batch_name===void 0&&De.batchName===void 0&&(Me.batch_name=((B=pe.data())==null?void 0:B.batch_name)||((K=pe.data())==null?void 0:K.batchName)||""),Object.keys(Me).length>0)try{await an(Ie,Me),console.log(`ðŸ”„ Set missing fields for year ${ye.id}:`,Me)}catch(Le){console.warn(`Failed to set defaults for ${ye.id}:`,Le)}}}catch(ue){console.warn("Could not ensure fields for years under batch",pe.id,ue)}}catch(pe){console.warn("Could not ensure imageUrl fields:",pe)}}catch{console.log("âŒ Firebase connection failed - staying in offline mode"),x()}})()},[y]);const j=()=>{console.log("ï¿½ï¿½ï¿½ Retrying Firebase connection..."),u(!0),m(null),v(!1),E("connecting"),b(Y=>Y+1)},I=async(Y,J)=>{if(Y){if(g||!navigator.onLine){e(B=>B.map(K=>K.id===Y?{...K,...J}:K));return}try{const B=Ms($e,"years"),Q=(await Pt(B)).docs.find(F=>F.id===Y);if(Q){await an(Q.ref,{...J,updatedAt:new Date}),b(F=>F+1);return}e(F=>F.map(H=>H.id===Y?{...H,...J}:H))}catch(B){console.error("Error updating year:",B),e(K=>K.map(Q=>Q.id===Y?{...Q,...J}:Q))}}},C=async(Y,J)=>{if(Y){if(g||!navigator.onLine){r(B=>B.map(K=>K.id===Y?{...K,...J}:K));return}try{const B=Rt($e,"batches",Y);await an(B,{...J,updatedAt:new Date}),b(K=>K+1)}catch(B){console.error("Failed to update batch:",B),r(K=>K.map(Q=>Q.id===Y?{...Q,...J}:Q))}}},O=async(Y,J=3)=>{for(let B=0;B<J;B++)try{return await Y()}catch(K){if(console.log(`Attempt ${B+1} failed:`,K.message),B===J-1)throw K;await new Promise(Q=>setTimeout(Q,1e3*(B+1)))}},U=async Y=>{if(g||!navigator.onLine){const J={id:`subject_${Date.now()}`,name:Y.name,subjectId:`subject_${Date.now()}`,yearId:Y.yearId,imageUrl:Y.imageUrl||"",lectures:[]};l(B=>[...B,J]),e(B=>B.map(K=>K.id===Y.yearId?{...K,subjects:[...K.subjects,J]}:K)),console.log("âœ… Added subject to offline mode:",J.name);return}try{console.log("ðŸ”„ Creating subject with data:",Y),await O(async()=>{const J={name:Y.name,imageUrl:Y.imageUrl||"",hours:Y.hours||3,yearId:Y.yearId,createdAt:pt.fromDate(new Date),updatedAt:pt.fromDate(new Date)};Object.keys(J).forEach(H=>{J[H]===void 0&&delete J[H]});const B=await wn(st($e,"Subjects"),J);await an(B,{subjectId:B.id}),console.log("âœ… Created new subject document:",B.id);const K=B,Q=st(K,"lectures");if((await Pt(Q)).empty){const le=await wn(Q,{name:"Sample Lecture",title:"Sample Lecture",description:"",imageUrl:"",order:1,uploadedBy:"System",createdAt:new Date,lectureId:""});await an(le,{lectureId:le.id});const Ee=["videos","files","quizzes"];for(const Te of Ee){const pe=st(le,Te);let ue={};Te==="videos"?ue={title:"Sample Video",description:"",thumbnailUrl:"",url:"",uploadedAt:new Date,videoId:""}:Te==="files"?ue={title:"Sample File",description:"",url:"",uploadedAt:new Date,fileId:""}:Te==="quizzes"&&(ue={title:"Sample Quiz",description:"",duration:30,passRate:70,questions:[],quizId:""});const ye=await wn(pe,ue),De=`${Te.slice(0,-1)}Id`;await an(ye,{[De]:ye.id})}console.log("âœ… Created complete lecture structure for subject:",K.id)}b(H=>H+1)})}catch(J){console.error("Error creating subject:",J),v(!0),await U(Y)}},q=async Y=>{if(g){const J={id:`lecture_${Date.now()}`,...Y};l(B=>B.map(K=>K.id===Y.subjectId?{...K,lectures:[...K.lectures,J]}:K)),e(B=>B.map(K=>({...K,subjects:K.subjects.map(Q=>Q.id===Y.subjectId?{...Q,lectures:[...Q.lectures,J]}:Q)}))),console.log("âœ… Added lecture to offline mode:",J.name);return}try{await O(async()=>{const J=Rt($e,"Subjects",Y.subjectId),B=st(J,"lectures"),K={title:Y.name,description:Y.description||"",imageUrl:Y.imageUrl||"",order:Y.order||1,uploadedBy:Y.uploadedBy||"Current User",createdAt:new Date,lectureId:""};console.log("ðŸ“ Creating lecture in subcollection:",K);const Q=await wn(B,K);await an(Q,{lectureId:Q.id}),console.log("âœ… Created lecture document with ID:",Q.id),console.log("ðŸ“ Path: /Subjects/"+Y.subjectId+"/lectures/"+Q.id),b(F=>F+1)})}catch(J){console.error("Error creating lecture:",J),v(!0),await q(Y)}},P=async(Y,J)=>{if(g){e(B=>B.map(K=>({...K,subjects:K.subjects.map(Q=>({...Q,lectures:Q.lectures.map(F=>F.id===Y?{...F,...J}:F)}))}))),console.log("âœ… Updated lecture in offline mode");return}try{console.log("ðŸ”„ Updating lecture:",Y,J),await O(async()=>{const B=_r(Ms($e,"lectures")),K=await Pt(B);let Q=null;for(const H of K.docs)if(H.id===Y){Q=H.ref;break}if(!Q)throw new Error(`Lecture ${Y} not found`);const F={...J};F.name&&(F.title=F.name,delete F.name),Object.keys(F).forEach(H=>{F[H]===void 0&&delete F[H]}),F.createdAt instanceof Date&&(F.createdAt=pt.fromDate(F.createdAt)),F.updatedAt instanceof Date&&(F.updatedAt=pt.fromDate(F.updatedAt)),F.updatedAt||(F.updatedAt=pt.fromDate(new Date)),await an(Q,F),console.log("âœ… Updated lecture successfully:",Y),b(H=>H+1)})}catch(B){throw console.error("âŒ Error updating lecture:",B),console.error("Error details:",B.code,B.message),new Error(`Failed to update lecture: ${B.message||"Check Firebase permissions"}`)}},R=async(Y,J)=>{if(g){l(B=>B.map(K=>K.id===Y?{...K,lectures:K.lectures.filter(Q=>Q.id!==J)}:K)),e(B=>B.map(K=>({...K,subjects:K.subjects.map(Q=>Q.id===Y?{...Q,lectures:Q.lectures.filter(F=>F.id!==J)}:Q)}))),console.log("âœ… Deleted lecture from offline mode");return}try{const B=Rt($e,"Subjects",Y),K=Rt(B,"lectures",J);await Rr(K),console.log("âœ… Deleted lecture from Firebase"),b(Q=>Q+1)}catch(B){console.error("Error deleting lecture:",B)}},D=async Y=>{if(Y){if(g){l(J=>J.filter(B=>B.id!==Y)),e(J=>J.map(B=>({...B,subjects:B.subjects.filter(K=>K.id!==Y)}))),console.log("âœ… Deleted subject in offline mode");return}try{const J=Rt($e,"Subjects",Y);await Rr(J),console.log("âœ… Deleted subject from Firebase"),b(B=>B+1)}catch(J){console.error("Error deleting subject:",J)}}},k=async(Y,J,B)=>{if(!(!Y||!J)){if(g){e(K=>K.map(Q=>({...Q,subjects:Q.subjects.map(F=>F.id===Y?{...F,lectures:F.lectures.map(H=>H.id===J?{...H,videos:[...H.videos||[],{id:`video_${Date.now()}`,title:B.title,url:B.url,thumbnailUrl:B.thumbnailUrl||"",description:B.description||"",uploadedAt:new Date}]}:H)}:F)})));return}try{const K=Rt($e,"Subjects",Y,"lectures",J);await wn(st(K,"videos"),{title:B.title,description:B.description||"",url:B.url,duration:B.duration||"",thumbnailUrl:B.thumbnailUrl||"",platform:B.platform||"",uploadedAt:new Date,uploadedBy:"Current User"}),b(Q=>Q+1)}catch(K){console.error("Error adding video:",K)}}},$=async(Y,J,B)=>{if(!(!Y||!J)){if(g){e(K=>K.map(Q=>({...Q,subjects:Q.subjects.map(F=>F.id===Y?{...F,lectures:F.lectures.map(H=>H.id===J?{...H,files:[...H.files||[],{id:`file_${Date.now()}`,title:B.title,fileUrl:B.fileUrl,url:B.fileUrl,description:B.description||"",uploadedAt:new Date}]}:H)}:F)})));return}try{const K=Rt($e,"Subjects",Y,"lectures",J),Q={title:B.title,description:B.description||"",fileUrl:B.fileUrl,url:B.fileUrl,fileType:B.fileType||"",fileSize:B.fileSize||"",uploadedAt:pt.fromDate(new Date),uploadedBy:"Current User"};Object.keys(Q).forEach(F=>{Q[F]===void 0&&delete Q[F]}),await wn(st(K,"files"),Q),console.log("âœ… File added successfully:",B.title),b(F=>F+1)}catch(K){throw console.error("âŒ Error adding file:",K),console.error("Error details:",K.code,K.message),new Error(`Failed to add file: ${K.message||"Check Firebase permissions"}`)}}},z=async(Y,J,B)=>{if(!(!Y||!J)){if(g){e(K=>K.map(Q=>({...Q,subjects:Q.subjects.map(F=>F.id===Y?{...F,lectures:F.lectures.map(H=>H.id===J?{...H,quizzes:[...H.quizzes||[],{id:`quiz_${Date.now()}`,title:B.title,description:B.description||"",duration:B.timeLimit||30,passRate:B.passingScore||70,questions:B.questions||[]}]}:H)}:F)})));return}try{const K=Rt($e,"Subjects",Y,"lectures",J);await wn(st(K,"quizzes"),{title:B.title,description:B.description||"",duration:B.timeLimit||30,passRate:B.passingScore||70,questions:B.questions||[],createdAt:new Date,uploadedBy:"Current User"}),b(Q=>Q+1)}catch(K){console.error("Error adding quiz:",K)}}},M=async(Y,J={})=>{const B=J.yearNumber||1,K=J.name||`Year ${B}`,Q=J.type||(B<=3?"basic":"clinical");if(g||!navigator.onLine){const F={id:`year_${Date.now()}`,yearNumber:B,name:K,type:Q,batchName:"",batchId:Y||void 0,imageUrl:"",academicSupervisor:"",actor:"",cr:"",groupUrl:"",subjects:[]};e(H=>[...H,F]),Y&&r(H=>H.map(le=>le.id===Y?{...le}:le)),console.log("âœ… Added year in offline mode:",F);return}try{await O(async()=>{if(Y){const F=Rt($e,"batches",Y),H=st(F,"years"),le=await wn(H,{name:K,order:B,imageUrl:"",batch_name:K,createdAt:new Date});try{await an(le,{yearId:le.id})}catch{}}else{const F=st($e,"years"),H=await wn(F,{name:K,order:B,imageUrl:"",batch_name:K,createdAt:new Date});try{await an(H,{yearId:H.id})}catch{}}b(F=>F+1)})}catch(F){console.error("Error creating year:",F),v(!0),await M(Y,J)}};return{years:n,batches:t,subjects:s,loading:c,error:h,isOfflineMode:g,connectionStatus:S,retryConnection:j,updateYear:I,updateBatch:C,createSubject:U,createLecture:q,updateLecture:P,createYear:M,createBatch:async(Y={})=>{const J=Y.batchName||"New Batch",B=Y.imageUrl||"",K=Y.cr||"",Q=`batch_temp_${Date.now()}`,F={id:Q,batchName:J,imageUrl:B,cr:K};if(r(H=>[F,...H]),g||!navigator.onLine){console.log("âœ… Added batch in offline mode:",F);return}try{await O(async()=>{const H=st($e,"batches"),le=await wn(H,{batch_name:J,image_url:B,cr:K,createdAt:new Date});try{await an(le,{batchId:le.id})}catch{}const Ee={id:le.id,batchName:J,imageUrl:B,cr:K};r(Te=>[Ee,...Te.filter(pe=>pe.id!==Q)]),b(Te=>Te+1)})}catch(H){console.error("Error creating batch:",H),r(Ee=>Ee.filter(Te=>Te.id!==Q)),v(!0);const le={id:`batch_${Date.now()}`,batchName:J,imageUrl:B,cr:K};r(Ee=>[le,...Ee])}},deleteBatch:async(Y,J={deleteYears:!0})=>{if(!Y)return;const B=t,K=n;if(r(Q=>Q.filter(F=>F.id!==Y)),e(Q=>Q.filter(F=>(F.batchId||F.batchName)!==Y)),g||!navigator.onLine){console.log("âœ… Removed batch in offline mode:",Y);return}try{await O(async()=>{const Q=Rt($e,"batches",Y);if(J.deleteYears)try{const F=st(Q,"years"),H=await Pt(F);for(const le of H.docs)await Rr(le.ref)}catch{const H=Ms($e,"years"),le=await Pt(H);for(const Ee of le.docs){const Te=Ee.data();(Te.batchId||Te.batch_id)===Y&&await Rr(Ee.ref)}}else{const F=Ms($e,"years"),H=await Pt(F);for(const le of H.docs){const Ee=le.data();if((Ee.batchId||Ee.batch_id)===Y)try{await an(le.ref,{batchId:null,batch_name:null})}catch{}}}await Rr(Q),b(F=>F+1)})}catch(Q){throw console.error("Error deleting batch:",Q),r(B||[]),e(K||[]),Q}},deleteLecture:R,deleteSubject:D,addVideo:k,addFile:$,addQuiz:z}}const u5=[{id:1,type:"news",title:"New cardiology study published",time:"2 hours ago",author:"Dr. Smith"},{id:2,type:"video",title:"Anatomy lecture uploaded",time:"4 hours ago",author:"Prof. Johnson"},{id:3,type:"quiz",title:"Pharmacology quiz created",time:"6 hours ago",author:"Dr. Brown"},{id:4,type:"product",title:"New stethoscope added to store",time:"1 day ago",author:"Admin"}];function d5(){const{news:n,loading:e}=Ax(),{products:t,loading:r}=VC(),{professors:s,loading:l}=UC(),{years:c,loading:u}=Dc(),h=n.length,m=s.length,g=t.reduce((b,S)=>b+(S.price||0),0);c.reduce((b,S)=>b+S.subjects.reduce((E,x)=>E+x.lectures.reduce((j,I)=>{var C;return j+(((C=I.videos)==null?void 0:C.length)||0)},0),0),0);const v=c.reduce((b,S)=>{var E;return b+(((E=S.subjects)==null?void 0:E.length)||0)},0),y=[{title:"Total News Articles",value:e?"...":String(h),change:"+12%",icon:bf,color:"text-blue-600"},{title:"Subjects",value:u?"...":String(v),change:"+5%",icon:ds,color:"text-green-600"},{title:"Active Professors",value:l?"...":String(m),change:"+2%",icon:oc,color:"text-purple-600"},{title:"Store Revenue",value:r?"...":`$${g.toLocaleString()}`,change:"+18%",icon:$1,color:"text-emerald-600"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Welcome to the MedJust Admin Dashboard"})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:y.map(b=>a.jsxs(xe,{children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Xe,{className:"text-sm font-medium",children:b.title}),a.jsx(b.icon,{className:`h-4 w-4 ${b.color}`})]}),a.jsxs(we,{children:[a.jsx("div",{className:"text-2xl font-bold",children:b.value}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[a.jsxs(rn,{variant:"secondary",className:"text-green-600",children:[a.jsx(jR,{className:"h-3 w-3 mr-1"}),b.change]}),a.jsx("span",{className:"text-muted-foreground",children:"from last month"})]})]})]},b.title))}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Recent Activity"}),a.jsx(jt,{children:"Latest updates across all modules"})]}),a.jsx(we,{children:a.jsx("div",{className:"space-y-4",children:u5.map(b=>a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium",children:b.title}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[a.jsx("span",{children:b.author}),a.jsx("span",{children:"â€¢"}),a.jsx("span",{children:b.time})]})]})]},b.id))})})]}),a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Quick Actions"}),a.jsx(jt,{children:"Common administrative tasks"})]}),a.jsx(we,{children:a.jsxs("div",{className:"grid gap-2",children:[a.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[a.jsx(bf,{className:"h-5 w-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Create News Article"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Publish new content"})]})]}),a.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[a.jsx(Fs,{className:"h-5 w-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Upload Video"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Add learning resource"})]})]}),a.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[a.jsx(oc,{className:"h-5 w-5 text-purple-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Add Professor"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Register new faculty"})]})]}),a.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[a.jsx(gy,{className:"h-5 w-5 text-emerald-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Add Product"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Expand store catalog"})]})]})]})})]})]})]})}const Oi=_.forwardRef(({className:n,...e},t)=>a.jsx("textarea",{className:nt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));Oi.displayName="Textarea";function $C(n){const e=_.useRef({value:n,previous:n});return _.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var Px="Switch",[h5,Uz]=Li(Px),[f5,m5]=h5(Px),zC=_.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:s,defaultChecked:l,required:c,disabled:u,value:h="on",onCheckedChange:m,...g}=n,[v,y]=_.useState(null),b=wt(e,I=>y(I)),S=_.useRef(!1),E=v?!!v.closest("form"):!0,[x=!1,j]=Oa({prop:s,defaultProp:l,onChange:m});return a.jsxs(f5,{scope:t,checked:x,disabled:u,children:[a.jsx(Ke.button,{type:"button",role:"switch","aria-checked":x,"aria-required":c,"data-state":WC(x),"data-disabled":u?"":void 0,disabled:u,value:h,...g,ref:b,onClick:ze(n.onClick,I=>{j(C=>!C),E&&(S.current=I.isPropagationStopped(),S.current||I.stopPropagation())})}),E&&a.jsx(p5,{control:v,bubbles:!S.current,name:r,value:h,checked:x,required:c,disabled:u,style:{transform:"translateX(-100%)"}})]})});zC.displayName=Px;var BC="SwitchThumb",qC=_.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,s=m5(BC,t);return a.jsx(Ke.span,{"data-state":WC(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});qC.displayName=BC;var p5=n=>{const{control:e,checked:t,bubbles:r=!0,...s}=n,l=_.useRef(null),c=$C(t),u=dS(e);return _.useEffect(()=>{const h=l.current,m=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==t&&v){const y=new Event("click",{bubbles:r});v.call(h,t),h.dispatchEvent(y)}},[c,t,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:l,style:{...n.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function WC(n){return n?"checked":"unchecked"}var HC=zC,g5=qC;const KC=_.forwardRef(({className:n,...e},t)=>a.jsx(HC,{className:nt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:a.jsx(g5,{className:nt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));KC.displayName=HC.displayName;function v5({news:n,onClose:e,onSave:t}){var x,j,I;const{years:r}=Dc(),[s,l]=_.useState(null),[c,u]=_.useState({title:"",content:"",imageUrl:"",videoUrl:"",tags:[],isPinned:!1,attachments:[],yearId:"",subjectId:""}),[h,m]=_.useState(""),[g,v]=_.useState(!1);_.useEffect(()=>{n&&u({title:n.title||"",content:n.content||"",imageUrl:n.imageUrl||"",videoUrl:n.videoUrl||"",tags:n.tags||[],isPinned:n.isPinned||!1,attachments:n.attachments||[],yearId:n.yearId||"",subjectId:n.subjectId||""})},[n]),_.useEffect(()=>{let C=!0;return(async()=>{try{if(r&&r.length>0||s)return;const U=await Pt(Ms($e,"years")),q=[];U.forEach(P=>{const R=P.data();let D=R.order||1;if(R.name){const k=String(R.name).match(/\d+/);k&&(D=parseInt(k[0]))}q.push({id:P.id,yearNumber:D,type:D<=3?"basic":"clinical",subjects:R.subjects||[]})}),C&&q.length>0&&l(q)}catch{}})(),()=>{C=!1}},[r,s]);const y=async C=>{C.preventDefault(),v(!0);try{const O={...c,yearNumber:void 0,updatedAt:new Date,...n?{}:{createdAt:new Date,authorName:"Current User",authorId:"current-user-id",viewsCount:0}};if(c.yearId){const U=r.find(q=>q.id===c.yearId);U&&(O.yearNumber=U.yearNumber)}c.subjectId&&(O.subjectId=c.subjectId),t(O)}catch(O){console.error("Error saving news:",O)}finally{v(!1)}},b=()=>{h.trim()&&!c.tags.includes(h.trim())&&(u(C=>({...C,tags:[...C.tags,h.trim()]})),m(""))},S=C=>{u(O=>({...O,tags:O.tags.filter(U=>U!==C)}))},E=C=>{C.key==="Enter"&&(C.preventDefault(),b())};return a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(te,{variant:"ghost",onClick:e,children:[a.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Article":"Create Article"}),a.jsx("p",{className:"text-muted-foreground",children:n?"Update the news article details":"Create a new news article for medical students"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(KC,{id:"pinned",checked:c.isPinned,onCheckedChange:C=>u(O=>({...O,isPinned:C}))}),a.jsxs(Re,{htmlFor:"pinned",className:"flex items-center gap-2",children:[a.jsx(z1,{className:"h-4 w-4"}),"Pin Article"]})]})})]}),a.jsx("form",{onSubmit:y,className:"space-y-6",children:a.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Article Content"}),a.jsx(jt,{children:"Main article information and content"})]}),a.jsxs(we,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"title",children:"Title *"}),a.jsx(je,{id:"title",placeholder:"Enter article title...",value:c.title,onChange:C=>u(O=>({...O,title:C.target.value})),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"content",children:"Content *"}),a.jsx(Oi,{id:"content",placeholder:"Write your article content here...",value:c.content,onChange:C=>u(O=>({...O,content:C.target.value})),rows:12,required:!0})]})]})]}),a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Tags"}),a.jsx(jt,{children:"Add relevant tags to help categorize this article"})]}),a.jsxs(we,{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx(je,{placeholder:"Add a tag...",value:h,onChange:C=>m(C.target.value),onKeyPress:E}),a.jsxs(te,{type:"button",onClick:b,variant:"outline",children:[a.jsx(Au,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(C=>a.jsxs(rn,{variant:"secondary",className:"flex items-center gap-1",children:[C,a.jsx("button",{type:"button",onClick:()=>S(C),className:"ml-1 hover:text-destructive",children:a.jsx(ac,{className:"h-3 w-3"})})]},C))})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Media"}),a.jsx(jt,{children:"Add images and videos to your article"})]}),a.jsxs(we,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"imageUrl",children:"Featured Image URL"}),a.jsx(je,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:C=>u(O=>({...O,imageUrl:C.target.value}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"videoUrl",children:"Video URL"}),a.jsx(je,{id:"videoUrl",placeholder:"https://youtube.com/watch?v=...",value:c.videoUrl,onChange:C=>u(O=>({...O,videoUrl:C.target.value}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"yearId",children:"Related Year"}),a.jsxs("select",{id:"yearId",value:c.yearId,onChange:C=>u(O=>({...O,yearId:C.target.value,subjectId:""})),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"",children:"-- Not related to a specific year --"}),(s&&s.length>0?s:r)&&(s&&s.length>0?s:r).length>0?(s&&s.length>0?s:r).map(C=>a.jsx("option",{value:C.id,children:`Year ${C.yearNumber}`},C.id)):a.jsx("option",{value:"",children:"No years available"})]})]}),c.yearId&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Re,{htmlFor:"subjectId",children:"Related Subject"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected year: ",(x=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))!=null&&x.yearNumber?`Year ${(j=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:j.yearNumber}`:""]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("select",{id:"subjectId",value:c.subjectId,onChange:C=>u(O=>({...O,subjectId:C.target.value})),className:"flex-1 border rounded px-3 py-2",children:[a.jsx("option",{value:"",children:"-- Not related to a specific subject --"}),(((I=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:I.subjects)||[]).map(C=>a.jsx("option",{value:C.id,children:C.name},C.id))]}),a.jsx(te,{type:"button",variant:"outline",size:"sm",onClick:()=>{var C;(C=navigator.clipboard)==null||C.writeText(c.yearId||""),alert("Year id copied")},children:"Copy ID"})]})]}),c.imageUrl&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{children:"Preview"}),a.jsx("img",{src:c.imageUrl,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border",onError:C=>{C.currentTarget.style.display="none"}})]})]})]}),a.jsxs(xe,{children:[a.jsx(Ge,{children:a.jsx(Xe,{children:"Actions"})}),a.jsxs(we,{className:"space-y-4",children:[a.jsxs(te,{type:"submit",className:"w-full",disabled:g,children:[a.jsx(Qo,{className:"h-4 w-4 mr-2"}),g?"Saving...":n?"Update Article":"Create Article"]}),a.jsx(te,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Cancel"})]})]})]})]})})]})}function y5(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,l]=_.useState(!1),[c,u]=_.useState("all"),{news:h,loading:m,error:g,createNews:v,updateNews:y,deleteNews:b}=Ax(),S=h.filter(I=>I.title.toLowerCase().includes(n.toLowerCase())||I.tags.some(C=>C.toLowerCase().includes(n.toLowerCase()))),E=I=>{r(I),l(!0)},x=async I=>{if(window.confirm("Are you sure you want to delete this article?"))try{await b(I)}catch(C){console.error("Error deleting news:",C),alert("Failed to delete article. Please try again.")}},j=()=>{r(null),l(!0)};return s?a.jsx(v5,{news:t,onClose:()=>{l(!1),r(null)},onSave:async I=>{try{t?await y(t.id,I):await v(I),l(!1),r(null)}catch(C){console.error("Error saving news:",C),alert("Failed to save article. Please try again.")}}}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"News Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Create and manage news articles for medical students"})]}),a.jsxs(te,{onClick:j,className:"flex items-center gap-2",children:[a.jsx(Xt,{className:"h-4 w-4"}),"Create Article"]})]}),a.jsx(xe,{children:a.jsx(we,{className:"pt-6",children:a.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:a.jsxs("div",{className:"relative flex-1",children:[a.jsx(wc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(je,{placeholder:"Search articles by title or tags...",value:n,onChange:I=>e(I.target.value),className:"pl-10"})]})})})}),m&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx(Mo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading news articles..."})]})}),g&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading news"}),a.jsx("p",{className:"text-muted-foreground",children:g})]})}),!m&&!g&&a.jsx("div",{className:"space-y-4",children:S.map(I=>a.jsx(xe,{className:"hover:shadow-md transition-shadow",children:a.jsx(we,{className:"pt-6",children:a.jsxs("div",{className:"flex gap-4",children:[I.imageUrl&&a.jsx("img",{src:I.imageUrl,alt:I.title,className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:I.title}),I.isPinned&&a.jsx(z1,{className:"h-4 w-4 text-yellow-500"})]}),a.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:I.content}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:I.tags.map(C=>a.jsxs(rn,{variant:"secondary",className:"text-xs",children:[a.jsx(Au,{className:"h-3 w-3 mr-1"}),C]},C))}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(No,{className:"h-3 w-3"}),I.authorName]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(V1,{className:"h-3 w-3"}),I.createdAt.toLocaleDateString()]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(_R,{className:"h-3 w-3"}),I.viewsCount," views"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[a.jsx(te,{variant:"ghost",size:"icon",onClick:()=>E(I),children:a.jsx(Ni,{className:"h-4 w-4"})}),a.jsx(te,{variant:"ghost",size:"icon",onClick:()=>x(I.id),className:"text-destructive hover:text-destructive",children:a.jsx(Ln,{className:"h-4 w-4"})})]})]})})]})})},I.id))}),!m&&!g&&S.length===0&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx(bf,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No articles match your search criteria.":"Start by creating your first news article."}),a.jsxs(te,{onClick:j,children:[a.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Create Article"]})]})})]})}function x5(n,e){const t=_.createContext(e),r=l=>{const{children:c,...u}=l,h=_.useMemo(()=>u,Object.values(u));return a.jsx(t.Provider,{value:h,children:c})};r.displayName=n+"Provider";function s(l){const c=_.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${l}\` must be used within \`${n}\``)}return[r,s]}function w5(n,e=[]){let t=[];function r(l,c){const u=_.createContext(c),h=t.length;t=[...t,c];const m=v=>{var j;const{scope:y,children:b,...S}=v,E=((j=y==null?void 0:y[n])==null?void 0:j[h])||u,x=_.useMemo(()=>S,Object.values(S));return a.jsx(E.Provider,{value:x,children:b})};m.displayName=l+"Provider";function g(v,y){var E;const b=((E=y==null?void 0:y[n])==null?void 0:E[h])||u,S=_.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${v}\` must be used within \`${l}\``)}return[m,g]}const s=()=>{const l=t.map(c=>_.createContext(c));return function(u){const h=(u==null?void 0:u[n])||l;return _.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,_5(s,...e)]}function _5(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(l){const c=r.reduce((u,{useScope:h,scopeName:m})=>{const v=h(l)[`__scope${m}`];return{...u,...v}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var Wg="focusScope.autoFocusOnMount",Hg="focusScope.autoFocusOnUnmount",Ab={bubbles:!1,cancelable:!0},E5="FocusScope",Rx=_.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:l,...c}=n,[u,h]=_.useState(null),m=En(s),g=En(l),v=_.useRef(null),y=wt(e,E=>h(E)),b=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let E=function(C){if(b.paused||!u)return;const O=C.target;u.contains(O)?v.current=O:po(v.current,{select:!0})},x=function(C){if(b.paused||!u)return;const O=C.relatedTarget;O!==null&&(u.contains(O)||po(v.current,{select:!0}))},j=function(C){if(document.activeElement===document.body)for(const U of C)U.removedNodes.length>0&&po(u)};document.addEventListener("focusin",E),document.addEventListener("focusout",x);const I=new MutationObserver(j);return u&&I.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",x),I.disconnect()}}},[r,u,b.paused]),_.useEffect(()=>{if(u){Rb.add(b);const E=document.activeElement;if(!u.contains(E)){const j=new CustomEvent(Wg,Ab);u.addEventListener(Wg,m),u.dispatchEvent(j),j.defaultPrevented||(b5(I5(GC(u)),{select:!0}),document.activeElement===E&&po(u))}return()=>{u.removeEventListener(Wg,m),setTimeout(()=>{const j=new CustomEvent(Hg,Ab);u.addEventListener(Hg,g),u.dispatchEvent(j),j.defaultPrevented||po(E??document.body,{select:!0}),u.removeEventListener(Hg,g),Rb.remove(b)},0)}}},[u,m,g,b]);const S=_.useCallback(E=>{if(!t&&!r||b.paused)return;const x=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,j=document.activeElement;if(x&&j){const I=E.currentTarget,[C,O]=S5(I);C&&O?!E.shiftKey&&j===O?(E.preventDefault(),t&&po(C,{select:!0})):E.shiftKey&&j===C&&(E.preventDefault(),t&&po(O,{select:!0})):j===I&&E.preventDefault()}},[t,r,b.paused]);return a.jsx(Ke.div,{tabIndex:-1,...c,ref:y,onKeyDown:S})});Rx.displayName=E5;function b5(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(po(r,{select:e}),document.activeElement!==t)return}function S5(n){const e=GC(n),t=Pb(e,n),r=Pb(e.reverse(),n);return[t,r]}function GC(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Pb(n,e){for(const t of n)if(!N5(t,{upTo:e}))return t}function N5(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function T5(n){return n instanceof HTMLInputElement&&"select"in n}function po(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&T5(n)&&e&&n.select()}}var Rb=C5();function C5(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=kb(n,e),n.unshift(e)},remove(e){var t;n=kb(n,e),(t=n[0])==null||t.resume()}}}function kb(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function I5(n){return n.filter(e=>e.tagName!=="A")}function j5(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var Fm=n=>{const{present:e,children:t}=n,r=A5(e),s=typeof t=="function"?t({present:r.isPresent}):_.Children.only(t),l=wt(r.ref,P5(s));return typeof t=="function"||r.isPresent?_.cloneElement(s,{ref:l}):null};Fm.displayName="Presence";function A5(n){const[e,t]=_.useState(),r=_.useRef({}),s=_.useRef(n),l=_.useRef("none"),c=n?"mounted":"unmounted",[u,h]=j5(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const m=Jh(r.current);l.current=u==="mounted"?m:"none"},[u]),Ht(()=>{const m=r.current,g=s.current;if(g!==n){const y=l.current,b=Jh(m);n?h("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?h("UNMOUNT"):h(g&&y!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Ht(()=>{if(e){let m;const g=e.ownerDocument.defaultView??window,v=b=>{const E=Jh(r.current).includes(b.animationName);if(b.target===e&&E&&(h("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",m=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},y=b=>{b.target===e&&(l.current=Jh(r.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{g.clearTimeout(m),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:_.useCallback(m=>{m&&(r.current=getComputedStyle(m)),t(m)},[])}}function Jh(n){return(n==null?void 0:n.animationName)||"none"}function P5(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Kg=0;function R5(){_.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Db()),document.body.insertAdjacentElement("beforeend",n[1]??Db()),Kg++,()=>{Kg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Kg--}},[])}function Db(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Mu="right-scroll-bar-position",Fu="width-before-scroll-bar",k5="with-scroll-bars-hidden",D5="--removed-body-scroll-bar-size";function Gg(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function O5(n,e){var t=_.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var L5=typeof window<"u"?_.useLayoutEffect:_.useEffect,Ob=new WeakMap;function QC(n,e){var t=O5(null,function(r){return n.forEach(function(s){return Gg(s,r)})});return L5(function(){var r=Ob.get(t);if(r){var s=new Set(r),l=new Set(n),c=t.current;s.forEach(function(u){l.has(u)||Gg(u,null)}),l.forEach(function(u){s.has(u)||Gg(u,c)})}Ob.set(t,n)},[n]),t}function M5(n){return n}function F5(n,e){e===void 0&&(e=M5);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(l){var c=e(l,r);return t.push(c),function(){t=t.filter(function(u){return u!==c})}},assignSyncMedium:function(l){for(r=!0;t.length;){var c=t;t=[],c.forEach(l)}t={push:function(u){return l(u)},filter:function(){return t}}},assignMedium:function(l){r=!0;var c=[];if(t.length){var u=t;t=[],u.forEach(l),c=t}var h=function(){var g=c;c=[],g.forEach(l)},m=function(){return Promise.resolve().then(h)};m(),t={push:function(g){c.push(g),m()},filter:function(g){return c=c.filter(g),t}}}};return s}function YC(n){n===void 0&&(n={});var e=F5(null);return e.options=Qn({async:!0,ssr:!1},n),e}var XC=function(n){var e=n.sideCar,t=Cc(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,Qn({},t))};XC.isSideCarExport=!0;function JC(n,e){return n.useMedium(e),XC}var ZC=YC(),Qg=function(){},Vm=_.forwardRef(function(n,e){var t=_.useRef(null),r=_.useState({onScrollCapture:Qg,onWheelCapture:Qg,onTouchMoveCapture:Qg}),s=r[0],l=r[1],c=n.forwardProps,u=n.children,h=n.className,m=n.removeScrollBar,g=n.enabled,v=n.shards,y=n.sideCar,b=n.noIsolation,S=n.inert,E=n.allowPinchZoom,x=n.as,j=x===void 0?"div":x,I=n.gapMode,C=Cc(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=y,U=QC([t,e]),q=Qn(Qn({},C),s);return _.createElement(_.Fragment,null,g&&_.createElement(O,{sideCar:ZC,removeScrollBar:m,shards:v,noIsolation:b,inert:S,setCallbacks:l,allowPinchZoom:!!E,lockRef:t,gapMode:I}),c?_.cloneElement(_.Children.only(u),Qn(Qn({},q),{ref:U})):_.createElement(j,Qn({},q,{className:h,ref:U}),u))});Vm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Vm.classNames={fullWidth:Fu,zeroRight:Mu};var V5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function U5(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=V5();return e&&n.setAttribute("nonce",e),n}function $5(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function z5(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var B5=function(){var n=0,e=null;return{add:function(t){n==0&&(e=U5())&&($5(e,t),z5(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},q5=function(){var n=B5();return function(e,t){_.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},kx=function(){var n=q5(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},W5={left:0,top:0,right:0,gap:0},Yg=function(n){return parseInt(n||"",10)||0},H5=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Yg(t),Yg(r),Yg(s)]},K5=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return W5;var e=H5(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},G5=kx(),Xl="data-scroll-locked",Q5=function(n,e,t,r){var s=n.left,l=n.top,c=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(k5,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Xl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Mu,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Fu,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Mu," .").concat(Mu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Fu," .").concat(Fu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Xl,`] {
    `).concat(D5,": ").concat(u,`px;
  }
`)},Lb=function(){var n=parseInt(document.body.getAttribute(Xl)||"0",10);return isFinite(n)?n:0},Y5=function(){_.useEffect(function(){return document.body.setAttribute(Xl,(Lb()+1).toString()),function(){var n=Lb()-1;n<=0?document.body.removeAttribute(Xl):document.body.setAttribute(Xl,n.toString())}},[])},eI=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;Y5();var l=_.useMemo(function(){return K5(s)},[s]);return _.createElement(G5,{styles:Q5(l,!e,s,t?"":"!important")})},Jv=!1;if(typeof window<"u")try{var Zh=Object.defineProperty({},"passive",{get:function(){return Jv=!0,!0}});window.addEventListener("test",Zh,Zh),window.removeEventListener("test",Zh,Zh)}catch{Jv=!1}var Ol=Jv?{passive:!1}:!1,X5=function(n){return n.tagName==="TEXTAREA"},tI=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!X5(n)&&t[e]==="visible")},J5=function(n){return tI(n,"overflowY")},Z5=function(n){return tI(n,"overflowX")},Mb=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=nI(n,r);if(s){var l=rI(n,r),c=l[1],u=l[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},e$=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},t$=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},nI=function(n,e){return n==="v"?J5(e):Z5(e)},rI=function(n,e){return n==="v"?e$(e):t$(e)},n$=function(n,e){return n==="h"&&e==="rtl"?-1:1},r$=function(n,e,t,r,s){var l=n$(n,window.getComputedStyle(e).direction),c=l*r,u=t.target,h=e.contains(u),m=!1,g=c>0,v=0,y=0;do{var b=rI(n,u),S=b[0],E=b[1],x=b[2],j=E-x-l*S;(S||j)&&nI(n,u)&&(v+=j,y+=S),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(v)<1||!g&&Math.abs(y)<1)&&(m=!0),m},ef=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Fb=function(n){return[n.deltaX,n.deltaY]},Vb=function(n){return n&&"current"in n?n.current:n},s$=function(n,e){return n[0]===e[0]&&n[1]===e[1]},i$=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},o$=0,Ll=[];function a$(n){var e=_.useRef([]),t=_.useRef([0,0]),r=_.useRef(),s=_.useState(o$++)[0],l=_.useState(kx)[0],c=_.useRef(n);_.useEffect(function(){c.current=n},[n]),_.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var E=hN([n.lockRef.current],(n.shards||[]).map(Vb),!0).filter(Boolean);return E.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),E.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=_.useCallback(function(E,x){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!c.current.allowPinchZoom;var j=ef(E),I=t.current,C="deltaX"in E?E.deltaX:I[0]-j[0],O="deltaY"in E?E.deltaY:I[1]-j[1],U,q=E.target,P=Math.abs(C)>Math.abs(O)?"h":"v";if("touches"in E&&P==="h"&&q.type==="range")return!1;var R=Mb(P,q);if(!R)return!0;if(R?U=P:(U=P==="v"?"h":"v",R=Mb(P,q)),!R)return!1;if(!r.current&&"changedTouches"in E&&(C||O)&&(r.current=U),!U)return!0;var D=r.current||U;return r$(D,x,E,D==="h"?C:O)},[]),h=_.useCallback(function(E){var x=E;if(!(!Ll.length||Ll[Ll.length-1]!==l)){var j="deltaY"in x?Fb(x):ef(x),I=e.current.filter(function(U){return U.name===x.type&&(U.target===x.target||x.target===U.shadowParent)&&s$(U.delta,j)})[0];if(I&&I.should){x.cancelable&&x.preventDefault();return}if(!I){var C=(c.current.shards||[]).map(Vb).filter(Boolean).filter(function(U){return U.contains(x.target)}),O=C.length>0?u(x,C[0]):!c.current.noIsolation;O&&x.cancelable&&x.preventDefault()}}},[]),m=_.useCallback(function(E,x,j,I){var C={name:E,delta:x,target:j,should:I,shadowParent:l$(j)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(O){return O!==C})},1)},[]),g=_.useCallback(function(E){t.current=ef(E),r.current=void 0},[]),v=_.useCallback(function(E){m(E.type,Fb(E),E.target,u(E,n.lockRef.current))},[]),y=_.useCallback(function(E){m(E.type,ef(E),E.target,u(E,n.lockRef.current))},[]);_.useEffect(function(){return Ll.push(l),n.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:y}),document.addEventListener("wheel",h,Ol),document.addEventListener("touchmove",h,Ol),document.addEventListener("touchstart",g,Ol),function(){Ll=Ll.filter(function(E){return E!==l}),document.removeEventListener("wheel",h,Ol),document.removeEventListener("touchmove",h,Ol),document.removeEventListener("touchstart",g,Ol)}},[]);var b=n.removeScrollBar,S=n.inert;return _.createElement(_.Fragment,null,S?_.createElement(l,{styles:i$(s)}):null,b?_.createElement(eI,{gapMode:n.gapMode}):null)}function l$(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const c$=JC(ZC,a$);var sI=_.forwardRef(function(n,e){return _.createElement(Vm,Qn({},n,{ref:e,sideCar:c$}))});sI.classNames=Vm.classNames;var u$=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Ml=new WeakMap,tf=new WeakMap,nf={},Xg=0,iI=function(n){return n&&(n.host||iI(n.parentNode))},d$=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=iI(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},h$=function(n,e,t,r){var s=d$(e,Array.isArray(n)?n:[n]);nf[t]||(nf[t]=new WeakMap);var l=nf[t],c=[],u=new Set,h=new Set(s),m=function(v){!v||u.has(v)||(u.add(v),m(v.parentNode))};s.forEach(m);var g=function(v){!v||h.has(v)||Array.prototype.forEach.call(v.children,function(y){if(u.has(y))g(y);else try{var b=y.getAttribute(r),S=b!==null&&b!=="false",E=(Ml.get(y)||0)+1,x=(l.get(y)||0)+1;Ml.set(y,E),l.set(y,x),c.push(y),E===1&&S&&tf.set(y,!0),x===1&&y.setAttribute(t,"true"),S||y.setAttribute(r,"true")}catch(j){console.error("aria-hidden: cannot operate on ",y,j)}})};return g(e),u.clear(),Xg++,function(){c.forEach(function(v){var y=Ml.get(v)-1,b=l.get(v)-1;Ml.set(v,y),l.set(v,b),y||(tf.has(v)||v.removeAttribute(r),tf.delete(v)),b||v.removeAttribute(t)}),Xg--,Xg||(Ml=new WeakMap,Ml=new WeakMap,tf=new WeakMap,nf={})}},oI=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=u$(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),h$(r,s,t,"aria-hidden")):function(){return null}},Dx="Dialog",[aI,$z]=w5(Dx),[f$,xs]=aI(Dx),lI=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:l,modal:c=!0}=n,u=_.useRef(null),h=_.useRef(null),[m=!1,g]=Oa({prop:r,defaultProp:s,onChange:l});return a.jsx(f$,{scope:e,triggerRef:u,contentRef:h,contentId:Io(),titleId:Io(),descriptionId:Io(),open:m,onOpenChange:g,onOpenToggle:_.useCallback(()=>g(v=>!v),[g]),modal:c,children:t})};lI.displayName=Dx;var cI="DialogTrigger",uI=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=xs(cI,t),l=wt(e,s.triggerRef);return a.jsx(Ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Mx(s.open),...r,ref:l,onClick:ze(n.onClick,s.onOpenToggle)})});uI.displayName=cI;var Ox="DialogPortal",[m$,dI]=aI(Ox,{forceMount:void 0}),hI=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,l=xs(Ox,e);return a.jsx(m$,{scope:e,forceMount:t,children:_.Children.map(r,c=>a.jsx(Fm,{present:t||l.open,children:a.jsx(SS,{asChild:!0,container:s,children:c})}))})};hI.displayName=Ox;var Xf="DialogOverlay",fI=_.forwardRef((n,e)=>{const t=dI(Xf,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,l=xs(Xf,n.__scopeDialog);return l.modal?a.jsx(Fm,{present:r||l.open,children:a.jsx(p$,{...s,ref:e})}):null});fI.displayName=Xf;var p$=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=xs(Xf,t);return a.jsx(sI,{as:Da,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(Ke.div,{"data-state":Mx(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),qa="DialogContent",mI=_.forwardRef((n,e)=>{const t=dI(qa,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,l=xs(qa,n.__scopeDialog);return a.jsx(Fm,{present:r||l.open,children:l.modal?a.jsx(g$,{...s,ref:e}):a.jsx(v$,{...s,ref:e})})});mI.displayName=qa;var g$=_.forwardRef((n,e)=>{const t=xs(qa,n.__scopeDialog),r=_.useRef(null),s=wt(e,t.contentRef,r);return _.useEffect(()=>{const l=r.current;if(l)return oI(l)},[]),a.jsx(pI,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ze(n.onCloseAutoFocus,l=>{var c;l.preventDefault(),(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:ze(n.onPointerDownOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&l.preventDefault()}),onFocusOutside:ze(n.onFocusOutside,l=>l.preventDefault())})}),v$=_.forwardRef((n,e)=>{const t=xs(qa,n.__scopeDialog),r=_.useRef(!1),s=_.useRef(!1);return a.jsx(pI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var c,u;(c=n.onCloseAutoFocus)==null||c.call(n,l),l.defaultPrevented||(r.current||(u=t.triggerRef.current)==null||u.focus(),l.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:l=>{var h,m;(h=n.onInteractOutside)==null||h.call(n,l),l.defaultPrevented||(r.current=!0,l.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=l.target;((m=t.triggerRef.current)==null?void 0:m.contains(c))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&s.current&&l.preventDefault()}})}),pI=_.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:l,...c}=n,u=xs(qa,t),h=_.useRef(null),m=wt(e,h);return R5(),a.jsxs(a.Fragment,{children:[a.jsx(Rx,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:l,children:a.jsx(yy,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Mx(u.open),...c,ref:m,onDismiss:()=>u.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(y$,{titleId:u.titleId}),a.jsx(w$,{contentRef:h,descriptionId:u.descriptionId})]})]})}),Lx="DialogTitle",gI=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=xs(Lx,t);return a.jsx(Ke.h2,{id:s.titleId,...r,ref:e})});gI.displayName=Lx;var vI="DialogDescription",yI=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=xs(vI,t);return a.jsx(Ke.p,{id:s.descriptionId,...r,ref:e})});yI.displayName=vI;var xI="DialogClose",wI=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=xs(xI,t);return a.jsx(Ke.button,{type:"button",...r,ref:e,onClick:ze(n.onClick,()=>s.onOpenChange(!1))})});wI.displayName=xI;function Mx(n){return n?"open":"closed"}var _I="DialogTitleWarning",[zz,EI]=x5(_I,{contentName:qa,titleName:Lx,docsSlug:"dialog"}),y$=({titleId:n})=>{const e=EI(_I),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},x$="DialogDescriptionWarning",w$=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${EI(x$).contentName}}.`;return _.useEffect(()=>{var l;const s=(l=n.current)==null?void 0:l.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},_$=lI,E$=uI,b$=hI,bI=fI,SI=mI,NI=gI,TI=yI,CI=wI;const S$=_$,N$=E$,T$=b$,C$=CI,II=_.forwardRef(({className:n,...e},t)=>a.jsx(bI,{ref:t,className:nt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));II.displayName=bI.displayName;const jI=_.forwardRef(({className:n,children:e,...t},r)=>a.jsxs(T$,{children:[a.jsx(II,{}),a.jsxs(SI,{ref:r,className:nt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,a.jsxs(CI,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(ac,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));jI.displayName=SI.displayName;const AI=({className:n,...e})=>a.jsx("div",{className:nt("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});AI.displayName="DialogHeader";const PI=({className:n,...e})=>a.jsx("div",{className:nt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});PI.displayName="DialogFooter";const RI=_.forwardRef(({className:n,...e},t)=>a.jsx(NI,{ref:t,className:nt("text-lg font-semibold leading-none tracking-tight",n),...e}));RI.displayName=NI.displayName;const kI=_.forwardRef(({className:n,...e},t)=>a.jsx(TI,{ref:t,className:nt("text-sm text-muted-foreground",n),...e}));kI.displayName=TI.displayName;function DI({quiz:n,onClose:e,onSave:t}){const[r,s]=_.useState({title:"",description:"",timeLimit:30,passingScore:70,questions:[]}),[l,c]=_.useState({question:"",options:["","","",""],correctAnswer:0,imageUrl:"",weight:1}),[u,h]=_.useState(!1);_.useEffect(()=>{n&&s({title:n.title||"",description:n.description||"",timeLimit:n.timeLimit||30,passingScore:n.passingScore||70,questions:n.questions||[],type:n.type||"multiple_choice"})},[n]);const m=async E=>{E.preventDefault(),h(!0);try{const x={...r,...n?{}:{createdAt:new Date,createdBy:"Current User"}};x.type||(x.type="multiple_choice"),t(x)}catch(x){console.error("Error saving quiz:",x)}finally{h(!1)}},g=()=>{var j;const E=r.type==="flashcard",x=l.question.trim();if(E){const I=l.options&&String(l.options[0]).trim()||l.answer;if(x&&I){const C={...l,options:[String(((j=l.options)==null?void 0:j[0])||l.answer||"").trim()],correctAnswer:0};s(O=>({...O,questions:[...O.questions,C]})),c({question:"",options:[""],correctAnswer:0,imageUrl:"",weight:1})}return}x&&Array.isArray(l.options)&&l.options.filter(I=>String(I).trim()).length>=2&&typeof l.correctAnswer=="number"&&String(l.options[l.correctAnswer]||"").trim()&&(s(I=>({...I,questions:[...I.questions,{...l}]})),c({question:"",options:["","","",""],correctAnswer:0,imageUrl:"",weight:1}))},v=E=>{s(x=>({...x,questions:x.questions.filter((j,I)=>I!==E)}))},y=(E,x)=>{const j=[...l.options||[]];j[E]=x,c(I=>({...I,options:j}))},b=()=>{c(E=>({...E,options:[...E.options||[],""]}))},S=E=>{c(x=>{const j=[...x.options||[]];j.splice(E,1);let I=x.correctAnswer;return I>=j.length&&(I=Math.max(0,j.length-1)),{...x,options:j,correctAnswer:I}})};return a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(te,{variant:"ghost",onClick:e,children:[a.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Quiz":"Create Quiz"}),a.jsx("p",{className:"text-muted-foreground",children:n?"Update the quiz details and questions":"Create a new quiz for students"})]})]})}),a.jsxs("form",{onSubmit:m,className:"space-y-6",children:[a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsxs(Xe,{className:"flex items-center gap-2",children:[a.jsx(Ii,{className:"h-5 w-5"}),"Quiz Information"]}),a.jsx(jt,{children:"Basic information about the quiz"})]}),a.jsxs(we,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"title",children:"Quiz Title *"}),a.jsx(je,{id:"title",placeholder:"Enter quiz title...",value:r.title,onChange:E=>s(x=>({...x,title:E.target.value})),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"description",children:"Description"}),a.jsx(Oi,{id:"description",placeholder:"Describe what this quiz covers...",value:r.description,onChange:E=>s(x=>({...x,description:E.target.value})),rows:3})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Re,{htmlFor:"timeLimit",className:"flex items-center gap-2",children:[a.jsx(_f,{className:"h-4 w-4"}),"Time Limit (minutes)"]}),a.jsx(je,{id:"timeLimit",type:"number",min:"1",value:r.timeLimit,onChange:E=>s(x=>({...x,timeLimit:parseInt(E.target.value)||30}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Re,{htmlFor:"passingScore",className:"flex items-center gap-2",children:[a.jsx(IR,{className:"h-4 w-4"}),"Passing Score (%)"]}),a.jsx(je,{id:"passingScore",type:"number",min:"0",max:"100",value:r.passingScore,onChange:E=>s(x=>({...x,passingScore:parseInt(E.target.value)||70}))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"quizType",children:"Quiz Type"}),a.jsxs("select",{id:"quizType",value:r.type||"multiple_choice",onChange:E=>s(x=>({...x,type:E.target.value})),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),a.jsx("option",{value:"flashcard",children:"Flashcard"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how this quiz will be presented to students."})]})]})]}),a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Add Question"}),a.jsx(jt,{children:"Create multiple choice questions for the quiz"})]}),a.jsxs(we,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"question",children:"Question"}),a.jsx(Oi,{id:"question",placeholder:"Enter your question...",value:l.question,onChange:E=>c(x=>({...x,question:E.target.value})),rows:3})]}),a.jsx("div",{className:"space-y-2",children:r.type==="flashcard"?a.jsxs(a.Fragment,{children:[a.jsx(Re,{children:"Correct Answer"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(je,{placeholder:"Correct answer",value:l.options[0]??l.answer??"",onChange:E=>{c(x=>({...x,options:[E.target.value]}))}}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"For flashcards enter the correct answer (single). Use [[answer]] in the question to create blanks."})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Re,{children:"Answer Options"}),a.jsxs("div",{className:"space-y-2",children:[l.options.map((E,x)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(Re,{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-sm",children:String.fromCharCode(65+x)}),a.jsx(je,{placeholder:`Option ${String.fromCharCode(65+x)}`,value:E,onChange:j=>y(x,j.target.value),className:l.correctAnswer===x?"ring-2 ring-green-500":""})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(te,{type:"button",variant:l.correctAnswer===x?"default":"outline",size:"sm",onClick:()=>c(j=>({...j,correctAnswer:x})),children:l.correctAnswer===x?"Correct":"Mark Correct"}),l.options.length>2&&a.jsx(te,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(x),children:"Remove"})]})]},x)),a.jsx("div",{children:a.jsx(te,{type:"button",variant:"outline",onClick:b,className:"mt-2",children:"Add Option"})})]})]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),a.jsx(je,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:l.imageUrl,onChange:E=>c(x=>({...x,imageUrl:E.target.value}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"weight",children:"Question Weight"}),a.jsx(je,{id:"weight",type:"number",min:1,value:l.weight,onChange:E=>c(x=>({...x,weight:parseFloat(E.target.value)||1}))})]}),a.jsxs(te,{type:"button",onClick:g,className:"w-full",children:[a.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),r.questions.length>0&&a.jsxs(xe,{children:[a.jsx(Ge,{children:a.jsxs(Xe,{children:["Quiz Questions (",r.questions.length,")"]})}),a.jsx(we,{children:a.jsx("div",{className:"space-y-4",children:r.questions.map((E,x)=>a.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("p",{className:"font-medium",children:[x+1,". ",E.question]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Re,{className:"text-sm",children:"Weight"}),a.jsx(je,{type:"number",min:1,value:E.weight||1,onChange:j=>{const I=parseFloat(j.target.value)||1;s(C=>({...C,questions:C.questions.map((O,U)=>U===x?{...O,weight:I}:O)}))},className:"w-20 text-sm"})]})]}),a.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:E.options.map((j,I)=>a.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${E.correctAnswer===I?"bg-green-100 text-green-800":"bg-secondary/50"}`,children:[a.jsx("span",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+I)}),a.jsx("span",{className:"text-sm",children:j}),E.correctAnswer===I&&a.jsx(rn,{variant:"outline",className:"ml-auto text-xs bg-green-200",children:"Correct"})]},I))})]}),a.jsx("div",{className:"flex flex-col items-end gap-2",children:a.jsx(te,{type:"button",variant:"ghost",size:"icon",onClick:()=>v(x),className:"text-destructive hover:text-destructive",children:a.jsx(Ln,{className:"h-4 w-4"})})})]})},x))})})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[a.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),a.jsxs(te,{type:"submit",disabled:u||r.questions.length===0,children:[a.jsx(Qo,{className:"h-4 w-4 mr-2"}),u?"Saving...":n?"Update Quiz":"Create Quiz"]})]})]})]})}function OI({year:n,yearType:e,onClose:t,onSave:r}){const[s,l]=_.useState({name:"",imageUrl:"",hours:3}),[c,u]=_.useState(!1),h=async m=>{m.preventDefault(),u(!0);try{const g={name:s.name,imageUrl:s.imageUrl||"",hours:s.hours||3,createdAt:new Date};r(g)}catch(g){console.error("Error saving subject:",g)}finally{u(!1)}};return a.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(te,{variant:"ghost",onClick:t,children:[a.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold",children:["Add Subject to Year ",n]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e==="basic"?a.jsx(Iu,{className:"h-4 w-4 text-blue-600"}):a.jsx(ju,{className:"h-4 w-4 text-red-600"}),a.jsxs("p",{className:"text-muted-foreground",children:["Adding to ",e==="basic"?"Basic":"Clinical"," Years â€¢ Year ",n]})]})]})]})}),a.jsxs("form",{onSubmit:h,className:"space-y-6",children:[a.jsx(xe,{className:`border-l-4 ${e==="basic"?"border-l-blue-500 bg-blue-50/50":"border-l-red-500 bg-red-50/50"}`,children:a.jsx(we,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[e==="basic"?a.jsx(Iu,{className:"h-8 w-8 text-blue-600"}):a.jsx(ju,{className:"h-8 w-8 text-red-600"}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-lg",children:["Year ",n]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e==="basic"?"Basic Years":"Clinical Years"})]})]})})}),a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsxs(Xe,{className:"flex items-center gap-2",children:[e==="basic"?a.jsx(Iu,{className:"h-5 w-5 text-blue-600"}):a.jsx(ju,{className:"h-5 w-5 text-red-600"}),"Subject Information"]}),a.jsx(jt,{children:"Basic information about the subject"})]}),a.jsx(we,{className:"space-y-4",children:a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"year",children:"Year"}),a.jsx(je,{id:"year",value:`Year ${n} (${e==="basic"?"Basic":"Clinical"})`,disabled:!0,className:"bg-muted"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"name",children:"Subject Name *"}),a.jsx(je,{id:"name",placeholder:"e.g., Anatomy & Physiology",value:s.name,onChange:m=>l(g=>({...g,name:m.target.value})),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"hours",children:"Credit Hours"}),a.jsx(je,{id:"hours",type:"number",placeholder:"3",value:s.hours,onChange:m=>l(g=>({...g,hours:parseInt(m.target.value)||3})),min:"1",max:"12"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),a.jsx(je,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:s.imageUrl,onChange:m=>l(g=>({...g,imageUrl:m.target.value}))})]})]})})]}),s.name&&a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Preview"}),a.jsxs(jt,{children:["How the subject will appear in Year ",n]})]}),a.jsx(we,{children:a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.imageUrl?a.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-8 h-8 object-cover rounded",onError:m=>{m.currentTarget.style.display="none"}}):a.jsx(ds,{className:"h-5 w-5 text-primary"}),a.jsx("h3",{className:"font-semibold text-lg",children:s.name})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Year ",n," â€¢ ",e," years"]})]})})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[a.jsx(te,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),a.jsxs(te,{type:"submit",disabled:c,children:[a.jsx(Qo,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Subject"]})]})]})]})}function Ub(n,[e,t]){return Math.min(t,Math.max(e,n))}var I$=_.createContext(void 0);function Fx(n){const e=_.useContext(I$);return n||e||"ltr"}var j$="DismissableLayer",Zv="dismissableLayer.update",A$="dismissableLayer.pointerDownOutside",P$="dismissableLayer.focusOutside",$b,LI=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),MI=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:l,onInteractOutside:c,onDismiss:u,...h}=n,m=_.useContext(LI),[g,v]=_.useState(null),y=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=_.useState({}),S=wt(e,P=>v(P)),E=Array.from(m.layers),[x]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),j=E.indexOf(x),I=g?E.indexOf(g):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,O=I>=j,U=D$(P=>{const R=P.target,D=[...m.branches].some(k=>k.contains(R));!O||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},y),q=O$(P=>{const R=P.target;[...m.branches].some(k=>k.contains(R))||(l==null||l(P),c==null||c(P),P.defaultPrevented||u==null||u())},y);return dy(P=>{I===m.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},y),_.useEffect(()=>{if(g)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&($b=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),zb(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=$b)}},[g,y,t,m]),_.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),zb())},[g,m]),_.useEffect(()=>{const P=()=>b({});return document.addEventListener(Zv,P),()=>document.removeEventListener(Zv,P)},[]),a.jsx(Ke.div,{...h,ref:S,style:{pointerEvents:C?O?"auto":"none":void 0,...n.style},onFocusCapture:ze(n.onFocusCapture,q.onFocusCapture),onBlurCapture:ze(n.onBlurCapture,q.onBlurCapture),onPointerDownCapture:ze(n.onPointerDownCapture,U.onPointerDownCapture)})});MI.displayName=j$;var R$="DismissableLayerBranch",k$=_.forwardRef((n,e)=>{const t=_.useContext(LI),r=_.useRef(null),s=wt(e,r);return _.useEffect(()=>{const l=r.current;if(l)return t.branches.add(l),()=>{t.branches.delete(l)}},[t.branches]),a.jsx(Ke.div,{...n,ref:s})});k$.displayName=R$;function D$(n,e=globalThis==null?void 0:globalThis.document){const t=En(n),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const l=u=>{if(u.target&&!r.current){let h=function(){FI(A$,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",l),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function O$(n,e=globalThis==null?void 0:globalThis.document){const t=En(n),r=_.useRef(!1);return _.useEffect(()=>{const s=l=>{l.target&&!r.current&&FI(P$,t,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function zb(){const n=new CustomEvent(Zv);document.dispatchEvent(n)}function FI(n,e,t,{discrete:r}){const s=t.originalEvent.target,l=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?tm(s,l):s.dispatchEvent(l)}var Jg=0;function L$(){_.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Bb()),document.body.insertAdjacentElement("beforeend",n[1]??Bb()),Jg++,()=>{Jg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Jg--}},[])}function Bb(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",n}var M$="Portal",VI=_.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,l]=_.useState(!1);Ht(()=>l(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?em.createPortal(a.jsx(Ke.div,{...r,ref:e}),c):null});VI.displayName=M$;var UI=YC(),Zg=function(){},Um=_.forwardRef(function(n,e){var t=_.useRef(null),r=_.useState({onScrollCapture:Zg,onWheelCapture:Zg,onTouchMoveCapture:Zg}),s=r[0],l=r[1],c=n.forwardProps,u=n.children,h=n.className,m=n.removeScrollBar,g=n.enabled,v=n.shards,y=n.sideCar,b=n.noIsolation,S=n.inert,E=n.allowPinchZoom,x=n.as,j=x===void 0?"div":x,I=n.gapMode,C=Cc(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=y,U=QC([t,e]),q=Qn(Qn({},C),s);return _.createElement(_.Fragment,null,g&&_.createElement(O,{sideCar:UI,removeScrollBar:m,shards:v,noIsolation:b,inert:S,setCallbacks:l,allowPinchZoom:!!E,lockRef:t,gapMode:I}),c?_.cloneElement(_.Children.only(u),Qn(Qn({},q),{ref:U})):_.createElement(j,Qn({},q,{className:h,ref:U}),u))});Um.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Um.classNames={fullWidth:Fu,zeroRight:Mu};var ey=!1;if(typeof window<"u")try{var rf=Object.defineProperty({},"passive",{get:function(){return ey=!0,!0}});window.addEventListener("test",rf,rf),window.removeEventListener("test",rf,rf)}catch{ey=!1}var Fl=ey?{passive:!1}:!1,F$=function(n){return n.tagName==="TEXTAREA"},$I=function(n,e){var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!F$(n)&&t[e]==="visible")},V$=function(n){return $I(n,"overflowY")},U$=function(n){return $I(n,"overflowX")},qb=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=zI(n,r);if(s){var l=BI(n,r),c=l[1],u=l[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},$$=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},z$=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},zI=function(n,e){return n==="v"?V$(e):U$(e)},BI=function(n,e){return n==="v"?$$(e):z$(e)},B$=function(n,e){return n==="h"&&e==="rtl"?-1:1},q$=function(n,e,t,r,s){var l=B$(n,window.getComputedStyle(e).direction),c=l*r,u=t.target,h=e.contains(u),m=!1,g=c>0,v=0,y=0;do{var b=BI(n,u),S=b[0],E=b[1],x=b[2],j=E-x-l*S;(S||j)&&zI(n,u)&&(v+=j,y+=S),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(v)<1||!g&&Math.abs(y)<1)&&(m=!0),m},sf=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Wb=function(n){return[n.deltaX,n.deltaY]},Hb=function(n){return n&&"current"in n?n.current:n},W$=function(n,e){return n[0]===e[0]&&n[1]===e[1]},H$=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},K$=0,Vl=[];function G$(n){var e=_.useRef([]),t=_.useRef([0,0]),r=_.useRef(),s=_.useState(K$++)[0],l=_.useState(kx)[0],c=_.useRef(n);_.useEffect(function(){c.current=n},[n]),_.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var E=hN([n.lockRef.current],(n.shards||[]).map(Hb),!0).filter(Boolean);return E.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),E.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=_.useCallback(function(E,x){if("touches"in E&&E.touches.length===2)return!c.current.allowPinchZoom;var j=sf(E),I=t.current,C="deltaX"in E?E.deltaX:I[0]-j[0],O="deltaY"in E?E.deltaY:I[1]-j[1],U,q=E.target,P=Math.abs(C)>Math.abs(O)?"h":"v";if("touches"in E&&P==="h"&&q.type==="range")return!1;var R=qb(P,q);if(!R)return!0;if(R?U=P:(U=P==="v"?"h":"v",R=qb(P,q)),!R)return!1;if(!r.current&&"changedTouches"in E&&(C||O)&&(r.current=U),!U)return!0;var D=r.current||U;return q$(D,x,E,D==="h"?C:O)},[]),h=_.useCallback(function(E){var x=E;if(!(!Vl.length||Vl[Vl.length-1]!==l)){var j="deltaY"in x?Wb(x):sf(x),I=e.current.filter(function(U){return U.name===x.type&&(U.target===x.target||x.target===U.shadowParent)&&W$(U.delta,j)})[0];if(I&&I.should){x.cancelable&&x.preventDefault();return}if(!I){var C=(c.current.shards||[]).map(Hb).filter(Boolean).filter(function(U){return U.contains(x.target)}),O=C.length>0?u(x,C[0]):!c.current.noIsolation;O&&x.cancelable&&x.preventDefault()}}},[]),m=_.useCallback(function(E,x,j,I){var C={name:E,delta:x,target:j,should:I,shadowParent:Q$(j)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(O){return O!==C})},1)},[]),g=_.useCallback(function(E){t.current=sf(E),r.current=void 0},[]),v=_.useCallback(function(E){m(E.type,Wb(E),E.target,u(E,n.lockRef.current))},[]),y=_.useCallback(function(E){m(E.type,sf(E),E.target,u(E,n.lockRef.current))},[]);_.useEffect(function(){return Vl.push(l),n.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:y}),document.addEventListener("wheel",h,Fl),document.addEventListener("touchmove",h,Fl),document.addEventListener("touchstart",g,Fl),function(){Vl=Vl.filter(function(E){return E!==l}),document.removeEventListener("wheel",h,Fl),document.removeEventListener("touchmove",h,Fl),document.removeEventListener("touchstart",g,Fl)}},[]);var b=n.removeScrollBar,S=n.inert;return _.createElement(_.Fragment,null,S?_.createElement(l,{styles:H$(s)}):null,b?_.createElement(eI,{gapMode:n.gapMode}):null)}function Q$(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const Y$=JC(UI,G$);var qI=_.forwardRef(function(n,e){return _.createElement(Um,Qn({},n,{ref:e,sideCar:Y$}))});qI.classNames=Um.classNames;var X$=[" ","Enter","ArrowUp","ArrowDown"],J$=[" ","Enter"],bd="Select",[$m,zm,Z$]=uy(bd),[Oc,Bz]=Li(bd,[Z$,am]),Bm=am(),[e9,ea]=Oc(bd),[t9,n9]=Oc(bd),WI=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:l,value:c,defaultValue:u,onValueChange:h,dir:m,name:g,autoComplete:v,disabled:y,required:b}=n,S=Bm(e),[E,x]=_.useState(null),[j,I]=_.useState(null),[C,O]=_.useState(!1),U=Fx(m),[q=!1,P]=Oa({prop:r,defaultProp:s,onChange:l}),[R,D]=Oa({prop:c,defaultProp:u,onChange:h}),k=_.useRef(null),$=E?!!E.closest("form"):!0,[z,M]=_.useState(new Set),ie=Array.from(z).map(ae=>ae.props.value).join(";");return a.jsx(cD,{...S,children:a.jsxs(e9,{required:b,scope:e,trigger:E,onTriggerChange:x,valueNode:j,onValueNodeChange:I,valueNodeHasChildren:C,onValueNodeHasChildrenChange:O,contentId:Io(),value:R,onValueChange:D,open:q,onOpenChange:P,dir:U,triggerPointerDownPosRef:k,disabled:y,children:[a.jsx($m.Provider,{scope:e,children:a.jsx(t9,{scope:n.__scopeSelect,onNativeOptionAdd:_.useCallback(ae=>{M(Y=>new Set(Y).add(ae))},[]),onNativeOptionRemove:_.useCallback(ae=>{M(Y=>{const J=new Set(Y);return J.delete(ae),J})},[]),children:t})}),$?a.jsxs(gj,{"aria-hidden":!0,required:b,tabIndex:-1,name:g,autoComplete:v,value:R,onChange:ae=>D(ae.target.value),disabled:y,children:[R===void 0?a.jsx("option",{value:""}):null,Array.from(z)]},ie):null]})})};WI.displayName=bd;var HI="SelectTrigger",KI=_.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,l=Bm(t),c=ea(HI,t),u=c.disabled||r,h=wt(e,c.onTriggerChange),m=zm(t),[g,v,y]=vj(S=>{const E=m().filter(I=>!I.disabled),x=E.find(I=>I.value===c.value),j=yj(E,S,x);j!==void 0&&c.onValueChange(j.value)}),b=()=>{u||(c.onOpenChange(!0),y())};return a.jsx(_S,{asChild:!0,...l,children:a.jsx(Ke.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":pj(c.value)?"":void 0,...s,ref:h,onClick:ze(s.onClick,S=>{S.currentTarget.focus()}),onPointerDown:ze(s.onPointerDown,S=>{const E=S.target;E.hasPointerCapture(S.pointerId)&&E.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&(b(),c.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)},S.preventDefault())}),onKeyDown:ze(s.onKeyDown,S=>{const E=g.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&v(S.key),!(E&&S.key===" ")&&X$.includes(S.key)&&(b(),S.preventDefault())})})})});KI.displayName=HI;var GI="SelectValue",QI=_.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:l,placeholder:c="",...u}=n,h=ea(GI,t),{onValueNodeHasChildrenChange:m}=h,g=l!==void 0,v=wt(e,h.onValueNodeChange);return Ht(()=>{m(g)},[m,g]),a.jsx(Ke.span,{...u,ref:v,style:{pointerEvents:"none"},children:pj(h.value)?a.jsx(a.Fragment,{children:c}):l})});QI.displayName=GI;var r9="SelectIcon",YI=_.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return a.jsx(Ke.span,{"aria-hidden":!0,...s,ref:e,children:r||"â–¼"})});YI.displayName=r9;var s9="SelectPortal",XI=n=>a.jsx(VI,{asChild:!0,...n});XI.displayName=s9;var Wa="SelectContent",JI=_.forwardRef((n,e)=>{const t=ea(Wa,n.__scopeSelect),[r,s]=_.useState();if(Ht(()=>{s(new DocumentFragment)},[]),!t.open){const l=r;return l?Ha.createPortal(a.jsx(ZI,{scope:n.__scopeSelect,children:a.jsx($m.Slot,{scope:n.__scopeSelect,children:a.jsx("div",{children:n.children})})}),l):null}return a.jsx(ej,{...n,ref:e})});JI.displayName=Wa;var bi=10,[ZI,ta]=Oc(Wa),i9="SelectContentImpl",ej=_.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:l,onPointerDownOutside:c,side:u,sideOffset:h,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:y,collisionPadding:b,sticky:S,hideWhenDetached:E,avoidCollisions:x,...j}=n,I=ea(Wa,t),[C,O]=_.useState(null),[U,q]=_.useState(null),P=wt(e,ue=>O(ue)),[R,D]=_.useState(null),[k,$]=_.useState(null),z=zm(t),[M,ie]=_.useState(!1),ae=_.useRef(!1);_.useEffect(()=>{if(C)return oI(C)},[C]),L$();const Y=_.useCallback(ue=>{const[ye,...De]=z().map(Le=>Le.ref.current),[Ie]=De.slice(-1),Me=document.activeElement;for(const Le of ue)if(Le===Me||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===ye&&U&&(U.scrollTop=0),Le===Ie&&U&&(U.scrollTop=U.scrollHeight),Le==null||Le.focus(),document.activeElement!==Me))return},[z,U]),J=_.useCallback(()=>Y([R,C]),[Y,R,C]);_.useEffect(()=>{M&&J()},[M,J]);const{onOpenChange:B,triggerPointerDownPosRef:K}=I;_.useEffect(()=>{if(C){let ue={x:0,y:0};const ye=Ie=>{var Me,Le;ue={x:Math.abs(Math.round(Ie.pageX)-(((Me=K.current)==null?void 0:Me.x)??0)),y:Math.abs(Math.round(Ie.pageY)-(((Le=K.current)==null?void 0:Le.y)??0))}},De=Ie=>{ue.x<=10&&ue.y<=10?Ie.preventDefault():C.contains(Ie.target)||B(!1),document.removeEventListener("pointermove",ye),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",De,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",De,{capture:!0})}}},[C,B,K]),_.useEffect(()=>{const ue=()=>B(!1);return window.addEventListener("blur",ue),window.addEventListener("resize",ue),()=>{window.removeEventListener("blur",ue),window.removeEventListener("resize",ue)}},[B]);const[Q,F]=vj(ue=>{const ye=z().filter(Me=>!Me.disabled),De=ye.find(Me=>Me.ref.current===document.activeElement),Ie=yj(ye,ue,De);Ie&&setTimeout(()=>Ie.ref.current.focus())}),H=_.useCallback((ue,ye,De)=>{const Ie=!ae.current&&!De;(I.value!==void 0&&I.value===ye||Ie)&&(D(ue),Ie&&(ae.current=!0))},[I.value]),le=_.useCallback(()=>C==null?void 0:C.focus(),[C]),Ee=_.useCallback((ue,ye,De)=>{const Ie=!ae.current&&!De;(I.value!==void 0&&I.value===ye||Ie)&&$(ue)},[I.value]),Te=r==="popper"?ty:tj,pe=Te===ty?{side:u,sideOffset:h,align:m,alignOffset:g,arrowPadding:v,collisionBoundary:y,collisionPadding:b,sticky:S,hideWhenDetached:E,avoidCollisions:x}:{};return a.jsx(ZI,{scope:t,content:C,viewport:U,onViewportChange:q,itemRefCallback:H,selectedItem:R,onItemLeave:le,itemTextRefCallback:Ee,focusSelectedItem:J,selectedItemText:k,position:r,isPositioned:M,searchRef:Q,children:a.jsx(qI,{as:Da,allowPinchZoom:!0,children:a.jsx(Rx,{asChild:!0,trapped:I.open,onMountAutoFocus:ue=>{ue.preventDefault()},onUnmountAutoFocus:ze(s,ue=>{var ye;(ye=I.trigger)==null||ye.focus({preventScroll:!0}),ue.preventDefault()}),children:a.jsx(MI,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:ue=>ue.preventDefault(),onDismiss:()=>I.onOpenChange(!1),children:a.jsx(Te,{role:"listbox",id:I.contentId,"data-state":I.open?"open":"closed",dir:I.dir,onContextMenu:ue=>ue.preventDefault(),...j,...pe,onPlaced:()=>ie(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:ze(j.onKeyDown,ue=>{const ye=ue.ctrlKey||ue.altKey||ue.metaKey;if(ue.key==="Tab"&&ue.preventDefault(),!ye&&ue.key.length===1&&F(ue.key),["ArrowUp","ArrowDown","Home","End"].includes(ue.key)){let Ie=z().filter(Me=>!Me.disabled).map(Me=>Me.ref.current);if(["ArrowUp","End"].includes(ue.key)&&(Ie=Ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(ue.key)){const Me=ue.target,Le=Ie.indexOf(Me);Ie=Ie.slice(Le+1)}setTimeout(()=>Y(Ie)),ue.preventDefault()}})})})})})})});ej.displayName=i9;var o9="SelectItemAlignedPosition",tj=_.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,l=ea(Wa,t),c=ta(Wa,t),[u,h]=_.useState(null),[m,g]=_.useState(null),v=wt(e,P=>g(P)),y=zm(t),b=_.useRef(!1),S=_.useRef(!0),{viewport:E,selectedItem:x,selectedItemText:j,focusSelectedItem:I}=c,C=_.useCallback(()=>{if(l.trigger&&l.valueNode&&u&&m&&E&&x&&j){const P=l.trigger.getBoundingClientRect(),R=m.getBoundingClientRect(),D=l.valueNode.getBoundingClientRect(),k=j.getBoundingClientRect();if(l.dir!=="rtl"){const Me=k.left-R.left,Le=D.left-Me,ut=P.left-Le,bt=P.width+ut,sn=Math.max(bt,R.width),Bt=window.innerWidth-bi,gn=Ub(Le,[bi,Bt-sn]);u.style.minWidth=bt+"px",u.style.left=gn+"px"}else{const Me=R.right-k.right,Le=window.innerWidth-D.right-Me,ut=window.innerWidth-P.right-Le,bt=P.width+ut,sn=Math.max(bt,R.width),Bt=window.innerWidth-bi,gn=Ub(Le,[bi,Bt-sn]);u.style.minWidth=bt+"px",u.style.right=gn+"px"}const $=y(),z=window.innerHeight-bi*2,M=E.scrollHeight,ie=window.getComputedStyle(m),ae=parseInt(ie.borderTopWidth,10),Y=parseInt(ie.paddingTop,10),J=parseInt(ie.borderBottomWidth,10),B=parseInt(ie.paddingBottom,10),K=ae+Y+M+B+J,Q=Math.min(x.offsetHeight*5,K),F=window.getComputedStyle(E),H=parseInt(F.paddingTop,10),le=parseInt(F.paddingBottom,10),Ee=P.top+P.height/2-bi,Te=z-Ee,pe=x.offsetHeight/2,ue=x.offsetTop+pe,ye=ae+Y+ue,De=K-ye;if(ye<=Ee){const Me=x===$[$.length-1].ref.current;u.style.bottom="0px";const Le=m.clientHeight-E.offsetTop-E.offsetHeight,ut=Math.max(Te,pe+(Me?le:0)+Le+J),bt=ye+ut;u.style.height=bt+"px"}else{const Me=x===$[0].ref.current;u.style.top="0px";const ut=Math.max(Ee,ae+E.offsetTop+(Me?H:0)+pe)+De;u.style.height=ut+"px",E.scrollTop=ye-Ee+E.offsetTop}u.style.margin=`${bi}px 0`,u.style.minHeight=Q+"px",u.style.maxHeight=z+"px",r==null||r(),requestAnimationFrame(()=>b.current=!0)}},[y,l.trigger,l.valueNode,u,m,E,x,j,l.dir,r]);Ht(()=>C(),[C]);const[O,U]=_.useState();Ht(()=>{m&&U(window.getComputedStyle(m).zIndex)},[m]);const q=_.useCallback(P=>{P&&S.current===!0&&(C(),I==null||I(),S.current=!1)},[C,I]);return a.jsx(l9,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:q,children:a.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:a.jsx(Ke.div,{...s,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});tj.displayName=o9;var a9="SelectPopperPosition",ty=_.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=bi,...l}=n,c=Bm(t);return a.jsx(ES,{...c,...l,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ty.displayName=a9;var[l9,Vx]=Oc(Wa,{}),ny="SelectViewport",nj=_.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,l=ta(ny,t),c=Vx(ny,t),u=wt(e,l.onViewportChange),h=_.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx($m.Slot,{scope:t,children:a.jsx(Ke.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"auto",...s.style},onScroll:ze(s.onScroll,m=>{const g=m.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:y}=c;if(y!=null&&y.current&&v){const b=Math.abs(h.current-g.scrollTop);if(b>0){const S=window.innerHeight-bi*2,E=parseFloat(v.style.minHeight),x=parseFloat(v.style.height),j=Math.max(E,x);if(j<S){const I=j+b,C=Math.min(S,I),O=I-C;v.style.height=C+"px",v.style.bottom==="0px"&&(g.scrollTop=O>0?O:0,v.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});nj.displayName=ny;var rj="SelectGroup",[c9,u9]=Oc(rj),d9=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Io();return a.jsx(c9,{scope:t,id:s,children:a.jsx(Ke.div,{role:"group","aria-labelledby":s,...r,ref:e})})});d9.displayName=rj;var sj="SelectLabel",ij=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=u9(sj,t);return a.jsx(Ke.div,{id:s.id,...r,ref:e})});ij.displayName=sj;var Jf="SelectItem",[h9,oj]=Oc(Jf),aj=_.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:l,...c}=n,u=ea(Jf,t),h=ta(Jf,t),m=u.value===r,[g,v]=_.useState(l??""),[y,b]=_.useState(!1),S=wt(e,j=>{var I;return(I=h.itemRefCallback)==null?void 0:I.call(h,j,r,s)}),E=Io(),x=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(h9,{scope:t,value:r,disabled:s,textId:E,isSelected:m,onItemTextChange:_.useCallback(j=>{v(I=>I||((j==null?void 0:j.textContent)??"").trim())},[]),children:a.jsx($m.ItemSlot,{scope:t,value:r,disabled:s,textValue:g,children:a.jsx(Ke.div,{role:"option","aria-labelledby":E,"data-highlighted":y?"":void 0,"aria-selected":m&&y,"data-state":m?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:S,onFocus:ze(c.onFocus,()=>b(!0)),onBlur:ze(c.onBlur,()=>b(!1)),onPointerUp:ze(c.onPointerUp,x),onPointerMove:ze(c.onPointerMove,j=>{var I;s?(I=h.onItemLeave)==null||I.call(h):j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ze(c.onPointerLeave,j=>{var I;j.currentTarget===document.activeElement&&((I=h.onItemLeave)==null||I.call(h))}),onKeyDown:ze(c.onKeyDown,j=>{var C;((C=h.searchRef)==null?void 0:C.current)!==""&&j.key===" "||(J$.includes(j.key)&&x(),j.key===" "&&j.preventDefault())})})})})});aj.displayName=Jf;var Nu="SelectItemText",lj=_.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...l}=n,c=ea(Nu,t),u=ta(Nu,t),h=oj(Nu,t),m=n9(Nu,t),[g,v]=_.useState(null),y=wt(e,j=>v(j),h.onItemTextChange,j=>{var I;return(I=u.itemTextRefCallback)==null?void 0:I.call(u,j,h.value,h.disabled)}),b=g==null?void 0:g.textContent,S=_.useMemo(()=>a.jsx("option",{value:h.value,disabled:h.disabled,children:b},h.value),[h.disabled,h.value,b]),{onNativeOptionAdd:E,onNativeOptionRemove:x}=m;return Ht(()=>(E(S),()=>x(S)),[E,x,S]),a.jsxs(a.Fragment,{children:[a.jsx(Ke.span,{id:h.textId,...l,ref:y}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Ha.createPortal(l.children,c.valueNode):null]})});lj.displayName=Nu;var cj="SelectItemIndicator",uj=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return oj(cj,t).isSelected?a.jsx(Ke.span,{"aria-hidden":!0,...r,ref:e}):null});uj.displayName=cj;var ry="SelectScrollUpButton",dj=_.forwardRef((n,e)=>{const t=ta(ry,n.__scopeSelect),r=Vx(ry,n.__scopeSelect),[s,l]=_.useState(!1),c=wt(e,r.onScrollButtonChange);return Ht(()=>{if(t.viewport&&t.isPositioned){let u=function(){const m=h.scrollTop>0;l(m)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?a.jsx(fj,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});dj.displayName=ry;var sy="SelectScrollDownButton",hj=_.forwardRef((n,e)=>{const t=ta(sy,n.__scopeSelect),r=Vx(sy,n.__scopeSelect),[s,l]=_.useState(!1),c=wt(e,r.onScrollButtonChange);return Ht(()=>{if(t.viewport&&t.isPositioned){let u=function(){const m=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<m;l(g)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?a.jsx(fj,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});hj.displayName=sy;var fj=_.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,l=ta("SelectScrollButton",t),c=_.useRef(null),u=zm(t),h=_.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return _.useEffect(()=>()=>h(),[h]),Ht(()=>{var g;const m=u().find(v=>v.ref.current===document.activeElement);(g=m==null?void 0:m.ref.current)==null||g.scrollIntoView({block:"nearest"})},[u]),a.jsx(Ke.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ze(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:ze(s.onPointerMove,()=>{var m;(m=l.onItemLeave)==null||m.call(l),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:ze(s.onPointerLeave,()=>{h()})})}),f9="SelectSeparator",mj=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return a.jsx(Ke.div,{"aria-hidden":!0,...r,ref:e})});mj.displayName=f9;var iy="SelectArrow",m9=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Bm(t),l=ea(iy,t),c=ta(iy,t);return l.open&&c.position==="popper"?a.jsx(bS,{...s,...r,ref:e}):null});m9.displayName=iy;function pj(n){return n===""||n===void 0}var gj=_.forwardRef((n,e)=>{const{value:t,...r}=n,s=_.useRef(null),l=wt(e,s),c=$C(t);return _.useEffect(()=>{const u=s.current,h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==t&&g){const v=new Event("change",{bubbles:!0});g.call(u,t),u.dispatchEvent(v)}},[c,t]),a.jsx(od,{asChild:!0,children:a.jsx("select",{...r,ref:l,defaultValue:t})})});gj.displayName="BubbleSelect";function vj(n){const e=En(n),t=_.useRef(""),r=_.useRef(0),s=_.useCallback(c=>{const u=t.current+c;e(u),function h(m){t.current=m,window.clearTimeout(r.current),m!==""&&(r.current=window.setTimeout(()=>h(""),1e3))}(u)},[e]),l=_.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,l]}function yj(n,e,t){const s=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,l=t?n.indexOf(t):-1;let c=p9(n,Math.max(l,0));s.length===1&&(c=c.filter(m=>m!==t));const h=c.find(m=>m.textValue.toLowerCase().startsWith(s.toLowerCase()));return h!==t?h:void 0}function p9(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var g9=WI,xj=KI,v9=QI,y9=YI,x9=XI,wj=JI,w9=nj,_j=ij,Ej=aj,_9=lj,E9=uj,bj=dj,Sj=hj,Nj=mj;const b9=g9,S9=v9,Tj=_.forwardRef(({className:n,children:e,...t},r)=>a.jsxs(xj,{ref:r,className:nt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,a.jsx(y9,{asChild:!0,children:a.jsx(U1,{className:"h-4 w-4 opacity-50"})})]}));Tj.displayName=xj.displayName;const Cj=_.forwardRef(({className:n,...e},t)=>a.jsx(bj,{ref:t,className:nt("flex cursor-default items-center justify-center py-1",n),...e,children:a.jsx(xR,{className:"h-4 w-4"})}));Cj.displayName=bj.displayName;const Ij=_.forwardRef(({className:n,...e},t)=>a.jsx(Sj,{ref:t,className:nt("flex cursor-default items-center justify-center py-1",n),...e,children:a.jsx(U1,{className:"h-4 w-4"})}));Ij.displayName=Sj.displayName;const jj=_.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>a.jsx(x9,{children:a.jsxs(wj,{ref:s,className:nt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[a.jsx(Cj,{}),a.jsx(w9,{className:nt("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(Ij,{})]})}));jj.displayName=wj.displayName;const N9=_.forwardRef(({className:n,...e},t)=>a.jsx(_j,{ref:t,className:nt("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));N9.displayName=_j.displayName;const Aj=_.forwardRef(({className:n,children:e,...t},r)=>a.jsxs(Ej,{ref:r,className:nt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(E9,{children:a.jsx(yR,{className:"h-4 w-4"})})}),a.jsx(_9,{children:e})]}));Aj.displayName=Ej.displayName;const T9=_.forwardRef(({className:n,...e},t)=>a.jsx(Nj,{ref:t,className:nt("-mx-1 my-1 h-px bg-muted",n),...e}));T9.displayName=Nj.displayName;function Pj({lectureId:n,onClose:e,onSave:t}){const[r,s]=_.useState({title:"",description:"",fileUrl:"",fileType:"",fileSize:""}),[l,c]=_.useState(!1),u=["PDF","DOCX","PPTX","XLSX","TXT","ZIP","MP3","MP4","JPG","PNG"],h=async m=>{m.preventDefault(),c(!0);try{const g={...r,id:`file_${Date.now()}`,lectureId:n,uploadedAt:new Date,uploadedBy:"Current User"};t(g)}catch(g){console.error("Error saving file:",g)}finally{c(!1)}};return a.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(te,{variant:"ghost",onClick:e,children:[a.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Add File"}),a.jsx("p",{className:"text-muted-foreground",children:"Add a file resource to the lecture"})]})]})}),a.jsxs("form",{onSubmit:h,className:"space-y-6",children:[a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsxs(Xe,{className:"flex items-center gap-2",children:[a.jsx(Ks,{className:"h-5 w-5 text-blue-600"}),"File Information"]}),a.jsx(jt,{children:"Upload or link to educational files"})]}),a.jsxs(we,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"title",children:"File Title *"}),a.jsx(je,{id:"title",placeholder:"e.g., Anatomy Reference Guide",value:r.title,onChange:m=>s(g=>({...g,title:m.target.value})),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"description",children:"Description"}),a.jsx(Oi,{id:"description",placeholder:"Describe the file content...",value:r.description,onChange:m=>s(g=>({...g,description:m.target.value})),rows:3})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"fileType",children:"File Type *"}),a.jsxs(b9,{value:r.fileType,onValueChange:m=>s(g=>({...g,fileType:m})),children:[a.jsx(Tj,{children:a.jsx(S9,{placeholder:"Select file type"})}),a.jsx(jj,{children:u.map(m=>a.jsx(Aj,{value:m,children:m},m))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"fileSize",children:"File Size"}),a.jsx(je,{id:"fileSize",placeholder:"e.g., 2.5 MB",value:r.fileSize,onChange:m=>s(g=>({...g,fileSize:m.target.value}))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"fileUrl",children:"File URL *"}),a.jsx(je,{id:"fileUrl",placeholder:"https://example.com/file.pdf or /uploads/file.pdf",value:r.fileUrl,onChange:m=>s(g=>({...g,fileUrl:m.target.value})),required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload to Firebase Storage or use external links"})]})]})]}),r.title&&a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Preview"}),a.jsx(jt,{children:"How the file will appear in the lecture"})]}),a.jsx(we,{children:a.jsx("div",{className:"p-4 border rounded-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ks,{className:"h-8 w-8 text-blue-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium",children:r.title}),r.description&&a.jsx("p",{className:"text-sm text-muted-foreground",children:r.description}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.fileType&&a.jsx(rn,{variant:"secondary",children:r.fileType}),r.fileSize&&a.jsx(rn,{variant:"outline",children:r.fileSize})]})]})]})})})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[a.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),a.jsxs(te,{type:"submit",disabled:l,children:[a.jsx(Qo,{className:"h-4 w-4 mr-2"}),l?"Adding...":"Add File"]})]})]})]})}function Rj({lectureId:n,onClose:e,onSave:t}){const[r,s]=_.useState({title:"",description:"",url:"",duration:"",thumbnailUrl:"",platform:"YouTube"}),[l,c]=_.useState(!1),u=async v=>{v.preventDefault(),c(!0);try{const y={...r,id:`video_${Date.now()}`,lectureId:n,uploadedAt:new Date,uploadedBy:"Current User"};t(y)}catch(y){console.error("Error saving video:",y)}finally{c(!1)}},h=v=>{const y=v.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return y?y[1]:null},m=v=>{const y=h(v);return y?`https://img.youtube.com/vi/${y}/maxresdefault.jpg`:""},g=v=>{s(y=>({...y,url:v,thumbnailUrl:m(v)}))};return a.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(te,{variant:"ghost",onClick:e,children:[a.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Add Video"}),a.jsx("p",{className:"text-muted-foreground",children:"Add a video resource to the lecture"})]})]})}),a.jsxs("form",{onSubmit:u,className:"space-y-6",children:[a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsxs(Xe,{className:"flex items-center gap-2",children:[a.jsx(Fs,{className:"h-5 w-5 text-green-600"}),"Video Information"]}),a.jsx(jt,{children:"Add YouTube videos or other video links"})]}),a.jsxs(we,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"title",children:"Video Title *"}),a.jsx(je,{id:"title",placeholder:"e.g., Introduction to Human Anatomy",value:r.title,onChange:v=>s(y=>({...y,title:v.target.value})),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"description",children:"Description"}),a.jsx(Oi,{id:"description",placeholder:"Describe the video content...",value:r.description,onChange:v=>s(y=>({...y,description:v.target.value})),rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"url",children:"Video URL *"}),a.jsx(je,{id:"url",placeholder:"https://youtube.com/watch?v=... or https://vimeo.com/...",value:r.url,onChange:v=>g(v.target.value),required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports YouTube, Vimeo, and direct video links"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"duration",children:"Duration"}),a.jsx(je,{id:"duration",placeholder:"e.g., 45:30",value:r.duration,onChange:v=>s(y=>({...y,duration:v.target.value}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"platform",children:"Platform"}),a.jsx(je,{id:"platform",value:r.platform,onChange:v=>s(y=>({...y,platform:v.target.value})),disabled:!0})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"thumbnailUrl",children:"Thumbnail URL"}),a.jsx(je,{id:"thumbnailUrl",placeholder:"Auto-generated for YouTube videos",value:r.thumbnailUrl,onChange:v=>s(y=>({...y,thumbnailUrl:v.target.value}))})]})]})]}),r.title&&a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Preview"}),a.jsx(jt,{children:"How the video will appear in the lecture"})]}),a.jsx(we,{children:a.jsx("div",{className:"p-4 border rounded-lg",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("div",{className:"relative",children:[r.thumbnailUrl?a.jsx("img",{src:r.thumbnailUrl,alt:r.title,className:"w-24 h-16 object-cover rounded"}):a.jsx("div",{className:"w-24 h-16 bg-gray-200 rounded flex items-center justify-center",children:a.jsx(lv,{className:"h-6 w-6 text-gray-400"})}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(Fs,{className:"h-8 w-8 text-white opacity-80"})})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium",children:r.title}),r.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:r.description}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.duration&&a.jsxs(rn,{variant:"secondary",className:"text-xs",children:[a.jsx(_f,{className:"h-3 w-3 mr-1"}),r.duration]}),a.jsxs(rn,{variant:"outline",className:"text-xs",children:[a.jsx(SR,{className:"h-3 w-3 mr-1"}),r.platform]})]})]})]})})})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[a.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),a.jsxs(te,{type:"submit",disabled:l,children:[a.jsx(Qo,{className:"h-4 w-4 mr-2"}),l?"Adding...":"Add Video"]})]})]})]})}function qm({lecture:n,subjectId:e,subjectName:t,yearType:r,onClose:s,onSave:l}){const[c,u]=_.useState({name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",order:(n==null?void 0:n.order)||1,imageUrl:(n==null?void 0:n.imageUrl)||""}),[h,m]=_.useState(!1),g=async v=>{v.preventDefault(),m(!0);try{const y={...c,subjectId:e,createdAt:new Date,uploadedBy:"Current User"};l(y)}catch(y){console.error("Error saving lecture:",y)}finally{m(!1)}};return a.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(te,{variant:"ghost",onClick:s,children:[a.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Add Lecture"}),a.jsxs("p",{className:"text-muted-foreground",children:["Add a new lecture to ",t]})]})]})}),a.jsxs("form",{onSubmit:g,className:"space-y-6",children:[a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsxs(Xe,{className:"flex items-center gap-2",children:[r==="basic"?a.jsx(Iu,{className:"h-5 w-5 text-blue-600"}):a.jsx(ju,{className:"h-5 w-5 text-red-600"}),"Lecture Information"]}),a.jsx(jt,{children:"Basic information about the lecture"})]}),a.jsxs(we,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"name",children:"Lecture Name *"}),a.jsx(je,{id:"name",placeholder:"e.g., Introduction to Cell Biology",value:c.name,onChange:v=>u(y=>({...y,name:v.target.value})),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"description",children:"Description"}),a.jsx(Oi,{id:"description",placeholder:"Describe what this lecture covers...",value:c.description,onChange:v=>u(y=>({...y,description:v.target.value})),rows:4})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"order",children:"Order"}),a.jsx(je,{id:"order",type:"number",min:"1",value:c.order,onChange:v=>u(y=>({...y,order:parseInt(v.target.value)||1}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),a.jsx(je,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:v=>u(y=>({...y,imageUrl:v.target.value}))})]})]})]})]}),c.name&&a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Preview"}),a.jsxs(jt,{children:["How the lecture will appear in ",t]})]}),a.jsx(we,{children:a.jsx("div",{className:"p-4 border rounded-lg bg-secondary/20",children:a.jsxs("div",{className:"flex items-start gap-3",children:[c.imageUrl?a.jsx("img",{src:c.imageUrl,alt:c.name,className:"w-16 h-16 object-cover rounded",onError:v=>{v.currentTarget.style.display="none"}}):a.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:a.jsx(ds,{className:"h-6 w-6 text-gray-400"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-lg",children:c.name}),c.description&&a.jsx("p",{className:"text-sm text-muted-foreground",children:c.description}),a.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Lecture ",c.order," â€¢ ",t]})]})]})})})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[a.jsx(te,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),a.jsxs(te,{type:"submit",disabled:h,children:[a.jsx(Qo,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add Lecture"]})]})]})]})}async function wr(n){let e="dflp2vxn2",t="Med_just";const r="".replace(/\/$/,"");try{const I=await fetch(`${r}/api/cloudinary/config`);if(I.ok)try{const C=await I.json();e=C.cloudName||e,t=C.uploadPreset||C.upload_preset||t}catch{const C=I.headers.get("x-cloudinary-cloudname"),O=I.headers.get("x-cloudinary-upload-preset");C&&(e=e||C),O&&(t=t||O)}}catch{}if(!e)try{const I=localStorage.getItem("cloudinary.cloudName"),C=localStorage.getItem("cloudinary.uploadPreset");I&&(e=I,t=t||C||t)}catch{}if(!e)throw new Error("Cloudinary cloud name is not configured. Set VITE_CLOUDINARY_CLOUD_NAME in your environment or provide server config.");const s=`https://api.cloudinary.com/v1_1/${e}/upload`;try{const I=await Kb(n);if(I&&typeof I=="string"&&I.startsWith("http"))return I}catch(I){const C=String((I==null?void 0:I.message)||I||"");console.warn("Server upload failed, falling back to client upload:",C)}async function l(I){if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.");try{const C=I.clone();try{return{json:await C.json(),text:null}}catch{}}catch{if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}try{const C=await I.text();try{return{json:JSON.parse(C),text:C}}catch{return{json:null,text:C}}}catch(C){throw new Error("Could not read response body: "+String(C))}}async function c(I,C){const O=async(q,P)=>{const R=await fetch(q,P),D=await l(R).catch(k=>{throw k});return{res:R,body:D}},U=typeof I=="string"?I:I.url;try{return await O(U,C)}catch(q){const P=String((q==null?void 0:q.message)||q||"").toLowerCase();if(P.includes("response body already read")||P.includes("body already read")){const R=U+(U.includes("?")?`&_retry=${Date.now()}`:`?_retry=${Date.now()}`);try{return await O(R,C)}catch{}}if(P.includes("failed to fetch")||P.includes("networkerror")||P.includes("network request failed")||P.includes("script error")||P.includes("response body already read")||P.includes("body already read"))try{return await(async()=>await new Promise((R,D)=>{const k=new XMLHttpRequest;let $=C&&C.method||"GET",z=!1;try{if(k.open($,U,!0),C&&C.headers){const M=C.headers;Object.keys(M).forEach(ie=>{try{k.setRequestHeader(ie,M[ie])}catch{}})}if(k.onreadystatechange=()=>{if(k.readyState!==4)return;const M=k.status||0,ie={};(k.getAllResponseHeaders()||"").split(`\r
`).forEach(Q=>{const F=Q.indexOf(":");if(F>0){const H=Q.substring(0,F).trim().toLowerCase(),le=Q.substring(F+1).trim();ie[H]=le}});const Y={ok:M>=200&&M<400,status:M,headers:{get:Q=>ie[Q.toLowerCase()]||null}},J=k.responseText;let B=null;try{B=J?JSON.parse(J):null}catch{B=null}R({res:Y,body:{json:B,text:J}})},k.onerror=()=>D(new Error("XHR network error")),k.ontimeout=()=>D(new Error("XHR timeout")),C&&C.body)try{if(C.body instanceof FormData)z=!0,k.send(C.body);else if(typeof C.body=="string")k.send(C.body);else try{k.send(JSON.stringify(C.body))}catch{k.send(String(C.body))}}catch(M){D(M)}else k.send()}catch(M){D(M)}}))()}catch{}throw q}}if(t){const I=new FormData;I.append("file",n),I.append("upload_preset",t);const{res:C,body:O}=await c(s,{method:"POST",body:I});if(!C.ok){const U=O!=null&&O.json?JSON.stringify(O.json):(O==null?void 0:O.text)||"";throw new Error(`Cloudinary upload failed: ${C.status} ${U}`)}if(O.json&&(O.json.secure_url||O.json.url))return O.json.secure_url||O.json.url;if(O.text&&typeof O.text=="string"&&O.text.startsWith("http"))return O.text;throw new Error("Cloudinary upload returned unexpected response.")}const u="686641252611351";let h,m;try{const I=await c(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})});h=I.res,m=I.body}catch(I){const C=String((I==null?void 0:I.message)||I||"");if(C.toLowerCase().includes("response body already read")||C.toLowerCase().includes("body already read")){try{const O=await fetch(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})}),U=O.headers.get("x-cloudinary-signature"),q=O.headers.get("x-cloudinary-timestamp"),P=O.headers.get("x-cloudinary-apikey"),R=O.headers.get("x-cloudinary-cloudname"),D=O.headers.get("x-cloudinary-upload-preset");if(U&&q){const k=P||u||null,$=U,z=Number(q);R&&(e=e||R);const M=new FormData;M.append("file",n),k&&M.append("api_key",k),M.append("timestamp",String(z)),M.append("signature",$);const{res:ie,body:ae}=await c(s,{method:"POST",body:M});if(!ie.ok){const Y=ae!=null&&ae.json?JSON.stringify(ae.json):(ae==null?void 0:ae.text)||"",J=(Y||"").toLowerCase();if(J.includes("missing required parameter - api_key")||J.includes("missing required parameter - api key")||J.includes("missing required parameter 'api_key'")){const B=u||(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})();if(B){const K=new FormData;K.append("file",n),K.append("api_key",B),K.append("timestamp",String(z)),K.append("signature",$);const{res:Q,body:F}=await c(s,{method:"POST",body:K});if(!Q.ok){const H=F!=null&&F.json?JSON.stringify(F.json):(F==null?void 0:F.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${Q.status} ${H}`)}if(F.json&&(F.json.secure_url||F.json.url))return F.json.secure_url||F.json.url;if(F.text&&typeof F.text=="string"&&F.text.startsWith("http"))return F.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}if(t){const K=new FormData;K.append("file",n),K.append("upload_preset",t);const Q=await fetch(s,{method:"POST",body:K});if(!Q.ok){const le=await Q.text().catch(()=>"");throw new Error(`Cloudinary unsigned fallback failed: ${Q.status} ${le}`)}const F=await Q.json().catch(()=>null);if(F&&(F.secure_url||F.url))return F.secure_url||F.url;const H=await Q.text().catch(()=>"");if(H&&H.startsWith("http"))return H;throw new Error("Cloudinary unsigned fallback returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${ie.status} ${Y}`)}if(ae.json&&(ae.json.secure_url||ae.json.url))return ae.json.secure_url||ae.json.url;if(ae.text&&typeof ae.text=="string"&&ae.text.startsWith("http"))return ae.text;throw new Error("Cloudinary signed upload returned unexpected response.")}if(D){const k=new FormData;k.append("file",n),k.append("upload_preset",D);const $=await fetch(s,{method:"POST",body:k});if(!$.ok){const ie=await $.text().catch(()=>"");throw new Error(`Cloudinary upload fallback failed: ${$.status} ${ie}`)}const z=await $.json().catch(()=>null);if(z&&(z.secure_url||z.url))return z.secure_url||z.url;const M=await $.text().catch(()=>"");if(M&&M.startsWith("http"))return M;throw new Error("Cloudinary fallback upload returned unexpected response.")}}catch{}try{const O=await Kb(n);if(O&&typeof O=="string"&&O.startsWith("http"))return O}catch{}throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}throw I}if(!h.ok){const I=m!=null&&m.json?JSON.stringify(m.json):(m==null?void 0:m.text)||"";throw new Error(`Cloudinary signing failed: ${h.status} ${I}`)}const g=m.json||{},{signature:v,apiKey:y,timestamp:b}=g,S=y||u;if(!v||!b)throw new Error("Cloudinary signing endpoint returned invalid data.");const E=new FormData;E.append("file",n),E.append("api_key",S),E.append("timestamp",String(b)),E.append("signature",v);const{res:x,body:j}=await c(s,{method:"POST",body:E});if(!x.ok){const I=j!=null&&j.json?JSON.stringify(j.json):(j==null?void 0:j.text)||"",C=(I||"").toLowerCase();if(C.includes("missing required parameter - api_key")||C.includes("missing required parameter - api key")||C.includes("missing required parameter 'api_key'")){const O=u;{const U=new FormData;U.append("file",n),U.append("api_key",O),U.append("timestamp",String(b)),U.append("signature",v);const{res:q,body:P}=await c(s,{method:"POST",body:U});if(!q.ok){const R=P!=null&&P.json?JSON.stringify(P.json):(P==null?void 0:P.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${q.status} ${R}`)}if(P.json&&(P.json.secure_url||P.json.url))return P.json.secure_url||P.json.url;if(P.text&&typeof P.text=="string"&&P.text.startsWith("http"))return P.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${x.status} ${I}`)}if(j.json&&(j.json.secure_url||j.json.url))return j.json.secure_url||j.json.url;if(j.text&&typeof j.text=="string"&&j.text.startsWith("http"))return j.text;throw new Error("Cloudinary signed upload returned unexpected response.")}async function Kb(n){const e=await new Promise((t,r)=>{const s=new FileReader;s.onload=()=>t(s.result),s.onerror=()=>r(new Error("Failed to read file")),s.readAsDataURL(n)});return await new Promise((t,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const l=s.status||0,c=s.responseText||"";if(l<200||l>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${l} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?t(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:e,filename:n.name}))}catch(s){r(s)}}).catch(async t=>{try{const r=String((t==null?void 0:t.message)||"").toLowerCase();if(r.includes("cloudinary not configured")||r.includes("404")||r.includes("server upload failed"))return await new Promise((s,l)=>{try{const c=new XMLHttpRequest;c.open("POST",`${API_BASE}/api/imagekit/upload`,!0),c.setRequestHeader("Content-Type","application/json"),c.onreadystatechange=()=>{if(c.readyState!==4)return;const u=c.status||0,h=c.responseText||"";if(u<200||u>=400){let m=h;try{const g=h?JSON.parse(h):null;g&&g.error&&(m=g.error)}catch{}return l(new Error(`ImageKit server upload failed: ${u} ${m}`))}try{const m=h?JSON.parse(h):{};return m&&(m.url||m.filePath)?s(m.url||m.filePath):l(new Error("ImageKit server upload returned unexpected response"))}catch{return l(new Error("ImageKit server upload returned non-JSON response"))}},c.onerror=()=>l(new Error("ImageKit server upload XHR error")),c.send(JSON.stringify({file:e,filename:n.name}))}catch(c){l(c)}})}catch{}throw t})}function ka(n,e,t){try{n&&localStorage.setItem("cloudinary.cloudName",n),e&&localStorage.setItem("cloudinary.uploadPreset",e),t&&localStorage.setItem("cloudinary.apiKey",t)}catch(r){console.warn("Could not persist Cloudinary config to localStorage",r)}}async function Gb(n,e){if(!n)throw new Error("No URL provided");return await new Promise((t,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const l=s.status||0,c=s.responseText||"";if(l<200||l>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${l} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?t(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:n,filename:e||"remote"}))}catch(s){r(new Error("Failed to call server upload endpoint: "+String(s)))}})}const C9="".replace(/\/$/,"");async function I9(n,e){const t=await fetch(n,e);let r=null,s="";try{r=await t.json()}catch{try{s=await t.text()}catch{}}return{res:t,json:r,text:s}}async function Lo(n,e){let t;typeof n=="string"?t=n:t=await new Promise((u,h)=>{const m=new FileReader;m.onload=()=>u(m.result),m.onerror=()=>h(new Error("Failed to read file")),m.readAsDataURL(n)});const r=`${C9}/api/imagekit/upload`,{res:s,json:l,text:c}=await I9(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:t,filename:e})});if(!s.ok){const u=l?JSON.stringify(l):c||"";throw new Error(`ImageKit server upload failed: ${s.status} ${u}`)}if(l&&(l.url||l.filePath||l.name))return l.url||l.filePath||l.name;throw new Error("ImageKit server upload returned unexpected response.")}function j9(){var or;const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,l]=_.useState(!1),[c,u]=_.useState(!1),[h,m]=_.useState(!1),[g,v]=_.useState(!1),[y,b]=_.useState(!1),[S,E]=_.useState(null),[x,j]=_.useState(null),[I,C]=_.useState(null),[O,U]=_.useState("basic"),[q,P]=_.useState({}),[R,D]=_.useState(null),[k,$]=_.useState(""),[z,M]=_.useState(""),[ie,ae]=_.useState(""),[Y,J]=_.useState(""),[B,K]=_.useState(""),[Q,F]=_.useState(""),[H,le]=_.useState(""),[Ee,Te]=_.useState(""),[pe,ue]=_.useState(""),[ye,De]=_.useState(""),[Ie,Me]=_.useState(""),[Le,ut]=_.useState(null),bt=Tc(),sn=Fi();Ne.useEffect(()=>{const _e=new URLSearchParams(sn.search).get("batch");ut(_e)},[sn.search]);const Bt=(ne,_e)=>{P(Fe=>{var St;return{...Fe,[ne]:{videos:!1,files:!1,quizzes:!1,...Fe[ne]||{},[_e]:!((St=Fe[ne])!=null&&St[_e])}}})},{years:gn,batches:en,loading:Ze,error:Dt,connectionStatus:Jn,retryConnection:ni,updateYear:Zn,updateBatch:bn,createSubject:ws,createLecture:Mt,updateLecture:It,createYear:Fn,createBatch:Vn,deleteBatch:Sn,deleteLecture:Gr,deleteSubject:Or,addVideo:_s,addFile:ri,addQuiz:Qr}=Dc(),{news:Un}=Ax(),si=(ne,_e)=>{C(ne),j(_e),r(null),l(!0)},qe=(ne,_e)=>{console.log("ðŸ”„ Opening subject form for year:",ne.yearNumber,"type:",_e),E({id:ne.id,number:ne.yearNumber}),U(_e),u(!0)},gt=(ne,_e)=>{C(ne),U(_e),b(!0)},ft=(ne,_e)=>{C(ne),j(_e),m(!0)},Ft=(ne,_e)=>{C(ne),j(_e),v(!0)};if(s)return a.jsx(DI,{quiz:t,onClose:()=>{l(!1),r(null),j(null)},onSave:async ne=>{I!=null&&I.id&&x&&await Qr(I.id,x,{title:ne.title,description:ne.description,questions:ne.questions||[],timeLimit:ne.timeLimit,passingScore:ne.passingScore}),l(!1),r(null),j(null)}});if(console.log("ðŸ” Render check - isSubjectFormOpen:",c,"selectedYear:",S),c)return console.log("ðŸ“ Rendering SubjectForm"),a.jsx(OI,{year:S==null?void 0:S.number,yearType:O,onClose:()=>{u(!1),E(null)},onSave:async ne=>{try{await ws({...ne,yearId:(S==null?void 0:S.id)||"",order:1}),u(!1),E(null)}catch(_e){console.error("Error saving subject:",_e),alert("Failed to save subject. Please try again.")}}});if(y){const ne=x?(or=I==null?void 0:I.lectures)==null?void 0:or.find(_e=>_e.id===x):null;return a.jsx(qm,{lecture:ne,subjectId:I==null?void 0:I.id,subjectName:I==null?void 0:I.name,yearType:O,onClose:()=>{b(!1),C(null),j(null)},onSave:async _e=>{try{ne?await It(ne.id,_e):await Mt(_e),b(!1),C(null),j(null)}catch(Fe){console.error("Error saving lecture:",Fe),alert("Failed to save lecture. Please try again.")}}})}if(h)return a.jsx(Pj,{lectureId:x,onClose:()=>{m(!1),j(null)},onSave:async ne=>{I!=null&&I.id&&x&&await ri(I.id,x,ne),m(!1),j(null)}});if(g)return a.jsx(Rj,{lectureId:x,onClose:()=>{v(!1),j(null)},onSave:async ne=>{I!=null&&I.id&&x&&await _s(I.id,x,ne),v(!1),j(null)}});const Kt=(ne,_e)=>{var Fe,St;return a.jsxs(xe,{className:`border-l-4 ${_e==="basic"?"border-l-blue-500":"border-l-red-500"}`,children:[a.jsx(Ge,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[ne.imageUrl?a.jsx("img",{src:ne.imageUrl,alt:`Year ${ne.yearNumber}`,className:"w-24 h-24 object-cover rounded-md flex-shrink-0",onError:et=>{et.currentTarget.style.display="none"}}):a.jsx("div",{className:"w-24 h-24 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:_e==="basic"?a.jsx(Iu,{className:"h-6 w-6 text-blue-600"}):a.jsx(ju,{className:"h-6 w-6 text-red-600"})}),a.jsx(Xe,{className:"flex flex-col",children:R===ne.id?a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(je,{value:k,onChange:et=>$(et.target.value),className:"w-48",placeholder:"Batch name"}),a.jsx(te,{size:"sm",onClick:async()=>{try{await(Zn==null?void 0:Zn(ne.id,{batchName:k,batch_name:k})),D(null),$("")}catch(et){console.error(et),alert("Failed to save batch name")}},children:"Save"}),a.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{D(null),$("")},children:"Cancel"})]}):a.jsx(a.Fragment,{children:ne.batchName?a.jsxs(a.Fragment,{children:[a.jsx(Yn,{to:`/admin/years/${ne.id}`,className:"text-lg font-bold text-foreground hover:underline",children:ne.batchName}),a.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[a.jsxs("span",{className:"text-sm text-muted",children:["Year ",ne.yearNumber]}),ne.name&&a.jsxs("span",{className:"ml-2",children:["â€¢ ",ne.name]}),ne.academicSupervisor&&a.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ne.academicSupervisor]}),ne.cr&&a.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ne.cr]}),ne.actor&&a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ne.actor]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs(Yn,{to:`/admin/years/${ne.id}`,className:"text-lg font-medium text-blue-600 hover:underline",children:["Year ",ne.yearNumber]}),a.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[ne.name?a.jsx("span",{className:"mr-2",children:ne.name}):a.jsx("span",{className:"italic",children:"No batch name"}),ne.academicSupervisor&&a.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ne.academicSupervisor]}),ne.cr&&a.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ne.cr]}),ne.actor&&a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ne.actor]})]})]})})})]}),a.jsx("div",{className:"flex items-center gap-2"})]})}),a.jsx(we,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ds,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"font-semibold",children:"Subjects"}),a.jsxs(rn,{variant:"secondary",children:[((Fe=ne.subjects)==null?void 0:Fe.length)||0," subjects"]}),a.jsxs(rn,{variant:"outline",children:[(Un||[]).filter(et=>et.yearId===ne.id).length," ","news"]})]}),a.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>qe(ne,_e),className:"flex items-center gap-1",children:[a.jsx(Xt,{className:"h-3 w-3"}),"Add Subject"]})]}),!ne.subjects||ne.subjects.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ds,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No subjects added yet"}),a.jsx(te,{variant:"outline",size:"sm",onClick:()=>qe(ne,_e),children:"Add first subject"})]}):a.jsx("div",{className:"grid gap-4",children:(St=ne.subjects)==null?void 0:St.map(et=>{var Nt;return a.jsxs(xe,{className:"bg-secondary/10",children:[a.jsx(Ge,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[et.imageUrl?a.jsx("img",{src:et.imageUrl,alt:et.name,className:"w-8 h-8 object-cover rounded",onError:be=>{be.currentTarget.style.display="none"}}):a.jsx(ds,{className:"h-5 w-5 text-blue-600"}),a.jsx(Yn,{to:`/admin/subjects/${et.id}`,className:"font-medium text-lg text-blue-600 hover:underline",children:et.name}),a.jsxs(rn,{variant:"outline",className:"text-xs",children:[((Nt=et.lectures)==null?void 0:Nt.length)||0," lectures"]})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>gt(et,_e),className:"h-8 px-3 text-xs",children:[a.jsx(Xt,{className:"h-3 w-3 mr-1"}),"Add Lecture"]}),a.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:async()=>{if(confirm(`Delete subject "${et.name}"? This will remove its lectures.`))try{await Or(et.id)}catch(be){console.error(be),alert("Failed to delete subject")}},children:a.jsx(Ln,{className:"h-3 w-3"})})]})]})}),et.lectures&&et.lectures.length>0&&a.jsx(we,{className:"pt-0",children:a.jsxs("div",{className:"grid gap-3",children:[et.lectures.slice(0,3).map(be=>{var ii,ar,Es,bs,oi,lr,Ui,Za,ai;return a.jsx(xe,{className:"bg-background border",children:a.jsx(we,{className:"p-3",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:be.imageUrl?a.jsx("img",{src:be.imageUrl,alt:be.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(Fs,{className:"h-6 w-6 text-muted-foreground"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:be.name}),a.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:be.description||"No description available"}),a.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[a.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>Bt(be.id,"videos"),className:`h-6 px-2 text-xs ${(ii=q[be.id])!=null&&ii.videos?"bg-accent":""}`,children:[a.jsx(lv,{className:"h-3 w-3 mr-1"}),"Videos (",((ar=be.videos)==null?void 0:ar.length)||0,")"]}),a.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>Bt(be.id,"files"),className:`h-6 px-2 text-xs ${(Es=q[be.id])!=null&&Es.files?"bg-accent":""}`,children:[a.jsx(Ks,{className:"h-3 w-3 mr-1"}),"Files (",((bs=be.files)==null?void 0:bs.length)||0,")"]}),a.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>Bt(be.id,"quizzes"),className:`h-6 px-2 text-xs ${(oi=q[be.id])!=null&&oi.quizzes?"bg-accent":""}`,children:[a.jsx(Ii,{className:"h-3 w-3 mr-1"}),"Quizzes (",((lr=be.quizzes)==null?void 0:lr.length)||0,")"]}),a.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{j(be.id),C(et),b(!0)},title:"Edit Lecture",children:a.jsx(Ni,{className:"h-3 w-3"})}),a.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${be.name}"?`))try{await Gr(et.id,be.id)}catch(Gt){console.error(Gt),alert("Failed to delete lecture")}},children:a.jsx(Ln,{className:"h-3 w-3"})})]}),((Ui=q[be.id])==null?void 0:Ui.videos)&&a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Videos:"}),a.jsxs(te,{variant:"ghost",size:"xs",onClick:()=>Ft(et,be.id),className:"h-6 px-2 text-xs",children:[a.jsx(Xt,{className:"h-3 w-3 mr-1"})," Add"]})]}),a.jsxs("div",{className:"space-y-1",children:[be.videos&&be.videos.length>0?be.videos.slice(0,4).map(Gt=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(lv,{className:"h-3 w-3 text-blue-600"}),a.jsx("a",{href:Gt.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate",children:Gt.title||Gt.name||"Untitled Video"})]},Gt.id)):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"}),be.videos&&be.videos.length>4&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",be.videos.length-4," more videos"]})]})]}),((Za=q[be.id])==null?void 0:Za.files)&&a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Files:"}),a.jsxs(te,{variant:"ghost",size:"xs",onClick:()=>ft(et,be.id),className:"h-6 px-2 text-xs",children:[a.jsx(Xt,{className:"h-3 w-3 mr-1"})," Add"]})]}),a.jsxs("div",{className:"space-y-1",children:[be.files&&be.files.length>0?be.files.slice(0,4).map(Gt=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ks,{className:"h-3 w-3 text-green-600"}),a.jsx("a",{href:Gt.fileUrl||Gt.url||"#",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 hover:underline truncate",onClick:Er=>{!Gt.fileUrl&&!Gt.url&&(Er.preventDefault(),alert("No file URL available"))},children:Gt.title||Gt.name||"Untitled File"})]},Gt.id)):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"}),be.files&&be.files.length>4&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",be.files.length-4," more files"]})]})]}),((ai=q[be.id])==null?void 0:ai.quizzes)&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Quizzes:"}),a.jsxs(te,{variant:"ghost",size:"xs",onClick:()=>si(et,be.id),className:"h-6 px-2 text-xs",children:[a.jsx(Xt,{className:"h-3 w-3 mr-1"})," Add"]})]}),a.jsxs("div",{className:"space-y-1",children:[be.quizzes&&be.quizzes.length>0?be.quizzes.slice(0,4).map(Gt=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ii,{className:"h-3 w-3 text-purple-600"}),a.jsx("span",{className:"text-xs text-purple-600",children:Gt.title||Gt.name||"Untitled Quiz"})]},Gt.id)):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"}),be.quizzes&&be.quizzes.length>4&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",be.quizzes.length-4," more quizzes"]})]})]})]})]})})},be.id)}),et.lectures.length>3&&a.jsxs("div",{className:"text-center text-muted-foreground text-xs pt-2",children:["+",et.lectures.length-3," more lectures"]})]})})]},et.id)})})]})})]},ne.yearNumber)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Academic Years Management"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-muted-foreground",children:"Manage curriculum by academic years, subjects, and lectures"}),Jn==="connecting"&&a.jsxs("span",{className:"flex items-center gap-1 text-blue-600 font-medium text-sm",children:[a.jsx(Mo,{className:"h-3 w-3 animate-spin"}),"Connecting..."]}),Jn==="connected"&&a.jsxs("span",{className:"flex items-center gap-1 text-green-600 font-medium text-sm",children:[a.jsx("div",{className:"h-2 w-2 bg-green-600 rounded-full"}),"Connected"]}),Jn==="offline"&&a.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[a.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(S$,{children:[a.jsx(N$,{asChild:!0,children:a.jsxs(te,{children:[a.jsx(ER,{className:"h-4 w-4 mr-2"})," Add Batch"]})}),a.jsxs(jI,{children:[a.jsxs(AI,{children:[a.jsx(RI,{children:"Add Batch"}),a.jsx(kI,{children:"Create a new batch for grouping years"})]}),a.jsxs("div",{className:"space-y-3 mt-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Batch name"}),a.jsx(je,{value:H,onChange:ne=>le(ne.target.value),placeholder:"e.g., Batch A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-1 block",children:"CR (optional)"}),a.jsx(je,{value:Ee,onChange:ne=>Te(ne.target.value),placeholder:"Class representative"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Group Link (optional)"}),a.jsx(je,{value:pe,onChange:ne=>ue(ne.target.value),placeholder:"WhatsApp/Telegram group link"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Graduate Date (optional)"}),a.jsx(je,{value:ye,onChange:ne=>De(ne.target.value),placeholder:"e.g., 2025-06-15",type:"date"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Academic Supervisor (optional)"}),a.jsx(je,{value:Ie,onChange:ne=>Me(ne.target.value),placeholder:"e.g., Dr. Ahmed Hassan"})]})]}),a.jsxs(PI,{className:"mt-4",children:[a.jsx(te,{onClick:async()=>{try{if(!H||!H.trim()){alert("Please provide a batch name");return}await(Vn==null?void 0:Vn({batchName:H.trim(),cr:Ee==null?void 0:Ee.trim(),groupLink:pe==null?void 0:pe.trim(),group_link:pe==null?void 0:pe.trim(),graduateDate:ye==null?void 0:ye.trim(),graduate_date:ye==null?void 0:ye.trim(),academicSupervisor:Ie==null?void 0:Ie.trim(),academic_supervisor:Ie==null?void 0:Ie.trim()})),le(""),Te(""),ue(""),De(""),Me("");const ne=document.querySelector("[data-dialog-close]");ne&&ne.click(),alert("Batch created")}catch(ne){console.error(ne),alert("Failed to create batch")}},children:"Create"}),a.jsx(C$,{asChild:!0,children:a.jsx(te,{variant:"ghost",className:"ml-2","data-dialog-close":!0,children:"Cancel"})})]})]})]})})]}),Ze&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx(Mo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading academic years..."})]})}),Dt&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading years"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:Dt}),a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsx(te,{onClick:ni,variant:"outline",children:"Retry Connection"}),a.jsx(te,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!Ze&&!Dt&&a.jsxs(a.Fragment,{children:[a.jsx(xe,{children:a.jsx(we,{className:"pt-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(wc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(je,{placeholder:"Search lectures, subjects, or content...",value:n,onChange:ne=>e(ne.target.value),className:"pl-10"})]})})}),a.jsx("div",{className:"space-y-6",children:!en||en.length===0?a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx(ds,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No batches found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a batch to start adding academic years."})]})}):Le?(()=>{const ne=(en||[]).find(Fe=>Fe.id===Le)||null,_e=(gn||[]).filter(Fe=>(Fe.batchId||Fe.batch_name)===Le);return a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[ne!=null&&ne.imageUrl?a.jsx("img",{src:ne.imageUrl,alt:ne.batchName,className:"w-40 h-40 object-cover rounded-md flex-shrink-0"}):a.jsx("div",{className:"w-40 h-40 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:a.jsx(ds,{className:"h-6 w-6 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:(ne==null?void 0:ne.batchName)||"Batch"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:ne!=null&&ne.cr?`CR: ${ne.cr}`:""})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(te,{onClick:()=>{ut(null),bt("/admin/years")},children:"Back to Batches"}),a.jsx(te,{size:"sm",variant:"ghost",onClick:async()=>{try{const Fe=document.createElement("input");Fe.type="file",Fe.accept="image/*",Fe.onchange=async()=>{var et;const St=(et=Fe.files)==null?void 0:et[0];if(St)try{let Nt=null;try{Nt=await wr(St)}catch(be){console.warn("Cloudinary upload failed, trying ImageKit",(be==null?void 0:be.message)||be),Nt=await Lo(St,St.name)}if(!Nt){alert("Upload failed");return}await(bn==null?void 0:bn(ne==null?void 0:ne.id,{image_url:Nt,imageUrl:Nt})),alert("Image updated")}catch(Nt){console.error(Nt),alert("Failed to upload image")}},Fe.click()}catch(Fe){console.error(Fe),alert("Could not open file dialog")}},children:"Change Image"}),a.jsxs(te,{onClick:async()=>{try{const Fe=window.prompt("Enter year number for this batch:");if(!Fe)return;const St=parseInt(Fe,10);if(isNaN(St)){alert("Invalid");return}await(Fn==null?void 0:Fn((ne==null?void 0:ne.id)||null,{yearNumber:St})),alert("Year created")}catch(Fe){console.error(Fe),alert("Failed")}},children:[a.jsx(Xt,{className:"h-4 w-4 mr-2"})," Add Year"]}),a.jsxs(te,{variant:"destructive",onClick:async()=>{try{if(!confirm("Delete this batch and all its years?"))return;await(Sn==null?void 0:Sn(ne==null?void 0:ne.id)),ut(null),bt("/admin/years"),alert("Batch deleted")}catch(Fe){console.error(Fe),alert("Failed to delete batch")}},children:[a.jsx(Ln,{className:"h-4 w-4"})," Delete"]})]})]}),a.jsx("div",{className:"mt-4 space-y-4",children:_e.length===0?a.jsx(xe,{children:a.jsx(we,{className:"p-6 text-center",children:"No years in this batch yet."})}):_e.sort((Fe,St)=>Fe.yearNumber-St.yearNumber).map(Fe=>a.jsx("div",{children:Kt(Fe,Fe.type)},Fe.id))})]})})():a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:(en||[]).map(ne=>a.jsxs(xe,{className:"cursor-pointer flex flex-col overflow-hidden",onClick:()=>{bt(`/admin/years?batch=${ne.id}`),ut(ne.id)},children:[a.jsx(Ge,{className:"flex-1",onClick:_e=>R===ne.id&&_e.stopPropagation(),children:a.jsxs("div",{className:"flex items-start gap-4",children:[ne.imageUrl?a.jsx("img",{src:ne.imageUrl,alt:ne.batchName,className:"w-56 h-56 object-cover rounded-md flex-shrink-0"}):a.jsx("div",{className:"w-56 h-56 rounded-md flex-shrink-0 bg-muted"}),a.jsx("div",{className:"flex-1 min-w-0",children:R===ne.id?a.jsxs("div",{className:"flex flex-col gap-2 w-full",onClick:_e=>_e.stopPropagation(),children:[a.jsx(je,{value:k,onChange:_e=>$(_e.target.value),placeholder:"Batch name",className:"w-full",onClick:_e=>_e.stopPropagation()}),a.jsx(je,{value:z||"",onChange:_e=>M(_e.target.value),placeholder:"CR",className:"w-full",onClick:_e=>_e.stopPropagation()}),a.jsx(je,{value:ie,onChange:_e=>ae(_e.target.value),placeholder:"Image URL (or upload)",className:"w-full",onClick:_e=>_e.stopPropagation()}),a.jsx(je,{value:Y||"",onChange:_e=>J(_e.target.value),placeholder:"Group Link",className:"w-full",onClick:_e=>_e.stopPropagation()}),a.jsx(je,{value:B||"",onChange:_e=>K(_e.target.value),placeholder:"Graduate Date (e.g., 2025-06-15)",type:"date",className:"w-full",onClick:_e=>_e.stopPropagation()}),a.jsx(je,{value:Q||"",onChange:_e=>F(_e.target.value),placeholder:"Academic Supervisor",className:"w-full",onClick:_e=>_e.stopPropagation()}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(te,{size:"sm",onClick:_e=>{_e.stopPropagation();try{const Fe=document.createElement("input");Fe.type="file",Fe.accept="image/*",Fe.onchange=async()=>{var et;const St=(et=Fe.files)==null?void 0:et[0];if(St)try{let Nt=null;try{Nt=await wr(St)}catch(be){console.warn("Cloudinary upload failed, trying ImageKit",(be==null?void 0:be.message)||be),Nt=await Lo(St,St.name)}if(!Nt){alert("Upload failed");return}ae(Nt)}catch(Nt){console.error(Nt),alert("Upload failed")}},Fe.click()}catch(Fe){console.error(Fe),alert("Could not open file dialog")}},children:"Upload"}),a.jsx(te,{size:"sm",onClick:async _e=>{_e.stopPropagation();try{await(bn==null?void 0:bn(ne.id,{batch_name:k,batchName:k,cr:z,image_url:ie,imageUrl:ie,group_link:Y,groupLink:Y,graduate_date:B,graduateDate:B,academic_supervisor:Q,academicSupervisor:Q})),D(null),$(""),M(""),ae(""),J(""),K(""),F(""),alert("Saved")}catch(Fe){console.error(Fe),alert("Failed to save")}},children:"Save"}),a.jsx(te,{size:"sm",variant:"ghost",onClick:_e=>{_e.stopPropagation(),D(null),$(""),M(""),ae(""),J(""),K(""),F("")},children:"Cancel"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Xe,{className:"text-lg",children:ne.batchName||"Batch"}),a.jsxs(jt,{className:"text-sm text-muted-foreground space-y-1",children:[ne.cr&&a.jsxs("div",{children:["CR: ",ne.cr]}),(ne.academicSupervisor||ne.academic_supervisor)&&a.jsxs("div",{children:["Supervisor: ",ne.academicSupervisor||ne.academic_supervisor]}),ne.graduateDate&&a.jsxs("div",{children:["Graduate: ",ne.graduateDate]}),ne.groupLink&&a.jsx("a",{href:ne.groupLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",onClick:_e=>_e.stopPropagation(),children:"ðŸ“± Group Link"})]})]})})]})}),a.jsx(we,{className:"mt-auto",onClick:_e=>R===ne.id&&_e.stopPropagation(),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Years:"," ",(gn||[]).filter(_e=>(_e.batchId||_e.batch_name)===ne.id).length]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(te,{size:"sm",variant:"outline",onClick:_e=>{_e.stopPropagation(),bt(`/admin/years?batch=${ne.id}`),ut(ne.id)},children:"View Years"}),a.jsx(te,{size:"sm",variant:"ghost",onClick:_e=>{_e.stopPropagation(),D(ne.id),$(ne.batchName||""),M(ne.cr||""),ae(ne.imageUrl||""),J(ne.groupLink||ne.group_link||""),K(ne.graduateDate||ne.graduate_date||""),F(ne.academicSupervisor||ne.academic_supervisor||"")},children:"Edit"}),a.jsx(te,{size:"sm",variant:"ghost",onClick:async _e=>{_e.stopPropagation();try{const Fe=document.createElement("input");Fe.type="file",Fe.accept="image/*",Fe.onchange=async()=>{var et;const St=(et=Fe.files)==null?void 0:et[0];if(St)try{let Nt=null;try{Nt=await wr(St)}catch(be){console.warn("Cloudinary upload failed, trying ImageKit",(be==null?void 0:be.message)||be),Nt=await Lo(St,St.name)}if(!Nt){alert("Upload failed");return}await(bn==null?void 0:bn(ne.id,{image_url:Nt,imageUrl:Nt})),alert("Image updated")}catch(Nt){console.error(Nt),alert("Failed to upload image")}},Fe.click()}catch(Fe){console.error(Fe),alert("Could not open file dialog")}},children:"Change Image"}),a.jsx(te,{size:"sm",variant:"destructive",onClick:async _e=>{_e.stopPropagation();try{if(!confirm("Delete this batch and all its years? This cannot be undone."))return;await(Sn==null?void 0:Sn(ne.id)),alert("Batch deleted")}catch(Fe){console.error(Fe),alert("Failed to delete batch")}},children:"Delete"})]})]})})]},ne.id))})})]})]})}function A9(){var U;const{id:n}=GS(),[e,t]=_.useState(!1),[r,s]=_.useState(!1),[l,c]=_.useState(null),[u,h]=_.useState(null),[m,g]=_.useState(""),{years:v,loading:y,updateYear:b,createSubject:S,createLecture:E,deleteSubject:x,deleteLecture:j}=Dc(),I=v.find(q=>q.id===n);if(y)return a.jsx(xe,{children:a.jsx(we,{className:"text-center py-12",children:"Loading..."})});if(!I)return a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx("div",{className:"text-destructive mb-4",children:"Year not found"}),a.jsx("div",{className:"flex gap-2 justify-center",children:a.jsx(Yn,{to:"/admin/years",children:a.jsx(te,{variant:"outline",children:"Back to Years"})})})]})});const C=async q=>{try{await S({...q,yearId:I.id}),t(!1)}catch(P){console.error(P),alert("Failed to add subject")}},O=async q=>{try{await E(q),s(!1),c(null)}catch(P){console.error(P),alert("Failed to add lecture")}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Yn,{to:"/admin/years",children:a.jsxs(te,{variant:"ghost",children:[a.jsx(Xs,{className:"h-4 w-4 mr-2"})," Back"]})}),a.jsxs("div",{children:[I.batchName?a.jsxs(a.Fragment,{children:[a.jsx("h1",{className:"text-2xl font-bold",children:I.batchName}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Year ",I.yearNumber]})]}):a.jsxs("h1",{className:"text-2xl font-bold",children:["Year ",I.yearNumber]}),a.jsx("p",{className:"text-muted-foreground",children:"Manage subjects and lectures for this year"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:!window.__yearEditing&&a.jsxs(a.Fragment,{children:[a.jsxs(te,{variant:"ghost",onClick:async()=>{try{const q=document.createElement("input");q.type="file",q.accept="image/*",q.onchange=async()=>{var R;const P=(R=q.files)==null?void 0:R[0];if(P)try{let D=null;try{D=await wr(P)}catch(k){console.warn("Cloudinary upload failed, attempting ImageKit fallback:",(k==null?void 0:k.message)||k);try{D=await Lo(P,P.name)}catch($){throw console.error("ImageKit upload also failed:",$),k}}if(!D||typeof D!="string"||!D.startsWith("http")){console.error("Invalid upload response:",D),alert("Image upload failed: unexpected response from upload provider"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:D,image_url:D})),window.__yearEditing=!1}catch(D){console.error(D);const $=((D==null?void 0:D.message)||String(D)||"").toLowerCase();if($.includes("cloudinary cloud name is not configured")){const z=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!z){alert("No cloud name provided. Upload cancelled."),window.__yearEditing=!1;return}const M=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),ie=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{ka(z,M||null,ie||null);const ae=await wr(P);if(console.log("Cloudinary upload result after config:",ae),!ae||typeof ae!="string"||!ae.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:ae,image_url:ae}))}catch(ae){console.error(ae),alert("Image upload failed after configuring Cloudinary: "+(ae.message||ae))}window.__yearEditing=!1;return}else if($.includes("cloudinary signing did not return an api key")||$.includes("missing required parameter - api_key")||$.includes("missing required parameter 'api_key'")){const z=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(z&&z.trim())try{ka(null,null,z.trim());const M=await wr(P);if(!M||typeof M!="string"||!M.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:M,image_url:M})),window.__yearEditing=!1;return}catch(M){console.error(M),alert("Image upload failed after setting API key: "+(M.message||M)),window.__yearEditing=!1;return}}alert("Image upload failed: "+(D.message||D))}},q.click()}catch(q){console.error(q),alert("Could not open file dialog")}},children:[a.jsx(PR,{className:"h-4 w-4 mr-2"})," ",I.imageUrl?"Change Image":"Add Image"]}),a.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("academicSupervisor"),g(I.academicSupervisor||I.acadmic_supervisor||"")},children:"Academic Supervisor"}),a.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("actor"),g(I.actor||"")},children:"Actor"}),a.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("groupUrl"),g(I.groupUrl||I.group_url||"")},children:"Group URL"}),a.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("batchName"),g(I.batchName||I.batch_name||"")},children:"Batch Name"}),I.imageUrl&&a.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm("Remove year image?"))try{await(b==null?void 0:b(I.id,{imageUrl:""}))}catch(q){console.error(q),alert("Failed to remove year image")}},children:a.jsx(Ln,{className:"h-3 w-3"})})]})})]}),u&&a.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[a.jsx(je,{placeholder:u==="image"?"Image URL":u==="groupUrl"?"Group URL":u==="academicSupervisor"?"Academic Supervisor":"Actor",value:m,onChange:q=>g(q.target.value),className:"w-full max-w-2xl"}),a.jsx(te,{onClick:async()=>{try{const q={};u==="image"?q.imageUrl=m:u==="academicSupervisor"?(q.academicSupervisor=m,q.acadmic_supervisor=m):u==="actor"?q.actor=m:u==="groupUrl"?(q.groupUrl=m,q.group_url=m):u==="batchName"&&(q.batchName=m,q.batch_name=m),await(b==null?void 0:b(I.id,q)),h(null),g(""),window.__yearEditing=!1}catch(q){console.error(q),alert("Failed to save field")}},children:"Save"}),a.jsx(te,{variant:"ghost",onClick:()=>{h(null),g(""),window.__yearEditing=!1},children:"Cancel"})]}),a.jsxs(xe,{children:[a.jsx(Ge,{children:a.jsxs(Xe,{className:"flex items-center gap-2",children:["Subjects",a.jsxs(rn,{variant:"secondary",children:[((U=I.subjects)==null?void 0:U.length)||0," subjects"]})]})}),a.jsxs(we,{children:[a.jsx("div",{className:"flex justify-end mb-4",children:a.jsxs(te,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[a.jsx(Xt,{className:"h-3 w-3"})," Add Subject"]})}),!I.subjects||I.subjects.length===0?a.jsx("div",{className:"text-center py-8",children:"No subjects added yet."}):a.jsx("div",{className:"grid gap-4",children:I.subjects.map(q=>a.jsxs(xe,{className:"bg-secondary/10",children:[a.jsx(Ge,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[q.imageUrl?a.jsx("img",{src:q.imageUrl,alt:q.name,className:"w-8 h-8 object-cover rounded"}):a.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-lg",children:q.name}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[(q.lectures||[]).length," lectures"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(te,{onClick:()=>{c(q),s(!0)},variant:"ghost",size:"sm",children:"Add Lecture"}),a.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete subject "${q.name}"?`))try{await x(q.id)}catch(P){console.error(P),alert("Failed to delete subject")}},children:a.jsx(Ln,{className:"h-3 w-3"})})]})]})}),q.lectures&&q.lectures.length>0&&a.jsx(we,{children:a.jsx("div",{className:"grid gap-3",children:q.lectures.map(P=>a.jsx(xe,{className:"bg-background border",children:a.jsx(we,{className:"p-3",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:P.imageUrl?a.jsx("img",{src:P.imageUrl,alt:P.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"No image"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:P.name}),a.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:P.description||"No description available"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${P.name}"?`))try{await j(q.id,P.id)}catch(R){console.error(R),alert("Failed to delete lecture")}},children:a.jsx(Ln,{className:"h-3 w-3"})})})]})})},P.id))})})]},q.id))})]})]}),e&&a.jsx(OI,{year:I.yearNumber,yearType:I.type,onClose:()=>t(!1),onSave:C}),r&&l&&a.jsx(qm,{subjectId:l.id,subjectName:l.name,yearType:I.type,onClose:()=>{s(!1),c(null)},onSave:O})]})}function Wm(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,l]=_.useState(null);return _.useEffect(()=>{const m=_r(Ms($e,"lectures")),g=Zo(m,async v=>{var b;const y=[];for(const S of v.docs){const E=S.data(),x=S.id,j=S.ref,I=await Pt(st(j,"files")),C=[];I.forEach(R=>{var k;const D=R.data();C.push({id:R.id,title:D.title||"",fileUrl:D.fileUrl||"",fileType:D.fileType||"",fileSize:D.fileSize||"",description:D.description||"",uploadedAt:((k=D.uploadedAt)==null?void 0:k.toDate())||new Date,uploadedBy:D.uploadedBy||""})});const O=await Pt(st(j,"quizzes")),U=[];O.forEach(R=>{var k;const D=R.data();U.push({id:R.id,title:D.title||"",description:D.description||"",questions:D.questions||[],timeLimit:D.duration||30,passingScore:D.passRate||70,createdAt:((k=D.createdAt)==null?void 0:k.toDate())||new Date,createdBy:D.uploadedBy||""})});const q=await Pt(st(j,"videos")),P=[];q.empty?(E.videos||[]).forEach(D=>{var k,$;P.push({id:D.id||D.videoId||"",title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:(($=(k=D.uploadedAt)==null?void 0:k.toDate)==null?void 0:$.call(k))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}):q.forEach(R=>{var k,$;const D=R.data();P.push({id:R.id,title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:(($=(k=D.uploadedAt)==null?void 0:k.toDate)==null?void 0:$.call(k))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}),y.push({id:x,title:E.title||"",description:E.description||"",subject:E.subjectId||"Unknown",order:E.order||1,createdAt:((b=E.createdAt)==null?void 0:b.toDate())||new Date,createdBy:E.uploadedBy||"",videos:P,files:C,quizzes:U})}y.sort((S,E)=>(S.order||0)-(E.order||0)),e(y),r(!1)},v=>{console.error("Error fetching lectures:",v),l("Failed to fetch lectures"),r(!1)});return()=>g()},[]),{lectures:n,loading:t,error:s,createLecture:async(m,g)=>{try{const v=Rt($e,"Subjects",g),y=st(v,"lectures"),{videos:b,files:S,quizzes:E,...x}=m,j=await wn(y,{...x,videos:b,subjectId:g});if(S&&S.length>0){const I=st(j,"files");for(const C of S)await wn(I,C)}if(E&&E.length>0){const I=st(j,"quizzes");for(const C of E)await wn(I,C)}}catch(v){throw console.error("Error creating lecture:",v),v}},updateLecture:async(m,g)=>{try{const v=_r(Ms($e,"lectures")),y=await Pt(v);for(const b of y.docs)if(b.id===m){await an(b.ref,g);break}}catch(v){throw console.error("Error updating lecture:",v),v}},deleteLecture:async m=>{try{const g=_r(Ms($e,"lectures")),v=await Pt(g);for(const y of v.docs)if(y.id===m){await Rr(y.ref);break}}catch(g){throw console.error("Error deleting lecture:",g),g}}}}function Qb(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,l]=_.useState(!1),{lectures:c,loading:u,error:h,createLecture:m,updateLecture:g}=Wm(),[v]=cd(),y=v.get("lecture");v.get("tab");let b=c.filter(x=>x.title.toLowerCase().includes(n.toLowerCase())||x.subject.toLowerCase().includes(n.toLowerCase()));y&&(b=c.filter(x=>x.id===y));const S=()=>{r(null),l(!0)},E=x=>{r(x),l(!0)};return s?a.jsx(qm,{lecture:t,onClose:()=>{l(!1),r(null)},onSave:async x=>{try{t?await g(t.id,x):await m(x,"default-subject"),l(!1),r(null)}catch(j){console.error("Error saving lecture:",j)}}}):(y&&c.find(x=>x.id===y),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Resources Management"}),a.jsx("p",{className:"text-muted-foreground",children:"Organize educational content by lectures with videos, files, and quizzes"})]}),a.jsxs(te,{onClick:S,className:"flex items-center gap-2",children:[a.jsx(Xt,{className:"h-4 w-4"}),"Create Lecture"]})]}),a.jsx(xe,{children:a.jsx(we,{className:"pt-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(wc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(je,{placeholder:"Search lectures by title or subject...",value:n,onChange:x=>e(x.target.value),className:"pl-10"})]})})}),u&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx(Mo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading lectures..."})]})}),h&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading lectures"}),a.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&a.jsx("div",{className:"space-y-6",children:b.map(x=>a.jsxs(xe,{className:`hover:shadow-lg transition-all duration-200 border-l-4 ${y===x.id?"border-l-primary bg-primary/5":"border-l-primary/20 hover:border-l-primary"}`,children:[a.jsx(Ge,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(ds,{className:"h-5 w-5 text-primary"}),a.jsx(Xe,{className:"text-xl",children:x.title}),a.jsx(rn,{variant:"secondary",children:x.subject})]}),a.jsx(jt,{className:"text-base",children:x.description}),a.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(oc,{className:"h-3 w-3"}),x.createdBy]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(V1,{className:"h-3 w-3"}),x.createdAt.toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(te,{variant:"ghost",size:"icon",onClick:()=>E(x),children:a.jsx(Ni,{className:"h-4 w-4"})}),a.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:a.jsx(Ln,{className:"h-4 w-4"})})]})]})}),a.jsx(we,{children:a.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[a.jsx(Fs,{className:"h-4 w-4 text-green-600"}),"Videos (",x.videos.length,")"]}),x.videos.length>0&&a.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{x.videos.forEach(j=>window.open(j.youtubeUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Play All"})]}),x.videos.length>0?a.jsx("div",{className:"space-y-2",children:x.videos.map(j=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>window.open(j.youtubeUrl||j.url,"_blank"),className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("div",{className:"relative",children:[j.thumbnailUrl&&a.jsx("img",{src:j.thumbnailUrl,alt:j.title,className:"w-16 h-12 object-cover rounded"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Fs,{className:"h-6 w-6 text-white"})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:j.title}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(_f,{className:"h-3 w-3"}),j.duration]})]})]})}),a.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:()=>{alert("Video edit coming soon")},title:"Edit Video",children:a.jsx(Ni,{className:"h-4 w-4"})})]},j.id))}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[a.jsx(Ks,{className:"h-4 w-4 text-blue-600"}),"Files (",x.files.length,")"]}),x.files.length>0&&a.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{x.files.forEach(j=>window.open(j.fileUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Download All"})]}),x.files.length>0?a.jsx("div",{className:"space-y-2",children:x.files.map(j=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>window.open(j.fileUrl||j.url,"_blank"),className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Ks,{className:"h-4 w-4 text-blue-600 mt-1 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:j.title}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(rn,{variant:"outline",className:"text-xs",children:j.fileType}),a.jsx("span",{children:j.fileSize})]})]})]})}),a.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:()=>{alert("File edit coming soon")},title:"Edit File",children:a.jsx(Ni,{className:"h-4 w-4"})})]},j.id))}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[a.jsx(Ii,{className:"h-4 w-4 text-purple-600"}),"Quizzes (",x.quizzes.length,")"]}),x.quizzes.length>0&&a.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{alert(`Starting all ${x.quizzes.length} quizzes for: ${x.title}`)},className:"h-6 px-2 text-xs",children:"Start All"})]}),x.quizzes.length>0?a.jsx("div",{className:"space-y-2",children:x.quizzes.map(j=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{alert(`Starting quiz: ${j.title}
Time limit: ${j.timeLimit} minutes
Passing score: ${j.passingScore}%`)},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Ii,{className:"h-4 w-4 text-purple-600 mt-1 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:j.title}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(_f,{className:"h-3 w-3"}),j.timeLimit,"min",a.jsx("span",{children:"â€¢"}),a.jsxs("span",{children:[j.passingScore,"% pass"]})]})]})]})}),a.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:()=>{alert("Quiz edit coming soon")},title:"Edit Quiz",children:a.jsx(Ni,{className:"h-4 w-4"})})]},j.id))}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"})]})]})})]},x.id))}),!u&&!h&&b.length===0&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx(ds,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No lectures found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No lectures match your search criteria.":"Start by creating your first lecture with videos, files, and quizzes."}),a.jsxs(te,{onClick:S,children:[a.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Create Lecture"]})]})})]}))}function P9({professor:n,onClose:e,onSave:t}){const[r,s]=_.useState({name:"",title:"",department:"",email:"",others:"",officeLocation:"",researchAreas:"",imageUrl:""}),[l,c]=_.useState(!1);_.useEffect(()=>{n&&s({name:n.name||"",title:n.title||"",department:n.department||"",email:n.email||"",others:n.others||"",officeLocation:n.officeLocation||"",researchAreas:(n.researchAreas||[]).join(", "),imageUrl:n.imageUrl||""})},[n]);const u=async h=>{h.preventDefault(),c(!0);try{const m={...r,researchAreas:r.researchAreas?r.researchAreas.split(",").map(g=>g.trim()).filter(Boolean):[]};t(m)}catch(m){console.error("Error saving professor:",m)}finally{c(!1)}};return a.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(te,{variant:"ghost",onClick:e,children:[a.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Professor":"Add Professor"}),a.jsx("p",{className:"text-muted-foreground",children:n?"Update professor information":"Add a new professor to the faculty"})]})]})}),a.jsxs("form",{onSubmit:u,className:"space-y-6",children:[a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsxs(Xe,{className:"flex items-center gap-2",children:[a.jsx(No,{className:"h-5 w-5"}),"Professor Information"]}),a.jsx(jt,{children:"Basic information about the professor"})]}),a.jsxs(we,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs(vc,{className:"w-20 h-20",children:[a.jsx(rd,{src:r.imageUrl,alt:r.name}),a.jsx(yc,{children:a.jsx(No,{className:"w-8 h-8"})})]}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx(Re,{htmlFor:"imageUrl",children:"Profile Image URL"}),a.jsx(je,{id:"imageUrl",placeholder:"https://example.com/profile.jpg",value:r.imageUrl,onChange:h=>s(m=>({...m,imageUrl:h.target.value}))})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"name",children:"Full Name *"}),a.jsx(je,{id:"name",placeholder:"Dr. John Smith",value:r.name,onChange:h=>s(m=>({...m,name:h.target.value})),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"title",children:"Title"}),a.jsx(je,{id:"title",placeholder:"e.g., Associate Professor",value:r.title,onChange:h=>s(m=>({...m,title:h.target.value}))})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Re,{htmlFor:"department",className:"flex items-center gap-2",children:[a.jsx(vR,{className:"h-4 w-4"}),"Department"]}),a.jsx(je,{id:"department",placeholder:"Internal Medicine",value:r.department,onChange:h=>s(m=>({...m,department:h.target.value})),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"others",children:"Others"}),a.jsx(je,{id:"others",placeholder:"Other contact or notes",value:r.others,onChange:h=>s(m=>({...m,others:h.target.value}))})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Re,{htmlFor:"email",className:"flex items-center gap-2",children:[a.jsx(Ef,{className:"h-4 w-4"}),"Email Address"]}),a.jsx(je,{id:"email",type:"email",placeholder:"john.smith@university.edu",value:r.email,onChange:h=>s(m=>({...m,email:h.target.value})),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Re,{htmlFor:"officeLocation",className:"flex items-center gap-2",children:[a.jsx(Vu,{className:"h-4 w-4"}),"Office Location"]}),a.jsx(je,{id:"officeLocation",placeholder:"Medical Building, Room 301",value:r.officeLocation,onChange:h=>s(m=>({...m,officeLocation:h.target.value}))})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"researchAreas",children:"Research Areas"}),a.jsx(je,{id:"researchAreas",placeholder:"e.g., Cardiology, Epidemiology",value:r.researchAreas,onChange:h=>s(m=>({...m,researchAreas:h.target.value}))})]}),a.jsx("div",{className:"space-y-2",children:a.jsx("div",{})})]})]})]}),r.name&&a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Preview"}),a.jsx(jt,{children:"How the professor will appear in the system"})]}),a.jsx(we,{children:a.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[a.jsxs(vc,{className:"h-12 w-12",children:[a.jsx(rd,{src:r.imageUrl,alt:r.name}),a.jsx(yc,{children:a.jsx(No,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold",children:r.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:r.department}),a.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm text-muted-foreground",children:[r.email&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ef,{className:"h-3 w-3"}),a.jsx("span",{children:r.email})]}),r.officeLocation&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vu,{className:"h-3 w-3"}),a.jsx("span",{children:r.officeLocation})]}),r.others&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(No,{className:"h-3 w-3"}),a.jsx("span",{children:r.others})]})]})]})]})})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[a.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),a.jsxs(te,{type:"submit",disabled:l,children:[a.jsx(Qo,{className:"h-4 w-4 mr-2"}),l?"Saving...":n?"Update Professor":"Add Professor"]})]})]})]})}function R9(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,l]=_.useState(!1),{professors:c,loading:u,error:h,createProfessor:m,updateProfessor:g,deleteProfessor:v,isOfflineMode:y}=UC(),b=c.filter(E=>E.name.toLowerCase().includes(n.toLowerCase())||E.department.toLowerCase().includes(n.toLowerCase())||E.email.toLowerCase().includes(n.toLowerCase())),S=async E=>{if(window.confirm("Are you sure you want to delete this professor?"))try{await v(E)}catch(x){console.error("Error deleting professor:",x),alert("Failed to delete professor. Please try again.")}};return s?a.jsx(P9,{professor:t,onClose:()=>{l(!1),r(null)},onSave:async E=>{try{t?await g(t.id,E):await m(E),l(!1),r(null)}catch(x){console.error("Error saving professor:",x),alert("Failed to save professor. Please try again.")}}}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Professors Management"}),a.jsxs("p",{className:"text-muted-foreground",children:["Manage faculty information and profiles",y&&a.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:"â€¢ Working in offline mode"})]})]}),a.jsxs(te,{onClick:()=>l(!0),children:[a.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]}),a.jsx(xe,{children:a.jsx(we,{className:"pt-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(wc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(je,{placeholder:"Search professors by name, department, or email...",value:n,onChange:E=>e(E.target.value),className:"pl-10"})]})})}),u&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx(Mo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading professors..."})]})}),h&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading professors"}),a.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:b.map(E=>a.jsxs(xe,{className:"hover:shadow-md transition-shadow",children:[a.jsx(Ge,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(vc,{className:"h-12 w-12",children:[a.jsx(rd,{src:E.imageUrl,alt:E.name}),a.jsx(yc,{children:a.jsx(No,{className:"h-6 w-6"})})]}),a.jsxs("div",{children:[a.jsx(Xe,{className:"text-lg",children:E.name}),a.jsx(rn,{variant:"secondary",className:"text-xs",children:E.department})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(te,{variant:"ghost",size:"icon",onClick:()=>{r(E),l(!0)},children:a.jsx(Ni,{className:"h-4 w-4"})}),a.jsx(te,{variant:"ghost",size:"icon",onClick:()=>S(E.id),className:"text-destructive hover:text-destructive",children:a.jsx(Ln,{className:"h-4 w-4"})})]})]})}),a.jsx(we,{children:a.jsxs("div",{className:"space-y-3 text-sm",children:[a.jsxs("div",{className:"",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:E.title}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[a.jsx(Ef,{className:"h-4 w-4"}),a.jsx("span",{children:E.email})]})]}),E.phone&&a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(No,{className:"h-4 w-4"}),a.jsx("span",{children:E.phone})]}),E.officeLocation&&a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(Vu,{className:"h-4 w-4"}),a.jsx("span",{children:E.officeLocation})]}),E.bio&&a.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:E.bio}),E.researchAreas&&E.researchAreas.length>0&&a.jsx("div",{className:"flex gap-2 flex-wrap",children:E.researchAreas.map(x=>a.jsx(rn,{children:x},x))}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[E.website&&a.jsx("a",{href:E.website,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Website"}),E.linkedin&&a.jsx("a",{href:E.linkedin,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"LinkedIn"})]})]})})]},E.id))}),!u&&!h&&b.length===0&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx(oc,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No professors found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No professors match your search criteria.":"Start by adding your first professor."}),a.jsxs(te,{onClick:()=>l(!0),children:[a.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]})})]})}const k9=[{id:"user_1",displayName:"Ali Ahmed",email:"ali.ahmed@example.com",role:"student",photoURL:"",createdAt:new Date},{id:"user_2",displayName:"Mona Hassan",email:"mona.hassan@example.com",role:"staff",photoURL:"",createdAt:new Date(Date.now()-1e3*60*60*24)}];function D9(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,l]=_.useState(null),[c,u]=_.useState(!1),{years:h}=Dc();return _.useEffect(()=>{const v=async()=>{try{const b=_r(st($e,"users"));await Pt(b);const S=_r(st($e,"users"),Ed("createdAt","desc")),E=Zo(S,x=>{const j=[];x.forEach(C=>{var R,D;const O=C.data(),U=O.yearId||O.year||O.year_id||O.yearId||null;let q=U,P="-";if(typeof U=="string"&&U.includes(":")){const[k,$]=U.split(":",2);q=k||null,$&&$.trim()&&(P=$.trim())}if(q&&P==="-"){const k=h.find($=>$.id===q);k&&(k.batchName?P=k.batchName:P=`Year ${{1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[k.yearNumber]||String(k.yearNumber)}`)}j.push({id:C.id,displayName:O.displayName||O.name||"",email:O.email||"",role:O.role||"student",photoURL:O.photoURL||O.avatar||"",createdAt:((D=(R=O.createdAt)==null?void 0:R.toDate)==null?void 0:D.call(R))||void 0,yearId:q||void 0,yearLabel:P})}),e(j);const I=Array.from(new Set(j.map(C=>C.yearId).filter(Boolean).filter(C=>!h.find(O=>O.id===C))));I.length>0&&Promise.all(I.map(async C=>{try{const U=(await Pt(Ms($e,"years"))).docs.find(D=>D.id===C);if(!U)return null;const q=U.data(),P=q.yearNumber||q.order||(()=>{const D=(q.name||"").match(/\d+/);return D?parseInt(D[0]):void 0})(),R=q.batchName||(P?`Year ${P}`:void 0)||void 0;return{id:C,label:R}}catch{return null}})).then(C=>{const O={};C.forEach(U=>{U&&U.id&&U.label&&(O[U.id]=U.label)}),Object.keys(O).length>0&&e(U=>U.map(q=>q.yearId&&O[q.yearId]?{...q,yearLabel:O[q.yearId]}:q))}),r(!1)},x=>{console.error("Failed to listen to users:",x),y()});return()=>E()}catch(b){console.error("Failed to load users, entering offline mode:",b),y()}},y=()=>{u(!0),e(k9),r(!1),l(null)};v()},[]),_.useEffect(()=>{!h||h.length===0||e(v=>v.map(y=>{if(!y)return y;const b=y.yearId||null;if(!b)return y;const S=h.find(I=>I.id===b);if(!S)return y;const x={1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[S.yearNumber]||String(S.yearNumber),j=S.batchName?S.batchName:`Year ${x}`;return{...y,yearLabel:j}}))},[h]),{users:n,loading:t,error:s,updateUser:async(v,y)=>{if(c||v.startsWith("mock_")||v.startsWith("offline_")){e(b=>b.map(S=>S.id===v?{...S,...y}:S));return}try{await an(Rt($e,"users",v),y)}catch(b){console.error("Failed to update user:",b),e(S=>S.map(E=>E.id===v?{...E,...y}:E))}},deleteUser:async v=>{if(c||v.startsWith("mock_")||v.startsWith("offline_")){e(y=>y.filter(b=>b.id!==v));return}try{await Rr(Rt($e,"users",v))}catch(y){console.error("Failed to delete user:",y),e(b=>b.filter(S=>S.id!==v))}},isOfflineMode:c}}function O9(){const{users:n,loading:e,error:t,updateUser:r,deleteUser:s}=D9(),l=async u=>{const h=u.role==="admin"?"user":"admin";await r(u.id,{role:h})},c=(u,h)=>{if(!u)return"-";const m=u.match(/(19|20)\d{2}/);if(m)return m[0];if(h)try{const g=new Date(h);if(!isNaN(g.getTime()))return String(g.getFullYear())}catch{}return"-"};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(RR,{className:"h-6 w-6 text-blue-600"}),a.jsx("h1",{className:"text-3xl font-bold",children:"Users"})]}),a.jsxs(xe,{children:[a.jsx(Ge,{children:a.jsxs(Xe,{children:["All Users (",n.length,")"]})}),a.jsx(we,{children:e?a.jsx("div",{children:"Loading..."}):t?a.jsx("div",{className:"text-destructive",children:t}):n.length===0?a.jsx("div",{className:"text-muted-foreground",children:"No users found."}):(()=>{const u={};n.forEach(m=>{const g=m.yearLabel&&String(m.yearLabel).trim()!==""?String(m.yearLabel):"Unassigned";u[g]||(u[g]=[]),u[g].push(m)});const h=Object.keys(u).sort((m,g)=>{const v=m.match(/Year\s*(\d+)/i),y=g.match(/Year\s*(\d+)/i);return v&&y?parseInt(v[1],10)-parseInt(y[1],10):v?-1:y||m==="Unassigned"?1:g==="Unassigned"?-1:m.localeCompare(g)});return a.jsx("div",{className:"space-y-6",children:h.map(m=>a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("h3",{className:"text-lg font-semibold",children:[m," ",a.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",u[m].length,")"]})]})}),a.jsx("div",{className:"space-y-2",children:u[m].map(g=>{var v;return a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[a.jsx(vc,{className:"h-12 w-12",children:g.photoURL?a.jsx(rd,{src:g.photoURL,alt:g.displayName}):a.jsx(yc,{children:((v=g.displayName)==null?void 0:v[0])||"U"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:g.displayName}),a.jsx("div",{className:"text-xs text-muted-foreground truncate",children:g.email}),a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",g.createdAt?new Date(g.createdAt).toLocaleString():"-",a.jsxs("span",{className:"ml-3",children:["Year: ",g.yearLabel||c(g.id,g.createdAt)]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rn,{children:g.role||"user"}),a.jsx(te,{size:"sm",variant:"outline",onClick:()=>l(g),children:g.role==="admin"?"Demote":"Make Admin"}),a.jsx(te,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>s(g.id),children:a.jsx(Ln,{className:"h-4 w-4"})})]})]},g.id)})})]},m))})})()})]})]})}function L9(n){if(!n)return 0;if(typeof n=="number")return n;const e=String(n).trim();if(/^\d+$/.test(e))return parseInt(e,10);const t=e.split(":").map(r=>parseInt(r,10));return t.length===3?t[0]*3600+(t[1]||0)*60+(t[2]||0):t.length===2?(t[0]||0)*60+(t[1]||0):0}function M9(n){if(!n||n<=0)return"0:00";const e=Math.floor(n/3600),t=Math.floor(n%3600/60),r=n%60;return e>0?`${e}:${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${t}:${String(r).padStart(2,"0")}`}function F9(){var D;const{id:n}=GS(),e=Tc(),{years:t,subjects:r,loading:s,createLecture:l,deleteLecture:c,deleteSubject:u,addVideo:h,addFile:m,addQuiz:g}=Dc(),[v,y]=_.useState(null),[b,S]=_.useState(!1),[E,x]=_.useState(!1),[j,I]=_.useState(!1),[C,O]=_.useState(!1),U=r.find(k=>k.id===n),q=k=>{y(k||null),S(!0)},P=k=>{y(k||null),x(!0)},R=k=>{y(k||null),I(!0)};return b&&v?a.jsx(Rj,{lectureId:v,onClose:()=>{S(!1),y(null)},onSave:async k=>{U!=null&&U.id&&v&&await h(U.id,v,k),S(!1),y(null)}}):E&&v?a.jsx(Pj,{lectureId:v,onClose:()=>{x(!1),y(null)},onSave:async k=>{U!=null&&U.id&&v&&await m(U.id,v,k),x(!1),y(null)}}):j&&v?a.jsx(DI,{lectureId:v,onClose:()=>{I(!1),y(null)},onSave:async k=>{U!=null&&U.id&&v&&await g(U.id,v,k),I(!1),y(null)}}):C?a.jsx(qm,{subjectId:(U==null?void 0:U.id)||null,subjectName:U==null?void 0:U.name,yearType:(D=t.find(k=>k.id===(U==null?void 0:U.yearId)))==null?void 0:D.type,onClose:()=>O(!1),onSave:async k=>{U!=null&&U.id&&await l(k),O(!1)}}):s?a.jsx("div",{children:"Loading..."}):U?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:U.name}),a.jsx("p",{className:"text-muted-foreground",children:"Subject details and lectures"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(te,{variant:"outline",size:"sm",onClick:()=>O(!0),className:"flex items-center gap-2",children:[a.jsx(Xt,{className:"h-4 w-4"}),"Add Lecture"]}),a.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(U&&confirm(`Delete subject "${U.name}"? This will remove all lectures.`))try{await u(U.id),e("/admin/years")}catch(k){console.error(k),alert("Failed to delete subject")}},children:a.jsx(Ln,{className:"h-4 w-4"})}),a.jsx(Yn,{to:"/admin/years",children:a.jsx(te,{variant:"ghost",children:"Back"})})]})]}),a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Lectures"}),a.jsx(jt,{children:"All lectures for this subject"})]}),a.jsx(we,{children:a.jsx("div",{className:"grid gap-4",children:U.lectures&&U.lectures.length>0?U.lectures.map(k=>{var z,M;const $=k.imageUrl||k.videos&&k.videos[0]&&k.videos[0].thumbnailUrl||"";return a.jsxs("div",{className:"p-3 border rounded-md flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[$?a.jsx("img",{src:$,alt:k.name,width:1280,height:720,style:{width:160,height:90,objectFit:"cover"},className:"rounded"}):a.jsx("div",{className:"w-40 h-24 bg-muted rounded flex items-center justify-center text-xs",children:"No image"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:k.name}),a.jsx("div",{className:"text-sm text-muted-foreground",children:k.description})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>q(k.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Video",children:[a.jsx(Fs,{className:"h-3 w-3 text-blue-600"}),a.jsx("span",{children:"Add Video"})]}),a.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>P(k.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add File",children:[a.jsx(Ks,{className:"h-3 w-3 text-green-600"}),a.jsx("span",{children:"Add File"})]}),a.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>R(k.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Quiz",children:[a.jsx(Ii,{className:"h-3 w-3 text-purple-600"}),a.jsx("span",{children:"Add Quiz"})]}),a.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(U&&confirm(`Delete lecture "${k.name}"?`))try{await c(U.id,k.id)}catch(ie){console.error(ie),alert("Failed to delete lecture")}},children:a.jsx(Ln,{className:"h-3 w-3"})}),a.jsxs("div",{className:"flex items-center gap-2",children:[k.videos&&k.videos.length>0?(()=>{const ie=(k.videos||[]).reduce((ae,Y)=>ae+L9(Y.duration||Y.time||Y.durationSeconds||Y.length),0);return a.jsxs("button",{onClick:()=>e(`/admin/videos?lecture=${k.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:[a.jsx(Fs,{className:"h-4 w-4"}),a.jsxs("span",{children:["(",k.videos.length,")"]}),a.jsx("span",{className:"text-muted-foreground",children:M9(ie)})]})})():a.jsx("button",{onClick:()=>e(`/admin/videos?lecture=${k.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:a.jsx(Fs,{className:"h-4 w-4"})}),a.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${k.id}&tab=files`),className:"text-xs text-green-600 flex items-center gap-1 px-2",title:"Files",children:[a.jsx(Ks,{className:"h-4 w-4"}),a.jsxs("span",{children:["(",((z=k.files)==null?void 0:z.length)||0,")"]})]}),a.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${k.id}&tab=quizzes`),className:"text-xs text-purple-600 flex items-center gap-1 px-2",title:"Quizzes",children:[a.jsx(Ii,{className:"h-4 w-4"}),a.jsxs("span",{children:["(",((M=k.quizzes)==null?void 0:M.length)||0,")"]})]})]})]})]},k.id)}):a.jsx("div",{className:"text-muted-foreground",children:"No lectures yet for this subject."})})})]})]}):a.jsx(xe,{children:a.jsxs(we,{className:"p-6 text-center",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Subject not found"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"The subject you requested does not exist."}),a.jsx("div",{className:"mt-4",children:a.jsx(Yn,{to:"/admin/years",children:a.jsx(te,{children:"Back to Years"})})})]})})}var ev="rovingFocusGroup.onEntryFocus",V9={bubbles:!1,cancelable:!0},Hm="RovingFocusGroup",[oy,kj,U9]=uy(Hm),[$9,Dj]=Li(Hm,[U9]),[z9,B9]=$9(Hm),Oj=_.forwardRef((n,e)=>a.jsx(oy.Provider,{scope:n.__scopeRovingFocusGroup,children:a.jsx(oy.Slot,{scope:n.__scopeRovingFocusGroup,children:a.jsx(q9,{...n,ref:e})})}));Oj.displayName=Hm;var q9=_.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:m,preventScrollOnEntryFocus:g=!1,...v}=n,y=_.useRef(null),b=wt(e,y),S=Fx(l),[E=null,x]=Oa({prop:c,defaultProp:u,onChange:h}),[j,I]=_.useState(!1),C=En(m),O=kj(t),U=_.useRef(!1),[q,P]=_.useState(0);return _.useEffect(()=>{const R=y.current;if(R)return R.addEventListener(ev,C),()=>R.removeEventListener(ev,C)},[C]),a.jsx(z9,{scope:t,orientation:r,dir:S,loop:s,currentTabStopId:E,onItemFocus:_.useCallback(R=>x(R),[x]),onItemShiftTab:_.useCallback(()=>I(!0),[]),onFocusableItemAdd:_.useCallback(()=>P(R=>R+1),[]),onFocusableItemRemove:_.useCallback(()=>P(R=>R-1),[]),children:a.jsx(Ke.div,{tabIndex:j||q===0?-1:0,"data-orientation":r,...v,ref:b,style:{outline:"none",...n.style},onMouseDown:ze(n.onMouseDown,()=>{U.current=!0}),onFocus:ze(n.onFocus,R=>{const D=!U.current;if(R.target===R.currentTarget&&D&&!j){const k=new CustomEvent(ev,V9);if(R.currentTarget.dispatchEvent(k),!k.defaultPrevented){const $=O().filter(Y=>Y.focusable),z=$.find(Y=>Y.active),M=$.find(Y=>Y.id===E),ae=[z,M,...$].filter(Boolean).map(Y=>Y.ref.current);Fj(ae,g)}}U.current=!1}),onBlur:ze(n.onBlur,()=>I(!1))})})}),Lj="RovingFocusGroupItem",Mj=_.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:l,...c}=n,u=Io(),h=l||u,m=B9(Lj,t),g=m.currentTabStopId===h,v=kj(t),{onFocusableItemAdd:y,onFocusableItemRemove:b}=m;return _.useEffect(()=>{if(r)return y(),()=>b()},[r,y,b]),a.jsx(oy.ItemSlot,{scope:t,id:h,focusable:r,active:s,children:a.jsx(Ke.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:ze(n.onMouseDown,S=>{r?m.onItemFocus(h):S.preventDefault()}),onFocus:ze(n.onFocus,()=>m.onItemFocus(h)),onKeyDown:ze(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){m.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const E=K9(S,m.orientation,m.dir);if(E!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let j=v().filter(I=>I.focusable).map(I=>I.ref.current);if(E==="last")j.reverse();else if(E==="prev"||E==="next"){E==="prev"&&j.reverse();const I=j.indexOf(S.currentTarget);j=m.loop?G9(j,I+1):j.slice(I+1)}setTimeout(()=>Fj(j))}})})})});Mj.displayName=Lj;var W9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function H9(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function K9(n,e,t){const r=H9(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return W9[r]}function Fj(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function G9(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var Q9=Oj,Y9=Mj,Ux="Tabs",[X9,qz]=Li(Ux,[Dj]),Vj=Dj(),[J9,$x]=X9(Ux),Uj=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:l,orientation:c="horizontal",dir:u,activationMode:h="automatic",...m}=n,g=Fx(u),[v,y]=Oa({prop:r,onChange:s,defaultProp:l});return a.jsx(J9,{scope:t,baseId:Io(),value:v,onValueChange:y,orientation:c,dir:g,activationMode:h,children:a.jsx(Ke.div,{dir:g,"data-orientation":c,...m,ref:e})})});Uj.displayName=Ux;var $j="TabsList",zj=_.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,l=$x($j,t),c=Vj(t);return a.jsx(Q9,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:r,children:a.jsx(Ke.div,{role:"tablist","aria-orientation":l.orientation,...s,ref:e})})});zj.displayName=$j;var Bj="TabsTrigger",qj=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...l}=n,c=$x(Bj,t),u=Vj(t),h=Kj(c.baseId,r),m=Gj(c.baseId,r),g=r===c.value;return a.jsx(Y9,{asChild:!0,...u,focusable:!s,active:g,children:a.jsx(Ke.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":m,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:h,...l,ref:e,onMouseDown:ze(n.onMouseDown,v=>{!s&&v.button===0&&v.ctrlKey===!1?c.onValueChange(r):v.preventDefault()}),onKeyDown:ze(n.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&c.onValueChange(r)}),onFocus:ze(n.onFocus,()=>{const v=c.activationMode!=="manual";!g&&!s&&v&&c.onValueChange(r)})})})});qj.displayName=Bj;var Wj="TabsContent",Hj=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:l,...c}=n,u=$x(Wj,t),h=Kj(u.baseId,r),m=Gj(u.baseId,r),g=r===u.value,v=_.useRef(g);return _.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),a.jsx(hy,{present:s||g,children:({present:y})=>a.jsx(Ke.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!y,id:m,tabIndex:0,...c,ref:e,style:{...n.style,animationDuration:v.current?"0s":void 0},children:y&&l})})});Hj.displayName=Wj;function Kj(n,e){return`${n}-trigger-${e}`}function Gj(n,e){return`${n}-content-${e}`}var Z9=Uj,Qj=zj,Yj=qj,Xj=Hj;const ez=Z9,Jj=_.forwardRef(({className:n,...e},t)=>a.jsx(Qj,{ref:t,className:nt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));Jj.displayName=Qj.displayName;const ay=_.forwardRef(({className:n,...e},t)=>a.jsx(Yj,{ref:t,className:nt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));ay.displayName=Yj.displayName;const ly=_.forwardRef(({className:n,...e},t)=>a.jsx(Xj,{ref:t,className:nt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));ly.displayName=Xj.displayName;function tz({product:n,onClose:e,onSave:t}){const[r,s]=_.useState({name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",price:(n==null?void 0:n.price)||0,types:(n==null?void 0:n.types)||(n!=null&&n.price?[{name:"Default",price:n.price}]:[]),images:(n==null?void 0:n.images)||[""],categoryId:(n==null?void 0:n.categoryId)||""}),[l,c]=_.useState(!1),[u,h]=_.useState(null),m=async b=>{b.preventDefault(),c(!0);try{const S={...r,images:r.images.filter(E=>E.trim()!=="")};S.types&&S.types.length>0?(S.types=S.types.map(E=>({name:String(E.name||"").trim(),price:parseFloat(E.price)||0})),S.price=S.types[0].price||0):S.types=[],t(S)}catch(S){console.error("Error saving product:",S)}finally{c(!1)}},g=()=>{s(b=>({...b,images:[...b.images,""]}))},v=(b,S)=>{s(E=>({...E,images:E.images.map((x,j)=>j===b?S:x)}))},y=b=>{s(S=>({...S,images:S.images.filter((E,x)=>x!==b)}))};return a.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(te,{variant:"ghost",onClick:e,children:[a.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Product":"Add Product"}),a.jsx("p",{className:"text-muted-foreground",children:n?"Update product details":"Create a new product"})]})]})}),a.jsxs("form",{onSubmit:m,className:"space-y-6",children:[a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsxs(Xe,{className:"flex items-center gap-2",children:[a.jsx(av,{className:"h-5 w-5 text-blue-600"}),"Product Information"]}),a.jsx(jt,{children:"Basic information about the product"})]}),a.jsxs(we,{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"name",children:"Product Name *"}),a.jsx(je,{id:"name",placeholder:"e.g., Medical Textbook",value:r.name,onChange:b=>s(S=>({...S,name:b.target.value})),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{children:"Types & Prices"}),a.jsxs("div",{className:"space-y-2",children:[r.types&&r.types.length>0?r.types.map((b,S)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx(je,{placeholder:"Type name (e.g., Pen)",value:b.name,onChange:E=>s(x=>({...x,types:x.types.map((j,I)=>I===S?{...j,name:E.target.value}:j)})),required:!0}),a.jsx(je,{type:"number",step:"0.01",placeholder:"0.00",value:b.price,onChange:E=>s(x=>({...x,types:x.types.map((j,I)=>I===S?{...j,price:parseFloat(E.target.value)||0}:j)})),required:!0,className:"w-32"}),a.jsx(te,{type:"button",variant:"ghost",onClick:()=>s(E=>({...E,types:E.types.filter((x,j)=>j!==S)})),children:"Remove"})]},S)):a.jsx("div",{className:"text-muted-foreground",children:"No types defined."}),a.jsx("div",{children:a.jsxs(te,{type:"button",variant:"outline",onClick:()=>s(b=>({...b,types:[...b.types||[],{name:"Default",price:0}]})),children:[a.jsx(Xt,{className:"h-4 w-4 mr-2"})," Add Type"]})})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"description",children:"Description"}),a.jsx(Oi,{id:"description",placeholder:"Describe the product...",value:r.description,onChange:b=>s(S=>({...S,description:b.target.value})),rows:4})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"categoryId",children:"Category ID (Optional)"}),a.jsx(je,{id:"categoryId",placeholder:"e.g., books, equipment",value:r.categoryId,onChange:b=>s(S=>({...S,categoryId:b.target.value}))})]})]})]}),a.jsxs(xe,{children:[a.jsx(Ge,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Xe,{children:"Product Images"}),a.jsx(jt,{children:"Add image URLs for the product"})]}),a.jsxs(te,{type:"button",variant:"outline",onClick:g,children:[a.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})}),a.jsx(we,{className:"space-y-4",children:r.images.map((b,S)=>a.jsxs("div",{className:`flex gap-2 items-center ${u===S?"border-2 border-dashed p-2 rounded":""}`,onDragOver:E=>{E.preventDefault(),h(S)},onDragEnter:E=>{E.preventDefault(),h(S)},onDragLeave:()=>{h(null)},onDrop:async E=>{E.preventDefault(),h(null);try{const x=E.dataTransfer;if(!x)return;if(x.files&&x.files.length>0){const I=x.files[0];try{let C=null;try{C=await wr(I)}catch(O){console.warn("Cloudinary upload failed, trying ImageKit fallback",(O==null?void 0:O.message)||O),C=await Lo(I,I.name)}C&&typeof C=="string"&&C.startsWith("http")?v(S,C):alert("Upload failed: unexpected response from upload provider")}catch(C){console.error("Drop upload error:",C);const U=((C==null?void 0:C.message)||String(C)||"").toLowerCase();if(U.includes("cloudinary signing did not return an api key")||U.includes("missing required parameter - api_key")||U.includes("missing required parameter 'api_key'")){const q=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(q&&q.trim())try{ka(null,null,q.trim());const P=await wr(I);if(P&&typeof P=="string"&&P.startsWith("http")){v(S,P);return}}catch(P){console.error("Retry after API key failed:",P)}}alert("Upload failed: "+((C==null?void 0:C.message)||C))}return}const j=x.getData("text/uri-list")||x.getData("text/plain");if(j&&j.startsWith("http")){if(!window.confirm(`Upload the dragged URL to Cloudinary and replace it?
`+j))return;const C=await Gb(j);C&&typeof C=="string"&&C.startsWith("http")?v(S,C):alert("Upload failed: unexpected response from server")}}catch(x){console.error("Drop upload error:",x),alert("Image upload failed: "+((x==null?void 0:x.message)||x))}},children:[a.jsx(je,{placeholder:"https://example.com/image.jpg",value:b,onChange:E=>v(S,E.target.value)}),a.jsx(te,{type:"button",variant:"ghost",size:"icon",onClick:async()=>{var E;try{const x=(E=r.images[S])==null?void 0:E.trim();if(x&&(x.startsWith("http://")||x.startsWith("https://"))){try{if(!window.confirm(`Upload the current URL to Cloudinary/ImageKit and replace it?
`+x))return;try{const C=await Gb(x);if(C&&typeof C=="string"&&C.startsWith("http")){v(S,C);return}}catch(C){console.warn("uploadUrlToServer failed, will try ImageKit:",(C==null?void 0:C.message)||C)}try{const C=await Lo(x);if(C&&typeof C=="string"&&C.startsWith("http")){v(S,C);return}else alert("Upload failed: unexpected response from ImageKit")}catch(C){console.error("ImageKit URL upload error:",C),alert("URL upload failed: "+((C==null?void 0:C.message)||C))}}catch(I){console.error("URL upload error:",I),alert("URL upload failed: "+((I==null?void 0:I.message)||I))}return}const j=document.createElement("input");j.type="file",j.accept="image/*",j.onchange=async()=>{var C;const I=(C=j.files)==null?void 0:C[0];if(I)try{let O=null;try{O=await wr(I)}catch(U){console.warn("Cloudinary upload failed, trying ImageKit fallback",(U==null?void 0:U.message)||U);try{O=await Lo(I,I.name)}catch(q){throw console.error("ImageKit upload failed:",q),U}}if(!O||typeof O!="string"||!O.startsWith("http")){alert("Upload failed: unexpected response from upload provider");return}v(S,O)}catch(O){const U=(O==null?void 0:O.message)||String(O);console.error("Upload error:",O);const q=(U||"").toLowerCase();if(q.includes("cloudinary cloud name is not configured")){const P=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!P){alert("No cloud name provided.");return}const R=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),D=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");ka(P,R||null,D||null);try{const k=await wr(I);if(!k||typeof k!="string"||!k.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}v(S,k)}catch(k){console.error("Retry upload error:",k),alert("Upload failed after configuring Cloudinary: "+(k.message||k))}}else if(q.includes("cloudinary signing did not return an api key")||q.includes("missing required parameter - api_key")||q.includes("missing required parameter 'api_key'")){const P=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(P&&P.trim())try{ka(null,null,P.trim());const R=await wr(I);if(!R||typeof R!="string"||!R.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}v(S,R);return}catch(R){console.error("Retry upload error:",R),alert("Upload failed after setting API key: "+(R.message||R));return}}else alert("Image upload failed: "+(O.message||O))}},j.click()}catch(x){console.error(x),alert("Could not open file dialog")}},children:a.jsx(ov,{className:"h-4 w-4"})}),r.images.length>1&&a.jsx(te,{type:"button",variant:"outline",size:"icon",onClick:()=>y(S),children:a.jsx(ac,{className:"h-4 w-4"})})]},S))})]}),r.name&&a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Preview"}),a.jsx(jt,{children:"How the product will appear"})]}),a.jsx(we,{children:a.jsx("div",{className:"p-4 border rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-4",children:[r.images[0]&&r.images[0].trim()&&(()=>{const b=dk(r.images[0]);return a.jsx("img",{src:b||void 0,alt:r.name,className:"w-20 h-20 object-cover rounded",onError:S=>{S.currentTarget.style.display="none",console.warn("Product preview image failed to load:",b||r.images[0])}})})(),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-lg",children:r.name}),a.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["$",r.price.toFixed(2)]}),r.description&&a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.description}),r.categoryId&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Category: ",r.categoryId]})]})]})})})]}),a.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[a.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),a.jsxs(te,{type:"submit",disabled:l,children:[a.jsx(Qo,{className:"h-4 w-4 mr-2"}),l?"Saving...":n?"Update Product":"Add Product"]})]})]})]})}function Zj(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,l]=_.useState(null);return _.useEffect(()=>{const m=_r(st($e,"orders"),Ed("orderDate","desc")),g=Zo(m,async v=>{try{const y=await Pt(st($e,"products")),b={};y.forEach(E=>{const x=E.data();b[E.id]={id:E.id,name:x.name||x.title||"",price:x.price||0}});const S=[];v.forEach(E=>{var q,P;const x=E.data();let j=[];x.items&&Array.isArray(x.items)&&x.items.length>0?j=x.items:x.productsIds&&Array.isArray(x.productsIds)&&(j=x.productsIds.map(R=>{var D,k;return{productId:R,name:((D=b[R])==null?void 0:D.name)||R,quantity:1,price:((k=b[R])==null?void 0:k.price)||0}}));const I=x.total||x.totalAmount||x.totalPrice||0,C=x.address||x.shippingaddress||x.shippingAddress||"",O=x.userPhone||x.user_phone||x.phone||"";let U=new Date;x.createdAt&&typeof x.createdAt.toDate=="function"?U=x.createdAt.toDate():x.orderDate&&typeof x.orderDate.toDate=="function"?U=x.orderDate.toDate():x.orderDate&&(U=new Date(x.orderDate)),S.push({id:E.id,userId:x.userId||x.user_id||"",username:x.username||x.userName||x.user_name||x.customerName||"",userName:x.userName||x.user_name||x.customerName||"",userEmail:x.userEmail||x.email||"",userPhone:O,address:C,items:j,total:I,iscompleted:x.iscompleted===!0||x.isCompleted===!0||!1,status:x.status||(x.iscompleted===!0?"completed":"pending"),createdAt:U,updatedAt:(P=(q=x.updatedAt)==null?void 0:q.toDate)==null?void 0:P.call(q)})}),e(S),r(!1)}catch(y){console.error("Error processing orders:",y),l("Failed to load orders"),r(!1)}},v=>{console.error("Failed to load orders:",v),l("Failed to load orders"),r(!1)});return()=>g()},[]),{orders:n,loading:t,error:s,createOrder:async m=>{try{await wn(st($e,"orders"),{...m,createdAt:new Date})}catch(g){console.error("Error creating order:",g)}},updateOrder:async(m,g)=>{try{const v={...g,updatedAt:new Date};(g.status==="completed"||g.isCompleted)&&(v.isCompleted=!0,v.iscompleted=!0,v.completedAt=new Date,v.status="completed"),await an(Rt($e,"orders",m),v)}catch(v){console.error("Error updating order:",v)}},deleteOrder:async m=>{try{await Rr(Rt($e,"orders",m))}catch(g){console.error("Error deleting order:",g)}}}}function nz(){const[n,e]=_.useState(""),[t,r]=_.useState(!1),[s,l]=_.useState(null),{products:c,loading:u,error:h,isOfflineMode:m,createProduct:g,updateProduct:v,deleteProduct:y,retryConnection:b}=VC(),{createOrder:S}=Zj(),E=()=>{l(null),r(!0)},x=C=>{l(C),r(!0)},j=async(C,O)=>{confirm(`Are you sure you want to delete "${O}"?`)&&await y(C)};if(t)return a.jsx(tz,{product:s,onClose:()=>{r(!1),l(null)},onSave:async C=>{try{s?await v(s.id,C):await g(C),r(!1),l(null)}catch(O){console.error("Error saving product:",O),alert("Failed to save product. Please try again.")}}});const I=c.filter(C=>C.name.toLowerCase().includes(n.toLowerCase())||C.description.toLowerCase().includes(n.toLowerCase()));return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Store Management"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-muted-foreground",children:"Manage store products and categories"}),m&&a.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[a.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),u&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx(Mo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}),h&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading products"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:h}),a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsx(te,{onClick:b,variant:"outline",children:"Retry Connection"}),a.jsx(te,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!u&&!h&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(xe,{children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Xe,{className:"text-sm font-medium",children:"Total Products"}),a.jsx(av,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(we,{children:a.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),a.jsxs(xe,{children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Xe,{className:"text-sm font-medium",children:"Average Price"}),a.jsx($1,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(we,{children:a.jsxs("div",{className:"text-2xl font-bold",children:["$",c.length>0?(c.reduce((C,O)=>{const U=O.types&&O.types.length>0?O.types[0].price:O.price||0;return C+U},0)/c.length).toFixed(2):"0.00"]})})]}),a.jsxs(xe,{children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Xe,{className:"text-sm font-medium",children:"Categories"}),a.jsx(Au,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(we,{children:a.jsx("div",{className:"text-2xl font-bold",children:new Set(c.map(C=>C.categoryId).filter(C=>C&&C.trim())).size})})]})]}),a.jsxs(ez,{defaultValue:"products",className:"space-y-6",children:[a.jsxs(Jj,{className:"grid w-full grid-cols-2",children:[a.jsxs(ay,{value:"products",className:"flex items-center gap-2",children:[a.jsx(gy,{className:"h-4 w-4"}),"Products (",c.length,")"]}),a.jsxs(ay,{value:"categories",className:"flex items-center gap-2",children:[a.jsx(Au,{className:"h-4 w-4"}),"Categories"]})]}),a.jsxs(ly,{value:"products",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"relative flex-1 max-w-sm",children:[a.jsx(wc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(je,{placeholder:"Search products...",value:n,onChange:C=>e(C.target.value),className:"pl-10"})]}),a.jsxs(te,{onClick:E,children:[a.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),I.length===0?a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx(av,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:n?"No products found":"No products yet"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:n?"Try adjusting your search terms":"Add your first product to get started"}),!n&&a.jsxs(te,{onClick:E,children:[a.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add First Product"]})]})}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:I.map(C=>a.jsxs(xe,{className:"overflow-hidden",children:[a.jsxs("div",{className:"aspect-video bg-muted relative",children:[C.images&&C.images[0]?a.jsx("img",{src:C.images[0],alt:C.name,className:"w-full h-full object-cover",onError:O=>{O.currentTarget.style.display="none";const U=O.currentTarget.nextElementSibling;U&&(U.style.display="flex")}}):null,a.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:C.images&&C.images[0]?"none":"flex"},children:a.jsx(ov,{className:"h-12 w-12 text-muted-foreground"})})]}),a.jsxs(Ge,{className:"pb-2",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(Xe,{className:"text-lg line-clamp-1",children:C.name}),C.types&&C.types.length>1&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[C.types.length," options available"]})]}),a.jsx("div",{className:"mt-2",children:C.types&&C.types.length>0?a.jsx("div",{className:"flex gap-2 flex-wrap",children:C.types.map((O,U)=>a.jsxs(rn,{variant:"secondary",className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:O.name}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["$",O.price.toFixed(2)]})]},U))}):a.jsxs("div",{className:"text-xl font-bold",children:["$",(C.price||0).toFixed(2)]})}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx(te,{variant:"ghost",size:"icon",onClick:()=>x(C),className:"h-8 w-8",children:a.jsx(Ni,{className:"h-3 w-3"})}),a.jsx(te,{variant:"ghost",size:"icon",onClick:async()=>{try{const O=document.createElement("input");O.type="file",O.accept="image/*",O.onchange=async()=>{var q;const U=(q=O.files)==null?void 0:q[0];if(U)try{let P=null;try{P=await wr(U)}catch(R){console.warn("Cloudinary upload failed, trying ImageKit fallback",(R==null?void 0:R.message)||R);try{P=await Lo(U,U.name)}catch(D){throw console.error("ImageKit upload failed:",D),R}}if(!P||typeof P!="string"||!P.startsWith("http")){console.error("Invalid upload response:",P),alert("Image upload failed: unexpected response from upload provider");return}await v(C.id,{images:[P]})}catch(P){console.error(P);const D=((P==null?void 0:P.message)||String(P)||"").toLowerCase();if(D.includes("cloudinary cloud name is not configured")){const k=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!k){alert("No cloud name provided. Upload cancelled.");return}const $=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),z=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{ka(k,$||null,z||null);const M=await wr(U);if(console.log("Cloudinary upload result after config:",M),!M||typeof M!="string"||!M.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await v(C.id,{images:[M]})}catch(M){console.error(M),alert("Image upload failed after configuring Cloudinary: "+(M.message||M))}return}else if(D.includes("cloudinary signing did not return an api key")||D.includes("missing required parameter - api_key")||D.includes("missing required parameter 'api_key'")){const k=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(k&&k.trim())try{ka(null,null,k.trim());const $=await wr(U);if(!$||typeof $!="string"||!$.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await v(C.id,{images:[$]});return}catch($){console.error($),alert("Image upload failed after setting API key: "+($.message||$));return}}alert("Image upload failed: "+(P.message||P))}},O.click()}catch(O){console.error(O),alert("Could not open file dialog")}},className:"h-8 w-8",children:a.jsx(ov,{className:"h-3 w-3"})}),a.jsx(te,{variant:"ghost",size:"icon",onClick:()=>j(C.id,C.name),className:"h-8 w-8 text-destructive hover:text-destructive",children:a.jsx(Ln,{className:"h-3 w-3"})}),a.jsx(te,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:async()=>{try{let O,U;if(C.types&&C.types.length>0)if(C.types.length===1)O=C.types[0].name,U=C.types[0].price;else{const M=C.types.map((Y,J)=>`${J+1}. ${Y.name} - $${Y.price.toFixed(2)}`).join(`
`),ie=window.prompt(`Select a type for "${C.name}":

${M}

Enter the number (1-${C.types.length}):`,"1");if(!ie)return;const ae=parseInt(ie)-1;if(ae<0||ae>=C.types.length){alert("Invalid selection. Please try again.");return}O=C.types[ae].name,U=C.types[ae].price}else U=C.price||0;const q=window.prompt("Your full name:");if(!q)return;const P=window.prompt("Your email:");if(!P)return;const R=window.prompt("Quantity:","1")||"1",D=parseInt(R)||1,k=window.prompt("Phone (optional):","")||"",$=window.prompt("Address (optional):","")||"",z=O?`${C.name} (${O})`:C.name;await S({username:q,userName:q,userEmail:P,userPhone:k,address:$,items:[{productId:C.id,name:z,quantity:D,price:U,selectedType:O}],total:U*D,status:"pending",createdAt:new Date}),alert(`Order placed successfully!

Product: ${z}
Quantity: ${D}
Total: $${(U*D).toFixed(2)}`)}catch(O){console.error(O),alert("Failed to place order")}},children:C.types&&C.types.length>1?"Select & Buy":"Buy Now"})]})]}),a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",(C.types&&C.types.length>0?C.types[0].price:C.price||0).toFixed(2)]})]}),a.jsxs(we,{className:"pt-0",children:[C.description&&a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:C.description}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:C.createdAt.toLocaleDateString()}),C.categoryId&&a.jsx(rn,{variant:"secondary",className:"text-xs",children:C.categoryId})]})]})]},C.id))})]}),a.jsxs(ly,{value:"categories",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Categories"}),a.jsxs(te,{disabled:!0,children:[a.jsx(Xt,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx(Au,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Category Management"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Category management will be implemented in the future."}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"For now, you can specify category IDs when creating products."})]})})]})]})]})]})}function rz({order:n,onChangeStatus:e,onDelete:t}){var r,s;return a.jsxs(xe,{children:[a.jsx(Ge,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(Xe,{children:["Order for ",n.username||n.userName,a.jsx("div",{className:"text-xs text-muted-foreground",children:(s=(r=n.createdAt)==null?void 0:r.toLocaleString)==null?void 0:s.call(r)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(rn,{variant:n.status==="completed"||n.iscompleted?"default":"secondary",children:[n.status,n.iscompleted?" â€¢ completed":""]}),a.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>e(n.id,"completed"),children:[a.jsx(p_,{className:"h-4 w-4 mr-1"})," Complete"]}),a.jsx(te,{variant:"ghost",size:"icon",onClick:()=>t(n.id),className:"text-destructive",children:a.jsx(Ln,{className:"h-4 w-4"})})]})]})}),a.jsxs(we,{children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact"}),a.jsx("div",{className:"font-medium",children:n.username||n.userName}),a.jsx("div",{className:"text-sm",children:n.userEmail}),n.userPhone&&a.jsx("div",{className:"text-sm",children:n.userPhone}),n.address&&a.jsx("div",{className:"text-sm",children:n.address})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Items"}),a.jsxs("div",{className:"space-y-2 mt-2",children:[n.items&&n.items.length>0?n.items.map((l,c)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm",children:[l.name," x",l.quantity]}),a.jsxs("div",{className:"font-medium",children:["$",(l.price*l.quantity).toFixed(2)]})]},c)):a.jsx("div",{className:"text-sm text-muted-foreground",children:"No item details. Products IDs may be attached in the raw order."}),n.productsIds&&n.productsIds.length>0&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Product IDs: ",(n.productsIds||[]).join(", ")]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t mt-2",children:[a.jsx("div",{className:"font-medium",children:"Total"}),a.jsxs("div",{className:"font-bold",children:["$",(n.total||0).toFixed(2)]})]})]})]})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(te,{onClick:()=>e(n.id,"paid"),children:[a.jsx(p_,{className:"h-4 w-4 mr-2"})," Mark Paid"]}),a.jsxs(te,{variant:"outline",onClick:()=>e(n.id,"cancelled"),children:[a.jsx(wR,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]})]},n.id)}function sz(){const{orders:n,loading:e,error:t,updateOrder:r,deleteOrder:s}=Zj(),l=async(u,h)=>{u&&await r(u,{status:h})},c=async u=>{u&&confirm("Delete this order?")&&await s(u)};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Orders"}),a.jsx("p",{className:"text-muted-foreground",children:"View and manage store orders"})]})}),e&&a.jsx("div",{children:"Loading..."}),t&&a.jsx("div",{className:"text-destructive",children:t}),!e&&!t&&a.jsx("div",{className:"grid gap-4",children:n.map(u=>a.jsx(rz,{order:u,onChangeStatus:l,onDelete:c},u.id))})]})}function zx(n,e){const[t,r]=_.useState([]),[s,l]=_.useState(!0),[c,u]=_.useState(null);return _.useEffect(()=>{let h=null,m=!0;return(async()=>{if(!n){r([]),l(!1);return}try{const v=_r(Ms($e,"lectures"),h6(n6(),"==",n)),y=await Pt(v);if(y.empty){m&&(r([]),l(!1));return}const b=y.docs[0],S=st(b.ref,e);h=Zo(S,E=>{if(!m)return;const x=[];E.forEach(j=>{const I=j.data();x.push({id:j.id,...I})}),r(x),l(!1)},E=>{console.error(`Failed to subscribe to ${e}:`,E),u(`Failed to load ${e}`),l(!1)})}catch(v){console.error(`Error resolving lecture for ${e}:`,v),m&&(u(v.message||String(v)),l(!1))}})(),()=>{m=!1,h&&h()}},[n,e]),{items:t,loading:s,error:c}}function iz(n){return zx(n,"videos")}function oz(n){return zx(n,"files")}function eA(n){return zx(n,"quizzes")}function az(){var m;const[n]=cd(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=Wm(),{items:l,loading:c,error:u}=iz(e);if(c||r)return a.jsx("div",{children:"Loading..."});if(u||s)return a.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold",children:["Videos for ",h.title||h.id]}),a.jsx("p",{className:"text-muted-foreground",children:h.description})]}),a.jsx("div",{children:a.jsx(Yn,{to:"/admin/resources",children:a.jsx(te,{variant:"ghost",children:"Back"})})})]}),a.jsxs(xe,{children:[a.jsx(Ge,{children:a.jsxs(Xe,{children:["Videos (",((m=h.videos)==null?void 0:m.length)||0,")"]})}),a.jsx(we,{children:l&&l.length>0?a.jsx("div",{className:"space-y-3",children:l.map(g=>a.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[g.thumbnailUrl?a.jsx("img",{src:g.thumbnailUrl,alt:g.title,className:"w-32 h-18 object-cover rounded"}):a.jsx("div",{className:"w-32 h-18 bg-muted rounded"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:g.title||"Untitled"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),a.jsx("div",{children:a.jsxs(te,{onClick:()=>window.open(g.url||g.youtubeUrl||"","_blank"),children:[" ",a.jsx(Fs,{className:"h-4 w-4 mr-2"})," Play "]})})]},g.id))}):a.jsx("p",{className:"text-muted-foreground",children:"No videos available for this lecture."})})]})]}):a.jsx(xe,{children:a.jsxs(we,{className:"p-6 text-center",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its videos."}),a.jsx("div",{className:"mt-4",children:a.jsx(Yn,{to:"/admin/years",children:a.jsx(te,{children:"Back to Years"})})})]})})}function lz(){var m;const[n]=cd(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=Wm(),{items:l,loading:c,error:u}=oz(e);if(c||r)return a.jsx("div",{children:"Loading..."});if(u||s)return a.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold",children:["Files for ",h.title||h.id]}),a.jsx("p",{className:"text-muted-foreground",children:h.description})]}),a.jsx("div",{children:a.jsx(Yn,{to:"/admin/resources",children:a.jsx(te,{variant:"ghost",children:"Back"})})})]}),a.jsxs(xe,{children:[a.jsx(Ge,{children:a.jsxs(Xe,{children:["Files (",((m=h.files)==null?void 0:m.length)||0,")"]})}),a.jsx(we,{children:l&&l.length>0?a.jsx("div",{className:"space-y-3",children:l.map(g=>a.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ks,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:g.title||g.name||"Untitled File"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),a.jsx("div",{children:a.jsx(te,{onClick:()=>window.open(g.fileUrl||g.url||"_blank"),children:"Download"})})]},g.id))}):a.jsx("p",{className:"text-muted-foreground",children:"No files available for this lecture."})})]})]}):a.jsx(xe,{children:a.jsxs(we,{className:"p-6 text-center",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its files."}),a.jsx("div",{className:"mt-4",children:a.jsx(Yn,{to:"/admin/years",children:a.jsx(te,{children:"Back to Years"})})})]})})}function cz(){var m;const[n]=cd(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=Wm(),{items:l,loading:c,error:u}=eA(e);if(c||r)return a.jsx("div",{children:"Loading..."});if(u||s)return a.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold",children:["Quizzes for ",h.title||h.id]}),a.jsx("p",{className:"text-muted-foreground",children:h.description})]}),a.jsx("div",{children:a.jsx(Yn,{to:"/admin/resources",children:a.jsx(te,{variant:"ghost",children:"Back"})})})]}),a.jsxs(xe,{children:[a.jsx(Ge,{children:a.jsxs(Xe,{children:["Quizzes (",((m=h.quizzes)==null?void 0:m.length)||0,")"]})}),a.jsx(we,{children:l&&l.length>0?a.jsx("div",{className:"space-y-3",children:l.map(g=>a.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ii,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:g.title||"Untitled Quiz"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:g.description}),a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",a.jsx("strong",{children:g.type||"multiple_choice"})]})]})]}),a.jsx("div",{children:(g.type||"multiple_choice")==="flashcard"?a.jsx(te,{onClick:()=>window.location.href=`/admin/flashcards?lecture=${e}&quiz=${g.id}`,children:"Flashcards"}):a.jsx(te,{onClick:()=>alert("Multiple choice runner not implemented. Use Flashcards or implement MCQ runner."),children:"Start"})})]},g.id))}):a.jsx("p",{className:"text-muted-foreground",children:"No quizzes available for this lecture."})})]})]}):a.jsx(xe,{children:a.jsxs(we,{className:"p-6 text-center",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its quizzes."}),a.jsx("div",{className:"mt-4",children:a.jsx(Yn,{to:"/admin/years",children:a.jsx(te,{children:"Back to Years"})})})]})})}var Bx="Progress",qx=100,[uz,Wz]=Li(Bx),[dz,hz]=uz(Bx),tA=_.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:s,getValueLabel:l=fz,...c}=n;(s||s===0)&&!Yb(s)&&console.error(mz(`${s}`,"Progress"));const u=Yb(s)?s:qx;r!==null&&!Xb(r,u)&&console.error(pz(`${r}`,"Progress"));const h=Xb(r,u)?r:null,m=Zf(h)?l(h,u):void 0;return a.jsx(dz,{scope:t,value:h,max:u,children:a.jsx(Ke.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":Zf(h)?h:void 0,"aria-valuetext":m,role:"progressbar","data-state":sA(h,u),"data-value":h??void 0,"data-max":u,...c,ref:e})})});tA.displayName=Bx;var nA="ProgressIndicator",rA=_.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,s=hz(nA,t);return a.jsx(Ke.div,{"data-state":sA(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});rA.displayName=nA;function fz(n,e){return`${Math.round(n/e*100)}%`}function sA(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function Zf(n){return typeof n=="number"}function Yb(n){return Zf(n)&&!isNaN(n)&&n>0}function Xb(n,e){return Zf(n)&&!isNaN(n)&&n<=e&&n>=0}function mz(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${qx}\`.`}function pz(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${qx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var iA=tA,gz=rA;const oA=_.forwardRef(({className:n,value:e,...t},r)=>a.jsx(iA,{ref:r,className:nt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:a.jsx(gz,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));oA.displayName=iA.displayName;function vz(){const[n]=cd(),e=n.get("lecture"),t=n.get("quiz"),{items:r,loading:s,error:l}=eA(e),c=r.find(z=>z.id===t),[u,h]=_.useState(0),[m,g]=_.useState([]);if(s)return a.jsx("div",{children:"Loading..."});if(l)return a.jsx("div",{className:"text-destructive",children:l});if(!c)return a.jsx(xe,{children:a.jsxs(we,{className:"p-6 text-center",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Quiz not found"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a quiz to start flashcards."}),a.jsx("div",{className:"mt-4",children:a.jsx(Yn,{to:"/admin/quizzes",children:a.jsx(te,{children:"Back"})})})]})});const v=c.questions||[],y=v.reduce((z,M)=>z+(M.weight&&Number(M.weight)||1),0),b=v[u],S=b&&(b.weight||1)||1,E=m[u]??0,[x,j]=_.useState(!1),[I,C]=_.useState([]),[O,U]=_.useState(null);_.useEffect(()=>{j(!1),C([]),U(null)},[u]);const q=(z,M)=>{const ie=[...m];ie[z]=M,g(ie)},P=m.reduce((z,M,ie)=>z+(M||0),0),R=Math.round(P/y*100),D=z=>{if(!z)return[{type:"text",value:""}];const M=[],ie=/\[\[(.+?)\]\]/g;let ae=0,Y;for(;(Y=ie.exec(z))!==null;)Y.index>ae&&M.push({type:"text",value:z.slice(ae,Y.index)}),M.push({type:"blank",value:Y[1]}),ae=ie.lastIndex;return ae<z.length&&M.push({type:"text",value:z.slice(ae)}),M},k=()=>{const z=(b==null?void 0:b.question)||"",ie=D(z).filter(ae=>ae.type==="blank");ie.length>0?C(ie.map(()=>"")):C([""]),U(null),j(!0)},$=()=>{const z=(b==null?void 0:b.question)||"",ie=D(z).filter(B=>B.type==="blank").map(B=>B.value);let ae=[];ie.length>0?ae=ie:b&&Array.isArray(b.options)&&typeof b.correctAnswer=="number"?ae=[b.options[b.correctAnswer]||""]:b&&(b.answer||b.correct)&&(ae=[String(b.answer||b.correct)]);const J=I.map((B,K)=>{const Q=(ae[K]??ae[0]??"").toString().trim().toLowerCase();return B.toString().trim().toLowerCase()===Q&&Q!==""}).every(Boolean);U(J?"Correct":"Incorrect"),J&&q(u,S)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold",children:["Flashcards: ",c.title]}),a.jsx("p",{className:"text-muted-foreground",children:"Fill marks per question. Total progress shows weighted score."})]}),a.jsx("div",{children:a.jsx(Yn,{to:"/admin/quizzes",children:a.jsx(te,{variant:"ghost",children:"Back"})})})]}),a.jsxs(xe,{children:[a.jsx(Ge,{children:a.jsx(Xe,{children:"Progress"})}),a.jsxs(we,{children:[a.jsxs("div",{className:"mb-2 text-sm",children:["Total: ",y," points â€” Current: ",P," points"]}),a.jsx(oA,{value:R}),a.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[R,"%"]})]})]}),a.jsxs(xe,{children:[a.jsx(Ge,{children:a.jsxs(Xe,{children:["Question ",u+1," / ",v.length]})}),a.jsx(we,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"font-medium",children:x?a.jsxs("div",{className:"space-y-2",children:[(()=>{const z=D(b.question||"");let M=0;return a.jsxs("div",{children:[z.map((ie,ae)=>{if(ie.type==="text")return a.jsx("span",{children:ie.value},ae);const Y=M++;return a.jsx("input",{value:I[Y]??"",onChange:J=>C(B=>{const K=[...B];return K[Y]=J.target.value,K}),placeholder:"Fill the blank",className:"border-b-2 border-gray-300 px-1 mx-1"},ae)}),z.length===1&&z[0].type==="text"&&a.jsx("div",{children:a.jsx("input",{value:I[0]??"",onChange:ie=>C(ae=>{const Y=[...ae];return Y[0]=ie.target.value,Y}),placeholder:"Answer",className:"border-b-2 border-gray-300 px-1"})})]})})(),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(te,{onClick:$,children:"Check"}),a.jsx(te,{variant:"outline",onClick:()=>{j(!1),U(null)},children:"Cancel"}),O&&a.jsx("div",{className:"ml-2 text-sm",children:O})]})]}):a.jsx("span",{role:"button",tabIndex:0,onClick:k,onKeyDown:z=>{z.key==="Enter"&&k()},children:b.question})}),b.imageUrl&&a.jsx("img",{src:b.imageUrl,alt:"question",className:"w-full max-w-md object-contain"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Weight: ",S]}),a.jsxs("label",{className:"text-sm",children:["Mark (0 - ",S,")"]}),a.jsx("input",{type:"number",min:0,max:S,value:E,onChange:z=>q(u,Math.max(0,Math.min(S,Number(z.target.value)||0))),className:"border rounded px-2 py-1 w-24"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(te,{disabled:u===0,onClick:()=>h(z=>Math.max(0,z-1)),children:"Previous"}),a.jsx(te,{disabled:u===v.length-1,onClick:()=>h(z=>Math.min(v.length-1,z+1)),children:"Next"}),a.jsx(te,{variant:"outline",onClick:()=>{g([]),h(0)},children:"Reset"})]}),a.jsx("div",{className:"mt-4",children:a.jsx(te,{onClick:()=>alert(`Final score: ${P}/${y} (${R}%)`),children:"Finish"})})]})})]})]})}function yz(){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Configure application settings and preferences"})]}),a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx(B1,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"This section will provide configuration options for the admin panel."}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Features: User management, system configuration, backup settings, security options."})]})})]})}function xz(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,l]=_.useState(null);return _.useEffect(()=>{const m=_r(st($e,"maps")),g=Zo(m,v=>{const y=[];v.forEach(b=>{var E,x;const S=b.data();y.push({id:b.id,name:S.name||"",location:S.location||"",description:S.description||S.desc||"",type:S.type||S.mapType||"",video_url:S.video_url||S.videoUrl||"",createdAt:((x=(E=S.createdAt)==null?void 0:E.toDate)==null?void 0:x.call(E))||void 0})}),e(y),r(!1)},v=>{console.error("Failed to load maps:",v),l("Failed to load maps"),r(!1)});return()=>g()},[]),{maps:n,loading:t,error:s,createMap:async m=>{const g={...m,createdAt:new Date};g.type&&!g.mapType&&(g.mapType=g.type),g.mapType&&!g.type&&(g.type=g.mapType),["name","location","description","video_url","type","mapType"].forEach(v=>{typeof g[v]=="string"&&(g[v]=g[v].trim())}),await wn(st($e,"maps"),g)},updateMap:async(m,g)=>{const v={...g};v.type&&!v.mapType&&(v.mapType=v.type),v.mapType&&!v.type&&(v.type=v.mapType),["name","location","description","video_url","type","mapType"].forEach(y=>{typeof v[y]=="string"&&(v[y]=v[y].trim())}),await an(Rt($e,"maps",m),v)},deleteMap:async m=>{await Rr(Rt($e,"maps",m))}}}function wz(){const{maps:n,loading:e,error:t,createMap:r,updateMap:s,deleteMap:l}=xz(),[c,u]=_.useState({name:"",location:"",description:"",video_url:"",type:""}),[h,m]=_.useState(!1),[g,v]=_.useState(null),y=()=>u({name:"",location:"",description:"",video_url:"",type:""}),b=async S=>{if(S.preventDefault(),!!c.name.trim()){m(!0);try{g?await s(g,c):await r(c),y(),v(null)}catch(E){console.error("Error saving map:",E),alert("Failed to save map")}finally{m(!1)}}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vu,{className:"h-6 w-6 text-blue-600"}),a.jsx("h1",{className:"text-3xl font-bold",children:"Maps"})]}),a.jsxs(xe,{children:[a.jsx(Ge,{children:a.jsx(Xe,{children:"Add Map"})}),a.jsx(we,{children:a.jsxs("form",{onSubmit:b,className:"grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{children:"Name"}),a.jsx(je,{value:c.name,onChange:S=>u(E=>({...E,name:S.target.value})),placeholder:"Map name",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{children:"Location"}),a.jsx(je,{value:c.location,onChange:S=>u(E=>({...E,location:S.target.value})),placeholder:"Location"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-3",children:[a.jsx(Re,{children:"Description"}),a.jsx("textarea",{value:c.description,onChange:S=>u(E=>({...E,description:S.target.value})),placeholder:"Short description",className:"w-full border rounded px-3 py-2",rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{children:"Type"}),a.jsxs("select",{className:"w-full border rounded px-3 py-2",value:c.type,onChange:S=>u(E=>({...E,type:S.target.value})),children:[a.jsx("option",{value:"",children:"Select type"}),a.jsx("option",{value:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©",children:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©"}),a.jsx("option",{value:"Ù„Ø§Ø¨Ø§Øª",children:"Ù„Ø§Ø¨Ø§Øª"}),a.jsx("option",{value:"Ù…Ø¯Ø±Ø¬",children:"Ù…Ø¯Ø±Ø¬"}),a.jsx("option",{value:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª",children:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª"}),a.jsx("option",{value:"Ù…Ø·Ø¹Ù…",children:"Ù…Ø·Ø¹Ù…"}),a.jsx("option",{value:"Ù…ØµÙ„Ù‰",children:"Ù…ØµÙ„Ù‰"}),a.jsx("option",{value:"Ø£Ø®Ø±Ù‰",children:"Ø£Ø®Ø±Ù‰"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{children:"Video URL"}),a.jsx(je,{value:c.video_url,onChange:S=>u(E=>({...E,video_url:S.target.value})),placeholder:"https://..."})]}),a.jsx("div",{className:"md:col-span-3 flex justify-end space-x-2",children:g?a.jsxs(a.Fragment,{children:[a.jsx(te,{type:"button",variant:"outline",onClick:()=>{v(null),y()},children:"Cancel"}),a.jsxs(te,{type:"submit",disabled:h,children:[a.jsx(Xt,{className:"h-4 w-4 mr-2"}),h?"Saving...":"Save"]})]}):a.jsxs(te,{type:"submit",disabled:h,children:[a.jsx(Xt,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add"]})})]})})]}),a.jsxs(xe,{children:[a.jsx(Ge,{children:a.jsxs(Xe,{children:["All Maps (",n.length,")"]})}),a.jsx(we,{children:e?a.jsx("div",{children:"Loading..."}):t?a.jsx("div",{className:"text-destructive",children:t}):n.length===0?a.jsx("div",{className:"text-muted-foreground",children:"No maps yet."}):a.jsx("div",{className:"grid gap-3",children:n.map(S=>a.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-medium truncate",children:S.name}),a.jsx("div",{className:"text-xs text-muted-foreground truncate",children:S.location}),S.type&&a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",a.jsx("span",{className:"font-medium",children:S.type})]}),S.description&&a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:S.description}),S.video_url&&a.jsx("a",{className:"text-xs text-blue-600 hover:underline",href:S.video_url,target:"_blank",rel:"noreferrer",children:S.video_url})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{v(S.id),u({name:S.name||"",location:S.location||"",description:S.description||"",video_url:S.video_url||"",type:S.type||""}),window.scrollTo({top:0,behavior:"smooth"})},className:"",children:"Edit"}),a.jsx(te,{variant:"ghost",size:"icon",onClick:()=>l(S.id),className:"text-destructive",children:a.jsx(Ln,{className:"h-4 w-4"})})]})]},S.id))})})]})]})}function _z({research:n,onClose:e,onSave:t}){const[r,s]=_.useState({projectTitle:"",abstract:"",fieldOfResearch:[],contactPerson:[],authorshipPosition:[],projectDuration:"",requiredSkills:[],supervisor:""}),[l,c]=_.useState(""),[u,h]=_.useState("");_.useEffect(()=>{n&&s({projectTitle:n.projectTitle||"",abstract:n.abstract||"",fieldOfResearch:n.fieldOfResearch||[],contactPerson:n.contactPerson||[],authorshipPosition:n.authorshipPosition||[],projectDuration:n.projectDuration||"",requiredSkills:n.requiredSkills||[],supervisor:n.supervisor||""})},[n]);const m=()=>{const S=l.trim();S&&(r.fieldOfResearch.includes(S)||s(E=>({...E,fieldOfResearch:[...E.fieldOfResearch,S]})),c(""))},g=()=>{const S=u.trim();S&&(r.requiredSkills.includes(S)||s(E=>({...E,requiredSkills:[...E.requiredSkills,S]})),h(""))},v=S=>s(E=>({...E,fieldOfResearch:E.fieldOfResearch.filter(x=>x!==S)})),y=S=>s(E=>({...E,requiredSkills:E.requiredSkills.filter(x=>x!==S)})),b=S=>{S.preventDefault();const E={projectTitle:r.projectTitle,abstract:r.abstract,fieldOfResearch:r.fieldOfResearch,contactPerson:r.contactPerson,authorshipPosition:r.authorshipPosition,projectDuration:r.projectDuration,requiredSkills:r.requiredSkills,supervisor:r.supervisor,updatedAt:new Date,...n?{}:{createdAt:new Date}};t(E)};return a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(te,{variant:"ghost",onClick:e,children:[a.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Research":"Create Research"}),a.jsx("p",{className:"text-muted-foreground",children:"Add or update research project details"})]})]})}),a.jsx("form",{onSubmit:b,className:"space-y-6",children:a.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Project Details"}),a.jsx(jt,{children:"Title and abstract"})]}),a.jsxs(we,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"title",children:"Project Title *"}),a.jsx(je,{id:"title",placeholder:"Enter project title...",value:r.projectTitle,onChange:S=>s(E=>({...E,projectTitle:S.target.value})),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{htmlFor:"abstract",children:"Abstract"}),a.jsx(Oi,{id:"abstract",placeholder:"Write a brief abstract...",value:r.abstract,onChange:S=>s(E=>({...E,abstract:S.target.value})),rows:8})]})]})]}),a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Fields & Skills"}),a.jsx(jt,{children:"Fields of research and required skills"})]}),a.jsxs(we,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(Re,{children:"Field of Research"}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsx(je,{placeholder:"Add field e.g., Oncology",value:l,onChange:S=>c(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),m())}}),a.jsx(te,{type:"button",onClick:m,variant:"outline",children:"Add"})]}),a.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.fieldOfResearch.map(S=>a.jsxs(rn,{variant:"secondary",className:"flex items-center gap-2",children:[S,a.jsx("button",{type:"button",onClick:()=>v(S),className:"ml-1 hover:text-destructive",children:a.jsx(ac,{className:"h-3 w-3"})})]},S))})]}),a.jsxs("div",{children:[a.jsx(Re,{children:"Required Skills"}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsx(je,{placeholder:"Add skill e.g., Data analysis",value:u,onChange:S=>h(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),g())}}),a.jsx(te,{type:"button",onClick:g,variant:"outline",children:"Add"})]}),a.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.requiredSkills.map(S=>a.jsxs(rn,{variant:"secondary",className:"flex items-center gap-2",children:[S,a.jsx("button",{type:"button",onClick:()=>y(S),className:"ml-1 hover:text-destructive",children:a.jsx(ac,{className:"h-3 w-3"})})]},S))})]})]})]})]}),a.jsx("div",{className:"space-y-6",children:a.jsxs(xe,{children:[a.jsxs(Ge,{children:[a.jsx(Xe,{children:"Meta"}),a.jsx(jt,{children:"Contact, supervisor and duration"})]}),a.jsxs(we,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{children:"Contact Person(s)"}),a.jsx(je,{placeholder:"Comma separated names",value:r.contactPerson.join(", "),onChange:S=>s(E=>({...E,contactPerson:S.target.value.split(",").map(x=>x.trim()).filter(Boolean)}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{children:"Authorship Positions"}),a.jsx(je,{placeholder:"Comma separated positions",value:r.authorshipPosition.join(", "),onChange:S=>s(E=>({...E,authorshipPosition:S.target.value.split(",").map(x=>x.trim()).filter(Boolean)}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{children:"Supervisor"}),a.jsx(je,{placeholder:"Supervisor name",value:r.supervisor,onChange:S=>s(E=>({...E,supervisor:S.target.value}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Re,{children:"Project Duration"}),a.jsx(je,{placeholder:"e.g., 6 months",value:r.projectDuration,onChange:S=>s(E=>({...E,projectDuration:S.target.value}))})]}),a.jsxs("div",{className:"flex justify-end",children:[a.jsx(te,{variant:"ghost",onClick:e,className:"mr-2",children:"Cancel"}),a.jsx(te,{type:"submit",children:"Save"})]})]})]})})]})})]})}const Ez=[{id:"r1",projectTitle:"Impact of Early Clinical Exposure on Medical Students",abstract:"A study investigating how early clinical exposure affects students' clinical reasoning and confidence.",fieldOfResearch:["Medical Education","Clinical Skills"],contactPerson:["Dr. Sarah Johnson"],authorshipPosition:["Lead","Co-author"],projectDuration:"6 months",requiredSkills:["Clinical observation","Data analysis"],supervisor:"Prof. Michael Chen",createdAt:new Date,updatedAt:new Date}];function bz(){const[n,e]=_.useState([]),[t,r]=_.useState(!0),[s,l]=_.useState(null),[c,u]=_.useState(!1);_.useEffect(()=>{const v=async()=>{try{const b=_r(st($e,"research"));await Pt(b);const S=_r(st($e,"research"),Ed("createdAt","desc"));return Zo(S,x=>{const j=[];x.forEach(I=>{var O,U;const C=I.data();j.push({id:I.id,projectTitle:C.projectTitle||C.title||"",abstract:C.abstract||"",fieldOfResearch:C.fieldOfResearch||[],contactPerson:C.contactPerson||[],authorshipPosition:C.authorshipPosition||[],projectDuration:C.projectDuration||"",requiredSkills:C.requiredSkills||[],supervisor:C.supervisor||"",createdAt:(O=C.createdAt)!=null&&O.toDate?C.createdAt.toDate():C.createdAt||new Date,updatedAt:(U=C.updatedAt)!=null&&U.toDate?C.updatedAt.toDate():C.updatedAt||new Date})}),e(j),r(!1)},x=>{console.error("Error in research listener:",x),y()})}catch(b){return console.error("Firebase connection failed for research:",b),y(),null}},y=()=>{u(!0),e(Ez),l(null),r(!1)};v()},[]);const h=async v=>{if(c){const y={id:`offline_${Date.now()}`,...v};e(b=>[y,...b]);return}try{await wn(st($e,"research"),v)}catch(y){console.error("Error creating research:",y),u(!0),await h(v)}};return{research:n,loading:t,error:s,createResearch:h,updateResearch:async(v,y)=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(b=>b.map(S=>S.id===v?{...S,...y}:S));return}try{await an(Rt($e,"research",v),y)}catch(b){console.error("Error updating research:",b),e(S=>S.map(E=>E.id===v?{...E,...y}:E))}},deleteResearch:async v=>{if(c||v.startsWith("offline_")||v.startsWith("mock_")){e(y=>y.filter(b=>b.id!==v));return}try{await Rr(Rt($e,"research",v))}catch(y){console.error("Error deleting research:",y),e(b=>b.filter(S=>S.id!==v))}},isOfflineMode:c}}function Sz(){const[n,e]=_.useState(""),[t,r]=_.useState(null),[s,l]=_.useState(!1),{research:c,loading:u,error:h,createResearch:m,updateResearch:g,deleteResearch:v}=bz(),y=c.filter(x=>x.projectTitle.toLowerCase().includes(n.toLowerCase())),b=()=>{r(null),l(!0)},S=x=>{r(x),l(!0)},E=async x=>{window.confirm("Are you sure you want to delete this research entry?")&&await v(x)};return s?a.jsx(_z,{research:t,onClose:()=>{l(!1),r(null)},onSave:async x=>{try{t?await g(t.id,x):await m(x),l(!1),r(null)}catch(j){console.error(j),alert("Failed to save. Please try again.")}}}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Research"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage research projects and student/faculty submissions"})]}),a.jsxs(te,{onClick:b,className:"flex items-center gap-2",children:[a.jsx(Xt,{className:"h-4 w-4"}),"Create Research"]})]}),a.jsx(xe,{children:a.jsx(we,{className:"pt-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(wc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(je,{placeholder:"Search by project title...",value:n,onChange:x=>e(x.target.value),className:"pl-10"})]})})}),u&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx(Mo,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading research entries..."})]})}),h&&a.jsx(xe,{children:a.jsxs(we,{className:"text-center py-12",children:[a.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading research"}),a.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&a.jsx("div",{className:"space-y-4",children:y.map(x=>a.jsx(xe,{className:"hover:shadow-md transition-shadow",children:a.jsx(we,{className:"pt-6",children:a.jsx("div",{className:"flex gap-4",children:a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:x.projectTitle}),a.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mt-2",children:x.abstract}),a.jsx("div",{className:"flex gap-2 flex-wrap mt-3 text-xs text-muted-foreground",children:(x.fieldOfResearch||[]).map(j=>a.jsx("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:j},j))})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[a.jsx(te,{variant:"ghost",onClick:()=>S(x),children:a.jsx(Ni,{className:"h-4 w-4"})}),a.jsx(te,{variant:"ghost",onClick:()=>E(x.id),children:a.jsx(Ln,{className:"h-4 w-4"})})]})]})})})})},x.id))})]})}const Nz=()=>{const n=Fi();return _.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),a.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Tz=new eO;function Cz({children:n}){const{currentUser:e}=Ix();return e?a.jsx(a.Fragment,{children:n}):a.jsx(cf,{to:"/login"})}const Jb=()=>a.jsx(Y6,{children:a.jsx(nO,{client:Tz,children:a.jsxs(AD,{children:[a.jsx(pk,{}),a.jsx(Hk,{}),a.jsx(nL,{basename:"/builder-stellar-world/",children:a.jsx(K6,{children:a.jsxs(KO,{children:[a.jsx(zt,{path:"/login",element:a.jsx(a5,{})}),a.jsxs(zt,{path:"/admin",element:a.jsx(Cz,{children:a.jsx(n5,{})}),children:[a.jsx(zt,{index:!0,element:a.jsx(d5,{})}),a.jsx(zt,{path:"news",element:a.jsx(y5,{})}),a.jsx(zt,{path:"years",element:a.jsx(j9,{})}),a.jsx(zt,{path:"years/:id",element:a.jsx(A9,{})}),a.jsx(zt,{path:"subjects/:id",element:a.jsx(F9,{})}),a.jsx(zt,{path:"resources",element:a.jsx(Qb,{})}),a.jsx(zt,{path:"resources/*",element:a.jsx(Qb,{})}),a.jsx(zt,{path:"VIDEOS",element:a.jsx(cf,{to:"/admin/years",replace:!0})}),a.jsx(zt,{path:"VIDEOS/*",element:a.jsx(cf,{to:"/admin/years",replace:!0})}),a.jsx(zt,{path:"professors",element:a.jsx(R9,{})}),a.jsx(zt,{path:"users",element:a.jsx(O9,{})}),a.jsx(zt,{path:"store",element:a.jsx(nz,{})}),a.jsx(zt,{path:"orders",element:a.jsx(sz,{})}),a.jsx(zt,{path:"videos",element:a.jsx(az,{})}),a.jsx(zt,{path:"files",element:a.jsx(lz,{})}),a.jsx(zt,{path:"quizzes",element:a.jsx(cz,{})}),a.jsx(zt,{path:"flashcards",element:a.jsx(vz,{})}),a.jsx(zt,{path:"research",element:a.jsx(Sz,{})}),a.jsx(zt,{path:"maps",element:a.jsx(wz,{})}),a.jsx(zt,{path:"settings",element:a.jsx(yz,{})})]}),a.jsx(zt,{path:"/",element:a.jsx(cf,{to:"/admin"})}),a.jsx(zt,{path:"*",element:a.jsx(Nz,{})})]})})})]})})}),Iz=document.getElementById("root");if(window.__appRoot)window.__appRoot.render(a.jsx(Jb,{}));else{const n=vk.createRoot(Iz);window.__appRoot=n,n.render(a.jsx(Jb,{}))}
