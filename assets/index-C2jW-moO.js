var XP=Object.defineProperty;var R_=n=>{throw TypeError(n)};var JP=(n,e,t)=>e in n?XP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var k_=(n,e,t)=>JP(n,typeof e!="symbol"?e+"":e,t),Mg=(n,e,t)=>e.has(n)||R_("Cannot "+t);var X=(n,e,t)=>(Mg(n,e,"read from private field"),t?t.call(n):e.get(n)),Ye=(n,e,t)=>e.has(n)?R_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Re=(n,e,t,r)=>(Mg(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),mt=(n,e,t)=>(Mg(n,e,"access private method"),t);var sf=(n,e,t,r)=>({set _(s){Re(n,e,s,t)},get _(){return X(n,e,r)}});function ZP(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function H1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Fg={exports:{}},ku={},Vg={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function eR(){if(O_)return ct;O_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=y&&B[y]||B["@@iterator"],typeof B=="function"?B:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function _(B,Z,he){this.props=B,this.context=Z,this.refs=w,this.updater=he||b}_.prototype.isReactComponent={},_.prototype.setState=function(B,Z){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Z,"setState")},_.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function A(){}A.prototype=_.prototype;function I(B,Z,he){this.props=B,this.context=Z,this.refs=w,this.updater=he||b}var C=I.prototype=new A;C.constructor=I,S(C,_.prototype),C.isPureReactComponent=!0;var L=Array.isArray,U=Object.prototype.hasOwnProperty,z={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function k(B,Z,he){var Ce,Fe={},Ne=null,xe=null;if(Z!=null)for(Ce in Z.ref!==void 0&&(xe=Z.ref),Z.key!==void 0&&(Ne=""+Z.key),Z)U.call(Z,Ce)&&!R.hasOwnProperty(Ce)&&(Fe[Ce]=Z[Ce]);var Se=arguments.length-2;if(Se===1)Fe.children=he;else if(1<Se){for(var ze=Array(Se),Me=0;Me<Se;Me++)ze[Me]=arguments[Me+2];Fe.children=ze}if(B&&B.defaultProps)for(Ce in Se=B.defaultProps,Se)Fe[Ce]===void 0&&(Fe[Ce]=Se[Ce]);return{$$typeof:n,type:B,key:Ne,ref:xe,props:Fe,_owner:z.current}}function D(B,Z){return{$$typeof:n,type:B.type,key:Z,ref:B.ref,props:B.props,_owner:B._owner}}function O(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function M(B){var Z={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(he){return Z[he]})}var V=/\/+/g;function P(B,Z){return typeof B=="object"&&B!==null&&B.key!=null?M(""+B.key):Z.toString(36)}function H(B,Z,he,Ce,Fe){var Ne=typeof B;(Ne==="undefined"||Ne==="boolean")&&(B=null);var xe=!1;if(B===null)xe=!0;else switch(Ne){case"string":case"number":xe=!0;break;case"object":switch(B.$$typeof){case n:case e:xe=!0}}if(xe)return xe=B,Fe=Fe(xe),B=Ce===""?"."+P(xe,0):Ce,L(Fe)?(he="",B!=null&&(he=B.replace(V,"$&/")+"/"),H(Fe,Z,he,"",function(Me){return Me})):Fe!=null&&(O(Fe)&&(Fe=D(Fe,he+(!Fe.key||xe&&xe.key===Fe.key?"":(""+Fe.key).replace(V,"$&/")+"/")+B)),Z.push(Fe)),1;if(xe=0,Ce=Ce===""?".":Ce+":",L(B))for(var Se=0;Se<B.length;Se++){Ne=B[Se];var ze=Ce+P(Ne,Se);xe+=H(Ne,Z,he,ze,Fe)}else if(ze=v(B),typeof ze=="function")for(B=ze.call(B),Se=0;!(Ne=B.next()).done;)Ne=Ne.value,ze=Ce+P(Ne,Se++),xe+=H(Ne,Z,he,ze,Fe);else if(Ne==="object")throw Z=String(B),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return xe}function q(B,Z,he){if(B==null)return B;var Ce=[],Fe=0;return H(B,Ce,"","",function(Ne){return Z.call(he,Ne,Fe++)}),Ce}function K(B){if(B._status===-1){var Z=B._result;Z=Z(),Z.then(function(he){(B._status===0||B._status===-1)&&(B._status=1,B._result=he)},function(he){(B._status===0||B._status===-1)&&(B._status=2,B._result=he)}),B._status===-1&&(B._status=0,B._result=Z)}if(B._status===1)return B._result.default;throw B._result}var te={current:null},Q={transition:null},oe={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:Q,ReactCurrentOwner:z};function le(){throw Error("act(...) is not supported in production builds of React.")}return ct.Children={map:q,forEach:function(B,Z,he){q(B,function(){Z.apply(this,arguments)},he)},count:function(B){var Z=0;return q(B,function(){Z++}),Z},toArray:function(B){return q(B,function(Z){return Z})||[]},only:function(B){if(!O(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},ct.Component=_,ct.Fragment=t,ct.Profiler=s,ct.PureComponent=I,ct.StrictMode=r,ct.Suspense=h,ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,ct.act=le,ct.cloneElement=function(B,Z,he){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Ce=S({},B.props),Fe=B.key,Ne=B.ref,xe=B._owner;if(Z!=null){if(Z.ref!==void 0&&(Ne=Z.ref,xe=z.current),Z.key!==void 0&&(Fe=""+Z.key),B.type&&B.type.defaultProps)var Se=B.type.defaultProps;for(ze in Z)U.call(Z,ze)&&!R.hasOwnProperty(ze)&&(Ce[ze]=Z[ze]===void 0&&Se!==void 0?Se[ze]:Z[ze])}var ze=arguments.length-2;if(ze===1)Ce.children=he;else if(1<ze){Se=Array(ze);for(var Me=0;Me<ze;Me++)Se[Me]=arguments[Me+2];Ce.children=Se}return{$$typeof:n,type:B.type,key:Fe,ref:Ne,props:Ce,_owner:xe}},ct.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},ct.createElement=k,ct.createFactory=function(B){var Z=k.bind(null,B);return Z.type=B,Z},ct.createRef=function(){return{current:null}},ct.forwardRef=function(B){return{$$typeof:u,render:B}},ct.isValidElement=O,ct.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:K}},ct.memo=function(B,Z){return{$$typeof:p,type:B,compare:Z===void 0?null:Z}},ct.startTransition=function(B){var Z=Q.transition;Q.transition={};try{B()}finally{Q.transition=Z}},ct.unstable_act=le,ct.useCallback=function(B,Z){return te.current.useCallback(B,Z)},ct.useContext=function(B){return te.current.useContext(B)},ct.useDebugValue=function(){},ct.useDeferredValue=function(B){return te.current.useDeferredValue(B)},ct.useEffect=function(B,Z){return te.current.useEffect(B,Z)},ct.useId=function(){return te.current.useId()},ct.useImperativeHandle=function(B,Z,he){return te.current.useImperativeHandle(B,Z,he)},ct.useInsertionEffect=function(B,Z){return te.current.useInsertionEffect(B,Z)},ct.useLayoutEffect=function(B,Z){return te.current.useLayoutEffect(B,Z)},ct.useMemo=function(B,Z){return te.current.useMemo(B,Z)},ct.useReducer=function(B,Z,he){return te.current.useReducer(B,Z,he)},ct.useRef=function(B){return te.current.useRef(B)},ct.useState=function(B){return te.current.useState(B)},ct.useSyncExternalStore=function(B,Z,he){return te.current.useSyncExternalStore(B,Z,he)},ct.useTransition=function(){return te.current.useTransition()},ct.version="18.3.1",ct}var D_;function Vv(){return D_||(D_=1,Vg.exports=eR()),Vg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function tR(){if(L_)return ku;L_=1;var n=Vv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,p){var g,y={},v=null,b=null;p!==void 0&&(v=""+p),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(b=h.ref);for(g in h)r.call(h,g)&&!a.hasOwnProperty(g)&&(y[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:u,key:v,ref:b,props:y,_owner:s.current}}return ku.Fragment=t,ku.jsx=c,ku.jsxs=c,ku}var M_;function nR(){return M_||(M_=1,Fg.exports=tR()),Fg.exports}var l=nR();let $f=!1,rR=[],qu=0;const F_=3,Lc=n=>{$f!==n&&($f=n,console.log(`ðŸ”„ Firebase mode changed: ${n?"OFFLINE":"ONLINE"}`),rR.forEach(e=>e()))},V_=n=>{qu++,console.log(`ðŸš¨ Firebase error ${qu}/${F_}:`,n.message),qu>=F_&&(console.log("ðŸ”„ Too many Firebase errors - switching to global offline mode"),Lc(!0))};if(!window.fetch.__firebasePatched){const n=window.fetch,e=(...t)=>{var a;const r=typeof t[0]=="string"?t[0]:(a=t[0])==null?void 0:a.url;if(!(!!r&&(r.includes("firestore.googleapis.com")||r.includes("firebase.googleapis.com")||r.includes("identitytoolkit.googleapis.com"))))try{return n(...t)}catch(c){return Promise.reject(c)}if($f){const c=new Error("Firebase offline mode - request blocked");return c.isFirebaseOfflineError=!0,Promise.reject(c)}try{const c=n(...t);return Promise.resolve(c).then(u=>(u.ok&&(qu=0,$f&&(console.log("ðŸŸ¢ Firebase connection restored"),Lc(!1))),u)).catch(u=>{console.log("ðŸ”´ Firebase request failed:",(u==null?void 0:u.message)||String(u));const h=String(u&&(u.stack||"")||""),p=String((u==null?void 0:u.message)||u||"").toLowerCase();throw!(h.includes("chrome-extension://")||h.includes("extension://")||p.includes("extension"))&&navigator.onLine&&V_(u),u})}catch(c){console.log("ðŸ”´ Firebase request threw synchronously:",(c==null?void 0:c.message)||String(c));const u=String(c&&(c.stack||"")||""),h=String((c==null?void 0:c.message)||c||"").toLowerCase();return!(u.includes("chrome-extension://")||u.includes("extension://")||h.includes("extension"))&&navigator.onLine&&V_(c),Promise.reject(c)}};e.__firebasePatched=!0,window.fetch=e}console.log("ðŸ”„ Initializing Firebase monitoring...");navigator.onLine||(console.log("ðŸš« No internet connection - starting in offline mode"),Lc(!0));window.addEventListener("online",()=>{console.log("ðŸŸ¢ Internet connection restored"),qu=0,Lc(!1)});window.addEventListener("offline",()=>{console.log("ðŸ”´ Internet connection lost"),Lc(!0)});console.log("ðŸ”„ Starting Firebase monitoring in ONLINE mode");window.addEventListener("unhandledrejection",n=>{var r;const e=String(((r=n==null?void 0:n.reason)==null?void 0:r.message)||(n==null?void 0:n.reason)||""),t=String((n==null?void 0:n.reason)&&(n.reason.stack||"")||"");if((e.includes("Failed to fetch")||e.toLowerCase().includes("extension"))&&(t.includes("chrome-extension://")||t.includes("extension://")||t.includes("fullstory.com"))){n.preventDefault();return}if(t.includes("chrome-extension://")||t.includes("extension://")){n.preventDefault();return}});const sR=console.error,iR=console.warn,oR=console.log;console.error=(...n)=>{const e=n.map(s=>s&&typeof s=="object"?String(s):s).join(" "),t=n.some(s=>s&&typeof s=="object"&&s.stack&&s.stack.includes("chrome-extension://"));["Firebase offline mode - request blocked","FirebaseError: [code=unavailable]","Could not reach Cloud Firestore backend","Connection failed","The operation could not be completed","device does not have a healthy Internet connection","client will operate in offline mode","Most recent error: FirebaseError","@firebase/firestore: Firestore","fullstory.com","TypeError: Failed to fetch"].some(s=>e.includes(s))||t||e.includes("chrome-extension://")||e.includes("extension://")||sR.apply(console,n)};console.warn=(...n)=>{const e=n.join(" ");e.includes("Firebase")&&e.includes("offline")||iR.apply(console,n)};console.log=(...n)=>{const e=n.join(" ");e.includes("@firebase/firestore")&&e.includes("offline")||oR.apply(console,n)};setTimeout(()=>{navigator.onLine?console.log("ðŸŒ Internet available - Firebase enabled and ready"):(console.log("ðŸš« No internet connection detected - switching to offline mode"),Lc(!0))},100);var E=Vv();const _e=H1(E),K1=ZP({__proto__:null,default:_e},[E]),aR=1,lR=1e6;let Ug=0;function cR(){return Ug=(Ug+1)%Number.MAX_SAFE_INTEGER,Ug.toString()}const $g=new Map,U_=n=>{if($g.has(n))return;const e=setTimeout(()=>{$g.delete(n),Wu({type:"REMOVE_TOAST",toastId:n})},lR);$g.set(n,e)},uR=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,aR)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?U_(t):n.toasts.forEach(r=>{U_(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Cf=[];let If={toasts:[]};function Wu(n){If=uR(If,n),Cf.forEach(e=>{e(If)})}function dR({...n}){const e=cR(),t=s=>Wu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Wu({type:"DISMISS_TOAST",toastId:e});return Wu({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function hR(){const[n,e]=E.useState(If);return E.useEffect(()=>(Cf.push(e),()=>{const t=Cf.indexOf(e);t>-1&&Cf.splice(t,1)}),[n]),{...n,toast:dR,dismiss:t=>Wu({type:"DISMISS_TOAST",toastId:t})}}var zg={exports:{}},mr={},Bg={exports:{}},qg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function fR(){return $_||($_=1,function(n){function e(Q,oe){var le=Q.length;Q.push(oe);e:for(;0<le;){var B=le-1>>>1,Z=Q[B];if(0<s(Z,oe))Q[B]=oe,Q[le]=Z,le=B;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var oe=Q[0],le=Q.pop();if(le!==oe){Q[0]=le;e:for(var B=0,Z=Q.length,he=Z>>>1;B<he;){var Ce=2*(B+1)-1,Fe=Q[Ce],Ne=Ce+1,xe=Q[Ne];if(0>s(Fe,le))Ne<Z&&0>s(xe,Fe)?(Q[B]=xe,Q[Ne]=le,B=Ne):(Q[B]=Fe,Q[Ce]=le,B=Ce);else if(Ne<Z&&0>s(xe,le))Q[B]=xe,Q[Ne]=le,B=Ne;else break e}}return oe}function s(Q,oe){var le=Q.sortIndex-oe.sortIndex;return le!==0?le:Q.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var h=[],p=[],g=1,y=null,v=3,b=!1,S=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Q){for(var oe=t(p);oe!==null;){if(oe.callback===null)r(p);else if(oe.startTime<=Q)r(p),oe.sortIndex=oe.expirationTime,e(h,oe);else break;oe=t(p)}}function L(Q){if(w=!1,C(Q),!S)if(t(h)!==null)S=!0,K(U);else{var oe=t(p);oe!==null&&te(L,oe.startTime-Q)}}function U(Q,oe){S=!1,w&&(w=!1,A(k),k=-1),b=!0;var le=v;try{for(C(oe),y=t(h);y!==null&&(!(y.expirationTime>oe)||Q&&!M());){var B=y.callback;if(typeof B=="function"){y.callback=null,v=y.priorityLevel;var Z=B(y.expirationTime<=oe);oe=n.unstable_now(),typeof Z=="function"?y.callback=Z:y===t(h)&&r(h),C(oe)}else r(h);y=t(h)}if(y!==null)var he=!0;else{var Ce=t(p);Ce!==null&&te(L,Ce.startTime-oe),he=!1}return he}finally{y=null,v=le,b=!1}}var z=!1,R=null,k=-1,D=5,O=-1;function M(){return!(n.unstable_now()-O<D)}function V(){if(R!==null){var Q=n.unstable_now();O=Q;var oe=!0;try{oe=R(!0,Q)}finally{oe?P():(z=!1,R=null)}}else z=!1}var P;if(typeof I=="function")P=function(){I(V)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,q=H.port2;H.port1.onmessage=V,P=function(){q.postMessage(null)}}else P=function(){_(V,0)};function K(Q){R=Q,z||(z=!0,P())}function te(Q,oe){k=_(function(){Q(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,K(U))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var oe=3;break;default:oe=v}var le=v;v=oe;try{return Q()}finally{v=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,oe){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var le=v;v=Q;try{return oe()}finally{v=le}},n.unstable_scheduleCallback=function(Q,oe,le){var B=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?B+le:B):le=B,Q){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=le+Z,Q={id:g++,callback:oe,priorityLevel:Q,startTime:le,expirationTime:Z,sortIndex:-1},le>B?(Q.sortIndex=le,e(p,Q),t(h)===null&&Q===t(p)&&(w?(A(k),k=-1):w=!0,te(L,le-B))):(Q.sortIndex=Z,e(h,Q),S||b||(S=!0,K(U))),Q},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(Q){var oe=v;return function(){var le=v;v=oe;try{return Q.apply(this,arguments)}finally{v=le}}}}(qg)),qg}var z_;function pR(){return z_||(z_=1,Bg.exports=fR()),Bg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function mR(){if(B_)return mr;B_=1;var n=Vv(),e=pR();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){c(i,o),c(i+"Capture",o)}function c(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(i){return h.call(y,i)?!0:h.call(g,i)?!1:p.test(i)?y[i]=!0:(g[i]=!0,!1)}function b(i,o,d,m){if(d!==null&&d.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function S(i,o,d,m){if(o===null||typeof o>"u"||b(i,o,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function w(i,o,d,m,x,T,F){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=m,this.attributeNamespace=x,this.mustUseProperty=d,this.propertyName=i,this.type=o,this.sanitizeURL=T,this.removeEmptyString=F}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){_[i]=new w(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];_[o]=new w(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){_[i]=new w(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){_[i]=new w(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){_[i]=new w(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){_[i]=new w(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){_[i]=new w(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){_[i]=new w(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){_[i]=new w(i,5,!1,i.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function I(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(A,I);_[o]=new w(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(A,I);_[o]=new w(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(A,I);_[o]=new w(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){_[i]=new w(i,1,!1,i.toLowerCase(),null,!1,!1)}),_.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){_[i]=new w(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,o,d,m){var x=_.hasOwnProperty(o)?_[o]:null;(x!==null?x.type!==0:m||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,d,x,m)&&(d=null),m||x===null?v(o)&&(d===null?i.removeAttribute(o):i.setAttribute(o,""+d)):x.mustUseProperty?i[x.propertyName]=d===null?x.type===3?!1:"":d:(o=x.attributeName,m=x.attributeNamespace,d===null?i.removeAttribute(o):(x=x.type,d=x===3||x===4&&d===!0?"":""+d,m?i.setAttributeNS(m,o,d):i.setAttribute(o,d))))}var L=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),z=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),M=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),Q=Symbol.iterator;function oe(i){return i===null||typeof i!="object"?null:(i=Q&&i[Q]||i["@@iterator"],typeof i=="function"?i:null)}var le=Object.assign,B;function Z(i){if(B===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+i}var he=!1;function Ce(i,o){if(!i||he)return"";he=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(ie){var m=ie}Reflect.construct(i,[],o)}else{try{o.call()}catch(ie){m=ie}i.call(o.prototype)}else{try{throw Error()}catch(ie){m=ie}i()}}catch(ie){if(ie&&m&&typeof ie.stack=="string"){for(var x=ie.stack.split(`
`),T=m.stack.split(`
`),F=x.length-1,W=T.length-1;1<=F&&0<=W&&x[F]!==T[W];)W--;for(;1<=F&&0<=W;F--,W--)if(x[F]!==T[W]){if(F!==1||W!==1)do if(F--,W--,0>W||x[F]!==T[W]){var G=`
`+x[F].replace(" at new "," at ");return i.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",i.displayName)),G}while(1<=F&&0<=W);break}}}finally{he=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?Z(i):""}function Fe(i){switch(i.tag){case 5:return Z(i.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return i=Ce(i.type,!1),i;case 11:return i=Ce(i.type.render,!1),i;case 1:return i=Ce(i.type,!0),i;default:return""}}function Ne(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case R:return"Fragment";case z:return"Portal";case D:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case H:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case O:return(i._context.displayName||"Context")+".Provider";case V:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case q:return o=i.displayName||null,o!==null?o:Ne(i.type)||"Memo";case K:o=i._payload,i=i._init;try{return Ne(i(o))}catch{}}return null}function xe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(o);case 8:return o===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Se(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ze(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Me(i){var o=ze(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),m=""+i[o];if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var x=d.get,T=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return x.call(this)},set:function(F){m=""+F,T.call(this,F)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(F){m=""+F},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function rt(i){i._valueTracker||(i._valueTracker=Me(i))}function st(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var d=o.getValue(),m="";return i&&(m=ze(i)?i.checked?"true":"false":i.value),i=m,i!==d?(o.setValue(i),!0):!1}function Nt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ot(i,o){var d=o.checked;return le({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function Tn(i,o){var d=o.defaultValue==null?"":o.defaultValue,m=o.checked!=null?o.checked:o.defaultChecked;d=Se(o.value!=null?o.value:d),i._wrapperState={initialChecked:m,initialValue:d,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function nn(i,o){o=o.checked,o!=null&&C(i,"checked",o,!1)}function $n(i,o){nn(i,o);var d=Se(o.value),m=o.type;if(d!=null)m==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Pt(i,o.type,d):o.hasOwnProperty("defaultValue")&&Pt(i,o.type,Se(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function br(i,o,d){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var m=o.type;if(!(m!=="submit"&&m!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,d||o===i.value||(i.value=o),i.defaultValue=o}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function Pt(i,o,d){(o!=="number"||Nt(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var un=Array.isArray;function Sr(i,o,d,m){if(i=i.options,o){o={};for(var x=0;x<d.length;x++)o["$"+d[x]]=!0;for(d=0;d<i.length;d++)x=o.hasOwnProperty("$"+i[d].value),i[d].selected!==x&&(i[d].selected=x),x&&m&&(i[d].defaultSelected=!0)}else{for(d=""+Se(d),o=null,x=0;x<i.length;x++){if(i[x].value===d){i[x].selected=!0,m&&(i[x].defaultSelected=!0);return}o!==null||i[x].disabled||(o=i[x])}o!==null&&(o.selected=!0)}}function Xr(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function an(i,o){var d=o.value;if(d==null){if(d=o.children,o=o.defaultValue,d!=null){if(o!=null)throw Error(t(92));if(un(d)){if(1<d.length)throw Error(t(93));d=d[0]}o=d}o==null&&(o=""),d=o}i._wrapperState={initialValue:Se(d)}}function Ns(i,o){var d=Se(o.value),m=Se(o.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),o.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),m!=null&&(i.defaultValue=""+m)}function Ts(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Vt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Vt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var zn,xn=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,d,m,x){MSApp.execUnsafeLocalFunction(function(){return i(o,d,m,x)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(zn=zn||document.createElement("div"),zn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=zn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Nr(i,o){if(o){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=o;return}}i.textContent=o}var Jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fr=["Webkit","ms","Moz","O"];Object.keys(Jr).forEach(function(i){Fr.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Jr[o]=Jr[i]})});function Cs(i,o,d){return o==null||typeof o=="boolean"||o===""?"":d||typeof o!="number"||o===0||Jr.hasOwnProperty(i)&&Jr[i]?(""+o).trim():o+"px"}function ui(i,o){i=i.style;for(var d in o)if(o.hasOwnProperty(d)){var m=d.indexOf("--")===0,x=Cs(d,o[d],m);d==="float"&&(d="cssFloat"),m?i.setProperty(d,x):i[d]=x}}var Zr=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bn(i,o){if(o){if(Zr[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Is(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var He=null;function vt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ht=null,Ut=null,Ht=null;function re(i){if(i=vu(i)){if(typeof ht!="function")throw Error(t(280));var o=i.stateNode;o&&(o=xh(o),ht(i.stateNode,i.type,o))}}function me(i){Ut?Ht?Ht.push(i):Ht=[i]:Ut=i}function De(){if(Ut){var i=Ut,o=Ht;if(Ht=Ut=null,re(i),o)for(i=0;i<o.length;i++)re(o[i])}}function _t(i,o){return i(o)}function it(){}var ft=!1;function Ae(i,o,d){if(ft)return i(o,d);ft=!0;try{return _t(i,o,d)}finally{ft=!1,(Ut!==null||Ht!==null)&&(it(),De())}}function Kt(i,o){var d=i.stateNode;if(d===null)return null;var m=xh(d);if(m===null)return null;d=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(t(231,o,typeof d));return d}var di=!1;if(u)try{var or={};Object.defineProperty(or,"passive",{get:function(){di=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{di=!1}function js(i,o,d,m,x,T,F,W,G){var ie=Array.prototype.slice.call(arguments,3);try{o.apply(d,ie)}catch(fe){this.onError(fe)}}var As=!1,hi=null,ar=!1,qi=null,dl={onError:function(i){As=!0,hi=i}};function $t(i,o,d,m,x,T,F,W,G){As=!1,hi=null,js.apply(dl,arguments)}function hl(i,o,d,m,x,T,F,W,G){if($t.apply(this,arguments),As){if(As){var ie=hi;As=!1,hi=null}else throw Error(t(198));ar||(ar=!0,qi=ie)}}function es(i){var o=i,d=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(d=o.return),i=o.return;while(i)}return o.tag===3?d:null}function ca(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function ts(i){if(es(i)!==i)throw Error(t(188))}function Wd(i){var o=i.alternate;if(!o){if(o=es(i),o===null)throw Error(t(188));return o!==i?null:i}for(var d=i,m=o;;){var x=d.return;if(x===null)break;var T=x.alternate;if(T===null){if(m=x.return,m!==null){d=m;continue}break}if(x.child===T.child){for(T=x.child;T;){if(T===d)return ts(x),i;if(T===m)return ts(x),o;T=T.sibling}throw Error(t(188))}if(d.return!==m.return)d=x,m=T;else{for(var F=!1,W=x.child;W;){if(W===d){F=!0,d=x,m=T;break}if(W===m){F=!0,m=x,d=T;break}W=W.sibling}if(!F){for(W=T.child;W;){if(W===d){F=!0,d=T,m=x;break}if(W===m){F=!0,m=T,d=x;break}W=W.sibling}if(!F)throw Error(t(189))}}if(d.alternate!==m)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?i:o}function Zc(i){return i=Wd(i),i!==null?fl(i):null}function fl(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=fl(i);if(o!==null)return o;i=i.sibling}return null}var pl=e.unstable_scheduleCallback,eu=e.unstable_cancelCallback,Hd=e.unstable_shouldYield,hm=e.unstable_requestPaint,Dt=e.unstable_now,Kd=e.unstable_getCurrentPriorityLevel,ua=e.unstable_ImmediatePriority,Wi=e.unstable_UserBlockingPriority,Vr=e.unstable_NormalPriority,tu=e.unstable_LowPriority,Gd=e.unstable_IdlePriority,da=null,Tr=null;function Qd(i){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(da,i,void 0,(i.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:Xd,nu=Math.log,Yd=Math.LN2;function Xd(i){return i>>>=0,i===0?32:31-(nu(i)/Yd|0)|0}var ml=64,gl=4194304;function Hi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ha(i,o){var d=i.pendingLanes;if(d===0)return 0;var m=0,x=i.suspendedLanes,T=i.pingedLanes,F=d&268435455;if(F!==0){var W=F&~x;W!==0?m=Hi(W):(T&=F,T!==0&&(m=Hi(T)))}else F=d&~x,F!==0?m=Hi(F):T!==0&&(m=Hi(T));if(m===0)return 0;if(o!==0&&o!==m&&(o&x)===0&&(x=m&-m,T=o&-o,x>=T||x===16&&(T&4194240)!==0))return o;if((m&4)!==0&&(m|=d&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=m;0<o;)d=31-er(o),x=1<<d,m|=i[d],o&=~x;return m}function fm(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fi(i,o){for(var d=i.suspendedLanes,m=i.pingedLanes,x=i.expirationTimes,T=i.pendingLanes;0<T;){var F=31-er(T),W=1<<F,G=x[F];G===-1?((W&d)===0||(W&m)!==0)&&(x[F]=fm(W,o)):G<=o&&(i.expiredLanes|=W),T&=~W}}function Cr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function fa(){var i=ml;return ml<<=1,(ml&4194240)===0&&(ml=64),i}function Ki(i){for(var o=[],d=0;31>d;d++)o.push(i);return o}function Gi(i,o,d){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-er(o),i[o]=d}function Rt(i,o){var d=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<d;){var x=31-er(d),T=1<<x;o[x]=0,m[x]=-1,i[x]=-1,d&=~T}}function Qi(i,o){var d=i.entangledLanes|=o;for(i=i.entanglements;d;){var m=31-er(d),x=1<<m;x&o|i[m]&o&&(i[m]|=o),d&=~x}}var pt=0;function Yi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Jd,yl,Zd,eh,th,ru=!1,Ps=[],Rn=null,ns=null,rs=null,Xi=new Map,Ur=new Map,Rs=[],pm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nh(i,o){switch(i){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Xi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ur.delete(o.pointerId)}}function lr(i,o,d,m,x,T){return i===null||i.nativeEvent!==T?(i={blockedOn:o,domEventName:d,eventSystemFlags:m,nativeEvent:T,targetContainers:[x]},o!==null&&(o=vu(o),o!==null&&yl(o)),i):(i.eventSystemFlags|=m,o=i.targetContainers,x!==null&&o.indexOf(x)===-1&&o.push(x),i)}function mm(i,o,d,m,x){switch(o){case"focusin":return Rn=lr(Rn,i,o,d,m,x),!0;case"dragenter":return ns=lr(ns,i,o,d,m,x),!0;case"mouseover":return rs=lr(rs,i,o,d,m,x),!0;case"pointerover":var T=x.pointerId;return Xi.set(T,lr(Xi.get(T)||null,i,o,d,m,x)),!0;case"gotpointercapture":return T=x.pointerId,Ur.set(T,lr(Ur.get(T)||null,i,o,d,m,x)),!0}return!1}function rh(i){var o=va(i.target);if(o!==null){var d=es(o);if(d!==null){if(o=d.tag,o===13){if(o=ca(d),o!==null){i.blockedOn=o,th(i.priority,function(){Zd(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function pi(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var d=vl(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var m=new d.constructor(d.type,d);He=m,d.target.dispatchEvent(m),He=null}else return o=vu(d),o!==null&&yl(o),i.blockedOn=d,!1;o.shift()}return!0}function pa(i,o,d){pi(i)&&d.delete(o)}function sh(){ru=!1,Rn!==null&&pi(Rn)&&(Rn=null),ns!==null&&pi(ns)&&(ns=null),rs!==null&&pi(rs)&&(rs=null),Xi.forEach(pa),Ur.forEach(pa)}function ss(i,o){i.blockedOn===o&&(i.blockedOn=null,ru||(ru=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sh)))}function is(i){function o(x){return ss(x,i)}if(0<Ps.length){ss(Ps[0],i);for(var d=1;d<Ps.length;d++){var m=Ps[d];m.blockedOn===i&&(m.blockedOn=null)}}for(Rn!==null&&ss(Rn,i),ns!==null&&ss(ns,i),rs!==null&&ss(rs,i),Xi.forEach(o),Ur.forEach(o),d=0;d<Rs.length;d++)m=Rs[d],m.blockedOn===i&&(m.blockedOn=null);for(;0<Rs.length&&(d=Rs[0],d.blockedOn===null);)rh(d),d.blockedOn===null&&Rs.shift()}var mi=L.ReactCurrentBatchConfig,Ji=!0;function Gt(i,o,d,m){var x=pt,T=mi.transition;mi.transition=null;try{pt=1,su(i,o,d,m)}finally{pt=x,mi.transition=T}}function gm(i,o,d,m){var x=pt,T=mi.transition;mi.transition=null;try{pt=4,su(i,o,d,m)}finally{pt=x,mi.transition=T}}function su(i,o,d,m){if(Ji){var x=vl(i,o,d,m);if(x===null)Cm(i,o,m,ma,d),nh(i,m);else if(mm(x,i,o,d,m))m.stopPropagation();else if(nh(i,m),o&4&&-1<pm.indexOf(i)){for(;x!==null;){var T=vu(x);if(T!==null&&Jd(T),T=vl(i,o,d,m),T===null&&Cm(i,o,m,ma,d),T===x)break;x=T}x!==null&&m.stopPropagation()}else Cm(i,o,m,null,d)}}var ma=null;function vl(i,o,d,m){if(ma=null,i=vt(m),i=va(i),i!==null)if(o=es(i),o===null)i=null;else if(d=o.tag,d===13){if(i=ca(o),i!==null)return i;i=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return ma=i,null}function iu(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kd()){case ua:return 1;case Wi:return 4;case Vr:case tu:return 16;case Gd:return 536870912;default:return 16}default:return 16}}var Ir=null,xl=null,cr=null;function ou(){if(cr)return cr;var i,o=xl,d=o.length,m,x="value"in Ir?Ir.value:Ir.textContent,T=x.length;for(i=0;i<d&&o[i]===x[i];i++);var F=d-i;for(m=1;m<=F&&o[d-m]===x[T-m];m++);return cr=x.slice(i,1<m?1-m:void 0)}function wl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function ks(){return!0}function au(){return!1}function kn(i){function o(d,m,x,T,F){this._reactName=d,this._targetInst=x,this.type=m,this.nativeEvent=T,this.target=F,this.currentTarget=null;for(var W in i)i.hasOwnProperty(W)&&(d=i[W],this[W]=d?d(T):T[W]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?ks:au,this.isPropagationStopped=au,this}return le(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),o}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=kn(os),Os=le({},os,{view:0,detail:0}),ym=kn(Os),El,gi,Zi,ga=le({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Zi&&(Zi&&i.type==="mousemove"?(El=i.screenX-Zi.screenX,gi=i.screenY-Zi.screenY):gi=El=0,Zi=i),El)},movementY:function(i){return"movementY"in i?i.movementY:gi}}),bl=kn(ga),lu=le({},ga,{dataTransfer:0}),ih=kn(lu),Sl=le({},Os,{relatedTarget:0}),Nl=kn(Sl),oh=le({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),yi=kn(oh),ah=le({},os,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),lh=kn(ah),ch=le({},os,{data:0}),cu=kn(ch),Tl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dh(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=uh[i])?!!o[i]:!1}function Ds(){return dh}var f=le({},Os,{key:function(i){if(i.key){var o=Tl[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=wl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?tr[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(i){return i.type==="keypress"?wl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?wl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),N=kn(f),j=le({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$=kn(j),J=le({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),ae=kn(J),we=le({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),jt=kn(we),wn=le({},ga,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),xt=kn(wn),Cn=[9,13,27,32],dn=u&&"CompositionEvent"in window,$r=null;u&&"documentMode"in document&&($r=document.documentMode);var jr=u&&"TextEvent"in window&&!$r,ya=u&&(!dn||$r&&8<$r&&11>=$r),Cl=" ",Tw=!1;function Cw(i,o){switch(i){case"keyup":return Cn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iw(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Il=!1;function GA(i,o){switch(i){case"compositionend":return Iw(o);case"keypress":return o.which!==32?null:(Tw=!0,Cl);case"textInput":return i=o.data,i===Cl&&Tw?null:i;default:return null}}function QA(i,o){if(Il)return i==="compositionend"||!dn&&Cw(i,o)?(i=ou(),cr=xl=Ir=null,Il=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ya&&o.locale!=="ko"?null:o.data;default:return null}}var YA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jw(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!YA[i.type]:o==="textarea"}function Aw(i,o,d,m){me(m),o=gh(o,"onChange"),0<o.length&&(d=new _l("onChange","change",null,d,m),i.push({event:d,listeners:o}))}var uu=null,du=null;function XA(i){Gw(i,0)}function hh(i){var o=kl(i);if(st(o))return i}function JA(i,o){if(i==="change")return o}var Pw=!1;if(u){var vm;if(u){var xm="oninput"in document;if(!xm){var Rw=document.createElement("div");Rw.setAttribute("oninput","return;"),xm=typeof Rw.oninput=="function"}vm=xm}else vm=!1;Pw=vm&&(!document.documentMode||9<document.documentMode)}function kw(){uu&&(uu.detachEvent("onpropertychange",Ow),du=uu=null)}function Ow(i){if(i.propertyName==="value"&&hh(du)){var o=[];Aw(o,du,i,vt(i)),Ae(XA,o)}}function ZA(i,o,d){i==="focusin"?(kw(),uu=o,du=d,uu.attachEvent("onpropertychange",Ow)):i==="focusout"&&kw()}function eP(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return hh(du)}function tP(i,o){if(i==="click")return hh(o)}function nP(i,o){if(i==="input"||i==="change")return hh(o)}function rP(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var as=typeof Object.is=="function"?Object.is:rP;function hu(i,o){if(as(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var d=Object.keys(i),m=Object.keys(o);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var x=d[m];if(!h.call(o,x)||!as(i[x],o[x]))return!1}return!0}function Dw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Lw(i,o){var d=Dw(i);i=0;for(var m;d;){if(d.nodeType===3){if(m=i+d.textContent.length,i<=o&&m>=o)return{node:d,offset:o-i};i=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Dw(d)}}function Mw(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Mw(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Fw(){for(var i=window,o=Nt();o instanceof i.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)i=o.contentWindow;else break;o=Nt(i.document)}return o}function wm(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function sP(i){var o=Fw(),d=i.focusedElem,m=i.selectionRange;if(o!==d&&d&&d.ownerDocument&&Mw(d.ownerDocument.documentElement,d)){if(m!==null&&wm(d)){if(o=m.start,i=m.end,i===void 0&&(i=o),"selectionStart"in d)d.selectionStart=o,d.selectionEnd=Math.min(i,d.value.length);else if(i=(o=d.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var x=d.textContent.length,T=Math.min(m.start,x);m=m.end===void 0?T:Math.min(m.end,x),!i.extend&&T>m&&(x=m,m=T,T=x),x=Lw(d,T);var F=Lw(d,m);x&&F&&(i.rangeCount!==1||i.anchorNode!==x.node||i.anchorOffset!==x.offset||i.focusNode!==F.node||i.focusOffset!==F.offset)&&(o=o.createRange(),o.setStart(x.node,x.offset),i.removeAllRanges(),T>m?(i.addRange(o),i.extend(F.node,F.offset)):(o.setEnd(F.node,F.offset),i.addRange(o)))}}for(o=[],i=d;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<o.length;d++)i=o[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var iP=u&&"documentMode"in document&&11>=document.documentMode,jl=null,_m=null,fu=null,Em=!1;function Vw(i,o,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Em||jl==null||jl!==Nt(m)||(m=jl,"selectionStart"in m&&wm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),fu&&hu(fu,m)||(fu=m,m=gh(_m,"onSelect"),0<m.length&&(o=new _l("onSelect","select",null,o,d),i.push({event:o,listeners:m}),o.target=jl)))}function fh(i,o){var d={};return d[i.toLowerCase()]=o.toLowerCase(),d["Webkit"+i]="webkit"+o,d["Moz"+i]="moz"+o,d}var Al={animationend:fh("Animation","AnimationEnd"),animationiteration:fh("Animation","AnimationIteration"),animationstart:fh("Animation","AnimationStart"),transitionend:fh("Transition","TransitionEnd")},bm={},Uw={};u&&(Uw=document.createElement("div").style,"AnimationEvent"in window||(delete Al.animationend.animation,delete Al.animationiteration.animation,delete Al.animationstart.animation),"TransitionEvent"in window||delete Al.transitionend.transition);function ph(i){if(bm[i])return bm[i];if(!Al[i])return i;var o=Al[i],d;for(d in o)if(o.hasOwnProperty(d)&&d in Uw)return bm[i]=o[d];return i}var $w=ph("animationend"),zw=ph("animationiteration"),Bw=ph("animationstart"),qw=ph("transitionend"),Ww=new Map,Hw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eo(i,o){Ww.set(i,o),a(o,[i])}for(var Sm=0;Sm<Hw.length;Sm++){var Nm=Hw[Sm],oP=Nm.toLowerCase(),aP=Nm[0].toUpperCase()+Nm.slice(1);eo(oP,"on"+aP)}eo($w,"onAnimationEnd"),eo(zw,"onAnimationIteration"),eo(Bw,"onAnimationStart"),eo("dblclick","onDoubleClick"),eo("focusin","onFocus"),eo("focusout","onBlur"),eo(qw,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lP=new Set("cancel close invalid load scroll toggle".split(" ").concat(pu));function Kw(i,o,d){var m=i.type||"unknown-event";i.currentTarget=d,hl(m,o,void 0,i),i.currentTarget=null}function Gw(i,o){o=(o&4)!==0;for(var d=0;d<i.length;d++){var m=i[d],x=m.event;m=m.listeners;e:{var T=void 0;if(o)for(var F=m.length-1;0<=F;F--){var W=m[F],G=W.instance,ie=W.currentTarget;if(W=W.listener,G!==T&&x.isPropagationStopped())break e;Kw(x,W,ie),T=G}else for(F=0;F<m.length;F++){if(W=m[F],G=W.instance,ie=W.currentTarget,W=W.listener,G!==T&&x.isPropagationStopped())break e;Kw(x,W,ie),T=G}}}if(ar)throw i=qi,ar=!1,qi=null,i}function zt(i,o){var d=o[km];d===void 0&&(d=o[km]=new Set);var m=i+"__bubble";d.has(m)||(Qw(o,i,2,!1),d.add(m))}function Tm(i,o,d){var m=0;o&&(m|=4),Qw(d,i,m,o)}var mh="_reactListening"+Math.random().toString(36).slice(2);function mu(i){if(!i[mh]){i[mh]=!0,r.forEach(function(d){d!=="selectionchange"&&(lP.has(d)||Tm(d,!1,i),Tm(d,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[mh]||(o[mh]=!0,Tm("selectionchange",!1,o))}}function Qw(i,o,d,m){switch(iu(o)){case 1:var x=Gt;break;case 4:x=gm;break;default:x=su}d=x.bind(null,o,d,i),x=void 0,!di||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(x=!0),m?x!==void 0?i.addEventListener(o,d,{capture:!0,passive:x}):i.addEventListener(o,d,!0):x!==void 0?i.addEventListener(o,d,{passive:x}):i.addEventListener(o,d,!1)}function Cm(i,o,d,m,x){var T=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var F=m.tag;if(F===3||F===4){var W=m.stateNode.containerInfo;if(W===x||W.nodeType===8&&W.parentNode===x)break;if(F===4)for(F=m.return;F!==null;){var G=F.tag;if((G===3||G===4)&&(G=F.stateNode.containerInfo,G===x||G.nodeType===8&&G.parentNode===x))return;F=F.return}for(;W!==null;){if(F=va(W),F===null)return;if(G=F.tag,G===5||G===6){m=T=F;continue e}W=W.parentNode}}m=m.return}Ae(function(){var ie=T,fe=vt(d),pe=[];e:{var de=Ww.get(i);if(de!==void 0){var Te=_l,ke=i;switch(i){case"keypress":if(wl(d)===0)break e;case"keydown":case"keyup":Te=N;break;case"focusin":ke="focus",Te=Nl;break;case"focusout":ke="blur",Te=Nl;break;case"beforeblur":case"afterblur":Te=Nl;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=ae;break;case $w:case zw:case Bw:Te=yi;break;case qw:Te=jt;break;case"scroll":Te=ym;break;case"wheel":Te=xt;break;case"copy":case"cut":case"paste":Te=lh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=$}var Oe=(o&4)!==0,ln=!Oe&&i==="scroll",ee=Oe?de!==null?de+"Capture":null:de;Oe=[];for(var Y=ie,se;Y!==null;){se=Y;var ge=se.stateNode;if(se.tag===5&&ge!==null&&(se=ge,ee!==null&&(ge=Kt(Y,ee),ge!=null&&Oe.push(gu(Y,ge,se)))),ln)break;Y=Y.return}0<Oe.length&&(de=new Te(de,ke,null,d,fe),pe.push({event:de,listeners:Oe}))}}if((o&7)===0){e:{if(de=i==="mouseover"||i==="pointerover",Te=i==="mouseout"||i==="pointerout",de&&d!==He&&(ke=d.relatedTarget||d.fromElement)&&(va(ke)||ke[vi]))break e;if((Te||de)&&(de=fe.window===fe?fe:(de=fe.ownerDocument)?de.defaultView||de.parentWindow:window,Te?(ke=d.relatedTarget||d.toElement,Te=ie,ke=ke?va(ke):null,ke!==null&&(ln=es(ke),ke!==ln||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(Te=null,ke=ie),Te!==ke)){if(Oe=bl,ge="onMouseLeave",ee="onMouseEnter",Y="mouse",(i==="pointerout"||i==="pointerover")&&(Oe=$,ge="onPointerLeave",ee="onPointerEnter",Y="pointer"),ln=Te==null?de:kl(Te),se=ke==null?de:kl(ke),de=new Oe(ge,Y+"leave",Te,d,fe),de.target=ln,de.relatedTarget=se,ge=null,va(fe)===ie&&(Oe=new Oe(ee,Y+"enter",ke,d,fe),Oe.target=se,Oe.relatedTarget=ln,ge=Oe),ln=ge,Te&&ke)t:{for(Oe=Te,ee=ke,Y=0,se=Oe;se;se=Pl(se))Y++;for(se=0,ge=ee;ge;ge=Pl(ge))se++;for(;0<Y-se;)Oe=Pl(Oe),Y--;for(;0<se-Y;)ee=Pl(ee),se--;for(;Y--;){if(Oe===ee||ee!==null&&Oe===ee.alternate)break t;Oe=Pl(Oe),ee=Pl(ee)}Oe=null}else Oe=null;Te!==null&&Yw(pe,de,Te,Oe,!1),ke!==null&&ln!==null&&Yw(pe,ln,ke,Oe,!0)}}e:{if(de=ie?kl(ie):window,Te=de.nodeName&&de.nodeName.toLowerCase(),Te==="select"||Te==="input"&&de.type==="file")var Le=JA;else if(jw(de))if(Pw)Le=nP;else{Le=eP;var Be=ZA}else(Te=de.nodeName)&&Te.toLowerCase()==="input"&&(de.type==="checkbox"||de.type==="radio")&&(Le=tP);if(Le&&(Le=Le(i,ie))){Aw(pe,Le,d,fe);break e}Be&&Be(i,de,ie),i==="focusout"&&(Be=de._wrapperState)&&Be.controlled&&de.type==="number"&&Pt(de,"number",de.value)}switch(Be=ie?kl(ie):window,i){case"focusin":(jw(Be)||Be.contentEditable==="true")&&(jl=Be,_m=ie,fu=null);break;case"focusout":fu=_m=jl=null;break;case"mousedown":Em=!0;break;case"contextmenu":case"mouseup":case"dragend":Em=!1,Vw(pe,d,fe);break;case"selectionchange":if(iP)break;case"keydown":case"keyup":Vw(pe,d,fe)}var qe;if(dn)e:{switch(i){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Il?Cw(i,d)&&(Ze="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(Ze="onCompositionStart");Ze&&(ya&&d.locale!=="ko"&&(Il||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Il&&(qe=ou()):(Ir=fe,xl="value"in Ir?Ir.value:Ir.textContent,Il=!0)),Be=gh(ie,Ze),0<Be.length&&(Ze=new cu(Ze,i,null,d,fe),pe.push({event:Ze,listeners:Be}),qe?Ze.data=qe:(qe=Iw(d),qe!==null&&(Ze.data=qe)))),(qe=jr?GA(i,d):QA(i,d))&&(ie=gh(ie,"onBeforeInput"),0<ie.length&&(fe=new cu("onBeforeInput","beforeinput",null,d,fe),pe.push({event:fe,listeners:ie}),fe.data=qe))}Gw(pe,o)})}function gu(i,o,d){return{instance:i,listener:o,currentTarget:d}}function gh(i,o){for(var d=o+"Capture",m=[];i!==null;){var x=i,T=x.stateNode;x.tag===5&&T!==null&&(x=T,T=Kt(i,d),T!=null&&m.unshift(gu(i,T,x)),T=Kt(i,o),T!=null&&m.push(gu(i,T,x))),i=i.return}return m}function Pl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Yw(i,o,d,m,x){for(var T=o._reactName,F=[];d!==null&&d!==m;){var W=d,G=W.alternate,ie=W.stateNode;if(G!==null&&G===m)break;W.tag===5&&ie!==null&&(W=ie,x?(G=Kt(d,T),G!=null&&F.unshift(gu(d,G,W))):x||(G=Kt(d,T),G!=null&&F.push(gu(d,G,W)))),d=d.return}F.length!==0&&i.push({event:o,listeners:F})}var cP=/\r\n?/g,uP=/\u0000|\uFFFD/g;function Xw(i){return(typeof i=="string"?i:""+i).replace(cP,`
`).replace(uP,"")}function yh(i,o,d){if(o=Xw(o),Xw(i)!==o&&d)throw Error(t(425))}function vh(){}var Im=null,jm=null;function Am(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Pm=typeof setTimeout=="function"?setTimeout:void 0,dP=typeof clearTimeout=="function"?clearTimeout:void 0,Jw=typeof Promise=="function"?Promise:void 0,hP=typeof queueMicrotask=="function"?queueMicrotask:typeof Jw<"u"?function(i){return Jw.resolve(null).then(i).catch(fP)}:Pm;function fP(i){setTimeout(function(){throw i})}function Rm(i,o){var d=o,m=0;do{var x=d.nextSibling;if(i.removeChild(d),x&&x.nodeType===8)if(d=x.data,d==="/$"){if(m===0){i.removeChild(x),is(o);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=x}while(d);is(o)}function to(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Zw(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return i;o--}else d==="/$"&&o++}i=i.previousSibling}return null}var Rl=Math.random().toString(36).slice(2),Ls="__reactFiber$"+Rl,yu="__reactProps$"+Rl,vi="__reactContainer$"+Rl,km="__reactEvents$"+Rl,pP="__reactListeners$"+Rl,mP="__reactHandles$"+Rl;function va(i){var o=i[Ls];if(o)return o;for(var d=i.parentNode;d;){if(o=d[vi]||d[Ls]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(i=Zw(i);i!==null;){if(d=i[Ls])return d;i=Zw(i)}return o}i=d,d=i.parentNode}return null}function vu(i){return i=i[Ls]||i[vi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function kl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function xh(i){return i[yu]||null}var Om=[],Ol=-1;function no(i){return{current:i}}function Bt(i){0>Ol||(i.current=Om[Ol],Om[Ol]=null,Ol--)}function Lt(i,o){Ol++,Om[Ol]=i.current,i.current=o}var ro={},qn=no(ro),ur=no(!1),xa=ro;function Dl(i,o){var d=i.type.contextTypes;if(!d)return ro;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===o)return m.__reactInternalMemoizedMaskedChildContext;var x={},T;for(T in d)x[T]=o[T];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=x),x}function dr(i){return i=i.childContextTypes,i!=null}function wh(){Bt(ur),Bt(qn)}function e0(i,o,d){if(qn.current!==ro)throw Error(t(168));Lt(qn,o),Lt(ur,d)}function t0(i,o,d){var m=i.stateNode;if(o=o.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var x in m)if(!(x in o))throw Error(t(108,xe(i)||"Unknown",x));return le({},d,m)}function _h(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ro,xa=qn.current,Lt(qn,i),Lt(ur,ur.current),!0}function n0(i,o,d){var m=i.stateNode;if(!m)throw Error(t(169));d?(i=t0(i,o,xa),m.__reactInternalMemoizedMergedChildContext=i,Bt(ur),Bt(qn),Lt(qn,i)):Bt(ur),Lt(ur,d)}var xi=null,Eh=!1,Dm=!1;function r0(i){xi===null?xi=[i]:xi.push(i)}function gP(i){Eh=!0,r0(i)}function so(){if(!Dm&&xi!==null){Dm=!0;var i=0,o=pt;try{var d=xi;for(pt=1;i<d.length;i++){var m=d[i];do m=m(!0);while(m!==null)}xi=null,Eh=!1}catch(x){throw xi!==null&&(xi=xi.slice(i+1)),pl(ua,so),x}finally{pt=o,Dm=!1}}return null}var Ll=[],Ml=0,bh=null,Sh=0,zr=[],Br=0,wa=null,wi=1,_i="";function _a(i,o){Ll[Ml++]=Sh,Ll[Ml++]=bh,bh=i,Sh=o}function s0(i,o,d){zr[Br++]=wi,zr[Br++]=_i,zr[Br++]=wa,wa=i;var m=wi;i=_i;var x=32-er(m)-1;m&=~(1<<x),d+=1;var T=32-er(o)+x;if(30<T){var F=x-x%5;T=(m&(1<<F)-1).toString(32),m>>=F,x-=F,wi=1<<32-er(o)+x|d<<x|m,_i=T+i}else wi=1<<T|d<<x|m,_i=i}function Lm(i){i.return!==null&&(_a(i,1),s0(i,1,0))}function Mm(i){for(;i===bh;)bh=Ll[--Ml],Ll[Ml]=null,Sh=Ll[--Ml],Ll[Ml]=null;for(;i===wa;)wa=zr[--Br],zr[Br]=null,_i=zr[--Br],zr[Br]=null,wi=zr[--Br],zr[Br]=null}var Ar=null,Pr=null,Qt=!1,ls=null;function i0(i,o){var d=Kr(5,null,null,0);d.elementType="DELETED",d.stateNode=o,d.return=i,o=i.deletions,o===null?(i.deletions=[d],i.flags|=16):o.push(d)}function o0(i,o){switch(i.tag){case 5:var d=i.type;return o=o.nodeType!==1||d.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Ar=i,Pr=to(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Ar=i,Pr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(d=wa!==null?{id:wi,overflow:_i}:null,i.memoizedState={dehydrated:o,treeContext:d,retryLane:1073741824},d=Kr(18,null,null,0),d.stateNode=o,d.return=i,i.child=d,Ar=i,Pr=null,!0):!1;default:return!1}}function Fm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Vm(i){if(Qt){var o=Pr;if(o){var d=o;if(!o0(i,o)){if(Fm(i))throw Error(t(418));o=to(d.nextSibling);var m=Ar;o&&o0(i,o)?i0(m,d):(i.flags=i.flags&-4097|2,Qt=!1,Ar=i)}}else{if(Fm(i))throw Error(t(418));i.flags=i.flags&-4097|2,Qt=!1,Ar=i}}}function a0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Ar=i}function Nh(i){if(i!==Ar)return!1;if(!Qt)return a0(i),Qt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Am(i.type,i.memoizedProps)),o&&(o=Pr)){if(Fm(i))throw l0(),Error(t(418));for(;o;)i0(i,o),o=to(o.nextSibling)}if(a0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(o===0){Pr=to(i.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++}i=i.nextSibling}Pr=null}}else Pr=Ar?to(i.stateNode.nextSibling):null;return!0}function l0(){for(var i=Pr;i;)i=to(i.nextSibling)}function Fl(){Pr=Ar=null,Qt=!1}function Um(i){ls===null?ls=[i]:ls.push(i)}var yP=L.ReactCurrentBatchConfig;function xu(i,o,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var m=d.stateNode}if(!m)throw Error(t(147,i));var x=m,T=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===T?o.ref:(o=function(F){var W=x.refs;F===null?delete W[T]:W[T]=F},o._stringRef=T,o)}if(typeof i!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,i))}return i}function Th(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function c0(i){var o=i._init;return o(i._payload)}function u0(i){function o(ee,Y){if(i){var se=ee.deletions;se===null?(ee.deletions=[Y],ee.flags|=16):se.push(Y)}}function d(ee,Y){if(!i)return null;for(;Y!==null;)o(ee,Y),Y=Y.sibling;return null}function m(ee,Y){for(ee=new Map;Y!==null;)Y.key!==null?ee.set(Y.key,Y):ee.set(Y.index,Y),Y=Y.sibling;return ee}function x(ee,Y){return ee=fo(ee,Y),ee.index=0,ee.sibling=null,ee}function T(ee,Y,se){return ee.index=se,i?(se=ee.alternate,se!==null?(se=se.index,se<Y?(ee.flags|=2,Y):se):(ee.flags|=2,Y)):(ee.flags|=1048576,Y)}function F(ee){return i&&ee.alternate===null&&(ee.flags|=2),ee}function W(ee,Y,se,ge){return Y===null||Y.tag!==6?(Y=Pg(se,ee.mode,ge),Y.return=ee,Y):(Y=x(Y,se),Y.return=ee,Y)}function G(ee,Y,se,ge){var Le=se.type;return Le===R?fe(ee,Y,se.props.children,ge,se.key):Y!==null&&(Y.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===K&&c0(Le)===Y.type)?(ge=x(Y,se.props),ge.ref=xu(ee,Y,se),ge.return=ee,ge):(ge=Yh(se.type,se.key,se.props,null,ee.mode,ge),ge.ref=xu(ee,Y,se),ge.return=ee,ge)}function ie(ee,Y,se,ge){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==se.containerInfo||Y.stateNode.implementation!==se.implementation?(Y=Rg(se,ee.mode,ge),Y.return=ee,Y):(Y=x(Y,se.children||[]),Y.return=ee,Y)}function fe(ee,Y,se,ge,Le){return Y===null||Y.tag!==7?(Y=ja(se,ee.mode,ge,Le),Y.return=ee,Y):(Y=x(Y,se),Y.return=ee,Y)}function pe(ee,Y,se){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=Pg(""+Y,ee.mode,se),Y.return=ee,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case U:return se=Yh(Y.type,Y.key,Y.props,null,ee.mode,se),se.ref=xu(ee,null,Y),se.return=ee,se;case z:return Y=Rg(Y,ee.mode,se),Y.return=ee,Y;case K:var ge=Y._init;return pe(ee,ge(Y._payload),se)}if(un(Y)||oe(Y))return Y=ja(Y,ee.mode,se,null),Y.return=ee,Y;Th(ee,Y)}return null}function de(ee,Y,se,ge){var Le=Y!==null?Y.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return Le!==null?null:W(ee,Y,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case U:return se.key===Le?G(ee,Y,se,ge):null;case z:return se.key===Le?ie(ee,Y,se,ge):null;case K:return Le=se._init,de(ee,Y,Le(se._payload),ge)}if(un(se)||oe(se))return Le!==null?null:fe(ee,Y,se,ge,null);Th(ee,se)}return null}function Te(ee,Y,se,ge,Le){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ee=ee.get(se)||null,W(Y,ee,""+ge,Le);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case U:return ee=ee.get(ge.key===null?se:ge.key)||null,G(Y,ee,ge,Le);case z:return ee=ee.get(ge.key===null?se:ge.key)||null,ie(Y,ee,ge,Le);case K:var Be=ge._init;return Te(ee,Y,se,Be(ge._payload),Le)}if(un(ge)||oe(ge))return ee=ee.get(se)||null,fe(Y,ee,ge,Le,null);Th(Y,ge)}return null}function ke(ee,Y,se,ge){for(var Le=null,Be=null,qe=Y,Ze=Y=0,An=null;qe!==null&&Ze<se.length;Ze++){qe.index>Ze?(An=qe,qe=null):An=qe.sibling;var St=de(ee,qe,se[Ze],ge);if(St===null){qe===null&&(qe=An);break}i&&qe&&St.alternate===null&&o(ee,qe),Y=T(St,Y,Ze),Be===null?Le=St:Be.sibling=St,Be=St,qe=An}if(Ze===se.length)return d(ee,qe),Qt&&_a(ee,Ze),Le;if(qe===null){for(;Ze<se.length;Ze++)qe=pe(ee,se[Ze],ge),qe!==null&&(Y=T(qe,Y,Ze),Be===null?Le=qe:Be.sibling=qe,Be=qe);return Qt&&_a(ee,Ze),Le}for(qe=m(ee,qe);Ze<se.length;Ze++)An=Te(qe,ee,Ze,se[Ze],ge),An!==null&&(i&&An.alternate!==null&&qe.delete(An.key===null?Ze:An.key),Y=T(An,Y,Ze),Be===null?Le=An:Be.sibling=An,Be=An);return i&&qe.forEach(function(po){return o(ee,po)}),Qt&&_a(ee,Ze),Le}function Oe(ee,Y,se,ge){var Le=oe(se);if(typeof Le!="function")throw Error(t(150));if(se=Le.call(se),se==null)throw Error(t(151));for(var Be=Le=null,qe=Y,Ze=Y=0,An=null,St=se.next();qe!==null&&!St.done;Ze++,St=se.next()){qe.index>Ze?(An=qe,qe=null):An=qe.sibling;var po=de(ee,qe,St.value,ge);if(po===null){qe===null&&(qe=An);break}i&&qe&&po.alternate===null&&o(ee,qe),Y=T(po,Y,Ze),Be===null?Le=po:Be.sibling=po,Be=po,qe=An}if(St.done)return d(ee,qe),Qt&&_a(ee,Ze),Le;if(qe===null){for(;!St.done;Ze++,St=se.next())St=pe(ee,St.value,ge),St!==null&&(Y=T(St,Y,Ze),Be===null?Le=St:Be.sibling=St,Be=St);return Qt&&_a(ee,Ze),Le}for(qe=m(ee,qe);!St.done;Ze++,St=se.next())St=Te(qe,ee,Ze,St.value,ge),St!==null&&(i&&St.alternate!==null&&qe.delete(St.key===null?Ze:St.key),Y=T(St,Y,Ze),Be===null?Le=St:Be.sibling=St,Be=St);return i&&qe.forEach(function(YP){return o(ee,YP)}),Qt&&_a(ee,Ze),Le}function ln(ee,Y,se,ge){if(typeof se=="object"&&se!==null&&se.type===R&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case U:e:{for(var Le=se.key,Be=Y;Be!==null;){if(Be.key===Le){if(Le=se.type,Le===R){if(Be.tag===7){d(ee,Be.sibling),Y=x(Be,se.props.children),Y.return=ee,ee=Y;break e}}else if(Be.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===K&&c0(Le)===Be.type){d(ee,Be.sibling),Y=x(Be,se.props),Y.ref=xu(ee,Be,se),Y.return=ee,ee=Y;break e}d(ee,Be);break}else o(ee,Be);Be=Be.sibling}se.type===R?(Y=ja(se.props.children,ee.mode,ge,se.key),Y.return=ee,ee=Y):(ge=Yh(se.type,se.key,se.props,null,ee.mode,ge),ge.ref=xu(ee,Y,se),ge.return=ee,ee=ge)}return F(ee);case z:e:{for(Be=se.key;Y!==null;){if(Y.key===Be)if(Y.tag===4&&Y.stateNode.containerInfo===se.containerInfo&&Y.stateNode.implementation===se.implementation){d(ee,Y.sibling),Y=x(Y,se.children||[]),Y.return=ee,ee=Y;break e}else{d(ee,Y);break}else o(ee,Y);Y=Y.sibling}Y=Rg(se,ee.mode,ge),Y.return=ee,ee=Y}return F(ee);case K:return Be=se._init,ln(ee,Y,Be(se._payload),ge)}if(un(se))return ke(ee,Y,se,ge);if(oe(se))return Oe(ee,Y,se,ge);Th(ee,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,Y!==null&&Y.tag===6?(d(ee,Y.sibling),Y=x(Y,se),Y.return=ee,ee=Y):(d(ee,Y),Y=Pg(se,ee.mode,ge),Y.return=ee,ee=Y),F(ee)):d(ee,Y)}return ln}var Vl=u0(!0),d0=u0(!1),Ch=no(null),Ih=null,Ul=null,$m=null;function zm(){$m=Ul=Ih=null}function Bm(i){var o=Ch.current;Bt(Ch),i._currentValue=o}function qm(i,o,d){for(;i!==null;){var m=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),i===d)break;i=i.return}}function $l(i,o){Ih=i,$m=Ul=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(hr=!0),i.firstContext=null)}function qr(i){var o=i._currentValue;if($m!==i)if(i={context:i,memoizedValue:o,next:null},Ul===null){if(Ih===null)throw Error(t(308));Ul=i,Ih.dependencies={lanes:0,firstContext:i}}else Ul=Ul.next=i;return o}var Ea=null;function Wm(i){Ea===null?Ea=[i]:Ea.push(i)}function h0(i,o,d,m){var x=o.interleaved;return x===null?(d.next=d,Wm(o)):(d.next=x.next,x.next=d),o.interleaved=d,Ei(i,m)}function Ei(i,o){i.lanes|=o;var d=i.alternate;for(d!==null&&(d.lanes|=o),d=i,i=i.return;i!==null;)i.childLanes|=o,d=i.alternate,d!==null&&(d.childLanes|=o),d=i,i=i.return;return d.tag===3?d.stateNode:null}var io=!1;function Hm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f0(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function bi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function oo(i,o,d){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Et&2)!==0){var x=m.pending;return x===null?o.next=o:(o.next=x.next,x.next=o),m.pending=o,Ei(i,d)}return x=m.interleaved,x===null?(o.next=o,Wm(m)):(o.next=x.next,x.next=o),m.interleaved=o,Ei(i,d)}function jh(i,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194240)!==0)){var m=o.lanes;m&=i.pendingLanes,d|=m,o.lanes=d,Qi(i,d)}}function p0(i,o){var d=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var x=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var F={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?x=T=F:T=T.next=F,d=d.next}while(d!==null);T===null?x=T=o:T=T.next=o}else x=T=o;d={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:T,shared:m.shared,effects:m.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=o:i.next=o,d.lastBaseUpdate=o}function Ah(i,o,d,m){var x=i.updateQueue;io=!1;var T=x.firstBaseUpdate,F=x.lastBaseUpdate,W=x.shared.pending;if(W!==null){x.shared.pending=null;var G=W,ie=G.next;G.next=null,F===null?T=ie:F.next=ie,F=G;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,W=fe.lastBaseUpdate,W!==F&&(W===null?fe.firstBaseUpdate=ie:W.next=ie,fe.lastBaseUpdate=G))}if(T!==null){var pe=x.baseState;F=0,fe=ie=G=null,W=T;do{var de=W.lane,Te=W.eventTime;if((m&de)===de){fe!==null&&(fe=fe.next={eventTime:Te,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var ke=i,Oe=W;switch(de=o,Te=d,Oe.tag){case 1:if(ke=Oe.payload,typeof ke=="function"){pe=ke.call(Te,pe,de);break e}pe=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Oe.payload,de=typeof ke=="function"?ke.call(Te,pe,de):ke,de==null)break e;pe=le({},pe,de);break e;case 2:io=!0}}W.callback!==null&&W.lane!==0&&(i.flags|=64,de=x.effects,de===null?x.effects=[W]:de.push(W))}else Te={eventTime:Te,lane:de,tag:W.tag,payload:W.payload,callback:W.callback,next:null},fe===null?(ie=fe=Te,G=pe):fe=fe.next=Te,F|=de;if(W=W.next,W===null){if(W=x.shared.pending,W===null)break;de=W,W=de.next,de.next=null,x.lastBaseUpdate=de,x.shared.pending=null}}while(!0);if(fe===null&&(G=pe),x.baseState=G,x.firstBaseUpdate=ie,x.lastBaseUpdate=fe,o=x.shared.interleaved,o!==null){x=o;do F|=x.lane,x=x.next;while(x!==o)}else T===null&&(x.shared.lanes=0);Na|=F,i.lanes=F,i.memoizedState=pe}}function m0(i,o,d){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var m=i[o],x=m.callback;if(x!==null){if(m.callback=null,m=d,typeof x!="function")throw Error(t(191,x));x.call(m)}}}var wu={},Ms=no(wu),_u=no(wu),Eu=no(wu);function ba(i){if(i===wu)throw Error(t(174));return i}function Km(i,o){switch(Lt(Eu,o),Lt(_u,i),Lt(Ms,wu),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Tt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Tt(o,i)}Bt(Ms),Lt(Ms,o)}function zl(){Bt(Ms),Bt(_u),Bt(Eu)}function g0(i){ba(Eu.current);var o=ba(Ms.current),d=Tt(o,i.type);o!==d&&(Lt(_u,i),Lt(Ms,d))}function Gm(i){_u.current===i&&(Bt(Ms),Bt(_u))}var Xt=no(0);function Ph(i){for(var o=i;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Qm=[];function Ym(){for(var i=0;i<Qm.length;i++)Qm[i]._workInProgressVersionPrimary=null;Qm.length=0}var Rh=L.ReactCurrentDispatcher,Xm=L.ReactCurrentBatchConfig,Sa=0,Jt=null,_n=null,In=null,kh=!1,bu=!1,Su=0,vP=0;function Wn(){throw Error(t(321))}function Jm(i,o){if(o===null)return!1;for(var d=0;d<o.length&&d<i.length;d++)if(!as(i[d],o[d]))return!1;return!0}function Zm(i,o,d,m,x,T){if(Sa=T,Jt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Rh.current=i===null||i.memoizedState===null?EP:bP,i=d(m,x),bu){T=0;do{if(bu=!1,Su=0,25<=T)throw Error(t(301));T+=1,In=_n=null,o.updateQueue=null,Rh.current=SP,i=d(m,x)}while(bu)}if(Rh.current=Lh,o=_n!==null&&_n.next!==null,Sa=0,In=_n=Jt=null,kh=!1,o)throw Error(t(300));return i}function eg(){var i=Su!==0;return Su=0,i}function Fs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?Jt.memoizedState=In=i:In=In.next=i,In}function Wr(){if(_n===null){var i=Jt.alternate;i=i!==null?i.memoizedState:null}else i=_n.next;var o=In===null?Jt.memoizedState:In.next;if(o!==null)In=o,_n=i;else{if(i===null)throw Error(t(310));_n=i,i={memoizedState:_n.memoizedState,baseState:_n.baseState,baseQueue:_n.baseQueue,queue:_n.queue,next:null},In===null?Jt.memoizedState=In=i:In=In.next=i}return In}function Nu(i,o){return typeof o=="function"?o(i):o}function tg(i){var o=Wr(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var m=_n,x=m.baseQueue,T=d.pending;if(T!==null){if(x!==null){var F=x.next;x.next=T.next,T.next=F}m.baseQueue=x=T,d.pending=null}if(x!==null){T=x.next,m=m.baseState;var W=F=null,G=null,ie=T;do{var fe=ie.lane;if((Sa&fe)===fe)G!==null&&(G=G.next={lane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),m=ie.hasEagerState?ie.eagerState:i(m,ie.action);else{var pe={lane:fe,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null};G===null?(W=G=pe,F=m):G=G.next=pe,Jt.lanes|=fe,Na|=fe}ie=ie.next}while(ie!==null&&ie!==T);G===null?F=m:G.next=W,as(m,o.memoizedState)||(hr=!0),o.memoizedState=m,o.baseState=F,o.baseQueue=G,d.lastRenderedState=m}if(i=d.interleaved,i!==null){x=i;do T=x.lane,Jt.lanes|=T,Na|=T,x=x.next;while(x!==i)}else x===null&&(d.lanes=0);return[o.memoizedState,d.dispatch]}function ng(i){var o=Wr(),d=o.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var m=d.dispatch,x=d.pending,T=o.memoizedState;if(x!==null){d.pending=null;var F=x=x.next;do T=i(T,F.action),F=F.next;while(F!==x);as(T,o.memoizedState)||(hr=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),d.lastRenderedState=T}return[T,m]}function y0(){}function v0(i,o){var d=Jt,m=Wr(),x=o(),T=!as(m.memoizedState,x);if(T&&(m.memoizedState=x,hr=!0),m=m.queue,rg(_0.bind(null,d,m,i),[i]),m.getSnapshot!==o||T||In!==null&&In.memoizedState.tag&1){if(d.flags|=2048,Tu(9,w0.bind(null,d,m,x,o),void 0,null),jn===null)throw Error(t(349));(Sa&30)!==0||x0(d,o,x)}return x}function x0(i,o,d){i.flags|=16384,i={getSnapshot:o,value:d},o=Jt.updateQueue,o===null?(o={lastEffect:null,stores:null},Jt.updateQueue=o,o.stores=[i]):(d=o.stores,d===null?o.stores=[i]:d.push(i))}function w0(i,o,d,m){o.value=d,o.getSnapshot=m,E0(o)&&b0(i)}function _0(i,o,d){return d(function(){E0(o)&&b0(i)})}function E0(i){var o=i.getSnapshot;i=i.value;try{var d=o();return!as(i,d)}catch{return!0}}function b0(i){var o=Ei(i,1);o!==null&&hs(o,i,1,-1)}function S0(i){var o=Fs();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nu,lastRenderedState:i},o.queue=i,i=i.dispatch=_P.bind(null,Jt,i),[o.memoizedState,i]}function Tu(i,o,d,m){return i={tag:i,create:o,destroy:d,deps:m,next:null},o=Jt.updateQueue,o===null?(o={lastEffect:null,stores:null},Jt.updateQueue=o,o.lastEffect=i.next=i):(d=o.lastEffect,d===null?o.lastEffect=i.next=i:(m=d.next,d.next=i,i.next=m,o.lastEffect=i)),i}function N0(){return Wr().memoizedState}function Oh(i,o,d,m){var x=Fs();Jt.flags|=i,x.memoizedState=Tu(1|o,d,void 0,m===void 0?null:m)}function Dh(i,o,d,m){var x=Wr();m=m===void 0?null:m;var T=void 0;if(_n!==null){var F=_n.memoizedState;if(T=F.destroy,m!==null&&Jm(m,F.deps)){x.memoizedState=Tu(o,d,T,m);return}}Jt.flags|=i,x.memoizedState=Tu(1|o,d,T,m)}function T0(i,o){return Oh(8390656,8,i,o)}function rg(i,o){return Dh(2048,8,i,o)}function C0(i,o){return Dh(4,2,i,o)}function I0(i,o){return Dh(4,4,i,o)}function j0(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function A0(i,o,d){return d=d!=null?d.concat([i]):null,Dh(4,4,j0.bind(null,o,i),d)}function sg(){}function P0(i,o){var d=Wr();o=o===void 0?null:o;var m=d.memoizedState;return m!==null&&o!==null&&Jm(o,m[1])?m[0]:(d.memoizedState=[i,o],i)}function R0(i,o){var d=Wr();o=o===void 0?null:o;var m=d.memoizedState;return m!==null&&o!==null&&Jm(o,m[1])?m[0]:(i=i(),d.memoizedState=[i,o],i)}function k0(i,o,d){return(Sa&21)===0?(i.baseState&&(i.baseState=!1,hr=!0),i.memoizedState=d):(as(d,o)||(d=fa(),Jt.lanes|=d,Na|=d,i.baseState=!0),o)}function xP(i,o){var d=pt;pt=d!==0&&4>d?d:4,i(!0);var m=Xm.transition;Xm.transition={};try{i(!1),o()}finally{pt=d,Xm.transition=m}}function O0(){return Wr().memoizedState}function wP(i,o,d){var m=uo(i);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},D0(i))L0(o,d);else if(d=h0(i,o,d,m),d!==null){var x=rr();hs(d,i,m,x),M0(d,o,m)}}function _P(i,o,d){var m=uo(i),x={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(D0(i))L0(o,x);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var F=o.lastRenderedState,W=T(F,d);if(x.hasEagerState=!0,x.eagerState=W,as(W,F)){var G=o.interleaved;G===null?(x.next=x,Wm(o)):(x.next=G.next,G.next=x),o.interleaved=x;return}}catch{}finally{}d=h0(i,o,x,m),d!==null&&(x=rr(),hs(d,i,m,x),M0(d,o,m))}}function D0(i){var o=i.alternate;return i===Jt||o!==null&&o===Jt}function L0(i,o){bu=kh=!0;var d=i.pending;d===null?o.next=o:(o.next=d.next,d.next=o),i.pending=o}function M0(i,o,d){if((d&4194240)!==0){var m=o.lanes;m&=i.pendingLanes,d|=m,o.lanes=d,Qi(i,d)}}var Lh={readContext:qr,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},EP={readContext:qr,useCallback:function(i,o){return Fs().memoizedState=[i,o===void 0?null:o],i},useContext:qr,useEffect:T0,useImperativeHandle:function(i,o,d){return d=d!=null?d.concat([i]):null,Oh(4194308,4,j0.bind(null,o,i),d)},useLayoutEffect:function(i,o){return Oh(4194308,4,i,o)},useInsertionEffect:function(i,o){return Oh(4,2,i,o)},useMemo:function(i,o){var d=Fs();return o=o===void 0?null:o,i=i(),d.memoizedState=[i,o],i},useReducer:function(i,o,d){var m=Fs();return o=d!==void 0?d(o):o,m.memoizedState=m.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},m.queue=i,i=i.dispatch=wP.bind(null,Jt,i),[m.memoizedState,i]},useRef:function(i){var o=Fs();return i={current:i},o.memoizedState=i},useState:S0,useDebugValue:sg,useDeferredValue:function(i){return Fs().memoizedState=i},useTransition:function(){var i=S0(!1),o=i[0];return i=xP.bind(null,i[1]),Fs().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,d){var m=Jt,x=Fs();if(Qt){if(d===void 0)throw Error(t(407));d=d()}else{if(d=o(),jn===null)throw Error(t(349));(Sa&30)!==0||x0(m,o,d)}x.memoizedState=d;var T={value:d,getSnapshot:o};return x.queue=T,T0(_0.bind(null,m,T,i),[i]),m.flags|=2048,Tu(9,w0.bind(null,m,T,d,o),void 0,null),d},useId:function(){var i=Fs(),o=jn.identifierPrefix;if(Qt){var d=_i,m=wi;d=(m&~(1<<32-er(m)-1)).toString(32)+d,o=":"+o+"R"+d,d=Su++,0<d&&(o+="H"+d.toString(32)),o+=":"}else d=vP++,o=":"+o+"r"+d.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},bP={readContext:qr,useCallback:P0,useContext:qr,useEffect:rg,useImperativeHandle:A0,useInsertionEffect:C0,useLayoutEffect:I0,useMemo:R0,useReducer:tg,useRef:N0,useState:function(){return tg(Nu)},useDebugValue:sg,useDeferredValue:function(i){var o=Wr();return k0(o,_n.memoizedState,i)},useTransition:function(){var i=tg(Nu)[0],o=Wr().memoizedState;return[i,o]},useMutableSource:y0,useSyncExternalStore:v0,useId:O0,unstable_isNewReconciler:!1},SP={readContext:qr,useCallback:P0,useContext:qr,useEffect:rg,useImperativeHandle:A0,useInsertionEffect:C0,useLayoutEffect:I0,useMemo:R0,useReducer:ng,useRef:N0,useState:function(){return ng(Nu)},useDebugValue:sg,useDeferredValue:function(i){var o=Wr();return _n===null?o.memoizedState=i:k0(o,_n.memoizedState,i)},useTransition:function(){var i=ng(Nu)[0],o=Wr().memoizedState;return[i,o]},useMutableSource:y0,useSyncExternalStore:v0,useId:O0,unstable_isNewReconciler:!1};function cs(i,o){if(i&&i.defaultProps){o=le({},o),i=i.defaultProps;for(var d in i)o[d]===void 0&&(o[d]=i[d]);return o}return o}function ig(i,o,d,m){o=i.memoizedState,d=d(m,o),d=d==null?o:le({},o,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var Mh={isMounted:function(i){return(i=i._reactInternals)?es(i)===i:!1},enqueueSetState:function(i,o,d){i=i._reactInternals;var m=rr(),x=uo(i),T=bi(m,x);T.payload=o,d!=null&&(T.callback=d),o=oo(i,T,x),o!==null&&(hs(o,i,x,m),jh(o,i,x))},enqueueReplaceState:function(i,o,d){i=i._reactInternals;var m=rr(),x=uo(i),T=bi(m,x);T.tag=1,T.payload=o,d!=null&&(T.callback=d),o=oo(i,T,x),o!==null&&(hs(o,i,x,m),jh(o,i,x))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var d=rr(),m=uo(i),x=bi(d,m);x.tag=2,o!=null&&(x.callback=o),o=oo(i,x,m),o!==null&&(hs(o,i,m,d),jh(o,i,m))}};function F0(i,o,d,m,x,T,F){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,T,F):o.prototype&&o.prototype.isPureReactComponent?!hu(d,m)||!hu(x,T):!0}function V0(i,o,d){var m=!1,x=ro,T=o.contextType;return typeof T=="object"&&T!==null?T=qr(T):(x=dr(o)?xa:qn.current,m=o.contextTypes,T=(m=m!=null)?Dl(i,x):ro),o=new o(d,T),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Mh,i.stateNode=o,o._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=x,i.__reactInternalMemoizedMaskedChildContext=T),o}function U0(i,o,d,m){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,m),o.state!==i&&Mh.enqueueReplaceState(o,o.state,null)}function og(i,o,d,m){var x=i.stateNode;x.props=d,x.state=i.memoizedState,x.refs={},Hm(i);var T=o.contextType;typeof T=="object"&&T!==null?x.context=qr(T):(T=dr(o)?xa:qn.current,x.context=Dl(i,T)),x.state=i.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(ig(i,o,T,d),x.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(o=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),o!==x.state&&Mh.enqueueReplaceState(x,x.state,null),Ah(i,d,x,m),x.state=i.memoizedState),typeof x.componentDidMount=="function"&&(i.flags|=4194308)}function Bl(i,o){try{var d="",m=o;do d+=Fe(m),m=m.return;while(m);var x=d}catch(T){x=`
Error generating stack: `+T.message+`
`+T.stack}return{value:i,source:o,stack:x,digest:null}}function ag(i,o,d){return{value:i,source:null,stack:d??null,digest:o??null}}function lg(i,o){try{console.error(o.value)}catch(d){setTimeout(function(){throw d})}}var NP=typeof WeakMap=="function"?WeakMap:Map;function $0(i,o,d){d=bi(-1,d),d.tag=3,d.payload={element:null};var m=o.value;return d.callback=function(){qh||(qh=!0,bg=m),lg(i,o)},d}function z0(i,o,d){d=bi(-1,d),d.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var x=o.value;d.payload=function(){return m(x)},d.callback=function(){lg(i,o)}}var T=i.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){lg(i,o),typeof m!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var F=o.stack;this.componentDidCatch(o.value,{componentStack:F!==null?F:""})}),d}function B0(i,o,d){var m=i.pingCache;if(m===null){m=i.pingCache=new NP;var x=new Set;m.set(o,x)}else x=m.get(o),x===void 0&&(x=new Set,m.set(o,x));x.has(d)||(x.add(d),i=VP.bind(null,i,o,d),o.then(i,i))}function q0(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function W0(i,o,d,m,x){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(o=bi(-1,1),o.tag=2,oo(d,o,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=x,i)}var TP=L.ReactCurrentOwner,hr=!1;function nr(i,o,d,m){o.child=i===null?d0(o,null,d,m):Vl(o,i.child,d,m)}function H0(i,o,d,m,x){d=d.render;var T=o.ref;return $l(o,x),m=Zm(i,o,d,m,T,x),d=eg(),i!==null&&!hr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~x,Si(i,o,x)):(Qt&&d&&Lm(o),o.flags|=1,nr(i,o,m,x),o.child)}function K0(i,o,d,m,x){if(i===null){var T=d.type;return typeof T=="function"&&!Ag(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(o.tag=15,o.type=T,G0(i,o,T,m,x)):(i=Yh(d.type,null,m,o,o.mode,x),i.ref=o.ref,i.return=o,o.child=i)}if(T=i.child,(i.lanes&x)===0){var F=T.memoizedProps;if(d=d.compare,d=d!==null?d:hu,d(F,m)&&i.ref===o.ref)return Si(i,o,x)}return o.flags|=1,i=fo(T,m),i.ref=o.ref,i.return=o,o.child=i}function G0(i,o,d,m,x){if(i!==null){var T=i.memoizedProps;if(hu(T,m)&&i.ref===o.ref)if(hr=!1,o.pendingProps=m=T,(i.lanes&x)!==0)(i.flags&131072)!==0&&(hr=!0);else return o.lanes=i.lanes,Si(i,o,x)}return cg(i,o,d,m,x)}function Q0(i,o,d){var m=o.pendingProps,x=m.children,T=i!==null?i.memoizedState:null;if(m.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(Wl,Rr),Rr|=d;else{if((d&1073741824)===0)return i=T!==null?T.baseLanes|d:d,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Lt(Wl,Rr),Rr|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=T!==null?T.baseLanes:d,Lt(Wl,Rr),Rr|=m}else T!==null?(m=T.baseLanes|d,o.memoizedState=null):m=d,Lt(Wl,Rr),Rr|=m;return nr(i,o,x,d),o.child}function Y0(i,o){var d=o.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(o.flags|=512,o.flags|=2097152)}function cg(i,o,d,m,x){var T=dr(d)?xa:qn.current;return T=Dl(o,T),$l(o,x),d=Zm(i,o,d,m,T,x),m=eg(),i!==null&&!hr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~x,Si(i,o,x)):(Qt&&m&&Lm(o),o.flags|=1,nr(i,o,d,x),o.child)}function X0(i,o,d,m,x){if(dr(d)){var T=!0;_h(o)}else T=!1;if($l(o,x),o.stateNode===null)Vh(i,o),V0(o,d,m),og(o,d,m,x),m=!0;else if(i===null){var F=o.stateNode,W=o.memoizedProps;F.props=W;var G=F.context,ie=d.contextType;typeof ie=="object"&&ie!==null?ie=qr(ie):(ie=dr(d)?xa:qn.current,ie=Dl(o,ie));var fe=d.getDerivedStateFromProps,pe=typeof fe=="function"||typeof F.getSnapshotBeforeUpdate=="function";pe||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(W!==m||G!==ie)&&U0(o,F,m,ie),io=!1;var de=o.memoizedState;F.state=de,Ah(o,m,F,x),G=o.memoizedState,W!==m||de!==G||ur.current||io?(typeof fe=="function"&&(ig(o,d,fe,m),G=o.memoizedState),(W=io||F0(o,d,W,m,de,G,ie))?(pe||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(o.flags|=4194308)):(typeof F.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=G),F.props=m,F.state=G,F.context=ie,m=W):(typeof F.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{F=o.stateNode,f0(i,o),W=o.memoizedProps,ie=o.type===o.elementType?W:cs(o.type,W),F.props=ie,pe=o.pendingProps,de=F.context,G=d.contextType,typeof G=="object"&&G!==null?G=qr(G):(G=dr(d)?xa:qn.current,G=Dl(o,G));var Te=d.getDerivedStateFromProps;(fe=typeof Te=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(W!==pe||de!==G)&&U0(o,F,m,G),io=!1,de=o.memoizedState,F.state=de,Ah(o,m,F,x);var ke=o.memoizedState;W!==pe||de!==ke||ur.current||io?(typeof Te=="function"&&(ig(o,d,Te,m),ke=o.memoizedState),(ie=io||F0(o,d,ie,m,de,ke,G)||!1)?(fe||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(m,ke,G),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(m,ke,G)),typeof F.componentDidUpdate=="function"&&(o.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof F.componentDidUpdate!="function"||W===i.memoizedProps&&de===i.memoizedState||(o.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&de===i.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=ke),F.props=m,F.state=ke,F.context=G,m=ie):(typeof F.componentDidUpdate!="function"||W===i.memoizedProps&&de===i.memoizedState||(o.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||W===i.memoizedProps&&de===i.memoizedState||(o.flags|=1024),m=!1)}return ug(i,o,d,m,T,x)}function ug(i,o,d,m,x,T){Y0(i,o);var F=(o.flags&128)!==0;if(!m&&!F)return x&&n0(o,d,!1),Si(i,o,T);m=o.stateNode,TP.current=o;var W=F&&typeof d.getDerivedStateFromError!="function"?null:m.render();return o.flags|=1,i!==null&&F?(o.child=Vl(o,i.child,null,T),o.child=Vl(o,null,W,T)):nr(i,o,W,T),o.memoizedState=m.state,x&&n0(o,d,!0),o.child}function J0(i){var o=i.stateNode;o.pendingContext?e0(i,o.pendingContext,o.pendingContext!==o.context):o.context&&e0(i,o.context,!1),Km(i,o.containerInfo)}function Z0(i,o,d,m,x){return Fl(),Um(x),o.flags|=256,nr(i,o,d,m),o.child}var dg={dehydrated:null,treeContext:null,retryLane:0};function hg(i){return{baseLanes:i,cachePool:null,transitions:null}}function e_(i,o,d){var m=o.pendingProps,x=Xt.current,T=!1,F=(o.flags&128)!==0,W;if((W=F)||(W=i!==null&&i.memoizedState===null?!1:(x&2)!==0),W?(T=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(x|=1),Lt(Xt,x&1),i===null)return Vm(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(F=m.children,i=m.fallback,T?(m=o.mode,T=o.child,F={mode:"hidden",children:F},(m&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=F):T=Xh(F,m,0,null),i=ja(i,m,d,null),T.return=o,i.return=o,T.sibling=i,o.child=T,o.child.memoizedState=hg(d),o.memoizedState=dg,i):fg(o,F));if(x=i.memoizedState,x!==null&&(W=x.dehydrated,W!==null))return CP(i,o,F,m,W,x,d);if(T){T=m.fallback,F=o.mode,x=i.child,W=x.sibling;var G={mode:"hidden",children:m.children};return(F&1)===0&&o.child!==x?(m=o.child,m.childLanes=0,m.pendingProps=G,o.deletions=null):(m=fo(x,G),m.subtreeFlags=x.subtreeFlags&14680064),W!==null?T=fo(W,T):(T=ja(T,F,d,null),T.flags|=2),T.return=o,m.return=o,m.sibling=T,o.child=m,m=T,T=o.child,F=i.child.memoizedState,F=F===null?hg(d):{baseLanes:F.baseLanes|d,cachePool:null,transitions:F.transitions},T.memoizedState=F,T.childLanes=i.childLanes&~d,o.memoizedState=dg,m}return T=i.child,i=T.sibling,m=fo(T,{mode:"visible",children:m.children}),(o.mode&1)===0&&(m.lanes=d),m.return=o,m.sibling=null,i!==null&&(d=o.deletions,d===null?(o.deletions=[i],o.flags|=16):d.push(i)),o.child=m,o.memoizedState=null,m}function fg(i,o){return o=Xh({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Fh(i,o,d,m){return m!==null&&Um(m),Vl(o,i.child,null,d),i=fg(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function CP(i,o,d,m,x,T,F){if(d)return o.flags&256?(o.flags&=-257,m=ag(Error(t(422))),Fh(i,o,F,m)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(T=m.fallback,x=o.mode,m=Xh({mode:"visible",children:m.children},x,0,null),T=ja(T,x,F,null),T.flags|=2,m.return=o,T.return=o,m.sibling=T,o.child=m,(o.mode&1)!==0&&Vl(o,i.child,null,F),o.child.memoizedState=hg(F),o.memoizedState=dg,T);if((o.mode&1)===0)return Fh(i,o,F,null);if(x.data==="$!"){if(m=x.nextSibling&&x.nextSibling.dataset,m)var W=m.dgst;return m=W,T=Error(t(419)),m=ag(T,m,void 0),Fh(i,o,F,m)}if(W=(F&i.childLanes)!==0,hr||W){if(m=jn,m!==null){switch(F&-F){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(m.suspendedLanes|F))!==0?0:x,x!==0&&x!==T.retryLane&&(T.retryLane=x,Ei(i,x),hs(m,i,x,-1))}return jg(),m=ag(Error(t(421))),Fh(i,o,F,m)}return x.data==="$?"?(o.flags|=128,o.child=i.child,o=UP.bind(null,i),x._reactRetry=o,null):(i=T.treeContext,Pr=to(x.nextSibling),Ar=o,Qt=!0,ls=null,i!==null&&(zr[Br++]=wi,zr[Br++]=_i,zr[Br++]=wa,wi=i.id,_i=i.overflow,wa=o),o=fg(o,m.children),o.flags|=4096,o)}function t_(i,o,d){i.lanes|=o;var m=i.alternate;m!==null&&(m.lanes|=o),qm(i.return,o,d)}function pg(i,o,d,m,x){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:x}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=d,T.tailMode=x)}function n_(i,o,d){var m=o.pendingProps,x=m.revealOrder,T=m.tail;if(nr(i,o,m.children,d),m=Xt.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&t_(i,d,o);else if(i.tag===19)t_(i,d,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if(Lt(Xt,m),(o.mode&1)===0)o.memoizedState=null;else switch(x){case"forwards":for(d=o.child,x=null;d!==null;)i=d.alternate,i!==null&&Ph(i)===null&&(x=d),d=d.sibling;d=x,d===null?(x=o.child,o.child=null):(x=d.sibling,d.sibling=null),pg(o,!1,x,d,T);break;case"backwards":for(d=null,x=o.child,o.child=null;x!==null;){if(i=x.alternate,i!==null&&Ph(i)===null){o.child=x;break}i=x.sibling,x.sibling=d,d=x,x=i}pg(o,!0,d,null,T);break;case"together":pg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Vh(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Si(i,o,d){if(i!==null&&(o.dependencies=i.dependencies),Na|=o.lanes,(d&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,d=fo(i,i.pendingProps),o.child=d,d.return=o;i.sibling!==null;)i=i.sibling,d=d.sibling=fo(i,i.pendingProps),d.return=o;d.sibling=null}return o.child}function IP(i,o,d){switch(o.tag){case 3:J0(o),Fl();break;case 5:g0(o);break;case 1:dr(o.type)&&_h(o);break;case 4:Km(o,o.stateNode.containerInfo);break;case 10:var m=o.type._context,x=o.memoizedProps.value;Lt(Ch,m._currentValue),m._currentValue=x;break;case 13:if(m=o.memoizedState,m!==null)return m.dehydrated!==null?(Lt(Xt,Xt.current&1),o.flags|=128,null):(d&o.child.childLanes)!==0?e_(i,o,d):(Lt(Xt,Xt.current&1),i=Si(i,o,d),i!==null?i.sibling:null);Lt(Xt,Xt.current&1);break;case 19:if(m=(d&o.childLanes)!==0,(i.flags&128)!==0){if(m)return n_(i,o,d);o.flags|=128}if(x=o.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Lt(Xt,Xt.current),m)break;return null;case 22:case 23:return o.lanes=0,Q0(i,o,d)}return Si(i,o,d)}var r_,mg,s_,i_;r_=function(i,o){for(var d=o.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===o)break;for(;d.sibling===null;){if(d.return===null||d.return===o)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},mg=function(){},s_=function(i,o,d,m){var x=i.memoizedProps;if(x!==m){i=o.stateNode,ba(Ms.current);var T=null;switch(d){case"input":x=Ot(i,x),m=Ot(i,m),T=[];break;case"select":x=le({},x,{value:void 0}),m=le({},m,{value:void 0}),T=[];break;case"textarea":x=Xr(i,x),m=Xr(i,m),T=[];break;default:typeof x.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=vh)}Bn(d,m);var F;d=null;for(ie in x)if(!m.hasOwnProperty(ie)&&x.hasOwnProperty(ie)&&x[ie]!=null)if(ie==="style"){var W=x[ie];for(F in W)W.hasOwnProperty(F)&&(d||(d={}),d[F]="")}else ie!=="dangerouslySetInnerHTML"&&ie!=="children"&&ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(s.hasOwnProperty(ie)?T||(T=[]):(T=T||[]).push(ie,null));for(ie in m){var G=m[ie];if(W=x!=null?x[ie]:void 0,m.hasOwnProperty(ie)&&G!==W&&(G!=null||W!=null))if(ie==="style")if(W){for(F in W)!W.hasOwnProperty(F)||G&&G.hasOwnProperty(F)||(d||(d={}),d[F]="");for(F in G)G.hasOwnProperty(F)&&W[F]!==G[F]&&(d||(d={}),d[F]=G[F])}else d||(T||(T=[]),T.push(ie,d)),d=G;else ie==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,W=W?W.__html:void 0,G!=null&&W!==G&&(T=T||[]).push(ie,G)):ie==="children"?typeof G!="string"&&typeof G!="number"||(T=T||[]).push(ie,""+G):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&(s.hasOwnProperty(ie)?(G!=null&&ie==="onScroll"&&zt("scroll",i),T||W===G||(T=[])):(T=T||[]).push(ie,G))}d&&(T=T||[]).push("style",d);var ie=T;(o.updateQueue=ie)&&(o.flags|=4)}},i_=function(i,o,d,m){d!==m&&(o.flags|=4)};function Cu(i,o){if(!Qt)switch(i.tailMode){case"hidden":o=i.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Hn(i){var o=i.alternate!==null&&i.alternate.child===i.child,d=0,m=0;if(o)for(var x=i.child;x!==null;)d|=x.lanes|x.childLanes,m|=x.subtreeFlags&14680064,m|=x.flags&14680064,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)d|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=m,i.childLanes=d,o}function jP(i,o,d){var m=o.pendingProps;switch(Mm(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(o),null;case 1:return dr(o.type)&&wh(),Hn(o),null;case 3:return m=o.stateNode,zl(),Bt(ur),Bt(qn),Ym(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(Nh(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ls!==null&&(Tg(ls),ls=null))),mg(i,o),Hn(o),null;case 5:Gm(o);var x=ba(Eu.current);if(d=o.type,i!==null&&o.stateNode!=null)s_(i,o,d,m,x),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!m){if(o.stateNode===null)throw Error(t(166));return Hn(o),null}if(i=ba(Ms.current),Nh(o)){m=o.stateNode,d=o.type;var T=o.memoizedProps;switch(m[Ls]=o,m[yu]=T,i=(o.mode&1)!==0,d){case"dialog":zt("cancel",m),zt("close",m);break;case"iframe":case"object":case"embed":zt("load",m);break;case"video":case"audio":for(x=0;x<pu.length;x++)zt(pu[x],m);break;case"source":zt("error",m);break;case"img":case"image":case"link":zt("error",m),zt("load",m);break;case"details":zt("toggle",m);break;case"input":Tn(m,T),zt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!T.multiple},zt("invalid",m);break;case"textarea":an(m,T),zt("invalid",m)}Bn(d,T),x=null;for(var F in T)if(T.hasOwnProperty(F)){var W=T[F];F==="children"?typeof W=="string"?m.textContent!==W&&(T.suppressHydrationWarning!==!0&&yh(m.textContent,W,i),x=["children",W]):typeof W=="number"&&m.textContent!==""+W&&(T.suppressHydrationWarning!==!0&&yh(m.textContent,W,i),x=["children",""+W]):s.hasOwnProperty(F)&&W!=null&&F==="onScroll"&&zt("scroll",m)}switch(d){case"input":rt(m),br(m,T,!0);break;case"textarea":rt(m),Ts(m);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(m.onclick=vh)}m=x,o.updateQueue=m,m!==null&&(o.flags|=4)}else{F=x.nodeType===9?x:x.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Vt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=F.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=F.createElement(d,{is:m.is}):(i=F.createElement(d),d==="select"&&(F=i,m.multiple?F.multiple=!0:m.size&&(F.size=m.size))):i=F.createElementNS(i,d),i[Ls]=o,i[yu]=m,r_(i,o,!1,!1),o.stateNode=i;e:{switch(F=Is(d,m),d){case"dialog":zt("cancel",i),zt("close",i),x=m;break;case"iframe":case"object":case"embed":zt("load",i),x=m;break;case"video":case"audio":for(x=0;x<pu.length;x++)zt(pu[x],i);x=m;break;case"source":zt("error",i),x=m;break;case"img":case"image":case"link":zt("error",i),zt("load",i),x=m;break;case"details":zt("toggle",i),x=m;break;case"input":Tn(i,m),x=Ot(i,m),zt("invalid",i);break;case"option":x=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},x=le({},m,{value:void 0}),zt("invalid",i);break;case"textarea":an(i,m),x=Xr(i,m),zt("invalid",i);break;default:x=m}Bn(d,x),W=x;for(T in W)if(W.hasOwnProperty(T)){var G=W[T];T==="style"?ui(i,G):T==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&xn(i,G)):T==="children"?typeof G=="string"?(d!=="textarea"||G!=="")&&Nr(i,G):typeof G=="number"&&Nr(i,""+G):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(s.hasOwnProperty(T)?G!=null&&T==="onScroll"&&zt("scroll",i):G!=null&&C(i,T,G,F))}switch(d){case"input":rt(i),br(i,m,!1);break;case"textarea":rt(i),Ts(i);break;case"option":m.value!=null&&i.setAttribute("value",""+Se(m.value));break;case"select":i.multiple=!!m.multiple,T=m.value,T!=null?Sr(i,!!m.multiple,T,!1):m.defaultValue!=null&&Sr(i,!!m.multiple,m.defaultValue,!0);break;default:typeof x.onClick=="function"&&(i.onclick=vh)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Hn(o),null;case 6:if(i&&o.stateNode!=null)i_(i,o,i.memoizedProps,m);else{if(typeof m!="string"&&o.stateNode===null)throw Error(t(166));if(d=ba(Eu.current),ba(Ms.current),Nh(o)){if(m=o.stateNode,d=o.memoizedProps,m[Ls]=o,(T=m.nodeValue!==d)&&(i=Ar,i!==null))switch(i.tag){case 3:yh(m.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&yh(m.nodeValue,d,(i.mode&1)!==0)}T&&(o.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Ls]=o,o.stateNode=m}return Hn(o),null;case 13:if(Bt(Xt),m=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Qt&&Pr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)l0(),Fl(),o.flags|=98560,T=!1;else if(T=Nh(o),m!==null&&m.dehydrated!==null){if(i===null){if(!T)throw Error(t(318));if(T=o.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(t(317));T[Ls]=o}else Fl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Hn(o),T=!1}else ls!==null&&(Tg(ls),ls=null),T=!0;if(!T)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=d,o):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Xt.current&1)!==0?En===0&&(En=3):jg())),o.updateQueue!==null&&(o.flags|=4),Hn(o),null);case 4:return zl(),mg(i,o),i===null&&mu(o.stateNode.containerInfo),Hn(o),null;case 10:return Bm(o.type._context),Hn(o),null;case 17:return dr(o.type)&&wh(),Hn(o),null;case 19:if(Bt(Xt),T=o.memoizedState,T===null)return Hn(o),null;if(m=(o.flags&128)!==0,F=T.rendering,F===null)if(m)Cu(T,!1);else{if(En!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(F=Ph(i),F!==null){for(o.flags|=128,Cu(T,!1),m=F.updateQueue,m!==null&&(o.updateQueue=m,o.flags|=4),o.subtreeFlags=0,m=d,d=o.child;d!==null;)T=d,i=m,T.flags&=14680066,F=T.alternate,F===null?(T.childLanes=0,T.lanes=i,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=F.childLanes,T.lanes=F.lanes,T.child=F.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=F.memoizedProps,T.memoizedState=F.memoizedState,T.updateQueue=F.updateQueue,T.type=F.type,i=F.dependencies,T.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return Lt(Xt,Xt.current&1|2),o.child}i=i.sibling}T.tail!==null&&Dt()>Hl&&(o.flags|=128,m=!0,Cu(T,!1),o.lanes=4194304)}else{if(!m)if(i=Ph(F),i!==null){if(o.flags|=128,m=!0,d=i.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),Cu(T,!0),T.tail===null&&T.tailMode==="hidden"&&!F.alternate&&!Qt)return Hn(o),null}else 2*Dt()-T.renderingStartTime>Hl&&d!==1073741824&&(o.flags|=128,m=!0,Cu(T,!1),o.lanes=4194304);T.isBackwards?(F.sibling=o.child,o.child=F):(d=T.last,d!==null?d.sibling=F:o.child=F,T.last=F)}return T.tail!==null?(o=T.tail,T.rendering=o,T.tail=o.sibling,T.renderingStartTime=Dt(),o.sibling=null,d=Xt.current,Lt(Xt,m?d&1|2:d&1),o):(Hn(o),null);case 22:case 23:return Ig(),m=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(o.flags|=8192),m&&(o.mode&1)!==0?(Rr&1073741824)!==0&&(Hn(o),o.subtreeFlags&6&&(o.flags|=8192)):Hn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function AP(i,o){switch(Mm(o),o.tag){case 1:return dr(o.type)&&wh(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return zl(),Bt(ur),Bt(qn),Ym(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Gm(o),null;case 13:if(Bt(Xt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Fl()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Bt(Xt),null;case 4:return zl(),null;case 10:return Bm(o.type._context),null;case 22:case 23:return Ig(),null;case 24:return null;default:return null}}var Uh=!1,Kn=!1,PP=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function ql(i,o){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){rn(i,o,m)}else d.current=null}function gg(i,o,d){try{d()}catch(m){rn(i,o,m)}}var o_=!1;function RP(i,o){if(Im=Ji,i=Fw(),wm(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var x=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var F=0,W=-1,G=-1,ie=0,fe=0,pe=i,de=null;t:for(;;){for(var Te;pe!==d||x!==0&&pe.nodeType!==3||(W=F+x),pe!==T||m!==0&&pe.nodeType!==3||(G=F+m),pe.nodeType===3&&(F+=pe.nodeValue.length),(Te=pe.firstChild)!==null;)de=pe,pe=Te;for(;;){if(pe===i)break t;if(de===d&&++ie===x&&(W=F),de===T&&++fe===m&&(G=F),(Te=pe.nextSibling)!==null)break;pe=de,de=pe.parentNode}pe=Te}d=W===-1||G===-1?null:{start:W,end:G}}else d=null}d=d||{start:0,end:0}}else d=null;for(jm={focusedElem:i,selectionRange:d},Ji=!1,Pe=o;Pe!==null;)if(o=Pe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Pe=i;else for(;Pe!==null;){o=Pe;try{var ke=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var Oe=ke.memoizedProps,ln=ke.memoizedState,ee=o.stateNode,Y=ee.getSnapshotBeforeUpdate(o.elementType===o.type?Oe:cs(o.type,Oe),ln);ee.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:var se=o.stateNode.containerInfo;se.nodeType===1?se.textContent="":se.nodeType===9&&se.documentElement&&se.removeChild(se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ge){rn(o,o.return,ge)}if(i=o.sibling,i!==null){i.return=o.return,Pe=i;break}Pe=o.return}return ke=o_,o_=!1,ke}function Iu(i,o,d){var m=o.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var x=m=m.next;do{if((x.tag&i)===i){var T=x.destroy;x.destroy=void 0,T!==void 0&&gg(o,d,T)}x=x.next}while(x!==m)}}function $h(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&i)===i){var m=d.create;d.destroy=m()}d=d.next}while(d!==o)}}function yg(i){var o=i.ref;if(o!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof o=="function"?o(i):o.current=i}}function a_(i){var o=i.alternate;o!==null&&(i.alternate=null,a_(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Ls],delete o[yu],delete o[km],delete o[pP],delete o[mP])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function l_(i){return i.tag===5||i.tag===3||i.tag===4}function c_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||l_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vg(i,o,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?d.nodeType===8?d.parentNode.insertBefore(i,o):d.insertBefore(i,o):(d.nodeType===8?(o=d.parentNode,o.insertBefore(i,d)):(o=d,o.appendChild(i)),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=vh));else if(m!==4&&(i=i.child,i!==null))for(vg(i,o,d),i=i.sibling;i!==null;)vg(i,o,d),i=i.sibling}function xg(i,o,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?d.insertBefore(i,o):d.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(xg(i,o,d),i=i.sibling;i!==null;)xg(i,o,d),i=i.sibling}var On=null,us=!1;function ao(i,o,d){for(d=d.child;d!==null;)u_(i,o,d),d=d.sibling}function u_(i,o,d){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(da,d)}catch{}switch(d.tag){case 5:Kn||ql(d,o);case 6:var m=On,x=us;On=null,ao(i,o,d),On=m,us=x,On!==null&&(us?(i=On,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):On.removeChild(d.stateNode));break;case 18:On!==null&&(us?(i=On,d=d.stateNode,i.nodeType===8?Rm(i.parentNode,d):i.nodeType===1&&Rm(i,d),is(i)):Rm(On,d.stateNode));break;case 4:m=On,x=us,On=d.stateNode.containerInfo,us=!0,ao(i,o,d),On=m,us=x;break;case 0:case 11:case 14:case 15:if(!Kn&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){x=m=m.next;do{var T=x,F=T.destroy;T=T.tag,F!==void 0&&((T&2)!==0||(T&4)!==0)&&gg(d,o,F),x=x.next}while(x!==m)}ao(i,o,d);break;case 1:if(!Kn&&(ql(d,o),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(W){rn(d,o,W)}ao(i,o,d);break;case 21:ao(i,o,d);break;case 22:d.mode&1?(Kn=(m=Kn)||d.memoizedState!==null,ao(i,o,d),Kn=m):ao(i,o,d);break;default:ao(i,o,d)}}function d_(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new PP),o.forEach(function(m){var x=$P.bind(null,i,m);d.has(m)||(d.add(m),m.then(x,x))})}}function ds(i,o){var d=o.deletions;if(d!==null)for(var m=0;m<d.length;m++){var x=d[m];try{var T=i,F=o,W=F;e:for(;W!==null;){switch(W.tag){case 5:On=W.stateNode,us=!1;break e;case 3:On=W.stateNode.containerInfo,us=!0;break e;case 4:On=W.stateNode.containerInfo,us=!0;break e}W=W.return}if(On===null)throw Error(t(160));u_(T,F,x),On=null,us=!1;var G=x.alternate;G!==null&&(G.return=null),x.return=null}catch(ie){rn(x,o,ie)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)h_(o,i),o=o.sibling}function h_(i,o){var d=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ds(o,i),Vs(i),m&4){try{Iu(3,i,i.return),$h(3,i)}catch(Oe){rn(i,i.return,Oe)}try{Iu(5,i,i.return)}catch(Oe){rn(i,i.return,Oe)}}break;case 1:ds(o,i),Vs(i),m&512&&d!==null&&ql(d,d.return);break;case 5:if(ds(o,i),Vs(i),m&512&&d!==null&&ql(d,d.return),i.flags&32){var x=i.stateNode;try{Nr(x,"")}catch(Oe){rn(i,i.return,Oe)}}if(m&4&&(x=i.stateNode,x!=null)){var T=i.memoizedProps,F=d!==null?d.memoizedProps:T,W=i.type,G=i.updateQueue;if(i.updateQueue=null,G!==null)try{W==="input"&&T.type==="radio"&&T.name!=null&&nn(x,T),Is(W,F);var ie=Is(W,T);for(F=0;F<G.length;F+=2){var fe=G[F],pe=G[F+1];fe==="style"?ui(x,pe):fe==="dangerouslySetInnerHTML"?xn(x,pe):fe==="children"?Nr(x,pe):C(x,fe,pe,ie)}switch(W){case"input":$n(x,T);break;case"textarea":Ns(x,T);break;case"select":var de=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!T.multiple;var Te=T.value;Te!=null?Sr(x,!!T.multiple,Te,!1):de!==!!T.multiple&&(T.defaultValue!=null?Sr(x,!!T.multiple,T.defaultValue,!0):Sr(x,!!T.multiple,T.multiple?[]:"",!1))}x[yu]=T}catch(Oe){rn(i,i.return,Oe)}}break;case 6:if(ds(o,i),Vs(i),m&4){if(i.stateNode===null)throw Error(t(162));x=i.stateNode,T=i.memoizedProps;try{x.nodeValue=T}catch(Oe){rn(i,i.return,Oe)}}break;case 3:if(ds(o,i),Vs(i),m&4&&d!==null&&d.memoizedState.isDehydrated)try{is(o.containerInfo)}catch(Oe){rn(i,i.return,Oe)}break;case 4:ds(o,i),Vs(i);break;case 13:ds(o,i),Vs(i),x=i.child,x.flags&8192&&(T=x.memoizedState!==null,x.stateNode.isHidden=T,!T||x.alternate!==null&&x.alternate.memoizedState!==null||(Eg=Dt())),m&4&&d_(i);break;case 22:if(fe=d!==null&&d.memoizedState!==null,i.mode&1?(Kn=(ie=Kn)||fe,ds(o,i),Kn=ie):ds(o,i),Vs(i),m&8192){if(ie=i.memoizedState!==null,(i.stateNode.isHidden=ie)&&!fe&&(i.mode&1)!==0)for(Pe=i,fe=i.child;fe!==null;){for(pe=Pe=fe;Pe!==null;){switch(de=Pe,Te=de.child,de.tag){case 0:case 11:case 14:case 15:Iu(4,de,de.return);break;case 1:ql(de,de.return);var ke=de.stateNode;if(typeof ke.componentWillUnmount=="function"){m=de,d=de.return;try{o=m,ke.props=o.memoizedProps,ke.state=o.memoizedState,ke.componentWillUnmount()}catch(Oe){rn(m,d,Oe)}}break;case 5:ql(de,de.return);break;case 22:if(de.memoizedState!==null){m_(pe);continue}}Te!==null?(Te.return=de,Pe=Te):m_(pe)}fe=fe.sibling}e:for(fe=null,pe=i;;){if(pe.tag===5){if(fe===null){fe=pe;try{x=pe.stateNode,ie?(T=x.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(W=pe.stateNode,G=pe.memoizedProps.style,F=G!=null&&G.hasOwnProperty("display")?G.display:null,W.style.display=Cs("display",F))}catch(Oe){rn(i,i.return,Oe)}}}else if(pe.tag===6){if(fe===null)try{pe.stateNode.nodeValue=ie?"":pe.memoizedProps}catch(Oe){rn(i,i.return,Oe)}}else if((pe.tag!==22&&pe.tag!==23||pe.memoizedState===null||pe===i)&&pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===i)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===i)break e;fe===pe&&(fe=null),pe=pe.return}fe===pe&&(fe=null),pe.sibling.return=pe.return,pe=pe.sibling}}break;case 19:ds(o,i),Vs(i),m&4&&d_(i);break;case 21:break;default:ds(o,i),Vs(i)}}function Vs(i){var o=i.flags;if(o&2){try{e:{for(var d=i.return;d!==null;){if(l_(d)){var m=d;break e}d=d.return}throw Error(t(160))}switch(m.tag){case 5:var x=m.stateNode;m.flags&32&&(Nr(x,""),m.flags&=-33);var T=c_(i);xg(i,T,x);break;case 3:case 4:var F=m.stateNode.containerInfo,W=c_(i);vg(i,W,F);break;default:throw Error(t(161))}}catch(G){rn(i,i.return,G)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function kP(i,o,d){Pe=i,f_(i)}function f_(i,o,d){for(var m=(i.mode&1)!==0;Pe!==null;){var x=Pe,T=x.child;if(x.tag===22&&m){var F=x.memoizedState!==null||Uh;if(!F){var W=x.alternate,G=W!==null&&W.memoizedState!==null||Kn;W=Uh;var ie=Kn;if(Uh=F,(Kn=G)&&!ie)for(Pe=x;Pe!==null;)F=Pe,G=F.child,F.tag===22&&F.memoizedState!==null?g_(x):G!==null?(G.return=F,Pe=G):g_(x);for(;T!==null;)Pe=T,f_(T),T=T.sibling;Pe=x,Uh=W,Kn=ie}p_(i)}else(x.subtreeFlags&8772)!==0&&T!==null?(T.return=x,Pe=T):p_(i)}}function p_(i){for(;Pe!==null;){var o=Pe;if((o.flags&8772)!==0){var d=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Kn||$h(5,o);break;case 1:var m=o.stateNode;if(o.flags&4&&!Kn)if(d===null)m.componentDidMount();else{var x=o.elementType===o.type?d.memoizedProps:cs(o.type,d.memoizedProps);m.componentDidUpdate(x,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var T=o.updateQueue;T!==null&&m0(o,T,m);break;case 3:var F=o.updateQueue;if(F!==null){if(d=null,o.child!==null)switch(o.child.tag){case 5:d=o.child.stateNode;break;case 1:d=o.child.stateNode}m0(o,F,d)}break;case 5:var W=o.stateNode;if(d===null&&o.flags&4){d=W;var G=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&d.focus();break;case"img":G.src&&(d.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var ie=o.alternate;if(ie!==null){var fe=ie.memoizedState;if(fe!==null){var pe=fe.dehydrated;pe!==null&&is(pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Kn||o.flags&512&&yg(o)}catch(de){rn(o,o.return,de)}}if(o===i){Pe=null;break}if(d=o.sibling,d!==null){d.return=o.return,Pe=d;break}Pe=o.return}}function m_(i){for(;Pe!==null;){var o=Pe;if(o===i){Pe=null;break}var d=o.sibling;if(d!==null){d.return=o.return,Pe=d;break}Pe=o.return}}function g_(i){for(;Pe!==null;){var o=Pe;try{switch(o.tag){case 0:case 11:case 15:var d=o.return;try{$h(4,o)}catch(G){rn(o,d,G)}break;case 1:var m=o.stateNode;if(typeof m.componentDidMount=="function"){var x=o.return;try{m.componentDidMount()}catch(G){rn(o,x,G)}}var T=o.return;try{yg(o)}catch(G){rn(o,T,G)}break;case 5:var F=o.return;try{yg(o)}catch(G){rn(o,F,G)}}}catch(G){rn(o,o.return,G)}if(o===i){Pe=null;break}var W=o.sibling;if(W!==null){W.return=o.return,Pe=W;break}Pe=o.return}}var OP=Math.ceil,zh=L.ReactCurrentDispatcher,wg=L.ReactCurrentOwner,Hr=L.ReactCurrentBatchConfig,Et=0,jn=null,hn=null,Dn=0,Rr=0,Wl=no(0),En=0,ju=null,Na=0,Bh=0,_g=0,Au=null,fr=null,Eg=0,Hl=1/0,Ni=null,qh=!1,bg=null,lo=null,Wh=!1,co=null,Hh=0,Pu=0,Sg=null,Kh=-1,Gh=0;function rr(){return(Et&6)!==0?Dt():Kh!==-1?Kh:Kh=Dt()}function uo(i){return(i.mode&1)===0?1:(Et&2)!==0&&Dn!==0?Dn&-Dn:yP.transition!==null?(Gh===0&&(Gh=fa()),Gh):(i=pt,i!==0||(i=window.event,i=i===void 0?16:iu(i.type)),i)}function hs(i,o,d,m){if(50<Pu)throw Pu=0,Sg=null,Error(t(185));Gi(i,d,m),((Et&2)===0||i!==jn)&&(i===jn&&((Et&2)===0&&(Bh|=d),En===4&&ho(i,Dn)),pr(i,m),d===1&&Et===0&&(o.mode&1)===0&&(Hl=Dt()+500,Eh&&so()))}function pr(i,o){var d=i.callbackNode;fi(i,o);var m=ha(i,i===jn?Dn:0);if(m===0)d!==null&&eu(d),i.callbackNode=null,i.callbackPriority=0;else if(o=m&-m,i.callbackPriority!==o){if(d!=null&&eu(d),o===1)i.tag===0?gP(v_.bind(null,i)):r0(v_.bind(null,i)),hP(function(){(Et&6)===0&&so()}),d=null;else{switch(Yi(m)){case 1:d=ua;break;case 4:d=Wi;break;case 16:d=Vr;break;case 536870912:d=Gd;break;default:d=Vr}d=T_(d,y_.bind(null,i))}i.callbackPriority=o,i.callbackNode=d}}function y_(i,o){if(Kh=-1,Gh=0,(Et&6)!==0)throw Error(t(327));var d=i.callbackNode;if(Kl()&&i.callbackNode!==d)return null;var m=ha(i,i===jn?Dn:0);if(m===0)return null;if((m&30)!==0||(m&i.expiredLanes)!==0||o)o=Qh(i,m);else{o=m;var x=Et;Et|=2;var T=w_();(jn!==i||Dn!==o)&&(Ni=null,Hl=Dt()+500,Ca(i,o));do try{MP();break}catch(W){x_(i,W)}while(!0);zm(),zh.current=T,Et=x,hn!==null?o=0:(jn=null,Dn=0,o=En)}if(o!==0){if(o===2&&(x=Cr(i),x!==0&&(m=x,o=Ng(i,x))),o===1)throw d=ju,Ca(i,0),ho(i,m),pr(i,Dt()),d;if(o===6)ho(i,m);else{if(x=i.current.alternate,(m&30)===0&&!DP(x)&&(o=Qh(i,m),o===2&&(T=Cr(i),T!==0&&(m=T,o=Ng(i,T))),o===1))throw d=ju,Ca(i,0),ho(i,m),pr(i,Dt()),d;switch(i.finishedWork=x,i.finishedLanes=m,o){case 0:case 1:throw Error(t(345));case 2:Ia(i,fr,Ni);break;case 3:if(ho(i,m),(m&130023424)===m&&(o=Eg+500-Dt(),10<o)){if(ha(i,0)!==0)break;if(x=i.suspendedLanes,(x&m)!==m){rr(),i.pingedLanes|=i.suspendedLanes&x;break}i.timeoutHandle=Pm(Ia.bind(null,i,fr,Ni),o);break}Ia(i,fr,Ni);break;case 4:if(ho(i,m),(m&4194240)===m)break;for(o=i.eventTimes,x=-1;0<m;){var F=31-er(m);T=1<<F,F=o[F],F>x&&(x=F),m&=~T}if(m=x,m=Dt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*OP(m/1960))-m,10<m){i.timeoutHandle=Pm(Ia.bind(null,i,fr,Ni),m);break}Ia(i,fr,Ni);break;case 5:Ia(i,fr,Ni);break;default:throw Error(t(329))}}}return pr(i,Dt()),i.callbackNode===d?y_.bind(null,i):null}function Ng(i,o){var d=Au;return i.current.memoizedState.isDehydrated&&(Ca(i,o).flags|=256),i=Qh(i,o),i!==2&&(o=fr,fr=d,o!==null&&Tg(o)),i}function Tg(i){fr===null?fr=i:fr.push.apply(fr,i)}function DP(i){for(var o=i;;){if(o.flags&16384){var d=o.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var x=d[m],T=x.getSnapshot;x=x.value;try{if(!as(T(),x))return!1}catch{return!1}}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ho(i,o){for(o&=~_g,o&=~Bh,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var d=31-er(o),m=1<<d;i[d]=-1,o&=~m}}function v_(i){if((Et&6)!==0)throw Error(t(327));Kl();var o=ha(i,0);if((o&1)===0)return pr(i,Dt()),null;var d=Qh(i,o);if(i.tag!==0&&d===2){var m=Cr(i);m!==0&&(o=m,d=Ng(i,m))}if(d===1)throw d=ju,Ca(i,0),ho(i,o),pr(i,Dt()),d;if(d===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Ia(i,fr,Ni),pr(i,Dt()),null}function Cg(i,o){var d=Et;Et|=1;try{return i(o)}finally{Et=d,Et===0&&(Hl=Dt()+500,Eh&&so())}}function Ta(i){co!==null&&co.tag===0&&(Et&6)===0&&Kl();var o=Et;Et|=1;var d=Hr.transition,m=pt;try{if(Hr.transition=null,pt=1,i)return i()}finally{pt=m,Hr.transition=d,Et=o,(Et&6)===0&&so()}}function Ig(){Rr=Wl.current,Bt(Wl)}function Ca(i,o){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,dP(d)),hn!==null)for(d=hn.return;d!==null;){var m=d;switch(Mm(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&wh();break;case 3:zl(),Bt(ur),Bt(qn),Ym();break;case 5:Gm(m);break;case 4:zl();break;case 13:Bt(Xt);break;case 19:Bt(Xt);break;case 10:Bm(m.type._context);break;case 22:case 23:Ig()}d=d.return}if(jn=i,hn=i=fo(i.current,null),Dn=Rr=o,En=0,ju=null,_g=Bh=Na=0,fr=Au=null,Ea!==null){for(o=0;o<Ea.length;o++)if(d=Ea[o],m=d.interleaved,m!==null){d.interleaved=null;var x=m.next,T=d.pending;if(T!==null){var F=T.next;T.next=x,m.next=F}d.pending=m}Ea=null}return i}function x_(i,o){do{var d=hn;try{if(zm(),Rh.current=Lh,kh){for(var m=Jt.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}kh=!1}if(Sa=0,In=_n=Jt=null,bu=!1,Su=0,wg.current=null,d===null||d.return===null){En=1,ju=o,hn=null;break}e:{var T=i,F=d.return,W=d,G=o;if(o=Dn,W.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var ie=G,fe=W,pe=fe.tag;if((fe.mode&1)===0&&(pe===0||pe===11||pe===15)){var de=fe.alternate;de?(fe.updateQueue=de.updateQueue,fe.memoizedState=de.memoizedState,fe.lanes=de.lanes):(fe.updateQueue=null,fe.memoizedState=null)}var Te=q0(F);if(Te!==null){Te.flags&=-257,W0(Te,F,W,T,o),Te.mode&1&&B0(T,ie,o),o=Te,G=ie;var ke=o.updateQueue;if(ke===null){var Oe=new Set;Oe.add(G),o.updateQueue=Oe}else ke.add(G);break e}else{if((o&1)===0){B0(T,ie,o),jg();break e}G=Error(t(426))}}else if(Qt&&W.mode&1){var ln=q0(F);if(ln!==null){(ln.flags&65536)===0&&(ln.flags|=256),W0(ln,F,W,T,o),Um(Bl(G,W));break e}}T=G=Bl(G,W),En!==4&&(En=2),Au===null?Au=[T]:Au.push(T),T=F;do{switch(T.tag){case 3:T.flags|=65536,o&=-o,T.lanes|=o;var ee=$0(T,G,o);p0(T,ee);break e;case 1:W=G;var Y=T.type,se=T.stateNode;if((T.flags&128)===0&&(typeof Y.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(lo===null||!lo.has(se)))){T.flags|=65536,o&=-o,T.lanes|=o;var ge=z0(T,W,o);p0(T,ge);break e}}T=T.return}while(T!==null)}E_(d)}catch(Le){o=Le,hn===d&&d!==null&&(hn=d=d.return);continue}break}while(!0)}function w_(){var i=zh.current;return zh.current=Lh,i===null?Lh:i}function jg(){(En===0||En===3||En===2)&&(En=4),jn===null||(Na&268435455)===0&&(Bh&268435455)===0||ho(jn,Dn)}function Qh(i,o){var d=Et;Et|=2;var m=w_();(jn!==i||Dn!==o)&&(Ni=null,Ca(i,o));do try{LP();break}catch(x){x_(i,x)}while(!0);if(zm(),Et=d,zh.current=m,hn!==null)throw Error(t(261));return jn=null,Dn=0,En}function LP(){for(;hn!==null;)__(hn)}function MP(){for(;hn!==null&&!Hd();)__(hn)}function __(i){var o=N_(i.alternate,i,Rr);i.memoizedProps=i.pendingProps,o===null?E_(i):hn=o,wg.current=null}function E_(i){var o=i;do{var d=o.alternate;if(i=o.return,(o.flags&32768)===0){if(d=jP(d,o,Rr),d!==null){hn=d;return}}else{if(d=AP(d,o),d!==null){d.flags&=32767,hn=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{En=6,hn=null;return}}if(o=o.sibling,o!==null){hn=o;return}hn=o=i}while(o!==null);En===0&&(En=5)}function Ia(i,o,d){var m=pt,x=Hr.transition;try{Hr.transition=null,pt=1,FP(i,o,d,m)}finally{Hr.transition=x,pt=m}return null}function FP(i,o,d,m){do Kl();while(co!==null);if((Et&6)!==0)throw Error(t(327));d=i.finishedWork;var x=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var T=d.lanes|d.childLanes;if(Rt(i,T),i===jn&&(hn=jn=null,Dn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Wh||(Wh=!0,T_(Vr,function(){return Kl(),null})),T=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||T){T=Hr.transition,Hr.transition=null;var F=pt;pt=1;var W=Et;Et|=4,wg.current=null,RP(i,d),h_(d,i),sP(jm),Ji=!!Im,jm=Im=null,i.current=d,kP(d),hm(),Et=W,pt=F,Hr.transition=T}else i.current=d;if(Wh&&(Wh=!1,co=i,Hh=x),T=i.pendingLanes,T===0&&(lo=null),Qd(d.stateNode),pr(i,Dt()),o!==null)for(m=i.onRecoverableError,d=0;d<o.length;d++)x=o[d],m(x.value,{componentStack:x.stack,digest:x.digest});if(qh)throw qh=!1,i=bg,bg=null,i;return(Hh&1)!==0&&i.tag!==0&&Kl(),T=i.pendingLanes,(T&1)!==0?i===Sg?Pu++:(Pu=0,Sg=i):Pu=0,so(),null}function Kl(){if(co!==null){var i=Yi(Hh),o=Hr.transition,d=pt;try{if(Hr.transition=null,pt=16>i?16:i,co===null)var m=!1;else{if(i=co,co=null,Hh=0,(Et&6)!==0)throw Error(t(331));var x=Et;for(Et|=4,Pe=i.current;Pe!==null;){var T=Pe,F=T.child;if((Pe.flags&16)!==0){var W=T.deletions;if(W!==null){for(var G=0;G<W.length;G++){var ie=W[G];for(Pe=ie;Pe!==null;){var fe=Pe;switch(fe.tag){case 0:case 11:case 15:Iu(8,fe,T)}var pe=fe.child;if(pe!==null)pe.return=fe,Pe=pe;else for(;Pe!==null;){fe=Pe;var de=fe.sibling,Te=fe.return;if(a_(fe),fe===ie){Pe=null;break}if(de!==null){de.return=Te,Pe=de;break}Pe=Te}}}var ke=T.alternate;if(ke!==null){var Oe=ke.child;if(Oe!==null){ke.child=null;do{var ln=Oe.sibling;Oe.sibling=null,Oe=ln}while(Oe!==null)}}Pe=T}}if((T.subtreeFlags&2064)!==0&&F!==null)F.return=T,Pe=F;else e:for(;Pe!==null;){if(T=Pe,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:Iu(9,T,T.return)}var ee=T.sibling;if(ee!==null){ee.return=T.return,Pe=ee;break e}Pe=T.return}}var Y=i.current;for(Pe=Y;Pe!==null;){F=Pe;var se=F.child;if((F.subtreeFlags&2064)!==0&&se!==null)se.return=F,Pe=se;else e:for(F=Y;Pe!==null;){if(W=Pe,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:$h(9,W)}}catch(Le){rn(W,W.return,Le)}if(W===F){Pe=null;break e}var ge=W.sibling;if(ge!==null){ge.return=W.return,Pe=ge;break e}Pe=W.return}}if(Et=x,so(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(da,i)}catch{}m=!0}return m}finally{pt=d,Hr.transition=o}}return!1}function b_(i,o,d){o=Bl(d,o),o=$0(i,o,1),i=oo(i,o,1),o=rr(),i!==null&&(Gi(i,1,o),pr(i,o))}function rn(i,o,d){if(i.tag===3)b_(i,i,d);else for(;o!==null;){if(o.tag===3){b_(o,i,d);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(lo===null||!lo.has(m))){i=Bl(d,i),i=z0(o,i,1),o=oo(o,i,1),i=rr(),o!==null&&(Gi(o,1,i),pr(o,i));break}}o=o.return}}function VP(i,o,d){var m=i.pingCache;m!==null&&m.delete(o),o=rr(),i.pingedLanes|=i.suspendedLanes&d,jn===i&&(Dn&d)===d&&(En===4||En===3&&(Dn&130023424)===Dn&&500>Dt()-Eg?Ca(i,0):_g|=d),pr(i,o)}function S_(i,o){o===0&&((i.mode&1)===0?o=1:(o=gl,gl<<=1,(gl&130023424)===0&&(gl=4194304)));var d=rr();i=Ei(i,o),i!==null&&(Gi(i,o,d),pr(i,d))}function UP(i){var o=i.memoizedState,d=0;o!==null&&(d=o.retryLane),S_(i,d)}function $P(i,o){var d=0;switch(i.tag){case 13:var m=i.stateNode,x=i.memoizedState;x!==null&&(d=x.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(o),S_(i,d)}var N_;N_=function(i,o,d){if(i!==null)if(i.memoizedProps!==o.pendingProps||ur.current)hr=!0;else{if((i.lanes&d)===0&&(o.flags&128)===0)return hr=!1,IP(i,o,d);hr=(i.flags&131072)!==0}else hr=!1,Qt&&(o.flags&1048576)!==0&&s0(o,Sh,o.index);switch(o.lanes=0,o.tag){case 2:var m=o.type;Vh(i,o),i=o.pendingProps;var x=Dl(o,qn.current);$l(o,d),x=Zm(null,o,m,i,x,d);var T=eg();return o.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,dr(m)?(T=!0,_h(o)):T=!1,o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,Hm(o),x.updater=Mh,o.stateNode=x,x._reactInternals=o,og(o,m,i,d),o=ug(null,o,m,!0,T,d)):(o.tag=0,Qt&&T&&Lm(o),nr(null,o,x,d),o=o.child),o;case 16:m=o.elementType;e:{switch(Vh(i,o),i=o.pendingProps,x=m._init,m=x(m._payload),o.type=m,x=o.tag=BP(m),i=cs(m,i),x){case 0:o=cg(null,o,m,i,d);break e;case 1:o=X0(null,o,m,i,d);break e;case 11:o=H0(null,o,m,i,d);break e;case 14:o=K0(null,o,m,cs(m.type,i),d);break e}throw Error(t(306,m,""))}return o;case 0:return m=o.type,x=o.pendingProps,x=o.elementType===m?x:cs(m,x),cg(i,o,m,x,d);case 1:return m=o.type,x=o.pendingProps,x=o.elementType===m?x:cs(m,x),X0(i,o,m,x,d);case 3:e:{if(J0(o),i===null)throw Error(t(387));m=o.pendingProps,T=o.memoizedState,x=T.element,f0(i,o),Ah(o,m,null,d);var F=o.memoizedState;if(m=F.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){x=Bl(Error(t(423)),o),o=Z0(i,o,m,d,x);break e}else if(m!==x){x=Bl(Error(t(424)),o),o=Z0(i,o,m,d,x);break e}else for(Pr=to(o.stateNode.containerInfo.firstChild),Ar=o,Qt=!0,ls=null,d=d0(o,null,m,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Fl(),m===x){o=Si(i,o,d);break e}nr(i,o,m,d)}o=o.child}return o;case 5:return g0(o),i===null&&Vm(o),m=o.type,x=o.pendingProps,T=i!==null?i.memoizedProps:null,F=x.children,Am(m,x)?F=null:T!==null&&Am(m,T)&&(o.flags|=32),Y0(i,o),nr(i,o,F,d),o.child;case 6:return i===null&&Vm(o),null;case 13:return e_(i,o,d);case 4:return Km(o,o.stateNode.containerInfo),m=o.pendingProps,i===null?o.child=Vl(o,null,m,d):nr(i,o,m,d),o.child;case 11:return m=o.type,x=o.pendingProps,x=o.elementType===m?x:cs(m,x),H0(i,o,m,x,d);case 7:return nr(i,o,o.pendingProps,d),o.child;case 8:return nr(i,o,o.pendingProps.children,d),o.child;case 12:return nr(i,o,o.pendingProps.children,d),o.child;case 10:e:{if(m=o.type._context,x=o.pendingProps,T=o.memoizedProps,F=x.value,Lt(Ch,m._currentValue),m._currentValue=F,T!==null)if(as(T.value,F)){if(T.children===x.children&&!ur.current){o=Si(i,o,d);break e}}else for(T=o.child,T!==null&&(T.return=o);T!==null;){var W=T.dependencies;if(W!==null){F=T.child;for(var G=W.firstContext;G!==null;){if(G.context===m){if(T.tag===1){G=bi(-1,d&-d),G.tag=2;var ie=T.updateQueue;if(ie!==null){ie=ie.shared;var fe=ie.pending;fe===null?G.next=G:(G.next=fe.next,fe.next=G),ie.pending=G}}T.lanes|=d,G=T.alternate,G!==null&&(G.lanes|=d),qm(T.return,d,o),W.lanes|=d;break}G=G.next}}else if(T.tag===10)F=T.type===o.type?null:T.child;else if(T.tag===18){if(F=T.return,F===null)throw Error(t(341));F.lanes|=d,W=F.alternate,W!==null&&(W.lanes|=d),qm(F,d,o),F=T.sibling}else F=T.child;if(F!==null)F.return=T;else for(F=T;F!==null;){if(F===o){F=null;break}if(T=F.sibling,T!==null){T.return=F.return,F=T;break}F=F.return}T=F}nr(i,o,x.children,d),o=o.child}return o;case 9:return x=o.type,m=o.pendingProps.children,$l(o,d),x=qr(x),m=m(x),o.flags|=1,nr(i,o,m,d),o.child;case 14:return m=o.type,x=cs(m,o.pendingProps),x=cs(m.type,x),K0(i,o,m,x,d);case 15:return G0(i,o,o.type,o.pendingProps,d);case 17:return m=o.type,x=o.pendingProps,x=o.elementType===m?x:cs(m,x),Vh(i,o),o.tag=1,dr(m)?(i=!0,_h(o)):i=!1,$l(o,d),V0(o,m,x),og(o,m,x,d),ug(null,o,m,!0,i,d);case 19:return n_(i,o,d);case 22:return Q0(i,o,d)}throw Error(t(156,o.tag))};function T_(i,o){return pl(i,o)}function zP(i,o,d,m){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(i,o,d,m){return new zP(i,o,d,m)}function Ag(i){return i=i.prototype,!(!i||!i.isReactComponent)}function BP(i){if(typeof i=="function")return Ag(i)?1:0;if(i!=null){if(i=i.$$typeof,i===V)return 11;if(i===q)return 14}return 2}function fo(i,o){var d=i.alternate;return d===null?(d=Kr(i.tag,o,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=o,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,o=i.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function Yh(i,o,d,m,x,T){var F=2;if(m=i,typeof i=="function")Ag(i)&&(F=1);else if(typeof i=="string")F=5;else e:switch(i){case R:return ja(d.children,x,T,o);case k:F=8,x|=8;break;case D:return i=Kr(12,d,o,x|2),i.elementType=D,i.lanes=T,i;case P:return i=Kr(13,d,o,x),i.elementType=P,i.lanes=T,i;case H:return i=Kr(19,d,o,x),i.elementType=H,i.lanes=T,i;case te:return Xh(d,x,T,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:F=10;break e;case M:F=9;break e;case V:F=11;break e;case q:F=14;break e;case K:F=16,m=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Kr(F,d,o,x),o.elementType=i,o.type=m,o.lanes=T,o}function ja(i,o,d,m){return i=Kr(7,i,m,o),i.lanes=d,i}function Xh(i,o,d,m){return i=Kr(22,i,m,o),i.elementType=te,i.lanes=d,i.stateNode={isHidden:!1},i}function Pg(i,o,d){return i=Kr(6,i,null,o),i.lanes=d,i}function Rg(i,o,d){return o=Kr(4,i.children!==null?i.children:[],i.key,o),o.lanes=d,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function qP(i,o,d,m,x){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ki(0),this.expirationTimes=Ki(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ki(0),this.identifierPrefix=m,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function kg(i,o,d,m,x,T,F,W,G){return i=new qP(i,o,d,W,G),o===1?(o=1,T===!0&&(o|=8)):o=0,T=Kr(3,null,null,o),i.current=T,T.stateNode=i,T.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hm(T),i}function WP(i,o,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:m==null?null:""+m,children:i,containerInfo:o,implementation:d}}function C_(i){if(!i)return ro;i=i._reactInternals;e:{if(es(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(dr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var d=i.type;if(dr(d))return t0(i,d,o)}return o}function I_(i,o,d,m,x,T,F,W,G){return i=kg(d,m,!0,i,x,T,F,W,G),i.context=C_(null),d=i.current,m=rr(),x=uo(d),T=bi(m,x),T.callback=o??null,oo(d,T,x),i.current.lanes=x,Gi(i,x,m),pr(i,m),i}function Jh(i,o,d,m){var x=o.current,T=rr(),F=uo(x);return d=C_(d),o.context===null?o.context=d:o.pendingContext=d,o=bi(T,F),o.payload={element:i},m=m===void 0?null:m,m!==null&&(o.callback=m),i=oo(x,o,F),i!==null&&(hs(i,x,F,T),jh(i,x,F)),F}function Zh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function j_(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<o?d:o}}function Og(i,o){j_(i,o),(i=i.alternate)&&j_(i,o)}function HP(){return null}var A_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Dg(i){this._internalRoot=i}ef.prototype.render=Dg.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Jh(i,o,null,null)},ef.prototype.unmount=Dg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Ta(function(){Jh(null,i,null,null)}),o[vi]=null}};function ef(i){this._internalRoot=i}ef.prototype.unstable_scheduleHydration=function(i){if(i){var o=eh();i={blockedOn:null,target:i,priority:o};for(var d=0;d<Rs.length&&o!==0&&o<Rs[d].priority;d++);Rs.splice(d,0,i),d===0&&rh(i)}};function Lg(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function tf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function P_(){}function KP(i,o,d,m,x){if(x){if(typeof m=="function"){var T=m;m=function(){var ie=Zh(F);T.call(ie)}}var F=I_(o,m,i,0,null,!1,!1,"",P_);return i._reactRootContainer=F,i[vi]=F.current,mu(i.nodeType===8?i.parentNode:i),Ta(),F}for(;x=i.lastChild;)i.removeChild(x);if(typeof m=="function"){var W=m;m=function(){var ie=Zh(G);W.call(ie)}}var G=kg(i,0,!1,null,null,!1,!1,"",P_);return i._reactRootContainer=G,i[vi]=G.current,mu(i.nodeType===8?i.parentNode:i),Ta(function(){Jh(o,G,d,m)}),G}function nf(i,o,d,m,x){var T=d._reactRootContainer;if(T){var F=T;if(typeof x=="function"){var W=x;x=function(){var G=Zh(F);W.call(G)}}Jh(o,F,i,x)}else F=KP(d,o,i,x,m);return Zh(F)}Jd=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var d=Hi(o.pendingLanes);d!==0&&(Qi(o,d|1),pr(o,Dt()),(Et&6)===0&&(Hl=Dt()+500,so()))}break;case 13:Ta(function(){var m=Ei(i,1);if(m!==null){var x=rr();hs(m,i,1,x)}}),Og(i,1)}},yl=function(i){if(i.tag===13){var o=Ei(i,134217728);if(o!==null){var d=rr();hs(o,i,134217728,d)}Og(i,134217728)}},Zd=function(i){if(i.tag===13){var o=uo(i),d=Ei(i,o);if(d!==null){var m=rr();hs(d,i,o,m)}Og(i,o)}},eh=function(){return pt},th=function(i,o){var d=pt;try{return pt=i,o()}finally{pt=d}},ht=function(i,o,d){switch(o){case"input":if($n(i,d),o=d.name,d.type==="radio"&&o!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<d.length;o++){var m=d[o];if(m!==i&&m.form===i.form){var x=xh(m);if(!x)throw Error(t(90));st(m),$n(m,x)}}}break;case"textarea":Ns(i,d);break;case"select":o=d.value,o!=null&&Sr(i,!!d.multiple,o,!1)}},_t=Cg,it=Ta;var GP={usingClientEntryPoint:!1,Events:[vu,kl,xh,me,De,Cg]},Ru={findFiberByHostInstance:va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QP={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zc(i),i===null?null:i.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||HP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{da=rf.inject(QP),Tr=rf}catch{}}return mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GP,mr.createPortal=function(i,o){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lg(o))throw Error(t(200));return WP(i,o,null,d)},mr.createRoot=function(i,o){if(!Lg(i))throw Error(t(299));var d=!1,m="",x=A_;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(x=o.onRecoverableError)),o=kg(i,1,!1,null,null,d,!1,m,x),i[vi]=o.current,mu(i.nodeType===8?i.parentNode:i),new Dg(o)},mr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Zc(o),i=i===null?null:i.stateNode,i},mr.flushSync=function(i){return Ta(i)},mr.hydrate=function(i,o,d){if(!tf(o))throw Error(t(200));return nf(null,i,o,!0,d)},mr.hydrateRoot=function(i,o,d){if(!Lg(i))throw Error(t(405));var m=d!=null&&d.hydratedSources||null,x=!1,T="",F=A_;if(d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(F=d.onRecoverableError)),o=I_(o,null,i,1,d??null,x,!1,T,F),i[vi]=o.current,mu(i),m)for(i=0;i<m.length;i++)d=m[i],x=d._getVersion,x=x(d._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[d,x]:o.mutableSourceEagerHydrationData.push(d,x);return new ef(o)},mr.render=function(i,o,d){if(!tf(o))throw Error(t(200));return nf(null,i,o,!1,d)},mr.unmountComponentAtNode=function(i){if(!tf(i))throw Error(t(40));return i._reactRootContainer?(Ta(function(){nf(null,null,i,!1,function(){i._reactRootContainer=null,i[vi]=null})}),!0):!1},mr.unstable_batchedUpdates=Cg,mr.unstable_renderSubtreeIntoContainer=function(i,o,d,m){if(!tf(d))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return nf(i,o,d,!1,m)},mr.version="18.3.1-next-f1338f8080-20240426",mr}var q_;function G1(){if(q_)return zg.exports;q_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zg.exports=mR(),zg.exports}var rl=G1();const _p=H1(rl);function Ue(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function gR(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Q1(...n){return e=>n.forEach(t=>gR(t,e))}function bt(...n){return E.useCallback(Q1(...n),n)}function Ui(n,e=[]){let t=[];function r(a,c){const u=E.createContext(c),h=t.length;t=[...t,c];function p(y){const{scope:v,children:b,...S}=y,w=(v==null?void 0:v[n][h])||u,_=E.useMemo(()=>S,Object.values(S));return l.jsx(w.Provider,{value:_,children:b})}function g(y,v){const b=(v==null?void 0:v[n][h])||u,S=E.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return p.displayName=a+"Provider",[p,g]}const s=()=>{const a=t.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[n])||a;return E.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,yR(s,...e)]}function yR(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:p})=>{const y=h(a)[`__scope${p}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var qa=E.forwardRef((n,e)=>{const{children:t,...r}=n,s=E.Children.toArray(t),a=s.find(vR);if(a){const c=a.props.children,u=s.map(h=>h===a?E.Children.count(c)>1?E.Children.only(null):E.isValidElement(c)?c.props.children:null:h);return l.jsx(wy,{...r,ref:e,children:E.isValidElement(c)?E.cloneElement(c,void 0,u):null})}return l.jsx(wy,{...r,ref:e,children:t})});qa.displayName="Slot";var wy=E.forwardRef((n,e)=>{const{children:t,...r}=n;if(E.isValidElement(t)){const s=wR(t);return E.cloneElement(t,{...xR(r,t.props),ref:e?Q1(e,s):s})}return E.Children.count(t)>1?E.Children.only(null):null});wy.displayName="SlotClone";var Y1=({children:n})=>l.jsx(l.Fragment,{children:n});function vR(n){return E.isValidElement(n)&&n.type===Y1}function xR(n,e){const t={...e};for(const r in e){const s=n[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?t[r]=(...u)=>{a(...u),s(...u)}:s&&(t[r]=s):r==="style"?t[r]={...s,...a}:r==="className"&&(t[r]=[s,a].filter(Boolean).join(" "))}return{...n,...t}}function wR(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Uv(n){const e=n+"CollectionProvider",[t,r]=Ui(e),[s,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=b=>{const{scope:S,children:w}=b,_=_e.useRef(null),A=_e.useRef(new Map).current;return l.jsx(s,{scope:S,itemMap:A,collectionRef:_,children:w})};c.displayName=e;const u=n+"CollectionSlot",h=_e.forwardRef((b,S)=>{const{scope:w,children:_}=b,A=a(u,w),I=bt(S,A.collectionRef);return l.jsx(qa,{ref:I,children:_})});h.displayName=u;const p=n+"CollectionItemSlot",g="data-radix-collection-item",y=_e.forwardRef((b,S)=>{const{scope:w,children:_,...A}=b,I=_e.useRef(null),C=bt(S,I),L=a(p,w);return _e.useEffect(()=>(L.itemMap.set(I,{ref:I,...A}),()=>void L.itemMap.delete(I))),l.jsx(qa,{[g]:"",ref:C,children:_})});y.displayName=p;function v(b){const S=a(n+"CollectionConsumer",b);return _e.useCallback(()=>{const _=S.collectionRef.current;if(!_)return[];const A=Array.from(_.querySelectorAll(`[${g}]`));return Array.from(S.itemMap.values()).sort((L,U)=>A.indexOf(L.ref.current)-A.indexOf(U.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:c,Slot:h,ItemSlot:y},v,r]}var _R=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],We=_R.reduce((n,e)=>{const t=E.forwardRef((r,s)=>{const{asChild:a,...c}=r,u=a?qa:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(u,{...c,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function Ep(n,e){n&&rl.flushSync(()=>n.dispatchEvent(e))}function Nn(n){const e=E.useRef(n);return E.useEffect(()=>{e.current=n}),E.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function $v(n,e=globalThis==null?void 0:globalThis.document){const t=Nn(n);E.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var ER="DismissableLayer",_y="dismissableLayer.update",bR="dismissableLayer.pointerDownOutside",SR="dismissableLayer.focusOutside",W_,X1=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),J1=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=n,p=E.useContext(X1),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=bt(e,R=>y(R)),w=Array.from(p.layers),[_]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),A=w.indexOf(_),I=g?w.indexOf(g):-1,C=p.layersWithOutsidePointerEventsDisabled.size>0,L=I>=A,U=TR(R=>{const k=R.target,D=[...p.branches].some(O=>O.contains(k));!L||D||(s==null||s(R),c==null||c(R),R.defaultPrevented||u==null||u())},v),z=CR(R=>{const k=R.target;[...p.branches].some(O=>O.contains(k))||(a==null||a(R),c==null||c(R),R.defaultPrevented||u==null||u())},v);return $v(R=>{I===p.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},v),E.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(W_=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),H_(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=W_)}},[g,v,t,p]),E.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),H_())},[g,p]),E.useEffect(()=>{const R=()=>b({});return document.addEventListener(_y,R),()=>document.removeEventListener(_y,R)},[]),l.jsx(We.div,{...h,ref:S,style:{pointerEvents:C?L?"auto":"none":void 0,...n.style},onFocusCapture:Ue(n.onFocusCapture,z.onFocusCapture),onBlurCapture:Ue(n.onBlurCapture,z.onBlurCapture),onPointerDownCapture:Ue(n.onPointerDownCapture,U.onPointerDownCapture)})});J1.displayName=ER;var NR="DismissableLayerBranch",Z1=E.forwardRef((n,e)=>{const t=E.useContext(X1),r=E.useRef(null),s=bt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(We.div,{...n,ref:s})});Z1.displayName=NR;function TR(n,e=globalThis==null?void 0:globalThis.document){const t=Nn(n),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){eS(bR,t,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function CR(n,e=globalThis==null?void 0:globalThis.document){const t=Nn(n),r=E.useRef(!1);return E.useEffect(()=>{const s=a=>{a.target&&!r.current&&eS(SR,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function H_(){const n=new CustomEvent(_y);document.dispatchEvent(n)}function eS(n,e,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Ep(s,a):s.dispatchEvent(a)}var IR=J1,jR=Z1,Yt=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},AR="Portal",tS=E.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,a]=E.useState(!1);Yt(()=>a(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?_p.createPortal(l.jsx(We.div,{...r,ref:e}),c):null});tS.displayName=AR;function PR(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var zv=n=>{const{present:e,children:t}=n,r=RR(e),s=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),a=bt(r.ref,kR(s));return typeof t=="function"||r.isPresent?E.cloneElement(s,{ref:a}):null};zv.displayName="Presence";function RR(n){const[e,t]=E.useState(),r=E.useRef({}),s=E.useRef(n),a=E.useRef("none"),c=n?"mounted":"unmounted",[u,h]=PR(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const p=of(r.current);a.current=u==="mounted"?p:"none"},[u]),Yt(()=>{const p=r.current,g=s.current;if(g!==n){const v=a.current,b=of(p);n?h("MOUNT"):b==="none"||(p==null?void 0:p.display)==="none"?h("UNMOUNT"):h(g&&v!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Yt(()=>{if(e){const p=y=>{const b=of(r.current).includes(y.animationName);y.target===e&&b&&rl.flushSync(()=>h("ANIMATION_END"))},g=y=>{y.target===e&&(a.current=of(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(p=>{p&&(r.current=getComputedStyle(p)),t(p)},[])}}function of(n){return(n==null?void 0:n.animationName)||"none"}function kR(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Wa({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=OR({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:r,u=Nn(t),h=E.useCallback(p=>{if(a){const y=typeof p=="function"?p(n):p;y!==n&&u(y)}else s(p)},[a,n,s,u]);return[c,h]}function OR({defaultProp:n,onChange:e}){const t=E.useState(n),[r]=t,s=E.useRef(r),a=Nn(e);return E.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),t}var DR="VisuallyHidden",Td=E.forwardRef((n,e)=>l.jsx(We.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));Td.displayName=DR;var LR=Td,Bv="ToastProvider",[qv,MR,FR]=Uv("Toast"),[nS,RB]=Ui("Toast",[FR]),[VR,bp]=nS(Bv),rS=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:c}=n,[u,h]=E.useState(null),[p,g]=E.useState(0),y=E.useRef(!1),v=E.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Bv}\`. Expected non-empty \`string\`.`),l.jsx(qv.Provider,{scope:e,children:l.jsx(VR,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:p,viewport:u,onViewportChange:h,onToastAdd:E.useCallback(()=>g(b=>b+1),[]),onToastRemove:E.useCallback(()=>g(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:v,children:c})})};rS.displayName=Bv;var sS="ToastViewport",UR=["F8"],Ey="toast.viewportPause",by="toast.viewportResume",iS=E.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=UR,label:s="Notifications ({hotkey})",...a}=n,c=bp(sS,t),u=MR(t),h=E.useRef(null),p=E.useRef(null),g=E.useRef(null),y=E.useRef(null),v=bt(e,y,c.onViewportChange),b=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=c.toastCount>0;E.useEffect(()=>{const _=A=>{var C;r.every(L=>A[L]||A.code===L)&&((C=y.current)==null||C.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),E.useEffect(()=>{const _=h.current,A=y.current;if(S&&_&&A){const I=()=>{if(!c.isClosePausedRef.current){const z=new CustomEvent(Ey);A.dispatchEvent(z),c.isClosePausedRef.current=!0}},C=()=>{if(c.isClosePausedRef.current){const z=new CustomEvent(by);A.dispatchEvent(z),c.isClosePausedRef.current=!1}},L=z=>{!_.contains(z.relatedTarget)&&C()},U=()=>{_.contains(document.activeElement)||C()};return _.addEventListener("focusin",I),_.addEventListener("focusout",L),_.addEventListener("pointermove",I),_.addEventListener("pointerleave",U),window.addEventListener("blur",I),window.addEventListener("focus",C),()=>{_.removeEventListener("focusin",I),_.removeEventListener("focusout",L),_.removeEventListener("pointermove",I),_.removeEventListener("pointerleave",U),window.removeEventListener("blur",I),window.removeEventListener("focus",C)}}},[S,c.isClosePausedRef]);const w=E.useCallback(({tabbingDirection:_})=>{const I=u().map(C=>{const L=C.ref.current,U=[L,...ZR(L)];return _==="forwards"?U:U.reverse()});return(_==="forwards"?I.reverse():I).flat()},[u]);return E.useEffect(()=>{const _=y.current;if(_){const A=I=>{var U,z,R;const C=I.altKey||I.ctrlKey||I.metaKey;if(I.key==="Tab"&&!C){const k=document.activeElement,D=I.shiftKey;if(I.target===_&&D){(U=p.current)==null||U.focus();return}const V=w({tabbingDirection:D?"backwards":"forwards"}),P=V.findIndex(H=>H===k);Wg(V.slice(P+1))?I.preventDefault():D?(z=p.current)==null||z.focus():(R=g.current)==null||R.focus()}};return _.addEventListener("keydown",A),()=>_.removeEventListener("keydown",A)}},[u,w]),l.jsxs(jR,{ref:h,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&l.jsx(Sy,{ref:p,onFocusFromOutsideViewport:()=>{const _=w({tabbingDirection:"forwards"});Wg(_)}}),l.jsx(qv.Slot,{scope:t,children:l.jsx(We.ol,{tabIndex:-1,...a,ref:v})}),S&&l.jsx(Sy,{ref:g,onFocusFromOutsideViewport:()=>{const _=w({tabbingDirection:"backwards"});Wg(_)}})]})});iS.displayName=sS;var oS="ToastFocusProxy",Sy=E.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,a=bp(oS,t);return l.jsx(Td,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:c=>{var p;const u=c.relatedTarget;!((p=a.viewport)!=null&&p.contains(u))&&r()}})});Sy.displayName=oS;var Sp="Toast",$R="toast.swipeStart",zR="toast.swipeMove",BR="toast.swipeCancel",qR="toast.swipeEnd",aS=E.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:a,...c}=n,[u=!0,h]=Wa({prop:r,defaultProp:s,onChange:a});return l.jsx(zv,{present:t||u,children:l.jsx(KR,{open:u,...c,ref:e,onClose:()=>h(!1),onPause:Nn(n.onPause),onResume:Nn(n.onResume),onSwipeStart:Ue(n.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ue(n.onSwipeMove,p=>{const{x:g,y}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:Ue(n.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ue(n.onSwipeEnd,p=>{const{x:g,y}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),h(!1)})})})});aS.displayName=Sp;var[WR,HR]=nS(Sp,{onClose(){}}),KR=E.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:a,onClose:c,onEscapeKeyDown:u,onPause:h,onResume:p,onSwipeStart:g,onSwipeMove:y,onSwipeCancel:v,onSwipeEnd:b,...S}=n,w=bp(Sp,t),[_,A]=E.useState(null),I=bt(e,H=>A(H)),C=E.useRef(null),L=E.useRef(null),U=s||w.duration,z=E.useRef(0),R=E.useRef(U),k=E.useRef(0),{onToastAdd:D,onToastRemove:O}=w,M=Nn(()=>{var q;(_==null?void 0:_.contains(document.activeElement))&&((q=w.viewport)==null||q.focus()),c()}),V=E.useCallback(H=>{!H||H===1/0||(window.clearTimeout(k.current),z.current=new Date().getTime(),k.current=window.setTimeout(M,H))},[M]);E.useEffect(()=>{const H=w.viewport;if(H){const q=()=>{V(R.current),p==null||p()},K=()=>{const te=new Date().getTime()-z.current;R.current=R.current-te,window.clearTimeout(k.current),h==null||h()};return H.addEventListener(Ey,K),H.addEventListener(by,q),()=>{H.removeEventListener(Ey,K),H.removeEventListener(by,q)}}},[w.viewport,U,h,p,V]),E.useEffect(()=>{a&&!w.isClosePausedRef.current&&V(U)},[a,U,w.isClosePausedRef,V]),E.useEffect(()=>(D(),()=>O()),[D,O]);const P=E.useMemo(()=>_?pS(_):null,[_]);return w.viewport?l.jsxs(l.Fragment,{children:[P&&l.jsx(GR,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),l.jsx(WR,{scope:t,onClose:M,children:rl.createPortal(l.jsx(qv.ItemSlot,{scope:t,children:l.jsx(IR,{asChild:!0,onEscapeKeyDown:Ue(u,()=>{w.isFocusedToastEscapeKeyDownRef.current||M(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(We.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":w.swipeDirection,...S,ref:I,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Ue(n.onKeyDown,H=>{H.key==="Escape"&&(u==null||u(H.nativeEvent),H.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:Ue(n.onPointerDown,H=>{H.button===0&&(C.current={x:H.clientX,y:H.clientY})}),onPointerMove:Ue(n.onPointerMove,H=>{if(!C.current)return;const q=H.clientX-C.current.x,K=H.clientY-C.current.y,te=!!L.current,Q=["left","right"].includes(w.swipeDirection),oe=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,le=Q?oe(0,q):0,B=Q?0:oe(0,K),Z=H.pointerType==="touch"?10:2,he={x:le,y:B},Ce={originalEvent:H,delta:he};te?(L.current=he,af(zR,y,Ce,{discrete:!1})):K_(he,w.swipeDirection,Z)?(L.current=he,af($R,g,Ce,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(q)>Z||Math.abs(K)>Z)&&(C.current=null)}),onPointerUp:Ue(n.onPointerUp,H=>{const q=L.current,K=H.target;if(K.hasPointerCapture(H.pointerId)&&K.releasePointerCapture(H.pointerId),L.current=null,C.current=null,q){const te=H.currentTarget,Q={originalEvent:H,delta:q};K_(q,w.swipeDirection,w.swipeThreshold)?af(qR,b,Q,{discrete:!0}):af(BR,v,Q,{discrete:!0}),te.addEventListener("click",oe=>oe.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),GR=n=>{const{__scopeToast:e,children:t,...r}=n,s=bp(Sp,e),[a,c]=E.useState(!1),[u,h]=E.useState(!1);return XR(()=>c(!0)),E.useEffect(()=>{const p=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(p)},[]),u?null:l.jsx(tS,{asChild:!0,children:l.jsx(Td,{...r,children:a&&l.jsxs(l.Fragment,{children:[s.label," ",t]})})})},QR="ToastTitle",lS=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(We.div,{...r,ref:e})});lS.displayName=QR;var YR="ToastDescription",cS=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(We.div,{...r,ref:e})});cS.displayName=YR;var uS="ToastAction",dS=E.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?l.jsx(fS,{altText:t,asChild:!0,children:l.jsx(Wv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${uS}\`. Expected non-empty \`string\`.`),null)});dS.displayName=uS;var hS="ToastClose",Wv=E.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=HR(hS,t);return l.jsx(fS,{asChild:!0,children:l.jsx(We.button,{type:"button",...r,ref:e,onClick:Ue(n.onClick,s.onClose)})})});Wv.displayName=hS;var fS=E.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return l.jsx(We.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function pS(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),JR(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...pS(r))}}),e}function af(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,a=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Ep(s,a):s.dispatchEvent(a)}var K_=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),a=r>s;return e==="left"||e==="right"?a&&r>t:!a&&s>t};function XR(n=()=>{}){const e=Nn(n);Yt(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function JR(n){return n.nodeType===n.ELEMENT_NODE}function ZR(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Wg(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var ek=rS,mS=iS,gS=aS,yS=lS,vS=cS,xS=dS,wS=Wv;function _S(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=_S(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function ES(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=_S(n))&&(r&&(r+=" "),r+=e);return r}const G_=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Q_=ES,Cd=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return Q_(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:a}=e,c=Object.keys(s).map(p=>{const g=t==null?void 0:t[p],y=a==null?void 0:a[p];if(g===null)return null;const v=G_(g)||G_(y);return s[p][v]}),u=t&&Object.entries(t).reduce((p,g)=>{let[y,v]=g;return v===void 0||(p[y]=v),p},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,g)=>{let{class:y,className:v,...b}=g;return Object.entries(b).every(S=>{let[w,_]=S;return Array.isArray(_)?_.includes({...a,...u}[w]):{...a,...u}[w]===_})?[...p,y,v]:p},[]);return Q_(n,c,h,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=E.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:c,...u},h)=>E.createElement("svg",{ref:h,...nk,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:bS("lucide",s),...u},[...c.map(([p,g])=>E.createElement(p,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(n,e)=>{const t=E.forwardRef(({className:r,...s},a)=>E.createElement(rk,{ref:a,iconNode:e,className:bS(`lucide-${tk(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=Je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=Je("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=Je("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=Je("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=Je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=Je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=Je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=Je("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=Je("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Je("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=Je("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=Je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=Je("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=Je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=Je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=Je("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=Je("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=Je("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=Je("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=Je("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=Je("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=Je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=Je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=Je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=Je("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=Je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=Je("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=Je("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=Je("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=Je("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=Je("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=Je("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=Je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=Je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=Je("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=Je("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=Je("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=Je("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=Je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=Je("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=Je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=Je("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=Je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=Je("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Kv="-",wk=n=>{const e=Ek(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const u=c.split(Kv);return u[0]===""&&u.length!==1&&u.shift(),jS(u,e)||_k(c)},getConflictingClassGroupIds:(c,u)=>{const h=t[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},jS=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?jS(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=n.join(Kv);return(c=e.validators.find(({validator:u})=>u(a)))==null?void 0:c.classGroupId},J_=/^\[(.+)\]$/,_k=n=>{if(J_.test(n)){const e=J_.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Ek=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return Sk(Object.entries(n.classGroups),t).forEach(([a,c])=>{Iy(c,r,a,e)}),r},Iy=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const a=s===""?e:Z_(e,s);a.classGroupId=t;return}if(typeof s=="function"){if(bk(s)){Iy(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([a,c])=>{Iy(c,Z_(e,a),t,r)})})},Z_=(n,e)=>{let t=n;return e.split(Kv).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},bk=n=>n.isThemeGetter,Sk=(n,e)=>e?n.map(([t,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([c,u])=>[e+c,u])):a);return[t,s]}):n,Nk=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(a,c)=>{t.set(a,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let c=t.get(a);if(c!==void 0)return c;if((c=r.get(a))!==void 0)return s(a,c),c},set(a,c){t.has(a)?t.set(a,c):s(a,c)}}},AS="!",Tk=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],a=e.length,c=u=>{const h=[];let p=0,g=0,y;for(let _=0;_<u.length;_++){let A=u[_];if(p===0){if(A===s&&(r||u.slice(_,_+a)===e)){h.push(u.slice(g,_)),g=_+a;continue}if(A==="/"){y=_;continue}}A==="["?p++:A==="]"&&p--}const v=h.length===0?u:u.substring(g),b=v.startsWith(AS),S=b?v.substring(1):v,w=y&&y>g?y-g:void 0;return{modifiers:h,hasImportantModifier:b,baseClassName:S,maybePostfixModifierPosition:w}};return t?u=>t({className:u,parseClassName:c}):c},Ck=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},Ik=n=>({cache:Nk(n.cacheSize),parseClassName:Tk(n),...wk(n)}),jk=/\s+/,Ak=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],c=n.trim().split(jk);let u="";for(let h=c.length-1;h>=0;h-=1){const p=c[h],{modifiers:g,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:b}=t(p);let S=!!b,w=r(S?v.substring(0,b):v);if(!w){if(!S){u=p+(u.length>0?" "+u:u);continue}if(w=r(v),!w){u=p+(u.length>0?" "+u:u);continue}S=!1}const _=Ck(g).join(":"),A=y?_+AS:_,I=A+w;if(a.includes(I))continue;a.push(I);const C=s(w,S);for(let L=0;L<C.length;++L){const U=C[L];a.push(A+U)}u=p+(u.length>0?" "+u:u)}return u};function Pk(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=PS(e))&&(r&&(r+=" "),r+=t);return r}const PS=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=PS(n[r]))&&(t&&(t+=" "),t+=e);return t};function Rk(n,...e){let t,r,s,a=c;function c(h){const p=e.reduce((g,y)=>y(g),n());return t=Ik(p),r=t.cache.get,s=t.cache.set,a=u,u(h)}function u(h){const p=r(h);if(p)return p;const g=Ak(h,t);return s(h,g),g}return function(){return a(Pk.apply(null,arguments))}}const qt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},RS=/^\[(?:([a-z-]+):)?(.+)\]$/i,kk=/^\d+\/\d+$/,Ok=new Set(["px","full","screen"]),Dk=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Lk=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Mk=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Fk=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Vk=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ti=n=>sc(n)||Ok.has(n)||kk.test(n),mo=n=>Fc(n,"length",Kk),sc=n=>!!n&&!Number.isNaN(Number(n)),Hg=n=>Fc(n,"number",sc),Ou=n=>!!n&&Number.isInteger(Number(n)),Uk=n=>n.endsWith("%")&&sc(n.slice(0,-1)),at=n=>RS.test(n),go=n=>Dk.test(n),$k=new Set(["length","size","percentage"]),zk=n=>Fc(n,$k,kS),Bk=n=>Fc(n,"position",kS),qk=new Set(["image","url"]),Wk=n=>Fc(n,qk,Qk),Hk=n=>Fc(n,"",Gk),Du=()=>!0,Fc=(n,e,t)=>{const r=RS.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},Kk=n=>Lk.test(n)&&!Mk.test(n),kS=()=>!1,Gk=n=>Fk.test(n),Qk=n=>Vk.test(n),Yk=()=>{const n=qt("colors"),e=qt("spacing"),t=qt("blur"),r=qt("brightness"),s=qt("borderColor"),a=qt("borderRadius"),c=qt("borderSpacing"),u=qt("borderWidth"),h=qt("contrast"),p=qt("grayscale"),g=qt("hueRotate"),y=qt("invert"),v=qt("gap"),b=qt("gradientColorStops"),S=qt("gradientColorStopPositions"),w=qt("inset"),_=qt("margin"),A=qt("opacity"),I=qt("padding"),C=qt("saturate"),L=qt("scale"),U=qt("sepia"),z=qt("skew"),R=qt("space"),k=qt("translate"),D=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",at,e],V=()=>[at,e],P=()=>["",Ti,mo],H=()=>["auto",sc,at],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>["start","end","center","between","around","evenly","stretch"],oe=()=>["","0",at],le=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[sc,at];return{cacheSize:500,separator:":",theme:{colors:[Du],spacing:[Ti,mo],blur:["none","",go,at],brightness:B(),borderColor:[n],borderRadius:["none","","full",go,at],borderSpacing:V(),borderWidth:P(),contrast:B(),grayscale:oe(),hueRotate:B(),invert:oe(),gap:V(),gradientColorStops:[n],gradientColorStopPositions:[Uk,mo],inset:M(),margin:M(),opacity:B(),padding:V(),saturate:B(),scale:B(),sepia:oe(),skew:B(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",at]}],container:["container"],columns:[{columns:[go]}],"break-after":[{"break-after":le()}],"break-before":[{"break-before":le()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),at]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ou,at]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",at]}],grow:[{grow:oe()}],shrink:[{shrink:oe()}],order:[{order:["first","last","none",Ou,at]}],"grid-cols":[{"grid-cols":[Du]}],"col-start-end":[{col:["auto",{span:["full",Ou,at]},at]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Du]}],"row-start-end":[{row:["auto",{span:[Ou,at]},at]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",at]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",at]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...Q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",at,e]}],"min-w":[{"min-w":[at,e,"min","max","fit"]}],"max-w":[{"max-w":[at,e,"none","full","min","max","fit","prose",{screen:[go]},go]}],h:[{h:[at,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[at,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[at,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[at,e,"auto","min","max","fit"]}],"font-size":[{text:["base",go,mo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Hg]}],"font-family":[{font:[Du]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",at]}],"line-clamp":[{"line-clamp":["none",sc,Hg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ti,at]}],"list-image":[{"list-image":["none",at]}],"list-style-type":[{list:["none","disc","decimal",at]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ti,mo]}],"underline-offset":[{"underline-offset":["auto",Ti,at]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",at]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",at]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),Bk]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zk]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Wk]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:K()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Ti,at]}],"outline-w":[{outline:[Ti,mo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[Ti,mo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",go,Hk]}],"shadow-color":[{shadow:[Du]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",go,at]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[y]}],saturate:[{saturate:[C]}],sepia:[{sepia:[U]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[U]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",at]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",at]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",at]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[L]}],"scale-x":[{"scale-x":[L]}],"scale-y":[{"scale-y":[L]}],rotate:[{rotate:[Ou,at]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",at]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",at]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",at]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Ti,mo,Hg]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Xk=Rk(Yk);function et(...n){return Xk(ES(n))}function Jk(n){if(!n||typeof n!="string")return null;const e=n.trim();try{const t=e.match(/https?:\/\/(?:drive\.google\.com)\/(?:file\/d\/([a-zA-Z0-9_-]+)\/view|open\?id=([a-zA-Z0-9_-]+))/i);if(t){const r=t[1]||t[2];if(r)return`https://drive.google.com/uc?export=view&id=${r}`}if(/dropbox\.com\//i.test(e)){if(e.includes("dl=0"))return e.replace("dl=0","dl=1");if(!e.includes("dl="))return e+"?dl=1"}return e}catch{return e}}const Zk=ek,OS=E.forwardRef(({className:n,...e},t)=>l.jsx(mS,{ref:t,className:et("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));OS.displayName=mS.displayName;const e2=Cd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),DS=E.forwardRef(({className:n,variant:e,...t},r)=>l.jsx(gS,{ref:r,className:et(e2({variant:e}),n),...t}));DS.displayName=gS.displayName;const t2=E.forwardRef(({className:n,...e},t)=>l.jsx(xS,{ref:t,className:et("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));t2.displayName=xS.displayName;const LS=E.forwardRef(({className:n,...e},t)=>l.jsx(wS,{ref:t,className:et("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:l.jsx(Sc,{className:"h-4 w-4"})}));LS.displayName=wS.displayName;const MS=E.forwardRef(({className:n,...e},t)=>l.jsx(yS,{ref:t,className:et("text-sm font-semibold",n),...e}));MS.displayName=yS.displayName;const FS=E.forwardRef(({className:n,...e},t)=>l.jsx(vS,{ref:t,className:et("text-sm opacity-90",n),...e}));FS.displayName=vS.displayName;function n2(){const{toasts:n}=hR();return l.jsxs(Zk,{children:[n.map(function({id:e,title:t,description:r,action:s,...a}){return l.jsxs(DS,{...a,children:[l.jsxs("div",{className:"grid gap-1",children:[t&&l.jsx(MS,{children:t}),r&&l.jsx(FS,{children:r})]}),s,l.jsx(LS,{})]},e)}),l.jsx(OS,{})]})}var lf={},eE;function r2(){if(eE)return lf;eE=1;var n=G1();return lf.createRoot=n.createRoot,lf.hydrateRoot=n.hydrateRoot,lf}var s2=r2(),tE=["light","dark"],i2="(prefers-color-scheme: dark)",o2=E.createContext(void 0),a2={setTheme:n=>{},themes:[]},l2=()=>{var n;return(n=E.useContext(o2))!=null?n:a2};E.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:c,attrs:u,nonce:h})=>{let p=a==="system",g=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,y=s?tE.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(S,w=!1,_=!0)=>{let A=c?c[S]:S,I=w?S+"|| ''":`'${A}'`,C="";return s&&_&&!w&&tE.includes(S)&&(C+=`d.style.colorScheme = '${S}';`),t==="class"?w||A?C+=`c.add(${I})`:C+="null":A&&(C+=`d[s](n,${I})`),C},b=n?`!function(){${g}${v(n)}}()`:r?`!function(){try{${g}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${p})){var t='${i2}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}${p?"":"else{"+v(a,!1,!1)+"}"}${y}}catch(e){}}()`:`!function(){try{${g}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}else{${v(a,!1,!1)};}${y}}catch(t){}}();`;return E.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:b}})});var c2=n=>{switch(n){case"success":return h2;case"info":return p2;case"warning":return f2;case"error":return m2;default:return null}},u2=Array(12).fill(0),d2=({visible:n})=>_e.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},_e.createElement("div",{className:"sonner-spinner"},u2.map((e,t)=>_e.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),h2=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),f2=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),p2=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),m2=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),g2=()=>{let[n,e]=_e.useState(document.hidden);return _e.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},jy=1,y2=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:jy++,c=this.toasts.find(h=>h.id===a),u=e.dismissible===void 0?!0:e.dismissible;return c?this.toasts=this.toasts.map(h=>h.id===a?(this.publish({...h,...e,id:a,title:r}),{...h,...e,id:a,dismissible:u,title:r}):h):this.addToast({title:r,...s,dismissible:u,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0;return s.then(async c=>{if(x2(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:h})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||jy++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},kr=new y2,v2=(n,e)=>{let t=(e==null?void 0:e.id)||jy++;return kr.addToast({title:n,...e,id:t}),t},x2=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",w2=v2,_2=()=>kr.toasts;Object.assign(w2,{success:kr.success,info:kr.info,warning:kr.warning,error:kr.error,custom:kr.custom,message:kr.message,promise:kr.promise,dismiss:kr.dismiss,loading:kr.loading},{getHistory:_2});function E2(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}E2(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function cf(n){return n.label!==void 0}var b2=3,S2="32px",N2=4e3,T2=356,C2=14,I2=20,j2=200;function A2(...n){return n.filter(Boolean).join(" ")}var P2=n=>{var e,t,r,s,a,c,u,h,p,g;let{invert:y,toast:v,unstyled:b,interacting:S,setHeights:w,visibleToasts:_,heights:A,index:I,toasts:C,expanded:L,removeToast:U,defaultRichColors:z,closeButton:R,style:k,cancelButtonStyle:D,actionButtonStyle:O,className:M="",descriptionClassName:V="",duration:P,position:H,gap:q,loadingIcon:K,expandByDefault:te,classNames:Q,icons:oe,closeButtonAriaLabel:le="Close toast",pauseWhenPageIsHidden:B,cn:Z}=n,[he,Ce]=_e.useState(!1),[Fe,Ne]=_e.useState(!1),[xe,Se]=_e.useState(!1),[ze,Me]=_e.useState(!1),[rt,st]=_e.useState(0),[Nt,Ot]=_e.useState(0),Tn=_e.useRef(null),nn=_e.useRef(null),$n=I===0,br=I+1<=_,Pt=v.type,un=v.dismissible!==!1,Sr=v.className||"",Xr=v.descriptionClassName||"",an=_e.useMemo(()=>A.findIndex(He=>He.toastId===v.id)||0,[A,v.id]),Ns=_e.useMemo(()=>{var He;return(He=v.closeButton)!=null?He:R},[v.closeButton,R]),Ts=_e.useMemo(()=>v.duration||P||N2,[v.duration,P]),Vt=_e.useRef(0),Tt=_e.useRef(0),zn=_e.useRef(0),xn=_e.useRef(null),[Nr,Jr]=H.split("-"),Fr=_e.useMemo(()=>A.reduce((He,vt,ht)=>ht>=an?He:He+vt.height,0),[A,an]),Cs=g2(),ui=v.invert||y,Zr=Pt==="loading";Tt.current=_e.useMemo(()=>an*q+Fr,[an,Fr]),_e.useEffect(()=>{Ce(!0)},[]),_e.useLayoutEffect(()=>{if(!he)return;let He=nn.current,vt=He.style.height;He.style.height="auto";let ht=He.getBoundingClientRect().height;He.style.height=vt,Ot(ht),w(Ut=>Ut.find(Ht=>Ht.toastId===v.id)?Ut.map(Ht=>Ht.toastId===v.id?{...Ht,height:ht}:Ht):[{toastId:v.id,height:ht,position:v.position},...Ut])},[he,v.title,v.description,w,v.id]);let Bn=_e.useCallback(()=>{Ne(!0),st(Tt.current),w(He=>He.filter(vt=>vt.toastId!==v.id)),setTimeout(()=>{U(v)},j2)},[v,U,w,Tt]);_e.useEffect(()=>{if(v.promise&&Pt==="loading"||v.duration===1/0||v.type==="loading")return;let He,vt=Ts;return L||S||B&&Cs?(()=>{if(zn.current<Vt.current){let ht=new Date().getTime()-Vt.current;vt=vt-ht}zn.current=new Date().getTime()})():vt!==1/0&&(Vt.current=new Date().getTime(),He=setTimeout(()=>{var ht;(ht=v.onAutoClose)==null||ht.call(v,v),Bn()},vt)),()=>clearTimeout(He)},[L,S,te,v,Ts,Bn,v.promise,Pt,B,Cs]),_e.useEffect(()=>{let He=nn.current;if(He){let vt=He.getBoundingClientRect().height;return Ot(vt),w(ht=>[{toastId:v.id,height:vt,position:v.position},...ht]),()=>w(ht=>ht.filter(Ut=>Ut.toastId!==v.id))}},[w,v.id]),_e.useEffect(()=>{v.delete&&Bn()},[Bn,v.delete]);function Is(){return oe!=null&&oe.loading?_e.createElement("div",{className:"sonner-loader","data-visible":Pt==="loading"},oe.loading):K?_e.createElement("div",{className:"sonner-loader","data-visible":Pt==="loading"},K):_e.createElement(d2,{visible:Pt==="loading"})}return _e.createElement("li",{"aria-live":v.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:nn,className:Z(M,Sr,Q==null?void 0:Q.toast,(e=v==null?void 0:v.classNames)==null?void 0:e.toast,Q==null?void 0:Q.default,Q==null?void 0:Q[Pt],(t=v==null?void 0:v.classNames)==null?void 0:t[Pt]),"data-sonner-toast":"","data-rich-colors":(r=v.richColors)!=null?r:z,"data-styled":!(v.jsx||v.unstyled||b),"data-mounted":he,"data-promise":!!v.promise,"data-removed":Fe,"data-visible":br,"data-y-position":Nr,"data-x-position":Jr,"data-index":I,"data-front":$n,"data-swiping":xe,"data-dismissible":un,"data-type":Pt,"data-invert":ui,"data-swipe-out":ze,"data-expanded":!!(L||te&&he),style:{"--index":I,"--toasts-before":I,"--z-index":C.length-I,"--offset":`${Fe?rt:Tt.current}px`,"--initial-height":te?"auto":`${Nt}px`,...k,...v.style},onPointerDown:He=>{Zr||!un||(Tn.current=new Date,st(Tt.current),He.target.setPointerCapture(He.pointerId),He.target.tagName!=="BUTTON"&&(Se(!0),xn.current={x:He.clientX,y:He.clientY}))},onPointerUp:()=>{var He,vt,ht,Ut;if(ze||!un)return;xn.current=null;let Ht=Number(((He=nn.current)==null?void 0:He.style.getPropertyValue("--swipe-amount").replace("px",""))||0),re=new Date().getTime()-((vt=Tn.current)==null?void 0:vt.getTime()),me=Math.abs(Ht)/re;if(Math.abs(Ht)>=I2||me>.11){st(Tt.current),(ht=v.onDismiss)==null||ht.call(v,v),Bn(),Me(!0);return}(Ut=nn.current)==null||Ut.style.setProperty("--swipe-amount","0px"),Se(!1)},onPointerMove:He=>{var vt;if(!xn.current||!un)return;let ht=He.clientY-xn.current.y,Ut=He.clientX-xn.current.x,Ht=(Nr==="top"?Math.min:Math.max)(0,ht),re=He.pointerType==="touch"?10:2;Math.abs(Ht)>re?(vt=nn.current)==null||vt.style.setProperty("--swipe-amount",`${ht}px`):Math.abs(Ut)>re&&(xn.current=null)}},Ns&&!v.jsx?_e.createElement("button",{"aria-label":le,"data-disabled":Zr,"data-close-button":!0,onClick:Zr||!un?()=>{}:()=>{var He;Bn(),(He=v.onDismiss)==null||He.call(v,v)},className:Z(Q==null?void 0:Q.closeButton,(s=v==null?void 0:v.classNames)==null?void 0:s.closeButton)},_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},_e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,v.jsx||_e.isValidElement(v.title)?v.jsx||v.title:_e.createElement(_e.Fragment,null,Pt||v.icon||v.promise?_e.createElement("div",{"data-icon":"",className:Z(Q==null?void 0:Q.icon,(a=v==null?void 0:v.classNames)==null?void 0:a.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||Is():null,v.type!=="loading"?v.icon||(oe==null?void 0:oe[Pt])||c2(Pt):null):null,_e.createElement("div",{"data-content":"",className:Z(Q==null?void 0:Q.content,(c=v==null?void 0:v.classNames)==null?void 0:c.content)},_e.createElement("div",{"data-title":"",className:Z(Q==null?void 0:Q.title,(u=v==null?void 0:v.classNames)==null?void 0:u.title)},v.title),v.description?_e.createElement("div",{"data-description":"",className:Z(V,Xr,Q==null?void 0:Q.description,(h=v==null?void 0:v.classNames)==null?void 0:h.description)},v.description):null),_e.isValidElement(v.cancel)?v.cancel:v.cancel&&cf(v.cancel)?_e.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||D,onClick:He=>{var vt,ht;cf(v.cancel)&&un&&((ht=(vt=v.cancel).onClick)==null||ht.call(vt,He),Bn())},className:Z(Q==null?void 0:Q.cancelButton,(p=v==null?void 0:v.classNames)==null?void 0:p.cancelButton)},v.cancel.label):null,_e.isValidElement(v.action)?v.action:v.action&&cf(v.action)?_e.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||O,onClick:He=>{var vt,ht;cf(v.action)&&(He.defaultPrevented||((ht=(vt=v.action).onClick)==null||ht.call(vt,He),Bn()))},className:Z(Q==null?void 0:Q.actionButton,(g=v==null?void 0:v.classNames)==null?void 0:g.actionButton)},v.action.label):null))};function nE(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var R2=n=>{let{invert:e,position:t="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:a,className:c,offset:u,theme:h="light",richColors:p,duration:g,style:y,visibleToasts:v=b2,toastOptions:b,dir:S=nE(),gap:w=C2,loadingIcon:_,icons:A,containerAriaLabel:I="Notifications",pauseWhenPageIsHidden:C,cn:L=A2}=n,[U,z]=_e.useState([]),R=_e.useMemo(()=>Array.from(new Set([t].concat(U.filter(B=>B.position).map(B=>B.position)))),[U,t]),[k,D]=_e.useState([]),[O,M]=_e.useState(!1),[V,P]=_e.useState(!1),[H,q]=_e.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=_e.useRef(null),te=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),Q=_e.useRef(null),oe=_e.useRef(!1),le=_e.useCallback(B=>{var Z;(Z=U.find(he=>he.id===B.id))!=null&&Z.delete||kr.dismiss(B.id),z(he=>he.filter(({id:Ce})=>Ce!==B.id))},[U]);return _e.useEffect(()=>kr.subscribe(B=>{if(B.dismiss){z(Z=>Z.map(he=>he.id===B.id?{...he,delete:!0}:he));return}setTimeout(()=>{_p.flushSync(()=>{z(Z=>{let he=Z.findIndex(Ce=>Ce.id===B.id);return he!==-1?[...Z.slice(0,he),{...Z[he],...B},...Z.slice(he+1)]:[B,...Z]})})})}),[]),_e.useEffect(()=>{if(h!=="system"){q(h);return}h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?q("dark"):q("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:B})=>{q(B?"dark":"light")})},[h]),_e.useEffect(()=>{U.length<=1&&M(!1)},[U]),_e.useEffect(()=>{let B=Z=>{var he,Ce;r.every(Fe=>Z[Fe]||Z.code===Fe)&&(M(!0),(he=K.current)==null||he.focus()),Z.code==="Escape"&&(document.activeElement===K.current||(Ce=K.current)!=null&&Ce.contains(document.activeElement))&&M(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[r]),_e.useEffect(()=>{if(K.current)return()=>{Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null,oe.current=!1)}},[K.current]),U.length?_e.createElement("section",{"aria-label":`${I} ${te}`,tabIndex:-1},R.map((B,Z)=>{var he;let[Ce,Fe]=B.split("-");return _e.createElement("ol",{key:B,dir:S==="auto"?nE():S,tabIndex:-1,ref:K,className:c,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":Ce,"data-x-position":Fe,style:{"--front-toast-height":`${((he=k[0])==null?void 0:he.height)||0}px`,"--offset":typeof u=="number"?`${u}px`:u||S2,"--width":`${T2}px`,"--gap":`${w}px`,...y},onBlur:Ne=>{oe.current&&!Ne.currentTarget.contains(Ne.relatedTarget)&&(oe.current=!1,Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null))},onFocus:Ne=>{Ne.target instanceof HTMLElement&&Ne.target.dataset.dismissible==="false"||oe.current||(oe.current=!0,Q.current=Ne.relatedTarget)},onMouseEnter:()=>M(!0),onMouseMove:()=>M(!0),onMouseLeave:()=>{V||M(!1)},onPointerDown:Ne=>{Ne.target instanceof HTMLElement&&Ne.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},U.filter(Ne=>!Ne.position&&Z===0||Ne.position===B).map((Ne,xe)=>{var Se,ze;return _e.createElement(P2,{key:Ne.id,icons:A,index:xe,toast:Ne,defaultRichColors:p,duration:(Se=b==null?void 0:b.duration)!=null?Se:g,className:b==null?void 0:b.className,descriptionClassName:b==null?void 0:b.descriptionClassName,invert:e,visibleToasts:v,closeButton:(ze=b==null?void 0:b.closeButton)!=null?ze:a,interacting:V,position:B,style:b==null?void 0:b.style,unstyled:b==null?void 0:b.unstyled,classNames:b==null?void 0:b.classNames,cancelButtonStyle:b==null?void 0:b.cancelButtonStyle,actionButtonStyle:b==null?void 0:b.actionButtonStyle,removeToast:le,toasts:U.filter(Me=>Me.position==Ne.position),heights:k.filter(Me=>Me.position==Ne.position),setHeights:D,expandByDefault:s,gap:w,loadingIcon:_,expanded:O,pauseWhenPageIsHidden:C,cn:L})}))})):null};const k2=({...n})=>{const{theme:e="system"}=l2();return l.jsx(R2,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};function O2(n,e=[]){let t=[];function r(a,c){const u=E.createContext(c),h=t.length;t=[...t,c];const p=y=>{var A;const{scope:v,children:b,...S}=y,w=((A=v==null?void 0:v[n])==null?void 0:A[h])||u,_=E.useMemo(()=>S,Object.values(S));return l.jsx(w.Provider,{value:_,children:b})};p.displayName=a+"Provider";function g(y,v){var w;const b=((w=v==null?void 0:v[n])==null?void 0:w[h])||u,S=E.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[p,g]}const s=()=>{const a=t.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[n])||a;return E.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,D2(s,...e)]}function D2(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:p})=>{const y=h(a)[`__scope${p}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var L2="DismissableLayer",Ay="dismissableLayer.update",M2="dismissableLayer.pointerDownOutside",F2="dismissableLayer.focusOutside",rE,VS=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Gv=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=n,p=E.useContext(VS),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=bt(e,R=>y(R)),w=Array.from(p.layers),[_]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),A=w.indexOf(_),I=g?w.indexOf(g):-1,C=p.layersWithOutsidePointerEventsDisabled.size>0,L=I>=A,U=$2(R=>{const k=R.target,D=[...p.branches].some(O=>O.contains(k));!L||D||(s==null||s(R),c==null||c(R),R.defaultPrevented||u==null||u())},v),z=z2(R=>{const k=R.target;[...p.branches].some(O=>O.contains(k))||(a==null||a(R),c==null||c(R),R.defaultPrevented||u==null||u())},v);return $v(R=>{I===p.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},v),E.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(rE=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),sE(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=rE)}},[g,v,t,p]),E.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),sE())},[g,p]),E.useEffect(()=>{const R=()=>b({});return document.addEventListener(Ay,R),()=>document.removeEventListener(Ay,R)},[]),l.jsx(We.div,{...h,ref:S,style:{pointerEvents:C?L?"auto":"none":void 0,...n.style},onFocusCapture:Ue(n.onFocusCapture,z.onFocusCapture),onBlurCapture:Ue(n.onBlurCapture,z.onBlurCapture),onPointerDownCapture:Ue(n.onPointerDownCapture,U.onPointerDownCapture)})});Gv.displayName=L2;var V2="DismissableLayerBranch",U2=E.forwardRef((n,e)=>{const t=E.useContext(VS),r=E.useRef(null),s=bt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(We.div,{...n,ref:s})});U2.displayName=V2;function $2(n,e=globalThis==null?void 0:globalThis.document){const t=Nn(n),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){US(M2,t,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function z2(n,e=globalThis==null?void 0:globalThis.document){const t=Nn(n),r=E.useRef(!1);return E.useEffect(()=>{const s=a=>{a.target&&!r.current&&US(F2,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function sE(){const n=new CustomEvent(Ay);document.dispatchEvent(n)}function US(n,e,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Ep(s,a):s.dispatchEvent(a)}var B2=K1.useId||(()=>{}),q2=0;function Do(n){const[e,t]=E.useState(B2());return Yt(()=>{t(r=>r??String(q2++))},[n]),e?`radix-${e}`:""}const W2=["top","right","bottom","left"],Wo=Math.min,Or=Math.max,Wf=Math.round,uf=Math.floor,Ho=n=>({x:n,y:n}),H2={left:"right",right:"left",bottom:"top",top:"bottom"},K2={start:"end",end:"start"};function Py(n,e,t){return Or(n,Wo(e,t))}function Oi(n,e){return typeof n=="function"?n(e):n}function Di(n){return n.split("-")[0]}function Vc(n){return n.split("-")[1]}function Qv(n){return n==="x"?"y":"x"}function Yv(n){return n==="y"?"height":"width"}function Ko(n){return["top","bottom"].includes(Di(n))?"y":"x"}function Xv(n){return Qv(Ko(n))}function G2(n,e,t){t===void 0&&(t=!1);const r=Vc(n),s=Xv(n),a=Yv(s);let c=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=Hf(c)),[c,Hf(c)]}function Q2(n){const e=Hf(n);return[Ry(n),e,Ry(e)]}function Ry(n){return n.replace(/start|end/g,e=>K2[e])}function Y2(n,e,t){const r=["left","right"],s=["right","left"],a=["top","bottom"],c=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?a:c;default:return[]}}function X2(n,e,t,r){const s=Vc(n);let a=Y2(Di(n),t==="start",r);return s&&(a=a.map(c=>c+"-"+s),e&&(a=a.concat(a.map(Ry)))),a}function Hf(n){return n.replace(/left|right|bottom|top/g,e=>H2[e])}function J2(n){return{top:0,right:0,bottom:0,left:0,...n}}function $S(n){return typeof n!="number"?J2(n):{top:n,right:n,bottom:n,left:n}}function Kf(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function iE(n,e,t){let{reference:r,floating:s}=n;const a=Ko(e),c=Xv(e),u=Yv(c),h=Di(e),p=a==="y",g=r.x+r.width/2-s.width/2,y=r.y+r.height/2-s.height/2,v=r[u]/2-s[u]/2;let b;switch(h){case"top":b={x:g,y:r.y-s.height};break;case"bottom":b={x:g,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y};break;case"left":b={x:r.x-s.width,y};break;default:b={x:r.x,y:r.y}}switch(Vc(e)){case"start":b[c]-=v*(t&&p?-1:1);break;case"end":b[c]+=v*(t&&p?-1:1);break}return b}const Z2=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:c}=t,u=a.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let p=await c.getElementRects({reference:n,floating:e,strategy:s}),{x:g,y}=iE(p,r,h),v=r,b={},S=0;for(let w=0;w<u.length;w++){const{name:_,fn:A}=u[w],{x:I,y:C,data:L,reset:U}=await A({x:g,y,initialPlacement:r,placement:v,strategy:s,middlewareData:b,rects:p,platform:c,elements:{reference:n,floating:e}});g=I??g,y=C??y,b={...b,[_]:{...b[_],...L}},U&&S<=50&&(S++,typeof U=="object"&&(U.placement&&(v=U.placement),U.rects&&(p=U.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:s}):U.rects),{x:g,y}=iE(p,v,h)),w=-1)}return{x:g,y,placement:v,strategy:s,middlewareData:b}};async function sd(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:c,elements:u,strategy:h}=n,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:y="floating",altBoundary:v=!1,padding:b=0}=Oi(e,n),S=$S(b),_=u[v?y==="floating"?"reference":"floating":y],A=Kf(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(_)))==null||t?_:_.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:p,rootBoundary:g,strategy:h})),I=y==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),L=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},U=Kf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:I,offsetParent:C,strategy:h}):I);return{top:(A.top-U.top+S.top)/L.y,bottom:(U.bottom-A.bottom+S.bottom)/L.y,left:(A.left-U.left+S.left)/L.x,right:(U.right-A.right+S.right)/L.x}}const eO=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:a,platform:c,elements:u,middlewareData:h}=e,{element:p,padding:g=0}=Oi(n,e)||{};if(p==null)return{};const y=$S(g),v={x:t,y:r},b=Xv(s),S=Yv(b),w=await c.getDimensions(p),_=b==="y",A=_?"top":"left",I=_?"bottom":"right",C=_?"clientHeight":"clientWidth",L=a.reference[S]+a.reference[b]-v[b]-a.floating[S],U=v[b]-a.reference[b],z=await(c.getOffsetParent==null?void 0:c.getOffsetParent(p));let R=z?z[C]:0;(!R||!await(c.isElement==null?void 0:c.isElement(z)))&&(R=u.floating[C]||a.floating[S]);const k=L/2-U/2,D=R/2-w[S]/2-1,O=Wo(y[A],D),M=Wo(y[I],D),V=O,P=R-w[S]-M,H=R/2-w[S]/2+k,q=Py(V,H,P),K=!h.arrow&&Vc(s)!=null&&H!==q&&a.reference[S]/2-(H<V?O:M)-w[S]/2<0,te=K?H<V?H-V:H-P:0;return{[b]:v[b]+te,data:{[b]:q,centerOffset:H-q-te,...K&&{alignmentOffset:te}},reset:K}}}),tO=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:a,rects:c,initialPlacement:u,platform:h,elements:p}=e,{mainAxis:g=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:w=!0,..._}=Oi(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const A=Di(s),I=Ko(u),C=Di(u)===u,L=await(h.isRTL==null?void 0:h.isRTL(p.floating)),U=v||(C||!w?[Hf(u)]:Q2(u)),z=S!=="none";!v&&z&&U.push(...X2(u,w,S,L));const R=[u,...U],k=await sd(e,_),D=[];let O=((r=a.flip)==null?void 0:r.overflows)||[];if(g&&D.push(k[A]),y){const H=G2(s,c,L);D.push(k[H[0]],k[H[1]])}if(O=[...O,{placement:s,overflows:D}],!D.every(H=>H<=0)){var M,V;const H=(((M=a.flip)==null?void 0:M.index)||0)+1,q=R[H];if(q)return{data:{index:H,overflows:O},reset:{placement:q}};let K=(V=O.filter(te=>te.overflows[0]<=0).sort((te,Q)=>te.overflows[1]-Q.overflows[1])[0])==null?void 0:V.placement;if(!K)switch(b){case"bestFit":{var P;const te=(P=O.filter(Q=>{if(z){const oe=Ko(Q.placement);return oe===I||oe==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(oe=>oe>0).reduce((oe,le)=>oe+le,0)]).sort((Q,oe)=>Q[1]-oe[1])[0])==null?void 0:P[0];te&&(K=te);break}case"initialPlacement":K=u;break}if(s!==K)return{reset:{placement:K}}}return{}}}};function oE(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function aE(n){return W2.some(e=>n[e]>=0)}const nO=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Oi(n,e);switch(r){case"referenceHidden":{const a=await sd(e,{...s,elementContext:"reference"}),c=oE(a,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:aE(c)}}}case"escaped":{const a=await sd(e,{...s,altBoundary:!0}),c=oE(a,t.floating);return{data:{escapedOffsets:c,escaped:aE(c)}}}default:return{}}}}};async function rO(n,e){const{placement:t,platform:r,elements:s}=n,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=Di(t),u=Vc(t),h=Ko(t)==="y",p=["left","top"].includes(c)?-1:1,g=a&&h?-1:1,y=Oi(e,n);let{mainAxis:v,crossAxis:b,alignmentAxis:S}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return u&&typeof S=="number"&&(b=u==="end"?S*-1:S),h?{x:b*g,y:v*p}:{x:v*p,y:b*g}}const sO=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:a,placement:c,middlewareData:u}=e,h=await rO(e,n);return c===((t=u.offset)==null?void 0:t.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+h.x,y:a+h.y,data:{...h,placement:c}}}}},iO=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:u={fn:_=>{let{x:A,y:I}=_;return{x:A,y:I}}},...h}=Oi(n,e),p={x:t,y:r},g=await sd(e,h),y=Ko(Di(s)),v=Qv(y);let b=p[v],S=p[y];if(a){const _=v==="y"?"top":"left",A=v==="y"?"bottom":"right",I=b+g[_],C=b-g[A];b=Py(I,b,C)}if(c){const _=y==="y"?"top":"left",A=y==="y"?"bottom":"right",I=S+g[_],C=S-g[A];S=Py(I,S,C)}const w=u.fn({...e,[v]:b,[y]:S});return{...w,data:{x:w.x-t,y:w.y-r,enabled:{[v]:a,[y]:c}}}}}},oO=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:a,middlewareData:c}=e,{offset:u=0,mainAxis:h=!0,crossAxis:p=!0}=Oi(n,e),g={x:t,y:r},y=Ko(s),v=Qv(y);let b=g[v],S=g[y];const w=Oi(u,e),_=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(h){const C=v==="y"?"height":"width",L=a.reference[v]-a.floating[C]+_.mainAxis,U=a.reference[v]+a.reference[C]-_.mainAxis;b<L?b=L:b>U&&(b=U)}if(p){var A,I;const C=v==="y"?"width":"height",L=["top","left"].includes(Di(s)),U=a.reference[y]-a.floating[C]+(L&&((A=c.offset)==null?void 0:A[y])||0)+(L?0:_.crossAxis),z=a.reference[y]+a.reference[C]+(L?0:((I=c.offset)==null?void 0:I[y])||0)-(L?_.crossAxis:0);S<U?S=U:S>z&&(S=z)}return{[v]:b,[y]:S}}}},aO=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:a,platform:c,elements:u}=e,{apply:h=()=>{},...p}=Oi(n,e),g=await sd(e,p),y=Di(s),v=Vc(s),b=Ko(s)==="y",{width:S,height:w}=a.floating;let _,A;y==="top"||y==="bottom"?(_=y,A=v===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(A=y,_=v==="end"?"top":"bottom");const I=w-g.top-g.bottom,C=S-g.left-g.right,L=Wo(w-g[_],I),U=Wo(S-g[A],C),z=!e.middlewareData.shift;let R=L,k=U;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(k=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(R=I),z&&!v){const O=Or(g.left,0),M=Or(g.right,0),V=Or(g.top,0),P=Or(g.bottom,0);b?k=S-2*(O!==0||M!==0?O+M:Or(g.left,g.right)):R=w-2*(V!==0||P!==0?V+P:Or(g.top,g.bottom))}await h({...e,availableWidth:k,availableHeight:R});const D=await c.getDimensions(u.floating);return S!==D.width||w!==D.height?{reset:{rects:!0}}:{}}}};function Np(){return typeof window<"u"}function Uc(n){return zS(n)?(n.nodeName||"").toLowerCase():"#document"}function Mr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function oi(n){var e;return(e=(zS(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function zS(n){return Np()?n instanceof Node||n instanceof Mr(n).Node:!1}function ws(n){return Np()?n instanceof Element||n instanceof Mr(n).Element:!1}function ni(n){return Np()?n instanceof HTMLElement||n instanceof Mr(n).HTMLElement:!1}function lE(n){return!Np()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Mr(n).ShadowRoot}function Id(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=_s(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function lO(n){return["table","td","th"].includes(Uc(n))}function Tp(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Jv(n){const e=Zv(),t=ws(n)?_s(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function cO(n){let e=Go(n);for(;ni(e)&&!Nc(e);){if(Jv(e))return e;if(Tp(e))return null;e=Go(e)}return null}function Zv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Nc(n){return["html","body","#document"].includes(Uc(n))}function _s(n){return Mr(n).getComputedStyle(n)}function Cp(n){return ws(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Go(n){if(Uc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||lE(n)&&n.host||oi(n);return lE(e)?e.host:e}function BS(n){const e=Go(n);return Nc(e)?n.ownerDocument?n.ownerDocument.body:n.body:ni(e)&&Id(e)?e:BS(e)}function id(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=BS(n),a=s===((r=n.ownerDocument)==null?void 0:r.body),c=Mr(s);if(a){const u=ky(c);return e.concat(c,c.visualViewport||[],Id(s)?s:[],u&&t?id(u):[])}return e.concat(s,id(s,[],t))}function ky(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function qS(n){const e=_s(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ni(n),a=s?n.offsetWidth:t,c=s?n.offsetHeight:r,u=Wf(t)!==a||Wf(r)!==c;return u&&(t=a,r=c),{width:t,height:r,$:u}}function ex(n){return ws(n)?n:n.contextElement}function ic(n){const e=ex(n);if(!ni(e))return Ho(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:a}=qS(e);let c=(a?Wf(t.width):t.width)/r,u=(a?Wf(t.height):t.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const uO=Ho(0);function WS(n){const e=Mr(n);return!Zv()||!e.visualViewport?uO:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function dO(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Mr(n)?!1:e}function Ha(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),a=ex(n);let c=Ho(1);e&&(r?ws(r)&&(c=ic(r)):c=ic(n));const u=dO(a,t,r)?WS(a):Ho(0);let h=(s.left+u.x)/c.x,p=(s.top+u.y)/c.y,g=s.width/c.x,y=s.height/c.y;if(a){const v=Mr(a),b=r&&ws(r)?Mr(r):r;let S=v,w=ky(S);for(;w&&r&&b!==S;){const _=ic(w),A=w.getBoundingClientRect(),I=_s(w),C=A.left+(w.clientLeft+parseFloat(I.paddingLeft))*_.x,L=A.top+(w.clientTop+parseFloat(I.paddingTop))*_.y;h*=_.x,p*=_.y,g*=_.x,y*=_.y,h+=C,p+=L,S=Mr(w),w=ky(S)}}return Kf({width:g,height:y,x:h,y:p})}function hO(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const a=s==="fixed",c=oi(r),u=e?Tp(e.floating):!1;if(r===c||u&&a)return t;let h={scrollLeft:0,scrollTop:0},p=Ho(1);const g=Ho(0),y=ni(r);if((y||!y&&!a)&&((Uc(r)!=="body"||Id(c))&&(h=Cp(r)),ni(r))){const v=Ha(r);p=ic(r),g.x=v.x+r.clientLeft,g.y=v.y+r.clientTop}return{width:t.width*p.x,height:t.height*p.y,x:t.x*p.x-h.scrollLeft*p.x+g.x,y:t.y*p.y-h.scrollTop*p.y+g.y}}function fO(n){return Array.from(n.getClientRects())}function Oy(n,e){const t=Cp(n).scrollLeft;return e?e.left+t:Ha(oi(n)).left+t}function pO(n){const e=oi(n),t=Cp(n),r=n.ownerDocument.body,s=Or(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Or(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+Oy(n);const u=-t.scrollTop;return _s(r).direction==="rtl"&&(c+=Or(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:c,y:u}}function mO(n,e){const t=Mr(n),r=oi(n),s=t.visualViewport;let a=r.clientWidth,c=r.clientHeight,u=0,h=0;if(s){a=s.width,c=s.height;const p=Zv();(!p||p&&e==="fixed")&&(u=s.offsetLeft,h=s.offsetTop)}return{width:a,height:c,x:u,y:h}}function gO(n,e){const t=Ha(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,a=ni(n)?ic(n):Ho(1),c=n.clientWidth*a.x,u=n.clientHeight*a.y,h=s*a.x,p=r*a.y;return{width:c,height:u,x:h,y:p}}function cE(n,e,t){let r;if(e==="viewport")r=mO(n,t);else if(e==="document")r=pO(oi(n));else if(ws(e))r=gO(e,t);else{const s=WS(n);r={...e,x:e.x-s.x,y:e.y-s.y}}return Kf(r)}function HS(n,e){const t=Go(n);return t===e||!ws(t)||Nc(t)?!1:_s(t).position==="fixed"||HS(t,e)}function yO(n,e){const t=e.get(n);if(t)return t;let r=id(n,[],!1).filter(u=>ws(u)&&Uc(u)!=="body"),s=null;const a=_s(n).position==="fixed";let c=a?Go(n):n;for(;ws(c)&&!Nc(c);){const u=_s(c),h=Jv(c);!h&&u.position==="fixed"&&(s=null),(a?!h&&!s:!h&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Id(c)&&!h&&HS(n,c))?r=r.filter(g=>g!==c):s=u,c=Go(c)}return e.set(n,r),r}function vO(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const c=[...t==="clippingAncestors"?Tp(e)?[]:yO(e,this._c):[].concat(t),r],u=c[0],h=c.reduce((p,g)=>{const y=cE(e,g,s);return p.top=Or(y.top,p.top),p.right=Wo(y.right,p.right),p.bottom=Wo(y.bottom,p.bottom),p.left=Or(y.left,p.left),p},cE(e,u,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function xO(n){const{width:e,height:t}=qS(n);return{width:e,height:t}}function wO(n,e,t){const r=ni(e),s=oi(e),a=t==="fixed",c=Ha(n,!0,a,e);let u={scrollLeft:0,scrollTop:0};const h=Ho(0);if(r||!r&&!a)if((Uc(e)!=="body"||Id(s))&&(u=Cp(e)),r){const b=Ha(e,!0,a,e);h.x=b.x+e.clientLeft,h.y=b.y+e.clientTop}else s&&(h.x=Oy(s));let p=0,g=0;if(s&&!r&&!a){const b=s.getBoundingClientRect();g=b.top+u.scrollTop,p=b.left+u.scrollLeft-Oy(s,b)}const y=c.left+u.scrollLeft-h.x-p,v=c.top+u.scrollTop-h.y-g;return{x:y,y:v,width:c.width,height:c.height}}function Kg(n){return _s(n).position==="static"}function uE(n,e){if(!ni(n)||_s(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return oi(n)===t&&(t=t.ownerDocument.body),t}function KS(n,e){const t=Mr(n);if(Tp(n))return t;if(!ni(n)){let s=Go(n);for(;s&&!Nc(s);){if(ws(s)&&!Kg(s))return s;s=Go(s)}return t}let r=uE(n,e);for(;r&&lO(r)&&Kg(r);)r=uE(r,e);return r&&Nc(r)&&Kg(r)&&!Jv(r)?t:r||cO(n)||t}const _O=async function(n){const e=this.getOffsetParent||KS,t=this.getDimensions,r=await t(n.floating);return{reference:wO(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function EO(n){return _s(n).direction==="rtl"}const bO={convertOffsetParentRelativeRectToViewportRelativeRect:hO,getDocumentElement:oi,getClippingRect:vO,getOffsetParent:KS,getElementRects:_O,getClientRects:fO,getDimensions:xO,getScale:ic,isElement:ws,isRTL:EO};function SO(n,e){let t=null,r;const s=oi(n);function a(){var u;clearTimeout(r),(u=t)==null||u.disconnect(),t=null}function c(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),a();const{left:p,top:g,width:y,height:v}=n.getBoundingClientRect();if(u||e(),!y||!v)return;const b=uf(g),S=uf(s.clientWidth-(p+y)),w=uf(s.clientHeight-(g+v)),_=uf(p),I={rootMargin:-b+"px "+-S+"px "+-w+"px "+-_+"px",threshold:Or(0,Wo(1,h))||1};let C=!0;function L(U){const z=U[0].intersectionRatio;if(z!==h){if(!C)return c();z?c(!1,z):r=setTimeout(()=>{c(!1,1e-7)},1e3)}C=!1}try{t=new IntersectionObserver(L,{...I,root:s.ownerDocument})}catch{t=new IntersectionObserver(L,I)}t.observe(n)}return c(!0),a}function NO(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,p=ex(n),g=s||a?[...p?id(p):[],...id(e)]:[];g.forEach(A=>{s&&A.addEventListener("scroll",t,{passive:!0}),a&&A.addEventListener("resize",t)});const y=p&&u?SO(p,t):null;let v=-1,b=null;c&&(b=new ResizeObserver(A=>{let[I]=A;I&&I.target===p&&b&&(b.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=b)==null||C.observe(e)})),t()}),p&&!h&&b.observe(p),b.observe(e));let S,w=h?Ha(n):null;h&&_();function _(){const A=Ha(n);w&&(A.x!==w.x||A.y!==w.y||A.width!==w.width||A.height!==w.height)&&t(),w=A,S=requestAnimationFrame(_)}return t(),()=>{var A;g.forEach(I=>{s&&I.removeEventListener("scroll",t),a&&I.removeEventListener("resize",t)}),y==null||y(),(A=b)==null||A.disconnect(),b=null,h&&cancelAnimationFrame(S)}}const TO=sO,CO=iO,IO=tO,jO=aO,AO=nO,dE=eO,PO=oO,RO=(n,e,t)=>{const r=new Map,s={platform:bO,...t},a={...s.platform,_c:r};return Z2(n,e,{...s,platform:a})};var jf=typeof document<"u"?E.useLayoutEffect:E.useEffect;function Gf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Gf(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const a=s[r];if(!(a==="_owner"&&n.$$typeof)&&!Gf(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function GS(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function hE(n,e){const t=GS(n);return Math.round(e*t)/t}function Gg(n){const e=E.useRef(n);return jf(()=>{e.current=n}),e}function kO(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:c}={},transform:u=!0,whileElementsMounted:h,open:p}=n,[g,y]=E.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,b]=E.useState(r);Gf(v,r)||b(r);const[S,w]=E.useState(null),[_,A]=E.useState(null),I=E.useCallback(Q=>{Q!==z.current&&(z.current=Q,w(Q))},[]),C=E.useCallback(Q=>{Q!==R.current&&(R.current=Q,A(Q))},[]),L=a||S,U=c||_,z=E.useRef(null),R=E.useRef(null),k=E.useRef(g),D=h!=null,O=Gg(h),M=Gg(s),V=Gg(p),P=E.useCallback(()=>{if(!z.current||!R.current)return;const Q={placement:e,strategy:t,middleware:v};M.current&&(Q.platform=M.current),RO(z.current,R.current,Q).then(oe=>{const le={...oe,isPositioned:V.current!==!1};H.current&&!Gf(k.current,le)&&(k.current=le,rl.flushSync(()=>{y(le)}))})},[v,e,t,M,V]);jf(()=>{p===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,y(Q=>({...Q,isPositioned:!1})))},[p]);const H=E.useRef(!1);jf(()=>(H.current=!0,()=>{H.current=!1}),[]),jf(()=>{if(L&&(z.current=L),U&&(R.current=U),L&&U){if(O.current)return O.current(L,U,P);P()}},[L,U,P,O,D]);const q=E.useMemo(()=>({reference:z,floating:R,setReference:I,setFloating:C}),[I,C]),K=E.useMemo(()=>({reference:L,floating:U}),[L,U]),te=E.useMemo(()=>{const Q={position:t,left:0,top:0};if(!K.floating)return Q;const oe=hE(K.floating,g.x),le=hE(K.floating,g.y);return u?{...Q,transform:"translate("+oe+"px, "+le+"px)",...GS(K.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:oe,top:le}},[t,u,K.floating,g.x,g.y]);return E.useMemo(()=>({...g,update:P,refs:q,elements:K,floatingStyles:te}),[g,P,q,K,te])}const OO=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?dE({element:r.current,padding:s}).fn(t):{}:r?dE({element:r,padding:s}).fn(t):{}}}},DO=(n,e)=>({...TO(n),options:[n,e]}),LO=(n,e)=>({...CO(n),options:[n,e]}),MO=(n,e)=>({...PO(n),options:[n,e]}),FO=(n,e)=>({...IO(n),options:[n,e]}),VO=(n,e)=>({...jO(n),options:[n,e]}),UO=(n,e)=>({...AO(n),options:[n,e]}),$O=(n,e)=>({...OO(n),options:[n,e]});var zO="Arrow",QS=E.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...a}=n;return l.jsx(We.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});QS.displayName=zO;var BO=QS;function YS(n){const[e,t]=E.useState(void 0);return Yt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let c,u;if("borderBoxSize"in a){const h=a.borderBoxSize,p=Array.isArray(h)?h[0]:h;c=p.inlineSize,u=p.blockSize}else c=n.offsetWidth,u=n.offsetHeight;t({width:c,height:u})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var tx="Popper",[XS,Ip]=Ui(tx),[qO,JS]=XS(tx),ZS=n=>{const{__scopePopper:e,children:t}=n,[r,s]=E.useState(null);return l.jsx(qO,{scope:e,anchor:r,onAnchorChange:s,children:t})};ZS.displayName=tx;var eN="PopperAnchor",tN=E.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,a=JS(eN,t),c=E.useRef(null),u=bt(e,c);return E.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:l.jsx(We.div,{...s,ref:u})});tN.displayName=eN;var nx="PopperContent",[WO,HO]=XS(nx),nN=E.forwardRef((n,e)=>{var xe,Se,ze,Me,rt,st;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:S,...w}=n,_=JS(nx,t),[A,I]=E.useState(null),C=bt(e,Nt=>I(Nt)),[L,U]=E.useState(null),z=YS(L),R=(z==null?void 0:z.width)??0,k=(z==null?void 0:z.height)??0,D=r+(a!=="center"?"-"+a:""),O=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},M=Array.isArray(p)?p:[p],V=M.length>0,P={padding:O,boundary:M.filter(GO),altBoundary:V},{refs:H,floatingStyles:q,placement:K,isPositioned:te,middlewareData:Q}=kO({strategy:"fixed",placement:D,whileElementsMounted:(...Nt)=>NO(...Nt,{animationFrame:b==="always"}),elements:{reference:_.anchor},middleware:[DO({mainAxis:s+k,alignmentAxis:c}),h&&LO({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?MO():void 0,...P}),h&&FO({...P}),VO({...P,apply:({elements:Nt,rects:Ot,availableWidth:Tn,availableHeight:nn})=>{const{width:$n,height:br}=Ot.reference,Pt=Nt.floating.style;Pt.setProperty("--radix-popper-available-width",`${Tn}px`),Pt.setProperty("--radix-popper-available-height",`${nn}px`),Pt.setProperty("--radix-popper-anchor-width",`${$n}px`),Pt.setProperty("--radix-popper-anchor-height",`${br}px`)}}),L&&$O({element:L,padding:u}),QO({arrowWidth:R,arrowHeight:k}),v&&UO({strategy:"referenceHidden",...P})]}),[oe,le]=iN(K),B=Nn(S);Yt(()=>{te&&(B==null||B())},[te,B]);const Z=(xe=Q.arrow)==null?void 0:xe.x,he=(Se=Q.arrow)==null?void 0:Se.y,Ce=((ze=Q.arrow)==null?void 0:ze.centerOffset)!==0,[Fe,Ne]=E.useState();return Yt(()=>{A&&Ne(window.getComputedStyle(A).zIndex)},[A]),l.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:te?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Fe,"--radix-popper-transform-origin":[(Me=Q.transformOrigin)==null?void 0:Me.x,(rt=Q.transformOrigin)==null?void 0:rt.y].join(" "),...((st=Q.hide)==null?void 0:st.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:l.jsx(WO,{scope:t,placedSide:oe,onArrowChange:U,arrowX:Z,arrowY:he,shouldHideArrow:Ce,children:l.jsx(We.div,{"data-side":oe,"data-align":le,...w,ref:C,style:{...w.style,animation:te?void 0:"none"}})})})});nN.displayName=nx;var rN="PopperArrow",KO={top:"bottom",right:"left",bottom:"top",left:"right"},sN=E.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,a=HO(rN,r),c=KO[a.placedSide];return l.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:l.jsx(BO,{...s,ref:t,style:{...s.style,display:"block"}})})});sN.displayName=rN;function GO(n){return n!==null}var QO=n=>({name:"transformOrigin",options:n,fn(e){var _,A,I;const{placement:t,rects:r,middlewareData:s}=e,c=((_=s.arrow)==null?void 0:_.centerOffset)!==0,u=c?0:n.arrowWidth,h=c?0:n.arrowHeight,[p,g]=iN(t),y={start:"0%",center:"50%",end:"100%"}[g],v=(((A=s.arrow)==null?void 0:A.x)??0)+u/2,b=(((I=s.arrow)==null?void 0:I.y)??0)+h/2;let S="",w="";return p==="bottom"?(S=c?y:`${v}px`,w=`${-h}px`):p==="top"?(S=c?y:`${v}px`,w=`${r.floating.height+h}px`):p==="right"?(S=`${-h}px`,w=c?y:`${b}px`):p==="left"&&(S=`${r.floating.width+h}px`,w=c?y:`${b}px`),{data:{x:S,y:w}}}});function iN(n){const[e,t="center"]=n.split("-");return[e,t]}var YO=ZS,oN=tN,aN=nN,lN=sN,XO="Portal",cN=E.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,a]=E.useState(!1);Yt(()=>a(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?_p.createPortal(l.jsx(We.div,{...r,ref:e}),c):null});cN.displayName=XO;function JO(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var uN=n=>{const{present:e,children:t}=n,r=ZO(e),s=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),a=bt(r.ref,eD(s));return typeof t=="function"||r.isPresent?E.cloneElement(s,{ref:a}):null};uN.displayName="Presence";function ZO(n){const[e,t]=E.useState(),r=E.useRef({}),s=E.useRef(n),a=E.useRef("none"),c=n?"mounted":"unmounted",[u,h]=JO(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const p=df(r.current);a.current=u==="mounted"?p:"none"},[u]),Yt(()=>{const p=r.current,g=s.current;if(g!==n){const v=a.current,b=df(p);n?h("MOUNT"):b==="none"||(p==null?void 0:p.display)==="none"?h("UNMOUNT"):h(g&&v!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Yt(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,y=b=>{const w=df(r.current).includes(b.animationName);if(b.target===e&&w&&(h("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},v=b=>{b.target===e&&(a.current=df(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(p=>{p&&(r.current=getComputedStyle(p)),t(p)},[])}}function df(n){return(n==null?void 0:n.animationName)||"none"}function eD(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var[jp,OB]=O2("Tooltip",[Ip]),rx=Ip(),dN="TooltipProvider",tD=700,fE="tooltip.open",[nD,hN]=jp(dN),fN=n=>{const{__scopeTooltip:e,delayDuration:t=tD,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=n,[c,u]=E.useState(!0),h=E.useRef(!1),p=E.useRef(0);return E.useEffect(()=>{const g=p.current;return()=>window.clearTimeout(g)},[]),l.jsx(nD,{scope:e,isOpenDelayed:c,delayDuration:t,onOpen:E.useCallback(()=>{window.clearTimeout(p.current),u(!1)},[]),onClose:E.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:h,onPointerInTransitChange:E.useCallback(g=>{h.current=g},[]),disableHoverableContent:s,children:a})};fN.displayName=dN;var pN="Tooltip",[DB,Ap]=jp(pN),Dy="TooltipTrigger",rD=E.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Ap(Dy,t),a=hN(Dy,t),c=rx(t),u=E.useRef(null),h=bt(e,u,s.onTriggerChange),p=E.useRef(!1),g=E.useRef(!1),y=E.useCallback(()=>p.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),l.jsx(oN,{asChild:!0,...c,children:l.jsx(We.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:h,onPointerMove:Ue(n.onPointerMove,v=>{v.pointerType!=="touch"&&!g.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),g.current=!0)}),onPointerLeave:Ue(n.onPointerLeave,()=>{s.onTriggerLeave(),g.current=!1}),onPointerDown:Ue(n.onPointerDown,()=>{p.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:Ue(n.onFocus,()=>{p.current||s.onOpen()}),onBlur:Ue(n.onBlur,s.onClose),onClick:Ue(n.onClick,s.onClose)})})});rD.displayName=Dy;var sD="TooltipPortal",[LB,iD]=jp(sD,{forceMount:void 0}),Tc="TooltipContent",mN=E.forwardRef((n,e)=>{const t=iD(Tc,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...a}=n,c=Ap(Tc,n.__scopeTooltip);return l.jsx(uN,{present:r||c.open,children:c.disableHoverableContent?l.jsx(gN,{side:s,...a,ref:e}):l.jsx(oD,{side:s,...a,ref:e})})}),oD=E.forwardRef((n,e)=>{const t=Ap(Tc,n.__scopeTooltip),r=hN(Tc,n.__scopeTooltip),s=E.useRef(null),a=bt(e,s),[c,u]=E.useState(null),{trigger:h,onClose:p}=t,g=s.current,{onPointerInTransitChange:y}=r,v=E.useCallback(()=>{u(null),y(!1)},[y]),b=E.useCallback((S,w)=>{const _=S.currentTarget,A={x:S.clientX,y:S.clientY},I=uD(A,_.getBoundingClientRect()),C=dD(A,I),L=hD(w.getBoundingClientRect()),U=pD([...C,...L]);u(U),y(!0)},[y]);return E.useEffect(()=>()=>v(),[v]),E.useEffect(()=>{if(h&&g){const S=_=>b(_,g),w=_=>b(_,h);return h.addEventListener("pointerleave",S),g.addEventListener("pointerleave",w),()=>{h.removeEventListener("pointerleave",S),g.removeEventListener("pointerleave",w)}}},[h,g,b,v]),E.useEffect(()=>{if(c){const S=w=>{const _=w.target,A={x:w.clientX,y:w.clientY},I=(h==null?void 0:h.contains(_))||(g==null?void 0:g.contains(_)),C=!fD(A,c);I?v():C&&(v(),p())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[h,g,c,p,v]),l.jsx(gN,{...n,ref:a})}),[aD,lD]=jp(pN,{isInside:!1}),gN=E.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:c,...u}=n,h=Ap(Tc,t),p=rx(t),{onClose:g}=h;return E.useEffect(()=>(document.addEventListener(fE,g),()=>document.removeEventListener(fE,g)),[g]),E.useEffect(()=>{if(h.trigger){const y=v=>{const b=v.target;b!=null&&b.contains(h.trigger)&&g()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[h.trigger,g]),l.jsx(Gv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:y=>y.preventDefault(),onDismiss:g,children:l.jsxs(aN,{"data-state":h.stateAttribute,...p,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(Y1,{children:r}),l.jsx(aD,{scope:t,isInside:!0,children:l.jsx(LR,{id:h.contentId,role:"tooltip",children:s||r})})]})})});mN.displayName=Tc;var yN="TooltipArrow",cD=E.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=rx(t);return lD(yN,t).isInside?null:l.jsx(lN,{...s,...r,ref:e})});cD.displayName=yN;function uD(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,r,s,a)){case a:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function dD(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function hD(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function fD(n,e){const{x:t,y:r}=n;let s=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const u=e[a].x,h=e[a].y,p=e[c].x,g=e[c].y;h>r!=g>r&&t<(p-u)*(r-h)/(g-h)+u&&(s=!s)}return s}function pD(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),mD(e)}function mD(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const a=e[e.length-1],c=e[e.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const a=t[t.length-1],c=t[t.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var gD=fN,vN=mN;const yD=gD,vD=E.forwardRef(({className:n,sideOffset:e=4,...t},r)=>l.jsx(vN,{ref:r,sideOffset:e,className:et("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));vD.displayName=vN.displayName;var jd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ka=typeof window>"u"||"Deno"in globalThis;function yr(){}function xD(n,e){return typeof n=="function"?n(e):n}function Ly(n){return typeof n=="number"&&n>=0&&n!==1/0}function xN(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Lo(n,e){return typeof n=="function"?n(e):n}function ms(n,e){return typeof n=="function"?n(e):n}function pE(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:a,queryKey:c,stale:u}=n;if(c){if(r){if(e.queryHash!==sx(c,e.options))return!1}else if(!ad(e.queryKey,c))return!1}if(t!=="all"){const h=e.isActive();if(t==="active"&&!h||t==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function mE(n,e){const{exact:t,status:r,predicate:s,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(od(e.options.mutationKey)!==od(a))return!1}else if(!ad(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function sx(n,e){return((e==null?void 0:e.queryKeyHashFn)||od)(n)}function od(n){return JSON.stringify(n,(e,t)=>Fy(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function ad(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>ad(n[t],e[t])):!1}function wN(n,e){if(n===e)return n;const t=gE(n)&&gE(e);if(t||Fy(n)&&Fy(e)){const r=t?n:Object.keys(n),s=r.length,a=t?e:Object.keys(e),c=a.length,u=t?[]:{},h=new Set(r);let p=0;for(let g=0;g<c;g++){const y=t?g:a[g];(!t&&h.has(y)||t)&&n[y]===void 0&&e[y]===void 0?(u[y]=void 0,p++):(u[y]=wN(n[y],e[y]),u[y]===n[y]&&n[y]!==void 0&&p++)}return s===c&&p===s?n:u}return e}function My(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function gE(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Fy(n){if(!yE(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!yE(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function yE(n){return Object.prototype.toString.call(n)==="[object Object]"}function wD(n){return new Promise(e=>{setTimeout(e,n)})}function Vy(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?wN(n,e):e}function _D(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function ED(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var ix=Symbol();function _N(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===ix?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function bD(n,e){return typeof n=="function"?n(...e):!!n}var Ra,So,dc,M1,SD=(M1=class extends jd{constructor(){super();Ye(this,Ra);Ye(this,So);Ye(this,dc);Re(this,dc,e=>{if(!Ka&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){X(this,So)||this.setEventListener(X(this,dc))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,So))==null||e.call(this),Re(this,So,void 0))}setEventListener(e){var t;Re(this,dc,e),(t=X(this,So))==null||t.call(this),Re(this,So,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){X(this,Ra)!==e&&(Re(this,Ra,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof X(this,Ra)=="boolean"?X(this,Ra):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ra=new WeakMap,So=new WeakMap,dc=new WeakMap,M1),ox=new SD,hc,No,fc,F1,ND=(F1=class extends jd{constructor(){super();Ye(this,hc,!0);Ye(this,No);Ye(this,fc);Re(this,fc,e=>{if(!Ka&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){X(this,No)||this.setEventListener(X(this,fc))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,No))==null||e.call(this),Re(this,No,void 0))}setEventListener(e){var t;Re(this,fc,e),(t=X(this,No))==null||t.call(this),Re(this,No,e(this.setOnline.bind(this)))}setOnline(e){X(this,hc)!==e&&(Re(this,hc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return X(this,hc)}},hc=new WeakMap,No=new WeakMap,fc=new WeakMap,F1),Qf=new ND;function Uy(){let n,e;const t=new Promise((s,a)=>{n=s,e=a});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function TD(n){return Math.min(1e3*2**n,3e4)}function EN(n){return(n??"online")==="online"?Qf.isOnline():!0}var bN=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Qg(n){return n instanceof bN}function SN(n){let e=!1,t=0,r=!1,s;const a=Uy(),c=w=>{var _;r||(v(new bN(w)),(_=n.abort)==null||_.call(n))},u=()=>{e=!0},h=()=>{e=!1},p=()=>ox.isFocused()&&(n.networkMode==="always"||Qf.isOnline())&&n.canRun(),g=()=>EN(n.networkMode)&&n.canRun(),y=w=>{var _;r||(r=!0,(_=n.onSuccess)==null||_.call(n,w),s==null||s(),a.resolve(w))},v=w=>{var _;r||(r=!0,(_=n.onError)==null||_.call(n,w),s==null||s(),a.reject(w))},b=()=>new Promise(w=>{var _;s=A=>{(r||p())&&w(A)},(_=n.onPause)==null||_.call(n)}).then(()=>{var w;s=void 0,r||(w=n.onContinue)==null||w.call(n)}),S=()=>{if(r)return;let w;const _=t===0?n.initialPromise:void 0;try{w=_??n.fn()}catch(A){w=Promise.reject(A)}Promise.resolve(w).then(y).catch(A=>{var z;if(r)return;const I=n.retry??(Ka?0:3),C=n.retryDelay??TD,L=typeof C=="function"?C(t,A):C,U=I===!0||typeof I=="number"&&t<I||typeof I=="function"&&I(t,A);if(e||!U){v(A);return}t++,(z=n.onFail)==null||z.call(n,t,A),wD(L).then(()=>p()?void 0:b()).then(()=>{e?v(A):S()})})};return{promise:a,cancel:c,continue:()=>(s==null||s(),a),cancelRetry:u,continueRetry:h,canStart:g,start:()=>(g()?S():b().then(S),a)}}var CD=n=>setTimeout(n,0);function ID(){let n=[],e=0,t=u=>{u()},r=u=>{u()},s=CD;const a=u=>{e?n.push(u):s(()=>{t(u)})},c=()=>{const u=n;n=[],u.length&&s(()=>{r(()=>{u.forEach(h=>{t(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||c()}return h},batchCalls:u=>(...h)=>{a(()=>{u(...h)})},schedule:a,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Mn=ID(),ka,V1,NN=(V1=class{constructor(){Ye(this,ka)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ly(this.gcTime)&&Re(this,ka,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Ka?1/0:5*60*1e3))}clearGcTimeout(){X(this,ka)&&(clearTimeout(X(this,ka)),Re(this,ka,void 0))}},ka=new WeakMap,V1),pc,Oa,Gr,Da,Qn,Ed,La,fs,Ci,U1,jD=(U1=class extends NN{constructor(t){super();Ye(this,fs);Ye(this,pc);Ye(this,Oa);Ye(this,Gr);Ye(this,Da);Ye(this,Qn);Ye(this,Ed);Ye(this,La);Re(this,La,!1),Re(this,Ed,t.defaultOptions),this.setOptions(t.options),this.observers=[],Re(this,Da,t.client),Re(this,Gr,X(this,Da).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Re(this,pc,AD(this.options)),this.state=t.state??X(this,pc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=X(this,Qn))==null?void 0:t.promise}setOptions(t){this.options={...X(this,Ed),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&X(this,Gr).remove(this)}setData(t,r){const s=Vy(this.state.data,t,this.options);return mt(this,fs,Ci).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){mt(this,fs,Ci).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=X(this,Qn))==null?void 0:s.promise;return(a=X(this,Qn))==null||a.cancel(t),r?r.then(yr).catch(yr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(X(this,pc))}isActive(){return this.observers.some(t=>ms(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ix||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Lo(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!xN(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=X(this,Qn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=X(this,Qn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),X(this,Gr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(X(this,Qn)&&(X(this,La)?X(this,Qn).cancel({revert:!0}):X(this,Qn).cancelRetry()),this.scheduleGc()),X(this,Gr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||mt(this,fs,Ci).call(this,{type:"invalidate"})}fetch(t,r){var g,y,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(X(this,Qn))return X(this,Qn).continueRetry(),X(this,Qn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const b=this.observers.find(S=>S.options.queryFn);b&&this.setOptions(b.options)}const s=new AbortController,a=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(Re(this,La,!0),s.signal)})},c=()=>{const b=_N(this.options,r),w=(()=>{const _={client:X(this,Da),queryKey:this.queryKey,meta:this.meta};return a(_),_})();return Re(this,La,!1),this.options.persister?this.options.persister(b,w,this):b(w)},h=(()=>{const b={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:X(this,Da),state:this.state,fetchFn:c};return a(b),b})();(g=this.options.behavior)==null||g.onFetch(h,this),Re(this,Oa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=h.fetchOptions)==null?void 0:y.meta))&&mt(this,fs,Ci).call(this,{type:"fetch",meta:(v=h.fetchOptions)==null?void 0:v.meta});const p=b=>{var S,w,_,A;Qg(b)&&b.silent||mt(this,fs,Ci).call(this,{type:"error",error:b}),Qg(b)||((w=(S=X(this,Gr).config).onError)==null||w.call(S,b,this),(A=(_=X(this,Gr).config).onSettled)==null||A.call(_,this.state.data,b,this)),this.scheduleGc()};return Re(this,Qn,SN({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:b=>{var S,w,_,A;if(b===void 0){p(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(b)}catch(I){p(I);return}(w=(S=X(this,Gr).config).onSuccess)==null||w.call(S,b,this),(A=(_=X(this,Gr).config).onSettled)==null||A.call(_,b,this.state.error,this),this.scheduleGc()},onError:p,onFail:(b,S)=>{mt(this,fs,Ci).call(this,{type:"failed",failureCount:b,error:S})},onPause:()=>{mt(this,fs,Ci).call(this,{type:"pause"})},onContinue:()=>{mt(this,fs,Ci).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),X(this,Qn).start()}},pc=new WeakMap,Oa=new WeakMap,Gr=new WeakMap,Da=new WeakMap,Qn=new WeakMap,Ed=new WeakMap,La=new WeakMap,fs=new WeakSet,Ci=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...TN(s.data,this.options),fetchMeta:t.meta??null};case"success":return Re(this,Oa,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Qg(a)&&a.revert&&X(this,Oa)?{...X(this,Oa),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),Mn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),X(this,Gr).notify({query:this,type:"updated",action:t})})},U1);function TN(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:EN(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function AD(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var $s,$1,PD=($1=class extends jd{constructor(e={}){super();Ye(this,$s);this.config=e,Re(this,$s,new Map)}build(e,t,r){const s=t.queryKey,a=t.queryHash??sx(s,t);let c=this.get(a);return c||(c=new jD({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){X(this,$s).has(e.queryHash)||(X(this,$s).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=X(this,$s).get(e.queryHash);t&&(e.destroy(),t===e&&X(this,$s).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Mn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return X(this,$s).get(e)}getAll(){return[...X(this,$s).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>pE(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>pE(e,r)):t}notify(e){Mn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Mn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Mn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$s=new WeakMap,$1),zs,sr,Ma,Bs,vo,z1,RD=(z1=class extends NN{constructor(t){super();Ye(this,Bs);Ye(this,zs);Ye(this,sr);Ye(this,Ma);this.mutationId=t.mutationId,Re(this,sr,t.mutationCache),Re(this,zs,[]),this.state=t.state||kD(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){X(this,zs).includes(t)||(X(this,zs).push(t),this.clearGcTimeout(),X(this,sr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Re(this,zs,X(this,zs).filter(r=>r!==t)),this.scheduleGc(),X(this,sr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){X(this,zs).length||(this.state.status==="pending"?this.scheduleGc():X(this,sr).remove(this))}continue(){var t;return((t=X(this,Ma))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var c,u,h,p,g,y,v,b,S,w,_,A,I,C,L,U,z,R,k,D;const r=()=>{mt(this,Bs,vo).call(this,{type:"continue"})};Re(this,Ma,SN({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(O,M)=>{mt(this,Bs,vo).call(this,{type:"failed",failureCount:O,error:M})},onPause:()=>{mt(this,Bs,vo).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>X(this,sr).canRun(this)}));const s=this.state.status==="pending",a=!X(this,Ma).canStart();try{if(s)r();else{mt(this,Bs,vo).call(this,{type:"pending",variables:t,isPaused:a}),await((u=(c=X(this,sr).config).onMutate)==null?void 0:u.call(c,t,this));const M=await((p=(h=this.options).onMutate)==null?void 0:p.call(h,t));M!==this.state.context&&mt(this,Bs,vo).call(this,{type:"pending",context:M,variables:t,isPaused:a})}const O=await X(this,Ma).start();return await((y=(g=X(this,sr).config).onSuccess)==null?void 0:y.call(g,O,t,this.state.context,this)),await((b=(v=this.options).onSuccess)==null?void 0:b.call(v,O,t,this.state.context)),await((w=(S=X(this,sr).config).onSettled)==null?void 0:w.call(S,O,null,this.state.variables,this.state.context,this)),await((A=(_=this.options).onSettled)==null?void 0:A.call(_,O,null,t,this.state.context)),mt(this,Bs,vo).call(this,{type:"success",data:O}),O}catch(O){try{throw await((C=(I=X(this,sr).config).onError)==null?void 0:C.call(I,O,t,this.state.context,this)),await((U=(L=this.options).onError)==null?void 0:U.call(L,O,t,this.state.context)),await((R=(z=X(this,sr).config).onSettled)==null?void 0:R.call(z,void 0,O,this.state.variables,this.state.context,this)),await((D=(k=this.options).onSettled)==null?void 0:D.call(k,void 0,O,t,this.state.context)),O}finally{mt(this,Bs,vo).call(this,{type:"error",error:O})}}finally{X(this,sr).runNext(this)}}},zs=new WeakMap,sr=new WeakMap,Ma=new WeakMap,Bs=new WeakSet,vo=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Mn.batch(()=>{X(this,zs).forEach(s=>{s.onMutationUpdate(t)}),X(this,sr).notify({mutation:this,type:"updated",action:t})})},z1);function kD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ji,ps,bd,B1,OD=(B1=class extends jd{constructor(e={}){super();Ye(this,ji);Ye(this,ps);Ye(this,bd);this.config=e,Re(this,ji,new Set),Re(this,ps,new Map),Re(this,bd,0)}build(e,t,r){const s=new RD({mutationCache:this,mutationId:++sf(this,bd)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){X(this,ji).add(e);const t=hf(e);if(typeof t=="string"){const r=X(this,ps).get(t);r?r.push(e):X(this,ps).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(X(this,ji).delete(e)){const t=hf(e);if(typeof t=="string"){const r=X(this,ps).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&X(this,ps).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=hf(e);if(typeof t=="string"){const r=X(this,ps).get(t),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=hf(e);if(typeof t=="string"){const s=(r=X(this,ps).get(t))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Mn.batch(()=>{X(this,ji).forEach(e=>{this.notify({type:"removed",mutation:e})}),X(this,ji).clear(),X(this,ps).clear()})}getAll(){return Array.from(X(this,ji))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>mE(t,r))}findAll(e={}){return this.getAll().filter(t=>mE(e,t))}notify(e){Mn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Mn.batch(()=>Promise.all(e.map(t=>t.continue().catch(yr))))}},ji=new WeakMap,ps=new WeakMap,bd=new WeakMap,B1);function hf(n){var e;return(e=n.options.scope)==null?void 0:e.id}function vE(n){return{onFetch:(e,t)=>{var g,y,v,b,S;const r=e.options,s=(v=(y=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:y.fetchMore)==null?void 0:v.direction,a=((b=e.state.data)==null?void 0:b.pages)||[],c=((S=e.state.data)==null?void 0:S.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const p=async()=>{let w=!1;const _=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?w=!0:e.signal.addEventListener("abort",()=>{w=!0}),e.signal)})},A=_N(e.options,e.fetchOptions),I=async(C,L,U)=>{if(w)return Promise.reject();if(L==null&&C.pages.length)return Promise.resolve(C);const R=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:L,direction:U?"backward":"forward",meta:e.options.meta};return _(M),M})(),k=await A(R),{maxPages:D}=e.options,O=U?ED:_D;return{pages:O(C.pages,k,D),pageParams:O(C.pageParams,L,D)}};if(s&&a.length){const C=s==="backward",L=C?DD:xE,U={pages:a,pageParams:c},z=L(r,U);u=await I(U,z,C)}else{const C=n??a.length;do{const L=h===0?c[0]??r.initialPageParam:xE(r,u);if(h>0&&L==null)break;u=await I(u,L),h++}while(h<C)}return u};e.options.persister?e.fetchFn=()=>{var w,_;return(_=(w=e.options).persister)==null?void 0:_.call(w,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=p}}}function xE(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function DD(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var sn,To,Co,mc,gc,Io,yc,vc,q1,LD=(q1=class{constructor(n={}){Ye(this,sn);Ye(this,To);Ye(this,Co);Ye(this,mc);Ye(this,gc);Ye(this,Io);Ye(this,yc);Ye(this,vc);Re(this,sn,n.queryCache||new PD),Re(this,To,n.mutationCache||new OD),Re(this,Co,n.defaultOptions||{}),Re(this,mc,new Map),Re(this,gc,new Map),Re(this,Io,0)}mount(){sf(this,Io)._++,X(this,Io)===1&&(Re(this,yc,ox.subscribe(async n=>{n&&(await this.resumePausedMutations(),X(this,sn).onFocus())})),Re(this,vc,Qf.subscribe(async n=>{n&&(await this.resumePausedMutations(),X(this,sn).onOnline())})))}unmount(){var n,e;sf(this,Io)._--,X(this,Io)===0&&((n=X(this,yc))==null||n.call(this),Re(this,yc,void 0),(e=X(this,vc))==null||e.call(this),Re(this,vc,void 0))}isFetching(n){return X(this,sn).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return X(this,To).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=X(this,sn).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=X(this,sn).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Lo(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return X(this,sn).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=X(this,sn).get(r.queryHash),a=s==null?void 0:s.state.data,c=xD(e,a);if(c!==void 0)return X(this,sn).build(this,r).setData(c,{...t,manual:!0})}setQueriesData(n,e,t){return Mn.batch(()=>X(this,sn).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=X(this,sn).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=X(this,sn);Mn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=X(this,sn);return Mn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Mn.batch(()=>X(this,sn).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(yr).catch(yr)}invalidateQueries(n,e={}){return Mn.batch(()=>(X(this,sn).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Mn.batch(()=>X(this,sn).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,t);return t.throwOnError||(a=a.catch(yr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(yr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=X(this,sn).build(this,e);return t.isStaleByTime(Lo(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(yr).catch(yr)}fetchInfiniteQuery(n){return n.behavior=vE(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(yr).catch(yr)}ensureInfiniteQueryData(n){return n.behavior=vE(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Qf.isOnline()?X(this,To).resumePausedMutations():Promise.resolve()}getQueryCache(){return X(this,sn)}getMutationCache(){return X(this,To)}getDefaultOptions(){return X(this,Co)}setDefaultOptions(n){Re(this,Co,n)}setQueryDefaults(n,e){X(this,mc).set(od(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...X(this,mc).values()],t={};return e.forEach(r=>{ad(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){X(this,gc).set(od(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...X(this,gc).values()],t={};return e.forEach(r=>{ad(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...X(this,Co).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=sx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ix&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...X(this,Co).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){X(this,sn).clear(),X(this,To).clear()}},sn=new WeakMap,To=new WeakMap,Co=new WeakMap,mc=new WeakMap,gc=new WeakMap,Io=new WeakMap,yc=new WeakMap,vc=new WeakMap,q1),gr,gt,Sd,ir,Fa,xc,jo,Ao,Nd,wc,_c,Va,Ua,Po,Ec,Ct,Lu,$y,zy,By,qy,Wy,Hy,Ky,CN,W1,MD=(W1=class extends jd{constructor(e,t){super();Ye(this,Ct);Ye(this,gr);Ye(this,gt);Ye(this,Sd);Ye(this,ir);Ye(this,Fa);Ye(this,xc);Ye(this,jo);Ye(this,Ao);Ye(this,Nd);Ye(this,wc);Ye(this,_c);Ye(this,Va);Ye(this,Ua);Ye(this,Po);Ye(this,Ec,new Set);this.options=t,Re(this,gr,e),Re(this,Ao,null),Re(this,jo,Uy()),this.options.experimental_prefetchInRender||X(this,jo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(X(this,gt).addObserver(this),wE(X(this,gt),this.options)?mt(this,Ct,Lu).call(this):this.updateResult(),mt(this,Ct,qy).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gy(X(this,gt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gy(X(this,gt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,mt(this,Ct,Wy).call(this),mt(this,Ct,Hy).call(this),X(this,gt).removeObserver(this)}setOptions(e){const t=this.options,r=X(this,gt);if(this.options=X(this,gr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ms(this.options.enabled,X(this,gt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");mt(this,Ct,Ky).call(this),X(this,gt).setOptions(this.options),t._defaulted&&!My(this.options,t)&&X(this,gr).getQueryCache().notify({type:"observerOptionsUpdated",query:X(this,gt),observer:this});const s=this.hasListeners();s&&_E(X(this,gt),r,this.options,t)&&mt(this,Ct,Lu).call(this),this.updateResult(),s&&(X(this,gt)!==r||ms(this.options.enabled,X(this,gt))!==ms(t.enabled,X(this,gt))||Lo(this.options.staleTime,X(this,gt))!==Lo(t.staleTime,X(this,gt)))&&mt(this,Ct,$y).call(this);const a=mt(this,Ct,zy).call(this);s&&(X(this,gt)!==r||ms(this.options.enabled,X(this,gt))!==ms(t.enabled,X(this,gt))||a!==X(this,Po))&&mt(this,Ct,By).call(this,a)}getOptimisticResult(e){const t=X(this,gr).getQueryCache().build(X(this,gr),e),r=this.createResult(t,e);return VD(this,r)&&(Re(this,ir,r),Re(this,xc,this.options),Re(this,Fa,X(this,gt).state)),r}getCurrentResult(){return X(this,ir)}trackResult(e,t){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),t==null||t(s),Reflect.get(r,s))})}trackProp(e){X(this,Ec).add(e)}getCurrentQuery(){return X(this,gt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=X(this,gr).defaultQueryOptions(e),r=X(this,gr).getQueryCache().build(X(this,gr),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return mt(this,Ct,Lu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),X(this,ir)))}createResult(e,t){var D;const r=X(this,gt),s=this.options,a=X(this,ir),c=X(this,Fa),u=X(this,xc),p=e!==r?e.state:X(this,Sd),{state:g}=e;let y={...g},v=!1,b;if(t._optimisticResults){const O=this.hasListeners(),M=!O&&wE(e,t),V=O&&_E(e,r,t,s);(M||V)&&(y={...y,...TN(g.data,e.options)}),t._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:S,errorUpdatedAt:w,status:_}=y;b=y.data;let A=!1;if(t.placeholderData!==void 0&&b===void 0&&_==="pending"){let O;a!=null&&a.isPlaceholderData&&t.placeholderData===(u==null?void 0:u.placeholderData)?(O=a.data,A=!0):O=typeof t.placeholderData=="function"?t.placeholderData((D=X(this,_c))==null?void 0:D.state.data,X(this,_c)):t.placeholderData,O!==void 0&&(_="success",b=Vy(a==null?void 0:a.data,O,t),v=!0)}if(t.select&&b!==void 0&&!A)if(a&&b===(c==null?void 0:c.data)&&t.select===X(this,Nd))b=X(this,wc);else try{Re(this,Nd,t.select),b=t.select(b),b=Vy(a==null?void 0:a.data,b,t),Re(this,wc,b),Re(this,Ao,null)}catch(O){Re(this,Ao,O)}X(this,Ao)&&(S=X(this,Ao),b=X(this,wc),w=Date.now(),_="error");const I=y.fetchStatus==="fetching",C=_==="pending",L=_==="error",U=C&&I,z=b!==void 0,k={status:_,fetchStatus:y.fetchStatus,isPending:C,isSuccess:_==="success",isError:L,isInitialLoading:U,isLoading:U,data:b,dataUpdatedAt:y.dataUpdatedAt,error:S,errorUpdatedAt:w,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>p.dataUpdateCount||y.errorUpdateCount>p.errorUpdateCount,isFetching:I,isRefetching:I&&!C,isLoadingError:L&&!z,isPaused:y.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:L&&z,isStale:ax(e,t),refetch:this.refetch,promise:X(this,jo)};if(this.options.experimental_prefetchInRender){const O=P=>{k.status==="error"?P.reject(k.error):k.data!==void 0&&P.resolve(k.data)},M=()=>{const P=Re(this,jo,k.promise=Uy());O(P)},V=X(this,jo);switch(V.status){case"pending":e.queryHash===r.queryHash&&O(V);break;case"fulfilled":(k.status==="error"||k.data!==V.value)&&M();break;case"rejected":(k.status!=="error"||k.error!==V.reason)&&M();break}}return k}updateResult(){const e=X(this,ir),t=this.createResult(X(this,gt),this.options);if(Re(this,Fa,X(this,gt).state),Re(this,xc,this.options),X(this,Fa).data!==void 0&&Re(this,_c,X(this,gt)),My(t,e))return;Re(this,ir,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!X(this,Ec).size)return!0;const c=new Set(a??X(this,Ec));return this.options.throwOnError&&c.add("error"),Object.keys(X(this,ir)).some(u=>{const h=u;return X(this,ir)[h]!==e[h]&&c.has(h)})};mt(this,Ct,CN).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&mt(this,Ct,qy).call(this)}},gr=new WeakMap,gt=new WeakMap,Sd=new WeakMap,ir=new WeakMap,Fa=new WeakMap,xc=new WeakMap,jo=new WeakMap,Ao=new WeakMap,Nd=new WeakMap,wc=new WeakMap,_c=new WeakMap,Va=new WeakMap,Ua=new WeakMap,Po=new WeakMap,Ec=new WeakMap,Ct=new WeakSet,Lu=function(e){mt(this,Ct,Ky).call(this);let t=X(this,gt).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(yr)),t},$y=function(){mt(this,Ct,Wy).call(this);const e=Lo(this.options.staleTime,X(this,gt));if(Ka||X(this,ir).isStale||!Ly(e))return;const r=xN(X(this,ir).dataUpdatedAt,e)+1;Re(this,Va,setTimeout(()=>{X(this,ir).isStale||this.updateResult()},r))},zy=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(X(this,gt)):this.options.refetchInterval)??!1},By=function(e){mt(this,Ct,Hy).call(this),Re(this,Po,e),!(Ka||ms(this.options.enabled,X(this,gt))===!1||!Ly(X(this,Po))||X(this,Po)===0)&&Re(this,Ua,setInterval(()=>{(this.options.refetchIntervalInBackground||ox.isFocused())&&mt(this,Ct,Lu).call(this)},X(this,Po)))},qy=function(){mt(this,Ct,$y).call(this),mt(this,Ct,By).call(this,mt(this,Ct,zy).call(this))},Wy=function(){X(this,Va)&&(clearTimeout(X(this,Va)),Re(this,Va,void 0))},Hy=function(){X(this,Ua)&&(clearInterval(X(this,Ua)),Re(this,Ua,void 0))},Ky=function(){const e=X(this,gr).getQueryCache().build(X(this,gr),this.options);if(e===X(this,gt))return;const t=X(this,gt);Re(this,gt,e),Re(this,Sd,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},CN=function(e){Mn.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(X(this,ir))}),X(this,gr).getQueryCache().notify({query:X(this,gt),type:"observerResultsUpdated"})})},W1);function FD(n,e){return ms(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function wE(n,e){return FD(n,e)||n.state.data!==void 0&&Gy(n,e,e.refetchOnMount)}function Gy(n,e,t){if(ms(e.enabled,n)!==!1&&Lo(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&ax(n,e)}return!1}function _E(n,e,t,r){return(n!==e||ms(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&ax(n,t)}function ax(n,e){return ms(e.enabled,n)!==!1&&n.isStaleByTime(Lo(e.staleTime,n))}function VD(n,e){return!My(n.getCurrentResult(),e)}var IN=E.createContext(void 0),jN=n=>{const e=E.useContext(IN);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},UD=({client:n,children:e})=>(E.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),l.jsx(IN.Provider,{value:n,children:e})),AN=E.createContext(!1),$D=()=>E.useContext(AN);AN.Provider;function zD(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var BD=E.createContext(zD()),qD=()=>E.useContext(BD),WD=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},HD=n=>{E.useEffect(()=>{n.clearReset()},[n])},KD=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:s})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(s&&n.data===void 0||bD(t,[n.error,r])),GD=n=>{if(n.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),t=n.staleTime;n.staleTime=typeof t=="function"?(...r)=>e(t(...r)):e(t),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},QD=(n,e)=>n.isLoading&&n.isFetching&&!e,YD=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,EE=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function XD(n,e,t){var y,v,b,S,w;const r=$D(),s=qD(),a=jN(),c=a.defaultQueryOptions(n);(v=(y=a.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||v.call(y,c),c._optimisticResults=r?"isRestoring":"optimistic",GD(c),WD(c,s),HD(s);const u=!a.getQueryCache().get(c.queryHash),[h]=E.useState(()=>new e(a,c)),p=h.getOptimisticResult(c),g=!r&&n.subscribed!==!1;if(E.useSyncExternalStore(E.useCallback(_=>{const A=g?h.subscribe(Mn.batchCalls(_)):yr;return h.updateResult(),A},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),E.useEffect(()=>{h.setOptions(c)},[c,h]),YD(c,p))throw EE(c,h,s);if(KD({result:p,errorResetBoundary:s,throwOnError:c.throwOnError,query:a.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw p.error;if((S=(b=a.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||S.call(b,c,p),c.experimental_prefetchInRender&&!Ka&&QD(p,r)){const _=u?EE(c,h,s):(w=a.getQueryCache().get(c.queryHash))==null?void 0:w.promise;_==null||_.catch(yr).finally(()=>{h.updateResult()})}return c.notifyOnChangeProps?p:h.trackResult(p)}function JD(n,e){return XD(n,MD)}/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ld(){return ld=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ld.apply(this,arguments)}var ko;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ko||(ko={}));const bE="popstate";function ZD(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:c,hash:u}=r.location;return Qy("",{pathname:a,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Yf(s)}return tL(e,t,null,n)}function en(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function PN(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eL(){return Math.random().toString(36).substr(2,8)}function SE(n,e){return{usr:n.state,key:n.key,idx:e}}function Qy(n,e,t,r){return t===void 0&&(t=null),ld({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?$c(e):e,{state:t,key:e&&e.key||r||eL()})}function Yf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $c(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function tL(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,u=ko.Pop,h=null,p=g();p==null&&(p=0,c.replaceState(ld({},c.state,{idx:p}),""));function g(){return(c.state||{idx:null}).idx}function y(){u=ko.Pop;let _=g(),A=_==null?null:_-p;p=_,h&&h({action:u,location:w.location,delta:A})}function v(_,A){u=ko.Push;let I=Qy(w.location,_,A);p=g()+1;let C=SE(I,p),L=w.createHref(I);try{c.pushState(C,"",L)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(L)}a&&h&&h({action:u,location:w.location,delta:1})}function b(_,A){u=ko.Replace;let I=Qy(w.location,_,A);p=g();let C=SE(I,p),L=w.createHref(I);c.replaceState(C,"",L),a&&h&&h({action:u,location:w.location,delta:0})}function S(_){let A=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof _=="string"?_:Yf(_);return I=I.replace(/ $/,"%20"),en(A,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,A)}let w={get action(){return u},get location(){return n(s,c)},listen(_){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(bE,y),h=_,()=>{s.removeEventListener(bE,y),h=null}},createHref(_){return e(s,_)},createURL:S,encodeLocation(_){let A=S(_);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:v,replace:b,go(_){return c.go(_)}};return w}var NE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(NE||(NE={}));function nL(n,e,t){return t===void 0&&(t="/"),rL(n,e,t)}function rL(n,e,t,r){let s=typeof e=="string"?$c(e):e,a=Cc(s.pathname||"/",t);if(a==null)return null;let c=RN(n);sL(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let p=mL(a);u=fL(c[h],p)}return u}function RN(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,c,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(en(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let p=Mo([r,h.relativePath]),g=t.concat(h);a.children&&a.children.length>0&&(en(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),RN(a.children,e,g,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:dL(p,a.index),routesMeta:g})};return n.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,c);else for(let h of kN(a.path))s(a,c,h)}),e}function kN(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=kN(r.join("/")),u=[];return u.push(...c.map(h=>h===""?a:[a,h].join("/"))),s&&u.push(...c),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function sL(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:hL(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const iL=/^:[\w-]+$/,oL=3,aL=2,lL=1,cL=10,uL=-2,TE=n=>n==="*";function dL(n,e){let t=n.split("/"),r=t.length;return t.some(TE)&&(r+=uL),e&&(r+=aL),t.filter(s=>!TE(s)).reduce((s,a)=>s+(iL.test(a)?oL:a===""?lL:cL),r)}function hL(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function fL(n,e,t){let{routesMeta:r}=n,s={},a="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],p=u===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=Yy({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},g),v=h.route;if(!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:Mo([a,y.pathname]),pathnameBase:xL(Mo([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=Mo([a,y.pathnameBase]))}return c}function Yy(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=pL(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((p,g,y)=>{let{paramName:v,isOptional:b}=g;if(v==="*"){let w=u[y]||"";c=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const S=u[y];return b&&!S?p[v]=void 0:p[v]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:c,pattern:n}}function pL(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),PN(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function mL(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return PN(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Cc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function gL(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?$c(n):n;return{pathname:t?t.startsWith("/")?t:yL(t,e):e,search:wL(r),hash:_L(s)}}function yL(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Yg(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vL(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function lx(n,e){let t=vL(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function cx(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=$c(n):(s=ld({},n),en(!s.pathname||!s.pathname.includes("?"),Yg("?","pathname","search",s)),en(!s.pathname||!s.pathname.includes("#"),Yg("#","pathname","hash",s)),en(!s.search||!s.search.includes("#"),Yg("#","search","hash",s)));let a=n===""||s.pathname==="",c=a?"/":s.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let h=gL(s,u),p=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||g)&&(h.pathname+="/"),h}const Mo=n=>n.join("/").replace(/\/\/+/g,"/"),xL=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),wL=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_L=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function EL(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const ON=["post","put","patch","delete"];new Set(ON);const bL=["get",...ON];new Set(bL);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cd(){return cd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cd.apply(this,arguments)}const Pp=E.createContext(null),DN=E.createContext(null),$i=E.createContext(null),Rp=E.createContext(null),ai=E.createContext({outlet:null,matches:[],isDataRoute:!1}),LN=E.createContext(null);function SL(n,e){let{relative:t}=e===void 0?{}:e;zc()||en(!1);let{basename:r,navigator:s}=E.useContext($i),{hash:a,pathname:c,search:u}=kp(n,{relative:t}),h=c;return r!=="/"&&(h=c==="/"?r:Mo([r,c])),s.createHref({pathname:h,search:u,hash:a})}function zc(){return E.useContext(Rp)!=null}function zi(){return zc()||en(!1),E.useContext(Rp).location}function MN(n){E.useContext($i).static||E.useLayoutEffect(n)}function Bc(){let{isDataRoute:n}=E.useContext(ai);return n?VL():NL()}function NL(){zc()||en(!1);let n=E.useContext(Pp),{basename:e,future:t,navigator:r}=E.useContext($i),{matches:s}=E.useContext(ai),{pathname:a}=zi(),c=JSON.stringify(lx(s,t.v7_relativeSplatPath)),u=E.useRef(!1);return MN(()=>{u.current=!0}),E.useCallback(function(p,g){if(g===void 0&&(g={}),!u.current)return;if(typeof p=="number"){r.go(p);return}let y=cx(p,JSON.parse(c),a,g.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Mo([e,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[e,r,c,a,n])}const TL=E.createContext(null);function CL(n){let e=E.useContext(ai).outlet;return e&&E.createElement(TL.Provider,{value:n},e)}function FN(){let{matches:n}=E.useContext(ai),e=n[n.length-1];return e?e.params:{}}function kp(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=E.useContext($i),{matches:s}=E.useContext(ai),{pathname:a}=zi(),c=JSON.stringify(lx(s,r.v7_relativeSplatPath));return E.useMemo(()=>cx(n,JSON.parse(c),a,t==="path"),[n,c,a,t])}function IL(n,e){return jL(n,e)}function jL(n,e,t,r){zc()||en(!1);let{navigator:s}=E.useContext($i),{matches:a}=E.useContext(ai),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let p=zi(),g;if(e){var y;let _=typeof e=="string"?$c(e):e;h==="/"||(y=_.pathname)!=null&&y.startsWith(h)||en(!1),g=_}else g=p;let v=g.pathname||"/",b=v;if(h!=="/"){let _=h.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let S=nL(n,{pathname:b}),w=OL(S&&S.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:Mo([h,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:Mo([h,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,t,r);return e&&w?E.createElement(Rp.Provider,{value:{location:cd({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:ko.Pop}},w):w}function AL(){let n=FL(),e=EL(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:s},t):null,null)}const PL=E.createElement(AL,null);class RL extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?E.createElement(ai.Provider,{value:this.props.routeContext},E.createElement(LN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kL(n){let{routeContext:e,match:t,children:r}=n,s=E.useContext(Pp);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(ai.Provider,{value:e},r)}function OL(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,u=(s=t)==null?void 0:s.errors;if(u!=null){let g=c.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);g>=0||en(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,p=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let y=c[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:v,errors:b}=t,S=y.route.loader&&v[y.route.id]===void 0&&(!b||b[y.route.id]===void 0);if(y.route.lazy||S){h=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((g,y,v)=>{let b,S=!1,w=null,_=null;t&&(b=u&&y.route.id?u[y.route.id]:void 0,w=y.route.errorElement||PL,h&&(p<0&&v===0?(UL("route-fallback"),S=!0,_=null):p===v&&(S=!0,_=y.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,v+1)),I=()=>{let C;return b?C=w:S?C=_:y.route.Component?C=E.createElement(y.route.Component,null):y.route.element?C=y.route.element:C=g,E.createElement(kL,{match:y,routeContext:{outlet:g,matches:A,isDataRoute:t!=null},children:C})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?E.createElement(RL,{location:t.location,revalidation:t.revalidation,component:w,error:b,children:I(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):I()},null)}var VN=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(VN||{}),UN=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(UN||{});function DL(n){let e=E.useContext(Pp);return e||en(!1),e}function LL(n){let e=E.useContext(DN);return e||en(!1),e}function ML(n){let e=E.useContext(ai);return e||en(!1),e}function $N(n){let e=ML(),t=e.matches[e.matches.length-1];return t.route.id||en(!1),t.route.id}function FL(){var n;let e=E.useContext(LN),t=LL(),r=$N();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function VL(){let{router:n}=DL(VN.UseNavigateStable),e=$N(UN.UseNavigateStable),t=E.useRef(!1);return MN(()=>{t.current=!0}),E.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,cd({fromRouteId:e},a)))},[n,e])}const CE={};function UL(n,e,t){CE[n]||(CE[n]=!0)}function Af(n){let{to:e,replace:t,state:r,relative:s}=n;zc()||en(!1);let{future:a,static:c}=E.useContext($i),{matches:u}=E.useContext(ai),{pathname:h}=zi(),p=Bc(),g=cx(e,lx(u,a.v7_relativeSplatPath),h,s==="path"),y=JSON.stringify(g);return E.useEffect(()=>p(JSON.parse(y),{replace:t,state:r,relative:s}),[p,y,s,t,r]),null}function $L(n){return CL(n.context)}function Wt(n){en(!1)}function zL(n){let{basename:e="/",children:t=null,location:r,navigationType:s=ko.Pop,navigator:a,static:c=!1,future:u}=n;zc()&&en(!1);let h=e.replace(/^\/*/,"/"),p=E.useMemo(()=>({basename:h,navigator:a,static:c,future:cd({v7_relativeSplatPath:!1},u)}),[h,u,a,c]);typeof r=="string"&&(r=$c(r));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:S="default"}=r,w=E.useMemo(()=>{let _=Cc(g,h);return _==null?null:{location:{pathname:_,search:y,hash:v,state:b,key:S},navigationType:s}},[h,g,y,v,b,S,s]);return w==null?null:E.createElement($i.Provider,{value:p},E.createElement(Rp.Provider,{children:t,value:w}))}function BL(n){let{children:e,location:t}=n;return IL(Xy(e),t)}new Promise(()=>{});function Xy(n,e){e===void 0&&(e=[]);let t=[];return E.Children.forEach(n,(r,s)=>{if(!E.isValidElement(r))return;let a=[...e,s];if(r.type===E.Fragment){t.push.apply(t,Xy(r.props.children,a));return}r.type!==Wt&&en(!1),!r.props.index||!r.props.children||en(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Xy(r.props.children,a)),t.push(c)}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xf(){return Xf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xf.apply(this,arguments)}function zN(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function qL(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function WL(n,e){return n.button===0&&(!e||e==="_self")&&!qL(n)}function Jy(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function HL(n,e){let t=Jy(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(a=>{t.append(s,a)})}),t}const KL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],GL=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],QL="6";try{window.__reactRouterVersion=QL}catch{}const YL=E.createContext({isTransitioning:!1}),XL="startTransition",IE=K1[XL];function JL(n){let{basename:e,children:t,future:r,window:s}=n,a=E.useRef();a.current==null&&(a.current=ZD({window:s,v5Compat:!0}));let c=a.current,[u,h]=E.useState({action:c.action,location:c.location}),{v7_startTransition:p}=r||{},g=E.useCallback(y=>{p&&IE?IE(()=>h(y)):h(y)},[h,p]);return E.useLayoutEffect(()=>c.listen(g),[c,g]),E.createElement(zL,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:c,future:r})}const ZL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jn=E.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:a,replace:c,state:u,target:h,to:p,preventScrollReset:g,unstable_viewTransition:y}=e,v=zN(e,KL),{basename:b}=E.useContext($i),S,w=!1;if(typeof p=="string"&&eM.test(p)&&(S=p,ZL))try{let C=new URL(window.location.href),L=p.startsWith("//")?new URL(C.protocol+p):new URL(p),U=Cc(L.pathname,b);L.origin===C.origin&&U!=null?p=U+L.search+L.hash:w=!0}catch{}let _=SL(p,{relative:s}),A=nM(p,{replace:c,state:u,target:h,preventScrollReset:g,relative:s,unstable_viewTransition:y});function I(C){r&&r(C),C.defaultPrevented||A(C)}return E.createElement("a",Xf({},v,{href:S||_,onClick:w||a?r:I,ref:t,target:h}))}),jE=E.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:c=!1,style:u,to:h,unstable_viewTransition:p,children:g}=e,y=zN(e,GL),v=kp(h,{relative:y.relative}),b=zi(),S=E.useContext(DN),{navigator:w,basename:_}=E.useContext($i),A=S!=null&&rM(v)&&p===!0,I=w.encodeLocation?w.encodeLocation(v).pathname:v.pathname,C=b.pathname,L=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;s||(C=C.toLowerCase(),L=L?L.toLowerCase():null,I=I.toLowerCase()),L&&_&&(L=Cc(L,_)||L);const U=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let z=C===I||!c&&C.startsWith(I)&&C.charAt(U)==="/",R=L!=null&&(L===I||!c&&L.startsWith(I)&&L.charAt(I.length)==="/"),k={isActive:z,isPending:R,isTransitioning:A},D=z?r:void 0,O;typeof a=="function"?O=a(k):O=[a,z?"active":null,R?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let M=typeof u=="function"?u(k):u;return E.createElement(Jn,Xf({},y,{"aria-current":D,className:O,ref:t,style:M,to:h,unstable_viewTransition:p}),typeof g=="function"?g(k):g)});var Zy;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Zy||(Zy={}));var AE;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(AE||(AE={}));function tM(n){let e=E.useContext(Pp);return e||en(!1),e}function nM(n,e){let{target:t,replace:r,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u}=e===void 0?{}:e,h=Bc(),p=zi(),g=kp(n,{relative:c});return E.useCallback(y=>{if(WL(y,t)){y.preventDefault();let v=r!==void 0?r:Yf(p)===Yf(g);h(n,{replace:v,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u})}},[p,h,g,r,s,t,n,a,c,u])}function Ad(n){let e=E.useRef(Jy(n)),t=E.useRef(!1),r=zi(),s=E.useMemo(()=>HL(r.search,t.current?null:e.current),[r.search]),a=Bc(),c=E.useCallback((u,h)=>{const p=Jy(typeof u=="function"?u(s):u);t.current=!0,a("?"+p,h)},[a,s]);return[s,c]}function rM(n,e){e===void 0&&(e={});let t=E.useContext(YL);t==null&&en(!1);let{basename:r}=tM(Zy.useViewTransitionState),s=kp(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Cc(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Cc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Yy(s.pathname,c)!=null||Yy(s.pathname,a)!=null}const sM=()=>{};var PE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},iM=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],c=n[t++],u=n[t++],h=((s&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},qN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],c=s+1<n.length,u=c?n[s+1]:0,h=s+2<n.length,p=h?n[s+2]:0,g=a>>2,y=(a&3)<<4|u>>4;let v=(u&15)<<2|p>>6,b=p&63;h||(b=64,c||(v=64)),r.push(t[g],t[y],t[v],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(BN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):iM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||u==null||p==null||y==null)throw new oM;const v=a<<2|u>>4;if(r.push(v),p!==64){const b=u<<4&240|p>>2;if(r.push(b),y!==64){const S=p<<6&192|y;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class oM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aM=function(n){const e=BN(n);return qN.encodeByteArray(e,!0)},Jf=function(n){return aM(n).replace(/\./g,"")},WN=function(n){try{return qN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=()=>lM().__FIREBASE_DEFAULTS__,uM=()=>{if(typeof process>"u"||typeof PE>"u")return;const n=PE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},dM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&WN(n[1]);return e&&JSON.parse(e)},Op=()=>{try{return sM()||cM()||uM()||dM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},HN=n=>{var e,t;return(t=(e=Op())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},hM=n=>{const e=HN(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},KN=()=>{var n;return(n=Op())===null||n===void 0?void 0:n.config},GN=n=>{var e;return(e=Op())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ux(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Jf(JSON.stringify(t)),Jf(JSON.stringify(c)),""].join(".")}const Qu={};function mM(){const n={prod:[],emulator:[]};for(const e of Object.keys(Qu))Qu[e]?n.emulator.push(e):n.prod.push(e);return n}function gM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let RE=!1;function QN(n,e){if(typeof window>"u"||typeof document>"u"||!il(window.location.host)||Qu[n]===e||Qu[n]||RE)return;Qu[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",a=mM().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function p(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{RE=!0,c()},v}function g(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=gM(r),b=t("text"),S=document.getElementById(b)||document.createElement("span"),w=t("learnmore"),_=document.getElementById(w)||document.createElement("a"),A=t("preprendIcon"),I=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const C=v.element;u(C),g(_,w);const L=p();h(I,A),C.append(I,S,_,L),document.body.appendChild(C)}a?(S.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zn())}function vM(){var n;const e=(n=Op())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wM(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _M(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EM(){const n=Zn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function bM(){return!vM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SM(){try{return typeof indexedDB=="object"}catch{return!1}}function NM(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM="FirebaseError";class li extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=TM,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pd.prototype.create)}}class Pd{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?CM(a,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new li(s,u,r)}}function CM(n,e){return n.replace(IM,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const IM=/\{\$([^}]+)}/g;function jM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ga(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],c=e[s];if(kE(a)&&kE(c)){if(!Ga(a,c))return!1}else if(a!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function kE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Fu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function AM(n,e){const t=new PM(n,e);return t.subscribe.bind(t)}class PM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");RM(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Xg),s.error===void 0&&(s.error=Xg),s.complete===void 0&&(s.complete=Xg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Xg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n){return n&&n._delegate?n._delegate:n}class Qo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new fM;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DM(e))try{this.getOrInitializeService({instanceIdentifier:Aa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Aa){return this.instances.has(e)}getOptions(e=Aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OM(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Aa){return this.component?this.component.multipleInstances?e:Aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OM(n){return n===Aa?void 0:n}function DM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ut||(ut={}));const MM={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},FM=ut.INFO,VM={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},UM=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=VM[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dx{constructor(e){this.name=e,this._logLevel=FM,this._logHandler=UM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const $M=(n,e)=>e.some(t=>n instanceof t);let OE,DE;function zM(){return OE||(OE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BM(){return DE||(DE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YN=new WeakMap,ev=new WeakMap,XN=new WeakMap,Jg=new WeakMap,hx=new WeakMap;function qM(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(Fo(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&YN.set(t,n)}).catch(()=>{}),hx.set(e,n),e}function WM(n){if(ev.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});ev.set(n,e)}let tv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ev.get(n);if(e==="objectStoreNames")return n.objectStoreNames||XN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function HM(n){tv=n(tv)}function KM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Zg(this),e,...t);return XN.set(r,e.sort?e.sort():[e]),Fo(r)}:BM().includes(n)?function(...e){return n.apply(Zg(this),e),Fo(YN.get(this))}:function(...e){return Fo(n.apply(Zg(this),e))}}function GM(n){return typeof n=="function"?KM(n):(n instanceof IDBTransaction&&WM(n),$M(n,zM())?new Proxy(n,tv):n)}function Fo(n){if(n instanceof IDBRequest)return qM(n);if(Jg.has(n))return Jg.get(n);const e=GM(n);return e!==n&&(Jg.set(n,e),hx.set(e,n)),e}const Zg=n=>hx.get(n);function QM(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const c=indexedDB.open(n,e),u=Fo(c);return r&&c.addEventListener("upgradeneeded",h=>{r(Fo(c.result),h.oldVersion,h.newVersion,Fo(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const YM=["get","getKey","getAll","getAllKeys","count"],XM=["put","add","delete","clear"],ey=new Map;function LE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ey.get(e))return ey.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=XM.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||YM.includes(t)))return;const a=async function(c,...u){const h=this.transaction(c,s?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[t](...u),s&&h.done]))[0]};return ey.set(e,a),a}HM(n=>({...n,get:(e,t,r)=>LE(e,t)||n.get(e,t,r),has:(e,t)=>!!LE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ZM(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function ZM(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nv="@firebase/app",ME="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new dx("@firebase/app"),e4="@firebase/app-compat",t4="@firebase/analytics-compat",n4="@firebase/analytics",r4="@firebase/app-check-compat",s4="@firebase/app-check",i4="@firebase/auth",o4="@firebase/auth-compat",a4="@firebase/database",l4="@firebase/data-connect",c4="@firebase/database-compat",u4="@firebase/functions",d4="@firebase/functions-compat",h4="@firebase/installations",f4="@firebase/installations-compat",p4="@firebase/messaging",m4="@firebase/messaging-compat",g4="@firebase/performance",y4="@firebase/performance-compat",v4="@firebase/remote-config",x4="@firebase/remote-config-compat",w4="@firebase/storage",_4="@firebase/storage-compat",E4="@firebase/firestore",b4="@firebase/ai",S4="@firebase/firestore-compat",N4="firebase",T4="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="[DEFAULT]",C4={[nv]:"fire-core",[e4]:"fire-core-compat",[n4]:"fire-analytics",[t4]:"fire-analytics-compat",[s4]:"fire-app-check",[r4]:"fire-app-check-compat",[i4]:"fire-auth",[o4]:"fire-auth-compat",[a4]:"fire-rtdb",[l4]:"fire-data-connect",[c4]:"fire-rtdb-compat",[u4]:"fire-fn",[d4]:"fire-fn-compat",[h4]:"fire-iid",[f4]:"fire-iid-compat",[p4]:"fire-fcm",[m4]:"fire-fcm-compat",[g4]:"fire-perf",[y4]:"fire-perf-compat",[v4]:"fire-rc",[x4]:"fire-rc-compat",[w4]:"fire-gcs",[_4]:"fire-gcs-compat",[E4]:"fire-fst",[S4]:"fire-fst-compat",[b4]:"fire-vertex","fire-js":"fire-js",[N4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=new Map,I4=new Map,sv=new Map;function FE(n,e){try{n.container.addComponent(e)}catch(t){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Qa(n){const e=n.name;if(sv.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;sv.set(e,n);for(const t of Zf.values())FE(t,n);for(const t of I4.values())FE(t,n);return!0}function Dp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Qr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vo=new Pd("app","Firebase",j4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=T4;function JN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:rv,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Vo.create("bad-app-name",{appName:String(s)});if(t||(t=KN()),!t)throw Vo.create("no-options");const a=Zf.get(s);if(a){if(Ga(t,a.options)&&Ga(r,a.config))return a;throw Vo.create("duplicate-app",{appName:s})}const c=new LM(s);for(const h of sv.values())c.addComponent(h);const u=new A4(t,r,c);return Zf.set(s,u),u}function ZN(n=rv){const e=Zf.get(n);if(!e&&n===rv&&KN())return JN();if(!e)throw Vo.create("no-app",{appName:n});return e}function Hs(n,e,t){var r;let s=(r=C4[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(u.join(" "));return}Qa(new Qo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4="firebase-heartbeat-database",R4=1,ud="firebase-heartbeat-store";let ty=null;function eT(){return ty||(ty=QM(P4,R4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ud)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vo.create("idb-open",{originalErrorMessage:n.message})})),ty}async function k4(n){try{const t=(await eT()).transaction(ud),r=await t.objectStore(ud).get(tT(n));return await t.done,r}catch(e){if(e instanceof li)Li.warn(e.message);else{const t=Vo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Li.warn(t.message)}}}async function VE(n,e){try{const r=(await eT()).transaction(ud,"readwrite");await r.objectStore(ud).put(e,tT(n)),await r.done}catch(t){if(t instanceof li)Li.warn(t.message);else{const r=Vo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Li.warn(r.message)}}}function tT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=1024,D4=30;class L4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new F4(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=UE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>D4){const c=V4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Li.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=UE(),{heartbeatsToSend:r,unsentEntries:s}=M4(this._heartbeatsCache.heartbeats),a=Jf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Li.warn(t),""}}}function UE(){return new Date().toISOString().substring(0,10)}function M4(n,e=O4){const t=[];let r=n.slice();for(const s of n){const a=t.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),$E(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),$E(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class F4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SM()?NM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await k4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return VE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return VE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $E(n){return Jf(JSON.stringify({version:2,heartbeats:n})).length}function V4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(n){Qa(new Qo("platform-logger",e=>new JM(e),"PRIVATE")),Qa(new Qo("heartbeat",e=>new L4(e),"PRIVATE")),Hs(nv,ME,n),Hs(nv,ME,"esm2017"),Hs("fire-js","")}U4("");var Xn=function(){return Xn=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Xn.apply(this,arguments)};function qc(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function nT(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}function rT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $4=rT,sT=new Pd("auth","Firebase",rT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=new dx("@firebase/auth");function z4(n,...e){ep.logLevel<=ut.WARN&&ep.warn(`Auth (${ol}): ${n}`,...e)}function Pf(n,...e){ep.logLevel<=ut.ERROR&&ep.error(`Auth (${ol}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(n,...e){throw fx(n,...e)}function Ks(n,...e){return fx(n,...e)}function iT(n,e,t){const r=Object.assign(Object.assign({},$4()),{[e]:t});return new Pd("auth","Firebase",r).create(e,{appName:n.name})}function Uo(n){return iT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fx(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return sT.create(n,...e)}function Ge(n,e,...t){if(!n)throw fx(e,...t)}function Pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Pf(e),new Error(e)}function Mi(n,e){n||Pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function B4(){return zE()==="http:"||zE()==="https:"}function zE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B4()||wM()||"connection"in navigator)?navigator.onLine:!0}function W4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mi(t>e,"Short delay should be less than long delay!"),this.isMobile=yM()||_M()}get(){return q4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(n,e){Mi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],G4=new kd(3e4,6e4);function al(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ra(n,e,t,r,s={}){return aT(n,s,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=Rd(Object.assign({key:n.config.apiKey},c)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:h},a);return xM()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&il(n.emulatorConfig.host)&&(p.credentials="include"),oT.fetch()(await lT(n,n.config.apiHost,t,u),p)})}async function aT(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},H4),e);try{const s=new Y4(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw ff(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[h,p]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ff(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw ff(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw ff(n,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw iT(n,g,p);Es(n,g)}}catch(s){if(s instanceof li)throw s;Es(n,"network-request-failed",{message:String(s)})}}async function Lp(n,e,t,r,s={}){const a=await ra(n,e,t,r,s);return"mfaPendingCredential"in a&&Es(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function lT(n,e,t,r){const s=`${e}${t}?${r}`,a=n,c=a.config.emulator?px(n.config,s):`${n.config.apiScheme}://${s}`;return K4.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function Q4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Y4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ks(this.auth,"network-request-failed")),G4.get())})}}function ff(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Ks(n,e,r);return s.customData._tokenResponse=t,s}function BE(n){return n!==void 0&&n.enterprise!==void 0}class X4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Q4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function J4(n,e){return ra(n,"GET","/v2/recaptchaConfig",al(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z4(n,e){return ra(n,"POST","/v1/accounts:delete",e)}async function tp(n,e){return ra(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eF(n,e=!1){const t=vn(n),r=await t.getIdToken(e),s=mx(r);Ge(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Yu(ny(s.auth_time)),issuedAtTime:Yu(ny(s.iat)),expirationTime:Yu(ny(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function ny(n){return Number(n)*1e3}function mx(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{const s=WN(t);return s?JSON.parse(s):(Pf("Failed to decode base64 JWT payload"),null)}catch(s){return Pf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function qE(n){const e=mx(n);return Ge(e,"internal-error"),Ge(typeof e.exp<"u","internal-error"),Ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof li&&tF(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function tF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yu(this.lastLoginAt),this.creationTime=Yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function np(n){var e;const t=n.auth,r=await n.getIdToken(),s=await dd(n,tp(t,{idToken:r}));Ge(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?cT(a.providerUserInfo):[],u=sF(n.providerData,c),h=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),g=h?p:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new ov(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function rF(n){const e=vn(n);await np(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sF(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function cT(n){return n.map(e=>{var{providerId:t}=e,r=qc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(n,e){const t=await aT(n,{},async()=>{const r=Rd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,c=await lT(n,s,"/v1/token",`key=${a}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return n.emulatorConfig&&il(n.emulatorConfig.host)&&(h.credentials="include"),oT.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function oF(n,e){return ra(n,"POST","/v2/accounts:revokeToken",al(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ge(e.idToken,"internal-error"),Ge(typeof e.idToken<"u","internal-error"),Ge(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ge(e.length!==0,"internal-error");const t=qE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await iF(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,c=new oc;return r&&(Ge(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Ge(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(Ge(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oc,this.toJSON())}_performRefresh(){return Pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(n,e){Ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ys{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=qc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ov(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await dd(this,this.stsTokenManager.getToken(this.auth,e));return Ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return eF(this,e)}reload(){return rF(this)}_assign(e){this!==e&&(Ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ys(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await np(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qr(this.auth.app))return Promise.reject(Uo(this.auth));const e=await this.getIdToken();return await dd(this,Z4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,c,u,h,p,g;const y=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(s=t.email)!==null&&s!==void 0?s:void 0,b=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,S=(c=t.photoURL)!==null&&c!==void 0?c:void 0,w=(u=t.tenantId)!==null&&u!==void 0?u:void 0,_=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,A=(p=t.createdAt)!==null&&p!==void 0?p:void 0,I=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:C,emailVerified:L,isAnonymous:U,providerData:z,stsTokenManager:R}=t;Ge(C&&R,e,"internal-error");const k=oc.fromJSON(this.name,R);Ge(typeof C=="string",e,"internal-error"),yo(y,e.name),yo(v,e.name),Ge(typeof L=="boolean",e,"internal-error"),Ge(typeof U=="boolean",e,"internal-error"),yo(b,e.name),yo(S,e.name),yo(w,e.name),yo(_,e.name),yo(A,e.name),yo(I,e.name);const D=new ys({uid:C,auth:e,email:v,emailVerified:L,displayName:y,isAnonymous:U,photoURL:S,phoneNumber:b,tenantId:w,stsTokenManager:k,createdAt:A,lastLoginAt:I});return z&&Array.isArray(z)&&(D.providerData=z.map(O=>Object.assign({},O))),_&&(D._redirectEventId=_),D}static async _fromIdTokenResponse(e,t,r=!1){const s=new oc;s.updateFromServerResponse(t);const a=new ys({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await np(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ge(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?cT(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),u=new oc;u.updateFromIdToken(r);const h=new ys({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ov(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=new Map;function Ri(n){Mi(n instanceof Function,"Expected a class definition");let e=WE.get(n);return e?(Mi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,WE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uT.type="NONE";const HE=uT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(n,e,t){return`firebase:${n}:${e}:${t}`}class ac{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Rf(this.userKey,s.apiKey,a),this.fullPersistenceKey=Rf("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await tp(this.auth,{idToken:e}).catch(()=>{});return t?ys._fromGetAccountInfoResponse(this.auth,t,e):null}return ys._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ac(Ri(HE),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||Ri(HE);const c=Rf(r,e.config.apiKey,e.name);let u=null;for(const p of t)try{const g=await p._get(c);if(g){let y;if(typeof g=="string"){const v=await tp(e,{idToken:g}).catch(()=>{});if(!v)break;y=await ys._fromGetAccountInfoResponse(e,v,g)}else y=ys._fromJSON(e,g);p!==a&&(u=y),a=p;break}}catch{}const h=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new ac(a,e,r):(a=h[0],u&&await a._set(c,u.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(c)}catch{}})),new ac(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gT(e))return"Blackberry";if(yT(e))return"Webos";if(hT(e))return"Safari";if((e.includes("chrome/")||fT(e))&&!e.includes("edge/"))return"Chrome";if(mT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dT(n=Zn()){return/firefox\//i.test(n)}function hT(n=Zn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fT(n=Zn()){return/crios\//i.test(n)}function pT(n=Zn()){return/iemobile/i.test(n)}function mT(n=Zn()){return/android/i.test(n)}function gT(n=Zn()){return/blackberry/i.test(n)}function yT(n=Zn()){return/webos/i.test(n)}function gx(n=Zn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function aF(n=Zn()){var e;return gx(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lF(){return EM()&&document.documentMode===10}function vT(n=Zn()){return gx(n)||mT(n)||yT(n)||gT(n)||/windows phone/i.test(n)||pT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(n,e=[]){let t;switch(n){case"Browser":t=KE(Zn());break;case"Worker":t=`${KE(Zn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ol}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,u)=>{try{const h=e(a);c(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uF(n,e={}){return ra(n,"GET","/v2/passwordPolicy",al(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=6;class hF{constructor(e){var t,r,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:dF,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,c,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GE(this),this.idTokenSubscription=new GE(this),this.beforeStateQueue=new cF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ri(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await ac.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await tp(this,{idToken:e}),r=await ys._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Qr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&(h!=null&&h.user)&&(s=h.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await np(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=W4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qr(this.app))return Promise.reject(Uo(this));const t=e?vn(e):null;return t&&Ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qr(this.app)?Promise.reject(Uo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qr(this.app)?Promise.reject(Uo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uF(this),t=new hF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pd("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await oF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ri(e)||this._popupRedirectResolver;Ge(t,this,"argument-error"),this.redirectPersistenceManager=await ac.create(this,[Ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ge(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,s);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&z4(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Wc(n){return vn(n)}class GE{constructor(e){this.auth=e,this.observer=null,this.addObserver=AM(t=>this.observer=t)}get next(){return Ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pF(n){Mp=n}function wT(n){return Mp.loadJS(n)}function mF(){return Mp.recaptchaEnterpriseScript}function gF(){return Mp.gapiScript}function yF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class vF{constructor(){this.enterprise=new xF}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class xF{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const wF="recaptcha-enterprise",_T="NO_RECAPTCHA";class _F{constructor(e){this.type=wF,this.auth=Wc(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{J4(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const p=new X4(h);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,c(p.siteKey)}}).catch(h=>{u(h)})})}function s(a,c,u){const h=window.grecaptcha;BE(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(p=>{c(p)}).catch(()=>{c(_T)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vF().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!t&&BE(window.grecaptcha))s(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=mF();h.length!==0&&(h+=u),wT(h).then(()=>{s(u,a,c)}).catch(p=>{c(p)})}}).catch(u=>{c(u)})})}}async function QE(n,e,t,r=!1,s=!1){const a=new _F(n);let c;if(s)c=_T;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,p=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function YE(n,e,t,r,s){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await QE(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await QE(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EF(n,e){const t=Dp(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Ga(a,e??{}))return s;Es(s,"already-initialized")}return t.initialize({options:e})}function bF(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ri);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SF(n,e,t){const r=Wc(n);Ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=ET(e),{host:c,port:u}=NF(e),h=u===null?"":`:${u}`,p={url:`${a}//${c}${h}/`},g=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ge(Ga(p,r.config.emulator)&&Ga(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,il(c)?(ux(`${a}//${c}${h}`),QN("Auth",!0)):TF()}function ET(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NF(n){const e=ET(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:XE(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:XE(c)}}}function XE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function TF(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pi("not implemented")}_getIdTokenResponse(e){return Pi("not implemented")}_linkToIdToken(e,t){return Pi("not implemented")}_getReauthenticationResolver(e){return Pi("not implemented")}}async function CF(n,e){return ra(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IF(n,e){return Lp(n,"POST","/v1/accounts:signInWithPassword",al(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jF(n,e){return Lp(n,"POST","/v1/accounts:signInWithEmailLink",al(n,e))}async function AF(n,e){return Lp(n,"POST","/v1/accounts:signInWithEmailLink",al(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd extends yx{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new hd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new hd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return YE(e,t,"signInWithPassword",IF);case"emailLink":return jF(e,{email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return YE(e,r,"signUpPassword",CF);case"emailLink":return AF(e,{idToken:t,email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(n,e){return Lp(n,"POST","/v1/accounts:signInWithIdp",al(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF="http://localhost";class Ya extends yx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Es("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=qc(t,["providerId","signInMethod"]);if(!r||!s)return null;const c=new Ya(r,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return lc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,lc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,lc(e,t)}buildRequest(){const e={requestUri:PF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kF(n){const e=Mu(Fu(n)).link,t=e?Mu(Fu(e)).deep_link_id:null,r=Mu(Fu(n)).deep_link_id;return(r?Mu(Fu(r)).link:null)||r||t||e||n}class vx{constructor(e){var t,r,s,a,c,u;const h=Mu(Fu(e)),p=(t=h.apiKey)!==null&&t!==void 0?t:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,y=RF((s=h.mode)!==null&&s!==void 0?s:null);Ge(p&&g&&y,"argument-error"),this.apiKey=p,this.operation=y,this.code=g,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=kF(e);try{return new vx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this.providerId=Hc.PROVIDER_ID}static credential(e,t){return hd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=vx.parseLink(t);return Ge(r,"argument-error"),hd._fromEmailAndCode(e,r.code,r.tenantId)}}Hc.PROVIDER_ID="password";Hc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends bT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Od{constructor(){super("facebook.com")}static credential(e){return Ya._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wo.credential(e.oauthAccessToken)}catch{return null}}}wo.FACEBOOK_SIGN_IN_METHOD="facebook.com";wo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends Od{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ya._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return _o.credential(t,r)}catch{return null}}}_o.GOOGLE_SIGN_IN_METHOD="google.com";_o.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Od{constructor(){super("github.com")}static credential(e){return Ya._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Eo.credential(e.oauthAccessToken)}catch{return null}}}Eo.GITHUB_SIGN_IN_METHOD="github.com";Eo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends Od{constructor(){super("twitter.com")}static credential(e,t){return Ya._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return bo.credential(t,r)}catch{return null}}}bo.TWITTER_SIGN_IN_METHOD="twitter.com";bo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await ys._fromIdTokenResponse(e,r,s),c=JE(r);return new Ic({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=JE(r);return new Ic({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function JE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp extends li{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,rp.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new rp(e,t,r,s)}}function ST(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?rp._fromErrorAndOperation(n,a,e,r):a})}async function OF(n,e,t=!1){const r=await dd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ic._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(n,e,t=!1){const{auth:r}=n;if(Qr(r.app))return Promise.reject(Uo(r));const s="reauthenticate";try{const a=await dd(n,ST(r,s,e,n),t);Ge(a.idToken,r,"internal-error");const c=mx(a.idToken);Ge(c,r,"internal-error");const{sub:u}=c;return Ge(n.uid===u,r,"user-mismatch"),Ic._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Es(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(n,e,t=!1){if(Qr(n.app))return Promise.reject(Uo(n));const r="signIn",s=await ST(n,r,e),a=await Ic._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function LF(n,e){return NT(Wc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MF(n){const e=Wc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function FF(n,e,t){return Qr(n.app)?Promise.reject(Uo(n)):LF(vn(n),Hc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&MF(n),r})}function VF(n,e,t,r){return vn(n).onIdTokenChanged(e,t,r)}function UF(n,e,t){return vn(n).beforeAuthStateChanged(e,t)}function $F(n,e,t,r){return vn(n).onAuthStateChanged(e,t,r)}function zF(n){return vn(n).signOut()}const sp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sp,"1"),this.storage.removeItem(sp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=1e3,qF=10;class CT extends TT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);lF()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,qF):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},BF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}CT.type="LOCAL";const WF=CT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT extends TT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}IT.type="SESSION";const jT=IT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Fp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async p=>p(t.origin,a)),h=await HF(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((u,h)=>{const p=xx("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===p)switch(v.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(v.data.response);break;default:clearTimeout(g),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(){return window}function GF(n){Gs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(){return typeof Gs().WorkerGlobalScope<"u"&&typeof Gs().importScripts=="function"}async function QF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function XF(){return AT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="firebaseLocalStorageDb",JF=1,ip="firebaseLocalStorage",RT="fbase_key";class Dd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vp(n,e){return n.transaction([ip],e?"readwrite":"readonly").objectStore(ip)}function ZF(){const n=indexedDB.deleteDatabase(PT);return new Dd(n).toPromise()}function av(){const n=indexedDB.open(PT,JF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ip,{keyPath:RT})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ip)?e(r):(r.close(),await ZF(),e(await av()))})})}async function ZE(n,e,t){const r=Vp(n,!0).put({[RT]:e,value:t});return new Dd(r).toPromise()}async function eV(n,e){const t=Vp(n,!1).get(e),r=await new Dd(t).toPromise();return r===void 0?null:r.value}function eb(n,e){const t=Vp(n,!0).delete(e);return new Dd(t).toPromise()}const tV=800,nV=3;class kT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await av(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>nV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fp._getInstance(XF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await QF(),!this.activeServiceWorker)return;this.sender=new KF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await av();return await ZE(e,sp,"1"),await eb(e,sp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ZE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>eV(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>eb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Vp(s,!1).getAll();return new Dd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kT.type="LOCAL";const rV=kT;new kd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(n,e){return e?Ri(e):(Ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx extends yx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return lc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return lc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function iV(n){return NT(n.auth,new wx(n),n.bypassAuthState)}function oV(n){const{auth:e,user:t}=n;return Ge(t,e,"internal-error"),DF(t,new wx(n),n.bypassAuthState)}async function aV(n){const{auth:e,user:t}=n;return Ge(t,e,"internal-error"),OF(t,new wx(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iV;case"linkViaPopup":case"linkViaRedirect":return aV;case"reauthViaPopup":case"reauthViaRedirect":return oV;default:Es(this.auth,"internal-error")}}resolve(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=new kd(2e3,1e4);class rc extends OT{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,rc.currentPopupAction&&rc.currentPopupAction.cancel(),rc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ge(e,this.auth,"internal-error"),e}async onExecution(){Mi(this.filter.length===1,"Popup operations only handle one event");const e=xx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lV.get())};e()}}rc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV="pendingRedirect",kf=new Map;class uV extends OT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=kf.get(this.auth._key());if(!e){try{const r=await dV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}kf.set(this.auth._key(),e)}return this.bypassAuthState||kf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dV(n,e){const t=pV(e),r=fV(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function hV(n,e){kf.set(n._key(),e)}function fV(n){return Ri(n._redirectPersistence)}function pV(n){return Rf(cV,n.config.apiKey,n.name)}async function mV(n,e,t=!1){if(Qr(n.app))return Promise.reject(Uo(n));const r=Wc(n),s=sV(r,e),c=await new uV(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=10*60*1e3;class yV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!DT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ks(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gV&&this.cachedEventUids.clear(),this.cachedEventUids.has(tb(e))}saveEventToCache(e){this.cachedEventUids.add(tb(e)),this.lastProcessedEventTime=Date.now()}}function tb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function DT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xV(n,e={}){return ra(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_V=/^https?/;async function EV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await xV(n);for(const t of e)try{if(bV(t))return}catch{}Es(n,"unauthorized-domain")}function bV(n){const e=iv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!_V.test(t))return!1;if(wV.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=new kd(3e4,6e4);function nb(){const n=Gs().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function NV(n){return new Promise((e,t)=>{var r,s,a;function c(){nb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nb(),t(Ks(n,"network-request-failed"))},timeout:SV.get()})}if(!((s=(r=Gs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Gs().gapi)===null||a===void 0)&&a.load)c();else{const u=yF("iframefcb");return Gs()[u]=()=>{gapi.load?c():t(Ks(n,"network-request-failed"))},wT(`${gF()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw Of=null,e})}let Of=null;function TV(n){return Of=Of||NV(n),Of}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=new kd(5e3,15e3),IV="__/auth/iframe",jV="emulator/auth/iframe",AV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RV(n){const e=n.config;Ge(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?px(e,jV):`https://${n.config.authDomain}/${IV}`,r={apiKey:e.apiKey,appName:n.name,v:ol},s=PV.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Rd(r).slice(1)}`}async function kV(n){const e=await TV(n),t=Gs().gapi;return Ge(t,n,"internal-error"),e.open({where:document.body,url:RV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AV,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const c=Ks(n,"network-request-failed"),u=Gs().setTimeout(()=>{a(c)},CV.get());function h(){Gs().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DV=500,LV=600,MV="_blank",FV="http://localhost";class rb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VV(n,e,t,r=DV,s=LV){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},OV),{width:r.toString(),height:s.toString(),top:a,left:c}),p=Zn().toLowerCase();t&&(u=fT(p)?MV:t),dT(p)&&(e=e||FV,h.scrollbars="yes");const g=Object.entries(h).reduce((v,[b,S])=>`${v}${b}=${S},`,"");if(aF(p)&&u!=="_self")return UV(e||"",u),new rb(null);const y=window.open(e||"",u,g);Ge(y,n,"popup-blocked");try{y.focus()}catch{}return new rb(y)}function UV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V="__/auth/handler",zV="emulator/auth/handler",BV=encodeURIComponent("fac");async function sb(n,e,t,r,s,a){Ge(n.config.authDomain,n,"auth-domain-config-required"),Ge(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ol,eventId:s};if(e instanceof bT){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",jM(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Od){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await n._getAppCheckToken(),p=h?`#${BV}=${encodeURIComponent(h)}`:"";return`${qV(n)}?${Rd(u).slice(1)}${p}`}function qV({config:n}){return n.emulator?px(n,zV):`https://${n.authDomain}/${$V}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="webStorageSupport";class WV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jT,this._completeRedirectFn=mV,this._overrideRedirectResult=hV}async _openPopup(e,t,r,s){var a;Mi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await sb(e,t,r,iv(),s);return VV(e,c,xx())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await sb(e,t,r,iv(),s);return GF(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Mi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await kV(e),r=new yV(e);return t.register("authEvent",s=>(Ge(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ry,{type:ry},s=>{var a;const c=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[ry];c!==void 0&&t(!!c),Es(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=EV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vT()||hT()||gx()}}const HV=WV;var ib="@firebase/auth",ob="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QV(n){Qa(new Qo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Ge(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xT(n)},p=new fF(r,s,a,h);return bF(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Qa(new Qo("auth-internal",e=>{const t=Wc(e.getProvider("auth").getImmediate());return(r=>new KV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(ib,ob,GV(n)),Hs(ib,ob,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=5*60,XV=GN("authIdTokenMaxAge")||YV;let ab=null;const JV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>XV)return;const s=t==null?void 0:t.token;ab!==s&&(ab=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ZV(n=ZN()){const e=Dp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=EF(n,{popupRedirectResolver:HV,persistence:[rV,WF,jT]}),r=GN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=JV(a.toString());UF(t,c,()=>c(t.currentUser)),VF(t,u=>c(u))}}const s=HN("auth");return s&&SF(t,`http://${s}`),t}function e3(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}pF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Ks("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",e3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QV("Browser");var t3="firebase",n3="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(t3,n3,"app");var lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $o,LT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,k){function D(){}D.prototype=k.prototype,R.D=k.prototype,R.prototype=new D,R.prototype.constructor=R,R.C=function(O,M,V){for(var P=Array(arguments.length-2),H=2;H<arguments.length;H++)P[H-2]=arguments[H];return k.prototype[M].apply(O,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,k,D){D||(D=0);var O=Array(16);if(typeof k=="string")for(var M=0;16>M;++M)O[M]=k.charCodeAt(D++)|k.charCodeAt(D++)<<8|k.charCodeAt(D++)<<16|k.charCodeAt(D++)<<24;else for(M=0;16>M;++M)O[M]=k[D++]|k[D++]<<8|k[D++]<<16|k[D++]<<24;k=R.g[0],D=R.g[1],M=R.g[2];var V=R.g[3],P=k+(V^D&(M^V))+O[0]+3614090360&4294967295;k=D+(P<<7&4294967295|P>>>25),P=V+(M^k&(D^M))+O[1]+3905402710&4294967295,V=k+(P<<12&4294967295|P>>>20),P=M+(D^V&(k^D))+O[2]+606105819&4294967295,M=V+(P<<17&4294967295|P>>>15),P=D+(k^M&(V^k))+O[3]+3250441966&4294967295,D=M+(P<<22&4294967295|P>>>10),P=k+(V^D&(M^V))+O[4]+4118548399&4294967295,k=D+(P<<7&4294967295|P>>>25),P=V+(M^k&(D^M))+O[5]+1200080426&4294967295,V=k+(P<<12&4294967295|P>>>20),P=M+(D^V&(k^D))+O[6]+2821735955&4294967295,M=V+(P<<17&4294967295|P>>>15),P=D+(k^M&(V^k))+O[7]+4249261313&4294967295,D=M+(P<<22&4294967295|P>>>10),P=k+(V^D&(M^V))+O[8]+1770035416&4294967295,k=D+(P<<7&4294967295|P>>>25),P=V+(M^k&(D^M))+O[9]+2336552879&4294967295,V=k+(P<<12&4294967295|P>>>20),P=M+(D^V&(k^D))+O[10]+4294925233&4294967295,M=V+(P<<17&4294967295|P>>>15),P=D+(k^M&(V^k))+O[11]+2304563134&4294967295,D=M+(P<<22&4294967295|P>>>10),P=k+(V^D&(M^V))+O[12]+1804603682&4294967295,k=D+(P<<7&4294967295|P>>>25),P=V+(M^k&(D^M))+O[13]+4254626195&4294967295,V=k+(P<<12&4294967295|P>>>20),P=M+(D^V&(k^D))+O[14]+2792965006&4294967295,M=V+(P<<17&4294967295|P>>>15),P=D+(k^M&(V^k))+O[15]+1236535329&4294967295,D=M+(P<<22&4294967295|P>>>10),P=k+(M^V&(D^M))+O[1]+4129170786&4294967295,k=D+(P<<5&4294967295|P>>>27),P=V+(D^M&(k^D))+O[6]+3225465664&4294967295,V=k+(P<<9&4294967295|P>>>23),P=M+(k^D&(V^k))+O[11]+643717713&4294967295,M=V+(P<<14&4294967295|P>>>18),P=D+(V^k&(M^V))+O[0]+3921069994&4294967295,D=M+(P<<20&4294967295|P>>>12),P=k+(M^V&(D^M))+O[5]+3593408605&4294967295,k=D+(P<<5&4294967295|P>>>27),P=V+(D^M&(k^D))+O[10]+38016083&4294967295,V=k+(P<<9&4294967295|P>>>23),P=M+(k^D&(V^k))+O[15]+3634488961&4294967295,M=V+(P<<14&4294967295|P>>>18),P=D+(V^k&(M^V))+O[4]+3889429448&4294967295,D=M+(P<<20&4294967295|P>>>12),P=k+(M^V&(D^M))+O[9]+568446438&4294967295,k=D+(P<<5&4294967295|P>>>27),P=V+(D^M&(k^D))+O[14]+3275163606&4294967295,V=k+(P<<9&4294967295|P>>>23),P=M+(k^D&(V^k))+O[3]+4107603335&4294967295,M=V+(P<<14&4294967295|P>>>18),P=D+(V^k&(M^V))+O[8]+1163531501&4294967295,D=M+(P<<20&4294967295|P>>>12),P=k+(M^V&(D^M))+O[13]+2850285829&4294967295,k=D+(P<<5&4294967295|P>>>27),P=V+(D^M&(k^D))+O[2]+4243563512&4294967295,V=k+(P<<9&4294967295|P>>>23),P=M+(k^D&(V^k))+O[7]+1735328473&4294967295,M=V+(P<<14&4294967295|P>>>18),P=D+(V^k&(M^V))+O[12]+2368359562&4294967295,D=M+(P<<20&4294967295|P>>>12),P=k+(D^M^V)+O[5]+4294588738&4294967295,k=D+(P<<4&4294967295|P>>>28),P=V+(k^D^M)+O[8]+2272392833&4294967295,V=k+(P<<11&4294967295|P>>>21),P=M+(V^k^D)+O[11]+1839030562&4294967295,M=V+(P<<16&4294967295|P>>>16),P=D+(M^V^k)+O[14]+4259657740&4294967295,D=M+(P<<23&4294967295|P>>>9),P=k+(D^M^V)+O[1]+2763975236&4294967295,k=D+(P<<4&4294967295|P>>>28),P=V+(k^D^M)+O[4]+1272893353&4294967295,V=k+(P<<11&4294967295|P>>>21),P=M+(V^k^D)+O[7]+4139469664&4294967295,M=V+(P<<16&4294967295|P>>>16),P=D+(M^V^k)+O[10]+3200236656&4294967295,D=M+(P<<23&4294967295|P>>>9),P=k+(D^M^V)+O[13]+681279174&4294967295,k=D+(P<<4&4294967295|P>>>28),P=V+(k^D^M)+O[0]+3936430074&4294967295,V=k+(P<<11&4294967295|P>>>21),P=M+(V^k^D)+O[3]+3572445317&4294967295,M=V+(P<<16&4294967295|P>>>16),P=D+(M^V^k)+O[6]+76029189&4294967295,D=M+(P<<23&4294967295|P>>>9),P=k+(D^M^V)+O[9]+3654602809&4294967295,k=D+(P<<4&4294967295|P>>>28),P=V+(k^D^M)+O[12]+3873151461&4294967295,V=k+(P<<11&4294967295|P>>>21),P=M+(V^k^D)+O[15]+530742520&4294967295,M=V+(P<<16&4294967295|P>>>16),P=D+(M^V^k)+O[2]+3299628645&4294967295,D=M+(P<<23&4294967295|P>>>9),P=k+(M^(D|~V))+O[0]+4096336452&4294967295,k=D+(P<<6&4294967295|P>>>26),P=V+(D^(k|~M))+O[7]+1126891415&4294967295,V=k+(P<<10&4294967295|P>>>22),P=M+(k^(V|~D))+O[14]+2878612391&4294967295,M=V+(P<<15&4294967295|P>>>17),P=D+(V^(M|~k))+O[5]+4237533241&4294967295,D=M+(P<<21&4294967295|P>>>11),P=k+(M^(D|~V))+O[12]+1700485571&4294967295,k=D+(P<<6&4294967295|P>>>26),P=V+(D^(k|~M))+O[3]+2399980690&4294967295,V=k+(P<<10&4294967295|P>>>22),P=M+(k^(V|~D))+O[10]+4293915773&4294967295,M=V+(P<<15&4294967295|P>>>17),P=D+(V^(M|~k))+O[1]+2240044497&4294967295,D=M+(P<<21&4294967295|P>>>11),P=k+(M^(D|~V))+O[8]+1873313359&4294967295,k=D+(P<<6&4294967295|P>>>26),P=V+(D^(k|~M))+O[15]+4264355552&4294967295,V=k+(P<<10&4294967295|P>>>22),P=M+(k^(V|~D))+O[6]+2734768916&4294967295,M=V+(P<<15&4294967295|P>>>17),P=D+(V^(M|~k))+O[13]+1309151649&4294967295,D=M+(P<<21&4294967295|P>>>11),P=k+(M^(D|~V))+O[4]+4149444226&4294967295,k=D+(P<<6&4294967295|P>>>26),P=V+(D^(k|~M))+O[11]+3174756917&4294967295,V=k+(P<<10&4294967295|P>>>22),P=M+(k^(V|~D))+O[2]+718787259&4294967295,M=V+(P<<15&4294967295|P>>>17),P=D+(V^(M|~k))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+k&4294967295,R.g[1]=R.g[1]+(M+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+V&4294967295}r.prototype.u=function(R,k){k===void 0&&(k=R.length);for(var D=k-this.blockSize,O=this.B,M=this.h,V=0;V<k;){if(M==0)for(;V<=D;)s(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<k;)if(O[M++]=R.charCodeAt(V++),M==this.blockSize){s(this,O),M=0;break}}else for(;V<k;)if(O[M++]=R[V++],M==this.blockSize){s(this,O),M=0;break}}this.h=M,this.o+=k},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var k=1;k<R.length-8;++k)R[k]=0;var D=8*this.o;for(k=R.length-8;k<R.length;++k)R[k]=D&255,D/=256;for(this.u(R),R=Array(16),k=D=0;4>k;++k)for(var O=0;32>O;O+=8)R[D++]=this.g[k]>>>O&255;return R};function a(R,k){var D=u;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=k(R)}function c(R,k){this.h=k;for(var D=[],O=!0,M=R.length-1;0<=M;M--){var V=R[M]|0;O&&V==k||(D[M]=V,O=!1)}this.g=D}var u={};function h(R){return-128<=R&&128>R?a(R,function(k){return new c([k|0],0>k?-1:0)}):new c([R|0],0>R?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return y;if(0>R)return _(p(-R));for(var k=[],D=1,O=0;R>=D;O++)k[O]=R/D|0,D*=4294967296;return new c(k,0)}function g(R,k){if(R.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(R.charAt(0)=="-")return _(g(R.substring(1),k));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=p(Math.pow(k,8)),O=y,M=0;M<R.length;M+=8){var V=Math.min(8,R.length-M),P=parseInt(R.substring(M,M+V),k);8>V?(V=p(Math.pow(k,V)),O=O.j(V).add(p(P))):(O=O.j(D),O=O.add(p(P)))}return O}var y=h(0),v=h(1),b=h(16777216);n=c.prototype,n.m=function(){if(w(this))return-_(this).m();for(var R=0,k=1,D=0;D<this.g.length;D++){var O=this.i(D);R+=(0<=O?O:4294967296+O)*k,k*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(S(this))return"0";if(w(this))return"-"+_(this).toString(R);for(var k=p(Math.pow(R,6)),D=this,O="";;){var M=L(D,k).g;D=A(D,M.j(k));var V=((0<D.g.length?D.g[0]:D.h)>>>0).toString(R);if(D=M,S(D))return V+O;for(;6>V.length;)V="0"+V;O=V+O}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function S(R){if(R.h!=0)return!1;for(var k=0;k<R.g.length;k++)if(R.g[k]!=0)return!1;return!0}function w(R){return R.h==-1}n.l=function(R){return R=A(this,R),w(R)?-1:S(R)?0:1};function _(R){for(var k=R.g.length,D=[],O=0;O<k;O++)D[O]=~R.g[O];return new c(D,~R.h).add(v)}n.abs=function(){return w(this)?_(this):this},n.add=function(R){for(var k=Math.max(this.g.length,R.g.length),D=[],O=0,M=0;M<=k;M++){var V=O+(this.i(M)&65535)+(R.i(M)&65535),P=(V>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);O=P>>>16,V&=65535,P&=65535,D[M]=P<<16|V}return new c(D,D[D.length-1]&-2147483648?-1:0)};function A(R,k){return R.add(_(k))}n.j=function(R){if(S(this)||S(R))return y;if(w(this))return w(R)?_(this).j(_(R)):_(_(this).j(R));if(w(R))return _(this.j(_(R)));if(0>this.l(b)&&0>R.l(b))return p(this.m()*R.m());for(var k=this.g.length+R.g.length,D=[],O=0;O<2*k;O++)D[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<R.g.length;M++){var V=this.i(O)>>>16,P=this.i(O)&65535,H=R.i(M)>>>16,q=R.i(M)&65535;D[2*O+2*M]+=P*q,I(D,2*O+2*M),D[2*O+2*M+1]+=V*q,I(D,2*O+2*M+1),D[2*O+2*M+1]+=P*H,I(D,2*O+2*M+1),D[2*O+2*M+2]+=V*H,I(D,2*O+2*M+2)}for(O=0;O<k;O++)D[O]=D[2*O+1]<<16|D[2*O];for(O=k;O<2*k;O++)D[O]=0;return new c(D,0)};function I(R,k){for(;(R[k]&65535)!=R[k];)R[k+1]+=R[k]>>>16,R[k]&=65535,k++}function C(R,k){this.g=R,this.h=k}function L(R,k){if(S(k))throw Error("division by zero");if(S(R))return new C(y,y);if(w(R))return k=L(_(R),k),new C(_(k.g),_(k.h));if(w(k))return k=L(R,_(k)),new C(_(k.g),k.h);if(30<R.g.length){if(w(R)||w(k))throw Error("slowDivide_ only works with positive integers.");for(var D=v,O=k;0>=O.l(R);)D=U(D),O=U(O);var M=z(D,1),V=z(O,1);for(O=z(O,2),D=z(D,2);!S(O);){var P=V.add(O);0>=P.l(R)&&(M=M.add(D),V=P),O=z(O,1),D=z(D,1)}return k=A(R,M.j(k)),new C(M,k)}for(M=y;0<=R.l(k);){for(D=Math.max(1,Math.floor(R.m()/k.m())),O=Math.ceil(Math.log(D)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),V=p(D),P=V.j(k);w(P)||0<P.l(R);)D-=O,V=p(D),P=V.j(k);S(V)&&(V=v),M=M.add(V),R=A(R,P)}return new C(M,R)}n.A=function(R){return L(this,R).h},n.and=function(R){for(var k=Math.max(this.g.length,R.g.length),D=[],O=0;O<k;O++)D[O]=this.i(O)&R.i(O);return new c(D,this.h&R.h)},n.or=function(R){for(var k=Math.max(this.g.length,R.g.length),D=[],O=0;O<k;O++)D[O]=this.i(O)|R.i(O);return new c(D,this.h|R.h)},n.xor=function(R){for(var k=Math.max(this.g.length,R.g.length),D=[],O=0;O<k;O++)D[O]=this.i(O)^R.i(O);return new c(D,this.h^R.h)};function U(R){for(var k=R.g.length+1,D=[],O=0;O<k;O++)D[O]=R.i(O)<<1|R.i(O-1)>>>31;return new c(D,R.h)}function z(R,k){var D=k>>5;k%=32;for(var O=R.g.length-D,M=[],V=0;V<O;V++)M[V]=0<k?R.i(V+D)>>>k|R.i(V+D+1)<<32-k:R.i(V+D);return new c(M,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LT=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=g,$o=c}).apply(typeof lb<"u"?lb:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MT,Vu,FT,Df,lv,VT,UT,$T;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,N,j){return f==Array.prototype||f==Object.prototype||(f[N]=j.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var N=0;N<f.length;++N){var j=f[N];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=t(this);function s(f,N){if(N)e:{var j=r;f=f.split(".");for(var $=0;$<f.length-1;$++){var J=f[$];if(!(J in j))break e;j=j[J]}f=f[f.length-1],$=j[f],N=N($),N!=$&&N!=null&&e(j,f,{configurable:!0,writable:!0,value:N})}}function a(f,N){f instanceof String&&(f+="");var j=0,$=!1,J={next:function(){if(!$&&j<f.length){var ae=j++;return{value:N(ae,f[ae]),done:!1}}return $=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}s("Array.prototype.values",function(f){return f||function(){return a(this,function(N,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function h(f){var N=typeof f;return N=N!="object"?N:f?Array.isArray(f)?"array":N:"null",N=="array"||N=="object"&&typeof f.length=="number"}function p(f){var N=typeof f;return N=="object"&&f!=null||N=="function"}function g(f,N,j){return f.call.apply(f.bind,arguments)}function y(f,N,j){if(!f)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,$),f.apply(N,J)}}return function(){return f.apply(N,arguments)}}function v(f,N,j){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,v.apply(null,arguments)}function b(f,N){var j=Array.prototype.slice.call(arguments,1);return function(){var $=j.slice();return $.push.apply($,arguments),f.apply(this,$)}}function S(f,N){function j(){}j.prototype=N.prototype,f.aa=N.prototype,f.prototype=new j,f.prototype.constructor=f,f.Qb=function($,J,ae){for(var we=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)we[jt-2]=arguments[jt];return N.prototype[J].apply($,we)}}function w(f){const N=f.length;if(0<N){const j=Array(N);for(let $=0;$<N;$++)j[$]=f[$];return j}return[]}function _(f,N){for(let j=1;j<arguments.length;j++){const $=arguments[j];if(h($)){const J=f.length||0,ae=$.length||0;f.length=J+ae;for(let we=0;we<ae;we++)f[J+we]=$[we]}else f.push($)}}class A{constructor(N,j){this.i=N,this.j=j,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function I(f){return/^[\s\xa0]*$/.test(f)}function C(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function L(f){return L[" "](f),f}L[" "]=function(){};var U=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function z(f,N,j){for(const $ in f)N.call(j,f[$],$,f)}function R(f,N){for(const j in f)N.call(void 0,f[j],j,f)}function k(f){const N={};for(const j in f)N[j]=f[j];return N}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(f,N){let j,$;for(let J=1;J<arguments.length;J++){$=arguments[J];for(j in $)f[j]=$[j];for(let ae=0;ae<D.length;ae++)j=D[ae],Object.prototype.hasOwnProperty.call($,j)&&(f[j]=$[j])}}function M(f){var N=1;f=f.split(":");const j=[];for(;0<N&&f.length;)j.push(f.shift()),N--;return f.length&&j.push(f.join(":")),j}function V(f){u.setTimeout(()=>{throw f},0)}function P(){var f=oe;let N=null;return f.g&&(N=f.g,f.g=f.g.next,f.g||(f.h=null),N.next=null),N}class H{constructor(){this.h=this.g=null}add(N,j){const $=q.get();$.set(N,j),this.h?this.h.next=$:this.g=$,this.h=$}}var q=new A(()=>new K,f=>f.reset());class K{constructor(){this.next=this.g=this.h=null}set(N,j){this.h=N,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let te,Q=!1,oe=new H,le=()=>{const f=u.Promise.resolve(void 0);te=()=>{f.then(B)}};var B=()=>{for(var f;f=P();){try{f.h.call(f.g)}catch(j){V(j)}var N=q;N.j(f),100>N.h&&(N.h++,f.next=N.g,N.g=f)}Q=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(f,N){this.type=f,this.g=this.target=N,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,N=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const j=()=>{};u.addEventListener("test",j,N),u.removeEventListener("test",j,N)}catch{}return f}();function Fe(f,N){if(he.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var j=this.type=f.type,$=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=N,N=f.relatedTarget){if(U){e:{try{L(N.nodeName);var J=!0;break e}catch{}J=!1}J||(N=null)}}else j=="mouseover"?N=f.fromElement:j=="mouseout"&&(N=f.toElement);this.relatedTarget=N,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Ne[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Fe.aa.h.call(this)}}S(Fe,he);var Ne={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Se=0;function ze(f,N,j,$,J){this.listener=f,this.proxy=null,this.src=N,this.type=j,this.capture=!!$,this.ha=J,this.key=++Se,this.da=this.fa=!1}function Me(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function rt(f){this.src=f,this.g={},this.h=0}rt.prototype.add=function(f,N,j,$,J){var ae=f.toString();f=this.g[ae],f||(f=this.g[ae]=[],this.h++);var we=Nt(f,N,$,J);return-1<we?(N=f[we],j||(N.fa=!1)):(N=new ze(N,this.src,ae,!!$,J),N.fa=j,f.push(N)),N};function st(f,N){var j=N.type;if(j in f.g){var $=f.g[j],J=Array.prototype.indexOf.call($,N,void 0),ae;(ae=0<=J)&&Array.prototype.splice.call($,J,1),ae&&(Me(N),f.g[j].length==0&&(delete f.g[j],f.h--))}}function Nt(f,N,j,$){for(var J=0;J<f.length;++J){var ae=f[J];if(!ae.da&&ae.listener==N&&ae.capture==!!j&&ae.ha==$)return J}return-1}var Ot="closure_lm_"+(1e6*Math.random()|0),Tn={};function nn(f,N,j,$,J){if(Array.isArray(N)){for(var ae=0;ae<N.length;ae++)nn(f,N[ae],j,$,J);return null}return j=Ts(j),f&&f[xe]?f.K(N,j,p($)?!!$.capture:!1,J):$n(f,N,j,!1,$,J)}function $n(f,N,j,$,J,ae){if(!N)throw Error("Invalid event type");var we=p(J)?!!J.capture:!!J,jt=an(f);if(jt||(f[Ot]=jt=new rt(f)),j=jt.add(N,j,$,we,ae),j.proxy)return j;if($=br(),j.proxy=$,$.src=f,$.listener=j,f.addEventListener)Ce||(J=we),J===void 0&&(J=!1),f.addEventListener(N.toString(),$,J);else if(f.attachEvent)f.attachEvent(Sr(N.toString()),$);else if(f.addListener&&f.removeListener)f.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return j}function br(){function f(j){return N.call(f.src,f.listener,j)}const N=Xr;return f}function Pt(f,N,j,$,J){if(Array.isArray(N))for(var ae=0;ae<N.length;ae++)Pt(f,N[ae],j,$,J);else $=p($)?!!$.capture:!!$,j=Ts(j),f&&f[xe]?(f=f.i,N=String(N).toString(),N in f.g&&(ae=f.g[N],j=Nt(ae,j,$,J),-1<j&&(Me(ae[j]),Array.prototype.splice.call(ae,j,1),ae.length==0&&(delete f.g[N],f.h--)))):f&&(f=an(f))&&(N=f.g[N.toString()],f=-1,N&&(f=Nt(N,j,$,J)),(j=-1<f?N[f]:null)&&un(j))}function un(f){if(typeof f!="number"&&f&&!f.da){var N=f.src;if(N&&N[xe])st(N.i,f);else{var j=f.type,$=f.proxy;N.removeEventListener?N.removeEventListener(j,$,f.capture):N.detachEvent?N.detachEvent(Sr(j),$):N.addListener&&N.removeListener&&N.removeListener($),(j=an(N))?(st(j,f),j.h==0&&(j.src=null,N[Ot]=null)):Me(f)}}}function Sr(f){return f in Tn?Tn[f]:Tn[f]="on"+f}function Xr(f,N){if(f.da)f=!0;else{N=new Fe(N,this);var j=f.listener,$=f.ha||f.src;f.fa&&un(f),f=j.call($,N)}return f}function an(f){return f=f[Ot],f instanceof rt?f:null}var Ns="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ts(f){return typeof f=="function"?f:(f[Ns]||(f[Ns]=function(N){return f.handleEvent(N)}),f[Ns])}function Vt(){Z.call(this),this.i=new rt(this),this.M=this,this.F=null}S(Vt,Z),Vt.prototype[xe]=!0,Vt.prototype.removeEventListener=function(f,N,j,$){Pt(this,f,N,j,$)};function Tt(f,N){var j,$=f.F;if($)for(j=[];$;$=$.F)j.push($);if(f=f.M,$=N.type||N,typeof N=="string")N=new he(N,f);else if(N instanceof he)N.target=N.target||f;else{var J=N;N=new he($,f),O(N,J)}if(J=!0,j)for(var ae=j.length-1;0<=ae;ae--){var we=N.g=j[ae];J=zn(we,$,!0,N)&&J}if(we=N.g=f,J=zn(we,$,!0,N)&&J,J=zn(we,$,!1,N)&&J,j)for(ae=0;ae<j.length;ae++)we=N.g=j[ae],J=zn(we,$,!1,N)&&J}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var f=this.i,N;for(N in f.g){for(var j=f.g[N],$=0;$<j.length;$++)Me(j[$]);delete f.g[N],f.h--}}this.F=null},Vt.prototype.K=function(f,N,j,$){return this.i.add(String(f),N,!1,j,$)},Vt.prototype.L=function(f,N,j,$){return this.i.add(String(f),N,!0,j,$)};function zn(f,N,j,$){if(N=f.i.g[String(N)],!N)return!0;N=N.concat();for(var J=!0,ae=0;ae<N.length;++ae){var we=N[ae];if(we&&!we.da&&we.capture==j){var jt=we.listener,wn=we.ha||we.src;we.fa&&st(f.i,we),J=jt.call(wn,$)!==!1&&J}}return J&&!$.defaultPrevented}function xn(f,N,j){if(typeof f=="function")j&&(f=v(f,j));else if(f&&typeof f.handleEvent=="function")f=v(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:u.setTimeout(f,N||0)}function Nr(f){f.g=xn(()=>{f.g=null,f.i&&(f.i=!1,Nr(f))},f.l);const N=f.h;f.h=null,f.m.apply(null,N)}class Jr extends Z{constructor(N,j){super(),this.m=N,this.l=j,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Nr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fr(f){Z.call(this),this.h=f,this.g={}}S(Fr,Z);var Cs=[];function ui(f){z(f.g,function(N,j){this.g.hasOwnProperty(j)&&un(N)},f),f.g={}}Fr.prototype.N=function(){Fr.aa.N.call(this),ui(this)},Fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zr=u.JSON.stringify,Bn=u.JSON.parse,Is=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function He(){}He.prototype.h=null;function vt(f){return f.h||(f.h=f.i())}function ht(){}var Ut={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ht(){he.call(this,"d")}S(Ht,he);function re(){he.call(this,"c")}S(re,he);var me={},De=null;function _t(){return De=De||new Vt}me.La="serverreachability";function it(f){he.call(this,me.La,f)}S(it,he);function ft(f){const N=_t();Tt(N,new it(N))}me.STAT_EVENT="statevent";function Ae(f,N){he.call(this,me.STAT_EVENT,f),this.stat=N}S(Ae,he);function Kt(f){const N=_t();Tt(N,new Ae(N,f))}me.Ma="timingevent";function di(f,N){he.call(this,me.Ma,f),this.size=N}S(di,he);function or(f,N){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},N)}function js(){this.g=!0}js.prototype.xa=function(){this.g=!1};function As(f,N,j,$,J,ae){f.info(function(){if(f.g)if(ae)for(var we="",jt=ae.split("&"),wn=0;wn<jt.length;wn++){var xt=jt[wn].split("=");if(1<xt.length){var Cn=xt[0];xt=xt[1];var dn=Cn.split("_");we=2<=dn.length&&dn[1]=="type"?we+(Cn+"="+xt+"&"):we+(Cn+"=redacted&")}}else we=null;else we=ae;return"XMLHTTP REQ ("+$+") [attempt "+J+"]: "+N+`
`+j+`
`+we})}function hi(f,N,j,$,J,ae,we){f.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+J+"]: "+N+`
`+j+`
`+ae+" "+we})}function ar(f,N,j,$){f.info(function(){return"XMLHTTP TEXT ("+N+"): "+dl(f,j)+($?" "+$:"")})}function qi(f,N){f.info(function(){return"TIMEOUT: "+N})}js.prototype.info=function(){};function dl(f,N){if(!f.g)return N;if(!N)return null;try{var j=JSON.parse(N);if(j){for(f=0;f<j.length;f++)if(Array.isArray(j[f])){var $=j[f];if(!(2>$.length)){var J=$[1];if(Array.isArray(J)&&!(1>J.length)){var ae=J[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var we=1;we<J.length;we++)J[we]=""}}}}return Zr(j)}catch{return N}}var $t={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},es;function ca(){}S(ca,He),ca.prototype.g=function(){return new XMLHttpRequest},ca.prototype.i=function(){return{}},es=new ca;function ts(f,N,j,$){this.j=f,this.i=N,this.l=j,this.R=$||1,this.U=new Fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wd}function Wd(){this.i=null,this.g="",this.h=!1}var Zc={},fl={};function pl(f,N,j){f.L=1,f.v=Qi(Cr(N)),f.m=j,f.P=!0,eu(f,null)}function eu(f,N){f.F=Date.now(),Dt(f),f.A=Cr(f.v);var j=f.A,$=f.R;Array.isArray($)||($=[String($)]),Xi(j.i,"t",$),f.C=0,j=f.j.J,f.h=new Wd,f.g=ch(f.j,j?N:null,!f.m),0<f.O&&(f.M=new Jr(v(f.Y,f,f.g),f.O)),N=f.U,j=f.g,$=f.ca;var J="readystatechange";Array.isArray(J)||(J&&(Cs[0]=J.toString()),J=Cs);for(var ae=0;ae<J.length;ae++){var we=nn(j,J[ae],$||N.handleEvent,!1,N.h||N);if(!we)break;N.g[we.key]=we}N=f.H?k(f.H):{},f.m?(f.u||(f.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,N)):(f.u="GET",f.g.ea(f.A,f.u,null,N)),ft(),As(f.i,f.u,f.A,f.l,f.R,f.m)}ts.prototype.ca=function(f){f=f.target;const N=this.M;N&&cr(f)==3?N.j():this.Y(f)},ts.prototype.Y=function(f){try{if(f==this.g)e:{const dn=cr(this.g);var N=this.g.Ba();const $r=this.g.Z();if(!(3>dn)&&(dn!=3||this.g&&(this.h.h||this.g.oa()||ou(this.g)))){this.J||dn!=4||N==7||(N==8||0>=$r?ft(3):ft(2)),ua(this);var j=this.g.Z();this.X=j;t:if(Hd(this)){var $=ou(this.g);f="";var J=$.length,ae=cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vr(this),Wi(this);var we="";break t}this.h.i=new u.TextDecoder}for(N=0;N<J;N++)this.h.h=!0,f+=this.h.i.decode($[N],{stream:!(ae&&N==J-1)});$.length=0,this.h.g+=f,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=j==200,hi(this.i,this.u,this.A,this.l,this.R,dn,j),this.o){if(this.T&&!this.K){t:{if(this.g){var jt,wn=this.g;if((jt=wn.g?wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(jt)){var xt=jt;break t}}xt=null}if(j=xt)ar(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tu(this,j);else{this.o=!1,this.s=3,Kt(12),Vr(this),Wi(this);break e}}if(this.P){j=!0;let jr;for(;!this.J&&this.C<we.length;)if(jr=hm(this,we),jr==fl){dn==4&&(this.s=4,Kt(14),j=!1),ar(this.i,this.l,null,"[Incomplete Response]");break}else if(jr==Zc){this.s=4,Kt(15),ar(this.i,this.l,we,"[Invalid Chunk]"),j=!1;break}else ar(this.i,this.l,jr,null),tu(this,jr);if(Hd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dn!=4||we.length!=0||this.h.h||(this.s=1,Kt(16),j=!1),this.o=this.o&&j,!j)ar(this.i,this.l,we,"[Invalid Chunked Response]"),Vr(this),Wi(this);else if(0<we.length&&!this.W){this.W=!0;var Cn=this.j;Cn.g==this&&Cn.ba&&!Cn.M&&(Cn.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),lu(Cn),Cn.M=!0,Kt(11))}}else ar(this.i,this.l,we,null),tu(this,we);dn==4&&Vr(this),this.o&&!this.J&&(dn==4?Nl(this.j,this):(this.o=!1,Dt(this)))}else wl(this.g),j==400&&0<we.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),Vr(this),Wi(this)}}}catch{}finally{}};function Hd(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function hm(f,N){var j=f.C,$=N.indexOf(`
`,j);return $==-1?fl:(j=Number(N.substring(j,$)),isNaN(j)?Zc:($+=1,$+j>N.length?fl:(N=N.slice($,$+j),f.C=$+j,N)))}ts.prototype.cancel=function(){this.J=!0,Vr(this)};function Dt(f){f.S=Date.now()+f.I,Kd(f,f.I)}function Kd(f,N){if(f.B!=null)throw Error("WatchDog timer not null");f.B=or(v(f.ba,f),N)}function ua(f){f.B&&(u.clearTimeout(f.B),f.B=null)}ts.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(qi(this.i,this.A),this.L!=2&&(ft(),Kt(17)),Vr(this),this.s=2,Wi(this)):Kd(this,this.S-f)};function Wi(f){f.j.G==0||f.J||Nl(f.j,f)}function Vr(f){ua(f);var N=f.M;N&&typeof N.ma=="function"&&N.ma(),f.M=null,ui(f.U),f.g&&(N=f.g,f.g=null,N.abort(),N.ma())}function tu(f,N){try{var j=f.j;if(j.G!=0&&(j.g==f||er(j.h,f))){if(!f.K&&er(j.h,f)&&j.G==3){try{var $=j.Da.g.parse(N)}catch{$=null}if(Array.isArray($)&&$.length==3){var J=$;if(J[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<f.F)Sl(j),os(j);else break e;bl(j),Kt(18)}}else j.za=J[1],0<j.za-j.T&&37500>J[2]&&j.F&&j.v==0&&!j.C&&(j.C=or(v(j.Za,j),6e3));if(1>=Qd(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else yi(j,11)}else if((f.K||j.g==f)&&Sl(j),!I(N))for(J=j.Da.g.parse(N),N=0;N<J.length;N++){let xt=J[N];if(j.T=xt[0],xt=xt[1],j.G==2)if(xt[0]=="c"){j.K=xt[1],j.ia=xt[2];const Cn=xt[3];Cn!=null&&(j.la=Cn,j.j.info("VER="+j.la));const dn=xt[4];dn!=null&&(j.Aa=dn,j.j.info("SVER="+j.Aa));const $r=xt[5];$r!=null&&typeof $r=="number"&&0<$r&&($=1.5*$r,j.L=$,j.j.info("backChannelRequestTimeoutMs_="+$)),$=j;const jr=f.g;if(jr){const ya=jr.g?jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ya){var ae=$.h;ae.g||ya.indexOf("spdy")==-1&&ya.indexOf("quic")==-1&&ya.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(nu(ae,ae.h),ae.h=null))}if($.D){const Cl=jr.g?jr.g.getResponseHeader("X-HTTP-Session-Id"):null;Cl&&($.ya=Cl,Rt($.I,$.D,Cl))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-f.F,j.j.info("Handshake RTT: "+j.R+"ms")),$=j;var we=f;if($.qa=lh($,$.J?$.ia:null,$.W),we.K){Yd($.h,we);var jt=we,wn=$.L;wn&&(jt.I=wn),jt.B&&(ua(jt),Dt(jt)),$.g=we}else ga($);0<j.i.length&&Os(j)}else xt[0]!="stop"&&xt[0]!="close"||yi(j,7);else j.G==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?yi(j,7):kn(j):xt[0]!="noop"&&j.l&&j.l.ta(xt),j.v=0)}}ft(4)}catch{}}var Gd=class{constructor(f,N){this.g=f,this.map=N}};function da(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Qd(f){return f.h?1:f.g?f.g.size:0}function er(f,N){return f.h?f.h==N:f.g?f.g.has(N):!1}function nu(f,N){f.g?f.g.add(N):f.h=N}function Yd(f,N){f.h&&f.h==N?f.h=null:f.g&&f.g.has(N)&&f.g.delete(N)}da.prototype.cancel=function(){if(this.i=Xd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Xd(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let N=f.i;for(const j of f.g.values())N=N.concat(j.D);return N}return w(f.i)}function ml(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(h(f)){for(var N=[],j=f.length,$=0;$<j;$++)N.push(f[$]);return N}N=[],j=0;for($ in f)N[j++]=f[$];return N}function gl(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(h(f)||typeof f=="string"){var N=[];f=f.length;for(var j=0;j<f;j++)N.push(j);return N}N=[],j=0;for(const $ in f)N[j++]=$;return N}}}function Hi(f,N){if(f.forEach&&typeof f.forEach=="function")f.forEach(N,void 0);else if(h(f)||typeof f=="string")Array.prototype.forEach.call(f,N,void 0);else for(var j=gl(f),$=ml(f),J=$.length,ae=0;ae<J;ae++)N.call(void 0,$[ae],j&&j[ae],f)}var ha=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fm(f,N){if(f){f=f.split("&");for(var j=0;j<f.length;j++){var $=f[j].indexOf("="),J=null;if(0<=$){var ae=f[j].substring(0,$);J=f[j].substring($+1)}else ae=f[j];N(ae,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function fi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof fi){this.h=f.h,fa(this,f.j),this.o=f.o,this.g=f.g,Ki(this,f.s),this.l=f.l;var N=f.i,j=new Ps;j.i=N.i,N.g&&(j.g=new Map(N.g),j.h=N.h),Gi(this,j),this.m=f.m}else f&&(N=String(f).match(ha))?(this.h=!1,fa(this,N[1]||"",!0),this.o=pt(N[2]||""),this.g=pt(N[3]||"",!0),Ki(this,N[4]),this.l=pt(N[5]||"",!0),Gi(this,N[6]||"",!0),this.m=pt(N[7]||"")):(this.h=!1,this.i=new Ps(null,this.h))}fi.prototype.toString=function(){var f=[],N=this.j;N&&f.push(Yi(N,yl,!0),":");var j=this.g;return(j||N=="file")&&(f.push("//"),(N=this.o)&&f.push(Yi(N,yl,!0),"@"),f.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&f.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&f.push("/"),f.push(Yi(j,j.charAt(0)=="/"?eh:Zd,!0))),(j=this.i.toString())&&f.push("?",j),(j=this.m)&&f.push("#",Yi(j,ru)),f.join("")};function Cr(f){return new fi(f)}function fa(f,N,j){f.j=j?pt(N,!0):N,f.j&&(f.j=f.j.replace(/:$/,""))}function Ki(f,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);f.s=N}else f.s=null}function Gi(f,N,j){N instanceof Ps?(f.i=N,Rs(f.i,f.h)):(j||(N=Yi(N,th)),f.i=new Ps(N,f.h))}function Rt(f,N,j){f.i.set(N,j)}function Qi(f){return Rt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function pt(f,N){return f?N?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Yi(f,N,j){return typeof f=="string"?(f=encodeURI(f).replace(N,Jd),j&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Jd(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var yl=/[#\/\?@]/g,Zd=/[#\?:]/g,eh=/[#\?]/g,th=/[#\?@]/g,ru=/#/g;function Ps(f,N){this.h=this.g=null,this.i=f||null,this.j=!!N}function Rn(f){f.g||(f.g=new Map,f.h=0,f.i&&fm(f.i,function(N,j){f.add(decodeURIComponent(N.replace(/\+/g," ")),j)}))}n=Ps.prototype,n.add=function(f,N){Rn(this),this.i=null,f=Ur(this,f);var j=this.g.get(f);return j||this.g.set(f,j=[]),j.push(N),this.h+=1,this};function ns(f,N){Rn(f),N=Ur(f,N),f.g.has(N)&&(f.i=null,f.h-=f.g.get(N).length,f.g.delete(N))}function rs(f,N){return Rn(f),N=Ur(f,N),f.g.has(N)}n.forEach=function(f,N){Rn(this),this.g.forEach(function(j,$){j.forEach(function(J){f.call(N,J,$,this)},this)},this)},n.na=function(){Rn(this);const f=Array.from(this.g.values()),N=Array.from(this.g.keys()),j=[];for(let $=0;$<N.length;$++){const J=f[$];for(let ae=0;ae<J.length;ae++)j.push(N[$])}return j},n.V=function(f){Rn(this);let N=[];if(typeof f=="string")rs(this,f)&&(N=N.concat(this.g.get(Ur(this,f))));else{f=Array.from(this.g.values());for(let j=0;j<f.length;j++)N=N.concat(f[j])}return N},n.set=function(f,N){return Rn(this),this.i=null,f=Ur(this,f),rs(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[N]),this.h+=1,this},n.get=function(f,N){return f?(f=this.V(f),0<f.length?String(f[0]):N):N};function Xi(f,N,j){ns(f,N),0<j.length&&(f.i=null,f.g.set(Ur(f,N),w(j)),f.h+=j.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],N=Array.from(this.g.keys());for(var j=0;j<N.length;j++){var $=N[j];const ae=encodeURIComponent(String($)),we=this.V($);for($=0;$<we.length;$++){var J=ae;we[$]!==""&&(J+="="+encodeURIComponent(String(we[$]))),f.push(J)}}return this.i=f.join("&")};function Ur(f,N){return N=String(N),f.j&&(N=N.toLowerCase()),N}function Rs(f,N){N&&!f.j&&(Rn(f),f.i=null,f.g.forEach(function(j,$){var J=$.toLowerCase();$!=J&&(ns(this,$),Xi(this,J,j))},f)),f.j=N}function pm(f,N){const j=new js;if(u.Image){const $=new Image;$.onload=b(lr,j,"TestLoadImage: loaded",!0,N,$),$.onerror=b(lr,j,"TestLoadImage: error",!1,N,$),$.onabort=b(lr,j,"TestLoadImage: abort",!1,N,$),$.ontimeout=b(lr,j,"TestLoadImage: timeout",!1,N,$),u.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=f}else N(!1)}function nh(f,N){const j=new js,$=new AbortController,J=setTimeout(()=>{$.abort(),lr(j,"TestPingServer: timeout",!1,N)},1e4);fetch(f,{signal:$.signal}).then(ae=>{clearTimeout(J),ae.ok?lr(j,"TestPingServer: ok",!0,N):lr(j,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(J),lr(j,"TestPingServer: error",!1,N)})}function lr(f,N,j,$,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),$(j)}catch{}}function mm(){this.g=new Is}function rh(f,N,j){const $=j||"";try{Hi(f,function(J,ae){let we=J;p(J)&&(we=Zr(J)),N.push($+ae+"="+encodeURIComponent(we))})}catch(J){throw N.push($+"type="+encodeURIComponent("_badmap")),J}}function pi(f){this.l=f.Ub||null,this.j=f.eb||!1}S(pi,He),pi.prototype.g=function(){return new pa(this.l,this.j)},pi.prototype.i=function(f){return function(){return f}}({});function pa(f,N){Vt.call(this),this.D=f,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(pa,Vt),n=pa.prototype,n.open=function(f,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=N,this.readyState=1,is(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(N.body=f),(this.D||u).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ss(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,is(this)),this.g&&(this.readyState=3,is(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sh(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function sh(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var N=f.value?f.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!f.done}))&&(this.response=this.responseText+=N)}f.done?ss(this):is(this),this.readyState==3&&sh(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,ss(this))},n.Qa=function(f){this.g&&(this.response=f,ss(this))},n.ga=function(){this.g&&ss(this)};function ss(f){f.readyState=4,f.l=null,f.j=null,f.v=null,is(f)}n.setRequestHeader=function(f,N){this.u.append(f,N)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],N=this.h.entries();for(var j=N.next();!j.done;)j=j.value,f.push(j[0]+": "+j[1]),j=N.next();return f.join(`\r
`)};function is(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function mi(f){let N="";return z(f,function(j,$){N+=$,N+=":",N+=j,N+=`\r
`}),N}function Ji(f,N,j){e:{for($ in j){var $=!1;break e}$=!0}$||(j=mi(j),typeof f=="string"?j!=null&&encodeURIComponent(String(j)):Rt(f,N,j))}function Gt(f){Vt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Gt,Vt);var gm=/^https?$/i,su=["POST","PUT"];n=Gt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,N,j,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);N=N?N.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():es.g(),this.v=this.o?vt(this.o):vt(es),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(N,String(f),!0),this.B=!1}catch(ae){ma(this,ae);return}if(f=j||"",j=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var J in $)j.set(J,$[J]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const ae of $.keys())j.set(ae,$.get(ae));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(j.keys()).find(ae=>ae.toLowerCase()=="content-type"),J=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(su,N,void 0))||$||J||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,we]of j)this.g.setRequestHeader(ae,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xl(this),this.u=!0,this.g.send(f),this.u=!1}catch(ae){ma(this,ae)}};function ma(f,N){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=N,f.m=5,vl(f),Ir(f)}function vl(f){f.A||(f.A=!0,Tt(f,"complete"),Tt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Tt(this,"complete"),Tt(this,"abort"),Ir(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ir(this,!0)),Gt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?iu(this):this.bb())},n.bb=function(){iu(this)};function iu(f){if(f.h&&typeof c<"u"&&(!f.v[1]||cr(f)!=4||f.Z()!=2)){if(f.u&&cr(f)==4)xn(f.Ea,0,f);else if(Tt(f,"readystatechange"),cr(f)==4){f.h=!1;try{const we=f.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var j;if(!(j=N)){var $;if($=we===0){var J=String(f.D).match(ha)[1]||null;!J&&u.self&&u.self.location&&(J=u.self.location.protocol.slice(0,-1)),$=!gm.test(J?J.toLowerCase():"")}j=$}if(j)Tt(f,"complete"),Tt(f,"success");else{f.m=6;try{var ae=2<cr(f)?f.g.statusText:""}catch{ae=""}f.l=ae+" ["+f.Z()+"]",vl(f)}}finally{Ir(f)}}}}function Ir(f,N){if(f.g){xl(f);const j=f.g,$=f.v[0]?()=>{}:null;f.g=null,f.v=null,N||Tt(f,"ready");try{j.onreadystatechange=$}catch{}}}function xl(f){f.I&&(u.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function cr(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<cr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var N=this.g.responseText;return f&&N.indexOf(f)==0&&(N=N.substring(f.length)),Bn(N)}};function ou(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function wl(f){const N={};f=(f.g&&2<=cr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<f.length;$++){if(I(f[$]))continue;var j=M(f[$]);const J=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const ae=N[J]||[];N[J]=ae,ae.push(j)}R(N,function($){return $.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ks(f,N,j){return j&&j.internalChannelParams&&j.internalChannelParams[f]||N}function au(f){this.Aa=0,this.i=[],this.j=new js,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ks("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ks("baseRetryDelayMs",5e3,f),this.cb=ks("retryDelaySeedMs",1e4,f),this.Wa=ks("forwardChannelMaxRetries",2,f),this.wa=ks("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new da(f&&f.concurrentRequestLimit),this.Da=new mm,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=au.prototype,n.la=8,n.G=1,n.connect=function(f,N,j,$){Kt(0),this.W=f,this.H=N||{},j&&$!==void 0&&(this.H.OSID=j,this.H.OAID=$),this.F=this.X,this.I=lh(this,null,this.W),Os(this)};function kn(f){if(_l(f),f.G==3){var N=f.U++,j=Cr(f.I);if(Rt(j,"SID",f.K),Rt(j,"RID",N),Rt(j,"TYPE","terminate"),gi(f,j),N=new ts(f,f.j,N),N.L=2,N.v=Qi(Cr(j)),j=!1,u.navigator&&u.navigator.sendBeacon)try{j=u.navigator.sendBeacon(N.v.toString(),"")}catch{}!j&&u.Image&&(new Image().src=N.v,j=!0),j||(N.g=ch(N.j,null),N.g.ea(N.v)),N.F=Date.now(),Dt(N)}ah(f)}function os(f){f.g&&(lu(f),f.g.cancel(),f.g=null)}function _l(f){os(f),f.u&&(u.clearTimeout(f.u),f.u=null),Sl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function Os(f){if(!Tr(f.h)&&!f.s){f.s=!0;var N=f.Ga;te||le(),Q||(te(),Q=!0),oe.add(N,f),f.B=0}}function ym(f,N){return Qd(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=N.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=or(v(f.Ga,f,N),oh(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const J=new ts(this,this.j,f);let ae=this.o;if(this.S&&(ae?(ae=k(ae),O(ae,this.S)):ae=this.S),this.m!==null||this.O||(J.H=ae,ae=null),this.P)e:{for(var N=0,j=0;j<this.i.length;j++){t:{var $=this.i[j];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(N+=$,4096<N){N=j;break e}if(N===4096||j===this.i.length-1){N=j+1;break e}}N=1e3}else N=1e3;N=Zi(this,J,N),j=Cr(this.I),Rt(j,"RID",f),Rt(j,"CVER",22),this.D&&Rt(j,"X-HTTP-Session-Id",this.D),gi(this,j),ae&&(this.O?N="headers="+encodeURIComponent(String(mi(ae)))+"&"+N:this.m&&Ji(j,this.m,ae)),nu(this.h,J),this.Ua&&Rt(j,"TYPE","init"),this.P?(Rt(j,"$req",N),Rt(j,"SID","null"),J.T=!0,pl(J,j,null)):pl(J,j,N),this.G=2}}else this.G==3&&(f?El(this,f):this.i.length==0||Tr(this.h)||El(this))};function El(f,N){var j;N?j=N.l:j=f.U++;const $=Cr(f.I);Rt($,"SID",f.K),Rt($,"RID",j),Rt($,"AID",f.T),gi(f,$),f.m&&f.o&&Ji($,f.m,f.o),j=new ts(f,f.j,j,f.B+1),f.m===null&&(j.H=f.o),N&&(f.i=N.D.concat(f.i)),N=Zi(f,j,1e3),j.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),nu(f.h,j),pl(j,$,N)}function gi(f,N){f.H&&z(f.H,function(j,$){Rt(N,$,j)}),f.l&&Hi({},function(j,$){Rt(N,$,j)})}function Zi(f,N,j){j=Math.min(f.i.length,j);var $=f.l?v(f.l.Na,f.l,f):null;e:{var J=f.i;let ae=-1;for(;;){const we=["count="+j];ae==-1?0<j?(ae=J[0].g,we.push("ofs="+ae)):ae=0:we.push("ofs="+ae);let jt=!0;for(let wn=0;wn<j;wn++){let xt=J[wn].g;const Cn=J[wn].map;if(xt-=ae,0>xt)ae=Math.max(0,J[wn].g-100),jt=!1;else try{rh(Cn,we,"req"+xt+"_")}catch{$&&$(Cn)}}if(jt){$=we.join("&");break e}}}return f=f.i.splice(0,j),N.D=f,$}function ga(f){if(!f.g&&!f.u){f.Y=1;var N=f.Fa;te||le(),Q||(te(),Q=!0),oe.add(N,f),f.v=0}}function bl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=or(v(f.Fa,f),oh(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,ih(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=or(v(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),os(this),ih(this))};function lu(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function ih(f){f.g=new ts(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var N=Cr(f.qa);Rt(N,"RID","rpc"),Rt(N,"SID",f.K),Rt(N,"AID",f.T),Rt(N,"CI",f.F?"0":"1"),!f.F&&f.ja&&Rt(N,"TO",f.ja),Rt(N,"TYPE","xmlhttp"),gi(f,N),f.m&&f.o&&Ji(N,f.m,f.o),f.L&&(f.g.I=f.L);var j=f.g;f=f.ia,j.L=1,j.v=Qi(Cr(N)),j.m=null,j.P=!0,eu(j,f)}n.Za=function(){this.C!=null&&(this.C=null,os(this),bl(this),Kt(19))};function Sl(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function Nl(f,N){var j=null;if(f.g==N){Sl(f),lu(f),f.g=null;var $=2}else if(er(f.h,N))j=N.D,Yd(f.h,N),$=1;else return;if(f.G!=0){if(N.o)if($==1){j=N.m?N.m.length:0,N=Date.now()-N.F;var J=f.B;$=_t(),Tt($,new di($,j)),Os(f)}else ga(f);else if(J=N.s,J==3||J==0&&0<N.X||!($==1&&ym(f,N)||$==2&&bl(f)))switch(j&&0<j.length&&(N=f.h,N.i=N.i.concat(j)),J){case 1:yi(f,5);break;case 4:yi(f,10);break;case 3:yi(f,6);break;default:yi(f,2)}}}function oh(f,N){let j=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(j*=2),j*N}function yi(f,N){if(f.j.info("Error code "+N),N==2){var j=v(f.fb,f),$=f.Xa;const J=!$;$=new fi($||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||fa($,"https"),Qi($),J?pm($.toString(),j):nh($.toString(),j)}else Kt(2);f.G=0,f.l&&f.l.sa(N),ah(f),_l(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function ah(f){if(f.G=0,f.ka=[],f.l){const N=Xd(f.h);(N.length!=0||f.i.length!=0)&&(_(f.ka,N),_(f.ka,f.i),f.h.i.length=0,w(f.i),f.i.length=0),f.l.ra()}}function lh(f,N,j){var $=j instanceof fi?Cr(j):new fi(j);if($.g!="")N&&($.g=N+"."+$.g),Ki($,$.s);else{var J=u.location;$=J.protocol,N=N?N+"."+J.hostname:J.hostname,J=+J.port;var ae=new fi(null);$&&fa(ae,$),N&&(ae.g=N),J&&Ki(ae,J),j&&(ae.l=j),$=ae}return j=f.D,N=f.ya,j&&N&&Rt($,j,N),Rt($,"VER",f.la),gi(f,$),$}function ch(f,N,j){if(N&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=f.Ca&&!f.pa?new Gt(new pi({eb:j})):new Gt(f.pa),N.Ha(f.J),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function cu(){}n=cu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Tl(){}Tl.prototype.g=function(f,N){return new tr(f,N)};function tr(f,N){Vt.call(this),this.g=new au(N),this.l=f,this.h=N&&N.messageUrlParams||null,f=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(f?f["X-WebChannel-Content-Type"]=N.messageContentType:f={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(f?f["X-WebChannel-Client-Profile"]=N.va:f={"X-WebChannel-Client-Profile":N.va}),this.g.S=f,(f=N&&N.Sb)&&!I(f)&&(this.g.m=f),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!I(N)&&(this.g.D=N,f=this.h,f!==null&&N in f&&(f=this.h,N in f&&delete f[N])),this.j=new Ds(this)}S(tr,Vt),tr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tr.prototype.close=function(){kn(this.g)},tr.prototype.o=function(f){var N=this.g;if(typeof f=="string"){var j={};j.__data__=f,f=j}else this.u&&(j={},j.__data__=Zr(f),f=j);N.i.push(new Gd(N.Ya++,f)),N.G==3&&Os(N)},tr.prototype.N=function(){this.g.l=null,delete this.j,kn(this.g),delete this.g,tr.aa.N.call(this)};function uh(f){Ht.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var N=f.__sm__;if(N){e:{for(const j in N){f=j;break e}f=void 0}(this.i=f)&&(f=this.i,N=N!==null&&f in N?N[f]:void 0),this.data=N}else this.data=f}S(uh,Ht);function dh(){re.call(this),this.status=1}S(dh,re);function Ds(f){this.g=f}S(Ds,cu),Ds.prototype.ua=function(){Tt(this.g,"a")},Ds.prototype.ta=function(f){Tt(this.g,new uh(f))},Ds.prototype.sa=function(f){Tt(this.g,new dh)},Ds.prototype.ra=function(){Tt(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,tr.prototype.send=tr.prototype.o,tr.prototype.open=tr.prototype.m,tr.prototype.close=tr.prototype.close,$T=function(){return new Tl},UT=function(){return _t()},VT=me,lv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$t.NO_ERROR=0,$t.TIMEOUT=8,$t.HTTP_ERROR=6,Df=$t,hl.COMPLETE="complete",FT=hl,ht.EventType=Ut,Ut.OPEN="a",Ut.CLOSE="b",Ut.ERROR="c",Ut.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,Vu=ht,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,MT=Gt}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});const cb="@firebase/firestore",ub="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vr.UNAUTHENTICATED=new vr(null),vr.GOOGLE_CREDENTIALS=new vr("google-credentials-uid"),vr.FIRST_PARTY=new vr("first-party-uid"),vr.MOCK_USER=new vr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=new dx("@firebase/firestore");function Zl(){return Xa.logLevel}function Ie(n,...e){if(Xa.logLevel<=ut.DEBUG){const t=e.map(_x);Xa.debug(`Firestore (${Kc}): ${n}`,...t)}}function Fi(n,...e){if(Xa.logLevel<=ut.ERROR){const t=e.map(_x);Xa.error(`Firestore (${Kc}): ${n}`,...t)}}function Ja(n,...e){if(Xa.logLevel<=ut.WARN){const t=e.map(_x);Xa.warn(`Firestore (${Kc}): ${n}`,...t)}}function _x(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,zT(n,r,t)}function zT(n,e,t){let r=`FIRESTORE (${Kc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Fi(r),new Error(r)}function It(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||zT(e,s,r)}function nt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vr.UNAUTHENTICATED))}shutdown(){}}class i3{constructor(e){this.t=e,this.currentUser=vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){It(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let a=new zo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new zo,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},u=h=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new zo)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It(typeof r.accessToken=="string",31837,{l:r}),new r3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new vr(e)}}class o3{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class a3{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new o3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class db{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){It(this.o===void 0,3512);const r=a=>{a.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Ie("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new db(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new db(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=c3(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function lt(n,e){return n<e?-1:n>e?1:0}function cv(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return lt(r,s);{const a=BT(),c=u3(a.encode(hb(n,t)),a.encode(hb(e,t)));return c!==0?c:lt(r,s)}}t+=r>65535?2:1}return lt(n.length,e.length)}function hb(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function u3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return lt(n[t],e[t]);return lt(n.length,e.length)}function jc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="__name__";class Us{constructor(e,t,r){t===void 0?t=0:t>e.length&&Qe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Qe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Us.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Us?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Us.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return lt(e.length,t.length)}static compareSegments(e,t){const r=Us.isNumericId(e),s=Us.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Us.extractNumericId(e).compare(Us.extractNumericId(t)):cv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $o.fromString(e.substring(4,e.length-2))}}class kt extends Us{construct(e,t,r){return new kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new kt(t)}static emptyPath(){return new kt([])}}const d3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fn extends Us{construct(e,t,r){return new Fn(e,t,r)}static isValidIdentifier(e){return d3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uv}static keyField(){return new Fn([uv])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Ee(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Ee(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Ee(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(a(),s++)}if(a(),c)throw new Ee(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fn(t)}static emptyPath(){return new Fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(kt.fromString(e))}static fromName(e){return new $e(kt.fromString(e).popFirst(5))}static empty(){return new $e(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(n,e,t){if(!t)throw new Ee(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function h3(n,e,t,r){if(e===!0&&r===!0)throw new Ee(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fb(n){if(!$e.isDocumentKey(n))throw new Ee(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pb(n){if($e.isDocumentKey(n))throw new Ee(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Up(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Qe(12329,{type:typeof n})}function Qs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Up(n);throw new Ee(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ld(n,e){if(!qT(n))throw new Ee(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Ee(ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=-62135596800,gb=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*gb);return new yt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mb)throw new Ee(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gb}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ld(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:gn("string",yt._jsonSchemaVersion),seconds:gn("number"),nanoseconds:gn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{static fromTimestamp(e){return new tt(e)}static min(){return new tt(new yt(0,0))}static max(){return new tt(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=-1;function f3(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=tt.fromTimestamp(r===1e9?new yt(t+1,0):new yt(t,r));return new Yo(s,$e.empty(),e)}function p3(n){return new Yo(n.readTime,n.key,fd)}class Yo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yo(tt.min(),$e.empty(),fd)}static max(){return new Yo(tt.max(),$e.empty(),fd)}}function m3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$e.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==g3)throw n;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let s=0,a=0,c=!1;e.forEach(u=>{++s,u.next(()=>{++a,c&&a===s&&t()},h=>r(h))}),c=!0,a===s&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(s=>s?ue.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,s)=>{const a=e.length,c=new Array(a);let u=0;for(let h=0;h<a;h++){const p=h;t(e[p]).next(g=>{c[p]=g,++u,u===a&&r(c)},g=>s(g))}})}static doWhile(e,t){return new ue((r,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):r()};a()})}}function v3(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}$p.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=-1;function zp(n){return n==null}function op(n){return n===0&&1/n==-1/0}function x3(n){return typeof n=="number"&&Number.isInteger(n)&&!op(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="";function w3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yb(e)),e=_3(n.get(t),e);return yb(e)}function _3(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case WT:t+="";break;default:t+=a}}return t}function yb(n){return n+WT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function sa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function HT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t){this.comparator=e,this.root=t||Ln.EMPTY}insert(e,t){return new tn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mf(this.root,e,this.comparator,!0)}}class mf{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??Ln.RED,this.left=s??Ln.EMPTY,this.right=a??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new Ln(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ln.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Qe(27949);return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe(57766)}get value(){throw Qe(16141)}get color(){throw Qe(16727)}get left(){throw Qe(29726)}get right(){throw Qe(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new Ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xb(this.data.getIterator())}getIteratorFrom(e){return new xb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sn(this.comparator);return t.data=e,t}}class xb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.fields=e,e.sort(Fn.comparator)}static empty(){return new Lr([])}unionWith(e){let t=new Sn(Fn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Lr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new KT("Invalid base64 string: "+a):a}}(e);return new Un(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new Un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Un.EMPTY_BYTE_STRING=new Un("");const E3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xo(n){if(It(!!n,39018),typeof n=="string"){let e=0;const t=E3.exec(n);if(It(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cn(n.seconds),nanos:cn(n.nanos)}}function cn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Jo(n){return typeof n=="string"?Un.fromBase64String(n):Un.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="server_timestamp",QT="__type__",YT="__previous_value__",XT="__local_write_time__";function Nx(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[QT])===null||t===void 0?void 0:t.stringValue)===GT}function Bp(n){const e=n.mapValue.fields[YT];return Nx(e)?Bp(e):e}function pd(n){const e=Xo(n.mapValue.fields[XT].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,t,r,s,a,c,u,h,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=p,this.isUsingEmulator=g}}const ap="(default)";class md{constructor(e,t){this.projectId=e,this.database=t||ap}static empty(){return new md("","")}get isDefaultDatabase(){return this.database===ap}isEqual(e){return e instanceof md&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="__type__",S3="__max__",gf={mapValue:{}},ZT="__vector__",lp="value";function Zo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Nx(n)?4:T3(n)?9007199254740991:N3(n)?10:11:Qe(28295,{value:n})}function ri(n,e){if(n===e)return!0;const t=Zo(n);if(t!==Zo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pd(n).isEqual(pd(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=Xo(s.timestampValue),u=Xo(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return Jo(s.bytesValue).isEqual(Jo(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return cn(s.geoPointValue.latitude)===cn(a.geoPointValue.latitude)&&cn(s.geoPointValue.longitude)===cn(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return cn(s.integerValue)===cn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=cn(s.doubleValue),u=cn(a.doubleValue);return c===u?op(c)===op(u):isNaN(c)&&isNaN(u)}return!1}(n,e);case 9:return jc(n.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},u=a.mapValue.fields||{};if(vb(c)!==vb(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!ri(c[h],u[h])))return!1;return!0}(n,e);default:return Qe(52216,{left:n})}}function gd(n,e){return(n.values||[]).find(t=>ri(t,e))!==void 0}function Ac(n,e){if(n===e)return 0;const t=Zo(n),r=Zo(e);if(t!==r)return lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return function(a,c){const u=cn(a.integerValue||a.doubleValue),h=cn(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return wb(n.timestampValue,e.timestampValue);case 4:return wb(pd(n),pd(e));case 5:return cv(n.stringValue,e.stringValue);case 6:return function(a,c){const u=Jo(a),h=Jo(c);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const u=a.split("/"),h=c.split("/");for(let p=0;p<u.length&&p<h.length;p++){const g=lt(u[p],h[p]);if(g!==0)return g}return lt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const u=lt(cn(a.latitude),cn(c.latitude));return u!==0?u:lt(cn(a.longitude),cn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return _b(n.arrayValue,e.arrayValue);case 10:return function(a,c){var u,h,p,g;const y=a.fields||{},v=c.fields||{},b=(u=y[lp])===null||u===void 0?void 0:u.arrayValue,S=(h=v[lp])===null||h===void 0?void 0:h.arrayValue,w=lt(((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0,((g=S==null?void 0:S.values)===null||g===void 0?void 0:g.length)||0);return w!==0?w:_b(b,S)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===gf.mapValue&&c===gf.mapValue)return 0;if(a===gf.mapValue)return 1;if(c===gf.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),p=c.fields||{},g=Object.keys(p);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const v=cv(h[y],g[y]);if(v!==0)return v;const b=Ac(u[h[y]],p[g[y]]);if(b!==0)return b}return lt(h.length,g.length)}(n.mapValue,e.mapValue);default:throw Qe(23264,{le:t})}}function wb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=Xo(n),r=Xo(e),s=lt(t.seconds,r.seconds);return s!==0?s:lt(t.nanos,r.nanos)}function _b(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Ac(t[s],r[s]);if(a)return a}return lt(t.length,r.length)}function Pc(n){return dv(n)}function dv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Xo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Jo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=dv(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${dv(t.fields[c])}`;return s+"}"}(n.mapValue):Qe(61005,{value:n})}function Lf(n){switch(Zo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bp(n);return e?16+Lf(e):16;case 5:return 2*n.stringValue.length;case 6:return Jo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+Lf(a),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return sa(r.fields,(a,c)=>{s+=a.length+Lf(c)}),s}(n.mapValue);default:throw Qe(13486,{value:n})}}function Eb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hv(n){return!!n&&"integerValue"in n}function Tx(n){return!!n&&"arrayValue"in n}function bb(n){return!!n&&"nullValue"in n}function Sb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mf(n){return!!n&&"mapValue"in n}function N3(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[JT])===null||t===void 0?void 0:t.stringValue)===ZT}function Xu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return sa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Xu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function T3(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===S3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(t)}setAll(e){let t=Fn.emptyPath(),r={},s=[];e.forEach((c,u)=>{if(!t.isImmediateParentOf(u)){const h=this.getFieldsMap(t);this.applyChanges(h,r,s),r={},s=[],t=u.popLast()}c?r[u.lastSegment()]=Xu(c):s.push(u.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());Mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Mf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){sa(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new wr(Xu(this.value))}}function eC(n){const e=[];return sa(n.fields,(t,r)=>{const s=new Fn([t]);if(Mf(r)){const a=eC(r.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new Lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t,r,s,a,c,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Yn(e,0,tt.min(),tt.min(),tt.min(),wr.empty(),0)}static newFoundDocument(e,t,r,s){return new Yn(e,1,t,tt.min(),r,s,0)}static newNoDocument(e,t){return new Yn(e,2,t,tt.min(),tt.min(),wr.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,tt.min(),tt.min(),wr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t){this.position=e,this.inclusive=t}}function Nb(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],c=n.position[s];if(a.field.isKeyField()?r=$e.comparator($e.fromName(c.referenceValue),t.key):r=Ac(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ri(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t="asc"){this.field=e,this.dir=t}}function C3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{}class mn extends tC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new j3(e,t,r):t==="array-contains"?new R3(e,r):t==="in"?new k3(e,r):t==="not-in"?new O3(e,r):t==="array-contains-any"?new D3(e,r):new mn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new A3(e,r):new P3(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ac(t,this.value)):t!==null&&Zo(this.value)===Zo(t)&&this.matchesComparison(Ac(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bs extends tC{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new bs(e,t)}matches(e){return nC(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function nC(n){return n.op==="and"}function rC(n){return I3(n)&&nC(n)}function I3(n){for(const e of n.filters)if(e instanceof bs)return!1;return!0}function fv(n){if(n instanceof mn)return n.field.canonicalString()+n.op.toString()+Pc(n.value);if(rC(n))return n.filters.map(e=>fv(e)).join(",");{const e=n.filters.map(t=>fv(t)).join(",");return`${n.op}(${e})`}}function sC(n,e){return n instanceof mn?function(r,s){return s instanceof mn&&r.op===s.op&&r.field.isEqual(s.field)&&ri(r.value,s.value)}(n,e):n instanceof bs?function(r,s){return s instanceof bs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,c,u)=>a&&sC(c,s.filters[u]),!0):!1}(n,e):void Qe(19439)}function iC(n){return n instanceof mn?function(t){return`${t.field.canonicalString()} ${t.op} ${Pc(t.value)}`}(n):n instanceof bs?function(t){return t.op.toString()+" {"+t.getFilters().map(iC).join(" ,")+"}"}(n):"Filter"}class j3 extends mn{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.matchesComparison(t)}}class A3 extends mn{constructor(e,t){super(e,"in",t),this.keys=oC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class P3 extends mn{constructor(e,t){super(e,"not-in",t),this.keys=oC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class R3 extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tx(t)&&gd(t.arrayValue,this.value)}}class k3 extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gd(this.value.arrayValue,t)}}class O3 extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gd(this.value.arrayValue,t)}}class D3 extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tx(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e,t=null,r=[],s=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=u,this.Pe=null}}function Cb(n,e=null,t=[],r=[],s=null,a=null,c=null){return new L3(n,e,t,r,s,a,c)}function Cx(n){const e=nt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>fv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),zp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Pc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Pc(r)).join(",")),e.Pe=t}return e.Pe}function Ix(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!C3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Tb(n.startAt,e.startAt)&&Tb(n.endAt,e.endAt)}function pv(n){return $e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t=null,r=[],s=[],a=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function M3(n,e,t,r,s,a,c,u){return new ll(n,e,t,r,s,a,c,u)}function jx(n){return new ll(n)}function Ib(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function aC(n){return n.collectionGroup!==null}function Ju(n){const e=nt(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Sn(Fn.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(p=>{p.isInequality()&&(u=u.add(p.field))})}),u})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new yd(a,r))}),t.has(Fn.keyField().canonicalString())||e.Te.push(new yd(Fn.keyField(),r))}return e.Te}function Ys(n){const e=nt(n);return e.Ie||(e.Ie=F3(e,Ju(n))),e.Ie}function F3(n,e){if(n.limitType==="F")return Cb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new yd(s.field,a)});const t=n.endAt?new cp(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new cp(n.startAt.position,n.startAt.inclusive):null;return Cb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function mv(n,e){const t=n.filters.concat([e]);return new ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gv(n,e,t){return new ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qp(n,e){return Ix(Ys(n),Ys(e))&&n.limitType===e.limitType}function lC(n){return`${Cx(Ys(n))}|lt:${n.limitType}`}function ec(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>iC(s)).join(", ")}]`),zp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Pc(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Pc(s)).join(",")),`Target(${r})`}(Ys(n))}; limitType=${n.limitType})`}function Wp(n,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):$e.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,s){for(const a of Ju(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(c,u,h){const p=Nb(c,u,h);return c.inclusive?p<=0:p<0}(r.startAt,Ju(r),s)||r.endAt&&!function(c,u,h){const p=Nb(c,u,h);return c.inclusive?p>=0:p>0}(r.endAt,Ju(r),s))}(n,e)}function V3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cC(n){return(e,t)=>{let r=!1;for(const s of Ju(n)){const a=U3(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function U3(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(a,c,u){const h=c.data.field(a),p=u.data.field(a);return h!==null&&p!==null?Ac(h,p):Qe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return HT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=new tn($e.comparator);function Vi(){return $3}const uC=new tn($e.comparator);function Uu(...n){let e=uC;for(const t of n)e=e.insert(t.key,t);return e}function dC(n){let e=uC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Pa(){return Zu()}function hC(){return Zu()}function Zu(){return new cl(n=>n.toString(),(n,e)=>n.isEqual(e))}const z3=new tn($e.comparator),B3=new Sn($e.comparator);function dt(...n){let e=B3;for(const t of n)e=e.add(t);return e}const q3=new Sn(lt);function W3(){return q3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:op(e)?"-0":e}}function fC(n){return{integerValue:""+n}}function H3(n,e){return x3(e)?fC(e):Ax(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this._=void 0}}function K3(n,e,t){return n instanceof vd?function(s,a){const c={fields:{[QT]:{stringValue:GT},[XT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Nx(a)&&(a=Bp(a)),a&&(c.fields[YT]=a),{mapValue:c}}(t,e):n instanceof xd?mC(n,e):n instanceof wd?gC(n,e):function(s,a){const c=pC(s,a),u=jb(c)+jb(s.Ee);return hv(c)&&hv(s.Ee)?fC(u):Ax(s.serializer,u)}(n,e)}function G3(n,e,t){return n instanceof xd?mC(n,e):n instanceof wd?gC(n,e):t}function pC(n,e){return n instanceof up?function(r){return hv(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class vd extends Hp{}class xd extends Hp{constructor(e){super(),this.elements=e}}function mC(n,e){const t=yC(e);for(const r of n.elements)t.some(s=>ri(s,r))||t.push(r);return{arrayValue:{values:t}}}class wd extends Hp{constructor(e){super(),this.elements=e}}function gC(n,e){let t=yC(e);for(const r of n.elements)t=t.filter(s=>!ri(s,r));return{arrayValue:{values:t}}}class up extends Hp{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function jb(n){return cn(n.integerValue||n.doubleValue)}function yC(n){return Tx(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,t){this.field=e,this.transform=t}}function Y3(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof xd&&s instanceof xd||r instanceof wd&&s instanceof wd?jc(r.elements,s.elements,ri):r instanceof up&&s instanceof up?ri(r.Ee,s.Ee):r instanceof vd&&s instanceof vd}(n.transform,e.transform)}class X3{constructor(e,t){this.version=e,this.transformResults=t}}class xs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xs}static exists(e){return new xs(void 0,e)}static updateTime(e){return new xs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ff(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Kp{}function vC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Px(n.key,xs.none()):new Md(n.key,n.data,xs.none());{const t=n.data,r=wr.empty();let s=new Sn(Fn.comparator);for(let a of e.fields)if(!s.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),s=s.add(a)}return new ia(n.key,r,new Lr(s.toArray()),xs.none())}}function J3(n,e,t){n instanceof Md?function(s,a,c){const u=s.value.clone(),h=Pb(s.fieldTransforms,a,c.transformResults);u.setAll(h),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(n,e,t):n instanceof ia?function(s,a,c){if(!Ff(s.precondition,a))return void a.convertToUnknownDocument(c.version);const u=Pb(s.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(xC(s)),h.setAll(u),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function ed(n,e,t,r){return n instanceof Md?function(a,c,u,h){if(!Ff(a.precondition,c))return u;const p=a.value.clone(),g=Rb(a.fieldTransforms,h,c);return p.setAll(g),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof ia?function(a,c,u,h){if(!Ff(a.precondition,c))return u;const p=Rb(a.fieldTransforms,h,c),g=c.data;return g.setAll(xC(a)),g.setAll(p),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(a,c,u){return Ff(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(n,e,t)}function Z3(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=pC(r.transform,s||null);a!=null&&(t===null&&(t=wr.empty()),t.set(r.field,a))}return t||null}function Ab(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&jc(r,s,(a,c)=>Y3(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Md extends Kp{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ia extends Kp{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function xC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Pb(n,e,t){const r=new Map;It(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],c=a.transform,u=e.data.field(a.field);r.set(a.field,G3(c,u,t[s]))}return r}function Rb(n,e,t){const r=new Map;for(const s of n){const a=s.transform,c=t.data.field(s.field);r.set(s.field,K3(a,c,e))}return r}class Px extends Kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eU extends Kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&J3(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ed(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ed(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=hC();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=t.has(s.key)?null:u;const h=vC(c,u);h!==null&&r.set(s.key,h),c.isValidDocument()||c.convertToNoDocument(tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dt())}isEqual(e){return this.batchId===e.batchId&&jc(this.mutations,e.mutations,(t,r)=>Ab(t,r))&&jc(this.baseMutations,e.baseMutations,(t,r)=>Ab(t,r))}}class Rx{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){It(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return z3}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new Rx(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nU=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fn,wt;function sU(n){switch(n){case ce.OK:return Qe(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Qe(15467,{code:n})}}function wC(n){if(n===void 0)return Fi("GRPC error has no .code"),ce.UNKNOWN;switch(n){case fn.OK:return ce.OK;case fn.CANCELLED:return ce.CANCELLED;case fn.UNKNOWN:return ce.UNKNOWN;case fn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case fn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case fn.INTERNAL:return ce.INTERNAL;case fn.UNAVAILABLE:return ce.UNAVAILABLE;case fn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case fn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case fn.NOT_FOUND:return ce.NOT_FOUND;case fn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case fn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case fn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case fn.ABORTED:return ce.ABORTED;case fn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case fn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case fn.DATA_LOSS:return ce.DATA_LOSS;default:return Qe(39323,{code:n})}}(wt=fn||(fn={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=new $o([4294967295,4294967295],0);function kb(n){const e=BT().encode(n),t=new LT;return t.update(e),new Uint8Array(t.digest())}function Ob(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new $o([t,r],0),new $o([s,a],0)]}class kx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $u(`Invalid padding: ${t}`);if(r<0)throw new $u(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $u(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=$o.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply($o.fromNumber(r)));return s.compare(iU)===1&&(s=new $o([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=kb(e),[r,s]=Ob(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);if(!this.ye(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new kx(a,s,t);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const t=kb(e),[r,s]=Ob(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Fd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Gp(tt.min(),s,new tn(lt),Vi(),dt())}}class Fd{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Fd(r,t,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class _C{constructor(e,t){this.targetId=e,this.De=t}}class EC{constructor(e,t,r=Un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Db{constructor(){this.ve=0,this.Ce=Lb(),this.Fe=Un.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=dt(),t=dt(),r=dt();return this.Ce.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Qe(38017,{changeType:a})}}),new Fd(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Lb()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,It(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class oU{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vi(),this.je=yf(),this.Je=yf(),this.He=new tn(lt)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Qe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(pv(a))if(r===0){const c=new $e(a.path);this.Xe(t,c,Yn.newNoDocument(c,tt.min()))}else It(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const u=this._t(e),h=u?this.ut(u,e,c):1;if(h!==0){this.rt(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,p)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let c,u;try{c=Jo(r).toUint8Array()}catch(h){if(h instanceof KT)return Ja("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new kx(c,s,a)}catch(h){return Ja(h instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.fe===0?null:u}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach(a=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.Xe(t,a,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((a,c)=>{const u=this.st(c);if(u){if(a.current&&pv(u.target)){const h=new $e(u.target.path);this.Tt(h).has(c)||this.It(c,h)||this.Xe(c,h,Yn.newNoDocument(h,e))}a.Ne&&(t.set(c,a.Le()),a.ke())}});let r=dt();this.Je.forEach((a,c)=>{let u=!0;c.forEachWhile(h=>{const p=this.st(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const s=new Gp(e,t,this.He,this.ze,r);return this.ze=Vi(),this.je=yf(),this.Je=yf(),this.He=new tn(lt),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Db,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Sn(lt),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Sn(lt),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Db),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function yf(){return new tn($e.comparator)}function Lb(){return new tn($e.comparator)}const aU={asc:"ASCENDING",desc:"DESCENDING"},lU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cU={and:"AND",or:"OR"};class uU{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yv(n,e){return n.useProto3Json||zp(e)?e:{value:e}}function dp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dU(n,e){return dp(n,e.toTimestamp())}function Xs(n){return It(!!n,49232),tt.fromTimestamp(function(t){const r=Xo(t);return new yt(r.seconds,r.nanos)}(n))}function Ox(n,e){return vv(n,e).canonicalString()}function vv(n,e){const t=function(s){return new kt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function SC(n){const e=kt.fromString(n);return It(jC(e),10190,{key:e.toString()}),e}function xv(n,e){return Ox(n.databaseId,e.path)}function sy(n,e){const t=SC(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(TC(t))}function NC(n,e){return Ox(n.databaseId,e)}function hU(n){const e=SC(n);return e.length===4?kt.emptyPath():TC(e)}function wv(n){return new kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TC(n){return It(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Mb(n,e,t){return{name:xv(n,e),fields:t.value.mapValue.fields}}function fU(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Qe(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(p,g){return p.useProto3Json?(It(g===void 0||typeof g=="string",58123),Un.fromBase64String(g||"")):(It(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Un.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(p){const g=p.code===void 0?ce.UNKNOWN:wC(p.code);return new Ee(g,p.message||"")}(c);t=new EC(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=sy(n,r.document.name),a=Xs(r.document.updateTime),c=r.document.createTime?Xs(r.document.createTime):tt.min(),u=new wr({mapValue:{fields:r.document.fields}}),h=Yn.newFoundDocument(s,a,c,u),p=r.targetIds||[],g=r.removedTargetIds||[];t=new Vf(p,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=sy(n,r.document),a=r.readTime?Xs(r.readTime):tt.min(),c=Yn.newNoDocument(s,a),u=r.removedTargetIds||[];t=new Vf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=sy(n,r.document),a=r.removedTargetIds||[];t=new Vf([],a,s,null)}else{if(!("filter"in e))return Qe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,c=new rU(s,a),u=r.targetId;t=new _C(u,c)}}return t}function pU(n,e){let t;if(e instanceof Md)t={update:Mb(n,e.key,e.value)};else if(e instanceof Px)t={delete:xv(n,e.key)};else if(e instanceof ia)t={update:Mb(n,e.key,e.data),updateMask:bU(e.fieldMask)};else{if(!(e instanceof eU))return Qe(16599,{Rt:e.type});t={verify:xv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const u=c.transform;if(u instanceof vd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof xd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof wd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof up)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw Qe(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:dU(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Qe(27497)}(n,e.precondition)),t}function mU(n,e){return n&&n.length>0?(It(e!==void 0,14353),n.map(t=>function(s,a){let c=s.updateTime?Xs(s.updateTime):Xs(a);return c.isEqual(tt.min())&&(c=Xs(a)),new X3(c,s.transformResults||[])}(t,e))):[]}function gU(n,e){return{documents:[NC(n,e.path)]}}function yU(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=NC(n,s);const a=function(p){if(p.length!==0)return IC(bs.create(p,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(p){if(p.length!==0)return p.map(g=>function(v){return{field:tc(v.field),direction:wU(v.dir)}}(g))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=yv(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{Vt:t,parent:s}}function vU(n){let e=hU(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){It(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=function(y){const v=CC(y);return v instanceof bs&&rC(v)?v.getFilters():[v]}(t.where));let c=[];t.orderBy&&(c=function(y){return y.map(v=>function(S){return new yd(nc(S.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(t.orderBy));let u=null;t.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,zp(v)?null:v}(t.limit));let h=null;t.startAt&&(h=function(y){const v=!!y.before,b=y.values||[];return new cp(b,v)}(t.startAt));let p=null;return t.endAt&&(p=function(y){const v=!y.before,b=y.values||[];return new cp(b,v)}(t.endAt)),M3(e,s,c,a,u,"F",h,p)}function xU(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=nc(t.unaryFilter.field);return mn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=nc(t.unaryFilter.field);return mn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=nc(t.unaryFilter.field);return mn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=nc(t.unaryFilter.field);return mn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qe(61313);default:return Qe(60726)}}(n):n.fieldFilter!==void 0?function(t){return mn.create(nc(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qe(58110);default:return Qe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return bs.create(t.compositeFilter.filters.map(r=>CC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Qe(1026)}}(t.compositeFilter.op))}(n):Qe(30097,{filter:n})}function wU(n){return aU[n]}function _U(n){return lU[n]}function EU(n){return cU[n]}function tc(n){return{fieldPath:n.canonicalString()}}function nc(n){return Fn.fromServerFormat(n.fieldPath)}function IC(n){return n instanceof mn?function(t){if(t.op==="=="){if(Sb(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NAN"}};if(bb(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Sb(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NAN"}};if(bb(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tc(t.field),op:_U(t.op),value:t.value}}}(n):n instanceof bs?function(t){const r=t.getFilters().map(s=>IC(s));return r.length===1?r[0]:{compositeFilter:{op:EU(t.op),filters:r}}}(n):Qe(54877,{filter:n})}function bU(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t,r,s,a=tt.min(),c=tt.min(),u=Un.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e){this.gt=e}}function NU(n){const e=vU({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(){this.Dn=new CU}addToCollectionParentIndex(e,t){return this.Dn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Yo.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Yo.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class CU{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Sn(kt.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Sn(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AC=41943040;class xr{static withCacheSize(e){return new xr(e,xr.DEFAULT_COLLECTION_PERCENTILE,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xr.DEFAULT_COLLECTION_PERCENTILE=10,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xr.DEFAULT=new xr(AC,xr.DEFAULT_COLLECTION_PERCENTILE,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xr.DISABLED=new xr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Rc(0)}static ur(){return new Rc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="LruGarbageCollector",PC=1048576;function Ub([n,e],[t,r]){const s=lt(n,t);return s===0?lt(e,r):s}class IU{constructor(e){this.Tr=e,this.buffer=new Sn(Ub),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ub(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jU{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ie(Vb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qc(t)?Ie(Vb,"Ignoring IndexedDB error during garbage collection: ",t):await Gc(t)}await this.Rr(3e5)})}}class AU{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ue.resolve($p.ue);const r=new IU(t);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Fb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fb):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,c,u,h,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,t))).next(y=>(a=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(p=Date.now(),Zl()<=ut.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${y} documents in `+(p-h)+`ms
Total Duration: ${p-g}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:y})))}}function PU(n,e){return new AU(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(){this.changes=new cl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&ed(r.mutation,s,Lr.empty(),yt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,dt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=dt()){const s=Pa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let c=Uu();return a.forEach((u,h)=>{c=c.insert(u,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Pa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,dt()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,u)=>{t.set(c,u)})})}computeViews(e,t,r,s){let a=Vi();const c=Zu(),u=function(){return Zu()}();return t.forEach((h,p)=>{const g=r.get(p.key);s.has(p.key)&&(g===void 0||g.mutation instanceof ia)?a=a.insert(p.key,p):g!==void 0?(c.set(p.key,g.mutation.getFieldMask()),ed(g.mutation,p,g.mutation.getFieldMask(),yt.now())):c.set(p.key,Lr.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((p,g)=>c.set(p,g)),t.forEach((p,g)=>{var y;return u.set(p,new kU(g,(y=c.get(p))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,t){const r=Zu();let s=new tn((c,u)=>c-u),a=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const u of c)u.keys().forEach(h=>{const p=t.get(h);if(p===null)return;let g=r.get(h)||Lr.empty();g=u.applyToLocalView(p,g),r.set(h,g);const y=(s.get(u.batchId)||dt()).add(h);s=s.insert(u.batchId,y)})}).next(()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),p=h.key,g=h.value,y=hC();g.forEach(v=>{if(!a.has(v)){const b=vC(t.get(v),r.get(v));b!==null&&y.set(v,b),a=a.add(v)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,y))}return ue.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(c){return $e.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):ue.resolve(Pa());let u=fd,h=a;return c.next(p=>ue.forEach(p,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),a.get(g)?ue.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{h=h.insert(g,v)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,h,p,dt())).next(g=>({batchId:u,changes:dC(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(r=>{let s=Uu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let c=Uu();return this.indexManager.getCollectionParents(e,a).next(u=>ue.forEach(u,h=>{const p=function(y,v){return new ll(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(g=>{g.forEach((y,v)=>{c=c.insert(y,v)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s))).next(c=>{a.forEach((h,p)=>{const g=p.getKey();c.get(g)===null&&(c=c.insert(g,Yn.newInvalidDocument(g)))});let u=Uu();return c.forEach((h,p)=>{const g=a.get(h);g!==void 0&&ed(g.mutation,p,Lr.empty(),yt.now()),Wp(t,p)&&(u=u.insert(h,p))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Xs(s.createTime)}}(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:NU(s.bundledQuery),readTime:Xs(s.readTime)}}(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(){this.overlays=new tn($e.comparator),this.kr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Pa();return ue.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.wt(e,t,a)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const s=Pa(),a=t.length+1,c=new $e(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&h.largestBatchId>r&&s.set(h.getKey(),h)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new tn((p,g)=>p-g);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let g=a.get(p.largestBatchId);g===null&&(g=Pa(),a=a.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const u=Pa(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,g)=>u.set(p,g)),!(u.size()>=s)););return ue.resolve(u)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new nU(t,r));let a=this.kr.get(t);a===void 0&&(a=dt(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(){this.sessionToken=Un.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this.qr=new Sn(Pn.Qr),this.$r=new Sn(Pn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Pn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Pn(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new $e(new kt([])),r=new Pn(t,e),s=new Pn(t,e+1),a=[];return this.$r.forEachInRange([r,s],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new $e(new kt([])),r=new Pn(t,e),s=new Pn(t,e+1);let a=dt();return this.$r.forEachInRange([r,s],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Pn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Pn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return $e.comparator(e.key,t.key)||lt(e.Hr,t.Hr)}static Ur(e,t){return lt(e.Hr,t.Hr)||$e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Sn(Pn.Qr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new tU(a,t,r,s);this.mutationQueue.push(c);for(const u of s)this.Yr=this.Yr.add(new Pn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,t){return ue.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?Sx:this.er-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pn(t,0),s=new Pn(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],c=>{const u=this.Zr(c.Hr);a.push(u)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(lt);return t.forEach(s=>{const a=new Pn(s,0),c=new Pn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],u=>{r=r.add(u.Hr)})}),ue.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;$e.isDocumentKey(a)||(a=a.child(""));const c=new Pn(new $e(a),0);let u=new Sn(lt);return this.Yr.forEachWhile(h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(u=u.add(h.Hr)),!0)},c),ue.resolve(this.ei(u))}ei(e){const t=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){It(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ue.forEach(t.mutations,s=>{const a=new Pn(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new Pn(t,0),s=this.Yr.firstAfterOrEqual(r);return ue.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this.ni=e,this.docs=function(){return new tn($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let r=Vi();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Yn.newInvalidDocument(s))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Vi();const c=t.path,u=new $e(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:p,value:{document:g}}=h.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||m3(p3(g),r)<=0||(s.has(g.key)||Wp(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Qe(9500)}ri(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new UU(this)}getSize(e){return ue.resolve(this.size)}}class UU extends RU{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.persistence=e,this.ii=new cl(t=>Cx(t),Ix),this.lastRemoteSnapshotVersion=tt.min(),this.highestTargetId=0,this.si=0,this.oi=new Dx,this.targetCount=0,this._i=Rc.ar()}forEachTarget(e,t){return this.ii.forEach((r,s)=>t(s)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),ue.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Rc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.hr(t),ue.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),ue.waitFor(a).next(()=>s)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,t){this.ai={},this.overlays={},this.ui=new $p(0),this.ci=!1,this.ci=!0,this.li=new MU,this.referenceDelegate=e(this),this.hi=new $U(this),this.indexManager=new TU,this.remoteDocumentCache=function(s){return new VU(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new SU(t),this.Ti=new DU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new FU(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){Ie("MemoryPersistence","Starting transaction:",e);const s=new zU(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,t){return ue.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class zU extends y3{constructor(e){super(),this.currentSequenceNumber=e}}class Lx{constructor(e){this.persistence=e,this.Ai=new Dx,this.Ri=null}static Vi(e){return new Lx(e)}get mi(){if(this.Ri)return this.Ri;throw Qe(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.mi,r=>{const s=$e.fromPath(r);return this.fi(e,s).next(a=>{a||t.removeEntry(s,tt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ue.or([()=>ue.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class hp{constructor(e,t){this.persistence=e,this.gi=new cl(r=>w3(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=PU(this,t)}static Vi(e,t){return new hp(e,t)}Ii(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return ue.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(a=>a?ue.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,c=>this.Sr(e,c,t).next(u=>{u||(r++,a.removeEntry(c,tt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ue.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lf(e.data.value)),t}Sr(e,t,r){return ue.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return ue.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=dt(),s=dt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Mx(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return bM()?8:v3(Zn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,t,s,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new BU;return this.ws(e,t,c).next(u=>{if(a.result=u,this.Rs)return this.Ss(e,t,c,u.size)})}).next(()=>a.result)}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Zl()<=ut.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",ec(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(Zl()<=ut.DEBUG&&Ie("QueryEngine","Query:",ec(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Zl()<=ut.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",ec(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ys(t))):ue.resolve())}ps(e,t){if(Ib(t))return ue.resolve(null);let r=Ys(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=gv(t,null,"F"),r=Ys(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=dt(...a);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const p=this.bs(t,u);return this.Ds(t,p,c,h.readTime)?this.ps(e,gv(t,null,"F")):this.vs(e,p,t,h)}))})))}ys(e,t,r,s){return Ib(t)||s.isEqual(tt.min())?ue.resolve(null):this.gs.getDocuments(e,r).next(a=>{const c=this.bs(t,a);return this.Ds(t,c,r,s)?ue.resolve(null):(Zl()<=ut.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ec(t)),this.vs(e,c,t,f3(s,fd)).next(u=>u))})}bs(e,t){let r=new Sn(cC(e));return t.forEach((s,a)=>{Wp(e,a)&&(r=r.add(a))}),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return Zl()<=ut.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",ec(t)),this.gs.getDocumentsMatchingQuery(e,t,Yo.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="LocalStore",WU=3e8;class HU{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new tn(lt),this.Ms=new cl(a=>Cx(a),Ix),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OU(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function KU(n,e,t,r){return new HU(n,e,t,r)}async function kC(n,e){const t=nt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],u=[];let h=dt();for(const p of s){c.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}for(const p of a){u.push(p.batchId);for(const g of p.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next(p=>({Bs:p,removedBatchIds:c,addedBatchIds:u}))})})}function GU(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(u,h,p,g){const y=p.batch,v=y.keys();let b=ue.resolve();return v.forEach(S=>{b=b.next(()=>g.getEntry(h,S)).next(w=>{const _=p.docVersions.get(S);It(_!==null,48541),w.version.compareTo(_)<0&&(y.applyToRemoteDocument(w,p),w.isValidDocument()&&(w.setReadTime(p.commitVersion),g.addEntry(w)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(h,y))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=dt();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(h=h.add(u.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function OC(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function QU(n,e){const t=nt(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const u=[];e.targetChanges.forEach((g,y)=>{const v=s.get(y);if(!v)return;u.push(t.hi.removeMatchingKeys(a,g.removedDocuments,y).next(()=>t.hi.addMatchingKeys(a,g.addedDocuments,y)));let b=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(Un.EMPTY_BYTE_STRING,tt.min()).withLastLimboFreeSnapshotVersion(tt.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),s=s.insert(y,b),function(w,_,A){return w.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=WU?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(v,b,g)&&u.push(t.hi.updateTargetData(a,b))});let h=Vi(),p=dt();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))}),u.push(YU(a,c,e.documentUpdates).next(g=>{h=g.Ls,p=g.ks})),!r.isEqual(tt.min())){const g=t.hi.getLastRemoteSnapshotVersion(a).next(y=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(g)}return ue.waitFor(u).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,h,p)).next(()=>h)}).then(a=>(t.Fs=s,a))}function YU(n,e,t){let r=dt(),s=dt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Vi();return t.forEach((u,h)=>{const p=a.get(u);h.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(tt.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):Ie(Fx,"Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",h.version)}),{Ls:c,ks:s}})}function XU(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Sx),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function JU(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.hi.getTargetData(r,e).next(a=>a?(s=a,ue.resolve(s)):t.hi.allocateTargetId(r).next(c=>(s=new Oo(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function _v(n,e,t){const r=nt(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!Qc(c))throw c;Ie(Fx,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function $b(n,e,t){const r=nt(n);let s=tt.min(),a=dt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,p,g){const y=nt(h),v=y.Ms.get(g);return v!==void 0?ue.resolve(y.Fs.get(v)):y.hi.getTargetData(p,g)}(r,c,Ys(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(h=>{a=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,t?s:tt.min(),t?a:dt())).next(u=>(ZU(r,V3(e),u),{documents:u,qs:a})))}function ZU(n,e,t){let r=n.xs.get(e)||tt.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(e,r)}class zb{constructor(){this.activeTargetIds=W3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class e6{constructor(){this.Fo=new zb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new zb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="ConnectivityMonitor";class qb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ie(Bb,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ie(Bb,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf=null;function Ev(){return vf===null?vf=function(){return 268435456+Math.round(2147483648*Math.random())}():vf++,"0x"+vf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="RestConnection",n6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class r6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===ap?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const c=Ev(),u=this.Go(e,t.toUriEncodedString());Ie(iy,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,a);const{host:p}=new URL(u),g=il(p);return this.jo(e,u,h,r,g).then(y=>(Ie(iy,`Received RPC '${e}' ${c}: `,y),y),y=>{throw Ja(iy,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,t,r,s,a,c){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Kc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Go(e,t){const r=n6[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="WebChannelConnection";class i6 extends r6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const c=Ev();return new Promise((u,h)=>{const p=new MT;p.setWithCredentials(!0),p.listenOnce(FT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Df.NO_ERROR:const y=p.getResponseJson();Ie(Gn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Df.TIMEOUT:Ie(Gn,`RPC '${e}' ${c} timed out`),h(new Ee(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Df.HTTP_ERROR:const v=p.getStatus();if(Ie(Gn,`RPC '${e}' ${c} failed with status:`,v,"response text:",p.getResponseText()),v>0){let b=p.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b==null?void 0:b.error;if(S&&S.status&&S.message){const w=function(A){const I=A.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(I)>=0?I:ce.UNKNOWN}(S.status);h(new Ee(w,S.message))}else h(new Ee(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new Ee(ce.UNAVAILABLE,"Connection failed."));break;default:Qe(9055,{c_:e,streamId:c,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{Ie(Gn,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(s);Ie(Gn,`RPC '${e}' ${c} sending request:`,s),p.send(t,"POST",g,r,15)})}P_(e,t,r){const s=Ev(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=$T(),u=UT(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const g=a.join("");Ie(Gn,`Creating RPC '${e}' stream ${s}: ${g}`,h);const y=c.createWebChannel(g,h);this.T_(y);let v=!1,b=!1;const S=new s6({Ho:_=>{b?Ie(Gn,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(v||(Ie(Gn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),Ie(Gn,`RPC '${e}' stream ${s} sending:`,_),y.send(_))},Yo:()=>y.close()}),w=(_,A,I)=>{_.listen(A,C=>{try{I(C)}catch(L){setTimeout(()=>{throw L},0)}})};return w(y,Vu.EventType.OPEN,()=>{b||(Ie(Gn,`RPC '${e}' stream ${s} transport opened.`),S.s_())}),w(y,Vu.EventType.CLOSE,()=>{b||(b=!0,Ie(Gn,`RPC '${e}' stream ${s} transport closed`),S.__(),this.I_(y))}),w(y,Vu.EventType.ERROR,_=>{b||(b=!0,Ja(Gn,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),S.__(new Ee(ce.UNAVAILABLE,"The operation could not be completed")))}),w(y,Vu.EventType.MESSAGE,_=>{var A;if(!b){const I=_.data[0];It(!!I,16349);const C=I,L=(C==null?void 0:C.error)||((A=C[0])===null||A===void 0?void 0:A.error);if(L){Ie(Gn,`RPC '${e}' stream ${s} received error:`,L);const U=L.status;let z=function(D){const O=fn[D];if(O!==void 0)return wC(O)}(U),R=L.message;z===void 0&&(z=ce.INTERNAL,R="Unknown error status: "+U+" with message "+L.message),b=!0,S.__(new Ee(z,R)),y.close()}else Ie(Gn,`RPC '${e}' stream ${s} received:`,I),S.a_(I)}}),w(u,VT.STAT_EVENT,_=>{_.stat===lv.PROXY?Ie(Gn,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===lv.NOPROXY&&Ie(Gn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function oy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(n){return new uU(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&Ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="PersistentStream";class LC{constructor(e,t,r,s,a,c,u,h){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new DC(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Fi(t.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===t&&this.W_(r,s)},r=>{e(()=>{const s=new Ee(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Ie(Wb,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Ie(Wb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o6 extends LC{constructor(e,t,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=fU(this.serializer,e),r=function(a){if(!("targetChange"in a))return tt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?tt.min():c.readTime?Xs(c.readTime):tt.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=wv(this.serializer),t.addTarget=function(a,c){let u;const h=c.target;if(u=pv(h)?{documents:gU(a,h)}:{query:yU(a,h).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=bC(a,c.resumeToken);const p=yv(a,c.expectedCount);p!==null&&(u.expectedCount=p)}else if(c.snapshotVersion.compareTo(tt.min())>0){u.readTime=dp(a,c.snapshotVersion.toTimestamp());const p=yv(a,c.expectedCount);p!==null&&(u.expectedCount=p)}return u}(this.serializer,e);const r=xU(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=wv(this.serializer),t.removeTarget=e,this.k_(t)}}class a6 extends LC{constructor(e,t,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=mU(e.writeResults,e.commitTime),r=Xs(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=wv(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>pU(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{}class c6 extends l6{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Ee(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,vv(t,r),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(ce.UNKNOWN,a.toString())})}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,vv(t,r),s,c,u,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ee(ce.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class u6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Fi(t),this._a=!1):Ie("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za="RemoteStore";class d6{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{ul(this)&&(Ie(Za,"Restarting streams for network reachability change."),await async function(h){const p=nt(h);p.Ia.add(4),await Vd(p),p.Aa.set("Unknown"),p.Ia.delete(4),await Yp(p)}(this))})}),this.Aa=new u6(r,s)}}async function Yp(n){if(ul(n))for(const e of n.da)await e(!0)}async function Vd(n){for(const e of n.da)await e(!1)}function MC(n,e){const t=nt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),zx(t)?$x(t):Yc(t).x_()&&Ux(t,e))}function Vx(n,e){const t=nt(n),r=Yc(t);t.Ta.delete(e),r.x_()&&FC(t,e),t.Ta.size===0&&(r.x_()?r.B_():ul(t)&&t.Aa.set("Unknown"))}function Ux(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yc(n).H_(e)}function FC(n,e){n.Ra.$e(e),Yc(n).Y_(e)}function $x(n){n.Ra=new oU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Yc(n).start(),n.Aa.aa()}function zx(n){return ul(n)&&!Yc(n).M_()&&n.Ta.size>0}function ul(n){return nt(n).Ia.size===0}function VC(n){n.Ra=void 0}async function h6(n){n.Aa.set("Online")}async function f6(n){n.Ta.forEach((e,t)=>{Ux(n,e)})}async function p6(n,e){VC(n),zx(n)?(n.Aa.la(e),$x(n)):n.Aa.set("Unknown")}async function m6(n,e,t){if(n.Aa.set("Online"),e instanceof EC&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const u of a.targetIds)s.Ta.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ta.delete(u),s.Ra.removeTarget(u))}(n,e)}catch(r){Ie(Za,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await fp(n,r)}else if(e instanceof Vf?n.Ra.Ye(e):e instanceof _C?n.Ra.it(e):n.Ra.et(e),!t.isEqual(tt.min()))try{const r=await OC(n.localStore);t.compareTo(r)>=0&&await function(a,c){const u=a.Ra.Pt(c);return u.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const g=a.Ta.get(p);g&&a.Ta.set(p,g.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach((h,p)=>{const g=a.Ta.get(h);if(!g)return;a.Ta.set(h,g.withResumeToken(Un.EMPTY_BYTE_STRING,g.snapshotVersion)),FC(a,h);const y=new Oo(g.target,h,p,g.sequenceNumber);Ux(a,y)}),a.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){Ie(Za,"Failed to raise snapshot:",r),await fp(n,r)}}async function fp(n,e,t){if(!Qc(e))throw e;n.Ia.add(1),await Vd(n),n.Aa.set("Offline"),t||(t=()=>OC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ie(Za,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Yp(n)})}function UC(n,e){return e().catch(t=>fp(n,t,e))}async function Xp(n){const e=nt(n),t=ea(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Sx;for(;g6(e);)try{const s=await XU(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,y6(e,s)}catch(s){await fp(e,s)}$C(e)&&zC(e)}function g6(n){return ul(n)&&n.Pa.length<10}function y6(n,e){n.Pa.push(e);const t=ea(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function $C(n){return ul(n)&&!ea(n).M_()&&n.Pa.length>0}function zC(n){ea(n).start()}async function v6(n){ea(n).na()}async function x6(n){const e=ea(n);for(const t of n.Pa)e.X_(t.mutations)}async function w6(n,e,t){const r=n.Pa.shift(),s=Rx.from(r,e,t);await UC(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Xp(n)}async function _6(n,e){e&&ea(n).Z_&&await async function(r,s){if(function(c){return sU(c)&&c!==ce.ABORTED}(s.code)){const a=r.Pa.shift();ea(r).N_(),await UC(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Xp(r)}}(n,e),$C(n)&&zC(n)}async function Hb(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),Ie(Za,"RemoteStore received new credentials");const r=ul(t);t.Ia.add(3),await Vd(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Yp(t)}async function E6(n,e){const t=nt(n);e?(t.Ia.delete(2),await Yp(t)):e||(t.Ia.add(2),await Vd(t),t.Aa.set("Unknown"))}function Yc(n){return n.Va||(n.Va=function(t,r,s){const a=nt(t);return a.ia(),new o6(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:h6.bind(null,n),e_:f6.bind(null,n),n_:p6.bind(null,n),J_:m6.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),zx(n)?$x(n):n.Aa.set("Unknown")):(await n.Va.stop(),VC(n))})),n.Va}function ea(n){return n.ma||(n.ma=function(t,r,s){const a=nt(t);return a.ia(),new a6(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:v6.bind(null,n),n_:_6.bind(null,n),ea:x6.bind(null,n),ta:w6.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Xp(n)):(await n.ma.stop(),n.Pa.length>0&&(Ie(Za,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const c=Date.now()+r,u=new Bx(e,t,c,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qx(n,e){if(Fi("AsyncQueue",`${e}: ${n}`),Qc(n))return new Ee(ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{static emptySet(e){return new cc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=Uu(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new cc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this.fa=new tn($e.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Qe(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class kc{constructor(e,t,r,s,a,c,u,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,a){const c=[];return t.forEach(u=>{c.push({type:0,doc:u})}),new kc(e,t,cc.emptySet(t),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class S6{constructor(){this.queries=Gb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=nt(t),a=s.queries;s.queries=Gb(),a.forEach((c,u)=>{for(const h of u.wa)h.onError(r)})})(this,new Ee(ce.ABORTED,"Firestore shutting down"))}}function Gb(){return new cl(n=>lC(n),qp)}async function BC(n,e){const t=nt(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new b6,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=qx(c,`Initialization of query '${ec(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&Wx(t)}async function qC(n,e){const t=nt(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function N6(n,e){const t=nt(n);let r=!1;for(const s of e){const a=s.query,c=t.queries.get(a);if(c){for(const u of c.wa)u.Ca(s)&&(r=!0);c.ya=s}}r&&Wx(t)}function T6(n,e,t){const r=nt(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function Wx(n){n.Da.forEach(e=>{e.next()})}var bv,Qb;(Qb=bv||(bv={})).Fa="default",Qb.Cache="cache";class WC{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new kc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==bv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.key=e}}class KC{constructor(e){this.key=e}}class C6{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=dt(),this.mutatedKeys=dt(),this.Xa=cC(e),this.eu=new cc(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Kb,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,y)=>{const v=s.get(g),b=Wp(this.query,y)?y:null,S=!!v&&this.mutatedKeys.has(v.key),w=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let _=!1;v&&b?v.data.isEqual(b.data)?S!==w&&(r.track({type:3,doc:b}),_=!0):this.iu(v,b)||(r.track({type:2,doc:b}),_=!0,(h&&this.Xa(b,h)>0||p&&this.Xa(b,p)<0)&&(u=!0)):!v&&b?(r.track({type:0,doc:b}),_=!0):v&&!b&&(r.track({type:1,doc:v}),_=!0,(h||p)&&(u=!0)),_&&(b?(c=c.add(b),a=w?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:u,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,y)=>function(b,S){const w=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe(20277,{At:_})}};return w(b)-w(S)}(g.type,y.type)||this.Xa(g.doc,y.doc)),this.su(r),s=s!=null&&s;const u=t&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,p=h!==this.Ya;return this.Ya=h,c.length!==0||p?{snapshot:new kc(this.query,e.eu,a,c,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Kb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=dt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new KC(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new HC(r))}),t}uu(e){this.Ha=e.qs,this.Za=dt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return kc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Hx="SyncEngine";class I6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class j6{constructor(e){this.key=e,this.lu=!1}}class A6{constructor(e,t,r,s,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new cl(u=>lC(u),qp),this.Tu=new Map,this.Iu=new Set,this.du=new tn($e.comparator),this.Eu=new Map,this.Au=new Dx,this.Ru={},this.Vu=new Map,this.mu=Rc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function P6(n,e,t=!0){const r=ZC(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await GC(r,e,t,!0),s}async function R6(n,e){const t=ZC(n);await GC(t,e,!0,!1)}async function GC(n,e,t,r){const s=await JU(n.localStore,Ys(e)),a=s.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let u;return r&&(u=await k6(n,e,a,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&MC(n.remoteStore,s),u}async function k6(n,e,t,r,s){n.gu=(y,v,b)=>async function(w,_,A,I){let C=_.view.nu(A);C.Ds&&(C=await $b(w.localStore,_.query,!1).then(({documents:R})=>_.view.nu(R,C)));const L=I&&I.targetChanges.get(_.targetId),U=I&&I.targetMismatches.get(_.targetId)!=null,z=_.view.applyChanges(C,w.isPrimaryClient,L,U);return Xb(w,_.targetId,z._u),z.snapshot}(n,y,v,b);const a=await $b(n.localStore,e,!0),c=new C6(e,a.qs),u=c.nu(a.documents),h=Fd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=c.applyChanges(u,n.isPrimaryClient,h);Xb(n,t,p._u);const g=new I6(e,t,c);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),p.snapshot}async function O6(n,e,t){const r=nt(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter(c=>!qp(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await _v(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Vx(r.remoteStore,s.targetId),Sv(r,s.targetId)}).catch(Gc)):(Sv(r,s.targetId),await _v(r.localStore,s.targetId,!0))}async function D6(n,e){const t=nt(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Vx(t.remoteStore,r.targetId))}async function L6(n,e,t){const r=B6(n);try{const s=await function(c,u){const h=nt(c),p=yt.now(),g=u.reduce((b,S)=>b.add(S.key),dt());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",b=>{let S=Vi(),w=dt();return h.Os.getEntries(b,g).next(_=>{S=_,S.forEach((A,I)=>{I.isValidDocument()||(w=w.add(A))})}).next(()=>h.localDocuments.getOverlayedDocuments(b,S)).next(_=>{y=_;const A=[];for(const I of u){const C=Z3(I,y.get(I.key).overlayedDocument);C!=null&&A.push(new ia(I.key,C,eC(C.value.mapValue),xs.exists(!0)))}return h.mutationQueue.addMutationBatch(b,p,A,u)}).next(_=>{v=_;const A=_.applyToLocalDocumentSet(y,w);return h.documentOverlayCache.saveOverlays(b,_.batchId,A)})}).then(()=>({batchId:v.batchId,changes:dC(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,h){let p=c.Ru[c.currentUser.toKey()];p||(p=new tn(lt)),p=p.insert(u,h),c.Ru[c.currentUser.toKey()]=p}(r,s.batchId,t),await Ud(r,s.changes),await Xp(r.remoteStore)}catch(s){const a=qx(s,"Failed to persist write");t.reject(a)}}async function QC(n,e){const t=nt(n);try{const r=await QU(t.localStore,e);e.targetChanges.forEach((s,a)=>{const c=t.Eu.get(a);c&&(It(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.lu=!0:s.modifiedDocuments.size>0?It(c.lu,14607):s.removedDocuments.size>0&&(It(c.lu,42227),c.lu=!1))}),await Ud(t,r,e)}catch(r){await Gc(r)}}function Yb(n,e,t){const r=nt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach((a,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(c,u){const h=nt(c);h.onlineState=u;let p=!1;h.queries.forEach((g,y)=>{for(const v of y.wa)v.va(u)&&(p=!0)}),p&&Wx(h)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function M6(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let c=new tn($e.comparator);c=c.insert(a,Yn.newNoDocument(a,tt.min()));const u=dt().add(a),h=new Gp(tt.min(),new Map,new tn(lt),c,u);await QC(r,h),r.du=r.du.remove(a),r.Eu.delete(e),Kx(r)}else await _v(r.localStore,e,!1).then(()=>Sv(r,e,t)).catch(Gc)}async function F6(n,e){const t=nt(n),r=e.batch.batchId;try{const s=await GU(t.localStore,e);XC(t,r,null),YC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ud(t,s)}catch(s){await Gc(s)}}async function V6(n,e,t){const r=nt(n);try{const s=await function(c,u){const h=nt(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return h.mutationQueue.lookupMutationBatch(p,u).next(y=>(It(y!==null,37113),g=y.keys(),h.mutationQueue.removeMutationBatch(p,y))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>h.localDocuments.getDocuments(p,g))})}(r.localStore,e);XC(r,e,t),YC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ud(r,s)}catch(s){await Gc(s)}}function YC(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function XC(n,e,t){const r=nt(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function Sv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||JC(n,r)})}function JC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Vx(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Kx(n))}function Xb(n,e,t){for(const r of t)r instanceof HC?(n.Au.addReference(r.key,e),U6(n,r)):r instanceof KC?(Ie(Hx,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||JC(n,r.key)):Qe(19791,{yu:r})}function U6(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(Ie(Hx,"New document in limbo: "+t),n.Iu.add(r),Kx(n))}function Kx(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new $e(kt.fromString(e)),r=n.mu.next();n.Eu.set(r,new j6(t)),n.du=n.du.insert(t,r),MC(n.remoteStore,new Oo(Ys(jx(t.path)),r,"TargetPurposeLimboResolution",$p.ue))}}async function Ud(n,e,t){const r=nt(n),s=[],a=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,h)=>{c.push(r.gu(h,e,t).then(p=>{var g;if((p||t)&&r.isPrimaryClient){const y=p?!p.fromCache:(g=t==null?void 0:t.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(p){s.push(p);const y=Mx.Es(h.targetId,p);a.push(y)}}))}),await Promise.all(c),r.hu.J_(s),await async function(h,p){const g=nt(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ue.forEach(p,v=>ue.forEach(v.Is,b=>g.persistence.referenceDelegate.addReference(y,v.targetId,b)).next(()=>ue.forEach(v.ds,b=>g.persistence.referenceDelegate.removeReference(y,v.targetId,b)))))}catch(y){if(!Qc(y))throw y;Ie(Fx,"Failed to update sequence numbers: "+y)}for(const y of p){const v=y.targetId;if(!y.fromCache){const b=g.Fs.get(v),S=b.snapshotVersion,w=b.withLastLimboFreeSnapshotVersion(S);g.Fs=g.Fs.insert(v,w)}}}(r.localStore,a))}async function $6(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){Ie(Hx,"User change. New user:",e.toKey());const r=await kC(t.localStore,e);t.currentUser=e,function(a,c){a.Vu.forEach(u=>{u.forEach(h=>{h.reject(new Ee(ce.CANCELLED,c))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ud(t,r.Bs)}}function z6(n,e){const t=nt(n),r=t.Eu.get(e);if(r&&r.lu)return dt().add(r.key);{let s=dt();const a=t.Tu.get(e);if(!a)return s;for(const c of a){const u=t.Pu.get(c);s=s.unionWith(u.view.tu)}return s}}function ZC(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M6.bind(null,e),e.hu.J_=N6.bind(null,e.eventManager),e.hu.pu=T6.bind(null,e.eventManager),e}function B6(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V6.bind(null,e),e}class pp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return KU(this.persistence,new qU,e.initialUser,this.serializer)}Du(e){return new RC(Lx.Vi,this.serializer)}bu(e){return new e6}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pp.provider={build:()=>new pp};class q6 extends pp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){It(this.persistence.referenceDelegate instanceof hp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jU(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?xr.withCacheSize(this.cacheSizeBytes):xr.DEFAULT;return new RC(r=>hp.Vi(r,t),this.serializer)}}class Nv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$6.bind(null,this.syncEngine),await E6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new S6}()}createDatastore(e){const t=Qp(e.databaseInfo.databaseId),r=function(a){return new i6(a)}(e.databaseInfo);return function(a,c,u,h){return new c6(a,c,u,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,a,c,u){return new d6(r,s,a,c,u)}(this.localStore,this.datastore,e.asyncQueue,t=>Yb(this.syncEngine,t,0),function(){return qb.C()?new qb:new t6}())}createSyncEngine(e,t){return function(s,a,c,u,h,p,g){const y=new A6(s,a,c,u,h,p);return g&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=nt(s);Ie(Za,"RemoteStore shutting down."),a.Ia.add(5),await Vd(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Nv.provider={build:()=>new Nv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="FirestoreClient";class W6{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=vr.UNAUTHENTICATED,this.clientId=Ex.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{Ie(ta,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Ie(ta,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=qx(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ay(n,e){n.asyncQueue.verifyOperationInProgress(),Ie(ta,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await kC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{Ja("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Ie("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Ja("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=e}async function Jb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await H6(n);Ie(ta,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Hb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Hb(e.remoteStore,s)),n._onlineComponents=e}async function H6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie(ta,"Using user provided OfflineComponentProvider");try{await ay(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ce.FAILED_PRECONDITION||s.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Ja("Error using user provided cache. Falling back to memory cache: "+t),await ay(n,new pp)}}else Ie(ta,"Using default OfflineComponentProvider"),await ay(n,new q6(void 0));return n._offlineComponents}async function tI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie(ta,"Using user provided OnlineComponentProvider"),await Jb(n,n._uninitializedComponentsProvider._online)):(Ie(ta,"Using default OnlineComponentProvider"),await Jb(n,new Nv))),n._onlineComponents}function K6(n){return tI(n).then(e=>e.syncEngine)}async function Tv(n){const e=await tI(n),t=e.eventManager;return t.onListen=P6.bind(null,e.syncEngine),t.onUnlisten=O6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=R6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=D6.bind(null,e.syncEngine),t}function G6(n,e,t={}){const r=new zo;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,p){const g=new eI({next:v=>{g.Ou(),c.enqueueAndForget(()=>qC(a,y)),v.fromCache&&h.source==="server"?p.reject(new Ee(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(v)},error:v=>p.reject(v)}),y=new WC(u,g,{includeMetadataChanges:!0,ka:!0});return BC(a,y)}(await Tv(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6="firestore.googleapis.com",e1=!0;class t1{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Q6,this.ssl=e1}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:e1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PC)throw new Ee(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ee(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ee(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ee(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jp{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new s3;switch(r.type){case"firstParty":return new a3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Zb.get(t);r&&(Ie("ComponentProvider","Removing Datastore"),Zb.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class yn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}toJSON(){return{type:yn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ld(t,yn._jsonSchema))return new yn(e,r||null,new $e(kt.fromString(t.referencePath)))}}yn._jsonSchemaVersion="firestore/documentReference/1.0",yn._jsonSchema={type:gn("string",yn._jsonSchemaVersion),referencePath:gn("string")};class Bo extends Bi{constructor(e,t,r){super(e,t,jx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new $e(e))}withConverter(e){return new Bo(this.firestore,e,this._path)}}function ot(n,e,...t){if(n=vn(n),bx("collection","path",e),n instanceof Jp){const r=kt.fromString(e,...t);return pb(r),new Bo(n,null,r)}{if(!(n instanceof yn||n instanceof Bo))throw new Ee(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return pb(r),new Bo(n.firestore,null,r)}}function qs(n,e){if(n=Qs(n,Jp),bx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ee(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bi(n,null,function(r){return new ll(kt.emptyPath(),r)}(e))}function Mt(n,e,...t){if(n=vn(n),arguments.length===1&&(e=Ex.newId()),bx("doc","path",e),n instanceof Jp){const r=kt.fromString(e,...t);return fb(r),new yn(n,null,new $e(r))}{if(!(n instanceof yn||n instanceof Bo))throw new Ee(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kt.fromString(e,...t));return fb(r),new yn(n.firestore,n instanceof Bo?n.converter:null,new $e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="AsyncQueue";class r1{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new DC(this,"async_queue_retry"),this.oc=()=>{const r=oy();r&&Ie(n1,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=oy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=oy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new zo;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Qc(e))throw e;Ie(n1,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Fi("INTERNAL UNHANDLED ERROR: ",s1(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Bx.createAndSchedule(this,e,t,r,a=>this.lc(a));return this.ec.push(s),s}ac(){this.tc&&Qe(47125,{hc:s1(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function s1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(n,["next","error","complete"])}class el extends Jp{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new r1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r1(e),this._firestoreClient=void 0,await e}}}function Y6(n,e,t){t||(t=ap);const r=Dp(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),a=r.getOptions(t);if(Ga(a,e))return s;throw new Ee(ce.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ee(ce.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PC)throw new Ee(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&il(e.host)&&ux(e.host),r.initialize({options:e,instanceIdentifier:t})}function Gx(n){if(n._terminated)throw new Ee(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||X6(n),n._firestoreClient}function X6(n){var e,t,r;const s=n._freezeSettings(),a=function(u,h,p,g){return new b3(u,h,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,nI(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new W6(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yr(Un.fromBase64String(e))}catch(t){throw new Ee(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yr(Un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ld(e,Yr._jsonSchema))return Yr.fromBase64String(e.bytes)}}Yr._jsonSchemaVersion="firestore/bytes/1.0",Yr._jsonSchema={type:gn("string",Yr._jsonSchemaVersion),bytes:gn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function J6(){return new $d(uv)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Js._jsonSchemaVersion}}static fromJSON(e){if(Ld(e,Js._jsonSchema))return new Js(e.latitude,e.longitude)}}Js._jsonSchemaVersion="firestore/geoPoint/1.0",Js._jsonSchema={type:gn("string",Js._jsonSchemaVersion),latitude:gn("number"),longitude:gn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Zs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ld(e,Zs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Zs(e.vectorValues);throw new Ee(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zs._jsonSchemaVersion="firestore/vectorValue/1.0",Zs._jsonSchema={type:gn("string",Zs._jsonSchemaVersion),vectorValues:gn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=/^__.*__$/;class e5{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ia(e,this.data,this.fieldMask,t,this.fieldTransforms):new Md(e,this.data,t,this.fieldTransforms)}}class rI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ia(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe(40011,{Ec:n})}}class Qx{constructor(e,t,r,s,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Qx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return mp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(sI(this.Ec)&&Z6.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class t5{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Qp(e)}Dc(e,t,r,s=!1){return new Qx({Ec:e,methodName:t,bc:r,path:Fn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yx(n){const e=n._freezeSettings(),t=Qp(n._databaseId);return new t5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function n5(n,e,t,r,s,a={}){const c=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);Jx("Data must be an object, but it was:",c,r);const u=iI(r,c);let h,p;if(a.merge)h=new Lr(c.fieldMask),p=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const y of a.mergeFields){const v=Cv(e,y,t);if(!c.contains(v))throw new Ee(ce.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);aI(g,v)||g.push(v)}h=new Lr(g),p=c.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,p=c.fieldTransforms;return new e5(new wr(u),h,p)}class em extends Zp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof em}}class Xx extends Zp{_toFieldTransform(e){return new Q3(e.path,new vd)}isEqual(e){return e instanceof Xx}}function r5(n,e,t,r){const s=n.Dc(1,e,t);Jx("Data must be an object, but it was:",s,r);const a=[],c=wr.empty();sa(r,(h,p)=>{const g=Zx(e,h,t);p=vn(p);const y=s.gc(g);if(p instanceof em)a.push(g);else{const v=zd(p,y);v!=null&&(a.push(g),c.set(g,v))}});const u=new Lr(a);return new rI(c,u,s.fieldTransforms)}function s5(n,e,t,r,s,a){const c=n.Dc(1,e,t),u=[Cv(e,r,t)],h=[s];if(a.length%2!=0)throw new Ee(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)u.push(Cv(e,a[v])),h.push(a[v+1]);const p=[],g=wr.empty();for(let v=u.length-1;v>=0;--v)if(!aI(p,u[v])){const b=u[v];let S=h[v];S=vn(S);const w=c.gc(b);if(S instanceof em)p.push(b);else{const _=zd(S,w);_!=null&&(p.push(b),g.set(b,_))}}const y=new Lr(p);return new rI(g,y,c.fieldTransforms)}function i5(n,e,t,r=!1){return zd(t,n.Dc(r?4:3,e))}function zd(n,e){if(oI(n=vn(n)))return Jx("Unsupported field value:",e,n),iI(n,e);if(n instanceof Zp)return function(r,s){if(!sI(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const a=[];let c=0;for(const u of r){let h=zd(u,s.yc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}}(n,e)}return function(r,s){if((r=vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return H3(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=yt.fromDate(r);return{timestampValue:dp(s.serializer,a)}}if(r instanceof yt){const a=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dp(s.serializer,a)}}if(r instanceof Js)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yr)return{bytesValue:bC(s.serializer,r._byteString)};if(r instanceof yn){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ox(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Zs)return function(c,u){return{mapValue:{fields:{[JT]:{stringValue:ZT},[lp]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw u.wc("VectorValues must only contain numeric values.");return Ax(u.serializer,p)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Up(r)}`)}(n,e)}function iI(n,e){const t={};return HT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(n,(r,s)=>{const a=zd(s,e.Vc(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function oI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof Js||n instanceof Yr||n instanceof yn||n instanceof Zp||n instanceof Zs)}function Jx(n,e,t){if(!oI(t)||!qT(t)){const r=Up(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Cv(n,e,t){if((e=vn(e))instanceof $d)return e._internalPath;if(typeof e=="string")return Zx(n,e);throw mp("Field path arguments must be of type string or ",n,!1,void 0,t)}const o5=new RegExp("[~\\*/\\[\\]]");function Zx(n,e,t){if(e.search(o5)>=0)throw mp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $d(...e.split("."))._internalPath}catch{throw mp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mp(n,e,t,r,s){const a=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${s}`),h+=")"),new Ee(ce.INVALID_ARGUMENT,u+n+h)}function aI(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class a5 extends lI{data(){return super.data()}}function tm(n,e){return typeof e=="string"?Zx(n,e):e instanceof $d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ee(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ew{}class uI extends ew{}function Er(n,e,...t){let r=[];e instanceof ew&&r.push(e),r=r.concat(t),function(a){const c=a.filter(h=>h instanceof tw).length,u=a.filter(h=>h instanceof nm).length;if(c>1||c>0&&u>0)throw new Ee(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class nm extends uI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new nm(e,t,r)}_apply(e){const t=this._parse(e);return dI(e._query,t),new Bi(e.firestore,e.converter,mv(e._query,t))}_parse(e){const t=Yx(e.firestore);return function(a,c,u,h,p,g,y){let v;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Ee(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){a1(y,g);const S=[];for(const w of y)S.push(o1(h,a,w));v={arrayValue:{values:S}}}else v=o1(h,a,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||a1(y,g),v=i5(u,c,y,g==="in"||g==="not-in");return mn.create(p,g,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function l5(n,e,t){const r=e,s=tm("where",n);return nm._create(s,r,t)}class tw extends ew{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new tw(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:bs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,a){let c=s;const u=a.getFlattenedFilters();for(const h of u)dI(c,h),c=mv(c,h)}(e._query,t),new Bi(e.firestore,e.converter,mv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nw extends uI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new nw(e,t)}_apply(e){const t=function(s,a,c){if(s.startAt!==null)throw new Ee(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ee(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yd(a,c)}(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new ll(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function Bd(n,e="asc"){const t=e,r=tm("orderBy",n);return nw._create(r,t)}function o1(n,e,t){if(typeof(t=vn(t))=="string"){if(t==="")throw new Ee(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aC(e)&&t.indexOf("/")!==-1)throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(kt.fromString(t));if(!$e.isDocumentKey(r))throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Eb(n,new $e(r))}if(t instanceof yn)return Eb(n,t._key);throw new Ee(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Up(t)}.`)}function a1(n,e){if(!Array.isArray(n)||n.length===0)throw new Ee(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dI(n,e){const t=function(s,a){for(const c of s)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ee(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class c5{convertValue(e,t="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return sa(e,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[lp].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>cn(c.doubleValue));return new Zs(a)}convertGeoPoint(e){return new Js(cn(e.latitude),cn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Bp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(pd(e));default:return null}}convertTimestamp(e){const t=Xo(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=kt.fromString(e);It(jC(r),9688,{name:e});const s=new md(r.get(1),r.get(3)),a=new $e(r.popFirst(5));return s.isEqual(t)||Fi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class zu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $a extends lI{constructor(e,t,r,s,a,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(tm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=$a._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}$a._jsonSchemaVersion="firestore/documentSnapshot/1.0",$a._jsonSchema={type:gn("string",$a._jsonSchemaVersion),bundleSource:gn("string","DocumentSnapshot"),bundleName:gn("string"),bundle:gn("string")};class Uf extends $a{data(e={}){return super.data(e)}}class za{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new zu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Uf(this._firestore,this._userDataWriter,r.key,r,new zu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(u=>{const h=new Uf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new zu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const h=new Uf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new zu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,g=-1;return u.type!==0&&(p=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:d5(u.type),doc:h,oldIndex:p,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=za._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ex.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function d5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe(61501,{type:n})}}za._jsonSchemaVersion="firestore/querySnapshot/1.0",za._jsonSchema={type:gn("string",za._jsonSchemaVersion),bundleSource:gn("string","QuerySnapshot"),bundleName:gn("string"),bundle:gn("string")};class rw extends c5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,t)}}function Ft(n){n=Qs(n,Bi);const e=Qs(n.firestore,el),t=Gx(e),r=new rw(e);return cI(n._query),G6(t,n._query).then(s=>new za(e,r,n,s))}function pn(n,e,t,...r){n=Qs(n,yn);const s=Qs(n.firestore,el),a=Yx(s);let c;return c=typeof(e=vn(e))=="string"||e instanceof $d?s5(a,"updateDoc",n._key,e,t,r):r5(a,"updateDoc",n._key,e),sw(s,[c.toMutation(n._key,xs.exists(!0))])}function Dr(n){return sw(Qs(n.firestore,el),[new Px(n._key,xs.none())])}function bn(n,e){const t=Qs(n.firestore,el),r=Mt(n),s=u5(n.converter,e);return sw(t,[n5(Yx(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,xs.exists(!1))]).then(()=>r)}function oa(n,...e){var t,r,s;n=vn(n);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||i1(e[c])||(a=e[c++]);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(i1(e[c])){const y=e[c];e[c]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[c+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[c+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let h,p,g;if(n instanceof yn)p=Qs(n.firestore,el),g=jx(n._key.path),h={next:y=>{e[c]&&e[c](h5(p,n,y))},error:e[c+1],complete:e[c+2]};else{const y=Qs(n,Bi);p=Qs(y.firestore,el),g=y._query;const v=new rw(p);h={next:b=>{e[c]&&e[c](new za(p,v,y,b))},error:e[c+1],complete:e[c+2]},cI(n._query)}return function(v,b,S,w){const _=new eI(w),A=new WC(b,_,S);return v.asyncQueue.enqueueAndForget(async()=>BC(await Tv(v),A)),()=>{_.Ou(),v.asyncQueue.enqueueAndForget(async()=>qC(await Tv(v),A))}}(Gx(p),g,u,h)}function sw(n,e){return function(r,s){const a=new zo;return r.asyncQueue.enqueueAndForget(async()=>L6(await K6(r),s,a)),a.promise}(Gx(n),e)}function h5(n,e,t){const r=t.docs.get(e._key),s=new rw(n);return new $a(n,s,e._key,r,new zu(t.hasPendingWrites,t.fromCache),e.converter)}function l1(){return new Xx("serverTimestamp")}(function(e,t=!0){(function(s){Kc=s})(ol),Qa(new Qo("firestore",(r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new el(new i3(r.getProvider("auth-internal")),new l3(c,r.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ee(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new md(p.options.projectId,g)}(c,s),c);return a=Object.assign({useFetchStreams:t},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Hs(cb,ub,e),Hs(cb,ub,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="firebasestorage.googleapis.com",f5="storageBucket",p5=2*60*1e3,m5=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends li{constructor(e,t,r=0){super(ly(e),`Firebase Storage: ${t} (${ly(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ci.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ly(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var si;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(si||(si={}));function ly(n){return"storage/"+n}function g5(){const n="An unknown error occurred, please check the error payload for server response.";return new ci(si.UNKNOWN,n)}function y5(){return new ci(si.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v5(){return new ci(si.CANCELED,"User canceled the upload/download.")}function x5(n){return new ci(si.INVALID_URL,"Invalid URL '"+n+"'.")}function w5(n){return new ci(si.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function c1(n){return new ci(si.INVALID_ARGUMENT,n)}function fI(){return new ci(si.APP_DELETED,"The Firebase app was deleted.")}function _5(n){return new ci(si.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=vs.makeFromUrl(e,t)}catch{return new vs(e,"")}if(r.path==="")return r;throw w5(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),h={bucket:1,path:3};function p(L){L.path_=decodeURIComponent(L.path)}const g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",b=new RegExp(`^https?://${y}/${g}/b/${s}/o${v}`,"i"),S={bucket:1,path:3},w=t===hI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,_="([^?#]*)",A=new RegExp(`^https?://${w}/${s}/${_}`,"i"),C=[{regex:u,indices:h,postModify:a},{regex:b,indices:S,postModify:p},{regex:A,indices:{bucket:1,path:2},postModify:p}];for(let L=0;L<C.length;L++){const U=C[L],z=U.regex.exec(e);if(z){const R=z[U.indices.bucket];let k=z[U.indices.path];k||(k=""),r=new vs(R,k),U.postModify(r);break}}if(r==null)throw x5(e);return r}}class E5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(n,e,t){let r=1,s=null,a=null,c=!1,u=0;function h(){return u===2}let p=!1;function g(..._){p||(p=!0,e.apply(null,_))}function y(_){s=setTimeout(()=>{s=null,n(b,h())},_)}function v(){a&&clearTimeout(a)}function b(_,...A){if(p){v();return}if(_){v(),g.call(null,_,...A);return}if(h()||c){v(),g.call(null,_,...A);return}r<64&&(r*=2);let C;u===1?(u=2,C=0):C=(r+Math.random())*1e3,y(C)}let S=!1;function w(_){S||(S=!0,v(),!p&&(s!==null?(_||(u=2),clearTimeout(s),y(0)):_||(u=1)))}return y(0),a=setTimeout(()=>{c=!0,w(!0)},t),w}function S5(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(n){return n!==void 0}function u1(n,e,t,r){if(r<e)throw c1(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw c1(`Invalid value for '${n}'. Expected ${t} or less.`)}function T5(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var gp;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(gp||(gp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,t,r,s,a,c,u,h,p,g,y,v=!0,b=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,w)=>{this.resolve_=S,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new xf(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=u=>{const h=u.loaded,p=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const u=a.getErrorCode()===gp.NO_ERROR,h=a.getStatus();if(!u||C5(h,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===gp.ABORT;r(!1,new xf(!1,null,g));return}const p=this.successCodes_.indexOf(h)!==-1;r(!0,new xf(p,a))})},t=(r,s)=>{const a=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());N5(h)?a(h):a()}catch(h){c(h)}else if(u!==null){const h=g5();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(s.canceled){const h=this.appDelete_?fI():v5();c(h)}else{const h=y5();c(h)}};this.canceled_?t(!1,new xf(!1,null,!0)):this.backoffId_=b5(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&S5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xf{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function j5(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function A5(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function P5(n,e){e&&(n["X-Firebase-GMPID"]=e)}function R5(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function k5(n,e,t,r,s,a,c=!0,u=!1){const h=T5(n.urlParams),p=n.url+h,g=Object.assign({},n.headers);return P5(g,e),j5(g,t),A5(g,a),R5(g,r),new I5(p,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function D5(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,t){this._service=e,t instanceof vs?this._location=t:this._location=vs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new yp(e,t)}get root(){const e=new vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return D5(this._location.path)}get storage(){return this._service}get parent(){const e=O5(this._location.path);if(e===null)return null;const t=new vs(this._location.bucket,e);return new yp(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw _5(e)}}function d1(n,e){const t=e==null?void 0:e[f5];return t==null?null:vs.makeFromBucketSpec(t,n)}function L5(n,e,t,r={}){n.host=`${e}:${t}`;const s=il(e);s&&(ux(`https://${n.host}/b`),QN("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:pM(a,n.app.options.projectId))}class M5{constructor(e,t,r,s,a,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=hI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p5,this._maxUploadRetryTime=m5,this._requests=new Set,s!=null?this._bucket=vs.makeFromBucketSpec(s,this._host):this._bucket=d1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vs.makeFromBucketSpec(this._url,e):this._bucket=d1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){u1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){u1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yp(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new E5(fI());{const c=k5(e,this._appId,r,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const h1="@firebase/storage",f1="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="storage";function F5(n=ZN(),e){n=vn(n);const r=Dp(n,pI).getImmediate({identifier:e}),s=hM("storage");return s&&V5(r,...s),r}function V5(n,e,t,r={}){L5(n,e,t,r)}function U5(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new M5(t,r,s,e,ol)}function $5(){Qa(new Qo(pI,U5,"PUBLIC").setMultipleInstances(!0)),Hs(h1,f1,""),Hs(h1,f1,"esm2017")}$5();const z5={apiKey:"AIzaSyDUR89i6kvh3bp51GCgBX0fTwh3bFt1Ksg",authDomain:"medjust-d26eb.firebaseapp.com",projectId:"medjust-d26eb",storageBucket:"medjust-d26eb.appspot.com",messagingSenderId:"631362355665",appId:"1:631362355665:web:4d7f8eadba1bca0969e0f0"},iw=JN(z5),cy=ZV(iw),Ve=Y6(iw,{experimentalForceLongPolling:!0,useFetchStreams:!1});F5(iw);const mI=E.createContext(void 0);function ow(){const n=E.useContext(mI);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function B5({children:n}){const[e,t]=E.useState(null),[r,s]=E.useState(!0),[a,c]=E.useState(null),u=y=>new Promise(v=>setTimeout(v,y)),h=async(y,v)=>{if(typeof navigator<"u"&&!navigator.onLine){const _=new Error("No network connection (navigator offline)");throw console.error("Login pre-check failed:",_),c("No network connection - please connect to the internet"),_}const b=3;let S=0,w=null;for(;S<b;){S+=1;try{await FF(cy,y,v),c(null);return}catch(_){if(w=_,console.error(`Login attempt ${S} failed:`,_),!((_==null?void 0:_.code)==="auth/network-request-failed"||(_==null?void 0:_.message)&&_.message.toLowerCase().includes("fetch")))throw(_==null?void 0:_.code)==="auth/wrong-password"||(_==null?void 0:_.code)==="auth/user-not-found"?c("Invalid email or password"):c("Authentication error - see console for details"),_;if(c(`Network error (attempt ${S} of ${b}) - checking connection...`),S<b){const I=500*Math.pow(2,S-1);console.log(`Retrying login in ${I}ms...`),await u(I);continue}}}throw console.error("Login failed after retries:",w),c("Network error - unable to reach Firebase. Check your internet connection, disabling browser extensions (adblockers), or ensure your site domain is added to Firebase Authentication -> Authorized domains."),w},p=async()=>{try{await zF(cy),c(null)}catch(y){console.error("Logout error:",y),t(null)}};E.useEffect(()=>{const y=setTimeout(()=>{r&&(console.log("ðŸ”„ Auth taking too long - continuing without authentication"),s(!1))},5e3),v=$F(cy,b=>{clearTimeout(y),t(b),s(!1),c(null)},b=>{clearTimeout(y),console.error("Auth state change error:",b),c("Authentication error - working offline"),s(!1)});return()=>{clearTimeout(y),v()}},[]);const g={currentUser:e,login:h,logout:p,loading:r,authError:a};return l.jsx(mI.Provider,{value:g,children:!r&&n})}const q5=Cd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ne=E.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},a)=>{const c=r?qa:"button";return l.jsx(c,{className:et(q5({variant:e,size:t,className:n})),ref:a,...s})});ne.displayName="Button";const ye=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));ye.displayName="Card";const Ke=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("flex flex-col space-y-1.5 p-6",n),...e}));Ke.displayName="CardHeader";const Xe=E.forwardRef(({className:n,...e},t)=>l.jsx("h3",{ref:t,className:et("text-2xl font-semibold leading-none tracking-tight",n),...e}));Xe.displayName="CardTitle";const At=E.forwardRef(({className:n,...e},t)=>l.jsx("p",{ref:t,className:et("text-sm text-muted-foreground",n),...e}));At.displayName="CardDescription";const ve=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("p-6 pt-0",n),...e}));ve.displayName="CardContent";const W5=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("flex items-center p-6 pt-0",n),...e}));W5.displayName="CardFooter";class H5 extends _e.Component{constructor(t){super(t);k_(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.replace(window.location.href)});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),(t.message.includes("fetch")||t.message.includes("Firebase")||t.message.includes("Firestore"))&&console.log("ðŸ”„ Firebase error detected - this is a known connectivity issue"),this.setState({error:t,errorInfo:r})}render(){var t,r,s;if(this.state.hasError){const a=((t=this.state.error)==null?void 0:t.message.includes("fetch"))||((r=this.state.error)==null?void 0:r.message.includes("Firebase"))||((s=this.state.error)==null?void 0:s.message.includes("Firestore"));return l.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:l.jsxs(ye,{className:"max-w-md w-full",children:[l.jsx(Ke,{children:l.jsxs(Xe,{className:"flex items-center gap-2 text-destructive",children:[l.jsx(yk,{className:"h-5 w-5"}),a?"Connection Error":"Application Error"]})}),l.jsxs(ve,{className:"space-y-4",children:[l.jsx("p",{className:"text-muted-foreground",children:a?"There's a connectivity issue with Firebase services. The app will work in offline mode.":"Something went wrong. Please try refreshing the page."}),!1,l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(ne,{onClick:this.handleRetry,className:"flex-1",children:[l.jsx(pk,{className:"h-4 w-4 mr-2"}),"Retry"]}),l.jsx(ne,{variant:"outline",onClick:()=>window.location.href="/admin/years",className:"flex-1",children:"Go to Years"})]})]})]})})}return this.props.children}}var aw="Avatar",[K5,$B]=Ui(aw),[G5,gI]=K5(aw),yI=E.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,a]=E.useState("idle");return l.jsx(G5,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:l.jsx(We.span,{...r,ref:e})})});yI.displayName=aw;var vI="AvatarImage",xI=E.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...a}=n,c=gI(vI,t),u=Q5(r),h=Nn(p=>{s(p),c.onImageLoadingStatusChange(p)});return Yt(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?l.jsx(We.img,{...a,ref:e,src:r}):null});xI.displayName=vI;var wI="AvatarFallback",_I=E.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,a=gI(wI,t),[c,u]=E.useState(r===void 0);return E.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&a.imageLoadingStatus!=="loaded"?l.jsx(We.span,{...s,ref:e}):null});_I.displayName=wI;function Q5(n){const[e,t]=E.useState("idle");return Yt(()=>{if(!n){t("error");return}let r=!0;const s=new window.Image,a=c=>()=>{r&&t(c)};return t("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=n,()=>{r=!1}},[n]),e}var EI=yI,bI=xI,SI=_I;const Oc=E.forwardRef(({className:n,...e},t)=>l.jsx(EI,{ref:t,className:et("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));Oc.displayName=EI.displayName;const _d=E.forwardRef(({className:n,...e},t)=>l.jsx(bI,{ref:t,className:et("aspect-square h-full w-full",n),...e}));_d.displayName=bI.displayName;const Dc=E.forwardRef(({className:n,...e},t)=>l.jsx(SI,{ref:t,className:et("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));Dc.displayName=SI.displayName;const Y5=[{icon:uk,label:"Dashboard",path:"/admin"},{icon:qf,label:"News",path:"/admin/news"},{icon:gs,label:"Years",path:"/admin/years"},{icon:bc,label:"Users",path:"/admin/users"},{icon:bc,label:"Professors",path:"/admin/professors"},{icon:Hv,label:"Store",path:"/admin/store"},{icon:ti,label:"Orders",path:"/admin/orders"},{icon:ki,label:"Research",path:"/admin/research"},{icon:rd,label:"Maps",path:"/admin/maps"},{icon:IS,label:"Settings",path:"/admin/settings"}];function X5({isOpen:n}){return l.jsx("div",{className:et("fixed left-0 top-16 h-[calc(100vh-4rem)] bg-card border-r transition-all duration-300 z-40",n?"w-64":"w-16"),children:l.jsx("nav",{className:"p-4 space-y-2",children:Y5.map(e=>l.jsxs("div",{children:[l.jsxs(jE,{to:e.path,className:({isActive:t})=>et("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors","hover:bg-accent hover:text-accent-foreground",t&&"bg-primary text-primary-foreground hover:bg-primary/90",!n&&"justify-center"),children:[l.jsx(e.icon,{className:"h-5 w-5 flex-shrink-0"}),n&&l.jsx("span",{className:"font-medium",children:e.label})]}),e.children&&n&&l.jsx("div",{className:"ml-6 mt-2 space-y-1",children:e.children.map(t=>l.jsxs(jE,{to:t.path,className:({isActive:r})=>et("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm","hover:bg-accent hover:text-accent-foreground",r&&"bg-primary text-primary-foreground hover:bg-primary/90"),children:[l.jsx(t.icon,{className:"h-4 w-4 flex-shrink-0"}),l.jsx("span",{children:t.label})]},t.path))})]},e.path))})})}function J5(){var a;const[n,e]=E.useState(!0),{currentUser:t,logout:r}=ow(),s=async()=>{try{await r()}catch(c){console.error("Error logging out:",c)}};return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-card shadow-sm",children:l.jsxs("div",{className:"flex h-16 items-center px-4",children:[l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>e(!n),className:"mr-4",children:l.jsx(fk,{className:"h-5 w-5"})}),l.jsx("div",{className:"flex-1",children:l.jsx("h1",{className:"text-xl font-semibold text-primary",children:"MedJust Admin Dashboard"})}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Oc,{className:"h-8 w-8",children:l.jsx(Dc,{children:l.jsx(Ro,{className:"h-4 w-4"})})}),l.jsx("span",{className:"text-sm font-medium",children:((a=t==null?void 0:t.email)==null?void 0:a.split("@")[0])||"Admin"})]}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:s,className:"text-muted-foreground hover:text-destructive",children:l.jsx(hk,{className:"h-4 w-4"})})]})]})}),l.jsxs("div",{className:"flex",children:[l.jsx(X5,{isOpen:n}),l.jsx("main",{className:`flex-1 transition-all duration-300 ${n?"ml-64":"ml-16"}`,children:l.jsx("div",{className:"p-6",children:l.jsx($L,{})})})]})]})}const be=E.forwardRef(({className:n,type:e,...t},r)=>l.jsx("input",{type:e,className:et("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));be.displayName="Input";var Z5="Label",NI=E.forwardRef((n,e)=>l.jsx(We.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));NI.displayName=Z5;var TI=NI;const e$=Cd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),je=E.forwardRef(({className:n,...e},t)=>l.jsx(TI,{ref:t,className:et(e$(),n),...e}));je.displayName=TI.displayName;const t$=Cd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),CI=E.forwardRef(({className:n,variant:e,...t},r)=>l.jsx("div",{ref:r,role:"alert",className:et(t$({variant:e}),n),...t}));CI.displayName="Alert";const n$=E.forwardRef(({className:n,...e},t)=>l.jsx("h5",{ref:t,className:et("mb-1 font-medium leading-none tracking-tight",n),...e}));n$.displayName="AlertTitle";const II=E.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:et("text-sm [&_p]:leading-relaxed",n),...e}));II.displayName="AlertDescription";function r$(){const[n,e]=E.useState(""),[t,r]=E.useState(""),[s,a]=E.useState(""),[c,u]=E.useState(!1),{login:h,authError:p}=ow(),g=Bc(),y=async v=>{if(v.preventDefault(),!n||!t){a("Please fill in all fields");return}try{if(typeof navigator<"u"&&!navigator.onLine){a("No network connection. Please connect to the internet and try again.");return}a(""),u(!0),await h(n,t),g("/admin")}catch(b){console.error("Login error:",b),p?a(p):(b==null?void 0:b.code)==="auth/network-request-failed"?a("Network error - check your connection and try again."):(b==null?void 0:b.code)==="auth/wrong-password"||(b==null?void 0:b.code)==="auth/user-not-found"?a("Invalid email or password."):a("Failed to log in. Please check your credentials.")}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/20 flex items-center justify-center p-4",children:l.jsxs(ye,{className:"w-full max-w-md shadow-xl",children:[l.jsxs(Ke,{className:"space-y-1 text-center",children:[l.jsx("div",{className:"mx-auto w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-4",children:l.jsx(X_,{className:"h-6 w-6 text-primary-foreground"})}),l.jsx(Xe,{className:"text-2xl font-bold",children:"MedJust Admin"}),l.jsx(At,{children:"Sign in to access the admin dashboard"})]}),l.jsx(ve,{children:l.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s&&l.jsx(CI,{variant:"destructive",children:l.jsx(II,{children:s})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"email",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(Bf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(be,{id:"email",type:"email",placeholder:"MedAdmin@gmail.com",value:n,onChange:v=>e(v.target.value),className:"pl-10",required:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"password",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(X_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(be,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:t,onChange:v=>r(v.target.value),className:"pl-10",required:!0})]})]}),l.jsx(ne,{type:"submit",className:"w-full",disabled:c,children:c?l.jsxs(l.Fragment,{children:[l.jsx(sl,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}const s$=Cd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function on({className:n,variant:e,...t}){return l.jsx("div",{className:et(s$({variant:e}),n),...t})}function lw(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const p=Er(ot(Ve,"news"),Bd("updatedAt","desc")),g=oa(p,y=>{const v=[];y.forEach(b=>{var w,_;const S=b.data();v.push({id:b.id,title:S.title||"",content:S.content||"",imageUrl:S.imageUrl||"",videoUrl:S.videoUrl||"",createdAt:((w=S.createdAt)==null?void 0:w.toDate())||new Date,updatedAt:((_=S.updatedAt)==null?void 0:_.toDate())||new Date,authorName:S.authorName||"",authorId:S.newsId||b.id,tags:S.tags||[],isPinned:S.isPinned||!1,viewsCount:S.viewsCount||0,attachments:S.attachments||[],yearId:S.yearId||"",yearNumber:S.yearNumber||void 0})}),console.log(`âœ… Successfully loaded ${v.length} news articles from Firebase`),e(v),r(!1)},y=>{console.error("Error fetching news:",y),a(y.message||"Failed to fetch news from Firebase"),r(!1)});return()=>g()},[]),{news:n,loading:t,error:s,createNews:async p=>{try{console.log("ðŸ“ Creating news article:",p.title);const g={...p,createdAt:p.createdAt instanceof Date?yt.fromDate(p.createdAt):l1(),updatedAt:p.updatedAt instanceof Date?yt.fromDate(p.updatedAt):l1()};Object.keys(g).forEach(v=>{g[v]===void 0&&delete g[v]});const y=await bn(ot(Ve,"news"),g);console.log("âœ… News article created successfully with ID:",y.id)}catch(g){throw console.error("âŒ Error creating news:",g),console.error("Error details:",g.code,g.message),new Error(`Failed to create news article: ${g.message||"Check Firebase permissions"}`)}},updateNews:async(p,g)=>{try{const y={...g};g.createdAt instanceof Date&&(y.createdAt=yt.fromDate(g.createdAt)),g.updatedAt instanceof Date&&(y.updatedAt=yt.fromDate(g.updatedAt)),Object.keys(y).forEach(v=>{y[v]===void 0&&delete y[v]}),await pn(Mt(Ve,"news",p),y)}catch(y){throw console.error("Error updating news:",y),console.error("Error details:",y.code,y.message),new Error(`Failed to update news article: ${y.message||"Check Firebase permissions"}`)}},deleteNews:async p=>{try{await Dr(Mt(Ve,"news",p))}catch(g){throw console.error("Error deleting news:",g),console.error("Error details:",g.code,g.message),new Error(`Failed to delete news article: ${g.message||"Check Firebase permissions"}`)}}}}function jI(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1),h=[{id:"product1",productId:"product1",name:"Medical Textbook",description:"Comprehensive medical textbook for students",price:89.99,images:["https://example.com/book1.jpg"],categoryId:"books",createdAt:new Date},{id:"product2",productId:"product2",name:"Stethoscope",description:"Professional grade stethoscope",price:120,images:["https://example.com/stethoscope.jpg"],categoryId:"equipment",createdAt:new Date}];E.useEffect(()=>{(async()=>{const S=setTimeout(()=>{t&&!c&&(console.log("ðŸ”„ Firebase taking too long - switching to offline mode"),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h))},3e3);try{console.log("ðŸ”„ Fetching products from Firebase...");const w=await Ft(ot(Ve,"products")),_=[];w.forEach(A=>{var C;const I=A.data();_.push({id:A.id,productId:I.productId||A.id,name:I.name||"",description:I.description||"",price:I.price||0,types:I.types||(I.price?[{name:"Default",price:I.price}]:[]),images:I.images||[],categoryId:I.categoryId||"",createdAt:((C=I.createdAt)==null?void 0:C.toDate())||new Date})}),clearTimeout(S),e(_.sort((A,I)=>I.createdAt.getTime()-A.createdAt.getTime())),r(!1),a(null),console.log("âœ… Products loaded successfully:",_.length)}catch(w){clearTimeout(S),w.isFirebaseOfflineError?console.log("ðŸ”„ Firebase offline mode detected - using mock data"):console.error("Firebase error - switching to offline mode:",w.message),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h)}})()},[]);const p=async b=>{var S,w;if(c){const _={id:`product_${Date.now()}`,productId:`product_${Date.now()}`,...b,createdAt:new Date};e(A=>[_,...A]),console.log("âœ… Added product to offline mode:",_.name);return}try{const _={name:b.name,description:b.description,price:b.price||((w=(S=b.types)==null?void 0:S[0])==null?void 0:w.price)||0,types:b.types||(b.price?[{name:"Default",price:b.price}]:[]),images:b.images,categoryId:b.categoryId||"",createdAt:new Date,productId:""};console.log("ðŸ“ Creating new product:",_);const A=await bn(ot(Ve,"products"),_);await pn(A,{productId:A.id}),console.log("âœ… Created product with ID:",A.id),window.location.replace(window.location.href)}catch(_){console.error("Error creating product:",_),u(!0),await p(b)}};return{products:n,loading:t,error:s,isOfflineMode:c,createProduct:p,updateProduct:async(b,S)=>{var w;if(c){e(_=>_.map(A=>A.id===b?{...A,...S}:A)),console.log("âœ… Updated product in offline mode");return}try{const _=Mt(Ve,"products",b),A={...S};S.types&&(A.types=S.types,A.price=((w=S.types[0])==null?void 0:w.price)||S.price||0),await pn(_,A),console.log("âœ… Updated product in Firebase:",b),window.location.replace(window.location.href)}catch(_){console.error("Error updating product:",_)}},deleteProduct:async b=>{if(c){e(S=>S.filter(w=>w.id!==b)),console.log("âœ… Deleted product from offline mode");return}try{await Dr(Mt(Ve,"products",b)),console.log("âœ… Deleted product from Firebase:",b),window.location.replace(window.location.href)}catch(S){console.error("Error deleting product:",S)}},retryConnection:()=>{console.log("ðŸ”„ Retrying Firebase connection..."),r(!0),a(null),u(!1),window.location.replace(window.location.href)}}}const i$=[{id:"1",name:"Dr. Sarah Johnson",department:"Internal Medicine",email:"sarah.johnson@medjust.com",officeLocation:"Medical Building, Room 301",imageUrl:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=300&h=300&fit=crop&crop=face"},{id:"2",name:"Prof. Michael Chen",department:"Surgery",email:"michael.chen@medjust.com",officeLocation:"Surgical Wing, Room 205",imageUrl:"https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=300&h=300&fit=crop&crop=face"},{id:"3",name:"Dr. Emily Rodriguez",department:"Emergency Medicine",email:"emily.rodriguez@medjust.com",officeLocation:"Emergency Department, Office 12",imageUrl:"https://images.unsplash.com/photo-1594824928909-90ad1d93d7c3?w=300&h=300&fit=crop&crop=face"}];function AI(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1);E.useEffect(()=>{const y=async()=>{try{const b=Er(ot(Ve,"professors"));await Ft(b);const S=Er(ot(Ve,"professors"),Bd("name","asc"));return oa(S,_=>{const A=[];_.forEach(I=>{const C=I.data();A.push({id:I.id,name:C.name||"",title:C.title||"",department:C.department||"",email:C.email||"",phone:C.phone||"",officeLocation:C.officeLocation||"",bio:C.bio||"",researchAreas:C.researchAreas||[],website:C.website||"",linkedin:C.linkedin||"",imageUrl:C.imageUrl||""})}),e(A),r(!1)},_=>{console.error("Error in Firebase listener:",_),v()})}catch(b){return console.error("Firebase connection failed:",b),v(),null}},v=()=>{console.log("ðŸ”„ Switching to offline mode with mock data"),u(!0),e(i$),a(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(b=>[...b,v]),console.log("âœ… Added professor in offline mode:",v.name);return}try{await bn(ot(Ve,"professors"),{...y,professorId:`prof_${Date.now()}`}),console.log("âœ… Added professor to Firebase:",y.name)}catch(v){console.error("Error creating professor:",v),u(!0),await h(y)}};return{professors:n,loading:t,error:s,createProfessor:h,updateProfessor:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(b=>b.map(S=>S.id===y?{...S,...v}:S)),console.log("âœ… Updated professor in offline mode");return}try{await pn(Mt(Ve,"professors",y),v),console.log("âœ… Updated professor in Firebase")}catch(b){console.error("Error updating professor:",b),e(S=>S.map(w=>w.id===y?{...w,...v}:w)),console.log("âœ… Updated professor locally (Firebase failed)")}},deleteProfessor:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(b=>b.id!==y)),console.log("âœ… Deleted professor in offline mode");return}try{await Dr(Mt(Ve,"professors",y)),console.log("âœ… Deleted professor from Firebase")}catch(v){console.error("Error deleting professor:",v),e(b=>b.filter(S=>S.id!==y)),console.log("âœ… Deleted professor locally (Firebase failed)")}},isOfflineMode:c}}async function o$(){return(await Ft(ot(Ve,"batches"))).docs.map(e=>{const t=e.data();return{id:e.id,batchName:t.batch_name||t.batchName||"",imageUrl:t.image_url||t.imageUrl||"",aca_supervisor:t.aca_supervisor||t.acadmic_supervisor||t.academic_supervisor||"",cr:t.cr||"",actor:t.actor||"",group_link:t.group_link||t.groupUrl||t.group_url||"",ref:e.ref}})}async function a$(n){const e=n.map(async r=>{try{return(await Ft(ot(r.ref,"years"))).docs.map(a=>{const c=a.data();let u=c.order||1;if(c.name){const h=String(c.name).match(/\d+/);h&&(u=parseInt(h[0]))}return{id:a.id,yearNumber:u,name:c.name||c.title||"",type:u<=3?"basic":"clinical",batchName:r.batchName,imageUrl:c.imageUrl||c.image_url||"",academicSupervisor:c.aca_supervisor||c.acadmic_supervisor||c.academic_supervisor||"",actor:c.actor||"",cr:c.cr||"",groupUrl:c.group_link||c.group_url||c.groupUrl||"",subjects:[],batchId:r.id}})}catch(s){return console.warn("Failed to fetch years for batch",r.id,s),[]}});return(await Promise.all(e)).flat()}async function l$(){return(await Ft(ot(Ve,"Subjects"))).docs}async function c$(n){const t=(await Ft(ot(n.ref,"lectures"))).docs.map(async s=>{var v;const a=s.data(),[c,u,h]=await Promise.all([Ft(ot(s.ref,"videos")),Ft(ot(s.ref,"files")),Ft(ot(s.ref,"quizzes"))]),p=[];c.forEach(b=>{var w;const S=b.data();p.push({id:b.id,title:S.title||S.name||"",url:S.url||S.youtubeUrl||"",thumbnailUrl:S.thumbnailUrl||"",description:S.description||"",uploadedAt:((w=S.uploadedAt)==null?void 0:w.toDate())||new Date,youtubeUrl:S.youtubeUrl||S.url||""})});const g=[];u.forEach(b=>{var w;const S=b.data();g.push({id:b.id,title:S.title||S.name||"",url:S.fileUrl||S.url||"",description:S.description||"",uploadedAt:((w=S.uploadedAt)==null?void 0:w.toDate())||new Date,fileUrl:S.fileUrl||S.url||""})});const y=[];return h.forEach(b=>{const S=b.data();y.push({id:b.id,title:S.title||S.name||"",description:S.description||"",duration:S.duration||30,passRate:S.passRate||70,questions:S.questions||[]})}),{id:s.id,name:a.name||a.title||"",description:a.description||"",subjectId:n.id,order:a.order||1,imageUrl:a.imageUrl||"",createdAt:((v=a.createdAt)==null?void 0:v.toDate())||new Date,uploadedBy:a.uploadedBy||"Unknown",videos:p,files:g,quizzes:y}});return(await Promise.all(t)).sort((s,a)=>s.order-a.order)}async function u$(){const n=await l$(),e=10,t=[];for(let r=0;r<n.length;r+=e){const a=n.slice(r,r+e).map(async u=>{const h=u.data(),p=await c$(u);return{id:u.id,name:h.name||"",subjectId:h.subjectId||u.id,yearId:h.yearId||"",imageUrl:h.imageUrl||"",lectures:p}}),c=await Promise.all(a);t.push(...c)}return t}async function d$(){if(!navigator.onLine)throw new Error("No internet connection");const[n,e]=await Promise.all([o$().then(a$),u$()]),r=n.map(s=>({...s,subjects:e.filter(a=>a.yearId===s.id).sort((a,c)=>a.name.localeCompare(c.name))}));return{years:r.sort((s,a)=>s.yearNumber-a.yearNumber),batches:n.map(s=>({id:s.batchId||s.id,batchName:s.batchName,imageUrl:s.imageUrl||"",aca_supervisor:s.academicSupervisor||"",cr:s.cr||"",actor:s.actor||"",group_link:s.groupUrl||""})),subjects:r.flatMap(s=>s.subjects)}}function Xc(){const n=jN(),[e,t]=E.useState(!1),{data:r,isLoading:s,error:a,refetch:c}=JD({queryKey:["years-data"],queryFn:d$,staleTime:5*60*1e3,gcTime:30*60*1e3,retry:1,retryDelay:1e3,enabled:navigator.onLine&&!e}),u=(r==null?void 0:r.years)||[],h=(r==null?void 0:r.batches)||[],p=(r==null?void 0:r.subjects)||[],g=s,y=a?a.message:null;E.useEffect(()=>{navigator.onLine||t(!0)},[]),E.useEffect(()=>{const M=()=>{t(!1),n.invalidateQueries({queryKey:["years-data"]})},V=()=>{t(!0)};return window.addEventListener("online",M),window.addEventListener("offline",V),()=>{window.removeEventListener("online",M),window.removeEventListener("offline",V)}},[n]);const v=()=>{console.log("ï¿½ï¿½ï¿½ Retrying Firebase connection..."),setLoading(!0),setError(null),t(!1),setConnectionStatus("connecting"),setRetryCount(M=>M+1)},b=async(M,V)=>{if(M){if(e||!navigator.onLine){setYears(P=>P.map(H=>H.id===M?{...H,...V}:H));return}try{const P=qs(Ve,"years"),q=(await Ft(P)).docs.find(K=>K.id===M);if(q){await pn(q.ref,{...V,updatedAt:new Date}),n.invalidateQueries({queryKey:["years-data"]});return}setYears(K=>K.map(te=>te.id===M?{...te,...V}:te))}catch(P){console.error("Error updating year:",P),setYears(H=>H.map(q=>q.id===M?{...q,...V}:q))}}},S=async(M,V)=>{if(M){if(e||!navigator.onLine){setBatches(P=>P.map(H=>H.id===M?{...H,...V}:H));return}try{const P=Mt(Ve,"batches",M);await pn(P,{...V,updatedAt:new Date}),n.invalidateQueries({queryKey:["years-data"]})}catch(P){console.error("Failed to update batch:",P),setBatches(H=>H.map(q=>q.id===M?{...q,...V}:q))}}},w=async(M,V=3)=>{for(let P=0;P<V;P++)try{return await M()}catch(H){if(console.log(`Attempt ${P+1} failed:`,H.message),P===V-1)throw H;await new Promise(q=>setTimeout(q,1e3*(P+1)))}},_=async M=>{if(e||!navigator.onLine){const V={id:`subject_${Date.now()}`,name:M.name,subjectId:`subject_${Date.now()}`,yearId:M.yearId,imageUrl:M.imageUrl||"",lectures:[]};setSubjects(P=>[...P,V]),setYears(P=>P.map(H=>H.id===M.yearId?{...H,subjects:[...H.subjects,V]}:H)),console.log("âœ… Added subject to offline mode:",V.name);return}try{console.log("ðŸ”„ Creating subject with data:",M),await w(async()=>{const V={name:M.name,imageUrl:M.imageUrl||"",hours:M.hours||3,yearId:M.yearId,createdAt:yt.fromDate(new Date),updatedAt:yt.fromDate(new Date)};Object.keys(V).forEach(te=>{V[te]===void 0&&delete V[te]});const P=await bn(ot(Ve,"Subjects"),V);await pn(P,{subjectId:P.id}),console.log("âœ… Created new subject document:",P.id);const H=P,q=ot(H,"lectures");if((await Ft(q)).empty){const Q=await bn(q,{name:"Sample Lecture",title:"Sample Lecture",description:"",imageUrl:"",order:1,uploadedBy:"System",createdAt:new Date,lectureId:""});await pn(Q,{lectureId:Q.id});const oe=["videos","files","quizzes"];for(const le of oe){const B=ot(Q,le);let Z={};le==="videos"?Z={title:"Sample Video",description:"",thumbnailUrl:"",url:"",uploadedAt:new Date,videoId:""}:le==="files"?Z={title:"Sample File",description:"",url:"",uploadedAt:new Date,fileId:""}:le==="quizzes"&&(Z={title:"Sample Quiz",description:"",duration:30,passRate:70,questions:[],quizId:""});const he=await bn(B,Z),Ce=`${le.slice(0,-1)}Id`;await pn(he,{[Ce]:he.id})}console.log("âœ… Created complete lecture structure for subject:",H.id)}n.invalidateQueries({queryKey:["years-data"]})})}catch(V){console.error("Error creating subject:",V),t(!0),await _(M)}},A=async M=>{if(e){const V={id:`lecture_${Date.now()}`,...M};setSubjects(P=>P.map(H=>H.id===M.subjectId?{...H,lectures:[...H.lectures,V]}:H)),setYears(P=>P.map(H=>({...H,subjects:H.subjects.map(q=>q.id===M.subjectId?{...q,lectures:[...q.lectures,V]}:q)}))),console.log("âœ… Added lecture to offline mode:",V.name);return}try{await w(async()=>{const V=Mt(Ve,"Subjects",M.subjectId),P=ot(V,"lectures"),H={title:M.name,description:M.description||"",imageUrl:M.imageUrl||"",order:M.order||1,uploadedBy:M.uploadedBy||"Current User",createdAt:new Date,lectureId:""};console.log("ðŸ“ Creating lecture in subcollection:",H);const q=await bn(P,H);await pn(q,{lectureId:q.id}),console.log("âœ… Created lecture document with ID:",q.id),console.log("ðŸ“ Path: /Subjects/"+M.subjectId+"/lectures/"+q.id),n.invalidateQueries({queryKey:["years-data"]})})}catch(V){console.error("Error creating lecture:",V),t(!0),await A(M)}},I=async(M,V)=>{if(e){setYears(P=>P.map(H=>({...H,subjects:H.subjects.map(q=>({...q,lectures:q.lectures.map(K=>K.id===M?{...K,...V}:K)}))}))),console.log("âœ… Updated lecture in offline mode");return}try{console.log("ðŸ”„ Updating lecture:",M,V),await w(async()=>{const P=Er(qs(Ve,"lectures")),H=await Ft(P);let q=null;for(const te of H.docs)if(te.id===M){q=te.ref;break}if(!q)throw new Error(`Lecture ${M} not found`);const K={...V};K.name&&(K.title=K.name,delete K.name),Object.keys(K).forEach(te=>{K[te]===void 0&&delete K[te]}),K.createdAt instanceof Date&&(K.createdAt=yt.fromDate(K.createdAt)),K.updatedAt instanceof Date&&(K.updatedAt=yt.fromDate(K.updatedAt)),K.updatedAt||(K.updatedAt=yt.fromDate(new Date)),await pn(q,K),console.log("âœ… Updated lecture successfully:",M),n.invalidateQueries({queryKey:["years-data"]})})}catch(P){throw console.error("âŒ Error updating lecture:",P),console.error("Error details:",P.code,P.message),new Error(`Failed to update lecture: ${P.message||"Check Firebase permissions"}`)}},C=async(M,V)=>{if(e){setSubjects(P=>P.map(H=>H.id===M?{...H,lectures:H.lectures.filter(q=>q.id!==V)}:H)),setYears(P=>P.map(H=>({...H,subjects:H.subjects.map(q=>q.id===M?{...q,lectures:q.lectures.filter(K=>K.id!==V)}:q)}))),console.log("âœ… Deleted lecture from offline mode");return}try{const P=Mt(Ve,"Subjects",M),H=Mt(P,"lectures",V);await Dr(H),console.log("âœ… Deleted lecture from Firebase"),n.invalidateQueries({queryKey:["years-data"]})}catch(P){console.error("Error deleting lecture:",P)}},L=async M=>{if(M){if(e){setSubjects(V=>V.filter(P=>P.id!==M)),setYears(V=>V.map(P=>({...P,subjects:P.subjects.filter(H=>H.id!==M)}))),console.log("âœ… Deleted subject in offline mode");return}try{const V=Mt(Ve,"Subjects",M);await Dr(V),console.log("âœ… Deleted subject from Firebase"),n.invalidateQueries({queryKey:["years-data"]})}catch(V){console.error("Error deleting subject:",V)}}},U=async(M,V,P)=>{if(!(!M||!V)){if(e){setYears(H=>H.map(q=>({...q,subjects:q.subjects.map(K=>K.id===M?{...K,lectures:K.lectures.map(te=>te.id===V?{...te,videos:[...te.videos||[],{id:`video_${Date.now()}`,title:P.title,url:P.url,thumbnailUrl:P.thumbnailUrl||"",description:P.description||"",uploadedAt:new Date}]}:te)}:K)})));return}try{const H=Mt(Ve,"Subjects",M,"lectures",V);await bn(ot(H,"videos"),{title:P.title,description:P.description||"",url:P.url,duration:P.duration||"",thumbnailUrl:P.thumbnailUrl||"",platform:P.platform||"",uploadedAt:new Date,uploadedBy:"Current User"}),n.invalidateQueries({queryKey:["years-data"]})}catch(H){console.error("Error adding video:",H)}}},z=async(M,V,P)=>{if(!(!M||!V)){if(e){setYears(H=>H.map(q=>({...q,subjects:q.subjects.map(K=>K.id===M?{...K,lectures:K.lectures.map(te=>te.id===V?{...te,files:[...te.files||[],{id:`file_${Date.now()}`,title:P.title,fileUrl:P.fileUrl,url:P.fileUrl,description:P.description||"",uploadedAt:new Date}]}:te)}:K)})));return}try{const H=Mt(Ve,"Subjects",M,"lectures",V),q={title:P.title,description:P.description||"",fileUrl:P.fileUrl,url:P.fileUrl,fileType:P.fileType||"",fileSize:P.fileSize||"",uploadedAt:yt.fromDate(new Date),uploadedBy:"Current User"};Object.keys(q).forEach(K=>{q[K]===void 0&&delete q[K]}),await bn(ot(H,"files"),q),console.log("âœ… File added successfully:",P.title),n.invalidateQueries({queryKey:["years-data"]})}catch(H){throw console.error("âŒ Error adding file:",H),console.error("Error details:",H.code,H.message),new Error(`Failed to add file: ${H.message||"Check Firebase permissions"}`)}}},R=async(M,V,P)=>{if(!(!M||!V)){if(e){setYears(H=>H.map(q=>({...q,subjects:q.subjects.map(K=>K.id===M?{...K,lectures:K.lectures.map(te=>te.id===V?{...te,quizzes:[...te.quizzes||[],{id:`quiz_${Date.now()}`,title:P.title,description:P.description||"",duration:P.timeLimit||30,passRate:P.passingScore||70,questions:P.questions||[]}]}:te)}:K)})));return}try{const H=Mt(Ve,"Subjects",M,"lectures",V);await bn(ot(H,"quizzes"),{title:P.title,description:P.description||"",duration:P.timeLimit||30,passRate:P.passingScore||70,questions:P.questions||[],createdAt:new Date,uploadedBy:"Current User"}),n.invalidateQueries({queryKey:["years-data"]})}catch(H){console.error("Error adding quiz:",H)}}},k=async(M,V={})=>{const P=V.yearNumber||1,H=V.name||`Year ${P}`,q=V.type||(P<=3?"basic":"clinical");if(e||!navigator.onLine){const K={id:`year_${Date.now()}`,yearNumber:P,name:H,type:q,batchName:"",batchId:M||void 0,imageUrl:"",academicSupervisor:"",actor:"",cr:"",groupUrl:"",subjects:[]};setYears(te=>[...te,K]),M&&setBatches(te=>te.map(Q=>Q.id===M?{...Q}:Q)),console.log("âœ… Added year in offline mode:",K);return}try{await w(async()=>{if(M){const K=Mt(Ve,"batches",M),te=ot(K,"years"),Q=await bn(te,{name:H,order:P,imageUrl:"",batch_name:H,createdAt:new Date});try{await pn(Q,{yearId:Q.id})}catch{}}else{const K=ot(Ve,"years"),te=await bn(K,{name:H,order:P,imageUrl:"",batch_name:H,createdAt:new Date});try{await pn(te,{yearId:te.id})}catch{}}n.invalidateQueries({queryKey:["years-data"]})})}catch(K){console.error("Error creating year:",K),t(!0),await k(M,V)}};return{years:u,batches:h,subjects:p,loading:g,error:y,isOfflineMode:e,retryConnection:v,updateYear:b,updateBatch:S,createSubject:_,createLecture:A,updateLecture:I,createYear:k,createBatch:async(M={})=>{const V=M.batchName||"New Batch",P=M.imageUrl||"",H=M.cr||"",q=`batch_temp_${Date.now()}`,K={id:q,batchName:V,imageUrl:P,cr:H};if(setBatches(te=>[K,...te]),e||!navigator.onLine){console.log("âœ… Added batch in offline mode:",K);return}try{await w(async()=>{const te=ot(Ve,"batches"),Q=await bn(te,{batch_name:V,image_url:P,cr:H,createdAt:new Date});try{await pn(Q,{batchId:Q.id})}catch{}const oe={id:Q.id,batchName:V,imageUrl:P,cr:H};setBatches(le=>[oe,...le.filter(B=>B.id!==q)]),n.invalidateQueries({queryKey:["years-data"]})})}catch(te){console.error("Error creating batch:",te),setBatches(oe=>oe.filter(le=>le.id!==q)),t(!0);const Q={id:`batch_${Date.now()}`,batchName:V,imageUrl:P,cr:H};setBatches(oe=>[Q,...oe])}},deleteBatch:async(M,V={deleteYears:!0})=>{if(!M)return;const P=h,H=u;if(setBatches(q=>q.filter(K=>K.id!==M)),setYears(q=>q.filter(K=>(K.batchId||K.batchName)!==M)),e||!navigator.onLine){console.log("âœ… Removed batch in offline mode:",M);return}try{await w(async()=>{const q=Mt(Ve,"batches",M);if(V.deleteYears)try{const K=ot(q,"years"),te=await Ft(K);for(const Q of te.docs)await Dr(Q.ref)}catch{const te=qs(Ve,"years"),Q=await Ft(te);for(const oe of Q.docs){const le=oe.data();(le.batchId||le.batch_id)===M&&await Dr(oe.ref)}}else{const K=qs(Ve,"years"),te=await Ft(K);for(const Q of te.docs){const oe=Q.data();if((oe.batchId||oe.batch_id)===M)try{await pn(Q.ref,{batchId:null,batch_name:null})}catch{}}}await Dr(q),n.invalidateQueries({queryKey:["years-data"]})})}catch(q){throw console.error("Error deleting batch:",q),setBatches(P||[]),setYears(H||[]),q}},deleteLecture:C,deleteSubject:L,addVideo:U,addFile:z,addQuiz:R}}const h$=[{id:1,type:"news",title:"New cardiology study published",time:"2 hours ago",author:"Dr. Smith"},{id:2,type:"video",title:"Anatomy lecture uploaded",time:"4 hours ago",author:"Prof. Johnson"},{id:3,type:"quiz",title:"Pharmacology quiz created",time:"6 hours ago",author:"Dr. Brown"},{id:4,type:"product",title:"New stethoscope added to store",time:"1 day ago",author:"Admin"}];function f$(){const{news:n,loading:e}=lw(),{products:t,loading:r}=jI(),{professors:s,loading:a}=AI(),{years:c,loading:u}=Xc(),h=n.length,p=s.length,g=t.reduce((b,S)=>b+(S.price||0),0);c.reduce((b,S)=>b+S.subjects.reduce((w,_)=>w+_.lectures.reduce((A,I)=>{var C;return A+(((C=I.videos)==null?void 0:C.length)||0)},0),0),0);const y=c.reduce((b,S)=>{var w;return b+(((w=S.subjects)==null?void 0:w.length)||0)},0),v=[{title:"Total News Articles",value:e?"...":String(h),change:"+12%",icon:qf,color:"text-blue-600"},{title:"Subjects",value:u?"...":String(y),change:"+5%",icon:gs,color:"text-green-600"},{title:"Active Professors",value:a?"...":String(p),change:"+2%",icon:bc,color:"text-purple-600"},{title:"Store Revenue",value:r?"...":`$${g.toLocaleString()}`,change:"+18%",icon:TS,color:"text-emerald-600"}];return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),l.jsx("p",{className:"text-muted-foreground",children:"Welcome to the MedJust Admin Dashboard"})]}),l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:v.map(b=>l.jsxs(ye,{children:[l.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Xe,{className:"text-sm font-medium",children:b.title}),l.jsx(b.icon,{className:`h-4 w-4 ${b.color}`})]}),l.jsxs(ve,{children:[l.jsx("div",{className:"text-2xl font-bold",children:b.value}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[l.jsxs(on,{variant:"secondary",className:"text-green-600",children:[l.jsx(gk,{className:"h-3 w-3 mr-1"}),b.change]}),l.jsx("span",{className:"text-muted-foreground",children:"from last month"})]})]})]},b.title))}),l.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Recent Activity"}),l.jsx(At,{children:"Latest updates across all modules"})]}),l.jsx(ve,{children:l.jsx("div",{className:"space-y-4",children:h$.map(b=>l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium",children:b.title}),l.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[l.jsx("span",{children:b.author}),l.jsx("span",{children:"â€¢"}),l.jsx("span",{children:b.time})]})]})]},b.id))})})]}),l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Quick Actions"}),l.jsx(At,{children:"Common administrative tasks"})]}),l.jsx(ve,{children:l.jsxs("div",{className:"grid gap-2",children:[l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(qf,{className:"h-5 w-5 text-blue-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Create News Article"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Publish new content"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(Ws,{className:"h-5 w-5 text-green-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Upload Video"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Add learning resource"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(bc,{className:"h-5 w-5 text-purple-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Professor"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Register new faculty"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[l.jsx(Hv,{className:"h-5 w-5 text-emerald-600"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Add Product"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Expand store catalog"})]})]})]})})]})]})]})}const ei=E.forwardRef(({className:n,...e},t)=>l.jsx("textarea",{className:et("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));ei.displayName="Textarea";function PI(n){const e=E.useRef({value:n,previous:n});return E.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var cw="Switch",[p$,zB]=Ui(cw),[m$,g$]=p$(cw),RI=E.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:s,defaultChecked:a,required:c,disabled:u,value:h="on",onCheckedChange:p,...g}=n,[y,v]=E.useState(null),b=bt(e,I=>v(I)),S=E.useRef(!1),w=y?!!y.closest("form"):!0,[_=!1,A]=Wa({prop:s,defaultProp:a,onChange:p});return l.jsxs(m$,{scope:t,checked:_,disabled:u,children:[l.jsx(We.button,{type:"button",role:"switch","aria-checked":_,"aria-required":c,"data-state":DI(_),"data-disabled":u?"":void 0,disabled:u,value:h,...g,ref:b,onClick:Ue(n.onClick,I=>{A(C=>!C),w&&(S.current=I.isPropagationStopped(),S.current||I.stopPropagation())})}),w&&l.jsx(y$,{control:y,bubbles:!S.current,name:r,value:h,checked:_,required:c,disabled:u,style:{transform:"translateX(-100%)"}})]})});RI.displayName=cw;var kI="SwitchThumb",OI=E.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,s=g$(kI,t);return l.jsx(We.span,{"data-state":DI(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});OI.displayName=kI;var y$=n=>{const{control:e,checked:t,bubbles:r=!0,...s}=n,a=E.useRef(null),c=PI(t),u=YS(e);return E.useEffect(()=>{const h=a.current,p=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==t&&y){const v=new Event("click",{bubbles:r});y.call(h,t),h.dispatchEvent(v)}},[c,t,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:a,style:{...n.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function DI(n){return n?"checked":"unchecked"}var LI=RI,v$=OI;const MI=E.forwardRef(({className:n,...e},t)=>l.jsx(LI,{className:et("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:l.jsx(v$,{className:et("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));MI.displayName=LI.displayName;function x$({news:n,onClose:e,onSave:t}){var _,A,I;const{years:r}=Xc(),[s,a]=E.useState(null),[c,u]=E.useState({title:"",content:"",imageUrl:"",videoUrl:"",tags:[],isPinned:!1,attachments:[],yearId:"",subjectId:""}),[h,p]=E.useState(""),[g,y]=E.useState(!1);E.useEffect(()=>{n&&u({title:n.title||"",content:n.content||"",imageUrl:n.imageUrl||"",videoUrl:n.videoUrl||"",tags:n.tags||[],isPinned:n.isPinned||!1,attachments:n.attachments||[],yearId:n.yearId||"",subjectId:n.subjectId||""})},[n]),E.useEffect(()=>{let C=!0;return(async()=>{try{if(r&&r.length>0||s)return;const U=await Ft(qs(Ve,"years")),z=[];U.forEach(R=>{const k=R.data();let D=k.order||1;if(k.name){const O=String(k.name).match(/\d+/);O&&(D=parseInt(O[0]))}z.push({id:R.id,yearNumber:D,type:D<=3?"basic":"clinical",subjects:k.subjects||[]})}),C&&z.length>0&&a(z)}catch{}})(),()=>{C=!1}},[r,s]);const v=async C=>{C.preventDefault(),y(!0);try{const L={...c,yearNumber:void 0,updatedAt:new Date,...n?{}:{createdAt:new Date,authorName:"Current User",authorId:"current-user-id",viewsCount:0}};if(c.yearId){const U=r.find(z=>z.id===c.yearId);U&&(L.yearNumber=U.yearNumber)}c.subjectId&&(L.subjectId=c.subjectId),t(L)}catch(L){console.error("Error saving news:",L)}finally{y(!1)}},b=()=>{h.trim()&&!c.tags.includes(h.trim())&&(u(C=>({...C,tags:[...C.tags,h.trim()]})),p(""))},S=C=>{u(L=>({...L,tags:L.tags.filter(U=>U!==C)}))},w=C=>{C.key==="Enter"&&(C.preventDefault(),b())};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:e,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Article":"Create Article"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the news article details":"Create a new news article for medical students"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(MI,{id:"pinned",checked:c.isPinned,onCheckedChange:C=>u(L=>({...L,isPinned:C}))}),l.jsxs(je,{htmlFor:"pinned",className:"flex items-center gap-2",children:[l.jsx(CS,{className:"h-4 w-4"}),"Pin Article"]})]})})]}),l.jsx("form",{onSubmit:v,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Article Content"}),l.jsx(At,{children:"Main article information and content"})]}),l.jsxs(ve,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"title",children:"Title *"}),l.jsx(be,{id:"title",placeholder:"Enter article title...",value:c.title,onChange:C=>u(L=>({...L,title:C.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"content",children:"Content *"}),l.jsx(ei,{id:"content",placeholder:"Write your article content here...",value:c.content,onChange:C=>u(L=>({...L,content:C.target.value})),rows:12,required:!0})]})]})]}),l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Tags"}),l.jsx(At,{children:"Add relevant tags to help categorize this article"})]}),l.jsxs(ve,{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(be,{placeholder:"Add a tag...",value:h,onChange:C=>p(C.target.value),onKeyPress:w}),l.jsxs(ne,{type:"button",onClick:b,variant:"outline",children:[l.jsx(Gu,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.tags.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(C=>l.jsxs(on,{variant:"secondary",className:"flex items-center gap-1",children:[C,l.jsx("button",{type:"button",onClick:()=>S(C),className:"ml-1 hover:text-destructive",children:l.jsx(Sc,{className:"h-3 w-3"})})]},C))})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Media"}),l.jsx(At,{children:"Add images and videos to your article"})]}),l.jsxs(ve,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"imageUrl",children:"Featured Image URL"}),l.jsx(be,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:C=>u(L=>({...L,imageUrl:C.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"videoUrl",children:"Video URL"}),l.jsx(be,{id:"videoUrl",placeholder:"https://youtube.com/watch?v=...",value:c.videoUrl,onChange:C=>u(L=>({...L,videoUrl:C.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"yearId",children:"Related Year"}),l.jsxs("select",{id:"yearId",value:c.yearId,onChange:C=>u(L=>({...L,yearId:C.target.value,subjectId:""})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific year --"}),(s&&s.length>0?s:r)&&(s&&s.length>0?s:r).length>0?(s&&s.length>0?s:r).map(C=>l.jsx("option",{value:C.id,children:`Year ${C.yearNumber}`},C.id)):l.jsx("option",{value:"",children:"No years available"})]})]}),c.yearId&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(je,{htmlFor:"subjectId",children:"Related Subject"}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected year: ",(_=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))!=null&&_.yearNumber?`Year ${(A=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:A.yearNumber}`:""]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("select",{id:"subjectId",value:c.subjectId,onChange:C=>u(L=>({...L,subjectId:C.target.value})),className:"flex-1 border rounded px-3 py-2",children:[l.jsx("option",{value:"",children:"-- Not related to a specific subject --"}),(((I=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:I.subjects)||[]).map(C=>l.jsx("option",{value:C.id,children:C.name},C.id))]}),l.jsx(ne,{type:"button",variant:"outline",size:"sm",onClick:()=>{var C;(C=navigator.clipboard)==null||C.writeText(c.yearId||""),alert("Year id copied")},children:"Copy ID"})]})]}),c.imageUrl&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{children:"Preview"}),l.jsx("img",{src:c.imageUrl,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border",onError:C=>{C.currentTarget.style.display="none"}})]})]})]}),l.jsxs(ye,{children:[l.jsx(Ke,{children:l.jsx(Xe,{children:"Actions"})}),l.jsxs(ve,{className:"space-y-4",children:[l.jsxs(ne,{type:"submit",className:"w-full",disabled:g,children:[l.jsx(na,{className:"h-4 w-4 mr-2"}),g?"Saving...":n?"Update Article":"Create Article"]}),l.jsx(ne,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Cancel"})]})]})]})]})})]})}function w$(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,a]=E.useState(!1),[c,u]=E.useState("all"),{news:h,loading:p,error:g,createNews:y,updateNews:v,deleteNews:b}=lw(),S=h.filter(I=>I.title.toLowerCase().includes(n.toLowerCase())||I.tags.some(C=>C.toLowerCase().includes(n.toLowerCase()))),w=I=>{r(I),a(!0)},_=async I=>{if(window.confirm("Are you sure you want to delete this article?"))try{await b(I)}catch(C){console.error("Error deleting news:",C),alert("Failed to delete article. Please try again.")}},A=()=>{r(null),a(!0)};return s?l.jsx(x$,{news:t,onClose:()=>{a(!1),r(null)},onSave:async I=>{try{t?await v(t.id,I):await y(I),a(!1),r(null)}catch(C){console.error("Error saving news:",C),alert("Failed to save article. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"News Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Create and manage news articles for medical students"})]}),l.jsxs(ne,{onClick:A,className:"flex items-center gap-2",children:[l.jsx(Zt,{className:"h-4 w-4"}),"Create Article"]})]}),l.jsx(ye,{children:l.jsx(ve,{className:"pt-6",children:l.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(be,{placeholder:"Search articles by title or tags...",value:n,onChange:I=>e(I.target.value),className:"pl-10"})]})})})}),p&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx(sl,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading news articles..."})]})}),g&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading news"}),l.jsx("p",{className:"text-muted-foreground",children:g})]})}),!p&&!g&&l.jsx("div",{className:"space-y-4",children:S.map(I=>l.jsx(ye,{className:"hover:shadow-md transition-shadow",children:l.jsx(ve,{className:"pt-6",children:l.jsxs("div",{className:"flex gap-4",children:[I.imageUrl&&l.jsx("img",{src:I.imageUrl,alt:I.title,className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:I.title}),I.isPinned&&l.jsx(CS,{className:"h-4 w-4 text-yellow-500"})]}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:I.content}),l.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:I.tags.map(C=>l.jsxs(on,{variant:"secondary",className:"text-xs",children:[l.jsx(Gu,{className:"h-3 w-3 mr-1"}),C]},C))}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ro,{className:"h-3 w-3"}),I.authorName]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(SS,{className:"h-3 w-3"}),I.createdAt.toLocaleDateString()]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(lk,{className:"h-3 w-3"}),I.viewsCount," views"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>w(I),children:l.jsx(Ai,{className:"h-4 w-4"})}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>_(I.id),className:"text-destructive hover:text-destructive",children:l.jsx(Vn,{className:"h-4 w-4"})})]})]})})]})})},I.id))}),!p&&!g&&S.length===0&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx(qf,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No articles match your search criteria.":"Start by creating your first news article."}),l.jsxs(ne,{onClick:A,children:[l.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Create Article"]})]})})]})}function _$(n,e){const t=E.createContext(e),r=a=>{const{children:c,...u}=a,h=E.useMemo(()=>u,Object.values(u));return l.jsx(t.Provider,{value:h,children:c})};r.displayName=n+"Provider";function s(a){const c=E.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[r,s]}function E$(n,e=[]){let t=[];function r(a,c){const u=E.createContext(c),h=t.length;t=[...t,c];const p=y=>{var A;const{scope:v,children:b,...S}=y,w=((A=v==null?void 0:v[n])==null?void 0:A[h])||u,_=E.useMemo(()=>S,Object.values(S));return l.jsx(w.Provider,{value:_,children:b})};p.displayName=a+"Provider";function g(y,v){var w;const b=((w=v==null?void 0:v[n])==null?void 0:w[h])||u,S=E.useContext(b);if(S)return S;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[p,g]}const s=()=>{const a=t.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[n])||a;return E.useMemo(()=>({[`__scope${n}`]:{...u,[n]:h}}),[u,h])}};return s.scopeName=n,[r,b$(s,...e)]}function b$(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:p})=>{const y=h(a)[`__scope${p}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var uy="focusScope.autoFocusOnMount",dy="focusScope.autoFocusOnUnmount",p1={bubbles:!1,cancelable:!0},S$="FocusScope",uw=E.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...c}=n,[u,h]=E.useState(null),p=Nn(s),g=Nn(a),y=E.useRef(null),v=bt(e,w=>h(w)),b=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let w=function(C){if(b.paused||!u)return;const L=C.target;u.contains(L)?y.current=L:xo(y.current,{select:!0})},_=function(C){if(b.paused||!u)return;const L=C.relatedTarget;L!==null&&(u.contains(L)||xo(y.current,{select:!0}))},A=function(C){if(document.activeElement===document.body)for(const U of C)U.removedNodes.length>0&&xo(u)};document.addEventListener("focusin",w),document.addEventListener("focusout",_);const I=new MutationObserver(A);return u&&I.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",_),I.disconnect()}}},[r,u,b.paused]),E.useEffect(()=>{if(u){g1.add(b);const w=document.activeElement;if(!u.contains(w)){const A=new CustomEvent(uy,p1);u.addEventListener(uy,p),u.dispatchEvent(A),A.defaultPrevented||(N$(A$(FI(u)),{select:!0}),document.activeElement===w&&xo(u))}return()=>{u.removeEventListener(uy,p),setTimeout(()=>{const A=new CustomEvent(dy,p1);u.addEventListener(dy,g),u.dispatchEvent(A),A.defaultPrevented||xo(w??document.body,{select:!0}),u.removeEventListener(dy,g),g1.remove(b)},0)}}},[u,p,g,b]);const S=E.useCallback(w=>{if(!t&&!r||b.paused)return;const _=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,A=document.activeElement;if(_&&A){const I=w.currentTarget,[C,L]=T$(I);C&&L?!w.shiftKey&&A===L?(w.preventDefault(),t&&xo(C,{select:!0})):w.shiftKey&&A===C&&(w.preventDefault(),t&&xo(L,{select:!0})):A===I&&w.preventDefault()}},[t,r,b.paused]);return l.jsx(We.div,{tabIndex:-1,...c,ref:v,onKeyDown:S})});uw.displayName=S$;function N$(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(xo(r,{select:e}),document.activeElement!==t)return}function T$(n){const e=FI(n),t=m1(e,n),r=m1(e.reverse(),n);return[t,r]}function FI(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function m1(n,e){for(const t of n)if(!C$(t,{upTo:e}))return t}function C$(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function I$(n){return n instanceof HTMLInputElement&&"select"in n}function xo(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&I$(n)&&e&&n.select()}}var g1=j$();function j$(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=y1(n,e),n.unshift(e)},remove(e){var t;n=y1(n,e),(t=n[0])==null||t.resume()}}}function y1(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function A$(n){return n.filter(e=>e.tagName!=="A")}function P$(n,e){return E.useReducer((t,r)=>e[t][r]??t,n)}var rm=n=>{const{present:e,children:t}=n,r=R$(e),s=typeof t=="function"?t({present:r.isPresent}):E.Children.only(t),a=bt(r.ref,k$(s));return typeof t=="function"||r.isPresent?E.cloneElement(s,{ref:a}):null};rm.displayName="Presence";function R$(n){const[e,t]=E.useState(),r=E.useRef({}),s=E.useRef(n),a=E.useRef("none"),c=n?"mounted":"unmounted",[u,h]=P$(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const p=wf(r.current);a.current=u==="mounted"?p:"none"},[u]),Yt(()=>{const p=r.current,g=s.current;if(g!==n){const v=a.current,b=wf(p);n?h("MOUNT"):b==="none"||(p==null?void 0:p.display)==="none"?h("UNMOUNT"):h(g&&v!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,h]),Yt(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,y=b=>{const w=wf(r.current).includes(b.animationName);if(b.target===e&&w&&(h("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},v=b=>{b.target===e&&(a.current=wf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(p=>{p&&(r.current=getComputedStyle(p)),t(p)},[])}}function wf(n){return(n==null?void 0:n.animationName)||"none"}function k$(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var hy=0;function O$(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??v1()),document.body.insertAdjacentElement("beforeend",n[1]??v1()),hy++,()=>{hy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),hy--}},[])}function v1(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var td="right-scroll-bar-position",nd="width-before-scroll-bar",D$="with-scroll-bars-hidden",L$="--removed-body-scroll-bar-size";function fy(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function M$(n,e){var t=E.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var F$=typeof window<"u"?E.useLayoutEffect:E.useEffect,x1=new WeakMap;function VI(n,e){var t=M$(null,function(r){return n.forEach(function(s){return fy(s,r)})});return F$(function(){var r=x1.get(t);if(r){var s=new Set(r),a=new Set(n),c=t.current;s.forEach(function(u){a.has(u)||fy(u,null)}),a.forEach(function(u){s.has(u)||fy(u,c)})}x1.set(t,n)},[n]),t}function V$(n){return n}function U$(n,e){e===void 0&&(e=V$);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var c=e(a,r);return t.push(c),function(){t=t.filter(function(u){return u!==c})}},assignSyncMedium:function(a){for(r=!0;t.length;){var c=t;t=[],c.forEach(a)}t={push:function(u){return a(u)},filter:function(){return t}}},assignMedium:function(a){r=!0;var c=[];if(t.length){var u=t;t=[],u.forEach(a),c=t}var h=function(){var g=c;c=[],g.forEach(a)},p=function(){return Promise.resolve().then(h)};p(),t={push:function(g){c.push(g),p()},filter:function(g){return c=c.filter(g),t}}}};return s}function UI(n){n===void 0&&(n={});var e=U$(null);return e.options=Xn({async:!0,ssr:!1},n),e}var $I=function(n){var e=n.sideCar,t=qc(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,Xn({},t))};$I.isSideCarExport=!0;function zI(n,e){return n.useMedium(e),$I}var BI=UI(),py=function(){},sm=E.forwardRef(function(n,e){var t=E.useRef(null),r=E.useState({onScrollCapture:py,onWheelCapture:py,onTouchMoveCapture:py}),s=r[0],a=r[1],c=n.forwardProps,u=n.children,h=n.className,p=n.removeScrollBar,g=n.enabled,y=n.shards,v=n.sideCar,b=n.noIsolation,S=n.inert,w=n.allowPinchZoom,_=n.as,A=_===void 0?"div":_,I=n.gapMode,C=qc(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=v,U=VI([t,e]),z=Xn(Xn({},C),s);return E.createElement(E.Fragment,null,g&&E.createElement(L,{sideCar:BI,removeScrollBar:p,shards:y,noIsolation:b,inert:S,setCallbacks:a,allowPinchZoom:!!w,lockRef:t,gapMode:I}),c?E.cloneElement(E.Children.only(u),Xn(Xn({},z),{ref:U})):E.createElement(A,Xn({},z,{className:h,ref:U}),u))});sm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sm.classNames={fullWidth:nd,zeroRight:td};var $$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function z$(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=$$();return e&&n.setAttribute("nonce",e),n}function B$(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function q$(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var W$=function(){var n=0,e=null;return{add:function(t){n==0&&(e=z$())&&(B$(e,t),q$(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},H$=function(){var n=W$();return function(e,t){E.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},dw=function(){var n=H$(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},K$={left:0,top:0,right:0,gap:0},my=function(n){return parseInt(n||"",10)||0},G$=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[my(t),my(r),my(s)]},Q$=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return K$;var e=G$(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},Y$=dw(),uc="data-scroll-locked",X$=function(n,e,t,r){var s=n.left,a=n.top,c=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(D$,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(uc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(td,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(nd,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(td," .").concat(td,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(nd," .").concat(nd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(uc,`] {
    `).concat(L$,": ").concat(u,`px;
  }
`)},w1=function(){var n=parseInt(document.body.getAttribute(uc)||"0",10);return isFinite(n)?n:0},J$=function(){E.useEffect(function(){return document.body.setAttribute(uc,(w1()+1).toString()),function(){var n=w1()-1;n<=0?document.body.removeAttribute(uc):document.body.setAttribute(uc,n.toString())}},[])},qI=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;J$();var a=E.useMemo(function(){return Q$(s)},[s]);return E.createElement(Y$,{styles:X$(a,!e,s,t?"":"!important")})},Iv=!1;if(typeof window<"u")try{var _f=Object.defineProperty({},"passive",{get:function(){return Iv=!0,!0}});window.addEventListener("test",_f,_f),window.removeEventListener("test",_f,_f)}catch{Iv=!1}var Gl=Iv?{passive:!1}:!1,Z$=function(n){return n.tagName==="TEXTAREA"},WI=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Z$(n)&&t[e]==="visible")},ez=function(n){return WI(n,"overflowY")},tz=function(n){return WI(n,"overflowX")},_1=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=HI(n,r);if(s){var a=KI(n,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},nz=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},rz=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},HI=function(n,e){return n==="v"?ez(e):tz(e)},KI=function(n,e){return n==="v"?nz(e):rz(e)},sz=function(n,e){return n==="h"&&e==="rtl"?-1:1},iz=function(n,e,t,r,s){var a=sz(n,window.getComputedStyle(e).direction),c=a*r,u=t.target,h=e.contains(u),p=!1,g=c>0,y=0,v=0;do{var b=KI(n,u),S=b[0],w=b[1],_=b[2],A=w-_-a*S;(S||A)&&HI(n,u)&&(y+=A,v+=S),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(y)<1||!g&&Math.abs(v)<1)&&(p=!0),p},Ef=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},E1=function(n){return[n.deltaX,n.deltaY]},b1=function(n){return n&&"current"in n?n.current:n},oz=function(n,e){return n[0]===e[0]&&n[1]===e[1]},az=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},lz=0,Ql=[];function cz(n){var e=E.useRef([]),t=E.useRef([0,0]),r=E.useRef(),s=E.useState(lz++)[0],a=E.useState(dw)[0],c=E.useRef(n);E.useEffect(function(){c.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var w=nT([n.lockRef.current],(n.shards||[]).map(b1),!0).filter(Boolean);return w.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=E.useCallback(function(w,_){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!c.current.allowPinchZoom;var A=Ef(w),I=t.current,C="deltaX"in w?w.deltaX:I[0]-A[0],L="deltaY"in w?w.deltaY:I[1]-A[1],U,z=w.target,R=Math.abs(C)>Math.abs(L)?"h":"v";if("touches"in w&&R==="h"&&z.type==="range")return!1;var k=_1(R,z);if(!k)return!0;if(k?U=R:(U=R==="v"?"h":"v",k=_1(R,z)),!k)return!1;if(!r.current&&"changedTouches"in w&&(C||L)&&(r.current=U),!U)return!0;var D=r.current||U;return iz(D,_,w,D==="h"?C:L)},[]),h=E.useCallback(function(w){var _=w;if(!(!Ql.length||Ql[Ql.length-1]!==a)){var A="deltaY"in _?E1(_):Ef(_),I=e.current.filter(function(U){return U.name===_.type&&(U.target===_.target||_.target===U.shadowParent)&&oz(U.delta,A)})[0];if(I&&I.should){_.cancelable&&_.preventDefault();return}if(!I){var C=(c.current.shards||[]).map(b1).filter(Boolean).filter(function(U){return U.contains(_.target)}),L=C.length>0?u(_,C[0]):!c.current.noIsolation;L&&_.cancelable&&_.preventDefault()}}},[]),p=E.useCallback(function(w,_,A,I){var C={name:w,delta:_,target:A,should:I,shadowParent:uz(A)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(L){return L!==C})},1)},[]),g=E.useCallback(function(w){t.current=Ef(w),r.current=void 0},[]),y=E.useCallback(function(w){p(w.type,E1(w),w.target,u(w,n.lockRef.current))},[]),v=E.useCallback(function(w){p(w.type,Ef(w),w.target,u(w,n.lockRef.current))},[]);E.useEffect(function(){return Ql.push(a),n.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,Gl),document.addEventListener("touchmove",h,Gl),document.addEventListener("touchstart",g,Gl),function(){Ql=Ql.filter(function(w){return w!==a}),document.removeEventListener("wheel",h,Gl),document.removeEventListener("touchmove",h,Gl),document.removeEventListener("touchstart",g,Gl)}},[]);var b=n.removeScrollBar,S=n.inert;return E.createElement(E.Fragment,null,S?E.createElement(a,{styles:az(s)}):null,b?E.createElement(qI,{gapMode:n.gapMode}):null)}function uz(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const dz=zI(BI,cz);var GI=E.forwardRef(function(n,e){return E.createElement(sm,Xn({},n,{ref:e,sideCar:dz}))});GI.classNames=sm.classNames;var hz=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Yl=new WeakMap,bf=new WeakMap,Sf={},gy=0,QI=function(n){return n&&(n.host||QI(n.parentNode))},fz=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=QI(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},pz=function(n,e,t,r){var s=fz(e,Array.isArray(n)?n:[n]);Sf[t]||(Sf[t]=new WeakMap);var a=Sf[t],c=[],u=new Set,h=new Set(s),p=function(y){!y||u.has(y)||(u.add(y),p(y.parentNode))};s.forEach(p);var g=function(y){!y||h.has(y)||Array.prototype.forEach.call(y.children,function(v){if(u.has(v))g(v);else try{var b=v.getAttribute(r),S=b!==null&&b!=="false",w=(Yl.get(v)||0)+1,_=(a.get(v)||0)+1;Yl.set(v,w),a.set(v,_),c.push(v),w===1&&S&&bf.set(v,!0),_===1&&v.setAttribute(t,"true"),S||v.setAttribute(r,"true")}catch(A){console.error("aria-hidden: cannot operate on ",v,A)}})};return g(e),u.clear(),gy++,function(){c.forEach(function(y){var v=Yl.get(y)-1,b=a.get(y)-1;Yl.set(y,v),a.set(y,b),v||(bf.has(y)||y.removeAttribute(r),bf.delete(y)),b||y.removeAttribute(t)}),gy--,gy||(Yl=new WeakMap,Yl=new WeakMap,bf=new WeakMap,Sf={})}},YI=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=hz(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),pz(r,s,t,"aria-hidden")):function(){return null}},hw="Dialog",[XI,BB]=E$(hw),[mz,Ss]=XI(hw),JI=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:a,modal:c=!0}=n,u=E.useRef(null),h=E.useRef(null),[p=!1,g]=Wa({prop:r,defaultProp:s,onChange:a});return l.jsx(mz,{scope:e,triggerRef:u,contentRef:h,contentId:Do(),titleId:Do(),descriptionId:Do(),open:p,onOpenChange:g,onOpenToggle:E.useCallback(()=>g(y=>!y),[g]),modal:c,children:t})};JI.displayName=hw;var ZI="DialogTrigger",ej=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ss(ZI,t),a=bt(e,s.triggerRef);return l.jsx(We.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":mw(s.open),...r,ref:a,onClick:Ue(n.onClick,s.onOpenToggle)})});ej.displayName=ZI;var fw="DialogPortal",[gz,tj]=XI(fw,{forceMount:void 0}),nj=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,a=Ss(fw,e);return l.jsx(gz,{scope:e,forceMount:t,children:E.Children.map(r,c=>l.jsx(rm,{present:t||a.open,children:l.jsx(cN,{asChild:!0,container:s,children:c})}))})};nj.displayName=fw;var vp="DialogOverlay",rj=E.forwardRef((n,e)=>{const t=tj(vp,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,a=Ss(vp,n.__scopeDialog);return a.modal?l.jsx(rm,{present:r||a.open,children:l.jsx(yz,{...s,ref:e})}):null});rj.displayName=vp;var yz=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ss(vp,t);return l.jsx(GI,{as:qa,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(We.div,{"data-state":mw(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),tl="DialogContent",sj=E.forwardRef((n,e)=>{const t=tj(tl,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,a=Ss(tl,n.__scopeDialog);return l.jsx(rm,{present:r||a.open,children:a.modal?l.jsx(vz,{...s,ref:e}):l.jsx(xz,{...s,ref:e})})});sj.displayName=tl;var vz=E.forwardRef((n,e)=>{const t=Ss(tl,n.__scopeDialog),r=E.useRef(null),s=bt(e,t.contentRef,r);return E.useEffect(()=>{const a=r.current;if(a)return YI(a)},[]),l.jsx(ij,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ue(n.onCloseAutoFocus,a=>{var c;a.preventDefault(),(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Ue(n.onPointerDownOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&a.preventDefault()}),onFocusOutside:Ue(n.onFocusOutside,a=>a.preventDefault())})}),xz=E.forwardRef((n,e)=>{const t=Ss(tl,n.__scopeDialog),r=E.useRef(!1),s=E.useRef(!1);return l.jsx(ij,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,u;(c=n.onCloseAutoFocus)==null||c.call(n,a),a.defaultPrevented||(r.current||(u=t.triggerRef.current)==null||u.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var h,p;(h=n.onInteractOutside)==null||h.call(n,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=a.target;((p=t.triggerRef.current)==null?void 0:p.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),ij=E.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...c}=n,u=Ss(tl,t),h=E.useRef(null),p=bt(e,h);return O$(),l.jsxs(l.Fragment,{children:[l.jsx(uw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:l.jsx(Gv,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":mw(u.open),...c,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(wz,{titleId:u.titleId}),l.jsx(Ez,{contentRef:h,descriptionId:u.descriptionId})]})]})}),pw="DialogTitle",oj=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ss(pw,t);return l.jsx(We.h2,{id:s.titleId,...r,ref:e})});oj.displayName=pw;var aj="DialogDescription",lj=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ss(aj,t);return l.jsx(We.p,{id:s.descriptionId,...r,ref:e})});lj.displayName=aj;var cj="DialogClose",uj=E.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ss(cj,t);return l.jsx(We.button,{type:"button",...r,ref:e,onClick:Ue(n.onClick,()=>s.onOpenChange(!1))})});uj.displayName=cj;function mw(n){return n?"open":"closed"}var dj="DialogTitleWarning",[qB,hj]=_$(dj,{contentName:tl,titleName:pw,docsSlug:"dialog"}),wz=({titleId:n})=>{const e=hj(dj),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},_z="DialogDescriptionWarning",Ez=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${hj(_z).contentName}}.`;return E.useEffect(()=>{var a;const s=(a=n.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},bz=JI,Sz=ej,Nz=nj,fj=rj,pj=sj,mj=oj,gj=lj,yj=uj;const Tz=bz,Cz=Sz,Iz=Nz,jz=yj,vj=E.forwardRef(({className:n,...e},t)=>l.jsx(fj,{ref:t,className:et("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));vj.displayName=fj.displayName;const xj=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(Iz,{children:[l.jsx(vj,{}),l.jsxs(pj,{ref:r,className:et("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,l.jsxs(yj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(Sc,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xj.displayName=pj.displayName;const wj=({className:n,...e})=>l.jsx("div",{className:et("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});wj.displayName="DialogHeader";const _j=({className:n,...e})=>l.jsx("div",{className:et("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});_j.displayName="DialogFooter";const Ej=E.forwardRef(({className:n,...e},t)=>l.jsx(mj,{ref:t,className:et("text-lg font-semibold leading-none tracking-tight",n),...e}));Ej.displayName=mj.displayName;const bj=E.forwardRef(({className:n,...e},t)=>l.jsx(gj,{ref:t,className:et("text-sm text-muted-foreground",n),...e}));bj.displayName=gj.displayName;function gw({quiz:n,onClose:e,onSave:t}){const[r,s]=E.useState({title:"",description:"",timeLimit:30,passingScore:70,questions:[],type:"multiple_choice"}),[a,c]=E.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",imageUrl:"",weight:1}),[u,h]=E.useState(!1);E.useEffect(()=>{n&&s({title:n.title||"",description:n.description||"",timeLimit:n.timeLimit||30,passingScore:n.passingScore||70,questions:n.questions||[],type:n.type||"multiple_choice"})},[n]);const p=async w=>{w.preventDefault(),h(!0);try{const _={...r,...n?{}:{createdAt:new Date,createdBy:"Current User"}};_.type||(_.type="multiple_choice"),t(_)}catch(_){console.error("Error saving quiz:",_)}finally{h(!1)}},g=()=>{var A;const w=r.type==="flashcard",_=a.question.trim();if(w){const I=a.options&&String(a.options[0]).trim()||a.answer;if(_&&I){const C={...a,options:[String(((A=a.options)==null?void 0:A[0])||a.answer||"").trim()],correctAnswer:0};s(L=>({...L,questions:[...L.questions,C]})),c({question:"",options:[""],correctAnswer:0,explanation:"",imageUrl:"",weight:1})}return}_&&Array.isArray(a.options)&&a.options.filter(I=>String(I).trim()).length>=2&&typeof a.correctAnswer=="number"&&String(a.options[a.correctAnswer]||"").trim()&&(s(I=>({...I,questions:[...I.questions,{...a}]})),c({question:"",options:["","","",""],correctAnswer:0,explanation:"",imageUrl:"",weight:1}))},y=w=>{s(_=>({..._,questions:_.questions.filter((A,I)=>I!==w)}))},v=(w,_)=>{const A=[...a.options||[]];A[w]=_,c(I=>({...I,options:A}))},b=()=>{c(w=>({...w,options:[...w.options||[],""]}))},S=w=>{c(_=>{const A=[..._.options||[]];A.splice(w,1);let I=_.correctAnswer;return I>=A.length&&(I=Math.max(0,A.length-1)),{..._,options:A,correctAnswer:I}})};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:e,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Quiz":"Create Quiz"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update the quiz details and questions":"Create a new quiz for students"})]})]})}),l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(ki,{className:"h-5 w-5"}),"Quiz Information"]}),l.jsx(At,{children:"Basic information about the quiz"})]}),l.jsxs(ve,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"title",children:"Quiz Title *"}),l.jsx(be,{id:"title",placeholder:"Enter quiz title...",value:r.title,onChange:w=>s(_=>({..._,title:w.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"description",children:"Description"}),l.jsx(ei,{id:"description",placeholder:"Describe what this quiz covers...",value:r.description,onChange:w=>s(_=>({..._,description:w.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(je,{htmlFor:"timeLimit",className:"flex items-center gap-2",children:[l.jsx(zf,{className:"h-4 w-4"}),"Time Limit (minutes)"]}),l.jsx(be,{id:"timeLimit",type:"number",min:"1",value:r.timeLimit,onChange:w=>s(_=>({..._,timeLimit:parseInt(w.target.value)||30}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(je,{htmlFor:"passingScore",className:"flex items-center gap-2",children:[l.jsx(mk,{className:"h-4 w-4"}),"Passing Score (%)"]}),l.jsx(be,{id:"passingScore",type:"number",min:"0",max:"100",value:r.passingScore,onChange:w=>s(_=>({..._,passingScore:parseInt(w.target.value)||70}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"quizType",children:"Quiz Type"}),l.jsxs("select",{id:"quizType",value:r.type||"multiple_choice",onChange:w=>s(_=>({..._,type:w.target.value})),className:"w-full border rounded px-3 py-2",children:[l.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),l.jsx("option",{value:"flashcard",children:"Flashcard"})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how this quiz will be presented to students."})]})]})]}),l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Add Question"}),l.jsx(At,{children:"Create multiple choice questions for the quiz"})]}),l.jsxs(ve,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"question",children:"Question"}),l.jsx(ei,{id:"question",placeholder:"Enter your question...",value:a.question,onChange:w=>c(_=>({..._,question:w.target.value})),rows:3})]}),l.jsx("div",{className:"space-y-2",children:r.type==="flashcard"?l.jsxs(l.Fragment,{children:[l.jsx(je,{children:"Correct Answer"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(be,{placeholder:"Correct answer",value:a.options[0]??a.answer??"",onChange:w=>{c(_=>({..._,options:[w.target.value]}))}}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"For flashcards enter the correct answer (single). Use [[answer]] in the question to create blanks."})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(je,{children:"Answer Options"}),l.jsxs("div",{className:"space-y-2",children:[a.options.map((w,_)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l.jsx(je,{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-sm",children:String.fromCharCode(65+_)}),l.jsx(be,{placeholder:`Option ${String.fromCharCode(65+_)}`,value:w,onChange:A=>v(_,A.target.value),className:a.correctAnswer===_?"ring-2 ring-green-500":""})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ne,{type:"button",variant:a.correctAnswer===_?"default":"outline",size:"sm",onClick:()=>c(A=>({...A,correctAnswer:_})),children:a.correctAnswer===_?"Correct":"Mark Correct"}),a.options.length>2&&l.jsx(ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(_),children:"Remove"})]})]},_)),l.jsx("div",{children:l.jsx(ne,{type:"button",variant:"outline",onClick:b,className:"mt-2",children:"Add Option"})})]})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"explanation",children:"Explanation (Optional)"}),l.jsx(ei,{id:"explanation",placeholder:"Explain why this is the correct answer...",value:a.explanation||"",onChange:w=>c(_=>({..._,explanation:w.target.value})),rows:3}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"This explanation will be shown to students after they answer the question"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(be,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:w=>c(_=>({..._,imageUrl:w.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"weight",children:"Question Weight"}),l.jsx(be,{id:"weight",type:"number",min:1,value:a.weight,onChange:w=>c(_=>({..._,weight:parseFloat(w.target.value)||1}))})]}),l.jsxs(ne,{type:"button",onClick:g,className:"w-full",children:[l.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),r.questions.length>0&&l.jsxs(ye,{children:[l.jsx(Ke,{children:l.jsxs(Xe,{children:["Quiz Questions (",r.questions.length,")"]})}),l.jsx(ve,{children:l.jsx("div",{className:"space-y-4",children:r.questions.map((w,_)=>l.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("p",{className:"font-medium",children:[_+1,". ",w.question]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(je,{className:"text-sm",children:"Weight"}),l.jsx(be,{type:"number",min:1,value:w.weight||1,onChange:A=>{const I=parseFloat(A.target.value)||1;s(C=>({...C,questions:C.questions.map((L,U)=>U===_?{...L,weight:I}:L)}))},className:"w-20 text-sm"})]})]}),l.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:w.options.map((A,I)=>l.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${w.correctAnswer===I?"bg-green-100 text-green-800":"bg-secondary/50"}`,children:[l.jsx("span",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+I)}),l.jsx("span",{className:"text-sm",children:A}),w.correctAnswer===I&&l.jsx(on,{variant:"outline",className:"ml-auto text-xs bg-green-200",children:"Correct"})]},I))}),w.explanation&&l.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:l.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[l.jsx("span",{className:"font-semibold",children:"Explanation:"})," ",w.explanation]})})]}),l.jsx("div",{className:"flex flex-col items-end gap-2",children:l.jsx(ne,{type:"button",variant:"ghost",size:"icon",onClick:()=>y(_),className:"text-destructive hover:text-destructive",children:l.jsx(Vn,{className:"h-4 w-4"})})})]})},_))})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:u||r.questions.length===0,children:[l.jsx(na,{className:"h-4 w-4 mr-2"}),u?"Saving...":n?"Update Quiz":"Create Quiz"]})]})]})]})}function Sj({year:n,yearType:e,onClose:t,onSave:r}){const[s,a]=E.useState({name:"",imageUrl:"",hours:3}),[c,u]=E.useState(!1),h=async p=>{p.preventDefault(),u(!0);try{const g={name:s.name,imageUrl:s.imageUrl||"",hours:s.hours||3,createdAt:new Date};r(g)}catch(g){console.error("Error saving subject:",g)}finally{u(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:t,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Add Subject to Year ",n]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e==="basic"?l.jsx(Hu,{className:"h-4 w-4 text-blue-600"}):l.jsx(Ku,{className:"h-4 w-4 text-red-600"}),l.jsxs("p",{className:"text-muted-foreground",children:["Adding to ",e==="basic"?"Basic":"Clinical"," Years â€¢ Year ",n]})]})]})]})}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsx(ye,{className:`border-l-4 ${e==="basic"?"border-l-blue-500 bg-blue-50/50":"border-l-red-500 bg-red-50/50"}`,children:l.jsx(ve,{className:"pt-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[e==="basic"?l.jsx(Hu,{className:"h-8 w-8 text-blue-600"}):l.jsx(Ku,{className:"h-8 w-8 text-red-600"}),l.jsxs("div",{children:[l.jsxs("h3",{className:"font-semibold text-lg",children:["Year ",n]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:e==="basic"?"Basic Years":"Clinical Years"})]})]})})}),l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[e==="basic"?l.jsx(Hu,{className:"h-5 w-5 text-blue-600"}):l.jsx(Ku,{className:"h-5 w-5 text-red-600"}),"Subject Information"]}),l.jsx(At,{children:"Basic information about the subject"})]}),l.jsx(ve,{className:"space-y-4",children:l.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"year",children:"Year"}),l.jsx(be,{id:"year",value:`Year ${n} (${e==="basic"?"Basic":"Clinical"})`,disabled:!0,className:"bg-muted"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"name",children:"Subject Name *"}),l.jsx(be,{id:"name",placeholder:"e.g., Anatomy & Physiology",value:s.name,onChange:p=>a(g=>({...g,name:p.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"hours",children:"Credit Hours"}),l.jsx(be,{id:"hours",type:"number",placeholder:"3",value:s.hours,onChange:p=>a(g=>({...g,hours:parseInt(p.target.value)||3})),min:"1",max:"12"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(be,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:s.imageUrl,onChange:p=>a(g=>({...g,imageUrl:p.target.value}))})]})]})})]}),s.name&&l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Preview"}),l.jsxs(At,{children:["How the subject will appear in Year ",n]})]}),l.jsx(ve,{children:l.jsxs("div",{className:"p-4 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.imageUrl?l.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-8 h-8 object-cover rounded",onError:p=>{p.currentTarget.style.display="none"}}):l.jsx(gs,{className:"h-5 w-5 text-primary"}),l.jsx("h3",{className:"font-semibold text-lg",children:s.name})]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Year ",n," â€¢ ",e," years"]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:c,children:[l.jsx(na,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Subject"]})]})]})]})}function S1(n,[e,t]){return Math.min(t,Math.max(e,n))}var Az=E.createContext(void 0);function yw(n){const e=E.useContext(Az);return n||e||"ltr"}var Pz="DismissableLayer",jv="dismissableLayer.update",Rz="dismissableLayer.pointerDownOutside",kz="dismissableLayer.focusOutside",N1,Nj=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tj=E.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=n,p=E.useContext(Nj),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=E.useState({}),S=bt(e,R=>y(R)),w=Array.from(p.layers),[_]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),A=w.indexOf(_),I=g?w.indexOf(g):-1,C=p.layersWithOutsidePointerEventsDisabled.size>0,L=I>=A,U=Lz(R=>{const k=R.target,D=[...p.branches].some(O=>O.contains(k));!L||D||(s==null||s(R),c==null||c(R),R.defaultPrevented||u==null||u())},v),z=Mz(R=>{const k=R.target;[...p.branches].some(O=>O.contains(k))||(a==null||a(R),c==null||c(R),R.defaultPrevented||u==null||u())},v);return $v(R=>{I===p.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&u&&(R.preventDefault(),u()))},v),E.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(N1=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),T1(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=N1)}},[g,v,t,p]),E.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),T1())},[g,p]),E.useEffect(()=>{const R=()=>b({});return document.addEventListener(jv,R),()=>document.removeEventListener(jv,R)},[]),l.jsx(We.div,{...h,ref:S,style:{pointerEvents:C?L?"auto":"none":void 0,...n.style},onFocusCapture:Ue(n.onFocusCapture,z.onFocusCapture),onBlurCapture:Ue(n.onBlurCapture,z.onBlurCapture),onPointerDownCapture:Ue(n.onPointerDownCapture,U.onPointerDownCapture)})});Tj.displayName=Pz;var Oz="DismissableLayerBranch",Dz=E.forwardRef((n,e)=>{const t=E.useContext(Nj),r=E.useRef(null),s=bt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),l.jsx(We.div,{...n,ref:s})});Dz.displayName=Oz;function Lz(n,e=globalThis==null?void 0:globalThis.document){const t=Nn(n),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){Cj(Rz,t,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Mz(n,e=globalThis==null?void 0:globalThis.document){const t=Nn(n),r=E.useRef(!1);return E.useEffect(()=>{const s=a=>{a.target&&!r.current&&Cj(kz,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function T1(){const n=new CustomEvent(jv);document.dispatchEvent(n)}function Cj(n,e,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?Ep(s,a):s.dispatchEvent(a)}var yy=0;function Fz(){E.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??C1()),document.body.insertAdjacentElement("beforeend",n[1]??C1()),yy++,()=>{yy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),yy--}},[])}function C1(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",n}var Vz="Portal",Ij=E.forwardRef((n,e)=>{var u;const{container:t,...r}=n,[s,a]=E.useState(!1);Yt(()=>a(!0),[]);const c=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?_p.createPortal(l.jsx(We.div,{...r,ref:e}),c):null});Ij.displayName=Vz;var jj=UI(),vy=function(){},im=E.forwardRef(function(n,e){var t=E.useRef(null),r=E.useState({onScrollCapture:vy,onWheelCapture:vy,onTouchMoveCapture:vy}),s=r[0],a=r[1],c=n.forwardProps,u=n.children,h=n.className,p=n.removeScrollBar,g=n.enabled,y=n.shards,v=n.sideCar,b=n.noIsolation,S=n.inert,w=n.allowPinchZoom,_=n.as,A=_===void 0?"div":_,I=n.gapMode,C=qc(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=v,U=VI([t,e]),z=Xn(Xn({},C),s);return E.createElement(E.Fragment,null,g&&E.createElement(L,{sideCar:jj,removeScrollBar:p,shards:y,noIsolation:b,inert:S,setCallbacks:a,allowPinchZoom:!!w,lockRef:t,gapMode:I}),c?E.cloneElement(E.Children.only(u),Xn(Xn({},z),{ref:U})):E.createElement(A,Xn({},z,{className:h,ref:U}),u))});im.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};im.classNames={fullWidth:nd,zeroRight:td};var Av=!1;if(typeof window<"u")try{var Nf=Object.defineProperty({},"passive",{get:function(){return Av=!0,!0}});window.addEventListener("test",Nf,Nf),window.removeEventListener("test",Nf,Nf)}catch{Av=!1}var Xl=Av?{passive:!1}:!1,Uz=function(n){return n.tagName==="TEXTAREA"},Aj=function(n,e){var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Uz(n)&&t[e]==="visible")},$z=function(n){return Aj(n,"overflowY")},zz=function(n){return Aj(n,"overflowX")},I1=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Pj(n,r);if(s){var a=Rj(n,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},Bz=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},qz=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},Pj=function(n,e){return n==="v"?$z(e):zz(e)},Rj=function(n,e){return n==="v"?Bz(e):qz(e)},Wz=function(n,e){return n==="h"&&e==="rtl"?-1:1},Hz=function(n,e,t,r,s){var a=Wz(n,window.getComputedStyle(e).direction),c=a*r,u=t.target,h=e.contains(u),p=!1,g=c>0,y=0,v=0;do{var b=Rj(n,u),S=b[0],w=b[1],_=b[2],A=w-_-a*S;(S||A)&&Pj(n,u)&&(y+=A,v+=S),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(y)<1||!g&&Math.abs(v)<1)&&(p=!0),p},Tf=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},j1=function(n){return[n.deltaX,n.deltaY]},A1=function(n){return n&&"current"in n?n.current:n},Kz=function(n,e){return n[0]===e[0]&&n[1]===e[1]},Gz=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},Qz=0,Jl=[];function Yz(n){var e=E.useRef([]),t=E.useRef([0,0]),r=E.useRef(),s=E.useState(Qz++)[0],a=E.useState(dw)[0],c=E.useRef(n);E.useEffect(function(){c.current=n},[n]),E.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var w=nT([n.lockRef.current],(n.shards||[]).map(A1),!0).filter(Boolean);return w.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=E.useCallback(function(w,_){if("touches"in w&&w.touches.length===2)return!c.current.allowPinchZoom;var A=Tf(w),I=t.current,C="deltaX"in w?w.deltaX:I[0]-A[0],L="deltaY"in w?w.deltaY:I[1]-A[1],U,z=w.target,R=Math.abs(C)>Math.abs(L)?"h":"v";if("touches"in w&&R==="h"&&z.type==="range")return!1;var k=I1(R,z);if(!k)return!0;if(k?U=R:(U=R==="v"?"h":"v",k=I1(R,z)),!k)return!1;if(!r.current&&"changedTouches"in w&&(C||L)&&(r.current=U),!U)return!0;var D=r.current||U;return Hz(D,_,w,D==="h"?C:L)},[]),h=E.useCallback(function(w){var _=w;if(!(!Jl.length||Jl[Jl.length-1]!==a)){var A="deltaY"in _?j1(_):Tf(_),I=e.current.filter(function(U){return U.name===_.type&&(U.target===_.target||_.target===U.shadowParent)&&Kz(U.delta,A)})[0];if(I&&I.should){_.cancelable&&_.preventDefault();return}if(!I){var C=(c.current.shards||[]).map(A1).filter(Boolean).filter(function(U){return U.contains(_.target)}),L=C.length>0?u(_,C[0]):!c.current.noIsolation;L&&_.cancelable&&_.preventDefault()}}},[]),p=E.useCallback(function(w,_,A,I){var C={name:w,delta:_,target:A,should:I,shadowParent:Xz(A)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(L){return L!==C})},1)},[]),g=E.useCallback(function(w){t.current=Tf(w),r.current=void 0},[]),y=E.useCallback(function(w){p(w.type,j1(w),w.target,u(w,n.lockRef.current))},[]),v=E.useCallback(function(w){p(w.type,Tf(w),w.target,u(w,n.lockRef.current))},[]);E.useEffect(function(){return Jl.push(a),n.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,Xl),document.addEventListener("touchmove",h,Xl),document.addEventListener("touchstart",g,Xl),function(){Jl=Jl.filter(function(w){return w!==a}),document.removeEventListener("wheel",h,Xl),document.removeEventListener("touchmove",h,Xl),document.removeEventListener("touchstart",g,Xl)}},[]);var b=n.removeScrollBar,S=n.inert;return E.createElement(E.Fragment,null,S?E.createElement(a,{styles:Gz(s)}):null,b?E.createElement(qI,{gapMode:n.gapMode}):null)}function Xz(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const Jz=zI(jj,Yz);var kj=E.forwardRef(function(n,e){return E.createElement(im,Xn({},n,{ref:e,sideCar:Jz}))});kj.classNames=im.classNames;var Zz=[" ","Enter","ArrowUp","ArrowDown"],e9=[" ","Enter"],qd="Select",[om,am,t9]=Uv(qd),[Jc,WB]=Ui(qd,[t9,Ip]),lm=Ip(),[n9,aa]=Jc(qd),[r9,s9]=Jc(qd),Oj=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:a,value:c,defaultValue:u,onValueChange:h,dir:p,name:g,autoComplete:y,disabled:v,required:b}=n,S=lm(e),[w,_]=E.useState(null),[A,I]=E.useState(null),[C,L]=E.useState(!1),U=yw(p),[z=!1,R]=Wa({prop:r,defaultProp:s,onChange:a}),[k,D]=Wa({prop:c,defaultProp:u,onChange:h}),O=E.useRef(null),M=w?!!w.closest("form"):!0,[V,P]=E.useState(new Set),H=Array.from(V).map(q=>q.props.value).join(";");return l.jsx(YO,{...S,children:l.jsxs(n9,{required:b,scope:e,trigger:w,onTriggerChange:_,valueNode:A,onValueNodeChange:I,valueNodeHasChildren:C,onValueNodeHasChildrenChange:L,contentId:Do(),value:k,onValueChange:D,open:z,onOpenChange:R,dir:U,triggerPointerDownPosRef:O,disabled:v,children:[l.jsx(om.Provider,{scope:e,children:l.jsx(r9,{scope:n.__scopeSelect,onNativeOptionAdd:E.useCallback(q=>{P(K=>new Set(K).add(q))},[]),onNativeOptionRemove:E.useCallback(q=>{P(K=>{const te=new Set(K);return te.delete(q),te})},[]),children:t})}),M?l.jsxs(iA,{"aria-hidden":!0,required:b,tabIndex:-1,name:g,autoComplete:y,value:k,onChange:q=>D(q.target.value),disabled:v,children:[k===void 0?l.jsx("option",{value:""}):null,Array.from(V)]},H):null]})})};Oj.displayName=qd;var Dj="SelectTrigger",Lj=E.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,a=lm(t),c=aa(Dj,t),u=c.disabled||r,h=bt(e,c.onTriggerChange),p=am(t),[g,y,v]=oA(S=>{const w=p().filter(I=>!I.disabled),_=w.find(I=>I.value===c.value),A=aA(w,S,_);A!==void 0&&c.onValueChange(A.value)}),b=()=>{u||(c.onOpenChange(!0),v())};return l.jsx(oN,{asChild:!0,...a,children:l.jsx(We.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":sA(c.value)?"":void 0,...s,ref:h,onClick:Ue(s.onClick,S=>{S.currentTarget.focus()}),onPointerDown:Ue(s.onPointerDown,S=>{const w=S.target;w.hasPointerCapture(S.pointerId)&&w.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&(b(),c.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)},S.preventDefault())}),onKeyDown:Ue(s.onKeyDown,S=>{const w=g.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&y(S.key),!(w&&S.key===" ")&&Zz.includes(S.key)&&(b(),S.preventDefault())})})})});Lj.displayName=Dj;var Mj="SelectValue",Fj=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:a,placeholder:c="",...u}=n,h=aa(Mj,t),{onValueNodeHasChildrenChange:p}=h,g=a!==void 0,y=bt(e,h.onValueNodeChange);return Yt(()=>{p(g)},[p,g]),l.jsx(We.span,{...u,ref:y,style:{pointerEvents:"none"},children:sA(h.value)?l.jsx(l.Fragment,{children:c}):a})});Fj.displayName=Mj;var i9="SelectIcon",Vj=E.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return l.jsx(We.span,{"aria-hidden":!0,...s,ref:e,children:r||"â–¼"})});Vj.displayName=i9;var o9="SelectPortal",Uj=n=>l.jsx(Ij,{asChild:!0,...n});Uj.displayName=o9;var nl="SelectContent",$j=E.forwardRef((n,e)=>{const t=aa(nl,n.__scopeSelect),[r,s]=E.useState();if(Yt(()=>{s(new DocumentFragment)},[]),!t.open){const a=r;return a?rl.createPortal(l.jsx(zj,{scope:n.__scopeSelect,children:l.jsx(om.Slot,{scope:n.__scopeSelect,children:l.jsx("div",{children:n.children})})}),a):null}return l.jsx(Bj,{...n,ref:e})});$j.displayName=nl;var Ii=10,[zj,la]=Jc(nl),a9="SelectContentImpl",Bj=E.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:c,side:u,sideOffset:h,align:p,alignOffset:g,arrowPadding:y,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:w,avoidCollisions:_,...A}=n,I=aa(nl,t),[C,L]=E.useState(null),[U,z]=E.useState(null),R=bt(e,xe=>L(xe)),[k,D]=E.useState(null),[O,M]=E.useState(null),V=am(t),[P,H]=E.useState(!1),q=E.useRef(!1);E.useEffect(()=>{if(C)return YI(C)},[C]),Fz();const K=E.useCallback(xe=>{const[Se,...ze]=V().map(st=>st.ref.current),[Me]=ze.slice(-1),rt=document.activeElement;for(const st of xe)if(st===rt||(st==null||st.scrollIntoView({block:"nearest"}),st===Se&&U&&(U.scrollTop=0),st===Me&&U&&(U.scrollTop=U.scrollHeight),st==null||st.focus(),document.activeElement!==rt))return},[V,U]),te=E.useCallback(()=>K([k,C]),[K,k,C]);E.useEffect(()=>{P&&te()},[P,te]);const{onOpenChange:Q,triggerPointerDownPosRef:oe}=I;E.useEffect(()=>{if(C){let xe={x:0,y:0};const Se=Me=>{var rt,st;xe={x:Math.abs(Math.round(Me.pageX)-(((rt=oe.current)==null?void 0:rt.x)??0)),y:Math.abs(Math.round(Me.pageY)-(((st=oe.current)==null?void 0:st.y)??0))}},ze=Me=>{xe.x<=10&&xe.y<=10?Me.preventDefault():C.contains(Me.target)||Q(!1),document.removeEventListener("pointermove",Se),oe.current=null};return oe.current!==null&&(document.addEventListener("pointermove",Se),document.addEventListener("pointerup",ze,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Se),document.removeEventListener("pointerup",ze,{capture:!0})}}},[C,Q,oe]),E.useEffect(()=>{const xe=()=>Q(!1);return window.addEventListener("blur",xe),window.addEventListener("resize",xe),()=>{window.removeEventListener("blur",xe),window.removeEventListener("resize",xe)}},[Q]);const[le,B]=oA(xe=>{const Se=V().filter(rt=>!rt.disabled),ze=Se.find(rt=>rt.ref.current===document.activeElement),Me=aA(Se,xe,ze);Me&&setTimeout(()=>Me.ref.current.focus())}),Z=E.useCallback((xe,Se,ze)=>{const Me=!q.current&&!ze;(I.value!==void 0&&I.value===Se||Me)&&(D(xe),Me&&(q.current=!0))},[I.value]),he=E.useCallback(()=>C==null?void 0:C.focus(),[C]),Ce=E.useCallback((xe,Se,ze)=>{const Me=!q.current&&!ze;(I.value!==void 0&&I.value===Se||Me)&&M(xe)},[I.value]),Fe=r==="popper"?Pv:qj,Ne=Fe===Pv?{side:u,sideOffset:h,align:p,alignOffset:g,arrowPadding:y,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:w,avoidCollisions:_}:{};return l.jsx(zj,{scope:t,content:C,viewport:U,onViewportChange:z,itemRefCallback:Z,selectedItem:k,onItemLeave:he,itemTextRefCallback:Ce,focusSelectedItem:te,selectedItemText:O,position:r,isPositioned:P,searchRef:le,children:l.jsx(kj,{as:qa,allowPinchZoom:!0,children:l.jsx(uw,{asChild:!0,trapped:I.open,onMountAutoFocus:xe=>{xe.preventDefault()},onUnmountAutoFocus:Ue(s,xe=>{var Se;(Se=I.trigger)==null||Se.focus({preventScroll:!0}),xe.preventDefault()}),children:l.jsx(Tj,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:xe=>xe.preventDefault(),onDismiss:()=>I.onOpenChange(!1),children:l.jsx(Fe,{role:"listbox",id:I.contentId,"data-state":I.open?"open":"closed",dir:I.dir,onContextMenu:xe=>xe.preventDefault(),...A,...Ne,onPlaced:()=>H(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:Ue(A.onKeyDown,xe=>{const Se=xe.ctrlKey||xe.altKey||xe.metaKey;if(xe.key==="Tab"&&xe.preventDefault(),!Se&&xe.key.length===1&&B(xe.key),["ArrowUp","ArrowDown","Home","End"].includes(xe.key)){let Me=V().filter(rt=>!rt.disabled).map(rt=>rt.ref.current);if(["ArrowUp","End"].includes(xe.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(xe.key)){const rt=xe.target,st=Me.indexOf(rt);Me=Me.slice(st+1)}setTimeout(()=>K(Me)),xe.preventDefault()}})})})})})})});Bj.displayName=a9;var l9="SelectItemAlignedPosition",qj=E.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,a=aa(nl,t),c=la(nl,t),[u,h]=E.useState(null),[p,g]=E.useState(null),y=bt(e,R=>g(R)),v=am(t),b=E.useRef(!1),S=E.useRef(!0),{viewport:w,selectedItem:_,selectedItemText:A,focusSelectedItem:I}=c,C=E.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&p&&w&&_&&A){const R=a.trigger.getBoundingClientRect(),k=p.getBoundingClientRect(),D=a.valueNode.getBoundingClientRect(),O=A.getBoundingClientRect();if(a.dir!=="rtl"){const rt=O.left-k.left,st=D.left-rt,Nt=R.left-st,Ot=R.width+Nt,Tn=Math.max(Ot,k.width),nn=window.innerWidth-Ii,$n=S1(st,[Ii,nn-Tn]);u.style.minWidth=Ot+"px",u.style.left=$n+"px"}else{const rt=k.right-O.right,st=window.innerWidth-D.right-rt,Nt=window.innerWidth-R.right-st,Ot=R.width+Nt,Tn=Math.max(Ot,k.width),nn=window.innerWidth-Ii,$n=S1(st,[Ii,nn-Tn]);u.style.minWidth=Ot+"px",u.style.right=$n+"px"}const M=v(),V=window.innerHeight-Ii*2,P=w.scrollHeight,H=window.getComputedStyle(p),q=parseInt(H.borderTopWidth,10),K=parseInt(H.paddingTop,10),te=parseInt(H.borderBottomWidth,10),Q=parseInt(H.paddingBottom,10),oe=q+K+P+Q+te,le=Math.min(_.offsetHeight*5,oe),B=window.getComputedStyle(w),Z=parseInt(B.paddingTop,10),he=parseInt(B.paddingBottom,10),Ce=R.top+R.height/2-Ii,Fe=V-Ce,Ne=_.offsetHeight/2,xe=_.offsetTop+Ne,Se=q+K+xe,ze=oe-Se;if(Se<=Ce){const rt=_===M[M.length-1].ref.current;u.style.bottom="0px";const st=p.clientHeight-w.offsetTop-w.offsetHeight,Nt=Math.max(Fe,Ne+(rt?he:0)+st+te),Ot=Se+Nt;u.style.height=Ot+"px"}else{const rt=_===M[0].ref.current;u.style.top="0px";const Nt=Math.max(Ce,q+w.offsetTop+(rt?Z:0)+Ne)+ze;u.style.height=Nt+"px",w.scrollTop=Se-Ce+w.offsetTop}u.style.margin=`${Ii}px 0`,u.style.minHeight=le+"px",u.style.maxHeight=V+"px",r==null||r(),requestAnimationFrame(()=>b.current=!0)}},[v,a.trigger,a.valueNode,u,p,w,_,A,a.dir,r]);Yt(()=>C(),[C]);const[L,U]=E.useState();Yt(()=>{p&&U(window.getComputedStyle(p).zIndex)},[p]);const z=E.useCallback(R=>{R&&S.current===!0&&(C(),I==null||I(),S.current=!1)},[C,I]);return l.jsx(u9,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:z,children:l.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:L},children:l.jsx(We.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});qj.displayName=l9;var c9="SelectPopperPosition",Pv=E.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Ii,...a}=n,c=lm(t);return l.jsx(aN,{...c,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Pv.displayName=c9;var[u9,vw]=Jc(nl,{}),Rv="SelectViewport",Wj=E.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,a=la(Rv,t),c=vw(Rv,t),u=bt(e,a.onViewportChange),h=E.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(om.Slot,{scope:t,children:l.jsx(We.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"auto",...s.style},onScroll:Ue(s.onScroll,p=>{const g=p.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:v}=c;if(v!=null&&v.current&&y){const b=Math.abs(h.current-g.scrollTop);if(b>0){const S=window.innerHeight-Ii*2,w=parseFloat(y.style.minHeight),_=parseFloat(y.style.height),A=Math.max(w,_);if(A<S){const I=A+b,C=Math.min(S,I),L=I-C;y.style.height=C+"px",y.style.bottom==="0px"&&(g.scrollTop=L>0?L:0,y.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});Wj.displayName=Rv;var Hj="SelectGroup",[d9,h9]=Jc(Hj),f9=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Do();return l.jsx(d9,{scope:t,id:s,children:l.jsx(We.div,{role:"group","aria-labelledby":s,...r,ref:e})})});f9.displayName=Hj;var Kj="SelectLabel",Gj=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=h9(Kj,t);return l.jsx(We.div,{id:s.id,...r,ref:e})});Gj.displayName=Kj;var xp="SelectItem",[p9,Qj]=Jc(xp),Yj=E.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:a,...c}=n,u=aa(xp,t),h=la(xp,t),p=u.value===r,[g,y]=E.useState(a??""),[v,b]=E.useState(!1),S=bt(e,A=>{var I;return(I=h.itemRefCallback)==null?void 0:I.call(h,A,r,s)}),w=Do(),_=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(p9,{scope:t,value:r,disabled:s,textId:w,isSelected:p,onItemTextChange:E.useCallback(A=>{y(I=>I||((A==null?void 0:A.textContent)??"").trim())},[]),children:l.jsx(om.ItemSlot,{scope:t,value:r,disabled:s,textValue:g,children:l.jsx(We.div,{role:"option","aria-labelledby":w,"data-highlighted":v?"":void 0,"aria-selected":p&&v,"data-state":p?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:S,onFocus:Ue(c.onFocus,()=>b(!0)),onBlur:Ue(c.onBlur,()=>b(!1)),onPointerUp:Ue(c.onPointerUp,_),onPointerMove:Ue(c.onPointerMove,A=>{var I;s?(I=h.onItemLeave)==null||I.call(h):A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ue(c.onPointerLeave,A=>{var I;A.currentTarget===document.activeElement&&((I=h.onItemLeave)==null||I.call(h))}),onKeyDown:Ue(c.onKeyDown,A=>{var C;((C=h.searchRef)==null?void 0:C.current)!==""&&A.key===" "||(e9.includes(A.key)&&_(),A.key===" "&&A.preventDefault())})})})})});Yj.displayName=xp;var Bu="SelectItemText",Xj=E.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...a}=n,c=aa(Bu,t),u=la(Bu,t),h=Qj(Bu,t),p=s9(Bu,t),[g,y]=E.useState(null),v=bt(e,A=>y(A),h.onItemTextChange,A=>{var I;return(I=u.itemTextRefCallback)==null?void 0:I.call(u,A,h.value,h.disabled)}),b=g==null?void 0:g.textContent,S=E.useMemo(()=>l.jsx("option",{value:h.value,disabled:h.disabled,children:b},h.value),[h.disabled,h.value,b]),{onNativeOptionAdd:w,onNativeOptionRemove:_}=p;return Yt(()=>(w(S),()=>_(S)),[w,_,S]),l.jsxs(l.Fragment,{children:[l.jsx(We.span,{id:h.textId,...a,ref:v}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?rl.createPortal(a.children,c.valueNode):null]})});Xj.displayName=Bu;var Jj="SelectItemIndicator",Zj=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return Qj(Jj,t).isSelected?l.jsx(We.span,{"aria-hidden":!0,...r,ref:e}):null});Zj.displayName=Jj;var kv="SelectScrollUpButton",eA=E.forwardRef((n,e)=>{const t=la(kv,n.__scopeSelect),r=vw(kv,n.__scopeSelect),[s,a]=E.useState(!1),c=bt(e,r.onScrollButtonChange);return Yt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const p=h.scrollTop>0;a(p)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?l.jsx(nA,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});eA.displayName=kv;var Ov="SelectScrollDownButton",tA=E.forwardRef((n,e)=>{const t=la(Ov,n.__scopeSelect),r=vw(Ov,n.__scopeSelect),[s,a]=E.useState(!1),c=bt(e,r.onScrollButtonChange);return Yt(()=>{if(t.viewport&&t.isPositioned){let u=function(){const p=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<p;a(g)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?l.jsx(nA,{...n,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});tA.displayName=Ov;var nA=E.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,a=la("SelectScrollButton",t),c=E.useRef(null),u=am(t),h=E.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return E.useEffect(()=>()=>h(),[h]),Yt(()=>{var g;const p=u().find(y=>y.ref.current===document.activeElement);(g=p==null?void 0:p.ref.current)==null||g.scrollIntoView({block:"nearest"})},[u]),l.jsx(We.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ue(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:Ue(s.onPointerMove,()=>{var p;(p=a.onItemLeave)==null||p.call(a),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:Ue(s.onPointerLeave,()=>{h()})})}),m9="SelectSeparator",rA=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return l.jsx(We.div,{"aria-hidden":!0,...r,ref:e})});rA.displayName=m9;var Dv="SelectArrow",g9=E.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=lm(t),a=aa(Dv,t),c=la(Dv,t);return a.open&&c.position==="popper"?l.jsx(lN,{...s,...r,ref:e}):null});g9.displayName=Dv;function sA(n){return n===""||n===void 0}var iA=E.forwardRef((n,e)=>{const{value:t,...r}=n,s=E.useRef(null),a=bt(e,s),c=PI(t);return E.useEffect(()=>{const u=s.current,h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==t&&g){const y=new Event("change",{bubbles:!0});g.call(u,t),u.dispatchEvent(y)}},[c,t]),l.jsx(Td,{asChild:!0,children:l.jsx("select",{...r,ref:a,defaultValue:t})})});iA.displayName="BubbleSelect";function oA(n){const e=Nn(n),t=E.useRef(""),r=E.useRef(0),s=E.useCallback(c=>{const u=t.current+c;e(u),function h(p){t.current=p,window.clearTimeout(r.current),p!==""&&(r.current=window.setTimeout(()=>h(""),1e3))}(u)},[e]),a=E.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,a]}function aA(n,e,t){const s=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let c=y9(n,Math.max(a,0));s.length===1&&(c=c.filter(p=>p!==t));const h=c.find(p=>p.textValue.toLowerCase().startsWith(s.toLowerCase()));return h!==t?h:void 0}function y9(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var v9=Oj,lA=Lj,x9=Fj,w9=Vj,_9=Uj,cA=$j,E9=Wj,uA=Gj,dA=Yj,b9=Xj,S9=Zj,hA=eA,fA=tA,pA=rA;const N9=v9,T9=x9,mA=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(lA,{ref:r,className:et("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,l.jsx(w9,{asChild:!0,children:l.jsx(NS,{className:"h-4 w-4 opacity-50"})})]}));mA.displayName=lA.displayName;const gA=E.forwardRef(({className:n,...e},t)=>l.jsx(hA,{ref:t,className:et("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(ok,{className:"h-4 w-4"})}));gA.displayName=hA.displayName;const yA=E.forwardRef(({className:n,...e},t)=>l.jsx(fA,{ref:t,className:et("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(NS,{className:"h-4 w-4"})}));yA.displayName=fA.displayName;const vA=E.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>l.jsx(_9,{children:l.jsxs(cA,{ref:s,className:et("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[l.jsx(gA,{}),l.jsx(E9,{className:et("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(yA,{})]})}));vA.displayName=cA.displayName;const C9=E.forwardRef(({className:n,...e},t)=>l.jsx(uA,{ref:t,className:et("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));C9.displayName=uA.displayName;const xA=E.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(dA,{ref:r,className:et("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(S9,{children:l.jsx(ik,{className:"h-4 w-4"})})}),l.jsx(b9,{children:e})]}));xA.displayName=dA.displayName;const I9=E.forwardRef(({className:n,...e},t)=>l.jsx(pA,{ref:t,className:et("-mx-1 my-1 h-px bg-muted",n),...e}));I9.displayName=pA.displayName;function xw({file:n,lectureId:e,onClose:t,onSave:r}){const[s,a]=E.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",fileUrl:(n==null?void 0:n.fileUrl)||(n==null?void 0:n.url)||"",fileType:(n==null?void 0:n.fileType)||"",fileSize:(n==null?void 0:n.fileSize)||""}),[c,u]=E.useState(!1),h=["PDF","DOCX","PPTX","XLSX","TXT","ZIP","MP3","MP4","JPG","PNG"],p=async g=>{g.preventDefault(),u(!0);try{const y={...s,id:`file_${Date.now()}`,lectureId:e,uploadedAt:new Date,uploadedBy:"Current User"};r(y)}catch(y){console.error("Error saving file:",y)}finally{u(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:t,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add File"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a file resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(ti,{className:"h-5 w-5 text-blue-600"}),"File Information"]}),l.jsx(At,{children:"Upload or link to educational files"})]}),l.jsxs(ve,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"title",children:"File Title *"}),l.jsx(be,{id:"title",placeholder:"e.g., Anatomy Reference Guide",value:s.title,onChange:g=>a(y=>({...y,title:g.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"description",children:"Description"}),l.jsx(ei,{id:"description",placeholder:"Describe the file content...",value:s.description,onChange:g=>a(y=>({...y,description:g.target.value})),rows:3})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"fileType",children:"File Type *"}),l.jsxs(N9,{value:s.fileType,onValueChange:g=>a(y=>({...y,fileType:g})),children:[l.jsx(mA,{children:l.jsx(T9,{placeholder:"Select file type"})}),l.jsx(vA,{children:h.map(g=>l.jsx(xA,{value:g,children:g},g))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"fileSize",children:"File Size"}),l.jsx(be,{id:"fileSize",placeholder:"e.g., 2.5 MB",value:s.fileSize,onChange:g=>a(y=>({...y,fileSize:g.target.value}))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"fileUrl",children:"File URL *"}),l.jsx(be,{id:"fileUrl",placeholder:"https://example.com/file.pdf or /uploads/file.pdf",value:s.fileUrl,onChange:g=>a(y=>({...y,fileUrl:g.target.value})),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload to Firebase Storage or use external links"})]})]})]}),s.title&&l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Preview"}),l.jsx(At,{children:"How the file will appear in the lecture"})]}),l.jsx(ve,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ti,{className:"h-8 w-8 text-blue-600"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:s.title}),s.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.fileType&&l.jsx(on,{variant:"secondary",children:s.fileType}),s.fileSize&&l.jsx(on,{variant:"outline",children:s.fileSize})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:c,children:[l.jsx(na,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add File"]})]})]})]})}function ww({video:n,lectureId:e,onClose:t,onSave:r}){const[s,a]=E.useState({title:(n==null?void 0:n.title)||"",description:(n==null?void 0:n.description)||"",url:(n==null?void 0:n.url)||(n==null?void 0:n.youtubeUrl)||"",duration:(n==null?void 0:n.duration)||"",thumbnailUrl:(n==null?void 0:n.thumbnailUrl)||"",platform:(n==null?void 0:n.platform)||"YouTube"}),[c,u]=E.useState(!1),h=async v=>{v.preventDefault(),u(!0);try{const b={...s,id:`video_${Date.now()}`,lectureId:e,uploadedAt:new Date,uploadedBy:"Current User"};r(b)}catch(b){console.error("Error saving video:",b)}finally{u(!1)}},p=v=>{const b=v.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return b?b[1]:null},g=v=>{const b=p(v);return b?`https://img.youtube.com/vi/${b}/maxresdefault.jpg`:""},y=v=>{a(b=>({...b,url:v,thumbnailUrl:g(v)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:t,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Video"}),l.jsx("p",{className:"text-muted-foreground",children:"Add a video resource to the lecture"})]})]})}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(Ws,{className:"h-5 w-5 text-green-600"}),"Video Information"]}),l.jsx(At,{children:"Add YouTube videos or other video links"})]}),l.jsxs(ve,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"title",children:"Video Title *"}),l.jsx(be,{id:"title",placeholder:"e.g., Introduction to Human Anatomy",value:s.title,onChange:v=>a(b=>({...b,title:v.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"description",children:"Description"}),l.jsx(ei,{id:"description",placeholder:"Describe the video content...",value:s.description,onChange:v=>a(b=>({...b,description:v.target.value})),rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"url",children:"Video URL *"}),l.jsx(be,{id:"url",placeholder:"https://youtube.com/watch?v=... or https://vimeo.com/...",value:s.url,onChange:v=>y(v.target.value),required:!0}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports YouTube, Vimeo, and direct video links"})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"duration",children:"Duration"}),l.jsx(be,{id:"duration",placeholder:"e.g., 45:30",value:s.duration,onChange:v=>a(b=>({...b,duration:v.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"platform",children:"Platform"}),l.jsx(be,{id:"platform",value:s.platform,onChange:v=>a(b=>({...b,platform:v.target.value})),disabled:!0})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"thumbnailUrl",children:"Thumbnail URL"}),l.jsx(be,{id:"thumbnailUrl",placeholder:"Auto-generated for YouTube videos",value:s.thumbnailUrl,onChange:v=>a(b=>({...b,thumbnailUrl:v.target.value}))})]})]})]}),s.title&&l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Preview"}),l.jsx(At,{children:"How the video will appear in the lecture"})]}),l.jsx(ve,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[s.thumbnailUrl?l.jsx("img",{src:s.thumbnailUrl,alt:s.title,className:"w-24 h-16 object-cover rounded"}):l.jsx("div",{className:"w-24 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(Cy,{className:"h-6 w-6 text-gray-400"})}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(Ws,{className:"h-8 w-8 text-white opacity-80"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-medium",children:s.title}),s.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.duration&&l.jsxs(on,{variant:"secondary",className:"text-xs",children:[l.jsx(zf,{className:"h-3 w-3 mr-1"}),s.duration]}),l.jsxs(on,{variant:"outline",className:"text-xs",children:[l.jsx(dk,{className:"h-3 w-3 mr-1"}),s.platform]})]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:c,children:[l.jsx(na,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Video"]})]})]})]})}function cm({lecture:n,subjectId:e,subjectName:t,yearType:r,onClose:s,onSave:a}){const[c,u]=E.useState({name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",order:(n==null?void 0:n.order)||1,imageUrl:(n==null?void 0:n.imageUrl)||""}),[h,p]=E.useState(!1),g=async y=>{y.preventDefault(),p(!0);try{const v={...c,subjectId:e,createdAt:new Date,uploadedBy:"Current User"};a(v)}catch(v){console.error("Error saving lecture:",v)}finally{p(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:s,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Add Lecture"}),l.jsxs("p",{className:"text-muted-foreground",children:["Add a new lecture to ",t]})]})]})}),l.jsxs("form",{onSubmit:g,className:"space-y-6",children:[l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[r==="basic"?l.jsx(Hu,{className:"h-5 w-5 text-blue-600"}):l.jsx(Ku,{className:"h-5 w-5 text-red-600"}),"Lecture Information"]}),l.jsx(At,{children:"Basic information about the lecture"})]}),l.jsxs(ve,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"name",children:"Lecture Name *"}),l.jsx(be,{id:"name",placeholder:"e.g., Introduction to Cell Biology",value:c.name,onChange:y=>u(v=>({...v,name:y.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"description",children:"Description"}),l.jsx(ei,{id:"description",placeholder:"Describe what this lecture covers...",value:c.description,onChange:y=>u(v=>({...v,description:y.target.value})),rows:4})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"order",children:"Order"}),l.jsx(be,{id:"order",type:"number",min:"1",value:c.order,onChange:y=>u(v=>({...v,order:parseInt(y.target.value)||1}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),l.jsx(be,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:y=>u(v=>({...v,imageUrl:y.target.value}))})]})]})]})]}),c.name&&l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Preview"}),l.jsxs(At,{children:["How the lecture will appear in ",t]})]}),l.jsx(ve,{children:l.jsx("div",{className:"p-4 border rounded-lg bg-secondary/20",children:l.jsxs("div",{className:"flex items-start gap-3",children:[c.imageUrl?l.jsx("img",{src:c.imageUrl,alt:c.name,className:"w-16 h-16 object-cover rounded",onError:y=>{y.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:l.jsx(gs,{className:"h-6 w-6 text-gray-400"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:c.name}),c.description&&l.jsx("p",{className:"text-sm text-muted-foreground",children:c.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Lecture ",c.order," â€¢ ",t]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:h,children:[l.jsx(na,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add Lecture"]})]})]})]})}async function _r(n){let e="dflp2vxn2",t="Med_just";const r="".replace(/\/$/,"");try{const I=await fetch(`${r}/api/cloudinary/config`);if(I.ok)try{const C=await I.json();e=C.cloudName||e,t=C.uploadPreset||C.upload_preset||t}catch{const C=I.headers.get("x-cloudinary-cloudname"),L=I.headers.get("x-cloudinary-upload-preset");C&&(e=e||C),L&&(t=t||L)}}catch{}if(!e)try{const I=localStorage.getItem("cloudinary.cloudName"),C=localStorage.getItem("cloudinary.uploadPreset");I&&(e=I,t=t||C||t)}catch{}if(!e)throw new Error("Cloudinary cloud name is not configured. Set VITE_CLOUDINARY_CLOUD_NAME in your environment or provide server config.");const s=`https://api.cloudinary.com/v1_1/${e}/upload`;try{const I=await P1(n);if(I&&typeof I=="string"&&I.startsWith("http"))return I}catch(I){const C=String((I==null?void 0:I.message)||I||"");console.warn("Server upload failed, falling back to client upload:",C)}async function a(I){if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.");try{const C=I.clone();try{return{json:await C.json(),text:null}}catch{}}catch{if(I.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}try{const C=await I.text();try{return{json:JSON.parse(C),text:C}}catch{return{json:null,text:C}}}catch(C){throw new Error("Could not read response body: "+String(C))}}async function c(I,C){const L=async(z,R)=>{const k=await fetch(z,R),D=await a(k).catch(O=>{throw O});return{res:k,body:D}},U=typeof I=="string"?I:I.url;try{return await L(U,C)}catch(z){const R=String((z==null?void 0:z.message)||z||"").toLowerCase();if(R.includes("response body already read")||R.includes("body already read")){const k=U+(U.includes("?")?`&_retry=${Date.now()}`:`?_retry=${Date.now()}`);try{return await L(k,C)}catch{}}if(R.includes("failed to fetch")||R.includes("networkerror")||R.includes("network request failed")||R.includes("script error")||R.includes("response body already read")||R.includes("body already read"))try{return await(async()=>await new Promise((k,D)=>{const O=new XMLHttpRequest;let M=C&&C.method||"GET",V=!1;try{if(O.open(M,U,!0),C&&C.headers){const P=C.headers;Object.keys(P).forEach(H=>{try{O.setRequestHeader(H,P[H])}catch{}})}if(O.onreadystatechange=()=>{if(O.readyState!==4)return;const P=O.status||0,H={};(O.getAllResponseHeaders()||"").split(`\r
`).forEach(le=>{const B=le.indexOf(":");if(B>0){const Z=le.substring(0,B).trim().toLowerCase(),he=le.substring(B+1).trim();H[Z]=he}});const K={ok:P>=200&&P<400,status:P,headers:{get:le=>H[le.toLowerCase()]||null}},te=O.responseText;let Q=null;try{Q=te?JSON.parse(te):null}catch{Q=null}k({res:K,body:{json:Q,text:te}})},O.onerror=()=>D(new Error("XHR network error")),O.ontimeout=()=>D(new Error("XHR timeout")),C&&C.body)try{if(C.body instanceof FormData)V=!0,O.send(C.body);else if(typeof C.body=="string")O.send(C.body);else try{O.send(JSON.stringify(C.body))}catch{O.send(String(C.body))}}catch(P){D(P)}else O.send()}catch(P){D(P)}}))()}catch{}throw z}}if(t){const I=new FormData;I.append("file",n),I.append("upload_preset",t);const{res:C,body:L}=await c(s,{method:"POST",body:I});if(!C.ok){const U=L!=null&&L.json?JSON.stringify(L.json):(L==null?void 0:L.text)||"";throw new Error(`Cloudinary upload failed: ${C.status} ${U}`)}if(L.json&&(L.json.secure_url||L.json.url))return L.json.secure_url||L.json.url;if(L.text&&typeof L.text=="string"&&L.text.startsWith("http"))return L.text;throw new Error("Cloudinary upload returned unexpected response.")}const u="686641252611351";let h,p;try{const I=await c(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})});h=I.res,p=I.body}catch(I){const C=String((I==null?void 0:I.message)||I||"");if(C.toLowerCase().includes("response body already read")||C.toLowerCase().includes("body already read")){try{const L=await fetch(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})}),U=L.headers.get("x-cloudinary-signature"),z=L.headers.get("x-cloudinary-timestamp"),R=L.headers.get("x-cloudinary-apikey"),k=L.headers.get("x-cloudinary-cloudname"),D=L.headers.get("x-cloudinary-upload-preset");if(U&&z){const O=R||u||null,M=U,V=Number(z);k&&(e=e||k);const P=new FormData;P.append("file",n),O&&P.append("api_key",O),P.append("timestamp",String(V)),P.append("signature",M);const{res:H,body:q}=await c(s,{method:"POST",body:P});if(!H.ok){const K=q!=null&&q.json?JSON.stringify(q.json):(q==null?void 0:q.text)||"",te=(K||"").toLowerCase();if(te.includes("missing required parameter - api_key")||te.includes("missing required parameter - api key")||te.includes("missing required parameter 'api_key'")){const Q=u||(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})();if(Q){const oe=new FormData;oe.append("file",n),oe.append("api_key",Q),oe.append("timestamp",String(V)),oe.append("signature",M);const{res:le,body:B}=await c(s,{method:"POST",body:oe});if(!le.ok){const Z=B!=null&&B.json?JSON.stringify(B.json):(B==null?void 0:B.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${le.status} ${Z}`)}if(B.json&&(B.json.secure_url||B.json.url))return B.json.secure_url||B.json.url;if(B.text&&typeof B.text=="string"&&B.text.startsWith("http"))return B.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}if(t){const oe=new FormData;oe.append("file",n),oe.append("upload_preset",t);const le=await fetch(s,{method:"POST",body:oe});if(!le.ok){const he=await le.text().catch(()=>"");throw new Error(`Cloudinary unsigned fallback failed: ${le.status} ${he}`)}const B=await le.json().catch(()=>null);if(B&&(B.secure_url||B.url))return B.secure_url||B.url;const Z=await le.text().catch(()=>"");if(Z&&Z.startsWith("http"))return Z;throw new Error("Cloudinary unsigned fallback returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${H.status} ${K}`)}if(q.json&&(q.json.secure_url||q.json.url))return q.json.secure_url||q.json.url;if(q.text&&typeof q.text=="string"&&q.text.startsWith("http"))return q.text;throw new Error("Cloudinary signed upload returned unexpected response.")}if(D){const O=new FormData;O.append("file",n),O.append("upload_preset",D);const M=await fetch(s,{method:"POST",body:O});if(!M.ok){const H=await M.text().catch(()=>"");throw new Error(`Cloudinary upload fallback failed: ${M.status} ${H}`)}const V=await M.json().catch(()=>null);if(V&&(V.secure_url||V.url))return V.secure_url||V.url;const P=await M.text().catch(()=>"");if(P&&P.startsWith("http"))return P;throw new Error("Cloudinary fallback upload returned unexpected response.")}}catch{}try{const L=await P1(n);if(L&&typeof L=="string"&&L.startsWith("http"))return L}catch{}throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}throw I}if(!h.ok){const I=p!=null&&p.json?JSON.stringify(p.json):(p==null?void 0:p.text)||"";throw new Error(`Cloudinary signing failed: ${h.status} ${I}`)}const g=p.json||{},{signature:y,apiKey:v,timestamp:b}=g,S=v||u;if(!y||!b)throw new Error("Cloudinary signing endpoint returned invalid data.");const w=new FormData;w.append("file",n),w.append("api_key",S),w.append("timestamp",String(b)),w.append("signature",y);const{res:_,body:A}=await c(s,{method:"POST",body:w});if(!_.ok){const I=A!=null&&A.json?JSON.stringify(A.json):(A==null?void 0:A.text)||"",C=(I||"").toLowerCase();if(C.includes("missing required parameter - api_key")||C.includes("missing required parameter - api key")||C.includes("missing required parameter 'api_key'")){const L=u;{const U=new FormData;U.append("file",n),U.append("api_key",L),U.append("timestamp",String(b)),U.append("signature",y);const{res:z,body:R}=await c(s,{method:"POST",body:U});if(!z.ok){const k=R!=null&&R.json?JSON.stringify(R.json):(R==null?void 0:R.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${z.status} ${k}`)}if(R.json&&(R.json.secure_url||R.json.url))return R.json.secure_url||R.json.url;if(R.text&&typeof R.text=="string"&&R.text.startsWith("http"))return R.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${_.status} ${I}`)}if(A.json&&(A.json.secure_url||A.json.url))return A.json.secure_url||A.json.url;if(A.text&&typeof A.text=="string"&&A.text.startsWith("http"))return A.text;throw new Error("Cloudinary signed upload returned unexpected response.")}async function P1(n){const e=await new Promise((t,r)=>{const s=new FileReader;s.onload=()=>t(s.result),s.onerror=()=>r(new Error("Failed to read file")),s.readAsDataURL(n)});return await new Promise((t,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?t(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:e,filename:n.name}))}catch(s){r(s)}}).catch(async t=>{try{const r=String((t==null?void 0:t.message)||"").toLowerCase();if(r.includes("cloudinary not configured")||r.includes("404")||r.includes("server upload failed"))return await new Promise((s,a)=>{try{const c=new XMLHttpRequest;c.open("POST",`${API_BASE}/api/imagekit/upload`,!0),c.setRequestHeader("Content-Type","application/json"),c.onreadystatechange=()=>{if(c.readyState!==4)return;const u=c.status||0,h=c.responseText||"";if(u<200||u>=400){let p=h;try{const g=h?JSON.parse(h):null;g&&g.error&&(p=g.error)}catch{}return a(new Error(`ImageKit server upload failed: ${u} ${p}`))}try{const p=h?JSON.parse(h):{};return p&&(p.url||p.filePath)?s(p.url||p.filePath):a(new Error("ImageKit server upload returned unexpected response"))}catch{return a(new Error("ImageKit server upload returned non-JSON response"))}},c.onerror=()=>a(new Error("ImageKit server upload XHR error")),c.send(JSON.stringify({file:e,filename:n.name}))}catch(c){a(c)}})}catch{}throw t})}function Ba(n,e,t){try{n&&localStorage.setItem("cloudinary.cloudName",n),e&&localStorage.setItem("cloudinary.uploadPreset",e),t&&localStorage.setItem("cloudinary.apiKey",t)}catch(r){console.warn("Could not persist Cloudinary config to localStorage",r)}}async function R1(n,e){if(!n)throw new Error("No URL provided");return await new Promise((t,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?t(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:n,filename:e||"remote"}))}catch(s){r(new Error("Failed to call server upload endpoint: "+String(s)))}})}const j9="".replace(/\/$/,"");async function A9(n,e){const t=await fetch(n,e);let r=null,s="";try{r=await t.json()}catch{try{s=await t.text()}catch{}}return{res:t,json:r,text:s}}async function qo(n,e){let t;typeof n=="string"?t=n:t=await new Promise((u,h)=>{const p=new FileReader;p.onload=()=>u(p.result),p.onerror=()=>h(new Error("Failed to read file")),p.readAsDataURL(n)});const r=`${j9}/api/imagekit/upload`,{res:s,json:a,text:c}=await A9(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:t,filename:e})});if(!s.ok){const u=a?JSON.stringify(a):c||"";throw new Error(`ImageKit server upload failed: ${s.status} ${u}`)}if(a&&(a.url||a.filePath||a.name))return a.url||a.filePath||a.name;throw new Error("ImageKit server upload returned unexpected response.")}function P9(){var Ht;const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,a]=E.useState(!1),[c,u]=E.useState(!1),[h,p]=E.useState(!1),[g,y]=E.useState(!1),[v,b]=E.useState(!1),[S,w]=E.useState(null),[_,A]=E.useState(null),[I,C]=E.useState(null),[L,U]=E.useState("basic"),[z,R]=E.useState({}),[k,D]=E.useState(null),[O,M]=E.useState(""),[V,P]=E.useState(""),[H,q]=E.useState(""),[K,te]=E.useState(""),[Q,oe]=E.useState(""),[le,B]=E.useState(""),[Z,he]=E.useState(""),[Ce,Fe]=E.useState(""),[Ne,xe]=E.useState(""),[Se,ze]=E.useState(""),[Me,rt]=E.useState(""),[st,Nt]=E.useState(null),Ot=Bc(),Tn=zi();_e.useEffect(()=>{const me=new URLSearchParams(Tn.search).get("batch");Nt(me)},[Tn.search]);const nn=(re,me)=>{R(De=>{var _t;return{...De,[re]:{videos:!1,files:!1,quizzes:!1,...De[re]||{},[me]:!((_t=De[re])!=null&&_t[me])}}})},{years:$n,batches:br,loading:Pt,error:un,retryConnection:Sr,updateYear:Xr,updateBatch:an,createSubject:Ns,createLecture:Ts,updateLecture:Vt,createYear:Tt,createBatch:zn,deleteBatch:xn,deleteLecture:Nr,deleteSubject:Jr,addVideo:Fr,addFile:Cs,addQuiz:ui}=Xc(),{news:Zr}=lw(),Bn=(re,me)=>{C(re),A(me),r(null),a(!0)},Is=(re,me)=>{console.log("ðŸ”„ Opening subject form for year:",re.yearNumber,"type:",me),w({id:re.id,number:re.yearNumber}),U(me),u(!0)},He=(re,me)=>{C(re),U(me),b(!0)},vt=(re,me)=>{C(re),A(me),p(!0)},ht=(re,me)=>{C(re),A(me),y(!0)};if(s)return l.jsx(gw,{quiz:t,onClose:()=>{a(!1),r(null),A(null)},onSave:async re=>{I!=null&&I.id&&_&&await ui(I.id,_,{title:re.title,description:re.description,questions:re.questions||[],timeLimit:re.timeLimit,passingScore:re.passingScore}),a(!1),r(null),A(null)}});if(console.log("ðŸ” Render check - isSubjectFormOpen:",c,"selectedYear:",S),c)return console.log("ðŸ“ Rendering SubjectForm"),l.jsx(Sj,{year:S==null?void 0:S.number,yearType:L,onClose:()=>{u(!1),w(null)},onSave:async re=>{try{await Ns({...re,yearId:(S==null?void 0:S.id)||"",order:1}),u(!1),w(null)}catch(me){console.error("Error saving subject:",me),alert("Failed to save subject. Please try again.")}}});if(v){const re=_?(Ht=I==null?void 0:I.lectures)==null?void 0:Ht.find(me=>me.id===_):null;return l.jsx(cm,{lecture:re,subjectId:I==null?void 0:I.id,subjectName:I==null?void 0:I.name,yearType:L,onClose:()=>{b(!1),C(null),A(null)},onSave:async me=>{try{re?await Vt(re.id,me):await Ts(me),b(!1),C(null),A(null)}catch(De){console.error("Error saving lecture:",De),alert("Failed to save lecture. Please try again.")}}})}if(h)return l.jsx(xw,{lectureId:_,onClose:()=>{p(!1),A(null)},onSave:async re=>{I!=null&&I.id&&_&&await Cs(I.id,_,re),p(!1),A(null)}});if(g)return l.jsx(ww,{lectureId:_,onClose:()=>{y(!1),A(null)},onSave:async re=>{I!=null&&I.id&&_&&await Fr(I.id,_,re),y(!1),A(null)}});const Ut=(re,me)=>{var De,_t;return l.jsxs(ye,{className:`border-l-4 ${me==="basic"?"border-l-blue-500":"border-l-red-500"}`,children:[l.jsx(Ke,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[re.imageUrl?l.jsx("img",{src:re.imageUrl,alt:`Year ${re.yearNumber}`,className:"w-24 h-24 object-cover rounded-md flex-shrink-0",onError:it=>{it.currentTarget.style.display="none"}}):l.jsx("div",{className:"w-24 h-24 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:me==="basic"?l.jsx(Hu,{className:"h-6 w-6 text-blue-600"}):l.jsx(Ku,{className:"h-6 w-6 text-red-600"})}),l.jsx(Xe,{className:"flex flex-col",children:k===re.id?l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(be,{value:O,onChange:it=>M(it.target.value),className:"w-48",placeholder:"Batch name"}),l.jsx(ne,{size:"sm",onClick:async()=>{try{await(Xr==null?void 0:Xr(re.id,{batchName:O,batch_name:O})),D(null),M("")}catch(it){console.error(it),alert("Failed to save batch name")}},children:"Save"}),l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{D(null),M("")},children:"Cancel"})]}):l.jsx(l.Fragment,{children:re.batchName?l.jsxs(l.Fragment,{children:[l.jsx(Jn,{to:`/admin/years/${re.id}`,className:"text-lg font-bold text-foreground hover:underline",children:re.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[l.jsxs("span",{className:"text-sm text-muted",children:["Year ",re.yearNumber]}),re.name&&l.jsxs("span",{className:"ml-2",children:["â€¢ ",re.name]}),re.academicSupervisor&&l.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",re.academicSupervisor]}),re.cr&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",re.cr]}),re.actor&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",re.actor]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs(Jn,{to:`/admin/years/${re.id}`,className:"text-lg font-medium text-blue-600 hover:underline",children:["Year ",re.yearNumber]}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[re.name?l.jsx("span",{className:"mr-2",children:re.name}):l.jsx("span",{className:"italic",children:"No batch name"}),re.academicSupervisor&&l.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",re.academicSupervisor]}),re.cr&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",re.cr]}),re.actor&&l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",re.actor]})]})]})})})]}),l.jsx("div",{className:"flex items-center gap-2"})]})}),l.jsx(ve,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(gs,{className:"h-4 w-4 text-blue-600"}),l.jsx("span",{className:"font-semibold",children:"Subjects"}),l.jsxs(on,{variant:"secondary",children:[((De=re.subjects)==null?void 0:De.length)||0," subjects"]}),l.jsxs(on,{variant:"outline",children:[(Zr||[]).filter(it=>it.yearId===re.id).length," ","news"]})]}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>Is(re,me),className:"flex items-center gap-1",children:[l.jsx(Zt,{className:"h-3 w-3"}),"Add Subject"]})]}),!re.subjects||re.subjects.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(gs,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),l.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No subjects added yet"}),l.jsx(ne,{variant:"outline",size:"sm",onClick:()=>Is(re,me),children:"Add first subject"})]}):l.jsx("div",{className:"grid gap-4",children:(_t=re.subjects)==null?void 0:_t.map(it=>{var ft;return l.jsxs(ye,{className:"bg-secondary/10",children:[l.jsx(Ke,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[it.imageUrl?l.jsx("img",{src:it.imageUrl,alt:it.name,className:"w-8 h-8 object-cover rounded",onError:Ae=>{Ae.currentTarget.style.display="none"}}):l.jsx(gs,{className:"h-5 w-5 text-blue-600"}),l.jsx(Jn,{to:`/admin/subjects/${it.id}`,className:"font-medium text-lg text-blue-600 hover:underline",children:it.name}),l.jsxs(on,{variant:"outline",className:"text-xs",children:[((ft=it.lectures)==null?void 0:ft.length)||0," lectures"]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>He(it,me),className:"h-8 px-3 text-xs",children:[l.jsx(Zt,{className:"h-3 w-3 mr-1"}),"Add Lecture"]}),l.jsx(ne,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:async()=>{if(confirm(`Delete subject "${it.name}"? This will remove its lectures.`))try{await Jr(it.id)}catch(Ae){console.error(Ae),alert("Failed to delete subject")}},children:l.jsx(Vn,{className:"h-3 w-3"})})]})]})}),it.lectures&&it.lectures.length>0&&l.jsx(ve,{className:"pt-0",children:l.jsxs("div",{className:"grid gap-3",children:[it.lectures.slice(0,3).map(Ae=>{var Kt,di,or,js,As,hi,ar,qi,dl;return l.jsx(ye,{className:"bg-background border",children:l.jsx(ve,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:Ae.imageUrl?l.jsx("img",{src:Ae.imageUrl,alt:Ae.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Ws,{className:"h-6 w-6 text-muted-foreground"})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:Ae.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:Ae.description||"No description available"}),l.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>nn(Ae.id,"videos"),className:`h-6 px-2 text-xs ${(Kt=z[Ae.id])!=null&&Kt.videos?"bg-accent":""}`,children:[l.jsx(Cy,{className:"h-3 w-3 mr-1"}),"Videos (",((di=Ae.videos)==null?void 0:di.length)||0,")"]}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>nn(Ae.id,"files"),className:`h-6 px-2 text-xs ${(or=z[Ae.id])!=null&&or.files?"bg-accent":""}`,children:[l.jsx(ti,{className:"h-3 w-3 mr-1"}),"Files (",((js=Ae.files)==null?void 0:js.length)||0,")"]}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>nn(Ae.id,"quizzes"),className:`h-6 px-2 text-xs ${(As=z[Ae.id])!=null&&As.quizzes?"bg-accent":""}`,children:[l.jsx(ki,{className:"h-3 w-3 mr-1"}),"Quizzes (",((hi=Ae.quizzes)==null?void 0:hi.length)||0,")"]}),l.jsx(ne,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{A(Ae.id),C(it),b(!0)},title:"Edit Lecture",children:l.jsx(Ai,{className:"h-3 w-3"})}),l.jsx(ne,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${Ae.name}"?`))try{await Nr(it.id,Ae.id)}catch($t){console.error($t),alert("Failed to delete lecture")}},children:l.jsx(Vn,{className:"h-3 w-3"})})]}),((ar=z[Ae.id])==null?void 0:ar.videos)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Videos:"}),l.jsxs(ne,{variant:"ghost",size:"xs",onClick:()=>ht(it,Ae.id),className:"h-6 px-2 text-xs",children:[l.jsx(Zt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[Ae.videos&&Ae.videos.length>0?Ae.videos.slice(0,4).map($t=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Cy,{className:"h-3 w-3 text-blue-600"}),l.jsx("a",{href:$t.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate",children:$t.title||$t.name||"Untitled Video"})]},$t.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"}),Ae.videos&&Ae.videos.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Ae.videos.length-4," more videos"]})]})]}),((qi=z[Ae.id])==null?void 0:qi.files)&&l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Files:"}),l.jsxs(ne,{variant:"ghost",size:"xs",onClick:()=>vt(it,Ae.id),className:"h-6 px-2 text-xs",children:[l.jsx(Zt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[Ae.files&&Ae.files.length>0?Ae.files.slice(0,4).map($t=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ti,{className:"h-3 w-3 text-green-600"}),l.jsx("a",{href:$t.fileUrl||$t.url||"#",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 hover:underline truncate",onClick:hl=>{!$t.fileUrl&&!$t.url&&(hl.preventDefault(),alert("No file URL available"))},children:$t.title||$t.name||"Untitled File"})]},$t.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"}),Ae.files&&Ae.files.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Ae.files.length-4," more files"]})]})]}),((dl=z[Ae.id])==null?void 0:dl.quizzes)&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Quizzes:"}),l.jsxs(ne,{variant:"ghost",size:"xs",onClick:()=>Bn(it,Ae.id),className:"h-6 px-2 text-xs",children:[l.jsx(Zt,{className:"h-3 w-3 mr-1"})," Add"]})]}),l.jsxs("div",{className:"space-y-1",children:[Ae.quizzes&&Ae.quizzes.length>0?Ae.quizzes.slice(0,4).map($t=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ki,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{className:"text-xs text-purple-600",children:$t.title||$t.name||"Untitled Quiz"})]},$t.id)):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"}),Ae.quizzes&&Ae.quizzes.length>4&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Ae.quizzes.length-4," more quizzes"]})]})]})]})]})})},Ae.id)}),it.lectures.length>3&&l.jsxs("div",{className:"text-center text-muted-foreground text-xs pt-2",children:["+",it.lectures.length-3," more lectures"]})]})})]},it.id)})})]})})]},re.yearNumber)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Academic Years Management"}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("p",{className:"text-muted-foreground",children:"Manage curriculum by academic years, subjects, and lectures"})})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs(Tz,{children:[l.jsx(Cz,{asChild:!0,children:l.jsxs(ne,{children:[l.jsx(ck,{className:"h-4 w-4 mr-2"})," Add Batch"]})}),l.jsxs(xj,{children:[l.jsxs(wj,{children:[l.jsx(Ej,{children:"Add Batch"}),l.jsx(bj,{children:"Create a new batch for grouping years"})]}),l.jsxs("div",{className:"space-y-3 mt-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Batch name"}),l.jsx(be,{value:Z,onChange:re=>he(re.target.value),placeholder:"e.g., Batch A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"CR (optional)"}),l.jsx(be,{value:Ce,onChange:re=>Fe(re.target.value),placeholder:"Class representative"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Group Link (optional)"}),l.jsx(be,{value:Ne,onChange:re=>xe(re.target.value),placeholder:"WhatsApp/Telegram group link"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Graduate Date (optional)"}),l.jsx(be,{value:Se,onChange:re=>ze(re.target.value),placeholder:"e.g., 2025-06-15",type:"date"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Academic Supervisor (optional)"}),l.jsx(be,{value:Me,onChange:re=>rt(re.target.value),placeholder:"e.g., Dr. Ahmed Hassan"})]})]}),l.jsxs(_j,{className:"mt-4",children:[l.jsx(ne,{onClick:async()=>{try{if(!Z||!Z.trim()){alert("Please provide a batch name");return}await(zn==null?void 0:zn({batchName:Z.trim(),cr:Ce==null?void 0:Ce.trim(),groupLink:Ne==null?void 0:Ne.trim(),group_link:Ne==null?void 0:Ne.trim(),graduateDate:Se==null?void 0:Se.trim(),graduate_date:Se==null?void 0:Se.trim(),academicSupervisor:Me==null?void 0:Me.trim(),academic_supervisor:Me==null?void 0:Me.trim()})),he(""),Fe(""),xe(""),ze(""),rt("");const re=document.querySelector("[data-dialog-close]");re&&re.click(),alert("Batch created")}catch(re){console.error(re),alert("Failed to create batch")}},children:"Create"}),l.jsx(jz,{asChild:!0,children:l.jsx(ne,{variant:"ghost",className:"ml-2","data-dialog-close":!0,children:"Cancel"})})]})]})]})})]}),Pt&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx(sl,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading academic years..."})]})}),un&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading years"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:un}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(ne,{onClick:Sr,variant:"outline",children:"Retry Connection"}),l.jsx(ne,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!Pt&&!un&&l.jsxs(l.Fragment,{children:[l.jsx(ye,{children:l.jsx(ve,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(be,{placeholder:"Search lectures, subjects, or content...",value:n,onChange:re=>e(re.target.value),className:"pl-10"})]})})}),l.jsx("div",{className:"space-y-6",children:!br||br.length===0?l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx(gs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No batches found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a batch to start adding academic years."})]})}):st?(()=>{const re=(br||[]).find(De=>De.id===st)||null,me=($n||[]).filter(De=>(De.batchId||De.batch_name)===st);return l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[re!=null&&re.imageUrl?l.jsx("img",{src:re.imageUrl,alt:re.batchName,className:"w-40 h-40 object-cover rounded-md flex-shrink-0"}):l.jsx("div",{className:"w-40 h-40 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:l.jsx(gs,{className:"h-6 w-6 text-muted-foreground"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold",children:(re==null?void 0:re.batchName)||"Batch"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:re!=null&&re.cr?`CR: ${re.cr}`:""})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ne,{onClick:()=>{Nt(null),Ot("/admin/years")},children:"Back to Batches"}),l.jsx(ne,{size:"sm",variant:"ghost",onClick:async()=>{try{const De=document.createElement("input");De.type="file",De.accept="image/*",De.onchange=async()=>{var it;const _t=(it=De.files)==null?void 0:it[0];if(_t)try{let ft=null;try{ft=await _r(_t)}catch(Ae){console.warn("Cloudinary upload failed, trying ImageKit",(Ae==null?void 0:Ae.message)||Ae),ft=await qo(_t,_t.name)}if(!ft){alert("Upload failed");return}await(an==null?void 0:an(re==null?void 0:re.id,{image_url:ft,imageUrl:ft})),alert("Image updated")}catch(ft){console.error(ft),alert("Failed to upload image")}},De.click()}catch(De){console.error(De),alert("Could not open file dialog")}},children:"Change Image"}),l.jsxs(ne,{onClick:async()=>{try{const De=window.prompt("Enter year number for this batch:");if(!De)return;const _t=parseInt(De,10);if(isNaN(_t)){alert("Invalid");return}await(Tt==null?void 0:Tt((re==null?void 0:re.id)||null,{yearNumber:_t})),alert("Year created")}catch(De){console.error(De),alert("Failed")}},children:[l.jsx(Zt,{className:"h-4 w-4 mr-2"})," Add Year"]}),l.jsxs(ne,{variant:"destructive",onClick:async()=>{try{if(!confirm("Delete this batch and all its years?"))return;await(xn==null?void 0:xn(re==null?void 0:re.id)),Nt(null),Ot("/admin/years"),alert("Batch deleted")}catch(De){console.error(De),alert("Failed to delete batch")}},children:[l.jsx(Vn,{className:"h-4 w-4"})," Delete"]})]})]}),l.jsx("div",{className:"mt-4 space-y-4",children:me.length===0?l.jsx(ye,{children:l.jsx(ve,{className:"p-6 text-center",children:"No years in this batch yet."})}):me.sort((De,_t)=>De.yearNumber-_t.yearNumber).map(De=>l.jsx("div",{children:Ut(De,De.type)},De.id))})]})})():l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:(br||[]).map(re=>l.jsxs(ye,{className:"cursor-pointer flex flex-col overflow-hidden",onClick:()=>{Ot(`/admin/years?batch=${re.id}`),Nt(re.id)},children:[l.jsx(Ke,{className:"flex-1",onClick:me=>k===re.id&&me.stopPropagation(),children:l.jsxs("div",{className:"flex items-start gap-4",children:[re.imageUrl?l.jsx("img",{src:re.imageUrl,alt:re.batchName,className:"w-56 h-56 object-cover rounded-md flex-shrink-0"}):l.jsx("div",{className:"w-56 h-56 rounded-md flex-shrink-0 bg-muted"}),l.jsx("div",{className:"flex-1 min-w-0",children:k===re.id?l.jsxs("div",{className:"flex flex-col gap-2 w-full",onClick:me=>me.stopPropagation(),children:[l.jsx(be,{value:O,onChange:me=>M(me.target.value),placeholder:"Batch name",className:"w-full",onClick:me=>me.stopPropagation()}),l.jsx(be,{value:V||"",onChange:me=>P(me.target.value),placeholder:"CR",className:"w-full",onClick:me=>me.stopPropagation()}),l.jsx(be,{value:H,onChange:me=>q(me.target.value),placeholder:"Image URL (or upload)",className:"w-full",onClick:me=>me.stopPropagation()}),l.jsx(be,{value:K||"",onChange:me=>te(me.target.value),placeholder:"Group Link",className:"w-full",onClick:me=>me.stopPropagation()}),l.jsx(be,{value:Q||"",onChange:me=>oe(me.target.value),placeholder:"Graduate Date (e.g., 2025-06-15)",type:"date",className:"w-full",onClick:me=>me.stopPropagation()}),l.jsx(be,{value:le||"",onChange:me=>B(me.target.value),placeholder:"Academic Supervisor",className:"w-full",onClick:me=>me.stopPropagation()}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ne,{size:"sm",onClick:me=>{me.stopPropagation();try{const De=document.createElement("input");De.type="file",De.accept="image/*",De.onchange=async()=>{var it;const _t=(it=De.files)==null?void 0:it[0];if(_t)try{let ft=null;try{ft=await _r(_t)}catch(Ae){console.warn("Cloudinary upload failed, trying ImageKit",(Ae==null?void 0:Ae.message)||Ae),ft=await qo(_t,_t.name)}if(!ft){alert("Upload failed");return}q(ft)}catch(ft){console.error(ft),alert("Upload failed")}},De.click()}catch(De){console.error(De),alert("Could not open file dialog")}},children:"Upload"}),l.jsx(ne,{size:"sm",onClick:async me=>{me.stopPropagation();try{await(an==null?void 0:an(re.id,{batch_name:O,batchName:O,cr:V,image_url:H,imageUrl:H,group_link:K,groupLink:K,graduate_date:Q,graduateDate:Q,academic_supervisor:le,academicSupervisor:le})),D(null),M(""),P(""),q(""),te(""),oe(""),B(""),alert("Saved")}catch(De){console.error(De),alert("Failed to save")}},children:"Save"}),l.jsx(ne,{size:"sm",variant:"ghost",onClick:me=>{me.stopPropagation(),D(null),M(""),P(""),q(""),te(""),oe(""),B("")},children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(Xe,{className:"text-lg",children:re.batchName||"Batch"}),l.jsxs(At,{className:"text-sm text-muted-foreground space-y-1",children:[re.cr&&l.jsxs("div",{children:["CR: ",re.cr]}),(re.academicSupervisor||re.academic_supervisor)&&l.jsxs("div",{children:["Supervisor: ",re.academicSupervisor||re.academic_supervisor]}),re.graduateDate&&l.jsxs("div",{children:["Graduate: ",re.graduateDate]}),re.groupLink&&l.jsx("a",{href:re.groupLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",onClick:me=>me.stopPropagation(),children:"ðŸ“± Group Link"})]})]})})]})}),l.jsx(ve,{className:"mt-auto",onClick:me=>k===re.id&&me.stopPropagation(),children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Years:"," ",($n||[]).filter(me=>(me.batchId||me.batch_name)===re.id).length]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ne,{size:"sm",variant:"outline",onClick:me=>{me.stopPropagation(),Ot(`/admin/years?batch=${re.id}`),Nt(re.id)},children:"View Years"}),l.jsx(ne,{size:"sm",variant:"ghost",onClick:me=>{me.stopPropagation(),D(re.id),M(re.batchName||""),P(re.cr||""),q(re.imageUrl||""),te(re.groupLink||re.group_link||""),oe(re.graduateDate||re.graduate_date||""),B(re.academicSupervisor||re.academic_supervisor||"")},children:"Edit"}),l.jsx(ne,{size:"sm",variant:"ghost",onClick:async me=>{me.stopPropagation();try{const De=document.createElement("input");De.type="file",De.accept="image/*",De.onchange=async()=>{var it;const _t=(it=De.files)==null?void 0:it[0];if(_t)try{let ft=null;try{ft=await _r(_t)}catch(Ae){console.warn("Cloudinary upload failed, trying ImageKit",(Ae==null?void 0:Ae.message)||Ae),ft=await qo(_t,_t.name)}if(!ft){alert("Upload failed");return}await(an==null?void 0:an(re.id,{image_url:ft,imageUrl:ft})),alert("Image updated")}catch(ft){console.error(ft),alert("Failed to upload image")}},De.click()}catch(De){console.error(De),alert("Could not open file dialog")}},children:"Change Image"}),l.jsx(ne,{size:"sm",variant:"destructive",onClick:async me=>{me.stopPropagation();try{if(!confirm("Delete this batch and all its years? This cannot be undone."))return;await(xn==null?void 0:xn(re.id)),alert("Batch deleted")}catch(De){console.error(De),alert("Failed to delete batch")}},children:"Delete"})]})]})})]},re.id))})})]})]})}function R9(){var U;const{id:n}=FN(),[e,t]=E.useState(!1),[r,s]=E.useState(!1),[a,c]=E.useState(null),[u,h]=E.useState(null),[p,g]=E.useState(""),{years:y,loading:v,updateYear:b,createSubject:S,createLecture:w,deleteSubject:_,deleteLecture:A}=Xc(),I=y.find(z=>z.id===n);if(v)return l.jsx(ye,{children:l.jsx(ve,{className:"text-center py-12",children:"Loading..."})});if(!I)return l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"Year not found"}),l.jsx("div",{className:"flex gap-2 justify-center",children:l.jsx(Jn,{to:"/admin/years",children:l.jsx(ne,{variant:"outline",children:"Back to Years"})})})]})});const C=async z=>{try{await S({...z,yearId:I.id}),t(!1)}catch(R){console.error(R),alert("Failed to add subject")}},L=async z=>{try{await w(z),s(!1),c(null)}catch(R){console.error(R),alert("Failed to add lecture")}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Jn,{to:"/admin/years",children:l.jsxs(ne,{variant:"ghost",children:[l.jsx(ii,{className:"h-4 w-4 mr-2"})," Back"]})}),l.jsxs("div",{children:[I.batchName?l.jsxs(l.Fragment,{children:[l.jsx("h1",{className:"text-2xl font-bold",children:I.batchName}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Year ",I.yearNumber]})]}):l.jsxs("h1",{className:"text-2xl font-bold",children:["Year ",I.yearNumber]}),l.jsx("p",{className:"text-muted-foreground",children:"Manage subjects and lectures for this year"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:!window.__yearEditing&&l.jsxs(l.Fragment,{children:[l.jsxs(ne,{variant:"ghost",onClick:async()=>{try{const z=document.createElement("input");z.type="file",z.accept="image/*",z.onchange=async()=>{var k;const R=(k=z.files)==null?void 0:k[0];if(R)try{let D=null;try{D=await _r(R)}catch(O){console.warn("Cloudinary upload failed, attempting ImageKit fallback:",(O==null?void 0:O.message)||O);try{D=await qo(R,R.name)}catch(M){throw console.error("ImageKit upload also failed:",M),O}}if(!D||typeof D!="string"||!D.startsWith("http")){console.error("Invalid upload response:",D),alert("Image upload failed: unexpected response from upload provider"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:D,image_url:D})),window.__yearEditing=!1}catch(D){console.error(D);const M=((D==null?void 0:D.message)||String(D)||"").toLowerCase();if(M.includes("cloudinary cloud name is not configured")){const V=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!V){alert("No cloud name provided. Upload cancelled."),window.__yearEditing=!1;return}const P=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),H=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{Ba(V,P||null,H||null);const q=await _r(R);if(console.log("Cloudinary upload result after config:",q),!q||typeof q!="string"||!q.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:q,image_url:q}))}catch(q){console.error(q),alert("Image upload failed after configuring Cloudinary: "+(q.message||q))}window.__yearEditing=!1;return}else if(M.includes("cloudinary signing did not return an api key")||M.includes("missing required parameter - api_key")||M.includes("missing required parameter 'api_key'")){const V=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(V&&V.trim())try{Ba(null,null,V.trim());const P=await _r(R);if(!P||typeof P!="string"||!P.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(b==null?void 0:b(I.id,{imageUrl:P,image_url:P})),window.__yearEditing=!1;return}catch(P){console.error(P),alert("Image upload failed after setting API key: "+(P.message||P)),window.__yearEditing=!1;return}}alert("Image upload failed: "+(D.message||D))}},z.click()}catch(z){console.error(z),alert("Could not open file dialog")}},children:[l.jsx(vk,{className:"h-4 w-4 mr-2"})," ",I.imageUrl?"Change Image":"Add Image"]}),l.jsx(ne,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("academicSupervisor"),g(I.academicSupervisor||I.acadmic_supervisor||"")},children:"Academic Supervisor"}),l.jsx(ne,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("actor"),g(I.actor||"")},children:"Actor"}),l.jsx(ne,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("groupUrl"),g(I.groupUrl||I.group_url||"")},children:"Group URL"}),l.jsx(ne,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("batchName"),g(I.batchName||I.batch_name||"")},children:"Batch Name"}),I.imageUrl&&l.jsx(ne,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm("Remove year image?"))try{await(b==null?void 0:b(I.id,{imageUrl:""}))}catch(z){console.error(z),alert("Failed to remove year image")}},children:l.jsx(Vn,{className:"h-3 w-3"})})]})})]}),u&&l.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[l.jsx(be,{placeholder:u==="image"?"Image URL":u==="groupUrl"?"Group URL":u==="academicSupervisor"?"Academic Supervisor":"Actor",value:p,onChange:z=>g(z.target.value),className:"w-full max-w-2xl"}),l.jsx(ne,{onClick:async()=>{try{const z={};u==="image"?z.imageUrl=p:u==="academicSupervisor"?(z.academicSupervisor=p,z.acadmic_supervisor=p):u==="actor"?z.actor=p:u==="groupUrl"?(z.groupUrl=p,z.group_url=p):u==="batchName"&&(z.batchName=p,z.batch_name=p),await(b==null?void 0:b(I.id,z)),h(null),g(""),window.__yearEditing=!1}catch(z){console.error(z),alert("Failed to save field")}},children:"Save"}),l.jsx(ne,{variant:"ghost",onClick:()=>{h(null),g(""),window.__yearEditing=!1},children:"Cancel"})]}),l.jsxs(ye,{children:[l.jsx(Ke,{children:l.jsxs(Xe,{className:"flex items-center gap-2",children:["Subjects",l.jsxs(on,{variant:"secondary",children:[((U=I.subjects)==null?void 0:U.length)||0," subjects"]})]})}),l.jsxs(ve,{children:[l.jsx("div",{className:"flex justify-end mb-4",children:l.jsxs(ne,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[l.jsx(Zt,{className:"h-3 w-3"})," Add Subject"]})}),!I.subjects||I.subjects.length===0?l.jsx("div",{className:"text-center py-8",children:"No subjects added yet."}):l.jsx("div",{className:"grid gap-4",children:I.subjects.map(z=>l.jsxs(ye,{className:"bg-secondary/10",children:[l.jsx(Ke,{className:"pb-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[z.imageUrl?l.jsx("img",{src:z.imageUrl,alt:z.name,className:"w-8 h-8 object-cover rounded"}):l.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-lg",children:z.name}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[(z.lectures||[]).length," lectures"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ne,{onClick:()=>{c(z),s(!0)},variant:"ghost",size:"sm",children:"Add Lecture"}),l.jsx(ne,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete subject "${z.name}"?`))try{await _(z.id)}catch(R){console.error(R),alert("Failed to delete subject")}},children:l.jsx(Vn,{className:"h-3 w-3"})})]})]})}),z.lectures&&z.lectures.length>0&&l.jsx(ve,{children:l.jsx("div",{className:"grid gap-3",children:z.lectures.map(R=>l.jsx(ye,{className:"bg-background border",children:l.jsx(ve,{className:"p-3",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:R.imageUrl?l.jsx("img",{src:R.imageUrl,alt:R.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"No image"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:R.name}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:R.description||"No description available"})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(ne,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${R.name}"?`))try{await A(z.id,R.id)}catch(k){console.error(k),alert("Failed to delete lecture")}},children:l.jsx(Vn,{className:"h-3 w-3"})})})]})})},R.id))})})]},z.id))})]})]}),e&&l.jsx(Sj,{year:I.yearNumber,yearType:I.type,onClose:()=>t(!1),onSave:C}),r&&a&&l.jsx(cm,{subjectId:a.id,subjectName:a.name,yearType:I.type,onClose:()=>{s(!1),c(null)},onSave:L})]})}function um(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const p=Er(qs(Ve,"lectures")),g=oa(p,async y=>{var b;const v=[];for(const S of y.docs){const w=S.data(),_=S.id,A=S.ref,I=await Ft(ot(A,"files")),C=[];I.forEach(k=>{var O;const D=k.data();C.push({id:k.id,title:D.title||"",fileUrl:D.url||D.fileUrl||"",fileType:D.fileType||"",fileSize:D.fileSize||"",description:D.description||"",uploadedAt:((O=D.uploadedAt)==null?void 0:O.toDate())||new Date,uploadedBy:D.uploadedBy||""})});const L=await Ft(ot(A,"quizzes")),U=[];L.forEach(k=>{var O;const D=k.data();U.push({id:k.id,title:D.title||"",description:D.description||"",questions:D.questions||[],timeLimit:D.duration||30,passingScore:D.passRate||70,createdAt:((O=D.createdAt)==null?void 0:O.toDate())||new Date,createdBy:D.uploadedBy||""})});const z=await Ft(ot(A,"videos")),R=[];z.empty?(w.videos||[]).forEach(D=>{var O,M;R.push({id:D.id||D.videoId||"",title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:((M=(O=D.uploadedAt)==null?void 0:O.toDate)==null?void 0:M.call(O))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}):z.forEach(k=>{var O,M;const D=k.data();R.push({id:k.id,title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:((M=(O=D.uploadedAt)==null?void 0:O.toDate)==null?void 0:M.call(O))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}),v.push({id:_,title:w.title||"",description:w.description||"",subject:w.subjectId||"Unknown",order:w.order||1,createdAt:((b=w.createdAt)==null?void 0:b.toDate())||new Date,createdBy:w.uploadedBy||"",videos:R,files:C,quizzes:U})}v.sort((S,w)=>(S.order||0)-(w.order||0)),e(v),r(!1)},y=>{console.error("Error fetching lectures:",y),a("Failed to fetch lectures"),r(!1)});return()=>g()},[]),{lectures:n,loading:t,error:s,createLecture:async(p,g)=>{try{const y=Mt(Ve,"Subjects",g),v=ot(y,"lectures"),{videos:b,files:S,quizzes:w,..._}=p,A=await bn(v,{..._,videos:b,subjectId:g});if(S&&S.length>0){const I=ot(A,"files");for(const C of S)await bn(I,C)}if(w&&w.length>0){const I=ot(A,"quizzes");for(const C of w)await bn(I,C)}}catch(y){throw console.error("Error creating lecture:",y),y}},updateLecture:async(p,g)=>{try{const y=Er(qs(Ve,"lectures")),v=await Ft(y);for(const b of v.docs)if(b.id===p){await pn(b.ref,g);break}}catch(y){throw console.error("Error updating lecture:",y),y}},deleteLecture:async p=>{try{const g=Er(qs(Ve,"lectures")),y=await Ft(g);for(const v of y.docs)if(v.id===p){await Dr(v.ref);break}}catch(g){throw console.error("Error deleting lecture:",g),g}}}}function k1(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,a]=E.useState(!1),[c,u]=E.useState(!1),[h,p]=E.useState(!1),[g,y]=E.useState(!1),[v,b]=E.useState(null),[S,w]=E.useState(null),[_,A]=E.useState(null),{lectures:I,loading:C,error:L,createLecture:U,updateLecture:z}=um(),[R]=Ad(),k=R.get("lecture");R.get("tab");let D=I.filter(q=>q.title.toLowerCase().includes(n.toLowerCase())||q.subject.toLowerCase().includes(n.toLowerCase()));k&&(D=I.filter(q=>q.id===k));const O=()=>{r(null),a(!0)},M=q=>{r(q),a(!0)},V=q=>{b(q),u(!0)},P=q=>{w(q),p(!0)},H=q=>{A(q),y(!0)};return c?l.jsx(ww,{video:v,onClose:()=>{u(!1),b(null)},onSave:async q=>{try{v&&(console.log("âœ… Video updated successfully"),alert("Video updated! The page will reload to show changes."),window.location.reload()),u(!1),b(null)}catch(K){console.error("Error saving video:",K),alert("Failed to save video")}}}):h?l.jsx(xw,{file:S,onClose:()=>{p(!1),w(null)},onSave:async q=>{try{S&&(console.log("âœ… File updated successfully"),alert("File updated! The page will reload to show changes."),window.location.reload()),p(!1),w(null)}catch(K){console.error("Error saving file:",K),alert("Failed to save file")}}}):g?l.jsx(gw,{quiz:_,onClose:()=>{y(!1),A(null)},onSave:async q=>{try{_&&(console.log("âœ… Quiz updated successfully"),alert("Quiz updated! The page will reload to show changes."),window.location.reload()),y(!1),A(null)}catch(K){console.error("Error saving quiz:",K),alert("Failed to save quiz")}}}):s?l.jsx(cm,{lecture:t,onClose:()=>{a(!1),r(null)},onSave:async q=>{try{t?await z(t.id,q):await U(q,"default-subject"),a(!1),r(null)}catch(K){console.error("Error saving lecture:",K)}}}):(k&&I.find(q=>q.id===k),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Resources Management"}),l.jsx("p",{className:"text-muted-foreground",children:"Organize educational content by lectures with videos, files, and quizzes"})]}),l.jsxs(ne,{onClick:O,className:"flex items-center gap-2",children:[l.jsx(Zt,{className:"h-4 w-4"}),"Create Lecture"]})]}),l.jsx(ye,{children:l.jsx(ve,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(be,{placeholder:"Search lectures by title or subject...",value:n,onChange:q=>e(q.target.value),className:"pl-10"})]})})}),C&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx(sl,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading lectures..."})]})}),L&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading lectures"}),l.jsx("p",{className:"text-muted-foreground",children:L})]})}),!C&&!L&&l.jsx("div",{className:"space-y-6",children:D.map(q=>l.jsxs(ye,{className:`hover:shadow-lg transition-all duration-200 border-l-4 ${k===q.id?"border-l-primary bg-primary/5":"border-l-primary/20 hover:border-l-primary"}`,children:[l.jsx(Ke,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(gs,{className:"h-5 w-5 text-primary"}),l.jsx(Xe,{className:"text-xl",children:q.title}),l.jsx(on,{variant:"secondary",children:q.subject})]}),l.jsx(At,{className:"text-base",children:q.description}),l.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(bc,{className:"h-3 w-3"}),q.createdBy]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(SS,{className:"h-3 w-3"}),q.createdAt.toLocaleDateString()]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>M(q),children:l.jsx(Ai,{className:"h-4 w-4"})}),l.jsx(ne,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:l.jsx(Vn,{className:"h-4 w-4"})})]})]})}),l.jsx(ve,{children:l.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(Ws,{className:"h-4 w-4 text-green-600"}),"Videos (",q.videos.length,")"]}),q.videos.length>0&&l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{q.videos.forEach(K=>window.open(K.youtubeUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Play All"})]}),q.videos.length>0?l.jsx("div",{className:"space-y-2",children:q.videos.map(K=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{const te=K.youtubeUrl||K.url;te&&te!==""&&te!=="#"?window.open(te,"_blank"):alert("No URL available for this video. Click the edit button to add a URL.")},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"relative",children:[K.thumbnailUrl&&l.jsx("img",{src:K.thumbnailUrl,alt:K.title,className:"w-16 h-12 object-cover rounded"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(Ws,{className:"h-6 w-6 text-white"})})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:K.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(zf,{className:"h-3 w-3"}),K.duration]})]})]})}),l.jsx(ne,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:te=>{te.stopPropagation(),V(K)},title:"Edit Video",children:l.jsx(Ai,{className:"h-4 w-4"})})]},K.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(ti,{className:"h-4 w-4 text-blue-600"}),"Files (",q.files.length,")"]}),q.files.length>0&&l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{q.files.forEach(K=>window.open(K.fileUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Download All"})]}),q.files.length>0?l.jsx("div",{className:"space-y-2",children:q.files.map(K=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{console.log("ðŸ” File clicked:",K),console.log("ðŸ”— File URL:",K.fileUrl),console.log("ðŸ”— Fallback URL:",K.url);const te=K.fileUrl||K.url;console.log("ðŸš€ Opening URL:",te),te&&te!==""&&te!=="#"?window.open(te,"_blank"):(console.error("âŒ No valid URL found"),alert(`No URL available for this file.
fileUrl: ${K.fileUrl}
url: ${K.url}`))},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(ti,{className:"h-4 w-4 text-blue-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:K.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(on,{variant:"outline",className:"text-xs",children:K.fileType}),l.jsx("span",{children:K.fileSize})]})]})]})}),l.jsx(ne,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:te=>{te.stopPropagation(),P(K)},title:"Edit File",children:l.jsx(Ai,{className:"h-4 w-4"})})]},K.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[l.jsx(ki,{className:"h-4 w-4 text-purple-600"}),"Quizzes (",q.quizzes.length,")"]}),q.quizzes.length>0&&l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{alert(`Starting all ${q.quizzes.length} quizzes for: ${q.title}`)},className:"h-6 px-2 text-xs",children:"Start All"})]}),q.quizzes.length>0?l.jsx("div",{className:"space-y-2",children:q.quizzes.map(K=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{alert(`Starting quiz: ${K.title}
Time limit: ${K.timeLimit} minutes
Passing score: ${K.passingScore}%`)},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(ki,{className:"h-4 w-4 text-purple-600 mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:K.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[l.jsx(zf,{className:"h-3 w-3"}),K.timeLimit,"min",l.jsx("span",{children:"â€¢"}),l.jsxs("span",{children:[K.passingScore,"% pass"]})]})]})]})}),l.jsx(ne,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:te=>{te.stopPropagation(),H(K)},title:"Edit Quiz",children:l.jsx(Ai,{className:"h-4 w-4"})})]},K.id))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"})]})]})})]},q.id))}),!C&&!L&&D.length===0&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx(gs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No lectures found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No lectures match your search criteria.":"Start by creating your first lecture with videos, files, and quizzes."}),l.jsxs(ne,{onClick:O,children:[l.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Create Lecture"]})]})})]}))}function k9({professor:n,onClose:e,onSave:t}){const[r,s]=E.useState({name:"",title:"",department:"",email:"",others:"",officeLocation:"",researchAreas:"",imageUrl:""}),[a,c]=E.useState(!1);E.useEffect(()=>{n&&s({name:n.name||"",title:n.title||"",department:n.department||"",email:n.email||"",others:n.others||"",officeLocation:n.officeLocation||"",researchAreas:(n.researchAreas||[]).join(", "),imageUrl:n.imageUrl||""})},[n]);const u=async h=>{h.preventDefault(),c(!0);try{const p={...r,researchAreas:r.researchAreas?r.researchAreas.split(",").map(g=>g.trim()).filter(Boolean):[]};t(p)}catch(p){console.error("Error saving professor:",p)}finally{c(!1)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:e,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Professor":"Add Professor"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update professor information":"Add a new professor to the faculty"})]})]})}),l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(Ro,{className:"h-5 w-5"}),"Professor Information"]}),l.jsx(At,{children:"Basic information about the professor"})]}),l.jsxs(ve,{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-6",children:[l.jsxs(Oc,{className:"w-20 h-20",children:[l.jsx(_d,{src:r.imageUrl,alt:r.name}),l.jsx(Dc,{children:l.jsx(Ro,{className:"w-8 h-8"})})]}),l.jsxs("div",{className:"space-y-2 flex-1",children:[l.jsx(je,{htmlFor:"imageUrl",children:"Profile Image URL"}),l.jsx(be,{id:"imageUrl",placeholder:"https://example.com/profile.jpg",value:r.imageUrl,onChange:h=>s(p=>({...p,imageUrl:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"name",children:"Full Name *"}),l.jsx(be,{id:"name",placeholder:"Dr. John Smith",value:r.name,onChange:h=>s(p=>({...p,name:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"title",children:"Title"}),l.jsx(be,{id:"title",placeholder:"e.g., Associate Professor",value:r.title,onChange:h=>s(p=>({...p,title:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(je,{htmlFor:"department",className:"flex items-center gap-2",children:[l.jsx(sk,{className:"h-4 w-4"}),"Department"]}),l.jsx(be,{id:"department",placeholder:"Internal Medicine",value:r.department,onChange:h=>s(p=>({...p,department:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"others",children:"Others"}),l.jsx(be,{id:"others",placeholder:"Other contact or notes",value:r.others,onChange:h=>s(p=>({...p,others:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(je,{htmlFor:"email",className:"flex items-center gap-2",children:[l.jsx(Bf,{className:"h-4 w-4"}),"Email Address"]}),l.jsx(be,{id:"email",type:"email",placeholder:"john.smith@university.edu",value:r.email,onChange:h=>s(p=>({...p,email:h.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(je,{htmlFor:"officeLocation",className:"flex items-center gap-2",children:[l.jsx(rd,{className:"h-4 w-4"}),"Office Location"]}),l.jsx(be,{id:"officeLocation",placeholder:"Medical Building, Room 301",value:r.officeLocation,onChange:h=>s(p=>({...p,officeLocation:h.target.value}))})]})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"researchAreas",children:"Research Areas"}),l.jsx(be,{id:"researchAreas",placeholder:"e.g., Cardiology, Epidemiology",value:r.researchAreas,onChange:h=>s(p=>({...p,researchAreas:h.target.value}))})]}),l.jsx("div",{className:"space-y-2",children:l.jsx("div",{})})]})]})]}),r.name&&l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Preview"}),l.jsx(At,{children:"How the professor will appear in the system"})]}),l.jsx(ve,{children:l.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[l.jsxs(Oc,{className:"h-12 w-12",children:[l.jsx(_d,{src:r.imageUrl,alt:r.name}),l.jsx(Dc,{children:l.jsx(Ro,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold",children:r.name}),l.jsx("p",{className:"text-sm text-muted-foreground",children:r.department}),l.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm text-muted-foreground",children:[r.email&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Bf,{className:"h-3 w-3"}),l.jsx("span",{children:r.email})]}),r.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(rd,{className:"h-3 w-3"}),l.jsx("span",{children:r.officeLocation})]}),r.others&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ro,{className:"h-3 w-3"}),l.jsx("span",{children:r.others})]})]})]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:a,children:[l.jsx(na,{className:"h-4 w-4 mr-2"}),a?"Saving...":n?"Update Professor":"Add Professor"]})]})]})]})}function O9(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,a]=E.useState(!1),{professors:c,loading:u,error:h,createProfessor:p,updateProfessor:g,deleteProfessor:y,isOfflineMode:v}=AI(),b=c.filter(w=>w.name.toLowerCase().includes(n.toLowerCase())||w.department.toLowerCase().includes(n.toLowerCase())||w.email.toLowerCase().includes(n.toLowerCase())),S=async w=>{if(window.confirm("Are you sure you want to delete this professor?"))try{await y(w)}catch(_){console.error("Error deleting professor:",_),alert("Failed to delete professor. Please try again.")}};return s?l.jsx(k9,{professor:t,onClose:()=>{a(!1),r(null)},onSave:async w=>{try{t?await g(t.id,w):await p(w),a(!1),r(null)}catch(_){console.error("Error saving professor:",_),alert("Failed to save professor. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Professors Management"}),l.jsxs("p",{className:"text-muted-foreground",children:["Manage faculty information and profiles",v&&l.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:"â€¢ Working in offline mode"})]})]}),l.jsxs(ne,{onClick:()=>a(!0),children:[l.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]}),l.jsx(ye,{children:l.jsx(ve,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(be,{placeholder:"Search professors by name, department, or email...",value:n,onChange:w=>e(w.target.value),className:"pl-10"})]})})}),u&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx(sl,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading professors..."})]})}),h&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading professors"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&l.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:b.map(w=>l.jsxs(ye,{className:"hover:shadow-md transition-shadow",children:[l.jsx(Ke,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs(Oc,{className:"h-12 w-12",children:[l.jsx(_d,{src:w.imageUrl,alt:w.name}),l.jsx(Dc,{children:l.jsx(Ro,{className:"h-6 w-6"})})]}),l.jsxs("div",{children:[l.jsx(Xe,{className:"text-lg",children:w.name}),l.jsx(on,{variant:"secondary",className:"text-xs",children:w.department})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>{r(w),a(!0)},children:l.jsx(Ai,{className:"h-4 w-4"})}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>S(w.id),className:"text-destructive hover:text-destructive",children:l.jsx(Vn,{className:"h-4 w-4"})})]})]})}),l.jsx(ve,{children:l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"",children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:w.title}),l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[l.jsx(Bf,{className:"h-4 w-4"}),l.jsx("span",{children:w.email})]})]}),w.phone&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(Ro,{className:"h-4 w-4"}),l.jsx("span",{children:w.phone})]}),w.officeLocation&&l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(rd,{className:"h-4 w-4"}),l.jsx("span",{children:w.officeLocation})]}),w.bio&&l.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:w.bio}),w.researchAreas&&w.researchAreas.length>0&&l.jsx("div",{className:"flex gap-2 flex-wrap",children:w.researchAreas.map(_=>l.jsx(on,{children:_},_))}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[w.website&&l.jsx("a",{href:w.website,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Website"}),w.linkedin&&l.jsx("a",{href:w.linkedin,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"LinkedIn"})]})]})})]},w.id))}),!u&&!h&&b.length===0&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx(bc,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No professors found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"No professors match your search criteria.":"Start by adding your first professor."}),l.jsxs(ne,{onClick:()=>a(!0),children:[l.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]})})]})}const D9=[{id:"user_1",displayName:"Ali Ahmed",email:"ali.ahmed@example.com",role:"student",photoURL:"",createdAt:new Date},{id:"user_2",displayName:"Mona Hassan",email:"mona.hassan@example.com",role:"staff",photoURL:"",createdAt:new Date(Date.now()-1e3*60*60*24)}];function L9(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1),{years:h}=Xc();return E.useEffect(()=>{const y=async()=>{try{const b=Er(ot(Ve,"users"));await Ft(b);const S=Er(ot(Ve,"users"),Bd("createdAt","desc")),w=oa(S,_=>{const A=[];_.forEach(C=>{var k,D;const L=C.data(),U=L.yearId||L.year||L.year_id||L.yearId||null;let z=U,R="-";if(typeof U=="string"&&U.includes(":")){const[O,M]=U.split(":",2);z=O||null,M&&M.trim()&&(R=M.trim())}if(z&&R==="-"){const O=h.find(M=>M.id===z);O&&(O.batchName?R=O.batchName:R=`Year ${{1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[O.yearNumber]||String(O.yearNumber)}`)}A.push({id:C.id,displayName:L.displayName||L.name||"",email:L.email||"",role:L.role||"student",photoURL:L.photoURL||L.avatar||"",createdAt:((D=(k=L.createdAt)==null?void 0:k.toDate)==null?void 0:D.call(k))||void 0,yearId:z||void 0,yearLabel:R})}),e(A);const I=Array.from(new Set(A.map(C=>C.yearId).filter(Boolean).filter(C=>!h.find(L=>L.id===C))));I.length>0&&Promise.all(I.map(async C=>{try{const U=(await Ft(qs(Ve,"years"))).docs.find(D=>D.id===C);if(!U)return null;const z=U.data(),R=z.yearNumber||z.order||(()=>{const D=(z.name||"").match(/\d+/);return D?parseInt(D[0]):void 0})(),k=z.batchName||(R?`Year ${R}`:void 0)||void 0;return{id:C,label:k}}catch{return null}})).then(C=>{const L={};C.forEach(U=>{U&&U.id&&U.label&&(L[U.id]=U.label)}),Object.keys(L).length>0&&e(U=>U.map(z=>z.yearId&&L[z.yearId]?{...z,yearLabel:L[z.yearId]}:z))}),r(!1)},_=>{console.error("Failed to listen to users:",_),v()});return()=>w()}catch(b){console.error("Failed to load users, entering offline mode:",b),v()}},v=()=>{u(!0),e(D9),r(!1),a(null)};y()},[]),E.useEffect(()=>{!h||h.length===0||e(y=>y.map(v=>{if(!v)return v;const b=v.yearId||null;if(!b)return v;const S=h.find(I=>I.id===b);if(!S)return v;const _={1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[S.yearNumber]||String(S.yearNumber),A=S.batchName?S.batchName:`Year ${_}`;return{...v,yearLabel:A}}))},[h]),{users:n,loading:t,error:s,updateUser:async(y,v)=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(b=>b.map(S=>S.id===y?{...S,...v}:S));return}try{await pn(Mt(Ve,"users",y),v)}catch(b){console.error("Failed to update user:",b),e(S=>S.map(w=>w.id===y?{...w,...v}:w))}},deleteUser:async y=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(v=>v.filter(b=>b.id!==y));return}try{await Dr(Mt(Ve,"users",y))}catch(v){console.error("Failed to delete user:",v),e(b=>b.filter(S=>S.id!==y))}},isOfflineMode:c}}function M9(){const{users:n,loading:e,error:t,updateUser:r,deleteUser:s}=L9(),a=async u=>{const h=u.role==="admin"?"user":"admin";await r(u.id,{role:h})},c=(u,h)=>{if(!u)return"-";const p=u.match(/(19|20)\d{2}/);if(p)return p[0];if(h)try{const g=new Date(h);if(!isNaN(g.getTime()))return String(g.getFullYear())}catch{}return"-"};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xk,{className:"h-6 w-6 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold",children:"Users"})]}),l.jsxs(ye,{children:[l.jsx(Ke,{children:l.jsxs(Xe,{children:["All Users (",n.length,")"]})}),l.jsx(ve,{children:e?l.jsx("div",{children:"Loading..."}):t?l.jsx("div",{className:"text-destructive",children:t}):n.length===0?l.jsx("div",{className:"text-muted-foreground",children:"No users found."}):(()=>{const u={};n.forEach(p=>{const g=p.yearLabel&&String(p.yearLabel).trim()!==""?String(p.yearLabel):"Unassigned";u[g]||(u[g]=[]),u[g].push(p)});const h=Object.keys(u).sort((p,g)=>{const y=p.match(/Year\s*(\d+)/i),v=g.match(/Year\s*(\d+)/i);return y&&v?parseInt(y[1],10)-parseInt(v[1],10):y?-1:v||p==="Unassigned"?1:g==="Unassigned"?-1:p.localeCompare(g)});return l.jsx("div",{className:"space-y-6",children:h.map(p=>l.jsxs("div",{children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsxs("h3",{className:"text-lg font-semibold",children:[p," ",l.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",u[p].length,")"]})]})}),l.jsx("div",{className:"space-y-2",children:u[p].map(g=>{var y;return l.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[l.jsx(Oc,{className:"h-12 w-12",children:g.photoURL?l.jsx(_d,{src:g.photoURL,alt:g.displayName}):l.jsx(Dc,{children:((y=g.displayName)==null?void 0:y[0])||"U"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:g.displayName}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:g.email}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",g.createdAt?new Date(g.createdAt).toLocaleString():"-",l.jsxs("span",{className:"ml-3",children:["Year: ",g.yearLabel||c(g.id,g.createdAt)]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(on,{children:g.role||"user"}),l.jsx(ne,{size:"sm",variant:"outline",onClick:()=>a(g),children:g.role==="admin"?"Demote":"Make Admin"}),l.jsx(ne,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>s(g.id),children:l.jsx(Vn,{className:"h-4 w-4"})})]})]},g.id)})})]},p))})})()})]})]})}function F9(n){if(!n)return 0;if(typeof n=="number")return n;const e=String(n).trim();if(/^\d+$/.test(e))return parseInt(e,10);const t=e.split(":").map(r=>parseInt(r,10));return t.length===3?t[0]*3600+(t[1]||0)*60+(t[2]||0):t.length===2?(t[0]||0)*60+(t[1]||0):0}function V9(n){if(!n||n<=0)return"0:00";const e=Math.floor(n/3600),t=Math.floor(n%3600/60),r=n%60;return e>0?`${e}:${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${t}:${String(r).padStart(2,"0")}`}function U9(){var D;const{id:n}=FN(),e=Bc(),{years:t,subjects:r,loading:s,createLecture:a,deleteLecture:c,deleteSubject:u,addVideo:h,addFile:p,addQuiz:g}=Xc(),[y,v]=E.useState(null),[b,S]=E.useState(!1),[w,_]=E.useState(!1),[A,I]=E.useState(!1),[C,L]=E.useState(!1),U=r.find(O=>O.id===n),z=O=>{v(O||null),S(!0)},R=O=>{v(O||null),_(!0)},k=O=>{v(O||null),I(!0)};return b&&y?l.jsx(ww,{lectureId:y,onClose:()=>{S(!1),v(null)},onSave:async O=>{U!=null&&U.id&&y&&await h(U.id,y,O),S(!1),v(null)}}):w&&y?l.jsx(xw,{lectureId:y,onClose:()=>{_(!1),v(null)},onSave:async O=>{U!=null&&U.id&&y&&await p(U.id,y,O),_(!1),v(null)}}):A&&y?l.jsx(gw,{lectureId:y,onClose:()=>{I(!1),v(null)},onSave:async O=>{U!=null&&U.id&&y&&await g(U.id,y,O),I(!1),v(null)}}):C?l.jsx(cm,{subjectId:(U==null?void 0:U.id)||null,subjectName:U==null?void 0:U.name,yearType:(D=t.find(O=>O.id===(U==null?void 0:U.yearId)))==null?void 0:D.type,onClose:()=>L(!1),onSave:async O=>{U!=null&&U.id&&await a(O),L(!1)}}):s?l.jsx("div",{children:"Loading..."}):U?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:U.name}),l.jsx("p",{className:"text-muted-foreground",children:"Subject details and lectures"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>L(!0),className:"flex items-center gap-2",children:[l.jsx(Zt,{className:"h-4 w-4"}),"Add Lecture"]}),l.jsx(ne,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(U&&confirm(`Delete subject "${U.name}"? This will remove all lectures.`))try{await u(U.id),e("/admin/years")}catch(O){console.error(O),alert("Failed to delete subject")}},children:l.jsx(Vn,{className:"h-4 w-4"})}),l.jsx(Jn,{to:"/admin/years",children:l.jsx(ne,{variant:"ghost",children:"Back"})})]})]}),l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Lectures"}),l.jsx(At,{children:"All lectures for this subject"})]}),l.jsx(ve,{children:l.jsx("div",{className:"grid gap-4",children:U.lectures&&U.lectures.length>0?U.lectures.map(O=>{var V,P;const M=O.imageUrl||O.videos&&O.videos[0]&&O.videos[0].thumbnailUrl||"";return l.jsxs("div",{className:"p-3 border rounded-md flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[M?l.jsx("img",{src:M,alt:O.name,width:1280,height:720,style:{width:160,height:90,objectFit:"cover"},className:"rounded"}):l.jsx("div",{className:"w-40 h-24 bg-muted rounded flex items-center justify-center text-xs",children:"No image"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:O.name}),l.jsx("div",{className:"text-sm text-muted-foreground",children:O.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>z(O.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Video",children:[l.jsx(Ws,{className:"h-3 w-3 text-blue-600"}),l.jsx("span",{children:"Add Video"})]}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>R(O.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add File",children:[l.jsx(ti,{className:"h-3 w-3 text-green-600"}),l.jsx("span",{children:"Add File"})]}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>k(O.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Quiz",children:[l.jsx(ki,{className:"h-3 w-3 text-purple-600"}),l.jsx("span",{children:"Add Quiz"})]}),l.jsx(ne,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(U&&confirm(`Delete lecture "${O.name}"?`))try{await c(U.id,O.id)}catch(H){console.error(H),alert("Failed to delete lecture")}},children:l.jsx(Vn,{className:"h-3 w-3"})}),l.jsxs("div",{className:"flex items-center gap-2",children:[O.videos&&O.videos.length>0?(()=>{const H=(O.videos||[]).reduce((q,K)=>q+F9(K.duration||K.time||K.durationSeconds||K.length),0);return l.jsxs("button",{onClick:()=>e(`/admin/videos?lecture=${O.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:[l.jsx(Ws,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",O.videos.length,")"]}),l.jsx("span",{className:"text-muted-foreground",children:V9(H)})]})})():l.jsx("button",{onClick:()=>e(`/admin/videos?lecture=${O.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:l.jsx(Ws,{className:"h-4 w-4"})}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${O.id}&tab=files`),className:"text-xs text-green-600 flex items-center gap-1 px-2",title:"Files",children:[l.jsx(ti,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((V=O.files)==null?void 0:V.length)||0,")"]})]}),l.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${O.id}&tab=quizzes`),className:"text-xs text-purple-600 flex items-center gap-1 px-2",title:"Quizzes",children:[l.jsx(ki,{className:"h-4 w-4"}),l.jsxs("span",{children:["(",((P=O.quizzes)==null?void 0:P.length)||0,")"]})]})]})]})]},O.id)}):l.jsx("div",{className:"text-muted-foreground",children:"No lectures yet for this subject."})})})]})]}):l.jsx(ye,{children:l.jsxs(ve,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Subject not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"The subject you requested does not exist."}),l.jsx("div",{className:"mt-4",children:l.jsx(Jn,{to:"/admin/years",children:l.jsx(ne,{children:"Back to Years"})})})]})})}var xy="rovingFocusGroup.onEntryFocus",$9={bubbles:!1,cancelable:!0},dm="RovingFocusGroup",[Lv,wA,z9]=Uv(dm),[B9,_A]=Ui(dm,[z9]),[q9,W9]=B9(dm),EA=E.forwardRef((n,e)=>l.jsx(Lv.Provider,{scope:n.__scopeRovingFocusGroup,children:l.jsx(Lv.Slot,{scope:n.__scopeRovingFocusGroup,children:l.jsx(H9,{...n,ref:e})})}));EA.displayName=dm;var H9=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:g=!1,...y}=n,v=E.useRef(null),b=bt(e,v),S=yw(a),[w=null,_]=Wa({prop:c,defaultProp:u,onChange:h}),[A,I]=E.useState(!1),C=Nn(p),L=wA(t),U=E.useRef(!1),[z,R]=E.useState(0);return E.useEffect(()=>{const k=v.current;if(k)return k.addEventListener(xy,C),()=>k.removeEventListener(xy,C)},[C]),l.jsx(q9,{scope:t,orientation:r,dir:S,loop:s,currentTabStopId:w,onItemFocus:E.useCallback(k=>_(k),[_]),onItemShiftTab:E.useCallback(()=>I(!0),[]),onFocusableItemAdd:E.useCallback(()=>R(k=>k+1),[]),onFocusableItemRemove:E.useCallback(()=>R(k=>k-1),[]),children:l.jsx(We.div,{tabIndex:A||z===0?-1:0,"data-orientation":r,...y,ref:b,style:{outline:"none",...n.style},onMouseDown:Ue(n.onMouseDown,()=>{U.current=!0}),onFocus:Ue(n.onFocus,k=>{const D=!U.current;if(k.target===k.currentTarget&&D&&!A){const O=new CustomEvent(xy,$9);if(k.currentTarget.dispatchEvent(O),!O.defaultPrevented){const M=L().filter(K=>K.focusable),V=M.find(K=>K.active),P=M.find(K=>K.id===w),q=[V,P,...M].filter(Boolean).map(K=>K.ref.current);NA(q,g)}}U.current=!1}),onBlur:Ue(n.onBlur,()=>I(!1))})})}),bA="RovingFocusGroupItem",SA=E.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:a,...c}=n,u=Do(),h=a||u,p=W9(bA,t),g=p.currentTabStopId===h,y=wA(t),{onFocusableItemAdd:v,onFocusableItemRemove:b}=p;return E.useEffect(()=>{if(r)return v(),()=>b()},[r,v,b]),l.jsx(Lv.ItemSlot,{scope:t,id:h,focusable:r,active:s,children:l.jsx(We.span,{tabIndex:g?0:-1,"data-orientation":p.orientation,...c,ref:e,onMouseDown:Ue(n.onMouseDown,S=>{r?p.onItemFocus(h):S.preventDefault()}),onFocus:Ue(n.onFocus,()=>p.onItemFocus(h)),onKeyDown:Ue(n.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){p.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const w=Q9(S,p.orientation,p.dir);if(w!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let A=y().filter(I=>I.focusable).map(I=>I.ref.current);if(w==="last")A.reverse();else if(w==="prev"||w==="next"){w==="prev"&&A.reverse();const I=A.indexOf(S.currentTarget);A=p.loop?Y9(A,I+1):A.slice(I+1)}setTimeout(()=>NA(A))}})})})});SA.displayName=bA;var K9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function G9(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function Q9(n,e,t){const r=G9(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return K9[r]}function NA(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function Y9(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var X9=EA,J9=SA,_w="Tabs",[Z9,HB]=Ui(_w,[_A]),TA=_A(),[eB,Ew]=Z9(_w),CA=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:a,orientation:c="horizontal",dir:u,activationMode:h="automatic",...p}=n,g=yw(u),[y,v]=Wa({prop:r,onChange:s,defaultProp:a});return l.jsx(eB,{scope:t,baseId:Do(),value:y,onValueChange:v,orientation:c,dir:g,activationMode:h,children:l.jsx(We.div,{dir:g,"data-orientation":c,...p,ref:e})})});CA.displayName=_w;var IA="TabsList",jA=E.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,a=Ew(IA,t),c=TA(t);return l.jsx(X9,{asChild:!0,...c,orientation:a.orientation,dir:a.dir,loop:r,children:l.jsx(We.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});jA.displayName=IA;var AA="TabsTrigger",PA=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...a}=n,c=Ew(AA,t),u=TA(t),h=OA(c.baseId,r),p=DA(c.baseId,r),g=r===c.value;return l.jsx(J9,{asChild:!0,...u,focusable:!s,active:g,children:l.jsx(We.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":p,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:h,...a,ref:e,onMouseDown:Ue(n.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?c.onValueChange(r):y.preventDefault()}),onKeyDown:Ue(n.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&c.onValueChange(r)}),onFocus:Ue(n.onFocus,()=>{const y=c.activationMode!=="manual";!g&&!s&&y&&c.onValueChange(r)})})})});PA.displayName=AA;var RA="TabsContent",kA=E.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:a,...c}=n,u=Ew(RA,t),h=OA(u.baseId,r),p=DA(u.baseId,r),g=r===u.value,y=E.useRef(g);return E.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),l.jsx(zv,{present:s||g,children:({present:v})=>l.jsx(We.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!v,id:p,tabIndex:0,...c,ref:e,style:{...n.style,animationDuration:y.current?"0s":void 0},children:v&&a})})});kA.displayName=RA;function OA(n,e){return`${n}-trigger-${e}`}function DA(n,e){return`${n}-content-${e}`}var tB=CA,LA=jA,MA=PA,FA=kA;const nB=tB,VA=E.forwardRef(({className:n,...e},t)=>l.jsx(LA,{ref:t,className:et("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));VA.displayName=LA.displayName;const Mv=E.forwardRef(({className:n,...e},t)=>l.jsx(MA,{ref:t,className:et("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));Mv.displayName=MA.displayName;const Fv=E.forwardRef(({className:n,...e},t)=>l.jsx(FA,{ref:t,className:et("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));Fv.displayName=FA.displayName;function rB({product:n,onClose:e,onSave:t}){const[r,s]=E.useState({name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",price:(n==null?void 0:n.price)||0,types:(n==null?void 0:n.types)||(n!=null&&n.price?[{name:"Default",price:n.price}]:[]),images:(n==null?void 0:n.images)||[""],categoryId:(n==null?void 0:n.categoryId)||""}),[a,c]=E.useState(!1),[u,h]=E.useState(null),p=async b=>{b.preventDefault(),c(!0);try{const S={...r,images:r.images.filter(w=>w.trim()!=="")};S.types&&S.types.length>0?(S.types=S.types.map(w=>({name:String(w.name||"").trim(),price:parseFloat(w.price)||0})),S.price=S.types[0].price||0):S.types=[],t(S)}catch(S){console.error("Error saving product:",S)}finally{c(!1)}},g=()=>{s(b=>({...b,images:[...b.images,""]}))},y=(b,S)=>{s(w=>({...w,images:w.images.map((_,A)=>A===b?S:_)}))},v=b=>{s(S=>({...S,images:S.images.filter((w,_)=>_!==b)}))};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:e,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Product":"Add Product"}),l.jsx("p",{className:"text-muted-foreground",children:n?"Update product details":"Create a new product"})]})]})}),l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsxs(Xe,{className:"flex items-center gap-2",children:[l.jsx(Ty,{className:"h-5 w-5 text-blue-600"}),"Product Information"]}),l.jsx(At,{children:"Basic information about the product"})]}),l.jsxs(ve,{className:"space-y-4",children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"name",children:"Product Name *"}),l.jsx(be,{id:"name",placeholder:"e.g., Medical Textbook",value:r.name,onChange:b=>s(S=>({...S,name:b.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{children:"Types & Prices"}),l.jsxs("div",{className:"space-y-2",children:[r.types&&r.types.length>0?r.types.map((b,S)=>l.jsxs("div",{className:"flex gap-2",children:[l.jsx(be,{placeholder:"Type name (e.g., Pen)",value:b.name,onChange:w=>s(_=>({..._,types:_.types.map((A,I)=>I===S?{...A,name:w.target.value}:A)})),required:!0}),l.jsx(be,{type:"number",step:"0.01",placeholder:"0.00",value:b.price,onChange:w=>s(_=>({..._,types:_.types.map((A,I)=>I===S?{...A,price:parseFloat(w.target.value)||0}:A)})),required:!0,className:"w-32"}),l.jsx(ne,{type:"button",variant:"ghost",onClick:()=>s(w=>({...w,types:w.types.filter((_,A)=>A!==S)})),children:"Remove"})]},S)):l.jsx("div",{className:"text-muted-foreground",children:"No types defined."}),l.jsx("div",{children:l.jsxs(ne,{type:"button",variant:"outline",onClick:()=>s(b=>({...b,types:[...b.types||[],{name:"Default",price:0}]})),children:[l.jsx(Zt,{className:"h-4 w-4 mr-2"})," Add Type"]})})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"description",children:"Description"}),l.jsx(ei,{id:"description",placeholder:"Describe the product...",value:r.description,onChange:b=>s(S=>({...S,description:b.target.value})),rows:4})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"categoryId",children:"Category ID (Optional)"}),l.jsx(be,{id:"categoryId",placeholder:"e.g., books, equipment",value:r.categoryId,onChange:b=>s(S=>({...S,categoryId:b.target.value}))})]})]})]}),l.jsxs(ye,{children:[l.jsx(Ke,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(Xe,{children:"Product Images"}),l.jsx(At,{children:"Add image URLs for the product"})]}),l.jsxs(ne,{type:"button",variant:"outline",onClick:g,children:[l.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})}),l.jsx(ve,{className:"space-y-4",children:r.images.map((b,S)=>l.jsxs("div",{className:`flex gap-2 items-center ${u===S?"border-2 border-dashed p-2 rounded":""}`,onDragOver:w=>{w.preventDefault(),h(S)},onDragEnter:w=>{w.preventDefault(),h(S)},onDragLeave:()=>{h(null)},onDrop:async w=>{w.preventDefault(),h(null);try{const _=w.dataTransfer;if(!_)return;if(_.files&&_.files.length>0){const I=_.files[0];try{let C=null;try{C=await _r(I)}catch(L){console.warn("Cloudinary upload failed, trying ImageKit fallback",(L==null?void 0:L.message)||L),C=await qo(I,I.name)}C&&typeof C=="string"&&C.startsWith("http")?y(S,C):alert("Upload failed: unexpected response from upload provider")}catch(C){console.error("Drop upload error:",C);const U=((C==null?void 0:C.message)||String(C)||"").toLowerCase();if(U.includes("cloudinary signing did not return an api key")||U.includes("missing required parameter - api_key")||U.includes("missing required parameter 'api_key'")){const z=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(z&&z.trim())try{Ba(null,null,z.trim());const R=await _r(I);if(R&&typeof R=="string"&&R.startsWith("http")){y(S,R);return}}catch(R){console.error("Retry after API key failed:",R)}}alert("Upload failed: "+((C==null?void 0:C.message)||C))}return}const A=_.getData("text/uri-list")||_.getData("text/plain");if(A&&A.startsWith("http")){if(!window.confirm(`Upload the dragged URL to Cloudinary and replace it?
`+A))return;const C=await R1(A);C&&typeof C=="string"&&C.startsWith("http")?y(S,C):alert("Upload failed: unexpected response from server")}}catch(_){console.error("Drop upload error:",_),alert("Image upload failed: "+((_==null?void 0:_.message)||_))}},children:[l.jsx(be,{placeholder:"https://example.com/image.jpg",value:b,onChange:w=>y(S,w.target.value)}),l.jsx(ne,{type:"button",variant:"ghost",size:"icon",onClick:async()=>{var w;try{const _=(w=r.images[S])==null?void 0:w.trim();if(_&&(_.startsWith("http://")||_.startsWith("https://"))){try{if(!window.confirm(`Upload the current URL to Cloudinary/ImageKit and replace it?
`+_))return;try{const C=await R1(_);if(C&&typeof C=="string"&&C.startsWith("http")){y(S,C);return}}catch(C){console.warn("uploadUrlToServer failed, will try ImageKit:",(C==null?void 0:C.message)||C)}try{const C=await qo(_);if(C&&typeof C=="string"&&C.startsWith("http")){y(S,C);return}else alert("Upload failed: unexpected response from ImageKit")}catch(C){console.error("ImageKit URL upload error:",C),alert("URL upload failed: "+((C==null?void 0:C.message)||C))}}catch(I){console.error("URL upload error:",I),alert("URL upload failed: "+((I==null?void 0:I.message)||I))}return}const A=document.createElement("input");A.type="file",A.accept="image/*",A.onchange=async()=>{var C;const I=(C=A.files)==null?void 0:C[0];if(I)try{let L=null;try{L=await _r(I)}catch(U){console.warn("Cloudinary upload failed, trying ImageKit fallback",(U==null?void 0:U.message)||U);try{L=await qo(I,I.name)}catch(z){throw console.error("ImageKit upload failed:",z),U}}if(!L||typeof L!="string"||!L.startsWith("http")){alert("Upload failed: unexpected response from upload provider");return}y(S,L)}catch(L){const U=(L==null?void 0:L.message)||String(L);console.error("Upload error:",L);const z=(U||"").toLowerCase();if(z.includes("cloudinary cloud name is not configured")){const R=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!R){alert("No cloud name provided.");return}const k=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),D=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");Ba(R,k||null,D||null);try{const O=await _r(I);if(!O||typeof O!="string"||!O.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(S,O)}catch(O){console.error("Retry upload error:",O),alert("Upload failed after configuring Cloudinary: "+(O.message||O))}}else if(z.includes("cloudinary signing did not return an api key")||z.includes("missing required parameter - api_key")||z.includes("missing required parameter 'api_key'")){const R=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(R&&R.trim())try{Ba(null,null,R.trim());const k=await _r(I);if(!k||typeof k!="string"||!k.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(S,k);return}catch(k){console.error("Retry upload error:",k),alert("Upload failed after setting API key: "+(k.message||k));return}}else alert("Image upload failed: "+(L.message||L))}},A.click()}catch(_){console.error(_),alert("Could not open file dialog")}},children:l.jsx(Ny,{className:"h-4 w-4"})}),r.images.length>1&&l.jsx(ne,{type:"button",variant:"outline",size:"icon",onClick:()=>v(S),children:l.jsx(Sc,{className:"h-4 w-4"})})]},S))})]}),r.name&&l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Preview"}),l.jsx(At,{children:"How the product will appear"})]}),l.jsx(ve,{children:l.jsx("div",{className:"p-4 border rounded-lg",children:l.jsxs("div",{className:"flex items-start gap-4",children:[r.images[0]&&r.images[0].trim()&&(()=>{const b=Jk(r.images[0]);return l.jsx("img",{src:b||void 0,alt:r.name,className:"w-20 h-20 object-cover rounded",onError:S=>{S.currentTarget.style.display="none",console.warn("Product preview image failed to load:",b||r.images[0])}})})(),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-lg",children:r.name}),l.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["$",r.price.toFixed(2)]}),r.description&&l.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.description}),r.categoryId&&l.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Category: ",r.categoryId]})]})]})})})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[l.jsx(ne,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:a,children:[l.jsx(na,{className:"h-4 w-4 mr-2"}),a?"Saving...":n?"Update Product":"Add Product"]})]})]})]})}function UA(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const p=Er(ot(Ve,"orders"),Bd("orderDate","desc")),g=oa(p,async y=>{try{const v=await Ft(ot(Ve,"products")),b={};v.forEach(w=>{const _=w.data();b[w.id]={id:w.id,name:_.name||_.title||"",price:_.price||0}});const S=[];y.forEach(w=>{var z,R;const _=w.data();let A=[];_.items&&Array.isArray(_.items)&&_.items.length>0?A=_.items:_.productsIds&&Array.isArray(_.productsIds)&&(A=_.productsIds.map(k=>{var D,O;return{productId:k,name:((D=b[k])==null?void 0:D.name)||k,quantity:1,price:((O=b[k])==null?void 0:O.price)||0}}));const I=_.total||_.totalAmount||_.totalPrice||0,C=_.address||_.shippingaddress||_.shippingAddress||"",L=_.userPhone||_.user_phone||_.phone||"";let U=new Date;_.createdAt&&typeof _.createdAt.toDate=="function"?U=_.createdAt.toDate():_.orderDate&&typeof _.orderDate.toDate=="function"?U=_.orderDate.toDate():_.orderDate&&(U=new Date(_.orderDate)),S.push({id:w.id,userId:_.userId||_.user_id||"",username:_.username||_.userName||_.user_name||_.customerName||"",userName:_.userName||_.user_name||_.customerName||"",userEmail:_.userEmail||_.email||"",userPhone:L,address:C,items:A,total:I,iscompleted:_.iscompleted===!0||_.isCompleted===!0||!1,status:_.status||(_.iscompleted===!0?"completed":"pending"),createdAt:U,updatedAt:(R=(z=_.updatedAt)==null?void 0:z.toDate)==null?void 0:R.call(z)})}),e(S),r(!1)}catch(v){console.error("Error processing orders:",v),a("Failed to load orders"),r(!1)}},y=>{console.error("Failed to load orders:",y),a("Failed to load orders"),r(!1)});return()=>g()},[]),{orders:n,loading:t,error:s,createOrder:async p=>{try{await bn(ot(Ve,"orders"),{...p,createdAt:new Date})}catch(g){console.error("Error creating order:",g)}},updateOrder:async(p,g)=>{try{const y={...g,updatedAt:new Date};(g.status==="completed"||g.isCompleted)&&(y.isCompleted=!0,y.iscompleted=!0,y.completedAt=new Date,y.status="completed"),await pn(Mt(Ve,"orders",p),y)}catch(y){console.error("Error updating order:",y)}},deleteOrder:async p=>{try{await Dr(Mt(Ve,"orders",p))}catch(g){console.error("Error deleting order:",g)}}}}function sB(){const[n,e]=E.useState(""),[t,r]=E.useState(!1),[s,a]=E.useState(null),{products:c,loading:u,error:h,isOfflineMode:p,createProduct:g,updateProduct:y,deleteProduct:v,retryConnection:b}=jI(),{createOrder:S}=UA(),w=()=>{a(null),r(!0)},_=C=>{a(C),r(!0)},A=async(C,L)=>{confirm(`Are you sure you want to delete "${L}"?`)&&await v(C)};if(t)return l.jsx(rB,{product:s,onClose:()=>{r(!1),a(null)},onSave:async C=>{try{s?await y(s.id,C):await g(C),r(!1),a(null)}catch(L){console.error("Error saving product:",L),alert("Failed to save product. Please try again.")}}});const I=c.filter(C=>C.name.toLowerCase().includes(n.toLowerCase())||C.description.toLowerCase().includes(n.toLowerCase()));return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Store Management"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-muted-foreground",children:"Manage store products and categories"}),p&&l.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[l.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),u&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx(sl,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}),h&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading products"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:h}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx(ne,{onClick:b,variant:"outline",children:"Retry Connection"}),l.jsx(ne,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!u&&!h&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[l.jsxs(ye,{children:[l.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Xe,{className:"text-sm font-medium",children:"Total Products"}),l.jsx(Ty,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(ve,{children:l.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),l.jsxs(ye,{children:[l.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Xe,{className:"text-sm font-medium",children:"Average Price"}),l.jsx(TS,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(ve,{children:l.jsxs("div",{className:"text-2xl font-bold",children:["$",c.length>0?(c.reduce((C,L)=>{const U=L.types&&L.types.length>0?L.types[0].price:L.price||0;return C+U},0)/c.length).toFixed(2):"0.00"]})})]}),l.jsxs(ye,{children:[l.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Xe,{className:"text-sm font-medium",children:"Categories"}),l.jsx(Gu,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsx(ve,{children:l.jsx("div",{className:"text-2xl font-bold",children:new Set(c.map(C=>C.categoryId).filter(C=>C&&C.trim())).size})})]})]}),l.jsxs(nB,{defaultValue:"products",className:"space-y-6",children:[l.jsxs(VA,{className:"grid w-full grid-cols-2",children:[l.jsxs(Mv,{value:"products",className:"flex items-center gap-2",children:[l.jsx(Hv,{className:"h-4 w-4"}),"Products (",c.length,")"]}),l.jsxs(Mv,{value:"categories",className:"flex items-center gap-2",children:[l.jsx(Gu,{className:"h-4 w-4"}),"Categories"]})]}),l.jsxs(Fv,{value:"products",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"relative flex-1 max-w-sm",children:[l.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(be,{placeholder:"Search products...",value:n,onChange:C=>e(C.target.value),className:"pl-10"})]}),l.jsxs(ne,{onClick:w,children:[l.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),I.length===0?l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx(Ty,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:n?"No products found":"No products yet"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:n?"Try adjusting your search terms":"Add your first product to get started"}),!n&&l.jsxs(ne,{onClick:w,children:[l.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add First Product"]})]})}):l.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:I.map(C=>l.jsxs(ye,{className:"overflow-hidden",children:[l.jsxs("div",{className:"aspect-video bg-muted relative",children:[C.images&&C.images[0]?l.jsx("img",{src:C.images[0],alt:C.name,className:"w-full h-full object-cover",onError:L=>{L.currentTarget.style.display="none";const U=L.currentTarget.nextElementSibling;U&&(U.style.display="flex")}}):null,l.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:C.images&&C.images[0]?"none":"flex"},children:l.jsx(Ny,{className:"h-12 w-12 text-muted-foreground"})})]}),l.jsxs(Ke,{className:"pb-2",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx(Xe,{className:"text-lg line-clamp-1",children:C.name}),C.types&&C.types.length>1&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[C.types.length," options available"]})]}),l.jsx("div",{className:"mt-2",children:C.types&&C.types.length>0?l.jsx("div",{className:"flex gap-2 flex-wrap",children:C.types.map((L,U)=>l.jsxs(on,{variant:"secondary",className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:L.name}),l.jsxs("span",{className:"text-sm text-muted-foreground",children:["$",L.price.toFixed(2)]})]},U))}):l.jsxs("div",{className:"text-xl font-bold",children:["$",(C.price||0).toFixed(2)]})}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>_(C),className:"h-8 w-8",children:l.jsx(Ai,{className:"h-3 w-3"})}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:async()=>{try{const L=document.createElement("input");L.type="file",L.accept="image/*",L.onchange=async()=>{var z;const U=(z=L.files)==null?void 0:z[0];if(U)try{let R=null;try{R=await _r(U)}catch(k){console.warn("Cloudinary upload failed, trying ImageKit fallback",(k==null?void 0:k.message)||k);try{R=await qo(U,U.name)}catch(D){throw console.error("ImageKit upload failed:",D),k}}if(!R||typeof R!="string"||!R.startsWith("http")){console.error("Invalid upload response:",R),alert("Image upload failed: unexpected response from upload provider");return}await y(C.id,{images:[R]})}catch(R){console.error(R);const D=((R==null?void 0:R.message)||String(R)||"").toLowerCase();if(D.includes("cloudinary cloud name is not configured")){const O=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!O){alert("No cloud name provided. Upload cancelled.");return}const M=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),V=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{Ba(O,M||null,V||null);const P=await _r(U);if(console.log("Cloudinary upload result after config:",P),!P||typeof P!="string"||!P.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(C.id,{images:[P]})}catch(P){console.error(P),alert("Image upload failed after configuring Cloudinary: "+(P.message||P))}return}else if(D.includes("cloudinary signing did not return an api key")||D.includes("missing required parameter - api_key")||D.includes("missing required parameter 'api_key'")){const O=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(O&&O.trim())try{Ba(null,null,O.trim());const M=await _r(U);if(!M||typeof M!="string"||!M.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(C.id,{images:[M]});return}catch(M){console.error(M),alert("Image upload failed after setting API key: "+(M.message||M));return}}alert("Image upload failed: "+(R.message||R))}},L.click()}catch(L){console.error(L),alert("Could not open file dialog")}},className:"h-8 w-8",children:l.jsx(Ny,{className:"h-3 w-3"})}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>A(C.id,C.name),className:"h-8 w-8 text-destructive hover:text-destructive",children:l.jsx(Vn,{className:"h-3 w-3"})}),l.jsx(ne,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:async()=>{try{let L,U;if(C.types&&C.types.length>0)if(C.types.length===1)L=C.types[0].name,U=C.types[0].price;else{const P=C.types.map((K,te)=>`${te+1}. ${K.name} - $${K.price.toFixed(2)}`).join(`
`),H=window.prompt(`Select a type for "${C.name}":

${P}

Enter the number (1-${C.types.length}):`,"1");if(!H)return;const q=parseInt(H)-1;if(q<0||q>=C.types.length){alert("Invalid selection. Please try again.");return}L=C.types[q].name,U=C.types[q].price}else U=C.price||0;const z=window.prompt("Your full name:");if(!z)return;const R=window.prompt("Your email:");if(!R)return;const k=window.prompt("Quantity:","1")||"1",D=parseInt(k)||1,O=window.prompt("Phone (optional):","")||"",M=window.prompt("Address (optional):","")||"",V=L?`${C.name} (${L})`:C.name;await S({username:z,userName:z,userEmail:R,userPhone:O,address:M,items:[{productId:C.id,name:V,quantity:D,price:U,selectedType:L}],total:U*D,status:"pending",createdAt:new Date}),alert(`Order placed successfully!

Product: ${V}
Quantity: ${D}
Total: $${(U*D).toFixed(2)}`)}catch(L){console.error(L),alert("Failed to place order")}},children:C.types&&C.types.length>1?"Select & Buy":"Buy Now"})]})]}),l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",(C.types&&C.types.length>0?C.types[0].price:C.price||0).toFixed(2)]})]}),l.jsxs(ve,{className:"pt-0",children:[C.description&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:C.description}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[l.jsx("span",{children:C.createdAt.toLocaleDateString()}),C.categoryId&&l.jsx(on,{variant:"secondary",className:"text-xs",children:C.categoryId})]})]})]},C.id))})]}),l.jsxs(Fv,{value:"categories",className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Categories"}),l.jsxs(ne,{disabled:!0,children:[l.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx(Gu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Category Management"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Category management will be implemented in the future."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"For now, you can specify category IDs when creating products."})]})})]})]})]})]})}function iB({order:n,onChangeStatus:e,onDelete:t}){var r,s;return l.jsxs(ye,{children:[l.jsx(Ke,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs(Xe,{children:["Order for ",n.username||n.userName,l.jsx("div",{className:"text-xs text-muted-foreground",children:(s=(r=n.createdAt)==null?void 0:r.toLocaleString)==null?void 0:s.call(r)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(on,{variant:n.status==="completed"||n.iscompleted?"default":"secondary",children:[n.status,n.iscompleted?" â€¢ completed":""]}),l.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>e(n.id,"completed"),children:[l.jsx(Y_,{className:"h-4 w-4 mr-1"})," Complete"]}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>t(n.id),className:"text-destructive",children:l.jsx(Vn,{className:"h-4 w-4"})})]})]})}),l.jsxs(ve,{children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact"}),l.jsx("div",{className:"font-medium",children:n.username||n.userName}),l.jsx("div",{className:"text-sm",children:n.userEmail}),n.userPhone&&l.jsx("div",{className:"text-sm",children:n.userPhone}),n.address&&l.jsx("div",{className:"text-sm",children:n.address})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-muted-foreground",children:"Items"}),l.jsxs("div",{className:"space-y-2 mt-2",children:[n.items&&n.items.length>0?n.items.map((a,c)=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"text-sm",children:[a.name," x",a.quantity]}),l.jsxs("div",{className:"font-medium",children:["$",(a.price*a.quantity).toFixed(2)]})]},c)):l.jsx("div",{className:"text-sm text-muted-foreground",children:"No item details. Products IDs may be attached in the raw order."}),n.productsIds&&n.productsIds.length>0&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Product IDs: ",(n.productsIds||[]).join(", ")]}),l.jsxs("div",{className:"flex items-center justify-between pt-2 border-t mt-2",children:[l.jsx("div",{className:"font-medium",children:"Total"}),l.jsxs("div",{className:"font-bold",children:["$",(n.total||0).toFixed(2)]})]})]})]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsxs(ne,{onClick:()=>e(n.id,"paid"),children:[l.jsx(Y_,{className:"h-4 w-4 mr-2"})," Mark Paid"]}),l.jsxs(ne,{variant:"outline",onClick:()=>e(n.id,"cancelled"),children:[l.jsx(ak,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]})]},n.id)}function oB(){const{orders:n,loading:e,error:t,updateOrder:r,deleteOrder:s}=UA(),a=async(u,h)=>{u&&await r(u,{status:h})},c=async u=>{u&&confirm("Delete this order?")&&await s(u)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Orders"}),l.jsx("p",{className:"text-muted-foreground",children:"View and manage store orders"})]})}),e&&l.jsx("div",{children:"Loading..."}),t&&l.jsx("div",{className:"text-destructive",children:t}),!e&&!t&&l.jsx("div",{className:"grid gap-4",children:n.map(u=>l.jsx(iB,{order:u,onChangeStatus:a,onDelete:c},u.id))})]})}function bw(n,e){const[t,r]=E.useState([]),[s,a]=E.useState(!0),[c,u]=E.useState(null);return E.useEffect(()=>{let h=null,p=!0;return(async()=>{if(!n){r([]),a(!1);return}try{const y=Er(qs(Ve,"lectures"),l5(J6(),"==",n)),v=await Ft(y);if(v.empty){p&&(r([]),a(!1));return}const b=v.docs[0],S=ot(b.ref,e);h=oa(S,w=>{if(!p)return;const _=[];w.forEach(A=>{const I=A.data();_.push({id:A.id,...I})}),r(_),a(!1)},w=>{console.error(`Failed to subscribe to ${e}:`,w),u(`Failed to load ${e}`),a(!1)})}catch(y){console.error(`Error resolving lecture for ${e}:`,y),p&&(u(y.message||String(y)),a(!1))}})(),()=>{p=!1,h&&h()}},[n,e]),{items:t,loading:s,error:c}}function aB(n){return bw(n,"videos")}function lB(n){return bw(n,"files")}function $A(n){return bw(n,"quizzes")}function cB(){var p;const[n]=Ad(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=um(),{items:a,loading:c,error:u}=aB(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Videos for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Jn,{to:"/admin/resources",children:l.jsx(ne,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ye,{children:[l.jsx(Ke,{children:l.jsxs(Xe,{children:["Videos (",((p=h.videos)==null?void 0:p.length)||0,")"]})}),l.jsx(ve,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[g.thumbnailUrl?l.jsx("img",{src:g.thumbnailUrl,alt:g.title,className:"w-32 h-18 object-cover rounded"}):l.jsx("div",{className:"w-32 h-18 bg-muted rounded"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsxs(ne,{onClick:()=>window.open(g.url||g.youtubeUrl||"","_blank"),children:[" ",l.jsx(Ws,{className:"h-4 w-4 mr-2"})," Play "]})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No videos available for this lecture."})})]})]}):l.jsx(ye,{children:l.jsxs(ve,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its videos."}),l.jsx("div",{className:"mt-4",children:l.jsx(Jn,{to:"/admin/years",children:l.jsx(ne,{children:"Back to Years"})})})]})})}function uB(){var p;const[n]=Ad(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=um(),{items:a,loading:c,error:u}=lB(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Files for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Jn,{to:"/admin/resources",children:l.jsx(ne,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ye,{children:[l.jsx(Ke,{children:l.jsxs(Xe,{children:["Files (",((p=h.files)==null?void 0:p.length)||0,")"]})}),l.jsx(ve,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ti,{className:"h-6 w-6 text-blue-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||g.name||"Untitled File"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),l.jsx("div",{children:l.jsx(ne,{onClick:()=>window.open(g.fileUrl||g.url||"_blank"),children:"Download"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No files available for this lecture."})})]})]}):l.jsx(ye,{children:l.jsxs(ve,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its files."}),l.jsx("div",{className:"mt-4",children:l.jsx(Jn,{to:"/admin/years",children:l.jsx(ne,{children:"Back to Years"})})})]})})}function dB(){var p;const[n]=Ad(),e=n.get("lecture"),{lectures:t,loading:r,error:s}=um(),{items:a,loading:c,error:u}=$A(e);if(c||r)return l.jsx("div",{children:"Loading..."});if(u||s)return l.jsx("div",{className:"text-destructive",children:u||s});const h=t.find(g=>g.id===e);return h?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Quizzes for ",h.title||h.id]}),l.jsx("p",{className:"text-muted-foreground",children:h.description})]}),l.jsx("div",{children:l.jsx(Jn,{to:"/admin/resources",children:l.jsx(ne,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ye,{children:[l.jsx(Ke,{children:l.jsxs(Xe,{children:["Quizzes (",((p=h.quizzes)==null?void 0:p.length)||0,")"]})}),l.jsx(ve,{children:a&&a.length>0?l.jsx("div",{className:"space-y-3",children:a.map(g=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ki,{className:"h-6 w-6 text-purple-600"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:g.title||"Untitled Quiz"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:g.description}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("strong",{children:g.type||"multiple_choice"})]})]})]}),l.jsx("div",{children:(g.type||"multiple_choice")==="flashcard"?l.jsx(ne,{onClick:()=>window.location.href=`/admin/flashcards?lecture=${e}&quiz=${g.id}`,children:"Flashcards"}):l.jsx(ne,{onClick:()=>alert("Multiple choice runner not implemented. Use Flashcards or implement MCQ runner."),children:"Start"})})]},g.id))}):l.jsx("p",{className:"text-muted-foreground",children:"No quizzes available for this lecture."})})]})]}):l.jsx(ye,{children:l.jsxs(ve,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its quizzes."}),l.jsx("div",{className:"mt-4",children:l.jsx(Jn,{to:"/admin/years",children:l.jsx(ne,{children:"Back to Years"})})})]})})}var Sw="Progress",Nw=100,[hB,KB]=Ui(Sw),[fB,pB]=hB(Sw),zA=E.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:s,getValueLabel:a=mB,...c}=n;(s||s===0)&&!O1(s)&&console.error(gB(`${s}`,"Progress"));const u=O1(s)?s:Nw;r!==null&&!D1(r,u)&&console.error(yB(`${r}`,"Progress"));const h=D1(r,u)?r:null,p=wp(h)?a(h,u):void 0;return l.jsx(fB,{scope:t,value:h,max:u,children:l.jsx(We.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":wp(h)?h:void 0,"aria-valuetext":p,role:"progressbar","data-state":WA(h,u),"data-value":h??void 0,"data-max":u,...c,ref:e})})});zA.displayName=Sw;var BA="ProgressIndicator",qA=E.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,s=pB(BA,t);return l.jsx(We.div,{"data-state":WA(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});qA.displayName=BA;function mB(n,e){return`${Math.round(n/e*100)}%`}function WA(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function wp(n){return typeof n=="number"}function O1(n){return wp(n)&&!isNaN(n)&&n>0}function D1(n,e){return wp(n)&&!isNaN(n)&&n<=e&&n>=0}function gB(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Nw}\`.`}function yB(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Nw} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var HA=zA,vB=qA;const KA=E.forwardRef(({className:n,value:e,...t},r)=>l.jsx(HA,{ref:r,className:et("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:l.jsx(vB,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));KA.displayName=HA.displayName;function xB(){const[n]=Ad(),e=n.get("lecture"),t=n.get("quiz"),{items:r,loading:s,error:a}=$A(e),c=r.find(V=>V.id===t),[u,h]=E.useState(0),[p,g]=E.useState([]);if(s)return l.jsx("div",{children:"Loading..."});if(a)return l.jsx("div",{className:"text-destructive",children:a});if(!c)return l.jsx(ye,{children:l.jsxs(ve,{className:"p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Quiz not found"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a quiz to start flashcards."}),l.jsx("div",{className:"mt-4",children:l.jsx(Jn,{to:"/admin/quizzes",children:l.jsx(ne,{children:"Back"})})})]})});const y=c.questions||[],v=y.reduce((V,P)=>V+(P.weight&&Number(P.weight)||1),0),b=y[u],S=b&&(b.weight||1)||1,w=p[u]??0,[_,A]=E.useState(!1),[I,C]=E.useState([]),[L,U]=E.useState(null);E.useEffect(()=>{A(!1),C([]),U(null)},[u]);const z=(V,P)=>{const H=[...p];H[V]=P,g(H)},R=p.reduce((V,P,H)=>V+(P||0),0),k=Math.round(R/v*100),D=V=>{if(!V)return[{type:"text",value:""}];const P=[],H=/\[\[(.+?)\]\]/g;let q=0,K;for(;(K=H.exec(V))!==null;)K.index>q&&P.push({type:"text",value:V.slice(q,K.index)}),P.push({type:"blank",value:K[1]}),q=H.lastIndex;return q<V.length&&P.push({type:"text",value:V.slice(q)}),P},O=()=>{const V=(b==null?void 0:b.question)||"",H=D(V).filter(q=>q.type==="blank");H.length>0?C(H.map(()=>"")):C([""]),U(null),A(!0)},M=()=>{const V=(b==null?void 0:b.question)||"",H=D(V).filter(Q=>Q.type==="blank").map(Q=>Q.value);let q=[];H.length>0?q=H:b&&Array.isArray(b.options)&&typeof b.correctAnswer=="number"?q=[b.options[b.correctAnswer]||""]:b&&(b.answer||b.correct)&&(q=[String(b.answer||b.correct)]);const te=I.map((Q,oe)=>{const le=(q[oe]??q[0]??"").toString().trim().toLowerCase();return Q.toString().trim().toLowerCase()===le&&le!==""}).every(Boolean);U(te?"Correct":"Incorrect"),te&&z(u,S)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold",children:["Flashcards: ",c.title]}),l.jsx("p",{className:"text-muted-foreground",children:"Fill marks per question. Total progress shows weighted score."})]}),l.jsx("div",{children:l.jsx(Jn,{to:"/admin/quizzes",children:l.jsx(ne,{variant:"ghost",children:"Back"})})})]}),l.jsxs(ye,{children:[l.jsx(Ke,{children:l.jsx(Xe,{children:"Progress"})}),l.jsxs(ve,{children:[l.jsxs("div",{className:"mb-2 text-sm",children:["Total: ",v," points â€” Current: ",R," points"]}),l.jsx(KA,{value:k}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[k,"%"]})]})]}),l.jsxs(ye,{children:[l.jsx(Ke,{children:l.jsxs(Xe,{children:["Question ",u+1," / ",y.length]})}),l.jsx(ve,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"font-medium",children:_?l.jsxs("div",{className:"space-y-2",children:[(()=>{const V=D(b.question||"");let P=0;return l.jsxs("div",{children:[V.map((H,q)=>{if(H.type==="text")return l.jsx("span",{children:H.value},q);const K=P++;return l.jsx("input",{value:I[K]??"",onChange:te=>C(Q=>{const oe=[...Q];return oe[K]=te.target.value,oe}),placeholder:"Fill the blank",className:"border-b-2 border-gray-300 px-1 mx-1"},q)}),V.length===1&&V[0].type==="text"&&l.jsx("div",{children:l.jsx("input",{value:I[0]??"",onChange:H=>C(q=>{const K=[...q];return K[0]=H.target.value,K}),placeholder:"Answer",className:"border-b-2 border-gray-300 px-1"})})]})})(),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx(ne,{onClick:M,children:"Check"}),l.jsx(ne,{variant:"outline",onClick:()=>{A(!1),U(null)},children:"Cancel"}),L&&l.jsx("div",{className:"ml-2 text-sm",children:L})]})]}):l.jsx("span",{role:"button",tabIndex:0,onClick:O,onKeyDown:V=>{V.key==="Enter"&&O()},children:b.question})}),b.imageUrl&&l.jsx("img",{src:b.imageUrl,alt:"question",className:"w-full max-w-md object-contain"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Weight: ",S]}),l.jsxs("label",{className:"text-sm",children:["Mark (0 - ",S,")"]}),l.jsx("input",{type:"number",min:0,max:S,value:w,onChange:V=>z(u,Math.max(0,Math.min(S,Number(V.target.value)||0))),className:"border rounded px-2 py-1 w-24"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(ne,{disabled:u===0,onClick:()=>h(V=>Math.max(0,V-1)),children:"Previous"}),l.jsx(ne,{disabled:u===y.length-1,onClick:()=>h(V=>Math.min(y.length-1,V+1)),children:"Next"}),l.jsx(ne,{variant:"outline",onClick:()=>{g([]),h(0)},children:"Reset"})]}),l.jsx("div",{className:"mt-4",children:l.jsx(ne,{onClick:()=>alert(`Final score: ${R}/${v} (${k}%)`),children:"Finish"})})]})})]})]})}function wB(){return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),l.jsx("p",{className:"text-muted-foreground",children:"Configure application settings and preferences"})]}),l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx(IS,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"This section will provide configuration options for the admin panel."}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Features: User management, system configuration, backup settings, security options."})]})})]})}function _B(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const p=Er(ot(Ve,"maps")),g=oa(p,y=>{const v=[];y.forEach(b=>{var w,_;const S=b.data();v.push({id:b.id,name:S.name||"",location:S.location||"",description:S.description||S.desc||"",type:S.type||S.mapType||"",video_url:S.video_url||S.videoUrl||"",createdAt:((_=(w=S.createdAt)==null?void 0:w.toDate)==null?void 0:_.call(w))||void 0})}),e(v),r(!1)},y=>{console.error("Failed to load maps:",y),a("Failed to load maps"),r(!1)});return()=>g()},[]),{maps:n,loading:t,error:s,createMap:async p=>{const g={...p,createdAt:new Date};g.type&&!g.mapType&&(g.mapType=g.type),g.mapType&&!g.type&&(g.type=g.mapType),["name","location","description","video_url","type","mapType"].forEach(y=>{typeof g[y]=="string"&&(g[y]=g[y].trim())}),await bn(ot(Ve,"maps"),g)},updateMap:async(p,g)=>{const y={...g};y.type&&!y.mapType&&(y.mapType=y.type),y.mapType&&!y.type&&(y.type=y.mapType),["name","location","description","video_url","type","mapType"].forEach(v=>{typeof y[v]=="string"&&(y[v]=y[v].trim())}),await pn(Mt(Ve,"maps",p),y)},deleteMap:async p=>{await Dr(Mt(Ve,"maps",p))}}}function EB(){const{maps:n,loading:e,error:t,createMap:r,updateMap:s,deleteMap:a}=_B(),[c,u]=E.useState({name:"",location:"",description:"",video_url:"",type:""}),[h,p]=E.useState(!1),[g,y]=E.useState(null),v=()=>u({name:"",location:"",description:"",video_url:"",type:""}),b=async S=>{if(S.preventDefault(),!!c.name.trim()){p(!0);try{g?await s(g,c):await r(c),v(),y(null)}catch(w){console.error("Error saving map:",w),alert("Failed to save map")}finally{p(!1)}}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(rd,{className:"h-6 w-6 text-blue-600"}),l.jsx("h1",{className:"text-3xl font-bold",children:"Maps"})]}),l.jsxs(ye,{children:[l.jsx(Ke,{children:l.jsx(Xe,{children:"Add Map"})}),l.jsx(ve,{children:l.jsxs("form",{onSubmit:b,className:"grid md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{children:"Name"}),l.jsx(be,{value:c.name,onChange:S=>u(w=>({...w,name:S.target.value})),placeholder:"Map name",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{children:"Location"}),l.jsx(be,{value:c.location,onChange:S=>u(w=>({...w,location:S.target.value})),placeholder:"Location"})]}),l.jsxs("div",{className:"space-y-2 md:col-span-3",children:[l.jsx(je,{children:"Description"}),l.jsx("textarea",{value:c.description,onChange:S=>u(w=>({...w,description:S.target.value})),placeholder:"Short description",className:"w-full border rounded px-3 py-2",rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{children:"Type"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2",value:c.type,onChange:S=>u(w=>({...w,type:S.target.value})),children:[l.jsx("option",{value:"",children:"Select type"}),l.jsx("option",{value:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©",children:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©"}),l.jsx("option",{value:"Ù„Ø§Ø¨Ø§Øª",children:"Ù„Ø§Ø¨Ø§Øª"}),l.jsx("option",{value:"Ù…Ø¯Ø±Ø¬",children:"Ù…Ø¯Ø±Ø¬"}),l.jsx("option",{value:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª",children:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª"}),l.jsx("option",{value:"Ù…Ø·Ø¹Ù…",children:"Ù…Ø·Ø¹Ù…"}),l.jsx("option",{value:"Ù…ØµÙ„Ù‰",children:"Ù…ØµÙ„Ù‰"}),l.jsx("option",{value:"Ø£Ø®Ø±Ù‰",children:"Ø£Ø®Ø±Ù‰"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{children:"Video URL"}),l.jsx(be,{value:c.video_url,onChange:S=>u(w=>({...w,video_url:S.target.value})),placeholder:"https://..."})]}),l.jsx("div",{className:"md:col-span-3 flex justify-end space-x-2",children:g?l.jsxs(l.Fragment,{children:[l.jsx(ne,{type:"button",variant:"outline",onClick:()=>{y(null),v()},children:"Cancel"}),l.jsxs(ne,{type:"submit",disabled:h,children:[l.jsx(Zt,{className:"h-4 w-4 mr-2"}),h?"Saving...":"Save"]})]}):l.jsxs(ne,{type:"submit",disabled:h,children:[l.jsx(Zt,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add"]})})]})})]}),l.jsxs(ye,{children:[l.jsx(Ke,{children:l.jsxs(Xe,{children:["All Maps (",n.length,")"]})}),l.jsx(ve,{children:e?l.jsx("div",{children:"Loading..."}):t?l.jsx("div",{className:"text-destructive",children:t}):n.length===0?l.jsx("div",{className:"text-muted-foreground",children:"No maps yet."}):l.jsx("div",{className:"grid gap-3",children:n.map(S=>l.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:S.name}),l.jsx("div",{className:"text-xs text-muted-foreground truncate",children:S.location}),S.type&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",l.jsx("span",{className:"font-medium",children:S.type})]}),S.description&&l.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:S.description}),S.video_url&&l.jsx("a",{className:"text-xs text-blue-600 hover:underline",href:S.video_url,target:"_blank",rel:"noreferrer",children:S.video_url})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{y(S.id),u({name:S.name||"",location:S.location||"",description:S.description||"",video_url:S.video_url||"",type:S.type||""}),window.scrollTo({top:0,behavior:"smooth"})},className:"",children:"Edit"}),l.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>a(S.id),className:"text-destructive",children:l.jsx(Vn,{className:"h-4 w-4"})})]})]},S.id))})})]})]})}function bB({research:n,onClose:e,onSave:t}){const[r,s]=E.useState({projectTitle:"",abstract:"",fieldOfResearch:[],contactPerson:[],authorshipPosition:[],projectDuration:"",requiredSkills:[],supervisor:""}),[a,c]=E.useState(""),[u,h]=E.useState("");E.useEffect(()=>{n&&s({projectTitle:n.projectTitle||"",abstract:n.abstract||"",fieldOfResearch:n.fieldOfResearch||[],contactPerson:n.contactPerson||[],authorshipPosition:n.authorshipPosition||[],projectDuration:n.projectDuration||"",requiredSkills:n.requiredSkills||[],supervisor:n.supervisor||""})},[n]);const p=()=>{const S=a.trim();S&&(r.fieldOfResearch.includes(S)||s(w=>({...w,fieldOfResearch:[...w.fieldOfResearch,S]})),c(""))},g=()=>{const S=u.trim();S&&(r.requiredSkills.includes(S)||s(w=>({...w,requiredSkills:[...w.requiredSkills,S]})),h(""))},y=S=>s(w=>({...w,fieldOfResearch:w.fieldOfResearch.filter(_=>_!==S)})),v=S=>s(w=>({...w,requiredSkills:w.requiredSkills.filter(_=>_!==S)})),b=S=>{S.preventDefault();const w={projectTitle:r.projectTitle,abstract:r.abstract,fieldOfResearch:r.fieldOfResearch,contactPerson:r.contactPerson,authorshipPosition:r.authorshipPosition,projectDuration:r.projectDuration,requiredSkills:r.requiredSkills,supervisor:r.supervisor,updatedAt:new Date,...n?{}:{createdAt:new Date}};t(w)};return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs(ne,{variant:"ghost",onClick:e,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Back"]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:n?"Edit Research":"Create Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Add or update research project details"})]})]})}),l.jsx("form",{onSubmit:b,className:"space-y-6",children:l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Project Details"}),l.jsx(At,{children:"Title and abstract"})]}),l.jsxs(ve,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"title",children:"Project Title *"}),l.jsx(be,{id:"title",placeholder:"Enter project title...",value:r.projectTitle,onChange:S=>s(w=>({...w,projectTitle:S.target.value})),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{htmlFor:"abstract",children:"Abstract"}),l.jsx(ei,{id:"abstract",placeholder:"Write a brief abstract...",value:r.abstract,onChange:S=>s(w=>({...w,abstract:S.target.value})),rows:8})]})]})]}),l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Fields & Skills"}),l.jsx(At,{children:"Fields of research and required skills"})]}),l.jsxs(ve,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(je,{children:"Field of Research"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(be,{placeholder:"Add field e.g., Oncology",value:a,onChange:S=>c(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),p())}}),l.jsx(ne,{type:"button",onClick:p,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.fieldOfResearch.map(S=>l.jsxs(on,{variant:"secondary",className:"flex items-center gap-2",children:[S,l.jsx("button",{type:"button",onClick:()=>y(S),className:"ml-1 hover:text-destructive",children:l.jsx(Sc,{className:"h-3 w-3"})})]},S))})]}),l.jsxs("div",{children:[l.jsx(je,{children:"Required Skills"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(be,{placeholder:"Add skill e.g., Data analysis",value:u,onChange:S=>h(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),g())}}),l.jsx(ne,{type:"button",onClick:g,variant:"outline",children:"Add"})]}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.requiredSkills.map(S=>l.jsxs(on,{variant:"secondary",className:"flex items-center gap-2",children:[S,l.jsx("button",{type:"button",onClick:()=>v(S),className:"ml-1 hover:text-destructive",children:l.jsx(Sc,{className:"h-3 w-3"})})]},S))})]})]})]})]}),l.jsx("div",{className:"space-y-6",children:l.jsxs(ye,{children:[l.jsxs(Ke,{children:[l.jsx(Xe,{children:"Meta"}),l.jsx(At,{children:"Contact, supervisor and duration"})]}),l.jsxs(ve,{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{children:"Contact Person(s)"}),l.jsx(be,{placeholder:"Comma separated names",value:r.contactPerson.join(", "),onChange:S=>s(w=>({...w,contactPerson:S.target.value.split(",").map(_=>_.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{children:"Authorship Positions"}),l.jsx(be,{placeholder:"Comma separated positions",value:r.authorshipPosition.join(", "),onChange:S=>s(w=>({...w,authorshipPosition:S.target.value.split(",").map(_=>_.trim()).filter(Boolean)}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{children:"Supervisor"}),l.jsx(be,{placeholder:"Supervisor name",value:r.supervisor,onChange:S=>s(w=>({...w,supervisor:S.target.value}))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(je,{children:"Project Duration"}),l.jsx(be,{placeholder:"e.g., 6 months",value:r.projectDuration,onChange:S=>s(w=>({...w,projectDuration:S.target.value}))})]}),l.jsxs("div",{className:"flex justify-end",children:[l.jsx(ne,{variant:"ghost",onClick:e,className:"mr-2",children:"Cancel"}),l.jsx(ne,{type:"submit",children:"Save"})]})]})]})})]})})]})}const SB=[{id:"r1",projectTitle:"Impact of Early Clinical Exposure on Medical Students",abstract:"A study investigating how early clinical exposure affects students' clinical reasoning and confidence.",fieldOfResearch:["Medical Education","Clinical Skills"],contactPerson:["Dr. Sarah Johnson"],authorshipPosition:["Lead","Co-author"],projectDuration:"6 months",requiredSkills:["Clinical observation","Data analysis"],supervisor:"Prof. Michael Chen",createdAt:new Date,updatedAt:new Date}];function NB(){const[n,e]=E.useState([]),[t,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1);E.useEffect(()=>{const y=async()=>{try{const b=Er(ot(Ve,"research"));await Ft(b);const S=Er(ot(Ve,"research"),Bd("createdAt","desc"));return oa(S,_=>{const A=[];_.forEach(I=>{var L,U;const C=I.data();A.push({id:I.id,projectTitle:C.projectTitle||C.title||"",abstract:C.abstract||"",fieldOfResearch:C.fieldOfResearch||[],contactPerson:C.contactPerson||[],authorshipPosition:C.authorshipPosition||[],projectDuration:C.projectDuration||"",requiredSkills:C.requiredSkills||[],supervisor:C.supervisor||"",createdAt:(L=C.createdAt)!=null&&L.toDate?C.createdAt.toDate():C.createdAt||new Date,updatedAt:(U=C.updatedAt)!=null&&U.toDate?C.updatedAt.toDate():C.updatedAt||new Date})}),e(A),r(!1)},_=>{console.error("Error in research listener:",_),v()})}catch(b){return console.error("Firebase connection failed for research:",b),v(),null}},v=()=>{u(!0),e(SB),a(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(b=>[v,...b]);return}try{await bn(ot(Ve,"research"),y)}catch(v){console.error("Error creating research:",v),u(!0),await h(y)}};return{research:n,loading:t,error:s,createResearch:h,updateResearch:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(b=>b.map(S=>S.id===y?{...S,...v}:S));return}try{await pn(Mt(Ve,"research",y),v)}catch(b){console.error("Error updating research:",b),e(S=>S.map(w=>w.id===y?{...w,...v}:w))}},deleteResearch:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(b=>b.id!==y));return}try{await Dr(Mt(Ve,"research",y))}catch(v){console.error("Error deleting research:",v),e(b=>b.filter(S=>S.id!==y))}},isOfflineMode:c}}function TB(){const[n,e]=E.useState(""),[t,r]=E.useState(null),[s,a]=E.useState(!1),{research:c,loading:u,error:h,createResearch:p,updateResearch:g,deleteResearch:y}=NB(),v=c.filter(_=>_.projectTitle.toLowerCase().includes(n.toLowerCase())),b=()=>{r(null),a(!0)},S=_=>{r(_),a(!0)},w=async _=>{window.confirm("Are you sure you want to delete this research entry?")&&await y(_)};return s?l.jsx(bB,{research:t,onClose:()=>{a(!1),r(null)},onSave:async _=>{try{t?await g(t.id,_):await p(_),a(!1),r(null)}catch(A){console.error(A),alert("Failed to save. Please try again.")}}}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Research"}),l.jsx("p",{className:"text-muted-foreground",children:"Manage research projects and student/faculty submissions"})]}),l.jsxs(ne,{onClick:b,className:"flex items-center gap-2",children:[l.jsx(Zt,{className:"h-4 w-4"}),"Create Research"]})]}),l.jsx(ye,{children:l.jsx(ve,{className:"pt-6",children:l.jsxs("div",{className:"relative",children:[l.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(be,{placeholder:"Search by project title...",value:n,onChange:_=>e(_.target.value),className:"pl-10"})]})})}),u&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx(sl,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Loading research entries..."})]})}),h&&l.jsx(ye,{children:l.jsxs(ve,{className:"text-center py-12",children:[l.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading research"}),l.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&l.jsx("div",{className:"space-y-4",children:v.map(_=>l.jsx(ye,{className:"hover:shadow-md transition-shadow",children:l.jsx(ve,{className:"pt-6",children:l.jsx("div",{className:"flex gap-4",children:l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:_.projectTitle}),l.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mt-2",children:_.abstract}),l.jsx("div",{className:"flex gap-2 flex-wrap mt-3 text-xs text-muted-foreground",children:(_.fieldOfResearch||[]).map(A=>l.jsx("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:A},A))})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx(ne,{variant:"ghost",onClick:()=>S(_),children:l.jsx(Ai,{className:"h-4 w-4"})}),l.jsx(ne,{variant:"ghost",onClick:()=>w(_.id),children:l.jsx(Vn,{className:"h-4 w-4"})})]})]})})})})},_.id))})]})}const CB=()=>{const n=zi();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),l.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},IB=new LD({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!1,retry:1}}});function jB({children:n}){const{currentUser:e}=ow();return e?l.jsx(l.Fragment,{children:n}):l.jsx(Af,{to:"/login"})}const L1=()=>l.jsx(H5,{children:l.jsx(UD,{client:IB,children:l.jsxs(yD,{children:[l.jsx(n2,{}),l.jsx(k2,{}),l.jsx(JL,{basename:"/builder-stellar-world/",children:l.jsx(B5,{children:l.jsxs(BL,{children:[l.jsx(Wt,{path:"/login",element:l.jsx(r$,{})}),l.jsxs(Wt,{path:"/admin",element:l.jsx(jB,{children:l.jsx(J5,{})}),children:[l.jsx(Wt,{index:!0,element:l.jsx(f$,{})}),l.jsx(Wt,{path:"news",element:l.jsx(w$,{})}),l.jsx(Wt,{path:"years",element:l.jsx(P9,{})}),l.jsx(Wt,{path:"years/:id",element:l.jsx(R9,{})}),l.jsx(Wt,{path:"subjects/:id",element:l.jsx(U9,{})}),l.jsx(Wt,{path:"resources",element:l.jsx(k1,{})}),l.jsx(Wt,{path:"resources/*",element:l.jsx(k1,{})}),l.jsx(Wt,{path:"VIDEOS",element:l.jsx(Af,{to:"/admin/years",replace:!0})}),l.jsx(Wt,{path:"VIDEOS/*",element:l.jsx(Af,{to:"/admin/years",replace:!0})}),l.jsx(Wt,{path:"professors",element:l.jsx(O9,{})}),l.jsx(Wt,{path:"users",element:l.jsx(M9,{})}),l.jsx(Wt,{path:"store",element:l.jsx(sB,{})}),l.jsx(Wt,{path:"orders",element:l.jsx(oB,{})}),l.jsx(Wt,{path:"videos",element:l.jsx(cB,{})}),l.jsx(Wt,{path:"files",element:l.jsx(uB,{})}),l.jsx(Wt,{path:"quizzes",element:l.jsx(dB,{})}),l.jsx(Wt,{path:"flashcards",element:l.jsx(xB,{})}),l.jsx(Wt,{path:"research",element:l.jsx(TB,{})}),l.jsx(Wt,{path:"maps",element:l.jsx(EB,{})}),l.jsx(Wt,{path:"settings",element:l.jsx(wB,{})})]}),l.jsx(Wt,{path:"/",element:l.jsx(Af,{to:"/admin"})}),l.jsx(Wt,{path:"*",element:l.jsx(CB,{})})]})})})]})})}),AB=document.getElementById("root");if(window.__appRoot)window.__appRoot.render(l.jsx(L1,{}));else{const n=s2.createRoot(AB);window.__appRoot=n,n.render(l.jsx(L1,{}))}
