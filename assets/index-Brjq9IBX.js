var zk=Object.defineProperty;var DE=t=>{throw TypeError(t)};var Bk=(t,e,n)=>e in t?zk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var LE=(t,e,n)=>Bk(t,typeof e!="symbol"?e+"":e,n),xy=(t,e,n)=>e.has(t)||DE("Cannot "+n);var J=(t,e,n)=>(xy(t,e,"read from private field"),n?n.call(t):e.get(t)),nt=(t,e,n)=>e.has(t)?DE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),De=(t,e,n,r)=>(xy(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),wt=(t,e,n)=>(xy(t,e,"access private method"),n);var Sf=(t,e,n,r)=>({set _(s){De(t,e,s,n)},get _(){return J(t,e,r)}});function qk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const Wk="modulepreload",Hk=function(t){return"/builder-stellar-world/"+t},ME={},eS=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=c(n.map(f=>{if(f=Hk(f),f in ME)return;ME[f]=!0;const g=f.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":Wk,g||(v.as="script"),v.crossOrigin="",v.href=f,h&&v.setAttribute("nonce",h),document.head.appendChild(v),g)return new Promise((w,b)=>{v.addEventListener("load",w),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return s.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function tS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wy={exports:{}},Xu={},_y={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function Kk(){if(FE)return ft;FE=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=y&&B[y]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,_={};function x(B,ee,ue){this.props=B,this.context=ee,this.refs=_,this.updater=ue||w}x.prototype.isReactComponent={},x.prototype.setState=function(B,ee){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ee,"setState")},x.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function j(){}j.prototype=x.prototype;function C(B,ee,ue){this.props=B,this.context=ee,this.refs=_,this.updater=ue||w}var I=C.prototype=new j;I.constructor=C,b(I,x.prototype),I.isPureReactComponent=!0;var M=Array.isArray,U=Object.prototype.hasOwnProperty,z={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function R(B,ee,ue){var Te,Le={},Ce=null,we=null;if(ee!=null)for(Te in ee.ref!==void 0&&(we=ee.ref),ee.key!==void 0&&(Ce=""+ee.key),ee)U.call(ee,Te)&&!P.hasOwnProperty(Te)&&(Le[Te]=ee[Te]);var Ie=arguments.length-2;if(Ie===1)Le.children=ue;else if(1<Ie){for(var Ke=Array(Ie),Ve=0;Ve<Ie;Ve++)Ke[Ve]=arguments[Ve+2];Le.children=Ke}if(B&&B.defaultProps)for(Te in Ie=B.defaultProps,Ie)Le[Te]===void 0&&(Le[Te]=Ie[Te]);return{$$typeof:t,type:B,key:Ce,ref:we,props:Le,_owner:z.current}}function D(B,ee){return{$$typeof:t,type:B.type,key:ee,ref:B.ref,props:B.props,_owner:B._owner}}function O(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function k(B){var ee={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ue){return ee[ue]})}var V=/\/+/g;function F(B,ee){return typeof B=="object"&&B!==null&&B.key!=null?k(""+B.key):ee.toString(36)}function H(B,ee,ue,Te,Le){var Ce=typeof B;(Ce==="undefined"||Ce==="boolean")&&(B=null);var we=!1;if(B===null)we=!0;else switch(Ce){case"string":case"number":we=!0;break;case"object":switch(B.$$typeof){case t:case e:we=!0}}if(we)return we=B,Le=Le(we),B=Te===""?"."+F(we,0):Te,M(Le)?(ue="",B!=null&&(ue=B.replace(V,"$&/")+"/"),H(Le,ee,ue,"",function(Ve){return Ve})):Le!=null&&(O(Le)&&(Le=D(Le,ue+(!Le.key||we&&we.key===Le.key?"":(""+Le.key).replace(V,"$&/")+"/")+B)),ee.push(Le)),1;if(we=0,Te=Te===""?".":Te+":",M(B))for(var Ie=0;Ie<B.length;Ie++){Ce=B[Ie];var Ke=Te+F(Ce,Ie);we+=H(Ce,ee,ue,Ke,Le)}else if(Ke=v(B),typeof Ke=="function")for(B=Ke.call(B),Ie=0;!(Ce=B.next()).done;)Ce=Ce.value,Ke=Te+F(Ce,Ie++),we+=H(Ce,ee,ue,Ke,Le);else if(Ce==="object")throw ee=String(B),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return we}function Q(B,ee,ue){if(B==null)return B;var Te=[],Le=0;return H(B,Te,"","",function(Ce){return ee.call(ue,Ce,Le++)}),Te}function K(B){if(B._status===-1){var ee=B._result;ee=ee(),ee.then(function(ue){(B._status===0||B._status===-1)&&(B._status=1,B._result=ue)},function(ue){(B._status===0||B._status===-1)&&(B._status=2,B._result=ue)}),B._status===-1&&(B._status=0,B._result=ee)}if(B._status===1)return B._result.default;throw B._result}var Z={current:null},W={transition:null},Y={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:W,ReactCurrentOwner:z};function ne(){throw Error("act(...) is not supported in production builds of React.")}return ft.Children={map:Q,forEach:function(B,ee,ue){Q(B,function(){ee.apply(this,arguments)},ue)},count:function(B){var ee=0;return Q(B,function(){ee++}),ee},toArray:function(B){return Q(B,function(ee){return ee})||[]},only:function(B){if(!O(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},ft.Component=x,ft.Fragment=n,ft.Profiler=s,ft.PureComponent=C,ft.StrictMode=r,ft.Suspense=h,ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,ft.act=ne,ft.cloneElement=function(B,ee,ue){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Te=b({},B.props),Le=B.key,Ce=B.ref,we=B._owner;if(ee!=null){if(ee.ref!==void 0&&(Ce=ee.ref,we=z.current),ee.key!==void 0&&(Le=""+ee.key),B.type&&B.type.defaultProps)var Ie=B.type.defaultProps;for(Ke in ee)U.call(ee,Ke)&&!P.hasOwnProperty(Ke)&&(Te[Ke]=ee[Ke]===void 0&&Ie!==void 0?Ie[Ke]:ee[Ke])}var Ke=arguments.length-2;if(Ke===1)Te.children=ue;else if(1<Ke){Ie=Array(Ke);for(var Ve=0;Ve<Ke;Ve++)Ie[Ve]=arguments[Ve+2];Te.children=Ie}return{$$typeof:t,type:B.type,key:Le,ref:Ce,props:Te,_owner:we}},ft.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},ft.createElement=R,ft.createFactory=function(B){var ee=R.bind(null,B);return ee.type=B,ee},ft.createRef=function(){return{current:null}},ft.forwardRef=function(B){return{$$typeof:u,render:B}},ft.isValidElement=O,ft.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:K}},ft.memo=function(B,ee){return{$$typeof:f,type:B,compare:ee===void 0?null:ee}},ft.startTransition=function(B){var ee=W.transition;W.transition={};try{B()}finally{W.transition=ee}},ft.unstable_act=ne,ft.useCallback=function(B,ee){return Z.current.useCallback(B,ee)},ft.useContext=function(B){return Z.current.useContext(B)},ft.useDebugValue=function(){},ft.useDeferredValue=function(B){return Z.current.useDeferredValue(B)},ft.useEffect=function(B,ee){return Z.current.useEffect(B,ee)},ft.useId=function(){return Z.current.useId()},ft.useImperativeHandle=function(B,ee,ue){return Z.current.useImperativeHandle(B,ee,ue)},ft.useInsertionEffect=function(B,ee){return Z.current.useInsertionEffect(B,ee)},ft.useLayoutEffect=function(B,ee){return Z.current.useLayoutEffect(B,ee)},ft.useMemo=function(B,ee){return Z.current.useMemo(B,ee)},ft.useReducer=function(B,ee,ue){return Z.current.useReducer(B,ee,ue)},ft.useRef=function(B){return Z.current.useRef(B)},ft.useState=function(B){return Z.current.useState(B)},ft.useSyncExternalStore=function(B,ee,ue){return Z.current.useSyncExternalStore(B,ee,ue)},ft.useTransition=function(){return Z.current.useTransition()},ft.version="18.3.1",ft}var VE;function jx(){return VE||(VE=1,_y.exports=Kk()),_y.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE;function Gk(){if(UE)return Xu;UE=1;var t=jx(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,f){var g,y={},v=null,w=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(w=h.ref);for(g in h)r.call(h,g)&&!a.hasOwnProperty(g)&&(y[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:u,key:v,ref:w,props:y,_owner:s.current}}return Xu.Fragment=n,Xu.jsx=c,Xu.jsxs=c,Xu}var $E;function Qk(){return $E||($E=1,wy.exports=Gk()),wy.exports}var o=Qk(),E=jx();const _e=tS(E),nS=qk({__proto__:null,default:_e},[E]),Yk=1,Xk=1e6;let Ey=0;function Jk(){return Ey=(Ey+1)%Number.MAX_SAFE_INTEGER,Ey.toString()}const by=new Map,zE=t=>{if(by.has(t))return;const e=setTimeout(()=>{by.delete(t),ad({type:"REMOVE_TOAST",toastId:t})},Xk);by.set(t,e)},Zk=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Yk)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?zE(n):t.toasts.forEach(r=>{zE(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Kf=[];let Gf={toasts:[]};function ad(t){Gf=Zk(Gf,t),Kf.forEach(e=>{e(Gf)})}function e2({...t}){const e=Jk(),n=s=>ad({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>ad({type:"DISMISS_TOAST",toastId:e});return ad({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function t2(){const[t,e]=E.useState(Gf);return E.useEffect(()=>(Kf.push(e),()=>{const n=Kf.indexOf(e);n>-1&&Kf.splice(n,1)}),[t]),{...t,toast:e2,dismiss:n=>ad({type:"DISMISS_TOAST",toastId:n})}}var Ny={exports:{}},wr={},Sy={exports:{}},Ty={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE;function n2(){return BE||(BE=1,function(t){function e(W,Y){var ne=W.length;W.push(Y);e:for(;0<ne;){var B=ne-1>>>1,ee=W[B];if(0<s(ee,Y))W[B]=Y,W[ne]=ee,ne=B;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Y=W[0],ne=W.pop();if(ne!==Y){W[0]=ne;e:for(var B=0,ee=W.length,ue=ee>>>1;B<ue;){var Te=2*(B+1)-1,Le=W[Te],Ce=Te+1,we=W[Ce];if(0>s(Le,ne))Ce<ee&&0>s(we,Le)?(W[B]=we,W[Ce]=ne,B=Ce):(W[B]=Le,W[Te]=ne,B=Te);else if(Ce<ee&&0>s(we,ne))W[B]=we,W[Ce]=ne,B=Ce;else break e}}return Y}function s(W,Y){var ne=W.sortIndex-Y.sortIndex;return ne!==0?ne:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var h=[],f=[],g=1,y=null,v=3,w=!1,b=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(W){for(var Y=n(f);Y!==null;){if(Y.callback===null)r(f);else if(Y.startTime<=W)r(f),Y.sortIndex=Y.expirationTime,e(h,Y);else break;Y=n(f)}}function M(W){if(_=!1,I(W),!b)if(n(h)!==null)b=!0,K(U);else{var Y=n(f);Y!==null&&Z(M,Y.startTime-W)}}function U(W,Y){b=!1,_&&(_=!1,j(R),R=-1),w=!0;var ne=v;try{for(I(Y),y=n(h);y!==null&&(!(y.expirationTime>Y)||W&&!k());){var B=y.callback;if(typeof B=="function"){y.callback=null,v=y.priorityLevel;var ee=B(y.expirationTime<=Y);Y=t.unstable_now(),typeof ee=="function"?y.callback=ee:y===n(h)&&r(h),I(Y)}else r(h);y=n(h)}if(y!==null)var ue=!0;else{var Te=n(f);Te!==null&&Z(M,Te.startTime-Y),ue=!1}return ue}finally{y=null,v=ne,w=!1}}var z=!1,P=null,R=-1,D=5,O=-1;function k(){return!(t.unstable_now()-O<D)}function V(){if(P!==null){var W=t.unstable_now();O=W;var Y=!0;try{Y=P(!0,W)}finally{Y?F():(z=!1,P=null)}}else z=!1}var F;if(typeof C=="function")F=function(){C(V)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Q=H.port2;H.port1.onmessage=V,F=function(){Q.postMessage(null)}}else F=function(){x(V,0)};function K(W){P=W,z||(z=!0,F())}function Z(W,Y){R=x(function(){W(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){b||w||(b=!0,K(U))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(W){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var ne=v;v=Y;try{return W()}finally{v=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ne=v;v=W;try{return Y()}finally{v=ne}},t.unstable_scheduleCallback=function(W,Y,ne){var B=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?B+ne:B):ne=B,W){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ne+ee,W={id:g++,callback:Y,priorityLevel:W,startTime:ne,expirationTime:ee,sortIndex:-1},ne>B?(W.sortIndex=ne,e(f,W),n(h)===null&&W===n(f)&&(_?(j(R),R=-1):_=!0,Z(M,ne-B))):(W.sortIndex=ee,e(h,W),b||w||(b=!0,K(U))),W},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(W){var Y=v;return function(){var ne=v;v=Y;try{return W.apply(this,arguments)}finally{v=ne}}}}(Ty)),Ty}var qE;function r2(){return qE||(qE=1,Sy.exports=n2()),Sy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE;function s2(){if(WE)return wr;WE=1;var t=jx(),e=r2();function n(i){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,l){c(i,l),c(i+"Capture",l)}function c(i,l){for(s[i]=l,i=0;i<l.length;i++)r.add(l[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(i){return h.call(y,i)?!0:h.call(g,i)?!1:f.test(i)?y[i]=!0:(g[i]=!0,!1)}function w(i,l,d,m){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,l,d,m){if(l===null||typeof l>"u"||w(i,l,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function _(i,l,d,m,N,T,L){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=m,this.attributeNamespace=N,this.mustUseProperty=d,this.propertyName=i,this.type=l,this.sanitizeURL=T,this.removeEmptyString=L}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){x[i]=new _(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0];x[l]=new _(l,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){x[i]=new _(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){x[i]=new _(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){x[i]=new _(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){x[i]=new _(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){x[i]=new _(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){x[i]=new _(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){x[i]=new _(i,5,!1,i.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function C(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var l=i.replace(j,C);x[l]=new _(l,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var l=i.replace(j,C);x[l]=new _(l,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(j,C);x[l]=new _(l,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){x[i]=new _(i,1,!1,i.toLowerCase(),null,!1,!1)}),x.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){x[i]=new _(i,1,!1,i.toLowerCase(),null,!0,!0)});function I(i,l,d,m){var N=x.hasOwnProperty(l)?x[l]:null;(N!==null?N.type!==0:m||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(b(l,d,N,m)&&(d=null),m||N===null?v(l)&&(d===null?i.removeAttribute(l):i.setAttribute(l,""+d)):N.mustUseProperty?i[N.propertyName]=d===null?N.type===3?!1:"":d:(l=N.attributeName,m=N.attributeNamespace,d===null?i.removeAttribute(l):(N=N.type,d=N===3||N===4&&d===!0?"":""+d,m?i.setAttributeNS(m,l,d):i.setAttribute(l,d))))}var M=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),z=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),k=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),W=Symbol.iterator;function Y(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var ne=Object.assign,B;function ee(i){if(B===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);B=l&&l[1]||""}return`
`+B+i}var ue=!1;function Te(i,l){if(!i||ue)return"";ue=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ae){var m=ae}Reflect.construct(i,[],l)}else{try{l.call()}catch(ae){m=ae}i.call(l.prototype)}else{try{throw Error()}catch(ae){m=ae}i()}}catch(ae){if(ae&&m&&typeof ae.stack=="string"){for(var N=ae.stack.split(`
`),T=m.stack.split(`
`),L=N.length-1,q=T.length-1;1<=L&&0<=q&&N[L]!==T[q];)q--;for(;1<=L&&0<=q;L--,q--)if(N[L]!==T[q]){if(L!==1||q!==1)do if(L--,q--,0>q||N[L]!==T[q]){var G=`
`+N[L].replace(" at new "," at ");return i.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",i.displayName)),G}while(1<=L&&0<=q);break}}}finally{ue=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?ee(i):""}function Le(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=Te(i.type,!1),i;case 11:return i=Te(i.type.render,!1),i;case 1:return i=Te(i.type,!0),i;default:return""}}function Ce(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case z:return"Portal";case D:return"Profiler";case R:return"StrictMode";case F:return"Suspense";case H:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case k:return(i.displayName||"Context")+".Consumer";case O:return(i._context.displayName||"Context")+".Provider";case V:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Q:return l=i.displayName||null,l!==null?l:Ce(i.type)||"Memo";case K:l=i._payload,i=i._init;try{return Ce(i(l))}catch{}}return null}function we(i){var l=i.type;switch(i.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=l.render,i=i.displayName||i.name||"",l.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(l);case 8:return l===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ie(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ke(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ve(i){var l=Ke(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),m=""+i[l];if(!i.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var N=d.get,T=d.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return N.call(this)},set:function(L){m=""+L,T.call(this,L)}}),Object.defineProperty(i,l,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(L){m=""+L},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function st(i){i._valueTracker||(i._valueTracker=Ve(i))}function it(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return i&&(m=Ke(i)?i.checked?"true":"false":i.value),i=m,i!==d?(l.setValue(i),!0):!1}function ve(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function je(i,l){var d=l.checked;return ne({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function gt(i,l){var d=l.defaultValue==null?"":l.defaultValue,m=l.checked!=null?l.checked:l.defaultChecked;d=Ie(l.value!=null?l.value:d),i._wrapperState={initialChecked:m,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function cn(i,l){l=l.checked,l!=null&&I(i,"checked",l,!1)}function zn(i,l){cn(i,l);var d=Ie(l.value),m=l.type;if(d!=null)m==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}l.hasOwnProperty("value")?Lt(i,l.type,d):l.hasOwnProperty("defaultValue")&&Lt(i,l.type,Ie(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(i.defaultChecked=!!l.defaultChecked)}function jr(i,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var m=l.type;if(!(m!=="submit"&&m!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+i._wrapperState.initialValue,d||l===i.value||(i.value=l),i.defaultValue=l}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function Lt(i,l,d){(l!=="number"||ve(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var gn=Array.isArray;function Ar(i,l,d,m){if(i=i.options,l){l={};for(var N=0;N<d.length;N++)l["$"+d[N]]=!0;for(d=0;d<i.length;d++)N=l.hasOwnProperty("$"+i[d].value),i[d].selected!==N&&(i[d].selected=N),N&&m&&(i[d].defaultSelected=!0)}else{for(d=""+Ie(d),l=null,N=0;N<i.length;N++){if(i[N].value===d){i[N].selected=!0,m&&(i[N].defaultSelected=!0);return}l!==null||i[N].disabled||(l=i[N])}l!==null&&(l.selected=!0)}}function os(i,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},l,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hn(i,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(n(92));if(gn(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),d=l}i._wrapperState={initialValue:Ie(d)}}function Us(i,l){var d=Ie(l.value),m=Ie(l.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),l.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),m!=null&&(i.defaultValue=""+m)}function $s(i){var l=i.textContent;l===i._wrapperState.initialValue&&l!==""&&l!==null&&(i.value=l)}function zt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rt(i,l){return i==null||i==="http://www.w3.org/1999/xhtml"?zt(l):i==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Bn,bn=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,m,N){MSApp.execUnsafeLocalFunction(function(){return i(l,d,m,N)})}:i}(function(i,l){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=l;else{for(Bn=Bn||document.createElement("div"),Bn.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Bn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}});function Pr(i,l){if(l){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=l;return}}i.textContent=l}var as={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qr=["Webkit","ms","Moz","O"];Object.keys(as).forEach(function(i){qr.forEach(function(l){l=l+i.charAt(0).toUpperCase()+i.substring(1),as[l]=as[i]})});function zs(i,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||as.hasOwnProperty(i)&&as[i]?(""+l).trim():l+"px"}function vi(i,l){i=i.style;for(var d in l)if(l.hasOwnProperty(d)){var m=d.indexOf("--")===0,N=zs(d,l[d],m);d==="float"&&(d="cssFloat"),m?i.setProperty(d,N):i[d]=N}}var ls=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qn(i,l){if(l){if(ls[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Bs(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ze=null;function Et(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yt=null,Bt=null,Gt=null;function ie(i){if(i=Lu(i)){if(typeof yt!="function")throw Error(n(280));var l=i.stateNode;l&&(l=Vh(l),yt(i.stateNode,i.type,l))}}function ye(i){Bt?Gt?Gt.push(i):Gt=[i]:Bt=i}function Ue(){if(Bt){var i=Bt,l=Gt;if(Gt=Bt=null,ie(i),l)for(i=0;i<l.length;i++)ie(l[i])}}function Ct(i,l){return i(l)}function lt(){}var vt=!1;function ke(i,l,d){if(vt)return i(l,d);vt=!0;try{return Ct(i,l,d)}finally{vt=!1,(Bt!==null||Gt!==null)&&(lt(),Ue())}}function Qt(i,l){var d=i.stateNode;if(d===null)return null;var m=Vh(d);if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var xi=!1;if(u)try{var dr={};Object.defineProperty(dr,"passive",{get:function(){xi=!0}}),window.addEventListener("test",dr,dr),window.removeEventListener("test",dr,dr)}catch{xi=!1}function qs(i,l,d,m,N,T,L,q,G){var ae=Array.prototype.slice.call(arguments,3);try{l.apply(d,ae)}catch(fe){this.onError(fe)}}var Ws=!1,wi=null,hr=!1,no=null,Sl={onError:function(i){Ws=!0,wi=i}};function qt(i,l,d,m,N,T,L,q,G){Ws=!1,wi=null,qs.apply(Sl,arguments)}function Tl(i,l,d,m,N,T,L,q,G){if(qt.apply(this,arguments),Ws){if(Ws){var ae=wi;Ws=!1,wi=null}else throw Error(n(198));hr||(hr=!0,no=ae)}}function cs(i){var l=i,d=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(d=l.return),i=l.return;while(i)}return l.tag===3?d:null}function _a(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function us(i){if(cs(i)!==i)throw Error(n(188))}function dh(i){var l=i.alternate;if(!l){if(l=cs(i),l===null)throw Error(n(188));return l!==i?null:i}for(var d=i,m=l;;){var N=d.return;if(N===null)break;var T=N.alternate;if(T===null){if(m=N.return,m!==null){d=m;continue}break}if(N.child===T.child){for(T=N.child;T;){if(T===d)return us(N),i;if(T===m)return us(N),l;T=T.sibling}throw Error(n(188))}if(d.return!==m.return)d=N,m=T;else{for(var L=!1,q=N.child;q;){if(q===d){L=!0,d=N,m=T;break}if(q===m){L=!0,m=N,d=T;break}q=q.sibling}if(!L){for(q=T.child;q;){if(q===d){L=!0,d=T,m=N;break}if(q===m){L=!0,m=T,d=N;break}q=q.sibling}if(!L)throw Error(n(189))}}if(d.alternate!==m)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?i:l}function yu(i){return i=dh(i),i!==null?Cl(i):null}function Cl(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var l=Cl(i);if(l!==null)return l;i=i.sibling}return null}var Il=e.unstable_scheduleCallback,vu=e.unstable_cancelCallback,hh=e.unstable_shouldYield,Gm=e.unstable_requestPaint,Vt=e.unstable_now,fh=e.unstable_getCurrentPriorityLevel,Ea=e.unstable_ImmediatePriority,ro=e.unstable_UserBlockingPriority,Wr=e.unstable_NormalPriority,xu=e.unstable_LowPriority,ph=e.unstable_IdlePriority,ba=null,Rr=null;function mh(i){if(Rr&&typeof Rr.onCommitFiberRoot=="function")try{Rr.onCommitFiberRoot(ba,i,void 0,(i.current.flags&128)===128)}catch{}}var nr=Math.clz32?Math.clz32:yh,wu=Math.log,gh=Math.LN2;function yh(i){return i>>>=0,i===0?32:31-(wu(i)/gh|0)|0}var jl=64,Al=4194304;function so(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Na(i,l){var d=i.pendingLanes;if(d===0)return 0;var m=0,N=i.suspendedLanes,T=i.pingedLanes,L=d&268435455;if(L!==0){var q=L&~N;q!==0?m=so(q):(T&=L,T!==0&&(m=so(T)))}else L=d&~N,L!==0?m=so(L):T!==0&&(m=so(T));if(m===0)return 0;if(l!==0&&l!==m&&(l&N)===0&&(N=m&-m,T=l&-l,N>=T||N===16&&(T&4194240)!==0))return l;if((m&4)!==0&&(m|=d&16),l=i.entangledLanes,l!==0)for(i=i.entanglements,l&=m;0<l;)d=31-nr(l),N=1<<d,m|=i[d],l&=~N;return m}function Qm(i,l){switch(i){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _i(i,l){for(var d=i.suspendedLanes,m=i.pingedLanes,N=i.expirationTimes,T=i.pendingLanes;0<T;){var L=31-nr(T),q=1<<L,G=N[L];G===-1?((q&d)===0||(q&m)!==0)&&(N[L]=Qm(q,l)):G<=l&&(i.expiredLanes|=q),T&=~q}}function kr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Sa(){var i=jl;return jl<<=1,(jl&4194240)===0&&(jl=64),i}function io(i){for(var l=[],d=0;31>d;d++)l.push(i);return l}function oo(i,l,d){i.pendingLanes|=l,l!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,l=31-nr(l),i[l]=d}function Mt(i,l){var d=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l,l=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<d;){var N=31-nr(d),T=1<<N;l[N]=0,m[N]=-1,i[N]=-1,d&=~T}}function ao(i,l){var d=i.entangledLanes|=l;for(i=i.entanglements;d;){var m=31-nr(d),N=1<<m;N&l|i[m]&l&&(i[m]|=l),d&=~N}}var xt=0;function lo(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var vh,Pl,xh,wh,_h,_u=!1,Hs=[],Ln=null,ds=null,hs=null,co=new Map,Hr=new Map,Ks=[],Ym="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Eh(i,l){switch(i){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":co.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hr.delete(l.pointerId)}}function fr(i,l,d,m,N,T){return i===null||i.nativeEvent!==T?(i={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:T,targetContainers:[N]},l!==null&&(l=Lu(l),l!==null&&Pl(l)),i):(i.eventSystemFlags|=m,l=i.targetContainers,N!==null&&l.indexOf(N)===-1&&l.push(N),i)}function Xm(i,l,d,m,N){switch(l){case"focusin":return Ln=fr(Ln,i,l,d,m,N),!0;case"dragenter":return ds=fr(ds,i,l,d,m,N),!0;case"mouseover":return hs=fr(hs,i,l,d,m,N),!0;case"pointerover":var T=N.pointerId;return co.set(T,fr(co.get(T)||null,i,l,d,m,N)),!0;case"gotpointercapture":return T=N.pointerId,Hr.set(T,fr(Hr.get(T)||null,i,l,d,m,N)),!0}return!1}function bh(i){var l=Aa(i.target);if(l!==null){var d=cs(l);if(d!==null){if(l=d.tag,l===13){if(l=_a(d),l!==null){i.blockedOn=l,_h(i.priority,function(){xh(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ei(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var d=Rl(i.domEventName,i.eventSystemFlags,l[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var m=new d.constructor(d.type,d);Ze=m,d.target.dispatchEvent(m),Ze=null}else return l=Lu(d),l!==null&&Pl(l),i.blockedOn=d,!1;l.shift()}return!0}function Ta(i,l,d){Ei(i)&&d.delete(l)}function Nh(){_u=!1,Ln!==null&&Ei(Ln)&&(Ln=null),ds!==null&&Ei(ds)&&(ds=null),hs!==null&&Ei(hs)&&(hs=null),co.forEach(Ta),Hr.forEach(Ta)}function fs(i,l){i.blockedOn===l&&(i.blockedOn=null,_u||(_u=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Nh)))}function ps(i){function l(N){return fs(N,i)}if(0<Hs.length){fs(Hs[0],i);for(var d=1;d<Hs.length;d++){var m=Hs[d];m.blockedOn===i&&(m.blockedOn=null)}}for(Ln!==null&&fs(Ln,i),ds!==null&&fs(ds,i),hs!==null&&fs(hs,i),co.forEach(l),Hr.forEach(l),d=0;d<Ks.length;d++)m=Ks[d],m.blockedOn===i&&(m.blockedOn=null);for(;0<Ks.length&&(d=Ks[0],d.blockedOn===null);)bh(d),d.blockedOn===null&&Ks.shift()}var bi=M.ReactCurrentBatchConfig,uo=!0;function Yt(i,l,d,m){var N=xt,T=bi.transition;bi.transition=null;try{xt=1,Eu(i,l,d,m)}finally{xt=N,bi.transition=T}}function Jm(i,l,d,m){var N=xt,T=bi.transition;bi.transition=null;try{xt=4,Eu(i,l,d,m)}finally{xt=N,bi.transition=T}}function Eu(i,l,d,m){if(uo){var N=Rl(i,l,d,m);if(N===null)cg(i,l,m,Ca,d),Eh(i,m);else if(Xm(N,i,l,d,m))m.stopPropagation();else if(Eh(i,m),l&4&&-1<Ym.indexOf(i)){for(;N!==null;){var T=Lu(N);if(T!==null&&vh(T),T=Rl(i,l,d,m),T===null&&cg(i,l,m,Ca,d),T===N)break;N=T}N!==null&&m.stopPropagation()}else cg(i,l,m,null,d)}}var Ca=null;function Rl(i,l,d,m){if(Ca=null,i=Et(m),i=Aa(i),i!==null)if(l=cs(i),l===null)i=null;else if(d=l.tag,d===13){if(i=_a(l),i!==null)return i;i=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null);return Ca=i,null}function bu(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fh()){case Ea:return 1;case ro:return 4;case Wr:case xu:return 16;case ph:return 536870912;default:return 16}default:return 16}}var Or=null,kl=null,pr=null;function Nu(){if(pr)return pr;var i,l=kl,d=l.length,m,N="value"in Or?Or.value:Or.textContent,T=N.length;for(i=0;i<d&&l[i]===N[i];i++);var L=d-i;for(m=1;m<=L&&l[d-m]===N[T-m];m++);return pr=N.slice(i,1<m?1-m:void 0)}function Ol(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function Gs(){return!0}function Su(){return!1}function Mn(i){function l(d,m,N,T,L){this._reactName=d,this._targetInst=N,this.type=m,this.nativeEvent=T,this.target=L,this.currentTarget=null;for(var q in i)i.hasOwnProperty(q)&&(d=i[q],this[q]=d?d(T):T[q]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Gs:Su,this.isPropagationStopped=Su,this}return ne(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Gs)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Gs)},persist:function(){},isPersistent:Gs}),l}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dl=Mn(ms),Qs=ne({},ms,{view:0,detail:0}),Zm=Mn(Qs),Ll,Ni,ho,Ia=ne({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ys,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ho&&(ho&&i.type==="mousemove"?(Ll=i.screenX-ho.screenX,Ni=i.screenY-ho.screenY):Ni=Ll=0,ho=i),Ll)},movementY:function(i){return"movementY"in i?i.movementY:Ni}}),Ml=Mn(Ia),Tu=ne({},Ia,{dataTransfer:0}),Sh=Mn(Tu),Fl=ne({},Qs,{relatedTarget:0}),Vl=Mn(Fl),Th=ne({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Si=Mn(Th),Ch=ne({},ms,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ih=Mn(Ch),jh=ne({},ms,{data:0}),Cu=Mn(jh),Ul={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ph(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=Ah[i])?!!l[i]:!1}function Ys(){return Ph}var p=ne({},Qs,{key:function(i){if(i.key){var l=Ul[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Ol(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?rr[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ys,charCode:function(i){return i.type==="keypress"?Ol(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ol(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),S=Mn(p),A=ne({},Ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$=Mn(A),re=ne({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ys}),le=Mn(re),Ee=ne({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dt=Mn(Ee),Nn=ne({},Ia,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),bt=Mn(Nn),jn=[9,13,27,32],yn=u&&"CompositionEvent"in window,Kr=null;u&&"documentMode"in document&&(Kr=document.documentMode);var Dr=u&&"TextEvent"in window&&!Kr,ja=u&&(!yn||Kr&&8<Kr&&11>=Kr),$l=" ",j0=!1;function A0(i,l){switch(i){case"keyup":return jn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function P0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var zl=!1;function VR(i,l){switch(i){case"compositionend":return P0(l);case"keypress":return l.which!==32?null:(j0=!0,$l);case"textInput":return i=l.data,i===$l&&j0?null:i;default:return null}}function UR(i,l){if(zl)return i==="compositionend"||!yn&&A0(i,l)?(i=Nu(),pr=kl=Or=null,zl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ja&&l.locale!=="ko"?null:l.data;default:return null}}var $R={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function R0(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!$R[i.type]:l==="textarea"}function k0(i,l,d,m){ye(m),l=Lh(l,"onChange"),0<l.length&&(d=new Dl("onChange","change",null,d,m),i.push({event:d,listeners:l}))}var Iu=null,ju=null;function zR(i){X0(i,0)}function Rh(i){var l=Kl(i);if(it(l))return i}function BR(i,l){if(i==="change")return l}var O0=!1;if(u){var eg;if(u){var tg="oninput"in document;if(!tg){var D0=document.createElement("div");D0.setAttribute("oninput","return;"),tg=typeof D0.oninput=="function"}eg=tg}else eg=!1;O0=eg&&(!document.documentMode||9<document.documentMode)}function L0(){Iu&&(Iu.detachEvent("onpropertychange",M0),ju=Iu=null)}function M0(i){if(i.propertyName==="value"&&Rh(ju)){var l=[];k0(l,ju,i,Et(i)),ke(zR,l)}}function qR(i,l,d){i==="focusin"?(L0(),Iu=l,ju=d,Iu.attachEvent("onpropertychange",M0)):i==="focusout"&&L0()}function WR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Rh(ju)}function HR(i,l){if(i==="click")return Rh(l)}function KR(i,l){if(i==="input"||i==="change")return Rh(l)}function GR(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var gs=typeof Object.is=="function"?Object.is:GR;function Au(i,l){if(gs(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var d=Object.keys(i),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var N=d[m];if(!h.call(l,N)||!gs(i[N],l[N]))return!1}return!0}function F0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function V0(i,l){var d=F0(i);i=0;for(var m;d;){if(d.nodeType===3){if(m=i+d.textContent.length,i<=l&&m>=l)return{node:d,offset:l-i};i=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=F0(d)}}function U0(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?U0(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function $0(){for(var i=window,l=ve();l instanceof i.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)i=l.contentWindow;else break;l=ve(i.document)}return l}function ng(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function QR(i){var l=$0(),d=i.focusedElem,m=i.selectionRange;if(l!==d&&d&&d.ownerDocument&&U0(d.ownerDocument.documentElement,d)){if(m!==null&&ng(d)){if(l=m.start,i=m.end,i===void 0&&(i=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(i,d.value.length);else if(i=(l=d.ownerDocument||document)&&l.defaultView||window,i.getSelection){i=i.getSelection();var N=d.textContent.length,T=Math.min(m.start,N);m=m.end===void 0?T:Math.min(m.end,N),!i.extend&&T>m&&(N=m,m=T,T=N),N=V0(d,T);var L=V0(d,m);N&&L&&(i.rangeCount!==1||i.anchorNode!==N.node||i.anchorOffset!==N.offset||i.focusNode!==L.node||i.focusOffset!==L.offset)&&(l=l.createRange(),l.setStart(N.node,N.offset),i.removeAllRanges(),T>m?(i.addRange(l),i.extend(L.node,L.offset)):(l.setEnd(L.node,L.offset),i.addRange(l)))}}for(l=[],i=d;i=i.parentNode;)i.nodeType===1&&l.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)i=l[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var YR=u&&"documentMode"in document&&11>=document.documentMode,Bl=null,rg=null,Pu=null,sg=!1;function z0(i,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;sg||Bl==null||Bl!==ve(m)||(m=Bl,"selectionStart"in m&&ng(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Pu&&Au(Pu,m)||(Pu=m,m=Lh(rg,"onSelect"),0<m.length&&(l=new Dl("onSelect","select",null,l,d),i.push({event:l,listeners:m}),l.target=Bl)))}function kh(i,l){var d={};return d[i.toLowerCase()]=l.toLowerCase(),d["Webkit"+i]="webkit"+l,d["Moz"+i]="moz"+l,d}var ql={animationend:kh("Animation","AnimationEnd"),animationiteration:kh("Animation","AnimationIteration"),animationstart:kh("Animation","AnimationStart"),transitionend:kh("Transition","TransitionEnd")},ig={},B0={};u&&(B0=document.createElement("div").style,"AnimationEvent"in window||(delete ql.animationend.animation,delete ql.animationiteration.animation,delete ql.animationstart.animation),"TransitionEvent"in window||delete ql.transitionend.transition);function Oh(i){if(ig[i])return ig[i];if(!ql[i])return i;var l=ql[i],d;for(d in l)if(l.hasOwnProperty(d)&&d in B0)return ig[i]=l[d];return i}var q0=Oh("animationend"),W0=Oh("animationiteration"),H0=Oh("animationstart"),K0=Oh("transitionend"),G0=new Map,Q0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fo(i,l){G0.set(i,l),a(l,[i])}for(var og=0;og<Q0.length;og++){var ag=Q0[og],XR=ag.toLowerCase(),JR=ag[0].toUpperCase()+ag.slice(1);fo(XR,"on"+JR)}fo(q0,"onAnimationEnd"),fo(W0,"onAnimationIteration"),fo(H0,"onAnimationStart"),fo("dblclick","onDoubleClick"),fo("focusin","onFocus"),fo("focusout","onBlur"),fo(K0,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ru));function Y0(i,l,d){var m=i.type||"unknown-event";i.currentTarget=d,Tl(m,l,void 0,i),i.currentTarget=null}function X0(i,l){l=(l&4)!==0;for(var d=0;d<i.length;d++){var m=i[d],N=m.event;m=m.listeners;e:{var T=void 0;if(l)for(var L=m.length-1;0<=L;L--){var q=m[L],G=q.instance,ae=q.currentTarget;if(q=q.listener,G!==T&&N.isPropagationStopped())break e;Y0(N,q,ae),T=G}else for(L=0;L<m.length;L++){if(q=m[L],G=q.instance,ae=q.currentTarget,q=q.listener,G!==T&&N.isPropagationStopped())break e;Y0(N,q,ae),T=G}}}if(hr)throw i=no,hr=!1,no=null,i}function Wt(i,l){var d=l[mg];d===void 0&&(d=l[mg]=new Set);var m=i+"__bubble";d.has(m)||(J0(l,i,2,!1),d.add(m))}function lg(i,l,d){var m=0;l&&(m|=4),J0(d,i,m,l)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function ku(i){if(!i[Dh]){i[Dh]=!0,r.forEach(function(d){d!=="selectionchange"&&(ZR.has(d)||lg(d,!1,i),lg(d,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Dh]||(l[Dh]=!0,lg("selectionchange",!1,l))}}function J0(i,l,d,m){switch(bu(l)){case 1:var N=Yt;break;case 4:N=Jm;break;default:N=Eu}d=N.bind(null,l,d,i),N=void 0,!xi||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(N=!0),m?N!==void 0?i.addEventListener(l,d,{capture:!0,passive:N}):i.addEventListener(l,d,!0):N!==void 0?i.addEventListener(l,d,{passive:N}):i.addEventListener(l,d,!1)}function cg(i,l,d,m,N){var T=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var L=m.tag;if(L===3||L===4){var q=m.stateNode.containerInfo;if(q===N||q.nodeType===8&&q.parentNode===N)break;if(L===4)for(L=m.return;L!==null;){var G=L.tag;if((G===3||G===4)&&(G=L.stateNode.containerInfo,G===N||G.nodeType===8&&G.parentNode===N))return;L=L.return}for(;q!==null;){if(L=Aa(q),L===null)return;if(G=L.tag,G===5||G===6){m=T=L;continue e}q=q.parentNode}}m=m.return}ke(function(){var ae=T,fe=Et(d),ge=[];e:{var he=G0.get(i);if(he!==void 0){var Pe=Dl,Me=i;switch(i){case"keypress":if(Ol(d)===0)break e;case"keydown":case"keyup":Pe=S;break;case"focusin":Me="focus",Pe=Vl;break;case"focusout":Me="blur",Pe=Vl;break;case"beforeblur":case"afterblur":Pe=Vl;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=Ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Sh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=le;break;case q0:case W0:case H0:Pe=Si;break;case K0:Pe=Dt;break;case"scroll":Pe=Zm;break;case"wheel":Pe=bt;break;case"copy":case"cut":case"paste":Pe=Ih;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=$}var Fe=(l&4)!==0,fn=!Fe&&i==="scroll",se=Fe?he!==null?he+"Capture":null:he;Fe=[];for(var X=ae,oe;X!==null;){oe=X;var xe=oe.stateNode;if(oe.tag===5&&xe!==null&&(oe=xe,se!==null&&(xe=Qt(X,se),xe!=null&&Fe.push(Ou(X,xe,oe)))),fn)break;X=X.return}0<Fe.length&&(he=new Pe(he,Me,null,d,fe),ge.push({event:he,listeners:Fe}))}}if((l&7)===0){e:{if(he=i==="mouseover"||i==="pointerover",Pe=i==="mouseout"||i==="pointerout",he&&d!==Ze&&(Me=d.relatedTarget||d.fromElement)&&(Aa(Me)||Me[Ti]))break e;if((Pe||he)&&(he=fe.window===fe?fe:(he=fe.ownerDocument)?he.defaultView||he.parentWindow:window,Pe?(Me=d.relatedTarget||d.toElement,Pe=ae,Me=Me?Aa(Me):null,Me!==null&&(fn=cs(Me),Me!==fn||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(Pe=null,Me=ae),Pe!==Me)){if(Fe=Ml,xe="onMouseLeave",se="onMouseEnter",X="mouse",(i==="pointerout"||i==="pointerover")&&(Fe=$,xe="onPointerLeave",se="onPointerEnter",X="pointer"),fn=Pe==null?he:Kl(Pe),oe=Me==null?he:Kl(Me),he=new Fe(xe,X+"leave",Pe,d,fe),he.target=fn,he.relatedTarget=oe,xe=null,Aa(fe)===ae&&(Fe=new Fe(se,X+"enter",Me,d,fe),Fe.target=oe,Fe.relatedTarget=fn,xe=Fe),fn=xe,Pe&&Me)t:{for(Fe=Pe,se=Me,X=0,oe=Fe;oe;oe=Wl(oe))X++;for(oe=0,xe=se;xe;xe=Wl(xe))oe++;for(;0<X-oe;)Fe=Wl(Fe),X--;for(;0<oe-X;)se=Wl(se),oe--;for(;X--;){if(Fe===se||se!==null&&Fe===se.alternate)break t;Fe=Wl(Fe),se=Wl(se)}Fe=null}else Fe=null;Pe!==null&&Z0(ge,he,Pe,Fe,!1),Me!==null&&fn!==null&&Z0(ge,fn,Me,Fe,!0)}}e:{if(he=ae?Kl(ae):window,Pe=he.nodeName&&he.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&he.type==="file")var $e=BR;else if(R0(he))if(O0)$e=KR;else{$e=WR;var Ye=qR}else(Pe=he.nodeName)&&Pe.toLowerCase()==="input"&&(he.type==="checkbox"||he.type==="radio")&&($e=HR);if($e&&($e=$e(i,ae))){k0(ge,$e,d,fe);break e}Ye&&Ye(i,he,ae),i==="focusout"&&(Ye=he._wrapperState)&&Ye.controlled&&he.type==="number"&&Lt(he,"number",he.value)}switch(Ye=ae?Kl(ae):window,i){case"focusin":(R0(Ye)||Ye.contentEditable==="true")&&(Bl=Ye,rg=ae,Pu=null);break;case"focusout":Pu=rg=Bl=null;break;case"mousedown":sg=!0;break;case"contextmenu":case"mouseup":case"dragend":sg=!1,z0(ge,d,fe);break;case"selectionchange":if(YR)break;case"keydown":case"keyup":z0(ge,d,fe)}var Xe;if(yn)e:{switch(i){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else zl?A0(i,d)&&(rt="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(rt="onCompositionStart");rt&&(ja&&d.locale!=="ko"&&(zl||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&zl&&(Xe=Nu()):(Or=fe,kl="value"in Or?Or.value:Or.textContent,zl=!0)),Ye=Lh(ae,rt),0<Ye.length&&(rt=new Cu(rt,i,null,d,fe),ge.push({event:rt,listeners:Ye}),Xe?rt.data=Xe:(Xe=P0(d),Xe!==null&&(rt.data=Xe)))),(Xe=Dr?VR(i,d):UR(i,d))&&(ae=Lh(ae,"onBeforeInput"),0<ae.length&&(fe=new Cu("onBeforeInput","beforeinput",null,d,fe),ge.push({event:fe,listeners:ae}),fe.data=Xe))}X0(ge,l)})}function Ou(i,l,d){return{instance:i,listener:l,currentTarget:d}}function Lh(i,l){for(var d=l+"Capture",m=[];i!==null;){var N=i,T=N.stateNode;N.tag===5&&T!==null&&(N=T,T=Qt(i,d),T!=null&&m.unshift(Ou(i,T,N)),T=Qt(i,l),T!=null&&m.push(Ou(i,T,N))),i=i.return}return m}function Wl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Z0(i,l,d,m,N){for(var T=l._reactName,L=[];d!==null&&d!==m;){var q=d,G=q.alternate,ae=q.stateNode;if(G!==null&&G===m)break;q.tag===5&&ae!==null&&(q=ae,N?(G=Qt(d,T),G!=null&&L.unshift(Ou(d,G,q))):N||(G=Qt(d,T),G!=null&&L.push(Ou(d,G,q)))),d=d.return}L.length!==0&&i.push({event:l,listeners:L})}var ek=/\r\n?/g,tk=/\u0000|\uFFFD/g;function e_(i){return(typeof i=="string"?i:""+i).replace(ek,`
`).replace(tk,"")}function Mh(i,l,d){if(l=e_(l),e_(i)!==l&&d)throw Error(n(425))}function Fh(){}var ug=null,dg=null;function hg(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var fg=typeof setTimeout=="function"?setTimeout:void 0,nk=typeof clearTimeout=="function"?clearTimeout:void 0,t_=typeof Promise=="function"?Promise:void 0,rk=typeof queueMicrotask=="function"?queueMicrotask:typeof t_<"u"?function(i){return t_.resolve(null).then(i).catch(sk)}:fg;function sk(i){setTimeout(function(){throw i})}function pg(i,l){var d=l,m=0;do{var N=d.nextSibling;if(i.removeChild(d),N&&N.nodeType===8)if(d=N.data,d==="/$"){if(m===0){i.removeChild(N),ps(l);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=N}while(d);ps(l)}function po(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return i}function n_(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return i;l--}else d==="/$"&&l++}i=i.previousSibling}return null}var Hl=Math.random().toString(36).slice(2),Xs="__reactFiber$"+Hl,Du="__reactProps$"+Hl,Ti="__reactContainer$"+Hl,mg="__reactEvents$"+Hl,ik="__reactListeners$"+Hl,ok="__reactHandles$"+Hl;function Aa(i){var l=i[Xs];if(l)return l;for(var d=i.parentNode;d;){if(l=d[Ti]||d[Xs]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(i=n_(i);i!==null;){if(d=i[Xs])return d;i=n_(i)}return l}i=d,d=i.parentNode}return null}function Lu(i){return i=i[Xs]||i[Ti],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Kl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Vh(i){return i[Du]||null}var gg=[],Gl=-1;function mo(i){return{current:i}}function Ht(i){0>Gl||(i.current=gg[Gl],gg[Gl]=null,Gl--)}function Ut(i,l){Gl++,gg[Gl]=i.current,i.current=l}var go={},Wn=mo(go),mr=mo(!1),Pa=go;function Ql(i,l){var d=i.type.contextTypes;if(!d)return go;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var N={},T;for(T in d)N[T]=l[T];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=N),N}function gr(i){return i=i.childContextTypes,i!=null}function Uh(){Ht(mr),Ht(Wn)}function r_(i,l,d){if(Wn.current!==go)throw Error(n(168));Ut(Wn,l),Ut(mr,d)}function s_(i,l,d){var m=i.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var N in m)if(!(N in l))throw Error(n(108,we(i)||"Unknown",N));return ne({},d,m)}function $h(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||go,Pa=Wn.current,Ut(Wn,i),Ut(mr,mr.current),!0}function i_(i,l,d){var m=i.stateNode;if(!m)throw Error(n(169));d?(i=s_(i,l,Pa),m.__reactInternalMemoizedMergedChildContext=i,Ht(mr),Ht(Wn),Ut(Wn,i)):Ht(mr),Ut(mr,d)}var Ci=null,zh=!1,yg=!1;function o_(i){Ci===null?Ci=[i]:Ci.push(i)}function ak(i){zh=!0,o_(i)}function yo(){if(!yg&&Ci!==null){yg=!0;var i=0,l=xt;try{var d=Ci;for(xt=1;i<d.length;i++){var m=d[i];do m=m(!0);while(m!==null)}Ci=null,zh=!1}catch(N){throw Ci!==null&&(Ci=Ci.slice(i+1)),Il(Ea,yo),N}finally{xt=l,yg=!1}}return null}var Yl=[],Xl=0,Bh=null,qh=0,Gr=[],Qr=0,Ra=null,Ii=1,ji="";function ka(i,l){Yl[Xl++]=qh,Yl[Xl++]=Bh,Bh=i,qh=l}function a_(i,l,d){Gr[Qr++]=Ii,Gr[Qr++]=ji,Gr[Qr++]=Ra,Ra=i;var m=Ii;i=ji;var N=32-nr(m)-1;m&=~(1<<N),d+=1;var T=32-nr(l)+N;if(30<T){var L=N-N%5;T=(m&(1<<L)-1).toString(32),m>>=L,N-=L,Ii=1<<32-nr(l)+N|d<<N|m,ji=T+i}else Ii=1<<T|d<<N|m,ji=i}function vg(i){i.return!==null&&(ka(i,1),a_(i,1,0))}function xg(i){for(;i===Bh;)Bh=Yl[--Xl],Yl[Xl]=null,qh=Yl[--Xl],Yl[Xl]=null;for(;i===Ra;)Ra=Gr[--Qr],Gr[Qr]=null,ji=Gr[--Qr],Gr[Qr]=null,Ii=Gr[--Qr],Gr[Qr]=null}var Lr=null,Mr=null,Xt=!1,ys=null;function l_(i,l){var d=Zr(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=i,l=i.deletions,l===null?(i.deletions=[d],i.flags|=16):l.push(d)}function c_(i,l){switch(i.tag){case 5:var d=i.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(i.stateNode=l,Lr=i,Mr=po(l.firstChild),!0):!1;case 6:return l=i.pendingProps===""||l.nodeType!==3?null:l,l!==null?(i.stateNode=l,Lr=i,Mr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Ra!==null?{id:Ii,overflow:ji}:null,i.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=Zr(18,null,null,0),d.stateNode=l,d.return=i,i.child=d,Lr=i,Mr=null,!0):!1;default:return!1}}function wg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function _g(i){if(Xt){var l=Mr;if(l){var d=l;if(!c_(i,l)){if(wg(i))throw Error(n(418));l=po(d.nextSibling);var m=Lr;l&&c_(i,l)?l_(m,d):(i.flags=i.flags&-4097|2,Xt=!1,Lr=i)}}else{if(wg(i))throw Error(n(418));i.flags=i.flags&-4097|2,Xt=!1,Lr=i}}}function u_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Lr=i}function Wh(i){if(i!==Lr)return!1;if(!Xt)return u_(i),Xt=!0,!1;var l;if((l=i.tag!==3)&&!(l=i.tag!==5)&&(l=i.type,l=l!=="head"&&l!=="body"&&!hg(i.type,i.memoizedProps)),l&&(l=Mr)){if(wg(i))throw d_(),Error(n(418));for(;l;)l_(i,l),l=po(l.nextSibling)}if(u_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(l===0){Mr=po(i.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}i=i.nextSibling}Mr=null}}else Mr=Lr?po(i.stateNode.nextSibling):null;return!0}function d_(){for(var i=Mr;i;)i=po(i.nextSibling)}function Jl(){Mr=Lr=null,Xt=!1}function Eg(i){ys===null?ys=[i]:ys.push(i)}var lk=M.ReactCurrentBatchConfig;function Mu(i,l,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var m=d.stateNode}if(!m)throw Error(n(147,i));var N=m,T=""+i;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===T?l.ref:(l=function(L){var q=N.refs;L===null?delete q[T]:q[T]=L},l._stringRef=T,l)}if(typeof i!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,i))}return i}function Hh(i,l){throw i=Object.prototype.toString.call(l),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i))}function h_(i){var l=i._init;return l(i._payload)}function f_(i){function l(se,X){if(i){var oe=se.deletions;oe===null?(se.deletions=[X],se.flags|=16):oe.push(X)}}function d(se,X){if(!i)return null;for(;X!==null;)l(se,X),X=X.sibling;return null}function m(se,X){for(se=new Map;X!==null;)X.key!==null?se.set(X.key,X):se.set(X.index,X),X=X.sibling;return se}function N(se,X){return se=So(se,X),se.index=0,se.sibling=null,se}function T(se,X,oe){return se.index=oe,i?(oe=se.alternate,oe!==null?(oe=oe.index,oe<X?(se.flags|=2,X):oe):(se.flags|=2,X)):(se.flags|=1048576,X)}function L(se){return i&&se.alternate===null&&(se.flags|=2),se}function q(se,X,oe,xe){return X===null||X.tag!==6?(X=fy(oe,se.mode,xe),X.return=se,X):(X=N(X,oe),X.return=se,X)}function G(se,X,oe,xe){var $e=oe.type;return $e===P?fe(se,X,oe.props.children,xe,oe.key):X!==null&&(X.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===K&&h_($e)===X.type)?(xe=N(X,oe.props),xe.ref=Mu(se,X,oe),xe.return=se,xe):(xe=yf(oe.type,oe.key,oe.props,null,se.mode,xe),xe.ref=Mu(se,X,oe),xe.return=se,xe)}function ae(se,X,oe,xe){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=py(oe,se.mode,xe),X.return=se,X):(X=N(X,oe.children||[]),X.return=se,X)}function fe(se,X,oe,xe,$e){return X===null||X.tag!==7?(X=$a(oe,se.mode,xe,$e),X.return=se,X):(X=N(X,oe),X.return=se,X)}function ge(se,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number")return X=fy(""+X,se.mode,oe),X.return=se,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case U:return oe=yf(X.type,X.key,X.props,null,se.mode,oe),oe.ref=Mu(se,null,X),oe.return=se,oe;case z:return X=py(X,se.mode,oe),X.return=se,X;case K:var xe=X._init;return ge(se,xe(X._payload),oe)}if(gn(X)||Y(X))return X=$a(X,se.mode,oe,null),X.return=se,X;Hh(se,X)}return null}function he(se,X,oe,xe){var $e=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return $e!==null?null:q(se,X,""+oe,xe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case U:return oe.key===$e?G(se,X,oe,xe):null;case z:return oe.key===$e?ae(se,X,oe,xe):null;case K:return $e=oe._init,he(se,X,$e(oe._payload),xe)}if(gn(oe)||Y(oe))return $e!==null?null:fe(se,X,oe,xe,null);Hh(se,oe)}return null}function Pe(se,X,oe,xe,$e){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return se=se.get(oe)||null,q(X,se,""+xe,$e);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case U:return se=se.get(xe.key===null?oe:xe.key)||null,G(X,se,xe,$e);case z:return se=se.get(xe.key===null?oe:xe.key)||null,ae(X,se,xe,$e);case K:var Ye=xe._init;return Pe(se,X,oe,Ye(xe._payload),$e)}if(gn(xe)||Y(xe))return se=se.get(oe)||null,fe(X,se,xe,$e,null);Hh(X,xe)}return null}function Me(se,X,oe,xe){for(var $e=null,Ye=null,Xe=X,rt=X=0,Rn=null;Xe!==null&&rt<oe.length;rt++){Xe.index>rt?(Rn=Xe,Xe=null):Rn=Xe.sibling;var At=he(se,Xe,oe[rt],xe);if(At===null){Xe===null&&(Xe=Rn);break}i&&Xe&&At.alternate===null&&l(se,Xe),X=T(At,X,rt),Ye===null?$e=At:Ye.sibling=At,Ye=At,Xe=Rn}if(rt===oe.length)return d(se,Xe),Xt&&ka(se,rt),$e;if(Xe===null){for(;rt<oe.length;rt++)Xe=ge(se,oe[rt],xe),Xe!==null&&(X=T(Xe,X,rt),Ye===null?$e=Xe:Ye.sibling=Xe,Ye=Xe);return Xt&&ka(se,rt),$e}for(Xe=m(se,Xe);rt<oe.length;rt++)Rn=Pe(Xe,se,rt,oe[rt],xe),Rn!==null&&(i&&Rn.alternate!==null&&Xe.delete(Rn.key===null?rt:Rn.key),X=T(Rn,X,rt),Ye===null?$e=Rn:Ye.sibling=Rn,Ye=Rn);return i&&Xe.forEach(function(To){return l(se,To)}),Xt&&ka(se,rt),$e}function Fe(se,X,oe,xe){var $e=Y(oe);if(typeof $e!="function")throw Error(n(150));if(oe=$e.call(oe),oe==null)throw Error(n(151));for(var Ye=$e=null,Xe=X,rt=X=0,Rn=null,At=oe.next();Xe!==null&&!At.done;rt++,At=oe.next()){Xe.index>rt?(Rn=Xe,Xe=null):Rn=Xe.sibling;var To=he(se,Xe,At.value,xe);if(To===null){Xe===null&&(Xe=Rn);break}i&&Xe&&To.alternate===null&&l(se,Xe),X=T(To,X,rt),Ye===null?$e=To:Ye.sibling=To,Ye=To,Xe=Rn}if(At.done)return d(se,Xe),Xt&&ka(se,rt),$e;if(Xe===null){for(;!At.done;rt++,At=oe.next())At=ge(se,At.value,xe),At!==null&&(X=T(At,X,rt),Ye===null?$e=At:Ye.sibling=At,Ye=At);return Xt&&ka(se,rt),$e}for(Xe=m(se,Xe);!At.done;rt++,At=oe.next())At=Pe(Xe,se,rt,At.value,xe),At!==null&&(i&&At.alternate!==null&&Xe.delete(At.key===null?rt:At.key),X=T(At,X,rt),Ye===null?$e=At:Ye.sibling=At,Ye=At);return i&&Xe.forEach(function($k){return l(se,$k)}),Xt&&ka(se,rt),$e}function fn(se,X,oe,xe){if(typeof oe=="object"&&oe!==null&&oe.type===P&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case U:e:{for(var $e=oe.key,Ye=X;Ye!==null;){if(Ye.key===$e){if($e=oe.type,$e===P){if(Ye.tag===7){d(se,Ye.sibling),X=N(Ye,oe.props.children),X.return=se,se=X;break e}}else if(Ye.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===K&&h_($e)===Ye.type){d(se,Ye.sibling),X=N(Ye,oe.props),X.ref=Mu(se,Ye,oe),X.return=se,se=X;break e}d(se,Ye);break}else l(se,Ye);Ye=Ye.sibling}oe.type===P?(X=$a(oe.props.children,se.mode,xe,oe.key),X.return=se,se=X):(xe=yf(oe.type,oe.key,oe.props,null,se.mode,xe),xe.ref=Mu(se,X,oe),xe.return=se,se=xe)}return L(se);case z:e:{for(Ye=oe.key;X!==null;){if(X.key===Ye)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){d(se,X.sibling),X=N(X,oe.children||[]),X.return=se,se=X;break e}else{d(se,X);break}else l(se,X);X=X.sibling}X=py(oe,se.mode,xe),X.return=se,se=X}return L(se);case K:return Ye=oe._init,fn(se,X,Ye(oe._payload),xe)}if(gn(oe))return Me(se,X,oe,xe);if(Y(oe))return Fe(se,X,oe,xe);Hh(se,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,X!==null&&X.tag===6?(d(se,X.sibling),X=N(X,oe),X.return=se,se=X):(d(se,X),X=fy(oe,se.mode,xe),X.return=se,se=X),L(se)):d(se,X)}return fn}var Zl=f_(!0),p_=f_(!1),Kh=mo(null),Gh=null,ec=null,bg=null;function Ng(){bg=ec=Gh=null}function Sg(i){var l=Kh.current;Ht(Kh),i._currentValue=l}function Tg(i,l,d){for(;i!==null;){var m=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),i===d)break;i=i.return}}function tc(i,l){Gh=i,bg=ec=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&l)!==0&&(yr=!0),i.firstContext=null)}function Yr(i){var l=i._currentValue;if(bg!==i)if(i={context:i,memoizedValue:l,next:null},ec===null){if(Gh===null)throw Error(n(308));ec=i,Gh.dependencies={lanes:0,firstContext:i}}else ec=ec.next=i;return l}var Oa=null;function Cg(i){Oa===null?Oa=[i]:Oa.push(i)}function m_(i,l,d,m){var N=l.interleaved;return N===null?(d.next=d,Cg(l)):(d.next=N.next,N.next=d),l.interleaved=d,Ai(i,m)}function Ai(i,l){i.lanes|=l;var d=i.alternate;for(d!==null&&(d.lanes|=l),d=i,i=i.return;i!==null;)i.childLanes|=l,d=i.alternate,d!==null&&(d.childLanes|=l),d=i,i=i.return;return d.tag===3?d.stateNode:null}var vo=!1;function Ig(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g_(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Pi(i,l){return{eventTime:i,lane:l,tag:0,payload:null,callback:null,next:null}}function xo(i,l,d){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(It&2)!==0){var N=m.pending;return N===null?l.next=l:(l.next=N.next,N.next=l),m.pending=l,Ai(i,d)}return N=m.interleaved,N===null?(l.next=l,Cg(m)):(l.next=N.next,N.next=l),m.interleaved=l,Ai(i,d)}function Qh(i,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var m=l.lanes;m&=i.pendingLanes,d|=m,l.lanes=d,ao(i,d)}}function y_(i,l){var d=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var N=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var L={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?N=T=L:T=T.next=L,d=d.next}while(d!==null);T===null?N=T=l:T=T.next=l}else N=T=l;d={baseState:m.baseState,firstBaseUpdate:N,lastBaseUpdate:T,shared:m.shared,effects:m.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=l:i.next=l,d.lastBaseUpdate=l}function Yh(i,l,d,m){var N=i.updateQueue;vo=!1;var T=N.firstBaseUpdate,L=N.lastBaseUpdate,q=N.shared.pending;if(q!==null){N.shared.pending=null;var G=q,ae=G.next;G.next=null,L===null?T=ae:L.next=ae,L=G;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,q=fe.lastBaseUpdate,q!==L&&(q===null?fe.firstBaseUpdate=ae:q.next=ae,fe.lastBaseUpdate=G))}if(T!==null){var ge=N.baseState;L=0,fe=ae=G=null,q=T;do{var he=q.lane,Pe=q.eventTime;if((m&he)===he){fe!==null&&(fe=fe.next={eventTime:Pe,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Me=i,Fe=q;switch(he=l,Pe=d,Fe.tag){case 1:if(Me=Fe.payload,typeof Me=="function"){ge=Me.call(Pe,ge,he);break e}ge=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Fe.payload,he=typeof Me=="function"?Me.call(Pe,ge,he):Me,he==null)break e;ge=ne({},ge,he);break e;case 2:vo=!0}}q.callback!==null&&q.lane!==0&&(i.flags|=64,he=N.effects,he===null?N.effects=[q]:he.push(q))}else Pe={eventTime:Pe,lane:he,tag:q.tag,payload:q.payload,callback:q.callback,next:null},fe===null?(ae=fe=Pe,G=ge):fe=fe.next=Pe,L|=he;if(q=q.next,q===null){if(q=N.shared.pending,q===null)break;he=q,q=he.next,he.next=null,N.lastBaseUpdate=he,N.shared.pending=null}}while(!0);if(fe===null&&(G=ge),N.baseState=G,N.firstBaseUpdate=ae,N.lastBaseUpdate=fe,l=N.shared.interleaved,l!==null){N=l;do L|=N.lane,N=N.next;while(N!==l)}else T===null&&(N.shared.lanes=0);Ma|=L,i.lanes=L,i.memoizedState=ge}}function v_(i,l,d){if(i=l.effects,l.effects=null,i!==null)for(l=0;l<i.length;l++){var m=i[l],N=m.callback;if(N!==null){if(m.callback=null,m=d,typeof N!="function")throw Error(n(191,N));N.call(m)}}}var Fu={},Js=mo(Fu),Vu=mo(Fu),Uu=mo(Fu);function Da(i){if(i===Fu)throw Error(n(174));return i}function jg(i,l){switch(Ut(Uu,l),Ut(Vu,i),Ut(Js,Fu),i=l.nodeType,i){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Rt(null,"");break;default:i=i===8?l.parentNode:l,l=i.namespaceURI||null,i=i.tagName,l=Rt(l,i)}Ht(Js),Ut(Js,l)}function nc(){Ht(Js),Ht(Vu),Ht(Uu)}function x_(i){Da(Uu.current);var l=Da(Js.current),d=Rt(l,i.type);l!==d&&(Ut(Vu,i),Ut(Js,d))}function Ag(i){Vu.current===i&&(Ht(Js),Ht(Vu))}var nn=mo(0);function Xh(i){for(var l=i;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Pg=[];function Rg(){for(var i=0;i<Pg.length;i++)Pg[i]._workInProgressVersionPrimary=null;Pg.length=0}var Jh=M.ReactCurrentDispatcher,kg=M.ReactCurrentBatchConfig,La=0,rn=null,Sn=null,An=null,Zh=!1,$u=!1,zu=0,ck=0;function Hn(){throw Error(n(321))}function Og(i,l){if(l===null)return!1;for(var d=0;d<l.length&&d<i.length;d++)if(!gs(i[d],l[d]))return!1;return!0}function Dg(i,l,d,m,N,T){if(La=T,rn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Jh.current=i===null||i.memoizedState===null?fk:pk,i=d(m,N),$u){T=0;do{if($u=!1,zu=0,25<=T)throw Error(n(301));T+=1,An=Sn=null,l.updateQueue=null,Jh.current=mk,i=d(m,N)}while($u)}if(Jh.current=nf,l=Sn!==null&&Sn.next!==null,La=0,An=Sn=rn=null,Zh=!1,l)throw Error(n(300));return i}function Lg(){var i=zu!==0;return zu=0,i}function Zs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?rn.memoizedState=An=i:An=An.next=i,An}function Xr(){if(Sn===null){var i=rn.alternate;i=i!==null?i.memoizedState:null}else i=Sn.next;var l=An===null?rn.memoizedState:An.next;if(l!==null)An=l,Sn=i;else{if(i===null)throw Error(n(310));Sn=i,i={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},An===null?rn.memoizedState=An=i:An=An.next=i}return An}function Bu(i,l){return typeof l=="function"?l(i):l}function Mg(i){var l=Xr(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var m=Sn,N=m.baseQueue,T=d.pending;if(T!==null){if(N!==null){var L=N.next;N.next=T.next,T.next=L}m.baseQueue=N=T,d.pending=null}if(N!==null){T=N.next,m=m.baseState;var q=L=null,G=null,ae=T;do{var fe=ae.lane;if((La&fe)===fe)G!==null&&(G=G.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),m=ae.hasEagerState?ae.eagerState:i(m,ae.action);else{var ge={lane:fe,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};G===null?(q=G=ge,L=m):G=G.next=ge,rn.lanes|=fe,Ma|=fe}ae=ae.next}while(ae!==null&&ae!==T);G===null?L=m:G.next=q,gs(m,l.memoizedState)||(yr=!0),l.memoizedState=m,l.baseState=L,l.baseQueue=G,d.lastRenderedState=m}if(i=d.interleaved,i!==null){N=i;do T=N.lane,rn.lanes|=T,Ma|=T,N=N.next;while(N!==i)}else N===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Fg(i){var l=Xr(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var m=d.dispatch,N=d.pending,T=l.memoizedState;if(N!==null){d.pending=null;var L=N=N.next;do T=i(T,L.action),L=L.next;while(L!==N);gs(T,l.memoizedState)||(yr=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),d.lastRenderedState=T}return[T,m]}function w_(){}function __(i,l){var d=rn,m=Xr(),N=l(),T=!gs(m.memoizedState,N);if(T&&(m.memoizedState=N,yr=!0),m=m.queue,Vg(N_.bind(null,d,m,i),[i]),m.getSnapshot!==l||T||An!==null&&An.memoizedState.tag&1){if(d.flags|=2048,qu(9,b_.bind(null,d,m,N,l),void 0,null),Pn===null)throw Error(n(349));(La&30)!==0||E_(d,l,N)}return N}function E_(i,l,d){i.flags|=16384,i={getSnapshot:l,value:d},l=rn.updateQueue,l===null?(l={lastEffect:null,stores:null},rn.updateQueue=l,l.stores=[i]):(d=l.stores,d===null?l.stores=[i]:d.push(i))}function b_(i,l,d,m){l.value=d,l.getSnapshot=m,S_(l)&&T_(i)}function N_(i,l,d){return d(function(){S_(l)&&T_(i)})}function S_(i){var l=i.getSnapshot;i=i.value;try{var d=l();return!gs(i,d)}catch{return!0}}function T_(i){var l=Ai(i,1);l!==null&&_s(l,i,1,-1)}function C_(i){var l=Zs();return typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:i},l.queue=i,i=i.dispatch=hk.bind(null,rn,i),[l.memoizedState,i]}function qu(i,l,d,m){return i={tag:i,create:l,destroy:d,deps:m,next:null},l=rn.updateQueue,l===null?(l={lastEffect:null,stores:null},rn.updateQueue=l,l.lastEffect=i.next=i):(d=l.lastEffect,d===null?l.lastEffect=i.next=i:(m=d.next,d.next=i,i.next=m,l.lastEffect=i)),i}function I_(){return Xr().memoizedState}function ef(i,l,d,m){var N=Zs();rn.flags|=i,N.memoizedState=qu(1|l,d,void 0,m===void 0?null:m)}function tf(i,l,d,m){var N=Xr();m=m===void 0?null:m;var T=void 0;if(Sn!==null){var L=Sn.memoizedState;if(T=L.destroy,m!==null&&Og(m,L.deps)){N.memoizedState=qu(l,d,T,m);return}}rn.flags|=i,N.memoizedState=qu(1|l,d,T,m)}function j_(i,l){return ef(8390656,8,i,l)}function Vg(i,l){return tf(2048,8,i,l)}function A_(i,l){return tf(4,2,i,l)}function P_(i,l){return tf(4,4,i,l)}function R_(i,l){if(typeof l=="function")return i=i(),l(i),function(){l(null)};if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function k_(i,l,d){return d=d!=null?d.concat([i]):null,tf(4,4,R_.bind(null,l,i),d)}function Ug(){}function O_(i,l){var d=Xr();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&Og(l,m[1])?m[0]:(d.memoizedState=[i,l],i)}function D_(i,l){var d=Xr();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&Og(l,m[1])?m[0]:(i=i(),d.memoizedState=[i,l],i)}function L_(i,l,d){return(La&21)===0?(i.baseState&&(i.baseState=!1,yr=!0),i.memoizedState=d):(gs(d,l)||(d=Sa(),rn.lanes|=d,Ma|=d,i.baseState=!0),l)}function uk(i,l){var d=xt;xt=d!==0&&4>d?d:4,i(!0);var m=kg.transition;kg.transition={};try{i(!1),l()}finally{xt=d,kg.transition=m}}function M_(){return Xr().memoizedState}function dk(i,l,d){var m=bo(i);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},F_(i))V_(l,d);else if(d=m_(i,l,d,m),d!==null){var N=ir();_s(d,i,m,N),U_(d,l,m)}}function hk(i,l,d){var m=bo(i),N={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(F_(i))V_(l,N);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var L=l.lastRenderedState,q=T(L,d);if(N.hasEagerState=!0,N.eagerState=q,gs(q,L)){var G=l.interleaved;G===null?(N.next=N,Cg(l)):(N.next=G.next,G.next=N),l.interleaved=N;return}}catch{}finally{}d=m_(i,l,N,m),d!==null&&(N=ir(),_s(d,i,m,N),U_(d,l,m))}}function F_(i){var l=i.alternate;return i===rn||l!==null&&l===rn}function V_(i,l){$u=Zh=!0;var d=i.pending;d===null?l.next=l:(l.next=d.next,d.next=l),i.pending=l}function U_(i,l,d){if((d&4194240)!==0){var m=l.lanes;m&=i.pendingLanes,d|=m,l.lanes=d,ao(i,d)}}var nf={readContext:Yr,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},fk={readContext:Yr,useCallback:function(i,l){return Zs().memoizedState=[i,l===void 0?null:l],i},useContext:Yr,useEffect:j_,useImperativeHandle:function(i,l,d){return d=d!=null?d.concat([i]):null,ef(4194308,4,R_.bind(null,l,i),d)},useLayoutEffect:function(i,l){return ef(4194308,4,i,l)},useInsertionEffect:function(i,l){return ef(4,2,i,l)},useMemo:function(i,l){var d=Zs();return l=l===void 0?null:l,i=i(),d.memoizedState=[i,l],i},useReducer:function(i,l,d){var m=Zs();return l=d!==void 0?d(l):l,m.memoizedState=m.baseState=l,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},m.queue=i,i=i.dispatch=dk.bind(null,rn,i),[m.memoizedState,i]},useRef:function(i){var l=Zs();return i={current:i},l.memoizedState=i},useState:C_,useDebugValue:Ug,useDeferredValue:function(i){return Zs().memoizedState=i},useTransition:function(){var i=C_(!1),l=i[0];return i=uk.bind(null,i[1]),Zs().memoizedState=i,[l,i]},useMutableSource:function(){},useSyncExternalStore:function(i,l,d){var m=rn,N=Zs();if(Xt){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),Pn===null)throw Error(n(349));(La&30)!==0||E_(m,l,d)}N.memoizedState=d;var T={value:d,getSnapshot:l};return N.queue=T,j_(N_.bind(null,m,T,i),[i]),m.flags|=2048,qu(9,b_.bind(null,m,T,d,l),void 0,null),d},useId:function(){var i=Zs(),l=Pn.identifierPrefix;if(Xt){var d=ji,m=Ii;d=(m&~(1<<32-nr(m)-1)).toString(32)+d,l=":"+l+"R"+d,d=zu++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=ck++,l=":"+l+"r"+d.toString(32)+":";return i.memoizedState=l},unstable_isNewReconciler:!1},pk={readContext:Yr,useCallback:O_,useContext:Yr,useEffect:Vg,useImperativeHandle:k_,useInsertionEffect:A_,useLayoutEffect:P_,useMemo:D_,useReducer:Mg,useRef:I_,useState:function(){return Mg(Bu)},useDebugValue:Ug,useDeferredValue:function(i){var l=Xr();return L_(l,Sn.memoizedState,i)},useTransition:function(){var i=Mg(Bu)[0],l=Xr().memoizedState;return[i,l]},useMutableSource:w_,useSyncExternalStore:__,useId:M_,unstable_isNewReconciler:!1},mk={readContext:Yr,useCallback:O_,useContext:Yr,useEffect:Vg,useImperativeHandle:k_,useInsertionEffect:A_,useLayoutEffect:P_,useMemo:D_,useReducer:Fg,useRef:I_,useState:function(){return Fg(Bu)},useDebugValue:Ug,useDeferredValue:function(i){var l=Xr();return Sn===null?l.memoizedState=i:L_(l,Sn.memoizedState,i)},useTransition:function(){var i=Fg(Bu)[0],l=Xr().memoizedState;return[i,l]},useMutableSource:w_,useSyncExternalStore:__,useId:M_,unstable_isNewReconciler:!1};function vs(i,l){if(i&&i.defaultProps){l=ne({},l),i=i.defaultProps;for(var d in i)l[d]===void 0&&(l[d]=i[d]);return l}return l}function $g(i,l,d,m){l=i.memoizedState,d=d(m,l),d=d==null?l:ne({},l,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var rf={isMounted:function(i){return(i=i._reactInternals)?cs(i)===i:!1},enqueueSetState:function(i,l,d){i=i._reactInternals;var m=ir(),N=bo(i),T=Pi(m,N);T.payload=l,d!=null&&(T.callback=d),l=xo(i,T,N),l!==null&&(_s(l,i,N,m),Qh(l,i,N))},enqueueReplaceState:function(i,l,d){i=i._reactInternals;var m=ir(),N=bo(i),T=Pi(m,N);T.tag=1,T.payload=l,d!=null&&(T.callback=d),l=xo(i,T,N),l!==null&&(_s(l,i,N,m),Qh(l,i,N))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var d=ir(),m=bo(i),N=Pi(d,m);N.tag=2,l!=null&&(N.callback=l),l=xo(i,N,m),l!==null&&(_s(l,i,m,d),Qh(l,i,m))}};function $_(i,l,d,m,N,T,L){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,T,L):l.prototype&&l.prototype.isPureReactComponent?!Au(d,m)||!Au(N,T):!0}function z_(i,l,d){var m=!1,N=go,T=l.contextType;return typeof T=="object"&&T!==null?T=Yr(T):(N=gr(l)?Pa:Wn.current,m=l.contextTypes,T=(m=m!=null)?Ql(i,N):go),l=new l(d,T),i.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=rf,i.stateNode=l,l._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=N,i.__reactInternalMemoizedMaskedChildContext=T),l}function B_(i,l,d,m){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==i&&rf.enqueueReplaceState(l,l.state,null)}function zg(i,l,d,m){var N=i.stateNode;N.props=d,N.state=i.memoizedState,N.refs={},Ig(i);var T=l.contextType;typeof T=="object"&&T!==null?N.context=Yr(T):(T=gr(l)?Pa:Wn.current,N.context=Ql(i,T)),N.state=i.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&($g(i,l,T,d),N.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(l=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),l!==N.state&&rf.enqueueReplaceState(N,N.state,null),Yh(i,d,N,m),N.state=i.memoizedState),typeof N.componentDidMount=="function"&&(i.flags|=4194308)}function rc(i,l){try{var d="",m=l;do d+=Le(m),m=m.return;while(m);var N=d}catch(T){N=`
Error generating stack: `+T.message+`
`+T.stack}return{value:i,source:l,stack:N,digest:null}}function Bg(i,l,d){return{value:i,source:null,stack:d??null,digest:l??null}}function qg(i,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var gk=typeof WeakMap=="function"?WeakMap:Map;function q_(i,l,d){d=Pi(-1,d),d.tag=3,d.payload={element:null};var m=l.value;return d.callback=function(){df||(df=!0,iy=m),qg(i,l)},d}function W_(i,l,d){d=Pi(-1,d),d.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var N=l.value;d.payload=function(){return m(N)},d.callback=function(){qg(i,l)}}var T=i.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){qg(i,l),typeof m!="function"&&(_o===null?_o=new Set([this]):_o.add(this));var L=l.stack;this.componentDidCatch(l.value,{componentStack:L!==null?L:""})}),d}function H_(i,l,d){var m=i.pingCache;if(m===null){m=i.pingCache=new gk;var N=new Set;m.set(l,N)}else N=m.get(l),N===void 0&&(N=new Set,m.set(l,N));N.has(d)||(N.add(d),i=Ak.bind(null,i,l,d),l.then(i,i))}function K_(i){do{var l;if((l=i.tag===13)&&(l=i.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return i;i=i.return}while(i!==null);return null}function G_(i,l,d,m,N){return(i.mode&1)===0?(i===l?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Pi(-1,1),l.tag=2,xo(d,l,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=N,i)}var yk=M.ReactCurrentOwner,yr=!1;function sr(i,l,d,m){l.child=i===null?p_(l,null,d,m):Zl(l,i.child,d,m)}function Q_(i,l,d,m,N){d=d.render;var T=l.ref;return tc(l,N),m=Dg(i,l,d,m,T,N),d=Lg(),i!==null&&!yr?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~N,Ri(i,l,N)):(Xt&&d&&vg(l),l.flags|=1,sr(i,l,m,N),l.child)}function Y_(i,l,d,m,N){if(i===null){var T=d.type;return typeof T=="function"&&!hy(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=T,X_(i,l,T,m,N)):(i=yf(d.type,null,m,l,l.mode,N),i.ref=l.ref,i.return=l,l.child=i)}if(T=i.child,(i.lanes&N)===0){var L=T.memoizedProps;if(d=d.compare,d=d!==null?d:Au,d(L,m)&&i.ref===l.ref)return Ri(i,l,N)}return l.flags|=1,i=So(T,m),i.ref=l.ref,i.return=l,l.child=i}function X_(i,l,d,m,N){if(i!==null){var T=i.memoizedProps;if(Au(T,m)&&i.ref===l.ref)if(yr=!1,l.pendingProps=m=T,(i.lanes&N)!==0)(i.flags&131072)!==0&&(yr=!0);else return l.lanes=i.lanes,Ri(i,l,N)}return Wg(i,l,d,m,N)}function J_(i,l,d){var m=l.pendingProps,N=m.children,T=i!==null?i.memoizedState:null;if(m.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ut(ic,Fr),Fr|=d;else{if((d&1073741824)===0)return i=T!==null?T.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:i,cachePool:null,transitions:null},l.updateQueue=null,Ut(ic,Fr),Fr|=i,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=T!==null?T.baseLanes:d,Ut(ic,Fr),Fr|=m}else T!==null?(m=T.baseLanes|d,l.memoizedState=null):m=d,Ut(ic,Fr),Fr|=m;return sr(i,l,N,d),l.child}function Z_(i,l){var d=l.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function Wg(i,l,d,m,N){var T=gr(d)?Pa:Wn.current;return T=Ql(l,T),tc(l,N),d=Dg(i,l,d,m,T,N),m=Lg(),i!==null&&!yr?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~N,Ri(i,l,N)):(Xt&&m&&vg(l),l.flags|=1,sr(i,l,d,N),l.child)}function eE(i,l,d,m,N){if(gr(d)){var T=!0;$h(l)}else T=!1;if(tc(l,N),l.stateNode===null)of(i,l),z_(l,d,m),zg(l,d,m,N),m=!0;else if(i===null){var L=l.stateNode,q=l.memoizedProps;L.props=q;var G=L.context,ae=d.contextType;typeof ae=="object"&&ae!==null?ae=Yr(ae):(ae=gr(d)?Pa:Wn.current,ae=Ql(l,ae));var fe=d.getDerivedStateFromProps,ge=typeof fe=="function"||typeof L.getSnapshotBeforeUpdate=="function";ge||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(q!==m||G!==ae)&&B_(l,L,m,ae),vo=!1;var he=l.memoizedState;L.state=he,Yh(l,m,L,N),G=l.memoizedState,q!==m||he!==G||mr.current||vo?(typeof fe=="function"&&($g(l,d,fe,m),G=l.memoizedState),(q=vo||$_(l,d,q,m,he,G,ae))?(ge||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(l.flags|=4194308)):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=G),L.props=m,L.state=G,L.context=ae,m=q):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{L=l.stateNode,g_(i,l),q=l.memoizedProps,ae=l.type===l.elementType?q:vs(l.type,q),L.props=ae,ge=l.pendingProps,he=L.context,G=d.contextType,typeof G=="object"&&G!==null?G=Yr(G):(G=gr(d)?Pa:Wn.current,G=Ql(l,G));var Pe=d.getDerivedStateFromProps;(fe=typeof Pe=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(q!==ge||he!==G)&&B_(l,L,m,G),vo=!1,he=l.memoizedState,L.state=he,Yh(l,m,L,N);var Me=l.memoizedState;q!==ge||he!==Me||mr.current||vo?(typeof Pe=="function"&&($g(l,d,Pe,m),Me=l.memoizedState),(ae=vo||$_(l,d,ae,m,he,Me,G)||!1)?(fe||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(m,Me,G),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(m,Me,G)),typeof L.componentDidUpdate=="function"&&(l.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof L.componentDidUpdate!="function"||q===i.memoizedProps&&he===i.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&he===i.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=Me),L.props=m,L.state=Me,L.context=G,m=ae):(typeof L.componentDidUpdate!="function"||q===i.memoizedProps&&he===i.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&he===i.memoizedState||(l.flags|=1024),m=!1)}return Hg(i,l,d,m,T,N)}function Hg(i,l,d,m,N,T){Z_(i,l);var L=(l.flags&128)!==0;if(!m&&!L)return N&&i_(l,d,!1),Ri(i,l,T);m=l.stateNode,yk.current=l;var q=L&&typeof d.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,i!==null&&L?(l.child=Zl(l,i.child,null,T),l.child=Zl(l,null,q,T)):sr(i,l,q,T),l.memoizedState=m.state,N&&i_(l,d,!0),l.child}function tE(i){var l=i.stateNode;l.pendingContext?r_(i,l.pendingContext,l.pendingContext!==l.context):l.context&&r_(i,l.context,!1),jg(i,l.containerInfo)}function nE(i,l,d,m,N){return Jl(),Eg(N),l.flags|=256,sr(i,l,d,m),l.child}var Kg={dehydrated:null,treeContext:null,retryLane:0};function Gg(i){return{baseLanes:i,cachePool:null,transitions:null}}function rE(i,l,d){var m=l.pendingProps,N=nn.current,T=!1,L=(l.flags&128)!==0,q;if((q=L)||(q=i!==null&&i.memoizedState===null?!1:(N&2)!==0),q?(T=!0,l.flags&=-129):(i===null||i.memoizedState!==null)&&(N|=1),Ut(nn,N&1),i===null)return _g(l),i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((l.mode&1)===0?l.lanes=1:i.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(L=m.children,i=m.fallback,T?(m=l.mode,T=l.child,L={mode:"hidden",children:L},(m&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=L):T=vf(L,m,0,null),i=$a(i,m,d,null),T.return=l,i.return=l,T.sibling=i,l.child=T,l.child.memoizedState=Gg(d),l.memoizedState=Kg,i):Qg(l,L));if(N=i.memoizedState,N!==null&&(q=N.dehydrated,q!==null))return vk(i,l,L,m,q,N,d);if(T){T=m.fallback,L=l.mode,N=i.child,q=N.sibling;var G={mode:"hidden",children:m.children};return(L&1)===0&&l.child!==N?(m=l.child,m.childLanes=0,m.pendingProps=G,l.deletions=null):(m=So(N,G),m.subtreeFlags=N.subtreeFlags&14680064),q!==null?T=So(q,T):(T=$a(T,L,d,null),T.flags|=2),T.return=l,m.return=l,m.sibling=T,l.child=m,m=T,T=l.child,L=i.child.memoizedState,L=L===null?Gg(d):{baseLanes:L.baseLanes|d,cachePool:null,transitions:L.transitions},T.memoizedState=L,T.childLanes=i.childLanes&~d,l.memoizedState=Kg,m}return T=i.child,i=T.sibling,m=So(T,{mode:"visible",children:m.children}),(l.mode&1)===0&&(m.lanes=d),m.return=l,m.sibling=null,i!==null&&(d=l.deletions,d===null?(l.deletions=[i],l.flags|=16):d.push(i)),l.child=m,l.memoizedState=null,m}function Qg(i,l){return l=vf({mode:"visible",children:l},i.mode,0,null),l.return=i,i.child=l}function sf(i,l,d,m){return m!==null&&Eg(m),Zl(l,i.child,null,d),i=Qg(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function vk(i,l,d,m,N,T,L){if(d)return l.flags&256?(l.flags&=-257,m=Bg(Error(n(422))),sf(i,l,L,m)):l.memoizedState!==null?(l.child=i.child,l.flags|=128,null):(T=m.fallback,N=l.mode,m=vf({mode:"visible",children:m.children},N,0,null),T=$a(T,N,L,null),T.flags|=2,m.return=l,T.return=l,m.sibling=T,l.child=m,(l.mode&1)!==0&&Zl(l,i.child,null,L),l.child.memoizedState=Gg(L),l.memoizedState=Kg,T);if((l.mode&1)===0)return sf(i,l,L,null);if(N.data==="$!"){if(m=N.nextSibling&&N.nextSibling.dataset,m)var q=m.dgst;return m=q,T=Error(n(419)),m=Bg(T,m,void 0),sf(i,l,L,m)}if(q=(L&i.childLanes)!==0,yr||q){if(m=Pn,m!==null){switch(L&-L){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(m.suspendedLanes|L))!==0?0:N,N!==0&&N!==T.retryLane&&(T.retryLane=N,Ai(i,N),_s(m,i,N,-1))}return dy(),m=Bg(Error(n(421))),sf(i,l,L,m)}return N.data==="$?"?(l.flags|=128,l.child=i.child,l=Pk.bind(null,i),N._reactRetry=l,null):(i=T.treeContext,Mr=po(N.nextSibling),Lr=l,Xt=!0,ys=null,i!==null&&(Gr[Qr++]=Ii,Gr[Qr++]=ji,Gr[Qr++]=Ra,Ii=i.id,ji=i.overflow,Ra=l),l=Qg(l,m.children),l.flags|=4096,l)}function sE(i,l,d){i.lanes|=l;var m=i.alternate;m!==null&&(m.lanes|=l),Tg(i.return,l,d)}function Yg(i,l,d,m,N){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:N}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=d,T.tailMode=N)}function iE(i,l,d){var m=l.pendingProps,N=m.revealOrder,T=m.tail;if(sr(i,l,m.children,d),m=nn.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&sE(i,d,l);else if(i.tag===19)sE(i,d,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if(Ut(nn,m),(l.mode&1)===0)l.memoizedState=null;else switch(N){case"forwards":for(d=l.child,N=null;d!==null;)i=d.alternate,i!==null&&Xh(i)===null&&(N=d),d=d.sibling;d=N,d===null?(N=l.child,l.child=null):(N=d.sibling,d.sibling=null),Yg(l,!1,N,d,T);break;case"backwards":for(d=null,N=l.child,l.child=null;N!==null;){if(i=N.alternate,i!==null&&Xh(i)===null){l.child=N;break}i=N.sibling,N.sibling=d,d=N,N=i}Yg(l,!0,d,null,T);break;case"together":Yg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function of(i,l){(l.mode&1)===0&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=2)}function Ri(i,l,d){if(i!==null&&(l.dependencies=i.dependencies),Ma|=l.lanes,(d&l.childLanes)===0)return null;if(i!==null&&l.child!==i.child)throw Error(n(153));if(l.child!==null){for(i=l.child,d=So(i,i.pendingProps),l.child=d,d.return=l;i.sibling!==null;)i=i.sibling,d=d.sibling=So(i,i.pendingProps),d.return=l;d.sibling=null}return l.child}function xk(i,l,d){switch(l.tag){case 3:tE(l),Jl();break;case 5:x_(l);break;case 1:gr(l.type)&&$h(l);break;case 4:jg(l,l.stateNode.containerInfo);break;case 10:var m=l.type._context,N=l.memoizedProps.value;Ut(Kh,m._currentValue),m._currentValue=N;break;case 13:if(m=l.memoizedState,m!==null)return m.dehydrated!==null?(Ut(nn,nn.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?rE(i,l,d):(Ut(nn,nn.current&1),i=Ri(i,l,d),i!==null?i.sibling:null);Ut(nn,nn.current&1);break;case 19:if(m=(d&l.childLanes)!==0,(i.flags&128)!==0){if(m)return iE(i,l,d);l.flags|=128}if(N=l.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Ut(nn,nn.current),m)break;return null;case 22:case 23:return l.lanes=0,J_(i,l,d)}return Ri(i,l,d)}var oE,Xg,aE,lE;oE=function(i,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Xg=function(){},aE=function(i,l,d,m){var N=i.memoizedProps;if(N!==m){i=l.stateNode,Da(Js.current);var T=null;switch(d){case"input":N=je(i,N),m=je(i,m),T=[];break;case"select":N=ne({},N,{value:void 0}),m=ne({},m,{value:void 0}),T=[];break;case"textarea":N=os(i,N),m=os(i,m),T=[];break;default:typeof N.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=Fh)}qn(d,m);var L;d=null;for(ae in N)if(!m.hasOwnProperty(ae)&&N.hasOwnProperty(ae)&&N[ae]!=null)if(ae==="style"){var q=N[ae];for(L in q)q.hasOwnProperty(L)&&(d||(d={}),d[L]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(s.hasOwnProperty(ae)?T||(T=[]):(T=T||[]).push(ae,null));for(ae in m){var G=m[ae];if(q=N!=null?N[ae]:void 0,m.hasOwnProperty(ae)&&G!==q&&(G!=null||q!=null))if(ae==="style")if(q){for(L in q)!q.hasOwnProperty(L)||G&&G.hasOwnProperty(L)||(d||(d={}),d[L]="");for(L in G)G.hasOwnProperty(L)&&q[L]!==G[L]&&(d||(d={}),d[L]=G[L])}else d||(T||(T=[]),T.push(ae,d)),d=G;else ae==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,q=q?q.__html:void 0,G!=null&&q!==G&&(T=T||[]).push(ae,G)):ae==="children"?typeof G!="string"&&typeof G!="number"||(T=T||[]).push(ae,""+G):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(s.hasOwnProperty(ae)?(G!=null&&ae==="onScroll"&&Wt("scroll",i),T||q===G||(T=[])):(T=T||[]).push(ae,G))}d&&(T=T||[]).push("style",d);var ae=T;(l.updateQueue=ae)&&(l.flags|=4)}},lE=function(i,l,d,m){d!==m&&(l.flags|=4)};function Wu(i,l){if(!Xt)switch(i.tailMode){case"hidden":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Kn(i){var l=i.alternate!==null&&i.alternate.child===i.child,d=0,m=0;if(l)for(var N=i.child;N!==null;)d|=N.lanes|N.childLanes,m|=N.subtreeFlags&14680064,m|=N.flags&14680064,N.return=i,N=N.sibling;else for(N=i.child;N!==null;)d|=N.lanes|N.childLanes,m|=N.subtreeFlags,m|=N.flags,N.return=i,N=N.sibling;return i.subtreeFlags|=m,i.childLanes=d,l}function wk(i,l,d){var m=l.pendingProps;switch(xg(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(l),null;case 1:return gr(l.type)&&Uh(),Kn(l),null;case 3:return m=l.stateNode,nc(),Ht(mr),Ht(Wn),Rg(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(Wh(l)?l.flags|=4:i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ys!==null&&(ly(ys),ys=null))),Xg(i,l),Kn(l),null;case 5:Ag(l);var N=Da(Uu.current);if(d=l.type,i!==null&&l.stateNode!=null)aE(i,l,d,m,N),i.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(n(166));return Kn(l),null}if(i=Da(Js.current),Wh(l)){m=l.stateNode,d=l.type;var T=l.memoizedProps;switch(m[Xs]=l,m[Du]=T,i=(l.mode&1)!==0,d){case"dialog":Wt("cancel",m),Wt("close",m);break;case"iframe":case"object":case"embed":Wt("load",m);break;case"video":case"audio":for(N=0;N<Ru.length;N++)Wt(Ru[N],m);break;case"source":Wt("error",m);break;case"img":case"image":case"link":Wt("error",m),Wt("load",m);break;case"details":Wt("toggle",m);break;case"input":gt(m,T),Wt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!T.multiple},Wt("invalid",m);break;case"textarea":hn(m,T),Wt("invalid",m)}qn(d,T),N=null;for(var L in T)if(T.hasOwnProperty(L)){var q=T[L];L==="children"?typeof q=="string"?m.textContent!==q&&(T.suppressHydrationWarning!==!0&&Mh(m.textContent,q,i),N=["children",q]):typeof q=="number"&&m.textContent!==""+q&&(T.suppressHydrationWarning!==!0&&Mh(m.textContent,q,i),N=["children",""+q]):s.hasOwnProperty(L)&&q!=null&&L==="onScroll"&&Wt("scroll",m)}switch(d){case"input":st(m),jr(m,T,!0);break;case"textarea":st(m),$s(m);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(m.onclick=Fh)}m=N,l.updateQueue=m,m!==null&&(l.flags|=4)}else{L=N.nodeType===9?N:N.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=zt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=L.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=L.createElement(d,{is:m.is}):(i=L.createElement(d),d==="select"&&(L=i,m.multiple?L.multiple=!0:m.size&&(L.size=m.size))):i=L.createElementNS(i,d),i[Xs]=l,i[Du]=m,oE(i,l,!1,!1),l.stateNode=i;e:{switch(L=Bs(d,m),d){case"dialog":Wt("cancel",i),Wt("close",i),N=m;break;case"iframe":case"object":case"embed":Wt("load",i),N=m;break;case"video":case"audio":for(N=0;N<Ru.length;N++)Wt(Ru[N],i);N=m;break;case"source":Wt("error",i),N=m;break;case"img":case"image":case"link":Wt("error",i),Wt("load",i),N=m;break;case"details":Wt("toggle",i),N=m;break;case"input":gt(i,m),N=je(i,m),Wt("invalid",i);break;case"option":N=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},N=ne({},m,{value:void 0}),Wt("invalid",i);break;case"textarea":hn(i,m),N=os(i,m),Wt("invalid",i);break;default:N=m}qn(d,N),q=N;for(T in q)if(q.hasOwnProperty(T)){var G=q[T];T==="style"?vi(i,G):T==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&bn(i,G)):T==="children"?typeof G=="string"?(d!=="textarea"||G!=="")&&Pr(i,G):typeof G=="number"&&Pr(i,""+G):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(s.hasOwnProperty(T)?G!=null&&T==="onScroll"&&Wt("scroll",i):G!=null&&I(i,T,G,L))}switch(d){case"input":st(i),jr(i,m,!1);break;case"textarea":st(i),$s(i);break;case"option":m.value!=null&&i.setAttribute("value",""+Ie(m.value));break;case"select":i.multiple=!!m.multiple,T=m.value,T!=null?Ar(i,!!m.multiple,T,!1):m.defaultValue!=null&&Ar(i,!!m.multiple,m.defaultValue,!0);break;default:typeof N.onClick=="function"&&(i.onclick=Fh)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Kn(l),null;case 6:if(i&&l.stateNode!=null)lE(i,l,i.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(n(166));if(d=Da(Uu.current),Da(Js.current),Wh(l)){if(m=l.stateNode,d=l.memoizedProps,m[Xs]=l,(T=m.nodeValue!==d)&&(i=Lr,i!==null))switch(i.tag){case 3:Mh(m.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Mh(m.nodeValue,d,(i.mode&1)!==0)}T&&(l.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Xs]=l,l.stateNode=m}return Kn(l),null;case 13:if(Ht(nn),m=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Xt&&Mr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)d_(),Jl(),l.flags|=98560,T=!1;else if(T=Wh(l),m!==null&&m.dehydrated!==null){if(i===null){if(!T)throw Error(n(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[Xs]=l}else Jl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Kn(l),T=!1}else ys!==null&&(ly(ys),ys=null),T=!0;if(!T)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(l.child.flags|=8192,(l.mode&1)!==0&&(i===null||(nn.current&1)!==0?Tn===0&&(Tn=3):dy())),l.updateQueue!==null&&(l.flags|=4),Kn(l),null);case 4:return nc(),Xg(i,l),i===null&&ku(l.stateNode.containerInfo),Kn(l),null;case 10:return Sg(l.type._context),Kn(l),null;case 17:return gr(l.type)&&Uh(),Kn(l),null;case 19:if(Ht(nn),T=l.memoizedState,T===null)return Kn(l),null;if(m=(l.flags&128)!==0,L=T.rendering,L===null)if(m)Wu(T,!1);else{if(Tn!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(L=Xh(i),L!==null){for(l.flags|=128,Wu(T,!1),m=L.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),l.subtreeFlags=0,m=d,d=l.child;d!==null;)T=d,i=m,T.flags&=14680066,L=T.alternate,L===null?(T.childLanes=0,T.lanes=i,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=L.childLanes,T.lanes=L.lanes,T.child=L.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=L.memoizedProps,T.memoizedState=L.memoizedState,T.updateQueue=L.updateQueue,T.type=L.type,i=L.dependencies,T.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return Ut(nn,nn.current&1|2),l.child}i=i.sibling}T.tail!==null&&Vt()>oc&&(l.flags|=128,m=!0,Wu(T,!1),l.lanes=4194304)}else{if(!m)if(i=Xh(L),i!==null){if(l.flags|=128,m=!0,d=i.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),Wu(T,!0),T.tail===null&&T.tailMode==="hidden"&&!L.alternate&&!Xt)return Kn(l),null}else 2*Vt()-T.renderingStartTime>oc&&d!==1073741824&&(l.flags|=128,m=!0,Wu(T,!1),l.lanes=4194304);T.isBackwards?(L.sibling=l.child,l.child=L):(d=T.last,d!==null?d.sibling=L:l.child=L,T.last=L)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=Vt(),l.sibling=null,d=nn.current,Ut(nn,m?d&1|2:d&1),l):(Kn(l),null);case 22:case 23:return uy(),m=l.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(l.flags|=8192),m&&(l.mode&1)!==0?(Fr&1073741824)!==0&&(Kn(l),l.subtreeFlags&6&&(l.flags|=8192)):Kn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function _k(i,l){switch(xg(l),l.tag){case 1:return gr(l.type)&&Uh(),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return nc(),Ht(mr),Ht(Wn),Rg(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 5:return Ag(l),null;case 13:if(Ht(nn),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Jl()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return Ht(nn),null;case 4:return nc(),null;case 10:return Sg(l.type._context),null;case 22:case 23:return uy(),null;case 24:return null;default:return null}}var af=!1,Gn=!1,Ek=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function sc(i,l){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){un(i,l,m)}else d.current=null}function Jg(i,l,d){try{d()}catch(m){un(i,l,m)}}var cE=!1;function bk(i,l){if(ug=uo,i=$0(),ng(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var N=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var L=0,q=-1,G=-1,ae=0,fe=0,ge=i,he=null;t:for(;;){for(var Pe;ge!==d||N!==0&&ge.nodeType!==3||(q=L+N),ge!==T||m!==0&&ge.nodeType!==3||(G=L+m),ge.nodeType===3&&(L+=ge.nodeValue.length),(Pe=ge.firstChild)!==null;)he=ge,ge=Pe;for(;;){if(ge===i)break t;if(he===d&&++ae===N&&(q=L),he===T&&++fe===m&&(G=L),(Pe=ge.nextSibling)!==null)break;ge=he,he=ge.parentNode}ge=Pe}d=q===-1||G===-1?null:{start:q,end:G}}else d=null}d=d||{start:0,end:0}}else d=null;for(dg={focusedElem:i,selectionRange:d},uo=!1,Oe=l;Oe!==null;)if(l=Oe,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,Oe=i;else for(;Oe!==null;){l=Oe;try{var Me=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var Fe=Me.memoizedProps,fn=Me.memoizedState,se=l.stateNode,X=se.getSnapshotBeforeUpdate(l.elementType===l.type?Fe:vs(l.type,Fe),fn);se.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var oe=l.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(xe){un(l,l.return,xe)}if(i=l.sibling,i!==null){i.return=l.return,Oe=i;break}Oe=l.return}return Me=cE,cE=!1,Me}function Hu(i,l,d){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var N=m=m.next;do{if((N.tag&i)===i){var T=N.destroy;N.destroy=void 0,T!==void 0&&Jg(l,d,T)}N=N.next}while(N!==m)}}function lf(i,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&i)===i){var m=d.create;d.destroy=m()}d=d.next}while(d!==l)}}function Zg(i){var l=i.ref;if(l!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof l=="function"?l(i):l.current=i}}function uE(i){var l=i.alternate;l!==null&&(i.alternate=null,uE(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&(delete l[Xs],delete l[Du],delete l[mg],delete l[ik],delete l[ok])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function dE(i){return i.tag===5||i.tag===3||i.tag===4}function hE(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||dE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ey(i,l,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(i,l):d.insertBefore(i,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(i,d)):(l=d,l.appendChild(i)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Fh));else if(m!==4&&(i=i.child,i!==null))for(ey(i,l,d),i=i.sibling;i!==null;)ey(i,l,d),i=i.sibling}function ty(i,l,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,l?d.insertBefore(i,l):d.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(ty(i,l,d),i=i.sibling;i!==null;)ty(i,l,d),i=i.sibling}var Fn=null,xs=!1;function wo(i,l,d){for(d=d.child;d!==null;)fE(i,l,d),d=d.sibling}function fE(i,l,d){if(Rr&&typeof Rr.onCommitFiberUnmount=="function")try{Rr.onCommitFiberUnmount(ba,d)}catch{}switch(d.tag){case 5:Gn||sc(d,l);case 6:var m=Fn,N=xs;Fn=null,wo(i,l,d),Fn=m,xs=N,Fn!==null&&(xs?(i=Fn,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Fn.removeChild(d.stateNode));break;case 18:Fn!==null&&(xs?(i=Fn,d=d.stateNode,i.nodeType===8?pg(i.parentNode,d):i.nodeType===1&&pg(i,d),ps(i)):pg(Fn,d.stateNode));break;case 4:m=Fn,N=xs,Fn=d.stateNode.containerInfo,xs=!0,wo(i,l,d),Fn=m,xs=N;break;case 0:case 11:case 14:case 15:if(!Gn&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){N=m=m.next;do{var T=N,L=T.destroy;T=T.tag,L!==void 0&&((T&2)!==0||(T&4)!==0)&&Jg(d,l,L),N=N.next}while(N!==m)}wo(i,l,d);break;case 1:if(!Gn&&(sc(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(q){un(d,l,q)}wo(i,l,d);break;case 21:wo(i,l,d);break;case 22:d.mode&1?(Gn=(m=Gn)||d.memoizedState!==null,wo(i,l,d),Gn=m):wo(i,l,d);break;default:wo(i,l,d)}}function pE(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new Ek),l.forEach(function(m){var N=Rk.bind(null,i,m);d.has(m)||(d.add(m),m.then(N,N))})}}function ws(i,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var N=d[m];try{var T=i,L=l,q=L;e:for(;q!==null;){switch(q.tag){case 5:Fn=q.stateNode,xs=!1;break e;case 3:Fn=q.stateNode.containerInfo,xs=!0;break e;case 4:Fn=q.stateNode.containerInfo,xs=!0;break e}q=q.return}if(Fn===null)throw Error(n(160));fE(T,L,N),Fn=null,xs=!1;var G=N.alternate;G!==null&&(G.return=null),N.return=null}catch(ae){un(N,l,ae)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)mE(l,i),l=l.sibling}function mE(i,l){var d=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ws(l,i),ei(i),m&4){try{Hu(3,i,i.return),lf(3,i)}catch(Fe){un(i,i.return,Fe)}try{Hu(5,i,i.return)}catch(Fe){un(i,i.return,Fe)}}break;case 1:ws(l,i),ei(i),m&512&&d!==null&&sc(d,d.return);break;case 5:if(ws(l,i),ei(i),m&512&&d!==null&&sc(d,d.return),i.flags&32){var N=i.stateNode;try{Pr(N,"")}catch(Fe){un(i,i.return,Fe)}}if(m&4&&(N=i.stateNode,N!=null)){var T=i.memoizedProps,L=d!==null?d.memoizedProps:T,q=i.type,G=i.updateQueue;if(i.updateQueue=null,G!==null)try{q==="input"&&T.type==="radio"&&T.name!=null&&cn(N,T),Bs(q,L);var ae=Bs(q,T);for(L=0;L<G.length;L+=2){var fe=G[L],ge=G[L+1];fe==="style"?vi(N,ge):fe==="dangerouslySetInnerHTML"?bn(N,ge):fe==="children"?Pr(N,ge):I(N,fe,ge,ae)}switch(q){case"input":zn(N,T);break;case"textarea":Us(N,T);break;case"select":var he=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!T.multiple;var Pe=T.value;Pe!=null?Ar(N,!!T.multiple,Pe,!1):he!==!!T.multiple&&(T.defaultValue!=null?Ar(N,!!T.multiple,T.defaultValue,!0):Ar(N,!!T.multiple,T.multiple?[]:"",!1))}N[Du]=T}catch(Fe){un(i,i.return,Fe)}}break;case 6:if(ws(l,i),ei(i),m&4){if(i.stateNode===null)throw Error(n(162));N=i.stateNode,T=i.memoizedProps;try{N.nodeValue=T}catch(Fe){un(i,i.return,Fe)}}break;case 3:if(ws(l,i),ei(i),m&4&&d!==null&&d.memoizedState.isDehydrated)try{ps(l.containerInfo)}catch(Fe){un(i,i.return,Fe)}break;case 4:ws(l,i),ei(i);break;case 13:ws(l,i),ei(i),N=i.child,N.flags&8192&&(T=N.memoizedState!==null,N.stateNode.isHidden=T,!T||N.alternate!==null&&N.alternate.memoizedState!==null||(sy=Vt())),m&4&&pE(i);break;case 22:if(fe=d!==null&&d.memoizedState!==null,i.mode&1?(Gn=(ae=Gn)||fe,ws(l,i),Gn=ae):ws(l,i),ei(i),m&8192){if(ae=i.memoizedState!==null,(i.stateNode.isHidden=ae)&&!fe&&(i.mode&1)!==0)for(Oe=i,fe=i.child;fe!==null;){for(ge=Oe=fe;Oe!==null;){switch(he=Oe,Pe=he.child,he.tag){case 0:case 11:case 14:case 15:Hu(4,he,he.return);break;case 1:sc(he,he.return);var Me=he.stateNode;if(typeof Me.componentWillUnmount=="function"){m=he,d=he.return;try{l=m,Me.props=l.memoizedProps,Me.state=l.memoizedState,Me.componentWillUnmount()}catch(Fe){un(m,d,Fe)}}break;case 5:sc(he,he.return);break;case 22:if(he.memoizedState!==null){vE(ge);continue}}Pe!==null?(Pe.return=he,Oe=Pe):vE(ge)}fe=fe.sibling}e:for(fe=null,ge=i;;){if(ge.tag===5){if(fe===null){fe=ge;try{N=ge.stateNode,ae?(T=N.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(q=ge.stateNode,G=ge.memoizedProps.style,L=G!=null&&G.hasOwnProperty("display")?G.display:null,q.style.display=zs("display",L))}catch(Fe){un(i,i.return,Fe)}}}else if(ge.tag===6){if(fe===null)try{ge.stateNode.nodeValue=ae?"":ge.memoizedProps}catch(Fe){un(i,i.return,Fe)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===i)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===i)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===i)break e;fe===ge&&(fe=null),ge=ge.return}fe===ge&&(fe=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:ws(l,i),ei(i),m&4&&pE(i);break;case 21:break;default:ws(l,i),ei(i)}}function ei(i){var l=i.flags;if(l&2){try{e:{for(var d=i.return;d!==null;){if(dE(d)){var m=d;break e}d=d.return}throw Error(n(160))}switch(m.tag){case 5:var N=m.stateNode;m.flags&32&&(Pr(N,""),m.flags&=-33);var T=hE(i);ty(i,T,N);break;case 3:case 4:var L=m.stateNode.containerInfo,q=hE(i);ey(i,q,L);break;default:throw Error(n(161))}}catch(G){un(i,i.return,G)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function Nk(i,l,d){Oe=i,gE(i)}function gE(i,l,d){for(var m=(i.mode&1)!==0;Oe!==null;){var N=Oe,T=N.child;if(N.tag===22&&m){var L=N.memoizedState!==null||af;if(!L){var q=N.alternate,G=q!==null&&q.memoizedState!==null||Gn;q=af;var ae=Gn;if(af=L,(Gn=G)&&!ae)for(Oe=N;Oe!==null;)L=Oe,G=L.child,L.tag===22&&L.memoizedState!==null?xE(N):G!==null?(G.return=L,Oe=G):xE(N);for(;T!==null;)Oe=T,gE(T),T=T.sibling;Oe=N,af=q,Gn=ae}yE(i)}else(N.subtreeFlags&8772)!==0&&T!==null?(T.return=N,Oe=T):yE(i)}}function yE(i){for(;Oe!==null;){var l=Oe;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Gn||lf(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!Gn)if(d===null)m.componentDidMount();else{var N=l.elementType===l.type?d.memoizedProps:vs(l.type,d.memoizedProps);m.componentDidUpdate(N,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var T=l.updateQueue;T!==null&&v_(l,T,m);break;case 3:var L=l.updateQueue;if(L!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}v_(l,L,d)}break;case 5:var q=l.stateNode;if(d===null&&l.flags&4){d=q;var G=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&d.focus();break;case"img":G.src&&(d.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ae=l.alternate;if(ae!==null){var fe=ae.memoizedState;if(fe!==null){var ge=fe.dehydrated;ge!==null&&ps(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Gn||l.flags&512&&Zg(l)}catch(he){un(l,l.return,he)}}if(l===i){Oe=null;break}if(d=l.sibling,d!==null){d.return=l.return,Oe=d;break}Oe=l.return}}function vE(i){for(;Oe!==null;){var l=Oe;if(l===i){Oe=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Oe=d;break}Oe=l.return}}function xE(i){for(;Oe!==null;){var l=Oe;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{lf(4,l)}catch(G){un(l,d,G)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var N=l.return;try{m.componentDidMount()}catch(G){un(l,N,G)}}var T=l.return;try{Zg(l)}catch(G){un(l,T,G)}break;case 5:var L=l.return;try{Zg(l)}catch(G){un(l,L,G)}}}catch(G){un(l,l.return,G)}if(l===i){Oe=null;break}var q=l.sibling;if(q!==null){q.return=l.return,Oe=q;break}Oe=l.return}}var Sk=Math.ceil,cf=M.ReactCurrentDispatcher,ny=M.ReactCurrentOwner,Jr=M.ReactCurrentBatchConfig,It=0,Pn=null,vn=null,Vn=0,Fr=0,ic=mo(0),Tn=0,Ku=null,Ma=0,uf=0,ry=0,Gu=null,vr=null,sy=0,oc=1/0,ki=null,df=!1,iy=null,_o=null,hf=!1,Eo=null,ff=0,Qu=0,oy=null,pf=-1,mf=0;function ir(){return(It&6)!==0?Vt():pf!==-1?pf:pf=Vt()}function bo(i){return(i.mode&1)===0?1:(It&2)!==0&&Vn!==0?Vn&-Vn:lk.transition!==null?(mf===0&&(mf=Sa()),mf):(i=xt,i!==0||(i=window.event,i=i===void 0?16:bu(i.type)),i)}function _s(i,l,d,m){if(50<Qu)throw Qu=0,oy=null,Error(n(185));oo(i,d,m),((It&2)===0||i!==Pn)&&(i===Pn&&((It&2)===0&&(uf|=d),Tn===4&&No(i,Vn)),xr(i,m),d===1&&It===0&&(l.mode&1)===0&&(oc=Vt()+500,zh&&yo()))}function xr(i,l){var d=i.callbackNode;_i(i,l);var m=Na(i,i===Pn?Vn:0);if(m===0)d!==null&&vu(d),i.callbackNode=null,i.callbackPriority=0;else if(l=m&-m,i.callbackPriority!==l){if(d!=null&&vu(d),l===1)i.tag===0?ak(_E.bind(null,i)):o_(_E.bind(null,i)),rk(function(){(It&6)===0&&yo()}),d=null;else{switch(lo(m)){case 1:d=Ea;break;case 4:d=ro;break;case 16:d=Wr;break;case 536870912:d=ph;break;default:d=Wr}d=jE(d,wE.bind(null,i))}i.callbackPriority=l,i.callbackNode=d}}function wE(i,l){if(pf=-1,mf=0,(It&6)!==0)throw Error(n(327));var d=i.callbackNode;if(ac()&&i.callbackNode!==d)return null;var m=Na(i,i===Pn?Vn:0);if(m===0)return null;if((m&30)!==0||(m&i.expiredLanes)!==0||l)l=gf(i,m);else{l=m;var N=It;It|=2;var T=bE();(Pn!==i||Vn!==l)&&(ki=null,oc=Vt()+500,Va(i,l));do try{Ik();break}catch(q){EE(i,q)}while(!0);Ng(),cf.current=T,It=N,vn!==null?l=0:(Pn=null,Vn=0,l=Tn)}if(l!==0){if(l===2&&(N=kr(i),N!==0&&(m=N,l=ay(i,N))),l===1)throw d=Ku,Va(i,0),No(i,m),xr(i,Vt()),d;if(l===6)No(i,m);else{if(N=i.current.alternate,(m&30)===0&&!Tk(N)&&(l=gf(i,m),l===2&&(T=kr(i),T!==0&&(m=T,l=ay(i,T))),l===1))throw d=Ku,Va(i,0),No(i,m),xr(i,Vt()),d;switch(i.finishedWork=N,i.finishedLanes=m,l){case 0:case 1:throw Error(n(345));case 2:Ua(i,vr,ki);break;case 3:if(No(i,m),(m&130023424)===m&&(l=sy+500-Vt(),10<l)){if(Na(i,0)!==0)break;if(N=i.suspendedLanes,(N&m)!==m){ir(),i.pingedLanes|=i.suspendedLanes&N;break}i.timeoutHandle=fg(Ua.bind(null,i,vr,ki),l);break}Ua(i,vr,ki);break;case 4:if(No(i,m),(m&4194240)===m)break;for(l=i.eventTimes,N=-1;0<m;){var L=31-nr(m);T=1<<L,L=l[L],L>N&&(N=L),m&=~T}if(m=N,m=Vt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*Sk(m/1960))-m,10<m){i.timeoutHandle=fg(Ua.bind(null,i,vr,ki),m);break}Ua(i,vr,ki);break;case 5:Ua(i,vr,ki);break;default:throw Error(n(329))}}}return xr(i,Vt()),i.callbackNode===d?wE.bind(null,i):null}function ay(i,l){var d=Gu;return i.current.memoizedState.isDehydrated&&(Va(i,l).flags|=256),i=gf(i,l),i!==2&&(l=vr,vr=d,l!==null&&ly(l)),i}function ly(i){vr===null?vr=i:vr.push.apply(vr,i)}function Tk(i){for(var l=i;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var N=d[m],T=N.getSnapshot;N=N.value;try{if(!gs(T(),N))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function No(i,l){for(l&=~ry,l&=~uf,i.suspendedLanes|=l,i.pingedLanes&=~l,i=i.expirationTimes;0<l;){var d=31-nr(l),m=1<<d;i[d]=-1,l&=~m}}function _E(i){if((It&6)!==0)throw Error(n(327));ac();var l=Na(i,0);if((l&1)===0)return xr(i,Vt()),null;var d=gf(i,l);if(i.tag!==0&&d===2){var m=kr(i);m!==0&&(l=m,d=ay(i,m))}if(d===1)throw d=Ku,Va(i,0),No(i,l),xr(i,Vt()),d;if(d===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=l,Ua(i,vr,ki),xr(i,Vt()),null}function cy(i,l){var d=It;It|=1;try{return i(l)}finally{It=d,It===0&&(oc=Vt()+500,zh&&yo())}}function Fa(i){Eo!==null&&Eo.tag===0&&(It&6)===0&&ac();var l=It;It|=1;var d=Jr.transition,m=xt;try{if(Jr.transition=null,xt=1,i)return i()}finally{xt=m,Jr.transition=d,It=l,(It&6)===0&&yo()}}function uy(){Fr=ic.current,Ht(ic)}function Va(i,l){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,nk(d)),vn!==null)for(d=vn.return;d!==null;){var m=d;switch(xg(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Uh();break;case 3:nc(),Ht(mr),Ht(Wn),Rg();break;case 5:Ag(m);break;case 4:nc();break;case 13:Ht(nn);break;case 19:Ht(nn);break;case 10:Sg(m.type._context);break;case 22:case 23:uy()}d=d.return}if(Pn=i,vn=i=So(i.current,null),Vn=Fr=l,Tn=0,Ku=null,ry=uf=Ma=0,vr=Gu=null,Oa!==null){for(l=0;l<Oa.length;l++)if(d=Oa[l],m=d.interleaved,m!==null){d.interleaved=null;var N=m.next,T=d.pending;if(T!==null){var L=T.next;T.next=N,m.next=L}d.pending=m}Oa=null}return i}function EE(i,l){do{var d=vn;try{if(Ng(),Jh.current=nf,Zh){for(var m=rn.memoizedState;m!==null;){var N=m.queue;N!==null&&(N.pending=null),m=m.next}Zh=!1}if(La=0,An=Sn=rn=null,$u=!1,zu=0,ny.current=null,d===null||d.return===null){Tn=1,Ku=l,vn=null;break}e:{var T=i,L=d.return,q=d,G=l;if(l=Vn,q.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var ae=G,fe=q,ge=fe.tag;if((fe.mode&1)===0&&(ge===0||ge===11||ge===15)){var he=fe.alternate;he?(fe.updateQueue=he.updateQueue,fe.memoizedState=he.memoizedState,fe.lanes=he.lanes):(fe.updateQueue=null,fe.memoizedState=null)}var Pe=K_(L);if(Pe!==null){Pe.flags&=-257,G_(Pe,L,q,T,l),Pe.mode&1&&H_(T,ae,l),l=Pe,G=ae;var Me=l.updateQueue;if(Me===null){var Fe=new Set;Fe.add(G),l.updateQueue=Fe}else Me.add(G);break e}else{if((l&1)===0){H_(T,ae,l),dy();break e}G=Error(n(426))}}else if(Xt&&q.mode&1){var fn=K_(L);if(fn!==null){(fn.flags&65536)===0&&(fn.flags|=256),G_(fn,L,q,T,l),Eg(rc(G,q));break e}}T=G=rc(G,q),Tn!==4&&(Tn=2),Gu===null?Gu=[T]:Gu.push(T),T=L;do{switch(T.tag){case 3:T.flags|=65536,l&=-l,T.lanes|=l;var se=q_(T,G,l);y_(T,se);break e;case 1:q=G;var X=T.type,oe=T.stateNode;if((T.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(_o===null||!_o.has(oe)))){T.flags|=65536,l&=-l,T.lanes|=l;var xe=W_(T,q,l);y_(T,xe);break e}}T=T.return}while(T!==null)}SE(d)}catch($e){l=$e,vn===d&&d!==null&&(vn=d=d.return);continue}break}while(!0)}function bE(){var i=cf.current;return cf.current=nf,i===null?nf:i}function dy(){(Tn===0||Tn===3||Tn===2)&&(Tn=4),Pn===null||(Ma&268435455)===0&&(uf&268435455)===0||No(Pn,Vn)}function gf(i,l){var d=It;It|=2;var m=bE();(Pn!==i||Vn!==l)&&(ki=null,Va(i,l));do try{Ck();break}catch(N){EE(i,N)}while(!0);if(Ng(),It=d,cf.current=m,vn!==null)throw Error(n(261));return Pn=null,Vn=0,Tn}function Ck(){for(;vn!==null;)NE(vn)}function Ik(){for(;vn!==null&&!hh();)NE(vn)}function NE(i){var l=IE(i.alternate,i,Fr);i.memoizedProps=i.pendingProps,l===null?SE(i):vn=l,ny.current=null}function SE(i){var l=i;do{var d=l.alternate;if(i=l.return,(l.flags&32768)===0){if(d=wk(d,l,Fr),d!==null){vn=d;return}}else{if(d=_k(d,l),d!==null){d.flags&=32767,vn=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Tn=6,vn=null;return}}if(l=l.sibling,l!==null){vn=l;return}vn=l=i}while(l!==null);Tn===0&&(Tn=5)}function Ua(i,l,d){var m=xt,N=Jr.transition;try{Jr.transition=null,xt=1,jk(i,l,d,m)}finally{Jr.transition=N,xt=m}return null}function jk(i,l,d,m){do ac();while(Eo!==null);if((It&6)!==0)throw Error(n(327));d=i.finishedWork;var N=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var T=d.lanes|d.childLanes;if(Mt(i,T),i===Pn&&(vn=Pn=null,Vn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||hf||(hf=!0,jE(Wr,function(){return ac(),null})),T=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||T){T=Jr.transition,Jr.transition=null;var L=xt;xt=1;var q=It;It|=4,ny.current=null,bk(i,d),mE(d,i),QR(dg),uo=!!ug,dg=ug=null,i.current=d,Nk(d),Gm(),It=q,xt=L,Jr.transition=T}else i.current=d;if(hf&&(hf=!1,Eo=i,ff=N),T=i.pendingLanes,T===0&&(_o=null),mh(d.stateNode),xr(i,Vt()),l!==null)for(m=i.onRecoverableError,d=0;d<l.length;d++)N=l[d],m(N.value,{componentStack:N.stack,digest:N.digest});if(df)throw df=!1,i=iy,iy=null,i;return(ff&1)!==0&&i.tag!==0&&ac(),T=i.pendingLanes,(T&1)!==0?i===oy?Qu++:(Qu=0,oy=i):Qu=0,yo(),null}function ac(){if(Eo!==null){var i=lo(ff),l=Jr.transition,d=xt;try{if(Jr.transition=null,xt=16>i?16:i,Eo===null)var m=!1;else{if(i=Eo,Eo=null,ff=0,(It&6)!==0)throw Error(n(331));var N=It;for(It|=4,Oe=i.current;Oe!==null;){var T=Oe,L=T.child;if((Oe.flags&16)!==0){var q=T.deletions;if(q!==null){for(var G=0;G<q.length;G++){var ae=q[G];for(Oe=ae;Oe!==null;){var fe=Oe;switch(fe.tag){case 0:case 11:case 15:Hu(8,fe,T)}var ge=fe.child;if(ge!==null)ge.return=fe,Oe=ge;else for(;Oe!==null;){fe=Oe;var he=fe.sibling,Pe=fe.return;if(uE(fe),fe===ae){Oe=null;break}if(he!==null){he.return=Pe,Oe=he;break}Oe=Pe}}}var Me=T.alternate;if(Me!==null){var Fe=Me.child;if(Fe!==null){Me.child=null;do{var fn=Fe.sibling;Fe.sibling=null,Fe=fn}while(Fe!==null)}}Oe=T}}if((T.subtreeFlags&2064)!==0&&L!==null)L.return=T,Oe=L;else e:for(;Oe!==null;){if(T=Oe,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:Hu(9,T,T.return)}var se=T.sibling;if(se!==null){se.return=T.return,Oe=se;break e}Oe=T.return}}var X=i.current;for(Oe=X;Oe!==null;){L=Oe;var oe=L.child;if((L.subtreeFlags&2064)!==0&&oe!==null)oe.return=L,Oe=oe;else e:for(L=X;Oe!==null;){if(q=Oe,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:lf(9,q)}}catch($e){un(q,q.return,$e)}if(q===L){Oe=null;break e}var xe=q.sibling;if(xe!==null){xe.return=q.return,Oe=xe;break e}Oe=q.return}}if(It=N,yo(),Rr&&typeof Rr.onPostCommitFiberRoot=="function")try{Rr.onPostCommitFiberRoot(ba,i)}catch{}m=!0}return m}finally{xt=d,Jr.transition=l}}return!1}function TE(i,l,d){l=rc(d,l),l=q_(i,l,1),i=xo(i,l,1),l=ir(),i!==null&&(oo(i,1,l),xr(i,l))}function un(i,l,d){if(i.tag===3)TE(i,i,d);else for(;l!==null;){if(l.tag===3){TE(l,i,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(_o===null||!_o.has(m))){i=rc(d,i),i=W_(l,i,1),l=xo(l,i,1),i=ir(),l!==null&&(oo(l,1,i),xr(l,i));break}}l=l.return}}function Ak(i,l,d){var m=i.pingCache;m!==null&&m.delete(l),l=ir(),i.pingedLanes|=i.suspendedLanes&d,Pn===i&&(Vn&d)===d&&(Tn===4||Tn===3&&(Vn&130023424)===Vn&&500>Vt()-sy?Va(i,0):ry|=d),xr(i,l)}function CE(i,l){l===0&&((i.mode&1)===0?l=1:(l=Al,Al<<=1,(Al&130023424)===0&&(Al=4194304)));var d=ir();i=Ai(i,l),i!==null&&(oo(i,l,d),xr(i,d))}function Pk(i){var l=i.memoizedState,d=0;l!==null&&(d=l.retryLane),CE(i,d)}function Rk(i,l){var d=0;switch(i.tag){case 13:var m=i.stateNode,N=i.memoizedState;N!==null&&(d=N.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(l),CE(i,d)}var IE;IE=function(i,l,d){if(i!==null)if(i.memoizedProps!==l.pendingProps||mr.current)yr=!0;else{if((i.lanes&d)===0&&(l.flags&128)===0)return yr=!1,xk(i,l,d);yr=(i.flags&131072)!==0}else yr=!1,Xt&&(l.flags&1048576)!==0&&a_(l,qh,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;of(i,l),i=l.pendingProps;var N=Ql(l,Wn.current);tc(l,d),N=Dg(null,l,m,i,N,d);var T=Lg();return l.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,gr(m)?(T=!0,$h(l)):T=!1,l.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Ig(l),N.updater=rf,l.stateNode=N,N._reactInternals=l,zg(l,m,i,d),l=Hg(null,l,m,!0,T,d)):(l.tag=0,Xt&&T&&vg(l),sr(null,l,N,d),l=l.child),l;case 16:m=l.elementType;e:{switch(of(i,l),i=l.pendingProps,N=m._init,m=N(m._payload),l.type=m,N=l.tag=Ok(m),i=vs(m,i),N){case 0:l=Wg(null,l,m,i,d);break e;case 1:l=eE(null,l,m,i,d);break e;case 11:l=Q_(null,l,m,i,d);break e;case 14:l=Y_(null,l,m,vs(m.type,i),d);break e}throw Error(n(306,m,""))}return l;case 0:return m=l.type,N=l.pendingProps,N=l.elementType===m?N:vs(m,N),Wg(i,l,m,N,d);case 1:return m=l.type,N=l.pendingProps,N=l.elementType===m?N:vs(m,N),eE(i,l,m,N,d);case 3:e:{if(tE(l),i===null)throw Error(n(387));m=l.pendingProps,T=l.memoizedState,N=T.element,g_(i,l),Yh(l,m,null,d);var L=l.memoizedState;if(m=L.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){N=rc(Error(n(423)),l),l=nE(i,l,m,d,N);break e}else if(m!==N){N=rc(Error(n(424)),l),l=nE(i,l,m,d,N);break e}else for(Mr=po(l.stateNode.containerInfo.firstChild),Lr=l,Xt=!0,ys=null,d=p_(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Jl(),m===N){l=Ri(i,l,d);break e}sr(i,l,m,d)}l=l.child}return l;case 5:return x_(l),i===null&&_g(l),m=l.type,N=l.pendingProps,T=i!==null?i.memoizedProps:null,L=N.children,hg(m,N)?L=null:T!==null&&hg(m,T)&&(l.flags|=32),Z_(i,l),sr(i,l,L,d),l.child;case 6:return i===null&&_g(l),null;case 13:return rE(i,l,d);case 4:return jg(l,l.stateNode.containerInfo),m=l.pendingProps,i===null?l.child=Zl(l,null,m,d):sr(i,l,m,d),l.child;case 11:return m=l.type,N=l.pendingProps,N=l.elementType===m?N:vs(m,N),Q_(i,l,m,N,d);case 7:return sr(i,l,l.pendingProps,d),l.child;case 8:return sr(i,l,l.pendingProps.children,d),l.child;case 12:return sr(i,l,l.pendingProps.children,d),l.child;case 10:e:{if(m=l.type._context,N=l.pendingProps,T=l.memoizedProps,L=N.value,Ut(Kh,m._currentValue),m._currentValue=L,T!==null)if(gs(T.value,L)){if(T.children===N.children&&!mr.current){l=Ri(i,l,d);break e}}else for(T=l.child,T!==null&&(T.return=l);T!==null;){var q=T.dependencies;if(q!==null){L=T.child;for(var G=q.firstContext;G!==null;){if(G.context===m){if(T.tag===1){G=Pi(-1,d&-d),G.tag=2;var ae=T.updateQueue;if(ae!==null){ae=ae.shared;var fe=ae.pending;fe===null?G.next=G:(G.next=fe.next,fe.next=G),ae.pending=G}}T.lanes|=d,G=T.alternate,G!==null&&(G.lanes|=d),Tg(T.return,d,l),q.lanes|=d;break}G=G.next}}else if(T.tag===10)L=T.type===l.type?null:T.child;else if(T.tag===18){if(L=T.return,L===null)throw Error(n(341));L.lanes|=d,q=L.alternate,q!==null&&(q.lanes|=d),Tg(L,d,l),L=T.sibling}else L=T.child;if(L!==null)L.return=T;else for(L=T;L!==null;){if(L===l){L=null;break}if(T=L.sibling,T!==null){T.return=L.return,L=T;break}L=L.return}T=L}sr(i,l,N.children,d),l=l.child}return l;case 9:return N=l.type,m=l.pendingProps.children,tc(l,d),N=Yr(N),m=m(N),l.flags|=1,sr(i,l,m,d),l.child;case 14:return m=l.type,N=vs(m,l.pendingProps),N=vs(m.type,N),Y_(i,l,m,N,d);case 15:return X_(i,l,l.type,l.pendingProps,d);case 17:return m=l.type,N=l.pendingProps,N=l.elementType===m?N:vs(m,N),of(i,l),l.tag=1,gr(m)?(i=!0,$h(l)):i=!1,tc(l,d),z_(l,m,N),zg(l,m,N,d),Hg(null,l,m,!0,i,d);case 19:return iE(i,l,d);case 22:return J_(i,l,d)}throw Error(n(156,l.tag))};function jE(i,l){return Il(i,l)}function kk(i,l,d,m){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(i,l,d,m){return new kk(i,l,d,m)}function hy(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ok(i){if(typeof i=="function")return hy(i)?1:0;if(i!=null){if(i=i.$$typeof,i===V)return 11;if(i===Q)return 14}return 2}function So(i,l){var d=i.alternate;return d===null?(d=Zr(i.tag,l,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=l,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,l=i.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function yf(i,l,d,m,N,T){var L=2;if(m=i,typeof i=="function")hy(i)&&(L=1);else if(typeof i=="string")L=5;else e:switch(i){case P:return $a(d.children,N,T,l);case R:L=8,N|=8;break;case D:return i=Zr(12,d,l,N|2),i.elementType=D,i.lanes=T,i;case F:return i=Zr(13,d,l,N),i.elementType=F,i.lanes=T,i;case H:return i=Zr(19,d,l,N),i.elementType=H,i.lanes=T,i;case Z:return vf(d,N,T,l);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:L=10;break e;case k:L=9;break e;case V:L=11;break e;case Q:L=14;break e;case K:L=16,m=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return l=Zr(L,d,l,N),l.elementType=i,l.type=m,l.lanes=T,l}function $a(i,l,d,m){return i=Zr(7,i,m,l),i.lanes=d,i}function vf(i,l,d,m){return i=Zr(22,i,m,l),i.elementType=Z,i.lanes=d,i.stateNode={isHidden:!1},i}function fy(i,l,d){return i=Zr(6,i,null,l),i.lanes=d,i}function py(i,l,d){return l=Zr(4,i.children!==null?i.children:[],i.key,l),l.lanes=d,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}function Dk(i,l,d,m,N){this.tag=l,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=io(0),this.expirationTimes=io(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=io(0),this.identifierPrefix=m,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function my(i,l,d,m,N,T,L,q,G){return i=new Dk(i,l,d,q,G),l===1?(l=1,T===!0&&(l|=8)):l=0,T=Zr(3,null,null,l),i.current=T,T.stateNode=i,T.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ig(T),i}function Lk(i,l,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:m==null?null:""+m,children:i,containerInfo:l,implementation:d}}function AE(i){if(!i)return go;i=i._reactInternals;e:{if(cs(i)!==i||i.tag!==1)throw Error(n(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(gr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(i.tag===1){var d=i.type;if(gr(d))return s_(i,d,l)}return l}function PE(i,l,d,m,N,T,L,q,G){return i=my(d,m,!0,i,N,T,L,q,G),i.context=AE(null),d=i.current,m=ir(),N=bo(d),T=Pi(m,N),T.callback=l??null,xo(d,T,N),i.current.lanes=N,oo(i,N,m),xr(i,m),i}function xf(i,l,d,m){var N=l.current,T=ir(),L=bo(N);return d=AE(d),l.context===null?l.context=d:l.pendingContext=d,l=Pi(T,L),l.payload={element:i},m=m===void 0?null:m,m!==null&&(l.callback=m),i=xo(N,l,L),i!==null&&(_s(i,N,L,T),Qh(i,N,L)),L}function wf(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function RE(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<l?d:l}}function gy(i,l){RE(i,l),(i=i.alternate)&&RE(i,l)}function Mk(){return null}var kE=typeof reportError=="function"?reportError:function(i){console.error(i)};function yy(i){this._internalRoot=i}_f.prototype.render=yy.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(n(409));xf(i,l,null,null)},_f.prototype.unmount=yy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;Fa(function(){xf(null,i,null,null)}),l[Ti]=null}};function _f(i){this._internalRoot=i}_f.prototype.unstable_scheduleHydration=function(i){if(i){var l=wh();i={blockedOn:null,target:i,priority:l};for(var d=0;d<Ks.length&&l!==0&&l<Ks[d].priority;d++);Ks.splice(d,0,i),d===0&&bh(i)}};function vy(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Ef(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function OE(){}function Fk(i,l,d,m,N){if(N){if(typeof m=="function"){var T=m;m=function(){var ae=wf(L);T.call(ae)}}var L=PE(l,m,i,0,null,!1,!1,"",OE);return i._reactRootContainer=L,i[Ti]=L.current,ku(i.nodeType===8?i.parentNode:i),Fa(),L}for(;N=i.lastChild;)i.removeChild(N);if(typeof m=="function"){var q=m;m=function(){var ae=wf(G);q.call(ae)}}var G=my(i,0,!1,null,null,!1,!1,"",OE);return i._reactRootContainer=G,i[Ti]=G.current,ku(i.nodeType===8?i.parentNode:i),Fa(function(){xf(l,G,d,m)}),G}function bf(i,l,d,m,N){var T=d._reactRootContainer;if(T){var L=T;if(typeof N=="function"){var q=N;N=function(){var G=wf(L);q.call(G)}}xf(l,L,i,N)}else L=Fk(d,l,i,N,m);return wf(L)}vh=function(i){switch(i.tag){case 3:var l=i.stateNode;if(l.current.memoizedState.isDehydrated){var d=so(l.pendingLanes);d!==0&&(ao(l,d|1),xr(l,Vt()),(It&6)===0&&(oc=Vt()+500,yo()))}break;case 13:Fa(function(){var m=Ai(i,1);if(m!==null){var N=ir();_s(m,i,1,N)}}),gy(i,1)}},Pl=function(i){if(i.tag===13){var l=Ai(i,134217728);if(l!==null){var d=ir();_s(l,i,134217728,d)}gy(i,134217728)}},xh=function(i){if(i.tag===13){var l=bo(i),d=Ai(i,l);if(d!==null){var m=ir();_s(d,i,l,m)}gy(i,l)}},wh=function(){return xt},_h=function(i,l){var d=xt;try{return xt=i,l()}finally{xt=d}},yt=function(i,l,d){switch(l){case"input":if(zn(i,d),l=d.name,d.type==="radio"&&l!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==i&&m.form===i.form){var N=Vh(m);if(!N)throw Error(n(90));it(m),zn(m,N)}}}break;case"textarea":Us(i,d);break;case"select":l=d.value,l!=null&&Ar(i,!!d.multiple,l,!1)}},Ct=cy,lt=Fa;var Vk={usingClientEntryPoint:!1,Events:[Lu,Kl,Vh,ye,Ue,cy]},Yu={findFiberByHostInstance:Aa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Uk={bundleType:Yu.bundleType,version:Yu.version,rendererPackageName:Yu.rendererPackageName,rendererConfig:Yu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=yu(i),i===null?null:i.stateNode},findFiberByHostInstance:Yu.findFiberByHostInstance||Mk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{ba=Nf.inject(Uk),Rr=Nf}catch{}}return wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vk,wr.createPortal=function(i,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vy(l))throw Error(n(200));return Lk(i,l,null,d)},wr.createRoot=function(i,l){if(!vy(i))throw Error(n(299));var d=!1,m="",N=kE;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),l=my(i,1,!1,null,null,d,!1,m,N),i[Ti]=l.current,ku(i.nodeType===8?i.parentNode:i),new yy(l)},wr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=yu(l),i=i===null?null:i.stateNode,i},wr.flushSync=function(i){return Fa(i)},wr.hydrate=function(i,l,d){if(!Ef(l))throw Error(n(200));return bf(null,i,l,!0,d)},wr.hydrateRoot=function(i,l,d){if(!vy(i))throw Error(n(405));var m=d!=null&&d.hydratedSources||null,N=!1,T="",L=kE;if(d!=null&&(d.unstable_strictMode===!0&&(N=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(L=d.onRecoverableError)),l=PE(l,null,i,1,d??null,N,!1,T,L),i[Ti]=l.current,ku(i),m)for(i=0;i<m.length;i++)d=m[i],N=d._getVersion,N=N(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,N]:l.mutableSourceEagerHydrationData.push(d,N);return new _f(l)},wr.render=function(i,l,d){if(!Ef(l))throw Error(n(200));return bf(null,i,l,!1,d)},wr.unmountComponentAtNode=function(i){if(!Ef(i))throw Error(n(40));return i._reactRootContainer?(Fa(function(){bf(null,null,i,!1,function(){i._reactRootContainer=null,i[Ti]=null})}),!0):!1},wr.unstable_batchedUpdates=cy,wr.unstable_renderSubtreeIntoContainer=function(i,l,d,m){if(!Ef(d))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return bf(i,l,d,!1,m)},wr.version="18.3.1-next-f1338f8080-20240426",wr}var HE;function rS(){if(HE)return Ny.exports;HE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ny.exports=s2(),Ny.exports}var pl=rS();const Gp=tS(pl);function He(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function i2(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function sS(...t){return e=>t.forEach(n=>i2(n,e))}function jt(...t){return E.useCallback(sS(...t),t)}function Xi(t,e=[]){let n=[];function r(a,c){const u=E.createContext(c),h=n.length;n=[...n,c];function f(y){const{scope:v,children:w,...b}=y,_=(v==null?void 0:v[t][h])||u,x=E.useMemo(()=>b,Object.values(b));return o.jsx(_.Provider,{value:x,children:w})}function g(y,v){const w=(v==null?void 0:v[t][h])||u,b=E.useContext(w);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return f.displayName=a+"Provider",[f,g]}const s=()=>{const a=n.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[t])||a;return E.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[r,o2(s,...e)]}function o2(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const y=h(a)[`__scope${f}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var nl=E.forwardRef((t,e)=>{const{children:n,...r}=t,s=E.Children.toArray(n),a=s.find(a2);if(a){const c=a.props.children,u=s.map(h=>h===a?E.Children.count(c)>1?E.Children.only(null):E.isValidElement(c)?c.props.children:null:h);return o.jsx(uv,{...r,ref:e,children:E.isValidElement(c)?E.cloneElement(c,void 0,u):null})}return o.jsx(uv,{...r,ref:e,children:n})});nl.displayName="Slot";var uv=E.forwardRef((t,e)=>{const{children:n,...r}=t;if(E.isValidElement(n)){const s=c2(n);return E.cloneElement(n,{...l2(r,n.props),ref:e?sS(e,s):s})}return E.Children.count(n)>1?E.Children.only(null):null});uv.displayName="SlotClone";var iS=({children:t})=>o.jsx(o.Fragment,{children:t});function a2(t){return E.isValidElement(t)&&t.type===iS}function l2(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...u)=>{a(...u),s(...u)}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function c2(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ax(t){const e=t+"CollectionProvider",[n,r]=Xi(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),c=w=>{const{scope:b,children:_}=w,x=_e.useRef(null),j=_e.useRef(new Map).current;return o.jsx(s,{scope:b,itemMap:j,collectionRef:x,children:_})};c.displayName=e;const u=t+"CollectionSlot",h=_e.forwardRef((w,b)=>{const{scope:_,children:x}=w,j=a(u,_),C=jt(b,j.collectionRef);return o.jsx(nl,{ref:C,children:x})});h.displayName=u;const f=t+"CollectionItemSlot",g="data-radix-collection-item",y=_e.forwardRef((w,b)=>{const{scope:_,children:x,...j}=w,C=_e.useRef(null),I=jt(b,C),M=a(f,_);return _e.useEffect(()=>(M.itemMap.set(C,{ref:C,...j}),()=>void M.itemMap.delete(C))),o.jsx(nl,{[g]:"",ref:I,children:x})});y.displayName=f;function v(w){const b=a(t+"CollectionConsumer",w);return _e.useCallback(()=>{const x=b.collectionRef.current;if(!x)return[];const j=Array.from(x.querySelectorAll(`[${g}]`));return Array.from(b.itemMap.values()).sort((M,U)=>j.indexOf(M.ref.current)-j.indexOf(U.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:c,Slot:h,ItemSlot:y},v,r]}var u2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Je=u2.reduce((t,e)=>{const n=E.forwardRef((r,s)=>{const{asChild:a,...c}=r,u=a?nl:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(u,{...c,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Qp(t,e){t&&pl.flushSync(()=>t.dispatchEvent(e))}function In(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Px(t,e=globalThis==null?void 0:globalThis.document){const n=In(t);E.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var d2="DismissableLayer",dv="dismissableLayer.update",h2="dismissableLayer.pointerDownOutside",f2="dismissableLayer.focusOutside",KE,oS=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),aS=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=t,f=E.useContext(oS),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=E.useState({}),b=jt(e,P=>y(P)),_=Array.from(f.layers),[x]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),j=_.indexOf(x),C=g?_.indexOf(g):-1,I=f.layersWithOutsidePointerEventsDisabled.size>0,M=C>=j,U=m2(P=>{const R=P.target,D=[...f.branches].some(O=>O.contains(R));!M||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},v),z=g2(P=>{const R=P.target;[...f.branches].some(O=>O.contains(R))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},v);return Px(P=>{C===f.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},v),E.useEffect(()=>{if(g)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(KE=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),GE(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=KE)}},[g,v,n,f]),E.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),GE())},[g,f]),E.useEffect(()=>{const P=()=>w({});return document.addEventListener(dv,P),()=>document.removeEventListener(dv,P)},[]),o.jsx(Je.div,{...h,ref:b,style:{pointerEvents:I?M?"auto":"none":void 0,...t.style},onFocusCapture:He(t.onFocusCapture,z.onFocusCapture),onBlurCapture:He(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:He(t.onPointerDownCapture,U.onPointerDownCapture)})});aS.displayName=d2;var p2="DismissableLayerBranch",lS=E.forwardRef((t,e)=>{const n=E.useContext(oS),r=E.useRef(null),s=jt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(Je.div,{...t,ref:s})});lS.displayName=p2;function m2(t,e=globalThis==null?void 0:globalThis.document){const n=In(t),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){cS(h2,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function g2(t,e=globalThis==null?void 0:globalThis.document){const n=In(t),r=E.useRef(!1);return E.useEffect(()=>{const s=a=>{a.target&&!r.current&&cS(f2,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function GE(){const t=new CustomEvent(dv);document.dispatchEvent(t)}function cS(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Qp(s,a):s.dispatchEvent(a)}var y2=aS,v2=lS,en=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},x2="Portal",uS=E.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,a]=E.useState(!1);en(()=>a(!0),[]);const c=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Gp.createPortal(o.jsx(Je.div,{...r,ref:e}),c):null});uS.displayName=x2;function w2(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var Rx=t=>{const{present:e,children:n}=t,r=_2(e),s=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),a=jt(r.ref,E2(s));return typeof n=="function"||r.isPresent?E.cloneElement(s,{ref:a}):null};Rx.displayName="Presence";function _2(t){const[e,n]=E.useState(),r=E.useRef({}),s=E.useRef(t),a=E.useRef("none"),c=t?"mounted":"unmounted",[u,h]=w2(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const f=Tf(r.current);a.current=u==="mounted"?f:"none"},[u]),en(()=>{const f=r.current,g=s.current;if(g!==t){const v=a.current,w=Tf(f);t?h("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(g&&v!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),en(()=>{if(e){const f=y=>{const w=Tf(r.current).includes(y.animationName);y.target===e&&w&&pl.flushSync(()=>h("ANIMATION_END"))},g=y=>{y.target===e&&(a.current=Tf(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function Tf(t){return(t==null?void 0:t.animationName)||"none"}function E2(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function rl({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=b2({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:r,u=In(n),h=E.useCallback(f=>{if(a){const y=typeof f=="function"?f(t):f;y!==t&&u(y)}else s(f)},[a,t,s,u]);return[c,h]}function b2({defaultProp:t,onChange:e}){const n=E.useState(t),[r]=n,s=E.useRef(r),a=In(e);return E.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),n}var N2="VisuallyHidden",Hd=E.forwardRef((t,e)=>o.jsx(Je.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Hd.displayName=N2;var S2=Hd,kx="ToastProvider",[Ox,T2,C2]=Ax("Toast"),[dS,Gq]=Xi("Toast",[C2]),[I2,Yp]=dS(kx),hS=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:c}=t,[u,h]=E.useState(null),[f,g]=E.useState(0),y=E.useRef(!1),v=E.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${kx}\`. Expected non-empty \`string\`.`),o.jsx(Ox.Provider,{scope:e,children:o.jsx(I2,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:f,viewport:u,onViewportChange:h,onToastAdd:E.useCallback(()=>g(w=>w+1),[]),onToastRemove:E.useCallback(()=>g(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:v,children:c})})};hS.displayName=kx;var fS="ToastViewport",j2=["F8"],hv="toast.viewportPause",fv="toast.viewportResume",pS=E.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=j2,label:s="Notifications ({hotkey})",...a}=t,c=Yp(fS,n),u=T2(n),h=E.useRef(null),f=E.useRef(null),g=E.useRef(null),y=E.useRef(null),v=jt(e,y,c.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=c.toastCount>0;E.useEffect(()=>{const x=j=>{var I;r.every(M=>j[M]||j.code===M)&&((I=y.current)==null||I.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),E.useEffect(()=>{const x=h.current,j=y.current;if(b&&x&&j){const C=()=>{if(!c.isClosePausedRef.current){const z=new CustomEvent(hv);j.dispatchEvent(z),c.isClosePausedRef.current=!0}},I=()=>{if(c.isClosePausedRef.current){const z=new CustomEvent(fv);j.dispatchEvent(z),c.isClosePausedRef.current=!1}},M=z=>{!x.contains(z.relatedTarget)&&I()},U=()=>{x.contains(document.activeElement)||I()};return x.addEventListener("focusin",C),x.addEventListener("focusout",M),x.addEventListener("pointermove",C),x.addEventListener("pointerleave",U),window.addEventListener("blur",C),window.addEventListener("focus",I),()=>{x.removeEventListener("focusin",C),x.removeEventListener("focusout",M),x.removeEventListener("pointermove",C),x.removeEventListener("pointerleave",U),window.removeEventListener("blur",C),window.removeEventListener("focus",I)}}},[b,c.isClosePausedRef]);const _=E.useCallback(({tabbingDirection:x})=>{const C=u().map(I=>{const M=I.ref.current,U=[M,...z2(M)];return x==="forwards"?U:U.reverse()});return(x==="forwards"?C.reverse():C).flat()},[u]);return E.useEffect(()=>{const x=y.current;if(x){const j=C=>{var U,z,P;const I=C.altKey||C.ctrlKey||C.metaKey;if(C.key==="Tab"&&!I){const R=document.activeElement,D=C.shiftKey;if(C.target===x&&D){(U=f.current)==null||U.focus();return}const V=_({tabbingDirection:D?"backwards":"forwards"}),F=V.findIndex(H=>H===R);Cy(V.slice(F+1))?C.preventDefault():D?(z=f.current)==null||z.focus():(P=g.current)==null||P.focus()}};return x.addEventListener("keydown",j),()=>x.removeEventListener("keydown",j)}},[u,_]),o.jsxs(v2,{ref:h,role:"region","aria-label":s.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&o.jsx(pv,{ref:f,onFocusFromOutsideViewport:()=>{const x=_({tabbingDirection:"forwards"});Cy(x)}}),o.jsx(Ox.Slot,{scope:n,children:o.jsx(Je.ol,{tabIndex:-1,...a,ref:v})}),b&&o.jsx(pv,{ref:g,onFocusFromOutsideViewport:()=>{const x=_({tabbingDirection:"backwards"});Cy(x)}})]})});pS.displayName=fS;var mS="ToastFocusProxy",pv=E.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,a=Yp(mS,n);return o.jsx(Hd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:c=>{var f;const u=c.relatedTarget;!((f=a.viewport)!=null&&f.contains(u))&&r()}})});pv.displayName=mS;var Xp="Toast",A2="toast.swipeStart",P2="toast.swipeMove",R2="toast.swipeCancel",k2="toast.swipeEnd",gS=E.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...c}=t,[u=!0,h]=rl({prop:r,defaultProp:s,onChange:a});return o.jsx(Rx,{present:n||u,children:o.jsx(L2,{open:u,...c,ref:e,onClose:()=>h(!1),onPause:In(t.onPause),onResume:In(t.onResume),onSwipeStart:He(t.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:He(t.onSwipeMove,f=>{const{x:g,y}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:He(t.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:He(t.onSwipeEnd,f=>{const{x:g,y}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),h(!1)})})})});gS.displayName=Xp;var[O2,D2]=dS(Xp,{onClose(){}}),L2=E.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:c,onEscapeKeyDown:u,onPause:h,onResume:f,onSwipeStart:g,onSwipeMove:y,onSwipeCancel:v,onSwipeEnd:w,...b}=t,_=Yp(Xp,n),[x,j]=E.useState(null),C=jt(e,H=>j(H)),I=E.useRef(null),M=E.useRef(null),U=s||_.duration,z=E.useRef(0),P=E.useRef(U),R=E.useRef(0),{onToastAdd:D,onToastRemove:O}=_,k=In(()=>{var Q;(x==null?void 0:x.contains(document.activeElement))&&((Q=_.viewport)==null||Q.focus()),c()}),V=E.useCallback(H=>{!H||H===1/0||(window.clearTimeout(R.current),z.current=new Date().getTime(),R.current=window.setTimeout(k,H))},[k]);E.useEffect(()=>{const H=_.viewport;if(H){const Q=()=>{V(P.current),f==null||f()},K=()=>{const Z=new Date().getTime()-z.current;P.current=P.current-Z,window.clearTimeout(R.current),h==null||h()};return H.addEventListener(hv,K),H.addEventListener(fv,Q),()=>{H.removeEventListener(hv,K),H.removeEventListener(fv,Q)}}},[_.viewport,U,h,f,V]),E.useEffect(()=>{a&&!_.isClosePausedRef.current&&V(U)},[a,U,_.isClosePausedRef,V]),E.useEffect(()=>(D(),()=>O()),[D,O]);const F=E.useMemo(()=>x?bS(x):null,[x]);return _.viewport?o.jsxs(o.Fragment,{children:[F&&o.jsx(M2,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:F}),o.jsx(O2,{scope:n,onClose:k,children:pl.createPortal(o.jsx(Ox.ItemSlot,{scope:n,children:o.jsx(y2,{asChild:!0,onEscapeKeyDown:He(u,()=>{_.isFocusedToastEscapeKeyDownRef.current||k(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(Je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":_.swipeDirection,...b,ref:C,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:He(t.onKeyDown,H=>{H.key==="Escape"&&(u==null||u(H.nativeEvent),H.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:He(t.onPointerDown,H=>{H.button===0&&(I.current={x:H.clientX,y:H.clientY})}),onPointerMove:He(t.onPointerMove,H=>{if(!I.current)return;const Q=H.clientX-I.current.x,K=H.clientY-I.current.y,Z=!!M.current,W=["left","right"].includes(_.swipeDirection),Y=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,ne=W?Y(0,Q):0,B=W?0:Y(0,K),ee=H.pointerType==="touch"?10:2,ue={x:ne,y:B},Te={originalEvent:H,delta:ue};Z?(M.current=ue,Cf(P2,y,Te,{discrete:!1})):QE(ue,_.swipeDirection,ee)?(M.current=ue,Cf(A2,g,Te,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(Q)>ee||Math.abs(K)>ee)&&(I.current=null)}),onPointerUp:He(t.onPointerUp,H=>{const Q=M.current,K=H.target;if(K.hasPointerCapture(H.pointerId)&&K.releasePointerCapture(H.pointerId),M.current=null,I.current=null,Q){const Z=H.currentTarget,W={originalEvent:H,delta:Q};QE(Q,_.swipeDirection,_.swipeThreshold)?Cf(k2,w,W,{discrete:!0}):Cf(R2,v,W,{discrete:!0}),Z.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),M2=t=>{const{__scopeToast:e,children:n,...r}=t,s=Yp(Xp,e),[a,c]=E.useState(!1),[u,h]=E.useState(!1);return U2(()=>c(!0)),E.useEffect(()=>{const f=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(f)},[]),u?null:o.jsx(uS,{asChild:!0,children:o.jsx(Hd,{...r,children:a&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},F2="ToastTitle",yS=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(Je.div,{...r,ref:e})});yS.displayName=F2;var V2="ToastDescription",vS=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(Je.div,{...r,ref:e})});vS.displayName=V2;var xS="ToastAction",wS=E.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?o.jsx(ES,{altText:n,asChild:!0,children:o.jsx(Dx,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${xS}\`. Expected non-empty \`string\`.`),null)});wS.displayName=xS;var _S="ToastClose",Dx=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=D2(_S,n);return o.jsx(ES,{asChild:!0,children:o.jsx(Je.button,{type:"button",...r,ref:e,onClick:He(t.onClick,s.onClose)})})});Dx.displayName=_S;var ES=E.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return o.jsx(Je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function bS(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),$2(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...bS(r))}}),e}function Cf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Qp(s,a):s.dispatchEvent(a)}var QE=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),a=r>s;return e==="left"||e==="right"?a&&r>n:!a&&s>n};function U2(t=()=>{}){const e=In(t);en(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function $2(t){return t.nodeType===t.ELEMENT_NODE}function z2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Cy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var B2=hS,NS=pS,SS=gS,TS=yS,CS=vS,IS=wS,jS=Dx;function AS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=AS(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function PS(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=AS(t))&&(r&&(r+=" "),r+=e);return r}const YE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,XE=PS,Kd=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return XE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,c=Object.keys(s).map(f=>{const g=n==null?void 0:n[f],y=a==null?void 0:a[f];if(g===null)return null;const v=YE(g)||YE(y);return s[f][v]}),u=n&&Object.entries(n).reduce((f,g)=>{let[y,v]=g;return v===void 0||(f[y]=v),f},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,g)=>{let{class:y,className:v,...w}=g;return Object.entries(w).every(b=>{let[_,x]=b;return Array.isArray(x)?x.includes({...a,...u}[_]):{...a,...u}[_]===x})?[...f,y,v]:f},[]);return XE(t,c,h,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RS=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:c,...u},h)=>E.createElement("svg",{ref:h,...W2,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:RS("lucide",s),...u},[...c.map(([f,g])=>E.createElement(f,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(t,e)=>{const n=E.forwardRef(({className:r,...s},a)=>E.createElement(H2,{ref:a,iconNode:e,className:RS(`lucide-${q2(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=Be("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=Be("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=Be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=Be("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=Be("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=Be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=Be("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=Be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=Be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=Be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=Be("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=Be("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=Be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=Be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=Be("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=Be("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=Be("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=Be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=Be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=Be("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=Be("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=Be("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Be("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=Be("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=Be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=Be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=Be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=Be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=Be("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=Be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=Be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=Be("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=Be("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=Be("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=Be("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=Be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=Be("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=Be("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=Be("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=Be("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=Be("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=Be("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=Be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=Be("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=Be("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=Be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=Be("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Mx="-",pO=t=>{const e=gO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{const u=c.split(Mx);return u[0]===""&&u.length!==1&&u.shift(),FS(u,e)||mO(c)},getConflictingClassGroupIds:(c,u)=>{const h=n[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},FS=(t,e)=>{var c;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?FS(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(Mx);return(c=e.validators.find(({validator:u})=>u(a)))==null?void 0:c.classGroupId},eb=/^\[(.+)\]$/,mO=t=>{if(eb.test(t)){const e=eb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},gO=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return vO(Object.entries(t.classGroups),n).forEach(([a,c])=>{vv(c,r,a,e)}),r},vv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:tb(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(yO(s)){vv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,c])=>{vv(c,tb(e,a),n,r)})})},tb=(t,e)=>{let n=t;return e.split(Mx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},yO=t=>t.isThemeGetter,vO=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([c,u])=>[e+c,u])):a);return[n,s]}):t,xO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,c)=>{n.set(a,c),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let c=n.get(a);if(c!==void 0)return c;if((c=r.get(a))!==void 0)return s(a,c),c},set(a,c){n.has(a)?n.set(a,c):s(a,c)}}},VS="!",wO=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,c=u=>{const h=[];let f=0,g=0,y;for(let x=0;x<u.length;x++){let j=u[x];if(f===0){if(j===s&&(r||u.slice(x,x+a)===e)){h.push(u.slice(g,x)),g=x+a;continue}if(j==="/"){y=x;continue}}j==="["?f++:j==="]"&&f--}const v=h.length===0?u:u.substring(g),w=v.startsWith(VS),b=w?v.substring(1):v,_=y&&y>g?y-g:void 0;return{modifiers:h,hasImportantModifier:w,baseClassName:b,maybePostfixModifierPosition:_}};return n?u=>n({className:u,parseClassName:c}):c},_O=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},EO=t=>({cache:xO(t.cacheSize),parseClassName:wO(t),...pO(t)}),bO=/\s+/,NO=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],c=t.trim().split(bO);let u="";for(let h=c.length-1;h>=0;h-=1){const f=c[h],{modifiers:g,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:w}=n(f);let b=!!w,_=r(b?v.substring(0,w):v);if(!_){if(!b){u=f+(u.length>0?" "+u:u);continue}if(_=r(v),!_){u=f+(u.length>0?" "+u:u);continue}b=!1}const x=_O(g).join(":"),j=y?x+VS:x,C=j+_;if(a.includes(C))continue;a.push(C);const I=s(_,b);for(let M=0;M<I.length;++M){const U=I[M];a.push(j+U)}u=f+(u.length>0?" "+u:u)}return u};function SO(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=US(e))&&(r&&(r+=" "),r+=n);return r}const US=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=US(t[r]))&&(n&&(n+=" "),n+=e);return n};function TO(t,...e){let n,r,s,a=c;function c(h){const f=e.reduce((g,y)=>y(g),t());return n=EO(f),r=n.cache.get,s=n.cache.set,a=u,u(h)}function u(h){const f=r(h);if(f)return f;const g=NO(h,n);return s(h,g),g}return function(){return a(SO.apply(null,arguments))}}const Kt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},$S=/^\[(?:([a-z-]+):)?(.+)\]$/i,CO=/^\d+\/\d+$/,IO=new Set(["px","full","screen"]),jO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,AO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,RO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Oi=t=>wc(t)||IO.has(t)||CO.test(t),Co=t=>tu(t,"length",$O),wc=t=>!!t&&!Number.isNaN(Number(t)),jy=t=>tu(t,"number",wc),Ju=t=>!!t&&Number.isInteger(Number(t)),OO=t=>t.endsWith("%")&&wc(t.slice(0,-1)),ct=t=>$S.test(t),Io=t=>jO.test(t),DO=new Set(["length","size","percentage"]),LO=t=>tu(t,DO,zS),MO=t=>tu(t,"position",zS),FO=new Set(["image","url"]),VO=t=>tu(t,FO,BO),UO=t=>tu(t,"",zO),Zu=()=>!0,tu=(t,e,n)=>{const r=$S.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},$O=t=>AO.test(t)&&!PO.test(t),zS=()=>!1,zO=t=>RO.test(t),BO=t=>kO.test(t),qO=()=>{const t=Kt("colors"),e=Kt("spacing"),n=Kt("blur"),r=Kt("brightness"),s=Kt("borderColor"),a=Kt("borderRadius"),c=Kt("borderSpacing"),u=Kt("borderWidth"),h=Kt("contrast"),f=Kt("grayscale"),g=Kt("hueRotate"),y=Kt("invert"),v=Kt("gap"),w=Kt("gradientColorStops"),b=Kt("gradientColorStopPositions"),_=Kt("inset"),x=Kt("margin"),j=Kt("opacity"),C=Kt("padding"),I=Kt("saturate"),M=Kt("scale"),U=Kt("sepia"),z=Kt("skew"),P=Kt("space"),R=Kt("translate"),D=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",ct,e],V=()=>[ct,e],F=()=>["",Oi,Co],H=()=>["auto",wc,ct],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",ct],ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[wc,ct];return{cacheSize:500,separator:":",theme:{colors:[Zu],spacing:[Oi,Co],blur:["none","",Io,ct],brightness:B(),borderColor:[t],borderRadius:["none","","full",Io,ct],borderSpacing:V(),borderWidth:F(),contrast:B(),grayscale:Y(),hueRotate:B(),invert:Y(),gap:V(),gradientColorStops:[t],gradientColorStopPositions:[OO,Co],inset:k(),margin:k(),opacity:B(),padding:V(),saturate:B(),scale:B(),sepia:Y(),skew:B(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",ct]}],container:["container"],columns:[{columns:[Io]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),ct]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ju,ct]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ct]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",Ju,ct]}],"grid-cols":[{"grid-cols":[Zu]}],"col-start-end":[{col:["auto",{span:["full",Ju,ct]},ct]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Zu]}],"row-start-end":[{row:["auto",{span:[Ju,ct]},ct]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ct]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ct]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ct,e]}],"min-w":[{"min-w":[ct,e,"min","max","fit"]}],"max-w":[{"max-w":[ct,e,"none","full","min","max","fit","prose",{screen:[Io]},Io]}],h:[{h:[ct,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ct,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ct,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ct,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Io,Co]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",jy]}],"font-family":[{font:[Zu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ct]}],"line-clamp":[{"line-clamp":["none",wc,jy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Oi,ct]}],"list-image":[{"list-image":["none",ct]}],"list-style-type":[{list:["none","disc","decimal",ct]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Oi,Co]}],"underline-offset":[{"underline-offset":["auto",Oi,ct]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ct]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ct]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),MO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",LO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},VO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:K()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Oi,ct]}],"outline-w":[{outline:[Oi,Co]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[Oi,Co]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Io,UO]}],"shadow-color":[{shadow:[Zu]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",Io,ct]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[y]}],saturate:[{saturate:[I]}],sepia:[{sepia:[U]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[U]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ct]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",ct]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",ct]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[Ju,ct]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ct]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ct]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ct]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Oi,Co,jy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},WO=TO(qO);function Qe(...t){return WO(PS(t))}function HO(t){if(!t||typeof t!="string")return null;const e=t.trim();try{const n=e.match(/https?:\/\/(?:drive\.google\.com)\/(?:file\/d\/([a-zA-Z0-9_-]+)\/view|open\?id=([a-zA-Z0-9_-]+))/i);if(n){const r=n[1]||n[2];if(r)return`https://drive.google.com/uc?export=view&id=${r}`}if(/dropbox\.com\//i.test(e)){if(e.includes("dl=0"))return e.replace("dl=0","dl=1");if(!e.includes("dl="))return e+"?dl=1"}return e}catch{return e}}const KO=B2,BS=E.forwardRef(({className:t,...e},n)=>o.jsx(NS,{ref:n,className:Qe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));BS.displayName=NS.displayName;const GO=Kd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),qS=E.forwardRef(({className:t,variant:e,...n},r)=>o.jsx(SS,{ref:r,className:Qe(GO({variant:e}),t),...n}));qS.displayName=SS.displayName;const QO=E.forwardRef(({className:t,...e},n)=>o.jsx(IS,{ref:n,className:Qe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));QO.displayName=IS.displayName;const WS=E.forwardRef(({className:t,...e},n)=>o.jsx(jS,{ref:n,className:Qe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(zc,{className:"h-4 w-4"})}));WS.displayName=jS.displayName;const HS=E.forwardRef(({className:t,...e},n)=>o.jsx(TS,{ref:n,className:Qe("text-sm font-semibold",t),...e}));HS.displayName=TS.displayName;const KS=E.forwardRef(({className:t,...e},n)=>o.jsx(CS,{ref:n,className:Qe("text-sm opacity-90",t),...e}));KS.displayName=CS.displayName;function YO(){const{toasts:t}=t2();return o.jsxs(KO,{children:[t.map(function({id:e,title:n,description:r,action:s,...a}){return o.jsxs(qS,{...a,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(HS,{children:n}),r&&o.jsx(KS,{children:r})]}),s,o.jsx(WS,{})]},e)}),o.jsx(BS,{})]})}var If={},nb;function XO(){if(nb)return If;nb=1;var t=rS();return If.createRoot=t.createRoot,If.hydrateRoot=t.hydrateRoot,If}var JO=XO(),rb=["light","dark"],ZO="(prefers-color-scheme: dark)",eD=E.createContext(void 0),tD={setTheme:t=>{},themes:[]},nD=()=>{var t;return(t=E.useContext(eD))!=null?t:tD};E.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:c,attrs:u,nonce:h})=>{let f=a==="system",g=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,y=s?rb.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(b,_=!1,x=!0)=>{let j=c?c[b]:b,C=_?b+"|| ''":`'${j}'`,I="";return s&&x&&!_&&rb.includes(b)&&(I+=`d.style.colorScheme = '${b}';`),n==="class"?_||j?I+=`c.add(${C})`:I+="null":j&&(I+=`d[s](n,${C})`),I},w=t?`!function(){${g}${v(t)}}()`:r?`!function(){try{${g}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${f})){var t='${ZO}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}${f?"":"else{"+v(a,!1,!1)+"}"}${y}}catch(e){}}()`:`!function(){try{${g}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}else{${v(a,!1,!1)};}${y}}catch(t){}}();`;return E.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:w}})});var rD=t=>{switch(t){case"success":return oD;case"info":return lD;case"warning":return aD;case"error":return cD;default:return null}},sD=Array(12).fill(0),iD=({visible:t})=>_e.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},_e.createElement("div",{className:"sonner-spinner"},sD.map((e,n)=>_e.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),oD=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),aD=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),lD=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),cD=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),uD=()=>{let[t,e]=_e.useState(document.hidden);return _e.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},xv=1,dD=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:xv++,c=this.toasts.find(h=>h.id===a),u=e.dismissible===void 0?!0:e.dismissible;return c?this.toasts=this.toasts.map(h=>h.id===a?(this.publish({...h,...e,id:a,title:r}),{...h,...e,id:a,dismissible:u,title:r}):h):this.addToast({title:r,...s,dismissible:u,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0;return s.then(async c=>{if(fD(c)&&!c.ok){a=!1;let u=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:u,description:h})}else if(n.success!==void 0){a=!1;let u=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(n.error!==void 0){a=!1;let u=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),r},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||xv++;return this.create({jsx:e(r),id:r,...n}),r},this.subscribers=[],this.toasts=[]}},Vr=new dD,hD=(t,e)=>{let n=(e==null?void 0:e.id)||xv++;return Vr.addToast({title:t,...e,id:n}),n},fD=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",pD=hD,mD=()=>Vr.toasts;Object.assign(pD,{success:Vr.success,info:Vr.info,warning:Vr.warning,error:Vr.error,custom:Vr.custom,message:Vr.message,promise:Vr.promise,dismiss:Vr.dismiss,loading:Vr.loading},{getHistory:mD});function gD(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}gD(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function jf(t){return t.label!==void 0}var yD=3,vD="32px",xD=4e3,wD=356,_D=14,ED=20,bD=200;function ND(...t){return t.filter(Boolean).join(" ")}var SD=t=>{var e,n,r,s,a,c,u,h,f,g;let{invert:y,toast:v,unstyled:w,interacting:b,setHeights:_,visibleToasts:x,heights:j,index:C,toasts:I,expanded:M,removeToast:U,defaultRichColors:z,closeButton:P,style:R,cancelButtonStyle:D,actionButtonStyle:O,className:k="",descriptionClassName:V="",duration:F,position:H,gap:Q,loadingIcon:K,expandByDefault:Z,classNames:W,icons:Y,closeButtonAriaLabel:ne="Close toast",pauseWhenPageIsHidden:B,cn:ee}=t,[ue,Te]=_e.useState(!1),[Le,Ce]=_e.useState(!1),[we,Ie]=_e.useState(!1),[Ke,Ve]=_e.useState(!1),[st,it]=_e.useState(0),[ve,je]=_e.useState(0),gt=_e.useRef(null),cn=_e.useRef(null),zn=C===0,jr=C+1<=x,Lt=v.type,gn=v.dismissible!==!1,Ar=v.className||"",os=v.descriptionClassName||"",hn=_e.useMemo(()=>j.findIndex(Ze=>Ze.toastId===v.id)||0,[j,v.id]),Us=_e.useMemo(()=>{var Ze;return(Ze=v.closeButton)!=null?Ze:P},[v.closeButton,P]),$s=_e.useMemo(()=>v.duration||F||xD,[v.duration,F]),zt=_e.useRef(0),Rt=_e.useRef(0),Bn=_e.useRef(0),bn=_e.useRef(null),[Pr,as]=H.split("-"),qr=_e.useMemo(()=>j.reduce((Ze,Et,yt)=>yt>=hn?Ze:Ze+Et.height,0),[j,hn]),zs=uD(),vi=v.invert||y,ls=Lt==="loading";Rt.current=_e.useMemo(()=>hn*Q+qr,[hn,qr]),_e.useEffect(()=>{Te(!0)},[]),_e.useLayoutEffect(()=>{if(!ue)return;let Ze=cn.current,Et=Ze.style.height;Ze.style.height="auto";let yt=Ze.getBoundingClientRect().height;Ze.style.height=Et,je(yt),_(Bt=>Bt.find(Gt=>Gt.toastId===v.id)?Bt.map(Gt=>Gt.toastId===v.id?{...Gt,height:yt}:Gt):[{toastId:v.id,height:yt,position:v.position},...Bt])},[ue,v.title,v.description,_,v.id]);let qn=_e.useCallback(()=>{Ce(!0),it(Rt.current),_(Ze=>Ze.filter(Et=>Et.toastId!==v.id)),setTimeout(()=>{U(v)},bD)},[v,U,_,Rt]);_e.useEffect(()=>{if(v.promise&&Lt==="loading"||v.duration===1/0||v.type==="loading")return;let Ze,Et=$s;return M||b||B&&zs?(()=>{if(Bn.current<zt.current){let yt=new Date().getTime()-zt.current;Et=Et-yt}Bn.current=new Date().getTime()})():Et!==1/0&&(zt.current=new Date().getTime(),Ze=setTimeout(()=>{var yt;(yt=v.onAutoClose)==null||yt.call(v,v),qn()},Et)),()=>clearTimeout(Ze)},[M,b,Z,v,$s,qn,v.promise,Lt,B,zs]),_e.useEffect(()=>{let Ze=cn.current;if(Ze){let Et=Ze.getBoundingClientRect().height;return je(Et),_(yt=>[{toastId:v.id,height:Et,position:v.position},...yt]),()=>_(yt=>yt.filter(Bt=>Bt.toastId!==v.id))}},[_,v.id]),_e.useEffect(()=>{v.delete&&qn()},[qn,v.delete]);function Bs(){return Y!=null&&Y.loading?_e.createElement("div",{className:"sonner-loader","data-visible":Lt==="loading"},Y.loading):K?_e.createElement("div",{className:"sonner-loader","data-visible":Lt==="loading"},K):_e.createElement(iD,{visible:Lt==="loading"})}return _e.createElement("li",{"aria-live":v.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:cn,className:ee(k,Ar,W==null?void 0:W.toast,(e=v==null?void 0:v.classNames)==null?void 0:e.toast,W==null?void 0:W.default,W==null?void 0:W[Lt],(n=v==null?void 0:v.classNames)==null?void 0:n[Lt]),"data-sonner-toast":"","data-rich-colors":(r=v.richColors)!=null?r:z,"data-styled":!(v.jsx||v.unstyled||w),"data-mounted":ue,"data-promise":!!v.promise,"data-removed":Le,"data-visible":jr,"data-y-position":Pr,"data-x-position":as,"data-index":C,"data-front":zn,"data-swiping":we,"data-dismissible":gn,"data-type":Lt,"data-invert":vi,"data-swipe-out":Ke,"data-expanded":!!(M||Z&&ue),style:{"--index":C,"--toasts-before":C,"--z-index":I.length-C,"--offset":`${Le?st:Rt.current}px`,"--initial-height":Z?"auto":`${ve}px`,...R,...v.style},onPointerDown:Ze=>{ls||!gn||(gt.current=new Date,it(Rt.current),Ze.target.setPointerCapture(Ze.pointerId),Ze.target.tagName!=="BUTTON"&&(Ie(!0),bn.current={x:Ze.clientX,y:Ze.clientY}))},onPointerUp:()=>{var Ze,Et,yt,Bt;if(Ke||!gn)return;bn.current=null;let Gt=Number(((Ze=cn.current)==null?void 0:Ze.style.getPropertyValue("--swipe-amount").replace("px",""))||0),ie=new Date().getTime()-((Et=gt.current)==null?void 0:Et.getTime()),ye=Math.abs(Gt)/ie;if(Math.abs(Gt)>=ED||ye>.11){it(Rt.current),(yt=v.onDismiss)==null||yt.call(v,v),qn(),Ve(!0);return}(Bt=cn.current)==null||Bt.style.setProperty("--swipe-amount","0px"),Ie(!1)},onPointerMove:Ze=>{var Et;if(!bn.current||!gn)return;let yt=Ze.clientY-bn.current.y,Bt=Ze.clientX-bn.current.x,Gt=(Pr==="top"?Math.min:Math.max)(0,yt),ie=Ze.pointerType==="touch"?10:2;Math.abs(Gt)>ie?(Et=cn.current)==null||Et.style.setProperty("--swipe-amount",`${yt}px`):Math.abs(Bt)>ie&&(bn.current=null)}},Us&&!v.jsx?_e.createElement("button",{"aria-label":ne,"data-disabled":ls,"data-close-button":!0,onClick:ls||!gn?()=>{}:()=>{var Ze;qn(),(Ze=v.onDismiss)==null||Ze.call(v,v)},className:ee(W==null?void 0:W.closeButton,(s=v==null?void 0:v.classNames)==null?void 0:s.closeButton)},_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},_e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,v.jsx||_e.isValidElement(v.title)?v.jsx||v.title:_e.createElement(_e.Fragment,null,Lt||v.icon||v.promise?_e.createElement("div",{"data-icon":"",className:ee(W==null?void 0:W.icon,(a=v==null?void 0:v.classNames)==null?void 0:a.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||Bs():null,v.type!=="loading"?v.icon||(Y==null?void 0:Y[Lt])||rD(Lt):null):null,_e.createElement("div",{"data-content":"",className:ee(W==null?void 0:W.content,(c=v==null?void 0:v.classNames)==null?void 0:c.content)},_e.createElement("div",{"data-title":"",className:ee(W==null?void 0:W.title,(u=v==null?void 0:v.classNames)==null?void 0:u.title)},v.title),v.description?_e.createElement("div",{"data-description":"",className:ee(V,os,W==null?void 0:W.description,(h=v==null?void 0:v.classNames)==null?void 0:h.description)},v.description):null),_e.isValidElement(v.cancel)?v.cancel:v.cancel&&jf(v.cancel)?_e.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||D,onClick:Ze=>{var Et,yt;jf(v.cancel)&&gn&&((yt=(Et=v.cancel).onClick)==null||yt.call(Et,Ze),qn())},className:ee(W==null?void 0:W.cancelButton,(f=v==null?void 0:v.classNames)==null?void 0:f.cancelButton)},v.cancel.label):null,_e.isValidElement(v.action)?v.action:v.action&&jf(v.action)?_e.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||O,onClick:Ze=>{var Et,yt;jf(v.action)&&(Ze.defaultPrevented||((yt=(Et=v.action).onClick)==null||yt.call(Et,Ze),qn()))},className:ee(W==null?void 0:W.actionButton,(g=v==null?void 0:v.classNames)==null?void 0:g.actionButton)},v.action.label):null))};function sb(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var TD=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:a,className:c,offset:u,theme:h="light",richColors:f,duration:g,style:y,visibleToasts:v=yD,toastOptions:w,dir:b=sb(),gap:_=_D,loadingIcon:x,icons:j,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:I,cn:M=ND}=t,[U,z]=_e.useState([]),P=_e.useMemo(()=>Array.from(new Set([n].concat(U.filter(B=>B.position).map(B=>B.position)))),[U,n]),[R,D]=_e.useState([]),[O,k]=_e.useState(!1),[V,F]=_e.useState(!1),[H,Q]=_e.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=_e.useRef(null),Z=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),W=_e.useRef(null),Y=_e.useRef(!1),ne=_e.useCallback(B=>{var ee;(ee=U.find(ue=>ue.id===B.id))!=null&&ee.delete||Vr.dismiss(B.id),z(ue=>ue.filter(({id:Te})=>Te!==B.id))},[U]);return _e.useEffect(()=>Vr.subscribe(B=>{if(B.dismiss){z(ee=>ee.map(ue=>ue.id===B.id?{...ue,delete:!0}:ue));return}setTimeout(()=>{Gp.flushSync(()=>{z(ee=>{let ue=ee.findIndex(Te=>Te.id===B.id);return ue!==-1?[...ee.slice(0,ue),{...ee[ue],...B},...ee.slice(ue+1)]:[B,...ee]})})})}),[]),_e.useEffect(()=>{if(h!=="system"){Q(h);return}h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Q("dark"):Q("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:B})=>{Q(B?"dark":"light")})},[h]),_e.useEffect(()=>{U.length<=1&&k(!1)},[U]),_e.useEffect(()=>{let B=ee=>{var ue,Te;r.every(Le=>ee[Le]||ee.code===Le)&&(k(!0),(ue=K.current)==null||ue.focus()),ee.code==="Escape"&&(document.activeElement===K.current||(Te=K.current)!=null&&Te.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[r]),_e.useEffect(()=>{if(K.current)return()=>{W.current&&(W.current.focus({preventScroll:!0}),W.current=null,Y.current=!1)}},[K.current]),U.length?_e.createElement("section",{"aria-label":`${C} ${Z}`,tabIndex:-1},P.map((B,ee)=>{var ue;let[Te,Le]=B.split("-");return _e.createElement("ol",{key:B,dir:b==="auto"?sb():b,tabIndex:-1,ref:K,className:c,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":Te,"data-x-position":Le,style:{"--front-toast-height":`${((ue=R[0])==null?void 0:ue.height)||0}px`,"--offset":typeof u=="number"?`${u}px`:u||vD,"--width":`${wD}px`,"--gap":`${_}px`,...y},onBlur:Ce=>{Y.current&&!Ce.currentTarget.contains(Ce.relatedTarget)&&(Y.current=!1,W.current&&(W.current.focus({preventScroll:!0}),W.current=null))},onFocus:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,W.current=Ce.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{V||k(!1)},onPointerDown:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},U.filter(Ce=>!Ce.position&&ee===0||Ce.position===B).map((Ce,we)=>{var Ie,Ke;return _e.createElement(SD,{key:Ce.id,icons:j,index:we,toast:Ce,defaultRichColors:f,duration:(Ie=w==null?void 0:w.duration)!=null?Ie:g,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:e,visibleToasts:v,closeButton:(Ke=w==null?void 0:w.closeButton)!=null?Ke:a,interacting:V,position:B,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,removeToast:ne,toasts:U.filter(Ve=>Ve.position==Ce.position),heights:R.filter(Ve=>Ve.position==Ce.position),setHeights:D,expandByDefault:s,gap:_,loadingIcon:x,expanded:O,pauseWhenPageIsHidden:I,cn:M})}))})):null};const CD=({...t})=>{const{theme:e="system"}=nD();return o.jsx(TD,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function ID(t,e=[]){let n=[];function r(a,c){const u=E.createContext(c),h=n.length;n=[...n,c];const f=y=>{var j;const{scope:v,children:w,...b}=y,_=((j=v==null?void 0:v[t])==null?void 0:j[h])||u,x=E.useMemo(()=>b,Object.values(b));return o.jsx(_.Provider,{value:x,children:w})};f.displayName=a+"Provider";function g(y,v){var _;const w=((_=v==null?void 0:v[t])==null?void 0:_[h])||u,b=E.useContext(w);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[f,g]}const s=()=>{const a=n.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[t])||a;return E.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[r,jD(s,...e)]}function jD(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const y=h(a)[`__scope${f}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var AD="DismissableLayer",wv="dismissableLayer.update",PD="dismissableLayer.pointerDownOutside",RD="dismissableLayer.focusOutside",ib,GS=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fx=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=t,f=E.useContext(GS),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=E.useState({}),b=jt(e,P=>y(P)),_=Array.from(f.layers),[x]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),j=_.indexOf(x),C=g?_.indexOf(g):-1,I=f.layersWithOutsidePointerEventsDisabled.size>0,M=C>=j,U=DD(P=>{const R=P.target,D=[...f.branches].some(O=>O.contains(R));!M||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},v),z=LD(P=>{const R=P.target;[...f.branches].some(O=>O.contains(R))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},v);return Px(P=>{C===f.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},v),E.useEffect(()=>{if(g)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(ib=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),ob(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=ib)}},[g,v,n,f]),E.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),ob())},[g,f]),E.useEffect(()=>{const P=()=>w({});return document.addEventListener(wv,P),()=>document.removeEventListener(wv,P)},[]),o.jsx(Je.div,{...h,ref:b,style:{pointerEvents:I?M?"auto":"none":void 0,...t.style},onFocusCapture:He(t.onFocusCapture,z.onFocusCapture),onBlurCapture:He(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:He(t.onPointerDownCapture,U.onPointerDownCapture)})});Fx.displayName=AD;var kD="DismissableLayerBranch",OD=E.forwardRef((t,e)=>{const n=E.useContext(GS),r=E.useRef(null),s=jt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(Je.div,{...t,ref:s})});OD.displayName=kD;function DD(t,e=globalThis==null?void 0:globalThis.document){const n=In(t),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){QS(PD,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function LD(t,e=globalThis==null?void 0:globalThis.document){const n=In(t),r=E.useRef(!1);return E.useEffect(()=>{const s=a=>{a.target&&!r.current&&QS(RD,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ob(){const t=new CustomEvent(wv);document.dispatchEvent(t)}function QS(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Qp(s,a):s.dispatchEvent(a)}var MD=nS.useId||(()=>{}),FD=0;function Ko(t){const[e,n]=E.useState(MD());return en(()=>{n(r=>r??String(FD++))},[t]),e?`radix-${e}`:""}const VD=["top","right","bottom","left"],ra=Math.min,Ur=Math.max,pp=Math.round,Af=Math.floor,sa=t=>({x:t,y:t}),UD={left:"right",right:"left",bottom:"top",top:"bottom"},$D={start:"end",end:"start"};function _v(t,e,n){return Ur(t,ra(e,n))}function Wi(t,e){return typeof t=="function"?t(e):t}function Hi(t){return t.split("-")[0]}function nu(t){return t.split("-")[1]}function Vx(t){return t==="x"?"y":"x"}function Ux(t){return t==="y"?"height":"width"}function ia(t){return["top","bottom"].includes(Hi(t))?"y":"x"}function $x(t){return Vx(ia(t))}function zD(t,e,n){n===void 0&&(n=!1);const r=nu(t),s=$x(t),a=Ux(s);let c=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=mp(c)),[c,mp(c)]}function BD(t){const e=mp(t);return[Ev(t),e,Ev(e)]}function Ev(t){return t.replace(/start|end/g,e=>$D[e])}function qD(t,e,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],c=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?a:c;default:return[]}}function WD(t,e,n,r){const s=nu(t);let a=qD(Hi(t),n==="start",r);return s&&(a=a.map(c=>c+"-"+s),e&&(a=a.concat(a.map(Ev)))),a}function mp(t){return t.replace(/left|right|bottom|top/g,e=>UD[e])}function HD(t){return{top:0,right:0,bottom:0,left:0,...t}}function YS(t){return typeof t!="number"?HD(t):{top:t,right:t,bottom:t,left:t}}function gp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function ab(t,e,n){let{reference:r,floating:s}=t;const a=ia(e),c=$x(e),u=Ux(c),h=Hi(e),f=a==="y",g=r.x+r.width/2-s.width/2,y=r.y+r.height/2-s.height/2,v=r[u]/2-s[u]/2;let w;switch(h){case"top":w={x:g,y:r.y-s.height};break;case"bottom":w={x:g,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y};break;case"left":w={x:r.x-s.width,y};break;default:w={x:r.x,y:r.y}}switch(nu(e)){case"start":w[c]-=v*(n&&f?-1:1);break;case"end":w[c]+=v*(n&&f?-1:1);break}return w}const KD=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:c}=n,u=a.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let f=await c.getElementRects({reference:t,floating:e,strategy:s}),{x:g,y}=ab(f,r,h),v=r,w={},b=0;for(let _=0;_<u.length;_++){const{name:x,fn:j}=u[_],{x:C,y:I,data:M,reset:U}=await j({x:g,y,initialPlacement:r,placement:v,strategy:s,middlewareData:w,rects:f,platform:c,elements:{reference:t,floating:e}});g=C??g,y=I??y,w={...w,[x]:{...w[x],...M}},U&&b<=50&&(b++,typeof U=="object"&&(U.placement&&(v=U.placement),U.rects&&(f=U.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:s}):U.rects),{x:g,y}=ab(f,v,h)),_=-1)}return{x:g,y,placement:v,strategy:s,middlewareData:w}};async function bd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:c,elements:u,strategy:h}=t,{boundary:f="clippingAncestors",rootBoundary:g="viewport",elementContext:y="floating",altBoundary:v=!1,padding:w=0}=Wi(e,t),b=YS(w),x=u[v?y==="floating"?"reference":"floating":y],j=gp(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(x)))==null||n?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:f,rootBoundary:g,strategy:h})),C=y==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,I=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),M=await(a.isElement==null?void 0:a.isElement(I))?await(a.getScale==null?void 0:a.getScale(I))||{x:1,y:1}:{x:1,y:1},U=gp(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:C,offsetParent:I,strategy:h}):C);return{top:(j.top-U.top+b.top)/M.y,bottom:(U.bottom-j.bottom+b.bottom)/M.y,left:(j.left-U.left+b.left)/M.x,right:(U.right-j.right+b.right)/M.x}}const GD=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:c,elements:u,middlewareData:h}=e,{element:f,padding:g=0}=Wi(t,e)||{};if(f==null)return{};const y=YS(g),v={x:n,y:r},w=$x(s),b=Ux(w),_=await c.getDimensions(f),x=w==="y",j=x?"top":"left",C=x?"bottom":"right",I=x?"clientHeight":"clientWidth",M=a.reference[b]+a.reference[w]-v[w]-a.floating[b],U=v[w]-a.reference[w],z=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f));let P=z?z[I]:0;(!P||!await(c.isElement==null?void 0:c.isElement(z)))&&(P=u.floating[I]||a.floating[b]);const R=M/2-U/2,D=P/2-_[b]/2-1,O=ra(y[j],D),k=ra(y[C],D),V=O,F=P-_[b]-k,H=P/2-_[b]/2+R,Q=_v(V,H,F),K=!h.arrow&&nu(s)!=null&&H!==Q&&a.reference[b]/2-(H<V?O:k)-_[b]/2<0,Z=K?H<V?H-V:H-F:0;return{[w]:v[w]+Z,data:{[w]:Q,centerOffset:H-Q-Z,...K&&{alignmentOffset:Z}},reset:K}}}),QD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:c,initialPlacement:u,platform:h,elements:f}=e,{mainAxis:g=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:_=!0,...x}=Wi(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const j=Hi(s),C=ia(u),I=Hi(u)===u,M=await(h.isRTL==null?void 0:h.isRTL(f.floating)),U=v||(I||!_?[mp(u)]:BD(u)),z=b!=="none";!v&&z&&U.push(...WD(u,_,b,M));const P=[u,...U],R=await bd(e,x),D=[];let O=((r=a.flip)==null?void 0:r.overflows)||[];if(g&&D.push(R[j]),y){const H=zD(s,c,M);D.push(R[H[0]],R[H[1]])}if(O=[...O,{placement:s,overflows:D}],!D.every(H=>H<=0)){var k,V;const H=(((k=a.flip)==null?void 0:k.index)||0)+1,Q=P[H];if(Q)return{data:{index:H,overflows:O},reset:{placement:Q}};let K=(V=O.filter(Z=>Z.overflows[0]<=0).sort((Z,W)=>Z.overflows[1]-W.overflows[1])[0])==null?void 0:V.placement;if(!K)switch(w){case"bestFit":{var F;const Z=(F=O.filter(W=>{if(z){const Y=ia(W.placement);return Y===C||Y==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(Y=>Y>0).reduce((Y,ne)=>Y+ne,0)]).sort((W,Y)=>W[1]-Y[1])[0])==null?void 0:F[0];Z&&(K=Z);break}case"initialPlacement":K=u;break}if(s!==K)return{reset:{placement:K}}}return{}}}};function lb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function cb(t){return VD.some(e=>t[e]>=0)}const YD=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Wi(t,e);switch(r){case"referenceHidden":{const a=await bd(e,{...s,elementContext:"reference"}),c=lb(a,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:cb(c)}}}case"escaped":{const a=await bd(e,{...s,altBoundary:!0}),c=lb(a,n.floating);return{data:{escapedOffsets:c,escaped:cb(c)}}}default:return{}}}}};async function XD(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=Hi(n),u=nu(n),h=ia(n)==="y",f=["left","top"].includes(c)?-1:1,g=a&&h?-1:1,y=Wi(e,t);let{mainAxis:v,crossAxis:w,alignmentAxis:b}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return u&&typeof b=="number"&&(w=u==="end"?b*-1:b),h?{x:w*g,y:v*f}:{x:v*f,y:w*g}}const JD=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:c,middlewareData:u}=e,h=await XD(e,t);return c===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+h.x,y:a+h.y,data:{...h,placement:c}}}}},ZD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:u={fn:x=>{let{x:j,y:C}=x;return{x:j,y:C}}},...h}=Wi(t,e),f={x:n,y:r},g=await bd(e,h),y=ia(Hi(s)),v=Vx(y);let w=f[v],b=f[y];if(a){const x=v==="y"?"top":"left",j=v==="y"?"bottom":"right",C=w+g[x],I=w-g[j];w=_v(C,w,I)}if(c){const x=y==="y"?"top":"left",j=y==="y"?"bottom":"right",C=b+g[x],I=b-g[j];b=_v(C,b,I)}const _=u.fn({...e,[v]:w,[y]:b});return{..._,data:{x:_.x-n,y:_.y-r,enabled:{[v]:a,[y]:c}}}}}},eL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:c}=e,{offset:u=0,mainAxis:h=!0,crossAxis:f=!0}=Wi(t,e),g={x:n,y:r},y=ia(s),v=Vx(y);let w=g[v],b=g[y];const _=Wi(u,e),x=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(h){const I=v==="y"?"height":"width",M=a.reference[v]-a.floating[I]+x.mainAxis,U=a.reference[v]+a.reference[I]-x.mainAxis;w<M?w=M:w>U&&(w=U)}if(f){var j,C;const I=v==="y"?"width":"height",M=["top","left"].includes(Hi(s)),U=a.reference[y]-a.floating[I]+(M&&((j=c.offset)==null?void 0:j[y])||0)+(M?0:x.crossAxis),z=a.reference[y]+a.reference[I]+(M?0:((C=c.offset)==null?void 0:C[y])||0)-(M?x.crossAxis:0);b<U?b=U:b>z&&(b=z)}return{[v]:w,[y]:b}}}},tL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:c,elements:u}=e,{apply:h=()=>{},...f}=Wi(t,e),g=await bd(e,f),y=Hi(s),v=nu(s),w=ia(s)==="y",{width:b,height:_}=a.floating;let x,j;y==="top"||y==="bottom"?(x=y,j=v===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(j=y,x=v==="end"?"top":"bottom");const C=_-g.top-g.bottom,I=b-g.left-g.right,M=ra(_-g[x],C),U=ra(b-g[j],I),z=!e.middlewareData.shift;let P=M,R=U;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(R=I),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=C),z&&!v){const O=Ur(g.left,0),k=Ur(g.right,0),V=Ur(g.top,0),F=Ur(g.bottom,0);w?R=b-2*(O!==0||k!==0?O+k:Ur(g.left,g.right)):P=_-2*(V!==0||F!==0?V+F:Ur(g.top,g.bottom))}await h({...e,availableWidth:R,availableHeight:P});const D=await c.getDimensions(u.floating);return b!==D.width||_!==D.height?{reset:{rects:!0}}:{}}}};function Jp(){return typeof window<"u"}function ru(t){return XS(t)?(t.nodeName||"").toLowerCase():"#document"}function Br(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function fi(t){var e;return(e=(XS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function XS(t){return Jp()?t instanceof Node||t instanceof Br(t).Node:!1}function Rs(t){return Jp()?t instanceof Element||t instanceof Br(t).Element:!1}function ui(t){return Jp()?t instanceof HTMLElement||t instanceof Br(t).HTMLElement:!1}function ub(t){return!Jp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Br(t).ShadowRoot}function Gd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ks(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function nL(t){return["table","td","th"].includes(ru(t))}function Zp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function zx(t){const e=Bx(),n=Rs(t)?ks(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function rL(t){let e=oa(t);for(;ui(e)&&!Bc(e);){if(zx(e))return e;if(Zp(e))return null;e=oa(e)}return null}function Bx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Bc(t){return["html","body","#document"].includes(ru(t))}function ks(t){return Br(t).getComputedStyle(t)}function em(t){return Rs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function oa(t){if(ru(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ub(t)&&t.host||fi(t);return ub(e)?e.host:e}function JS(t){const e=oa(t);return Bc(e)?t.ownerDocument?t.ownerDocument.body:t.body:ui(e)&&Gd(e)?e:JS(e)}function Nd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=JS(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),c=Br(s);if(a){const u=bv(c);return e.concat(c,c.visualViewport||[],Gd(s)?s:[],u&&n?Nd(u):[])}return e.concat(s,Nd(s,[],n))}function bv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ZS(t){const e=ks(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ui(t),a=s?t.offsetWidth:n,c=s?t.offsetHeight:r,u=pp(n)!==a||pp(r)!==c;return u&&(n=a,r=c),{width:n,height:r,$:u}}function qx(t){return Rs(t)?t:t.contextElement}function _c(t){const e=qx(t);if(!ui(e))return sa(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=ZS(e);let c=(a?pp(n.width):n.width)/r,u=(a?pp(n.height):n.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const sL=sa(0);function eT(t){const e=Br(t);return!Bx()||!e.visualViewport?sL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function iL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Br(t)?!1:e}function sl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=qx(t);let c=sa(1);e&&(r?Rs(r)&&(c=_c(r)):c=_c(t));const u=iL(a,n,r)?eT(a):sa(0);let h=(s.left+u.x)/c.x,f=(s.top+u.y)/c.y,g=s.width/c.x,y=s.height/c.y;if(a){const v=Br(a),w=r&&Rs(r)?Br(r):r;let b=v,_=bv(b);for(;_&&r&&w!==b;){const x=_c(_),j=_.getBoundingClientRect(),C=ks(_),I=j.left+(_.clientLeft+parseFloat(C.paddingLeft))*x.x,M=j.top+(_.clientTop+parseFloat(C.paddingTop))*x.y;h*=x.x,f*=x.y,g*=x.x,y*=x.y,h+=I,f+=M,b=Br(_),_=bv(b)}}return gp({width:g,height:y,x:h,y:f})}function oL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",c=fi(r),u=e?Zp(e.floating):!1;if(r===c||u&&a)return n;let h={scrollLeft:0,scrollTop:0},f=sa(1);const g=sa(0),y=ui(r);if((y||!y&&!a)&&((ru(r)!=="body"||Gd(c))&&(h=em(r)),ui(r))){const v=sl(r);f=_c(r),g.x=v.x+r.clientLeft,g.y=v.y+r.clientTop}return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-h.scrollLeft*f.x+g.x,y:n.y*f.y-h.scrollTop*f.y+g.y}}function aL(t){return Array.from(t.getClientRects())}function Nv(t,e){const n=em(t).scrollLeft;return e?e.left+n:sl(fi(t)).left+n}function lL(t){const e=fi(t),n=em(t),r=t.ownerDocument.body,s=Ur(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Ur(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-n.scrollLeft+Nv(t);const u=-n.scrollTop;return ks(r).direction==="rtl"&&(c+=Ur(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:c,y:u}}function cL(t,e){const n=Br(t),r=fi(t),s=n.visualViewport;let a=r.clientWidth,c=r.clientHeight,u=0,h=0;if(s){a=s.width,c=s.height;const f=Bx();(!f||f&&e==="fixed")&&(u=s.offsetLeft,h=s.offsetTop)}return{width:a,height:c,x:u,y:h}}function uL(t,e){const n=sl(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=ui(t)?_c(t):sa(1),c=t.clientWidth*a.x,u=t.clientHeight*a.y,h=s*a.x,f=r*a.y;return{width:c,height:u,x:h,y:f}}function db(t,e,n){let r;if(e==="viewport")r=cL(t,n);else if(e==="document")r=lL(fi(t));else if(Rs(e))r=uL(e,n);else{const s=eT(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return gp(r)}function tT(t,e){const n=oa(t);return n===e||!Rs(n)||Bc(n)?!1:ks(n).position==="fixed"||tT(n,e)}function dL(t,e){const n=e.get(t);if(n)return n;let r=Nd(t,[],!1).filter(u=>Rs(u)&&ru(u)!=="body"),s=null;const a=ks(t).position==="fixed";let c=a?oa(t):t;for(;Rs(c)&&!Bc(c);){const u=ks(c),h=zx(c);!h&&u.position==="fixed"&&(s=null),(a?!h&&!s:!h&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Gd(c)&&!h&&tT(t,c))?r=r.filter(g=>g!==c):s=u,c=oa(c)}return e.set(t,r),r}function hL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const c=[...n==="clippingAncestors"?Zp(e)?[]:dL(e,this._c):[].concat(n),r],u=c[0],h=c.reduce((f,g)=>{const y=db(e,g,s);return f.top=Ur(y.top,f.top),f.right=ra(y.right,f.right),f.bottom=ra(y.bottom,f.bottom),f.left=Ur(y.left,f.left),f},db(e,u,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function fL(t){const{width:e,height:n}=ZS(t);return{width:e,height:n}}function pL(t,e,n){const r=ui(e),s=fi(e),a=n==="fixed",c=sl(t,!0,a,e);let u={scrollLeft:0,scrollTop:0};const h=sa(0);if(r||!r&&!a)if((ru(e)!=="body"||Gd(s))&&(u=em(e)),r){const w=sl(e,!0,a,e);h.x=w.x+e.clientLeft,h.y=w.y+e.clientTop}else s&&(h.x=Nv(s));let f=0,g=0;if(s&&!r&&!a){const w=s.getBoundingClientRect();g=w.top+u.scrollTop,f=w.left+u.scrollLeft-Nv(s,w)}const y=c.left+u.scrollLeft-h.x-f,v=c.top+u.scrollTop-h.y-g;return{x:y,y:v,width:c.width,height:c.height}}function Ay(t){return ks(t).position==="static"}function hb(t,e){if(!ui(t)||ks(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return fi(t)===n&&(n=n.ownerDocument.body),n}function nT(t,e){const n=Br(t);if(Zp(t))return n;if(!ui(t)){let s=oa(t);for(;s&&!Bc(s);){if(Rs(s)&&!Ay(s))return s;s=oa(s)}return n}let r=hb(t,e);for(;r&&nL(r)&&Ay(r);)r=hb(r,e);return r&&Bc(r)&&Ay(r)&&!zx(r)?n:r||rL(t)||n}const mL=async function(t){const e=this.getOffsetParent||nT,n=this.getDimensions,r=await n(t.floating);return{reference:pL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function gL(t){return ks(t).direction==="rtl"}const yL={convertOffsetParentRelativeRectToViewportRelativeRect:oL,getDocumentElement:fi,getClippingRect:hL,getOffsetParent:nT,getElementRects:mL,getClientRects:aL,getDimensions:fL,getScale:_c,isElement:Rs,isRTL:gL};function vL(t,e){let n=null,r;const s=fi(t);function a(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function c(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),a();const{left:f,top:g,width:y,height:v}=t.getBoundingClientRect();if(u||e(),!y||!v)return;const w=Af(g),b=Af(s.clientWidth-(f+y)),_=Af(s.clientHeight-(g+v)),x=Af(f),C={rootMargin:-w+"px "+-b+"px "+-_+"px "+-x+"px",threshold:Ur(0,ra(1,h))||1};let I=!0;function M(U){const z=U[0].intersectionRatio;if(z!==h){if(!I)return c();z?c(!1,z):r=setTimeout(()=>{c(!1,1e-7)},1e3)}I=!1}try{n=new IntersectionObserver(M,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(M,C)}n.observe(t)}return c(!0),a}function xL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,f=qx(t),g=s||a?[...f?Nd(f):[],...Nd(e)]:[];g.forEach(j=>{s&&j.addEventListener("scroll",n,{passive:!0}),a&&j.addEventListener("resize",n)});const y=f&&u?vL(f,n):null;let v=-1,w=null;c&&(w=new ResizeObserver(j=>{let[C]=j;C&&C.target===f&&w&&(w.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var I;(I=w)==null||I.observe(e)})),n()}),f&&!h&&w.observe(f),w.observe(e));let b,_=h?sl(t):null;h&&x();function x(){const j=sl(t);_&&(j.x!==_.x||j.y!==_.y||j.width!==_.width||j.height!==_.height)&&n(),_=j,b=requestAnimationFrame(x)}return n(),()=>{var j;g.forEach(C=>{s&&C.removeEventListener("scroll",n),a&&C.removeEventListener("resize",n)}),y==null||y(),(j=w)==null||j.disconnect(),w=null,h&&cancelAnimationFrame(b)}}const wL=JD,_L=ZD,EL=QD,bL=tL,NL=YD,fb=GD,SL=eL,TL=(t,e,n)=>{const r=new Map,s={platform:yL,...n},a={...s.platform,_c:r};return KD(t,e,{...s,platform:a})};var Qf=typeof document<"u"?E.useLayoutEffect:E.useEffect;function yp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!yp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!yp(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function rT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function pb(t,e){const n=rT(t);return Math.round(e*n)/n}function Py(t){const e=E.useRef(t);return Qf(()=>{e.current=t}),e}function CL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:c}={},transform:u=!0,whileElementsMounted:h,open:f}=t,[g,y]=E.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,w]=E.useState(r);yp(v,r)||w(r);const[b,_]=E.useState(null),[x,j]=E.useState(null),C=E.useCallback(W=>{W!==z.current&&(z.current=W,_(W))},[]),I=E.useCallback(W=>{W!==P.current&&(P.current=W,j(W))},[]),M=a||b,U=c||x,z=E.useRef(null),P=E.useRef(null),R=E.useRef(g),D=h!=null,O=Py(h),k=Py(s),V=Py(f),F=E.useCallback(()=>{if(!z.current||!P.current)return;const W={placement:e,strategy:n,middleware:v};k.current&&(W.platform=k.current),TL(z.current,P.current,W).then(Y=>{const ne={...Y,isPositioned:V.current!==!1};H.current&&!yp(R.current,ne)&&(R.current=ne,pl.flushSync(()=>{y(ne)}))})},[v,e,n,k,V]);Qf(()=>{f===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,y(W=>({...W,isPositioned:!1})))},[f]);const H=E.useRef(!1);Qf(()=>(H.current=!0,()=>{H.current=!1}),[]),Qf(()=>{if(M&&(z.current=M),U&&(P.current=U),M&&U){if(O.current)return O.current(M,U,F);F()}},[M,U,F,O,D]);const Q=E.useMemo(()=>({reference:z,floating:P,setReference:C,setFloating:I}),[C,I]),K=E.useMemo(()=>({reference:M,floating:U}),[M,U]),Z=E.useMemo(()=>{const W={position:n,left:0,top:0};if(!K.floating)return W;const Y=pb(K.floating,g.x),ne=pb(K.floating,g.y);return u?{...W,transform:"translate("+Y+"px, "+ne+"px)",...rT(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:ne}},[n,u,K.floating,g.x,g.y]);return E.useMemo(()=>({...g,update:F,refs:Q,elements:K,floatingStyles:Z}),[g,F,Q,K,Z])}const IL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?fb({element:r.current,padding:s}).fn(n):{}:r?fb({element:r,padding:s}).fn(n):{}}}},jL=(t,e)=>({...wL(t),options:[t,e]}),AL=(t,e)=>({..._L(t),options:[t,e]}),PL=(t,e)=>({...SL(t),options:[t,e]}),RL=(t,e)=>({...EL(t),options:[t,e]}),kL=(t,e)=>({...bL(t),options:[t,e]}),OL=(t,e)=>({...NL(t),options:[t,e]}),DL=(t,e)=>({...IL(t),options:[t,e]});var LL="Arrow",sT=E.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return o.jsx(Je.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});sT.displayName=LL;var ML=sT;function iT(t){const[e,n]=E.useState(void 0);return en(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let c,u;if("borderBoxSize"in a){const h=a.borderBoxSize,f=Array.isArray(h)?h[0]:h;c=f.inlineSize,u=f.blockSize}else c=t.offsetWidth,u=t.offsetHeight;n({width:c,height:u})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Wx="Popper",[oT,tm]=Xi(Wx),[FL,aT]=oT(Wx),lT=t=>{const{__scopePopper:e,children:n}=t,[r,s]=E.useState(null);return o.jsx(FL,{scope:e,anchor:r,onAnchorChange:s,children:n})};lT.displayName=Wx;var cT="PopperAnchor",uT=E.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=aT(cT,n),c=E.useRef(null),u=jt(e,c);return E.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:o.jsx(Je.div,{...s,ref:u})});uT.displayName=cT;var Hx="PopperContent",[VL,UL]=oT(Hx),dT=E.forwardRef((t,e)=>{var we,Ie,Ke,Ve,st,it;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:f=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:w="optimized",onPlaced:b,..._}=t,x=aT(Hx,n),[j,C]=E.useState(null),I=jt(e,ve=>C(ve)),[M,U]=E.useState(null),z=iT(M),P=(z==null?void 0:z.width)??0,R=(z==null?void 0:z.height)??0,D=r+(a!=="center"?"-"+a:""),O=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},k=Array.isArray(f)?f:[f],V=k.length>0,F={padding:O,boundary:k.filter(zL),altBoundary:V},{refs:H,floatingStyles:Q,placement:K,isPositioned:Z,middlewareData:W}=CL({strategy:"fixed",placement:D,whileElementsMounted:(...ve)=>xL(...ve,{animationFrame:w==="always"}),elements:{reference:x.anchor},middleware:[jL({mainAxis:s+R,alignmentAxis:c}),h&&AL({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?PL():void 0,...F}),h&&RL({...F}),kL({...F,apply:({elements:ve,rects:je,availableWidth:gt,availableHeight:cn})=>{const{width:zn,height:jr}=je.reference,Lt=ve.floating.style;Lt.setProperty("--radix-popper-available-width",`${gt}px`),Lt.setProperty("--radix-popper-available-height",`${cn}px`),Lt.setProperty("--radix-popper-anchor-width",`${zn}px`),Lt.setProperty("--radix-popper-anchor-height",`${jr}px`)}}),M&&DL({element:M,padding:u}),BL({arrowWidth:P,arrowHeight:R}),v&&OL({strategy:"referenceHidden",...F})]}),[Y,ne]=pT(K),B=In(b);en(()=>{Z&&(B==null||B())},[Z,B]);const ee=(we=W.arrow)==null?void 0:we.x,ue=(Ie=W.arrow)==null?void 0:Ie.y,Te=((Ke=W.arrow)==null?void 0:Ke.centerOffset)!==0,[Le,Ce]=E.useState();return en(()=>{j&&Ce(window.getComputedStyle(j).zIndex)},[j]),o.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q,transform:Z?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Le,"--radix-popper-transform-origin":[(Ve=W.transformOrigin)==null?void 0:Ve.x,(st=W.transformOrigin)==null?void 0:st.y].join(" "),...((it=W.hide)==null?void 0:it.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(VL,{scope:n,placedSide:Y,onArrowChange:U,arrowX:ee,arrowY:ue,shouldHideArrow:Te,children:o.jsx(Je.div,{"data-side":Y,"data-align":ne,..._,ref:I,style:{..._.style,animation:Z?void 0:"none"}})})})});dT.displayName=Hx;var hT="PopperArrow",$L={top:"bottom",right:"left",bottom:"top",left:"right"},fT=E.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=UL(hT,r),c=$L[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(ML,{...s,ref:n,style:{...s.style,display:"block"}})})});fT.displayName=hT;function zL(t){return t!==null}var BL=t=>({name:"transformOrigin",options:t,fn(e){var x,j,C;const{placement:n,rects:r,middlewareData:s}=e,c=((x=s.arrow)==null?void 0:x.centerOffset)!==0,u=c?0:t.arrowWidth,h=c?0:t.arrowHeight,[f,g]=pT(n),y={start:"0%",center:"50%",end:"100%"}[g],v=(((j=s.arrow)==null?void 0:j.x)??0)+u/2,w=(((C=s.arrow)==null?void 0:C.y)??0)+h/2;let b="",_="";return f==="bottom"?(b=c?y:`${v}px`,_=`${-h}px`):f==="top"?(b=c?y:`${v}px`,_=`${r.floating.height+h}px`):f==="right"?(b=`${-h}px`,_=c?y:`${w}px`):f==="left"&&(b=`${r.floating.width+h}px`,_=c?y:`${w}px`),{data:{x:b,y:_}}}});function pT(t){const[e,n="center"]=t.split("-");return[e,n]}var qL=lT,mT=uT,gT=dT,yT=fT,WL="Portal",vT=E.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,a]=E.useState(!1);en(()=>a(!0),[]);const c=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Gp.createPortal(o.jsx(Je.div,{...r,ref:e}),c):null});vT.displayName=WL;function HL(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var xT=t=>{const{present:e,children:n}=t,r=KL(e),s=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),a=jt(r.ref,GL(s));return typeof n=="function"||r.isPresent?E.cloneElement(s,{ref:a}):null};xT.displayName="Presence";function KL(t){const[e,n]=E.useState(),r=E.useRef({}),s=E.useRef(t),a=E.useRef("none"),c=t?"mounted":"unmounted",[u,h]=HL(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const f=Pf(r.current);a.current=u==="mounted"?f:"none"},[u]),en(()=>{const f=r.current,g=s.current;if(g!==t){const v=a.current,w=Pf(f);t?h("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(g&&v!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),en(()=>{if(e){let f;const g=e.ownerDocument.defaultView??window,y=w=>{const _=Pf(r.current).includes(w.animationName);if(w.target===e&&_&&(h("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",f=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},v=w=>{w.target===e&&(a.current=Pf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function Pf(t){return(t==null?void 0:t.animationName)||"none"}function GL(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var[nm,Yq]=ID("Tooltip",[tm]),Kx=tm(),wT="TooltipProvider",QL=700,mb="tooltip.open",[YL,_T]=nm(wT),ET=t=>{const{__scopeTooltip:e,delayDuration:n=QL,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=t,[c,u]=E.useState(!0),h=E.useRef(!1),f=E.useRef(0);return E.useEffect(()=>{const g=f.current;return()=>window.clearTimeout(g)},[]),o.jsx(YL,{scope:e,isOpenDelayed:c,delayDuration:n,onOpen:E.useCallback(()=>{window.clearTimeout(f.current),u(!1)},[]),onClose:E.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:h,onPointerInTransitChange:E.useCallback(g=>{h.current=g},[]),disableHoverableContent:s,children:a})};ET.displayName=wT;var bT="Tooltip",[Xq,rm]=nm(bT),Sv="TooltipTrigger",XL=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=rm(Sv,n),a=_T(Sv,n),c=Kx(n),u=E.useRef(null),h=jt(e,u,s.onTriggerChange),f=E.useRef(!1),g=E.useRef(!1),y=E.useCallback(()=>f.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),o.jsx(mT,{asChild:!0,...c,children:o.jsx(Je.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:h,onPointerMove:He(t.onPointerMove,v=>{v.pointerType!=="touch"&&!g.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),g.current=!0)}),onPointerLeave:He(t.onPointerLeave,()=>{s.onTriggerLeave(),g.current=!1}),onPointerDown:He(t.onPointerDown,()=>{f.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:He(t.onFocus,()=>{f.current||s.onOpen()}),onBlur:He(t.onBlur,s.onClose),onClick:He(t.onClick,s.onClose)})})});XL.displayName=Sv;var JL="TooltipPortal",[Jq,ZL]=nm(JL,{forceMount:void 0}),qc="TooltipContent",NT=E.forwardRef((t,e)=>{const n=ZL(qc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=t,c=rm(qc,t.__scopeTooltip);return o.jsx(xT,{present:r||c.open,children:c.disableHoverableContent?o.jsx(ST,{side:s,...a,ref:e}):o.jsx(eM,{side:s,...a,ref:e})})}),eM=E.forwardRef((t,e)=>{const n=rm(qc,t.__scopeTooltip),r=_T(qc,t.__scopeTooltip),s=E.useRef(null),a=jt(e,s),[c,u]=E.useState(null),{trigger:h,onClose:f}=n,g=s.current,{onPointerInTransitChange:y}=r,v=E.useCallback(()=>{u(null),y(!1)},[y]),w=E.useCallback((b,_)=>{const x=b.currentTarget,j={x:b.clientX,y:b.clientY},C=sM(j,x.getBoundingClientRect()),I=iM(j,C),M=oM(_.getBoundingClientRect()),U=lM([...I,...M]);u(U),y(!0)},[y]);return E.useEffect(()=>()=>v(),[v]),E.useEffect(()=>{if(h&&g){const b=x=>w(x,g),_=x=>w(x,h);return h.addEventListener("pointerleave",b),g.addEventListener("pointerleave",_),()=>{h.removeEventListener("pointerleave",b),g.removeEventListener("pointerleave",_)}}},[h,g,w,v]),E.useEffect(()=>{if(c){const b=_=>{const x=_.target,j={x:_.clientX,y:_.clientY},C=(h==null?void 0:h.contains(x))||(g==null?void 0:g.contains(x)),I=!aM(j,c);C?v():I&&(v(),f())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[h,g,c,f,v]),o.jsx(ST,{...t,ref:a})}),[tM,nM]=nm(bT,{isInside:!1}),ST=E.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:c,...u}=t,h=rm(qc,n),f=Kx(n),{onClose:g}=h;return E.useEffect(()=>(document.addEventListener(mb,g),()=>document.removeEventListener(mb,g)),[g]),E.useEffect(()=>{if(h.trigger){const y=v=>{const w=v.target;w!=null&&w.contains(h.trigger)&&g()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[h.trigger,g]),o.jsx(Fx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:y=>y.preventDefault(),onDismiss:g,children:o.jsxs(gT,{"data-state":h.stateAttribute,...f,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(iS,{children:r}),o.jsx(tM,{scope:n,isInside:!0,children:o.jsx(S2,{id:h.contentId,role:"tooltip",children:s||r})})]})})});NT.displayName=qc;var TT="TooltipArrow",rM=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Kx(n);return nM(TT,n).isInside?null:o.jsx(yT,{...s,...r,ref:e})});rM.displayName=TT;function sM(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function iM(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function oM(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function aM(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const u=e[a].x,h=e[a].y,f=e[c].x,g=e[c].y;h>r!=g>r&&n<(f-u)*(r-h)/(g-h)+u&&(s=!s)}return s}function lM(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),cM(e)}function cM(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const a=e[e.length-1],c=e[e.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const a=n[n.length-1],c=n[n.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var uM=ET,CT=NT;const dM=uM,hM=E.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(CT,{ref:r,sideOffset:e,className:Qe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));hM.displayName=CT.displayName;var Qd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},il=typeof window>"u"||"Deno"in globalThis;function Er(){}function fM(t,e){return typeof t=="function"?t(e):t}function Tv(t){return typeof t=="number"&&t>=0&&t!==1/0}function IT(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Go(t,e){return typeof t=="function"?t(e):t}function Ns(t,e){return typeof t=="function"?t(e):t}function gb(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:c,stale:u}=t;if(c){if(r){if(e.queryHash!==Gx(c,e.options))return!1}else if(!Td(e.queryKey,c))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function yb(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(Sd(e.options.mutationKey)!==Sd(a))return!1}else if(!Td(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Gx(t,e){return((e==null?void 0:e.queryKeyHashFn)||Sd)(t)}function Sd(t){return JSON.stringify(t,(e,n)=>Iv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Td(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Td(t[n],e[n])):!1}function jT(t,e){if(t===e)return t;const n=vb(t)&&vb(e);if(n||Iv(t)&&Iv(e)){const r=n?t:Object.keys(t),s=r.length,a=n?e:Object.keys(e),c=a.length,u=n?[]:{},h=new Set(r);let f=0;for(let g=0;g<c;g++){const y=n?g:a[g];(!n&&h.has(y)||n)&&t[y]===void 0&&e[y]===void 0?(u[y]=void 0,f++):(u[y]=jT(t[y],e[y]),u[y]===t[y]&&t[y]!==void 0&&f++)}return s===c&&f===s?t:u}return e}function Cv(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function vb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Iv(t){if(!xb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!xb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function xb(t){return Object.prototype.toString.call(t)==="[object Object]"}function pM(t){return new Promise(e=>{setTimeout(e,t)})}function jv(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?jT(t,e):e}function mM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function gM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Qx=Symbol();function AT(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Qx?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function yM(t,e){return typeof t=="function"?t(...e):!!t}var Wa,Mo,jc,W1,vM=(W1=class extends Qd{constructor(){super();nt(this,Wa);nt(this,Mo);nt(this,jc);De(this,jc,e=>{if(!il&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,Mo)||this.setEventListener(J(this,jc))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Mo))==null||e.call(this),De(this,Mo,void 0))}setEventListener(e){var n;De(this,jc,e),(n=J(this,Mo))==null||n.call(this),De(this,Mo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){J(this,Wa)!==e&&(De(this,Wa,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof J(this,Wa)=="boolean"?J(this,Wa):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Wa=new WeakMap,Mo=new WeakMap,jc=new WeakMap,W1),Yx=new vM,Ac,Fo,Pc,H1,xM=(H1=class extends Qd{constructor(){super();nt(this,Ac,!0);nt(this,Fo);nt(this,Pc);De(this,Pc,e=>{if(!il&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,Fo)||this.setEventListener(J(this,Pc))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Fo))==null||e.call(this),De(this,Fo,void 0))}setEventListener(e){var n;De(this,Pc,e),(n=J(this,Fo))==null||n.call(this),De(this,Fo,e(this.setOnline.bind(this)))}setOnline(e){J(this,Ac)!==e&&(De(this,Ac,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return J(this,Ac)}},Ac=new WeakMap,Fo=new WeakMap,Pc=new WeakMap,H1),vp=new xM;function Av(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function wM(t){return Math.min(1e3*2**t,3e4)}function PT(t){return(t??"online")==="online"?vp.isOnline():!0}var RT=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Ry(t){return t instanceof RT}function kT(t){let e=!1,n=0,r=!1,s;const a=Av(),c=_=>{var x;r||(v(new RT(_)),(x=t.abort)==null||x.call(t))},u=()=>{e=!0},h=()=>{e=!1},f=()=>Yx.isFocused()&&(t.networkMode==="always"||vp.isOnline())&&t.canRun(),g=()=>PT(t.networkMode)&&t.canRun(),y=_=>{var x;r||(r=!0,(x=t.onSuccess)==null||x.call(t,_),s==null||s(),a.resolve(_))},v=_=>{var x;r||(r=!0,(x=t.onError)==null||x.call(t,_),s==null||s(),a.reject(_))},w=()=>new Promise(_=>{var x;s=j=>{(r||f())&&_(j)},(x=t.onPause)==null||x.call(t)}).then(()=>{var _;s=void 0,r||(_=t.onContinue)==null||_.call(t)}),b=()=>{if(r)return;let _;const x=n===0?t.initialPromise:void 0;try{_=x??t.fn()}catch(j){_=Promise.reject(j)}Promise.resolve(_).then(y).catch(j=>{var z;if(r)return;const C=t.retry??(il?0:3),I=t.retryDelay??wM,M=typeof I=="function"?I(n,j):I,U=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,j);if(e||!U){v(j);return}n++,(z=t.onFail)==null||z.call(t,n,j),pM(M).then(()=>f()?void 0:w()).then(()=>{e?v(j):b()})})};return{promise:a,cancel:c,continue:()=>(s==null||s(),a),cancelRetry:u,continueRetry:h,canStart:g,start:()=>(g()?b():w().then(b),a)}}var _M=t=>setTimeout(t,0);function EM(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=_M;const a=u=>{e?t.push(u):s(()=>{n(u)})},c=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(h=>{n(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||c()}return h},batchCalls:u=>(...h)=>{a(()=>{u(...h)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var $n=EM(),Ha,K1,OT=(K1=class{constructor(){nt(this,Ha)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Tv(this.gcTime)&&De(this,Ha,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(il?1/0:5*60*1e3))}clearGcTimeout(){J(this,Ha)&&(clearTimeout(J(this,Ha)),De(this,Ha,void 0))}},Ha=new WeakMap,K1),Rc,Ka,es,Ga,Yn,zd,Qa,Es,Di,G1,bM=(G1=class extends OT{constructor(n){super();nt(this,Es);nt(this,Rc);nt(this,Ka);nt(this,es);nt(this,Ga);nt(this,Yn);nt(this,zd);nt(this,Qa);De(this,Qa,!1),De(this,zd,n.defaultOptions),this.setOptions(n.options),this.observers=[],De(this,Ga,n.client),De(this,es,J(this,Ga).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,De(this,Rc,NM(this.options)),this.state=n.state??J(this,Rc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=J(this,Yn))==null?void 0:n.promise}setOptions(n){this.options={...J(this,zd),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,es).remove(this)}setData(n,r){const s=jv(this.state.data,n,this.options);return wt(this,Es,Di).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){wt(this,Es,Di).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=J(this,Yn))==null?void 0:s.promise;return(a=J(this,Yn))==null||a.cancel(n),r?r.then(Er).catch(Er):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,Rc))}isActive(){return this.observers.some(n=>Ns(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Qx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Go(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!IT(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=J(this,Yn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=J(this,Yn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),J(this,es).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(J(this,Yn)&&(J(this,Qa)?J(this,Yn).cancel({revert:!0}):J(this,Yn).cancelRetry()),this.scheduleGc()),J(this,es).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||wt(this,Es,Di).call(this,{type:"invalidate"})}fetch(n,r){var g,y,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(J(this,Yn))return J(this,Yn).continueRetry(),J(this,Yn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const w=this.observers.find(b=>b.options.queryFn);w&&this.setOptions(w.options)}const s=new AbortController,a=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(De(this,Qa,!0),s.signal)})},c=()=>{const w=AT(this.options,r),_=(()=>{const x={client:J(this,Ga),queryKey:this.queryKey,meta:this.meta};return a(x),x})();return De(this,Qa,!1),this.options.persister?this.options.persister(w,_,this):w(_)},h=(()=>{const w={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:J(this,Ga),state:this.state,fetchFn:c};return a(w),w})();(g=this.options.behavior)==null||g.onFetch(h,this),De(this,Ka,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=h.fetchOptions)==null?void 0:y.meta))&&wt(this,Es,Di).call(this,{type:"fetch",meta:(v=h.fetchOptions)==null?void 0:v.meta});const f=w=>{var b,_,x,j;Ry(w)&&w.silent||wt(this,Es,Di).call(this,{type:"error",error:w}),Ry(w)||((_=(b=J(this,es).config).onError)==null||_.call(b,w,this),(j=(x=J(this,es).config).onSettled)==null||j.call(x,this.state.data,w,this)),this.scheduleGc()};return De(this,Yn,kT({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:w=>{var b,_,x,j;if(w===void 0){f(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(w)}catch(C){f(C);return}(_=(b=J(this,es).config).onSuccess)==null||_.call(b,w,this),(j=(x=J(this,es).config).onSettled)==null||j.call(x,w,this.state.error,this),this.scheduleGc()},onError:f,onFail:(w,b)=>{wt(this,Es,Di).call(this,{type:"failed",failureCount:w,error:b})},onPause:()=>{wt(this,Es,Di).call(this,{type:"pause"})},onContinue:()=>{wt(this,Es,Di).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),J(this,Yn).start()}},Rc=new WeakMap,Ka=new WeakMap,es=new WeakMap,Ga=new WeakMap,Yn=new WeakMap,zd=new WeakMap,Qa=new WeakMap,Es=new WeakSet,Di=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...DT(s.data,this.options),fetchMeta:n.meta??null};case"success":return De(this,Ka,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=n.error;return Ry(a)&&a.revert&&J(this,Ka)?{...J(this,Ka),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),$n.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),J(this,es).notify({query:this,type:"updated",action:n})})},G1);function DT(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:PT(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function NM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ni,Q1,SM=(Q1=class extends Qd{constructor(e={}){super();nt(this,ni);this.config=e,De(this,ni,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??Gx(s,n);let c=this.get(a);return c||(c=new bM({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){J(this,ni).has(e.queryHash)||(J(this,ni).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=J(this,ni).get(e.queryHash);n&&(e.destroy(),n===e&&J(this,ni).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){$n.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return J(this,ni).get(e)}getAll(){return[...J(this,ni).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>gb(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>gb(e,r)):n}notify(e){$n.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){$n.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){$n.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ni=new WeakMap,Q1),ri,or,Ya,si,Ao,Y1,TM=(Y1=class extends OT{constructor(n){super();nt(this,si);nt(this,ri);nt(this,or);nt(this,Ya);this.mutationId=n.mutationId,De(this,or,n.mutationCache),De(this,ri,[]),this.state=n.state||CM(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){J(this,ri).includes(n)||(J(this,ri).push(n),this.clearGcTimeout(),J(this,or).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){De(this,ri,J(this,ri).filter(r=>r!==n)),this.scheduleGc(),J(this,or).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){J(this,ri).length||(this.state.status==="pending"?this.scheduleGc():J(this,or).remove(this))}continue(){var n;return((n=J(this,Ya))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var c,u,h,f,g,y,v,w,b,_,x,j,C,I,M,U,z,P,R,D;const r=()=>{wt(this,si,Ao).call(this,{type:"continue"})};De(this,Ya,kT({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(O,k)=>{wt(this,si,Ao).call(this,{type:"failed",failureCount:O,error:k})},onPause:()=>{wt(this,si,Ao).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,or).canRun(this)}));const s=this.state.status==="pending",a=!J(this,Ya).canStart();try{if(s)r();else{wt(this,si,Ao).call(this,{type:"pending",variables:n,isPaused:a}),await((u=(c=J(this,or).config).onMutate)==null?void 0:u.call(c,n,this));const k=await((f=(h=this.options).onMutate)==null?void 0:f.call(h,n));k!==this.state.context&&wt(this,si,Ao).call(this,{type:"pending",context:k,variables:n,isPaused:a})}const O=await J(this,Ya).start();return await((y=(g=J(this,or).config).onSuccess)==null?void 0:y.call(g,O,n,this.state.context,this)),await((w=(v=this.options).onSuccess)==null?void 0:w.call(v,O,n,this.state.context)),await((_=(b=J(this,or).config).onSettled)==null?void 0:_.call(b,O,null,this.state.variables,this.state.context,this)),await((j=(x=this.options).onSettled)==null?void 0:j.call(x,O,null,n,this.state.context)),wt(this,si,Ao).call(this,{type:"success",data:O}),O}catch(O){try{throw await((I=(C=J(this,or).config).onError)==null?void 0:I.call(C,O,n,this.state.context,this)),await((U=(M=this.options).onError)==null?void 0:U.call(M,O,n,this.state.context)),await((P=(z=J(this,or).config).onSettled)==null?void 0:P.call(z,void 0,O,this.state.variables,this.state.context,this)),await((D=(R=this.options).onSettled)==null?void 0:D.call(R,void 0,O,n,this.state.context)),O}finally{wt(this,si,Ao).call(this,{type:"error",error:O})}}finally{J(this,or).runNext(this)}}},ri=new WeakMap,or=new WeakMap,Ya=new WeakMap,si=new WeakSet,Ao=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),$n.batch(()=>{J(this,ri).forEach(s=>{s.onMutationUpdate(n)}),J(this,or).notify({mutation:this,type:"updated",action:n})})},Y1);function CM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fi,bs,Bd,X1,IM=(X1=class extends Qd{constructor(e={}){super();nt(this,Fi);nt(this,bs);nt(this,Bd);this.config=e,De(this,Fi,new Set),De(this,bs,new Map),De(this,Bd,0)}build(e,n,r){const s=new TM({mutationCache:this,mutationId:++Sf(this,Bd)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){J(this,Fi).add(e);const n=Rf(e);if(typeof n=="string"){const r=J(this,bs).get(n);r?r.push(e):J(this,bs).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(J(this,Fi).delete(e)){const n=Rf(e);if(typeof n=="string"){const r=J(this,bs).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&J(this,bs).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Rf(e);if(typeof n=="string"){const r=J(this,bs).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Rf(e);if(typeof n=="string"){const s=(r=J(this,bs).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$n.batch(()=>{J(this,Fi).forEach(e=>{this.notify({type:"removed",mutation:e})}),J(this,Fi).clear(),J(this,bs).clear()})}getAll(){return Array.from(J(this,Fi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>yb(n,r))}findAll(e={}){return this.getAll().filter(n=>yb(e,n))}notify(e){$n.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return $n.batch(()=>Promise.all(e.map(n=>n.continue().catch(Er))))}},Fi=new WeakMap,bs=new WeakMap,Bd=new WeakMap,X1);function Rf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function xp(t){return{onFetch:(e,n)=>{var g,y,v,w,b;const r=e.options,s=(v=(y=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:y.fetchMore)==null?void 0:v.direction,a=((w=e.state.data)==null?void 0:w.pages)||[],c=((b=e.state.data)==null?void 0:b.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const f=async()=>{let _=!1;const x=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},j=AT(e.options,e.fetchOptions),C=async(I,M,U)=>{if(_)return Promise.reject();if(M==null&&I.pages.length)return Promise.resolve(I);const P=(()=>{const k={client:e.client,queryKey:e.queryKey,pageParam:M,direction:U?"backward":"forward",meta:e.options.meta};return x(k),k})(),R=await j(P),{maxPages:D}=e.options,O=U?gM:mM;return{pages:O(I.pages,R,D),pageParams:O(I.pageParams,M,D)}};if(s&&a.length){const I=s==="backward",M=I?LT:Pv,U={pages:a,pageParams:c},z=M(r,U);u=await C(U,z,I)}else{const I=t??a.length;do{const M=h===0?c[0]??r.initialPageParam:Pv(r,u);if(h>0&&M==null)break;u=await C(u,M),h++}while(h<I)}return u};e.options.persister?e.fetchFn=()=>{var _,x;return(x=(_=e.options).persister)==null?void 0:x.call(_,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=f}}}function Pv(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function LT(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}function jM(t,e){return e?Pv(t,e)!=null:!1}function AM(t,e){return!e||!t.getPreviousPageParam?!1:LT(t,e)!=null}var dn,Vo,Uo,kc,Oc,$o,Dc,Lc,J1,PM=(J1=class{constructor(t={}){nt(this,dn);nt(this,Vo);nt(this,Uo);nt(this,kc);nt(this,Oc);nt(this,$o);nt(this,Dc);nt(this,Lc);De(this,dn,t.queryCache||new SM),De(this,Vo,t.mutationCache||new IM),De(this,Uo,t.defaultOptions||{}),De(this,kc,new Map),De(this,Oc,new Map),De(this,$o,0)}mount(){Sf(this,$o)._++,J(this,$o)===1&&(De(this,Dc,Yx.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,dn).onFocus())})),De(this,Lc,vp.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,dn).onOnline())})))}unmount(){var t,e;Sf(this,$o)._--,J(this,$o)===0&&((t=J(this,Dc))==null||t.call(this),De(this,Dc,void 0),(e=J(this,Lc))==null||e.call(this),De(this,Lc,void 0))}isFetching(t){return J(this,dn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return J(this,Vo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,dn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=J(this,dn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Go(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return J(this,dn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=J(this,dn).get(r.queryHash),a=s==null?void 0:s.state.data,c=fM(e,a);if(c!==void 0)return J(this,dn).build(this,r).setData(c,{...n,manual:!0})}setQueriesData(t,e,n){return $n.batch(()=>J(this,dn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,dn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=J(this,dn);$n.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=J(this,dn);return $n.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=$n.batch(()=>J(this,dn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Er).catch(Er)}invalidateQueries(t,e={}){return $n.batch(()=>(J(this,dn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=$n.batch(()=>J(this,dn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Er)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Er)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=J(this,dn).build(this,e);return n.isStaleByTime(Go(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Er).catch(Er)}fetchInfiniteQuery(t){return t.behavior=xp(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Er).catch(Er)}ensureInfiniteQueryData(t){return t.behavior=xp(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return vp.isOnline()?J(this,Vo).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,dn)}getMutationCache(){return J(this,Vo)}getDefaultOptions(){return J(this,Uo)}setDefaultOptions(t){De(this,Uo,t)}setQueryDefaults(t,e){J(this,kc).set(Sd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...J(this,kc).values()],n={};return e.forEach(r=>{Td(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){J(this,Oc).set(Sd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...J(this,Oc).values()],n={};return e.forEach(r=>{Td(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...J(this,Uo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Gx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Qx&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...J(this,Uo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){J(this,dn).clear(),J(this,Vo).clear()}},dn=new WeakMap,Vo=new WeakMap,Uo=new WeakMap,kc=new WeakMap,Oc=new WeakMap,$o=new WeakMap,Dc=new WeakMap,Lc=new WeakMap,J1),_r,_t,qd,ar,Xa,Mc,zo,Bo,Wd,Fc,Vc,Ja,Za,qo,Uc,kt,ed,Rv,kv,Ov,Dv,Lv,Mv,Fv,FT,Z1,MT=(Z1=class extends Qd{constructor(e,n){super();nt(this,kt);nt(this,_r);nt(this,_t);nt(this,qd);nt(this,ar);nt(this,Xa);nt(this,Mc);nt(this,zo);nt(this,Bo);nt(this,Wd);nt(this,Fc);nt(this,Vc);nt(this,Ja);nt(this,Za);nt(this,qo);nt(this,Uc,new Set);this.options=n,De(this,_r,e),De(this,Bo,null),De(this,zo,Av()),this.options.experimental_prefetchInRender||J(this,zo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(J(this,_t).addObserver(this),wb(J(this,_t),this.options)?wt(this,kt,ed).call(this):this.updateResult(),wt(this,kt,Dv).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Vv(J(this,_t),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Vv(J(this,_t),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,wt(this,kt,Lv).call(this),wt(this,kt,Mv).call(this),J(this,_t).removeObserver(this)}setOptions(e){const n=this.options,r=J(this,_t);if(this.options=J(this,_r).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ns(this.options.enabled,J(this,_t))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");wt(this,kt,Fv).call(this),J(this,_t).setOptions(this.options),n._defaulted&&!Cv(this.options,n)&&J(this,_r).getQueryCache().notify({type:"observerOptionsUpdated",query:J(this,_t),observer:this});const s=this.hasListeners();s&&_b(J(this,_t),r,this.options,n)&&wt(this,kt,ed).call(this),this.updateResult(),s&&(J(this,_t)!==r||Ns(this.options.enabled,J(this,_t))!==Ns(n.enabled,J(this,_t))||Go(this.options.staleTime,J(this,_t))!==Go(n.staleTime,J(this,_t)))&&wt(this,kt,Rv).call(this);const a=wt(this,kt,kv).call(this);s&&(J(this,_t)!==r||Ns(this.options.enabled,J(this,_t))!==Ns(n.enabled,J(this,_t))||a!==J(this,qo))&&wt(this,kt,Ov).call(this,a)}getOptimisticResult(e){const n=J(this,_r).getQueryCache().build(J(this,_r),e),r=this.createResult(n,e);return kM(this,r)&&(De(this,ar,r),De(this,Mc,this.options),De(this,Xa,J(this,_t).state)),r}getCurrentResult(){return J(this,ar)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){J(this,Uc).add(e)}getCurrentQuery(){return J(this,_t)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=J(this,_r).defaultQueryOptions(e),r=J(this,_r).getQueryCache().build(J(this,_r),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return wt(this,kt,ed).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),J(this,ar)))}createResult(e,n){var D;const r=J(this,_t),s=this.options,a=J(this,ar),c=J(this,Xa),u=J(this,Mc),f=e!==r?e.state:J(this,qd),{state:g}=e;let y={...g},v=!1,w;if(n._optimisticResults){const O=this.hasListeners(),k=!O&&wb(e,n),V=O&&_b(e,r,n,s);(k||V)&&(y={...y,...DT(g.data,e.options)}),n._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:b,errorUpdatedAt:_,status:x}=y;w=y.data;let j=!1;if(n.placeholderData!==void 0&&w===void 0&&x==="pending"){let O;a!=null&&a.isPlaceholderData&&n.placeholderData===(u==null?void 0:u.placeholderData)?(O=a.data,j=!0):O=typeof n.placeholderData=="function"?n.placeholderData((D=J(this,Vc))==null?void 0:D.state.data,J(this,Vc)):n.placeholderData,O!==void 0&&(x="success",w=jv(a==null?void 0:a.data,O,n),v=!0)}if(n.select&&w!==void 0&&!j)if(a&&w===(c==null?void 0:c.data)&&n.select===J(this,Wd))w=J(this,Fc);else try{De(this,Wd,n.select),w=n.select(w),w=jv(a==null?void 0:a.data,w,n),De(this,Fc,w),De(this,Bo,null)}catch(O){De(this,Bo,O)}J(this,Bo)&&(b=J(this,Bo),w=J(this,Fc),_=Date.now(),x="error");const C=y.fetchStatus==="fetching",I=x==="pending",M=x==="error",U=I&&C,z=w!==void 0,R={status:x,fetchStatus:y.fetchStatus,isPending:I,isSuccess:x==="success",isError:M,isInitialLoading:U,isLoading:U,data:w,dataUpdatedAt:y.dataUpdatedAt,error:b,errorUpdatedAt:_,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>f.dataUpdateCount||y.errorUpdateCount>f.errorUpdateCount,isFetching:C,isRefetching:C&&!I,isLoadingError:M&&!z,isPaused:y.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:M&&z,isStale:Xx(e,n),refetch:this.refetch,promise:J(this,zo)};if(this.options.experimental_prefetchInRender){const O=F=>{R.status==="error"?F.reject(R.error):R.data!==void 0&&F.resolve(R.data)},k=()=>{const F=De(this,zo,R.promise=Av());O(F)},V=J(this,zo);switch(V.status){case"pending":e.queryHash===r.queryHash&&O(V);break;case"fulfilled":(R.status==="error"||R.data!==V.value)&&k();break;case"rejected":(R.status!=="error"||R.error!==V.reason)&&k();break}}return R}updateResult(){const e=J(this,ar),n=this.createResult(J(this,_t),this.options);if(De(this,Xa,J(this,_t).state),De(this,Mc,this.options),J(this,Xa).data!==void 0&&De(this,Vc,J(this,_t)),Cv(n,e))return;De(this,ar,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!J(this,Uc).size)return!0;const c=new Set(a??J(this,Uc));return this.options.throwOnError&&c.add("error"),Object.keys(J(this,ar)).some(u=>{const h=u;return J(this,ar)[h]!==e[h]&&c.has(h)})};wt(this,kt,FT).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&wt(this,kt,Dv).call(this)}},_r=new WeakMap,_t=new WeakMap,qd=new WeakMap,ar=new WeakMap,Xa=new WeakMap,Mc=new WeakMap,zo=new WeakMap,Bo=new WeakMap,Wd=new WeakMap,Fc=new WeakMap,Vc=new WeakMap,Ja=new WeakMap,Za=new WeakMap,qo=new WeakMap,Uc=new WeakMap,kt=new WeakSet,ed=function(e){wt(this,kt,Fv).call(this);let n=J(this,_t).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Er)),n},Rv=function(){wt(this,kt,Lv).call(this);const e=Go(this.options.staleTime,J(this,_t));if(il||J(this,ar).isStale||!Tv(e))return;const r=IT(J(this,ar).dataUpdatedAt,e)+1;De(this,Ja,setTimeout(()=>{J(this,ar).isStale||this.updateResult()},r))},kv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(J(this,_t)):this.options.refetchInterval)??!1},Ov=function(e){wt(this,kt,Mv).call(this),De(this,qo,e),!(il||Ns(this.options.enabled,J(this,_t))===!1||!Tv(J(this,qo))||J(this,qo)===0)&&De(this,Za,setInterval(()=>{(this.options.refetchIntervalInBackground||Yx.isFocused())&&wt(this,kt,ed).call(this)},J(this,qo)))},Dv=function(){wt(this,kt,Rv).call(this),wt(this,kt,Ov).call(this,wt(this,kt,kv).call(this))},Lv=function(){J(this,Ja)&&(clearTimeout(J(this,Ja)),De(this,Ja,void 0))},Mv=function(){J(this,Za)&&(clearInterval(J(this,Za)),De(this,Za,void 0))},Fv=function(){const e=J(this,_r).getQueryCache().build(J(this,_r),this.options);if(e===J(this,_t))return;const n=J(this,_t);De(this,_t,e),De(this,qd,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},FT=function(e){$n.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(J(this,ar))}),J(this,_r).getQueryCache().notify({query:J(this,_t),type:"observerResultsUpdated"})})},Z1);function RM(t,e){return Ns(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function wb(t,e){return RM(t,e)||t.state.data!==void 0&&Vv(t,e,e.refetchOnMount)}function Vv(t,e,n){if(Ns(e.enabled,t)!==!1&&Go(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Xx(t,e)}return!1}function _b(t,e,n,r){return(t!==e||Ns(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Xx(t,n)}function Xx(t,e){return Ns(e.enabled,t)!==!1&&t.isStaleByTime(Go(e.staleTime,t))}function kM(t,e){return!Cv(t.getCurrentResult(),e)}var OM=class extends MT{constructor(t,e){super(t,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions({...t,behavior:xp()})}getOptimisticResult(t){return t.behavior=xp(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,e){var b,_;const{state:n}=t,r=super.createResult(t,e),{isFetching:s,isRefetching:a,isError:c,isRefetchError:u}=r,h=(_=(b=n.fetchMeta)==null?void 0:b.fetchMore)==null?void 0:_.direction,f=c&&h==="forward",g=s&&h==="forward",y=c&&h==="backward",v=s&&h==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:jM(e,n.data),hasPreviousPage:AM(e,n.data),isFetchNextPageError:f,isFetchingNextPage:g,isFetchPreviousPageError:y,isFetchingPreviousPage:v,isRefetchError:u&&!f&&!y,isRefetching:a&&!g&&!v}}},VT=E.createContext(void 0),Jx=t=>{const e=E.useContext(VT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},DM=({client:t,children:e})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(VT.Provider,{value:t,children:e})),UT=E.createContext(!1),LM=()=>E.useContext(UT);UT.Provider;function MM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var FM=E.createContext(MM()),VM=()=>E.useContext(FM),UM=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},$M=t=>{E.useEffect(()=>{t.clearReset()},[t])},zM=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||yM(n,[t.error,r])),BM=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},qM=(t,e)=>t.isLoading&&t.isFetching&&!e,WM=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Eb=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function $T(t,e,n){var y,v,w,b,_;const r=LM(),s=VM(),a=Jx(),c=a.defaultQueryOptions(t);(v=(y=a.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||v.call(y,c),c._optimisticResults=r?"isRestoring":"optimistic",BM(c),UM(c,s),$M(s);const u=!a.getQueryCache().get(c.queryHash),[h]=E.useState(()=>new e(a,c)),f=h.getOptimisticResult(c),g=!r&&t.subscribed!==!1;if(E.useSyncExternalStore(E.useCallback(x=>{const j=g?h.subscribe($n.batchCalls(x)):Er;return h.updateResult(),j},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),E.useEffect(()=>{h.setOptions(c)},[c,h]),WM(c,f))throw Eb(c,h,s);if(zM({result:f,errorResetBoundary:s,throwOnError:c.throwOnError,query:a.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw f.error;if((b=(w=a.getDefaultOptions().queries)==null?void 0:w._experimental_afterQuery)==null||b.call(w,c,f),c.experimental_prefetchInRender&&!il&&qM(f,r)){const x=u?Eb(c,h,s):(_=a.getQueryCache().get(c.queryHash))==null?void 0:_.promise;x==null||x.catch(Er).finally(()=>{h.updateResult()})}return c.notifyOnChangeProps?f:h.trackResult(f)}function HM(t,e){return $T(t,MT)}function KM(t,e){return $T(t,OM)}/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cd(){return Cd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cd.apply(this,arguments)}var Wo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wo||(Wo={}));const bb="popstate";function GM(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:c,hash:u}=r.location;return Uv("",{pathname:a,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:wp(s)}return YM(e,n,null,t)}function on(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QM(){return Math.random().toString(36).substr(2,8)}function Nb(t,e){return{usr:t.state,key:t.key,idx:e}}function Uv(t,e,n,r){return n===void 0&&(n=null),Cd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?su(e):e,{state:n,key:e&&e.key||r||QM()})}function wp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function su(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function YM(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,u=Wo.Pop,h=null,f=g();f==null&&(f=0,c.replaceState(Cd({},c.state,{idx:f}),""));function g(){return(c.state||{idx:null}).idx}function y(){u=Wo.Pop;let x=g(),j=x==null?null:x-f;f=x,h&&h({action:u,location:_.location,delta:j})}function v(x,j){u=Wo.Push;let C=Uv(_.location,x,j);f=g()+1;let I=Nb(C,f),M=_.createHref(C);try{c.pushState(I,"",M)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(M)}a&&h&&h({action:u,location:_.location,delta:1})}function w(x,j){u=Wo.Replace;let C=Uv(_.location,x,j);f=g();let I=Nb(C,f),M=_.createHref(C);c.replaceState(I,"",M),a&&h&&h({action:u,location:_.location,delta:0})}function b(x){let j=s.location.origin!=="null"?s.location.origin:s.location.href,C=typeof x=="string"?x:wp(x);return C=C.replace(/ $/,"%20"),on(j,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,j)}let _={get action(){return u},get location(){return t(s,c)},listen(x){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(bb,y),h=x,()=>{s.removeEventListener(bb,y),h=null}},createHref(x){return e(s,x)},createURL:b,encodeLocation(x){let j=b(x);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:v,replace:w,go(x){return c.go(x)}};return _}var Sb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Sb||(Sb={}));function XM(t,e,n){return n===void 0&&(n="/"),JM(t,e,n)}function JM(t,e,n,r){let s=typeof e=="string"?su(e):e,a=Wc(s.pathname||"/",n);if(a==null)return null;let c=BT(t);ZM(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=u4(a);u=l4(c[h],f)}return u}function BT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,c,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(on(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=Qo([r,h.relativePath]),g=n.concat(h);a.children&&a.children.length>0&&(on(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),BT(a.children,e,g,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:o4(f,a.index),routesMeta:g})};return t.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,c);else for(let h of qT(a.path))s(a,c,h)}),e}function qT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=qT(r.join("/")),u=[];return u.push(...c.map(h=>h===""?a:[a,h].join("/"))),s&&u.push(...c),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function ZM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:a4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const e4=/^:[\w-]+$/,t4=3,n4=2,r4=1,s4=10,i4=-2,Tb=t=>t==="*";function o4(t,e){let n=t.split("/"),r=n.length;return n.some(Tb)&&(r+=i4),e&&(r+=n4),n.filter(s=>!Tb(s)).reduce((s,a)=>s+(e4.test(a)?t4:a===""?r4:s4),r)}function a4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function l4(t,e,n){let{routesMeta:r}=t,s={},a="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=$v({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),v=h.route;if(!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:Qo([a,y.pathname]),pathnameBase:p4(Qo([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=Qo([a,y.pathnameBase]))}return c}function $v(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=c4(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,g,y)=>{let{paramName:v,isOptional:w}=g;if(v==="*"){let _=u[y]||"";c=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const b=u[y];return w&&!b?f[v]=void 0:f[v]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:t}}function c4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),zT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function u4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Wc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function d4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?su(t):t;return{pathname:n?n.startsWith("/")?n:h4(n,e):e,search:m4(r),hash:g4(s)}}function h4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ky(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function f4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Zx(t,e){let n=f4(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ew(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=su(t):(s=Cd({},t),on(!s.pathname||!s.pathname.includes("?"),ky("?","pathname","search",s)),on(!s.pathname||!s.pathname.includes("#"),ky("#","pathname","hash",s)),on(!s.search||!s.search.includes("#"),ky("#","search","hash",s)));let a=t===""||s.pathname==="",c=a?"/":s.pathname,u;if(c==null)u=n;else{let y=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let h=d4(s,u),f=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}const Qo=t=>t.join("/").replace(/\/\/+/g,"/"),p4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),m4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,g4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function y4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const WT=["post","put","patch","delete"];new Set(WT);const v4=["get",...WT];new Set(v4);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Id(){return Id=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Id.apply(this,arguments)}const sm=E.createContext(null),HT=E.createContext(null),eo=E.createContext(null),im=E.createContext(null),pi=E.createContext({outlet:null,matches:[],isDataRoute:!1}),KT=E.createContext(null);function x4(t,e){let{relative:n}=e===void 0?{}:e;iu()||on(!1);let{basename:r,navigator:s}=E.useContext(eo),{hash:a,pathname:c,search:u}=om(t,{relative:n}),h=c;return r!=="/"&&(h=c==="/"?r:Qo([r,c])),s.createHref({pathname:h,search:u,hash:a})}function iu(){return E.useContext(im)!=null}function to(){return iu()||on(!1),E.useContext(im).location}function GT(t){E.useContext(eo).static||E.useLayoutEffect(t)}function ou(){let{isDataRoute:t}=E.useContext(pi);return t?O4():w4()}function w4(){iu()||on(!1);let t=E.useContext(sm),{basename:e,future:n,navigator:r}=E.useContext(eo),{matches:s}=E.useContext(pi),{pathname:a}=to(),c=JSON.stringify(Zx(s,n.v7_relativeSplatPath)),u=E.useRef(!1);return GT(()=>{u.current=!0}),E.useCallback(function(f,g){if(g===void 0&&(g={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let y=ew(f,JSON.parse(c),a,g.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Qo([e,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[e,r,c,a,t])}const _4=E.createContext(null);function E4(t){let e=E.useContext(pi).outlet;return e&&E.createElement(_4.Provider,{value:t},e)}function QT(){let{matches:t}=E.useContext(pi),e=t[t.length-1];return e?e.params:{}}function om(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=E.useContext(eo),{matches:s}=E.useContext(pi),{pathname:a}=to(),c=JSON.stringify(Zx(s,r.v7_relativeSplatPath));return E.useMemo(()=>ew(t,JSON.parse(c),a,n==="path"),[t,c,a,n])}function b4(t,e){return N4(t,e)}function N4(t,e,n,r){iu()||on(!1);let{navigator:s}=E.useContext(eo),{matches:a}=E.useContext(pi),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=to(),g;if(e){var y;let x=typeof e=="string"?su(e):e;h==="/"||(y=x.pathname)!=null&&y.startsWith(h)||on(!1),g=x}else g=f;let v=g.pathname||"/",w=v;if(h!=="/"){let x=h.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=XM(t,{pathname:w}),_=j4(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:Qo([h,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:Qo([h,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,n,r);return e&&_?E.createElement(im.Provider,{value:{location:Id({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Wo.Pop}},_):_}function S4(){let t=k4(),e=y4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:s},n):null,null)}const T4=E.createElement(S4,null);class C4 extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(pi.Provider,{value:this.props.routeContext},E.createElement(KT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I4(t){let{routeContext:e,match:n,children:r}=t,s=E.useContext(sm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(pi.Provider,{value:e},r)}function j4(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let g=c.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);g>=0||on(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let y=c[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=g),y.route.id){let{loaderData:v,errors:w}=n,b=y.route.loader&&v[y.route.id]===void 0&&(!w||w[y.route.id]===void 0);if(y.route.lazy||b){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((g,y,v)=>{let w,b=!1,_=null,x=null;n&&(w=u&&y.route.id?u[y.route.id]:void 0,_=y.route.errorElement||T4,h&&(f<0&&v===0?(D4("route-fallback"),b=!0,x=null):f===v&&(b=!0,x=y.route.hydrateFallbackElement||null)));let j=e.concat(c.slice(0,v+1)),C=()=>{let I;return w?I=_:b?I=x:y.route.Component?I=E.createElement(y.route.Component,null):y.route.element?I=y.route.element:I=g,E.createElement(I4,{match:y,routeContext:{outlet:g,matches:j,isDataRoute:n!=null},children:I})};return n&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?E.createElement(C4,{location:n.location,revalidation:n.revalidation,component:_,error:w,children:C(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):C()},null)}var YT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(YT||{}),XT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(XT||{});function A4(t){let e=E.useContext(sm);return e||on(!1),e}function P4(t){let e=E.useContext(HT);return e||on(!1),e}function R4(t){let e=E.useContext(pi);return e||on(!1),e}function JT(t){let e=R4(),n=e.matches[e.matches.length-1];return n.route.id||on(!1),n.route.id}function k4(){var t;let e=E.useContext(KT),n=P4(),r=JT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function O4(){let{router:t}=A4(YT.UseNavigateStable),e=JT(XT.UseNavigateStable),n=E.useRef(!1);return GT(()=>{n.current=!0}),E.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Id({fromRouteId:e},a)))},[t,e])}const Cb={};function D4(t,e,n){Cb[t]||(Cb[t]=!0)}function Yf(t){let{to:e,replace:n,state:r,relative:s}=t;iu()||on(!1);let{future:a,static:c}=E.useContext(eo),{matches:u}=E.useContext(pi),{pathname:h}=to(),f=ou(),g=ew(e,Zx(u,a.v7_relativeSplatPath),h,s==="path"),y=JSON.stringify(g);return E.useEffect(()=>f(JSON.parse(y),{replace:n,state:r,relative:s}),[f,y,s,n,r]),null}function L4(t){return E4(t.context)}function $t(t){on(!1)}function M4(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Wo.Pop,navigator:a,static:c=!1,future:u}=t;iu()&&on(!1);let h=e.replace(/^\/*/,"/"),f=E.useMemo(()=>({basename:h,navigator:a,static:c,future:Id({v7_relativeSplatPath:!1},u)}),[h,u,a,c]);typeof r=="string"&&(r=su(r));let{pathname:g="/",search:y="",hash:v="",state:w=null,key:b="default"}=r,_=E.useMemo(()=>{let x=Wc(g,h);return x==null?null:{location:{pathname:x,search:y,hash:v,state:w,key:b},navigationType:s}},[h,g,y,v,w,b,s]);return _==null?null:E.createElement(eo.Provider,{value:f},E.createElement(im.Provider,{children:n,value:_}))}function F4(t){let{children:e,location:n}=t;return b4(zv(e),n)}new Promise(()=>{});function zv(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(r,s)=>{if(!E.isValidElement(r))return;let a=[...e,s];if(r.type===E.Fragment){n.push.apply(n,zv(r.props.children,a));return}r.type!==$t&&on(!1),!r.props.index||!r.props.children||on(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=zv(r.props.children,a)),n.push(c)}),n}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _p(){return _p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_p.apply(this,arguments)}function ZT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function V4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function U4(t,e){return t.button===0&&(!e||e==="_self")&&!V4(t)}function Bv(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function $4(t,e){let n=Bv(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const z4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],B4=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],q4="6";try{window.__reactRouterVersion=q4}catch{}const W4=E.createContext({isTransitioning:!1}),H4="startTransition",Ib=nS[H4];function K4(t){let{basename:e,children:n,future:r,window:s}=t,a=E.useRef();a.current==null&&(a.current=GM({window:s,v5Compat:!0}));let c=a.current,[u,h]=E.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},g=E.useCallback(y=>{f&&Ib?Ib(()=>h(y)):h(y)},[h,f]);return E.useLayoutEffect(()=>c.listen(g),[c,g]),E.createElement(M4,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:r})}const G4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zn=E.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:c,state:u,target:h,to:f,preventScrollReset:g,unstable_viewTransition:y}=e,v=ZT(e,z4),{basename:w}=E.useContext(eo),b,_=!1;if(typeof f=="string"&&Q4.test(f)&&(b=f,G4))try{let I=new URL(window.location.href),M=f.startsWith("//")?new URL(I.protocol+f):new URL(f),U=Wc(M.pathname,w);M.origin===I.origin&&U!=null?f=U+M.search+M.hash:_=!0}catch{}let x=x4(f,{relative:s}),j=X4(f,{replace:c,state:u,target:h,preventScrollReset:g,relative:s,unstable_viewTransition:y});function C(I){r&&r(I),I.defaultPrevented||j(I)}return E.createElement("a",_p({},v,{href:b||x,onClick:_||a?r:C,ref:n,target:h}))}),jb=E.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:c=!1,style:u,to:h,unstable_viewTransition:f,children:g}=e,y=ZT(e,B4),v=om(h,{relative:y.relative}),w=to(),b=E.useContext(HT),{navigator:_,basename:x}=E.useContext(eo),j=b!=null&&J4(v)&&f===!0,C=_.encodeLocation?_.encodeLocation(v).pathname:v.pathname,I=w.pathname,M=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(I=I.toLowerCase(),M=M?M.toLowerCase():null,C=C.toLowerCase()),M&&x&&(M=Wc(M,x)||M);const U=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let z=I===C||!c&&I.startsWith(C)&&I.charAt(U)==="/",P=M!=null&&(M===C||!c&&M.startsWith(C)&&M.charAt(C.length)==="/"),R={isActive:z,isPending:P,isTransitioning:j},D=z?r:void 0,O;typeof a=="function"?O=a(R):O=[a,z?"active":null,P?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let k=typeof u=="function"?u(R):u;return E.createElement(Zn,_p({},y,{"aria-current":D,className:O,ref:n,style:k,to:h,unstable_viewTransition:f}),typeof g=="function"?g(R):g)});var qv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(qv||(qv={}));var Ab;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ab||(Ab={}));function Y4(t){let e=E.useContext(sm);return e||on(!1),e}function X4(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u}=e===void 0?{}:e,h=ou(),f=to(),g=om(t,{relative:c});return E.useCallback(y=>{if(U4(y,n)){y.preventDefault();let v=r!==void 0?r:wp(f)===wp(g);h(t,{replace:v,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u})}},[f,h,g,r,s,n,t,a,c,u])}function Yd(t){let e=E.useRef(Bv(t)),n=E.useRef(!1),r=to(),s=E.useMemo(()=>$4(r.search,n.current?null:e.current),[r.search]),a=ou(),c=E.useCallback((u,h)=>{const f=Bv(typeof u=="function"?u(s):u);n.current=!0,a("?"+f,h)},[a,s]);return[s,c]}function J4(t,e){e===void 0&&(e={});let n=E.useContext(W4);n==null&&on(!1);let{basename:r}=Y4(qv.useViewTransitionState),s=om(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Wc(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=Wc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return $v(s.pathname,c)!=null||$v(s.pathname,a)!=null}const Z4=()=>{};var Pb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},eF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],c=t[n++],u=t[n++],h=((s&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},tC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],c=s+1<t.length,u=c?t[s+1]:0,h=s+2<t.length,f=h?t[s+2]:0,g=a>>2,y=(a&3)<<4|u>>4;let v=(u&15)<<2|f>>6,w=f&63;h||(w=64,c||(v=64)),r.push(n[g],n[y],n[v],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||u==null||f==null||y==null)throw new tF;const v=a<<2|u>>4;if(r.push(v),f!==64){const w=u<<4&240|f>>2;if(r.push(w),y!==64){const b=f<<6&192|y;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nF=function(t){const e=eC(t);return tC.encodeByteArray(e,!0)},Ep=function(t){return nF(t).replace(/\./g,"")},nC=function(t){try{return tC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=()=>rF().__FIREBASE_DEFAULTS__,iF=()=>{if(typeof process>"u"||typeof Pb>"u")return;const t=Pb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nC(t[1]);return e&&JSON.parse(e)},am=()=>{try{return Z4()||sF()||iF()||oF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rC=t=>{var e,n;return(n=(e=am())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aF=t=>{const e=rC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sC=()=>{var t;return(t=am())===null||t===void 0?void 0:t.config},iC=t=>{var e;return(e=am())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ep(JSON.stringify(n)),Ep(JSON.stringify(c)),""].join(".")}const dd={};function uF(){const t={prod:[],emulator:[]};for(const e of Object.keys(dd))dd[e]?t.emulator.push(e):t.prod.push(e);return t}function dF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Rb=!1;function oC(t,e){if(typeof window>"u"||typeof document>"u"||!gl(window.location.host)||dd[t]===e||dd[t]||Rb)return;dd[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",a=uF().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Rb=!0,c()},v}function g(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=dF(r),w=n("text"),b=document.getElementById(w)||document.createElement("span"),_=n("learnmore"),x=document.getElementById(_)||document.createElement("a"),j=n("preprendIcon"),C=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const I=v.element;u(I),g(x,_);const M=f();h(C,j),I.append(C,b,x,M),document.body.appendChild(I)}a?(b.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tr())}function fF(){var t;const e=(t=am())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yF(){const t=tr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vF(){return!fF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aC(){try{return typeof indexedDB=="object"}catch{return!1}}function lC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}function xF(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF="FirebaseError";class Fs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wF,Object.setPrototypeOf(this,Fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yl.prototype.create)}}class yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?_F(a,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Fs(s,u,r)}}function _F(t,e){return t.replace(EF,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const EF=/\{\$([^}]+)}/g;function bF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ol(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],c=e[s];if(kb(a)&&kb(c)){if(!ol(a,c))return!1}else if(a!==c)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function kb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function td(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function nd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function NF(t,e){const n=new SF(t,e);return n.subscribe.bind(n)}class SF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");TF(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Oy),s.error===void 0&&(s.error=Oy),s.complete===void 0&&(s.complete=Oy);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Oy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t){return t&&t._delegate?t._delegate:t}class is{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jF(e))try{this.getOrInitializeService({instanceIdentifier:za})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=za){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=za){return this.instances.has(e)}getOptions(e=za){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=za){return this.component?this.component.multipleInstances?e:za:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IF(t){return t===za?void 0:t}function jF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pt||(pt={}));const PF={debug:pt.DEBUG,verbose:pt.VERBOSE,info:pt.INFO,warn:pt.WARN,error:pt.ERROR,silent:pt.SILENT},RF=pt.INFO,kF={[pt.DEBUG]:"log",[pt.VERBOSE]:"log",[pt.INFO]:"info",[pt.WARN]:"warn",[pt.ERROR]:"error"},OF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=kF[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nw{constructor(e){this.name=e,this._logLevel=RF,this._logHandler=OF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pt.DEBUG,...e),this._logHandler(this,pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pt.VERBOSE,...e),this._logHandler(this,pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pt.INFO,...e),this._logHandler(this,pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pt.WARN,...e),this._logHandler(this,pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pt.ERROR,...e),this._logHandler(this,pt.ERROR,...e)}}const DF=(t,e)=>e.some(n=>t instanceof n);let Ob,Db;function LF(){return Ob||(Ob=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MF(){return Db||(Db=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cC=new WeakMap,Wv=new WeakMap,uC=new WeakMap,Dy=new WeakMap,rw=new WeakMap;function FF(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n($i(t.result)),s()},c=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&cC.set(n,t)}).catch(()=>{}),rw.set(e,t),e}function VF(t){if(Wv.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),s()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});Wv.set(t,e)}let Hv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $i(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UF(t){Hv=t(Hv)}function $F(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ly(this),e,...n);return uC.set(r,e.sort?e.sort():[e]),$i(r)}:MF().includes(t)?function(...e){return t.apply(Ly(this),e),$i(cC.get(this))}:function(...e){return $i(t.apply(Ly(this),e))}}function zF(t){return typeof t=="function"?$F(t):(t instanceof IDBTransaction&&VF(t),DF(t,LF())?new Proxy(t,Hv):t)}function $i(t){if(t instanceof IDBRequest)return FF(t);if(Dy.has(t))return Dy.get(t);const e=zF(t);return e!==t&&(Dy.set(t,e),rw.set(e,t)),e}const Ly=t=>rw.get(t);function lm(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const c=indexedDB.open(t,e),u=$i(c);return r&&c.addEventListener("upgradeneeded",h=>{r($i(c.result),h.oldVersion,h.newVersion,$i(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}function My(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),$i(n).then(()=>{})}const BF=["get","getKey","getAll","getAllKeys","count"],qF=["put","add","delete","clear"],Fy=new Map;function Lb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fy.get(e))return Fy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=qF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BF.includes(n)))return;const a=async function(c,...u){const h=this.transaction(c,s?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),s&&h.done]))[0]};return Fy.set(e,a),a}UF(t=>({...t,get:(e,n,r)=>Lb(e,n)||t.get(e,n,r),has:(e,n)=>!!Lb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HF(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kv="@firebase/app",Mb="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new nw("@firebase/app"),KF="@firebase/app-compat",GF="@firebase/analytics-compat",QF="@firebase/analytics",YF="@firebase/app-check-compat",XF="@firebase/app-check",JF="@firebase/auth",ZF="@firebase/auth-compat",eV="@firebase/database",tV="@firebase/data-connect",nV="@firebase/database-compat",rV="@firebase/functions",sV="@firebase/functions-compat",iV="@firebase/installations",oV="@firebase/installations-compat",aV="@firebase/messaging",lV="@firebase/messaging-compat",cV="@firebase/performance",uV="@firebase/performance-compat",dV="@firebase/remote-config",hV="@firebase/remote-config-compat",fV="@firebase/storage",pV="@firebase/storage-compat",mV="@firebase/firestore",gV="@firebase/ai",yV="@firebase/firestore-compat",vV="firebase",xV="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="[DEFAULT]",wV={[Kv]:"fire-core",[KF]:"fire-core-compat",[QF]:"fire-analytics",[GF]:"fire-analytics-compat",[XF]:"fire-app-check",[YF]:"fire-app-check-compat",[JF]:"fire-auth",[ZF]:"fire-auth-compat",[eV]:"fire-rtdb",[tV]:"fire-data-connect",[nV]:"fire-rtdb-compat",[rV]:"fire-fn",[sV]:"fire-fn-compat",[iV]:"fire-iid",[oV]:"fire-iid-compat",[aV]:"fire-fcm",[lV]:"fire-fcm-compat",[cV]:"fire-perf",[uV]:"fire-perf-compat",[dV]:"fire-rc",[hV]:"fire-rc-compat",[fV]:"fire-gcs",[pV]:"fire-gcs-compat",[mV]:"fire-fst",[yV]:"fire-fst-compat",[gV]:"fire-vertex","fire-js":"fire-js",[vV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp=new Map,_V=new Map,Qv=new Map;function Fb(t,e){try{t.container.addComponent(e)}catch(n){Ki.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Os(t){const e=t.name;if(Qv.has(e))return Ki.debug(`There were multiple attempts to register component ${e}.`),!1;Qv.set(e,t);for(const n of bp.values())Fb(n,t);for(const n of _V.values())Fb(n,t);return!0}function vl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ts(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yo=new yl("app","Firebase",EV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=xV;function dC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gv,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Yo.create("bad-app-name",{appName:String(s)});if(n||(n=sC()),!n)throw Yo.create("no-options");const a=bp.get(s);if(a){if(ol(n,a.options)&&ol(r,a.config))return a;throw Yo.create("duplicate-app",{appName:s})}const c=new AF(s);for(const h of Qv.values())c.addComponent(h);const u=new bV(n,r,c);return bp.set(s,u),u}function sw(t=Gv){const e=bp.get(t);if(!e&&t===Gv&&sC())return dC();if(!e)throw Yo.create("no-app",{appName:t});return e}function Ir(t,e,n){var r;let s=(r=wV[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ki.warn(u.join(" "));return}Os(new is(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV="firebase-heartbeat-database",SV=1,jd="firebase-heartbeat-store";let Vy=null;function hC(){return Vy||(Vy=lm(NV,SV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yo.create("idb-open",{originalErrorMessage:t.message})})),Vy}async function TV(t){try{const n=(await hC()).transaction(jd),r=await n.objectStore(jd).get(fC(t));return await n.done,r}catch(e){if(e instanceof Fs)Ki.warn(e.message);else{const n=Yo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ki.warn(n.message)}}}async function Vb(t,e){try{const r=(await hC()).transaction(jd,"readwrite");await r.objectStore(jd).put(e,fC(t)),await r.done}catch(n){if(n instanceof Fs)Ki.warn(n.message);else{const r=Yo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ki.warn(r.message)}}}function fC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=1024,IV=30;class jV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Ub();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>IV){const c=RV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ki.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ub(),{heartbeatsToSend:r,unsentEntries:s}=AV(this._heartbeatsCache.heartbeats),a=Ep(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Ki.warn(n),""}}}function Ub(){return new Date().toISOString().substring(0,10)}function AV(t,e=CV){const n=[];let r=t.slice();for(const s of t){const a=n.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),$b(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$b(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aC()?lC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $b(t){return Ep(JSON.stringify({version:2,heartbeats:t})).length}function RV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(t){Os(new is("platform-logger",e=>new WF(e),"PRIVATE")),Os(new is("heartbeat",e=>new jV(e),"PRIVATE")),Ir(Kv,Mb,t),Ir(Kv,Mb,"esm2017"),Ir("fire-js","")}kV("");var Jn=function(){return Jn=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Jn.apply(this,arguments)};function au(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function pC(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function mC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OV=mC,gC=new yl("auth","Firebase",mC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=new nw("@firebase/auth");function DV(t,...e){Np.logLevel<=pt.WARN&&Np.warn(`Auth (${xl}): ${t}`,...e)}function Xf(t,...e){Np.logLevel<=pt.ERROR&&Np.error(`Auth (${xl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t,...e){throw iw(t,...e)}function oi(t,...e){return iw(t,...e)}function yC(t,e,n){const r=Object.assign(Object.assign({},OV()),{[e]:n});return new yl("auth","Firebase",r).create(e,{appName:t.name})}function Xo(t){return yC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gC.create(t,...e)}function et(t,e,...n){if(!t)throw iw(e,...n)}function Vi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xf(e),new Error(e)}function Gi(t,e){t||Vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function LV(){return zb()==="http:"||zb()==="https:"}function zb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LV()||mF()||"connection"in navigator)?navigator.onLine:!0}function FV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gi(n>e,"Short delay should be less than long delay!"),this.isMobile=hF()||gF()}get(){return MV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e){Gi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$V=new Jd(3e4,6e4);function wl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function pa(t,e,n,r,s={}){return xC(t,s,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=Xd(Object.assign({key:t.config.apiKey},c)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:h},a);return pF()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&gl(t.emulatorConfig.host)&&(f.credentials="include"),vC.fetch()(await wC(t,t.config.apiHost,n,u),f)})}async function xC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},VV),e);try{const s=new BV(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw kf(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw kf(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw kf(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw kf(t,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw yC(t,g,f);Ds(t,g)}}catch(s){if(s instanceof Fs)throw s;Ds(t,"network-request-failed",{message:String(s)})}}async function cm(t,e,n,r,s={}){const a=await pa(t,e,n,r,s);return"mfaPendingCredential"in a&&Ds(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function wC(t,e,n,r){const s=`${e}${n}?${r}`,a=t,c=a.config.emulator?ow(t.config,s):`${t.config.apiScheme}://${s}`;return UV.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function zV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(oi(this.auth,"network-request-failed")),$V.get())})}}function kf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=oi(t,e,r);return s.customData._tokenResponse=n,s}function Bb(t){return t!==void 0&&t.enterprise!==void 0}class qV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return zV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WV(t,e){return pa(t,"GET","/v2/recaptchaConfig",wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(t,e){return pa(t,"POST","/v1/accounts:delete",e)}async function Sp(t,e){return pa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KV(t,e=!1){const n=tn(t),r=await n.getIdToken(e),s=aw(r);et(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:hd(Uy(s.auth_time)),issuedAtTime:hd(Uy(s.iat)),expirationTime:hd(Uy(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Uy(t){return Number(t)*1e3}function aw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xf("JWT malformed, contained fewer than 3 sections"),null;try{const s=nC(n);return s?JSON.parse(s):(Xf("Failed to decode base64 JWT payload"),null)}catch(s){return Xf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function qb(t){const e=aw(t);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ad(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fs&&GV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function GV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hd(this.lastLoginAt),this.creationTime=hd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tp(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ad(t,Sp(n,{idToken:r}));et(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?_C(a.providerUserInfo):[],u=XV(t.providerData,c),h=t.isAnonymous,f=!(t.email&&a.passwordHash)&&!(u!=null&&u.length),g=h?f:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Xv(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function YV(t){const e=tn(t);await Tp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XV(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function _C(t){return t.map(e=>{var{providerId:n}=e,r=au(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(t,e){const n=await xC(t,{},async()=>{const r=Xd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,c=await wC(t,s,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return t.emulatorConfig&&gl(t.emulatorConfig.host)&&(h.credentials="include"),vC.fetch()(c,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZV(t,e){return pa(t,"POST","/v2/accounts:revokeToken",wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){et(e.length!==0,"internal-error");const n=qb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await JV(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,c=new Ec;return r&&(et(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(et(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(et(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ec,this.toJSON())}_performRefresh(){return Vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t,e){et(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ts{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=au(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Xv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Ad(this,this.stsTokenManager.getToken(this.auth,e));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return KV(this,e)}reload(){return YV(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ts(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Tp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ts(this.auth.app))return Promise.reject(Xo(this.auth));const e=await this.getIdToken();return await Ad(this,HV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,c,u,h,f,g;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(s=n.email)!==null&&s!==void 0?s:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,b=(c=n.photoURL)!==null&&c!==void 0?c:void 0,_=(u=n.tenantId)!==null&&u!==void 0?u:void 0,x=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,j=(f=n.createdAt)!==null&&f!==void 0?f:void 0,C=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:I,emailVerified:M,isAnonymous:U,providerData:z,stsTokenManager:P}=n;et(I&&P,e,"internal-error");const R=Ec.fromJSON(this.name,P);et(typeof I=="string",e,"internal-error"),jo(y,e.name),jo(v,e.name),et(typeof M=="boolean",e,"internal-error"),et(typeof U=="boolean",e,"internal-error"),jo(w,e.name),jo(b,e.name),jo(_,e.name),jo(x,e.name),jo(j,e.name),jo(C,e.name);const D=new Ts({uid:I,auth:e,email:v,emailVerified:M,displayName:y,isAnonymous:U,photoURL:b,phoneNumber:w,tenantId:_,stsTokenManager:R,createdAt:j,lastLoginAt:C});return z&&Array.isArray(z)&&(D.providerData=z.map(O=>Object.assign({},O))),x&&(D._redirectEventId=x),D}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ec;s.updateFromServerResponse(n);const a=new Ts({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Tp(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];et(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?_C(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),u=new Ec;u.updateFromIdToken(r);const h=new Ts({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Xv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=new Map;function Ui(t){Gi(t instanceof Function,"Expected a class definition");let e=Wb.get(t);return e?(Gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Wb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}EC.type="NONE";const Hb=EC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t,e,n){return`firebase:${t}:${e}:${n}`}class bc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Jf(this.userKey,s.apiKey,a),this.fullPersistenceKey=Jf("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sp(this.auth,{idToken:e}).catch(()=>{});return n?Ts._fromGetAccountInfoResponse(this.auth,n,e):null}return Ts._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new bc(Ui(Hb),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||Ui(Hb);const c=Jf(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const v=await Sp(e,{idToken:g}).catch(()=>{});if(!v)break;y=await Ts._fromGetAccountInfoResponse(e,v,g)}else y=Ts._fromJSON(e,g);f!==a&&(u=y),a=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new bc(a,e,r):(a=h[0],u&&await a._set(c,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(c)}catch{}})),new bc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IC(e))return"Blackberry";if(jC(e))return"Webos";if(NC(e))return"Safari";if((e.includes("chrome/")||SC(e))&&!e.includes("edge/"))return"Chrome";if(CC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bC(t=tr()){return/firefox\//i.test(t)}function NC(t=tr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SC(t=tr()){return/crios\//i.test(t)}function TC(t=tr()){return/iemobile/i.test(t)}function CC(t=tr()){return/android/i.test(t)}function IC(t=tr()){return/blackberry/i.test(t)}function jC(t=tr()){return/webos/i.test(t)}function lw(t=tr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function e3(t=tr()){var e;return lw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function t3(){return yF()&&document.documentMode===10}function AC(t=tr()){return lw(t)||CC(t)||jC(t)||IC(t)||/windows phone/i.test(t)||TC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t,e=[]){let n;switch(t){case"Browser":n=Kb(tr());break;case"Worker":n=`${Kb(tr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((c,u)=>{try{const h=e(a);c(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3(t,e={}){return pa(t,"GET","/v2/passwordPolicy",wl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=6;class i3{constructor(e){var n,r,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:s3,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,c,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gb(this),this.idTokenSubscription=new Gb(this),this.beforeStateQueue=new n3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ui(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await bc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sp(this,{idToken:e}),r=await Ts._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ts(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&(h!=null&&h.user)&&(s=h.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Tp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ts(this.app))return Promise.reject(Xo(this));const n=e?tn(e):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ts(this.app)?Promise.reject(Xo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ts(this.app)?Promise.reject(Xo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await r3(this),n=new i3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ui(e)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await bc.create(this,[Ui(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,s);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(ts(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&DV(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function lu(t){return tn(t)}class Gb{constructor(e){this.auth=e,this.observer=null,this.addObserver=NF(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a3(t){um=t}function RC(t){return um.loadJS(t)}function l3(){return um.recaptchaEnterpriseScript}function c3(){return um.gapiScript}function u3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class d3{constructor(){this.enterprise=new h3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class h3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const f3="recaptcha-enterprise",kC="NO_RECAPTCHA";class p3{constructor(e){this.type=f3,this.auth=lu(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{WV(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new qV(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,c(f.siteKey)}}).catch(h=>{u(h)})})}function s(a,c,u){const h=window.grecaptcha;Bb(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{c(f)}).catch(()=>{c(kC)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new d3().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!n&&Bb(window.grecaptcha))s(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=l3();h.length!==0&&(h+=u),RC(h).then(()=>{s(u,a,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function Qb(t,e,n,r=!1,s=!1){const a=new p3(t);let c;if(s)c=kC;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Yb(t,e,n,r,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Qb(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Qb(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t,e){const n=vl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(ol(a,e??{}))return s;Ds(s,"already-initialized")}return n.initialize({options:e})}function g3(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ui);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function y3(t,e,n){const r=lu(t);et(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=OC(e),{host:c,port:u}=v3(e),h=u===null?"":`:${u}`,f={url:`${a}//${c}${h}/`},g=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){et(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),et(ol(f,r.config.emulator)&&ol(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,gl(c)?(tw(`${a}//${c}${h}`),oC("Auth",!0)):x3()}function OC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function v3(t){const e=OC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Xb(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:Xb(c)}}}function Xb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function x3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vi("not implemented")}_getIdTokenResponse(e){return Vi("not implemented")}_linkToIdToken(e,n){return Vi("not implemented")}_getReauthenticationResolver(e){return Vi("not implemented")}}async function w3(t,e){return pa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _3(t,e){return cm(t,"POST","/v1/accounts:signInWithPassword",wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E3(t,e){return cm(t,"POST","/v1/accounts:signInWithEmailLink",wl(t,e))}async function b3(t,e){return cm(t,"POST","/v1/accounts:signInWithEmailLink",wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends cw{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Pd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Pd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yb(e,n,"signInWithPassword",_3);case"emailLink":return E3(e,{email:this._email,oobCode:this._password});default:Ds(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yb(e,r,"signUpPassword",w3);case"emailLink":return b3(e,{idToken:n,email:this._email,oobCode:this._password});default:Ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(t,e){return cm(t,"POST","/v1/accounts:signInWithIdp",wl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3="http://localhost";class al extends cw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new al(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ds("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=au(n,["providerId","signInMethod"]);if(!r||!s)return null;const c=new al(r,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Nc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Nc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nc(e,n)}buildRequest(){const e={requestUri:N3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function T3(t){const e=td(nd(t)).link,n=e?td(nd(e)).deep_link_id:null,r=td(nd(t)).deep_link_id;return(r?td(nd(r)).link:null)||r||n||e||t}class uw{constructor(e){var n,r,s,a,c,u;const h=td(nd(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,y=S3((s=h.mode)!==null&&s!==void 0?s:null);et(f&&g&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=g,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=T3(e);try{return new uw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this.providerId=cu.PROVIDER_ID}static credential(e,n){return Pd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=uw.parseLink(n);return et(r,"argument-error"),Pd._fromEmailAndCode(e,r.code,r.tenantId)}}cu.PROVIDER_ID="password";cu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd extends DC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends Zd{constructor(){super("facebook.com")}static credential(e){return al._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ko.credential(e.oauthAccessToken)}catch{return null}}}ko.FACEBOOK_SIGN_IN_METHOD="facebook.com";ko.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Zd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return al._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Oo.credential(n,r)}catch{return null}}}Oo.GOOGLE_SIGN_IN_METHOD="google.com";Oo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Zd{constructor(){super("github.com")}static credential(e){return al._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Do.credential(e.oauthAccessToken)}catch{return null}}}Do.GITHUB_SIGN_IN_METHOD="github.com";Do.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Zd{constructor(){super("twitter.com")}static credential(e,n){return al._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Lo.credential(n,r)}catch{return null}}}Lo.TWITTER_SIGN_IN_METHOD="twitter.com";Lo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Ts._fromIdTokenResponse(e,r,s),c=Jb(r);return new Hc({user:a,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Jb(r);return new Hc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Jb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends Fs{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Cp.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Cp(e,n,r,s)}}function LC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Cp._fromErrorAndOperation(t,a,e,r):a})}async function C3(t,e,n=!1){const r=await Ad(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Hc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I3(t,e,n=!1){const{auth:r}=t;if(ts(r.app))return Promise.reject(Xo(r));const s="reauthenticate";try{const a=await Ad(t,LC(r,s,e,t),n);et(a.idToken,r,"internal-error");const c=aw(a.idToken);et(c,r,"internal-error");const{sub:u}=c;return et(t.uid===u,r,"user-mismatch"),Hc._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ds(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MC(t,e,n=!1){if(ts(t.app))return Promise.reject(Xo(t));const r="signIn",s=await LC(t,r,e),a=await Hc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function j3(t,e){return MC(lu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A3(t){const e=lu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function P3(t,e,n){return ts(t.app)?Promise.reject(Xo(t)):j3(tn(t),cu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&A3(t),r})}function R3(t,e,n,r){return tn(t).onIdTokenChanged(e,n,r)}function k3(t,e,n){return tn(t).beforeAuthStateChanged(e,n)}function O3(t,e,n,r){return tn(t).onAuthStateChanged(e,n,r)}function D3(t){return tn(t).signOut()}const Ip="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ip,"1"),this.storage.removeItem(Ip),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=1e3,M3=10;class VC extends FC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);t3()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,M3):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},L3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VC.type="LOCAL";const F3=VC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC extends FC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}UC.type="SESSION";const $C=UC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new dm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async f=>f(n.origin,a)),h=await V3(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((u,h)=>{const f=dw("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(v.data.response);break;default:clearTimeout(g),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(){return window}function $3(t){ai().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(){return typeof ai().WorkerGlobalScope<"u"&&typeof ai().importScripts=="function"}async function z3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function B3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function q3(){return zC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="firebaseLocalStorageDb",W3=1,jp="firebaseLocalStorage",qC="fbase_key";class eh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hm(t,e){return t.transaction([jp],e?"readwrite":"readonly").objectStore(jp)}function H3(){const t=indexedDB.deleteDatabase(BC);return new eh(t).toPromise()}function Jv(){const t=indexedDB.open(BC,W3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(jp,{keyPath:qC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(jp)?e(r):(r.close(),await H3(),e(await Jv()))})})}async function Zb(t,e,n){const r=hm(t,!0).put({[qC]:e,value:n});return new eh(r).toPromise()}async function K3(t,e){const n=hm(t,!1).get(e),r=await new eh(n).toPromise();return r===void 0?null:r.value}function eN(t,e){const n=hm(t,!0).delete(e);return new eh(n).toPromise()}const G3=800,Q3=3;class WC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Q3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dm._getInstance(q3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await z3(),!this.activeServiceWorker)return;this.sender=new U3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||B3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jv();return await Zb(e,Ip,"1"),await eN(e,Ip),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>K3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>eN(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=hm(s,!1).getAll();return new eh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),G3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WC.type="LOCAL";const Y3=WC;new Jd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(t,e){return e?Ui(e):(et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw extends cw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Nc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Nc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function J3(t){return MC(t.auth,new hw(t),t.bypassAuthState)}function Z3(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),I3(n,new hw(t),t.bypassAuthState)}async function eU(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),C3(n,new hw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J3;case"linkViaPopup":case"linkViaRedirect":return eU;case"reauthViaPopup":case"reauthViaRedirect":return Z3;default:Ds(this.auth,"internal-error")}}resolve(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU=new Jd(2e3,1e4);class yc extends HC{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,yc.currentPopupAction&&yc.currentPopupAction.cancel(),yc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");const e=dw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tU.get())};e()}}yc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU="pendingRedirect",Zf=new Map;class rU extends HC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zf.get(this.auth._key());if(!e){try{const r=await sU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zf.set(this.auth._key(),e)}return this.bypassAuthState||Zf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sU(t,e){const n=aU(e),r=oU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function iU(t,e){Zf.set(t._key(),e)}function oU(t){return Ui(t._redirectPersistence)}function aU(t){return Jf(nU,t.config.apiKey,t.name)}async function lU(t,e,n=!1){if(ts(t.app))return Promise.reject(Xo(t));const r=lu(t),s=X3(r,e),c=await new rU(r,s,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=10*60*1e3;class uU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!KC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(oi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cU&&this.cachedEventUids.clear(),this.cachedEventUids.has(tN(e))}saveEventToCache(e){this.cachedEventUids.add(tN(e)),this.lastProcessedEventTime=Date.now()}}function tN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function KC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hU(t,e={}){return pa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pU=/^https?/;async function mU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hU(t);for(const n of e)try{if(gU(n))return}catch{}Ds(t,"unauthorized-domain")}function gU(t){const e=Yv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!pU.test(n))return!1;if(fU.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU=new Jd(3e4,6e4);function nN(){const t=ai().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function vU(t){return new Promise((e,n)=>{var r,s,a;function c(){nN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nN(),n(oi(t,"network-request-failed"))},timeout:yU.get()})}if(!((s=(r=ai().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=ai().gapi)===null||a===void 0)&&a.load)c();else{const u=u3("iframefcb");return ai()[u]=()=>{gapi.load?c():n(oi(t,"network-request-failed"))},RC(`${c3()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw ep=null,e})}let ep=null;function xU(t){return ep=ep||vU(t),ep}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=new Jd(5e3,15e3),_U="__/auth/iframe",EU="emulator/auth/iframe",bU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SU(t){const e=t.config;et(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ow(e,EU):`https://${t.config.authDomain}/${_U}`,r={apiKey:e.apiKey,appName:t.name,v:xl},s=NU.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Xd(r).slice(1)}`}async function TU(t){const e=await xU(t),n=ai().gapi;return et(n,t,"internal-error"),e.open({where:document.body,url:SU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bU,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const c=oi(t,"network-request-failed"),u=ai().setTimeout(()=>{a(c)},wU.get());function h(){ai().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IU=500,jU=600,AU="_blank",PU="http://localhost";class rN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RU(t,e,n,r=IU,s=jU){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},CU),{width:r.toString(),height:s.toString(),top:a,left:c}),f=tr().toLowerCase();n&&(u=SC(f)?AU:n),bC(f)&&(e=e||PU,h.scrollbars="yes");const g=Object.entries(h).reduce((v,[w,b])=>`${v}${w}=${b},`,"");if(e3(f)&&u!=="_self")return kU(e||"",u),new rN(null);const y=window.open(e||"",u,g);et(y,t,"popup-blocked");try{y.focus()}catch{}return new rN(y)}function kU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU="__/auth/handler",DU="emulator/auth/handler",LU=encodeURIComponent("fac");async function sN(t,e,n,r,s,a){et(t.config.authDomain,t,"auth-domain-config-required"),et(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xl,eventId:s};if(e instanceof DC){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",bF(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Zd){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await t._getAppCheckToken(),f=h?`#${LU}=${encodeURIComponent(h)}`:"";return`${MU(t)}?${Xd(u).slice(1)}${f}`}function MU({config:t}){return t.emulator?ow(t,DU):`https://${t.authDomain}/${OU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="webStorageSupport";class FU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$C,this._completeRedirectFn=lU,this._overrideRedirectResult=iU}async _openPopup(e,n,r,s){var a;Gi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await sN(e,n,r,Yv(),s);return RU(e,c,dw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await sN(e,n,r,Yv(),s);return $3(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Gi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await TU(e),r=new uU(e);return n.register("authEvent",s=>(et(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($y,{type:$y},s=>{var a;const c=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[$y];c!==void 0&&n(!!c),Ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return AC()||NC()||lw()}}const VU=FU;var iN="@firebase/auth",oN="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $U(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zU(t){Os(new is("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;et(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PC(t)},f=new o3(r,s,a,h);return g3(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Os(new is("auth-internal",e=>{const n=lu(e.getProvider("auth").getImmediate());return(r=>new UU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ir(iN,oN,$U(t)),Ir(iN,oN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU=5*60,qU=iC("authIdTokenMaxAge")||BU;let aN=null;const WU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qU)return;const s=n==null?void 0:n.token;aN!==s&&(aN=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function HU(t=sw()){const e=vl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=m3(t,{popupRedirectResolver:VU,persistence:[Y3,F3,$C]}),r=iC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=WU(a.toString());k3(n,c,()=>c(n.currentUser)),R3(n,u=>c(u))}}const s=rC("auth");return s&&y3(n,`http://${s}`),n}function KU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}a3({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=oi("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",KU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zU("Browser");var GU="firebase",QU="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(GU,QU,"app");var lN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jo,GC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function D(){}D.prototype=R.prototype,P.D=R.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(O,k,V){for(var F=Array(arguments.length-2),H=2;H<arguments.length;H++)F[H-2]=arguments[H];return R.prototype[k].apply(O,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,R,D){D||(D=0);var O=Array(16);if(typeof R=="string")for(var k=0;16>k;++k)O[k]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(k=0;16>k;++k)O[k]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=P.g[0],D=P.g[1],k=P.g[2];var V=P.g[3],F=R+(V^D&(k^V))+O[0]+3614090360&4294967295;R=D+(F<<7&4294967295|F>>>25),F=V+(k^R&(D^k))+O[1]+3905402710&4294967295,V=R+(F<<12&4294967295|F>>>20),F=k+(D^V&(R^D))+O[2]+606105819&4294967295,k=V+(F<<17&4294967295|F>>>15),F=D+(R^k&(V^R))+O[3]+3250441966&4294967295,D=k+(F<<22&4294967295|F>>>10),F=R+(V^D&(k^V))+O[4]+4118548399&4294967295,R=D+(F<<7&4294967295|F>>>25),F=V+(k^R&(D^k))+O[5]+1200080426&4294967295,V=R+(F<<12&4294967295|F>>>20),F=k+(D^V&(R^D))+O[6]+2821735955&4294967295,k=V+(F<<17&4294967295|F>>>15),F=D+(R^k&(V^R))+O[7]+4249261313&4294967295,D=k+(F<<22&4294967295|F>>>10),F=R+(V^D&(k^V))+O[8]+1770035416&4294967295,R=D+(F<<7&4294967295|F>>>25),F=V+(k^R&(D^k))+O[9]+2336552879&4294967295,V=R+(F<<12&4294967295|F>>>20),F=k+(D^V&(R^D))+O[10]+4294925233&4294967295,k=V+(F<<17&4294967295|F>>>15),F=D+(R^k&(V^R))+O[11]+2304563134&4294967295,D=k+(F<<22&4294967295|F>>>10),F=R+(V^D&(k^V))+O[12]+1804603682&4294967295,R=D+(F<<7&4294967295|F>>>25),F=V+(k^R&(D^k))+O[13]+4254626195&4294967295,V=R+(F<<12&4294967295|F>>>20),F=k+(D^V&(R^D))+O[14]+2792965006&4294967295,k=V+(F<<17&4294967295|F>>>15),F=D+(R^k&(V^R))+O[15]+1236535329&4294967295,D=k+(F<<22&4294967295|F>>>10),F=R+(k^V&(D^k))+O[1]+4129170786&4294967295,R=D+(F<<5&4294967295|F>>>27),F=V+(D^k&(R^D))+O[6]+3225465664&4294967295,V=R+(F<<9&4294967295|F>>>23),F=k+(R^D&(V^R))+O[11]+643717713&4294967295,k=V+(F<<14&4294967295|F>>>18),F=D+(V^R&(k^V))+O[0]+3921069994&4294967295,D=k+(F<<20&4294967295|F>>>12),F=R+(k^V&(D^k))+O[5]+3593408605&4294967295,R=D+(F<<5&4294967295|F>>>27),F=V+(D^k&(R^D))+O[10]+38016083&4294967295,V=R+(F<<9&4294967295|F>>>23),F=k+(R^D&(V^R))+O[15]+3634488961&4294967295,k=V+(F<<14&4294967295|F>>>18),F=D+(V^R&(k^V))+O[4]+3889429448&4294967295,D=k+(F<<20&4294967295|F>>>12),F=R+(k^V&(D^k))+O[9]+568446438&4294967295,R=D+(F<<5&4294967295|F>>>27),F=V+(D^k&(R^D))+O[14]+3275163606&4294967295,V=R+(F<<9&4294967295|F>>>23),F=k+(R^D&(V^R))+O[3]+4107603335&4294967295,k=V+(F<<14&4294967295|F>>>18),F=D+(V^R&(k^V))+O[8]+1163531501&4294967295,D=k+(F<<20&4294967295|F>>>12),F=R+(k^V&(D^k))+O[13]+2850285829&4294967295,R=D+(F<<5&4294967295|F>>>27),F=V+(D^k&(R^D))+O[2]+4243563512&4294967295,V=R+(F<<9&4294967295|F>>>23),F=k+(R^D&(V^R))+O[7]+1735328473&4294967295,k=V+(F<<14&4294967295|F>>>18),F=D+(V^R&(k^V))+O[12]+2368359562&4294967295,D=k+(F<<20&4294967295|F>>>12),F=R+(D^k^V)+O[5]+4294588738&4294967295,R=D+(F<<4&4294967295|F>>>28),F=V+(R^D^k)+O[8]+2272392833&4294967295,V=R+(F<<11&4294967295|F>>>21),F=k+(V^R^D)+O[11]+1839030562&4294967295,k=V+(F<<16&4294967295|F>>>16),F=D+(k^V^R)+O[14]+4259657740&4294967295,D=k+(F<<23&4294967295|F>>>9),F=R+(D^k^V)+O[1]+2763975236&4294967295,R=D+(F<<4&4294967295|F>>>28),F=V+(R^D^k)+O[4]+1272893353&4294967295,V=R+(F<<11&4294967295|F>>>21),F=k+(V^R^D)+O[7]+4139469664&4294967295,k=V+(F<<16&4294967295|F>>>16),F=D+(k^V^R)+O[10]+3200236656&4294967295,D=k+(F<<23&4294967295|F>>>9),F=R+(D^k^V)+O[13]+681279174&4294967295,R=D+(F<<4&4294967295|F>>>28),F=V+(R^D^k)+O[0]+3936430074&4294967295,V=R+(F<<11&4294967295|F>>>21),F=k+(V^R^D)+O[3]+3572445317&4294967295,k=V+(F<<16&4294967295|F>>>16),F=D+(k^V^R)+O[6]+76029189&4294967295,D=k+(F<<23&4294967295|F>>>9),F=R+(D^k^V)+O[9]+3654602809&4294967295,R=D+(F<<4&4294967295|F>>>28),F=V+(R^D^k)+O[12]+3873151461&4294967295,V=R+(F<<11&4294967295|F>>>21),F=k+(V^R^D)+O[15]+530742520&4294967295,k=V+(F<<16&4294967295|F>>>16),F=D+(k^V^R)+O[2]+3299628645&4294967295,D=k+(F<<23&4294967295|F>>>9),F=R+(k^(D|~V))+O[0]+4096336452&4294967295,R=D+(F<<6&4294967295|F>>>26),F=V+(D^(R|~k))+O[7]+1126891415&4294967295,V=R+(F<<10&4294967295|F>>>22),F=k+(R^(V|~D))+O[14]+2878612391&4294967295,k=V+(F<<15&4294967295|F>>>17),F=D+(V^(k|~R))+O[5]+4237533241&4294967295,D=k+(F<<21&4294967295|F>>>11),F=R+(k^(D|~V))+O[12]+1700485571&4294967295,R=D+(F<<6&4294967295|F>>>26),F=V+(D^(R|~k))+O[3]+2399980690&4294967295,V=R+(F<<10&4294967295|F>>>22),F=k+(R^(V|~D))+O[10]+4293915773&4294967295,k=V+(F<<15&4294967295|F>>>17),F=D+(V^(k|~R))+O[1]+2240044497&4294967295,D=k+(F<<21&4294967295|F>>>11),F=R+(k^(D|~V))+O[8]+1873313359&4294967295,R=D+(F<<6&4294967295|F>>>26),F=V+(D^(R|~k))+O[15]+4264355552&4294967295,V=R+(F<<10&4294967295|F>>>22),F=k+(R^(V|~D))+O[6]+2734768916&4294967295,k=V+(F<<15&4294967295|F>>>17),F=D+(V^(k|~R))+O[13]+1309151649&4294967295,D=k+(F<<21&4294967295|F>>>11),F=R+(k^(D|~V))+O[4]+4149444226&4294967295,R=D+(F<<6&4294967295|F>>>26),F=V+(D^(R|~k))+O[11]+3174756917&4294967295,V=R+(F<<10&4294967295|F>>>22),F=k+(R^(V|~D))+O[2]+718787259&4294967295,k=V+(F<<15&4294967295|F>>>17),F=D+(V^(k|~R))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+(k+(F<<21&4294967295|F>>>11))&4294967295,P.g[2]=P.g[2]+k&4294967295,P.g[3]=P.g[3]+V&4294967295}r.prototype.u=function(P,R){R===void 0&&(R=P.length);for(var D=R-this.blockSize,O=this.B,k=this.h,V=0;V<R;){if(k==0)for(;V<=D;)s(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<R;)if(O[k++]=P.charCodeAt(V++),k==this.blockSize){s(this,O),k=0;break}}else for(;V<R;)if(O[k++]=P[V++],k==this.blockSize){s(this,O),k=0;break}}this.h=k,this.o+=R},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;var D=8*this.o;for(R=P.length-8;R<P.length;++R)P[R]=D&255,D/=256;for(this.u(P),P=Array(16),R=D=0;4>R;++R)for(var O=0;32>O;O+=8)P[D++]=this.g[R]>>>O&255;return P};function a(P,R){var D=u;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=R(P)}function c(P,R){this.h=R;for(var D=[],O=!0,k=P.length-1;0<=k;k--){var V=P[k]|0;O&&V==R||(D[k]=V,O=!1)}this.g=D}var u={};function h(P){return-128<=P&&128>P?a(P,function(R){return new c([R|0],0>R?-1:0)}):new c([P|0],0>P?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return y;if(0>P)return x(f(-P));for(var R=[],D=1,O=0;P>=D;O++)R[O]=P/D|0,D*=4294967296;return new c(R,0)}function g(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return x(g(P.substring(1),R));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(R,8)),O=y,k=0;k<P.length;k+=8){var V=Math.min(8,P.length-k),F=parseInt(P.substring(k,k+V),R);8>V?(V=f(Math.pow(R,V)),O=O.j(V).add(f(F))):(O=O.j(D),O=O.add(f(F)))}return O}var y=h(0),v=h(1),w=h(16777216);t=c.prototype,t.m=function(){if(_(this))return-x(this).m();for(var P=0,R=1,D=0;D<this.g.length;D++){var O=this.i(D);P+=(0<=O?O:4294967296+O)*R,R*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(b(this))return"0";if(_(this))return"-"+x(this).toString(P);for(var R=f(Math.pow(P,6)),D=this,O="";;){var k=M(D,R).g;D=j(D,k.j(R));var V=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=k,b(D))return V+O;for(;6>V.length;)V="0"+V;O=V+O}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function b(P){if(P.h!=0)return!1;for(var R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function _(P){return P.h==-1}t.l=function(P){return P=j(this,P),_(P)?-1:b(P)?0:1};function x(P){for(var R=P.g.length,D=[],O=0;O<R;O++)D[O]=~P.g[O];return new c(D,~P.h).add(v)}t.abs=function(){return _(this)?x(this):this},t.add=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],O=0,k=0;k<=R;k++){var V=O+(this.i(k)&65535)+(P.i(k)&65535),F=(V>>>16)+(this.i(k)>>>16)+(P.i(k)>>>16);O=F>>>16,V&=65535,F&=65535,D[k]=F<<16|V}return new c(D,D[D.length-1]&-2147483648?-1:0)};function j(P,R){return P.add(x(R))}t.j=function(P){if(b(this)||b(P))return y;if(_(this))return _(P)?x(this).j(x(P)):x(x(this).j(P));if(_(P))return x(this.j(x(P)));if(0>this.l(w)&&0>P.l(w))return f(this.m()*P.m());for(var R=this.g.length+P.g.length,D=[],O=0;O<2*R;O++)D[O]=0;for(O=0;O<this.g.length;O++)for(var k=0;k<P.g.length;k++){var V=this.i(O)>>>16,F=this.i(O)&65535,H=P.i(k)>>>16,Q=P.i(k)&65535;D[2*O+2*k]+=F*Q,C(D,2*O+2*k),D[2*O+2*k+1]+=V*Q,C(D,2*O+2*k+1),D[2*O+2*k+1]+=F*H,C(D,2*O+2*k+1),D[2*O+2*k+2]+=V*H,C(D,2*O+2*k+2)}for(O=0;O<R;O++)D[O]=D[2*O+1]<<16|D[2*O];for(O=R;O<2*R;O++)D[O]=0;return new c(D,0)};function C(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function I(P,R){this.g=P,this.h=R}function M(P,R){if(b(R))throw Error("division by zero");if(b(P))return new I(y,y);if(_(P))return R=M(x(P),R),new I(x(R.g),x(R.h));if(_(R))return R=M(P,x(R)),new I(x(R.g),R.h);if(30<P.g.length){if(_(P)||_(R))throw Error("slowDivide_ only works with positive integers.");for(var D=v,O=R;0>=O.l(P);)D=U(D),O=U(O);var k=z(D,1),V=z(O,1);for(O=z(O,2),D=z(D,2);!b(O);){var F=V.add(O);0>=F.l(P)&&(k=k.add(D),V=F),O=z(O,1),D=z(D,1)}return R=j(P,k.j(R)),new I(k,R)}for(k=y;0<=P.l(R);){for(D=Math.max(1,Math.floor(P.m()/R.m())),O=Math.ceil(Math.log(D)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),V=f(D),F=V.j(R);_(F)||0<F.l(P);)D-=O,V=f(D),F=V.j(R);b(V)&&(V=v),k=k.add(V),P=j(P,F)}return new I(k,P)}t.A=function(P){return M(this,P).h},t.and=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],O=0;O<R;O++)D[O]=this.i(O)&P.i(O);return new c(D,this.h&P.h)},t.or=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],O=0;O<R;O++)D[O]=this.i(O)|P.i(O);return new c(D,this.h|P.h)},t.xor=function(P){for(var R=Math.max(this.g.length,P.g.length),D=[],O=0;O<R;O++)D[O]=this.i(O)^P.i(O);return new c(D,this.h^P.h)};function U(P){for(var R=P.g.length+1,D=[],O=0;O<R;O++)D[O]=P.i(O)<<1|P.i(O-1)>>>31;return new c(D,P.h)}function z(P,R){var D=R>>5;R%=32;for(var O=P.g.length-D,k=[],V=0;V<O;V++)k[V]=0<R?P.i(V+D)>>>R|P.i(V+D+1)<<32-R:P.i(V+D);return new c(k,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,GC=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,Jo=c}).apply(typeof lN<"u"?lN:typeof self<"u"?self:typeof window<"u"?window:{});var Of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QC,rd,YC,tp,Zv,XC,JC,ZC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,S,A){return p==Array.prototype||p==Object.prototype||(p[S]=A.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Of=="object"&&Of];for(var S=0;S<p.length;++S){var A=p[S];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=n(this);function s(p,S){if(S)e:{var A=r;p=p.split(".");for(var $=0;$<p.length-1;$++){var re=p[$];if(!(re in A))break e;A=A[re]}p=p[p.length-1],$=A[p],S=S($),S!=$&&S!=null&&e(A,p,{configurable:!0,writable:!0,value:S})}}function a(p,S){p instanceof String&&(p+="");var A=0,$=!1,re={next:function(){if(!$&&A<p.length){var le=A++;return{value:S(le,p[le]),done:!1}}return $=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}s("Array.prototype.values",function(p){return p||function(){return a(this,function(S,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function h(p){var S=typeof p;return S=S!="object"?S:p?Array.isArray(p)?"array":S:"null",S=="array"||S=="object"&&typeof p.length=="number"}function f(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function g(p,S,A){return p.call.apply(p.bind,arguments)}function y(p,S,A){if(!p)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(re,$),p.apply(S,re)}}return function(){return p.apply(S,arguments)}}function v(p,S,A){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,v.apply(null,arguments)}function w(p,S){var A=Array.prototype.slice.call(arguments,1);return function(){var $=A.slice();return $.push.apply($,arguments),p.apply(this,$)}}function b(p,S){function A(){}A.prototype=S.prototype,p.aa=S.prototype,p.prototype=new A,p.prototype.constructor=p,p.Qb=function($,re,le){for(var Ee=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)Ee[Dt-2]=arguments[Dt];return S.prototype[re].apply($,Ee)}}function _(p){const S=p.length;if(0<S){const A=Array(S);for(let $=0;$<S;$++)A[$]=p[$];return A}return[]}function x(p,S){for(let A=1;A<arguments.length;A++){const $=arguments[A];if(h($)){const re=p.length||0,le=$.length||0;p.length=re+le;for(let Ee=0;Ee<le;Ee++)p[re+Ee]=$[Ee]}else p.push($)}}class j{constructor(S,A){this.i=S,this.j=A,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function C(p){return/^[\s\xa0]*$/.test(p)}function I(){var p=u.navigator;return p&&(p=p.userAgent)?p:""}function M(p){return M[" "](p),p}M[" "]=function(){};var U=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function z(p,S,A){for(const $ in p)S.call(A,p[$],$,p)}function P(p,S){for(const A in p)S.call(void 0,p[A],A,p)}function R(p){const S={};for(const A in p)S[A]=p[A];return S}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(p,S){let A,$;for(let re=1;re<arguments.length;re++){$=arguments[re];for(A in $)p[A]=$[A];for(let le=0;le<D.length;le++)A=D[le],Object.prototype.hasOwnProperty.call($,A)&&(p[A]=$[A])}}function k(p){var S=1;p=p.split(":");const A=[];for(;0<S&&p.length;)A.push(p.shift()),S--;return p.length&&A.push(p.join(":")),A}function V(p){u.setTimeout(()=>{throw p},0)}function F(){var p=Y;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class H{constructor(){this.h=this.g=null}add(S,A){const $=Q.get();$.set(S,A),this.h?this.h.next=$:this.g=$,this.h=$}}var Q=new j(()=>new K,p=>p.reset());class K{constructor(){this.next=this.g=this.h=null}set(S,A){this.h=S,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,W=!1,Y=new H,ne=()=>{const p=u.Promise.resolve(void 0);Z=()=>{p.then(B)}};var B=()=>{for(var p;p=F();){try{p.h.call(p.g)}catch(A){V(A)}var S=Q;S.j(p),100>S.h&&(S.h++,p.next=S.g,S.g=p)}W=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const A=()=>{};u.addEventListener("test",A,S),u.removeEventListener("test",A,S)}catch{}return p}();function Le(p,S){if(ue.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var A=this.type=p.type,$=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget){if(U){e:{try{M(S.nodeName);var re=!0;break e}catch{}re=!1}re||(S=null)}}else A=="mouseover"?S=p.fromElement:A=="mouseout"&&(S=p.toElement);this.relatedTarget=S,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Ce[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Le.aa.h.call(this)}}b(Le,ue);var Ce={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),Ie=0;function Ke(p,S,A,$,re){this.listener=p,this.proxy=null,this.src=S,this.type=A,this.capture=!!$,this.ha=re,this.key=++Ie,this.da=this.fa=!1}function Ve(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function st(p){this.src=p,this.g={},this.h=0}st.prototype.add=function(p,S,A,$,re){var le=p.toString();p=this.g[le],p||(p=this.g[le]=[],this.h++);var Ee=ve(p,S,$,re);return-1<Ee?(S=p[Ee],A||(S.fa=!1)):(S=new Ke(S,this.src,le,!!$,re),S.fa=A,p.push(S)),S};function it(p,S){var A=S.type;if(A in p.g){var $=p.g[A],re=Array.prototype.indexOf.call($,S,void 0),le;(le=0<=re)&&Array.prototype.splice.call($,re,1),le&&(Ve(S),p.g[A].length==0&&(delete p.g[A],p.h--))}}function ve(p,S,A,$){for(var re=0;re<p.length;++re){var le=p[re];if(!le.da&&le.listener==S&&le.capture==!!A&&le.ha==$)return re}return-1}var je="closure_lm_"+(1e6*Math.random()|0),gt={};function cn(p,S,A,$,re){if(Array.isArray(S)){for(var le=0;le<S.length;le++)cn(p,S[le],A,$,re);return null}return A=$s(A),p&&p[we]?p.K(S,A,f($)?!!$.capture:!1,re):zn(p,S,A,!1,$,re)}function zn(p,S,A,$,re,le){if(!S)throw Error("Invalid event type");var Ee=f(re)?!!re.capture:!!re,Dt=hn(p);if(Dt||(p[je]=Dt=new st(p)),A=Dt.add(S,A,$,Ee,le),A.proxy)return A;if($=jr(),A.proxy=$,$.src=p,$.listener=A,p.addEventListener)Te||(re=Ee),re===void 0&&(re=!1),p.addEventListener(S.toString(),$,re);else if(p.attachEvent)p.attachEvent(Ar(S.toString()),$);else if(p.addListener&&p.removeListener)p.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return A}function jr(){function p(A){return S.call(p.src,p.listener,A)}const S=os;return p}function Lt(p,S,A,$,re){if(Array.isArray(S))for(var le=0;le<S.length;le++)Lt(p,S[le],A,$,re);else $=f($)?!!$.capture:!!$,A=$s(A),p&&p[we]?(p=p.i,S=String(S).toString(),S in p.g&&(le=p.g[S],A=ve(le,A,$,re),-1<A&&(Ve(le[A]),Array.prototype.splice.call(le,A,1),le.length==0&&(delete p.g[S],p.h--)))):p&&(p=hn(p))&&(S=p.g[S.toString()],p=-1,S&&(p=ve(S,A,$,re)),(A=-1<p?S[p]:null)&&gn(A))}function gn(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[we])it(S.i,p);else{var A=p.type,$=p.proxy;S.removeEventListener?S.removeEventListener(A,$,p.capture):S.detachEvent?S.detachEvent(Ar(A),$):S.addListener&&S.removeListener&&S.removeListener($),(A=hn(S))?(it(A,p),A.h==0&&(A.src=null,S[je]=null)):Ve(p)}}}function Ar(p){return p in gt?gt[p]:gt[p]="on"+p}function os(p,S){if(p.da)p=!0;else{S=new Le(S,this);var A=p.listener,$=p.ha||p.src;p.fa&&gn(p),p=A.call($,S)}return p}function hn(p){return p=p[je],p instanceof st?p:null}var Us="__closure_events_fn_"+(1e9*Math.random()>>>0);function $s(p){return typeof p=="function"?p:(p[Us]||(p[Us]=function(S){return p.handleEvent(S)}),p[Us])}function zt(){ee.call(this),this.i=new st(this),this.M=this,this.F=null}b(zt,ee),zt.prototype[we]=!0,zt.prototype.removeEventListener=function(p,S,A,$){Lt(this,p,S,A,$)};function Rt(p,S){var A,$=p.F;if($)for(A=[];$;$=$.F)A.push($);if(p=p.M,$=S.type||S,typeof S=="string")S=new ue(S,p);else if(S instanceof ue)S.target=S.target||p;else{var re=S;S=new ue($,p),O(S,re)}if(re=!0,A)for(var le=A.length-1;0<=le;le--){var Ee=S.g=A[le];re=Bn(Ee,$,!0,S)&&re}if(Ee=S.g=p,re=Bn(Ee,$,!0,S)&&re,re=Bn(Ee,$,!1,S)&&re,A)for(le=0;le<A.length;le++)Ee=S.g=A[le],re=Bn(Ee,$,!1,S)&&re}zt.prototype.N=function(){if(zt.aa.N.call(this),this.i){var p=this.i,S;for(S in p.g){for(var A=p.g[S],$=0;$<A.length;$++)Ve(A[$]);delete p.g[S],p.h--}}this.F=null},zt.prototype.K=function(p,S,A,$){return this.i.add(String(p),S,!1,A,$)},zt.prototype.L=function(p,S,A,$){return this.i.add(String(p),S,!0,A,$)};function Bn(p,S,A,$){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();for(var re=!0,le=0;le<S.length;++le){var Ee=S[le];if(Ee&&!Ee.da&&Ee.capture==A){var Dt=Ee.listener,Nn=Ee.ha||Ee.src;Ee.fa&&it(p.i,Ee),re=Dt.call(Nn,$)!==!1&&re}}return re&&!$.defaultPrevented}function bn(p,S,A){if(typeof p=="function")A&&(p=v(p,A));else if(p&&typeof p.handleEvent=="function")p=v(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:u.setTimeout(p,S||0)}function Pr(p){p.g=bn(()=>{p.g=null,p.i&&(p.i=!1,Pr(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class as extends ee{constructor(S,A){super(),this.m=S,this.l=A,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Pr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(p){ee.call(this),this.h=p,this.g={}}b(qr,ee);var zs=[];function vi(p){z(p.g,function(S,A){this.g.hasOwnProperty(A)&&gn(S)},p),p.g={}}qr.prototype.N=function(){qr.aa.N.call(this),vi(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ls=u.JSON.stringify,qn=u.JSON.parse,Bs=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Ze(){}Ze.prototype.h=null;function Et(p){return p.h||(p.h=p.i())}function yt(){}var Bt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gt(){ue.call(this,"d")}b(Gt,ue);function ie(){ue.call(this,"c")}b(ie,ue);var ye={},Ue=null;function Ct(){return Ue=Ue||new zt}ye.La="serverreachability";function lt(p){ue.call(this,ye.La,p)}b(lt,ue);function vt(p){const S=Ct();Rt(S,new lt(S))}ye.STAT_EVENT="statevent";function ke(p,S){ue.call(this,ye.STAT_EVENT,p),this.stat=S}b(ke,ue);function Qt(p){const S=Ct();Rt(S,new ke(S,p))}ye.Ma="timingevent";function xi(p,S){ue.call(this,ye.Ma,p),this.size=S}b(xi,ue);function dr(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},S)}function qs(){this.g=!0}qs.prototype.xa=function(){this.g=!1};function Ws(p,S,A,$,re,le){p.info(function(){if(p.g)if(le)for(var Ee="",Dt=le.split("&"),Nn=0;Nn<Dt.length;Nn++){var bt=Dt[Nn].split("=");if(1<bt.length){var jn=bt[0];bt=bt[1];var yn=jn.split("_");Ee=2<=yn.length&&yn[1]=="type"?Ee+(jn+"="+bt+"&"):Ee+(jn+"=redacted&")}}else Ee=null;else Ee=le;return"XMLHTTP REQ ("+$+") [attempt "+re+"]: "+S+`
`+A+`
`+Ee})}function wi(p,S,A,$,re,le,Ee){p.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+re+"]: "+S+`
`+A+`
`+le+" "+Ee})}function hr(p,S,A,$){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+Sl(p,A)+($?" "+$:"")})}function no(p,S){p.info(function(){return"TIMEOUT: "+S})}qs.prototype.info=function(){};function Sl(p,S){if(!p.g)return S;if(!S)return null;try{var A=JSON.parse(S);if(A){for(p=0;p<A.length;p++)if(Array.isArray(A[p])){var $=A[p];if(!(2>$.length)){var re=$[1];if(Array.isArray(re)&&!(1>re.length)){var le=re[0];if(le!="noop"&&le!="stop"&&le!="close")for(var Ee=1;Ee<re.length;Ee++)re[Ee]=""}}}}return ls(A)}catch{return S}}var qt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cs;function _a(){}b(_a,Ze),_a.prototype.g=function(){return new XMLHttpRequest},_a.prototype.i=function(){return{}},cs=new _a;function us(p,S,A,$){this.j=p,this.i=S,this.l=A,this.R=$||1,this.U=new qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dh}function dh(){this.i=null,this.g="",this.h=!1}var yu={},Cl={};function Il(p,S,A){p.L=1,p.v=ao(kr(S)),p.m=A,p.P=!0,vu(p,null)}function vu(p,S){p.F=Date.now(),Vt(p),p.A=kr(p.v);var A=p.A,$=p.R;Array.isArray($)||($=[String($)]),co(A.i,"t",$),p.C=0,A=p.j.J,p.h=new dh,p.g=jh(p.j,A?S:null,!p.m),0<p.O&&(p.M=new as(v(p.Y,p,p.g),p.O)),S=p.U,A=p.g,$=p.ca;var re="readystatechange";Array.isArray(re)||(re&&(zs[0]=re.toString()),re=zs);for(var le=0;le<re.length;le++){var Ee=cn(A,re[le],$||S.handleEvent,!1,S.h||S);if(!Ee)break;S.g[Ee.key]=Ee}S=p.H?R(p.H):{},p.m?(p.u||(p.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,S)):(p.u="GET",p.g.ea(p.A,p.u,null,S)),vt(),Ws(p.i,p.u,p.A,p.l,p.R,p.m)}us.prototype.ca=function(p){p=p.target;const S=this.M;S&&pr(p)==3?S.j():this.Y(p)},us.prototype.Y=function(p){try{if(p==this.g)e:{const yn=pr(this.g);var S=this.g.Ba();const Kr=this.g.Z();if(!(3>yn)&&(yn!=3||this.g&&(this.h.h||this.g.oa()||Nu(this.g)))){this.J||yn!=4||S==7||(S==8||0>=Kr?vt(3):vt(2)),Ea(this);var A=this.g.Z();this.X=A;t:if(hh(this)){var $=Nu(this.g);p="";var re=$.length,le=pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),ro(this);var Ee="";break t}this.h.i=new u.TextDecoder}for(S=0;S<re;S++)this.h.h=!0,p+=this.h.i.decode($[S],{stream:!(le&&S==re-1)});$.length=0,this.h.g+=p,this.C=0,Ee=this.h.g}else Ee=this.g.oa();if(this.o=A==200,wi(this.i,this.u,this.A,this.l,this.R,yn,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Dt,Nn=this.g;if((Dt=Nn.g?Nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(Dt)){var bt=Dt;break t}}bt=null}if(A=bt)hr(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xu(this,A);else{this.o=!1,this.s=3,Qt(12),Wr(this),ro(this);break e}}if(this.P){A=!0;let Dr;for(;!this.J&&this.C<Ee.length;)if(Dr=Gm(this,Ee),Dr==Cl){yn==4&&(this.s=4,Qt(14),A=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(Dr==yu){this.s=4,Qt(15),hr(this.i,this.l,Ee,"[Invalid Chunk]"),A=!1;break}else hr(this.i,this.l,Dr,null),xu(this,Dr);if(hh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yn!=4||Ee.length!=0||this.h.h||(this.s=1,Qt(16),A=!1),this.o=this.o&&A,!A)hr(this.i,this.l,Ee,"[Invalid Chunked Response]"),Wr(this),ro(this);else if(0<Ee.length&&!this.W){this.W=!0;var jn=this.j;jn.g==this&&jn.ba&&!jn.M&&(jn.j.info("Great, no buffering proxy detected. Bytes received: "+Ee.length),Tu(jn),jn.M=!0,Qt(11))}}else hr(this.i,this.l,Ee,null),xu(this,Ee);yn==4&&Wr(this),this.o&&!this.J&&(yn==4?Vl(this.j,this):(this.o=!1,Vt(this)))}else Ol(this.g),A==400&&0<Ee.indexOf("Unknown SID")?(this.s=3,Qt(12)):(this.s=0,Qt(13)),Wr(this),ro(this)}}}catch{}finally{}};function hh(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Gm(p,S){var A=p.C,$=S.indexOf(`
`,A);return $==-1?Cl:(A=Number(S.substring(A,$)),isNaN(A)?yu:($+=1,$+A>S.length?Cl:(S=S.slice($,$+A),p.C=$+A,S)))}us.prototype.cancel=function(){this.J=!0,Wr(this)};function Vt(p){p.S=Date.now()+p.I,fh(p,p.I)}function fh(p,S){if(p.B!=null)throw Error("WatchDog timer not null");p.B=dr(v(p.ba,p),S)}function Ea(p){p.B&&(u.clearTimeout(p.B),p.B=null)}us.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(no(this.i,this.A),this.L!=2&&(vt(),Qt(17)),Wr(this),this.s=2,ro(this)):fh(this,this.S-p)};function ro(p){p.j.G==0||p.J||Vl(p.j,p)}function Wr(p){Ea(p);var S=p.M;S&&typeof S.ma=="function"&&S.ma(),p.M=null,vi(p.U),p.g&&(S=p.g,p.g=null,S.abort(),S.ma())}function xu(p,S){try{var A=p.j;if(A.G!=0&&(A.g==p||nr(A.h,p))){if(!p.K&&nr(A.h,p)&&A.G==3){try{var $=A.Da.g.parse(S)}catch{$=null}if(Array.isArray($)&&$.length==3){var re=$;if(re[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<p.F)Fl(A),ms(A);else break e;Ml(A),Qt(18)}}else A.za=re[1],0<A.za-A.T&&37500>re[2]&&A.F&&A.v==0&&!A.C&&(A.C=dr(v(A.Za,A),6e3));if(1>=mh(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Si(A,11)}else if((p.K||A.g==p)&&Fl(A),!C(S))for(re=A.Da.g.parse(S),S=0;S<re.length;S++){let bt=re[S];if(A.T=bt[0],bt=bt[1],A.G==2)if(bt[0]=="c"){A.K=bt[1],A.ia=bt[2];const jn=bt[3];jn!=null&&(A.la=jn,A.j.info("VER="+A.la));const yn=bt[4];yn!=null&&(A.Aa=yn,A.j.info("SVER="+A.Aa));const Kr=bt[5];Kr!=null&&typeof Kr=="number"&&0<Kr&&($=1.5*Kr,A.L=$,A.j.info("backChannelRequestTimeoutMs_="+$)),$=A;const Dr=p.g;if(Dr){const ja=Dr.g?Dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var le=$.h;le.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(le.j=le.l,le.g=new Set,le.h&&(wu(le,le.h),le.h=null))}if($.D){const $l=Dr.g?Dr.g.getResponseHeader("X-HTTP-Session-Id"):null;$l&&($.ya=$l,Mt($.I,$.D,$l))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-p.F,A.j.info("Handshake RTT: "+A.R+"ms")),$=A;var Ee=p;if($.qa=Ih($,$.J?$.ia:null,$.W),Ee.K){gh($.h,Ee);var Dt=Ee,Nn=$.L;Nn&&(Dt.I=Nn),Dt.B&&(Ea(Dt),Vt(Dt)),$.g=Ee}else Ia($);0<A.i.length&&Qs(A)}else bt[0]!="stop"&&bt[0]!="close"||Si(A,7);else A.G==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?Si(A,7):Mn(A):bt[0]!="noop"&&A.l&&A.l.ta(bt),A.v=0)}}vt(4)}catch{}}var ph=class{constructor(p,S){this.g=p,this.map=S}};function ba(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Rr(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function mh(p){return p.h?1:p.g?p.g.size:0}function nr(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function wu(p,S){p.g?p.g.add(S):p.h=S}function gh(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}ba.prototype.cancel=function(){if(this.i=yh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function yh(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const A of p.g.values())S=S.concat(A.D);return S}return _(p.i)}function jl(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(h(p)){for(var S=[],A=p.length,$=0;$<A;$++)S.push(p[$]);return S}S=[],A=0;for($ in p)S[A++]=p[$];return S}function Al(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(h(p)||typeof p=="string"){var S=[];p=p.length;for(var A=0;A<p;A++)S.push(A);return S}S=[],A=0;for(const $ in p)S[A++]=$;return S}}}function so(p,S){if(p.forEach&&typeof p.forEach=="function")p.forEach(S,void 0);else if(h(p)||typeof p=="string")Array.prototype.forEach.call(p,S,void 0);else for(var A=Al(p),$=jl(p),re=$.length,le=0;le<re;le++)S.call(void 0,$[le],A&&A[le],p)}var Na=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qm(p,S){if(p){p=p.split("&");for(var A=0;A<p.length;A++){var $=p[A].indexOf("="),re=null;if(0<=$){var le=p[A].substring(0,$);re=p[A].substring($+1)}else le=p[A];S(le,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function _i(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof _i){this.h=p.h,Sa(this,p.j),this.o=p.o,this.g=p.g,io(this,p.s),this.l=p.l;var S=p.i,A=new Hs;A.i=S.i,S.g&&(A.g=new Map(S.g),A.h=S.h),oo(this,A),this.m=p.m}else p&&(S=String(p).match(Na))?(this.h=!1,Sa(this,S[1]||"",!0),this.o=xt(S[2]||""),this.g=xt(S[3]||"",!0),io(this,S[4]),this.l=xt(S[5]||"",!0),oo(this,S[6]||"",!0),this.m=xt(S[7]||"")):(this.h=!1,this.i=new Hs(null,this.h))}_i.prototype.toString=function(){var p=[],S=this.j;S&&p.push(lo(S,Pl,!0),":");var A=this.g;return(A||S=="file")&&(p.push("//"),(S=this.o)&&p.push(lo(S,Pl,!0),"@"),p.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&p.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&p.push("/"),p.push(lo(A,A.charAt(0)=="/"?wh:xh,!0))),(A=this.i.toString())&&p.push("?",A),(A=this.m)&&p.push("#",lo(A,_u)),p.join("")};function kr(p){return new _i(p)}function Sa(p,S,A){p.j=A?xt(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function io(p,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);p.s=S}else p.s=null}function oo(p,S,A){S instanceof Hs?(p.i=S,Ks(p.i,p.h)):(A||(S=lo(S,_h)),p.i=new Hs(S,p.h))}function Mt(p,S,A){p.i.set(S,A)}function ao(p){return Mt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function xt(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function lo(p,S,A){return typeof p=="string"?(p=encodeURI(p).replace(S,vh),A&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function vh(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Pl=/[#\/\?@]/g,xh=/[#\?:]/g,wh=/[#\?]/g,_h=/[#\?@]/g,_u=/#/g;function Hs(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function Ln(p){p.g||(p.g=new Map,p.h=0,p.i&&Qm(p.i,function(S,A){p.add(decodeURIComponent(S.replace(/\+/g," ")),A)}))}t=Hs.prototype,t.add=function(p,S){Ln(this),this.i=null,p=Hr(this,p);var A=this.g.get(p);return A||this.g.set(p,A=[]),A.push(S),this.h+=1,this};function ds(p,S){Ln(p),S=Hr(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function hs(p,S){return Ln(p),S=Hr(p,S),p.g.has(S)}t.forEach=function(p,S){Ln(this),this.g.forEach(function(A,$){A.forEach(function(re){p.call(S,re,$,this)},this)},this)},t.na=function(){Ln(this);const p=Array.from(this.g.values()),S=Array.from(this.g.keys()),A=[];for(let $=0;$<S.length;$++){const re=p[$];for(let le=0;le<re.length;le++)A.push(S[$])}return A},t.V=function(p){Ln(this);let S=[];if(typeof p=="string")hs(this,p)&&(S=S.concat(this.g.get(Hr(this,p))));else{p=Array.from(this.g.values());for(let A=0;A<p.length;A++)S=S.concat(p[A])}return S},t.set=function(p,S){return Ln(this),this.i=null,p=Hr(this,p),hs(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},t.get=function(p,S){return p?(p=this.V(p),0<p.length?String(p[0]):S):S};function co(p,S,A){ds(p,S),0<A.length&&(p.i=null,p.g.set(Hr(p,S),_(A)),p.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(var A=0;A<S.length;A++){var $=S[A];const le=encodeURIComponent(String($)),Ee=this.V($);for($=0;$<Ee.length;$++){var re=le;Ee[$]!==""&&(re+="="+encodeURIComponent(String(Ee[$]))),p.push(re)}}return this.i=p.join("&")};function Hr(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function Ks(p,S){S&&!p.j&&(Ln(p),p.i=null,p.g.forEach(function(A,$){var re=$.toLowerCase();$!=re&&(ds(this,$),co(this,re,A))},p)),p.j=S}function Ym(p,S){const A=new qs;if(u.Image){const $=new Image;$.onload=w(fr,A,"TestLoadImage: loaded",!0,S,$),$.onerror=w(fr,A,"TestLoadImage: error",!1,S,$),$.onabort=w(fr,A,"TestLoadImage: abort",!1,S,$),$.ontimeout=w(fr,A,"TestLoadImage: timeout",!1,S,$),u.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=p}else S(!1)}function Eh(p,S){const A=new qs,$=new AbortController,re=setTimeout(()=>{$.abort(),fr(A,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:$.signal}).then(le=>{clearTimeout(re),le.ok?fr(A,"TestPingServer: ok",!0,S):fr(A,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(re),fr(A,"TestPingServer: error",!1,S)})}function fr(p,S,A,$,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),$(A)}catch{}}function Xm(){this.g=new Bs}function bh(p,S,A){const $=A||"";try{so(p,function(re,le){let Ee=re;f(re)&&(Ee=ls(re)),S.push($+le+"="+encodeURIComponent(Ee))})}catch(re){throw S.push($+"type="+encodeURIComponent("_badmap")),re}}function Ei(p){this.l=p.Ub||null,this.j=p.eb||!1}b(Ei,Ze),Ei.prototype.g=function(){return new Ta(this.l,this.j)},Ei.prototype.i=function(p){return function(){return p}}({});function Ta(p,S){zt.call(this),this.D=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Ta,zt),t=Ta.prototype,t.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=S,this.readyState=1,ps(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(S.body=p),(this.D||u).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fs(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,ps(this)),this.g&&(this.readyState=3,ps(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nh(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nh(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?fs(this):ps(this),this.readyState==3&&Nh(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,fs(this))},t.Qa=function(p){this.g&&(this.response=p,fs(this))},t.ga=function(){this.g&&fs(this)};function fs(p){p.readyState=4,p.l=null,p.j=null,p.v=null,ps(p)}t.setRequestHeader=function(p,S){this.u.append(p,S)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var A=S.next();!A.done;)A=A.value,p.push(A[0]+": "+A[1]),A=S.next();return p.join(`\r
`)};function ps(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function bi(p){let S="";return z(p,function(A,$){S+=$,S+=":",S+=A,S+=`\r
`}),S}function uo(p,S,A){e:{for($ in A){var $=!1;break e}$=!0}$||(A=bi(A),typeof p=="string"?A!=null&&encodeURIComponent(String(A)):Mt(p,S,A))}function Yt(p){zt.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Yt,zt);var Jm=/^https?$/i,Eu=["POST","PUT"];t=Yt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,S,A,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cs.g(),this.v=this.o?Et(this.o):Et(cs),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(le){Ca(this,le);return}if(p=A||"",A=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var re in $)A.set(re,$[re]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const le of $.keys())A.set(le,$.get(le));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(A.keys()).find(le=>le.toLowerCase()=="content-type"),re=u.FormData&&p instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Eu,S,void 0))||$||re||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,Ee]of A)this.g.setRequestHeader(le,Ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kl(this),this.u=!0,this.g.send(p),this.u=!1}catch(le){Ca(this,le)}};function Ca(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.m=5,Rl(p),Or(p)}function Rl(p){p.A||(p.A=!0,Rt(p,"complete"),Rt(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Rt(this,"complete"),Rt(this,"abort"),Or(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Or(this,!0)),Yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bu(this):this.bb())},t.bb=function(){bu(this)};function bu(p){if(p.h&&typeof c<"u"&&(!p.v[1]||pr(p)!=4||p.Z()!=2)){if(p.u&&pr(p)==4)bn(p.Ea,0,p);else if(Rt(p,"readystatechange"),pr(p)==4){p.h=!1;try{const Ee=p.Z();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var A;if(!(A=S)){var $;if($=Ee===0){var re=String(p.D).match(Na)[1]||null;!re&&u.self&&u.self.location&&(re=u.self.location.protocol.slice(0,-1)),$=!Jm.test(re?re.toLowerCase():"")}A=$}if(A)Rt(p,"complete"),Rt(p,"success");else{p.m=6;try{var le=2<pr(p)?p.g.statusText:""}catch{le=""}p.l=le+" ["+p.Z()+"]",Rl(p)}}finally{Or(p)}}}}function Or(p,S){if(p.g){kl(p);const A=p.g,$=p.v[0]?()=>{}:null;p.g=null,p.v=null,S||Rt(p,"ready");try{A.onreadystatechange=$}catch{}}}function kl(p){p.I&&(u.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function pr(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<pr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),qn(S)}};function Nu(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Ol(p){const S={};p=(p.g&&2<=pr(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<p.length;$++){if(C(p[$]))continue;var A=k(p[$]);const re=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const le=S[re]||[];S[re]=le,le.push(A)}P(S,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gs(p,S,A){return A&&A.internalChannelParams&&A.internalChannelParams[p]||S}function Su(p){this.Aa=0,this.i=[],this.j=new qs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gs("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gs("baseRetryDelayMs",5e3,p),this.cb=Gs("retryDelaySeedMs",1e4,p),this.Wa=Gs("forwardChannelMaxRetries",2,p),this.wa=Gs("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new ba(p&&p.concurrentRequestLimit),this.Da=new Xm,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Su.prototype,t.la=8,t.G=1,t.connect=function(p,S,A,$){Qt(0),this.W=p,this.H=S||{},A&&$!==void 0&&(this.H.OSID=A,this.H.OAID=$),this.F=this.X,this.I=Ih(this,null,this.W),Qs(this)};function Mn(p){if(Dl(p),p.G==3){var S=p.U++,A=kr(p.I);if(Mt(A,"SID",p.K),Mt(A,"RID",S),Mt(A,"TYPE","terminate"),Ni(p,A),S=new us(p,p.j,S),S.L=2,S.v=ao(kr(A)),A=!1,u.navigator&&u.navigator.sendBeacon)try{A=u.navigator.sendBeacon(S.v.toString(),"")}catch{}!A&&u.Image&&(new Image().src=S.v,A=!0),A||(S.g=jh(S.j,null),S.g.ea(S.v)),S.F=Date.now(),Vt(S)}Ch(p)}function ms(p){p.g&&(Tu(p),p.g.cancel(),p.g=null)}function Dl(p){ms(p),p.u&&(u.clearTimeout(p.u),p.u=null),Fl(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&u.clearTimeout(p.s),p.s=null)}function Qs(p){if(!Rr(p.h)&&!p.s){p.s=!0;var S=p.Ga;Z||ne(),W||(Z(),W=!0),Y.add(S,p),p.B=0}}function Zm(p,S){return mh(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=S.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=dr(v(p.Ga,p,S),Th(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const re=new us(this,this.j,p);let le=this.o;if(this.S&&(le?(le=R(le),O(le,this.S)):le=this.S),this.m!==null||this.O||(re.H=le,le=null),this.P)e:{for(var S=0,A=0;A<this.i.length;A++){t:{var $=this.i[A];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(S+=$,4096<S){S=A;break e}if(S===4096||A===this.i.length-1){S=A+1;break e}}S=1e3}else S=1e3;S=ho(this,re,S),A=kr(this.I),Mt(A,"RID",p),Mt(A,"CVER",22),this.D&&Mt(A,"X-HTTP-Session-Id",this.D),Ni(this,A),le&&(this.O?S="headers="+encodeURIComponent(String(bi(le)))+"&"+S:this.m&&uo(A,this.m,le)),wu(this.h,re),this.Ua&&Mt(A,"TYPE","init"),this.P?(Mt(A,"$req",S),Mt(A,"SID","null"),re.T=!0,Il(re,A,null)):Il(re,A,S),this.G=2}}else this.G==3&&(p?Ll(this,p):this.i.length==0||Rr(this.h)||Ll(this))};function Ll(p,S){var A;S?A=S.l:A=p.U++;const $=kr(p.I);Mt($,"SID",p.K),Mt($,"RID",A),Mt($,"AID",p.T),Ni(p,$),p.m&&p.o&&uo($,p.m,p.o),A=new us(p,p.j,A,p.B+1),p.m===null&&(A.H=p.o),S&&(p.i=S.D.concat(p.i)),S=ho(p,A,1e3),A.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),wu(p.h,A),Il(A,$,S)}function Ni(p,S){p.H&&z(p.H,function(A,$){Mt(S,$,A)}),p.l&&so({},function(A,$){Mt(S,$,A)})}function ho(p,S,A){A=Math.min(p.i.length,A);var $=p.l?v(p.l.Na,p.l,p):null;e:{var re=p.i;let le=-1;for(;;){const Ee=["count="+A];le==-1?0<A?(le=re[0].g,Ee.push("ofs="+le)):le=0:Ee.push("ofs="+le);let Dt=!0;for(let Nn=0;Nn<A;Nn++){let bt=re[Nn].g;const jn=re[Nn].map;if(bt-=le,0>bt)le=Math.max(0,re[Nn].g-100),Dt=!1;else try{bh(jn,Ee,"req"+bt+"_")}catch{$&&$(jn)}}if(Dt){$=Ee.join("&");break e}}}return p=p.i.splice(0,A),S.D=p,$}function Ia(p){if(!p.g&&!p.u){p.Y=1;var S=p.Fa;Z||ne(),W||(Z(),W=!0),Y.add(S,p),p.v=0}}function Ml(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=dr(v(p.Fa,p),Th(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,Sh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=dr(v(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qt(10),ms(this),Sh(this))};function Tu(p){p.A!=null&&(u.clearTimeout(p.A),p.A=null)}function Sh(p){p.g=new us(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var S=kr(p.qa);Mt(S,"RID","rpc"),Mt(S,"SID",p.K),Mt(S,"AID",p.T),Mt(S,"CI",p.F?"0":"1"),!p.F&&p.ja&&Mt(S,"TO",p.ja),Mt(S,"TYPE","xmlhttp"),Ni(p,S),p.m&&p.o&&uo(S,p.m,p.o),p.L&&(p.g.I=p.L);var A=p.g;p=p.ia,A.L=1,A.v=ao(kr(S)),A.m=null,A.P=!0,vu(A,p)}t.Za=function(){this.C!=null&&(this.C=null,ms(this),Ml(this),Qt(19))};function Fl(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Vl(p,S){var A=null;if(p.g==S){Fl(p),Tu(p),p.g=null;var $=2}else if(nr(p.h,S))A=S.D,gh(p.h,S),$=1;else return;if(p.G!=0){if(S.o)if($==1){A=S.m?S.m.length:0,S=Date.now()-S.F;var re=p.B;$=Ct(),Rt($,new xi($,A)),Qs(p)}else Ia(p);else if(re=S.s,re==3||re==0&&0<S.X||!($==1&&Zm(p,S)||$==2&&Ml(p)))switch(A&&0<A.length&&(S=p.h,S.i=S.i.concat(A)),re){case 1:Si(p,5);break;case 4:Si(p,10);break;case 3:Si(p,6);break;default:Si(p,2)}}}function Th(p,S){let A=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(A*=2),A*S}function Si(p,S){if(p.j.info("Error code "+S),S==2){var A=v(p.fb,p),$=p.Xa;const re=!$;$=new _i($||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Sa($,"https"),ao($),re?Ym($.toString(),A):Eh($.toString(),A)}else Qt(2);p.G=0,p.l&&p.l.sa(S),Ch(p),Dl(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Ch(p){if(p.G=0,p.ka=[],p.l){const S=yh(p.h);(S.length!=0||p.i.length!=0)&&(x(p.ka,S),x(p.ka,p.i),p.h.i.length=0,_(p.i),p.i.length=0),p.l.ra()}}function Ih(p,S,A){var $=A instanceof _i?kr(A):new _i(A);if($.g!="")S&&($.g=S+"."+$.g),io($,$.s);else{var re=u.location;$=re.protocol,S=S?S+"."+re.hostname:re.hostname,re=+re.port;var le=new _i(null);$&&Sa(le,$),S&&(le.g=S),re&&io(le,re),A&&(le.l=A),$=le}return A=p.D,S=p.ya,A&&S&&Mt($,A,S),Mt($,"VER",p.la),Ni(p,$),$}function jh(p,S,A){if(S&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Ca&&!p.pa?new Yt(new Ei({eb:A})):new Yt(p.pa),S.Ha(p.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cu(){}t=Cu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ul(){}Ul.prototype.g=function(p,S){return new rr(p,S)};function rr(p,S){zt.call(this),this.g=new Su(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(p?p["X-WebChannel-Client-Profile"]=S.va:p={"X-WebChannel-Client-Profile":S.va}),this.g.S=p,(p=S&&S.Sb)&&!C(p)&&(this.g.m=p),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!C(S)&&(this.g.D=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new Ys(this)}b(rr,zt),rr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){Mn(this.g)},rr.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var A={};A.__data__=p,p=A}else this.u&&(A={},A.__data__=ls(p),p=A);S.i.push(new ph(S.Ya++,p)),S.G==3&&Qs(S)},rr.prototype.N=function(){this.g.l=null,delete this.j,Mn(this.g),delete this.g,rr.aa.N.call(this)};function Ah(p){Gt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const A in S){p=A;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}b(Ah,Gt);function Ph(){ie.call(this),this.status=1}b(Ph,ie);function Ys(p){this.g=p}b(Ys,Cu),Ys.prototype.ua=function(){Rt(this.g,"a")},Ys.prototype.ta=function(p){Rt(this.g,new Ah(p))},Ys.prototype.sa=function(p){Rt(this.g,new Ph)},Ys.prototype.ra=function(){Rt(this.g,"b")},Ul.prototype.createWebChannel=Ul.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,ZC=function(){return new Ul},JC=function(){return Ct()},XC=ye,Zv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qt.NO_ERROR=0,qt.TIMEOUT=8,qt.HTTP_ERROR=6,tp=qt,Tl.COMPLETE="complete",YC=Tl,yt.EventType=Bt,Bt.OPEN="a",Bt.CLOSE="b",Bt.ERROR="c",Bt.MESSAGE="d",zt.prototype.listen=zt.prototype.K,rd=yt,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,QC=Yt}).apply(typeof Of<"u"?Of:typeof self<"u"?self:typeof window<"u"?window:{});const cN="@firebase/firestore",uN="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=new nw("@firebase/firestore");function fc(){return ll.logLevel}function Re(t,...e){if(ll.logLevel<=pt.DEBUG){const n=e.map(fw);ll.debug(`Firestore (${uu}): ${t}`,...n)}}function Qi(t,...e){if(ll.logLevel<=pt.ERROR){const n=e.map(fw);ll.error(`Firestore (${uu}): ${t}`,...n)}}function aa(t,...e){if(ll.logLevel<=pt.WARN){const n=e.map(fw);ll.warn(`Firestore (${uu}): ${t}`,...n)}}function fw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,eI(t,r,n)}function eI(t,e,n){let r=`FIRESTORE (${uu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Qi(r),new Error(r)}function Ot(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||eI(e,s,r)}function at(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(br.UNAUTHENTICATED))}shutdown(){}}class XU{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ot(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let a=new zi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new zi,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},u=h=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new zi)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ot(typeof r.accessToken=="string",31837,{l:r}),new YU(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ot(e===null||typeof e=="string",2055,{h:e}),new br(e)}}class JU{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=br.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZU{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new JU(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ts(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ot(this.o===void 0,3512);const r=a=>{a.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dN(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ot(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new dN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=t6(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function ht(t,e){return t<e?-1:t>e?1:0}function ex(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ht(r,s);{const a=nI(),c=n6(a.encode(hN(t,n)),a.encode(hN(e,n)));return c!==0?c:ht(r,s)}}n+=r>65535?2:1}return ht(t.length,e.length)}function hN(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function n6(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ht(t[n],e[n]);return ht(t.length,e.length)}function Kc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="__name__";class ti{constructor(e,n,r){n===void 0?n=0:n>e.length&&tt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&tt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ti.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ti?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=ti.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return ht(e.length,n.length)}static compareSegments(e,n){const r=ti.isNumericId(e),s=ti.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ti.extractNumericId(e).compare(ti.extractNumericId(n)):ex(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jo.fromString(e.substring(4,e.length-2))}}class Ft extends ti{construct(e,n,r){return new Ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ft(n)}static emptyPath(){return new Ft([])}}const r6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class On extends ti{construct(e,n,r){return new On(e,n,r)}static isValidIdentifier(e){return r6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),On.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tx}static keyField(){return new On([tx])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new be(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new be(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new be(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(a(),s++)}if(a(),c)throw new be(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new On(n)}static emptyPath(){return new On([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Ft.fromString(e))}static fromName(e){return new qe(Ft.fromString(e).popFirst(5))}static empty(){return new qe(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t,e,n){if(!n)throw new be(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rI(t,e,n,r){if(e===!0&&r===!0)throw new be(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fN(t){if(!qe.isDocumentKey(t))throw new be(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pN(t){if(qe.isDocumentKey(t))throw new be(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function pm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":tt(12329,{type:typeof t})}function er(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new be(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pm(t);throw new be(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,e){const n={typeString:t};return e&&(n.value=e),n}function th(t,e){if(!sI(t))throw new be(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(s&&typeof c!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&c!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new be(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=-62135596800,gN=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*gN);return new ut(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<mN)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gN}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(th(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:_n("string",ut._jsonSchemaVersion),seconds:_n("number"),nanoseconds:_n("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{static fromTimestamp(e){return new ot(e)}static min(){return new ot(new ut(0,0))}static max(){return new ot(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=-1;function s6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ot.fromTimestamp(r===1e9?new ut(n+1,0):new ut(n,r));return new la(s,qe.empty(),e)}function i6(t){return new la(t.readTime,t.key,Rd)}class la{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new la(ot.min(),qe.empty(),Rd)}static max(){return new la(ot.max(),qe.empty(),Rd)}}function o6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=qe.comparator(t.documentKey,e.documentKey),n!==0?n:ht(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==a6)throw t;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,r)=>{n(e)})}static reject(e){return new de((n,r)=>{r(e)})}static waitFor(e){return new de((n,r)=>{let s=0,a=0,c=!1;e.forEach(u=>{++s,u.next(()=>{++a,c&&a===s&&n()},h=>r(h))}),c=!0,a===s&&n()})}static or(e){let n=de.resolve(!1);for(const r of e)n=n.next(s=>s?de.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new de((r,s)=>{const a=e.length,c=new Array(a);let u=0;for(let h=0;h<a;h++){const f=h;n(e[f]).next(g=>{c[f]=g,++u,u===a&&r(c)},g=>s(g))}})}static doWhile(e,n){return new de((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function c6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function hu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}mm.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=-1;function gm(t){return t==null}function Ap(t){return t===0&&1/t==-1/0}function u6(t){return typeof t=="number"&&Number.isInteger(t)&&!Ap(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="";function d6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yN(e)),e=h6(t.get(n),e);return yN(e)}function h6(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case iI:n+="";break;default:n+=a}}return n}function yN(t){return t+iI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ma(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.comparator=e,this.root=n||Un.EMPTY}insert(e,n){return new ln(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Df(this.root,e,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Df(this.root,e,this.comparator,!0)}}class Df{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Un{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Un.RED,this.left=s??Un.EMPTY,this.right=a??Un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Un(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Un.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tt(27949);return e+(this.isRed()?0:1)}}Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1;Un.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new Un(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xN(this.data.getIterator())}getIteratorFrom(e){return new xN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Cn(this.comparator);return n.data=e,n}}class xN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.fields=e,e.sort(On.comparator)}static empty(){return new zr([])}unionWith(e){let n=new Cn(On.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Kc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new aI("Invalid base64 string: "+a):a}}(e);return new Dn(n)}static fromUint8Array(e){const n=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new Dn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const f6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ca(t){if(Ot(!!t,39018),typeof t=="string"){let e=0;const n=f6.exec(t);if(Ot(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mn(t.seconds),nanos:mn(t.nanos)}}function mn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ua(t){return typeof t=="string"?Dn.fromBase64String(t):Dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="server_timestamp",cI="__type__",uI="__previous_value__",dI="__local_write_time__";function gw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[cI])===null||n===void 0?void 0:n.stringValue)===lI}function ym(t){const e=t.mapValue.fields[uI];return gw(e)?ym(e):e}function kd(t){const e=ca(t.mapValue.fields[dI].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,n,r,s,a,c,u,h,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const Pp="(default)";class Gc{constructor(e,n){this.projectId=e,this.database=n||Pp}static empty(){return new Gc("","")}get isDefaultDatabase(){return this.database===Pp}isEqual(e){return e instanceof Gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="__type__",m6="__max__",Lf={mapValue:{}},fI="__vector__",Rp="value";function da(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gw(t)?4:y6(t)?9007199254740991:g6(t)?10:11:tt(28295,{value:t})}function di(t,e){if(t===e)return!0;const n=da(t);if(n!==da(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kd(t).isEqual(kd(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=ca(s.timestampValue),u=ca(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return ua(s.bytesValue).isEqual(ua(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return mn(s.geoPointValue.latitude)===mn(a.geoPointValue.latitude)&&mn(s.geoPointValue.longitude)===mn(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return mn(s.integerValue)===mn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=mn(s.doubleValue),u=mn(a.doubleValue);return c===u?Ap(c)===Ap(u):isNaN(c)&&isNaN(u)}return!1}(t,e);case 9:return Kc(t.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},u=a.mapValue.fields||{};if(vN(c)!==vN(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!di(c[h],u[h])))return!1;return!0}(t,e);default:return tt(52216,{left:t})}}function Od(t,e){return(t.values||[]).find(n=>di(n,e))!==void 0}function Qc(t,e){if(t===e)return 0;const n=da(t),r=da(e);if(n!==r)return ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ht(t.booleanValue,e.booleanValue);case 2:return function(a,c){const u=mn(a.integerValue||a.doubleValue),h=mn(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return wN(t.timestampValue,e.timestampValue);case 4:return wN(kd(t),kd(e));case 5:return ex(t.stringValue,e.stringValue);case 6:return function(a,c){const u=ua(a),h=ua(c);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const u=a.split("/"),h=c.split("/");for(let f=0;f<u.length&&f<h.length;f++){const g=ht(u[f],h[f]);if(g!==0)return g}return ht(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const u=ht(mn(a.latitude),mn(c.latitude));return u!==0?u:ht(mn(a.longitude),mn(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _N(t.arrayValue,e.arrayValue);case 10:return function(a,c){var u,h,f,g;const y=a.fields||{},v=c.fields||{},w=(u=y[Rp])===null||u===void 0?void 0:u.arrayValue,b=(h=v[Rp])===null||h===void 0?void 0:h.arrayValue,_=ht(((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0,((g=b==null?void 0:b.values)===null||g===void 0?void 0:g.length)||0);return _!==0?_:_N(w,b)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===Lf.mapValue&&c===Lf.mapValue)return 0;if(a===Lf.mapValue)return 1;if(c===Lf.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),f=c.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const v=ex(h[y],g[y]);if(v!==0)return v;const w=Qc(u[h[y]],f[g[y]]);if(w!==0)return w}return ht(h.length,g.length)}(t.mapValue,e.mapValue);default:throw tt(23264,{le:n})}}function wN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ht(t,e);const n=ca(t),r=ca(e),s=ht(n.seconds,r.seconds);return s!==0?s:ht(n.nanos,r.nanos)}function _N(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Qc(n[s],r[s]);if(a)return a}return ht(n.length,r.length)}function Yc(t){return nx(t)}function nx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ca(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ua(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return qe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=nx(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${nx(n.fields[c])}`;return s+"}"}(t.mapValue):tt(61005,{value:t})}function np(t){switch(da(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ym(t);return e?16+np(e):16;case 5:return 2*t.stringValue.length;case 6:return ua(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+np(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ma(r.fields,(a,c)=>{s+=a.length+np(c)}),s}(t.mapValue);default:throw tt(13486,{value:t})}}function EN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rx(t){return!!t&&"integerValue"in t}function yw(t){return!!t&&"arrayValue"in t}function bN(t){return!!t&&"nullValue"in t}function NN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rp(t){return!!t&&"mapValue"in t}function g6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[hI])===null||n===void 0?void 0:n.stringValue)===fI}function fd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ma(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function y6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===m6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.value=e}static empty(){return new Sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fd(n)}setAll(e){let n=On.emptyPath(),r={},s=[];e.forEach((c,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,s),r={},s=[],n=u.popLast()}c?r[u.lastSegment()]=fd(c):s.push(u.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());rp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];rp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ma(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Sr(fd(this.value))}}function pI(t){const e=[];return ma(t.fields,(n,r)=>{const s=new On([n]);if(rp(r)){const a=pI(r.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new zr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n,r,s,a,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Xn(e,0,ot.min(),ot.min(),ot.min(),Sr.empty(),0)}static newFoundDocument(e,n,r,s){return new Xn(e,1,n,ot.min(),r,s,0)}static newNoDocument(e,n){return new Xn(e,2,n,ot.min(),ot.min(),Sr.empty(),0)}static newUnknownDocument(e,n){return new Xn(e,3,n,ot.min(),ot.min(),Sr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){this.position=e,this.inclusive=n}}function SN(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],c=t.position[s];if(a.field.isKeyField()?r=qe.comparator(qe.fromName(c.referenceValue),n.key):r=Qc(c,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function TN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!di(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n="asc"){this.field=e,this.dir=n}}function v6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{}class wn extends mI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new w6(e,n,r):n==="array-contains"?new b6(e,r):n==="in"?new N6(e,r):n==="not-in"?new S6(e,r):n==="array-contains-any"?new T6(e,r):new wn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _6(e,r):new E6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qc(n,this.value)):n!==null&&da(this.value)===da(n)&&this.matchesComparison(Qc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ls extends mI{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ls(e,n)}matches(e){return gI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function gI(t){return t.op==="and"}function yI(t){return x6(t)&&gI(t)}function x6(t){for(const e of t.filters)if(e instanceof Ls)return!1;return!0}function sx(t){if(t instanceof wn)return t.field.canonicalString()+t.op.toString()+Yc(t.value);if(yI(t))return t.filters.map(e=>sx(e)).join(",");{const e=t.filters.map(n=>sx(n)).join(",");return`${t.op}(${e})`}}function vI(t,e){return t instanceof wn?function(r,s){return s instanceof wn&&r.op===s.op&&r.field.isEqual(s.field)&&di(r.value,s.value)}(t,e):t instanceof Ls?function(r,s){return s instanceof Ls&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,c,u)=>a&&vI(c,s.filters[u]),!0):!1}(t,e):void tt(19439)}function xI(t){return t instanceof wn?function(n){return`${n.field.canonicalString()} ${n.op} ${Yc(n.value)}`}(t):t instanceof Ls?function(n){return n.op.toString()+" {"+n.getFilters().map(xI).join(" ,")+"}"}(t):"Filter"}class w6 extends wn{constructor(e,n,r){super(e,n,r),this.key=qe.fromName(r.referenceValue)}matches(e){const n=qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class _6 extends wn{constructor(e,n){super(e,"in",n),this.keys=wI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class E6 extends wn{constructor(e,n){super(e,"not-in",n),this.keys=wI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>qe.fromName(r.referenceValue))}class b6 extends wn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yw(n)&&Od(n.arrayValue,this.value)}}class N6 extends wn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Od(this.value.arrayValue,n)}}class S6 extends wn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Od(this.value.arrayValue,n)}}class T6 extends wn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Od(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,n=null,r=[],s=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=u,this.Pe=null}}function CN(t,e=null,n=[],r=[],s=null,a=null,c=null){return new C6(t,e,n,r,s,a,c)}function vw(t){const e=at(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sx(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),gm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Yc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Yc(r)).join(",")),e.Pe=n}return e.Pe}function xw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!v6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TN(t.startAt,e.startAt)&&TN(t.endAt,e.endAt)}function ix(t){return qe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n=null,r=[],s=[],a=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function I6(t,e,n,r,s,a,c,u){return new _l(t,e,n,r,s,a,c,u)}function vm(t){return new _l(t)}function IN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _I(t){return t.collectionGroup!==null}function pd(t){const e=at(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Cn(On.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Dd(a,r))}),n.has(On.keyField().canonicalString())||e.Te.push(new Dd(On.keyField(),r))}return e.Te}function li(t){const e=at(t);return e.Ie||(e.Ie=j6(e,pd(t))),e.Ie}function j6(t,e){if(t.limitType==="F")return CN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Dd(s.field,a)});const n=t.endAt?new kp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new kp(t.startAt.position,t.startAt.inclusive):null;return CN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ox(t,e){const n=t.filters.concat([e]);return new _l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ax(t,e,n){return new _l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xm(t,e){return xw(li(t),li(e))&&t.limitType===e.limitType}function EI(t){return`${vw(li(t))}|lt:${t.limitType}`}function pc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>xI(s)).join(", ")}]`),gm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Yc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Yc(s)).join(",")),`Target(${r})`}(li(t))}; limitType=${t.limitType})`}function wm(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):qe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of pd(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(c,u,h){const f=SN(c,u,h);return c.inclusive?f<=0:f<0}(r.startAt,pd(r),s)||r.endAt&&!function(c,u,h){const f=SN(c,u,h);return c.inclusive?f>=0:f>0}(r.endAt,pd(r),s))}(t,e)}function A6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bI(t){return(e,n)=>{let r=!1;for(const s of pd(t)){const a=P6(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function P6(t,e,n){const r=t.field.isKeyField()?qe.comparator(e.key,n.key):function(a,c,u){const h=c.data.field(a),f=u.data.field(a);return h!==null&&f!==null?Qc(h,f):tt(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ma(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return oI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=new ln(qe.comparator);function Yi(){return R6}const NI=new ln(qe.comparator);function sd(...t){let e=NI;for(const n of t)e=e.insert(n.key,n);return e}function SI(t){let e=NI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ba(){return md()}function TI(){return md()}function md(){return new El(t=>t.toString(),(t,e)=>t.isEqual(e))}const k6=new ln(qe.comparator),O6=new Cn(qe.comparator);function mt(...t){let e=O6;for(const n of t)e=e.add(n);return e}const D6=new Cn(ht);function L6(){return D6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ap(e)?"-0":e}}function CI(t){return{integerValue:""+t}}function M6(t,e){return u6(e)?CI(e):ww(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this._=void 0}}function F6(t,e,n){return t instanceof Ld?function(s,a){const c={fields:{[cI]:{stringValue:lI},[dI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&gw(a)&&(a=ym(a)),a&&(c.fields[uI]=a),{mapValue:c}}(n,e):t instanceof Md?jI(t,e):t instanceof Fd?AI(t,e):function(s,a){const c=II(s,a),u=jN(c)+jN(s.Ee);return rx(c)&&rx(s.Ee)?CI(u):ww(s.serializer,u)}(t,e)}function V6(t,e,n){return t instanceof Md?jI(t,e):t instanceof Fd?AI(t,e):n}function II(t,e){return t instanceof Op?function(r){return rx(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Ld extends _m{}class Md extends _m{constructor(e){super(),this.elements=e}}function jI(t,e){const n=PI(e);for(const r of t.elements)n.some(s=>di(s,r))||n.push(r);return{arrayValue:{values:n}}}class Fd extends _m{constructor(e){super(),this.elements=e}}function AI(t,e){let n=PI(e);for(const r of t.elements)n=n.filter(s=>!di(s,r));return{arrayValue:{values:n}}}class Op extends _m{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function jN(t){return mn(t.integerValue||t.doubleValue)}function PI(t){return yw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,n){this.field=e,this.transform=n}}function $6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Md&&s instanceof Md||r instanceof Fd&&s instanceof Fd?Kc(r.elements,s.elements,di):r instanceof Op&&s instanceof Op?di(r.Ee,s.Ee):r instanceof Ld&&s instanceof Ld}(t.transform,e.transform)}class z6{constructor(e,n){this.version=e,this.transformResults=n}}class cr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Em{}function RI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bm(t.key,cr.none()):new nh(t.key,t.data,cr.none());{const n=t.data,r=Sr.empty();let s=new Cn(On.comparator);for(let a of e.fields)if(!s.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?r.delete(a):r.set(a,c),s=s.add(a)}return new ga(t.key,r,new zr(s.toArray()),cr.none())}}function B6(t,e,n){t instanceof nh?function(s,a,c){const u=s.value.clone(),h=PN(s.fieldTransforms,a,c.transformResults);u.setAll(h),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ga?function(s,a,c){if(!sp(s.precondition,a))return void a.convertToUnknownDocument(c.version);const u=PN(s.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(kI(s)),h.setAll(u),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(t,e,n):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function gd(t,e,n,r){return t instanceof nh?function(a,c,u,h){if(!sp(a.precondition,c))return u;const f=a.value.clone(),g=RN(a.fieldTransforms,h,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof ga?function(a,c,u,h){if(!sp(a.precondition,c))return u;const f=RN(a.fieldTransforms,h,c),g=c.data;return g.setAll(kI(a)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(a,c,u){return sp(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(t,e,n)}function q6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=II(r.transform,s||null);a!=null&&(n===null&&(n=Sr.empty()),n.set(r.field,a))}return n||null}function AN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Kc(r,s,(a,c)=>$6(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nh extends Em{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ga extends Em{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function kI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function PN(t,e,n){const r=new Map;Ot(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const a=t[s],c=a.transform,u=e.data.field(a.field);r.set(a.field,V6(c,u,n[s]))}return r}function RN(t,e,n){const r=new Map;for(const s of t){const a=s.transform,c=n.data.field(s.field);r.set(s.field,F6(a,c,e))}return r}class bm extends Em{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class W6 extends Em{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&B6(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=TI();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=n.has(s.key)?null:u;const h=RI(c,u);h!==null&&r.set(s.key,h),c.isValidDocument()||c.convertToNoDocument(ot.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),mt())}isEqual(e){return this.batchId===e.batchId&&Kc(this.mutations,e.mutations,(n,r)=>AN(n,r))&&Kc(this.baseMutations,e.baseMutations,(n,r)=>AN(n,r))}}class _w{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ot(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return k6}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new _w(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K6=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn,Nt;function Q6(t){switch(t){case ce.OK:return tt(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return tt(15467,{code:t})}}function OI(t){if(t===void 0)return Qi("GRPC error has no .code"),ce.UNKNOWN;switch(t){case xn.OK:return ce.OK;case xn.CANCELLED:return ce.CANCELLED;case xn.UNKNOWN:return ce.UNKNOWN;case xn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case xn.INTERNAL:return ce.INTERNAL;case xn.UNAVAILABLE:return ce.UNAVAILABLE;case xn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case xn.NOT_FOUND:return ce.NOT_FOUND;case xn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case xn.ABORTED:return ce.ABORTED;case xn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case xn.DATA_LOSS:return ce.DATA_LOSS;default:return tt(39323,{code:t})}}(Nt=xn||(xn={}))[Nt.OK=0]="OK",Nt[Nt.CANCELLED=1]="CANCELLED",Nt[Nt.UNKNOWN=2]="UNKNOWN",Nt[Nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nt[Nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nt[Nt.NOT_FOUND=5]="NOT_FOUND",Nt[Nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nt[Nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nt[Nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nt[Nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nt[Nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nt[Nt.ABORTED=10]="ABORTED",Nt[Nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nt[Nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nt[Nt.INTERNAL=13]="INTERNAL",Nt[Nt.UNAVAILABLE=14]="UNAVAILABLE",Nt[Nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=new Jo([4294967295,4294967295],0);function kN(t){const e=nI().encode(t),n=new GC;return n.update(e),new Uint8Array(n.digest())}function ON(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Jo([n,r],0),new Jo([s,a],0)]}class Ew{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new id(`Invalid padding: ${n}`);if(r<0)throw new id(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new id(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new id(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Jo.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Jo.fromNumber(r)));return s.compare(Y6)===1&&(s=new Jo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=kN(e),[r,s]=ON(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);if(!this.ye(c))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Ew(a,s,n);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const n=kN(e),[r,s]=ON(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);this.we(c)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class id extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,rh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Nm(ot.min(),s,new ln(ht),Yi(),mt())}}class rh{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rh(r,n,mt(),mt(),mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class DI{constructor(e,n){this.targetId=e,this.De=n}}class LI{constructor(e,n,r=Dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class DN{constructor(){this.ve=0,this.Ce=LN(),this.Fe=Dn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=mt(),n=mt(),r=mt();return this.Ce.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:tt(38017,{changeType:a})}}),new rh(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=LN()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ot(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class X6{constructor(e){this.We=e,this.Ge=new Map,this.ze=Yi(),this.je=Mf(),this.Je=Mf(),this.He=new ln(ht)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:tt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const a=s.target;if(ix(a))if(r===0){const c=new qe(a.path);this.Xe(n,c,Xn.newNoDocument(c,ot.min()))}else Ot(r===1,20013,{expectedCount:r});else{const c=this.ot(n);if(c!==r){const u=this._t(e),h=u?this.ut(u,e,c):1;if(h!==0){this.rt(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let c,u;try{c=ua(r).toUint8Array()}catch(h){if(h instanceof aI)return aa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Ew(c,s,a)}catch(h){return aa(h instanceof id?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.fe===0?null:u}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.Xe(n,a,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((a,c)=>{const u=this.st(c);if(u){if(a.current&&ix(u.target)){const h=new qe(u.target.path);this.Tt(h).has(c)||this.It(c,h)||this.Xe(c,h,Xn.newNoDocument(h,e))}a.Ne&&(n.set(c,a.Le()),a.ke())}});let r=mt();this.Je.forEach((a,c)=>{let u=!0;c.forEachWhile(h=>{const f=this.st(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const s=new Nm(e,n,this.He,this.ze,r);return this.ze=Yi(),this.je=Mf(),this.Je=Mf(),this.He=new ln(ht),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new DN,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Cn(ht),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Cn(ht),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Re("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new DN),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Mf(){return new ln(qe.comparator)}function LN(){return new ln(qe.comparator)}const J6={asc:"ASCENDING",desc:"DESCENDING"},Z6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},e5={and:"AND",or:"OR"};class t5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lx(t,e){return t.useProto3Json||gm(e)?e:{value:e}}function Dp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function n5(t,e){return Dp(t,e.toTimestamp())}function ci(t){return Ot(!!t,49232),ot.fromTimestamp(function(n){const r=ca(n);return new ut(r.seconds,r.nanos)}(t))}function bw(t,e){return cx(t,e).canonicalString()}function cx(t,e){const n=function(s){return new Ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function FI(t){const e=Ft.fromString(t);return Ot(BI(e),10190,{key:e.toString()}),e}function ux(t,e){return bw(t.databaseId,e.path)}function zy(t,e){const n=FI(e);if(n.get(1)!==t.databaseId.projectId)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new qe(UI(n))}function VI(t,e){return bw(t.databaseId,e)}function r5(t){const e=FI(t);return e.length===4?Ft.emptyPath():UI(e)}function dx(t){return new Ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UI(t){return Ot(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function MN(t,e,n){return{name:ux(t,e),fields:n.value.mapValue.fields}}function s5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:tt(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,g){return f.useProto3Json?(Ot(g===void 0||typeof g=="string",58123),Dn.fromBase64String(g||"")):(Ot(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Dn.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(f){const g=f.code===void 0?ce.UNKNOWN:OI(f.code);return new be(g,f.message||"")}(c);n=new LI(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=zy(t,r.document.name),a=ci(r.document.updateTime),c=r.document.createTime?ci(r.document.createTime):ot.min(),u=new Sr({mapValue:{fields:r.document.fields}}),h=Xn.newFoundDocument(s,a,c,u),f=r.targetIds||[],g=r.removedTargetIds||[];n=new ip(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=zy(t,r.document),a=r.readTime?ci(r.readTime):ot.min(),c=Xn.newNoDocument(s,a),u=r.removedTargetIds||[];n=new ip([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=zy(t,r.document),a=r.removedTargetIds||[];n=new ip([],a,s,null)}else{if(!("filter"in e))return tt(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,c=new G6(s,a),u=r.targetId;n=new DI(u,c)}}return n}function i5(t,e){let n;if(e instanceof nh)n={update:MN(t,e.key,e.value)};else if(e instanceof bm)n={delete:ux(t,e.key)};else if(e instanceof ga)n={update:MN(t,e.key,e.data),updateMask:p5(e.fieldMask)};else{if(!(e instanceof W6))return tt(16599,{Rt:e.type});n={verify:ux(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const u=c.transform;if(u instanceof Ld)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Md)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Fd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Op)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw tt(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:n5(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:tt(27497)}(t,e.precondition)),n}function o5(t,e){return t&&t.length>0?(Ot(e!==void 0,14353),t.map(n=>function(s,a){let c=s.updateTime?ci(s.updateTime):ci(a);return c.isEqual(ot.min())&&(c=ci(a)),new z6(c,s.transformResults||[])}(n,e))):[]}function a5(t,e){return{documents:[VI(t,e.path)]}}function l5(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=VI(t,s);const a=function(f){if(f.length!==0)return zI(Ls.create(f,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(f){if(f.length!==0)return f.map(g=>function(v){return{field:mc(v.field),direction:d5(v.dir)}}(g))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=lx(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:n,parent:s}}function c5(t){let e=r5(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ot(r===1,65062);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=function(y){const v=$I(y);return v instanceof Ls&&yI(v)?v.getFilters():[v]}(n.where));let c=[];n.orderBy&&(c=function(y){return y.map(v=>function(b){return new Dd(gc(b.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,gm(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(y){const v=!!y.before,w=y.values||[];return new kp(w,v)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const v=!y.before,w=y.values||[];return new kp(w,v)}(n.endAt)),I6(e,s,c,a,u,"F",h,f)}function u5(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $I(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gc(n.unaryFilter.field);return wn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=gc(n.unaryFilter.field);return wn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=gc(n.unaryFilter.field);return wn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=gc(n.unaryFilter.field);return wn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}}(t):t.fieldFilter!==void 0?function(n){return wn.create(gc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ls.create(n.compositeFilter.filters.map(r=>$I(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return tt(1026)}}(n.compositeFilter.op))}(t):tt(30097,{filter:t})}function d5(t){return J6[t]}function h5(t){return Z6[t]}function f5(t){return e5[t]}function mc(t){return{fieldPath:t.canonicalString()}}function gc(t){return On.fromServerFormat(t.fieldPath)}function zI(t){return t instanceof wn?function(n){if(n.op==="=="){if(NN(n.value))return{unaryFilter:{field:mc(n.field),op:"IS_NAN"}};if(bN(n.value))return{unaryFilter:{field:mc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(NN(n.value))return{unaryFilter:{field:mc(n.field),op:"IS_NOT_NAN"}};if(bN(n.value))return{unaryFilter:{field:mc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mc(n.field),op:h5(n.op),value:n.value}}}(t):t instanceof Ls?function(n){const r=n.getFilters().map(s=>zI(s));return r.length===1?r[0]:{compositeFilter:{op:f5(n.op),filters:r}}}(t):tt(54877,{filter:t})}function p5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n,r,s,a=ot.min(),c=ot.min(),u=Dn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e){this.gt=e}}function g5(t){const e=c5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ax(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(){this.Dn=new v5}addToCollectionParentIndex(e,n){return this.Dn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(la.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(la.min())}updateCollectionGroup(e,n,r){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class v5{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Cn(Ft.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Cn(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qI=41943040;class Nr{static withCacheSize(e){return new Nr(e,Nr.DEFAULT_COLLECTION_PERCENTILE,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr.DEFAULT_COLLECTION_PERCENTILE=10,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nr.DEFAULT=new Nr(qI,Nr.DEFAULT_COLLECTION_PERCENTILE,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nr.DISABLED=new Nr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Xc(0)}static ur(){return new Xc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="LruGarbageCollector",WI=1048576;function UN([t,e],[n,r]){const s=ht(t,n);return s===0?ht(e,r):s}class x5{constructor(e){this.Tr=e,this.buffer=new Cn(UN),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();UN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class w5{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Re(VN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){hu(n)?Re(VN,"Ignoring IndexedDB error during garbage collection: ",n):await du(n)}await this.Rr(3e5)})}}class _5{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return de.resolve(mm.ue);const r=new x5(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(FN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FN):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,a,c,u,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,n))).next(y=>(a=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),fc()<=pt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:y})))}}function E5(t,e){return new _5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this.changes=new El(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?de.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&gd(r.mutation,s,zr.empty(),ut.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,mt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=mt()){const s=Ba();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let c=sd();return a.forEach((u,h)=>{c=c.insert(u,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=Ba();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,mt()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,u)=>{n.set(c,u)})})}computeViews(e,n,r,s){let a=Yi();const c=md(),u=function(){return md()}();return n.forEach((h,f)=>{const g=r.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof ga)?a=a.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),gd(g.mutation,f,g.mutation.getFieldMask(),ut.now())):c.set(f.key,zr.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((f,g)=>c.set(f,g)),n.forEach((f,g)=>{var y;return u.set(f,new N5(g,(y=c.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const r=md();let s=new ln((c,u)=>c-u),a=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const u of c)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let g=r.get(h)||zr.empty();g=u.applyToLocalView(f,g),r.set(h,g);const y=(s.get(u.batchId)||mt()).add(h);s=s.insert(u.batchId,y)})}).next(()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,g=h.value,y=TI();g.forEach(v=>{if(!a.has(v)){const w=RI(n.get(v),r.get(v));w!==null&&y.set(v,w),a=a.add(v)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return de.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(c){return qe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_I(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):de.resolve(Ba());let u=Rd,h=a;return c.next(f=>de.forEach(f,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),a.get(g)?de.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{h=h.insert(g,v)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,h,f,mt())).next(g=>({batchId:u,changes:SI(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new qe(n)).next(r=>{let s=sd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let c=sd();return this.indexManager.getCollectionParents(e,a).next(u=>de.forEach(u,h=>{const f=function(y,v){return new _l(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(g=>{g.forEach((y,v)=>{c=c.insert(y,v)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(c=>{a.forEach((h,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,Xn.newInvalidDocument(g)))});let u=sd();return c.forEach((h,f)=>{const g=a.get(h);g!==void 0&&gd(g.mutation,f,zr.empty(),ut.now()),wm(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return de.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ci(s.createTime)}}(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:g5(s.bundledQuery),readTime:ci(s.readTime)}}(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(){this.overlays=new ln(qe.comparator),this.kr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ba();return de.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.wt(e,n,a)}),de.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),de.resolve()}getOverlaysForCollection(e,n,r){const s=Ba(),a=n.length+1,c=new qe(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>r&&s.set(h.getKey(),h)}return de.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new ln((f,g)=>f-g);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let g=a.get(f.largestBatchId);g===null&&(g=Ba(),a=a.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=Ba(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=s)););return de.resolve(u)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new K6(n,r));let a=this.kr.get(n);a===void 0&&(a=mt(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.qr=new Cn(kn.Qr),this.$r=new Cn(kn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new kn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new kn(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new qe(new Ft([])),r=new kn(n,e),s=new kn(n,e+1),a=[];return this.$r.forEachInRange([r,s],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new qe(new Ft([])),r=new kn(n,e),s=new kn(n,e+1);let a=mt();return this.$r.forEachInRange([r,s],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new kn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return qe.comparator(e.key,n.key)||ht(e.Hr,n.Hr)}static Ur(e,n){return ht(e.Hr,n.Hr)||qe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Cn(kn.Qr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new H6(a,n,r,s);this.mutationQueue.push(c);for(const u of s)this.Yr=this.Yr.add(new kn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,n){return de.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),a=s<0?0:s;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?mw:this.er-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kn(n,0),s=new kn(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],c=>{const u=this.Zr(c.Hr);a.push(u)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Cn(ht);return n.forEach(s=>{const a=new kn(s,0),c=new kn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],u=>{r=r.add(u.Hr)})}),de.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;qe.isDocumentKey(a)||(a=a.child(""));const c=new kn(new qe(a),0);let u=new Cn(ht);return this.Yr.forEachWhile(h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(u=u.add(h.Hr)),!0)},c),de.resolve(this.ei(u))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ot(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return de.forEach(n.mutations,s=>{const a=new kn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new kn(n,0),s=this.Yr.firstAfterOrEqual(r);return de.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e){this.ni=e,this.docs=function(){return new ln(qe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,c=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return de.resolve(r?r.document.mutableCopy():Xn.newInvalidDocument(n))}getEntries(e,n){let r=Yi();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Xn.newInvalidDocument(s))}),de.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Yi();const c=n.path,u=new qe(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||o6(i6(g),r)<=0||(s.has(g.key)||wm(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return de.resolve(a)}getAllFromCollectionGroup(e,n,r,s){tt(9500)}ri(e,n){return de.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new P5(this)}getSize(e){return de.resolve(this.size)}}class P5 extends b5{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),de.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e){this.persistence=e,this.ii=new El(n=>vw(n),xw),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.si=0,this.oi=new Nw,this.targetCount=0,this._i=Xc.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),de.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Xc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.hr(n),de.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),de.waitFor(a).next(()=>s)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return de.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),de.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return de.resolve(r)}containsKey(e,n){return de.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.ai={},this.overlays={},this.ui=new mm(0),this.ci=!1,this.ci=!0,this.li=new I5,this.referenceDelegate=e(this),this.hi=new R5(this),this.indexManager=new y5,this.remoteDocumentCache=function(s){return new A5(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new m5(n),this.Ti=new T5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new C5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new j5(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Re("MemoryPersistence","Starting transaction:",e);const s=new k5(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,n){return de.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class k5 extends l6{constructor(e){super(),this.currentSequenceNumber=e}}class Sw{constructor(e){this.persistence=e,this.Ai=new Nw,this.Ri=null}static Vi(e){return new Sw(e)}get mi(){if(this.Ri)return this.Ri;throw tt(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),de.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.mi,r=>{const s=qe.fromPath(r);return this.fi(e,s).next(a=>{a||n.removeEntry(s,ot.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return de.or([()=>de.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Lp{constructor(e,n){this.persistence=e,this.gi=new El(r=>d6(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=E5(this,n)}static Vi(e,n){return new Lp(e,n)}Ii(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return de.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(a=>a?de.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,c=>this.Sr(e,c,n).next(u=>{u||(r++,a.removeEntry(c,ot.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=np(e.data.value)),n}Sr(e,n,r){return de.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return de.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=mt(),s=mt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Tw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return vF()?8:c6(tr())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ps(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,n,s,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new O5;return this.ws(e,n,c).next(u=>{if(a.result=u,this.Rs)return this.Ss(e,n,c,u.size)})}).next(()=>a.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(fc()<=pt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",pc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):(fc()<=pt.DEBUG&&Re("QueryEngine","Query:",pc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(fc()<=pt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",pc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,li(n))):de.resolve())}ps(e,n){if(IN(n))return de.resolve(null);let r=li(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ax(n,null,"F"),r=li(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=mt(...a);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const f=this.bs(n,u);return this.Ds(n,f,c,h.readTime)?this.ps(e,ax(n,null,"F")):this.vs(e,f,n,h)}))})))}ys(e,n,r,s){return IN(n)||s.isEqual(ot.min())?de.resolve(null):this.gs.getDocuments(e,r).next(a=>{const c=this.bs(n,a);return this.Ds(n,c,r,s)?de.resolve(null):(fc()<=pt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),pc(n)),this.vs(e,c,n,s6(s,Rd)).next(u=>u))})}bs(e,n){let r=new Cn(bI(e));return n.forEach((s,a)=>{wm(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,n,r){return fc()<=pt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",pc(n)),this.gs.getDocumentsMatchingQuery(e,n,la.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="LocalStore",L5=3e8;class M5{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new ln(ht),this.Ms=new El(a=>vw(a),xw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new S5(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function F5(t,e,n,r){return new M5(t,e,n,r)}async function KI(t,e){const n=at(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],u=[];let h=mt();for(const f of s){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of a){u.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(r,h).next(f=>({Bs:f,removedBatchIds:c,addedBatchIds:u}))})})}function V5(t,e){const n=at(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,h,f,g){const y=f.batch,v=y.keys();let w=de.resolve();return v.forEach(b=>{w=w.next(()=>g.getEntry(h,b)).next(_=>{const x=f.docVersions.get(b);Ot(x!==null,48541),_.version.compareTo(x)<0&&(y.applyToRemoteDocument(_,f),_.isValidDocument()&&(_.setReadTime(f.commitVersion),g.addEntry(_)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(h,y))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=mt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function GI(t){const e=at(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function U5(t,e){const n=at(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const u=[];e.targetChanges.forEach((g,y)=>{const v=s.get(y);if(!v)return;u.push(n.hi.removeMatchingKeys(a,g.removedDocuments,y).next(()=>n.hi.addMatchingKeys(a,g.addedDocuments,y)));let w=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(Dn.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,r)),s=s.insert(y,w),function(_,x,j){return _.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=L5?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(v,w,g)&&u.push(n.hi.updateTargetData(a,w))});let h=Yi(),f=mt();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))}),u.push($5(a,c,e.documentUpdates).next(g=>{h=g.Ls,f=g.ks})),!r.isEqual(ot.min())){const g=n.hi.getLastRemoteSnapshotVersion(a).next(y=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(g)}return de.waitFor(u).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,h,f)).next(()=>h)}).then(a=>(n.Fs=s,a))}function $5(t,e,n){let r=mt(),s=mt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let c=Yi();return n.forEach((u,h)=>{const f=a.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(ot.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):Re(Cw,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{Ls:c,ks:s}})}function z5(t,e){const n=at(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=mw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function B5(t,e){const n=at(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(a=>a?(s=a,de.resolve(s)):n.hi.allocateTargetId(r).next(c=>(s=new Ho(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function hx(t,e,n){const r=at(t),s=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!hu(c))throw c;Re(Cw,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function $N(t,e,n){const r=at(t);let s=ot.min(),a=mt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,f,g){const y=at(h),v=y.Ms.get(g);return v!==void 0?de.resolve(y.Fs.get(v)):y.hi.getTargetData(f,g)}(r,c,li(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(h=>{a=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,n?s:ot.min(),n?a:mt())).next(u=>(q5(r,A6(e),u),{documents:u,qs:a})))}function q5(t,e,n){let r=t.xs.get(e)||ot.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class zN{constructor(){this.activeTargetIds=L6()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class W5{constructor(){this.Fo=new zN,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new zN,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="ConnectivityMonitor";class qN{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Re(BN,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Re(BN,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff=null;function fx(){return Ff===null?Ff=function(){return 268435456+Math.round(2147483648*Math.random())}():Ff++,"0x"+Ff.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="RestConnection",K5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class G5{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Pp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,a){const c=fx(),u=this.Go(e,n.toUriEncodedString());Re(By,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,a);const{host:f}=new URL(u),g=gl(f);return this.jo(e,u,h,r,g).then(y=>(Re(By,`Received RPC '${e}' ${c}: `,y),y),y=>{throw aa(By,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,n,r,s,a,c){return this.Wo(e,n,r,s,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+uu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Go(e,n){const r=K5[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection";class Y5 extends G5{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,a){const c=fx();return new Promise((u,h)=>{const f=new QC;f.setWithCredentials(!0),f.listenOnce(YC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case tp.NO_ERROR:const y=f.getResponseJson();Re(Qn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case tp.TIMEOUT:Re(Qn,`RPC '${e}' ${c} timed out`),h(new be(ce.DEADLINE_EXCEEDED,"Request time out"));break;case tp.HTTP_ERROR:const v=f.getStatus();if(Re(Qn,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const b=w==null?void 0:w.error;if(b&&b.status&&b.message){const _=function(j){const C=j.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(C)>=0?C:ce.UNKNOWN}(b.status);h(new be(_,b.message))}else h(new be(ce.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new be(ce.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{c_:e,streamId:c,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{Re(Qn,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(s);Re(Qn,`RPC '${e}' ${c} sending request:`,s),f.send(n,"POST",g,r,15)})}P_(e,n,r){const s=fx(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ZC(),u=JC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const g=a.join("");Re(Qn,`Creating RPC '${e}' stream ${s}: ${g}`,h);const y=c.createWebChannel(g,h);this.T_(y);let v=!1,w=!1;const b=new Q5({Ho:x=>{w?Re(Qn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(v||(Re(Qn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),Re(Qn,`RPC '${e}' stream ${s} sending:`,x),y.send(x))},Yo:()=>y.close()}),_=(x,j,C)=>{x.listen(j,I=>{try{C(I)}catch(M){setTimeout(()=>{throw M},0)}})};return _(y,rd.EventType.OPEN,()=>{w||(Re(Qn,`RPC '${e}' stream ${s} transport opened.`),b.s_())}),_(y,rd.EventType.CLOSE,()=>{w||(w=!0,Re(Qn,`RPC '${e}' stream ${s} transport closed`),b.__(),this.I_(y))}),_(y,rd.EventType.ERROR,x=>{w||(w=!0,aa(Qn,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),b.__(new be(ce.UNAVAILABLE,"The operation could not be completed")))}),_(y,rd.EventType.MESSAGE,x=>{var j;if(!w){const C=x.data[0];Ot(!!C,16349);const I=C,M=(I==null?void 0:I.error)||((j=I[0])===null||j===void 0?void 0:j.error);if(M){Re(Qn,`RPC '${e}' stream ${s} received error:`,M);const U=M.status;let z=function(D){const O=xn[D];if(O!==void 0)return OI(O)}(U),P=M.message;z===void 0&&(z=ce.INTERNAL,P="Unknown error status: "+U+" with message "+M.message),w=!0,b.__(new be(z,P)),y.close()}else Re(Qn,`RPC '${e}' stream ${s} received:`,C),b.a_(C)}}),_(u,XC.STAT_EVENT,x=>{x.stat===Zv.PROXY?Re(Qn,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Zv.NOPROXY&&Re(Qn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function qy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t){return new t5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&Re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="PersistentStream";class YI{constructor(e,n,r,s,a,c,u,h){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new QI(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Qi(n.toString()),Qi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new be(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Re(WN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Re(WN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class X5 extends YI{constructor(e,n,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=s5(this.serializer,e),r=function(a){if(!("targetChange"in a))return ot.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?ot.min():c.readTime?ci(c.readTime):ot.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=dx(this.serializer),n.addTarget=function(a,c){let u;const h=c.target;if(u=ix(h)?{documents:a5(a,h)}:{query:l5(a,h).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=MI(a,c.resumeToken);const f=lx(a,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(ot.min())>0){u.readTime=Dp(a,c.snapshotVersion.toTimestamp());const f=lx(a,c.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=u5(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=dx(this.serializer),n.removeTarget=e,this.k_(n)}}class J5 extends YI{constructor(e,n,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=o5(e.writeResults,e.commitTime),r=ci(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=dx(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>i5(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{}class e$ extends Z5{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,cx(n,r),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(ce.UNKNOWN,a.toString())})}Jo(e,n,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,cx(n,r),s,c,u,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(ce.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class t${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Qi(n),this._a=!1):Re("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl="RemoteStore";class n${constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{bl(this)&&(Re(cl,"Restarting streams for network reachability change."),await async function(h){const f=at(h);f.Ia.add(4),await sh(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Tm(f)}(this))})}),this.Aa=new t$(r,s)}}async function Tm(t){if(bl(t))for(const e of t.da)await e(!0)}async function sh(t){for(const e of t.da)await e(!1)}function XI(t,e){const n=at(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Pw(n)?Aw(n):fu(n).x_()&&jw(n,e))}function Iw(t,e){const n=at(t),r=fu(n);n.Ta.delete(e),r.x_()&&JI(n,e),n.Ta.size===0&&(r.x_()?r.B_():bl(n)&&n.Aa.set("Unknown"))}function jw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ot.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fu(t).H_(e)}function JI(t,e){t.Ra.$e(e),fu(t).Y_(e)}function Aw(t){t.Ra=new X6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),fu(t).start(),t.Aa.aa()}function Pw(t){return bl(t)&&!fu(t).M_()&&t.Ta.size>0}function bl(t){return at(t).Ia.size===0}function ZI(t){t.Ra=void 0}async function r$(t){t.Aa.set("Online")}async function s$(t){t.Ta.forEach((e,n)=>{jw(t,e)})}async function i$(t,e){ZI(t),Pw(t)?(t.Aa.la(e),Aw(t)):t.Aa.set("Unknown")}async function o$(t,e,n){if(t.Aa.set("Online"),e instanceof LI&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const u of a.targetIds)s.Ta.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ta.delete(u),s.Ra.removeTarget(u))}(t,e)}catch(r){Re(cl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mp(t,r)}else if(e instanceof ip?t.Ra.Ye(e):e instanceof DI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ot.min()))try{const r=await GI(t.localStore);n.compareTo(r)>=0&&await function(a,c){const u=a.Ra.Pt(c);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=a.Ta.get(f);g&&a.Ta.set(f,g.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach((h,f)=>{const g=a.Ta.get(h);if(!g)return;a.Ta.set(h,g.withResumeToken(Dn.EMPTY_BYTE_STRING,g.snapshotVersion)),JI(a,h);const y=new Ho(g.target,h,f,g.sequenceNumber);jw(a,y)}),a.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){Re(cl,"Failed to raise snapshot:",r),await Mp(t,r)}}async function Mp(t,e,n){if(!hu(e))throw e;t.Ia.add(1),await sh(t),t.Aa.set("Offline"),n||(n=()=>GI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Re(cl,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Tm(t)})}function ej(t,e){return e().catch(n=>Mp(t,n,e))}async function Cm(t){const e=at(t),n=ha(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:mw;for(;a$(e);)try{const s=await z5(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,l$(e,s)}catch(s){await Mp(e,s)}tj(e)&&nj(e)}function a$(t){return bl(t)&&t.Pa.length<10}function l$(t,e){t.Pa.push(e);const n=ha(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function tj(t){return bl(t)&&!ha(t).M_()&&t.Pa.length>0}function nj(t){ha(t).start()}async function c$(t){ha(t).na()}async function u$(t){const e=ha(t);for(const n of t.Pa)e.X_(n.mutations)}async function d$(t,e,n){const r=t.Pa.shift(),s=_w.from(r,e,n);await ej(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Cm(t)}async function h$(t,e){e&&ha(t).Z_&&await async function(r,s){if(function(c){return Q6(c)&&c!==ce.ABORTED}(s.code)){const a=r.Pa.shift();ha(r).N_(),await ej(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Cm(r)}}(t,e),tj(t)&&nj(t)}async function HN(t,e){const n=at(t);n.asyncQueue.verifyOperationInProgress(),Re(cl,"RemoteStore received new credentials");const r=bl(n);n.Ia.add(3),await sh(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Tm(n)}async function f$(t,e){const n=at(t);e?(n.Ia.delete(2),await Tm(n)):e||(n.Ia.add(2),await sh(n),n.Aa.set("Unknown"))}function fu(t){return t.Va||(t.Va=function(n,r,s){const a=at(n);return a.ia(),new X5(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:r$.bind(null,t),e_:s$.bind(null,t),n_:i$.bind(null,t),J_:o$.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Pw(t)?Aw(t):t.Aa.set("Unknown")):(await t.Va.stop(),ZI(t))})),t.Va}function ha(t){return t.ma||(t.ma=function(n,r,s){const a=at(n);return a.ia(),new J5(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:c$.bind(null,t),n_:h$.bind(null,t),ea:u$.bind(null,t),ta:d$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Cm(t)):(await t.ma.stop(),t.Pa.length>0&&(Re(cl,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const c=Date.now()+r,u=new Rw(e,n,c,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kw(t,e){if(Qi("AsyncQueue",`${e}: ${t}`),hu(t))return new be(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{static emptySet(e){return new Sc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||qe.comparator(n.key,r.key):(n,r)=>qe.comparator(n.key,r.key),this.keyedMap=sd(),this.sortedSet=new ln(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Sc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.fa=new ln(qe.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):tt(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Jc{constructor(e,n,r,s,a,c,u,h,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,a){const c=[];return n.forEach(u=>{c.push({type:0,doc:u})}),new Jc(e,n,Sc.emptySet(n),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class m${constructor(){this.queries=GN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=at(n),a=s.queries;s.queries=GN(),a.forEach((c,u)=>{for(const h of u.wa)h.onError(r)})})(this,new be(ce.ABORTED,"Firestore shutting down"))}}function GN(){return new El(t=>EI(t),xm)}async function Ow(t,e){const n=at(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new p$,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(s,!0);break;case 1:a.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(c){const u=kw(c,`Initialization of query '${pc(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&Lw(n)}async function Dw(t,e){const n=at(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function g$(t,e){const n=at(t);let r=!1;for(const s of e){const a=s.query,c=n.queries.get(a);if(c){for(const u of c.wa)u.Ca(s)&&(r=!0);c.ya=s}}r&&Lw(n)}function y$(t,e,n){const r=at(t),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(n);r.queries.delete(e)}function Lw(t){t.Da.forEach(e=>{e.next()})}var px,QN;(QN=px||(px={})).Fa="default",QN.Cache="cache";class Mw{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Jc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Jc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==px.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.key=e}}class sj{constructor(e){this.key=e}}class v${constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=mt(),this.mutatedKeys=mt(),this.Xa=bI(e),this.eu=new Sc(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new KN,s=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,c=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,y)=>{const v=s.get(g),w=wm(this.query,y)?y:null,b=!!v&&this.mutatedKeys.has(v.key),_=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let x=!1;v&&w?v.data.isEqual(w.data)?b!==_&&(r.track({type:3,doc:w}),x=!0):this.iu(v,w)||(r.track({type:2,doc:w}),x=!0,(h&&this.Xa(w,h)>0||f&&this.Xa(w,f)<0)&&(u=!0)):!v&&w?(r.track({type:0,doc:w}),x=!0):v&&!w&&(r.track({type:1,doc:v}),x=!0,(h||f)&&(u=!0)),x&&(w?(c=c.add(w),a=_?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:u,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,y)=>function(w,b){const _=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{At:x})}};return _(w)-_(b)}(g.type,y.type)||this.Xa(g.doc,y.doc)),this.su(r),s=s!=null&&s;const u=n&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,f=h!==this.Ya;return this.Ya=h,c.length!==0||f?{snapshot:new Jc(this.query,e.eu,a,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new KN,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=mt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new sj(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new rj(r))}),n}uu(e){this.Ha=e.qs,this.Za=mt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Jc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Fw="SyncEngine";class x${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class w${constructor(e){this.key=e,this.lu=!1}}class _${constructor(e,n,r,s,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new El(u=>EI(u),xm),this.Tu=new Map,this.Iu=new Set,this.du=new ln(qe.comparator),this.Eu=new Map,this.Au=new Nw,this.Ru={},this.Vu=new Map,this.mu=Xc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function E$(t,e,n=!0){const r=uj(t);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await ij(r,e,n,!0),s}async function b$(t,e){const n=uj(t);await ij(n,e,!0,!1)}async function ij(t,e,n,r){const s=await B5(t.localStore,li(e)),a=s.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await N$(t,e,a,c==="current",s.resumeToken)),t.isPrimaryClient&&n&&XI(t.remoteStore,s),u}async function N$(t,e,n,r,s){t.gu=(y,v,w)=>async function(_,x,j,C){let I=x.view.nu(j);I.Ds&&(I=await $N(_.localStore,x.query,!1).then(({documents:P})=>x.view.nu(P,I)));const M=C&&C.targetChanges.get(x.targetId),U=C&&C.targetMismatches.get(x.targetId)!=null,z=x.view.applyChanges(I,_.isPrimaryClient,M,U);return XN(_,x.targetId,z._u),z.snapshot}(t,y,v,w);const a=await $N(t.localStore,e,!0),c=new v$(e,a.qs),u=c.nu(a.documents),h=rh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=c.applyChanges(u,t.isPrimaryClient,h);XN(t,n,f._u);const g=new x$(e,n,c);return t.Pu.set(e,g),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function S$(t,e,n){const r=at(t),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter(c=>!xm(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await hx(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Iw(r.remoteStore,s.targetId),mx(r,s.targetId)}).catch(du)):(mx(r,s.targetId),await hx(r.localStore,s.targetId,!0))}async function T$(t,e){const n=at(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Iw(n.remoteStore,r.targetId))}async function C$(t,e,n){const r=O$(t);try{const s=await function(c,u){const h=at(c),f=ut.now(),g=u.reduce((w,b)=>w.add(b.key),mt());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",w=>{let b=Yi(),_=mt();return h.Os.getEntries(w,g).next(x=>{b=x,b.forEach((j,C)=>{C.isValidDocument()||(_=_.add(j))})}).next(()=>h.localDocuments.getOverlayedDocuments(w,b)).next(x=>{y=x;const j=[];for(const C of u){const I=q6(C,y.get(C.key).overlayedDocument);I!=null&&j.push(new ga(C.key,I,pI(I.value.mapValue),cr.exists(!0)))}return h.mutationQueue.addMutationBatch(w,f,j,u)}).next(x=>{v=x;const j=x.applyToLocalDocumentSet(y,_);return h.documentOverlayCache.saveOverlays(w,x.batchId,j)})}).then(()=>({batchId:v.batchId,changes:SI(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,h){let f=c.Ru[c.currentUser.toKey()];f||(f=new ln(ht)),f=f.insert(u,h),c.Ru[c.currentUser.toKey()]=f}(r,s.batchId,n),await ih(r,s.changes),await Cm(r.remoteStore)}catch(s){const a=kw(s,"Failed to persist write");n.reject(a)}}async function oj(t,e){const n=at(t);try{const r=await U5(n.localStore,e);e.targetChanges.forEach((s,a)=>{const c=n.Eu.get(a);c&&(Ot(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.lu=!0:s.modifiedDocuments.size>0?Ot(c.lu,14607):s.removedDocuments.size>0&&(Ot(c.lu,42227),c.lu=!1))}),await ih(n,r,e)}catch(r){await du(r)}}function YN(t,e,n){const r=at(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((a,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(c,u){const h=at(c);h.onlineState=u;let f=!1;h.queries.forEach((g,y)=>{for(const v of y.wa)v.va(u)&&(f=!0)}),f&&Lw(h)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function I$(t,e,n){const r=at(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),a=s&&s.key;if(a){let c=new ln(qe.comparator);c=c.insert(a,Xn.newNoDocument(a,ot.min()));const u=mt().add(a),h=new Nm(ot.min(),new Map,new ln(ht),c,u);await oj(r,h),r.du=r.du.remove(a),r.Eu.delete(e),Vw(r)}else await hx(r.localStore,e,!1).then(()=>mx(r,e,n)).catch(du)}async function j$(t,e){const n=at(t),r=e.batch.batchId;try{const s=await V5(n.localStore,e);lj(n,r,null),aj(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ih(n,s)}catch(s){await du(s)}}async function A$(t,e,n){const r=at(t);try{const s=await function(c,u){const h=at(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return h.mutationQueue.lookupMutationBatch(f,u).next(y=>(Ot(y!==null,37113),g=y.keys(),h.mutationQueue.removeMutationBatch(f,y))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>h.localDocuments.getDocuments(f,g))})}(r.localStore,e);lj(r,e,n),aj(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ih(r,s)}catch(s){await du(s)}}function aj(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function lj(t,e,n){const r=at(t);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function mx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||cj(t,r)})}function cj(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Iw(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Vw(t))}function XN(t,e,n){for(const r of n)r instanceof rj?(t.Au.addReference(r.key,e),P$(t,r)):r instanceof sj?(Re(Fw,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||cj(t,r.key)):tt(19791,{yu:r})}function P$(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Re(Fw,"New document in limbo: "+n),t.Iu.add(r),Vw(t))}function Vw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new qe(Ft.fromString(e)),r=t.mu.next();t.Eu.set(r,new w$(n)),t.du=t.du.insert(n,r),XI(t.remoteStore,new Ho(li(vm(n.path)),r,"TargetPurposeLimboResolution",mm.ue))}}async function ih(t,e,n){const r=at(t),s=[],a=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,h)=>{c.push(r.gu(h,e,n).then(f=>{var g;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){s.push(f);const y=Tw.Es(h.targetId,f);a.push(y)}}))}),await Promise.all(c),r.hu.J_(s),await async function(h,f){const g=at(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>de.forEach(f,v=>de.forEach(v.Is,w=>g.persistence.referenceDelegate.addReference(y,v.targetId,w)).next(()=>de.forEach(v.ds,w=>g.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))}catch(y){if(!hu(y))throw y;Re(Cw,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const w=g.Fs.get(v),b=w.snapshotVersion,_=w.withLastLimboFreeSnapshotVersion(b);g.Fs=g.Fs.insert(v,_)}}}(r.localStore,a))}async function R$(t,e){const n=at(t);if(!n.currentUser.isEqual(e)){Re(Fw,"User change. New user:",e.toKey());const r=await KI(n.localStore,e);n.currentUser=e,function(a,c){a.Vu.forEach(u=>{u.forEach(h=>{h.reject(new be(ce.CANCELLED,c))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ih(n,r.Bs)}}function k$(t,e){const n=at(t),r=n.Eu.get(e);if(r&&r.lu)return mt().add(r.key);{let s=mt();const a=n.Tu.get(e);if(!a)return s;for(const c of a){const u=n.Pu.get(c);s=s.unionWith(u.view.tu)}return s}}function uj(t){const e=at(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I$.bind(null,e),e.hu.J_=g$.bind(null,e.eventManager),e.hu.pu=y$.bind(null,e.eventManager),e}function O$(t){const e=at(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A$.bind(null,e),e}class Fp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return F5(this.persistence,new D5,e.initialUser,this.serializer)}Du(e){return new HI(Sw.Vi,this.serializer)}bu(e){return new W5}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fp.provider={build:()=>new Fp};class D$ extends Fp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ot(this.persistence.referenceDelegate instanceof Lp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new w5(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Nr.withCacheSize(this.cacheSizeBytes):Nr.DEFAULT;return new HI(r=>Lp.Vi(r,n),this.serializer)}}class gx{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>YN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=R$.bind(null,this.syncEngine),await f$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new m$}()}createDatastore(e){const n=Sm(e.databaseInfo.databaseId),r=function(a){return new Y5(a)}(e.databaseInfo);return function(a,c,u,h){return new e$(a,c,u,h)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,c,u){return new n$(r,s,a,c,u)}(this.localStore,this.datastore,e.asyncQueue,n=>YN(this.syncEngine,n,0),function(){return qN.C()?new qN:new H5}())}createSyncEngine(e,n){return function(s,a,c,u,h,f,g){const y=new _$(s,a,c,u,h,f);return g&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=at(s);Re(cl,"RemoteStore shutting down."),a.Ia.add(5),await sh(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}gx.provider={build:()=>new gx};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Qi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="FirestoreClient";class L${constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=br.UNAUTHENTICATED,this.clientId=fm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{Re(fa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Re(fa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wy(t,e){t.asyncQueue.verifyOperationInProgress(),Re(fa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await KI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{aa("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Re("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{aa("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function JN(t,e){t.asyncQueue.verifyOperationInProgress();const n=await M$(t);Re(fa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>HN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>HN(e.remoteStore,s)),t._onlineComponents=e}async function M$(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Re(fa,"Using user provided OfflineComponentProvider");try{await Wy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ce.FAILED_PRECONDITION||s.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;aa("Error using user provided cache. Falling back to memory cache: "+n),await Wy(t,new Fp)}}else Re(fa,"Using default OfflineComponentProvider"),await Wy(t,new D$(void 0));return t._offlineComponents}async function dj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Re(fa,"Using user provided OnlineComponentProvider"),await JN(t,t._uninitializedComponentsProvider._online)):(Re(fa,"Using default OnlineComponentProvider"),await JN(t,new gx))),t._onlineComponents}function F$(t){return dj(t).then(e=>e.syncEngine)}async function Vp(t){const e=await dj(t),n=e.eventManager;return n.onListen=E$.bind(null,e.syncEngine),n.onUnlisten=S$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=b$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=T$.bind(null,e.syncEngine),n}function V$(t,e,n={}){const r=new zi;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,f){const g=new Uw({next:v=>{g.Ou(),c.enqueueAndForget(()=>Dw(a,y));const w=v.docs.has(u);!w&&v.fromCache?f.reject(new be(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&h&&h.source==="server"?f.reject(new be(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new Mw(vm(u.path),g,{includeMetadataChanges:!0,ka:!0});return Ow(a,y)}(await Vp(t),t.asyncQueue,e,n,r)),r.promise}function U$(t,e,n={}){const r=new zi;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,f){const g=new Uw({next:v=>{g.Ou(),c.enqueueAndForget(()=>Dw(a,y)),v.fromCache&&h.source==="server"?f.reject(new be(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new Mw(u,g,{includeMetadataChanges:!0,ka:!0});return Ow(a,y)}(await Vp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$="firestore.googleapis.com",e1=!0;class t1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new be(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$$,this.ssl=e1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:e1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WI)throw new be(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hj((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Im{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tI;switch(r.type){case"firstParty":return new ZU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ZN.get(n);r&&(Re("ComponentProvider","Removing Datastore"),ZN.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mi(this.firestore,e,this._query)}}class sn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}toJSON(){return{type:sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(th(n,sn._jsonSchema))return new sn(e,r||null,new qe(Ft.fromString(n.referencePath)))}}sn._jsonSchemaVersion="firestore/documentReference/1.0",sn._jsonSchema={type:_n("string",sn._jsonSchemaVersion),referencePath:_n("string")};class Bi extends mi{constructor(e,n,r){super(e,n,vm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new qe(e))}withConverter(e){return new Bi(this.firestore,e,this._path)}}function ze(t,e,...n){if(t=tn(t),pw("collection","path",e),t instanceof Im){const r=Ft.fromString(e,...n);return pN(r),new Bi(t,null,r)}{if(!(t instanceof sn||t instanceof Bi))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ft.fromString(e,...n));return pN(r),new Bi(t.firestore,null,r)}}function Cr(t,e){if(t=er(t,Im),pw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new be(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mi(t,null,function(r){return new _l(Ft.emptyPath(),r)}(e))}function St(t,e,...n){if(t=tn(t),arguments.length===1&&(e=fm.newId()),pw("doc","path",e),t instanceof Im){const r=Ft.fromString(e,...n);return fN(r),new sn(t,null,new qe(r))}{if(!(t instanceof sn||t instanceof Bi))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ft.fromString(e,...n));return fN(r),new sn(t.firestore,t instanceof Bi?t.converter:null,new qe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="AsyncQueue";class r1{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new QI(this,"async_queue_retry"),this.oc=()=>{const r=qy();r&&Re(n1,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=qy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=qy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new zi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!hu(e))throw e;Re(n1,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Qi("INTERNAL UNHANDLED ERROR: ",s1(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Rw.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(s),s}ac(){this.tc&&tt(47125,{hc:s1(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function s1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Ms extends Im{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new r1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r1(e),this._firestoreClient=void 0,await e}}}function fj(t,e,n){n||(n=Pp);const r=vl(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),a=r.getOptions(n);if(ol(a,e))return s;throw new be(ce.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new be(ce.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WI)throw new be(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&gl(e.host)&&tw(e.host),r.initialize({options:e,instanceIdentifier:n})}function pu(t){if(t._terminated)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||z$(t),t._firestoreClient}function z$(t){var e,n,r;const s=t._freezeSettings(),a=function(u,h,f,g){return new p6(u,h,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,hj(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new L$(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $r(Dn.fromBase64String(e))}catch(n){throw new be(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $r(Dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(th(e,$r._jsonSchema))return $r.fromBase64String(e.bytes)}}$r._jsonSchemaVersion="firestore/bytes/1.0",$r._jsonSchema={type:_n("string",$r._jsonSchemaVersion),bytes:_n("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new On(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function pj(){return new Nl(tx)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:js._jsonSchemaVersion}}static fromJSON(e){if(th(e,js._jsonSchema))return new js(e.latitude,e.longitude)}}js._jsonSchemaVersion="firestore/geoPoint/1.0",js._jsonSchema={type:_n("string",js._jsonSchemaVersion),latitude:_n("number"),longitude:_n("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:As._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(th(e,As._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new As(e.vectorValues);throw new be(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}As._jsonSchemaVersion="firestore/vectorValue/1.0",As._jsonSchema={type:_n("string",As._jsonSchemaVersion),vectorValues:_n("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$=/^__.*__$/;class q${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ga(e,this.data,this.fieldMask,n,this.fieldTransforms):new nh(e,this.data,n,this.fieldTransforms)}}class mj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ga(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ec:t})}}class $w{constructor(e,n,r,s,a,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new $w(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Up(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(gj(this.Ec)&&B$.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class W${constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Sm(e)}Dc(e,n,r,s=!1){return new $w({Ec:e,methodName:n,bc:r,path:On.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ah(t){const e=t._freezeSettings(),n=Sm(t._databaseId);return new W$(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zw(t,e,n,r,s,a={}){const c=t.Dc(a.merge||a.mergeFields?2:0,e,n,s);qw("Data must be an object, but it was:",c,r);const u=xj(r,c);let h,f;if(a.merge)h=new zr(c.fieldMask),f=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const y of a.mergeFields){const v=yx(e,y,n);if(!c.contains(v))throw new be(ce.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);_j(g,v)||g.push(v)}h=new zr(g),f=c.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,f=c.fieldTransforms;return new q$(new Sr(u),h,f)}class jm extends oh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jm}}class Bw extends oh{_toFieldTransform(e){return new U6(e.path,new Ld)}isEqual(e){return e instanceof Bw}}function yj(t,e,n,r){const s=t.Dc(1,e,n);qw("Data must be an object, but it was:",s,r);const a=[],c=Sr.empty();ma(r,(h,f)=>{const g=Ww(e,h,n);f=tn(f);const y=s.gc(g);if(f instanceof jm)a.push(g);else{const v=lh(f,y);v!=null&&(a.push(g),c.set(g,v))}});const u=new zr(a);return new mj(c,u,s.fieldTransforms)}function vj(t,e,n,r,s,a){const c=t.Dc(1,e,n),u=[yx(e,r,n)],h=[s];if(a.length%2!=0)throw new be(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)u.push(yx(e,a[v])),h.push(a[v+1]);const f=[],g=Sr.empty();for(let v=u.length-1;v>=0;--v)if(!_j(f,u[v])){const w=u[v];let b=h[v];b=tn(b);const _=c.gc(w);if(b instanceof jm)f.push(w);else{const x=lh(b,_);x!=null&&(f.push(w),g.set(w,x))}}const y=new zr(f);return new mj(g,y,c.fieldTransforms)}function H$(t,e,n,r=!1){return lh(n,t.Dc(r?4:3,e))}function lh(t,e){if(wj(t=tn(t)))return qw("Unsupported field value:",e,t),xj(t,e);if(t instanceof oh)return function(r,s){if(!gj(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const a=[];let c=0;for(const u of r){let h=lh(u,s.yc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return M6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ut.fromDate(r);return{timestampValue:Dp(s.serializer,a)}}if(r instanceof ut){const a=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dp(s.serializer,a)}}if(r instanceof js)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $r)return{bytesValue:MI(s.serializer,r._byteString)};if(r instanceof sn){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:bw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof As)return function(c,u){return{mapValue:{fields:{[hI]:{stringValue:fI},[Rp]:{arrayValue:{values:c.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return ww(u.serializer,f)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${pm(r)}`)}(t,e)}function xj(t,e){const n={};return oI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ma(t,(r,s)=>{const a=lh(s,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function wj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ut||t instanceof js||t instanceof $r||t instanceof sn||t instanceof oh||t instanceof As)}function qw(t,e,n){if(!wj(n)||!sI(n)){const r=pm(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function yx(t,e,n){if((e=tn(e))instanceof Nl)return e._internalPath;if(typeof e=="string")return Ww(t,e);throw Up("Field path arguments must be of type string or ",t,!1,void 0,n)}const K$=new RegExp("[~\\*/\\[\\]]");function Ww(t,e,n){if(e.search(K$)>=0)throw Up(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Nl(...e.split("."))._internalPath}catch{throw Up(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Up(t,e,n,r,s){const a=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${s}`),h+=")"),new be(ce.INVALID_ARGUMENT,u+t+h)}function _j(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Am("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class G$ extends Ej{data(){return super.data()}}function Am(t,e){return typeof e=="string"?Ww(t,e):e instanceof Nl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new be(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hw{}class Kw extends Hw{}function an(t,e,...n){let r=[];e instanceof Hw&&r.push(e),r=r.concat(n),function(a){const c=a.filter(h=>h instanceof Pm).length,u=a.filter(h=>h instanceof ch).length;if(c>1||c>0&&u>0)throw new be(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ch extends Kw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ch(e,n,r)}_apply(e){const n=this._parse(e);return Nj(e._query,n),new mi(e.firestore,e.converter,ox(e._query,n))}_parse(e){const n=ah(e.firestore);return function(a,c,u,h,f,g,y){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new be(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){a1(y,g);const b=[];for(const _ of y)b.push(o1(h,a,_));v={arrayValue:{values:b}}}else v=o1(h,a,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||a1(y,g),v=H$(u,c,y,g==="in"||g==="not-in");return wn.create(f,g,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Zo(t,e,n){const r=e,s=Am("where",t);return ch._create(s,r,n)}class Pm extends Hw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ls.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let c=s;const u=a.getFlattenedFilters();for(const h of u)Nj(c,h),c=ox(c,h)}(e._query,n),new mi(e.firestore,e.converter,ox(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rm extends Kw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Rm(e,n)}_apply(e){const n=function(s,a,c){if(s.startAt!==null)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dd(a,c)}(e._query,this._field,this._direction);return new mi(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new _l(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ya(t,e="asc"){const n=e,r=Am("orderBy",t);return Rm._create(r,n)}function o1(t,e,n){if(typeof(n=tn(n))=="string"){if(n==="")throw new be(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_I(e)&&n.indexOf("/")!==-1)throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ft.fromString(n));if(!qe.isDocumentKey(r))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return EN(t,new qe(r))}if(n instanceof sn)return EN(t,n._key);throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pm(n)}.`)}function a1(t,e){if(!Array.isArray(t)||t.length===0)throw new be(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Nj(t,e){const n=function(s,a){for(const c of s)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new be(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Sj{convertValue(e,n="none"){switch(da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ua(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw tt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ma(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Rp].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>mn(c.doubleValue));return new As(a)}convertGeoPoint(e){return new js(mn(e.latitude),mn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ym(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(kd(e));default:return null}}convertTimestamp(e){const n=ca(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ft.fromString(e);Ot(BI(r),9688,{name:e});const s=new Gc(r.get(1),r.get(3)),a=new qe(r.popFirst(5));return s.isEqual(n)||Qi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class vc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ea extends Ej{constructor(e,n,r,s,a,c){super(e,n,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Am("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ea._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ea._jsonSchemaVersion="firestore/documentSnapshot/1.0",ea._jsonSchema={type:_n("string",ea._jsonSchemaVersion),bundleSource:_n("string","DocumentSnapshot"),bundleName:_n("string"),bundle:_n("string")};class yd extends ea{data(e={}){return super.data(e)}}class ta{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new vc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yd(this._firestore,this._userDataWriter,r.key,r,new vc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(u=>{const h=new yd(s._firestore,s._userDataWriter,u.doc.key,u.doc,new vc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const h=new yd(s._firestore,s._userDataWriter,u.doc.key,u.doc,new vc(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:Q$(u.type),doc:h,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ta._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Q$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(t){t=er(t,sn);const e=er(t.firestore,Ms);return V$(pu(e),t._key).then(n=>Ij(e,t,n))}ta._jsonSchemaVersion="firestore/querySnapshot/1.0",ta._jsonSchema={type:_n("string",ta._jsonSchemaVersion),bundleSource:_n("string","QuerySnapshot"),bundleName:_n("string"),bundle:_n("string")};class Qw extends Sj{constructor(e){super(),this.firestore=e}convertBytes(e){return new $r(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}function dt(t){t=er(t,mi);const e=er(t.firestore,Ms),n=pu(e),r=new Qw(e);return bj(t._query),U$(n,t._query).then(s=>new ta(e,r,t,s))}function Cj(t,e,n){t=er(t,sn);const r=er(t.firestore,Ms),s=Gw(t.converter,e,n);return mu(r,[zw(ah(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,cr.none())])}function Jt(t,e,n,...r){t=er(t,sn);const s=er(t.firestore,Ms),a=ah(s);let c;return c=typeof(e=tn(e))=="string"||e instanceof Nl?vj(a,"updateDoc",t._key,e,n,r):yj(a,"updateDoc",t._key,e),mu(s,[c.toMutation(t._key,cr.exists(!0))])}function lr(t){return mu(er(t.firestore,Ms),[new bm(t._key,cr.none())])}function pn(t,e){const n=er(t.firestore,Ms),r=St(t),s=Gw(t.converter,e);return mu(n,[zw(ah(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,cr.exists(!1))]).then(()=>r)}function gi(t,...e){var n,r,s;t=tn(t);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||i1(e[c])||(a=e[c++]);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(i1(e[c])){const y=e[c];e[c]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[c+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[c+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let h,f,g;if(t instanceof sn)f=er(t.firestore,Ms),g=vm(t._key.path),h={next:y=>{e[c]&&e[c](Ij(f,t,y))},error:e[c+1],complete:e[c+2]};else{const y=er(t,mi);f=er(y.firestore,Ms),g=y._query;const v=new Qw(f);h={next:w=>{e[c]&&e[c](new ta(f,v,y,w))},error:e[c+1],complete:e[c+2]},bj(t._query)}return function(v,w,b,_){const x=new Uw(_),j=new Mw(w,x,b);return v.asyncQueue.enqueueAndForget(async()=>Ow(await Vp(v),j)),()=>{x.Ou(),v.asyncQueue.enqueueAndForget(async()=>Dw(await Vp(v),j))}}(pu(f),g,u,h)}function mu(t,e){return function(r,s){const a=new zi;return r.asyncQueue.enqueueAndForget(async()=>C$(await F$(r),s,a)),a.promise}(pu(t),e)}function Ij(t,e,n){const r=n.docs.get(e._key),s=new Qw(t);return new ea(t,s,e._key,r,new vc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ah(e)}set(e,n,r){this._verifyNotCommitted();const s=Hy(e,this._firestore),a=Gw(s.converter,n,r),c=zw(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(c.toMutation(s._key,cr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=Hy(e,this._firestore);let c;return c=typeof(n=tn(n))=="string"||n instanceof Nl?vj(this._dataReader,"WriteBatch.update",a._key,n,r,s):yj(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(c.toMutation(a._key,cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Hy(e,this._firestore);return this._mutations=this._mutations.concat(new bm(n._key,cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hy(t,e){if((t=tn(t)).firestore!==e)throw new be(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function $p(){return new Bw("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t){return pu(t=er(t,Ms)),new jj(t,e=>mu(t,e))}(function(e,n=!0){(function(s){uu=s})(xl),Os(new is("firestore",(r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new Ms(new XU(r.getProvider("auth-internal")),new e6(c,r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new be(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gc(f.options.projectId,g)}(c,s),c);return a=Object.assign({useFetchStreams:n},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Ir(cN,uN,e),Ir(cN,uN,"esm2017")})();const Y$=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Sj,Bytes:$r,CollectionReference:Bi,DocumentReference:sn,DocumentSnapshot:ea,FieldPath:Nl,FieldValue:oh,Firestore:Ms,FirestoreError:be,GeoPoint:js,Query:mi,QueryCompositeFilterConstraint:Pm,QueryConstraint:Kw,QueryDocumentSnapshot:yd,QueryFieldFilterConstraint:ch,QueryOrderByConstraint:Rm,QuerySnapshot:ta,SnapshotMetadata:vc,Timestamp:ut,VectorValue:As,WriteBatch:jj,_AutoId:fm,_ByteString:Dn,_DatabaseId:Gc,_DocumentKey:qe,_EmptyAuthCredentialsProvider:tI,_FieldPath:On,_cast:er,_logWarn:aa,_validateIsNotUsedTogether:rI,addDoc:pn,collection:ze,collectionGroup:Cr,deleteDoc:lr,doc:St,documentId:pj,ensureFirestoreConfigured:pu,executeWrite:mu,getDoc:Tj,getDocs:dt,initializeFirestore:fj,onSnapshot:gi,orderBy:ya,query:an,serverTimestamp:$p,setDoc:Cj,updateDoc:Jt,where:Zo,writeBatch:Yw},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj="firebasestorage.googleapis.com",X$="storageBucket",J$=2*60*1e3,Z$=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Fs{constructor(e,n,r=0){super(Ky(e),`Firebase Storage: ${n} (${Ky(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ky(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hi||(hi={}));function Ky(t){return"storage/"+t}function e9(){const t="An unknown error occurred, please check the error payload for server response.";return new yi(hi.UNKNOWN,t)}function t9(){return new yi(hi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function n9(){return new yi(hi.CANCELED,"User canceled the upload/download.")}function r9(t){return new yi(hi.INVALID_URL,"Invalid URL '"+t+"'.")}function s9(t){return new yi(hi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function l1(t){return new yi(hi.INVALID_ARGUMENT,t)}function Pj(){return new yi(hi.APP_DELETED,"The Firebase app was deleted.")}function i9(t){return new yi(hi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Cs.makeFromUrl(e,n)}catch{return new Cs(e,"")}if(r.path==="")return r;throw s9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),h={bucket:1,path:3};function f(M){M.path_=decodeURIComponent(M.path)}const g="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${s}/o${v}`,"i"),b={bucket:1,path:3},_=n===Aj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",j=new RegExp(`^https?://${_}/${s}/${x}`,"i"),I=[{regex:u,indices:h,postModify:a},{regex:w,indices:b,postModify:f},{regex:j,indices:{bucket:1,path:2},postModify:f}];for(let M=0;M<I.length;M++){const U=I[M],z=U.regex.exec(e);if(z){const P=z[U.indices.bucket];let R=z[U.indices.path];R||(R=""),r=new Cs(P,R),U.postModify(r);break}}if(r==null)throw r9(e);return r}}class o9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(t,e,n){let r=1,s=null,a=null,c=!1,u=0;function h(){return u===2}let f=!1;function g(...x){f||(f=!0,e.apply(null,x))}function y(x){s=setTimeout(()=>{s=null,t(w,h())},x)}function v(){a&&clearTimeout(a)}function w(x,...j){if(f){v();return}if(x){v(),g.call(null,x,...j);return}if(h()||c){v(),g.call(null,x,...j);return}r<64&&(r*=2);let I;u===1?(u=2,I=0):I=(r+Math.random())*1e3,y(I)}let b=!1;function _(x){b||(b=!0,v(),!f&&(s!==null?(x||(u=2),clearTimeout(s),y(0)):x||(u=1)))}return y(0),a=setTimeout(()=>{c=!0,_(!0)},n),_}function l9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t){return t!==void 0}function c1(t,e,n,r){if(r<e)throw l1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw l1(`Invalid value for '${t}'. Expected ${n} or less.`)}function u9(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var zp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(zp||(zp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d9(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e,n,r,s,a,c,u,h,f,g,y,v=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,_)=>{this.resolve_=b,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Vf(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const u=a.getErrorCode()===zp.NO_ERROR,h=a.getStatus();if(!u||d9(h,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===zp.ABORT;r(!1,new Vf(!1,null,g));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new Vf(f,a))})},n=(r,s)=>{const a=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());c9(h)?a(h):a()}catch(h){c(h)}else if(u!==null){const h=e9();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(s.canceled){const h=this.appDelete_?Pj():n9();c(h)}else{const h=t9();c(h)}};this.canceled_?n(!1,new Vf(!1,null,!0)):this.backoffId_=a9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&l9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function f9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function p9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function m9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function g9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function y9(t,e,n,r,s,a,c=!0,u=!1){const h=u9(t.urlParams),f=t.url+h,g=Object.assign({},t.headers);return m9(g,e),f9(g,n),p9(g,a),g9(g,r),new h9(f,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function x9(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n){this._service=e,n instanceof Cs?this._location=n:this._location=Cs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Bp(e,n)}get root(){const e=new Cs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return x9(this._location.path)}get storage(){return this._service}get parent(){const e=v9(this._location.path);if(e===null)return null;const n=new Cs(this._location.bucket,e);return new Bp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw i9(e)}}function u1(t,e){const n=e==null?void 0:e[X$];return n==null?null:Cs.makeFromBucketSpec(n,t)}function w9(t,e,n,r={}){t.host=`${e}:${n}`;const s=gl(e);s&&(tw(`https://${t.host}/b`),oC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:cF(a,t.app.options.projectId))}class _9{constructor(e,n,r,s,a,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=Aj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=J$,this._maxUploadRetryTime=Z$,this._requests=new Set,s!=null?this._bucket=Cs.makeFromBucketSpec(s,this._host):this._bucket=u1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Cs.makeFromBucketSpec(this._url,e):this._bucket=u1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){c1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){c1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ts(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bp(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new o9(Pj());{const c=y9(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const d1="@firebase/storage",h1="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj="storage";function E9(t=sw(),e){t=tn(t);const r=vl(t,Rj).getImmediate({identifier:e}),s=aF("storage");return s&&b9(r,...s),r}function b9(t,e,n,r={}){w9(t,e,n,r)}function N9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new _9(n,r,s,e,xl)}function S9(){Os(new is(Rj,N9,"PUBLIC").setMultipleInstances(!0)),Ir(d1,h1,""),Ir(d1,h1,"esm2017")}S9();const kj="@firebase/installations",Xw="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=1e4,Dj=`w:${Xw}`,Lj="FIS_v2",T9="https://firebaseinstallations.googleapis.com/v1",C9=60*60*1e3,I9="installations",j9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ul=new yl(I9,j9,A9);function Mj(t){return t instanceof Fs&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj({projectId:t}){return`${T9}/projects/${t}/installations`}function Vj(t){return{token:t.token,requestStatus:2,expiresIn:R9(t.expiresIn),creationTime:Date.now()}}async function Uj(t,e){const r=(await e.json()).error;return ul.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function $j({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function P9(t,{refreshToken:e}){const n=$j(t);return n.append("Authorization",k9(e)),n}async function zj(t){const e=await t();return e.status>=500&&e.status<600?t():e}function R9(t){return Number(t.replace("s","000"))}function k9(t){return`${Lj} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Fj(t),s=$j(t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const c={fid:n,authVersion:Lj,appId:t.appId,sdkVersion:Dj},u={method:"POST",headers:s,body:JSON.stringify(c)},h=await zj(()=>fetch(r,u));if(h.ok){const f=await h.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:Vj(f.authToken)}}else throw await Uj("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=/^[cdef][\w-]{21}$/,vx="";function M9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=F9(t);return L9.test(n)?n:vx}catch{return vx}}function F9(t){return D9(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=new Map;function Wj(t,e){const n=km(t);Hj(n,e),V9(n,e)}function Hj(t,e){const n=qj.get(t);if(n)for(const r of n)r(e)}function V9(t,e){const n=U9();n&&n.postMessage({key:t,fid:e}),$9()}let qa=null;function U9(){return!qa&&"BroadcastChannel"in self&&(qa=new BroadcastChannel("[Firebase] FID Change"),qa.onmessage=t=>{Hj(t.data.key,t.data.fid)}),qa}function $9(){qj.size===0&&qa&&(qa.close(),qa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9="firebase-installations-database",B9=1,dl="firebase-installations-store";let Gy=null;function Jw(){return Gy||(Gy=lm(z9,B9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(dl)}}})),Gy}async function qp(t,e){const n=km(t),s=(await Jw()).transaction(dl,"readwrite"),a=s.objectStore(dl),c=await a.get(n);return await a.put(e,n),await s.done,(!c||c.fid!==e.fid)&&Wj(t,e.fid),e}async function Kj(t){const e=km(t),r=(await Jw()).transaction(dl,"readwrite");await r.objectStore(dl).delete(e),await r.done}async function Om(t,e){const n=km(t),s=(await Jw()).transaction(dl,"readwrite"),a=s.objectStore(dl),c=await a.get(n),u=e(c);return u===void 0?await a.delete(n):await a.put(u,n),await s.done,u&&(!c||c.fid!==u.fid)&&Wj(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zw(t){let e;const n=await Om(t.appConfig,r=>{const s=q9(r),a=W9(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===vx?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function q9(t){const e=t||{fid:M9(),registrationStatus:0};return Gj(e)}function W9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ul.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=H9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:K9(t)}:{installationEntry:e}}async function H9(t,e){try{const n=await O9(t,e);return qp(t.appConfig,n)}catch(n){throw Mj(n)&&n.customData.serverCode===409?await Kj(t.appConfig):await qp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function K9(t){let e=await f1(t.appConfig);for(;e.registrationStatus===1;)await Bj(100),e=await f1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Zw(t);return r||n}return e}function f1(t){return Om(t,e=>{if(!e)throw ul.create("installation-not-found");return Gj(e)})}function Gj(t){return G9(t)?{fid:t.fid,registrationStatus:0}:t}function G9(t){return t.registrationStatus===1&&t.registrationTime+Oj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q9({appConfig:t,heartbeatServiceProvider:e},n){const r=Y9(t,n),s=P9(t,n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const c={installation:{sdkVersion:Dj,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(c)},h=await zj(()=>fetch(r,u));if(h.ok){const f=await h.json();return Vj(f)}else throw await Uj("Generate Auth Token",h)}function Y9(t,{fid:e}){return`${Fj(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e0(t,e=!1){let n;const r=await Om(t.appConfig,a=>{if(!Qj(a))throw ul.create("not-registered");const c=a.authToken;if(!e&&Z9(c))return a;if(c.requestStatus===1)return n=X9(t,e),a;{if(!navigator.onLine)throw ul.create("app-offline");const u=tz(a);return n=J9(t,u),u}});return n?await n:r.authToken}async function X9(t,e){let n=await p1(t.appConfig);for(;n.authToken.requestStatus===1;)await Bj(100),n=await p1(t.appConfig);const r=n.authToken;return r.requestStatus===0?e0(t,e):r}function p1(t){return Om(t,e=>{if(!Qj(e))throw ul.create("not-registered");const n=e.authToken;return nz(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function J9(t,e){try{const n=await Q9(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await qp(t.appConfig,r),n}catch(n){if(Mj(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Kj(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await qp(t.appConfig,r)}throw n}}function Qj(t){return t!==void 0&&t.registrationStatus===2}function Z9(t){return t.requestStatus===2&&!ez(t)}function ez(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+C9}function tz(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function nz(t){return t.requestStatus===1&&t.requestTime+Oj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rz(t){const e=t,{installationEntry:n,registrationPromise:r}=await Zw(e);return r?r.catch(console.error):e0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sz(t,e=!1){const n=t;return await iz(n),(await e0(n,e)).token}async function iz(t){const{registrationPromise:e}=await Zw(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oz(t){if(!t||!t.options)throw Qy("App Configuration");if(!t.name)throw Qy("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Qy(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Qy(t){return ul.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj="installations",az="installations-internal",lz=t=>{const e=t.getProvider("app").getImmediate(),n=oz(e),r=vl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},cz=t=>{const e=t.getProvider("app").getImmediate(),n=vl(e,Yj).getImmediate();return{getId:()=>rz(n),getToken:s=>sz(n,s)}};function uz(){Os(new is(Yj,lz,"PUBLIC")),Os(new is(az,cz,"PRIVATE"))}uz();Ir(kj,Xw);Ir(kj,Xw,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz="/firebase-messaging-sw.js",hz="/firebase-cloud-messaging-push-scope",Xj="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fz="https://fcmregistrations.googleapis.com/v1",Jj="google.c.a.c_id",pz="google.c.a.c_l",mz="google.c.a.ts",gz="google.c.a.e",m1=1e4;var g1;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(g1||(g1={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Vd;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Vd||(Vd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function yz(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let a=0;a<r.length;++a)s[a]=r.charCodeAt(a);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="fcm_token_details_db",vz=5,y1="fcm_token_object_Store";async function xz(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(Yy))return null;let e=null;return(await lm(Yy,vz,{upgrade:async(r,s,a,c)=>{var u;if(s<2||!r.objectStoreNames.contains(y1))return;const h=c.objectStore(y1),f=await h.index("fcmSenderId").get(t);if(await h.clear(),!!f){if(s===2){const g=f;if(!g.auth||!g.p256dh||!g.endpoint)return;e={token:g.fcmToken,createTime:(u=g.createTime)!==null&&u!==void 0?u:Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:Li(g.vapidKey)}}}else if(s===3){const g=f;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Li(g.auth),p256dh:Li(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Li(g.vapidKey)}}}else if(s===4){const g=f;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Li(g.auth),p256dh:Li(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Li(g.vapidKey)}}}}}})).close(),await My(Yy),await My("fcm_vapid_details_db"),await My("undefined"),wz(e)?e:null}function wz(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _z="firebase-messaging-database",Ez=1,Ud="firebase-messaging-store";let Xy=null;function Zj(){return Xy||(Xy=lm(_z,Ez,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ud)}}})),Xy}async function bz(t){const e=eA(t),r=await(await Zj()).transaction(Ud).objectStore(Ud).get(e);if(r)return r;{const s=await xz(t.appConfig.senderId);if(s)return await t0(t,s),s}}async function t0(t,e){const n=eA(t),s=(await Zj()).transaction(Ud,"readwrite");return await s.objectStore(Ud).put(e,n),await s.done,e}function eA({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ur=new yl("messaging","Messaging",Nz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sz(t,e){const n=await r0(t),r=tA(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(n0(t.appConfig),s)).json()}catch(c){throw ur.create("token-subscribe-failed",{errorInfo:c==null?void 0:c.toString()})}if(a.error){const c=a.error.message;throw ur.create("token-subscribe-failed",{errorInfo:c})}if(!a.token)throw ur.create("token-subscribe-no-token");return a.token}async function Tz(t,e){const n=await r0(t),r=tA(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(`${n0(t.appConfig)}/${e.token}`,s)).json()}catch(c){throw ur.create("token-update-failed",{errorInfo:c==null?void 0:c.toString()})}if(a.error){const c=a.error.message;throw ur.create("token-update-failed",{errorInfo:c})}if(!a.token)throw ur.create("token-update-no-token");return a.token}async function Cz(t,e){const r={method:"DELETE",headers:await r0(t)};try{const a=await(await fetch(`${n0(t.appConfig)}/${e}`,r)).json();if(a.error){const c=a.error.message;throw ur.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw ur.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function n0({projectId:t}){return`${fz}/projects/${t}/registrations`}async function r0({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function tA({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==Xj&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=7*24*60*60*1e3;async function jz(t){const e=await Pz(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Li(e.getKey("auth")),p256dh:Li(e.getKey("p256dh"))},r=await bz(t.firebaseDependencies);if(r){if(Rz(r.subscriptionOptions,n))return Date.now()>=r.createTime+Iz?Az(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await Cz(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return v1(t.firebaseDependencies,n)}else return v1(t.firebaseDependencies,n)}async function Az(t,e){try{const n=await Tz(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await t0(t.firebaseDependencies,r),n}catch(n){throw n}}async function v1(t,e){const r={token:await Sz(t,e),createTime:Date.now(),subscriptionOptions:e};return await t0(t,r),r.token}async function Pz(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:yz(e)})}function Rz(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,a=e.p256dh===t.p256dh;return n&&r&&s&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return kz(e,t),Oz(e,t),Dz(e,t),e}function kz(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const a=e.notification.icon;a&&(t.notification.icon=a)}function Oz(t,e){e.data&&(t.data=e.data)}function Dz(t,e){var n,r,s,a,c;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const u=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(a=e.notification)===null||a===void 0?void 0:a.click_action;u&&(t.fcmOptions.link=u);const h=(c=e.fcmOptions)===null||c===void 0?void 0:c.analytics_label;h&&(t.fcmOptions.analyticsLabel=h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lz(t){return typeof t=="object"&&!!t&&Jj in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mz(t){if(!t||!t.options)throw Jy("App Configuration Object");if(!t.name)throw Jy("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Jy(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Jy(t){return ur.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=Mz(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vz(t){try{t.swRegistration=await navigator.serviceWorker.register(dz,{scope:hz}),t.swRegistration.update().catch(()=>{}),await Uz(t.swRegistration)}catch(e){throw ur.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function Uz(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${m1} ms`)),m1),s=t.installing||t.waiting;t.active?(clearTimeout(r),e()):s?s.onstatechange=a=>{var c;((c=a.target)===null||c===void 0?void 0:c.state)==="activated"&&(s.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $z(t,e){if(!e&&!t.swRegistration&&await Vz(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ur.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zz(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Xj)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nA(t,e){if(!navigator)throw ur.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ur.create("permission-blocked");return await zz(t,e==null?void 0:e.vapidKey),await $z(t,e==null?void 0:e.serviceWorkerRegistration),jz(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bz(t,e,n){const r=qz(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Jj],message_name:n[pz],message_time:n[mz],message_device_time:Math.floor(Date.now()/1e3)})}function qz(t){switch(t){case Vd.NOTIFICATION_CLICKED:return"notification_open";case Vd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wz(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Vd.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(x1(n)):t.onMessageHandler.next(x1(n)));const r=n.data;Lz(r)&&r[gz]==="1"&&await Bz(t,n.messageType,r)}const w1="@firebase/messaging",_1="0.12.22";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz=t=>{const e=new Fz(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>Wz(e,n)),e},Kz=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>nA(e,r)}};function Gz(){Os(new is("messaging",Hz,"PUBLIC")),Os(new is("messaging-internal",Kz,"PRIVATE")),Ir(w1,_1),Ir(w1,_1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qz(){try{await lC()}catch{return!1}return typeof window<"u"&&aC()&&xF()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yz(t=sw()){return Qz().then(e=>{if(!e)throw ur.create("unsupported-browser")},e=>{throw ur.create("indexed-db-unsupported")}),vl(tn(t),"messaging").getImmediate()}async function Xz(t,e){return t=tn(t),nA(t,e)}Gz();const Jz={apiKey:"AIzaSyDUR89i6kvh3bp51GCgBX0fTwh3bFt1Ksg",authDomain:"medjust-d26eb.firebaseapp.com",projectId:"medjust-d26eb",storageBucket:"medjust-d26eb.appspot.com",messagingSenderId:"631362355665",appId:"1:631362355665:web:4d7f8eadba1bca0969e0f0"},Dm=dC(Jz),op=HU(Dm),Ne=fj(Dm,{experimentalForceLongPolling:!0,useFetchStreams:!1});E9(Dm);let xx=null;if(typeof window<"u"&&"serviceWorker"in navigator)try{xx=Yz(Dm)}catch(t){console.warn("Firebase Messaging initialization failed:",t)}const rA=E.createContext(void 0);function Zz({children:t}){const[e,n]=E.useState(null),[r,s]=E.useState(!0),[a,c]=E.useState(null),u=y=>new Promise(v=>setTimeout(v,y)),h=async(y,v)=>{if(typeof navigator<"u"&&!navigator.onLine){const x=new Error("No network connection (navigator offline)");throw console.error("Login pre-check failed:",x),c("No network connection - please connect to the internet"),x}const w=3;let b=0,_=null;for(;b<w;){b+=1;try{await P3(op,y,v),c(null);return}catch(x){if(_=x,console.error(`Login attempt ${b} failed:`,x),!((x==null?void 0:x.code)==="auth/network-request-failed"||(x==null?void 0:x.message)&&x.message.toLowerCase().includes("fetch")))throw(x==null?void 0:x.code)==="auth/wrong-password"||(x==null?void 0:x.code)==="auth/user-not-found"?c("Invalid email or password"):c("Authentication error - see console for details"),x;if(c(`Network error (attempt ${b} of ${w}) - checking connection...`),b<w){const C=500*Math.pow(2,b-1);console.log(`Retrying login in ${C}ms...`),await u(C);continue}}}throw console.error("Login failed after retries:",_),c("Network error - unable to reach Firebase. Check your internet connection, disabling browser extensions (adblockers), or ensure your site domain is added to Firebase Authentication -> Authorized domains."),_},f=async()=>{try{await D3(op),c(null)}catch(y){console.error("Logout error:",y),n(null)}};E.useEffect(()=>{const y=setTimeout(()=>{r&&(console.log(" Auth taking too long - continuing without authentication"),s(!1))},5e3),v=O3(op,w=>{clearTimeout(y),n(w),s(!1),c(null)},w=>{clearTimeout(y),console.error("Auth state change error:",w),c("Authentication error - working offline"),s(!1)});return()=>{clearTimeout(y),v()}},[]);const g={currentUser:e,login:h,logout:f,loading:r,authError:a};return o.jsx(rA.Provider,{value:g,children:r?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 rounded-lg border bg-card px-8 py-6 shadow-sm",children:[o.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-2 border-primary border-t-transparent",role:"status","aria-label":"Loading"}),o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Loading"})]})}):t})}function Lm(){const t=E.useContext(rA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const sA=Kd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=E.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const c=r?nl:"button";return o.jsx(c,{className:Qe(sA({variant:e,size:n,className:t})),ref:a,...s})});te.displayName="Button";const pe=E.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Qe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));pe.displayName="Card";const We=E.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Qe("flex flex-col space-y-1.5 p-6",t),...e}));We.displayName="CardHeader";const Ge=E.forwardRef(({className:t,...e},n)=>o.jsx("h3",{ref:n,className:Qe("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ge.displayName="CardTitle";const Tt=E.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Qe("text-sm text-muted-foreground",t),...e}));Tt.displayName="CardDescription";const me=E.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Qe("p-6 pt-0",t),...e}));me.displayName="CardContent";const eB=E.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Qe("flex items-center p-6 pt-0",t),...e}));eB.displayName="CardFooter";class tB extends _e.Component{constructor(n){super(n);LE(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.replace(window.location.href)});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),(n.message.includes("fetch")||n.message.includes("Firebase")||n.message.includes("Firestore"))&&console.log(" Firebase error detected - this is a known connectivity issue"),this.setState({error:n,errorInfo:r})}render(){var n,r,s;if(this.state.hasError){const a=((n=this.state.error)==null?void 0:n.message.includes("fetch"))||((r=this.state.error)==null?void 0:r.message.includes("Firebase"))||((s=this.state.error)==null?void 0:s.message.includes("Firestore"));return o.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:o.jsxs(pe,{className:"max-w-md w-full",children:[o.jsx(We,{children:o.jsxs(Ge,{className:"flex items-center gap-2 text-destructive",children:[o.jsx(dO,{className:"h-5 w-5"}),a?"Connection Error":"Application Error"]})}),o.jsxs(me,{className:"space-y-4",children:[o.jsx("p",{className:"text-muted-foreground",children:a?"There's a connectivity issue with Firebase services. The app will work in offline mode.":"Something went wrong. Please try refreshing the page."}),!1,o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(te,{onClick:this.handleRetry,className:"flex-1",children:[o.jsx(lO,{className:"h-4 w-4 mr-2"}),"Retry"]}),o.jsx(te,{variant:"outline",onClick:()=>window.location.href="/admin/years",className:"flex-1",children:"Go to Years"})]})]})]})})}return this.props.children}}var s0="Avatar",[nB,rW]=Xi(s0),[rB,iA]=nB(s0),oA=E.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,a]=E.useState("idle");return o.jsx(rB,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:o.jsx(Je.span,{...r,ref:e})})});oA.displayName=s0;var aA="AvatarImage",lA=E.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=t,c=iA(aA,n),u=sB(r),h=In(f=>{s(f),c.onImageLoadingStatusChange(f)});return en(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?o.jsx(Je.img,{...a,ref:e,src:r}):null});lA.displayName=aA;var cA="AvatarFallback",uA=E.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,a=iA(cA,n),[c,u]=E.useState(r===void 0);return E.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&a.imageLoadingStatus!=="loaded"?o.jsx(Je.span,{...s,ref:e}):null});uA.displayName=cA;function sB(t){const[e,n]=E.useState("idle");return en(()=>{if(!t){n("error");return}let r=!0;const s=new window.Image,a=c=>()=>{r&&n(c)};return n("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=t,()=>{r=!1}},[t]),e}var dA=oA,hA=lA,fA=uA;const Zc=E.forwardRef(({className:t,...e},n)=>o.jsx(dA,{ref:n,className:Qe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Zc.displayName=dA.displayName;const $d=E.forwardRef(({className:t,...e},n)=>o.jsx(hA,{ref:n,className:Qe("aspect-square h-full w-full",t),...e}));$d.displayName=hA.displayName;const eu=E.forwardRef(({className:t,...e},n)=>o.jsx(fA,{ref:n,className:Qe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));eu.displayName=fA.displayName;const iB=[{icon:rO,label:"Dashboard",path:"/admin"},{icon:fp,label:"News",path:"/admin/news"},{icon:el,label:"Notifications",path:"/admin/notifications"},{icon:Ss,label:"Years",path:"/admin/years"},{icon:$c,label:"Users",path:"/admin/users"},{icon:$c,label:"Professors",path:"/admin/professors"},{icon:Lx,label:"Store",path:"/admin/store"},{icon:Is,label:"Orders",path:"/admin/orders"},{icon:qi,label:"Research",path:"/admin/research"},{icon:Ed,label:"Maps",path:"/admin/maps"},{icon:MS,label:"Settings",path:"/admin/settings"}];function oB({isOpen:t}){return o.jsx("div",{className:Qe("fixed left-0 top-16 h-[calc(100vh-4rem)] bg-card border-r transition-all duration-300 z-40",t?"w-64":"w-16"),children:o.jsx("nav",{className:"p-4 space-y-2",children:iB.map(e=>o.jsxs("div",{children:[o.jsxs(jb,{to:e.path,className:({isActive:n})=>Qe("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors","hover:bg-accent hover:text-accent-foreground",n&&"bg-primary text-primary-foreground hover:bg-primary/90",!t&&"justify-center"),children:[o.jsx(e.icon,{className:"h-5 w-5 flex-shrink-0"}),t&&o.jsx("span",{className:"font-medium",children:e.label})]}),e.children&&t&&o.jsx("div",{className:"ml-6 mt-2 space-y-1",children:e.children.map(n=>o.jsxs(jb,{to:n.path,className:({isActive:r})=>Qe("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm","hover:bg-accent hover:text-accent-foreground",r&&"bg-primary text-primary-foreground hover:bg-primary/90"),children:[o.jsx(n.icon,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{children:n.label})]},n.path))})]},e.path))})})}function aB(){var a;const[t,e]=E.useState(!0),{currentUser:n,logout:r}=Lm(),s=async()=>{try{await r()}catch(c){console.error("Error logging out:",c)}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-card shadow-sm",children:o.jsxs("div",{className:"flex h-16 items-center px-4",children:[o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>e(!t),className:"mr-4",children:o.jsx(oO,{className:"h-5 w-5"})}),o.jsx("div",{className:"flex-1",children:o.jsx("h1",{className:"text-xl font-semibold text-primary",children:"MedJust Admin Dashboard"})}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Zc,{className:"h-8 w-8",children:o.jsx(eu,{children:o.jsx(rs,{className:"h-4 w-4"})})}),o.jsx("span",{className:"text-sm font-medium",children:((a=n==null?void 0:n.email)==null?void 0:a.split("@")[0])||"Admin"})]}),o.jsx(te,{variant:"ghost",size:"icon",onClick:s,className:"text-muted-foreground hover:text-destructive",children:o.jsx(iO,{className:"h-4 w-4"})})]})]})}),o.jsxs("div",{className:"flex",children:[o.jsx(oB,{isOpen:t}),o.jsx("main",{className:`flex-1 transition-all duration-300 ${t?"ml-64":"ml-16"}`,children:o.jsx("div",{className:"p-6",children:o.jsx(L4,{})})})]})]})}const Se=E.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:Qe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Se.displayName="Input";var lB="Label",pA=E.forwardRef((t,e)=>o.jsx(Je.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));pA.displayName=lB;var mA=pA;const cB=Kd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ae=E.forwardRef(({className:t,...e},n)=>o.jsx(mA,{ref:n,className:Qe(cB(),t),...e}));Ae.displayName=mA.displayName;const uB=Kd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),gA=E.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:Qe(uB({variant:e}),t),...n}));gA.displayName="Alert";const dB=E.forwardRef(({className:t,...e},n)=>o.jsx("h5",{ref:n,className:Qe("mb-1 font-medium leading-none tracking-tight",t),...e}));dB.displayName="AlertTitle";const yA=E.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Qe("text-sm [&_p]:leading-relaxed",t),...e}));yA.displayName="AlertDescription";function hB(){const[t,e]=E.useState(""),[n,r]=E.useState(""),[s,a]=E.useState(""),[c,u]=E.useState(!1),{login:h,authError:f}=Lm(),g=ou(),y=async v=>{if(v.preventDefault(),!t||!n){a("Please fill in all fields");return}try{if(typeof navigator<"u"&&!navigator.onLine){a("No network connection. Please connect to the internet and try again.");return}a(""),u(!0),await h(t,n),g("/admin")}catch(w){console.error("Login error:",w),f?a(f):(w==null?void 0:w.code)==="auth/network-request-failed"?a("Network error - check your connection and try again."):(w==null?void 0:w.code)==="auth/wrong-password"||(w==null?void 0:w.code)==="auth/user-not-found"?a("Invalid email or password."):a("Failed to log in. Please check your credentials.")}finally{u(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/20 flex items-center justify-center p-4",children:o.jsxs(pe,{className:"w-full max-w-md shadow-xl",children:[o.jsxs(We,{className:"space-y-1 text-center",children:[o.jsx("div",{className:"mx-auto w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-4",children:o.jsx(ZE,{className:"h-6 w-6 text-primary-foreground"})}),o.jsx(Ge,{className:"text-2xl font-bold",children:"MedJust Admin"}),o.jsx(Tt,{children:"Sign in to access the admin dashboard"})]}),o.jsx(me,{children:o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s&&o.jsx(gA,{variant:"destructive",children:o.jsx(yA,{children:s})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"email",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(hp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Se,{id:"email",type:"email",placeholder:"MedAdmin@gmail.com",value:t,onChange:v=>e(v.target.value),className:"pl-10",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"password",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(ZE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Se,{id:"password",type:"password",placeholder:"",value:n,onChange:v=>r(v.target.value),className:"pl-10",required:!0})]})]}),o.jsx(te,{type:"submit",className:"w-full",disabled:c,children:c?o.jsxs(o.Fragment,{children:[o.jsx(Ji,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}const fB=Kd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Pt({className:t,variant:e,...n}){return o.jsx("div",{className:Qe(fB({variant:e}),t),...n})}const pB="YOUR_VAPID_KEY_HERE";async function vA(){if(!xx)return console.warn("Firebase Messaging is not available"),null;try{if(await Notification.requestPermission()==="granted"){console.log("Notification permission granted");const e=await Xz(xx,{vapidKey:pB});if(e){console.log("FCM Token:",e);const n=op.currentUser;return n&&await mB(n.uid,e),e}else return console.warn("No FCM token available"),null}else return console.warn("Notification permission denied"),null}catch(t){return console.error("Error requesting notification permission:",t),null}}async function mB(t,e){try{const n=St(Ne,"fcmTokens",t);await Cj(n,{token:e,userId:t,createdAt:new Date,updatedAt:new Date},{merge:!0}),console.log(" FCM token saved for user:",t)}catch(n){console.error("Error saving FCM token:",n)}}async function xA(t){const e=new Map;try{for(let r=0;r<t.length;r+=10){const s=t.slice(r,r+10),a=ze(Ne,"fcmTokens"),c=an(a,Zo("userId","in",s));(await dt(c)).forEach(h=>{const f=h.data();f.token&&f.userId&&e.set(f.userId,f.token)})}}catch(n){console.error("Error getting FCM tokens:",n)}return e}async function i0(t,e,n,r){try{if("Notification"in window)if(Notification.permission==="granted"){const s=new Notification(e,{body:n,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:(r==null?void 0:r.newsId)||"notification",data:r||{},requireInteraction:!1});s.onclick=()=>{window.focus(),r!=null&&r.newsId&&(window.location.href="/admin/news"),s.close()},setTimeout(()=>{s.close()},5e3)}else Notification.permission==="default"&&await Notification.requestPermission()==="granted"&&await i0(t,e,n,r)}catch(s){console.error("Error sending push notification:",s)}}async function gB(){if(!("Notification"in window)){console.warn("This browser does not support notifications");return}if(!("serviceWorker"in navigator)){console.warn("This browser does not support service workers");return}try{const t=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registered:",t)}catch(t){console.error("Service Worker registration failed:",t)}await vA()}async function yB(){return(await dt(ze(Ne,"batches"))).docs.map(e=>{const n=e.data();return{id:e.id,batchName:n.batch_name||n.batchName||"",imageUrl:n.image_url||n.imageUrl||"",aca_supervisor:n.aca_supervisor||n.acadmic_supervisor||n.academic_supervisor||"",cr:n.cr||"",actor:n.actor||"",group_link:n.group_link||n.groupUrl||n.group_url||"",ref:e.ref}})}async function vB(t){const e=t.map(async r=>{try{return(await dt(ze(r.ref,"years"))).docs.map(a=>{const c=a.data();let u=c.order||1;if(c.name){const h=String(c.name).match(/\d+/);h&&(u=parseInt(h[0]))}return{id:a.id,yearNumber:u,name:c.name||c.title||"",type:u<=3?"basic":"clinical",batchName:r.batchName,imageUrl:c.imageUrl||c.image_url||"",academicSupervisor:c.aca_supervisor||c.acadmic_supervisor||c.academic_supervisor||"",actor:c.actor||"",cr:c.cr||"",groupUrl:c.group_link||c.group_url||c.groupUrl||"",subjects:[],batchId:r.id}})}catch(s){return console.warn("Failed to fetch years for batch",r.id,s),[]}});return(await Promise.all(e)).flat()}async function xB(){return(await dt(ze(Ne,"Subjects"))).docs}async function wB(t){const n=(await dt(ze(t.ref,"lectures"))).docs.map(async s=>{var v;const a=s.data(),[c,u,h]=await Promise.all([dt(ze(s.ref,"videos")),dt(ze(s.ref,"files")),dt(ze(s.ref,"quizzes"))]),f=[];c.forEach(w=>{var _;const b=w.data();f.push({id:w.id,title:b.title||b.name||"",url:b.url||b.youtubeUrl||"",thumbnailUrl:b.thumbnailUrl||"",description:b.description||"",uploadedAt:((_=b.uploadedAt)==null?void 0:_.toDate())||new Date,youtubeUrl:b.youtubeUrl||b.url||""})});const g=[];u.forEach(w=>{var _;const b=w.data();g.push({id:w.id,title:b.title||b.name||"",url:b.fileUrl||b.url||"",description:b.description||"",uploadedAt:((_=b.uploadedAt)==null?void 0:_.toDate())||new Date,fileUrl:b.fileUrl||b.url||""})});const y=[];return h.forEach(w=>{const b=w.data();y.push({id:w.id,title:b.title||b.name||"",description:b.description||"",duration:b.duration||30,passRate:b.passRate||70,questions:b.questions||[]})}),{id:s.id,name:a.name||a.title||"",description:a.description||"",subjectId:t.id,order:a.order||1,imageUrl:a.imageUrl||"",createdAt:((v=a.createdAt)==null?void 0:v.toDate())||new Date,uploadedBy:a.uploadedBy||"Unknown",videos:f,files:g,quizzes:y}});return(await Promise.all(n)).sort((s,a)=>s.order-a.order)}async function _B(){const t=await xB(),e=10,n=[];for(let r=0;r<t.length;r+=e){const a=t.slice(r,r+e).map(async u=>{const h=u.data(),f=await wB(u);return{id:u.id,name:h.name||"",subjectId:h.subjectId||u.id,yearId:h.yearId||"",imageUrl:h.imageUrl||"",lectures:f}}),c=await Promise.all(a);n.push(...c)}return n}async function EB(){if(!navigator.onLine)throw new Error("No internet connection");const t=await yB(),[e,n]=await Promise.all([vB(t),_B()]),r=e.map(a=>({...a,subjects:n.filter(c=>c.yearId===a.id).sort((c,u)=>c.name.localeCompare(u.name))})),s=t.map(a=>({id:a.id,batchName:a.batchName,imageUrl:a.imageUrl||"",aca_supervisor:a.aca_supervisor||"",cr:a.cr||"",actor:a.actor||"",group_link:a.group_link||""}));return{years:r.sort((a,c)=>a.yearNumber-c.yearNumber),batches:s,subjects:r.flatMap(a=>a.subjects)}}function va(){const t=Jx(),[e,n]=E.useState(!1),{data:r,isLoading:s,error:a,refetch:c}=HM({queryKey:["years-data"],queryFn:EB,staleTime:5*60*1e3,gcTime:30*60*1e3,retry:1,retryDelay:1e3,enabled:navigator.onLine&&!e}),u=s,h=a?a.message:null,[f,g]=E.useState([]),[y,v]=E.useState([]),[w,b]=E.useState([]);E.useEffect(()=>{g((r==null?void 0:r.years)||[]),v((r==null?void 0:r.batches)||[]),b((r==null?void 0:r.subjects)||[])},[r==null?void 0:r.years,r==null?void 0:r.batches,r==null?void 0:r.subjects]),E.useEffect(()=>{navigator.onLine||n(!0)},[]),E.useEffect(()=>{const H=()=>{n(!1),t.invalidateQueries({queryKey:["years-data"]})},Q=()=>{n(!0)};return window.addEventListener("online",H),window.addEventListener("offline",Q),()=>{window.removeEventListener("online",H),window.removeEventListener("offline",Q)}},[t]);const _=()=>{console.log(" Retrying Firebase connection..."),n(!1),t.invalidateQueries({queryKey:["years-data"]})},x=async(H,Q)=>{if(H){if(e||!navigator.onLine){g(K=>K.map(Z=>Z.id===H?{...Z,...Q}:Z));return}try{const K=Cr(Ne,"years"),W=(await dt(K)).docs.find(Y=>Y.id===H);if(W){await Jt(W.ref,{...Q,updatedAt:new Date}),t.invalidateQueries({queryKey:["years-data"]});return}g(Y=>Y.map(ne=>ne.id===H?{...ne,...Q}:ne))}catch(K){console.error("Error updating year:",K),g(Z=>Z.map(W=>W.id===H?{...W,...Q}:W))}}},j=async(H,Q)=>{if(H){if(e||!navigator.onLine){v(K=>K.map(Z=>Z.id===H?{...Z,...Q}:Z));return}try{const K=St(Ne,"batches",H);await Jt(K,{...Q,updatedAt:new Date}),t.invalidateQueries({queryKey:["years-data"]})}catch(K){console.error("Failed to update batch:",K),v(Z=>Z.map(W=>W.id===H?{...W,...Q}:W))}}},C=async(H,Q=3)=>{for(let K=0;K<Q;K++)try{return await H()}catch(Z){if(console.log(`Attempt ${K+1} failed:`,Z.message),K===Q-1)throw Z;await new Promise(W=>setTimeout(W,1e3*(K+1)))}},I=async H=>{if(e||!navigator.onLine){const Q={id:`subject_${Date.now()}`,name:H.name,subjectId:`subject_${Date.now()}`,yearId:H.yearId,imageUrl:H.imageUrl||"",lectures:[]};b(K=>[...K,Q]),g(K=>K.map(Z=>Z.id===H.yearId?{...Z,subjects:[...Z.subjects,Q]}:Z)),console.log(" Added subject to offline mode:",Q.name);return}try{console.log(" Creating subject with data:",H),await C(async()=>{const Q={name:H.name,imageUrl:H.imageUrl||"",hours:H.hours||3,yearId:H.yearId,createdAt:ut.fromDate(new Date),updatedAt:ut.fromDate(new Date)};Object.keys(Q).forEach(ne=>{Q[ne]===void 0&&delete Q[ne]});const K=await pn(ze(Ne,"Subjects"),Q);await Jt(K,{subjectId:K.id}),console.log(" Created new subject document:",K.id);const Z=K,W=ze(Z,"lectures");if((await dt(W)).empty){const B=await pn(W,{name:"Sample Lecture",title:"Sample Lecture",description:"",imageUrl:"",order:1,uploadedBy:"System",createdAt:new Date,lectureId:""});await Jt(B,{lectureId:B.id});const ee=["videos","files","quizzes"];for(const ue of ee){const Te=ze(B,ue);let Le={};ue==="videos"?Le={title:"Sample Video",description:"",thumbnailUrl:"",url:"",uploadedAt:new Date,videoId:""}:ue==="files"?Le={title:"Sample File",description:"",url:"",uploadedAt:new Date,fileId:""}:ue==="quizzes"&&(Le={title:"Sample Quiz",description:"",duration:30,passRate:70,questions:[],quizId:""});const Ce=await pn(Te,Le),we=`${ue.slice(0,-1)}Id`;await Jt(Ce,{[we]:Ce.id})}console.log(" Created complete lecture structure for subject:",Z.id)}t.invalidateQueries({queryKey:["years-data"]})})}catch(Q){console.error("Error creating subject:",Q),n(!0),await I(H)}},M=async H=>{if(e){const Q={id:`lecture_${Date.now()}`,...H};b(K=>K.map(Z=>Z.id===H.subjectId?{...Z,lectures:[...Z.lectures,Q]}:Z)),g(K=>K.map(Z=>({...Z,subjects:Z.subjects.map(W=>W.id===H.subjectId?{...W,lectures:[...W.lectures,Q]}:W)}))),console.log(" Added lecture to offline mode:",Q.name);return}try{await C(async()=>{const Q=St(Ne,"Subjects",H.subjectId),K=ze(Q,"lectures"),Z={title:H.name,description:H.description||"",imageUrl:H.imageUrl||"",order:H.order||1,uploadedBy:H.uploadedBy||"Current User",createdAt:new Date,lectureId:""};console.log(" Creating lecture in subcollection:",Z);const W=await pn(K,Z);await Jt(W,{lectureId:W.id}),console.log(" Created lecture document with ID:",W.id),console.log(" Path: /Subjects/"+H.subjectId+"/lectures/"+W.id),t.invalidateQueries({queryKey:["years-data"]})})}catch(Q){console.error("Error creating lecture:",Q),n(!0),await M(H)}},U=async(H,Q)=>{if(e){g(K=>K.map(Z=>({...Z,subjects:Z.subjects.map(W=>({...W,lectures:W.lectures.map(Y=>Y.id===H?{...Y,...Q}:Y)}))}))),console.log(" Updated lecture in offline mode");return}try{console.log(" Updating lecture:",H,Q),await C(async()=>{const K=an(Cr(Ne,"lectures")),Z=await dt(K);let W=null;for(const ne of Z.docs)if(ne.id===H){W=ne.ref;break}if(!W)throw new Error(`Lecture ${H} not found`);const Y={...Q};Y.name&&(Y.title=Y.name,delete Y.name),Object.keys(Y).forEach(ne=>{Y[ne]===void 0&&delete Y[ne]}),Y.createdAt instanceof Date&&(Y.createdAt=ut.fromDate(Y.createdAt)),Y.updatedAt instanceof Date&&(Y.updatedAt=ut.fromDate(Y.updatedAt)),Y.updatedAt||(Y.updatedAt=ut.fromDate(new Date)),await Jt(W,Y),console.log(" Updated lecture successfully:",H),t.invalidateQueries({queryKey:["years-data"]})})}catch(K){throw console.error(" Error updating lecture:",K),console.error("Error details:",K.code,K.message),new Error(`Failed to update lecture: ${K.message||"Check Firebase permissions"}`)}},z=async(H,Q)=>{if(e){b(K=>K.map(Z=>Z.id===H?{...Z,lectures:Z.lectures.filter(W=>W.id!==Q)}:Z)),g(K=>K.map(Z=>({...Z,subjects:Z.subjects.map(W=>W.id===H?{...W,lectures:W.lectures.filter(Y=>Y.id!==Q)}:W)}))),console.log(" Deleted lecture from offline mode");return}try{const K=St(Ne,"Subjects",H),Z=St(K,"lectures",Q);await lr(Z),console.log(" Deleted lecture from Firebase"),t.invalidateQueries({queryKey:["years-data"]})}catch(K){console.error("Error deleting lecture:",K)}},P=async H=>{if(H){if(e){b(Q=>Q.filter(K=>K.id!==H)),g(Q=>Q.map(K=>({...K,subjects:K.subjects.filter(Z=>Z.id!==H)}))),console.log(" Deleted subject in offline mode");return}try{const Q=St(Ne,"Subjects",H);await lr(Q),console.log(" Deleted subject from Firebase"),t.invalidateQueries({queryKey:["years-data"]})}catch(Q){console.error("Error deleting subject:",Q)}}},R=async(H,Q,K)=>{if(!(!H||!Q)){if(e){g(Z=>Z.map(W=>({...W,subjects:W.subjects.map(Y=>Y.id===H?{...Y,lectures:Y.lectures.map(ne=>ne.id===Q?{...ne,videos:[...ne.videos||[],{id:`video_${Date.now()}`,title:K.title,url:K.url,thumbnailUrl:K.thumbnailUrl||"",description:K.description||"",uploadedAt:new Date}]}:ne)}:Y)})));return}try{const Z=St(Ne,"Subjects",H,"lectures",Q);await pn(ze(Z,"videos"),{title:K.title,description:K.description||"",url:K.url,duration:K.duration||"",thumbnailUrl:K.thumbnailUrl||"",platform:K.platform||"",uploadedAt:new Date,uploadedBy:"Current User"}),t.invalidateQueries({queryKey:["years-data"]})}catch(Z){console.error("Error adding video:",Z)}}},D=async(H,Q,K)=>{if(!(!H||!Q)){if(e){g(Z=>Z.map(W=>({...W,subjects:W.subjects.map(Y=>Y.id===H?{...Y,lectures:Y.lectures.map(ne=>ne.id===Q?{...ne,files:[...ne.files||[],{id:`file_${Date.now()}`,title:K.title,fileUrl:K.fileUrl,url:K.fileUrl,description:K.description||"",uploadedAt:new Date}]}:ne)}:Y)})));return}try{const Z=St(Ne,"Subjects",H,"lectures",Q),W={title:K.title,description:K.description||"",fileUrl:K.fileUrl,url:K.fileUrl,uploadedAt:ut.fromDate(new Date),uploadedBy:"Current User"};Object.keys(W).forEach(Y=>{W[Y]===void 0&&delete W[Y]}),await pn(ze(Z,"files"),W),console.log(" File added successfully:",K.title),t.invalidateQueries({queryKey:["years-data"]})}catch(Z){throw console.error(" Error adding file:",Z),console.error("Error details:",Z.code,Z.message),new Error(`Failed to add file: ${Z.message||"Check Firebase permissions"}`)}}},O=async(H,Q,K)=>{if(!(!H||!Q)){if(e){g(Z=>Z.map(W=>({...W,subjects:W.subjects.map(Y=>Y.id===H?{...Y,lectures:Y.lectures.map(ne=>ne.id===Q?{...ne,quizzes:[...ne.quizzes||[],{id:`quiz_${Date.now()}`,title:K.title,description:K.description||"",duration:K.timeLimit||30,passRate:K.passingScore||70,questions:K.questions||[]}]}:ne)}:Y)})));return}try{const Z=St(Ne,"Subjects",H,"lectures",Q);await pn(ze(Z,"quizzes"),{title:K.title,description:K.description||"",duration:K.timeLimit||30,passRate:K.passingScore||70,questions:K.questions||[],createdAt:new Date,uploadedBy:"Current User"}),t.invalidateQueries({queryKey:["years-data"]})}catch(Z){console.error("Error adding quiz:",Z)}}},k=async(H,Q={})=>{const K=Q.yearNumber||1,Z=Q.name||`Year ${K}`,W=Q.type||(K<=3?"basic":"clinical");if(e||!navigator.onLine){const Y={id:`year_${Date.now()}`,yearNumber:K,name:Z,type:W,batchName:"",batchId:H||void 0,imageUrl:"",academicSupervisor:"",actor:"",cr:"",groupUrl:"",subjects:[]};g(ne=>[...ne,Y]),H&&v(ne=>ne.map(B=>B.id===H?{...B}:B)),console.log(" Added year in offline mode:",Y);return}try{await C(async()=>{if(H){const Y=St(Ne,"batches",H),ne=ze(Y,"years"),B=await pn(ne,{name:Z,order:K,imageUrl:"",batch_name:Z,createdAt:new Date});try{await Jt(B,{yearId:B.id})}catch{}}else{const Y=ze(Ne,"years"),ne=await pn(Y,{name:Z,order:K,imageUrl:"",batch_name:Z,createdAt:new Date});try{await Jt(ne,{yearId:ne.id})}catch{}}t.invalidateQueries({queryKey:["years-data"]})})}catch(Y){console.error("Error creating year:",Y),n(!0),await k(H,Q)}};return{years:f,batches:y,subjects:w,loading:u,error:h,isOfflineMode:e,retryConnection:_,updateYear:x,updateBatch:j,createSubject:I,createLecture:M,updateLecture:U,createYear:k,createBatch:async(H={})=>{const Q=H.batchName||"New Batch",K=H.imageUrl||"",Z=H.cr||"",W=`batch_temp_${Date.now()}`,Y={id:W,batchName:Q,imageUrl:K,cr:Z};if(v(ne=>[Y,...ne]),e||!navigator.onLine){console.log(" Added batch in offline mode:",Y);return}try{await C(async()=>{const ne=ze(Ne,"batches"),B=await pn(ne,{batch_name:Q,image_url:K,cr:Z,createdAt:new Date});try{await Jt(B,{batchId:B.id})}catch{}const ee={id:B.id,batchName:Q,imageUrl:K,cr:Z};v(ue=>[ee,...ue.filter(Te=>Te.id!==W)]),t.invalidateQueries({queryKey:["years-data"]})})}catch(ne){console.error("Error creating batch:",ne),v(ee=>ee.filter(ue=>ue.id!==W)),n(!0);const B={id:`batch_${Date.now()}`,batchName:Q,imageUrl:K,cr:Z};v(ee=>[B,...ee])}},deleteBatch:async(H,Q={deleteYears:!0})=>{if(!H)return;const K=y,Z=f;if(v(W=>W.filter(Y=>Y.id!==H)),g(W=>W.filter(Y=>(Y.batchId||Y.batchName)!==H)),e||!navigator.onLine){console.log(" Removed batch in offline mode:",H);return}try{await C(async()=>{const W=St(Ne,"batches",H);if(Q.deleteYears)try{const Y=ze(W,"years"),ne=await dt(Y);for(const B of ne.docs)await lr(B.ref)}catch{const ne=Cr(Ne,"years"),B=await dt(ne);for(const ee of B.docs){const ue=ee.data();(ue.batchId||ue.batch_id)===H&&await lr(ee.ref)}}else{const Y=Cr(Ne,"years"),ne=await dt(Y);for(const B of ne.docs){const ee=B.data();if((ee.batchId||ee.batch_id)===H)try{await Jt(B.ref,{batchId:null,batch_name:null})}catch{}}}await lr(W),t.invalidateQueries({queryKey:["years-data"]})})}catch(W){throw console.error("Error deleting batch:",W),v(K||[]),g(Z||[]),W}},deleteLecture:z,deleteSubject:P,addVideo:R,addFile:D,addQuiz:O}}async function bB(t,e,n){try{const r=await dt(Cr(Ne,"years")),s=[];r.forEach(f=>{const g=f.data();(g.batchId||g.batch_id)===n&&s.push(f.id)});try{const f=an(ze(Ne,"years"),Zo("batchId","==",n));(await dt(f)).forEach(y=>{s.includes(y.id)||s.push(y.id)})}catch{}if(s.length===0){console.log(" No years found for batch:",n);return}const a=await dt(ze(Ne,"users")),c=[];if(a.forEach(f=>{const g=f.data(),y=g.yearId||g.year||g.year_id;let v=y;typeof y=="string"&&y.includes(":")&&(v=y.split(":")[0]),v&&s.includes(v)&&c.push(f.id)}),c.length===0){console.log(" No users found for batch:",n);return}const u=Yw(Ne),h=ze(Ne,"notifications");c.forEach(f=>{const g=St(h);u.set(g,{userId:f,title:"New News Article",message:e,type:"news",relatedId:t,read:!1,createdAt:ut.fromDate(new Date),batchId:n})}),await u.commit();try{const f=await xA(c);Array.from(f.entries()).forEach(([g,y])=>{i0(y,"New News Article",e,{newsId:t}).catch(()=>{})})}catch{}}catch(r){console.error("Send notifications by batchId failed:",r)}}async function NB(t,e,n){if(!n){console.log(" No yearId provided, skipping notifications");return}try{let r=null;const s=await dt(Cr(Ne,"years"));let a=null;if(s.forEach(w=>{w.id===n&&(a={id:w.id,...w.data()},r=a.batchId||a.batch_id||null)}),!a)try{const w=await Tj(St(Ne,"years",n));w.exists()&&(a={id:w.id,...w.data()},r=a.batchId||a.batch_id||null)}catch(w){console.warn("Could not fetch year directly:",w)}if(!r){console.log(" Could not find batchId for yearId:",n);return}const c=await dt(Cr(Ne,"years")),u=[n];c.forEach(w=>{const b=w.data();(b.batchId||b.batch_id)===r&&w.id!==n&&u.push(w.id)});try{const w=an(ze(Ne,"years"),Zo("batchId","==",r));(await dt(w)).forEach(_=>{u.includes(_.id)||u.push(_.id)})}catch{}console.log(` Found ${u.length} years in batch ${r}:`,u);const h=an(ze(Ne,"users")),f=await dt(h),g=[];if(f.forEach(w=>{const b=w.data(),_=b.yearId||b.year||b.year_id;let x=_;typeof _=="string"&&_.includes(":")&&(x=_.split(":")[0]),x&&u.includes(x)&&g.push(w.id)}),console.log(` Found ${g.length} users to notify in batch ${r}`),g.length===0){console.log(" No users found for this batch, skipping notifications");return}const y=Yw(Ne),v=ze(Ne,"notifications");g.forEach(w=>{const b=St(v),_={userId:w,title:"New News Article",message:e,type:"news",relatedId:t,read:!1,createdAt:new Date,...r?{batchId:r}:{}},x={..._,createdAt:ut.fromDate(_.createdAt)};y.set(b,x)}),await y.commit(),console.log(` Created ${g.length} notifications for batch ${r}`);try{const w=await xA(g);if(console.log(` Found ${w.size} FCM tokens for push notifications`),w.size>0){const b=Array.from(w.entries()).map(([_,x])=>i0(x,"New News Article",e,{newsId:t,type:"news",batchId:r||""}).catch(j=>{console.error(`Failed to send push to user ${_}:`,j)}));await Promise.allSettled(b),console.log(` Attempted to send ${w.size} push notifications`)}else console.log(" No FCM tokens found. Users need to enable notifications first.")}catch(w){console.error(" Error sending push notifications:",w)}}catch(r){console.error(" Error sending notifications:",r)}}function o0(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null),{batches:c,years:u}=va();return E.useEffect(()=>{const y=an(ze(Ne,"news"),ya("updatedAt","desc")),v=gi(y,w=>{const b=[];w.forEach(_=>{var j,C;const x=_.data();b.push({id:_.id,title:x.title||"",content:x.content||"",imageUrl:x.imageUrl||"",videoUrl:x.videoUrl||"",createdAt:((j=x.createdAt)==null?void 0:j.toDate())||new Date,updatedAt:((C=x.updatedAt)==null?void 0:C.toDate())||new Date,authorName:x.authorName||"",authorId:x.newsId||_.id,tags:x.tags||[],isPinned:x.isPinned||!1,viewsCount:x.viewsCount||0,attachments:x.attachments||[],yearId:x.yearId||"",yearNumber:x.yearNumber||void 0,batchId:x.batchId||""})}),console.log(` Successfully loaded ${b.length} news articles from Firebase`),e(b),r(!1)},w=>{console.error("Error fetching news:",w),a(w.message||"Failed to fetch news from Firebase"),r(!1)});return()=>v()},[]),{news:t,loading:n,error:s,createNews:async y=>{try{console.log(" Creating news article:",y.title);const v={...y,createdAt:y.createdAt instanceof Date?ut.fromDate(y.createdAt):$p(),updatedAt:y.updatedAt instanceof Date?ut.fromDate(y.updatedAt):$p()};Object.keys(v).forEach(b=>{v[b]===void 0&&delete v[b]});const w=await pn(ze(Ne,"news"),v);console.log(" News article created successfully with ID:",w.id),y.batchId?bB(w.id,y.title,y.batchId).catch(b=>{console.error("Failed to send notifications (non-critical):",b)}):y.yearId&&NB(w.id,y.title,y.yearId).catch(b=>{console.error("Failed to send notifications (non-critical):",b)})}catch(v){throw console.error(" Error creating news:",v),console.error("Error details:",v.code,v.message),new Error(`Failed to create news article: ${v.message||"Check Firebase permissions"}`)}},updateNews:async(y,v)=>{try{const w={...v};v.createdAt instanceof Date&&(w.createdAt=ut.fromDate(v.createdAt)),v.updatedAt instanceof Date&&(w.updatedAt=ut.fromDate(v.updatedAt)),Object.keys(w).forEach(b=>{w[b]===void 0&&delete w[b]}),await Jt(St(Ne,"news",y),w)}catch(w){throw console.error("Error updating news:",w),console.error("Error details:",w.code,w.message),new Error(`Failed to update news article: ${w.message||"Check Firebase permissions"}`)}},deleteNews:async y=>{try{await lr(St(Ne,"news",y))}catch(v){throw console.error("Error deleting news:",v),console.error("Error details:",v.code,v.message),new Error(`Failed to delete news article: ${v.message||"Check Firebase permissions"}`)}},batches:c,years:u}}function wA(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1),h=[{id:"product1",productId:"product1",name:"Medical Textbook",description:"Comprehensive medical textbook for students",price:89.99,images:["https://example.com/book1.jpg"],categoryId:"books",createdAt:new Date},{id:"product2",productId:"product2",name:"Stethoscope",description:"Professional grade stethoscope",price:120,images:["https://example.com/stethoscope.jpg"],categoryId:"equipment",createdAt:new Date}];E.useEffect(()=>{(async()=>{const b=setTimeout(()=>{n&&!c&&(console.log(" Firebase taking too long - switching to offline mode"),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h))},3e3);try{console.log(" Fetching products from Firebase...");const _=await dt(ze(Ne,"products")),x=[];_.forEach(j=>{var I;const C=j.data();x.push({id:j.id,productId:C.productId||j.id,name:C.name||"",description:C.description||"",price:C.price||0,types:C.types||(C.price?[{name:"Default",price:C.price}]:[]),images:C.images||[],categoryId:C.categoryId||"",createdAt:((I=C.createdAt)==null?void 0:I.toDate())||new Date})}),clearTimeout(b),e(x.sort((j,C)=>C.createdAt.getTime()-j.createdAt.getTime())),r(!1),a(null),console.log(" Products loaded successfully:",x.length)}catch(_){clearTimeout(b),_.isFirebaseOfflineError?console.log(" Firebase offline mode detected - using mock data"):console.error("Firebase error - switching to offline mode:",_.message),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h)}})()},[]);const f=async w=>{var b,_;if(c){const x={id:`product_${Date.now()}`,productId:`product_${Date.now()}`,...w,createdAt:new Date};e(j=>[x,...j]),console.log(" Added product to offline mode:",x.name);return}try{const x={name:w.name,description:w.description,price:w.price||((_=(b=w.types)==null?void 0:b[0])==null?void 0:_.price)||0,types:w.types||(w.price?[{name:"Default",price:w.price}]:[]),images:w.images,categoryId:w.categoryId||"",createdAt:new Date,productId:""};console.log(" Creating new product:",x);const j=await pn(ze(Ne,"products"),x);await Jt(j,{productId:j.id}),console.log(" Created product with ID:",j.id),window.location.replace(window.location.href)}catch(x){console.error("Error creating product:",x),u(!0),await f(w)}};return{products:t,loading:n,error:s,isOfflineMode:c,createProduct:f,updateProduct:async(w,b)=>{var _;if(c){e(x=>x.map(j=>j.id===w?{...j,...b}:j)),console.log(" Updated product in offline mode");return}try{const x=St(Ne,"products",w),j={...b};b.types&&(j.types=b.types,j.price=((_=b.types[0])==null?void 0:_.price)||b.price||0),await Jt(x,j),console.log(" Updated product in Firebase:",w),window.location.replace(window.location.href)}catch(x){console.error("Error updating product:",x)}},deleteProduct:async w=>{if(c){e(b=>b.filter(_=>_.id!==w)),console.log(" Deleted product from offline mode");return}try{await lr(St(Ne,"products",w)),console.log(" Deleted product from Firebase:",w),window.location.replace(window.location.href)}catch(b){console.error("Error deleting product:",b)}},retryConnection:()=>{console.log(" Retrying Firebase connection..."),r(!0),a(null),u(!1),window.location.replace(window.location.href)}}}const SB=[{id:"1",name:"Dr. Sarah Johnson",department:"Internal Medicine",email:"sarah.johnson@medjust.com",officeLocation:"Medical Building, Room 301",imageUrl:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=300&h=300&fit=crop&crop=face"},{id:"2",name:"Prof. Michael Chen",department:"Surgery",email:"michael.chen@medjust.com",officeLocation:"Surgical Wing, Room 205",imageUrl:"https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=300&h=300&fit=crop&crop=face"},{id:"3",name:"Dr. Emily Rodriguez",department:"Emergency Medicine",email:"emily.rodriguez@medjust.com",officeLocation:"Emergency Department, Office 12",imageUrl:"https://images.unsplash.com/photo-1594824928909-90ad1d93d7c3?w=300&h=300&fit=crop&crop=face"}];function _A(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1);E.useEffect(()=>{const y=async()=>{try{const w=an(ze(Ne,"professors"));await dt(w);const b=an(ze(Ne,"professors"),ya("name","asc"));return gi(b,x=>{const j=[];x.forEach(C=>{const I=C.data();j.push({id:C.id,name:I.name||"",title:I.title||"",department:I.department||"",email:I.email||"",phone:I.phone||"",officeLocation:I.officeLocation||"",bio:I.bio||"",researchAreas:I.researchAreas||[],website:I.website||"",linkedin:I.linkedin||"",imageUrl:I.imageUrl||""})}),e(j),r(!1)},x=>{console.error("Error in Firebase listener:",x),v()})}catch(w){return console.error("Firebase connection failed:",w),v(),null}},v=()=>{console.log(" Switching to offline mode with mock data"),u(!0),e(SB),a(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(w=>[...w,v]),console.log(" Added professor in offline mode:",v.name);return}try{await pn(ze(Ne,"professors"),{...y,professorId:`prof_${Date.now()}`}),console.log(" Added professor to Firebase:",y.name)}catch(v){console.error("Error creating professor:",v),u(!0),await h(y)}};return{professors:t,loading:n,error:s,createProfessor:h,updateProfessor:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(w=>w.map(b=>b.id===y?{...b,...v}:b)),console.log(" Updated professor in offline mode");return}try{await Jt(St(Ne,"professors",y),v),console.log(" Updated professor in Firebase")}catch(w){console.error("Error updating professor:",w),e(b=>b.map(_=>_.id===y?{..._,...v}:_)),console.log(" Updated professor locally (Firebase failed)")}},deleteProfessor:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(w=>w.id!==y)),console.log(" Deleted professor in offline mode");return}try{await lr(St(Ne,"professors",y)),console.log(" Deleted professor from Firebase")}catch(v){console.error("Error deleting professor:",v),e(w=>w.filter(b=>b.id!==y)),console.log(" Deleted professor locally (Firebase failed)")}},isOfflineMode:c}}function TB(){const[t,e]=E.useState(null),[n,r]=E.useState(!1),{currentUser:s}=Lm();E.useEffect(()=>{"Notification"in window&&e(Notification.permission)},[]),E.useEffect(()=>{s&&t==="granted"&&gB().catch(c=>{console.error("Failed to initialize push notifications:",c)})},[s,t]);const a=async()=>{r(!0);try{const c=await vA();e(c?"granted":Notification.permission)}catch(c){console.error("Error requesting notification permission:",c),e(Notification.permission)}finally{r(!1)}};return"Notification"in window?t==="granted"?o.jsx(pe,{className:"border-green-500/50 bg-green-500/10",children:o.jsxs(We,{children:[o.jsxs(Ge,{className:"flex items-center gap-2 text-green-600",children:[o.jsx(up,{className:"h-5 w-5"}),"Push Notifications Enabled"]}),o.jsx(Tt,{children:"You will receive notifications for new news articles and updates."})]})}):t==="denied"?o.jsx(pe,{className:"border-yellow-500/50 bg-yellow-500/10",children:o.jsxs(We,{children:[o.jsxs(Ge,{className:"flex items-center gap-2 text-yellow-600",children:[o.jsx(K2,{className:"h-5 w-5"}),"Notifications Blocked"]}),o.jsx(Tt,{children:"Notifications are blocked. Please enable them in your browser settings to receive updates."})]})}):o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsxs(Ge,{className:"flex items-center gap-2",children:[o.jsx(el,{className:"h-5 w-5"}),"Enable Push Notifications"]}),o.jsx(Tt,{children:"Get notified when new news articles are published for your batch."})]}),o.jsx(me,{children:o.jsx(te,{onClick:a,disabled:n,className:"w-full",children:n?"Enabling...":"Enable Notifications"})})]}):null}const CB=[{id:1,type:"news",title:"New cardiology study published",time:"2 hours ago",author:"Dr. Smith"},{id:2,type:"video",title:"Anatomy lecture uploaded",time:"4 hours ago",author:"Prof. Johnson"},{id:3,type:"quiz",title:"Pharmacology quiz created",time:"6 hours ago",author:"Dr. Brown"},{id:4,type:"product",title:"New stethoscope added to store",time:"1 day ago",author:"Admin"}];function IB(){const{news:t,loading:e}=o0(),{products:n,loading:r}=wA(),{professors:s,loading:a}=_A(),{years:c,loading:u}=va(),h=t.length,f=s.length,g=n.reduce((w,b)=>w+(b.price||0),0);c.reduce((w,b)=>w+b.subjects.reduce((_,x)=>_+x.lectures.reduce((j,C)=>{var I;return j+(((I=C.videos)==null?void 0:I.length)||0)},0),0),0);const y=c.reduce((w,b)=>{var _;return w+(((_=b.subjects)==null?void 0:_.length)||0)},0),v=[{title:"Total News Articles",value:e?"...":String(h),change:"+12%",icon:fp,color:"text-blue-600"},{title:"Subjects",value:u?"...":String(y),change:"+5%",icon:Ss,color:"text-green-600"},{title:"Active Professors",value:a?"...":String(f),change:"+2%",icon:$c,color:"text-purple-600"},{title:"Store Revenue",value:r?"...":`$${g.toLocaleString()}`,change:"+18%",icon:DS,color:"text-emerald-600"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Welcome to the MedJust Admin Dashboard"})]}),o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:v.map(w=>o.jsxs(pe,{children:[o.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ge,{className:"text-sm font-medium",children:w.title}),o.jsx(w.icon,{className:`h-4 w-4 ${w.color}`})]}),o.jsxs(me,{children:[o.jsx("div",{className:"text-2xl font-bold",children:w.value}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[o.jsxs(Pt,{variant:"secondary",className:"text-green-600",children:[o.jsx(uO,{className:"h-3 w-3 mr-1"}),w.change]}),o.jsx("span",{className:"text-muted-foreground",children:"from last month"})]})]})]},w.title))}),o.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Recent Activity"}),o.jsx(Tt,{children:"Latest updates across all modules"})]}),o.jsx(me,{children:o.jsx("div",{className:"space-y-4",children:CB.map(w=>o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium",children:w.title}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[o.jsx("span",{children:w.author}),o.jsx("span",{children:""}),o.jsx("span",{children:w.time})]})]})]},w.id))})})]}),o.jsx(TB,{}),o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Quick Actions"}),o.jsx(Tt,{children:"Common administrative tasks"})]}),o.jsx(me,{children:o.jsxs("div",{className:"grid gap-2",children:[o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(fp,{className:"h-5 w-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Create News Article"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Publish new content"})]})]}),o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(ii,{className:"h-5 w-5 text-green-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Upload Video"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Add learning resource"})]})]}),o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx($c,{className:"h-5 w-5 text-purple-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Add Professor"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Register new faculty"})]})]}),o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(Lx,{className:"h-5 w-5 text-emerald-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Add Product"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Expand store catalog"})]})]})]})})]})]})]})}function jB(t,e){const n=E.createContext(e),r=a=>{const{children:c,...u}=a,h=E.useMemo(()=>u,Object.values(u));return o.jsx(n.Provider,{value:h,children:c})};r.displayName=t+"Provider";function s(a){const c=E.useContext(n);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function AB(t,e=[]){let n=[];function r(a,c){const u=E.createContext(c),h=n.length;n=[...n,c];const f=y=>{var j;const{scope:v,children:w,...b}=y,_=((j=v==null?void 0:v[t])==null?void 0:j[h])||u,x=E.useMemo(()=>b,Object.values(b));return o.jsx(_.Provider,{value:x,children:w})};f.displayName=a+"Provider";function g(y,v){var _;const w=((_=v==null?void 0:v[t])==null?void 0:_[h])||u,b=E.useContext(w);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[f,g]}const s=()=>{const a=n.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[t])||a;return E.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[r,PB(s,...e)]}function PB(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const y=h(a)[`__scope${f}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var Zy="focusScope.autoFocusOnMount",ev="focusScope.autoFocusOnUnmount",E1={bubbles:!1,cancelable:!0},RB="FocusScope",a0=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...c}=t,[u,h]=E.useState(null),f=In(s),g=In(a),y=E.useRef(null),v=jt(e,_=>h(_)),w=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let _=function(I){if(w.paused||!u)return;const M=I.target;u.contains(M)?y.current=M:Po(y.current,{select:!0})},x=function(I){if(w.paused||!u)return;const M=I.relatedTarget;M!==null&&(u.contains(M)||Po(y.current,{select:!0}))},j=function(I){if(document.activeElement===document.body)for(const U of I)U.removedNodes.length>0&&Po(u)};document.addEventListener("focusin",_),document.addEventListener("focusout",x);const C=new MutationObserver(j);return u&&C.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",x),C.disconnect()}}},[r,u,w.paused]),E.useEffect(()=>{if(u){N1.add(w);const _=document.activeElement;if(!u.contains(_)){const j=new CustomEvent(Zy,E1);u.addEventListener(Zy,f),u.dispatchEvent(j),j.defaultPrevented||(kB(FB(EA(u)),{select:!0}),document.activeElement===_&&Po(u))}return()=>{u.removeEventListener(Zy,f),setTimeout(()=>{const j=new CustomEvent(ev,E1);u.addEventListener(ev,g),u.dispatchEvent(j),j.defaultPrevented||Po(_??document.body,{select:!0}),u.removeEventListener(ev,g),N1.remove(w)},0)}}},[u,f,g,w]);const b=E.useCallback(_=>{if(!n&&!r||w.paused)return;const x=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,j=document.activeElement;if(x&&j){const C=_.currentTarget,[I,M]=OB(C);I&&M?!_.shiftKey&&j===M?(_.preventDefault(),n&&Po(I,{select:!0})):_.shiftKey&&j===I&&(_.preventDefault(),n&&Po(M,{select:!0})):j===C&&_.preventDefault()}},[n,r,w.paused]);return o.jsx(Je.div,{tabIndex:-1,...c,ref:v,onKeyDown:b})});a0.displayName=RB;function kB(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Po(r,{select:e}),document.activeElement!==n)return}function OB(t){const e=EA(t),n=b1(e,t),r=b1(e.reverse(),t);return[n,r]}function EA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function b1(t,e){for(const n of t)if(!DB(n,{upTo:e}))return n}function DB(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function LB(t){return t instanceof HTMLInputElement&&"select"in t}function Po(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&LB(t)&&e&&t.select()}}var N1=MB();function MB(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=S1(t,e),t.unshift(e)},remove(e){var n;t=S1(t,e),(n=t[0])==null||n.resume()}}}function S1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function FB(t){return t.filter(e=>e.tagName!=="A")}function VB(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var Mm=t=>{const{present:e,children:n}=t,r=UB(e),s=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),a=jt(r.ref,$B(s));return typeof n=="function"||r.isPresent?E.cloneElement(s,{ref:a}):null};Mm.displayName="Presence";function UB(t){const[e,n]=E.useState(),r=E.useRef({}),s=E.useRef(t),a=E.useRef("none"),c=t?"mounted":"unmounted",[u,h]=VB(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const f=Uf(r.current);a.current=u==="mounted"?f:"none"},[u]),en(()=>{const f=r.current,g=s.current;if(g!==t){const v=a.current,w=Uf(f);t?h("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(g&&v!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),en(()=>{if(e){let f;const g=e.ownerDocument.defaultView??window,y=w=>{const _=Uf(r.current).includes(w.animationName);if(w.target===e&&_&&(h("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",f=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},v=w=>{w.target===e&&(a.current=Uf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function Uf(t){return(t==null?void 0:t.animationName)||"none"}function $B(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var tv=0;function zB(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??T1()),document.body.insertAdjacentElement("beforeend",t[1]??T1()),tv++,()=>{tv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),tv--}},[])}function T1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var vd="right-scroll-bar-position",xd="width-before-scroll-bar",BB="with-scroll-bars-hidden",qB="--removed-body-scroll-bar-size";function nv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function WB(t,e){var n=E.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var HB=typeof window<"u"?E.useLayoutEffect:E.useEffect,C1=new WeakMap;function bA(t,e){var n=WB(null,function(r){return t.forEach(function(s){return nv(s,r)})});return HB(function(){var r=C1.get(n);if(r){var s=new Set(r),a=new Set(t),c=n.current;s.forEach(function(u){a.has(u)||nv(u,null)}),a.forEach(function(u){s.has(u)||nv(u,c)})}C1.set(n,t)},[t]),n}function KB(t){return t}function GB(t,e){e===void 0&&(e=KB);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var c=e(a,r);return n.push(c),function(){n=n.filter(function(u){return u!==c})}},assignSyncMedium:function(a){for(r=!0;n.length;){var c=n;n=[],c.forEach(a)}n={push:function(u){return a(u)},filter:function(){return n}}},assignMedium:function(a){r=!0;var c=[];if(n.length){var u=n;n=[],u.forEach(a),c=n}var h=function(){var g=c;c=[],g.forEach(a)},f=function(){return Promise.resolve().then(h)};f(),n={push:function(g){c.push(g),f()},filter:function(g){return c=c.filter(g),n}}}};return s}function NA(t){t===void 0&&(t={});var e=GB(null);return e.options=Jn({async:!0,ssr:!1},t),e}var SA=function(t){var e=t.sideCar,n=au(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,Jn({},n))};SA.isSideCarExport=!0;function TA(t,e){return t.useMedium(e),SA}var CA=NA(),rv=function(){},Fm=E.forwardRef(function(t,e){var n=E.useRef(null),r=E.useState({onScrollCapture:rv,onWheelCapture:rv,onTouchMoveCapture:rv}),s=r[0],a=r[1],c=t.forwardProps,u=t.children,h=t.className,f=t.removeScrollBar,g=t.enabled,y=t.shards,v=t.sideCar,w=t.noIsolation,b=t.inert,_=t.allowPinchZoom,x=t.as,j=x===void 0?"div":x,C=t.gapMode,I=au(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=v,U=bA([n,e]),z=Jn(Jn({},I),s);return E.createElement(E.Fragment,null,g&&E.createElement(M,{sideCar:CA,removeScrollBar:f,shards:y,noIsolation:w,inert:b,setCallbacks:a,allowPinchZoom:!!_,lockRef:n,gapMode:C}),c?E.cloneElement(E.Children.only(u),Jn(Jn({},z),{ref:U})):E.createElement(j,Jn({},z,{className:h,ref:U}),u))});Fm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fm.classNames={fullWidth:xd,zeroRight:vd};var QB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function YB(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=QB();return e&&t.setAttribute("nonce",e),t}function XB(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function JB(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var ZB=function(){var t=0,e=null;return{add:function(n){t==0&&(e=YB())&&(XB(e,n),JB(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},e8=function(){var t=ZB();return function(e,n){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},l0=function(){var t=e8(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},t8={left:0,top:0,right:0,gap:0},sv=function(t){return parseInt(t||"",10)||0},n8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[sv(n),sv(r),sv(s)]},r8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return t8;var e=n8(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},s8=l0(),Tc="data-scroll-locked",i8=function(t,e,n,r){var s=t.left,a=t.top,c=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(BB,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Tc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vd,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(xd,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(vd," .").concat(vd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(xd," .").concat(xd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Tc,`] {
    `).concat(qB,": ").concat(u,`px;
  }
`)},I1=function(){var t=parseInt(document.body.getAttribute(Tc)||"0",10);return isFinite(t)?t:0},o8=function(){E.useEffect(function(){return document.body.setAttribute(Tc,(I1()+1).toString()),function(){var t=I1()-1;t<=0?document.body.removeAttribute(Tc):document.body.setAttribute(Tc,t.toString())}},[])},IA=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;o8();var a=E.useMemo(function(){return r8(s)},[s]);return E.createElement(s8,{styles:i8(a,!e,s,n?"":"!important")})},wx=!1;if(typeof window<"u")try{var $f=Object.defineProperty({},"passive",{get:function(){return wx=!0,!0}});window.addEventListener("test",$f,$f),window.removeEventListener("test",$f,$f)}catch{wx=!1}var lc=wx?{passive:!1}:!1,a8=function(t){return t.tagName==="TEXTAREA"},jA=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!a8(t)&&n[e]==="visible")},l8=function(t){return jA(t,"overflowY")},c8=function(t){return jA(t,"overflowX")},j1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=AA(t,r);if(s){var a=PA(t,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},u8=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},d8=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},AA=function(t,e){return t==="v"?l8(e):c8(e)},PA=function(t,e){return t==="v"?u8(e):d8(e)},h8=function(t,e){return t==="h"&&e==="rtl"?-1:1},f8=function(t,e,n,r,s){var a=h8(t,window.getComputedStyle(e).direction),c=a*r,u=n.target,h=e.contains(u),f=!1,g=c>0,y=0,v=0;do{var w=PA(t,u),b=w[0],_=w[1],x=w[2],j=_-x-a*b;(b||j)&&AA(t,u)&&(y+=j,v+=b),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(y)<1||!g&&Math.abs(v)<1)&&(f=!0),f},zf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},A1=function(t){return[t.deltaX,t.deltaY]},P1=function(t){return t&&"current"in t?t.current:t},p8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},m8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},g8=0,cc=[];function y8(t){var e=E.useRef([]),n=E.useRef([0,0]),r=E.useRef(),s=E.useState(g8++)[0],a=E.useState(l0)[0],c=E.useRef(t);E.useEffect(function(){c.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var _=pC([t.lockRef.current],(t.shards||[]).map(P1),!0).filter(Boolean);return _.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=E.useCallback(function(_,x){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!c.current.allowPinchZoom;var j=zf(_),C=n.current,I="deltaX"in _?_.deltaX:C[0]-j[0],M="deltaY"in _?_.deltaY:C[1]-j[1],U,z=_.target,P=Math.abs(I)>Math.abs(M)?"h":"v";if("touches"in _&&P==="h"&&z.type==="range")return!1;var R=j1(P,z);if(!R)return!0;if(R?U=P:(U=P==="v"?"h":"v",R=j1(P,z)),!R)return!1;if(!r.current&&"changedTouches"in _&&(I||M)&&(r.current=U),!U)return!0;var D=r.current||U;return f8(D,x,_,D==="h"?I:M)},[]),h=E.useCallback(function(_){var x=_;if(!(!cc.length||cc[cc.length-1]!==a)){var j="deltaY"in x?A1(x):zf(x),C=e.current.filter(function(U){return U.name===x.type&&(U.target===x.target||x.target===U.shadowParent)&&p8(U.delta,j)})[0];if(C&&C.should){x.cancelable&&x.preventDefault();return}if(!C){var I=(c.current.shards||[]).map(P1).filter(Boolean).filter(function(U){return U.contains(x.target)}),M=I.length>0?u(x,I[0]):!c.current.noIsolation;M&&x.cancelable&&x.preventDefault()}}},[]),f=E.useCallback(function(_,x,j,C){var I={name:_,delta:x,target:j,should:C,shadowParent:v8(j)};e.current.push(I),setTimeout(function(){e.current=e.current.filter(function(M){return M!==I})},1)},[]),g=E.useCallback(function(_){n.current=zf(_),r.current=void 0},[]),y=E.useCallback(function(_){f(_.type,A1(_),_.target,u(_,t.lockRef.current))},[]),v=E.useCallback(function(_){f(_.type,zf(_),_.target,u(_,t.lockRef.current))},[]);E.useEffect(function(){return cc.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,lc),document.addEventListener("touchmove",h,lc),document.addEventListener("touchstart",g,lc),function(){cc=cc.filter(function(_){return _!==a}),document.removeEventListener("wheel",h,lc),document.removeEventListener("touchmove",h,lc),document.removeEventListener("touchstart",g,lc)}},[]);var w=t.removeScrollBar,b=t.inert;return E.createElement(E.Fragment,null,b?E.createElement(a,{styles:m8(s)}):null,w?E.createElement(IA,{gapMode:t.gapMode}):null)}function v8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const x8=TA(CA,y8);var RA=E.forwardRef(function(t,e){return E.createElement(Fm,Jn({},t,{ref:e,sideCar:x8}))});RA.classNames=Fm.classNames;var w8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},uc=new WeakMap,Bf=new WeakMap,qf={},iv=0,kA=function(t){return t&&(t.host||kA(t.parentNode))},_8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=kA(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},E8=function(t,e,n,r){var s=_8(e,Array.isArray(t)?t:[t]);qf[n]||(qf[n]=new WeakMap);var a=qf[n],c=[],u=new Set,h=new Set(s),f=function(y){!y||u.has(y)||(u.add(y),f(y.parentNode))};s.forEach(f);var g=function(y){!y||h.has(y)||Array.prototype.forEach.call(y.children,function(v){if(u.has(v))g(v);else try{var w=v.getAttribute(r),b=w!==null&&w!=="false",_=(uc.get(v)||0)+1,x=(a.get(v)||0)+1;uc.set(v,_),a.set(v,x),c.push(v),_===1&&b&&Bf.set(v,!0),x===1&&v.setAttribute(n,"true"),b||v.setAttribute(r,"true")}catch(j){console.error("aria-hidden: cannot operate on ",v,j)}})};return g(e),u.clear(),iv++,function(){c.forEach(function(y){var v=uc.get(y)-1,w=a.get(y)-1;uc.set(y,v),a.set(y,w),v||(Bf.has(y)||y.removeAttribute(r),Bf.delete(y)),w||y.removeAttribute(n)}),iv--,iv||(uc=new WeakMap,uc=new WeakMap,Bf=new WeakMap,qf={})}},OA=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=w8(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),E8(r,s,n,"aria-hidden")):function(){return null}},c0="Dialog",[DA,sW]=AB(c0),[b8,Vs]=DA(c0),LA=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:c=!0}=t,u=E.useRef(null),h=E.useRef(null),[f=!1,g]=rl({prop:r,defaultProp:s,onChange:a});return o.jsx(b8,{scope:e,triggerRef:u,contentRef:h,contentId:Ko(),titleId:Ko(),descriptionId:Ko(),open:f,onOpenChange:g,onOpenToggle:E.useCallback(()=>g(y=>!y),[g]),modal:c,children:n})};LA.displayName=c0;var MA="DialogTrigger",FA=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vs(MA,n),a=jt(e,s.triggerRef);return o.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":h0(s.open),...r,ref:a,onClick:He(t.onClick,s.onOpenToggle)})});FA.displayName=MA;var u0="DialogPortal",[N8,VA]=DA(u0,{forceMount:void 0}),UA=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=Vs(u0,e);return o.jsx(N8,{scope:e,forceMount:n,children:E.Children.map(r,c=>o.jsx(Mm,{present:n||a.open,children:o.jsx(vT,{asChild:!0,container:s,children:c})}))})};UA.displayName=u0;var Wp="DialogOverlay",$A=E.forwardRef((t,e)=>{const n=VA(Wp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Vs(Wp,t.__scopeDialog);return a.modal?o.jsx(Mm,{present:r||a.open,children:o.jsx(S8,{...s,ref:e})}):null});$A.displayName=Wp;var S8=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vs(Wp,n);return o.jsx(RA,{as:nl,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(Je.div,{"data-state":h0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),hl="DialogContent",zA=E.forwardRef((t,e)=>{const n=VA(hl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Vs(hl,t.__scopeDialog);return o.jsx(Mm,{present:r||a.open,children:a.modal?o.jsx(T8,{...s,ref:e}):o.jsx(C8,{...s,ref:e})})});zA.displayName=hl;var T8=E.forwardRef((t,e)=>{const n=Vs(hl,t.__scopeDialog),r=E.useRef(null),s=jt(e,n.contentRef,r);return E.useEffect(()=>{const a=r.current;if(a)return OA(a)},[]),o.jsx(BA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:He(t.onCloseAutoFocus,a=>{var c;a.preventDefault(),(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:He(t.onPointerDownOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&a.preventDefault()}),onFocusOutside:He(t.onFocusOutside,a=>a.preventDefault())})}),C8=E.forwardRef((t,e)=>{const n=Vs(hl,t.__scopeDialog),r=E.useRef(!1),s=E.useRef(!1);return o.jsx(BA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,u;(c=t.onCloseAutoFocus)==null||c.call(t,a),a.defaultPrevented||(r.current||(u=n.triggerRef.current)==null||u.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var h,f;(h=t.onInteractOutside)==null||h.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=a.target;((f=n.triggerRef.current)==null?void 0:f.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),BA=E.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...c}=t,u=Vs(hl,n),h=E.useRef(null),f=jt(e,h);return zB(),o.jsxs(o.Fragment,{children:[o.jsx(a0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Fx,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":h0(u.open),...c,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(I8,{titleId:u.titleId}),o.jsx(A8,{contentRef:h,descriptionId:u.descriptionId})]})]})}),d0="DialogTitle",qA=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vs(d0,n);return o.jsx(Je.h2,{id:s.titleId,...r,ref:e})});qA.displayName=d0;var WA="DialogDescription",HA=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vs(WA,n);return o.jsx(Je.p,{id:s.descriptionId,...r,ref:e})});HA.displayName=WA;var KA="DialogClose",GA=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vs(KA,n);return o.jsx(Je.button,{type:"button",...r,ref:e,onClick:He(t.onClick,()=>s.onOpenChange(!1))})});GA.displayName=KA;function h0(t){return t?"open":"closed"}var QA="DialogTitleWarning",[iW,YA]=jB(QA,{contentName:hl,titleName:d0,docsSlug:"dialog"}),I8=({titleId:t})=>{const e=YA(QA),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},j8="DialogDescriptionWarning",A8=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${YA(j8).contentName}}.`;return E.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},P8=LA,R8=FA,k8=UA,XA=$A,JA=zA,ZA=qA,eP=HA,tP=GA;const nP=P8,O8=R8,D8=k8,L8=tP,rP=E.forwardRef(({className:t,...e},n)=>o.jsx(XA,{ref:n,className:Qe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));rP.displayName=XA.displayName;const f0=E.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(D8,{children:[o.jsx(rP,{}),o.jsxs(JA,{ref:r,className:Qe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,o.jsxs(tP,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(zc,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));f0.displayName=JA.displayName;const p0=({className:t,...e})=>o.jsx("div",{className:Qe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});p0.displayName="DialogHeader";const sP=({className:t,...e})=>o.jsx("div",{className:Qe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});sP.displayName="DialogFooter";const m0=E.forwardRef(({className:t,...e},n)=>o.jsx(ZA,{ref:n,className:Qe("text-lg font-semibold leading-none tracking-tight",t),...e}));m0.displayName=ZA.displayName;const g0=E.forwardRef(({className:t,...e},n)=>o.jsx(eP,{ref:n,className:Qe("text-sm text-muted-foreground",t),...e}));g0.displayName=eP.displayName;const Ps=E.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:Qe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Ps.displayName="Textarea";function iP(t){const e=E.useRef({value:t,previous:t});return E.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var y0="Switch",[M8,oW]=Xi(y0),[F8,V8]=M8(y0),oP=E.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:c,disabled:u,value:h="on",onCheckedChange:f,...g}=t,[y,v]=E.useState(null),w=jt(e,C=>v(C)),b=E.useRef(!1),_=y?!!y.closest("form"):!0,[x=!1,j]=rl({prop:s,defaultProp:a,onChange:f});return o.jsxs(F8,{scope:n,checked:x,disabled:u,children:[o.jsx(Je.button,{type:"button",role:"switch","aria-checked":x,"aria-required":c,"data-state":cP(x),"data-disabled":u?"":void 0,disabled:u,value:h,...g,ref:w,onClick:He(t.onClick,C=>{j(I=>!I),_&&(b.current=C.isPropagationStopped(),b.current||C.stopPropagation())})}),_&&o.jsx(U8,{control:y,bubbles:!b.current,name:r,value:h,checked:x,required:c,disabled:u,style:{transform:"translateX(-100%)"}})]})});oP.displayName=y0;var aP="SwitchThumb",lP=E.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=V8(aP,n);return o.jsx(Je.span,{"data-state":cP(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});lP.displayName=aP;var U8=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,a=E.useRef(null),c=iP(n),u=iT(e);return E.useEffect(()=>{const h=a.current,f=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&y){const v=new Event("click",{bubbles:r});y.call(h,n),h.dispatchEvent(v)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...t.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function cP(t){return t?"checked":"unchecked"}var uP=oP,$8=lP;const dP=E.forwardRef(({className:t,...e},n)=>o.jsx(uP,{className:Qe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:o.jsx($8,{className:Qe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));dP.displayName=uP.displayName;function z8({news:t,onClose:e,onSave:n}){const{batches:r}=va(),[s,a]=E.useState(null),[c,u]=E.useState({title:"",content:"",imageUrl:"",videoUrl:"",tags:[],isPinned:!1,attachments:[],batchId:""}),[h,f]=E.useState(""),[g,y]=E.useState(!1);E.useEffect(()=>{t&&u(x=>({...x,title:t.title||"",content:t.content||"",imageUrl:t.imageUrl||"",videoUrl:t.videoUrl||"",tags:t.tags||[],isPinned:t.isPinned||!1,attachments:t.attachments||[],batchId:t.batchId||""}))},[t]),E.useEffect(()=>{let x=!0;return(async()=>{try{if(r&&r.length>0||s)return;const{collection:C}=await eS(async()=>{const{collection:U}=await Promise.resolve().then(()=>Y$);return{collection:U}},void 0),M=(await dt(C(Ne,"batches"))).docs.map(U=>({id:U.id,batchName:U.data().batch_name||U.data().batchName||U.id}));x&&M.length>0&&a(M)}catch{}})(),()=>{x=!1}},[r,s]);const v=async x=>{x.preventDefault(),y(!0);try{const j={...c,yearNumber:void 0,updatedAt:new Date,...t?{}:{createdAt:new Date,authorName:"Current User",authorId:"current-user-id",viewsCount:0}};n(j)}catch(j){console.error("Error saving news:",j)}finally{y(!1)}},w=()=>{h.trim()&&!c.tags.includes(h.trim())&&(u(x=>({...x,tags:[...x.tags,h.trim()]})),f(""))},b=x=>{u(j=>({...j,tags:j.tags.filter(C=>C!==x)}))},_=x=>{x.key==="Enter"&&(x.preventDefault(),w())};return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:e,children:[o.jsx(ss,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Article":"Create Article"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update the news article details":"Create a new news article for medical students"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(dP,{id:"pinned",checked:c.isPinned,onCheckedChange:x=>u(j=>({...j,isPinned:x}))}),o.jsxs(Ae,{htmlFor:"pinned",className:"flex items-center gap-2",children:[o.jsx(LS,{className:"h-4 w-4"}),"Pin Article"]})]})})]}),o.jsx("form",{onSubmit:v,className:"space-y-6",children:o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Article Content"}),o.jsx(Tt,{children:"Main article information and content"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"title",children:"Title *"}),o.jsx(Se,{id:"title",placeholder:"Enter article title...",value:c.title,onChange:x=>u(j=>({...j,title:x.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"content",children:"Content *"}),o.jsx(Ps,{id:"content",placeholder:"Write your article content here...",value:c.content,onChange:x=>u(j=>({...j,content:x.target.value})),rows:12,required:!0})]})]})]}),o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Tags"}),o.jsx(Tt,{children:"Add relevant tags to help categorize this article"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Se,{placeholder:"Add a tag...",value:h,onChange:x=>f(x.target.value),onKeyPress:_}),o.jsxs(te,{type:"button",onClick:w,variant:"outline",children:[o.jsx(ud,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(x=>o.jsxs(Pt,{variant:"secondary",className:"flex items-center gap-1",children:[x,o.jsx("button",{type:"button",onClick:()=>b(x),className:"ml-1 hover:text-destructive",children:o.jsx(zc,{className:"h-3 w-3"})})]},x))})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Media"}),o.jsx(Tt,{children:"Add images and videos to your article"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"imageUrl",children:"Featured Image URL"}),o.jsx(Se,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:x=>u(j=>({...j,imageUrl:x.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"videoUrl",children:"Video URL"}),o.jsx(Se,{id:"videoUrl",placeholder:"https://youtube.com/watch?v=...",value:c.videoUrl,onChange:x=>u(j=>({...j,videoUrl:x.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"batchId",children:"Related Batch"}),o.jsxs("select",{id:"batchId",value:c.batchId,onChange:x=>u(j=>({...j,batchId:x.target.value})),className:"w-full border rounded px-3 py-2",children:[o.jsx("option",{value:"",children:"-- Not related to a specific batch --"}),((s&&s.length>0?s:r)||[]).map(x=>o.jsx("option",{value:x.id,children:x.batchName||x.id},x.id))]})]}),c.imageUrl&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{children:"Preview"}),o.jsx("img",{src:c.imageUrl,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border",onError:x=>{x.currentTarget.style.display="none"}})]})]})]}),o.jsxs(pe,{children:[o.jsx(We,{children:o.jsx(Ge,{children:"Actions"})}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs(te,{type:"submit",className:"w-full",disabled:g,children:[o.jsx(Zi,{className:"h-4 w-4 mr-2"}),g?"Saving...":t?"Update Article":"Create Article"]}),o.jsxs(te,{type:"button",variant:"outline",className:"w-full",onClick:e,children:[o.jsx(ss,{className:"h-4 w-4 mr-2"}),"Go back"]})]})]})]})]})})]})}function hP(t){const[e,n]=E.useState([]),[r,s]=E.useState(!0),[a,c]=E.useState(null);E.useEffect(()=>{let w;w=an(ze(Ne,"notifications"),ya("createdAt","desc"));const b=gi(w,_=>{const x=[];_.forEach(j=>{var I;const C=j.data();x.push({id:j.id,userId:C.userId||"",title:C.title||"",message:C.message||"",type:C.type||"system",relatedId:C.relatedId||void 0,read:C.read||!1,createdAt:((I=C.createdAt)==null?void 0:I.toDate())||new Date,batchId:C.batchId||void 0})}),n(x),s(!1)},_=>{console.error("Error fetching notifications:",_),c(_.message||"Failed to fetch notifications"),s(!1)});return()=>b()},[t]);const u=async w=>{try{const b={...w,createdAt:w.createdAt instanceof Date?ut.fromDate(w.createdAt):$p()};Object.keys(b).forEach(x=>{b[x]===void 0&&delete b[x]});const _=await pn(ze(Ne,"notifications"),b);return console.log(" Notification created successfully with ID:",_.id),_.id}catch(b){throw console.error(" Error creating notification:",b),new Error(`Failed to create notification: ${b.message||"Check Firebase permissions"}`)}},h=async(w,b)=>{try{const _={...b};b.createdAt instanceof Date&&(_.createdAt=ut.fromDate(b.createdAt)),Object.keys(_).forEach(x=>{_[x]===void 0&&delete _[x]}),await Jt(St(Ne,"notifications",w),_)}catch(_){throw console.error("Error updating notification:",_),new Error(`Failed to update notification: ${_.message||"Check Firebase permissions"}`)}},f=async w=>{try{await Jt(St(Ne,"notifications",w),{read:!0})}catch(b){throw console.error("Error marking notification as read:",b),new Error(`Failed to mark notification as read: ${b.message||"Check Firebase permissions"}`)}},g=async w=>{try{const b=w?an(ze(Ne,"notifications"),Zo("userId","==",w),Zo("read","==",!1)):an(ze(Ne,"notifications"),Zo("read","==",!1)),x=(await dt(b)).docs.map(j=>Jt(j.ref,{read:!0}));await Promise.all(x)}catch(b){throw console.error("Error marking all notifications as read:",b),new Error(`Failed to mark all notifications as read: ${b.message||"Check Firebase permissions"}`)}},y=async w=>{try{await lr(St(Ne,"notifications",w))}catch(b){throw console.error("Error deleting notification:",b),new Error(`Failed to delete notification: ${b.message||"Check Firebase permissions"}`)}},v=e.filter(w=>!w.read).length;return{notifications:e,loading:r,error:a,createNotification:u,updateNotification:h,markAsRead:f,markAllAsRead:g,deleteNotification:y,unreadCount:v}}const B8=[{id:"user_1",displayName:"Ali Ahmed",email:"ali.ahmed@example.com",role:"student",photoURL:"",createdAt:new Date},{id:"user_2",displayName:"Mona Hassan",email:"mona.hassan@example.com",role:"staff",photoURL:"",createdAt:new Date(Date.now()-1e3*60*60*24)}];function Vm(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1),{years:h}=va();return E.useEffect(()=>{const y=async()=>{try{const w=an(ze(Ne,"users"));await dt(w);const b=an(ze(Ne,"users"),ya("createdAt","desc")),_=gi(b,x=>{const j=[];x.forEach(I=>{var R,D;const M=I.data(),U=M.yearId||M.year||M.year_id||M.yearId||null;let z=U,P="-";if(typeof U=="string"&&U.includes(":")){const[O,k]=U.split(":",2);z=O||null,k&&k.trim()&&(P=k.trim())}if(z&&P==="-"){const O=h.find(k=>k.id===z);O&&(O.batchName?P=O.batchName:P=`Year ${{1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[O.yearNumber]||String(O.yearNumber)}`)}j.push({id:I.id,displayName:M.displayName||M.name||"",email:M.email||"",role:M.role||"student",photoURL:M.photoURL||M.avatar||"",createdAt:((D=(R=M.createdAt)==null?void 0:R.toDate)==null?void 0:D.call(R))||void 0,yearId:z||void 0,yearLabel:P})}),e(j);const C=Array.from(new Set(j.map(I=>I.yearId).filter(Boolean).filter(I=>!h.find(M=>M.id===I))));C.length>0&&Promise.all(C.map(async I=>{try{const U=(await dt(Cr(Ne,"years"))).docs.find(D=>D.id===I);if(!U)return null;const z=U.data(),P=z.yearNumber||z.order||(()=>{const D=(z.name||"").match(/\d+/);return D?parseInt(D[0]):void 0})(),R=z.batchName||(P?`Year ${P}`:void 0)||void 0;return{id:I,label:R}}catch{return null}})).then(I=>{const M={};I.forEach(U=>{U&&U.id&&U.label&&(M[U.id]=U.label)}),Object.keys(M).length>0&&e(U=>U.map(z=>z.yearId&&M[z.yearId]?{...z,yearLabel:M[z.yearId]}:z))}),r(!1)},x=>{console.error("Failed to listen to users:",x),v()});return()=>_()}catch(w){console.error("Failed to load users, entering offline mode:",w),v()}},v=()=>{u(!0),e(B8),r(!1),a(null)};y()},[]),E.useEffect(()=>{!h||h.length===0||e(y=>y.map(v=>{if(!v)return v;const w=v.yearId||null;if(!w)return v;const b=h.find(C=>C.id===w);if(!b)return v;const x={1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[b.yearNumber]||String(b.yearNumber),j=b.batchName?b.batchName:`Year ${x}`;return{...v,yearLabel:j}}))},[h]),{users:t,loading:n,error:s,updateUser:async(y,v)=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(w=>w.map(b=>b.id===y?{...b,...v}:b));return}try{await Jt(St(Ne,"users",y),v)}catch(w){console.error("Failed to update user:",w),e(b=>b.map(_=>_.id===y?{..._,...v}:_))}},deleteUser:async y=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(v=>v.filter(w=>w.id!==y));return}try{await lr(St(Ne,"users",y))}catch(v){console.error("Failed to delete user:",v),e(w=>w.filter(b=>b.id!==y))}},isOfflineMode:c}}function q8(){var O;const[t,e]=E.useState(""),[n,r]=E.useState(null),[s,a]=E.useState(!1),[c,u]=E.useState("all"),[h,f]=E.useState(null),{news:g,loading:y,error:v,createNews:w,updateNews:b,deleteNews:_}=o0(),{notifications:x}=hP(),{users:j}=Vm(),C=g.filter(k=>k.title.toLowerCase().includes(t.toLowerCase())||k.tags.some(V=>V.toLowerCase().includes(t.toLowerCase()))),I=k=>k?x.filter(V=>V.relatedId===k):[],M=E.useMemo(()=>C.map(k=>({...k,notificationCount:I(k.id).length,notifications:I(k.id)})),[C,x]),U=k=>{const V=j.find(F=>F.id===k);return(V==null?void 0:V.displayName)||(V==null?void 0:V.email)||k},z=k=>{f(k)},P=k=>{r(k),a(!0)},R=async k=>{if(window.confirm("Are you sure you want to delete this article?"))try{await _(k)}catch(V){console.error("Error deleting news:",V),alert("Failed to delete article. Please try again.")}},D=()=>{r(null),a(!0)};return s?o.jsx(z8,{news:n,onClose:()=>{a(!1),r(null)},onSave:async k=>{try{n?await b(n.id,k):await w(k),a(!1),r(null)}catch(V){console.error("Error saving news:",V),alert("Failed to save article. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"News Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Create and manage news articles for medical students"})]}),o.jsxs(te,{onClick:D,className:"flex items-center gap-2",children:[o.jsx(Zt,{className:"h-4 w-4"}),"Create Article"]})]}),o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:o.jsxs("div",{className:"relative flex-1",children:[o.jsx(ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Se,{placeholder:"Search articles by title or tags...",value:t,onChange:k=>e(k.target.value),className:"pl-10"})]})})})}),y&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Ji,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading news articles..."})]})}),v&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading news"}),o.jsx("p",{className:"text-muted-foreground",children:v})]})}),!y&&!v&&o.jsx("div",{className:"space-y-4",children:M.map(k=>o.jsx(pe,{className:"hover:shadow-md transition-shadow",children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"flex gap-4",children:[k.imageUrl&&o.jsx("img",{src:k.imageUrl,alt:k.title,className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:k.title}),k.isPinned&&o.jsx(LS,{className:"h-4 w-4 text-yellow-500"})]}),o.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:k.content}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:k.tags.map(V=>o.jsxs(Pt,{variant:"secondary",className:"text-xs",children:[o.jsx(ud,{className:"h-3 w-3 mr-1"}),V]},V))}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(rs,{className:"h-3 w-3"}),k.authorName]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(xc,{className:"h-3 w-3"}),k.createdAt.toLocaleDateString()]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(tO,{className:"h-3 w-3"}),k.viewsCount," views"]}),k.notificationCount>0&&o.jsxs("button",{onClick:()=>z(k.id),className:"flex items-center gap-1 hover:text-primary transition-colors cursor-pointer",children:[o.jsx(el,{className:"h-3 w-3"}),k.notificationCount," notification",k.notificationCount>1?"s":""]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[k.notificationCount>0&&o.jsxs(te,{variant:"ghost",size:"icon",onClick:()=>z(k.id),className:"relative",title:`View ${k.notificationCount} notification${k.notificationCount>1?"s":""}`,children:[o.jsx(kS,{className:"h-4 w-4"}),o.jsx(Pt,{variant:"default",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:k.notificationCount})]}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>P(k),children:o.jsx(ns,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>R(k.id),className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})})]})})},k.id))}),!y&&!v&&C.length===0&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(fp,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"No articles match your search criteria.":"Start by creating your first news article."}),o.jsxs(te,{onClick:D,children:[o.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Create Article"]})]})}),o.jsx(nP,{open:h!==null,onOpenChange:k=>!k&&f(null),children:o.jsxs(f0,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[o.jsxs(p0,{children:[o.jsxs(m0,{className:"flex items-center gap-2",children:[o.jsx(el,{className:"h-5 w-5"}),"Notifications for News Article"]}),o.jsx(g0,{children:h&&((O=g.find(k=>k.id===h))==null?void 0:O.title)})]}),h&&o.jsx("div",{className:"space-y-3 mt-4",children:I(h).length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(el,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No notifications found for this article"})]}):I(h).map(k=>o.jsx(pe,{className:k.read?"opacity-75":"border-primary/50",children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[!k.read&&o.jsx(Pt,{variant:"default",className:"h-2 w-2 p-0 rounded-full"}),o.jsx("h3",{className:"font-semibold",children:k.title}),o.jsx(Pt,{variant:"outline",children:k.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:k.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(rs,{className:"h-3 w-3"}),U(k.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(xc,{className:"h-3 w-3"}),k.createdAt.toLocaleDateString()]}),k.batchId&&o.jsxs(Pt,{variant:"secondary",className:"text-xs",children:["Batch: ",k.batchId.slice(0,8),"..."]})]})]}),!k.read&&o.jsx(Pt,{variant:"default",className:"text-xs",children:"Unread"})]})})},k.id))})]})})]})}function v0({quiz:t,onClose:e,onSave:n}){const[r,s]=E.useState({title:"",description:"",timeLimit:30,passingScore:70,questions:[],type:"multiple_choice"}),[a,c]=E.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",imageUrl:"",weight:1}),[u,h]=E.useState(!1);E.useEffect(()=>{t&&s({title:t.title||"",description:t.description||"",timeLimit:t.timeLimit||30,passingScore:t.passingScore||70,questions:t.questions||[],type:t.type||"multiple_choice"})},[t]);const f=async _=>{_.preventDefault(),h(!0);try{const x={...r,...t?{}:{createdAt:new Date,createdBy:"Current User"}};x.type||(x.type="multiple_choice"),n(x)}catch(x){console.error("Error saving quiz:",x)}finally{h(!1)}},g=()=>{var j;const _=r.type==="flashcard",x=a.question.trim();if(_){const C=a.options&&String(a.options[0]).trim()||a.answer;if(x&&C){const I={...a,options:[String(((j=a.options)==null?void 0:j[0])||a.answer||"").trim()],correctAnswer:0};s(M=>({...M,questions:[...M.questions,I]})),c({question:"",options:[""],correctAnswer:0,explanation:"",imageUrl:"",weight:1})}return}x&&Array.isArray(a.options)&&a.options.filter(C=>String(C).trim()).length>=2&&typeof a.correctAnswer=="number"&&String(a.options[a.correctAnswer]||"").trim()&&(s(C=>({...C,questions:[...C.questions,{...a}]})),c({question:"",options:["","","",""],correctAnswer:0,explanation:"",imageUrl:"",weight:1}))},y=_=>{s(x=>({...x,questions:x.questions.filter((j,C)=>C!==_)}))},v=(_,x)=>{const j=[...a.options||[]];j[_]=x,c(C=>({...C,options:j}))},w=()=>{c(_=>({..._,options:[..._.options||[],""]}))},b=_=>{c(x=>{const j=[...x.options||[]];j.splice(_,1);let C=x.correctAnswer;return C>=j.length&&(C=Math.max(0,j.length-1)),{...x,options:j,correctAnswer:C}})};return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:e,children:[o.jsx(ss,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Quiz":"Create Quiz"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update the quiz details and questions":"Create a new quiz for students"})]})]})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsxs(Ge,{className:"flex items-center gap-2",children:[o.jsx(qi,{className:"h-5 w-5"}),"Quiz Information"]}),o.jsx(Tt,{children:"Basic information about the quiz"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"title",children:"Quiz Title *"}),o.jsx(Se,{id:"title",placeholder:"Enter quiz title...",value:r.title,onChange:_=>s(x=>({...x,title:_.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"description",children:"Description"}),o.jsx(Ps,{id:"description",placeholder:"Describe what this quiz covers...",value:r.description,onChange:_=>s(x=>({...x,description:_.target.value})),rows:3})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Ae,{htmlFor:"timeLimit",className:"flex items-center gap-2",children:[o.jsx(dp,{className:"h-4 w-4"}),"Time Limit (minutes)"]}),o.jsx(Se,{id:"timeLimit",type:"number",min:"1",value:r.timeLimit,onChange:_=>s(x=>({...x,timeLimit:parseInt(_.target.value)||30}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Ae,{htmlFor:"passingScore",className:"flex items-center gap-2",children:[o.jsx(cO,{className:"h-4 w-4"}),"Passing Score (%)"]}),o.jsx(Se,{id:"passingScore",type:"number",min:"0",max:"100",value:r.passingScore,onChange:_=>s(x=>({...x,passingScore:parseInt(_.target.value)||70}))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"quizType",children:"Quiz Type"}),o.jsxs("select",{id:"quizType",value:r.type||"multiple_choice",onChange:_=>s(x=>({...x,type:_.target.value})),className:"w-full border rounded px-3 py-2",children:[o.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),o.jsx("option",{value:"flashcard",children:"Flashcard"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how this quiz will be presented to students."})]})]})]}),o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Add Question"}),o.jsx(Tt,{children:"Create multiple choice questions for the quiz"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"question",children:"Question"}),o.jsx(Ps,{id:"question",placeholder:"Enter your question...",value:a.question,onChange:_=>c(x=>({...x,question:_.target.value})),rows:3})]}),o.jsx("div",{className:"space-y-2",children:r.type==="flashcard"?o.jsxs(o.Fragment,{children:[o.jsx(Ae,{children:"Correct Answer"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Se,{placeholder:"Correct answer",value:a.options[0]??a.answer??"",onChange:_=>{c(x=>({...x,options:[_.target.value]}))}}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"For flashcards enter the correct answer (single). Use [[answer]] in the question to create blanks."})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ae,{children:"Answer Options"}),o.jsxs("div",{className:"space-y-2",children:[a.options.map((_,x)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx(Ae,{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-sm",children:String.fromCharCode(65+x)}),o.jsx(Se,{placeholder:`Option ${String.fromCharCode(65+x)}`,value:_,onChange:j=>v(x,j.target.value),className:a.correctAnswer===x?"ring-2 ring-green-500":""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{type:"button",variant:a.correctAnswer===x?"default":"outline",size:"sm",onClick:()=>c(j=>({...j,correctAnswer:x})),children:a.correctAnswer===x?"Correct":"Mark Correct"}),a.options.length>2&&o.jsx(te,{type:"button",variant:"ghost",size:"sm",onClick:()=>b(x),children:"Remove"})]})]},x)),o.jsx("div",{children:o.jsx(te,{type:"button",variant:"outline",onClick:w,className:"mt-2",children:"Add Option"})})]})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"explanation",children:"Explanation (Optional)"}),o.jsx(Ps,{id:"explanation",placeholder:"Explain why this is the correct answer...",value:a.explanation||"",onChange:_=>c(x=>({...x,explanation:_.target.value})),rows:3}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"This explanation will be shown to students after they answer the question"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),o.jsx(Se,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:_=>c(x=>({...x,imageUrl:_.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"weight",children:"Question Weight"}),o.jsx(Se,{id:"weight",type:"number",min:1,value:a.weight,onChange:_=>c(x=>({...x,weight:parseFloat(_.target.value)||1}))})]}),o.jsxs(te,{type:"button",onClick:g,className:"w-full",children:[o.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),r.questions.length>0&&o.jsxs(pe,{children:[o.jsx(We,{children:o.jsxs(Ge,{children:["Quiz Questions (",r.questions.length,")"]})}),o.jsx(me,{children:o.jsx("div",{className:"space-y-4",children:r.questions.map((_,x)=>o.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"font-medium",children:[x+1,". ",_.question]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ae,{className:"text-sm",children:"Weight"}),o.jsx(Se,{type:"number",min:1,value:_.weight||1,onChange:j=>{const C=parseFloat(j.target.value)||1;s(I=>({...I,questions:I.questions.map((M,U)=>U===x?{...M,weight:C}:M)}))},className:"w-20 text-sm"})]})]}),o.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:_.options.map((j,C)=>o.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${_.correctAnswer===C?"bg-green-100 text-green-800":"bg-secondary/50"}`,children:[o.jsx("span",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+C)}),o.jsx("span",{className:"text-sm",children:j}),_.correctAnswer===C&&o.jsx(Pt,{variant:"outline",className:"ml-auto text-xs bg-green-200",children:"Correct"})]},C))}),_.explanation&&o.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:o.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[o.jsx("span",{className:"font-semibold",children:"Explanation:"})," ",_.explanation]})})]}),o.jsx("div",{className:"flex flex-col items-end gap-2",children:o.jsx(te,{type:"button",variant:"ghost",size:"icon",onClick:()=>y(x),className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})})]})},x))})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:u||r.questions.length===0,children:[o.jsx(Zi,{className:"h-4 w-4 mr-2"}),u?"Saving...":t?"Update Quiz":"Create Quiz"]})]})]})]})}function fP({year:t,yearType:e,onClose:n,onSave:r}){const[s,a]=E.useState({name:"",imageUrl:"",hours:3}),[c,u]=E.useState(!1),h=async f=>{f.preventDefault(),u(!0);try{const g={name:s.name,imageUrl:s.imageUrl||"",hours:s.hours||3,createdAt:new Date};r(g)}catch(g){console.error("Error saving subject:",g)}finally{u(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:n,children:[o.jsx(ss,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Add Subject to Year ",t]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e==="basic"?o.jsx(ld,{className:"h-4 w-4 text-blue-600"}):o.jsx(cd,{className:"h-4 w-4 text-red-600"}),o.jsxs("p",{className:"text-muted-foreground",children:["Adding to ",e==="basic"?"Basic":"Clinical"," Years  Year ",t]})]})]})]})}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsx(pe,{className:`border-l-4 ${e==="basic"?"border-l-blue-500 bg-blue-50/50":"border-l-red-500 bg-red-50/50"}`,children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[e==="basic"?o.jsx(ld,{className:"h-8 w-8 text-blue-600"}):o.jsx(cd,{className:"h-8 w-8 text-red-600"}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold text-lg",children:["Year ",t]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e==="basic"?"Basic Years":"Clinical Years"})]})]})})}),o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsxs(Ge,{className:"flex items-center gap-2",children:[e==="basic"?o.jsx(ld,{className:"h-5 w-5 text-blue-600"}):o.jsx(cd,{className:"h-5 w-5 text-red-600"}),"Subject Information"]}),o.jsx(Tt,{children:"Basic information about the subject"})]}),o.jsx(me,{className:"space-y-4",children:o.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"year",children:"Year"}),o.jsx(Se,{id:"year",value:`Year ${t} (${e==="basic"?"Basic":"Clinical"})`,disabled:!0,className:"bg-muted"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"name",children:"Subject Name *"}),o.jsx(Se,{id:"name",placeholder:"e.g., Anatomy & Physiology",value:s.name,onChange:f=>a(g=>({...g,name:f.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"hours",children:"Credit Hours"}),o.jsx(Se,{id:"hours",type:"number",placeholder:"3",value:s.hours,onChange:f=>a(g=>({...g,hours:parseInt(f.target.value)||3})),min:"1",max:"12"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),o.jsx(Se,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:s.imageUrl,onChange:f=>a(g=>({...g,imageUrl:f.target.value}))})]})]})})]}),s.name&&o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Preview"}),o.jsxs(Tt,{children:["How the subject will appear in Year ",t]})]}),o.jsx(me,{children:o.jsxs("div",{className:"p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.imageUrl?o.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-8 h-8 object-cover rounded",onError:f=>{f.currentTarget.style.display="none"}}):o.jsx(Ss,{className:"h-5 w-5 text-primary"}),o.jsx("h3",{className:"font-semibold text-lg",children:s.name})]}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Year ",t,"  ",e," years"]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:c,children:[o.jsx(Zi,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Subject"]})]})]})]})}function x0({file:t,lectureId:e,onClose:n,onSave:r}){const[s,a]=E.useState({title:(t==null?void 0:t.title)||"",description:(t==null?void 0:t.description)||"",fileUrl:(t==null?void 0:t.fileUrl)||(t==null?void 0:t.url)||"",imageUrl:(t==null?void 0:t.imageUrl)||(t==null?void 0:t.thumbnailUrl)||""}),[c,u]=E.useState(!1),h=async f=>{f.preventDefault(),u(!0);try{const g={...s,id:`file_${Date.now()}`,lectureId:e,uploadedAt:new Date,uploadedBy:"Current User"};r(g)}catch(g){console.error("Error saving file:",g)}finally{u(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:n,children:[o.jsx(ss,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Add File"}),o.jsx("p",{className:"text-muted-foreground",children:"Add a file resource to the lecture"})]})]})}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsxs(Ge,{className:"flex items-center gap-2",children:[o.jsx(Is,{className:"h-5 w-5 text-blue-600"}),"File Information"]}),o.jsx(Tt,{children:"Upload or link to educational files"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"title",children:"File Title *"}),o.jsx(Se,{id:"title",placeholder:"e.g., Anatomy Reference Guide",value:s.title,onChange:f=>a(g=>({...g,title:f.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"description",children:"Description"}),o.jsx(Ps,{id:"description",placeholder:"Describe the file content...",value:s.description,onChange:f=>a(g=>({...g,description:f.target.value})),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"fileUrl",children:"File URL *"}),o.jsx(Se,{id:"fileUrl",placeholder:"https://example.com/file.pdf or /uploads/file.pdf",value:s.fileUrl,onChange:f=>a(g=>({...g,fileUrl:f.target.value})),required:!0}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload to Firebase Storage or use external links"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"imageUrl",children:"Preview Image URL"}),o.jsx(Se,{id:"imageUrl",placeholder:"https://example.com/preview.jpg",value:s.imageUrl,onChange:f=>a(g=>({...g,imageUrl:f.target.value}))}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: Add a preview/thumbnail image for the file"})]})]})]}),s.title&&o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Preview"}),o.jsx(Tt,{children:"How the file will appear in the lecture"})]}),o.jsx(me,{children:o.jsx("div",{className:"p-4 border rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-3",children:[s.imageUrl?o.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-16 h-12 object-cover rounded"}):o.jsx("div",{className:"w-16 h-12 bg-blue-100 rounded flex items-center justify-center",children:o.jsx(Is,{className:"h-8 w-8 text-blue-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium",children:s.title}),s.description&&o.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:c,children:[o.jsx(Zi,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add File"]})]})]})]})}function w0({video:t,lectureId:e,onClose:n,onSave:r}){const[s,a]=E.useState({title:(t==null?void 0:t.title)||"",description:(t==null?void 0:t.description)||"",url:(t==null?void 0:t.url)||(t==null?void 0:t.youtubeUrl)||"",duration:(t==null?void 0:t.duration)||"",thumbnailUrl:(t==null?void 0:t.thumbnailUrl)||"",platform:(t==null?void 0:t.platform)||"YouTube"}),[c,u]=E.useState(!1),h=async v=>{v.preventDefault(),u(!0);try{const w={...s,id:`video_${Date.now()}`,lectureId:e,uploadedAt:new Date,uploadedBy:"Current User"};r(w)}catch(w){console.error("Error saving video:",w)}finally{u(!1)}},f=v=>{const w=v.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return w?w[1]:null},g=v=>{const w=f(v);return w?`https://img.youtube.com/vi/${w}/maxresdefault.jpg`:""},y=v=>{a(w=>({...w,url:v,thumbnailUrl:g(v)}))};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:n,children:[o.jsx(ss,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Add Video"}),o.jsx("p",{className:"text-muted-foreground",children:"Add a video resource to the lecture"})]})]})}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsxs(Ge,{className:"flex items-center gap-2",children:[o.jsx(ii,{className:"h-5 w-5 text-green-600"}),"Video Information"]}),o.jsx(Tt,{children:"Add YouTube videos or other video links"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"title",children:"Video Title *"}),o.jsx(Se,{id:"title",placeholder:"e.g., Introduction to Human Anatomy",value:s.title,onChange:v=>a(w=>({...w,title:v.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"description",children:"Description"}),o.jsx(Ps,{id:"description",placeholder:"Describe the video content...",value:s.description,onChange:v=>a(w=>({...w,description:v.target.value})),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"url",children:"Video URL *"}),o.jsx(Se,{id:"url",placeholder:"https://youtube.com/watch?v=... or https://vimeo.com/...",value:s.url,onChange:v=>y(v.target.value),required:!0}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports YouTube, Vimeo, and direct video links"})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"duration",children:"Duration"}),o.jsx(Se,{id:"duration",placeholder:"e.g., 45:30",value:s.duration,onChange:v=>a(w=>({...w,duration:v.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"platform",children:"Platform"}),o.jsx(Se,{id:"platform",value:s.platform,onChange:v=>a(w=>({...w,platform:v.target.value})),disabled:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"thumbnailUrl",children:"Thumbnail URL"}),o.jsx(Se,{id:"thumbnailUrl",placeholder:"Auto-generated for YouTube videos",value:s.thumbnailUrl,onChange:v=>a(w=>({...w,thumbnailUrl:v.target.value}))})]})]})]}),s.title&&o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Preview"}),o.jsx(Tt,{children:"How the video will appear in the lecture"})]}),o.jsx(me,{children:o.jsx("div",{className:"p-4 border rounded-lg",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"relative",children:[s.thumbnailUrl?o.jsx("img",{src:s.thumbnailUrl,alt:s.title,className:"w-24 h-16 object-cover rounded"}):o.jsx("div",{className:"w-24 h-16 bg-gray-200 rounded flex items-center justify-center",children:o.jsx(yv,{className:"h-6 w-6 text-gray-400"})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(ii,{className:"h-8 w-8 text-white opacity-80"})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium",children:s.title}),s.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.duration&&o.jsxs(Pt,{variant:"secondary",className:"text-xs",children:[o.jsx(dp,{className:"h-3 w-3 mr-1"}),s.duration]}),o.jsxs(Pt,{variant:"outline",className:"text-xs",children:[o.jsx(sO,{className:"h-3 w-3 mr-1"}),s.platform]})]})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:c,children:[o.jsx(Zi,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Video"]})]})]})]})}function Um({lecture:t,subjectId:e,subjectName:n,yearType:r,onClose:s,onSave:a}){const[c,u]=E.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",order:(t==null?void 0:t.order)||1,imageUrl:(t==null?void 0:t.imageUrl)||""}),[h,f]=E.useState(!1),g=async y=>{y.preventDefault(),f(!0);try{const v={...c,subjectId:e,createdAt:new Date,uploadedBy:"Current User"};a(v)}catch(v){console.error("Error saving lecture:",v)}finally{f(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:s,children:[o.jsx(ss,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Add Lecture"}),o.jsxs("p",{className:"text-muted-foreground",children:["Add a new lecture to ",n]})]})]})}),o.jsxs("form",{onSubmit:g,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsxs(Ge,{className:"flex items-center gap-2",children:[r==="basic"?o.jsx(ld,{className:"h-5 w-5 text-blue-600"}):o.jsx(cd,{className:"h-5 w-5 text-red-600"}),"Lecture Information"]}),o.jsx(Tt,{children:"Basic information about the lecture"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"name",children:"Lecture Name *"}),o.jsx(Se,{id:"name",placeholder:"e.g., Introduction to Cell Biology",value:c.name,onChange:y=>u(v=>({...v,name:y.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"description",children:"Description"}),o.jsx(Ps,{id:"description",placeholder:"Describe what this lecture covers...",value:c.description,onChange:y=>u(v=>({...v,description:y.target.value})),rows:4})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"order",children:"Order"}),o.jsx(Se,{id:"order",type:"number",min:"1",value:c.order,onChange:y=>u(v=>({...v,order:parseInt(y.target.value)||1}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),o.jsx(Se,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:y=>u(v=>({...v,imageUrl:y.target.value}))})]})]})]})]}),c.name&&o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Preview"}),o.jsxs(Tt,{children:["How the lecture will appear in ",n]})]}),o.jsx(me,{children:o.jsx("div",{className:"p-4 border rounded-lg bg-secondary/20",children:o.jsxs("div",{className:"flex items-start gap-3",children:[c.imageUrl?o.jsx("img",{src:c.imageUrl,alt:c.name,className:"w-16 h-16 object-cover rounded",onError:y=>{y.currentTarget.style.display="none"}}):o.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:o.jsx(Ss,{className:"h-6 w-6 text-gray-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:c.name}),c.description&&o.jsx("p",{className:"text-sm text-muted-foreground",children:c.description}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Lecture ",c.order,"  ",n]})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:h,children:[o.jsx(Zi,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add Lecture"]})]})]})]})}async function Tr(t){let e="dflp2vxn2",n="Med_just";const r="".replace(/\/$/,"");try{const C=await fetch(`${r}/api/cloudinary/config`);if(C.ok)try{const I=await C.json();e=I.cloudName||e,n=I.uploadPreset||I.upload_preset||n}catch{const I=C.headers.get("x-cloudinary-cloudname"),M=C.headers.get("x-cloudinary-upload-preset");I&&(e=e||I),M&&(n=n||M)}}catch{}if(!e)try{const C=localStorage.getItem("cloudinary.cloudName"),I=localStorage.getItem("cloudinary.uploadPreset");C&&(e=C,n=n||I||n)}catch{}if(!e)throw new Error("Cloudinary cloud name is not configured. Set VITE_CLOUDINARY_CLOUD_NAME in your environment or provide server config.");const s=`https://api.cloudinary.com/v1_1/${e}/upload`;try{const C=await R1(t);if(C&&typeof C=="string"&&C.startsWith("http"))return C}catch(C){const I=String((C==null?void 0:C.message)||C||"");console.warn("Server upload failed, falling back to client upload:",I)}async function a(C){if(C.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.");try{const I=C.clone();try{return{json:await I.json(),text:null}}catch{}}catch{if(C.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}try{const I=await C.text();try{return{json:JSON.parse(I),text:I}}catch{return{json:null,text:I}}}catch(I){throw new Error("Could not read response body: "+String(I))}}async function c(C,I){const M=async(z,P)=>{const R=await fetch(z,P),D=await a(R).catch(O=>{throw O});return{res:R,body:D}},U=typeof C=="string"?C:C.url;try{return await M(U,I)}catch(z){const P=String((z==null?void 0:z.message)||z||"").toLowerCase();if(P.includes("response body already read")||P.includes("body already read")){const R=U+(U.includes("?")?`&_retry=${Date.now()}`:`?_retry=${Date.now()}`);try{return await M(R,I)}catch{}}if(P.includes("failed to fetch")||P.includes("networkerror")||P.includes("network request failed")||P.includes("script error")||P.includes("response body already read")||P.includes("body already read"))try{return await(async()=>await new Promise((R,D)=>{const O=new XMLHttpRequest;let k=I&&I.method||"GET",V=!1;try{if(O.open(k,U,!0),I&&I.headers){const F=I.headers;Object.keys(F).forEach(H=>{try{O.setRequestHeader(H,F[H])}catch{}})}if(O.onreadystatechange=()=>{if(O.readyState!==4)return;const F=O.status||0,H={};(O.getAllResponseHeaders()||"").split(`\r
`).forEach(ne=>{const B=ne.indexOf(":");if(B>0){const ee=ne.substring(0,B).trim().toLowerCase(),ue=ne.substring(B+1).trim();H[ee]=ue}});const K={ok:F>=200&&F<400,status:F,headers:{get:ne=>H[ne.toLowerCase()]||null}},Z=O.responseText;let W=null;try{W=Z?JSON.parse(Z):null}catch{W=null}R({res:K,body:{json:W,text:Z}})},O.onerror=()=>D(new Error("XHR network error")),O.ontimeout=()=>D(new Error("XHR timeout")),I&&I.body)try{if(I.body instanceof FormData)V=!0,O.send(I.body);else if(typeof I.body=="string")O.send(I.body);else try{O.send(JSON.stringify(I.body))}catch{O.send(String(I.body))}}catch(F){D(F)}else O.send()}catch(F){D(F)}}))()}catch{}throw z}}if(n){const C=new FormData;C.append("file",t),C.append("upload_preset",n);const{res:I,body:M}=await c(s,{method:"POST",body:C});if(!I.ok){const U=M!=null&&M.json?JSON.stringify(M.json):(M==null?void 0:M.text)||"";throw new Error(`Cloudinary upload failed: ${I.status} ${U}`)}if(M.json&&(M.json.secure_url||M.json.url))return M.json.secure_url||M.json.url;if(M.text&&typeof M.text=="string"&&M.text.startsWith("http"))return M.text;throw new Error("Cloudinary upload returned unexpected response.")}const u="686641252611351";let h,f;try{const C=await c(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})});h=C.res,f=C.body}catch(C){const I=String((C==null?void 0:C.message)||C||"");if(I.toLowerCase().includes("response body already read")||I.toLowerCase().includes("body already read")){try{const M=await fetch(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})}),U=M.headers.get("x-cloudinary-signature"),z=M.headers.get("x-cloudinary-timestamp"),P=M.headers.get("x-cloudinary-apikey"),R=M.headers.get("x-cloudinary-cloudname"),D=M.headers.get("x-cloudinary-upload-preset");if(U&&z){const O=P||u||null,k=U,V=Number(z);R&&(e=e||R);const F=new FormData;F.append("file",t),O&&F.append("api_key",O),F.append("timestamp",String(V)),F.append("signature",k);const{res:H,body:Q}=await c(s,{method:"POST",body:F});if(!H.ok){const K=Q!=null&&Q.json?JSON.stringify(Q.json):(Q==null?void 0:Q.text)||"",Z=(K||"").toLowerCase();if(Z.includes("missing required parameter - api_key")||Z.includes("missing required parameter - api key")||Z.includes("missing required parameter 'api_key'")){const W=u||(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})();if(W){const Y=new FormData;Y.append("file",t),Y.append("api_key",W),Y.append("timestamp",String(V)),Y.append("signature",k);const{res:ne,body:B}=await c(s,{method:"POST",body:Y});if(!ne.ok){const ee=B!=null&&B.json?JSON.stringify(B.json):(B==null?void 0:B.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${ne.status} ${ee}`)}if(B.json&&(B.json.secure_url||B.json.url))return B.json.secure_url||B.json.url;if(B.text&&typeof B.text=="string"&&B.text.startsWith("http"))return B.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}if(n){const Y=new FormData;Y.append("file",t),Y.append("upload_preset",n);const ne=await fetch(s,{method:"POST",body:Y});if(!ne.ok){const ue=await ne.text().catch(()=>"");throw new Error(`Cloudinary unsigned fallback failed: ${ne.status} ${ue}`)}const B=await ne.json().catch(()=>null);if(B&&(B.secure_url||B.url))return B.secure_url||B.url;const ee=await ne.text().catch(()=>"");if(ee&&ee.startsWith("http"))return ee;throw new Error("Cloudinary unsigned fallback returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${H.status} ${K}`)}if(Q.json&&(Q.json.secure_url||Q.json.url))return Q.json.secure_url||Q.json.url;if(Q.text&&typeof Q.text=="string"&&Q.text.startsWith("http"))return Q.text;throw new Error("Cloudinary signed upload returned unexpected response.")}if(D){const O=new FormData;O.append("file",t),O.append("upload_preset",D);const k=await fetch(s,{method:"POST",body:O});if(!k.ok){const H=await k.text().catch(()=>"");throw new Error(`Cloudinary upload fallback failed: ${k.status} ${H}`)}const V=await k.json().catch(()=>null);if(V&&(V.secure_url||V.url))return V.secure_url||V.url;const F=await k.text().catch(()=>"");if(F&&F.startsWith("http"))return F;throw new Error("Cloudinary fallback upload returned unexpected response.")}}catch{}try{const M=await R1(t);if(M&&typeof M=="string"&&M.startsWith("http"))return M}catch{}throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}throw C}if(!h.ok){const C=f!=null&&f.json?JSON.stringify(f.json):(f==null?void 0:f.text)||"";throw new Error(`Cloudinary signing failed: ${h.status} ${C}`)}const g=f.json||{},{signature:y,apiKey:v,timestamp:w}=g,b=v||u;if(!y||!w)throw new Error("Cloudinary signing endpoint returned invalid data.");const _=new FormData;_.append("file",t),_.append("api_key",b),_.append("timestamp",String(w)),_.append("signature",y);const{res:x,body:j}=await c(s,{method:"POST",body:_});if(!x.ok){const C=j!=null&&j.json?JSON.stringify(j.json):(j==null?void 0:j.text)||"",I=(C||"").toLowerCase();if(I.includes("missing required parameter - api_key")||I.includes("missing required parameter - api key")||I.includes("missing required parameter 'api_key'")){const M=u;{const U=new FormData;U.append("file",t),U.append("api_key",M),U.append("timestamp",String(w)),U.append("signature",y);const{res:z,body:P}=await c(s,{method:"POST",body:U});if(!z.ok){const R=P!=null&&P.json?JSON.stringify(P.json):(P==null?void 0:P.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${z.status} ${R}`)}if(P.json&&(P.json.secure_url||P.json.url))return P.json.secure_url||P.json.url;if(P.text&&typeof P.text=="string"&&P.text.startsWith("http"))return P.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${x.status} ${C}`)}if(j.json&&(j.json.secure_url||j.json.url))return j.json.secure_url||j.json.url;if(j.text&&typeof j.text=="string"&&j.text.startsWith("http"))return j.text;throw new Error("Cloudinary signed upload returned unexpected response.")}async function R1(t){const e=await new Promise((n,r)=>{const s=new FileReader;s.onload=()=>n(s.result),s.onerror=()=>r(new Error("Failed to read file")),s.readAsDataURL(t)});return await new Promise((n,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?n(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:e,filename:t.name}))}catch(s){r(s)}}).catch(async n=>{try{const r=String((n==null?void 0:n.message)||"").toLowerCase();if(r.includes("cloudinary not configured")||r.includes("404")||r.includes("server upload failed"))return await new Promise((s,a)=>{try{const c=new XMLHttpRequest;c.open("POST",`${API_BASE}/api/imagekit/upload`,!0),c.setRequestHeader("Content-Type","application/json"),c.onreadystatechange=()=>{if(c.readyState!==4)return;const u=c.status||0,h=c.responseText||"";if(u<200||u>=400){let f=h;try{const g=h?JSON.parse(h):null;g&&g.error&&(f=g.error)}catch{}return a(new Error(`ImageKit server upload failed: ${u} ${f}`))}try{const f=h?JSON.parse(h):{};return f&&(f.url||f.filePath)?s(f.url||f.filePath):a(new Error("ImageKit server upload returned unexpected response"))}catch{return a(new Error("ImageKit server upload returned non-JSON response"))}},c.onerror=()=>a(new Error("ImageKit server upload XHR error")),c.send(JSON.stringify({file:e,filename:t.name}))}catch(c){a(c)}})}catch{}throw n})}function tl(t,e,n){try{t&&localStorage.setItem("cloudinary.cloudName",t),e&&localStorage.setItem("cloudinary.uploadPreset",e),n&&localStorage.setItem("cloudinary.apiKey",n)}catch(r){console.warn("Could not persist Cloudinary config to localStorage",r)}}async function k1(t,e){if(!t)throw new Error("No URL provided");return await new Promise((n,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?n(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:t,filename:e||"remote"}))}catch(s){r(new Error("Failed to call server upload endpoint: "+String(s)))}})}const W8="".replace(/\/$/,"");async function H8(t,e){const n=await fetch(t,e);let r=null,s="";try{r=await n.json()}catch{try{s=await n.text()}catch{}}return{res:n,json:r,text:s}}async function na(t,e){let n;typeof t=="string"?n=t:n=await new Promise((u,h)=>{const f=new FileReader;f.onload=()=>u(f.result),f.onerror=()=>h(new Error("Failed to read file")),f.readAsDataURL(t)});const r=`${W8}/api/imagekit/upload`,{res:s,json:a,text:c}=await H8(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:n,filename:e})});if(!s.ok){const u=a?JSON.stringify(a):c||"";throw new Error(`ImageKit server upload failed: ${s.status} ${u}`)}if(a&&(a.url||a.filePath||a.name))return a.url||a.filePath||a.name;throw new Error("ImageKit server upload returned unexpected response.")}function K8(){var Gt;const[t,e]=E.useState(""),[n,r]=E.useState(null),[s,a]=E.useState(!1),[c,u]=E.useState(!1),[h,f]=E.useState(!1),[g,y]=E.useState(!1),[v,w]=E.useState(!1),[b,_]=E.useState(null),[x,j]=E.useState(null),[C,I]=E.useState(null),[M,U]=E.useState("basic"),[z,P]=E.useState({}),[R,D]=E.useState(null),[O,k]=E.useState(""),[V,F]=E.useState(""),[H,Q]=E.useState(""),[K,Z]=E.useState(""),[W,Y]=E.useState(""),[ne,B]=E.useState(""),[ee,ue]=E.useState(""),[Te,Le]=E.useState(""),[Ce,we]=E.useState(""),[Ie,Ke]=E.useState(""),[Ve,st]=E.useState(""),[it,ve]=E.useState(null),je=ou(),gt=to();_e.useEffect(()=>{const ye=new URLSearchParams(gt.search).get("batch");ve(ye)},[gt.search]);const cn=(ie,ye)=>{P(Ue=>{var Ct;return{...Ue,[ie]:{videos:!1,files:!1,quizzes:!1,...Ue[ie]||{},[ye]:!((Ct=Ue[ie])!=null&&Ct[ye])}}})},{years:zn,batches:jr,loading:Lt,error:gn,retryConnection:Ar,updateYear:os,updateBatch:hn,createSubject:Us,createLecture:$s,updateLecture:zt,createYear:Rt,createBatch:Bn,deleteBatch:bn,deleteLecture:Pr,deleteSubject:as,addVideo:qr,addFile:zs,addQuiz:vi}=va(),{news:ls}=o0(),qn=(ie,ye)=>{I(ie),j(ye),r(null),a(!0)},Bs=(ie,ye)=>{console.log(" Opening subject form for year:",ie.yearNumber,"type:",ye),_({id:ie.id,number:ie.yearNumber}),U(ye),u(!0)},Ze=(ie,ye)=>{I(ie),U(ye),w(!0)},Et=(ie,ye)=>{I(ie),j(ye),f(!0)},yt=(ie,ye)=>{I(ie),j(ye),y(!0)};if(s)return o.jsx(v0,{quiz:n,onClose:()=>{a(!1),r(null),j(null)},onSave:async ie=>{C!=null&&C.id&&x&&await vi(C.id,x,{title:ie.title,description:ie.description,questions:ie.questions||[],timeLimit:ie.timeLimit,passingScore:ie.passingScore}),a(!1),r(null),j(null)}});if(console.log(" Render check - isSubjectFormOpen:",c,"selectedYear:",b),c)return console.log(" Rendering SubjectForm"),o.jsx(fP,{year:b==null?void 0:b.number,yearType:M,onClose:()=>{u(!1),_(null)},onSave:async ie=>{try{await Us({...ie,yearId:(b==null?void 0:b.id)||"",order:1}),u(!1),_(null)}catch(ye){console.error("Error saving subject:",ye),alert("Failed to save subject. Please try again.")}}});if(v){const ie=x?(Gt=C==null?void 0:C.lectures)==null?void 0:Gt.find(ye=>ye.id===x):null;return o.jsx(Um,{lecture:ie,subjectId:C==null?void 0:C.id,subjectName:C==null?void 0:C.name,yearType:M,onClose:()=>{w(!1),I(null),j(null)},onSave:async ye=>{try{ie?await zt(ie.id,ye):await $s(ye),w(!1),I(null),j(null)}catch(Ue){console.error("Error saving lecture:",Ue),alert("Failed to save lecture. Please try again.")}}})}if(h)return o.jsx(x0,{lectureId:x,onClose:()=>{f(!1),j(null)},onSave:async ie=>{C!=null&&C.id&&x&&await zs(C.id,x,ie),f(!1),j(null)}});if(g)return o.jsx(w0,{lectureId:x,onClose:()=>{y(!1),j(null)},onSave:async ie=>{C!=null&&C.id&&x&&await qr(C.id,x,ie),y(!1),j(null)}});const Bt=(ie,ye)=>{var Ue,Ct;return o.jsxs(pe,{className:`border-l-4 ${ye==="basic"?"border-l-blue-500":"border-l-red-500"}`,children:[o.jsx(We,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[ie.imageUrl?o.jsx("img",{src:ie.imageUrl,alt:`Year ${ie.yearNumber}`,className:"w-24 h-24 object-cover rounded-md flex-shrink-0",onError:lt=>{lt.currentTarget.style.display="none"}}):o.jsx("div",{className:"w-24 h-24 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:ye==="basic"?o.jsx(ld,{className:"h-6 w-6 text-blue-600"}):o.jsx(cd,{className:"h-6 w-6 text-red-600"})}),o.jsx(Ge,{className:"flex flex-col",children:R===ie.id?o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(Se,{value:O,onChange:lt=>k(lt.target.value),className:"w-48",placeholder:"Batch name"}),o.jsx(te,{size:"sm",onClick:async()=>{try{await(os==null?void 0:os(ie.id,{batchName:O,batch_name:O})),D(null),k("")}catch(lt){console.error(lt),alert("Failed to save batch name")}},children:"Save"}),o.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{D(null),k("")},children:"Cancel"})]}):o.jsx(o.Fragment,{children:ie.batchName?o.jsxs(o.Fragment,{children:[o.jsx(Zn,{to:`/admin/years/${ie.id}`,className:"text-lg font-bold text-foreground hover:underline",children:ie.batchName}),o.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[o.jsxs("span",{className:"text-sm text-muted",children:["Year ",ie.yearNumber]}),ie.name&&o.jsxs("span",{className:"ml-2",children:[" ",ie.name]}),ie.academicSupervisor&&o.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ie.academicSupervisor]}),ie.cr&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ie.cr]}),ie.actor&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ie.actor]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs(Zn,{to:`/admin/years/${ie.id}`,className:"text-lg font-medium text-blue-600 hover:underline",children:["Year ",ie.yearNumber]}),o.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[ie.name?o.jsx("span",{className:"mr-2",children:ie.name}):o.jsx("span",{className:"italic",children:"No batch name"}),ie.academicSupervisor&&o.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ie.academicSupervisor]}),ie.cr&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ie.cr]}),ie.actor&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ie.actor]})]})]})})})]}),o.jsx("div",{className:"flex items-center gap-2"})]})}),o.jsx(me,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ss,{className:"h-4 w-4 text-blue-600"}),o.jsx("span",{className:"font-semibold",children:"Subjects"}),o.jsxs(Pt,{variant:"secondary",children:[((Ue=ie.subjects)==null?void 0:Ue.length)||0," subjects"]}),o.jsxs(Pt,{variant:"outline",children:[(ls||[]).filter(lt=>lt.yearId===ie.id).length," ","news"]})]}),o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>Bs(ie,ye),className:"flex items-center gap-1",children:[o.jsx(Zt,{className:"h-3 w-3"}),"Add Subject"]})]}),!ie.subjects||ie.subjects.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Ss,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No subjects added yet"}),o.jsx(te,{variant:"outline",size:"sm",onClick:()=>Bs(ie,ye),children:"Add first subject"})]}):o.jsx("div",{className:"grid gap-4",children:(Ct=ie.subjects)==null?void 0:Ct.map(lt=>{var vt;return o.jsxs(pe,{className:"bg-secondary/10",children:[o.jsx(We,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[lt.imageUrl?o.jsx("img",{src:lt.imageUrl,alt:lt.name,className:"w-8 h-8 object-cover rounded",onError:ke=>{ke.currentTarget.style.display="none"}}):o.jsx(Ss,{className:"h-5 w-5 text-blue-600"}),o.jsx(Zn,{to:`/admin/subjects/${lt.id}`,className:"font-medium text-lg text-blue-600 hover:underline",children:lt.name}),o.jsxs(Pt,{variant:"outline",className:"text-xs",children:[((vt=lt.lectures)==null?void 0:vt.length)||0," lectures"]})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>Ze(lt,ye),className:"h-8 px-3 text-xs",children:[o.jsx(Zt,{className:"h-3 w-3 mr-1"}),"Add Lecture"]}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:async()=>{if(confirm(`Delete subject "${lt.name}"? This will remove its lectures.`))try{await as(lt.id)}catch(ke){console.error(ke),alert("Failed to delete subject")}},children:o.jsx(En,{className:"h-3 w-3"})})]})]})}),lt.lectures&&lt.lectures.length>0&&o.jsx(me,{className:"pt-0",children:o.jsxs("div",{className:"grid gap-3",children:[lt.lectures.slice(0,3).map(ke=>{var Qt,xi,dr,qs,Ws,wi,hr,no,Sl;return o.jsx(pe,{className:"bg-background border",children:o.jsx(me,{className:"p-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:ke.imageUrl?o.jsx("img",{src:ke.imageUrl,alt:ke.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(ii,{className:"h-6 w-6 text-muted-foreground"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:ke.name}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:ke.description||"No description available"}),o.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>cn(ke.id,"videos"),className:`h-6 px-2 text-xs ${(Qt=z[ke.id])!=null&&Qt.videos?"bg-accent":""}`,children:[o.jsx(yv,{className:"h-3 w-3 mr-1"}),"Videos (",((xi=ke.videos)==null?void 0:xi.length)||0,")"]}),o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>cn(ke.id,"files"),className:`h-6 px-2 text-xs ${(dr=z[ke.id])!=null&&dr.files?"bg-accent":""}`,children:[o.jsx(Is,{className:"h-3 w-3 mr-1"}),"Files (",((qs=ke.files)==null?void 0:qs.length)||0,")"]}),o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>cn(ke.id,"quizzes"),className:`h-6 px-2 text-xs ${(Ws=z[ke.id])!=null&&Ws.quizzes?"bg-accent":""}`,children:[o.jsx(qi,{className:"h-3 w-3 mr-1"}),"Quizzes (",((wi=ke.quizzes)==null?void 0:wi.length)||0,")"]}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{j(ke.id),I(lt),w(!0)},title:"Edit Lecture",children:o.jsx(ns,{className:"h-3 w-3"})}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${ke.name}"?`))try{await Pr(lt.id,ke.id)}catch(qt){console.error(qt),alert("Failed to delete lecture")}},children:o.jsx(En,{className:"h-3 w-3"})})]}),((hr=z[ke.id])==null?void 0:hr.videos)&&o.jsxs("div",{className:"mb-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Videos:"}),o.jsxs(te,{variant:"ghost",size:"xs",onClick:()=>yt(lt,ke.id),className:"h-6 px-2 text-xs",children:[o.jsx(Zt,{className:"h-3 w-3 mr-1"})," Add"]})]}),o.jsxs("div",{className:"space-y-1",children:[ke.videos&&ke.videos.length>0?ke.videos.slice(0,4).map(qt=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yv,{className:"h-3 w-3 text-blue-600"}),o.jsx("a",{href:qt.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate",children:qt.title||qt.name||"Untitled Video"})]},qt.id)):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"}),ke.videos&&ke.videos.length>4&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",ke.videos.length-4," more videos"]})]})]}),((no=z[ke.id])==null?void 0:no.files)&&o.jsxs("div",{className:"mb-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Files:"}),o.jsxs(te,{variant:"ghost",size:"xs",onClick:()=>Et(lt,ke.id),className:"h-6 px-2 text-xs",children:[o.jsx(Zt,{className:"h-3 w-3 mr-1"})," Add"]})]}),o.jsxs("div",{className:"space-y-1",children:[ke.files&&ke.files.length>0?ke.files.slice(0,4).map(qt=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Is,{className:"h-3 w-3 text-green-600"}),o.jsx("a",{href:qt.fileUrl||qt.url||"#",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 hover:underline truncate",onClick:Tl=>{!qt.fileUrl&&!qt.url&&(Tl.preventDefault(),alert("No file URL available"))},children:qt.title||qt.name||"Untitled File"})]},qt.id)):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"}),ke.files&&ke.files.length>4&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",ke.files.length-4," more files"]})]})]}),((Sl=z[ke.id])==null?void 0:Sl.quizzes)&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Quizzes:"}),o.jsxs(te,{variant:"ghost",size:"xs",onClick:()=>qn(lt,ke.id),className:"h-6 px-2 text-xs",children:[o.jsx(Zt,{className:"h-3 w-3 mr-1"})," Add"]})]}),o.jsxs("div",{className:"space-y-1",children:[ke.quizzes&&ke.quizzes.length>0?ke.quizzes.slice(0,4).map(qt=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qi,{className:"h-3 w-3 text-purple-600"}),o.jsx("span",{className:"text-xs text-purple-600",children:qt.title||qt.name||"Untitled Quiz"})]},qt.id)):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"}),ke.quizzes&&ke.quizzes.length>4&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",ke.quizzes.length-4," more quizzes"]})]})]})]})]})})},ke.id)}),lt.lectures.length>3&&o.jsxs("div",{className:"text-center text-muted-foreground text-xs pt-2",children:["+",lt.lectures.length-3," more lectures"]})]})})]},lt.id)})})]})})]},ie.yearNumber)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Academic Years Management"}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("p",{className:"text-muted-foreground",children:"Manage curriculum by academic years, subjects, and lectures"})})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(nP,{children:[o.jsx(O8,{asChild:!0,children:o.jsxs(te,{children:[o.jsx(nO,{className:"h-4 w-4 mr-2"})," Add Batch"]})}),o.jsxs(f0,{children:[o.jsxs(p0,{children:[o.jsx(m0,{children:"Add Batch"}),o.jsx(g0,{children:"Create a new batch for grouping years"})]}),o.jsxs("div",{className:"space-y-3 mt-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Batch name"}),o.jsx(Se,{value:ee,onChange:ie=>ue(ie.target.value),placeholder:"e.g., Batch A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"CR (optional)"}),o.jsx(Se,{value:Te,onChange:ie=>Le(ie.target.value),placeholder:"Class representative"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Group Link (optional)"}),o.jsx(Se,{value:Ce,onChange:ie=>we(ie.target.value),placeholder:"WhatsApp/Telegram group link"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Graduate Date (optional)"}),o.jsx(Se,{value:Ie,onChange:ie=>Ke(ie.target.value),placeholder:"e.g., 2025-06-15",type:"date"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Academic Supervisor (optional)"}),o.jsx(Se,{value:Ve,onChange:ie=>st(ie.target.value),placeholder:"e.g., Dr. Ahmed Hassan"})]})]}),o.jsxs(sP,{className:"mt-4",children:[o.jsx(te,{onClick:async()=>{try{if(!ee||!ee.trim()){alert("Please provide a batch name");return}await(Bn==null?void 0:Bn({batchName:ee.trim(),cr:Te==null?void 0:Te.trim(),groupLink:Ce==null?void 0:Ce.trim(),group_link:Ce==null?void 0:Ce.trim(),graduateDate:Ie==null?void 0:Ie.trim(),graduate_date:Ie==null?void 0:Ie.trim(),academicSupervisor:Ve==null?void 0:Ve.trim(),academic_supervisor:Ve==null?void 0:Ve.trim()})),ue(""),Le(""),we(""),Ke(""),st("");const ie=document.querySelector("[data-dialog-close]");ie&&ie.click(),alert("Batch created")}catch(ie){console.error(ie),alert("Failed to create batch")}},children:"Create"}),o.jsx(L8,{asChild:!0,children:o.jsx(te,{variant:"ghost",className:"ml-2","data-dialog-close":!0,children:"Cancel"})})]})]})]})})]}),Lt&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Ji,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading academic years..."})]})}),gn&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading years"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:gn}),o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx(te,{onClick:Ar,variant:"outline",children:"Retry Connection"}),o.jsx(te,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!Lt&&!gn&&o.jsxs(o.Fragment,{children:[o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Se,{placeholder:"Search lectures, subjects, or content...",value:t,onChange:ie=>e(ie.target.value),className:"pl-10"})]})})}),o.jsx("div",{className:"space-y-6",children:!jr||jr.length===0?o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Ss,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No batches found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a batch to start adding academic years."})]})}):it?(()=>{const ie=(jr||[]).find(Ue=>Ue.id===it)||null,ye=(zn||[]).filter(Ue=>(Ue.batchId||Ue.batch_name)===it);return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[ie!=null&&ie.imageUrl?o.jsx("img",{src:ie.imageUrl,alt:ie.batchName,className:"w-40 h-40 object-cover rounded-md flex-shrink-0"}):o.jsx("div",{className:"w-40 h-40 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:o.jsx(Ss,{className:"h-6 w-6 text-muted-foreground"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold",children:(ie==null?void 0:ie.batchName)||"Batch"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:ie!=null&&ie.cr?`CR: ${ie.cr}`:""})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{onClick:()=>{ve(null),je("/admin/years")},children:"Back to Batches"}),o.jsx(te,{size:"sm",variant:"ghost",onClick:async()=>{try{const Ue=document.createElement("input");Ue.type="file",Ue.accept="image/*",Ue.onchange=async()=>{var lt;const Ct=(lt=Ue.files)==null?void 0:lt[0];if(Ct)try{let vt=null;try{vt=await Tr(Ct)}catch(ke){console.warn("Cloudinary upload failed, trying ImageKit",(ke==null?void 0:ke.message)||ke),vt=await na(Ct,Ct.name)}if(!vt){alert("Upload failed");return}await(hn==null?void 0:hn(ie==null?void 0:ie.id,{image_url:vt,imageUrl:vt})),alert("Image updated")}catch(vt){console.error(vt),alert("Failed to upload image")}},Ue.click()}catch(Ue){console.error(Ue),alert("Could not open file dialog")}},children:"Change Image"}),o.jsxs(te,{onClick:async()=>{try{const Ue=window.prompt("Enter year number for this batch:");if(!Ue)return;const Ct=parseInt(Ue,10);if(isNaN(Ct)){alert("Invalid");return}await(Rt==null?void 0:Rt((ie==null?void 0:ie.id)||null,{yearNumber:Ct})),alert("Year created")}catch(Ue){console.error(Ue),alert("Failed")}},children:[o.jsx(Zt,{className:"h-4 w-4 mr-2"})," Add Year"]}),o.jsxs(te,{variant:"destructive",onClick:async()=>{try{if(!confirm("Delete this batch and all its years?"))return;await(bn==null?void 0:bn(ie==null?void 0:ie.id)),ve(null),je("/admin/years"),alert("Batch deleted")}catch(Ue){console.error(Ue),alert("Failed to delete batch")}},children:[o.jsx(En,{className:"h-4 w-4"})," Delete"]})]})]}),o.jsx("div",{className:"mt-4 space-y-4",children:ye.length===0?o.jsx(pe,{children:o.jsx(me,{className:"p-6 text-center",children:"No years in this batch yet."})}):ye.sort((Ue,Ct)=>Ue.yearNumber-Ct.yearNumber).map(Ue=>o.jsx("div",{children:Bt(Ue,Ue.type)},Ue.id))})]})})():o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:(jr||[]).map(ie=>o.jsxs(pe,{className:"cursor-pointer flex flex-col overflow-hidden",onClick:()=>{je(`/admin/years?batch=${ie.id}`),ve(ie.id)},children:[o.jsx(We,{className:"flex-1",onClick:ye=>R===ie.id&&ye.stopPropagation(),children:o.jsxs("div",{className:"flex items-start gap-4",children:[ie.imageUrl?o.jsx("img",{src:ie.imageUrl,alt:ie.batchName,className:"w-56 h-56 object-cover rounded-md flex-shrink-0"}):o.jsx("div",{className:"w-56 h-56 rounded-md flex-shrink-0 bg-muted"}),o.jsx("div",{className:"flex-1 min-w-0",children:R===ie.id?o.jsxs("div",{className:"flex flex-col gap-2 w-full",onClick:ye=>ye.stopPropagation(),children:[o.jsx(Se,{value:O,onChange:ye=>k(ye.target.value),placeholder:"Batch name",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Se,{value:V||"",onChange:ye=>F(ye.target.value),placeholder:"CR",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Se,{value:H,onChange:ye=>Q(ye.target.value),placeholder:"Image URL (or upload)",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Se,{value:K||"",onChange:ye=>Z(ye.target.value),placeholder:"Group Link",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Se,{value:W||"",onChange:ye=>Y(ye.target.value),placeholder:"Graduate Date (e.g., 2025-06-15)",type:"date",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Se,{value:ne||"",onChange:ye=>B(ye.target.value),placeholder:"Academic Supervisor",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{size:"sm",onClick:ye=>{ye.stopPropagation();try{const Ue=document.createElement("input");Ue.type="file",Ue.accept="image/*",Ue.onchange=async()=>{var lt;const Ct=(lt=Ue.files)==null?void 0:lt[0];if(Ct)try{let vt=null;try{vt=await Tr(Ct)}catch(ke){console.warn("Cloudinary upload failed, trying ImageKit",(ke==null?void 0:ke.message)||ke),vt=await na(Ct,Ct.name)}if(!vt){alert("Upload failed");return}Q(vt)}catch(vt){console.error(vt),alert("Upload failed")}},Ue.click()}catch(Ue){console.error(Ue),alert("Could not open file dialog")}},children:"Upload"}),o.jsx(te,{size:"sm",onClick:async ye=>{ye.stopPropagation();try{await(hn==null?void 0:hn(ie.id,{batch_name:O,batchName:O,cr:V,image_url:H,imageUrl:H,group_link:K,groupLink:K,graduate_date:W,graduateDate:W,academic_supervisor:ne,academicSupervisor:ne})),D(null),k(""),F(""),Q(""),Z(""),Y(""),B(""),alert("Saved")}catch(Ue){console.error(Ue),alert("Failed to save")}},children:"Save"}),o.jsx(te,{size:"sm",variant:"ghost",onClick:ye=>{ye.stopPropagation(),D(null),k(""),F(""),Q(""),Z(""),Y(""),B("")},children:"Cancel"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ge,{className:"text-lg",children:ie.batchName||"Batch"}),o.jsxs(Tt,{className:"text-sm text-muted-foreground space-y-1",children:[ie.cr&&o.jsxs("div",{children:["CR: ",ie.cr]}),(ie.academicSupervisor||ie.academic_supervisor)&&o.jsxs("div",{children:["Supervisor: ",ie.academicSupervisor||ie.academic_supervisor]}),ie.graduateDate&&o.jsxs("div",{children:["Graduate: ",ie.graduateDate]}),ie.groupLink&&o.jsx("a",{href:ie.groupLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",onClick:ye=>ye.stopPropagation(),children:" Group Link"})]})]})})]})}),o.jsx(me,{className:"mt-auto",onClick:ye=>R===ie.id&&ye.stopPropagation(),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Years:"," ",(zn||[]).filter(ye=>(ye.batchId||ye.batch_name)===ie.id).length]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{size:"sm",variant:"outline",onClick:ye=>{ye.stopPropagation(),je(`/admin/years?batch=${ie.id}`),ve(ie.id)},children:"View Years"}),o.jsx(te,{size:"sm",variant:"ghost",onClick:ye=>{ye.stopPropagation(),D(ie.id),k(ie.batchName||""),F(ie.cr||""),Q(ie.imageUrl||""),Z(ie.groupLink||ie.group_link||""),Y(ie.graduateDate||ie.graduate_date||""),B(ie.academicSupervisor||ie.academic_supervisor||"")},children:"Edit"}),o.jsx(te,{size:"sm",variant:"ghost",onClick:async ye=>{ye.stopPropagation();try{const Ue=document.createElement("input");Ue.type="file",Ue.accept="image/*",Ue.onchange=async()=>{var lt;const Ct=(lt=Ue.files)==null?void 0:lt[0];if(Ct)try{let vt=null;try{vt=await Tr(Ct)}catch(ke){console.warn("Cloudinary upload failed, trying ImageKit",(ke==null?void 0:ke.message)||ke),vt=await na(Ct,Ct.name)}if(!vt){alert("Upload failed");return}await(hn==null?void 0:hn(ie.id,{image_url:vt,imageUrl:vt})),alert("Image updated")}catch(vt){console.error(vt),alert("Failed to upload image")}},Ue.click()}catch(Ue){console.error(Ue),alert("Could not open file dialog")}},children:"Change Image"}),o.jsx(te,{size:"sm",variant:"destructive",onClick:async ye=>{ye.stopPropagation();try{if(!confirm("Delete this batch and all its years? This cannot be undone."))return;await(bn==null?void 0:bn(ie.id)),alert("Batch deleted")}catch(Ue){console.error(Ue),alert("Failed to delete batch")}},children:"Delete"})]})]})})]},ie.id))})})]})]})}function G8(){var U;const{id:t}=QT(),[e,n]=E.useState(!1),[r,s]=E.useState(!1),[a,c]=E.useState(null),[u,h]=E.useState(null),[f,g]=E.useState(""),{years:y,loading:v,updateYear:w,createSubject:b,createLecture:_,deleteSubject:x,deleteLecture:j}=va(),C=y.find(z=>z.id===t);if(v)return o.jsx(pe,{children:o.jsx(me,{className:"text-center py-12",children:"Loading..."})});if(!C)return o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:"Year not found"}),o.jsx("div",{className:"flex gap-2 justify-center",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(te,{variant:"outline",children:"Back to Years"})})})]})});const I=async z=>{try{await b({...z,yearId:C.id}),n(!1)}catch(P){console.error(P),alert("Failed to add subject")}},M=async z=>{try{await _(z),s(!1),c(null)}catch(P){console.error(P),alert("Failed to add lecture")}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Zn,{to:"/admin/years",children:o.jsxs(te,{variant:"ghost",children:[o.jsx(ss,{className:"h-4 w-4 mr-2"})," Back"]})}),o.jsxs("div",{children:[C.batchName?o.jsxs(o.Fragment,{children:[o.jsx("h1",{className:"text-2xl font-bold",children:C.batchName}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Year ",C.yearNumber]})]}):o.jsxs("h1",{className:"text-2xl font-bold",children:["Year ",C.yearNumber]}),o.jsx("p",{className:"text-muted-foreground",children:"Manage subjects and lectures for this year"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:!window.__yearEditing&&o.jsxs(o.Fragment,{children:[o.jsxs(te,{variant:"ghost",onClick:async()=>{try{const z=document.createElement("input");z.type="file",z.accept="image/*",z.onchange=async()=>{var R;const P=(R=z.files)==null?void 0:R[0];if(P)try{let D=null;try{D=await Tr(P)}catch(O){console.warn("Cloudinary upload failed, attempting ImageKit fallback:",(O==null?void 0:O.message)||O);try{D=await na(P,P.name)}catch(k){throw console.error("ImageKit upload also failed:",k),O}}if(!D||typeof D!="string"||!D.startsWith("http")){console.error("Invalid upload response:",D),alert("Image upload failed: unexpected response from upload provider"),window.__yearEditing=!1;return}await(w==null?void 0:w(C.id,{imageUrl:D})),window.__yearEditing=!1}catch(D){console.error(D);const k=((D==null?void 0:D.message)||String(D)||"").toLowerCase();if(k.includes("cloudinary cloud name is not configured")){const V=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!V){alert("No cloud name provided. Upload cancelled."),window.__yearEditing=!1;return}const F=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),H=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{tl(V,F||null,H||null);const Q=await Tr(P);if(console.log("Cloudinary upload result after config:",Q),!Q||typeof Q!="string"||!Q.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(w==null?void 0:w(C.id,{imageUrl:Q}))}catch(Q){console.error(Q),alert("Image upload failed after configuring Cloudinary: "+(Q.message||Q))}window.__yearEditing=!1;return}else if(k.includes("cloudinary signing did not return an api key")||k.includes("missing required parameter - api_key")||k.includes("missing required parameter 'api_key'")){const V=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(V&&V.trim())try{tl(null,null,V.trim());const F=await Tr(P);if(!F||typeof F!="string"||!F.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(w==null?void 0:w(C.id,{imageUrl:F})),window.__yearEditing=!1;return}catch(F){console.error(F),alert("Image upload failed after setting API key: "+(F.message||F)),window.__yearEditing=!1;return}}alert("Image upload failed: "+(D.message||D))}},z.click()}catch(z){console.error(z),alert("Could not open file dialog")}},children:[o.jsx(hO,{className:"h-4 w-4 mr-2"})," ",C.imageUrl?"Change Image":"Add Image"]}),o.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("academicSupervisor"),g(C.academicSupervisor||C.acadmic_supervisor||"")},children:"Academic Supervisor"}),o.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("actor"),g(C.actor||"")},children:"Actor"}),o.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("groupUrl"),g(C.groupUrl||C.group_url||"")},children:"Group URL"}),o.jsx(te,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("batchName"),g(C.batchName||C.batch_name||"")},children:"Batch Name"}),C.imageUrl&&o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm("Remove year image?"))try{await(w==null?void 0:w(C.id,{imageUrl:""}))}catch(z){console.error(z),alert("Failed to remove year image")}},children:o.jsx(En,{className:"h-3 w-3"})})]})})]}),u&&o.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[o.jsx(Se,{placeholder:u==="image"?"Image URL":u==="groupUrl"?"Group URL":u==="academicSupervisor"?"Academic Supervisor":"Actor",value:f,onChange:z=>g(z.target.value),className:"w-full max-w-2xl"}),o.jsx(te,{onClick:async()=>{try{const z={};u==="image"?z.imageUrl=f:u==="academicSupervisor"?(z.academicSupervisor=f,z.acadmic_supervisor=f):u==="actor"?z.actor=f:u==="groupUrl"?(z.groupUrl=f,z.group_url=f):u==="batchName"&&(z.batchName=f,z.batch_name=f),await(w==null?void 0:w(C.id,z)),h(null),g(""),window.__yearEditing=!1}catch(z){console.error(z),alert("Failed to save field")}},children:"Save"}),o.jsx(te,{variant:"ghost",onClick:()=>{h(null),g(""),window.__yearEditing=!1},children:"Cancel"})]}),o.jsxs(pe,{children:[o.jsx(We,{children:o.jsxs(Ge,{className:"flex items-center gap-2",children:["Subjects",o.jsxs(Pt,{variant:"secondary",children:[((U=C.subjects)==null?void 0:U.length)||0," subjects"]})]})}),o.jsxs(me,{children:[o.jsx("div",{className:"flex justify-end mb-4",children:o.jsxs(te,{onClick:()=>n(!0),className:"flex items-center gap-2",children:[o.jsx(Zt,{className:"h-3 w-3"})," Add Subject"]})}),!C.subjects||C.subjects.length===0?o.jsx("div",{className:"text-center py-8",children:"No subjects added yet."}):o.jsx("div",{className:"grid gap-4",children:C.subjects.map(z=>o.jsxs(pe,{className:"bg-secondary/10",children:[o.jsx(We,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[z.imageUrl?o.jsx("img",{src:z.imageUrl,alt:z.name,className:"w-8 h-8 object-cover rounded"}):o.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-lg",children:z.name}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:[(z.lectures||[]).length," lectures"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(te,{onClick:()=>{c(z),s(!0)},variant:"ghost",size:"sm",children:"Add Lecture"}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete subject "${z.name}"?`))try{await x(z.id)}catch(P){console.error(P),alert("Failed to delete subject")}},children:o.jsx(En,{className:"h-3 w-3"})})]})]})}),z.lectures&&z.lectures.length>0&&o.jsx(me,{children:o.jsx("div",{className:"grid gap-3",children:z.lectures.map(P=>o.jsx(pe,{className:"bg-background border",children:o.jsx(me,{className:"p-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:P.imageUrl?o.jsx("img",{src:P.imageUrl,alt:P.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"No image"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:P.name}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:P.description||"No description available"})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${P.name}"?`))try{await j(z.id,P.id)}catch(R){console.error(R),alert("Failed to delete lecture")}},children:o.jsx(En,{className:"h-3 w-3"})})})]})})},P.id))})})]},z.id))})]})]}),e&&o.jsx(fP,{year:C.yearNumber,yearType:C.type,onClose:()=>n(!1),onSave:I}),r&&a&&o.jsx(Um,{subjectId:a.id,subjectName:a.name,yearType:C.type,onClose:()=>{s(!1),c(null)},onSave:M})]})}function Q8({queryKey:t,queryFn:e,pageSize:n=10,enabled:r=!0,staleTime:s=5*60*1e3,gcTime:a=30*60*1e3}){var P,R;const c=Jx(),{data:u,fetchNextPage:h,hasNextPage:f,isFetchingNextPage:g,isLoading:y,error:v,refetch:w}=KM({queryKey:[...t,n],queryFn:({pageParam:D=0})=>e(D,n),getNextPageParam:(D,O)=>{if(D.hasMore)return O.length},initialPageParam:0,enabled:r,staleTime:s,gcTime:a,refetchOnWindowFocus:!1,refetchOnMount:!1}),b=(u==null?void 0:u.pages.flatMap(D=>D.data))??[],_=u!=null&&u.pages.length?u.pages.length-1:0,x=((P=u==null?void 0:u.pages[_])==null?void 0:P.data)??[],j=((R=u==null?void 0:u.pages[0])==null?void 0:R.total)??0,C=D=>{var O;return((O=u==null?void 0:u.pages[D])==null?void 0:O.data)??[]},I=D=>((u==null?void 0:u.pages.length)??0)>D,M=()=>{f&&!g&&h()},U=D=>{c.setQueryData([...t,n],O=>{if(!O)return O;const k=[...O.pages];return k[D]&&k.splice(D,1),{...O,pages:k}})},z=()=>{c.invalidateQueries({queryKey:t})};return{data:x,allData:b,currentPage:_,totalPages:Math.ceil(j/n),totalCount:j,hasNextPage:f??!1,isLoading:y,isFetchingNextPage:g,error:v,loadNextPage:h,prefetchNextPage:M,getPage:C,isPageCached:I,invalidatePage:U,clearCache:z,refetch:w}}const Y8=10;async function X8(t,e,n){var r;try{const s=an(Cr(Ne,"lectures"),ya("order","asc")),a=await dt(s),c=[];for(const y of a.docs.slice(0,100)){const v=y.data(),w=y.id,b=y.ref,[_,x,j]=await Promise.all([dt(ze(b,"files")),dt(ze(b,"quizzes")),dt(ze(b,"videos"))]),C=_.docs.map(U=>{var P;const z=U.data();return{id:U.id,title:z.title||"",fileUrl:z.url||z.fileUrl||"",description:z.description||"",uploadedAt:((P=z.uploadedAt)==null?void 0:P.toDate())||new Date,uploadedBy:z.uploadedBy||"",imageUrl:z.imageUrl||z.thumbnailUrl||"",thumbnailUrl:z.thumbnailUrl||z.imageUrl||""}}),I=x.docs.map(U=>{var P;const z=U.data();return{id:U.id,title:z.title||"",description:z.description||"",questions:z.questions||[],timeLimit:z.duration||30,passingScore:z.passRate||70,createdAt:((P=z.createdAt)==null?void 0:P.toDate())||new Date,createdBy:z.uploadedBy||""}}),M=j.docs.map(U=>{var P,R;const z=U.data();return{id:U.id,title:z.title||z.name||"",youtubeUrl:z.url||z.youtubeUrl||"",thumbnailUrl:z.thumbnailUrl||z.thumbnail||"",duration:z.duration||z.time||"",description:z.description||"",uploadedAt:((R=(P=z.uploadedAt)==null?void 0:P.toDate)==null?void 0:R.call(P))||new Date,uploadedBy:z.uploadedBy||z.uploader||"",imageUrl:z.thumbnailUrl||""}});c.push({id:w,title:v.title||"",description:v.description||"",subject:v.subjectId||"Unknown",order:v.order||1,createdAt:((r=v.createdAt)==null?void 0:r.toDate())||new Date,createdBy:v.uploadedBy||"",videos:M,files:C,quizzes:I})}c.sort((y,v)=>(y.order||0)-(v.order||0));const u=t*e,h=u+e,f=c.slice(u,h),g=h<c.length;return{data:f,total:c.length,hasMore:g}}catch(s){throw console.error("Error fetching lectures page:",s),s}}function J8(t=Y8){return Q8({queryKey:["lectures-paginated"],queryFn:X8,pageSize:t,staleTime:5*60*1e3,gcTime:30*60*1e3})}function $m(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const f=an(Cr(Ne,"lectures")),g=gi(f,async y=>{var w;const v=[];for(const b of y.docs){const _=b.data(),x=b.id,j=b.ref,C=await dt(ze(j,"files")),I=[];C.forEach(R=>{var O;const D=R.data();I.push({id:R.id,title:D.title||"",fileUrl:D.url||D.fileUrl||"",description:D.description||"",uploadedAt:((O=D.uploadedAt)==null?void 0:O.toDate())||new Date,uploadedBy:D.uploadedBy||"",imageUrl:D.imageUrl||D.thumbnailUrl||"",thumbnailUrl:D.thumbnailUrl||D.imageUrl||""})});const M=await dt(ze(j,"quizzes")),U=[];M.forEach(R=>{var O;const D=R.data();U.push({id:R.id,title:D.title||"",description:D.description||"",questions:D.questions||[],timeLimit:D.duration||30,passingScore:D.passRate||70,createdAt:((O=D.createdAt)==null?void 0:O.toDate())||new Date,createdBy:D.uploadedBy||""})});const z=await dt(ze(j,"videos")),P=[];z.empty?(_.videos||[]).forEach(D=>{var O,k;P.push({id:D.id||D.videoId||"",title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:((k=(O=D.uploadedAt)==null?void 0:O.toDate)==null?void 0:k.call(O))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}):z.forEach(R=>{var O,k;const D=R.data();P.push({id:R.id,title:D.title||D.name||"",youtubeUrl:D.url||D.youtubeUrl||"",thumbnailUrl:D.thumbnailUrl||D.thumbnail||"",duration:D.duration||D.time||"",description:D.description||"",uploadedAt:((k=(O=D.uploadedAt)==null?void 0:O.toDate)==null?void 0:k.call(O))||new Date,uploadedBy:D.uploadedBy||D.uploader||"",imageUrl:D.thumbnailUrl||""})}),v.push({id:x,title:_.title||"",description:_.description||"",subject:_.subjectId||"Unknown",order:_.order||1,createdAt:((w=_.createdAt)==null?void 0:w.toDate())||new Date,createdBy:_.uploadedBy||"",videos:P,files:I,quizzes:U})}v.sort((b,_)=>(b.order||0)-(_.order||0)),e(v),r(!1)},y=>{console.error("Error fetching lectures:",y),a("Failed to fetch lectures"),r(!1)});return()=>g()},[]),{lectures:t,loading:n,error:s,createLecture:async(f,g)=>{try{const y=St(Ne,"Subjects",g),v=ze(y,"lectures"),{videos:w,files:b,quizzes:_,...x}=f,j=await pn(v,{...x,videos:w,subjectId:g});if(b&&b.length>0){const C=ze(j,"files");for(const I of b)await pn(C,I)}if(_&&_.length>0){const C=ze(j,"quizzes");for(const I of _)await pn(C,I)}}catch(y){throw console.error("Error creating lecture:",y),y}},updateLecture:async(f,g)=>{try{const y=an(Cr(Ne,"lectures")),v=await dt(y);for(const w of v.docs)if(w.id===f){await Jt(w.ref,g);break}}catch(y){throw console.error("Error updating lecture:",y),y}},deleteLecture:async f=>{try{const g=an(Cr(Ne,"lectures")),y=await dt(g);for(const v of y.docs)if(v.id===f){await lr(v.ref);break}}catch(g){throw console.error("Error deleting lecture:",g),g}}}}const pP=({className:t,...e})=>o.jsx("nav",{role:"navigation","aria-label":"pagination",className:Qe("mx-auto flex w-full justify-center",t),...e});pP.displayName="Pagination";const mP=E.forwardRef(({className:t,...e},n)=>o.jsx("ul",{ref:n,className:Qe("flex flex-row items-center gap-1",t),...e}));mP.displayName="PaginationContent";const ap=E.forwardRef(({className:t,...e},n)=>o.jsx("li",{ref:n,className:Qe("",t),...e}));ap.displayName="PaginationItem";const zm=({className:t,isActive:e,size:n="icon",...r})=>o.jsx("a",{"aria-current":e?"page":void 0,className:Qe(sA({variant:e?"outline":"ghost",size:n}),t),...r});zm.displayName="PaginationLink";const gP=({className:t,...e})=>o.jsxs(zm,{"aria-label":"Go to previous page",size:"default",className:Qe("gap-1 pl-2.5",t),...e,children:[o.jsx(Y2,{className:"h-4 w-4"}),o.jsx("span",{children:"Previous"})]});gP.displayName="PaginationPrevious";const yP=({className:t,...e})=>o.jsxs(zm,{"aria-label":"Go to next page",size:"default",className:Qe("gap-1 pr-2.5",t),...e,children:[o.jsx("span",{children:"Next"}),o.jsx(X2,{className:"h-4 w-4"})]});yP.displayName="PaginationNext";const vP=({className:t,...e})=>o.jsxs("span",{"aria-hidden":!0,className:Qe("flex h-9 w-9 items-center justify-center",t),...e,children:[o.jsx(eO,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"More pages"})]});vP.displayName="PaginationEllipsis";function O1(t,[e,n]){return Math.min(n,Math.max(e,t))}var Z8=E.createContext(void 0);function _0(t){const e=E.useContext(Z8);return t||e||"ltr"}var e7="DismissableLayer",_x="dismissableLayer.update",t7="dismissableLayer.pointerDownOutside",n7="dismissableLayer.focusOutside",D1,xP=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wP=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=t,f=E.useContext(xP),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=E.useState({}),b=jt(e,P=>y(P)),_=Array.from(f.layers),[x]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),j=_.indexOf(x),C=g?_.indexOf(g):-1,I=f.layersWithOutsidePointerEventsDisabled.size>0,M=C>=j,U=i7(P=>{const R=P.target,D=[...f.branches].some(O=>O.contains(R));!M||D||(s==null||s(P),c==null||c(P),P.defaultPrevented||u==null||u())},v),z=o7(P=>{const R=P.target;[...f.branches].some(O=>O.contains(R))||(a==null||a(P),c==null||c(P),P.defaultPrevented||u==null||u())},v);return Px(P=>{C===f.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},v),E.useEffect(()=>{if(g)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(D1=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),L1(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=D1)}},[g,v,n,f]),E.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),L1())},[g,f]),E.useEffect(()=>{const P=()=>w({});return document.addEventListener(_x,P),()=>document.removeEventListener(_x,P)},[]),o.jsx(Je.div,{...h,ref:b,style:{pointerEvents:I?M?"auto":"none":void 0,...t.style},onFocusCapture:He(t.onFocusCapture,z.onFocusCapture),onBlurCapture:He(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:He(t.onPointerDownCapture,U.onPointerDownCapture)})});wP.displayName=e7;var r7="DismissableLayerBranch",s7=E.forwardRef((t,e)=>{const n=E.useContext(xP),r=E.useRef(null),s=jt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(Je.div,{...t,ref:s})});s7.displayName=r7;function i7(t,e=globalThis==null?void 0:globalThis.document){const n=In(t),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){_P(t7,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function o7(t,e=globalThis==null?void 0:globalThis.document){const n=In(t),r=E.useRef(!1);return E.useEffect(()=>{const s=a=>{a.target&&!r.current&&_P(n7,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function L1(){const t=new CustomEvent(_x);document.dispatchEvent(t)}function _P(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Qp(s,a):s.dispatchEvent(a)}var ov=0;function a7(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??M1()),document.body.insertAdjacentElement("beforeend",t[1]??M1()),ov++,()=>{ov===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ov--}},[])}function M1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var l7="Portal",EP=E.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,a]=E.useState(!1);en(()=>a(!0),[]);const c=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Gp.createPortal(o.jsx(Je.div,{...r,ref:e}),c):null});EP.displayName=l7;var bP=NA(),av=function(){},Bm=E.forwardRef(function(t,e){var n=E.useRef(null),r=E.useState({onScrollCapture:av,onWheelCapture:av,onTouchMoveCapture:av}),s=r[0],a=r[1],c=t.forwardProps,u=t.children,h=t.className,f=t.removeScrollBar,g=t.enabled,y=t.shards,v=t.sideCar,w=t.noIsolation,b=t.inert,_=t.allowPinchZoom,x=t.as,j=x===void 0?"div":x,C=t.gapMode,I=au(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=v,U=bA([n,e]),z=Jn(Jn({},I),s);return E.createElement(E.Fragment,null,g&&E.createElement(M,{sideCar:bP,removeScrollBar:f,shards:y,noIsolation:w,inert:b,setCallbacks:a,allowPinchZoom:!!_,lockRef:n,gapMode:C}),c?E.cloneElement(E.Children.only(u),Jn(Jn({},z),{ref:U})):E.createElement(j,Jn({},z,{className:h,ref:U}),u))});Bm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bm.classNames={fullWidth:xd,zeroRight:vd};var Ex=!1;if(typeof window<"u")try{var Wf=Object.defineProperty({},"passive",{get:function(){return Ex=!0,!0}});window.addEventListener("test",Wf,Wf),window.removeEventListener("test",Wf,Wf)}catch{Ex=!1}var dc=Ex?{passive:!1}:!1,c7=function(t){return t.tagName==="TEXTAREA"},NP=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!c7(t)&&n[e]==="visible")},u7=function(t){return NP(t,"overflowY")},d7=function(t){return NP(t,"overflowX")},F1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=SP(t,r);if(s){var a=TP(t,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},h7=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},f7=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},SP=function(t,e){return t==="v"?u7(e):d7(e)},TP=function(t,e){return t==="v"?h7(e):f7(e)},p7=function(t,e){return t==="h"&&e==="rtl"?-1:1},m7=function(t,e,n,r,s){var a=p7(t,window.getComputedStyle(e).direction),c=a*r,u=n.target,h=e.contains(u),f=!1,g=c>0,y=0,v=0;do{var w=TP(t,u),b=w[0],_=w[1],x=w[2],j=_-x-a*b;(b||j)&&SP(t,u)&&(y+=j,v+=b),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(y)<1||!g&&Math.abs(v)<1)&&(f=!0),f},Hf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},V1=function(t){return[t.deltaX,t.deltaY]},U1=function(t){return t&&"current"in t?t.current:t},g7=function(t,e){return t[0]===e[0]&&t[1]===e[1]},y7=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},v7=0,hc=[];function x7(t){var e=E.useRef([]),n=E.useRef([0,0]),r=E.useRef(),s=E.useState(v7++)[0],a=E.useState(l0)[0],c=E.useRef(t);E.useEffect(function(){c.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var _=pC([t.lockRef.current],(t.shards||[]).map(U1),!0).filter(Boolean);return _.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=E.useCallback(function(_,x){if("touches"in _&&_.touches.length===2)return!c.current.allowPinchZoom;var j=Hf(_),C=n.current,I="deltaX"in _?_.deltaX:C[0]-j[0],M="deltaY"in _?_.deltaY:C[1]-j[1],U,z=_.target,P=Math.abs(I)>Math.abs(M)?"h":"v";if("touches"in _&&P==="h"&&z.type==="range")return!1;var R=F1(P,z);if(!R)return!0;if(R?U=P:(U=P==="v"?"h":"v",R=F1(P,z)),!R)return!1;if(!r.current&&"changedTouches"in _&&(I||M)&&(r.current=U),!U)return!0;var D=r.current||U;return m7(D,x,_,D==="h"?I:M)},[]),h=E.useCallback(function(_){var x=_;if(!(!hc.length||hc[hc.length-1]!==a)){var j="deltaY"in x?V1(x):Hf(x),C=e.current.filter(function(U){return U.name===x.type&&(U.target===x.target||x.target===U.shadowParent)&&g7(U.delta,j)})[0];if(C&&C.should){x.cancelable&&x.preventDefault();return}if(!C){var I=(c.current.shards||[]).map(U1).filter(Boolean).filter(function(U){return U.contains(x.target)}),M=I.length>0?u(x,I[0]):!c.current.noIsolation;M&&x.cancelable&&x.preventDefault()}}},[]),f=E.useCallback(function(_,x,j,C){var I={name:_,delta:x,target:j,should:C,shadowParent:w7(j)};e.current.push(I),setTimeout(function(){e.current=e.current.filter(function(M){return M!==I})},1)},[]),g=E.useCallback(function(_){n.current=Hf(_),r.current=void 0},[]),y=E.useCallback(function(_){f(_.type,V1(_),_.target,u(_,t.lockRef.current))},[]),v=E.useCallback(function(_){f(_.type,Hf(_),_.target,u(_,t.lockRef.current))},[]);E.useEffect(function(){return hc.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,dc),document.addEventListener("touchmove",h,dc),document.addEventListener("touchstart",g,dc),function(){hc=hc.filter(function(_){return _!==a}),document.removeEventListener("wheel",h,dc),document.removeEventListener("touchmove",h,dc),document.removeEventListener("touchstart",g,dc)}},[]);var w=t.removeScrollBar,b=t.inert;return E.createElement(E.Fragment,null,b?E.createElement(a,{styles:y7(s)}):null,w?E.createElement(IA,{gapMode:t.gapMode}):null)}function w7(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const _7=TA(bP,x7);var CP=E.forwardRef(function(t,e){return E.createElement(Bm,Jn({},t,{ref:e,sideCar:_7}))});CP.classNames=Bm.classNames;var E7=[" ","Enter","ArrowUp","ArrowDown"],b7=[" ","Enter"],uh="Select",[qm,Wm,N7]=Ax(uh),[gu,aW]=Xi(uh,[N7,tm]),Hm=tm(),[S7,xa]=gu(uh),[T7,C7]=gu(uh),IP=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:c,defaultValue:u,onValueChange:h,dir:f,name:g,autoComplete:y,disabled:v,required:w}=t,b=Hm(e),[_,x]=E.useState(null),[j,C]=E.useState(null),[I,M]=E.useState(!1),U=_0(f),[z=!1,P]=rl({prop:r,defaultProp:s,onChange:a}),[R,D]=rl({prop:c,defaultProp:u,onChange:h}),O=E.useRef(null),k=_?!!_.closest("form"):!0,[V,F]=E.useState(new Set),H=Array.from(V).map(Q=>Q.props.value).join(";");return o.jsx(qL,{...b,children:o.jsxs(S7,{required:w,scope:e,trigger:_,onTriggerChange:x,valueNode:j,onValueNodeChange:C,valueNodeHasChildren:I,onValueNodeHasChildrenChange:M,contentId:Ko(),value:R,onValueChange:D,open:z,onOpenChange:P,dir:U,triggerPointerDownPosRef:O,disabled:v,children:[o.jsx(qm.Provider,{scope:e,children:o.jsx(T7,{scope:t.__scopeSelect,onNativeOptionAdd:E.useCallback(Q=>{F(K=>new Set(K).add(Q))},[]),onNativeOptionRemove:E.useCallback(Q=>{F(K=>{const Z=new Set(K);return Z.delete(Q),Z})},[]),children:n})}),k?o.jsxs(ZP,{"aria-hidden":!0,required:w,tabIndex:-1,name:g,autoComplete:y,value:R,onChange:Q=>D(Q.target.value),disabled:v,children:[R===void 0?o.jsx("option",{value:""}):null,Array.from(V)]},H):null]})})};IP.displayName=uh;var jP="SelectTrigger",AP=E.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=Hm(n),c=xa(jP,n),u=c.disabled||r,h=jt(e,c.onTriggerChange),f=Wm(n),[g,y,v]=eR(b=>{const _=f().filter(C=>!C.disabled),x=_.find(C=>C.value===c.value),j=tR(_,b,x);j!==void 0&&c.onValueChange(j.value)}),w=()=>{u||(c.onOpenChange(!0),v())};return o.jsx(mT,{asChild:!0,...a,children:o.jsx(Je.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":JP(c.value)?"":void 0,...s,ref:h,onClick:He(s.onClick,b=>{b.currentTarget.focus()}),onPointerDown:He(s.onPointerDown,b=>{const _=b.target;_.hasPointerCapture(b.pointerId)&&_.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&(w(),c.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)},b.preventDefault())}),onKeyDown:He(s.onKeyDown,b=>{const _=g.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&y(b.key),!(_&&b.key===" ")&&E7.includes(b.key)&&(w(),b.preventDefault())})})})});AP.displayName=jP;var PP="SelectValue",RP=E.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:c="",...u}=t,h=xa(PP,n),{onValueNodeHasChildrenChange:f}=h,g=a!==void 0,y=jt(e,h.onValueNodeChange);return en(()=>{f(g)},[f,g]),o.jsx(Je.span,{...u,ref:y,style:{pointerEvents:"none"},children:JP(h.value)?o.jsx(o.Fragment,{children:c}):a})});RP.displayName=PP;var I7="SelectIcon",kP=E.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(Je.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});kP.displayName=I7;var j7="SelectPortal",OP=t=>o.jsx(EP,{asChild:!0,...t});OP.displayName=j7;var fl="SelectContent",DP=E.forwardRef((t,e)=>{const n=xa(fl,t.__scopeSelect),[r,s]=E.useState();if(en(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?pl.createPortal(o.jsx(LP,{scope:t.__scopeSelect,children:o.jsx(qm.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),a):null}return o.jsx(MP,{...t,ref:e})});DP.displayName=fl;var Mi=10,[LP,wa]=gu(fl),A7="SelectContentImpl",MP=E.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:c,side:u,sideOffset:h,align:f,alignOffset:g,arrowPadding:y,collisionBoundary:v,collisionPadding:w,sticky:b,hideWhenDetached:_,avoidCollisions:x,...j}=t,C=xa(fl,n),[I,M]=E.useState(null),[U,z]=E.useState(null),P=jt(e,we=>M(we)),[R,D]=E.useState(null),[O,k]=E.useState(null),V=Wm(n),[F,H]=E.useState(!1),Q=E.useRef(!1);E.useEffect(()=>{if(I)return OA(I)},[I]),a7();const K=E.useCallback(we=>{const[Ie,...Ke]=V().map(it=>it.ref.current),[Ve]=Ke.slice(-1),st=document.activeElement;for(const it of we)if(it===st||(it==null||it.scrollIntoView({block:"nearest"}),it===Ie&&U&&(U.scrollTop=0),it===Ve&&U&&(U.scrollTop=U.scrollHeight),it==null||it.focus(),document.activeElement!==st))return},[V,U]),Z=E.useCallback(()=>K([R,I]),[K,R,I]);E.useEffect(()=>{F&&Z()},[F,Z]);const{onOpenChange:W,triggerPointerDownPosRef:Y}=C;E.useEffect(()=>{if(I){let we={x:0,y:0};const Ie=Ve=>{var st,it;we={x:Math.abs(Math.round(Ve.pageX)-(((st=Y.current)==null?void 0:st.x)??0)),y:Math.abs(Math.round(Ve.pageY)-(((it=Y.current)==null?void 0:it.y)??0))}},Ke=Ve=>{we.x<=10&&we.y<=10?Ve.preventDefault():I.contains(Ve.target)||W(!1),document.removeEventListener("pointermove",Ie),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",Ie),document.addEventListener("pointerup",Ke,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ie),document.removeEventListener("pointerup",Ke,{capture:!0})}}},[I,W,Y]),E.useEffect(()=>{const we=()=>W(!1);return window.addEventListener("blur",we),window.addEventListener("resize",we),()=>{window.removeEventListener("blur",we),window.removeEventListener("resize",we)}},[W]);const[ne,B]=eR(we=>{const Ie=V().filter(st=>!st.disabled),Ke=Ie.find(st=>st.ref.current===document.activeElement),Ve=tR(Ie,we,Ke);Ve&&setTimeout(()=>Ve.ref.current.focus())}),ee=E.useCallback((we,Ie,Ke)=>{const Ve=!Q.current&&!Ke;(C.value!==void 0&&C.value===Ie||Ve)&&(D(we),Ve&&(Q.current=!0))},[C.value]),ue=E.useCallback(()=>I==null?void 0:I.focus(),[I]),Te=E.useCallback((we,Ie,Ke)=>{const Ve=!Q.current&&!Ke;(C.value!==void 0&&C.value===Ie||Ve)&&k(we)},[C.value]),Le=r==="popper"?bx:FP,Ce=Le===bx?{side:u,sideOffset:h,align:f,alignOffset:g,arrowPadding:y,collisionBoundary:v,collisionPadding:w,sticky:b,hideWhenDetached:_,avoidCollisions:x}:{};return o.jsx(LP,{scope:n,content:I,viewport:U,onViewportChange:z,itemRefCallback:ee,selectedItem:R,onItemLeave:ue,itemTextRefCallback:Te,focusSelectedItem:Z,selectedItemText:O,position:r,isPositioned:F,searchRef:ne,children:o.jsx(CP,{as:nl,allowPinchZoom:!0,children:o.jsx(a0,{asChild:!0,trapped:C.open,onMountAutoFocus:we=>{we.preventDefault()},onUnmountAutoFocus:He(s,we=>{var Ie;(Ie=C.trigger)==null||Ie.focus({preventScroll:!0}),we.preventDefault()}),children:o.jsx(wP,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:we=>we.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:o.jsx(Le,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:we=>we.preventDefault(),...j,...Ce,onPlaced:()=>H(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:He(j.onKeyDown,we=>{const Ie=we.ctrlKey||we.altKey||we.metaKey;if(we.key==="Tab"&&we.preventDefault(),!Ie&&we.key.length===1&&B(we.key),["ArrowUp","ArrowDown","Home","End"].includes(we.key)){let Ve=V().filter(st=>!st.disabled).map(st=>st.ref.current);if(["ArrowUp","End"].includes(we.key)&&(Ve=Ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(we.key)){const st=we.target,it=Ve.indexOf(st);Ve=Ve.slice(it+1)}setTimeout(()=>K(Ve)),we.preventDefault()}})})})})})})});MP.displayName=A7;var P7="SelectItemAlignedPosition",FP=E.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=xa(fl,n),c=wa(fl,n),[u,h]=E.useState(null),[f,g]=E.useState(null),y=jt(e,P=>g(P)),v=Wm(n),w=E.useRef(!1),b=E.useRef(!0),{viewport:_,selectedItem:x,selectedItemText:j,focusSelectedItem:C}=c,I=E.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&f&&_&&x&&j){const P=a.trigger.getBoundingClientRect(),R=f.getBoundingClientRect(),D=a.valueNode.getBoundingClientRect(),O=j.getBoundingClientRect();if(a.dir!=="rtl"){const st=O.left-R.left,it=D.left-st,ve=P.left-it,je=P.width+ve,gt=Math.max(je,R.width),cn=window.innerWidth-Mi,zn=O1(it,[Mi,cn-gt]);u.style.minWidth=je+"px",u.style.left=zn+"px"}else{const st=R.right-O.right,it=window.innerWidth-D.right-st,ve=window.innerWidth-P.right-it,je=P.width+ve,gt=Math.max(je,R.width),cn=window.innerWidth-Mi,zn=O1(it,[Mi,cn-gt]);u.style.minWidth=je+"px",u.style.right=zn+"px"}const k=v(),V=window.innerHeight-Mi*2,F=_.scrollHeight,H=window.getComputedStyle(f),Q=parseInt(H.borderTopWidth,10),K=parseInt(H.paddingTop,10),Z=parseInt(H.borderBottomWidth,10),W=parseInt(H.paddingBottom,10),Y=Q+K+F+W+Z,ne=Math.min(x.offsetHeight*5,Y),B=window.getComputedStyle(_),ee=parseInt(B.paddingTop,10),ue=parseInt(B.paddingBottom,10),Te=P.top+P.height/2-Mi,Le=V-Te,Ce=x.offsetHeight/2,we=x.offsetTop+Ce,Ie=Q+K+we,Ke=Y-Ie;if(Ie<=Te){const st=x===k[k.length-1].ref.current;u.style.bottom="0px";const it=f.clientHeight-_.offsetTop-_.offsetHeight,ve=Math.max(Le,Ce+(st?ue:0)+it+Z),je=Ie+ve;u.style.height=je+"px"}else{const st=x===k[0].ref.current;u.style.top="0px";const ve=Math.max(Te,Q+_.offsetTop+(st?ee:0)+Ce)+Ke;u.style.height=ve+"px",_.scrollTop=Ie-Te+_.offsetTop}u.style.margin=`${Mi}px 0`,u.style.minHeight=ne+"px",u.style.maxHeight=V+"px",r==null||r(),requestAnimationFrame(()=>w.current=!0)}},[v,a.trigger,a.valueNode,u,f,_,x,j,a.dir,r]);en(()=>I(),[I]);const[M,U]=E.useState();en(()=>{f&&U(window.getComputedStyle(f).zIndex)},[f]);const z=E.useCallback(P=>{P&&b.current===!0&&(I(),C==null||C(),b.current=!1)},[I,C]);return o.jsx(k7,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:w,onScrollButtonChange:z,children:o.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:o.jsx(Je.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});FP.displayName=P7;var R7="SelectPopperPosition",bx=E.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Mi,...a}=t,c=Hm(n);return o.jsx(gT,{...c,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});bx.displayName=R7;var[k7,E0]=gu(fl,{}),Nx="SelectViewport",VP=E.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=wa(Nx,n),c=E0(Nx,n),u=jt(e,a.onViewportChange),h=E.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(qm.Slot,{scope:n,children:o.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"auto",...s.style},onScroll:He(s.onScroll,f=>{const g=f.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:v}=c;if(v!=null&&v.current&&y){const w=Math.abs(h.current-g.scrollTop);if(w>0){const b=window.innerHeight-Mi*2,_=parseFloat(y.style.minHeight),x=parseFloat(y.style.height),j=Math.max(_,x);if(j<b){const C=j+w,I=Math.min(b,C),M=C-I;y.style.height=I+"px",y.style.bottom==="0px"&&(g.scrollTop=M>0?M:0,y.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});VP.displayName=Nx;var UP="SelectGroup",[O7,D7]=gu(UP),L7=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ko();return o.jsx(O7,{scope:n,id:s,children:o.jsx(Je.div,{role:"group","aria-labelledby":s,...r,ref:e})})});L7.displayName=UP;var $P="SelectLabel",zP=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=D7($P,n);return o.jsx(Je.div,{id:s.id,...r,ref:e})});zP.displayName=$P;var Hp="SelectItem",[M7,BP]=gu(Hp),qP=E.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...c}=t,u=xa(Hp,n),h=wa(Hp,n),f=u.value===r,[g,y]=E.useState(a??""),[v,w]=E.useState(!1),b=jt(e,j=>{var C;return(C=h.itemRefCallback)==null?void 0:C.call(h,j,r,s)}),_=Ko(),x=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(M7,{scope:n,value:r,disabled:s,textId:_,isSelected:f,onItemTextChange:E.useCallback(j=>{y(C=>C||((j==null?void 0:j.textContent)??"").trim())},[]),children:o.jsx(qm.ItemSlot,{scope:n,value:r,disabled:s,textValue:g,children:o.jsx(Je.div,{role:"option","aria-labelledby":_,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:b,onFocus:He(c.onFocus,()=>w(!0)),onBlur:He(c.onBlur,()=>w(!1)),onPointerUp:He(c.onPointerUp,x),onPointerMove:He(c.onPointerMove,j=>{var C;s?(C=h.onItemLeave)==null||C.call(h):j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:He(c.onPointerLeave,j=>{var C;j.currentTarget===document.activeElement&&((C=h.onItemLeave)==null||C.call(h))}),onKeyDown:He(c.onKeyDown,j=>{var I;((I=h.searchRef)==null?void 0:I.current)!==""&&j.key===" "||(b7.includes(j.key)&&x(),j.key===" "&&j.preventDefault())})})})})});qP.displayName=Hp;var od="SelectItemText",WP=E.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,c=xa(od,n),u=wa(od,n),h=BP(od,n),f=C7(od,n),[g,y]=E.useState(null),v=jt(e,j=>y(j),h.onItemTextChange,j=>{var C;return(C=u.itemTextRefCallback)==null?void 0:C.call(u,j,h.value,h.disabled)}),w=g==null?void 0:g.textContent,b=E.useMemo(()=>o.jsx("option",{value:h.value,disabled:h.disabled,children:w},h.value),[h.disabled,h.value,w]),{onNativeOptionAdd:_,onNativeOptionRemove:x}=f;return en(()=>(_(b),()=>x(b)),[_,x,b]),o.jsxs(o.Fragment,{children:[o.jsx(Je.span,{id:h.textId,...a,ref:v}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?pl.createPortal(a.children,c.valueNode):null]})});WP.displayName=od;var HP="SelectItemIndicator",KP=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return BP(HP,n).isSelected?o.jsx(Je.span,{"aria-hidden":!0,...r,ref:e}):null});KP.displayName=HP;var Sx="SelectScrollUpButton",GP=E.forwardRef((t,e)=>{const n=wa(Sx,t.__scopeSelect),r=E0(Sx,t.__scopeSelect),[s,a]=E.useState(!1),c=jt(e,r.onScrollButtonChange);return en(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=h.scrollTop>0;a(f)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?o.jsx(YP,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});GP.displayName=Sx;var Tx="SelectScrollDownButton",QP=E.forwardRef((t,e)=>{const n=wa(Tx,t.__scopeSelect),r=E0(Tx,t.__scopeSelect),[s,a]=E.useState(!1),c=jt(e,r.onScrollButtonChange);return en(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<f;a(g)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?o.jsx(YP,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});QP.displayName=Tx;var YP=E.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=wa("SelectScrollButton",n),c=E.useRef(null),u=Wm(n),h=E.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return E.useEffect(()=>()=>h(),[h]),en(()=>{var g;const f=u().find(y=>y.ref.current===document.activeElement);(g=f==null?void 0:f.ref.current)==null||g.scrollIntoView({block:"nearest"})},[u]),o.jsx(Je.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:He(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:He(s.onPointerMove,()=>{var f;(f=a.onItemLeave)==null||f.call(a),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:He(s.onPointerLeave,()=>{h()})})}),F7="SelectSeparator",XP=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(Je.div,{"aria-hidden":!0,...r,ref:e})});XP.displayName=F7;var Cx="SelectArrow",V7=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Hm(n),a=xa(Cx,n),c=wa(Cx,n);return a.open&&c.position==="popper"?o.jsx(yT,{...s,...r,ref:e}):null});V7.displayName=Cx;function JP(t){return t===""||t===void 0}var ZP=E.forwardRef((t,e)=>{const{value:n,...r}=t,s=E.useRef(null),a=jt(e,s),c=iP(n);return E.useEffect(()=>{const u=s.current,h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==n&&g){const y=new Event("change",{bubbles:!0});g.call(u,n),u.dispatchEvent(y)}},[c,n]),o.jsx(Hd,{asChild:!0,children:o.jsx("select",{...r,ref:a,defaultValue:n})})});ZP.displayName="BubbleSelect";function eR(t){const e=In(t),n=E.useRef(""),r=E.useRef(0),s=E.useCallback(c=>{const u=n.current+c;e(u),function h(f){n.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>h(""),1e3))}(u)},[e]),a=E.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function tR(t,e,n){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let c=U7(t,Math.max(a,0));s.length===1&&(c=c.filter(f=>f!==n));const h=c.find(f=>f.textValue.toLowerCase().startsWith(s.toLowerCase()));return h!==n?h:void 0}function U7(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $7=IP,nR=AP,z7=RP,B7=kP,q7=OP,rR=DP,W7=VP,sR=zP,iR=qP,H7=WP,K7=KP,oR=GP,aR=QP,lR=XP;const lp=$7,cp=z7,wd=E.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(nR,{ref:r,className:Qe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(B7,{asChild:!0,children:o.jsx(OS,{className:"h-4 w-4 opacity-50"})})]}));wd.displayName=nR.displayName;const cR=E.forwardRef(({className:t,...e},n)=>o.jsx(oR,{ref:n,className:Qe("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(J2,{className:"h-4 w-4"})}));cR.displayName=oR.displayName;const uR=E.forwardRef(({className:t,...e},n)=>o.jsx(aR,{ref:n,className:Qe("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(OS,{className:"h-4 w-4"})}));uR.displayName=aR.displayName;const _d=E.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(q7,{children:o.jsxs(rR,{ref:s,className:Qe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(cR,{}),o.jsx(W7,{className:Qe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(uR,{})]})}));_d.displayName=rR.displayName;const G7=E.forwardRef(({className:t,...e},n)=>o.jsx(sR,{ref:n,className:Qe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));G7.displayName=sR.displayName;const Ro=E.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(iR,{ref:r,className:Qe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(K7,{children:o.jsx(up,{className:"h-4 w-4"})})}),o.jsx(H7,{children:e})]}));Ro.displayName=iR.displayName;const Q7=E.forwardRef(({className:t,...e},n)=>o.jsx(lR,{ref:n,className:Qe("-mx-1 my-1 h-px bg-muted",t),...e}));Q7.displayName=lR.displayName;function Y7({currentPage:t,totalPages:e,totalCount:n,pageSize:r,hasNextPage:s,isLoading:a,isFetchingNextPage:c,cachedPages:u,onPageChange:h,onPageSizeChange:f,onLoadNext:g,pageSizeOptions:y=[5,10,20,50]}){const v=()=>{const w=[];if(e<=7)for(let _=0;_<e;_++)w.push(_);else if(t<3){for(let _=0;_<5;_++)w.push(_);w.push("ellipsis"),w.push(e-1)}else if(t>e-4){w.push(0),w.push("ellipsis");for(let _=e-5;_<e;_++)w.push(_)}else{w.push(0),w.push("ellipsis");for(let _=t-1;_<=t+1;_++)w.push(_);w.push("ellipsis"),w.push(e-1)}return w};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Iy,{className:"h-4 w-4"}),o.jsxs("span",{children:["Showing page ",t+1," of ",e," (",n," total)"]})]}),u.length>0&&o.jsxs(Pt,{variant:"secondary",className:"gap-1",children:[o.jsx(Iy,{className:"h-3 w-3"}),u.length," page",u.length!==1?"s":""," cached"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Items per page:"}),o.jsxs(lp,{value:r.toString(),onValueChange:w=>f(Number(w)),children:[o.jsx(wd,{className:"w-20",children:o.jsx(cp,{})}),o.jsx(_d,{children:y.map(w=>o.jsx(Ro,{value:w.toString(),children:w},w))})]})]})]}),o.jsx(pP,{children:o.jsxs(mP,{children:[o.jsx(ap,{children:o.jsx(gP,{onClick:()=>t>0&&h(t-1),className:t===0?"pointer-events-none opacity-50":"cursor-pointer"})}),v().map((w,b)=>o.jsx(ap,{children:w==="ellipsis"?o.jsx(vP,{}):o.jsxs(zm,{onClick:()=>h(w),isActive:w===t,className:"cursor-pointer",children:[w+1,u.includes(w)&&o.jsx(Iy,{className:"h-3 w-3 ml-1 text-primary"})]})},b)),o.jsx(ap,{children:o.jsx(yP,{onClick:()=>{s&&(g(),h(t+1))},className:s?"cursor-pointer":"pointer-events-none opacity-50"})})]})}),c&&o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[o.jsx(Ji,{className:"h-4 w-4 animate-spin"}),o.jsx("span",{children:"Loading next page..."})]})]})}function $1(){const[t,e]=E.useState(""),[n,r]=E.useState(null),[s,a]=E.useState(!1),[c,u]=E.useState(10),[h,f]=E.useState(0),[g,y]=E.useState(!1),[v,w]=E.useState(!1),[b,_]=E.useState(!1),[x,j]=E.useState(null),[C,I]=E.useState(null),[M,U]=E.useState(null),{data:z,allData:P,currentPage:R,totalPages:D,totalCount:O,hasNextPage:k,isLoading:V,isFetchingNextPage:F,error:H,loadNextPage:Q,isPageCached:K,prefetchNextPage:Z}=J8(c),{createLecture:W,updateLecture:Y}=$m(),ne=H?H.message:null,[B]=Yd(),ee=B.get("lecture");B.get("tab");let Te=t?P.filter(ve=>ve.title.toLowerCase().includes(t.toLowerCase())||ve.subject.toLowerCase().includes(t.toLowerCase())):z;ee&&(Te=P.filter(ve=>ve.id===ee));const Le=[];for(let ve=0;ve<=R;ve++)K(ve)&&Le.push(ve);const Ce=ve=>{f(ve),!K(ve)&&ve>R&&Q()},we=ve=>{u(ve),f(0)};_e.useEffect(()=>{if(k&&!F){const ve=setTimeout(()=>{Z()},1e3);return()=>clearTimeout(ve)}},[k,F,Z]);const Ie=()=>{r(null),a(!0)},Ke=ve=>{r(ve),a(!0)},Ve=ve=>{j(ve),y(!0)},st=ve=>{I(ve),w(!0)},it=ve=>{U(ve),_(!0)};return g?o.jsx(w0,{video:x,onClose:()=>{y(!1),j(null)},onSave:async ve=>{try{x&&(console.log(" Video updated successfully"),alert("Video updated! The page will reload to show changes."),window.location.reload()),y(!1),j(null)}catch(je){console.error("Error saving video:",je),alert("Failed to save video")}}}):v?o.jsx(x0,{file:C,onClose:()=>{w(!1),I(null)},onSave:async ve=>{try{C&&(console.log(" File updated successfully"),alert("File updated! The page will reload to show changes."),window.location.reload()),w(!1),I(null)}catch(je){console.error("Error saving file:",je),alert("Failed to save file")}}}):b?o.jsx(v0,{quiz:M,onClose:()=>{_(!1),U(null)},onSave:async ve=>{try{M&&(console.log(" Quiz updated successfully"),alert("Quiz updated! The page will reload to show changes."),window.location.reload()),_(!1),U(null)}catch(je){console.error("Error saving quiz:",je),alert("Failed to save quiz")}}}):s?o.jsx(Um,{lecture:n,onClose:()=>{a(!1),r(null)},onSave:async ve=>{try{n?await Y(n.id,ve):await W(ve,"default-subject"),a(!1),r(null)}catch(je){console.error("Error saving lecture:",je)}}}):(ee&&z.find(ve=>ve.id===ee),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Resources Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Organize educational content by lectures with videos, files, and quizzes"})]}),o.jsxs(te,{onClick:Ie,className:"flex items-center gap-2",children:[o.jsx(Zt,{className:"h-4 w-4"}),"Create Lecture"]})]}),o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Se,{placeholder:"Search lectures by title or subject...",value:t,onChange:ve=>e(ve.target.value),className:"pl-10"})]})})}),V&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Ji,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading lectures..."})]})}),ne&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading lectures"}),o.jsx("p",{className:"text-muted-foreground",children:ne})]})}),!V&&!ne&&o.jsx("div",{className:"space-y-6",children:Te.map(ve=>o.jsxs(pe,{className:`hover:shadow-lg transition-all duration-200 border-l-4 ${ee===ve.id?"border-l-primary bg-primary/5":"border-l-primary/20 hover:border-l-primary"}`,children:[o.jsx(We,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(Ss,{className:"h-5 w-5 text-primary"}),o.jsx(Ge,{className:"text-xl",children:ve.title}),o.jsx(Pt,{variant:"secondary",children:ve.subject})]}),o.jsx(Tt,{className:"text-base",children:ve.description}),o.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx($c,{className:"h-3 w-3"}),ve.createdBy]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(xc,{className:"h-3 w-3"}),ve.createdAt.toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>Ke(ve),children:o.jsx(ns,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})}),o.jsx(me,{children:o.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx(ii,{className:"h-4 w-4 text-green-600"}),"Videos (",ve.videos.length,")"]}),ve.videos.length>0&&o.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{ve.videos.forEach(je=>window.open(je.youtubeUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Play All"})]}),ve.videos.length>0?o.jsx("div",{className:"space-y-2",children:ve.videos.map(je=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{const gt=je.youtubeUrl||je.url;gt&&gt!==""&&gt!=="#"?window.open(gt,"_blank"):alert("No URL available for this video. Click the edit button to add a URL.")},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"relative",children:[je.thumbnailUrl&&o.jsx("img",{src:je.thumbnailUrl,alt:je.title,className:"w-16 h-12 object-cover rounded"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(ii,{className:"h-6 w-6 text-white"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:je.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(dp,{className:"h-3 w-3"}),je.duration]})]})]})}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:gt=>{gt.stopPropagation(),Ve(je)},title:"Edit Video",children:o.jsx(ns,{className:"h-4 w-4"})})]},je.id))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx(Is,{className:"h-4 w-4 text-blue-600"}),"Files (",ve.files.length,")"]}),ve.files.length>0&&o.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{ve.files.forEach(je=>window.open(je.fileUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Download All"})]}),ve.files.length>0?o.jsx("div",{className:"space-y-2",children:ve.files.map(je=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{console.log(" File clicked:",je),console.log(" File URL:",je.fileUrl),console.log(" Fallback URL:",je.url);const gt=je.fileUrl||je.url;console.log(" Opening URL:",gt),gt&&gt!==""&&gt!=="#"?window.open(gt,"_blank"):(console.error(" No valid URL found"),alert(`No URL available for this file.
fileUrl: ${je.fileUrl}
url: ${je.url}`))},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"relative",children:[je.imageUrl||je.thumbnailUrl?o.jsx("img",{src:je.imageUrl||je.thumbnailUrl,alt:je.title,className:"w-16 h-12 object-cover rounded"}):o.jsx("div",{className:"w-16 h-12 bg-blue-100 rounded flex items-center justify-center",children:o.jsx(Is,{className:"h-6 w-6 text-blue-600"})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Is,{className:"h-4 w-4 text-white"})})]}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:je.title})})]})}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:gt=>{gt.stopPropagation(),st(je)},title:"Edit File",children:o.jsx(ns,{className:"h-4 w-4"})})]},je.id))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx(qi,{className:"h-4 w-4 text-purple-600"}),"Quizzes (",ve.quizzes.length,")"]}),ve.quizzes.length>0&&o.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{alert(`Starting all ${ve.quizzes.length} quizzes for: ${ve.title}`)},className:"h-6 px-2 text-xs",children:"Start All"})]}),ve.quizzes.length>0?o.jsx("div",{className:"space-y-2",children:ve.quizzes.map(je=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{alert(`Starting quiz: ${je.title}
Time limit: ${je.timeLimit} minutes
Passing score: ${je.passingScore}%`)},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(qi,{className:"h-4 w-4 text-purple-600 mt-1 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:je.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(dp,{className:"h-3 w-3"}),je.timeLimit,"min",o.jsx("span",{children:""}),o.jsxs("span",{children:[je.passingScore,"% pass"]})]})]})]})}),o.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:gt=>{gt.stopPropagation(),it(je)},title:"Edit Quiz",children:o.jsx(ns,{className:"h-4 w-4"})})]},je.id))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"})]})]})})]},ve.id))}),!V&&!ne&&Te.length===0&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Ss,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No lectures found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"No lectures match your search criteria.":"Start by creating your first lecture with videos, files, and quizzes."}),o.jsxs(te,{onClick:Ie,children:[o.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Create Lecture"]})]})}),!V&&!ne&&!t&&o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsx(Y7,{currentPage:R,totalPages:D,totalCount:O,pageSize:c,hasNextPage:k,isLoading:V,isFetchingNextPage:F,cachedPages:Le,onPageChange:Ce,onPageSizeChange:we,onLoadNext:Q})})})]}))}function X7({professor:t,onClose:e,onSave:n}){const[r,s]=E.useState({name:"",title:"",department:"",email:"",others:"",officeLocation:"",researchAreas:"",imageUrl:""}),[a,c]=E.useState(!1);E.useEffect(()=>{t&&s({name:t.name||"",title:t.title||"",department:t.department||"",email:t.email||"",others:t.others||"",officeLocation:t.officeLocation||"",researchAreas:(t.researchAreas||[]).join(", "),imageUrl:t.imageUrl||""})},[t]);const u=async h=>{h.preventDefault(),c(!0);try{const f={...r,researchAreas:r.researchAreas?r.researchAreas.split(",").map(g=>g.trim()).filter(Boolean):[]};n(f)}catch(f){console.error("Error saving professor:",f)}finally{c(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:e,children:[o.jsx(ss,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Professor":"Add Professor"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update professor information":"Add a new professor to the faculty"})]})]})}),o.jsxs("form",{onSubmit:u,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsxs(Ge,{className:"flex items-center gap-2",children:[o.jsx(rs,{className:"h-5 w-5"}),"Professor Information"]}),o.jsx(Tt,{children:"Basic information about the professor"})]}),o.jsxs(me,{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs(Zc,{className:"w-20 h-20",children:[o.jsx($d,{src:r.imageUrl,alt:r.name}),o.jsx(eu,{children:o.jsx(rs,{className:"w-8 h-8"})})]}),o.jsxs("div",{className:"space-y-2 flex-1",children:[o.jsx(Ae,{htmlFor:"imageUrl",children:"Profile Image URL"}),o.jsx(Se,{id:"imageUrl",placeholder:"https://example.com/profile.jpg",value:r.imageUrl,onChange:h=>s(f=>({...f,imageUrl:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"name",children:"Full Name *"}),o.jsx(Se,{id:"name",placeholder:"Dr. John Smith",value:r.name,onChange:h=>s(f=>({...f,name:h.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"title",children:"Title"}),o.jsx(Se,{id:"title",placeholder:"e.g., Associate Professor",value:r.title,onChange:h=>s(f=>({...f,title:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Ae,{htmlFor:"department",className:"flex items-center gap-2",children:[o.jsx(G2,{className:"h-4 w-4"}),"Department"]}),o.jsx(Se,{id:"department",placeholder:"Internal Medicine",value:r.department,onChange:h=>s(f=>({...f,department:h.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"others",children:"Others"}),o.jsx(Se,{id:"others",placeholder:"Other contact or notes",value:r.others,onChange:h=>s(f=>({...f,others:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Ae,{htmlFor:"email",className:"flex items-center gap-2",children:[o.jsx(hp,{className:"h-4 w-4"}),"Email Address"]}),o.jsx(Se,{id:"email",type:"email",placeholder:"john.smith@university.edu",value:r.email,onChange:h=>s(f=>({...f,email:h.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Ae,{htmlFor:"officeLocation",className:"flex items-center gap-2",children:[o.jsx(Ed,{className:"h-4 w-4"}),"Office Location"]}),o.jsx(Se,{id:"officeLocation",placeholder:"Medical Building, Room 301",value:r.officeLocation,onChange:h=>s(f=>({...f,officeLocation:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"researchAreas",children:"Research Areas"}),o.jsx(Se,{id:"researchAreas",placeholder:"e.g., Cardiology, Epidemiology",value:r.researchAreas,onChange:h=>s(f=>({...f,researchAreas:h.target.value}))})]}),o.jsx("div",{className:"space-y-2",children:o.jsx("div",{})})]})]})]}),r.name&&o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Preview"}),o.jsx(Tt,{children:"How the professor will appear in the system"})]}),o.jsx(me,{children:o.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[o.jsxs(Zc,{className:"h-12 w-12",children:[o.jsx($d,{src:r.imageUrl,alt:r.name}),o.jsx(eu,{children:o.jsx(rs,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold",children:r.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r.department}),o.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm text-muted-foreground",children:[r.email&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(hp,{className:"h-3 w-3"}),o.jsx("span",{children:r.email})]}),r.officeLocation&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ed,{className:"h-3 w-3"}),o.jsx("span",{children:r.officeLocation})]}),r.others&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(rs,{className:"h-3 w-3"}),o.jsx("span",{children:r.others})]})]})]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:a,children:[o.jsx(Zi,{className:"h-4 w-4 mr-2"}),a?"Saving...":t?"Update Professor":"Add Professor"]})]})]})]})}function J7(){const[t,e]=E.useState(""),[n,r]=E.useState(null),[s,a]=E.useState(!1),{professors:c,loading:u,error:h,createProfessor:f,updateProfessor:g,deleteProfessor:y,isOfflineMode:v}=_A(),w=c.filter(_=>_.name.toLowerCase().includes(t.toLowerCase())||_.department.toLowerCase().includes(t.toLowerCase())||_.email.toLowerCase().includes(t.toLowerCase())),b=async _=>{if(window.confirm("Are you sure you want to delete this professor?"))try{await y(_)}catch(x){console.error("Error deleting professor:",x),alert("Failed to delete professor. Please try again.")}};return s?o.jsx(X7,{professor:n,onClose:()=>{a(!1),r(null)},onSave:async _=>{try{n?await g(n.id,_):await f(_),a(!1),r(null)}catch(x){console.error("Error saving professor:",x),alert("Failed to save professor. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Professors Management"}),o.jsxs("p",{className:"text-muted-foreground",children:["Manage faculty information and profiles",v&&o.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:" Working in offline mode"})]})]}),o.jsxs(te,{onClick:()=>a(!0),children:[o.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]}),o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Se,{placeholder:"Search professors by name, department, or email...",value:t,onChange:_=>e(_.target.value),className:"pl-10"})]})})}),u&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Ji,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading professors..."})]})}),h&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading professors"}),o.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&o.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:w.map(_=>o.jsxs(pe,{className:"hover:shadow-md transition-shadow",children:[o.jsx(We,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(Zc,{className:"h-12 w-12",children:[o.jsx($d,{src:_.imageUrl,alt:_.name}),o.jsx(eu,{children:o.jsx(rs,{className:"h-6 w-6"})})]}),o.jsxs("div",{children:[o.jsx(Ge,{className:"text-lg",children:_.name}),o.jsx(Pt,{variant:"secondary",className:"text-xs",children:_.department})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>{r(_),a(!0)},children:o.jsx(ns,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>b(_.id),className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})}),o.jsx(me,{children:o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"",children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:_.title}),o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[o.jsx(hp,{className:"h-4 w-4"}),o.jsx("span",{children:_.email})]})]}),_.phone&&o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(rs,{className:"h-4 w-4"}),o.jsx("span",{children:_.phone})]}),_.officeLocation&&o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(Ed,{className:"h-4 w-4"}),o.jsx("span",{children:_.officeLocation})]}),_.bio&&o.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:_.bio}),_.researchAreas&&_.researchAreas.length>0&&o.jsx("div",{className:"flex gap-2 flex-wrap",children:_.researchAreas.map(x=>o.jsx(Pt,{children:x},x))}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_.website&&o.jsx("a",{href:_.website,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Website"}),_.linkedin&&o.jsx("a",{href:_.linkedin,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"LinkedIn"})]})]})})]},_.id))}),!u&&!h&&w.length===0&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx($c,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No professors found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"No professors match your search criteria.":"Start by adding your first professor."}),o.jsxs(te,{onClick:()=>a(!0),children:[o.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]})})]})}function Z7(){const{users:t,loading:e,error:n,updateUser:r,deleteUser:s}=Vm(),a=async u=>{const h=u.role==="admin"?"user":"admin";await r(u.id,{role:h})},c=(u,h)=>{if(!u)return"-";const f=u.match(/(19|20)\d{2}/);if(f)return f[0];if(h)try{const g=new Date(h);if(!isNaN(g.getTime()))return String(g.getFullYear())}catch{}return"-"};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fO,{className:"h-6 w-6 text-blue-600"}),o.jsx("h1",{className:"text-3xl font-bold",children:"Users"})]}),o.jsxs(pe,{children:[o.jsx(We,{children:o.jsxs(Ge,{children:["All Users (",t.length,")"]})}),o.jsx(me,{children:e?o.jsx("div",{children:"Loading..."}):n?o.jsx("div",{className:"text-destructive",children:n}):t.length===0?o.jsx("div",{className:"text-muted-foreground",children:"No users found."}):(()=>{const u={};t.forEach(f=>{const g=f.yearLabel&&String(f.yearLabel).trim()!==""?String(f.yearLabel):"Unassigned";u[g]||(u[g]=[]),u[g].push(f)});const h=Object.keys(u).sort((f,g)=>{const y=f.match(/Year\s*(\d+)/i),v=g.match(/Year\s*(\d+)/i);return y&&v?parseInt(y[1],10)-parseInt(v[1],10):y?-1:v||f==="Unassigned"?1:g==="Unassigned"?-1:f.localeCompare(g)});return o.jsx("div",{className:"space-y-6",children:h.map(f=>o.jsxs("div",{children:[o.jsx("div",{className:"flex items-center justify-between mb-2",children:o.jsxs("h3",{className:"text-lg font-semibold",children:[f," ",o.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",u[f].length,")"]})]})}),o.jsx("div",{className:"space-y-2",children:u[f].map(g=>{var y;return o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[o.jsx(Zc,{className:"h-12 w-12",children:g.photoURL?o.jsx($d,{src:g.photoURL,alt:g.displayName}):o.jsx(eu,{children:((y=g.displayName)==null?void 0:y[0])||"U"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:g.displayName}),o.jsx("div",{className:"text-xs text-muted-foreground truncate",children:g.email}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",g.createdAt?new Date(g.createdAt).toLocaleString():"-",o.jsxs("span",{className:"ml-3",children:["Year: ",g.yearLabel||c(g.id,g.createdAt)]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pt,{children:g.role||"user"}),o.jsx(te,{size:"sm",variant:"outline",onClick:()=>a(g),children:g.role==="admin"?"Demote":"Make Admin"}),o.jsx(te,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>s(g.id),children:o.jsx(En,{className:"h-4 w-4"})})]})]},g.id)})})]},f))})})()})]})]})}function eq(t){if(!t)return 0;if(typeof t=="number")return t;const e=String(t).trim();if(/^\d+$/.test(e))return parseInt(e,10);const n=e.split(":").map(r=>parseInt(r,10));return n.length===3?n[0]*3600+(n[1]||0)*60+(n[2]||0):n.length===2?(n[0]||0)*60+(n[1]||0):0}function tq(t){if(!t||t<=0)return"0:00";const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60;return e>0?`${e}:${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${n}:${String(r).padStart(2,"0")}`}function nq(){var D;const{id:t}=QT(),e=ou(),{years:n,subjects:r,loading:s,createLecture:a,deleteLecture:c,deleteSubject:u,addVideo:h,addFile:f,addQuiz:g}=va(),[y,v]=E.useState(null),[w,b]=E.useState(!1),[_,x]=E.useState(!1),[j,C]=E.useState(!1),[I,M]=E.useState(!1),U=r.find(O=>O.id===t),z=O=>{v(O||null),b(!0)},P=O=>{v(O||null),x(!0)},R=O=>{v(O||null),C(!0)};return w&&y?o.jsx(w0,{lectureId:y,onClose:()=>{b(!1),v(null)},onSave:async O=>{U!=null&&U.id&&y&&await h(U.id,y,O),b(!1),v(null)}}):_&&y?o.jsx(x0,{lectureId:y,onClose:()=>{x(!1),v(null)},onSave:async O=>{U!=null&&U.id&&y&&await f(U.id,y,O),x(!1),v(null)}}):j&&y?o.jsx(v0,{lectureId:y,onClose:()=>{C(!1),v(null)},onSave:async O=>{U!=null&&U.id&&y&&await g(U.id,y,O),C(!1),v(null)}}):I?o.jsx(Um,{subjectId:(U==null?void 0:U.id)||null,subjectName:U==null?void 0:U.name,yearType:(D=n.find(O=>O.id===(U==null?void 0:U.yearId)))==null?void 0:D.type,onClose:()=>M(!1),onSave:async O=>{U!=null&&U.id&&await a(O),M(!1)}}):s?o.jsx("div",{children:"Loading..."}):U?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:U.name}),o.jsx("p",{className:"text-muted-foreground",children:"Subject details and lectures"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(te,{variant:"outline",size:"sm",onClick:()=>M(!0),className:"flex items-center gap-2",children:[o.jsx(Zt,{className:"h-4 w-4"}),"Add Lecture"]}),o.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(U&&confirm(`Delete subject "${U.name}"? This will remove all lectures.`))try{await u(U.id),e("/admin/years")}catch(O){console.error(O),alert("Failed to delete subject")}},children:o.jsx(En,{className:"h-4 w-4"})}),o.jsx(Zn,{to:"/admin/years",children:o.jsx(te,{variant:"ghost",children:"Back"})})]})]}),o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Lectures"}),o.jsx(Tt,{children:"All lectures for this subject"})]}),o.jsx(me,{children:o.jsx("div",{className:"grid gap-4",children:U.lectures&&U.lectures.length>0?U.lectures.map(O=>{var V,F;const k=O.imageUrl||O.videos&&O.videos[0]&&O.videos[0].thumbnailUrl||"";return o.jsxs("div",{className:"p-3 border rounded-md flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[k?o.jsx("img",{src:k,alt:O.name,width:1280,height:720,style:{width:160,height:90,objectFit:"cover"},className:"rounded"}):o.jsx("div",{className:"w-40 h-24 bg-muted rounded flex items-center justify-center text-xs",children:"No image"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:O.name}),o.jsx("div",{className:"text-sm text-muted-foreground",children:O.description})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>z(O.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Video",children:[o.jsx(ii,{className:"h-3 w-3 text-blue-600"}),o.jsx("span",{children:"Add Video"})]}),o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>P(O.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add File",children:[o.jsx(Is,{className:"h-3 w-3 text-green-600"}),o.jsx("span",{children:"Add File"})]}),o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>R(O.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Quiz",children:[o.jsx(qi,{className:"h-3 w-3 text-purple-600"}),o.jsx("span",{children:"Add Quiz"})]}),o.jsx(te,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(U&&confirm(`Delete lecture "${O.name}"?`))try{await c(U.id,O.id)}catch(H){console.error(H),alert("Failed to delete lecture")}},children:o.jsx(En,{className:"h-3 w-3"})}),o.jsxs("div",{className:"flex items-center gap-2",children:[O.videos&&O.videos.length>0?(()=>{const H=(O.videos||[]).reduce((Q,K)=>Q+eq(K.duration||K.time||K.durationSeconds||K.length),0);return o.jsxs("button",{onClick:()=>e(`/admin/videos?lecture=${O.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:[o.jsx(ii,{className:"h-4 w-4"}),o.jsxs("span",{children:["(",O.videos.length,")"]}),o.jsx("span",{className:"text-muted-foreground",children:tq(H)})]})})():o.jsx("button",{onClick:()=>e(`/admin/videos?lecture=${O.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:o.jsx(ii,{className:"h-4 w-4"})}),o.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${O.id}&tab=files`),className:"text-xs text-green-600 flex items-center gap-1 px-2",title:"Files",children:[o.jsx(Is,{className:"h-4 w-4"}),o.jsxs("span",{children:["(",((V=O.files)==null?void 0:V.length)||0,")"]})]}),o.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${O.id}&tab=quizzes`),className:"text-xs text-purple-600 flex items-center gap-1 px-2",title:"Quizzes",children:[o.jsx(qi,{className:"h-4 w-4"}),o.jsxs("span",{children:["(",((F=O.quizzes)==null?void 0:F.length)||0,")"]})]})]})]})]},O.id)}):o.jsx("div",{className:"text-muted-foreground",children:"No lectures yet for this subject."})})})]})]}):o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Subject not found"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"The subject you requested does not exist."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(te,{children:"Back to Years"})})})]})})}var lv="rovingFocusGroup.onEntryFocus",rq={bubbles:!1,cancelable:!0},Km="RovingFocusGroup",[Ix,dR,sq]=Ax(Km),[iq,hR]=Xi(Km,[sq]),[oq,aq]=iq(Km),fR=E.forwardRef((t,e)=>o.jsx(Ix.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Ix.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(lq,{...t,ref:e})})}));fR.displayName=Km;var lq=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:f,preventScrollOnEntryFocus:g=!1,...y}=t,v=E.useRef(null),w=jt(e,v),b=_0(a),[_=null,x]=rl({prop:c,defaultProp:u,onChange:h}),[j,C]=E.useState(!1),I=In(f),M=dR(n),U=E.useRef(!1),[z,P]=E.useState(0);return E.useEffect(()=>{const R=v.current;if(R)return R.addEventListener(lv,I),()=>R.removeEventListener(lv,I)},[I]),o.jsx(oq,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:_,onItemFocus:E.useCallback(R=>x(R),[x]),onItemShiftTab:E.useCallback(()=>C(!0),[]),onFocusableItemAdd:E.useCallback(()=>P(R=>R+1),[]),onFocusableItemRemove:E.useCallback(()=>P(R=>R-1),[]),children:o.jsx(Je.div,{tabIndex:j||z===0?-1:0,"data-orientation":r,...y,ref:w,style:{outline:"none",...t.style},onMouseDown:He(t.onMouseDown,()=>{U.current=!0}),onFocus:He(t.onFocus,R=>{const D=!U.current;if(R.target===R.currentTarget&&D&&!j){const O=new CustomEvent(lv,rq);if(R.currentTarget.dispatchEvent(O),!O.defaultPrevented){const k=M().filter(K=>K.focusable),V=k.find(K=>K.active),F=k.find(K=>K.id===_),Q=[V,F,...k].filter(Boolean).map(K=>K.ref.current);gR(Q,g)}}U.current=!1}),onBlur:He(t.onBlur,()=>C(!1))})})}),pR="RovingFocusGroupItem",mR=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,...c}=t,u=Ko(),h=a||u,f=aq(pR,n),g=f.currentTabStopId===h,y=dR(n),{onFocusableItemAdd:v,onFocusableItemRemove:w}=f;return E.useEffect(()=>{if(r)return v(),()=>w()},[r,v,w]),o.jsx(Ix.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:o.jsx(Je.span,{tabIndex:g?0:-1,"data-orientation":f.orientation,...c,ref:e,onMouseDown:He(t.onMouseDown,b=>{r?f.onItemFocus(h):b.preventDefault()}),onFocus:He(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:He(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){f.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const _=dq(b,f.orientation,f.dir);if(_!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let j=y().filter(C=>C.focusable).map(C=>C.ref.current);if(_==="last")j.reverse();else if(_==="prev"||_==="next"){_==="prev"&&j.reverse();const C=j.indexOf(b.currentTarget);j=f.loop?hq(j,C+1):j.slice(C+1)}setTimeout(()=>gR(j))}})})})});mR.displayName=pR;var cq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function uq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function dq(t,e,n){const r=uq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return cq[r]}function gR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function hq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var fq=fR,pq=mR,b0="Tabs",[mq,lW]=Xi(b0,[hR]),yR=hR(),[gq,N0]=mq(b0),vR=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:c="horizontal",dir:u,activationMode:h="automatic",...f}=t,g=_0(u),[y,v]=rl({prop:r,onChange:s,defaultProp:a});return o.jsx(gq,{scope:n,baseId:Ko(),value:y,onValueChange:v,orientation:c,dir:g,activationMode:h,children:o.jsx(Je.div,{dir:g,"data-orientation":c,...f,ref:e})})});vR.displayName=b0;var xR="TabsList",wR=E.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=N0(xR,n),c=yR(n);return o.jsx(fq,{asChild:!0,...c,orientation:a.orientation,dir:a.dir,loop:r,children:o.jsx(Je.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});wR.displayName=xR;var _R="TabsTrigger",ER=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,c=N0(_R,n),u=yR(n),h=SR(c.baseId,r),f=TR(c.baseId,r),g=r===c.value;return o.jsx(pq,{asChild:!0,...u,focusable:!s,active:g,children:o.jsx(Je.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":f,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:h,...a,ref:e,onMouseDown:He(t.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?c.onValueChange(r):y.preventDefault()}),onKeyDown:He(t.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&c.onValueChange(r)}),onFocus:He(t.onFocus,()=>{const y=c.activationMode!=="manual";!g&&!s&&y&&c.onValueChange(r)})})})});ER.displayName=_R;var bR="TabsContent",NR=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...c}=t,u=N0(bR,n),h=SR(u.baseId,r),f=TR(u.baseId,r),g=r===u.value,y=E.useRef(g);return E.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),o.jsx(Rx,{present:s||g,children:({present:v})=>o.jsx(Je.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!v,id:f,tabIndex:0,...c,ref:e,style:{...t.style,animationDuration:y.current?"0s":void 0},children:v&&a})})});NR.displayName=bR;function SR(t,e){return`${t}-trigger-${e}`}function TR(t,e){return`${t}-content-${e}`}var yq=vR,CR=wR,IR=ER,jR=NR;const AR=yq,S0=E.forwardRef(({className:t,...e},n)=>o.jsx(CR,{ref:n,className:Qe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));S0.displayName=CR.displayName;const Cc=E.forwardRef(({className:t,...e},n)=>o.jsx(IR,{ref:n,className:Qe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Cc.displayName=IR.displayName;const Ic=E.forwardRef(({className:t,...e},n)=>o.jsx(jR,{ref:n,className:Qe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ic.displayName=jR.displayName;function vq({product:t,onClose:e,onSave:n}){const[r,s]=E.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",price:(t==null?void 0:t.price)||0,types:(t==null?void 0:t.types)||(t!=null&&t.price?[{name:"Default",price:t.price}]:[]),images:(t==null?void 0:t.images)||[""],categoryId:(t==null?void 0:t.categoryId)||""}),[a,c]=E.useState(!1),[u,h]=E.useState(null),f=async w=>{w.preventDefault(),c(!0);try{const b={...r,images:r.images.filter(_=>_.trim()!=="")};b.types&&b.types.length>0?(b.types=b.types.map(_=>({name:String(_.name||"").trim(),price:parseFloat(_.price)||0})),b.price=b.types[0].price||0):b.types=[],n(b)}catch(b){console.error("Error saving product:",b)}finally{c(!1)}},g=()=>{s(w=>({...w,images:[...w.images,""]}))},y=(w,b)=>{s(_=>({..._,images:_.images.map((x,j)=>j===w?b:x)}))},v=w=>{s(b=>({...b,images:b.images.filter((_,x)=>x!==w)}))};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:e,children:[o.jsx(ss,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Product":"Add Product"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update product details":"Create a new product"})]})]})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsxs(Ge,{className:"flex items-center gap-2",children:[o.jsx(gv,{className:"h-5 w-5 text-blue-600"}),"Product Information"]}),o.jsx(Tt,{children:"Basic information about the product"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"name",children:"Product Name *"}),o.jsx(Se,{id:"name",placeholder:"e.g., Medical Textbook",value:r.name,onChange:w=>s(b=>({...b,name:w.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{children:"Types & Prices"}),o.jsxs("div",{className:"space-y-2",children:[r.types&&r.types.length>0?r.types.map((w,b)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Se,{placeholder:"Type name (e.g., Pen)",value:w.name,onChange:_=>s(x=>({...x,types:x.types.map((j,C)=>C===b?{...j,name:_.target.value}:j)})),required:!0}),o.jsx(Se,{type:"number",step:"0.01",placeholder:"0.00",value:w.price,onChange:_=>s(x=>({...x,types:x.types.map((j,C)=>C===b?{...j,price:parseFloat(_.target.value)||0}:j)})),required:!0,className:"w-32"}),o.jsx(te,{type:"button",variant:"ghost",onClick:()=>s(_=>({..._,types:_.types.filter((x,j)=>j!==b)})),children:"Remove"})]},b)):o.jsx("div",{className:"text-muted-foreground",children:"No types defined."}),o.jsx("div",{children:o.jsxs(te,{type:"button",variant:"outline",onClick:()=>s(w=>({...w,types:[...w.types||[],{name:"Default",price:0}]})),children:[o.jsx(Zt,{className:"h-4 w-4 mr-2"})," Add Type"]})})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"description",children:"Description"}),o.jsx(Ps,{id:"description",placeholder:"Describe the product...",value:r.description,onChange:w=>s(b=>({...b,description:w.target.value})),rows:4})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"categoryId",children:"Category ID (Optional)"}),o.jsx(Se,{id:"categoryId",placeholder:"e.g., books, equipment",value:r.categoryId,onChange:w=>s(b=>({...b,categoryId:w.target.value}))})]})]})]}),o.jsxs(pe,{children:[o.jsx(We,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Ge,{children:"Product Images"}),o.jsx(Tt,{children:"Add image URLs for the product"})]}),o.jsxs(te,{type:"button",variant:"outline",onClick:g,children:[o.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})}),o.jsx(me,{className:"space-y-4",children:r.images.map((w,b)=>o.jsxs("div",{className:`flex gap-2 items-center ${u===b?"border-2 border-dashed p-2 rounded":""}`,onDragOver:_=>{_.preventDefault(),h(b)},onDragEnter:_=>{_.preventDefault(),h(b)},onDragLeave:()=>{h(null)},onDrop:async _=>{_.preventDefault(),h(null);try{const x=_.dataTransfer;if(!x)return;if(x.files&&x.files.length>0){const C=x.files[0];try{let I=null;try{I=await Tr(C)}catch(M){console.warn("Cloudinary upload failed, trying ImageKit fallback",(M==null?void 0:M.message)||M),I=await na(C,C.name)}I&&typeof I=="string"&&I.startsWith("http")?y(b,I):alert("Upload failed: unexpected response from upload provider")}catch(I){console.error("Drop upload error:",I);const U=((I==null?void 0:I.message)||String(I)||"").toLowerCase();if(U.includes("cloudinary signing did not return an api key")||U.includes("missing required parameter - api_key")||U.includes("missing required parameter 'api_key'")){const z=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(z&&z.trim())try{tl(null,null,z.trim());const P=await Tr(C);if(P&&typeof P=="string"&&P.startsWith("http")){y(b,P);return}}catch(P){console.error("Retry after API key failed:",P)}}alert("Upload failed: "+((I==null?void 0:I.message)||I))}return}const j=x.getData("text/uri-list")||x.getData("text/plain");if(j&&j.startsWith("http")){if(!window.confirm(`Upload the dragged URL to Cloudinary and replace it?
`+j))return;const I=await k1(j);I&&typeof I=="string"&&I.startsWith("http")?y(b,I):alert("Upload failed: unexpected response from server")}}catch(x){console.error("Drop upload error:",x),alert("Image upload failed: "+((x==null?void 0:x.message)||x))}},children:[o.jsx(Se,{placeholder:"https://example.com/image.jpg",value:w,onChange:_=>y(b,_.target.value)}),o.jsx(te,{type:"button",variant:"ghost",size:"icon",onClick:async()=>{var _;try{const x=(_=r.images[b])==null?void 0:_.trim();if(x&&(x.startsWith("http://")||x.startsWith("https://"))){try{if(!window.confirm(`Upload the current URL to Cloudinary/ImageKit and replace it?
`+x))return;try{const I=await k1(x);if(I&&typeof I=="string"&&I.startsWith("http")){y(b,I);return}}catch(I){console.warn("uploadUrlToServer failed, will try ImageKit:",(I==null?void 0:I.message)||I)}try{const I=await na(x);if(I&&typeof I=="string"&&I.startsWith("http")){y(b,I);return}else alert("Upload failed: unexpected response from ImageKit")}catch(I){console.error("ImageKit URL upload error:",I),alert("URL upload failed: "+((I==null?void 0:I.message)||I))}}catch(C){console.error("URL upload error:",C),alert("URL upload failed: "+((C==null?void 0:C.message)||C))}return}const j=document.createElement("input");j.type="file",j.accept="image/*",j.onchange=async()=>{var I;const C=(I=j.files)==null?void 0:I[0];if(C)try{let M=null;try{M=await Tr(C)}catch(U){console.warn("Cloudinary upload failed, trying ImageKit fallback",(U==null?void 0:U.message)||U);try{M=await na(C,C.name)}catch(z){throw console.error("ImageKit upload failed:",z),U}}if(!M||typeof M!="string"||!M.startsWith("http")){alert("Upload failed: unexpected response from upload provider");return}y(b,M)}catch(M){const U=(M==null?void 0:M.message)||String(M);console.error("Upload error:",M);const z=(U||"").toLowerCase();if(z.includes("cloudinary cloud name is not configured")){const P=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!P){alert("No cloud name provided.");return}const R=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),D=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");tl(P,R||null,D||null);try{const O=await Tr(C);if(!O||typeof O!="string"||!O.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(b,O)}catch(O){console.error("Retry upload error:",O),alert("Upload failed after configuring Cloudinary: "+(O.message||O))}}else if(z.includes("cloudinary signing did not return an api key")||z.includes("missing required parameter - api_key")||z.includes("missing required parameter 'api_key'")){const P=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(P&&P.trim())try{tl(null,null,P.trim());const R=await Tr(C);if(!R||typeof R!="string"||!R.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(b,R);return}catch(R){console.error("Retry upload error:",R),alert("Upload failed after setting API key: "+(R.message||R));return}}else alert("Image upload failed: "+(M.message||M))}},j.click()}catch(x){console.error(x),alert("Could not open file dialog")}},children:o.jsx(mv,{className:"h-4 w-4"})}),r.images.length>1&&o.jsx(te,{type:"button",variant:"outline",size:"icon",onClick:()=>v(b),children:o.jsx(zc,{className:"h-4 w-4"})})]},b))})]}),r.name&&o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Preview"}),o.jsx(Tt,{children:"How the product will appear"})]}),o.jsx(me,{children:o.jsx("div",{className:"p-4 border rounded-lg",children:o.jsxs("div",{className:"flex items-start gap-4",children:[r.images[0]&&r.images[0].trim()&&(()=>{const w=HO(r.images[0]);return o.jsx("img",{src:w||void 0,alt:r.name,className:"w-20 h-20 object-cover rounded",onError:b=>{b.currentTarget.style.display="none",console.warn("Product preview image failed to load:",w||r.images[0])}})})(),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:r.name}),o.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["$",r.price.toFixed(2)]}),r.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.description}),r.categoryId&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Category: ",r.categoryId]})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:a,children:[o.jsx(Zi,{className:"h-4 w-4 mr-2"}),a?"Saving...":t?"Update Product":"Add Product"]})]})]})]})}function PR(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const f=an(ze(Ne,"orders"),ya("orderDate","desc")),g=gi(f,async y=>{try{const v=await dt(ze(Ne,"products")),w={};v.forEach(_=>{const x=_.data();w[_.id]={id:_.id,name:x.name||x.title||"",price:x.price||0}});const b=[];y.forEach(_=>{var z,P;const x=_.data();let j=[];x.items&&Array.isArray(x.items)&&x.items.length>0?j=x.items:x.productsIds&&Array.isArray(x.productsIds)&&(j=x.productsIds.map(R=>{var D,O;return{productId:R,name:((D=w[R])==null?void 0:D.name)||R,quantity:1,price:((O=w[R])==null?void 0:O.price)||0}}));const C=x.total||x.totalAmount||x.totalPrice||0,I=x.address||x.shippingaddress||x.shippingAddress||"",M=x.userPhone||x.user_phone||x.phone||"";let U=new Date;x.createdAt&&typeof x.createdAt.toDate=="function"?U=x.createdAt.toDate():x.orderDate&&typeof x.orderDate.toDate=="function"?U=x.orderDate.toDate():x.orderDate&&(U=new Date(x.orderDate)),b.push({id:_.id,userId:x.userId||x.user_id||"",username:x.username||x.userName||x.user_name||x.customerName||"",userName:x.userName||x.user_name||x.customerName||"",userEmail:x.userEmail||x.email||"",userPhone:M,address:I,items:j,total:C,iscompleted:x.iscompleted===!0||x.isCompleted===!0||!1,status:x.status||(x.iscompleted===!0?"completed":"pending"),createdAt:U,updatedAt:(P=(z=x.updatedAt)==null?void 0:z.toDate)==null?void 0:P.call(z)})}),e(b),r(!1)}catch(v){console.error("Error processing orders:",v),a("Failed to load orders"),r(!1)}},y=>{console.error("Failed to load orders:",y),a("Failed to load orders"),r(!1)});return()=>g()},[]),{orders:t,loading:n,error:s,createOrder:async f=>{try{await pn(ze(Ne,"orders"),{...f,createdAt:new Date})}catch(g){console.error("Error creating order:",g)}},updateOrder:async(f,g)=>{try{const y={...g,updatedAt:new Date};(g.status==="completed"||g.isCompleted)&&(y.isCompleted=!0,y.iscompleted=!0,y.completedAt=new Date,y.status="completed"),await Jt(St(Ne,"orders",f),y)}catch(y){console.error("Error updating order:",y)}},deleteOrder:async f=>{try{await lr(St(Ne,"orders",f))}catch(g){console.error("Error deleting order:",g)}}}}function xq(){const[t,e]=E.useState(""),[n,r]=E.useState(!1),[s,a]=E.useState(null),{products:c,loading:u,error:h,isOfflineMode:f,createProduct:g,updateProduct:y,deleteProduct:v,retryConnection:w}=wA(),{createOrder:b}=PR(),_=()=>{a(null),r(!0)},x=I=>{a(I),r(!0)},j=async(I,M)=>{confirm(`Are you sure you want to delete "${M}"?`)&&await v(I)};if(n)return o.jsx(vq,{product:s,onClose:()=>{r(!1),a(null)},onSave:async I=>{try{s?await y(s.id,I):await g(I),r(!1),a(null)}catch(M){console.error("Error saving product:",M),alert("Failed to save product. Please try again.")}}});const C=c.filter(I=>I.name.toLowerCase().includes(t.toLowerCase())||I.description.toLowerCase().includes(t.toLowerCase()));return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex justify-between items-center",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Store Management"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"text-muted-foreground",children:"Manage store products and categories"}),f&&o.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[o.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),u&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Ji,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}),h&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading products"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:h}),o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx(te,{onClick:w,variant:"outline",children:"Retry Connection"}),o.jsx(te,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!u&&!h&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsxs(pe,{children:[o.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ge,{className:"text-sm font-medium",children:"Total Products"}),o.jsx(gv,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(me,{children:o.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),o.jsxs(pe,{children:[o.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ge,{className:"text-sm font-medium",children:"Average Price"}),o.jsx(DS,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(me,{children:o.jsxs("div",{className:"text-2xl font-bold",children:["$",c.length>0?(c.reduce((I,M)=>{const U=M.types&&M.types.length>0?M.types[0].price:M.price||0;return I+U},0)/c.length).toFixed(2):"0.00"]})})]}),o.jsxs(pe,{children:[o.jsxs(We,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ge,{className:"text-sm font-medium",children:"Categories"}),o.jsx(ud,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(me,{children:o.jsx("div",{className:"text-2xl font-bold",children:new Set(c.map(I=>I.categoryId).filter(I=>I&&I.trim())).size})})]})]}),o.jsxs(AR,{defaultValue:"products",className:"space-y-6",children:[o.jsxs(S0,{className:"grid w-full grid-cols-2",children:[o.jsxs(Cc,{value:"products",className:"flex items-center gap-2",children:[o.jsx(Lx,{className:"h-4 w-4"}),"Products (",c.length,")"]}),o.jsxs(Cc,{value:"categories",className:"flex items-center gap-2",children:[o.jsx(ud,{className:"h-4 w-4"}),"Categories"]})]}),o.jsxs(Ic,{value:"products",className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"relative flex-1 max-w-sm",children:[o.jsx(ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Se,{placeholder:"Search products...",value:t,onChange:I=>e(I.target.value),className:"pl-10"})]}),o.jsxs(te,{onClick:_,children:[o.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),C.length===0?o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(gv,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:t?"No products found":"No products yet"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"Try adjusting your search terms":"Add your first product to get started"}),!t&&o.jsxs(te,{onClick:_,children:[o.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add First Product"]})]})}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:C.map(I=>o.jsxs(pe,{className:"overflow-hidden",children:[o.jsxs("div",{className:"aspect-video bg-muted relative",children:[I.images&&I.images[0]?o.jsx("img",{src:I.images[0],alt:I.name,className:"w-full h-full object-cover",onError:M=>{M.currentTarget.style.display="none";const U=M.currentTarget.nextElementSibling;U&&(U.style.display="flex")}}):null,o.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:I.images&&I.images[0]?"none":"flex"},children:o.jsx(mv,{className:"h-12 w-12 text-muted-foreground"})})]}),o.jsxs(We,{className:"pb-2",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx(Ge,{className:"text-lg line-clamp-1",children:I.name}),I.types&&I.types.length>1&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[I.types.length," options available"]})]}),o.jsx("div",{className:"mt-2",children:I.types&&I.types.length>0?o.jsx("div",{className:"flex gap-2 flex-wrap",children:I.types.map((M,U)=>o.jsxs(Pt,{variant:"secondary",className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium",children:M.name}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["$",M.price.toFixed(2)]})]},U))}):o.jsxs("div",{className:"text-xl font-bold",children:["$",(I.price||0).toFixed(2)]})}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>x(I),className:"h-8 w-8",children:o.jsx(ns,{className:"h-3 w-3"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:async()=>{try{const M=document.createElement("input");M.type="file",M.accept="image/*",M.onchange=async()=>{var z;const U=(z=M.files)==null?void 0:z[0];if(U)try{let P=null;try{P=await Tr(U)}catch(R){console.warn("Cloudinary upload failed, trying ImageKit fallback",(R==null?void 0:R.message)||R);try{P=await na(U,U.name)}catch(D){throw console.error("ImageKit upload failed:",D),R}}if(!P||typeof P!="string"||!P.startsWith("http")){console.error("Invalid upload response:",P),alert("Image upload failed: unexpected response from upload provider");return}await y(I.id,{images:[P]})}catch(P){console.error(P);const D=((P==null?void 0:P.message)||String(P)||"").toLowerCase();if(D.includes("cloudinary cloud name is not configured")){const O=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!O){alert("No cloud name provided. Upload cancelled.");return}const k=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),V=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{tl(O,k||null,V||null);const F=await Tr(U);if(console.log("Cloudinary upload result after config:",F),!F||typeof F!="string"||!F.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(I.id,{images:[F]})}catch(F){console.error(F),alert("Image upload failed after configuring Cloudinary: "+(F.message||F))}return}else if(D.includes("cloudinary signing did not return an api key")||D.includes("missing required parameter - api_key")||D.includes("missing required parameter 'api_key'")){const O=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(O&&O.trim())try{tl(null,null,O.trim());const k=await Tr(U);if(!k||typeof k!="string"||!k.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(I.id,{images:[k]});return}catch(k){console.error(k),alert("Image upload failed after setting API key: "+(k.message||k));return}}alert("Image upload failed: "+(P.message||P))}},M.click()}catch(M){console.error(M),alert("Could not open file dialog")}},className:"h-8 w-8",children:o.jsx(mv,{className:"h-3 w-3"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>j(I.id,I.name),className:"h-8 w-8 text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-3 w-3"})}),o.jsx(te,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:async()=>{try{let M,U;if(I.types&&I.types.length>0)if(I.types.length===1)M=I.types[0].name,U=I.types[0].price;else{const F=I.types.map((K,Z)=>`${Z+1}. ${K.name} - $${K.price.toFixed(2)}`).join(`
`),H=window.prompt(`Select a type for "${I.name}":

${F}

Enter the number (1-${I.types.length}):`,"1");if(!H)return;const Q=parseInt(H)-1;if(Q<0||Q>=I.types.length){alert("Invalid selection. Please try again.");return}M=I.types[Q].name,U=I.types[Q].price}else U=I.price||0;const z=window.prompt("Your full name:");if(!z)return;const P=window.prompt("Your email:");if(!P)return;const R=window.prompt("Quantity:","1")||"1",D=parseInt(R)||1,O=window.prompt("Phone (optional):","")||"",k=window.prompt("Address (optional):","")||"",V=M?`${I.name} (${M})`:I.name;await b({username:z,userName:z,userEmail:P,userPhone:O,address:k,items:[{productId:I.id,name:V,quantity:D,price:U,selectedType:M}],total:U*D,status:"pending",createdAt:new Date}),alert(`Order placed successfully!

Product: ${V}
Quantity: ${D}
Total: $${(U*D).toFixed(2)}`)}catch(M){console.error(M),alert("Failed to place order")}},children:I.types&&I.types.length>1?"Select & Buy":"Buy Now"})]})]}),o.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",(I.types&&I.types.length>0?I.types[0].price:I.price||0).toFixed(2)]})]}),o.jsxs(me,{className:"pt-0",children:[I.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:I.description}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[o.jsx("span",{children:I.createdAt.toLocaleDateString()}),I.categoryId&&o.jsx(Pt,{variant:"secondary",className:"text-xs",children:I.categoryId})]})]})]},I.id))})]}),o.jsxs(Ic,{value:"categories",className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Categories"}),o.jsxs(te,{disabled:!0,children:[o.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(ud,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Category Management"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Category management will be implemented in the future."}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"For now, you can specify category IDs when creating products."})]})})]})]})]})]})}function wq({order:t,onChangeStatus:e,onDelete:n}){var r,s;return o.jsxs(pe,{children:[o.jsx(We,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ge,{children:["Order for ",t.username||t.userName,o.jsx("div",{className:"text-xs text-muted-foreground",children:(s=(r=t.createdAt)==null?void 0:r.toLocaleString)==null?void 0:s.call(r)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(Pt,{variant:t.status==="completed"||t.iscompleted?"default":"secondary",children:[t.status,t.iscompleted?"  completed":""]}),o.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>e(t.id,"completed"),children:[o.jsx(JE,{className:"h-4 w-4 mr-1"})," Complete"]}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>n(t.id),className:"text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})}),o.jsxs(me,{children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact"}),o.jsx("div",{className:"font-medium",children:t.username||t.userName}),o.jsx("div",{className:"text-sm",children:t.userEmail}),t.userPhone&&o.jsx("div",{className:"text-sm",children:t.userPhone}),t.address&&o.jsx("div",{className:"text-sm",children:t.address})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Items"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[t.items&&t.items.length>0?t.items.map((a,c)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm",children:[a.name," x",a.quantity]}),o.jsxs("div",{className:"font-medium",children:["$",(a.price*a.quantity).toFixed(2)]})]},c)):o.jsx("div",{className:"text-sm text-muted-foreground",children:"No item details. Products IDs may be attached in the raw order."}),t.productsIds&&t.productsIds.length>0&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Product IDs: ",(t.productsIds||[]).join(", ")]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t mt-2",children:[o.jsx("div",{className:"font-medium",children:"Total"}),o.jsxs("div",{className:"font-bold",children:["$",(t.total||0).toFixed(2)]})]})]})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsxs(te,{onClick:()=>e(t.id,"paid"),children:[o.jsx(JE,{className:"h-4 w-4 mr-2"})," Mark Paid"]}),o.jsxs(te,{variant:"outline",onClick:()=>e(t.id,"cancelled"),children:[o.jsx(Z2,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]})]},t.id)}function _q(){const{orders:t,loading:e,error:n,updateOrder:r,deleteOrder:s}=PR(),a=async(u,h)=>{u&&await r(u,{status:h})},c=async u=>{u&&confirm("Delete this order?")&&await s(u)};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Orders"}),o.jsx("p",{className:"text-muted-foreground",children:"View and manage store orders"})]})}),e&&o.jsx("div",{children:"Loading..."}),n&&o.jsx("div",{className:"text-destructive",children:n}),!e&&!n&&o.jsx("div",{className:"grid gap-4",children:t.map(u=>o.jsx(wq,{order:u,onChangeStatus:a,onDelete:c},u.id))})]})}function T0(t,e){const[n,r]=E.useState([]),[s,a]=E.useState(!0),[c,u]=E.useState(null);return E.useEffect(()=>{let h=null,f=!0;return(async()=>{if(!t){r([]),a(!1);return}try{const y=an(Cr(Ne,"lectures"),Zo(pj(),"==",t)),v=await dt(y);if(v.empty){f&&(r([]),a(!1));return}const w=v.docs[0],b=ze(w.ref,e);h=gi(b,_=>{if(!f)return;const x=[];_.forEach(j=>{const C=j.data();x.push({id:j.id,...C})}),r(x),a(!1)},_=>{console.error(`Failed to subscribe to ${e}:`,_),u(`Failed to load ${e}`),a(!1)})}catch(y){console.error(`Error resolving lecture for ${e}:`,y),f&&(u(y.message||String(y)),a(!1))}})(),()=>{f=!1,h&&h()}},[t,e]),{items:n,loading:s,error:c}}function Eq(t){return T0(t,"videos")}function bq(t){return T0(t,"files")}function RR(t){return T0(t,"quizzes")}function Nq(){var f;const[t]=Yd(),e=t.get("lecture"),{lectures:n,loading:r,error:s}=$m(),{items:a,loading:c,error:u}=Eq(e);if(c||r)return o.jsx("div",{children:"Loading..."});if(u||s)return o.jsx("div",{className:"text-destructive",children:u||s});const h=n.find(g=>g.id===e);return h?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Videos for ",h.title||h.id]}),o.jsx("p",{className:"text-muted-foreground",children:h.description})]}),o.jsx("div",{children:o.jsx(Zn,{to:"/admin/resources",children:o.jsx(te,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(We,{children:o.jsxs(Ge,{children:["Videos (",((f=h.videos)==null?void 0:f.length)||0,")"]})}),o.jsx(me,{children:a&&a.length>0?o.jsx("div",{className:"space-y-3",children:a.map(g=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[g.thumbnailUrl?o.jsx("img",{src:g.thumbnailUrl,alt:g.title,className:"w-32 h-18 object-cover rounded"}):o.jsx("div",{className:"w-32 h-18 bg-muted rounded"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:g.title||"Untitled"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),o.jsx("div",{children:o.jsxs(te,{onClick:()=>window.open(g.url||g.youtubeUrl||"","_blank"),children:[" ",o.jsx(ii,{className:"h-4 w-4 mr-2"})," Play "]})})]},g.id))}):o.jsx("p",{className:"text-muted-foreground",children:"No videos available for this lecture."})})]})]}):o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its videos."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(te,{children:"Back to Years"})})})]})})}function Sq(){var f;const[t]=Yd(),e=t.get("lecture"),{lectures:n,loading:r,error:s}=$m(),{items:a,loading:c,error:u}=bq(e);if(c||r)return o.jsx("div",{children:"Loading..."});if(u||s)return o.jsx("div",{className:"text-destructive",children:u||s});const h=n.find(g=>g.id===e);return h?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Files for ",h.title||h.id]}),o.jsx("p",{className:"text-muted-foreground",children:h.description})]}),o.jsx("div",{children:o.jsx(Zn,{to:"/admin/resources",children:o.jsx(te,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(We,{children:o.jsxs(Ge,{children:["Files (",((f=h.files)==null?void 0:f.length)||0,")"]})}),o.jsx(me,{children:a&&a.length>0?o.jsx("div",{className:"space-y-3",children:a.map(g=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Is,{className:"h-6 w-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:g.title||g.name||"Untitled File"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),o.jsx("div",{children:o.jsx(te,{onClick:()=>window.open(g.fileUrl||g.url||"_blank"),children:"Download"})})]},g.id))}):o.jsx("p",{className:"text-muted-foreground",children:"No files available for this lecture."})})]})]}):o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its files."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(te,{children:"Back to Years"})})})]})})}function Tq(){var f;const[t]=Yd(),e=t.get("lecture"),{lectures:n,loading:r,error:s}=$m(),{items:a,loading:c,error:u}=RR(e);if(c||r)return o.jsx("div",{children:"Loading..."});if(u||s)return o.jsx("div",{className:"text-destructive",children:u||s});const h=n.find(g=>g.id===e);return h?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Quizzes for ",h.title||h.id]}),o.jsx("p",{className:"text-muted-foreground",children:h.description})]}),o.jsx("div",{children:o.jsx(Zn,{to:"/admin/resources",children:o.jsx(te,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(We,{children:o.jsxs(Ge,{children:["Quizzes (",((f=h.quizzes)==null?void 0:f.length)||0,")"]})}),o.jsx(me,{children:a&&a.length>0?o.jsx("div",{className:"space-y-3",children:a.map(g=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(qi,{className:"h-6 w-6 text-purple-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:g.title||"Untitled Quiz"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:g.description}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",o.jsx("strong",{children:g.type||"multiple_choice"})]})]})]}),o.jsx("div",{children:(g.type||"multiple_choice")==="flashcard"?o.jsx(te,{onClick:()=>window.location.href=`/admin/flashcards?lecture=${e}&quiz=${g.id}`,children:"Flashcards"}):o.jsx(te,{onClick:()=>alert("Multiple choice runner not implemented. Use Flashcards or implement MCQ runner."),children:"Start"})})]},g.id))}):o.jsx("p",{className:"text-muted-foreground",children:"No quizzes available for this lecture."})})]})]}):o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its quizzes."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(te,{children:"Back to Years"})})})]})})}var C0="Progress",I0=100,[Cq,cW]=Xi(C0),[Iq,jq]=Cq(C0),kR=E.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=Aq,...c}=t;(s||s===0)&&!z1(s)&&console.error(Pq(`${s}`,"Progress"));const u=z1(s)?s:I0;r!==null&&!B1(r,u)&&console.error(Rq(`${r}`,"Progress"));const h=B1(r,u)?r:null,f=Kp(h)?a(h,u):void 0;return o.jsx(Iq,{scope:n,value:h,max:u,children:o.jsx(Je.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":Kp(h)?h:void 0,"aria-valuetext":f,role:"progressbar","data-state":LR(h,u),"data-value":h??void 0,"data-max":u,...c,ref:e})})});kR.displayName=C0;var OR="ProgressIndicator",DR=E.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=jq(OR,n);return o.jsx(Je.div,{"data-state":LR(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});DR.displayName=OR;function Aq(t,e){return`${Math.round(t/e*100)}%`}function LR(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Kp(t){return typeof t=="number"}function z1(t){return Kp(t)&&!isNaN(t)&&t>0}function B1(t,e){return Kp(t)&&!isNaN(t)&&t<=e&&t>=0}function Pq(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${I0}\`.`}function Rq(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${I0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var MR=kR,kq=DR;const FR=E.forwardRef(({className:t,value:e,...n},r)=>o.jsx(MR,{ref:r,className:Qe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:o.jsx(kq,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));FR.displayName=MR.displayName;function Oq(){const[t]=Yd(),e=t.get("lecture"),n=t.get("quiz"),{items:r,loading:s,error:a}=RR(e),c=r.find(V=>V.id===n),[u,h]=E.useState(0),[f,g]=E.useState([]);if(s)return o.jsx("div",{children:"Loading..."});if(a)return o.jsx("div",{className:"text-destructive",children:a});if(!c)return o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Quiz not found"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a quiz to start flashcards."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/quizzes",children:o.jsx(te,{children:"Back"})})})]})});const y=c.questions||[],v=y.reduce((V,F)=>V+(F.weight&&Number(F.weight)||1),0),w=y[u],b=w&&(w.weight||1)||1,_=f[u]??0,[x,j]=E.useState(!1),[C,I]=E.useState([]),[M,U]=E.useState(null);E.useEffect(()=>{j(!1),I([]),U(null)},[u]);const z=(V,F)=>{const H=[...f];H[V]=F,g(H)},P=f.reduce((V,F,H)=>V+(F||0),0),R=Math.round(P/v*100),D=V=>{if(!V)return[{type:"text",value:""}];const F=[],H=/\[\[(.+?)\]\]/g;let Q=0,K;for(;(K=H.exec(V))!==null;)K.index>Q&&F.push({type:"text",value:V.slice(Q,K.index)}),F.push({type:"blank",value:K[1]}),Q=H.lastIndex;return Q<V.length&&F.push({type:"text",value:V.slice(Q)}),F},O=()=>{const V=(w==null?void 0:w.question)||"",H=D(V).filter(Q=>Q.type==="blank");H.length>0?I(H.map(()=>"")):I([""]),U(null),j(!0)},k=()=>{const V=(w==null?void 0:w.question)||"",H=D(V).filter(W=>W.type==="blank").map(W=>W.value);let Q=[];H.length>0?Q=H:w&&Array.isArray(w.options)&&typeof w.correctAnswer=="number"?Q=[w.options[w.correctAnswer]||""]:w&&(w.answer||w.correct)&&(Q=[String(w.answer||w.correct)]);const Z=C.map((W,Y)=>{const ne=(Q[Y]??Q[0]??"").toString().trim().toLowerCase();return W.toString().trim().toLowerCase()===ne&&ne!==""}).every(Boolean);U(Z?"Correct":"Incorrect"),Z&&z(u,b)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Flashcards: ",c.title]}),o.jsx("p",{className:"text-muted-foreground",children:"Fill marks per question. Total progress shows weighted score."})]}),o.jsx("div",{children:o.jsx(Zn,{to:"/admin/quizzes",children:o.jsx(te,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(We,{children:o.jsx(Ge,{children:"Progress"})}),o.jsxs(me,{children:[o.jsxs("div",{className:"mb-2 text-sm",children:["Total: ",v," points  Current: ",P," points"]}),o.jsx(FR,{value:R}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[R,"%"]})]})]}),o.jsxs(pe,{children:[o.jsx(We,{children:o.jsxs(Ge,{children:["Question ",u+1," / ",y.length]})}),o.jsx(me,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"font-medium",children:x?o.jsxs("div",{className:"space-y-2",children:[(()=>{const V=D(w.question||"");let F=0;return o.jsxs("div",{children:[V.map((H,Q)=>{if(H.type==="text")return o.jsx("span",{children:H.value},Q);const K=F++;return o.jsx("input",{value:C[K]??"",onChange:Z=>I(W=>{const Y=[...W];return Y[K]=Z.target.value,Y}),placeholder:"Fill the blank",className:"border-b-2 border-gray-300 px-1 mx-1"},Q)}),V.length===1&&V[0].type==="text"&&o.jsx("div",{children:o.jsx("input",{value:C[0]??"",onChange:H=>I(Q=>{const K=[...Q];return K[0]=H.target.value,K}),placeholder:"Answer",className:"border-b-2 border-gray-300 px-1"})})]})})(),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx(te,{onClick:k,children:"Check"}),o.jsx(te,{variant:"outline",onClick:()=>{j(!1),U(null)},children:"Cancel"}),M&&o.jsx("div",{className:"ml-2 text-sm",children:M})]})]}):o.jsx("span",{role:"button",tabIndex:0,onClick:O,onKeyDown:V=>{V.key==="Enter"&&O()},children:w.question})}),w.imageUrl&&o.jsx("img",{src:w.imageUrl,alt:"question",className:"w-full max-w-md object-contain"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Weight: ",b]}),o.jsxs("label",{className:"text-sm",children:["Mark (0 - ",b,")"]}),o.jsx("input",{type:"number",min:0,max:b,value:_,onChange:V=>z(u,Math.max(0,Math.min(b,Number(V.target.value)||0))),className:"border rounded px-2 py-1 w-24"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(te,{disabled:u===0,onClick:()=>h(V=>Math.max(0,V-1)),children:"Previous"}),o.jsx(te,{disabled:u===y.length-1,onClick:()=>h(V=>Math.min(y.length-1,V+1)),children:"Next"}),o.jsx(te,{variant:"outline",onClick:()=>{g([]),h(0)},children:"Reset"})]}),o.jsx("div",{className:"mt-4",children:o.jsx(te,{onClick:()=>alert(`Final score: ${P}/${v} (${R}%)`),children:"Finish"})})]})})]})]})}function Dq(){return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Configure application settings and preferences"})]}),o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(MS,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"This section will provide configuration options for the admin panel."}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Features: User management, system configuration, backup settings, security options."})]})})]})}function Lq(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const f=an(ze(Ne,"maps")),g=gi(f,y=>{const v=[];y.forEach(w=>{var _,x;const b=w.data();v.push({id:w.id,name:b.name||"",location:b.location||"",description:b.description||b.desc||"",type:b.type||b.mapType||"",video_url:b.video_url||b.videoUrl||"",createdAt:((x=(_=b.createdAt)==null?void 0:_.toDate)==null?void 0:x.call(_))||void 0})}),e(v),r(!1)},y=>{console.error("Failed to load maps:",y),a("Failed to load maps"),r(!1)});return()=>g()},[]),{maps:t,loading:n,error:s,createMap:async f=>{const g={...f,createdAt:new Date};g.type&&!g.mapType&&(g.mapType=g.type),g.mapType&&!g.type&&(g.type=g.mapType),["name","location","description","video_url","type","mapType"].forEach(y=>{typeof g[y]=="string"&&(g[y]=g[y].trim())}),await pn(ze(Ne,"maps"),g)},updateMap:async(f,g)=>{const y={...g};y.type&&!y.mapType&&(y.mapType=y.type),y.mapType&&!y.type&&(y.type=y.mapType),["name","location","description","video_url","type","mapType"].forEach(v=>{typeof y[v]=="string"&&(y[v]=y[v].trim())}),await Jt(St(Ne,"maps",f),y)},deleteMap:async f=>{await lr(St(Ne,"maps",f))}}}function Mq(){const{maps:t,loading:e,error:n,createMap:r,updateMap:s,deleteMap:a}=Lq(),[c,u]=E.useState({name:"",location:"",description:"",video_url:"",type:""}),[h,f]=E.useState(!1),[g,y]=E.useState(null),v=()=>u({name:"",location:"",description:"",video_url:"",type:""}),w=async b=>{if(b.preventDefault(),!!c.name.trim()){f(!0);try{g?await s(g,c):await r(c),v(),y(null)}catch(_){console.error("Error saving map:",_),alert("Failed to save map")}finally{f(!1)}}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ed,{className:"h-6 w-6 text-blue-600"}),o.jsx("h1",{className:"text-3xl font-bold",children:"Maps"})]}),o.jsxs(pe,{children:[o.jsx(We,{children:o.jsx(Ge,{children:"Add Map"})}),o.jsx(me,{children:o.jsxs("form",{onSubmit:w,className:"grid md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{children:"Name"}),o.jsx(Se,{value:c.name,onChange:b=>u(_=>({..._,name:b.target.value})),placeholder:"Map name",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{children:"Location"}),o.jsx(Se,{value:c.location,onChange:b=>u(_=>({..._,location:b.target.value})),placeholder:"Location"})]}),o.jsxs("div",{className:"space-y-2 md:col-span-3",children:[o.jsx(Ae,{children:"Description"}),o.jsx("textarea",{value:c.description,onChange:b=>u(_=>({..._,description:b.target.value})),placeholder:"Short description",className:"w-full border rounded px-3 py-2",rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{children:"Type"}),o.jsxs("select",{className:"w-full border rounded px-3 py-2",value:c.type,onChange:b=>u(_=>({..._,type:b.target.value})),children:[o.jsx("option",{value:"",children:"Select type"}),o.jsx("option",{value:" ",children:" "}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:" ",children:" "}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"",children:""})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{children:"Video URL"}),o.jsx(Se,{value:c.video_url,onChange:b=>u(_=>({..._,video_url:b.target.value})),placeholder:"https://..."})]}),o.jsx("div",{className:"md:col-span-3 flex justify-end space-x-2",children:g?o.jsxs(o.Fragment,{children:[o.jsx(te,{type:"button",variant:"outline",onClick:()=>{y(null),v()},children:"Cancel"}),o.jsxs(te,{type:"submit",disabled:h,children:[o.jsx(Zt,{className:"h-4 w-4 mr-2"}),h?"Saving...":"Save"]})]}):o.jsxs(te,{type:"submit",disabled:h,children:[o.jsx(Zt,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add"]})})]})})]}),o.jsxs(pe,{children:[o.jsx(We,{children:o.jsxs(Ge,{children:["All Maps (",t.length,")"]})}),o.jsx(me,{children:e?o.jsx("div",{children:"Loading..."}):n?o.jsx("div",{className:"text-destructive",children:n}):t.length===0?o.jsx("div",{className:"text-muted-foreground",children:"No maps yet."}):o.jsx("div",{className:"grid gap-3",children:t.map(b=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:b.name}),o.jsx("div",{className:"text-xs text-muted-foreground truncate",children:b.location}),b.type&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",o.jsx("span",{className:"font-medium",children:b.type})]}),b.description&&o.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:b.description}),b.video_url&&o.jsx("a",{className:"text-xs text-blue-600 hover:underline",href:b.video_url,target:"_blank",rel:"noreferrer",children:b.video_url})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{y(b.id),u({name:b.name||"",location:b.location||"",description:b.description||"",video_url:b.video_url||"",type:b.type||""}),window.scrollTo({top:0,behavior:"smooth"})},className:"",children:"Edit"}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>a(b.id),className:"text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]},b.id))})})]})]})}function Fq({research:t,onClose:e,onSave:n}){const[r,s]=E.useState({projectTitle:"",abstract:"",fieldOfResearch:[],contactPerson:[],authorshipPosition:[],projectDuration:"",requiredSkills:[],supervisor:""}),[a,c]=E.useState(""),[u,h]=E.useState("");E.useEffect(()=>{t&&s({projectTitle:t.projectTitle||"",abstract:t.abstract||"",fieldOfResearch:t.fieldOfResearch||[],contactPerson:t.contactPerson||[],authorshipPosition:t.authorshipPosition||[],projectDuration:t.projectDuration||"",requiredSkills:t.requiredSkills||[],supervisor:t.supervisor||""})},[t]);const f=()=>{const b=a.trim();b&&(r.fieldOfResearch.includes(b)||s(_=>({..._,fieldOfResearch:[..._.fieldOfResearch,b]})),c(""))},g=()=>{const b=u.trim();b&&(r.requiredSkills.includes(b)||s(_=>({..._,requiredSkills:[..._.requiredSkills,b]})),h(""))},y=b=>s(_=>({..._,fieldOfResearch:_.fieldOfResearch.filter(x=>x!==b)})),v=b=>s(_=>({..._,requiredSkills:_.requiredSkills.filter(x=>x!==b)})),w=b=>{b.preventDefault();const _={projectTitle:r.projectTitle,abstract:r.abstract,fieldOfResearch:r.fieldOfResearch,contactPerson:r.contactPerson,authorshipPosition:r.authorshipPosition,projectDuration:r.projectDuration,requiredSkills:r.requiredSkills,supervisor:r.supervisor,updatedAt:new Date,...t?{}:{createdAt:new Date}};n(_)};return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:e,children:[o.jsx(ss,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Research":"Create Research"}),o.jsx("p",{className:"text-muted-foreground",children:"Add or update research project details"})]})]})}),o.jsx("form",{onSubmit:w,className:"space-y-6",children:o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Project Details"}),o.jsx(Tt,{children:"Title and abstract"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"title",children:"Project Title *"}),o.jsx(Se,{id:"title",placeholder:"Enter project title...",value:r.projectTitle,onChange:b=>s(_=>({..._,projectTitle:b.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"abstract",children:"Abstract"}),o.jsx(Ps,{id:"abstract",placeholder:"Write a brief abstract...",value:r.abstract,onChange:b=>s(_=>({..._,abstract:b.target.value})),rows:8})]})]})]}),o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Fields & Skills"}),o.jsx(Tt,{children:"Fields of research and required skills"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Ae,{children:"Field of Research"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx(Se,{placeholder:"Add field e.g., Oncology",value:a,onChange:b=>c(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),f())}}),o.jsx(te,{type:"button",onClick:f,variant:"outline",children:"Add"})]}),o.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.fieldOfResearch.map(b=>o.jsxs(Pt,{variant:"secondary",className:"flex items-center gap-2",children:[b,o.jsx("button",{type:"button",onClick:()=>y(b),className:"ml-1 hover:text-destructive",children:o.jsx(zc,{className:"h-3 w-3"})})]},b))})]}),o.jsxs("div",{children:[o.jsx(Ae,{children:"Required Skills"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx(Se,{placeholder:"Add skill e.g., Data analysis",value:u,onChange:b=>h(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),g())}}),o.jsx(te,{type:"button",onClick:g,variant:"outline",children:"Add"})]}),o.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.requiredSkills.map(b=>o.jsxs(Pt,{variant:"secondary",className:"flex items-center gap-2",children:[b,o.jsx("button",{type:"button",onClick:()=>v(b),className:"ml-1 hover:text-destructive",children:o.jsx(zc,{className:"h-3 w-3"})})]},b))})]})]})]})]}),o.jsx("div",{className:"space-y-6",children:o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Meta"}),o.jsx(Tt,{children:"Contact, supervisor and duration"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{children:"Contact Person(s)"}),o.jsx(Se,{placeholder:"Comma separated names",value:r.contactPerson.join(", "),onChange:b=>s(_=>({..._,contactPerson:b.target.value.split(",").map(x=>x.trim()).filter(Boolean)}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{children:"Authorship Positions"}),o.jsx(Se,{placeholder:"Comma separated positions",value:r.authorshipPosition.join(", "),onChange:b=>s(_=>({..._,authorshipPosition:b.target.value.split(",").map(x=>x.trim()).filter(Boolean)}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{children:"Supervisor"}),o.jsx(Se,{placeholder:"Supervisor name",value:r.supervisor,onChange:b=>s(_=>({..._,supervisor:b.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{children:"Project Duration"}),o.jsx(Se,{placeholder:"e.g., 6 months",value:r.projectDuration,onChange:b=>s(_=>({..._,projectDuration:b.target.value}))})]}),o.jsxs("div",{className:"flex justify-end",children:[o.jsx(te,{variant:"ghost",onClick:e,className:"mr-2",children:"Cancel"}),o.jsx(te,{type:"submit",children:"Save"})]})]})]})})]})})]})}const Vq=[{id:"r1",projectTitle:"Impact of Early Clinical Exposure on Medical Students",abstract:"A study investigating how early clinical exposure affects students' clinical reasoning and confidence.",fieldOfResearch:["Medical Education","Clinical Skills"],contactPerson:["Dr. Sarah Johnson"],authorshipPosition:["Lead","Co-author"],projectDuration:"6 months",requiredSkills:["Clinical observation","Data analysis"],supervisor:"Prof. Michael Chen",createdAt:new Date,updatedAt:new Date}];function Uq(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1);E.useEffect(()=>{const y=async()=>{try{const w=an(ze(Ne,"research"));await dt(w);const b=an(ze(Ne,"research"),ya("createdAt","desc"));return gi(b,x=>{const j=[];x.forEach(C=>{var M,U;const I=C.data();j.push({id:C.id,projectTitle:I.projectTitle||I.title||"",abstract:I.abstract||"",fieldOfResearch:I.fieldOfResearch||[],contactPerson:I.contactPerson||[],authorshipPosition:I.authorshipPosition||[],projectDuration:I.projectDuration||"",requiredSkills:I.requiredSkills||[],supervisor:I.supervisor||"",createdAt:(M=I.createdAt)!=null&&M.toDate?I.createdAt.toDate():I.createdAt||new Date,updatedAt:(U=I.updatedAt)!=null&&U.toDate?I.updatedAt.toDate():I.updatedAt||new Date})}),e(j),r(!1)},x=>{console.error("Error in research listener:",x),v()})}catch(w){return console.error("Firebase connection failed for research:",w),v(),null}},v=()=>{u(!0),e(Vq),a(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(w=>[v,...w]);return}try{await pn(ze(Ne,"research"),y)}catch(v){console.error("Error creating research:",v),u(!0),await h(y)}};return{research:t,loading:n,error:s,createResearch:h,updateResearch:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(w=>w.map(b=>b.id===y?{...b,...v}:b));return}try{await Jt(St(Ne,"research",y),v)}catch(w){console.error("Error updating research:",w),e(b=>b.map(_=>_.id===y?{..._,...v}:_))}},deleteResearch:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(w=>w.id!==y));return}try{await lr(St(Ne,"research",y))}catch(v){console.error("Error deleting research:",v),e(w=>w.filter(b=>b.id!==y))}},isOfflineMode:c}}function $q(){const[t,e]=E.useState(""),[n,r]=E.useState(null),[s,a]=E.useState(!1),{research:c,loading:u,error:h,createResearch:f,updateResearch:g,deleteResearch:y}=Uq(),v=c.filter(x=>x.projectTitle.toLowerCase().includes(t.toLowerCase())),w=()=>{r(null),a(!0)},b=x=>{r(x),a(!0)},_=async x=>{window.confirm("Are you sure you want to delete this research entry?")&&await y(x)};return s?o.jsx(Fq,{research:n,onClose:()=>{a(!1),r(null)},onSave:async x=>{try{n?await g(n.id,x):await f(x),a(!1),r(null)}catch(j){console.error(j),alert("Failed to save. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Research"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage research projects and student/faculty submissions"})]}),o.jsxs(te,{onClick:w,className:"flex items-center gap-2",children:[o.jsx(Zt,{className:"h-4 w-4"}),"Create Research"]})]}),o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Se,{placeholder:"Search by project title...",value:t,onChange:x=>e(x.target.value),className:"pl-10"})]})})}),u&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Ji,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading research entries..."})]})}),h&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:" Error loading research"}),o.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&o.jsx("div",{className:"space-y-4",children:v.map(x=>o.jsx(pe,{className:"hover:shadow-md transition-shadow",children:o.jsx(me,{className:"pt-6",children:o.jsx("div",{className:"flex gap-4",children:o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:x.projectTitle}),o.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mt-2",children:x.abstract}),o.jsx("div",{className:"flex gap-2 flex-wrap mt-3 text-xs text-muted-foreground",children:(x.fieldOfResearch||[]).map(j=>o.jsx("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:j},j))})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx(te,{variant:"ghost",onClick:()=>b(x),children:o.jsx(ns,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",onClick:()=>_(x.id),children:o.jsx(En,{className:"h-4 w-4"})})]})]})})})})},x.id))})]})}function zq({notification:t,onClose:e,onSave:n}){const{users:r}=Vm(),{years:s}=va(),[a,c]=E.useState({userId:"",title:"",message:"",type:"news",relatedId:"",batchId:"",yearId:""}),[u,h]=E.useState(!1);E.useEffect(()=>{t&&c({userId:t.userId||"",title:t.title||"",message:t.message||"",type:t.type||"news",relatedId:t.relatedId||"",batchId:t.batchId||"",yearId:""})},[t]),E.useEffect(()=>{if(a.yearId){const g=s.find(y=>y.id===a.yearId);g!=null&&g.batchId&&c(y=>({...y,batchId:g.batchId||""}))}},[a.yearId,s]);const f=async g=>{g.preventDefault(),h(!0);try{const y={userId:a.userId,title:a.title,message:a.message,type:a.type,relatedId:a.relatedId||void 0,read:!1,createdAt:new Date,batchId:a.batchId||void 0};n(y)}catch(y){console.error("Error saving notification:",y)}finally{h(!1)}};return Array.from(new Set(s.map(g=>({id:g.batchId,name:g.batchName})).filter(g=>g.id).map(g=>JSON.stringify(g)))).map(g=>JSON.parse(g)),o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(te,{variant:"ghost",onClick:e,children:[o.jsx(ss,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Notification":"Create Notification"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update the notification details":"Create a new notification for users"})]})]})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsx("div",{className:"lg:col-span-2 space-y-6",children:o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Notification Content"}),o.jsx(Tt,{children:"Main notification information"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"title",children:"Title *"}),o.jsx(Se,{id:"title",placeholder:"Enter notification title...",value:a.title,onChange:g=>c(y=>({...y,title:g.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"message",children:"Message *"}),o.jsx(Ps,{id:"message",placeholder:"Write your notification message here...",value:a.message,onChange:g=>c(y=>({...y,message:g.target.value})),rows:8,required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"type",children:"Type *"}),o.jsxs(lp,{value:a.type,onValueChange:g=>c(y=>({...y,type:g})),children:[o.jsx(wd,{children:o.jsx(cp,{placeholder:"Select notification type"})}),o.jsxs(_d,{children:[o.jsx(Ro,{value:"news",children:"News"}),o.jsx(Ro,{value:"announcement",children:"Announcement"}),o.jsx(Ro,{value:"system",children:"System"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"relatedId",children:"Related ID (Optional)"}),o.jsx(Se,{id:"relatedId",placeholder:"e.g., news article ID",value:a.relatedId,onChange:g=>c(y=>({...y,relatedId:g.target.value}))}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: ID of related item (e.g., news article ID)"})]})]})]})}),o.jsx("div",{className:"space-y-6",children:o.jsxs(pe,{children:[o.jsxs(We,{children:[o.jsx(Ge,{children:"Target Audience"}),o.jsx(Tt,{children:"Select who should receive this notification"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"userId",children:"User ID *"}),o.jsxs(lp,{value:a.userId,onValueChange:g=>c(y=>({...y,userId:g})),children:[o.jsx(wd,{children:o.jsx(cp,{placeholder:"Select a user"})}),o.jsx(_d,{children:r.map(g=>o.jsx(Ro,{value:g.id||"",children:g.displayName||g.email||g.id},g.id))})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a specific user to notify"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"yearId",children:"Year (Optional)"}),o.jsxs(lp,{value:a.yearId,onValueChange:g=>c(y=>({...y,yearId:g})),children:[o.jsx(wd,{children:o.jsx(cp,{placeholder:"Select a year"})}),o.jsxs(_d,{children:[o.jsx(Ro,{value:"",children:"All Years"}),s.map(g=>o.jsx(Ro,{value:g.id||"",children:g.batchName?`${g.batchName} - Year ${g.yearNumber}`:`Year ${g.yearNumber}`},g.id))]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Selecting a year will automatically set the batch"})]}),a.batchId&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"batchId",children:"Batch ID"}),o.jsx(Se,{id:"batchId",value:a.batchId,readOnly:!0,className:"bg-muted"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically set from selected year"})]})]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(te,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsx(te,{type:"submit",disabled:u,children:u?o.jsxs(o.Fragment,{children:[o.jsx(Zi,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(el,{className:"h-4 w-4 mr-2"}),t?"Update Notification":"Create Notification"]})})]})]})]})}function Bq(){const[t,e]=E.useState(""),[n,r]=E.useState(null),[s,a]=E.useState(!1),[c,u]=E.useState("all"),{notifications:h,loading:f,error:g,createNotification:y,updateNotification:v,markAsRead:w,markAllAsRead:b,deleteNotification:_,unreadCount:x}=hP(),{users:j}=Vm(),C=k=>{const V=j.find(F=>F.id===k);return(V==null?void 0:V.displayName)||(V==null?void 0:V.email)||k},I=h.filter(k=>k.title.toLowerCase().includes(t.toLowerCase())||k.message.toLowerCase().includes(t.toLowerCase())||C(k.userId).toLowerCase().includes(t.toLowerCase())),M=I.filter(k=>!k.read),U=I.filter(k=>k.read),z=k=>{r(k),a(!0)},P=async k=>{if(window.confirm("Are you sure you want to delete this notification?"))try{await _(k)}catch(V){console.error("Error deleting notification:",V),alert("Failed to delete notification. Please try again.")}},R=async k=>{try{await w(k)}catch(V){console.error("Error marking notification as read:",V),alert("Failed to mark notification as read. Please try again.")}},D=async()=>{if(window.confirm("Mark all notifications as read?"))try{await b()}catch(k){console.error("Error marking all notifications as read:",k),alert("Failed to mark all notifications as read. Please try again.")}},O=()=>{r(null),a(!0)};return s?o.jsx(zq,{notification:n,onClose:()=>{a(!1),r(null)},onSave:async k=>{try{n?await v(n.id,k):await y(k),a(!1),r(null)}catch(V){console.error("Error saving notification:",V),alert("Failed to save notification. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Notifications Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Create and manage notifications for users"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[x>0&&o.jsxs(te,{variant:"outline",onClick:D,className:"flex items-center gap-2",children:[o.jsx(Q2,{className:"h-4 w-4"}),"Mark All Read"]}),o.jsxs(te,{onClick:O,className:"flex items-center gap-2",children:[o.jsx(Zt,{className:"h-4 w-4"}),"Create Notification"]})]})]}),g&&o.jsx(pe,{className:"border-destructive",children:o.jsx(me,{className:"pt-6",children:o.jsx("p",{className:"text-destructive",children:g})})}),o.jsxs(pe,{children:[o.jsx(We,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Ge,{children:"Notifications"}),o.jsx(Tt,{children:f?"Loading...":`${I.length} total notifications`})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"relative",children:[o.jsx(ml,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),o.jsx(Se,{placeholder:"Search notifications...",value:t,onChange:k=>e(k.target.value),className:"pl-8 w-64"})]})})]})}),o.jsx(me,{children:f?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(Ji,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):o.jsxs(AR,{value:c,onValueChange:u,children:[o.jsxs(S0,{children:[o.jsxs(Cc,{value:"all",children:["All (",I.length,")"]}),o.jsxs(Cc,{value:"unread",children:["Unread (",M.length,")"]}),o.jsxs(Cc,{value:"read",children:["Read (",U.length,")"]})]}),o.jsx(Ic,{value:"all",className:"mt-4",children:I.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(el,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No notifications found"})]}):o.jsx("div",{className:"space-y-3",children:I.map(k=>o.jsx(pe,{className:k.read?"opacity-75":"border-primary/50",children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[!k.read&&o.jsx(Pt,{variant:"default",className:"h-2 w-2 p-0 rounded-full"}),o.jsx("h3",{className:"font-semibold text-lg",children:k.title}),o.jsx(Pt,{variant:"outline",children:k.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:k.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(rs,{className:"h-3 w-3"}),C(k.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(xc,{className:"h-3 w-3"}),k.createdAt.toLocaleDateString()]}),k.batchId&&o.jsxs(Pt,{variant:"secondary",className:"text-xs",children:["Batch: ",k.batchId.slice(0,8),"..."]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[!k.read&&o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>R(k.id),title:"Mark as read",children:o.jsx(up,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>z(k),title:"Edit",children:o.jsx(ns,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>P(k.id),title:"Delete",className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})})},k.id))})}),o.jsx(Ic,{value:"unread",className:"mt-4",children:M.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(kS,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No unread notifications"})]}):o.jsx("div",{className:"space-y-3",children:M.map(k=>o.jsx(pe,{className:"border-primary/50",children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pt,{variant:"default",className:"h-2 w-2 p-0 rounded-full"}),o.jsx("h3",{className:"font-semibold text-lg",children:k.title}),o.jsx(Pt,{variant:"outline",children:k.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:k.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(rs,{className:"h-3 w-3"}),C(k.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(xc,{className:"h-3 w-3"}),k.createdAt.toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>R(k.id),title:"Mark as read",children:o.jsx(up,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>z(k),title:"Edit",children:o.jsx(ns,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>P(k.id),title:"Delete",className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})})},k.id))})}),o.jsx(Ic,{value:"read",className:"mt-4",children:U.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(aO,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No read notifications"})]}):o.jsx("div",{className:"space-y-3",children:U.map(k=>o.jsx(pe,{className:"opacity-75",children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-semibold text-lg",children:k.title}),o.jsx(Pt,{variant:"outline",children:k.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:k.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(rs,{className:"h-3 w-3"}),C(k.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(xc,{className:"h-3 w-3"}),k.createdAt.toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>z(k),title:"Edit",children:o.jsx(ns,{className:"h-4 w-4"})}),o.jsx(te,{variant:"ghost",size:"icon",onClick:()=>P(k.id),title:"Delete",className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})})},k.id))})})]})})]})]})}const qq=()=>{const t=to();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};eS(()=>import("./firebaseMonitor-COzbXGYM.js"),[]).catch(()=>{});const Wq=new PM({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!1,retry:1}}});function Hq({children:t}){const{currentUser:e}=Lm();return e?o.jsx(o.Fragment,{children:t}):o.jsx(Yf,{to:"/login"})}const q1=()=>o.jsx(tB,{children:o.jsx(DM,{client:Wq,children:o.jsxs(dM,{children:[o.jsx(YO,{}),o.jsx(CD,{}),o.jsx(K4,{basename:"/builder-stellar-world/",children:o.jsx(Zz,{children:o.jsxs(F4,{children:[o.jsx($t,{path:"/login",element:o.jsx(hB,{})}),o.jsxs($t,{path:"/admin",element:o.jsx(Hq,{children:o.jsx(aB,{})}),children:[o.jsx($t,{index:!0,element:o.jsx(IB,{})}),o.jsx($t,{path:"news",element:o.jsx(q8,{})}),o.jsx($t,{path:"years",element:o.jsx(K8,{})}),o.jsx($t,{path:"years/:id",element:o.jsx(G8,{})}),o.jsx($t,{path:"subjects/:id",element:o.jsx(nq,{})}),o.jsx($t,{path:"resources",element:o.jsx($1,{})}),o.jsx($t,{path:"resources/*",element:o.jsx($1,{})}),o.jsx($t,{path:"VIDEOS",element:o.jsx(Yf,{to:"/admin/years",replace:!0})}),o.jsx($t,{path:"VIDEOS/*",element:o.jsx(Yf,{to:"/admin/years",replace:!0})}),o.jsx($t,{path:"professors",element:o.jsx(J7,{})}),o.jsx($t,{path:"users",element:o.jsx(Z7,{})}),o.jsx($t,{path:"store",element:o.jsx(xq,{})}),o.jsx($t,{path:"orders",element:o.jsx(_q,{})}),o.jsx($t,{path:"videos",element:o.jsx(Nq,{})}),o.jsx($t,{path:"files",element:o.jsx(Sq,{})}),o.jsx($t,{path:"quizzes",element:o.jsx(Tq,{})}),o.jsx($t,{path:"flashcards",element:o.jsx(Oq,{})}),o.jsx($t,{path:"research",element:o.jsx($q,{})}),o.jsx($t,{path:"maps",element:o.jsx(Mq,{})}),o.jsx($t,{path:"notifications",element:o.jsx(Bq,{})}),o.jsx($t,{path:"settings",element:o.jsx(Dq,{})})]}),o.jsx($t,{path:"/",element:o.jsx(Yf,{to:"/admin"})}),o.jsx($t,{path:"*",element:o.jsx(qq,{})})]})})})]})})}),cv=document.getElementById("root");if(!cv)document.body.innerHTML="<div style='padding:20px;font-family:system-ui;'>Error: root element not found.</div>";else try{if(window.__appRoot)window.__appRoot.render(o.jsx(q1,{}));else{const t=JO.createRoot(cv);window.__appRoot=t,t.render(o.jsx(q1,{}))}}catch(t){const e=t instanceof Error?t.message:String(t);cv.innerHTML="<div style='padding:20px;font-family:system-ui;max-width:600px;'><h2>App failed to load</h2><p style='color:#666'>"+e.replace(/</g,"&lt;")+"</p><p style='margin-top:12px'><button onclick='location.reload()'>Reload</button></p></div>",console.error("App bootstrap error:",t)}
