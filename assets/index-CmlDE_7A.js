var OR=Object.defineProperty;var OE=t=>{throw TypeError(t)};var DR=(t,e,n)=>e in t?OR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var DE=(t,e,n)=>DR(t,typeof e!="symbol"?e+"":e,n),vy=(t,e,n)=>e.has(t)||OE("Cannot "+n);var Y=(t,e,n)=>(vy(t,e,"read from private field"),n?n.call(t):e.get(t)),nt=(t,e,n)=>e.has(t)?OE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),De=(t,e,n,r)=>(vy(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),xt=(t,e,n)=>(vy(t,e,"access private method"),n);var Nf=(t,e,n,r)=>({set _(s){De(t,e,s,n)},get _(){return Y(t,e,r)}});function LR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function eS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xy={exports:{}},Gu={},wy={exports:{}},dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function MR(){if(LE)return dt;LE=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=y&&B[y]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,x={};function _(B,Z,he){this.props=B,this.context=Z,this.refs=x,this.updater=he||w}_.prototype.isReactComponent={},_.prototype.setState=function(B,Z){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Z,"setState")},_.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function P(){}P.prototype=_.prototype;function j(B,Z,he){this.props=B,this.context=Z,this.refs=x,this.updater=he||w}var C=j.prototype=new P;C.constructor=j,N(C,_.prototype),C.isPureReactComponent=!0;var F=Array.isArray,U=Object.prototype.hasOwnProperty,z={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function O(B,Z,he){var Ce,$e={},Ie=null,we=null;if(Z!=null)for(Ce in Z.ref!==void 0&&(we=Z.ref),Z.key!==void 0&&(Ie=""+Z.key),Z)U.call(Z,Ce)&&!k.hasOwnProperty(Ce)&&($e[Ce]=Z[Ce]);var Se=arguments.length-2;if(Se===1)$e.children=he;else if(1<Se){for(var He=Array(Se),Fe=0;Fe<Se;Fe++)He[Fe]=arguments[Fe+2];$e.children=He}if(B&&B.defaultProps)for(Ce in Se=B.defaultProps,Se)$e[Ce]===void 0&&($e[Ce]=Se[Ce]);return{$$typeof:t,type:B,key:Ie,ref:we,props:$e,_owner:z.current}}function L(B,Z){return{$$typeof:t,type:B.type,key:Z,ref:B.ref,props:B.props,_owner:B._owner}}function D(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function I(B){var Z={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(he){return Z[he]})}var M=/\/+/g;function R(B,Z){return typeof B=="object"&&B!==null&&B.key!=null?I(""+B.key):Z.toString(36)}function W(B,Z,he,Ce,$e){var Ie=typeof B;(Ie==="undefined"||Ie==="boolean")&&(B=null);var we=!1;if(B===null)we=!0;else switch(Ie){case"string":case"number":we=!0;break;case"object":switch(B.$$typeof){case t:case e:we=!0}}if(we)return we=B,$e=$e(we),B=Ce===""?"."+R(we,0):Ce,F($e)?(he="",B!=null&&(he=B.replace(M,"$&/")+"/"),W($e,Z,he,"",function(Fe){return Fe})):$e!=null&&(D($e)&&($e=L($e,he+(!$e.key||we&&we.key===$e.key?"":(""+$e.key).replace(M,"$&/")+"/")+B)),Z.push($e)),1;if(we=0,Ce=Ce===""?".":Ce+":",F(B))for(var Se=0;Se<B.length;Se++){Ie=B[Se];var He=Ce+R(Ie,Se);we+=W(Ie,Z,he,He,$e)}else if(He=v(B),typeof He=="function")for(B=He.call(B),Se=0;!(Ie=B.next()).done;)Ie=Ie.value,He=Ce+R(Ie,Se++),we+=W(Ie,Z,he,He,$e);else if(Ie==="object")throw Z=String(B),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return we}function K(B,Z,he){if(B==null)return B;var Ce=[],$e=0;return W(B,Ce,"","",function(Ie){return Z.call(he,Ie,$e++)}),Ce}function X(B){if(B._status===-1){var Z=B._result;Z=Z(),Z.then(function(he){(B._status===0||B._status===-1)&&(B._status=1,B._result=he)},function(he){(B._status===0||B._status===-1)&&(B._status=2,B._result=he)}),B._status===-1&&(B._status=0,B._result=Z)}if(B._status===1)return B._result.default;throw B._result}var ie={current:null},G={transition:null},oe={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:G,ReactCurrentOwner:z};function le(){throw Error("act(...) is not supported in production builds of React.")}return dt.Children={map:K,forEach:function(B,Z,he){K(B,function(){Z.apply(this,arguments)},he)},count:function(B){var Z=0;return K(B,function(){Z++}),Z},toArray:function(B){return K(B,function(Z){return Z})||[]},only:function(B){if(!D(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},dt.Component=_,dt.Fragment=n,dt.Profiler=s,dt.PureComponent=j,dt.StrictMode=r,dt.Suspense=h,dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,dt.act=le,dt.cloneElement=function(B,Z,he){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Ce=N({},B.props),$e=B.key,Ie=B.ref,we=B._owner;if(Z!=null){if(Z.ref!==void 0&&(Ie=Z.ref,we=z.current),Z.key!==void 0&&($e=""+Z.key),B.type&&B.type.defaultProps)var Se=B.type.defaultProps;for(He in Z)U.call(Z,He)&&!k.hasOwnProperty(He)&&(Ce[He]=Z[He]===void 0&&Se!==void 0?Se[He]:Z[He])}var He=arguments.length-2;if(He===1)Ce.children=he;else if(1<He){Se=Array(He);for(var Fe=0;Fe<He;Fe++)Se[Fe]=arguments[Fe+2];Ce.children=Se}return{$$typeof:t,type:B.type,key:$e,ref:Ie,props:Ce,_owner:we}},dt.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},dt.createElement=O,dt.createFactory=function(B){var Z=O.bind(null,B);return Z.type=B,Z},dt.createRef=function(){return{current:null}},dt.forwardRef=function(B){return{$$typeof:u,render:B}},dt.isValidElement=D,dt.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:X}},dt.memo=function(B,Z){return{$$typeof:f,type:B,compare:Z===void 0?null:Z}},dt.startTransition=function(B){var Z=G.transition;G.transition={};try{B()}finally{G.transition=Z}},dt.unstable_act=le,dt.useCallback=function(B,Z){return ie.current.useCallback(B,Z)},dt.useContext=function(B){return ie.current.useContext(B)},dt.useDebugValue=function(){},dt.useDeferredValue=function(B){return ie.current.useDeferredValue(B)},dt.useEffect=function(B,Z){return ie.current.useEffect(B,Z)},dt.useId=function(){return ie.current.useId()},dt.useImperativeHandle=function(B,Z,he){return ie.current.useImperativeHandle(B,Z,he)},dt.useInsertionEffect=function(B,Z){return ie.current.useInsertionEffect(B,Z)},dt.useLayoutEffect=function(B,Z){return ie.current.useLayoutEffect(B,Z)},dt.useMemo=function(B,Z){return ie.current.useMemo(B,Z)},dt.useReducer=function(B,Z,he){return ie.current.useReducer(B,Z,he)},dt.useRef=function(B){return ie.current.useRef(B)},dt.useState=function(B){return ie.current.useState(B)},dt.useSyncExternalStore=function(B,Z,he){return ie.current.useSyncExternalStore(B,Z,he)},dt.useTransition=function(){return ie.current.useTransition()},dt.version="18.3.1",dt}var ME;function jx(){return ME||(ME=1,wy.exports=MR()),wy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function FR(){if(FE)return Gu;FE=1;var t=jx(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,f){var g,y={},v=null,w=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(w=h.ref);for(g in h)r.call(h,g)&&!a.hasOwnProperty(g)&&(y[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:u,key:v,ref:w,props:y,_owner:s.current}}return Gu.Fragment=n,Gu.jsx=c,Gu.jsxs=c,Gu}var VE;function VR(){return VE||(VE=1,xy.exports=FR()),xy.exports}var o=VR();let up=!1,UR=[],id=0;const UE=3,Jc=t=>{up!==t&&(up=t,console.log(`ðŸ”„ Firebase mode changed: ${t?"OFFLINE":"ONLINE"}`),UR.forEach(e=>e()))},$E=t=>{id++,console.log(`ðŸš¨ Firebase error ${id}/${UE}:`,t.message),id>=UE&&(console.log("ðŸ”„ Too many Firebase errors - switching to global offline mode"),Jc(!0))};if(!window.fetch.__firebasePatched){const t=window.fetch,e=(...n)=>{var a;const r=typeof n[0]=="string"?n[0]:(a=n[0])==null?void 0:a.url;if(!(!!r&&(r.includes("firestore.googleapis.com")||r.includes("firebase.googleapis.com")||r.includes("identitytoolkit.googleapis.com"))))try{return t(...n)}catch(c){return Promise.reject(c)}if(up){const c=new Error("Firebase offline mode - request blocked");return c.isFirebaseOfflineError=!0,Promise.reject(c)}try{const c=t(...n);return Promise.resolve(c).then(u=>(u.ok&&(id=0,up&&(console.log("ðŸŸ¢ Firebase connection restored"),Jc(!1))),u)).catch(u=>{console.log("ðŸ”´ Firebase request failed:",(u==null?void 0:u.message)||String(u));const h=String(u&&(u.stack||"")||""),f=String((u==null?void 0:u.message)||u||"").toLowerCase();throw!(h.includes("chrome-extension://")||h.includes("extension://")||f.includes("extension"))&&navigator.onLine&&$E(u),u})}catch(c){console.log("ðŸ”´ Firebase request threw synchronously:",(c==null?void 0:c.message)||String(c));const u=String(c&&(c.stack||"")||""),h=String((c==null?void 0:c.message)||c||"").toLowerCase();return!(u.includes("chrome-extension://")||u.includes("extension://")||h.includes("extension"))&&navigator.onLine&&$E(c),Promise.reject(c)}};e.__firebasePatched=!0,window.fetch=e}console.log("ðŸ”„ Initializing Firebase monitoring...");navigator.onLine||(console.log("ðŸš« No internet connection - starting in offline mode"),Jc(!0));window.addEventListener("online",()=>{console.log("ðŸŸ¢ Internet connection restored"),id=0,Jc(!1)});window.addEventListener("offline",()=>{console.log("ðŸ”´ Internet connection lost"),Jc(!0)});console.log("ðŸ”„ Starting Firebase monitoring in ONLINE mode");window.addEventListener("unhandledrejection",t=>{var r;const e=String(((r=t==null?void 0:t.reason)==null?void 0:r.message)||(t==null?void 0:t.reason)||""),n=String((t==null?void 0:t.reason)&&(t.reason.stack||"")||"");if((e.includes("Failed to fetch")||e.toLowerCase().includes("extension"))&&(n.includes("chrome-extension://")||n.includes("extension://")||n.includes("fullstory.com"))){t.preventDefault();return}if(n.includes("chrome-extension://")||n.includes("extension://")){t.preventDefault();return}});const $R=console.error,zR=console.warn,BR=console.log;console.error=(...t)=>{const e=t.map(s=>s&&typeof s=="object"?String(s):s).join(" "),n=t.some(s=>s&&typeof s=="object"&&s.stack&&s.stack.includes("chrome-extension://"));["Firebase offline mode - request blocked","FirebaseError: [code=unavailable]","Could not reach Cloud Firestore backend","Connection failed","The operation could not be completed","device does not have a healthy Internet connection","client will operate in offline mode","Most recent error: FirebaseError","@firebase/firestore: Firestore","fullstory.com","TypeError: Failed to fetch"].some(s=>e.includes(s))||n||e.includes("chrome-extension://")||e.includes("extension://")||$R.apply(console,t)};console.warn=(...t)=>{const e=t.join(" ");e.includes("Firebase")&&e.includes("offline")||zR.apply(console,t)};console.log=(...t)=>{const e=t.join(" ");e.includes("@firebase/firestore")&&e.includes("offline")||BR.apply(console,t)};setTimeout(()=>{navigator.onLine?console.log("ðŸŒ Internet available - Firebase enabled and ready"):(console.log("ðŸš« No internet connection detected - switching to offline mode"),Jc(!0))},100);var E=jx();const _e=eS(E),tS=LR({__proto__:null,default:_e},[E]),qR=1,WR=1e6;let _y=0;function HR(){return _y=(_y+1)%Number.MAX_SAFE_INTEGER,_y.toString()}const Ey=new Map,zE=t=>{if(Ey.has(t))return;const e=setTimeout(()=>{Ey.delete(t),od({type:"REMOVE_TOAST",toastId:t})},WR);Ey.set(t,e)},KR=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,qR)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?zE(n):t.toasts.forEach(r=>{zE(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Hf=[];let Kf={toasts:[]};function od(t){Kf=KR(Kf,t),Hf.forEach(e=>{e(Kf)})}function GR({...t}){const e=HR(),n=s=>od({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>od({type:"DISMISS_TOAST",toastId:e});return od({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function QR(){const[t,e]=E.useState(Kf);return E.useEffect(()=>(Hf.push(e),()=>{const n=Hf.indexOf(e);n>-1&&Hf.splice(n,1)}),[t]),{...t,toast:GR,dismiss:n=>od({type:"DISMISS_TOAST",toastId:n})}}var by={exports:{}},xr={},Ny={exports:{}},Sy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE;function YR(){return BE||(BE=1,function(t){function e(G,oe){var le=G.length;G.push(oe);e:for(;0<le;){var B=le-1>>>1,Z=G[B];if(0<s(Z,oe))G[B]=oe,G[le]=Z,le=B;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var oe=G[0],le=G.pop();if(le!==oe){G[0]=le;e:for(var B=0,Z=G.length,he=Z>>>1;B<he;){var Ce=2*(B+1)-1,$e=G[Ce],Ie=Ce+1,we=G[Ie];if(0>s($e,le))Ie<Z&&0>s(we,$e)?(G[B]=we,G[Ie]=le,B=Ie):(G[B]=$e,G[Ce]=le,B=Ce);else if(Ie<Z&&0>s(we,le))G[B]=we,G[Ie]=le,B=Ie;else break e}}return oe}function s(G,oe){var le=G.sortIndex-oe.sortIndex;return le!==0?le:G.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var h=[],f=[],g=1,y=null,v=3,w=!1,N=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(G){for(var oe=n(f);oe!==null;){if(oe.callback===null)r(f);else if(oe.startTime<=G)r(f),oe.sortIndex=oe.expirationTime,e(h,oe);else break;oe=n(f)}}function F(G){if(x=!1,C(G),!N)if(n(h)!==null)N=!0,X(U);else{var oe=n(f);oe!==null&&ie(F,oe.startTime-G)}}function U(G,oe){N=!1,x&&(x=!1,P(O),O=-1),w=!0;var le=v;try{for(C(oe),y=n(h);y!==null&&(!(y.expirationTime>oe)||G&&!I());){var B=y.callback;if(typeof B=="function"){y.callback=null,v=y.priorityLevel;var Z=B(y.expirationTime<=oe);oe=t.unstable_now(),typeof Z=="function"?y.callback=Z:y===n(h)&&r(h),C(oe)}else r(h);y=n(h)}if(y!==null)var he=!0;else{var Ce=n(f);Ce!==null&&ie(F,Ce.startTime-oe),he=!1}return he}finally{y=null,v=le,w=!1}}var z=!1,k=null,O=-1,L=5,D=-1;function I(){return!(t.unstable_now()-D<L)}function M(){if(k!==null){var G=t.unstable_now();D=G;var oe=!0;try{oe=k(!0,G)}finally{oe?R():(z=!1,k=null)}}else z=!1}var R;if(typeof j=="function")R=function(){j(M)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,K=W.port2;W.port1.onmessage=M,R=function(){K.postMessage(null)}}else R=function(){_(M,0)};function X(G){k=G,z||(z=!0,R())}function ie(G,oe){O=_(function(){G(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){N||w||(N=!0,X(U))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(G){switch(v){case 1:case 2:case 3:var oe=3;break;default:oe=v}var le=v;v=oe;try{return G()}finally{v=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,oe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var le=v;v=G;try{return oe()}finally{v=le}},t.unstable_scheduleCallback=function(G,oe,le){var B=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?B+le:B):le=B,G){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=le+Z,G={id:g++,callback:oe,priorityLevel:G,startTime:le,expirationTime:Z,sortIndex:-1},le>B?(G.sortIndex=le,e(f,G),n(h)===null&&G===n(f)&&(x?(P(O),O=-1):x=!0,ie(F,le-B))):(G.sortIndex=Z,e(h,G),N||w||(N=!0,X(U))),G},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(G){var oe=v;return function(){var le=v;v=oe;try{return G.apply(this,arguments)}finally{v=le}}}}(Sy)),Sy}var qE;function XR(){return qE||(qE=1,Ny.exports=YR()),Ny.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE;function JR(){if(WE)return xr;WE=1;var t=jx(),e=XR();function n(i){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,l){c(i,l),c(i+"Capture",l)}function c(i,l){for(s[i]=l,i=0;i<l.length;i++)r.add(l[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(i){return h.call(y,i)?!0:h.call(g,i)?!1:f.test(i)?y[i]=!0:(g[i]=!0,!1)}function w(i,l,d,m){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function N(i,l,d,m){if(l===null||typeof l>"u"||w(i,l,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function x(i,l,d,m,b,T,V){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=m,this.attributeNamespace=b,this.mustUseProperty=d,this.propertyName=i,this.type=l,this.sanitizeURL=T,this.removeEmptyString=V}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){_[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0];_[l]=new x(l,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){_[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){_[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){_[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){_[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){_[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){_[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){_[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function j(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var l=i.replace(P,j);_[l]=new x(l,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var l=i.replace(P,j);_[l]=new x(l,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(P,j);_[l]=new x(l,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){_[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),_.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){_[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function C(i,l,d,m){var b=_.hasOwnProperty(l)?_[l]:null;(b!==null?b.type!==0:m||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(N(l,d,b,m)&&(d=null),m||b===null?v(l)&&(d===null?i.removeAttribute(l):i.setAttribute(l,""+d)):b.mustUseProperty?i[b.propertyName]=d===null?b.type===3?!1:"":d:(l=b.attributeName,m=b.attributeNamespace,d===null?i.removeAttribute(l):(b=b.type,d=b===3||b===4&&d===!0?"":""+d,m?i.setAttributeNS(m,l,d):i.setAttribute(l,d))))}var F=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),z=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),I=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),G=Symbol.iterator;function oe(i){return i===null||typeof i!="object"?null:(i=G&&i[G]||i["@@iterator"],typeof i=="function"?i:null)}var le=Object.assign,B;function Z(i){if(B===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);B=l&&l[1]||""}return`
`+B+i}var he=!1;function Ce(i,l){if(!i||he)return"";he=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(se){var m=se}Reflect.construct(i,[],l)}else{try{l.call()}catch(se){m=se}i.call(l.prototype)}else{try{throw Error()}catch(se){m=se}i()}}catch(se){if(se&&m&&typeof se.stack=="string"){for(var b=se.stack.split(`
`),T=m.stack.split(`
`),V=b.length-1,q=T.length-1;1<=V&&0<=q&&b[V]!==T[q];)q--;for(;1<=V&&0<=q;V--,q--)if(b[V]!==T[q]){if(V!==1||q!==1)do if(V--,q--,0>q||b[V]!==T[q]){var H=`
`+b[V].replace(" at new "," at ");return i.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",i.displayName)),H}while(1<=V&&0<=q);break}}}finally{he=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?Z(i):""}function $e(i){switch(i.tag){case 5:return Z(i.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return i=Ce(i.type,!1),i;case 11:return i=Ce(i.type.render,!1),i;case 1:return i=Ce(i.type,!0),i;default:return""}}function Ie(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case z:return"Portal";case L:return"Profiler";case O:return"StrictMode";case R:return"Suspense";case W:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case I:return(i.displayName||"Context")+".Consumer";case D:return(i._context.displayName||"Context")+".Provider";case M:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case K:return l=i.displayName||null,l!==null?l:Ie(i.type)||"Memo";case X:l=i._payload,i=i._init;try{return Ie(i(l))}catch{}}return null}function we(i){var l=i.type;switch(i.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=l.render,i=i.displayName||i.name||"",l.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(l);case 8:return l===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Se(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function He(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Fe(i){var l=He(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),m=""+i[l];if(!i.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,T=d.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return b.call(this)},set:function(V){m=""+V,T.call(this,V)}}),Object.defineProperty(i,l,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(V){m=""+V},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function st(i){i._valueTracker||(i._valueTracker=Fe(i))}function it(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return i&&(m=He(i)?i.checked?"true":"false":i.value),i=m,i!==d?(l.setValue(i),!0):!1}function ve(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function je(i,l){var d=l.checked;return le({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function mt(i,l){var d=l.defaultValue==null?"":l.defaultValue,m=l.checked!=null?l.checked:l.defaultChecked;d=Se(l.value!=null?l.value:d),i._wrapperState={initialChecked:m,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function an(i,l){l=l.checked,l!=null&&C(i,"checked",l,!1)}function zn(i,l){an(i,l);var d=Se(l.value),m=l.type;if(d!=null)m==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}l.hasOwnProperty("value")?Lt(i,l.type,d):l.hasOwnProperty("defaultValue")&&Lt(i,l.type,Se(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(i.defaultChecked=!!l.defaultChecked)}function jr(i,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var m=l.type;if(!(m!=="submit"&&m!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+i._wrapperState.initialValue,d||l===i.value||(i.value=l),i.defaultValue=l}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function Lt(i,l,d){(l!=="number"||ve(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var mn=Array.isArray;function Ir(i,l,d,m){if(i=i.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<i.length;d++)b=l.hasOwnProperty("$"+i[d].value),i[d].selected!==b&&(i[d].selected=b),b&&m&&(i[d].defaultSelected=!0)}else{for(d=""+Se(d),l=null,b=0;b<i.length;b++){if(i[b].value===d){i[b].selected=!0,m&&(i[b].defaultSelected=!0);return}l!==null||i[b].disabled||(l=i[b])}l!==null&&(l.selected=!0)}}function is(i,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return le({},l,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function dn(i,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(n(92));if(mn(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),d=l}i._wrapperState={initialValue:Se(d)}}function Ms(i,l){var d=Se(l.value),m=Se(l.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),l.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),m!=null&&(i.defaultValue=""+m)}function Fs(i){var l=i.textContent;l===i._wrapperState.initialValue&&l!==""&&l!==null&&(i.value=l)}function zt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kt(i,l){return i==null||i==="http://www.w3.org/1999/xhtml"?zt(l):i==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Bn,bn=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,m,b){MSApp.execUnsafeLocalFunction(function(){return i(l,d,m,b)})}:i}(function(i,l){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=l;else{for(Bn=Bn||document.createElement("div"),Bn.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Bn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}});function Ar(i,l){if(l){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=l;return}}i.textContent=l}var os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zr=["Webkit","ms","Moz","O"];Object.keys(os).forEach(function(i){zr.forEach(function(l){l=l+i.charAt(0).toUpperCase()+i.substring(1),os[l]=os[i]})});function Vs(i,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||os.hasOwnProperty(i)&&os[i]?(""+l).trim():l+"px"}function gi(i,l){i=i.style;for(var d in l)if(l.hasOwnProperty(d)){var m=d.indexOf("--")===0,b=Vs(d,l[d],m);d==="float"&&(d="cssFloat"),m?i.setProperty(d,b):i[d]=b}}var as=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qn(i,l){if(l){if(as[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Us(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ze=null;function Et(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var gt=null,Bt=null,Gt=null;function ne(i){if(i=Ru(i)){if(typeof gt!="function")throw Error(n(280));var l=i.stateNode;l&&(l=Fh(l),gt(i.stateNode,i.type,l))}}function ye(i){Bt?Gt?Gt.push(i):Gt=[i]:Bt=i}function Ve(){if(Bt){var i=Bt,l=Gt;if(Gt=Bt=null,ne(i),l)for(i=0;i<l.length;i++)ne(l[i])}}function Tt(i,l){return i(l)}function lt(){}var yt=!1;function Re(i,l,d){if(yt)return i(l,d);yt=!0;try{return Tt(i,l,d)}finally{yt=!1,(Bt!==null||Gt!==null)&&(lt(),Ve())}}function Qt(i,l){var d=i.stateNode;if(d===null)return null;var m=Fh(d);if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var yi=!1;if(u)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){yi=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{yi=!1}function $s(i,l,d,m,b,T,V,q,H){var se=Array.prototype.slice.call(arguments,3);try{l.apply(d,se)}catch(fe){this.onError(fe)}}var zs=!1,vi=null,dr=!1,to=null,bl={onError:function(i){zs=!0,vi=i}};function qt(i,l,d,m,b,T,V,q,H){zs=!1,vi=null,$s.apply(bl,arguments)}function Nl(i,l,d,m,b,T,V,q,H){if(qt.apply(this,arguments),zs){if(zs){var se=vi;zs=!1,vi=null}else throw Error(n(198));dr||(dr=!0,to=se)}}function ls(i){var l=i,d=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(d=l.return),i=l.return;while(i)}return l.tag===3?d:null}function ma(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function cs(i){if(ls(i)!==i)throw Error(n(188))}function uh(i){var l=i.alternate;if(!l){if(l=ls(i),l===null)throw Error(n(188));return l!==i?null:i}for(var d=i,m=l;;){var b=d.return;if(b===null)break;var T=b.alternate;if(T===null){if(m=b.return,m!==null){d=m;continue}break}if(b.child===T.child){for(T=b.child;T;){if(T===d)return cs(b),i;if(T===m)return cs(b),l;T=T.sibling}throw Error(n(188))}if(d.return!==m.return)d=b,m=T;else{for(var V=!1,q=b.child;q;){if(q===d){V=!0,d=b,m=T;break}if(q===m){V=!0,m=b,d=T;break}q=q.sibling}if(!V){for(q=T.child;q;){if(q===d){V=!0,d=T,m=b;break}if(q===m){V=!0,m=T,d=b;break}q=q.sibling}if(!V)throw Error(n(189))}}if(d.alternate!==m)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?i:l}function pu(i){return i=uh(i),i!==null?Sl(i):null}function Sl(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var l=Sl(i);if(l!==null)return l;i=i.sibling}return null}var Tl=e.unstable_scheduleCallback,mu=e.unstable_cancelCallback,dh=e.unstable_shouldYield,Km=e.unstable_requestPaint,Vt=e.unstable_now,hh=e.unstable_getCurrentPriorityLevel,ga=e.unstable_ImmediatePriority,no=e.unstable_UserBlockingPriority,Br=e.unstable_NormalPriority,gu=e.unstable_LowPriority,fh=e.unstable_IdlePriority,ya=null,Pr=null;function ph(i){if(Pr&&typeof Pr.onCommitFiberRoot=="function")try{Pr.onCommitFiberRoot(ya,i,void 0,(i.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:gh,yu=Math.log,mh=Math.LN2;function gh(i){return i>>>=0,i===0?32:31-(yu(i)/mh|0)|0}var Cl=64,jl=4194304;function ro(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function va(i,l){var d=i.pendingLanes;if(d===0)return 0;var m=0,b=i.suspendedLanes,T=i.pingedLanes,V=d&268435455;if(V!==0){var q=V&~b;q!==0?m=ro(q):(T&=V,T!==0&&(m=ro(T)))}else V=d&~b,V!==0?m=ro(V):T!==0&&(m=ro(T));if(m===0)return 0;if(l!==0&&l!==m&&(l&b)===0&&(b=m&-m,T=l&-l,b>=T||b===16&&(T&4194240)!==0))return l;if((m&4)!==0&&(m|=d&16),l=i.entangledLanes,l!==0)for(i=i.entanglements,l&=m;0<l;)d=31-tr(l),b=1<<d,m|=i[d],l&=~b;return m}function Gm(i,l){switch(i){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xi(i,l){for(var d=i.suspendedLanes,m=i.pingedLanes,b=i.expirationTimes,T=i.pendingLanes;0<T;){var V=31-tr(T),q=1<<V,H=b[V];H===-1?((q&d)===0||(q&m)!==0)&&(b[V]=Gm(q,l)):H<=l&&(i.expiredLanes|=q),T&=~q}}function kr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function xa(){var i=Cl;return Cl<<=1,(Cl&4194240)===0&&(Cl=64),i}function so(i){for(var l=[],d=0;31>d;d++)l.push(i);return l}function io(i,l,d){i.pendingLanes|=l,l!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,l=31-tr(l),i[l]=d}function Mt(i,l){var d=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l,l=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<d;){var b=31-tr(d),T=1<<b;l[b]=0,m[b]=-1,i[b]=-1,d&=~T}}function oo(i,l){var d=i.entangledLanes|=l;for(i=i.entanglements;d;){var m=31-tr(d),b=1<<m;b&l|i[m]&l&&(i[m]|=l),d&=~b}}var vt=0;function ao(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var yh,Il,vh,xh,wh,vu=!1,Bs=[],On=null,us=null,ds=null,lo=new Map,qr=new Map,qs=[],Qm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _h(i,l){switch(i){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":lo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":qr.delete(l.pointerId)}}function hr(i,l,d,m,b,T){return i===null||i.nativeEvent!==T?(i={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:T,targetContainers:[b]},l!==null&&(l=Ru(l),l!==null&&Il(l)),i):(i.eventSystemFlags|=m,l=i.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),i)}function Ym(i,l,d,m,b){switch(l){case"focusin":return On=hr(On,i,l,d,m,b),!0;case"dragenter":return us=hr(us,i,l,d,m,b),!0;case"mouseover":return ds=hr(ds,i,l,d,m,b),!0;case"pointerover":var T=b.pointerId;return lo.set(T,hr(lo.get(T)||null,i,l,d,m,b)),!0;case"gotpointercapture":return T=b.pointerId,qr.set(T,hr(qr.get(T)||null,i,l,d,m,b)),!0}return!1}function Eh(i){var l=Na(i.target);if(l!==null){var d=ls(l);if(d!==null){if(l=d.tag,l===13){if(l=ma(d),l!==null){i.blockedOn=l,wh(i.priority,function(){vh(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function wi(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var d=Al(i.domEventName,i.eventSystemFlags,l[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var m=new d.constructor(d.type,d);Ze=m,d.target.dispatchEvent(m),Ze=null}else return l=Ru(d),l!==null&&Il(l),i.blockedOn=d,!1;l.shift()}return!0}function wa(i,l,d){wi(i)&&d.delete(l)}function bh(){vu=!1,On!==null&&wi(On)&&(On=null),us!==null&&wi(us)&&(us=null),ds!==null&&wi(ds)&&(ds=null),lo.forEach(wa),qr.forEach(wa)}function hs(i,l){i.blockedOn===l&&(i.blockedOn=null,vu||(vu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bh)))}function fs(i){function l(b){return hs(b,i)}if(0<Bs.length){hs(Bs[0],i);for(var d=1;d<Bs.length;d++){var m=Bs[d];m.blockedOn===i&&(m.blockedOn=null)}}for(On!==null&&hs(On,i),us!==null&&hs(us,i),ds!==null&&hs(ds,i),lo.forEach(l),qr.forEach(l),d=0;d<qs.length;d++)m=qs[d],m.blockedOn===i&&(m.blockedOn=null);for(;0<qs.length&&(d=qs[0],d.blockedOn===null);)Eh(d),d.blockedOn===null&&qs.shift()}var _i=F.ReactCurrentBatchConfig,co=!0;function Yt(i,l,d,m){var b=vt,T=_i.transition;_i.transition=null;try{vt=1,xu(i,l,d,m)}finally{vt=b,_i.transition=T}}function Xm(i,l,d,m){var b=vt,T=_i.transition;_i.transition=null;try{vt=4,xu(i,l,d,m)}finally{vt=b,_i.transition=T}}function xu(i,l,d,m){if(co){var b=Al(i,l,d,m);if(b===null)lg(i,l,m,_a,d),_h(i,m);else if(Ym(b,i,l,d,m))m.stopPropagation();else if(_h(i,m),l&4&&-1<Qm.indexOf(i)){for(;b!==null;){var T=Ru(b);if(T!==null&&yh(T),T=Al(i,l,d,m),T===null&&lg(i,l,m,_a,d),T===b)break;b=T}b!==null&&m.stopPropagation()}else lg(i,l,m,null,d)}}var _a=null;function Al(i,l,d,m){if(_a=null,i=Et(m),i=Na(i),i!==null)if(l=ls(i),l===null)i=null;else if(d=l.tag,d===13){if(i=ma(l),i!==null)return i;i=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null);return _a=i,null}function wu(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hh()){case ga:return 1;case no:return 4;case Br:case gu:return 16;case fh:return 536870912;default:return 16}default:return 16}}var Rr=null,Pl=null,fr=null;function _u(){if(fr)return fr;var i,l=Pl,d=l.length,m,b="value"in Rr?Rr.value:Rr.textContent,T=b.length;for(i=0;i<d&&l[i]===b[i];i++);var V=d-i;for(m=1;m<=V&&l[d-m]===b[T-m];m++);return fr=b.slice(i,1<m?1-m:void 0)}function kl(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function Ws(){return!0}function Eu(){return!1}function Dn(i){function l(d,m,b,T,V){this._reactName=d,this._targetInst=b,this.type=m,this.nativeEvent=T,this.target=V,this.currentTarget=null;for(var q in i)i.hasOwnProperty(q)&&(d=i[q],this[q]=d?d(T):T[q]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Ws:Eu,this.isPropagationStopped=Eu,this}return le(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),l}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rl=Dn(ps),Hs=le({},ps,{view:0,detail:0}),Jm=Dn(Hs),Ol,Ei,uo,Ea=le({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ks,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==uo&&(uo&&i.type==="mousemove"?(Ol=i.screenX-uo.screenX,Ei=i.screenY-uo.screenY):Ei=Ol=0,uo=i),Ol)},movementY:function(i){return"movementY"in i?i.movementY:Ei}}),Dl=Dn(Ea),bu=le({},Ea,{dataTransfer:0}),Nh=Dn(bu),Ll=le({},Hs,{relatedTarget:0}),Ml=Dn(Ll),Sh=le({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),bi=Dn(Sh),Th=le({},ps,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ch=Dn(Th),jh=le({},ps,{data:0}),Nu=Dn(jh),Fl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ih={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ah(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=Ih[i])?!!l[i]:!1}function Ks(){return Ah}var p=le({},Hs,{key:function(i){if(i.key){var l=Fl[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=kl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?nr[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ks,charCode:function(i){return i.type==="keypress"?kl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?kl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),S=Dn(p),A=le({},Ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$=Dn(A),ee=le({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ks}),ae=Dn(ee),Ee=le({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dt=Dn(Ee),Nn=le({},Ea,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),bt=Dn(Nn),In=[9,13,27,32],gn=u&&"CompositionEvent"in window,Wr=null;u&&"documentMode"in document&&(Wr=document.documentMode);var Or=u&&"TextEvent"in window&&!Wr,ba=u&&(!gn||Wr&&8<Wr&&11>=Wr),Vl=" ",j0=!1;function I0(i,l){switch(i){case"keyup":return In.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ul=!1;function Pk(i,l){switch(i){case"compositionend":return A0(l);case"keypress":return l.which!==32?null:(j0=!0,Vl);case"textInput":return i=l.data,i===Vl&&j0?null:i;default:return null}}function kk(i,l){if(Ul)return i==="compositionend"||!gn&&I0(i,l)?(i=_u(),fr=Pl=Rr=null,Ul=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ba&&l.locale!=="ko"?null:l.data;default:return null}}var Rk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P0(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!Rk[i.type]:l==="textarea"}function k0(i,l,d,m){ye(m),l=Dh(l,"onChange"),0<l.length&&(d=new Rl("onChange","change",null,d,m),i.push({event:d,listeners:l}))}var Su=null,Tu=null;function Ok(i){Y0(i,0)}function Ph(i){var l=Wl(i);if(it(l))return i}function Dk(i,l){if(i==="change")return l}var R0=!1;if(u){var Zm;if(u){var eg="oninput"in document;if(!eg){var O0=document.createElement("div");O0.setAttribute("oninput","return;"),eg=typeof O0.oninput=="function"}Zm=eg}else Zm=!1;R0=Zm&&(!document.documentMode||9<document.documentMode)}function D0(){Su&&(Su.detachEvent("onpropertychange",L0),Tu=Su=null)}function L0(i){if(i.propertyName==="value"&&Ph(Tu)){var l=[];k0(l,Tu,i,Et(i)),Re(Ok,l)}}function Lk(i,l,d){i==="focusin"?(D0(),Su=l,Tu=d,Su.attachEvent("onpropertychange",L0)):i==="focusout"&&D0()}function Mk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ph(Tu)}function Fk(i,l){if(i==="click")return Ph(l)}function Vk(i,l){if(i==="input"||i==="change")return Ph(l)}function Uk(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var ms=typeof Object.is=="function"?Object.is:Uk;function Cu(i,l){if(ms(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var d=Object.keys(i),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var b=d[m];if(!h.call(l,b)||!ms(i[b],l[b]))return!1}return!0}function M0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function F0(i,l){var d=M0(i);i=0;for(var m;d;){if(d.nodeType===3){if(m=i+d.textContent.length,i<=l&&m>=l)return{node:d,offset:l-i};i=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=M0(d)}}function V0(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?V0(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function U0(){for(var i=window,l=ve();l instanceof i.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)i=l.contentWindow;else break;l=ve(i.document)}return l}function tg(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function $k(i){var l=U0(),d=i.focusedElem,m=i.selectionRange;if(l!==d&&d&&d.ownerDocument&&V0(d.ownerDocument.documentElement,d)){if(m!==null&&tg(d)){if(l=m.start,i=m.end,i===void 0&&(i=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(i,d.value.length);else if(i=(l=d.ownerDocument||document)&&l.defaultView||window,i.getSelection){i=i.getSelection();var b=d.textContent.length,T=Math.min(m.start,b);m=m.end===void 0?T:Math.min(m.end,b),!i.extend&&T>m&&(b=m,m=T,T=b),b=F0(d,T);var V=F0(d,m);b&&V&&(i.rangeCount!==1||i.anchorNode!==b.node||i.anchorOffset!==b.offset||i.focusNode!==V.node||i.focusOffset!==V.offset)&&(l=l.createRange(),l.setStart(b.node,b.offset),i.removeAllRanges(),T>m?(i.addRange(l),i.extend(V.node,V.offset)):(l.setEnd(V.node,V.offset),i.addRange(l)))}}for(l=[],i=d;i=i.parentNode;)i.nodeType===1&&l.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)i=l[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var zk=u&&"documentMode"in document&&11>=document.documentMode,$l=null,ng=null,ju=null,rg=!1;function $0(i,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;rg||$l==null||$l!==ve(m)||(m=$l,"selectionStart"in m&&tg(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ju&&Cu(ju,m)||(ju=m,m=Dh(ng,"onSelect"),0<m.length&&(l=new Rl("onSelect","select",null,l,d),i.push({event:l,listeners:m}),l.target=$l)))}function kh(i,l){var d={};return d[i.toLowerCase()]=l.toLowerCase(),d["Webkit"+i]="webkit"+l,d["Moz"+i]="moz"+l,d}var zl={animationend:kh("Animation","AnimationEnd"),animationiteration:kh("Animation","AnimationIteration"),animationstart:kh("Animation","AnimationStart"),transitionend:kh("Transition","TransitionEnd")},sg={},z0={};u&&(z0=document.createElement("div").style,"AnimationEvent"in window||(delete zl.animationend.animation,delete zl.animationiteration.animation,delete zl.animationstart.animation),"TransitionEvent"in window||delete zl.transitionend.transition);function Rh(i){if(sg[i])return sg[i];if(!zl[i])return i;var l=zl[i],d;for(d in l)if(l.hasOwnProperty(d)&&d in z0)return sg[i]=l[d];return i}var B0=Rh("animationend"),q0=Rh("animationiteration"),W0=Rh("animationstart"),H0=Rh("transitionend"),K0=new Map,G0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ho(i,l){K0.set(i,l),a(l,[i])}for(var ig=0;ig<G0.length;ig++){var og=G0[ig],Bk=og.toLowerCase(),qk=og[0].toUpperCase()+og.slice(1);ho(Bk,"on"+qk)}ho(B0,"onAnimationEnd"),ho(q0,"onAnimationIteration"),ho(W0,"onAnimationStart"),ho("dblclick","onDoubleClick"),ho("focusin","onFocus"),ho("focusout","onBlur"),ho(H0,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Iu));function Q0(i,l,d){var m=i.type||"unknown-event";i.currentTarget=d,Nl(m,l,void 0,i),i.currentTarget=null}function Y0(i,l){l=(l&4)!==0;for(var d=0;d<i.length;d++){var m=i[d],b=m.event;m=m.listeners;e:{var T=void 0;if(l)for(var V=m.length-1;0<=V;V--){var q=m[V],H=q.instance,se=q.currentTarget;if(q=q.listener,H!==T&&b.isPropagationStopped())break e;Q0(b,q,se),T=H}else for(V=0;V<m.length;V++){if(q=m[V],H=q.instance,se=q.currentTarget,q=q.listener,H!==T&&b.isPropagationStopped())break e;Q0(b,q,se),T=H}}}if(dr)throw i=to,dr=!1,to=null,i}function Wt(i,l){var d=l[pg];d===void 0&&(d=l[pg]=new Set);var m=i+"__bubble";d.has(m)||(X0(l,i,2,!1),d.add(m))}function ag(i,l,d){var m=0;l&&(m|=4),X0(d,i,m,l)}var Oh="_reactListening"+Math.random().toString(36).slice(2);function Au(i){if(!i[Oh]){i[Oh]=!0,r.forEach(function(d){d!=="selectionchange"&&(Wk.has(d)||ag(d,!1,i),ag(d,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Oh]||(l[Oh]=!0,ag("selectionchange",!1,l))}}function X0(i,l,d,m){switch(wu(l)){case 1:var b=Yt;break;case 4:b=Xm;break;default:b=xu}d=b.bind(null,l,d,i),b=void 0,!yi||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),m?b!==void 0?i.addEventListener(l,d,{capture:!0,passive:b}):i.addEventListener(l,d,!0):b!==void 0?i.addEventListener(l,d,{passive:b}):i.addEventListener(l,d,!1)}function lg(i,l,d,m,b){var T=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var V=m.tag;if(V===3||V===4){var q=m.stateNode.containerInfo;if(q===b||q.nodeType===8&&q.parentNode===b)break;if(V===4)for(V=m.return;V!==null;){var H=V.tag;if((H===3||H===4)&&(H=V.stateNode.containerInfo,H===b||H.nodeType===8&&H.parentNode===b))return;V=V.return}for(;q!==null;){if(V=Na(q),V===null)return;if(H=V.tag,H===5||H===6){m=T=V;continue e}q=q.parentNode}}m=m.return}Re(function(){var se=T,fe=Et(d),ge=[];e:{var de=K0.get(i);if(de!==void 0){var Pe=Rl,Le=i;switch(i){case"keypress":if(kl(d)===0)break e;case"keydown":case"keyup":Pe=S;break;case"focusin":Le="focus",Pe=Ml;break;case"focusout":Le="blur",Pe=Ml;break;case"beforeblur":case"afterblur":Pe=Ml;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=Dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Nh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=ae;break;case B0:case q0:case W0:Pe=bi;break;case H0:Pe=Dt;break;case"scroll":Pe=Jm;break;case"wheel":Pe=bt;break;case"copy":case"cut":case"paste":Pe=Ch;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=$}var Me=(l&4)!==0,hn=!Me&&i==="scroll",te=Me?de!==null?de+"Capture":null:de;Me=[];for(var Q=se,re;Q!==null;){re=Q;var xe=re.stateNode;if(re.tag===5&&xe!==null&&(re=xe,te!==null&&(xe=Qt(Q,te),xe!=null&&Me.push(Pu(Q,xe,re)))),hn)break;Q=Q.return}0<Me.length&&(de=new Pe(de,Le,null,d,fe),ge.push({event:de,listeners:Me}))}}if((l&7)===0){e:{if(de=i==="mouseover"||i==="pointerover",Pe=i==="mouseout"||i==="pointerout",de&&d!==Ze&&(Le=d.relatedTarget||d.fromElement)&&(Na(Le)||Le[Ni]))break e;if((Pe||de)&&(de=fe.window===fe?fe:(de=fe.ownerDocument)?de.defaultView||de.parentWindow:window,Pe?(Le=d.relatedTarget||d.toElement,Pe=se,Le=Le?Na(Le):null,Le!==null&&(hn=ls(Le),Le!==hn||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(Pe=null,Le=se),Pe!==Le)){if(Me=Dl,xe="onMouseLeave",te="onMouseEnter",Q="mouse",(i==="pointerout"||i==="pointerover")&&(Me=$,xe="onPointerLeave",te="onPointerEnter",Q="pointer"),hn=Pe==null?de:Wl(Pe),re=Le==null?de:Wl(Le),de=new Me(xe,Q+"leave",Pe,d,fe),de.target=hn,de.relatedTarget=re,xe=null,Na(fe)===se&&(Me=new Me(te,Q+"enter",Le,d,fe),Me.target=re,Me.relatedTarget=hn,xe=Me),hn=xe,Pe&&Le)t:{for(Me=Pe,te=Le,Q=0,re=Me;re;re=Bl(re))Q++;for(re=0,xe=te;xe;xe=Bl(xe))re++;for(;0<Q-re;)Me=Bl(Me),Q--;for(;0<re-Q;)te=Bl(te),re--;for(;Q--;){if(Me===te||te!==null&&Me===te.alternate)break t;Me=Bl(Me),te=Bl(te)}Me=null}else Me=null;Pe!==null&&J0(ge,de,Pe,Me,!1),Le!==null&&hn!==null&&J0(ge,hn,Le,Me,!0)}}e:{if(de=se?Wl(se):window,Pe=de.nodeName&&de.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&de.type==="file")var Ue=Dk;else if(P0(de))if(R0)Ue=Vk;else{Ue=Mk;var Ye=Lk}else(Pe=de.nodeName)&&Pe.toLowerCase()==="input"&&(de.type==="checkbox"||de.type==="radio")&&(Ue=Fk);if(Ue&&(Ue=Ue(i,se))){k0(ge,Ue,d,fe);break e}Ye&&Ye(i,de,se),i==="focusout"&&(Ye=de._wrapperState)&&Ye.controlled&&de.type==="number"&&Lt(de,"number",de.value)}switch(Ye=se?Wl(se):window,i){case"focusin":(P0(Ye)||Ye.contentEditable==="true")&&($l=Ye,ng=se,ju=null);break;case"focusout":ju=ng=$l=null;break;case"mousedown":rg=!0;break;case"contextmenu":case"mouseup":case"dragend":rg=!1,$0(ge,d,fe);break;case"selectionchange":if(zk)break;case"keydown":case"keyup":$0(ge,d,fe)}var Xe;if(gn)e:{switch(i){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Ul?I0(i,d)&&(rt="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(rt="onCompositionStart");rt&&(ba&&d.locale!=="ko"&&(Ul||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Ul&&(Xe=_u()):(Rr=fe,Pl="value"in Rr?Rr.value:Rr.textContent,Ul=!0)),Ye=Dh(se,rt),0<Ye.length&&(rt=new Nu(rt,i,null,d,fe),ge.push({event:rt,listeners:Ye}),Xe?rt.data=Xe:(Xe=A0(d),Xe!==null&&(rt.data=Xe)))),(Xe=Or?Pk(i,d):kk(i,d))&&(se=Dh(se,"onBeforeInput"),0<se.length&&(fe=new Nu("onBeforeInput","beforeinput",null,d,fe),ge.push({event:fe,listeners:se}),fe.data=Xe))}Y0(ge,l)})}function Pu(i,l,d){return{instance:i,listener:l,currentTarget:d}}function Dh(i,l){for(var d=l+"Capture",m=[];i!==null;){var b=i,T=b.stateNode;b.tag===5&&T!==null&&(b=T,T=Qt(i,d),T!=null&&m.unshift(Pu(i,T,b)),T=Qt(i,l),T!=null&&m.push(Pu(i,T,b))),i=i.return}return m}function Bl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function J0(i,l,d,m,b){for(var T=l._reactName,V=[];d!==null&&d!==m;){var q=d,H=q.alternate,se=q.stateNode;if(H!==null&&H===m)break;q.tag===5&&se!==null&&(q=se,b?(H=Qt(d,T),H!=null&&V.unshift(Pu(d,H,q))):b||(H=Qt(d,T),H!=null&&V.push(Pu(d,H,q)))),d=d.return}V.length!==0&&i.push({event:l,listeners:V})}var Hk=/\r\n?/g,Kk=/\u0000|\uFFFD/g;function Z0(i){return(typeof i=="string"?i:""+i).replace(Hk,`
`).replace(Kk,"")}function Lh(i,l,d){if(l=Z0(l),Z0(i)!==l&&d)throw Error(n(425))}function Mh(){}var cg=null,ug=null;function dg(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var hg=typeof setTimeout=="function"?setTimeout:void 0,Gk=typeof clearTimeout=="function"?clearTimeout:void 0,e_=typeof Promise=="function"?Promise:void 0,Qk=typeof queueMicrotask=="function"?queueMicrotask:typeof e_<"u"?function(i){return e_.resolve(null).then(i).catch(Yk)}:hg;function Yk(i){setTimeout(function(){throw i})}function fg(i,l){var d=l,m=0;do{var b=d.nextSibling;if(i.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(m===0){i.removeChild(b),fs(l);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=b}while(d);fs(l)}function fo(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return i}function t_(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return i;l--}else d==="/$"&&l++}i=i.previousSibling}return null}var ql=Math.random().toString(36).slice(2),Gs="__reactFiber$"+ql,ku="__reactProps$"+ql,Ni="__reactContainer$"+ql,pg="__reactEvents$"+ql,Xk="__reactListeners$"+ql,Jk="__reactHandles$"+ql;function Na(i){var l=i[Gs];if(l)return l;for(var d=i.parentNode;d;){if(l=d[Ni]||d[Gs]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(i=t_(i);i!==null;){if(d=i[Gs])return d;i=t_(i)}return l}i=d,d=i.parentNode}return null}function Ru(i){return i=i[Gs]||i[Ni],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Wl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Fh(i){return i[ku]||null}var mg=[],Hl=-1;function po(i){return{current:i}}function Ht(i){0>Hl||(i.current=mg[Hl],mg[Hl]=null,Hl--)}function Ut(i,l){Hl++,mg[Hl]=i.current,i.current=l}var mo={},Wn=po(mo),pr=po(!1),Sa=mo;function Kl(i,l){var d=i.type.contextTypes;if(!d)return mo;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var b={},T;for(T in d)b[T]=l[T];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=b),b}function mr(i){return i=i.childContextTypes,i!=null}function Vh(){Ht(pr),Ht(Wn)}function n_(i,l,d){if(Wn.current!==mo)throw Error(n(168));Ut(Wn,l),Ut(pr,d)}function r_(i,l,d){var m=i.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var b in m)if(!(b in l))throw Error(n(108,we(i)||"Unknown",b));return le({},d,m)}function Uh(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||mo,Sa=Wn.current,Ut(Wn,i),Ut(pr,pr.current),!0}function s_(i,l,d){var m=i.stateNode;if(!m)throw Error(n(169));d?(i=r_(i,l,Sa),m.__reactInternalMemoizedMergedChildContext=i,Ht(pr),Ht(Wn),Ut(Wn,i)):Ht(pr),Ut(pr,d)}var Si=null,$h=!1,gg=!1;function i_(i){Si===null?Si=[i]:Si.push(i)}function Zk(i){$h=!0,i_(i)}function go(){if(!gg&&Si!==null){gg=!0;var i=0,l=vt;try{var d=Si;for(vt=1;i<d.length;i++){var m=d[i];do m=m(!0);while(m!==null)}Si=null,$h=!1}catch(b){throw Si!==null&&(Si=Si.slice(i+1)),Tl(ga,go),b}finally{vt=l,gg=!1}}return null}var Gl=[],Ql=0,zh=null,Bh=0,Hr=[],Kr=0,Ta=null,Ti=1,Ci="";function Ca(i,l){Gl[Ql++]=Bh,Gl[Ql++]=zh,zh=i,Bh=l}function o_(i,l,d){Hr[Kr++]=Ti,Hr[Kr++]=Ci,Hr[Kr++]=Ta,Ta=i;var m=Ti;i=Ci;var b=32-tr(m)-1;m&=~(1<<b),d+=1;var T=32-tr(l)+b;if(30<T){var V=b-b%5;T=(m&(1<<V)-1).toString(32),m>>=V,b-=V,Ti=1<<32-tr(l)+b|d<<b|m,Ci=T+i}else Ti=1<<T|d<<b|m,Ci=i}function yg(i){i.return!==null&&(Ca(i,1),o_(i,1,0))}function vg(i){for(;i===zh;)zh=Gl[--Ql],Gl[Ql]=null,Bh=Gl[--Ql],Gl[Ql]=null;for(;i===Ta;)Ta=Hr[--Kr],Hr[Kr]=null,Ci=Hr[--Kr],Hr[Kr]=null,Ti=Hr[--Kr],Hr[Kr]=null}var Dr=null,Lr=null,Xt=!1,gs=null;function a_(i,l){var d=Xr(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=i,l=i.deletions,l===null?(i.deletions=[d],i.flags|=16):l.push(d)}function l_(i,l){switch(i.tag){case 5:var d=i.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(i.stateNode=l,Dr=i,Lr=fo(l.firstChild),!0):!1;case 6:return l=i.pendingProps===""||l.nodeType!==3?null:l,l!==null?(i.stateNode=l,Dr=i,Lr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Ta!==null?{id:Ti,overflow:Ci}:null,i.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=Xr(18,null,null,0),d.stateNode=l,d.return=i,i.child=d,Dr=i,Lr=null,!0):!1;default:return!1}}function xg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function wg(i){if(Xt){var l=Lr;if(l){var d=l;if(!l_(i,l)){if(xg(i))throw Error(n(418));l=fo(d.nextSibling);var m=Dr;l&&l_(i,l)?a_(m,d):(i.flags=i.flags&-4097|2,Xt=!1,Dr=i)}}else{if(xg(i))throw Error(n(418));i.flags=i.flags&-4097|2,Xt=!1,Dr=i}}}function c_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Dr=i}function qh(i){if(i!==Dr)return!1;if(!Xt)return c_(i),Xt=!0,!1;var l;if((l=i.tag!==3)&&!(l=i.tag!==5)&&(l=i.type,l=l!=="head"&&l!=="body"&&!dg(i.type,i.memoizedProps)),l&&(l=Lr)){if(xg(i))throw u_(),Error(n(418));for(;l;)a_(i,l),l=fo(l.nextSibling)}if(c_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(l===0){Lr=fo(i.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}i=i.nextSibling}Lr=null}}else Lr=Dr?fo(i.stateNode.nextSibling):null;return!0}function u_(){for(var i=Lr;i;)i=fo(i.nextSibling)}function Yl(){Lr=Dr=null,Xt=!1}function _g(i){gs===null?gs=[i]:gs.push(i)}var eR=F.ReactCurrentBatchConfig;function Ou(i,l,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var m=d.stateNode}if(!m)throw Error(n(147,i));var b=m,T=""+i;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===T?l.ref:(l=function(V){var q=b.refs;V===null?delete q[T]:q[T]=V},l._stringRef=T,l)}if(typeof i!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,i))}return i}function Wh(i,l){throw i=Object.prototype.toString.call(l),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i))}function d_(i){var l=i._init;return l(i._payload)}function h_(i){function l(te,Q){if(i){var re=te.deletions;re===null?(te.deletions=[Q],te.flags|=16):re.push(Q)}}function d(te,Q){if(!i)return null;for(;Q!==null;)l(te,Q),Q=Q.sibling;return null}function m(te,Q){for(te=new Map;Q!==null;)Q.key!==null?te.set(Q.key,Q):te.set(Q.index,Q),Q=Q.sibling;return te}function b(te,Q){return te=No(te,Q),te.index=0,te.sibling=null,te}function T(te,Q,re){return te.index=re,i?(re=te.alternate,re!==null?(re=re.index,re<Q?(te.flags|=2,Q):re):(te.flags|=2,Q)):(te.flags|=1048576,Q)}function V(te){return i&&te.alternate===null&&(te.flags|=2),te}function q(te,Q,re,xe){return Q===null||Q.tag!==6?(Q=hy(re,te.mode,xe),Q.return=te,Q):(Q=b(Q,re),Q.return=te,Q)}function H(te,Q,re,xe){var Ue=re.type;return Ue===k?fe(te,Q,re.props.children,xe,re.key):Q!==null&&(Q.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===X&&d_(Ue)===Q.type)?(xe=b(Q,re.props),xe.ref=Ou(te,Q,re),xe.return=te,xe):(xe=gf(re.type,re.key,re.props,null,te.mode,xe),xe.ref=Ou(te,Q,re),xe.return=te,xe)}function se(te,Q,re,xe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==re.containerInfo||Q.stateNode.implementation!==re.implementation?(Q=fy(re,te.mode,xe),Q.return=te,Q):(Q=b(Q,re.children||[]),Q.return=te,Q)}function fe(te,Q,re,xe,Ue){return Q===null||Q.tag!==7?(Q=Da(re,te.mode,xe,Ue),Q.return=te,Q):(Q=b(Q,re),Q.return=te,Q)}function ge(te,Q,re){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=hy(""+Q,te.mode,re),Q.return=te,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case U:return re=gf(Q.type,Q.key,Q.props,null,te.mode,re),re.ref=Ou(te,null,Q),re.return=te,re;case z:return Q=fy(Q,te.mode,re),Q.return=te,Q;case X:var xe=Q._init;return ge(te,xe(Q._payload),re)}if(mn(Q)||oe(Q))return Q=Da(Q,te.mode,re,null),Q.return=te,Q;Wh(te,Q)}return null}function de(te,Q,re,xe){var Ue=Q!==null?Q.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Ue!==null?null:q(te,Q,""+re,xe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case U:return re.key===Ue?H(te,Q,re,xe):null;case z:return re.key===Ue?se(te,Q,re,xe):null;case X:return Ue=re._init,de(te,Q,Ue(re._payload),xe)}if(mn(re)||oe(re))return Ue!==null?null:fe(te,Q,re,xe,null);Wh(te,re)}return null}function Pe(te,Q,re,xe,Ue){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return te=te.get(re)||null,q(Q,te,""+xe,Ue);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case U:return te=te.get(xe.key===null?re:xe.key)||null,H(Q,te,xe,Ue);case z:return te=te.get(xe.key===null?re:xe.key)||null,se(Q,te,xe,Ue);case X:var Ye=xe._init;return Pe(te,Q,re,Ye(xe._payload),Ue)}if(mn(xe)||oe(xe))return te=te.get(re)||null,fe(Q,te,xe,Ue,null);Wh(Q,xe)}return null}function Le(te,Q,re,xe){for(var Ue=null,Ye=null,Xe=Q,rt=Q=0,kn=null;Xe!==null&&rt<re.length;rt++){Xe.index>rt?(kn=Xe,Xe=null):kn=Xe.sibling;var It=de(te,Xe,re[rt],xe);if(It===null){Xe===null&&(Xe=kn);break}i&&Xe&&It.alternate===null&&l(te,Xe),Q=T(It,Q,rt),Ye===null?Ue=It:Ye.sibling=It,Ye=It,Xe=kn}if(rt===re.length)return d(te,Xe),Xt&&Ca(te,rt),Ue;if(Xe===null){for(;rt<re.length;rt++)Xe=ge(te,re[rt],xe),Xe!==null&&(Q=T(Xe,Q,rt),Ye===null?Ue=Xe:Ye.sibling=Xe,Ye=Xe);return Xt&&Ca(te,rt),Ue}for(Xe=m(te,Xe);rt<re.length;rt++)kn=Pe(Xe,te,rt,re[rt],xe),kn!==null&&(i&&kn.alternate!==null&&Xe.delete(kn.key===null?rt:kn.key),Q=T(kn,Q,rt),Ye===null?Ue=kn:Ye.sibling=kn,Ye=kn);return i&&Xe.forEach(function(So){return l(te,So)}),Xt&&Ca(te,rt),Ue}function Me(te,Q,re,xe){var Ue=oe(re);if(typeof Ue!="function")throw Error(n(150));if(re=Ue.call(re),re==null)throw Error(n(151));for(var Ye=Ue=null,Xe=Q,rt=Q=0,kn=null,It=re.next();Xe!==null&&!It.done;rt++,It=re.next()){Xe.index>rt?(kn=Xe,Xe=null):kn=Xe.sibling;var So=de(te,Xe,It.value,xe);if(So===null){Xe===null&&(Xe=kn);break}i&&Xe&&So.alternate===null&&l(te,Xe),Q=T(So,Q,rt),Ye===null?Ue=So:Ye.sibling=So,Ye=So,Xe=kn}if(It.done)return d(te,Xe),Xt&&Ca(te,rt),Ue;if(Xe===null){for(;!It.done;rt++,It=re.next())It=ge(te,It.value,xe),It!==null&&(Q=T(It,Q,rt),Ye===null?Ue=It:Ye.sibling=It,Ye=It);return Xt&&Ca(te,rt),Ue}for(Xe=m(te,Xe);!It.done;rt++,It=re.next())It=Pe(Xe,te,rt,It.value,xe),It!==null&&(i&&It.alternate!==null&&Xe.delete(It.key===null?rt:It.key),Q=T(It,Q,rt),Ye===null?Ue=It:Ye.sibling=It,Ye=It);return i&&Xe.forEach(function(RR){return l(te,RR)}),Xt&&Ca(te,rt),Ue}function hn(te,Q,re,xe){if(typeof re=="object"&&re!==null&&re.type===k&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case U:e:{for(var Ue=re.key,Ye=Q;Ye!==null;){if(Ye.key===Ue){if(Ue=re.type,Ue===k){if(Ye.tag===7){d(te,Ye.sibling),Q=b(Ye,re.props.children),Q.return=te,te=Q;break e}}else if(Ye.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===X&&d_(Ue)===Ye.type){d(te,Ye.sibling),Q=b(Ye,re.props),Q.ref=Ou(te,Ye,re),Q.return=te,te=Q;break e}d(te,Ye);break}else l(te,Ye);Ye=Ye.sibling}re.type===k?(Q=Da(re.props.children,te.mode,xe,re.key),Q.return=te,te=Q):(xe=gf(re.type,re.key,re.props,null,te.mode,xe),xe.ref=Ou(te,Q,re),xe.return=te,te=xe)}return V(te);case z:e:{for(Ye=re.key;Q!==null;){if(Q.key===Ye)if(Q.tag===4&&Q.stateNode.containerInfo===re.containerInfo&&Q.stateNode.implementation===re.implementation){d(te,Q.sibling),Q=b(Q,re.children||[]),Q.return=te,te=Q;break e}else{d(te,Q);break}else l(te,Q);Q=Q.sibling}Q=fy(re,te.mode,xe),Q.return=te,te=Q}return V(te);case X:return Ye=re._init,hn(te,Q,Ye(re._payload),xe)}if(mn(re))return Le(te,Q,re,xe);if(oe(re))return Me(te,Q,re,xe);Wh(te,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,Q!==null&&Q.tag===6?(d(te,Q.sibling),Q=b(Q,re),Q.return=te,te=Q):(d(te,Q),Q=hy(re,te.mode,xe),Q.return=te,te=Q),V(te)):d(te,Q)}return hn}var Xl=h_(!0),f_=h_(!1),Hh=po(null),Kh=null,Jl=null,Eg=null;function bg(){Eg=Jl=Kh=null}function Ng(i){var l=Hh.current;Ht(Hh),i._currentValue=l}function Sg(i,l,d){for(;i!==null;){var m=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),i===d)break;i=i.return}}function Zl(i,l){Kh=i,Eg=Jl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&l)!==0&&(gr=!0),i.firstContext=null)}function Gr(i){var l=i._currentValue;if(Eg!==i)if(i={context:i,memoizedValue:l,next:null},Jl===null){if(Kh===null)throw Error(n(308));Jl=i,Kh.dependencies={lanes:0,firstContext:i}}else Jl=Jl.next=i;return l}var ja=null;function Tg(i){ja===null?ja=[i]:ja.push(i)}function p_(i,l,d,m){var b=l.interleaved;return b===null?(d.next=d,Tg(l)):(d.next=b.next,b.next=d),l.interleaved=d,ji(i,m)}function ji(i,l){i.lanes|=l;var d=i.alternate;for(d!==null&&(d.lanes|=l),d=i,i=i.return;i!==null;)i.childLanes|=l,d=i.alternate,d!==null&&(d.childLanes|=l),d=i,i=i.return;return d.tag===3?d.stateNode:null}var yo=!1;function Cg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m_(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ii(i,l){return{eventTime:i,lane:l,tag:0,payload:null,callback:null,next:null}}function vo(i,l,d){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Ct&2)!==0){var b=m.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),m.pending=l,ji(i,d)}return b=m.interleaved,b===null?(l.next=l,Tg(m)):(l.next=b.next,b.next=l),m.interleaved=l,ji(i,d)}function Gh(i,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var m=l.lanes;m&=i.pendingLanes,d|=m,l.lanes=d,oo(i,d)}}function g_(i,l){var d=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var b=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var V={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?b=T=V:T=T.next=V,d=d.next}while(d!==null);T===null?b=T=l:T=T.next=l}else b=T=l;d={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:T,shared:m.shared,effects:m.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=l:i.next=l,d.lastBaseUpdate=l}function Qh(i,l,d,m){var b=i.updateQueue;yo=!1;var T=b.firstBaseUpdate,V=b.lastBaseUpdate,q=b.shared.pending;if(q!==null){b.shared.pending=null;var H=q,se=H.next;H.next=null,V===null?T=se:V.next=se,V=H;var fe=i.alternate;fe!==null&&(fe=fe.updateQueue,q=fe.lastBaseUpdate,q!==V&&(q===null?fe.firstBaseUpdate=se:q.next=se,fe.lastBaseUpdate=H))}if(T!==null){var ge=b.baseState;V=0,fe=se=H=null,q=T;do{var de=q.lane,Pe=q.eventTime;if((m&de)===de){fe!==null&&(fe=fe.next={eventTime:Pe,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Le=i,Me=q;switch(de=l,Pe=d,Me.tag){case 1:if(Le=Me.payload,typeof Le=="function"){ge=Le.call(Pe,ge,de);break e}ge=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Me.payload,de=typeof Le=="function"?Le.call(Pe,ge,de):Le,de==null)break e;ge=le({},ge,de);break e;case 2:yo=!0}}q.callback!==null&&q.lane!==0&&(i.flags|=64,de=b.effects,de===null?b.effects=[q]:de.push(q))}else Pe={eventTime:Pe,lane:de,tag:q.tag,payload:q.payload,callback:q.callback,next:null},fe===null?(se=fe=Pe,H=ge):fe=fe.next=Pe,V|=de;if(q=q.next,q===null){if(q=b.shared.pending,q===null)break;de=q,q=de.next,de.next=null,b.lastBaseUpdate=de,b.shared.pending=null}}while(!0);if(fe===null&&(H=ge),b.baseState=H,b.firstBaseUpdate=se,b.lastBaseUpdate=fe,l=b.shared.interleaved,l!==null){b=l;do V|=b.lane,b=b.next;while(b!==l)}else T===null&&(b.shared.lanes=0);Pa|=V,i.lanes=V,i.memoizedState=ge}}function y_(i,l,d){if(i=l.effects,l.effects=null,i!==null)for(l=0;l<i.length;l++){var m=i[l],b=m.callback;if(b!==null){if(m.callback=null,m=d,typeof b!="function")throw Error(n(191,b));b.call(m)}}}var Du={},Qs=po(Du),Lu=po(Du),Mu=po(Du);function Ia(i){if(i===Du)throw Error(n(174));return i}function jg(i,l){switch(Ut(Mu,l),Ut(Lu,i),Ut(Qs,Du),i=l.nodeType,i){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:kt(null,"");break;default:i=i===8?l.parentNode:l,l=i.namespaceURI||null,i=i.tagName,l=kt(l,i)}Ht(Qs),Ut(Qs,l)}function ec(){Ht(Qs),Ht(Lu),Ht(Mu)}function v_(i){Ia(Mu.current);var l=Ia(Qs.current),d=kt(l,i.type);l!==d&&(Ut(Lu,i),Ut(Qs,d))}function Ig(i){Lu.current===i&&(Ht(Qs),Ht(Lu))}var tn=po(0);function Yh(i){for(var l=i;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ag=[];function Pg(){for(var i=0;i<Ag.length;i++)Ag[i]._workInProgressVersionPrimary=null;Ag.length=0}var Xh=F.ReactCurrentDispatcher,kg=F.ReactCurrentBatchConfig,Aa=0,nn=null,Sn=null,An=null,Jh=!1,Fu=!1,Vu=0,tR=0;function Hn(){throw Error(n(321))}function Rg(i,l){if(l===null)return!1;for(var d=0;d<l.length&&d<i.length;d++)if(!ms(i[d],l[d]))return!1;return!0}function Og(i,l,d,m,b,T){if(Aa=T,nn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Xh.current=i===null||i.memoizedState===null?iR:oR,i=d(m,b),Fu){T=0;do{if(Fu=!1,Vu=0,25<=T)throw Error(n(301));T+=1,An=Sn=null,l.updateQueue=null,Xh.current=aR,i=d(m,b)}while(Fu)}if(Xh.current=tf,l=Sn!==null&&Sn.next!==null,Aa=0,An=Sn=nn=null,Jh=!1,l)throw Error(n(300));return i}function Dg(){var i=Vu!==0;return Vu=0,i}function Ys(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?nn.memoizedState=An=i:An=An.next=i,An}function Qr(){if(Sn===null){var i=nn.alternate;i=i!==null?i.memoizedState:null}else i=Sn.next;var l=An===null?nn.memoizedState:An.next;if(l!==null)An=l,Sn=i;else{if(i===null)throw Error(n(310));Sn=i,i={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},An===null?nn.memoizedState=An=i:An=An.next=i}return An}function Uu(i,l){return typeof l=="function"?l(i):l}function Lg(i){var l=Qr(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var m=Sn,b=m.baseQueue,T=d.pending;if(T!==null){if(b!==null){var V=b.next;b.next=T.next,T.next=V}m.baseQueue=b=T,d.pending=null}if(b!==null){T=b.next,m=m.baseState;var q=V=null,H=null,se=T;do{var fe=se.lane;if((Aa&fe)===fe)H!==null&&(H=H.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),m=se.hasEagerState?se.eagerState:i(m,se.action);else{var ge={lane:fe,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};H===null?(q=H=ge,V=m):H=H.next=ge,nn.lanes|=fe,Pa|=fe}se=se.next}while(se!==null&&se!==T);H===null?V=m:H.next=q,ms(m,l.memoizedState)||(gr=!0),l.memoizedState=m,l.baseState=V,l.baseQueue=H,d.lastRenderedState=m}if(i=d.interleaved,i!==null){b=i;do T=b.lane,nn.lanes|=T,Pa|=T,b=b.next;while(b!==i)}else b===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Mg(i){var l=Qr(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var m=d.dispatch,b=d.pending,T=l.memoizedState;if(b!==null){d.pending=null;var V=b=b.next;do T=i(T,V.action),V=V.next;while(V!==b);ms(T,l.memoizedState)||(gr=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),d.lastRenderedState=T}return[T,m]}function x_(){}function w_(i,l){var d=nn,m=Qr(),b=l(),T=!ms(m.memoizedState,b);if(T&&(m.memoizedState=b,gr=!0),m=m.queue,Fg(b_.bind(null,d,m,i),[i]),m.getSnapshot!==l||T||An!==null&&An.memoizedState.tag&1){if(d.flags|=2048,$u(9,E_.bind(null,d,m,b,l),void 0,null),Pn===null)throw Error(n(349));(Aa&30)!==0||__(d,l,b)}return b}function __(i,l,d){i.flags|=16384,i={getSnapshot:l,value:d},l=nn.updateQueue,l===null?(l={lastEffect:null,stores:null},nn.updateQueue=l,l.stores=[i]):(d=l.stores,d===null?l.stores=[i]:d.push(i))}function E_(i,l,d,m){l.value=d,l.getSnapshot=m,N_(l)&&S_(i)}function b_(i,l,d){return d(function(){N_(l)&&S_(i)})}function N_(i){var l=i.getSnapshot;i=i.value;try{var d=l();return!ms(i,d)}catch{return!0}}function S_(i){var l=ji(i,1);l!==null&&ws(l,i,1,-1)}function T_(i){var l=Ys();return typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:i},l.queue=i,i=i.dispatch=sR.bind(null,nn,i),[l.memoizedState,i]}function $u(i,l,d,m){return i={tag:i,create:l,destroy:d,deps:m,next:null},l=nn.updateQueue,l===null?(l={lastEffect:null,stores:null},nn.updateQueue=l,l.lastEffect=i.next=i):(d=l.lastEffect,d===null?l.lastEffect=i.next=i:(m=d.next,d.next=i,i.next=m,l.lastEffect=i)),i}function C_(){return Qr().memoizedState}function Zh(i,l,d,m){var b=Ys();nn.flags|=i,b.memoizedState=$u(1|l,d,void 0,m===void 0?null:m)}function ef(i,l,d,m){var b=Qr();m=m===void 0?null:m;var T=void 0;if(Sn!==null){var V=Sn.memoizedState;if(T=V.destroy,m!==null&&Rg(m,V.deps)){b.memoizedState=$u(l,d,T,m);return}}nn.flags|=i,b.memoizedState=$u(1|l,d,T,m)}function j_(i,l){return Zh(8390656,8,i,l)}function Fg(i,l){return ef(2048,8,i,l)}function I_(i,l){return ef(4,2,i,l)}function A_(i,l){return ef(4,4,i,l)}function P_(i,l){if(typeof l=="function")return i=i(),l(i),function(){l(null)};if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function k_(i,l,d){return d=d!=null?d.concat([i]):null,ef(4,4,P_.bind(null,l,i),d)}function Vg(){}function R_(i,l){var d=Qr();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&Rg(l,m[1])?m[0]:(d.memoizedState=[i,l],i)}function O_(i,l){var d=Qr();l=l===void 0?null:l;var m=d.memoizedState;return m!==null&&l!==null&&Rg(l,m[1])?m[0]:(i=i(),d.memoizedState=[i,l],i)}function D_(i,l,d){return(Aa&21)===0?(i.baseState&&(i.baseState=!1,gr=!0),i.memoizedState=d):(ms(d,l)||(d=xa(),nn.lanes|=d,Pa|=d,i.baseState=!0),l)}function nR(i,l){var d=vt;vt=d!==0&&4>d?d:4,i(!0);var m=kg.transition;kg.transition={};try{i(!1),l()}finally{vt=d,kg.transition=m}}function L_(){return Qr().memoizedState}function rR(i,l,d){var m=Eo(i);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},M_(i))F_(l,d);else if(d=p_(i,l,d,m),d!==null){var b=sr();ws(d,i,m,b),V_(d,l,m)}}function sR(i,l,d){var m=Eo(i),b={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(M_(i))F_(l,b);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var V=l.lastRenderedState,q=T(V,d);if(b.hasEagerState=!0,b.eagerState=q,ms(q,V)){var H=l.interleaved;H===null?(b.next=b,Tg(l)):(b.next=H.next,H.next=b),l.interleaved=b;return}}catch{}finally{}d=p_(i,l,b,m),d!==null&&(b=sr(),ws(d,i,m,b),V_(d,l,m))}}function M_(i){var l=i.alternate;return i===nn||l!==null&&l===nn}function F_(i,l){Fu=Jh=!0;var d=i.pending;d===null?l.next=l:(l.next=d.next,d.next=l),i.pending=l}function V_(i,l,d){if((d&4194240)!==0){var m=l.lanes;m&=i.pendingLanes,d|=m,l.lanes=d,oo(i,d)}}var tf={readContext:Gr,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},iR={readContext:Gr,useCallback:function(i,l){return Ys().memoizedState=[i,l===void 0?null:l],i},useContext:Gr,useEffect:j_,useImperativeHandle:function(i,l,d){return d=d!=null?d.concat([i]):null,Zh(4194308,4,P_.bind(null,l,i),d)},useLayoutEffect:function(i,l){return Zh(4194308,4,i,l)},useInsertionEffect:function(i,l){return Zh(4,2,i,l)},useMemo:function(i,l){var d=Ys();return l=l===void 0?null:l,i=i(),d.memoizedState=[i,l],i},useReducer:function(i,l,d){var m=Ys();return l=d!==void 0?d(l):l,m.memoizedState=m.baseState=l,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},m.queue=i,i=i.dispatch=rR.bind(null,nn,i),[m.memoizedState,i]},useRef:function(i){var l=Ys();return i={current:i},l.memoizedState=i},useState:T_,useDebugValue:Vg,useDeferredValue:function(i){return Ys().memoizedState=i},useTransition:function(){var i=T_(!1),l=i[0];return i=nR.bind(null,i[1]),Ys().memoizedState=i,[l,i]},useMutableSource:function(){},useSyncExternalStore:function(i,l,d){var m=nn,b=Ys();if(Xt){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),Pn===null)throw Error(n(349));(Aa&30)!==0||__(m,l,d)}b.memoizedState=d;var T={value:d,getSnapshot:l};return b.queue=T,j_(b_.bind(null,m,T,i),[i]),m.flags|=2048,$u(9,E_.bind(null,m,T,d,l),void 0,null),d},useId:function(){var i=Ys(),l=Pn.identifierPrefix;if(Xt){var d=Ci,m=Ti;d=(m&~(1<<32-tr(m)-1)).toString(32)+d,l=":"+l+"R"+d,d=Vu++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=tR++,l=":"+l+"r"+d.toString(32)+":";return i.memoizedState=l},unstable_isNewReconciler:!1},oR={readContext:Gr,useCallback:R_,useContext:Gr,useEffect:Fg,useImperativeHandle:k_,useInsertionEffect:I_,useLayoutEffect:A_,useMemo:O_,useReducer:Lg,useRef:C_,useState:function(){return Lg(Uu)},useDebugValue:Vg,useDeferredValue:function(i){var l=Qr();return D_(l,Sn.memoizedState,i)},useTransition:function(){var i=Lg(Uu)[0],l=Qr().memoizedState;return[i,l]},useMutableSource:x_,useSyncExternalStore:w_,useId:L_,unstable_isNewReconciler:!1},aR={readContext:Gr,useCallback:R_,useContext:Gr,useEffect:Fg,useImperativeHandle:k_,useInsertionEffect:I_,useLayoutEffect:A_,useMemo:O_,useReducer:Mg,useRef:C_,useState:function(){return Mg(Uu)},useDebugValue:Vg,useDeferredValue:function(i){var l=Qr();return Sn===null?l.memoizedState=i:D_(l,Sn.memoizedState,i)},useTransition:function(){var i=Mg(Uu)[0],l=Qr().memoizedState;return[i,l]},useMutableSource:x_,useSyncExternalStore:w_,useId:L_,unstable_isNewReconciler:!1};function ys(i,l){if(i&&i.defaultProps){l=le({},l),i=i.defaultProps;for(var d in i)l[d]===void 0&&(l[d]=i[d]);return l}return l}function Ug(i,l,d,m){l=i.memoizedState,d=d(m,l),d=d==null?l:le({},l,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var nf={isMounted:function(i){return(i=i._reactInternals)?ls(i)===i:!1},enqueueSetState:function(i,l,d){i=i._reactInternals;var m=sr(),b=Eo(i),T=Ii(m,b);T.payload=l,d!=null&&(T.callback=d),l=vo(i,T,b),l!==null&&(ws(l,i,b,m),Gh(l,i,b))},enqueueReplaceState:function(i,l,d){i=i._reactInternals;var m=sr(),b=Eo(i),T=Ii(m,b);T.tag=1,T.payload=l,d!=null&&(T.callback=d),l=vo(i,T,b),l!==null&&(ws(l,i,b,m),Gh(l,i,b))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var d=sr(),m=Eo(i),b=Ii(d,m);b.tag=2,l!=null&&(b.callback=l),l=vo(i,b,m),l!==null&&(ws(l,i,m,d),Gh(l,i,m))}};function U_(i,l,d,m,b,T,V){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,T,V):l.prototype&&l.prototype.isPureReactComponent?!Cu(d,m)||!Cu(b,T):!0}function $_(i,l,d){var m=!1,b=mo,T=l.contextType;return typeof T=="object"&&T!==null?T=Gr(T):(b=mr(l)?Sa:Wn.current,m=l.contextTypes,T=(m=m!=null)?Kl(i,b):mo),l=new l(d,T),i.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=nf,i.stateNode=l,l._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=b,i.__reactInternalMemoizedMaskedChildContext=T),l}function z_(i,l,d,m){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==i&&nf.enqueueReplaceState(l,l.state,null)}function $g(i,l,d,m){var b=i.stateNode;b.props=d,b.state=i.memoizedState,b.refs={},Cg(i);var T=l.contextType;typeof T=="object"&&T!==null?b.context=Gr(T):(T=mr(l)?Sa:Wn.current,b.context=Kl(i,T)),b.state=i.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Ug(i,l,T,d),b.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(l=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),l!==b.state&&nf.enqueueReplaceState(b,b.state,null),Qh(i,d,b,m),b.state=i.memoizedState),typeof b.componentDidMount=="function"&&(i.flags|=4194308)}function tc(i,l){try{var d="",m=l;do d+=$e(m),m=m.return;while(m);var b=d}catch(T){b=`
Error generating stack: `+T.message+`
`+T.stack}return{value:i,source:l,stack:b,digest:null}}function zg(i,l,d){return{value:i,source:null,stack:d??null,digest:l??null}}function Bg(i,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var lR=typeof WeakMap=="function"?WeakMap:Map;function B_(i,l,d){d=Ii(-1,d),d.tag=3,d.payload={element:null};var m=l.value;return d.callback=function(){uf||(uf=!0,sy=m),Bg(i,l)},d}function q_(i,l,d){d=Ii(-1,d),d.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var b=l.value;d.payload=function(){return m(b)},d.callback=function(){Bg(i,l)}}var T=i.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){Bg(i,l),typeof m!="function"&&(wo===null?wo=new Set([this]):wo.add(this));var V=l.stack;this.componentDidCatch(l.value,{componentStack:V!==null?V:""})}),d}function W_(i,l,d){var m=i.pingCache;if(m===null){m=i.pingCache=new lR;var b=new Set;m.set(l,b)}else b=m.get(l),b===void 0&&(b=new Set,m.set(l,b));b.has(d)||(b.add(d),i=ER.bind(null,i,l,d),l.then(i,i))}function H_(i){do{var l;if((l=i.tag===13)&&(l=i.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return i;i=i.return}while(i!==null);return null}function K_(i,l,d,m,b){return(i.mode&1)===0?(i===l?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Ii(-1,1),l.tag=2,vo(d,l,1))),d.lanes|=1),i):(i.flags|=65536,i.lanes=b,i)}var cR=F.ReactCurrentOwner,gr=!1;function rr(i,l,d,m){l.child=i===null?f_(l,null,d,m):Xl(l,i.child,d,m)}function G_(i,l,d,m,b){d=d.render;var T=l.ref;return Zl(l,b),m=Og(i,l,d,m,T,b),d=Dg(),i!==null&&!gr?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~b,Ai(i,l,b)):(Xt&&d&&yg(l),l.flags|=1,rr(i,l,m,b),l.child)}function Q_(i,l,d,m,b){if(i===null){var T=d.type;return typeof T=="function"&&!dy(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=T,Y_(i,l,T,m,b)):(i=gf(d.type,null,m,l,l.mode,b),i.ref=l.ref,i.return=l,l.child=i)}if(T=i.child,(i.lanes&b)===0){var V=T.memoizedProps;if(d=d.compare,d=d!==null?d:Cu,d(V,m)&&i.ref===l.ref)return Ai(i,l,b)}return l.flags|=1,i=No(T,m),i.ref=l.ref,i.return=l,l.child=i}function Y_(i,l,d,m,b){if(i!==null){var T=i.memoizedProps;if(Cu(T,m)&&i.ref===l.ref)if(gr=!1,l.pendingProps=m=T,(i.lanes&b)!==0)(i.flags&131072)!==0&&(gr=!0);else return l.lanes=i.lanes,Ai(i,l,b)}return qg(i,l,d,m,b)}function X_(i,l,d){var m=l.pendingProps,b=m.children,T=i!==null?i.memoizedState:null;if(m.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ut(rc,Mr),Mr|=d;else{if((d&1073741824)===0)return i=T!==null?T.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:i,cachePool:null,transitions:null},l.updateQueue=null,Ut(rc,Mr),Mr|=i,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=T!==null?T.baseLanes:d,Ut(rc,Mr),Mr|=m}else T!==null?(m=T.baseLanes|d,l.memoizedState=null):m=d,Ut(rc,Mr),Mr|=m;return rr(i,l,b,d),l.child}function J_(i,l){var d=l.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function qg(i,l,d,m,b){var T=mr(d)?Sa:Wn.current;return T=Kl(l,T),Zl(l,b),d=Og(i,l,d,m,T,b),m=Dg(),i!==null&&!gr?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~b,Ai(i,l,b)):(Xt&&m&&yg(l),l.flags|=1,rr(i,l,d,b),l.child)}function Z_(i,l,d,m,b){if(mr(d)){var T=!0;Uh(l)}else T=!1;if(Zl(l,b),l.stateNode===null)sf(i,l),$_(l,d,m),$g(l,d,m,b),m=!0;else if(i===null){var V=l.stateNode,q=l.memoizedProps;V.props=q;var H=V.context,se=d.contextType;typeof se=="object"&&se!==null?se=Gr(se):(se=mr(d)?Sa:Wn.current,se=Kl(l,se));var fe=d.getDerivedStateFromProps,ge=typeof fe=="function"||typeof V.getSnapshotBeforeUpdate=="function";ge||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(q!==m||H!==se)&&z_(l,V,m,se),yo=!1;var de=l.memoizedState;V.state=de,Qh(l,m,V,b),H=l.memoizedState,q!==m||de!==H||pr.current||yo?(typeof fe=="function"&&(Ug(l,d,fe,m),H=l.memoizedState),(q=yo||U_(l,d,q,m,de,H,se))?(ge||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(l.flags|=4194308)):(typeof V.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=H),V.props=m,V.state=H,V.context=se,m=q):(typeof V.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{V=l.stateNode,m_(i,l),q=l.memoizedProps,se=l.type===l.elementType?q:ys(l.type,q),V.props=se,ge=l.pendingProps,de=V.context,H=d.contextType,typeof H=="object"&&H!==null?H=Gr(H):(H=mr(d)?Sa:Wn.current,H=Kl(l,H));var Pe=d.getDerivedStateFromProps;(fe=typeof Pe=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(q!==ge||de!==H)&&z_(l,V,m,H),yo=!1,de=l.memoizedState,V.state=de,Qh(l,m,V,b);var Le=l.memoizedState;q!==ge||de!==Le||pr.current||yo?(typeof Pe=="function"&&(Ug(l,d,Pe,m),Le=l.memoizedState),(se=yo||U_(l,d,se,m,de,Le,H)||!1)?(fe||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(m,Le,H),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(m,Le,H)),typeof V.componentDidUpdate=="function"&&(l.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof V.componentDidUpdate!="function"||q===i.memoizedProps&&de===i.memoizedState||(l.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&de===i.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=Le),V.props=m,V.state=Le,V.context=H,m=se):(typeof V.componentDidUpdate!="function"||q===i.memoizedProps&&de===i.memoizedState||(l.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&de===i.memoizedState||(l.flags|=1024),m=!1)}return Wg(i,l,d,m,T,b)}function Wg(i,l,d,m,b,T){J_(i,l);var V=(l.flags&128)!==0;if(!m&&!V)return b&&s_(l,d,!1),Ai(i,l,T);m=l.stateNode,cR.current=l;var q=V&&typeof d.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,i!==null&&V?(l.child=Xl(l,i.child,null,T),l.child=Xl(l,null,q,T)):rr(i,l,q,T),l.memoizedState=m.state,b&&s_(l,d,!0),l.child}function eE(i){var l=i.stateNode;l.pendingContext?n_(i,l.pendingContext,l.pendingContext!==l.context):l.context&&n_(i,l.context,!1),jg(i,l.containerInfo)}function tE(i,l,d,m,b){return Yl(),_g(b),l.flags|=256,rr(i,l,d,m),l.child}var Hg={dehydrated:null,treeContext:null,retryLane:0};function Kg(i){return{baseLanes:i,cachePool:null,transitions:null}}function nE(i,l,d){var m=l.pendingProps,b=tn.current,T=!1,V=(l.flags&128)!==0,q;if((q=V)||(q=i!==null&&i.memoizedState===null?!1:(b&2)!==0),q?(T=!0,l.flags&=-129):(i===null||i.memoizedState!==null)&&(b|=1),Ut(tn,b&1),i===null)return wg(l),i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((l.mode&1)===0?l.lanes=1:i.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(V=m.children,i=m.fallback,T?(m=l.mode,T=l.child,V={mode:"hidden",children:V},(m&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=V):T=yf(V,m,0,null),i=Da(i,m,d,null),T.return=l,i.return=l,T.sibling=i,l.child=T,l.child.memoizedState=Kg(d),l.memoizedState=Hg,i):Gg(l,V));if(b=i.memoizedState,b!==null&&(q=b.dehydrated,q!==null))return uR(i,l,V,m,q,b,d);if(T){T=m.fallback,V=l.mode,b=i.child,q=b.sibling;var H={mode:"hidden",children:m.children};return(V&1)===0&&l.child!==b?(m=l.child,m.childLanes=0,m.pendingProps=H,l.deletions=null):(m=No(b,H),m.subtreeFlags=b.subtreeFlags&14680064),q!==null?T=No(q,T):(T=Da(T,V,d,null),T.flags|=2),T.return=l,m.return=l,m.sibling=T,l.child=m,m=T,T=l.child,V=i.child.memoizedState,V=V===null?Kg(d):{baseLanes:V.baseLanes|d,cachePool:null,transitions:V.transitions},T.memoizedState=V,T.childLanes=i.childLanes&~d,l.memoizedState=Hg,m}return T=i.child,i=T.sibling,m=No(T,{mode:"visible",children:m.children}),(l.mode&1)===0&&(m.lanes=d),m.return=l,m.sibling=null,i!==null&&(d=l.deletions,d===null?(l.deletions=[i],l.flags|=16):d.push(i)),l.child=m,l.memoizedState=null,m}function Gg(i,l){return l=yf({mode:"visible",children:l},i.mode,0,null),l.return=i,i.child=l}function rf(i,l,d,m){return m!==null&&_g(m),Xl(l,i.child,null,d),i=Gg(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function uR(i,l,d,m,b,T,V){if(d)return l.flags&256?(l.flags&=-257,m=zg(Error(n(422))),rf(i,l,V,m)):l.memoizedState!==null?(l.child=i.child,l.flags|=128,null):(T=m.fallback,b=l.mode,m=yf({mode:"visible",children:m.children},b,0,null),T=Da(T,b,V,null),T.flags|=2,m.return=l,T.return=l,m.sibling=T,l.child=m,(l.mode&1)!==0&&Xl(l,i.child,null,V),l.child.memoizedState=Kg(V),l.memoizedState=Hg,T);if((l.mode&1)===0)return rf(i,l,V,null);if(b.data==="$!"){if(m=b.nextSibling&&b.nextSibling.dataset,m)var q=m.dgst;return m=q,T=Error(n(419)),m=zg(T,m,void 0),rf(i,l,V,m)}if(q=(V&i.childLanes)!==0,gr||q){if(m=Pn,m!==null){switch(V&-V){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(m.suspendedLanes|V))!==0?0:b,b!==0&&b!==T.retryLane&&(T.retryLane=b,ji(i,b),ws(m,i,b,-1))}return uy(),m=zg(Error(n(421))),rf(i,l,V,m)}return b.data==="$?"?(l.flags|=128,l.child=i.child,l=bR.bind(null,i),b._reactRetry=l,null):(i=T.treeContext,Lr=fo(b.nextSibling),Dr=l,Xt=!0,gs=null,i!==null&&(Hr[Kr++]=Ti,Hr[Kr++]=Ci,Hr[Kr++]=Ta,Ti=i.id,Ci=i.overflow,Ta=l),l=Gg(l,m.children),l.flags|=4096,l)}function rE(i,l,d){i.lanes|=l;var m=i.alternate;m!==null&&(m.lanes|=l),Sg(i.return,l,d)}function Qg(i,l,d,m,b){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:b}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=d,T.tailMode=b)}function sE(i,l,d){var m=l.pendingProps,b=m.revealOrder,T=m.tail;if(rr(i,l,m.children,d),m=tn.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&rE(i,d,l);else if(i.tag===19)rE(i,d,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if(Ut(tn,m),(l.mode&1)===0)l.memoizedState=null;else switch(b){case"forwards":for(d=l.child,b=null;d!==null;)i=d.alternate,i!==null&&Yh(i)===null&&(b=d),d=d.sibling;d=b,d===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),Qg(l,!1,b,d,T);break;case"backwards":for(d=null,b=l.child,l.child=null;b!==null;){if(i=b.alternate,i!==null&&Yh(i)===null){l.child=b;break}i=b.sibling,b.sibling=d,d=b,b=i}Qg(l,!0,d,null,T);break;case"together":Qg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function sf(i,l){(l.mode&1)===0&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=2)}function Ai(i,l,d){if(i!==null&&(l.dependencies=i.dependencies),Pa|=l.lanes,(d&l.childLanes)===0)return null;if(i!==null&&l.child!==i.child)throw Error(n(153));if(l.child!==null){for(i=l.child,d=No(i,i.pendingProps),l.child=d,d.return=l;i.sibling!==null;)i=i.sibling,d=d.sibling=No(i,i.pendingProps),d.return=l;d.sibling=null}return l.child}function dR(i,l,d){switch(l.tag){case 3:eE(l),Yl();break;case 5:v_(l);break;case 1:mr(l.type)&&Uh(l);break;case 4:jg(l,l.stateNode.containerInfo);break;case 10:var m=l.type._context,b=l.memoizedProps.value;Ut(Hh,m._currentValue),m._currentValue=b;break;case 13:if(m=l.memoizedState,m!==null)return m.dehydrated!==null?(Ut(tn,tn.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?nE(i,l,d):(Ut(tn,tn.current&1),i=Ai(i,l,d),i!==null?i.sibling:null);Ut(tn,tn.current&1);break;case 19:if(m=(d&l.childLanes)!==0,(i.flags&128)!==0){if(m)return sE(i,l,d);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Ut(tn,tn.current),m)break;return null;case 22:case 23:return l.lanes=0,X_(i,l,d)}return Ai(i,l,d)}var iE,Yg,oE,aE;iE=function(i,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Yg=function(){},oE=function(i,l,d,m){var b=i.memoizedProps;if(b!==m){i=l.stateNode,Ia(Qs.current);var T=null;switch(d){case"input":b=je(i,b),m=je(i,m),T=[];break;case"select":b=le({},b,{value:void 0}),m=le({},m,{value:void 0}),T=[];break;case"textarea":b=is(i,b),m=is(i,m),T=[];break;default:typeof b.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=Mh)}qn(d,m);var V;d=null;for(se in b)if(!m.hasOwnProperty(se)&&b.hasOwnProperty(se)&&b[se]!=null)if(se==="style"){var q=b[se];for(V in q)q.hasOwnProperty(V)&&(d||(d={}),d[V]="")}else se!=="dangerouslySetInnerHTML"&&se!=="children"&&se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(s.hasOwnProperty(se)?T||(T=[]):(T=T||[]).push(se,null));for(se in m){var H=m[se];if(q=b!=null?b[se]:void 0,m.hasOwnProperty(se)&&H!==q&&(H!=null||q!=null))if(se==="style")if(q){for(V in q)!q.hasOwnProperty(V)||H&&H.hasOwnProperty(V)||(d||(d={}),d[V]="");for(V in H)H.hasOwnProperty(V)&&q[V]!==H[V]&&(d||(d={}),d[V]=H[V])}else d||(T||(T=[]),T.push(se,d)),d=H;else se==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,q=q?q.__html:void 0,H!=null&&q!==H&&(T=T||[]).push(se,H)):se==="children"?typeof H!="string"&&typeof H!="number"||(T=T||[]).push(se,""+H):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&(s.hasOwnProperty(se)?(H!=null&&se==="onScroll"&&Wt("scroll",i),T||q===H||(T=[])):(T=T||[]).push(se,H))}d&&(T=T||[]).push("style",d);var se=T;(l.updateQueue=se)&&(l.flags|=4)}},aE=function(i,l,d,m){d!==m&&(l.flags|=4)};function zu(i,l){if(!Xt)switch(i.tailMode){case"hidden":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function Kn(i){var l=i.alternate!==null&&i.alternate.child===i.child,d=0,m=0;if(l)for(var b=i.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags&14680064,m|=b.flags&14680064,b.return=i,b=b.sibling;else for(b=i.child;b!==null;)d|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=i,b=b.sibling;return i.subtreeFlags|=m,i.childLanes=d,l}function hR(i,l,d){var m=l.pendingProps;switch(vg(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(l),null;case 1:return mr(l.type)&&Vh(),Kn(l),null;case 3:return m=l.stateNode,ec(),Ht(pr),Ht(Wn),Pg(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(qh(l)?l.flags|=4:i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,gs!==null&&(ay(gs),gs=null))),Yg(i,l),Kn(l),null;case 5:Ig(l);var b=Ia(Mu.current);if(d=l.type,i!==null&&l.stateNode!=null)oE(i,l,d,m,b),i.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(n(166));return Kn(l),null}if(i=Ia(Qs.current),qh(l)){m=l.stateNode,d=l.type;var T=l.memoizedProps;switch(m[Gs]=l,m[ku]=T,i=(l.mode&1)!==0,d){case"dialog":Wt("cancel",m),Wt("close",m);break;case"iframe":case"object":case"embed":Wt("load",m);break;case"video":case"audio":for(b=0;b<Iu.length;b++)Wt(Iu[b],m);break;case"source":Wt("error",m);break;case"img":case"image":case"link":Wt("error",m),Wt("load",m);break;case"details":Wt("toggle",m);break;case"input":mt(m,T),Wt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!T.multiple},Wt("invalid",m);break;case"textarea":dn(m,T),Wt("invalid",m)}qn(d,T),b=null;for(var V in T)if(T.hasOwnProperty(V)){var q=T[V];V==="children"?typeof q=="string"?m.textContent!==q&&(T.suppressHydrationWarning!==!0&&Lh(m.textContent,q,i),b=["children",q]):typeof q=="number"&&m.textContent!==""+q&&(T.suppressHydrationWarning!==!0&&Lh(m.textContent,q,i),b=["children",""+q]):s.hasOwnProperty(V)&&q!=null&&V==="onScroll"&&Wt("scroll",m)}switch(d){case"input":st(m),jr(m,T,!0);break;case"textarea":st(m),Fs(m);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(m.onclick=Mh)}m=b,l.updateQueue=m,m!==null&&(l.flags|=4)}else{V=b.nodeType===9?b:b.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=zt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=V.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=V.createElement(d,{is:m.is}):(i=V.createElement(d),d==="select"&&(V=i,m.multiple?V.multiple=!0:m.size&&(V.size=m.size))):i=V.createElementNS(i,d),i[Gs]=l,i[ku]=m,iE(i,l,!1,!1),l.stateNode=i;e:{switch(V=Us(d,m),d){case"dialog":Wt("cancel",i),Wt("close",i),b=m;break;case"iframe":case"object":case"embed":Wt("load",i),b=m;break;case"video":case"audio":for(b=0;b<Iu.length;b++)Wt(Iu[b],i);b=m;break;case"source":Wt("error",i),b=m;break;case"img":case"image":case"link":Wt("error",i),Wt("load",i),b=m;break;case"details":Wt("toggle",i),b=m;break;case"input":mt(i,m),b=je(i,m),Wt("invalid",i);break;case"option":b=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},b=le({},m,{value:void 0}),Wt("invalid",i);break;case"textarea":dn(i,m),b=is(i,m),Wt("invalid",i);break;default:b=m}qn(d,b),q=b;for(T in q)if(q.hasOwnProperty(T)){var H=q[T];T==="style"?gi(i,H):T==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&bn(i,H)):T==="children"?typeof H=="string"?(d!=="textarea"||H!=="")&&Ar(i,H):typeof H=="number"&&Ar(i,""+H):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(s.hasOwnProperty(T)?H!=null&&T==="onScroll"&&Wt("scroll",i):H!=null&&C(i,T,H,V))}switch(d){case"input":st(i),jr(i,m,!1);break;case"textarea":st(i),Fs(i);break;case"option":m.value!=null&&i.setAttribute("value",""+Se(m.value));break;case"select":i.multiple=!!m.multiple,T=m.value,T!=null?Ir(i,!!m.multiple,T,!1):m.defaultValue!=null&&Ir(i,!!m.multiple,m.defaultValue,!0);break;default:typeof b.onClick=="function"&&(i.onclick=Mh)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Kn(l),null;case 6:if(i&&l.stateNode!=null)aE(i,l,i.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(n(166));if(d=Ia(Mu.current),Ia(Qs.current),qh(l)){if(m=l.stateNode,d=l.memoizedProps,m[Gs]=l,(T=m.nodeValue!==d)&&(i=Dr,i!==null))switch(i.tag){case 3:Lh(m.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Lh(m.nodeValue,d,(i.mode&1)!==0)}T&&(l.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Gs]=l,l.stateNode=m}return Kn(l),null;case 13:if(Ht(tn),m=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Xt&&Lr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)u_(),Yl(),l.flags|=98560,T=!1;else if(T=qh(l),m!==null&&m.dehydrated!==null){if(i===null){if(!T)throw Error(n(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[Gs]=l}else Yl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Kn(l),T=!1}else gs!==null&&(ay(gs),gs=null),T=!0;if(!T)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(l.child.flags|=8192,(l.mode&1)!==0&&(i===null||(tn.current&1)!==0?Tn===0&&(Tn=3):uy())),l.updateQueue!==null&&(l.flags|=4),Kn(l),null);case 4:return ec(),Yg(i,l),i===null&&Au(l.stateNode.containerInfo),Kn(l),null;case 10:return Ng(l.type._context),Kn(l),null;case 17:return mr(l.type)&&Vh(),Kn(l),null;case 19:if(Ht(tn),T=l.memoizedState,T===null)return Kn(l),null;if(m=(l.flags&128)!==0,V=T.rendering,V===null)if(m)zu(T,!1);else{if(Tn!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(V=Yh(i),V!==null){for(l.flags|=128,zu(T,!1),m=V.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),l.subtreeFlags=0,m=d,d=l.child;d!==null;)T=d,i=m,T.flags&=14680066,V=T.alternate,V===null?(T.childLanes=0,T.lanes=i,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=V.childLanes,T.lanes=V.lanes,T.child=V.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=V.memoizedProps,T.memoizedState=V.memoizedState,T.updateQueue=V.updateQueue,T.type=V.type,i=V.dependencies,T.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return Ut(tn,tn.current&1|2),l.child}i=i.sibling}T.tail!==null&&Vt()>sc&&(l.flags|=128,m=!0,zu(T,!1),l.lanes=4194304)}else{if(!m)if(i=Yh(V),i!==null){if(l.flags|=128,m=!0,d=i.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),zu(T,!0),T.tail===null&&T.tailMode==="hidden"&&!V.alternate&&!Xt)return Kn(l),null}else 2*Vt()-T.renderingStartTime>sc&&d!==1073741824&&(l.flags|=128,m=!0,zu(T,!1),l.lanes=4194304);T.isBackwards?(V.sibling=l.child,l.child=V):(d=T.last,d!==null?d.sibling=V:l.child=V,T.last=V)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=Vt(),l.sibling=null,d=tn.current,Ut(tn,m?d&1|2:d&1),l):(Kn(l),null);case 22:case 23:return cy(),m=l.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(l.flags|=8192),m&&(l.mode&1)!==0?(Mr&1073741824)!==0&&(Kn(l),l.subtreeFlags&6&&(l.flags|=8192)):Kn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function fR(i,l){switch(vg(l),l.tag){case 1:return mr(l.type)&&Vh(),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return ec(),Ht(pr),Ht(Wn),Pg(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 5:return Ig(l),null;case 13:if(Ht(tn),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Yl()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return Ht(tn),null;case 4:return ec(),null;case 10:return Ng(l.type._context),null;case 22:case 23:return cy(),null;case 24:return null;default:return null}}var of=!1,Gn=!1,pR=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function nc(i,l){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){ln(i,l,m)}else d.current=null}function Xg(i,l,d){try{d()}catch(m){ln(i,l,m)}}var lE=!1;function mR(i,l){if(cg=co,i=U0(),tg(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var b=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var V=0,q=-1,H=-1,se=0,fe=0,ge=i,de=null;t:for(;;){for(var Pe;ge!==d||b!==0&&ge.nodeType!==3||(q=V+b),ge!==T||m!==0&&ge.nodeType!==3||(H=V+m),ge.nodeType===3&&(V+=ge.nodeValue.length),(Pe=ge.firstChild)!==null;)de=ge,ge=Pe;for(;;){if(ge===i)break t;if(de===d&&++se===b&&(q=V),de===T&&++fe===m&&(H=V),(Pe=ge.nextSibling)!==null)break;ge=de,de=ge.parentNode}ge=Pe}d=q===-1||H===-1?null:{start:q,end:H}}else d=null}d=d||{start:0,end:0}}else d=null;for(ug={focusedElem:i,selectionRange:d},co=!1,Oe=l;Oe!==null;)if(l=Oe,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,Oe=i;else for(;Oe!==null;){l=Oe;try{var Le=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Le!==null){var Me=Le.memoizedProps,hn=Le.memoizedState,te=l.stateNode,Q=te.getSnapshotBeforeUpdate(l.elementType===l.type?Me:ys(l.type,Me),hn);te.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var re=l.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(xe){ln(l,l.return,xe)}if(i=l.sibling,i!==null){i.return=l.return,Oe=i;break}Oe=l.return}return Le=lE,lE=!1,Le}function Bu(i,l,d){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&i)===i){var T=b.destroy;b.destroy=void 0,T!==void 0&&Xg(l,d,T)}b=b.next}while(b!==m)}}function af(i,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&i)===i){var m=d.create;d.destroy=m()}d=d.next}while(d!==l)}}function Jg(i){var l=i.ref;if(l!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof l=="function"?l(i):l.current=i}}function cE(i){var l=i.alternate;l!==null&&(i.alternate=null,cE(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&(delete l[Gs],delete l[ku],delete l[pg],delete l[Xk],delete l[Jk])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function uE(i){return i.tag===5||i.tag===3||i.tag===4}function dE(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||uE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Zg(i,l,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(i,l):d.insertBefore(i,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(i,d)):(l=d,l.appendChild(i)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Mh));else if(m!==4&&(i=i.child,i!==null))for(Zg(i,l,d),i=i.sibling;i!==null;)Zg(i,l,d),i=i.sibling}function ey(i,l,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,l?d.insertBefore(i,l):d.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(ey(i,l,d),i=i.sibling;i!==null;)ey(i,l,d),i=i.sibling}var Ln=null,vs=!1;function xo(i,l,d){for(d=d.child;d!==null;)hE(i,l,d),d=d.sibling}function hE(i,l,d){if(Pr&&typeof Pr.onCommitFiberUnmount=="function")try{Pr.onCommitFiberUnmount(ya,d)}catch{}switch(d.tag){case 5:Gn||nc(d,l);case 6:var m=Ln,b=vs;Ln=null,xo(i,l,d),Ln=m,vs=b,Ln!==null&&(vs?(i=Ln,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Ln.removeChild(d.stateNode));break;case 18:Ln!==null&&(vs?(i=Ln,d=d.stateNode,i.nodeType===8?fg(i.parentNode,d):i.nodeType===1&&fg(i,d),fs(i)):fg(Ln,d.stateNode));break;case 4:m=Ln,b=vs,Ln=d.stateNode.containerInfo,vs=!0,xo(i,l,d),Ln=m,vs=b;break;case 0:case 11:case 14:case 15:if(!Gn&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){b=m=m.next;do{var T=b,V=T.destroy;T=T.tag,V!==void 0&&((T&2)!==0||(T&4)!==0)&&Xg(d,l,V),b=b.next}while(b!==m)}xo(i,l,d);break;case 1:if(!Gn&&(nc(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(q){ln(d,l,q)}xo(i,l,d);break;case 21:xo(i,l,d);break;case 22:d.mode&1?(Gn=(m=Gn)||d.memoizedState!==null,xo(i,l,d),Gn=m):xo(i,l,d);break;default:xo(i,l,d)}}function fE(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new pR),l.forEach(function(m){var b=NR.bind(null,i,m);d.has(m)||(d.add(m),m.then(b,b))})}}function xs(i,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var b=d[m];try{var T=i,V=l,q=V;e:for(;q!==null;){switch(q.tag){case 5:Ln=q.stateNode,vs=!1;break e;case 3:Ln=q.stateNode.containerInfo,vs=!0;break e;case 4:Ln=q.stateNode.containerInfo,vs=!0;break e}q=q.return}if(Ln===null)throw Error(n(160));hE(T,V,b),Ln=null,vs=!1;var H=b.alternate;H!==null&&(H.return=null),b.return=null}catch(se){ln(b,l,se)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)pE(l,i),l=l.sibling}function pE(i,l){var d=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(xs(l,i),Xs(i),m&4){try{Bu(3,i,i.return),af(3,i)}catch(Me){ln(i,i.return,Me)}try{Bu(5,i,i.return)}catch(Me){ln(i,i.return,Me)}}break;case 1:xs(l,i),Xs(i),m&512&&d!==null&&nc(d,d.return);break;case 5:if(xs(l,i),Xs(i),m&512&&d!==null&&nc(d,d.return),i.flags&32){var b=i.stateNode;try{Ar(b,"")}catch(Me){ln(i,i.return,Me)}}if(m&4&&(b=i.stateNode,b!=null)){var T=i.memoizedProps,V=d!==null?d.memoizedProps:T,q=i.type,H=i.updateQueue;if(i.updateQueue=null,H!==null)try{q==="input"&&T.type==="radio"&&T.name!=null&&an(b,T),Us(q,V);var se=Us(q,T);for(V=0;V<H.length;V+=2){var fe=H[V],ge=H[V+1];fe==="style"?gi(b,ge):fe==="dangerouslySetInnerHTML"?bn(b,ge):fe==="children"?Ar(b,ge):C(b,fe,ge,se)}switch(q){case"input":zn(b,T);break;case"textarea":Ms(b,T);break;case"select":var de=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!T.multiple;var Pe=T.value;Pe!=null?Ir(b,!!T.multiple,Pe,!1):de!==!!T.multiple&&(T.defaultValue!=null?Ir(b,!!T.multiple,T.defaultValue,!0):Ir(b,!!T.multiple,T.multiple?[]:"",!1))}b[ku]=T}catch(Me){ln(i,i.return,Me)}}break;case 6:if(xs(l,i),Xs(i),m&4){if(i.stateNode===null)throw Error(n(162));b=i.stateNode,T=i.memoizedProps;try{b.nodeValue=T}catch(Me){ln(i,i.return,Me)}}break;case 3:if(xs(l,i),Xs(i),m&4&&d!==null&&d.memoizedState.isDehydrated)try{fs(l.containerInfo)}catch(Me){ln(i,i.return,Me)}break;case 4:xs(l,i),Xs(i);break;case 13:xs(l,i),Xs(i),b=i.child,b.flags&8192&&(T=b.memoizedState!==null,b.stateNode.isHidden=T,!T||b.alternate!==null&&b.alternate.memoizedState!==null||(ry=Vt())),m&4&&fE(i);break;case 22:if(fe=d!==null&&d.memoizedState!==null,i.mode&1?(Gn=(se=Gn)||fe,xs(l,i),Gn=se):xs(l,i),Xs(i),m&8192){if(se=i.memoizedState!==null,(i.stateNode.isHidden=se)&&!fe&&(i.mode&1)!==0)for(Oe=i,fe=i.child;fe!==null;){for(ge=Oe=fe;Oe!==null;){switch(de=Oe,Pe=de.child,de.tag){case 0:case 11:case 14:case 15:Bu(4,de,de.return);break;case 1:nc(de,de.return);var Le=de.stateNode;if(typeof Le.componentWillUnmount=="function"){m=de,d=de.return;try{l=m,Le.props=l.memoizedProps,Le.state=l.memoizedState,Le.componentWillUnmount()}catch(Me){ln(m,d,Me)}}break;case 5:nc(de,de.return);break;case 22:if(de.memoizedState!==null){yE(ge);continue}}Pe!==null?(Pe.return=de,Oe=Pe):yE(ge)}fe=fe.sibling}e:for(fe=null,ge=i;;){if(ge.tag===5){if(fe===null){fe=ge;try{b=ge.stateNode,se?(T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(q=ge.stateNode,H=ge.memoizedProps.style,V=H!=null&&H.hasOwnProperty("display")?H.display:null,q.style.display=Vs("display",V))}catch(Me){ln(i,i.return,Me)}}}else if(ge.tag===6){if(fe===null)try{ge.stateNode.nodeValue=se?"":ge.memoizedProps}catch(Me){ln(i,i.return,Me)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===i)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===i)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===i)break e;fe===ge&&(fe=null),ge=ge.return}fe===ge&&(fe=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:xs(l,i),Xs(i),m&4&&fE(i);break;case 21:break;default:xs(l,i),Xs(i)}}function Xs(i){var l=i.flags;if(l&2){try{e:{for(var d=i.return;d!==null;){if(uE(d)){var m=d;break e}d=d.return}throw Error(n(160))}switch(m.tag){case 5:var b=m.stateNode;m.flags&32&&(Ar(b,""),m.flags&=-33);var T=dE(i);ey(i,T,b);break;case 3:case 4:var V=m.stateNode.containerInfo,q=dE(i);Zg(i,q,V);break;default:throw Error(n(161))}}catch(H){ln(i,i.return,H)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function gR(i,l,d){Oe=i,mE(i)}function mE(i,l,d){for(var m=(i.mode&1)!==0;Oe!==null;){var b=Oe,T=b.child;if(b.tag===22&&m){var V=b.memoizedState!==null||of;if(!V){var q=b.alternate,H=q!==null&&q.memoizedState!==null||Gn;q=of;var se=Gn;if(of=V,(Gn=H)&&!se)for(Oe=b;Oe!==null;)V=Oe,H=V.child,V.tag===22&&V.memoizedState!==null?vE(b):H!==null?(H.return=V,Oe=H):vE(b);for(;T!==null;)Oe=T,mE(T),T=T.sibling;Oe=b,of=q,Gn=se}gE(i)}else(b.subtreeFlags&8772)!==0&&T!==null?(T.return=b,Oe=T):gE(i)}}function gE(i){for(;Oe!==null;){var l=Oe;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Gn||af(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!Gn)if(d===null)m.componentDidMount();else{var b=l.elementType===l.type?d.memoizedProps:ys(l.type,d.memoizedProps);m.componentDidUpdate(b,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var T=l.updateQueue;T!==null&&y_(l,T,m);break;case 3:var V=l.updateQueue;if(V!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}y_(l,V,d)}break;case 5:var q=l.stateNode;if(d===null&&l.flags&4){d=q;var H=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&d.focus();break;case"img":H.src&&(d.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var se=l.alternate;if(se!==null){var fe=se.memoizedState;if(fe!==null){var ge=fe.dehydrated;ge!==null&&fs(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Gn||l.flags&512&&Jg(l)}catch(de){ln(l,l.return,de)}}if(l===i){Oe=null;break}if(d=l.sibling,d!==null){d.return=l.return,Oe=d;break}Oe=l.return}}function yE(i){for(;Oe!==null;){var l=Oe;if(l===i){Oe=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Oe=d;break}Oe=l.return}}function vE(i){for(;Oe!==null;){var l=Oe;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{af(4,l)}catch(H){ln(l,d,H)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var b=l.return;try{m.componentDidMount()}catch(H){ln(l,b,H)}}var T=l.return;try{Jg(l)}catch(H){ln(l,T,H)}break;case 5:var V=l.return;try{Jg(l)}catch(H){ln(l,V,H)}}}catch(H){ln(l,l.return,H)}if(l===i){Oe=null;break}var q=l.sibling;if(q!==null){q.return=l.return,Oe=q;break}Oe=l.return}}var yR=Math.ceil,lf=F.ReactCurrentDispatcher,ty=F.ReactCurrentOwner,Yr=F.ReactCurrentBatchConfig,Ct=0,Pn=null,yn=null,Mn=0,Mr=0,rc=po(0),Tn=0,qu=null,Pa=0,cf=0,ny=0,Wu=null,yr=null,ry=0,sc=1/0,Pi=null,uf=!1,sy=null,wo=null,df=!1,_o=null,hf=0,Hu=0,iy=null,ff=-1,pf=0;function sr(){return(Ct&6)!==0?Vt():ff!==-1?ff:ff=Vt()}function Eo(i){return(i.mode&1)===0?1:(Ct&2)!==0&&Mn!==0?Mn&-Mn:eR.transition!==null?(pf===0&&(pf=xa()),pf):(i=vt,i!==0||(i=window.event,i=i===void 0?16:wu(i.type)),i)}function ws(i,l,d,m){if(50<Hu)throw Hu=0,iy=null,Error(n(185));io(i,d,m),((Ct&2)===0||i!==Pn)&&(i===Pn&&((Ct&2)===0&&(cf|=d),Tn===4&&bo(i,Mn)),vr(i,m),d===1&&Ct===0&&(l.mode&1)===0&&(sc=Vt()+500,$h&&go()))}function vr(i,l){var d=i.callbackNode;xi(i,l);var m=va(i,i===Pn?Mn:0);if(m===0)d!==null&&mu(d),i.callbackNode=null,i.callbackPriority=0;else if(l=m&-m,i.callbackPriority!==l){if(d!=null&&mu(d),l===1)i.tag===0?Zk(wE.bind(null,i)):i_(wE.bind(null,i)),Qk(function(){(Ct&6)===0&&go()}),d=null;else{switch(ao(m)){case 1:d=ga;break;case 4:d=no;break;case 16:d=Br;break;case 536870912:d=fh;break;default:d=Br}d=jE(d,xE.bind(null,i))}i.callbackPriority=l,i.callbackNode=d}}function xE(i,l){if(ff=-1,pf=0,(Ct&6)!==0)throw Error(n(327));var d=i.callbackNode;if(ic()&&i.callbackNode!==d)return null;var m=va(i,i===Pn?Mn:0);if(m===0)return null;if((m&30)!==0||(m&i.expiredLanes)!==0||l)l=mf(i,m);else{l=m;var b=Ct;Ct|=2;var T=EE();(Pn!==i||Mn!==l)&&(Pi=null,sc=Vt()+500,Ra(i,l));do try{wR();break}catch(q){_E(i,q)}while(!0);bg(),lf.current=T,Ct=b,yn!==null?l=0:(Pn=null,Mn=0,l=Tn)}if(l!==0){if(l===2&&(b=kr(i),b!==0&&(m=b,l=oy(i,b))),l===1)throw d=qu,Ra(i,0),bo(i,m),vr(i,Vt()),d;if(l===6)bo(i,m);else{if(b=i.current.alternate,(m&30)===0&&!vR(b)&&(l=mf(i,m),l===2&&(T=kr(i),T!==0&&(m=T,l=oy(i,T))),l===1))throw d=qu,Ra(i,0),bo(i,m),vr(i,Vt()),d;switch(i.finishedWork=b,i.finishedLanes=m,l){case 0:case 1:throw Error(n(345));case 2:Oa(i,yr,Pi);break;case 3:if(bo(i,m),(m&130023424)===m&&(l=ry+500-Vt(),10<l)){if(va(i,0)!==0)break;if(b=i.suspendedLanes,(b&m)!==m){sr(),i.pingedLanes|=i.suspendedLanes&b;break}i.timeoutHandle=hg(Oa.bind(null,i,yr,Pi),l);break}Oa(i,yr,Pi);break;case 4:if(bo(i,m),(m&4194240)===m)break;for(l=i.eventTimes,b=-1;0<m;){var V=31-tr(m);T=1<<V,V=l[V],V>b&&(b=V),m&=~T}if(m=b,m=Vt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*yR(m/1960))-m,10<m){i.timeoutHandle=hg(Oa.bind(null,i,yr,Pi),m);break}Oa(i,yr,Pi);break;case 5:Oa(i,yr,Pi);break;default:throw Error(n(329))}}}return vr(i,Vt()),i.callbackNode===d?xE.bind(null,i):null}function oy(i,l){var d=Wu;return i.current.memoizedState.isDehydrated&&(Ra(i,l).flags|=256),i=mf(i,l),i!==2&&(l=yr,yr=d,l!==null&&ay(l)),i}function ay(i){yr===null?yr=i:yr.push.apply(yr,i)}function vR(i){for(var l=i;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var b=d[m],T=b.getSnapshot;b=b.value;try{if(!ms(T(),b))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function bo(i,l){for(l&=~ny,l&=~cf,i.suspendedLanes|=l,i.pingedLanes&=~l,i=i.expirationTimes;0<l;){var d=31-tr(l),m=1<<d;i[d]=-1,l&=~m}}function wE(i){if((Ct&6)!==0)throw Error(n(327));ic();var l=va(i,0);if((l&1)===0)return vr(i,Vt()),null;var d=mf(i,l);if(i.tag!==0&&d===2){var m=kr(i);m!==0&&(l=m,d=oy(i,m))}if(d===1)throw d=qu,Ra(i,0),bo(i,l),vr(i,Vt()),d;if(d===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=l,Oa(i,yr,Pi),vr(i,Vt()),null}function ly(i,l){var d=Ct;Ct|=1;try{return i(l)}finally{Ct=d,Ct===0&&(sc=Vt()+500,$h&&go())}}function ka(i){_o!==null&&_o.tag===0&&(Ct&6)===0&&ic();var l=Ct;Ct|=1;var d=Yr.transition,m=vt;try{if(Yr.transition=null,vt=1,i)return i()}finally{vt=m,Yr.transition=d,Ct=l,(Ct&6)===0&&go()}}function cy(){Mr=rc.current,Ht(rc)}function Ra(i,l){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,Gk(d)),yn!==null)for(d=yn.return;d!==null;){var m=d;switch(vg(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Vh();break;case 3:ec(),Ht(pr),Ht(Wn),Pg();break;case 5:Ig(m);break;case 4:ec();break;case 13:Ht(tn);break;case 19:Ht(tn);break;case 10:Ng(m.type._context);break;case 22:case 23:cy()}d=d.return}if(Pn=i,yn=i=No(i.current,null),Mn=Mr=l,Tn=0,qu=null,ny=cf=Pa=0,yr=Wu=null,ja!==null){for(l=0;l<ja.length;l++)if(d=ja[l],m=d.interleaved,m!==null){d.interleaved=null;var b=m.next,T=d.pending;if(T!==null){var V=T.next;T.next=b,m.next=V}d.pending=m}ja=null}return i}function _E(i,l){do{var d=yn;try{if(bg(),Xh.current=tf,Jh){for(var m=nn.memoizedState;m!==null;){var b=m.queue;b!==null&&(b.pending=null),m=m.next}Jh=!1}if(Aa=0,An=Sn=nn=null,Fu=!1,Vu=0,ty.current=null,d===null||d.return===null){Tn=1,qu=l,yn=null;break}e:{var T=i,V=d.return,q=d,H=l;if(l=Mn,q.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var se=H,fe=q,ge=fe.tag;if((fe.mode&1)===0&&(ge===0||ge===11||ge===15)){var de=fe.alternate;de?(fe.updateQueue=de.updateQueue,fe.memoizedState=de.memoizedState,fe.lanes=de.lanes):(fe.updateQueue=null,fe.memoizedState=null)}var Pe=H_(V);if(Pe!==null){Pe.flags&=-257,K_(Pe,V,q,T,l),Pe.mode&1&&W_(T,se,l),l=Pe,H=se;var Le=l.updateQueue;if(Le===null){var Me=new Set;Me.add(H),l.updateQueue=Me}else Le.add(H);break e}else{if((l&1)===0){W_(T,se,l),uy();break e}H=Error(n(426))}}else if(Xt&&q.mode&1){var hn=H_(V);if(hn!==null){(hn.flags&65536)===0&&(hn.flags|=256),K_(hn,V,q,T,l),_g(tc(H,q));break e}}T=H=tc(H,q),Tn!==4&&(Tn=2),Wu===null?Wu=[T]:Wu.push(T),T=V;do{switch(T.tag){case 3:T.flags|=65536,l&=-l,T.lanes|=l;var te=B_(T,H,l);g_(T,te);break e;case 1:q=H;var Q=T.type,re=T.stateNode;if((T.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(wo===null||!wo.has(re)))){T.flags|=65536,l&=-l,T.lanes|=l;var xe=q_(T,q,l);g_(T,xe);break e}}T=T.return}while(T!==null)}NE(d)}catch(Ue){l=Ue,yn===d&&d!==null&&(yn=d=d.return);continue}break}while(!0)}function EE(){var i=lf.current;return lf.current=tf,i===null?tf:i}function uy(){(Tn===0||Tn===3||Tn===2)&&(Tn=4),Pn===null||(Pa&268435455)===0&&(cf&268435455)===0||bo(Pn,Mn)}function mf(i,l){var d=Ct;Ct|=2;var m=EE();(Pn!==i||Mn!==l)&&(Pi=null,Ra(i,l));do try{xR();break}catch(b){_E(i,b)}while(!0);if(bg(),Ct=d,lf.current=m,yn!==null)throw Error(n(261));return Pn=null,Mn=0,Tn}function xR(){for(;yn!==null;)bE(yn)}function wR(){for(;yn!==null&&!dh();)bE(yn)}function bE(i){var l=CE(i.alternate,i,Mr);i.memoizedProps=i.pendingProps,l===null?NE(i):yn=l,ty.current=null}function NE(i){var l=i;do{var d=l.alternate;if(i=l.return,(l.flags&32768)===0){if(d=hR(d,l,Mr),d!==null){yn=d;return}}else{if(d=fR(d,l),d!==null){d.flags&=32767,yn=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Tn=6,yn=null;return}}if(l=l.sibling,l!==null){yn=l;return}yn=l=i}while(l!==null);Tn===0&&(Tn=5)}function Oa(i,l,d){var m=vt,b=Yr.transition;try{Yr.transition=null,vt=1,_R(i,l,d,m)}finally{Yr.transition=b,vt=m}return null}function _R(i,l,d,m){do ic();while(_o!==null);if((Ct&6)!==0)throw Error(n(327));d=i.finishedWork;var b=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var T=d.lanes|d.childLanes;if(Mt(i,T),i===Pn&&(yn=Pn=null,Mn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||df||(df=!0,jE(Br,function(){return ic(),null})),T=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||T){T=Yr.transition,Yr.transition=null;var V=vt;vt=1;var q=Ct;Ct|=4,ty.current=null,mR(i,d),pE(d,i),$k(ug),co=!!cg,ug=cg=null,i.current=d,gR(d),Km(),Ct=q,vt=V,Yr.transition=T}else i.current=d;if(df&&(df=!1,_o=i,hf=b),T=i.pendingLanes,T===0&&(wo=null),ph(d.stateNode),vr(i,Vt()),l!==null)for(m=i.onRecoverableError,d=0;d<l.length;d++)b=l[d],m(b.value,{componentStack:b.stack,digest:b.digest});if(uf)throw uf=!1,i=sy,sy=null,i;return(hf&1)!==0&&i.tag!==0&&ic(),T=i.pendingLanes,(T&1)!==0?i===iy?Hu++:(Hu=0,iy=i):Hu=0,go(),null}function ic(){if(_o!==null){var i=ao(hf),l=Yr.transition,d=vt;try{if(Yr.transition=null,vt=16>i?16:i,_o===null)var m=!1;else{if(i=_o,_o=null,hf=0,(Ct&6)!==0)throw Error(n(331));var b=Ct;for(Ct|=4,Oe=i.current;Oe!==null;){var T=Oe,V=T.child;if((Oe.flags&16)!==0){var q=T.deletions;if(q!==null){for(var H=0;H<q.length;H++){var se=q[H];for(Oe=se;Oe!==null;){var fe=Oe;switch(fe.tag){case 0:case 11:case 15:Bu(8,fe,T)}var ge=fe.child;if(ge!==null)ge.return=fe,Oe=ge;else for(;Oe!==null;){fe=Oe;var de=fe.sibling,Pe=fe.return;if(cE(fe),fe===se){Oe=null;break}if(de!==null){de.return=Pe,Oe=de;break}Oe=Pe}}}var Le=T.alternate;if(Le!==null){var Me=Le.child;if(Me!==null){Le.child=null;do{var hn=Me.sibling;Me.sibling=null,Me=hn}while(Me!==null)}}Oe=T}}if((T.subtreeFlags&2064)!==0&&V!==null)V.return=T,Oe=V;else e:for(;Oe!==null;){if(T=Oe,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:Bu(9,T,T.return)}var te=T.sibling;if(te!==null){te.return=T.return,Oe=te;break e}Oe=T.return}}var Q=i.current;for(Oe=Q;Oe!==null;){V=Oe;var re=V.child;if((V.subtreeFlags&2064)!==0&&re!==null)re.return=V,Oe=re;else e:for(V=Q;Oe!==null;){if(q=Oe,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:af(9,q)}}catch(Ue){ln(q,q.return,Ue)}if(q===V){Oe=null;break e}var xe=q.sibling;if(xe!==null){xe.return=q.return,Oe=xe;break e}Oe=q.return}}if(Ct=b,go(),Pr&&typeof Pr.onPostCommitFiberRoot=="function")try{Pr.onPostCommitFiberRoot(ya,i)}catch{}m=!0}return m}finally{vt=d,Yr.transition=l}}return!1}function SE(i,l,d){l=tc(d,l),l=B_(i,l,1),i=vo(i,l,1),l=sr(),i!==null&&(io(i,1,l),vr(i,l))}function ln(i,l,d){if(i.tag===3)SE(i,i,d);else for(;l!==null;){if(l.tag===3){SE(l,i,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(wo===null||!wo.has(m))){i=tc(d,i),i=q_(l,i,1),l=vo(l,i,1),i=sr(),l!==null&&(io(l,1,i),vr(l,i));break}}l=l.return}}function ER(i,l,d){var m=i.pingCache;m!==null&&m.delete(l),l=sr(),i.pingedLanes|=i.suspendedLanes&d,Pn===i&&(Mn&d)===d&&(Tn===4||Tn===3&&(Mn&130023424)===Mn&&500>Vt()-ry?Ra(i,0):ny|=d),vr(i,l)}function TE(i,l){l===0&&((i.mode&1)===0?l=1:(l=jl,jl<<=1,(jl&130023424)===0&&(jl=4194304)));var d=sr();i=ji(i,l),i!==null&&(io(i,l,d),vr(i,d))}function bR(i){var l=i.memoizedState,d=0;l!==null&&(d=l.retryLane),TE(i,d)}function NR(i,l){var d=0;switch(i.tag){case 13:var m=i.stateNode,b=i.memoizedState;b!==null&&(d=b.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(l),TE(i,d)}var CE;CE=function(i,l,d){if(i!==null)if(i.memoizedProps!==l.pendingProps||pr.current)gr=!0;else{if((i.lanes&d)===0&&(l.flags&128)===0)return gr=!1,dR(i,l,d);gr=(i.flags&131072)!==0}else gr=!1,Xt&&(l.flags&1048576)!==0&&o_(l,Bh,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;sf(i,l),i=l.pendingProps;var b=Kl(l,Wn.current);Zl(l,d),b=Og(null,l,m,i,b,d);var T=Dg();return l.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,mr(m)?(T=!0,Uh(l)):T=!1,l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Cg(l),b.updater=nf,l.stateNode=b,b._reactInternals=l,$g(l,m,i,d),l=Wg(null,l,m,!0,T,d)):(l.tag=0,Xt&&T&&yg(l),rr(null,l,b,d),l=l.child),l;case 16:m=l.elementType;e:{switch(sf(i,l),i=l.pendingProps,b=m._init,m=b(m._payload),l.type=m,b=l.tag=TR(m),i=ys(m,i),b){case 0:l=qg(null,l,m,i,d);break e;case 1:l=Z_(null,l,m,i,d);break e;case 11:l=G_(null,l,m,i,d);break e;case 14:l=Q_(null,l,m,ys(m.type,i),d);break e}throw Error(n(306,m,""))}return l;case 0:return m=l.type,b=l.pendingProps,b=l.elementType===m?b:ys(m,b),qg(i,l,m,b,d);case 1:return m=l.type,b=l.pendingProps,b=l.elementType===m?b:ys(m,b),Z_(i,l,m,b,d);case 3:e:{if(eE(l),i===null)throw Error(n(387));m=l.pendingProps,T=l.memoizedState,b=T.element,m_(i,l),Qh(l,m,null,d);var V=l.memoizedState;if(m=V.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){b=tc(Error(n(423)),l),l=tE(i,l,m,d,b);break e}else if(m!==b){b=tc(Error(n(424)),l),l=tE(i,l,m,d,b);break e}else for(Lr=fo(l.stateNode.containerInfo.firstChild),Dr=l,Xt=!0,gs=null,d=f_(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Yl(),m===b){l=Ai(i,l,d);break e}rr(i,l,m,d)}l=l.child}return l;case 5:return v_(l),i===null&&wg(l),m=l.type,b=l.pendingProps,T=i!==null?i.memoizedProps:null,V=b.children,dg(m,b)?V=null:T!==null&&dg(m,T)&&(l.flags|=32),J_(i,l),rr(i,l,V,d),l.child;case 6:return i===null&&wg(l),null;case 13:return nE(i,l,d);case 4:return jg(l,l.stateNode.containerInfo),m=l.pendingProps,i===null?l.child=Xl(l,null,m,d):rr(i,l,m,d),l.child;case 11:return m=l.type,b=l.pendingProps,b=l.elementType===m?b:ys(m,b),G_(i,l,m,b,d);case 7:return rr(i,l,l.pendingProps,d),l.child;case 8:return rr(i,l,l.pendingProps.children,d),l.child;case 12:return rr(i,l,l.pendingProps.children,d),l.child;case 10:e:{if(m=l.type._context,b=l.pendingProps,T=l.memoizedProps,V=b.value,Ut(Hh,m._currentValue),m._currentValue=V,T!==null)if(ms(T.value,V)){if(T.children===b.children&&!pr.current){l=Ai(i,l,d);break e}}else for(T=l.child,T!==null&&(T.return=l);T!==null;){var q=T.dependencies;if(q!==null){V=T.child;for(var H=q.firstContext;H!==null;){if(H.context===m){if(T.tag===1){H=Ii(-1,d&-d),H.tag=2;var se=T.updateQueue;if(se!==null){se=se.shared;var fe=se.pending;fe===null?H.next=H:(H.next=fe.next,fe.next=H),se.pending=H}}T.lanes|=d,H=T.alternate,H!==null&&(H.lanes|=d),Sg(T.return,d,l),q.lanes|=d;break}H=H.next}}else if(T.tag===10)V=T.type===l.type?null:T.child;else if(T.tag===18){if(V=T.return,V===null)throw Error(n(341));V.lanes|=d,q=V.alternate,q!==null&&(q.lanes|=d),Sg(V,d,l),V=T.sibling}else V=T.child;if(V!==null)V.return=T;else for(V=T;V!==null;){if(V===l){V=null;break}if(T=V.sibling,T!==null){T.return=V.return,V=T;break}V=V.return}T=V}rr(i,l,b.children,d),l=l.child}return l;case 9:return b=l.type,m=l.pendingProps.children,Zl(l,d),b=Gr(b),m=m(b),l.flags|=1,rr(i,l,m,d),l.child;case 14:return m=l.type,b=ys(m,l.pendingProps),b=ys(m.type,b),Q_(i,l,m,b,d);case 15:return Y_(i,l,l.type,l.pendingProps,d);case 17:return m=l.type,b=l.pendingProps,b=l.elementType===m?b:ys(m,b),sf(i,l),l.tag=1,mr(m)?(i=!0,Uh(l)):i=!1,Zl(l,d),$_(l,m,b),$g(l,m,b,d),Wg(null,l,m,!0,i,d);case 19:return sE(i,l,d);case 22:return X_(i,l,d)}throw Error(n(156,l.tag))};function jE(i,l){return Tl(i,l)}function SR(i,l,d,m){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(i,l,d,m){return new SR(i,l,d,m)}function dy(i){return i=i.prototype,!(!i||!i.isReactComponent)}function TR(i){if(typeof i=="function")return dy(i)?1:0;if(i!=null){if(i=i.$$typeof,i===M)return 11;if(i===K)return 14}return 2}function No(i,l){var d=i.alternate;return d===null?(d=Xr(i.tag,l,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=l,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,l=i.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function gf(i,l,d,m,b,T){var V=2;if(m=i,typeof i=="function")dy(i)&&(V=1);else if(typeof i=="string")V=5;else e:switch(i){case k:return Da(d.children,b,T,l);case O:V=8,b|=8;break;case L:return i=Xr(12,d,l,b|2),i.elementType=L,i.lanes=T,i;case R:return i=Xr(13,d,l,b),i.elementType=R,i.lanes=T,i;case W:return i=Xr(19,d,l,b),i.elementType=W,i.lanes=T,i;case ie:return yf(d,b,T,l);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:V=10;break e;case I:V=9;break e;case M:V=11;break e;case K:V=14;break e;case X:V=16,m=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return l=Xr(V,d,l,b),l.elementType=i,l.type=m,l.lanes=T,l}function Da(i,l,d,m){return i=Xr(7,i,m,l),i.lanes=d,i}function yf(i,l,d,m){return i=Xr(22,i,m,l),i.elementType=ie,i.lanes=d,i.stateNode={isHidden:!1},i}function hy(i,l,d){return i=Xr(6,i,null,l),i.lanes=d,i}function fy(i,l,d){return l=Xr(4,i.children!==null?i.children:[],i.key,l),l.lanes=d,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}function CR(i,l,d,m,b){this.tag=l,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=so(0),this.expirationTimes=so(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=so(0),this.identifierPrefix=m,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function py(i,l,d,m,b,T,V,q,H){return i=new CR(i,l,d,q,H),l===1?(l=1,T===!0&&(l|=8)):l=0,T=Xr(3,null,null,l),i.current=T,T.stateNode=i,T.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cg(T),i}function jR(i,l,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:m==null?null:""+m,children:i,containerInfo:l,implementation:d}}function IE(i){if(!i)return mo;i=i._reactInternals;e:{if(ls(i)!==i||i.tag!==1)throw Error(n(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(mr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(i.tag===1){var d=i.type;if(mr(d))return r_(i,d,l)}return l}function AE(i,l,d,m,b,T,V,q,H){return i=py(d,m,!0,i,b,T,V,q,H),i.context=IE(null),d=i.current,m=sr(),b=Eo(d),T=Ii(m,b),T.callback=l??null,vo(d,T,b),i.current.lanes=b,io(i,b,m),vr(i,m),i}function vf(i,l,d,m){var b=l.current,T=sr(),V=Eo(b);return d=IE(d),l.context===null?l.context=d:l.pendingContext=d,l=Ii(T,V),l.payload={element:i},m=m===void 0?null:m,m!==null&&(l.callback=m),i=vo(b,l,V),i!==null&&(ws(i,b,V,T),Gh(i,b,V)),V}function xf(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function PE(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<l?d:l}}function my(i,l){PE(i,l),(i=i.alternate)&&PE(i,l)}function IR(){return null}var kE=typeof reportError=="function"?reportError:function(i){console.error(i)};function gy(i){this._internalRoot=i}wf.prototype.render=gy.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(n(409));vf(i,l,null,null)},wf.prototype.unmount=gy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;ka(function(){vf(null,i,null,null)}),l[Ni]=null}};function wf(i){this._internalRoot=i}wf.prototype.unstable_scheduleHydration=function(i){if(i){var l=xh();i={blockedOn:null,target:i,priority:l};for(var d=0;d<qs.length&&l!==0&&l<qs[d].priority;d++);qs.splice(d,0,i),d===0&&Eh(i)}};function yy(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function _f(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function RE(){}function AR(i,l,d,m,b){if(b){if(typeof m=="function"){var T=m;m=function(){var se=xf(V);T.call(se)}}var V=AE(l,m,i,0,null,!1,!1,"",RE);return i._reactRootContainer=V,i[Ni]=V.current,Au(i.nodeType===8?i.parentNode:i),ka(),V}for(;b=i.lastChild;)i.removeChild(b);if(typeof m=="function"){var q=m;m=function(){var se=xf(H);q.call(se)}}var H=py(i,0,!1,null,null,!1,!1,"",RE);return i._reactRootContainer=H,i[Ni]=H.current,Au(i.nodeType===8?i.parentNode:i),ka(function(){vf(l,H,d,m)}),H}function Ef(i,l,d,m,b){var T=d._reactRootContainer;if(T){var V=T;if(typeof b=="function"){var q=b;b=function(){var H=xf(V);q.call(H)}}vf(l,V,i,b)}else V=AR(d,l,i,b,m);return xf(V)}yh=function(i){switch(i.tag){case 3:var l=i.stateNode;if(l.current.memoizedState.isDehydrated){var d=ro(l.pendingLanes);d!==0&&(oo(l,d|1),vr(l,Vt()),(Ct&6)===0&&(sc=Vt()+500,go()))}break;case 13:ka(function(){var m=ji(i,1);if(m!==null){var b=sr();ws(m,i,1,b)}}),my(i,1)}},Il=function(i){if(i.tag===13){var l=ji(i,134217728);if(l!==null){var d=sr();ws(l,i,134217728,d)}my(i,134217728)}},vh=function(i){if(i.tag===13){var l=Eo(i),d=ji(i,l);if(d!==null){var m=sr();ws(d,i,l,m)}my(i,l)}},xh=function(){return vt},wh=function(i,l){var d=vt;try{return vt=i,l()}finally{vt=d}},gt=function(i,l,d){switch(l){case"input":if(zn(i,d),l=d.name,d.type==="radio"&&l!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==i&&m.form===i.form){var b=Fh(m);if(!b)throw Error(n(90));it(m),zn(m,b)}}}break;case"textarea":Ms(i,d);break;case"select":l=d.value,l!=null&&Ir(i,!!d.multiple,l,!1)}},Tt=ly,lt=ka;var PR={usingClientEntryPoint:!1,Events:[Ru,Wl,Fh,ye,Ve,ly]},Ku={findFiberByHostInstance:Na,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kR={bundleType:Ku.bundleType,version:Ku.version,rendererPackageName:Ku.rendererPackageName,rendererConfig:Ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=pu(i),i===null?null:i.stateNode},findFiberByHostInstance:Ku.findFiberByHostInstance||IR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bf.isDisabled&&bf.supportsFiber)try{ya=bf.inject(kR),Pr=bf}catch{}}return xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PR,xr.createPortal=function(i,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yy(l))throw Error(n(200));return jR(i,l,null,d)},xr.createRoot=function(i,l){if(!yy(i))throw Error(n(299));var d=!1,m="",b=kE;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),l=py(i,1,!1,null,null,d,!1,m,b),i[Ni]=l.current,Au(i.nodeType===8?i.parentNode:i),new gy(l)},xr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=pu(l),i=i===null?null:i.stateNode,i},xr.flushSync=function(i){return ka(i)},xr.hydrate=function(i,l,d){if(!_f(l))throw Error(n(200));return Ef(null,i,l,!0,d)},xr.hydrateRoot=function(i,l,d){if(!yy(i))throw Error(n(405));var m=d!=null&&d.hydratedSources||null,b=!1,T="",V=kE;if(d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(V=d.onRecoverableError)),l=AE(l,null,i,1,d??null,b,!1,T,V),i[Ni]=l.current,Au(i),m)for(i=0;i<m.length;i++)d=m[i],b=d._getVersion,b=b(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,b]:l.mutableSourceEagerHydrationData.push(d,b);return new wf(l)},xr.render=function(i,l,d){if(!_f(l))throw Error(n(200));return Ef(null,i,l,!1,d)},xr.unmountComponentAtNode=function(i){if(!_f(i))throw Error(n(40));return i._reactRootContainer?(ka(function(){Ef(null,null,i,!1,function(){i._reactRootContainer=null,i[Ni]=null})}),!0):!1},xr.unstable_batchedUpdates=ly,xr.unstable_renderSubtreeIntoContainer=function(i,l,d,m){if(!_f(d))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Ef(i,l,d,!1,m)},xr.version="18.3.1-next-f1338f8080-20240426",xr}var HE;function nS(){if(HE)return by.exports;HE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),by.exports=JR(),by.exports}var dl=nS();const Gp=eS(dl);function qe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function ZR(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function rS(...t){return e=>t.forEach(n=>ZR(n,e))}function jt(...t){return E.useCallback(rS(...t),t)}function Gi(t,e=[]){let n=[];function r(a,c){const u=E.createContext(c),h=n.length;n=[...n,c];function f(y){const{scope:v,children:w,...N}=y,x=(v==null?void 0:v[t][h])||u,_=E.useMemo(()=>N,Object.values(N));return o.jsx(x.Provider,{value:_,children:w})}function g(y,v){const w=(v==null?void 0:v[t][h])||u,N=E.useContext(w);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return f.displayName=a+"Provider",[f,g]}const s=()=>{const a=n.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[t])||a;return E.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[r,e2(s,...e)]}function e2(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const y=h(a)[`__scope${f}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var Ja=E.forwardRef((t,e)=>{const{children:n,...r}=t,s=E.Children.toArray(n),a=s.find(t2);if(a){const c=a.props.children,u=s.map(h=>h===a?E.Children.count(c)>1?E.Children.only(null):E.isValidElement(c)?c.props.children:null:h);return o.jsx(lv,{...r,ref:e,children:E.isValidElement(c)?E.cloneElement(c,void 0,u):null})}return o.jsx(lv,{...r,ref:e,children:n})});Ja.displayName="Slot";var lv=E.forwardRef((t,e)=>{const{children:n,...r}=t;if(E.isValidElement(n)){const s=r2(n);return E.cloneElement(n,{...n2(r,n.props),ref:e?rS(e,s):s})}return E.Children.count(n)>1?E.Children.only(null):null});lv.displayName="SlotClone";var sS=({children:t})=>o.jsx(o.Fragment,{children:t});function t2(t){return E.isValidElement(t)&&t.type===sS}function n2(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...u)=>{a(...u),s(...u)}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function r2(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ix(t){const e=t+"CollectionProvider",[n,r]=Gi(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),c=w=>{const{scope:N,children:x}=w,_=_e.useRef(null),P=_e.useRef(new Map).current;return o.jsx(s,{scope:N,itemMap:P,collectionRef:_,children:x})};c.displayName=e;const u=t+"CollectionSlot",h=_e.forwardRef((w,N)=>{const{scope:x,children:_}=w,P=a(u,x),j=jt(N,P.collectionRef);return o.jsx(Ja,{ref:j,children:_})});h.displayName=u;const f=t+"CollectionItemSlot",g="data-radix-collection-item",y=_e.forwardRef((w,N)=>{const{scope:x,children:_,...P}=w,j=_e.useRef(null),C=jt(N,j),F=a(f,x);return _e.useEffect(()=>(F.itemMap.set(j,{ref:j,...P}),()=>void F.itemMap.delete(j))),o.jsx(Ja,{[g]:"",ref:C,children:_})});y.displayName=f;function v(w){const N=a(t+"CollectionConsumer",w);return _e.useCallback(()=>{const _=N.collectionRef.current;if(!_)return[];const P=Array.from(_.querySelectorAll(`[${g}]`));return Array.from(N.itemMap.values()).sort((F,U)=>P.indexOf(F.ref.current)-P.indexOf(U.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:c,Slot:h,ItemSlot:y},v,r]}var s2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Je=s2.reduce((t,e)=>{const n=E.forwardRef((r,s)=>{const{asChild:a,...c}=r,u=a?Ja:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(u,{...c,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Qp(t,e){t&&dl.flushSync(()=>t.dispatchEvent(e))}function jn(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Ax(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t);E.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var i2="DismissableLayer",cv="dismissableLayer.update",o2="dismissableLayer.pointerDownOutside",a2="dismissableLayer.focusOutside",KE,iS=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),oS=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=t,f=E.useContext(iS),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=E.useState({}),N=jt(e,k=>y(k)),x=Array.from(f.layers),[_]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),P=x.indexOf(_),j=g?x.indexOf(g):-1,C=f.layersWithOutsidePointerEventsDisabled.size>0,F=j>=P,U=c2(k=>{const O=k.target,L=[...f.branches].some(D=>D.contains(O));!F||L||(s==null||s(k),c==null||c(k),k.defaultPrevented||u==null||u())},v),z=u2(k=>{const O=k.target;[...f.branches].some(D=>D.contains(O))||(a==null||a(k),c==null||c(k),k.defaultPrevented||u==null||u())},v);return Ax(k=>{j===f.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&u&&(k.preventDefault(),u()))},v),E.useEffect(()=>{if(g)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(KE=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),GE(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=KE)}},[g,v,n,f]),E.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),GE())},[g,f]),E.useEffect(()=>{const k=()=>w({});return document.addEventListener(cv,k),()=>document.removeEventListener(cv,k)},[]),o.jsx(Je.div,{...h,ref:N,style:{pointerEvents:C?F?"auto":"none":void 0,...t.style},onFocusCapture:qe(t.onFocusCapture,z.onFocusCapture),onBlurCapture:qe(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:qe(t.onPointerDownCapture,U.onPointerDownCapture)})});oS.displayName=i2;var l2="DismissableLayerBranch",aS=E.forwardRef((t,e)=>{const n=E.useContext(iS),r=E.useRef(null),s=jt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(Je.div,{...t,ref:s})});aS.displayName=l2;function c2(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){lS(o2,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function u2(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=E.useRef(!1);return E.useEffect(()=>{const s=a=>{a.target&&!r.current&&lS(a2,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function GE(){const t=new CustomEvent(cv);document.dispatchEvent(t)}function lS(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Qp(s,a):s.dispatchEvent(a)}var d2=oS,h2=aS,Zt=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},f2="Portal",cS=E.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,a]=E.useState(!1);Zt(()=>a(!0),[]);const c=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Gp.createPortal(o.jsx(Je.div,{...r,ref:e}),c):null});cS.displayName=f2;function p2(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var Px=t=>{const{present:e,children:n}=t,r=m2(e),s=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),a=jt(r.ref,g2(s));return typeof n=="function"||r.isPresent?E.cloneElement(s,{ref:a}):null};Px.displayName="Presence";function m2(t){const[e,n]=E.useState(),r=E.useRef({}),s=E.useRef(t),a=E.useRef("none"),c=t?"mounted":"unmounted",[u,h]=p2(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const f=Sf(r.current);a.current=u==="mounted"?f:"none"},[u]),Zt(()=>{const f=r.current,g=s.current;if(g!==t){const v=a.current,w=Sf(f);t?h("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(g&&v!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),Zt(()=>{if(e){const f=y=>{const w=Sf(r.current).includes(y.animationName);y.target===e&&w&&dl.flushSync(()=>h("ANIMATION_END"))},g=y=>{y.target===e&&(a.current=Sf(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function Sf(t){return(t==null?void 0:t.animationName)||"none"}function g2(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Za({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=y2({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:r,u=jn(n),h=E.useCallback(f=>{if(a){const y=typeof f=="function"?f(t):f;y!==t&&u(y)}else s(f)},[a,t,s,u]);return[c,h]}function y2({defaultProp:t,onChange:e}){const n=E.useState(t),[r]=n,s=E.useRef(r),a=jn(e);return E.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),n}var v2="VisuallyHidden",Wd=E.forwardRef((t,e)=>o.jsx(Je.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Wd.displayName=v2;var x2=Wd,kx="ToastProvider",[Rx,w2,_2]=Ix("Toast"),[uS,Jq]=Gi("Toast",[_2]),[E2,Yp]=uS(kx),dS=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:c}=t,[u,h]=E.useState(null),[f,g]=E.useState(0),y=E.useRef(!1),v=E.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${kx}\`. Expected non-empty \`string\`.`),o.jsx(Rx.Provider,{scope:e,children:o.jsx(E2,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:f,viewport:u,onViewportChange:h,onToastAdd:E.useCallback(()=>g(w=>w+1),[]),onToastRemove:E.useCallback(()=>g(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:v,children:c})})};dS.displayName=kx;var hS="ToastViewport",b2=["F8"],uv="toast.viewportPause",dv="toast.viewportResume",fS=E.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=b2,label:s="Notifications ({hotkey})",...a}=t,c=Yp(hS,n),u=w2(n),h=E.useRef(null),f=E.useRef(null),g=E.useRef(null),y=E.useRef(null),v=jt(e,y,c.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=c.toastCount>0;E.useEffect(()=>{const _=P=>{var C;r.every(F=>P[F]||P.code===F)&&((C=y.current)==null||C.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),E.useEffect(()=>{const _=h.current,P=y.current;if(N&&_&&P){const j=()=>{if(!c.isClosePausedRef.current){const z=new CustomEvent(uv);P.dispatchEvent(z),c.isClosePausedRef.current=!0}},C=()=>{if(c.isClosePausedRef.current){const z=new CustomEvent(dv);P.dispatchEvent(z),c.isClosePausedRef.current=!1}},F=z=>{!_.contains(z.relatedTarget)&&C()},U=()=>{_.contains(document.activeElement)||C()};return _.addEventListener("focusin",j),_.addEventListener("focusout",F),_.addEventListener("pointermove",j),_.addEventListener("pointerleave",U),window.addEventListener("blur",j),window.addEventListener("focus",C),()=>{_.removeEventListener("focusin",j),_.removeEventListener("focusout",F),_.removeEventListener("pointermove",j),_.removeEventListener("pointerleave",U),window.removeEventListener("blur",j),window.removeEventListener("focus",C)}}},[N,c.isClosePausedRef]);const x=E.useCallback(({tabbingDirection:_})=>{const j=u().map(C=>{const F=C.ref.current,U=[F,...L2(F)];return _==="forwards"?U:U.reverse()});return(_==="forwards"?j.reverse():j).flat()},[u]);return E.useEffect(()=>{const _=y.current;if(_){const P=j=>{var U,z,k;const C=j.altKey||j.ctrlKey||j.metaKey;if(j.key==="Tab"&&!C){const O=document.activeElement,L=j.shiftKey;if(j.target===_&&L){(U=f.current)==null||U.focus();return}const M=x({tabbingDirection:L?"backwards":"forwards"}),R=M.findIndex(W=>W===O);Ty(M.slice(R+1))?j.preventDefault():L?(z=f.current)==null||z.focus():(k=g.current)==null||k.focus()}};return _.addEventListener("keydown",P),()=>_.removeEventListener("keydown",P)}},[u,x]),o.jsxs(h2,{ref:h,role:"region","aria-label":s.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&o.jsx(hv,{ref:f,onFocusFromOutsideViewport:()=>{const _=x({tabbingDirection:"forwards"});Ty(_)}}),o.jsx(Rx.Slot,{scope:n,children:o.jsx(Je.ol,{tabIndex:-1,...a,ref:v})}),N&&o.jsx(hv,{ref:g,onFocusFromOutsideViewport:()=>{const _=x({tabbingDirection:"backwards"});Ty(_)}})]})});fS.displayName=hS;var pS="ToastFocusProxy",hv=E.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,a=Yp(pS,n);return o.jsx(Wd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:c=>{var f;const u=c.relatedTarget;!((f=a.viewport)!=null&&f.contains(u))&&r()}})});hv.displayName=pS;var Xp="Toast",N2="toast.swipeStart",S2="toast.swipeMove",T2="toast.swipeCancel",C2="toast.swipeEnd",mS=E.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...c}=t,[u=!0,h]=Za({prop:r,defaultProp:s,onChange:a});return o.jsx(Px,{present:n||u,children:o.jsx(A2,{open:u,...c,ref:e,onClose:()=>h(!1),onPause:jn(t.onPause),onResume:jn(t.onResume),onSwipeStart:qe(t.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:qe(t.onSwipeMove,f=>{const{x:g,y}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${g}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${y}px`)}),onSwipeCancel:qe(t.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:qe(t.onSwipeEnd,f=>{const{x:g,y}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${g}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${y}px`),h(!1)})})})});mS.displayName=Xp;var[j2,I2]=uS(Xp,{onClose(){}}),A2=E.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:c,onEscapeKeyDown:u,onPause:h,onResume:f,onSwipeStart:g,onSwipeMove:y,onSwipeCancel:v,onSwipeEnd:w,...N}=t,x=Yp(Xp,n),[_,P]=E.useState(null),j=jt(e,W=>P(W)),C=E.useRef(null),F=E.useRef(null),U=s||x.duration,z=E.useRef(0),k=E.useRef(U),O=E.useRef(0),{onToastAdd:L,onToastRemove:D}=x,I=jn(()=>{var K;(_==null?void 0:_.contains(document.activeElement))&&((K=x.viewport)==null||K.focus()),c()}),M=E.useCallback(W=>{!W||W===1/0||(window.clearTimeout(O.current),z.current=new Date().getTime(),O.current=window.setTimeout(I,W))},[I]);E.useEffect(()=>{const W=x.viewport;if(W){const K=()=>{M(k.current),f==null||f()},X=()=>{const ie=new Date().getTime()-z.current;k.current=k.current-ie,window.clearTimeout(O.current),h==null||h()};return W.addEventListener(uv,X),W.addEventListener(dv,K),()=>{W.removeEventListener(uv,X),W.removeEventListener(dv,K)}}},[x.viewport,U,h,f,M]),E.useEffect(()=>{a&&!x.isClosePausedRef.current&&M(U)},[a,U,x.isClosePausedRef,M]),E.useEffect(()=>(L(),()=>D()),[L,D]);const R=E.useMemo(()=>_?ES(_):null,[_]);return x.viewport?o.jsxs(o.Fragment,{children:[R&&o.jsx(P2,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),o.jsx(j2,{scope:n,onClose:I,children:dl.createPortal(o.jsx(Rx.ItemSlot,{scope:n,children:o.jsx(d2,{asChild:!0,onEscapeKeyDown:qe(u,()=>{x.isFocusedToastEscapeKeyDownRef.current||I(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(Je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":x.swipeDirection,...N,ref:j,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:qe(t.onKeyDown,W=>{W.key==="Escape"&&(u==null||u(W.nativeEvent),W.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:qe(t.onPointerDown,W=>{W.button===0&&(C.current={x:W.clientX,y:W.clientY})}),onPointerMove:qe(t.onPointerMove,W=>{if(!C.current)return;const K=W.clientX-C.current.x,X=W.clientY-C.current.y,ie=!!F.current,G=["left","right"].includes(x.swipeDirection),oe=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,le=G?oe(0,K):0,B=G?0:oe(0,X),Z=W.pointerType==="touch"?10:2,he={x:le,y:B},Ce={originalEvent:W,delta:he};ie?(F.current=he,Tf(S2,y,Ce,{discrete:!1})):QE(he,x.swipeDirection,Z)?(F.current=he,Tf(N2,g,Ce,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(K)>Z||Math.abs(X)>Z)&&(C.current=null)}),onPointerUp:qe(t.onPointerUp,W=>{const K=F.current,X=W.target;if(X.hasPointerCapture(W.pointerId)&&X.releasePointerCapture(W.pointerId),F.current=null,C.current=null,K){const ie=W.currentTarget,G={originalEvent:W,delta:K};QE(K,x.swipeDirection,x.swipeThreshold)?Tf(C2,w,G,{discrete:!0}):Tf(T2,v,G,{discrete:!0}),ie.addEventListener("click",oe=>oe.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),P2=t=>{const{__scopeToast:e,children:n,...r}=t,s=Yp(Xp,e),[a,c]=E.useState(!1),[u,h]=E.useState(!1);return O2(()=>c(!0)),E.useEffect(()=>{const f=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(f)},[]),u?null:o.jsx(cS,{asChild:!0,children:o.jsx(Wd,{...r,children:a&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},k2="ToastTitle",gS=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(Je.div,{...r,ref:e})});gS.displayName=k2;var R2="ToastDescription",yS=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(Je.div,{...r,ref:e})});yS.displayName=R2;var vS="ToastAction",xS=E.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?o.jsx(_S,{altText:n,asChild:!0,children:o.jsx(Ox,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${vS}\`. Expected non-empty \`string\`.`),null)});xS.displayName=vS;var wS="ToastClose",Ox=E.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=I2(wS,n);return o.jsx(_S,{asChild:!0,children:o.jsx(Je.button,{type:"button",...r,ref:e,onClick:qe(t.onClick,s.onClose)})})});Ox.displayName=wS;var _S=E.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return o.jsx(Je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function ES(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),D2(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const c=r.dataset.radixToastAnnounceAlt;c&&e.push(c)}else e.push(...ES(r))}}),e}function Tf(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Qp(s,a):s.dispatchEvent(a)}var QE=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),a=r>s;return e==="left"||e==="right"?a&&r>n:!a&&s>n};function O2(t=()=>{}){const e=jn(t);Zt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function D2(t){return t.nodeType===t.ELEMENT_NODE}function L2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Ty(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var M2=dS,bS=fS,NS=mS,SS=gS,TS=yS,CS=xS,jS=Ox;function IS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=IS(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function AS(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=IS(t))&&(r&&(r+=" "),r+=e);return r}const YE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,XE=AS,Hd=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return XE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,c=Object.keys(s).map(f=>{const g=n==null?void 0:n[f],y=a==null?void 0:a[f];if(g===null)return null;const v=YE(g)||YE(y);return s[f][v]}),u=n&&Object.entries(n).reduce((f,g)=>{let[y,v]=g;return v===void 0||(f[y]=v),f},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,g)=>{let{class:y,className:v,...w}=g;return Object.entries(w).every(N=>{let[x,_]=N;return Array.isArray(_)?_.includes({...a,...u}[x]):{...a,...u}[x]===_})?[...f,y,v]:f},[]);return XE(t,c,h,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PS=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:c,...u},h)=>E.createElement("svg",{ref:h,...V2,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:PS("lucide",s),...u},[...c.map(([f,g])=>E.createElement(f,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(t,e)=>{const n=E.forwardRef(({className:r,...s},a)=>E.createElement(U2,{ref:a,iconNode:e,className:PS(`lucide-${F2(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=ze("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=ze("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=ze("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=ze("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=ze("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=ze("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=ze("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=ze("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=ze("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=ze("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=ze("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=ze("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=ze("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=ze("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=ze("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=ze("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=ze("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=ze("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=ze("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=ze("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=ze("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=ze("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=ze("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=ze("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ze("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=ze("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=ze("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=ze("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=ze("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=ze("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=ze("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=ze("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=ze("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=ze("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Lx="-",lO=t=>{const e=uO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{const u=c.split(Lx);return u[0]===""&&u.length!==1&&u.shift(),MS(u,e)||cO(c)},getConflictingClassGroupIds:(c,u)=>{const h=n[c]||[];return u&&r[c]?[...h,...r[c]]:h}}},MS=(t,e)=>{var c;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?MS(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(Lx);return(c=e.validators.find(({validator:u})=>u(a)))==null?void 0:c.classGroupId},eb=/^\[(.+)\]$/,cO=t=>{if(eb.test(t)){const e=eb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},uO=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return hO(Object.entries(t.classGroups),n).forEach(([a,c])=>{gv(c,r,a,e)}),r},gv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:tb(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(dO(s)){gv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,c])=>{gv(c,tb(e,a),n,r)})})},tb=(t,e)=>{let n=t;return e.split(Lx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},dO=t=>t.isThemeGetter,hO=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([c,u])=>[e+c,u])):a);return[n,s]}):t,fO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,c)=>{n.set(a,c),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let c=n.get(a);if(c!==void 0)return c;if((c=r.get(a))!==void 0)return s(a,c),c},set(a,c){n.has(a)?n.set(a,c):s(a,c)}}},FS="!",pO=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,c=u=>{const h=[];let f=0,g=0,y;for(let _=0;_<u.length;_++){let P=u[_];if(f===0){if(P===s&&(r||u.slice(_,_+a)===e)){h.push(u.slice(g,_)),g=_+a;continue}if(P==="/"){y=_;continue}}P==="["?f++:P==="]"&&f--}const v=h.length===0?u:u.substring(g),w=v.startsWith(FS),N=w?v.substring(1):v,x=y&&y>g?y-g:void 0;return{modifiers:h,hasImportantModifier:w,baseClassName:N,maybePostfixModifierPosition:x}};return n?u=>n({className:u,parseClassName:c}):c},mO=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},gO=t=>({cache:fO(t.cacheSize),parseClassName:pO(t),...lO(t)}),yO=/\s+/,vO=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],c=t.trim().split(yO);let u="";for(let h=c.length-1;h>=0;h-=1){const f=c[h],{modifiers:g,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:w}=n(f);let N=!!w,x=r(N?v.substring(0,w):v);if(!x){if(!N){u=f+(u.length>0?" "+u:u);continue}if(x=r(v),!x){u=f+(u.length>0?" "+u:u);continue}N=!1}const _=mO(g).join(":"),P=y?_+FS:_,j=P+x;if(a.includes(j))continue;a.push(j);const C=s(x,N);for(let F=0;F<C.length;++F){const U=C[F];a.push(P+U)}u=f+(u.length>0?" "+u:u)}return u};function xO(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=VS(e))&&(r&&(r+=" "),r+=n);return r}const VS=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=VS(t[r]))&&(n&&(n+=" "),n+=e);return n};function wO(t,...e){let n,r,s,a=c;function c(h){const f=e.reduce((g,y)=>y(g),t());return n=gO(f),r=n.cache.get,s=n.cache.set,a=u,u(h)}function u(h){const f=r(h);if(f)return f;const g=vO(h,n);return s(h,g),g}return function(){return a(xO.apply(null,arguments))}}const Kt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},US=/^\[(?:([a-z-]+):)?(.+)\]$/i,_O=/^\d+\/\d+$/,EO=new Set(["px","full","screen"]),bO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,NO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,TO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,CO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ki=t=>yc(t)||EO.has(t)||_O.test(t),To=t=>Zc(t,"length",DO),yc=t=>!!t&&!Number.isNaN(Number(t)),jy=t=>Zc(t,"number",yc),Qu=t=>!!t&&Number.isInteger(Number(t)),jO=t=>t.endsWith("%")&&yc(t.slice(0,-1)),ct=t=>US.test(t),Co=t=>bO.test(t),IO=new Set(["length","size","percentage"]),AO=t=>Zc(t,IO,$S),PO=t=>Zc(t,"position",$S),kO=new Set(["image","url"]),RO=t=>Zc(t,kO,MO),OO=t=>Zc(t,"",LO),Yu=()=>!0,Zc=(t,e,n)=>{const r=US.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},DO=t=>NO.test(t)&&!SO.test(t),$S=()=>!1,LO=t=>TO.test(t),MO=t=>CO.test(t),FO=()=>{const t=Kt("colors"),e=Kt("spacing"),n=Kt("blur"),r=Kt("brightness"),s=Kt("borderColor"),a=Kt("borderRadius"),c=Kt("borderSpacing"),u=Kt("borderWidth"),h=Kt("contrast"),f=Kt("grayscale"),g=Kt("hueRotate"),y=Kt("invert"),v=Kt("gap"),w=Kt("gradientColorStops"),N=Kt("gradientColorStopPositions"),x=Kt("inset"),_=Kt("margin"),P=Kt("opacity"),j=Kt("padding"),C=Kt("saturate"),F=Kt("scale"),U=Kt("sepia"),z=Kt("skew"),k=Kt("space"),O=Kt("translate"),L=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",ct,e],M=()=>[ct,e],R=()=>["",ki,To],W=()=>["auto",yc,ct],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],oe=()=>["","0",ct],le=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[yc,ct];return{cacheSize:500,separator:":",theme:{colors:[Yu],spacing:[ki,To],blur:["none","",Co,ct],brightness:B(),borderColor:[t],borderRadius:["none","","full",Co,ct],borderSpacing:M(),borderWidth:R(),contrast:B(),grayscale:oe(),hueRotate:B(),invert:oe(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[jO,To],inset:I(),margin:I(),opacity:B(),padding:M(),saturate:B(),scale:B(),sepia:oe(),skew:B(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",ct]}],container:["container"],columns:[{columns:[Co]}],"break-after":[{"break-after":le()}],"break-before":[{"break-before":le()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),ct]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qu,ct]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ct]}],grow:[{grow:oe()}],shrink:[{shrink:oe()}],order:[{order:["first","last","none",Qu,ct]}],"grid-cols":[{"grid-cols":[Yu]}],"col-start-end":[{col:["auto",{span:["full",Qu,ct]},ct]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Yu]}],"row-start-end":[{row:["auto",{span:[Qu,ct]},ct]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ct]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ct]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ct,e]}],"min-w":[{"min-w":[ct,e,"min","max","fit"]}],"max-w":[{"max-w":[ct,e,"none","full","min","max","fit","prose",{screen:[Co]},Co]}],h:[{h:[ct,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ct,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ct,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ct,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Co,To]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",jy]}],"font-family":[{font:[Yu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ct]}],"line-clamp":[{"line-clamp":["none",yc,jy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ki,ct]}],"list-image":[{"list-image":["none",ct]}],"list-style-type":[{list:["none","disc","decimal",ct]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[P]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[P]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ki,To]}],"underline-offset":[{"underline-offset":["auto",ki,ct]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ct]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ct]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[P]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),PO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",AO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},RO]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[P]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[P]}],"divide-style":[{divide:X()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[ki,ct]}],"outline-w":[{outline:[ki,To]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[P]}],"ring-offset-w":[{"ring-offset":[ki,To]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Co,OO]}],"shadow-color":[{shadow:[Yu]}],opacity:[{opacity:[P]}],"mix-blend":[{"mix-blend":[...ie(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ie()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",Co,ct]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[y]}],saturate:[{saturate:[C]}],sepia:[{sepia:[U]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[P]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[U]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ct]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",ct]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",ct]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[F]}],"scale-x":[{"scale-x":[F]}],"scale-y":[{"scale-y":[F]}],rotate:[{rotate:[Qu,ct]}],"translate-x":[{"translate-x":[O]}],"translate-y":[{"translate-y":[O]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ct]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ct]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ct]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ki,To,jy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},VO=wO(FO);function Ge(...t){return VO(AS(t))}function UO(t){if(!t||typeof t!="string")return null;const e=t.trim();try{const n=e.match(/https?:\/\/(?:drive\.google\.com)\/(?:file\/d\/([a-zA-Z0-9_-]+)\/view|open\?id=([a-zA-Z0-9_-]+))/i);if(n){const r=n[1]||n[2];if(r)return`https://drive.google.com/uc?export=view&id=${r}`}if(/dropbox\.com\//i.test(e)){if(e.includes("dl=0"))return e.replace("dl=0","dl=1");if(!e.includes("dl="))return e+"?dl=1"}return e}catch{return e}}const $O=M2,zS=E.forwardRef(({className:t,...e},n)=>o.jsx(bS,{ref:n,className:Ge("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));zS.displayName=bS.displayName;const zO=Hd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),BS=E.forwardRef(({className:t,variant:e,...n},r)=>o.jsx(NS,{ref:r,className:Ge(zO({variant:e}),t),...n}));BS.displayName=NS.displayName;const BO=E.forwardRef(({className:t,...e},n)=>o.jsx(CS,{ref:n,className:Ge("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));BO.displayName=CS.displayName;const qS=E.forwardRef(({className:t,...e},n)=>o.jsx(jS,{ref:n,className:Ge("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(Uc,{className:"h-4 w-4"})}));qS.displayName=jS.displayName;const WS=E.forwardRef(({className:t,...e},n)=>o.jsx(SS,{ref:n,className:Ge("text-sm font-semibold",t),...e}));WS.displayName=SS.displayName;const HS=E.forwardRef(({className:t,...e},n)=>o.jsx(TS,{ref:n,className:Ge("text-sm opacity-90",t),...e}));HS.displayName=TS.displayName;function qO(){const{toasts:t}=QR();return o.jsxs($O,{children:[t.map(function({id:e,title:n,description:r,action:s,...a}){return o.jsxs(BS,{...a,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(WS,{children:n}),r&&o.jsx(HS,{children:r})]}),s,o.jsx(qS,{})]},e)}),o.jsx(zS,{})]})}var Cf={},nb;function WO(){if(nb)return Cf;nb=1;var t=nS();return Cf.createRoot=t.createRoot,Cf.hydrateRoot=t.hydrateRoot,Cf}var HO=WO(),rb=["light","dark"],KO="(prefers-color-scheme: dark)",GO=E.createContext(void 0),QO={setTheme:t=>{},themes:[]},YO=()=>{var t;return(t=E.useContext(GO))!=null?t:QO};E.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:c,attrs:u,nonce:h})=>{let f=a==="system",g=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,y=s?rb.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(N,x=!1,_=!0)=>{let P=c?c[N]:N,j=x?N+"|| ''":`'${P}'`,C="";return s&&_&&!x&&rb.includes(N)&&(C+=`d.style.colorScheme = '${N}';`),n==="class"?x||P?C+=`c.add(${j})`:C+="null":P&&(C+=`d[s](n,${j})`),C},w=t?`!function(){${g}${v(t)}}()`:r?`!function(){try{${g}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${f})){var t='${KO}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}${f?"":"else{"+v(a,!1,!1)+"}"}${y}}catch(e){}}()`:`!function(){try{${g}var e=localStorage.getItem('${e}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${v(c?"x[e]":"e",!0)}}else{${v(a,!1,!1)};}${y}}catch(t){}}();`;return E.createElement("script",{nonce:h,dangerouslySetInnerHTML:{__html:w}})});var XO=t=>{switch(t){case"success":return eD;case"info":return nD;case"warning":return tD;case"error":return rD;default:return null}},JO=Array(12).fill(0),ZO=({visible:t})=>_e.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},_e.createElement("div",{className:"sonner-spinner"},JO.map((e,n)=>_e.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),eD=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),tD=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),nD=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),rD=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sD=()=>{let[t,e]=_e.useState(document.hidden);return _e.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},yv=1,iD=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:yv++,c=this.toasts.find(h=>h.id===a),u=e.dismissible===void 0?!0:e.dismissible;return c?this.toasts=this.toasts.map(h=>h.id===a?(this.publish({...h,...e,id:a,title:r}),{...h,...e,id:a,dismissible:u,title:r}):h):this.addToast({title:r,...s,dismissible:u,id:a}),a},this.dismiss=e=>(e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0;return s.then(async c=>{if(aD(c)&&!c.ok){a=!1;let u=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:u,description:h})}else if(n.success!==void 0){a=!1;let u=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(n.error!==void 0){a=!1;let u=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),r},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||yv++;return this.create({jsx:e(r),id:r,...n}),r},this.subscribers=[],this.toasts=[]}},Fr=new iD,oD=(t,e)=>{let n=(e==null?void 0:e.id)||yv++;return Fr.addToast({title:t,...e,id:n}),n},aD=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",lD=oD,cD=()=>Fr.toasts;Object.assign(lD,{success:Fr.success,info:Fr.info,warning:Fr.warning,error:Fr.error,custom:Fr.custom,message:Fr.message,promise:Fr.promise,dismiss:Fr.dismiss,loading:Fr.loading},{getHistory:cD});function uD(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}uD(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function jf(t){return t.label!==void 0}var dD=3,hD="32px",fD=4e3,pD=356,mD=14,gD=20,yD=200;function vD(...t){return t.filter(Boolean).join(" ")}var xD=t=>{var e,n,r,s,a,c,u,h,f,g;let{invert:y,toast:v,unstyled:w,interacting:N,setHeights:x,visibleToasts:_,heights:P,index:j,toasts:C,expanded:F,removeToast:U,defaultRichColors:z,closeButton:k,style:O,cancelButtonStyle:L,actionButtonStyle:D,className:I="",descriptionClassName:M="",duration:R,position:W,gap:K,loadingIcon:X,expandByDefault:ie,classNames:G,icons:oe,closeButtonAriaLabel:le="Close toast",pauseWhenPageIsHidden:B,cn:Z}=t,[he,Ce]=_e.useState(!1),[$e,Ie]=_e.useState(!1),[we,Se]=_e.useState(!1),[He,Fe]=_e.useState(!1),[st,it]=_e.useState(0),[ve,je]=_e.useState(0),mt=_e.useRef(null),an=_e.useRef(null),zn=j===0,jr=j+1<=_,Lt=v.type,mn=v.dismissible!==!1,Ir=v.className||"",is=v.descriptionClassName||"",dn=_e.useMemo(()=>P.findIndex(Ze=>Ze.toastId===v.id)||0,[P,v.id]),Ms=_e.useMemo(()=>{var Ze;return(Ze=v.closeButton)!=null?Ze:k},[v.closeButton,k]),Fs=_e.useMemo(()=>v.duration||R||fD,[v.duration,R]),zt=_e.useRef(0),kt=_e.useRef(0),Bn=_e.useRef(0),bn=_e.useRef(null),[Ar,os]=W.split("-"),zr=_e.useMemo(()=>P.reduce((Ze,Et,gt)=>gt>=dn?Ze:Ze+Et.height,0),[P,dn]),Vs=sD(),gi=v.invert||y,as=Lt==="loading";kt.current=_e.useMemo(()=>dn*K+zr,[dn,zr]),_e.useEffect(()=>{Ce(!0)},[]),_e.useLayoutEffect(()=>{if(!he)return;let Ze=an.current,Et=Ze.style.height;Ze.style.height="auto";let gt=Ze.getBoundingClientRect().height;Ze.style.height=Et,je(gt),x(Bt=>Bt.find(Gt=>Gt.toastId===v.id)?Bt.map(Gt=>Gt.toastId===v.id?{...Gt,height:gt}:Gt):[{toastId:v.id,height:gt,position:v.position},...Bt])},[he,v.title,v.description,x,v.id]);let qn=_e.useCallback(()=>{Ie(!0),it(kt.current),x(Ze=>Ze.filter(Et=>Et.toastId!==v.id)),setTimeout(()=>{U(v)},yD)},[v,U,x,kt]);_e.useEffect(()=>{if(v.promise&&Lt==="loading"||v.duration===1/0||v.type==="loading")return;let Ze,Et=Fs;return F||N||B&&Vs?(()=>{if(Bn.current<zt.current){let gt=new Date().getTime()-zt.current;Et=Et-gt}Bn.current=new Date().getTime()})():Et!==1/0&&(zt.current=new Date().getTime(),Ze=setTimeout(()=>{var gt;(gt=v.onAutoClose)==null||gt.call(v,v),qn()},Et)),()=>clearTimeout(Ze)},[F,N,ie,v,Fs,qn,v.promise,Lt,B,Vs]),_e.useEffect(()=>{let Ze=an.current;if(Ze){let Et=Ze.getBoundingClientRect().height;return je(Et),x(gt=>[{toastId:v.id,height:Et,position:v.position},...gt]),()=>x(gt=>gt.filter(Bt=>Bt.toastId!==v.id))}},[x,v.id]),_e.useEffect(()=>{v.delete&&qn()},[qn,v.delete]);function Us(){return oe!=null&&oe.loading?_e.createElement("div",{className:"sonner-loader","data-visible":Lt==="loading"},oe.loading):X?_e.createElement("div",{className:"sonner-loader","data-visible":Lt==="loading"},X):_e.createElement(ZO,{visible:Lt==="loading"})}return _e.createElement("li",{"aria-live":v.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:an,className:Z(I,Ir,G==null?void 0:G.toast,(e=v==null?void 0:v.classNames)==null?void 0:e.toast,G==null?void 0:G.default,G==null?void 0:G[Lt],(n=v==null?void 0:v.classNames)==null?void 0:n[Lt]),"data-sonner-toast":"","data-rich-colors":(r=v.richColors)!=null?r:z,"data-styled":!(v.jsx||v.unstyled||w),"data-mounted":he,"data-promise":!!v.promise,"data-removed":$e,"data-visible":jr,"data-y-position":Ar,"data-x-position":os,"data-index":j,"data-front":zn,"data-swiping":we,"data-dismissible":mn,"data-type":Lt,"data-invert":gi,"data-swipe-out":He,"data-expanded":!!(F||ie&&he),style:{"--index":j,"--toasts-before":j,"--z-index":C.length-j,"--offset":`${$e?st:kt.current}px`,"--initial-height":ie?"auto":`${ve}px`,...O,...v.style},onPointerDown:Ze=>{as||!mn||(mt.current=new Date,it(kt.current),Ze.target.setPointerCapture(Ze.pointerId),Ze.target.tagName!=="BUTTON"&&(Se(!0),bn.current={x:Ze.clientX,y:Ze.clientY}))},onPointerUp:()=>{var Ze,Et,gt,Bt;if(He||!mn)return;bn.current=null;let Gt=Number(((Ze=an.current)==null?void 0:Ze.style.getPropertyValue("--swipe-amount").replace("px",""))||0),ne=new Date().getTime()-((Et=mt.current)==null?void 0:Et.getTime()),ye=Math.abs(Gt)/ne;if(Math.abs(Gt)>=gD||ye>.11){it(kt.current),(gt=v.onDismiss)==null||gt.call(v,v),qn(),Fe(!0);return}(Bt=an.current)==null||Bt.style.setProperty("--swipe-amount","0px"),Se(!1)},onPointerMove:Ze=>{var Et;if(!bn.current||!mn)return;let gt=Ze.clientY-bn.current.y,Bt=Ze.clientX-bn.current.x,Gt=(Ar==="top"?Math.min:Math.max)(0,gt),ne=Ze.pointerType==="touch"?10:2;Math.abs(Gt)>ne?(Et=an.current)==null||Et.style.setProperty("--swipe-amount",`${gt}px`):Math.abs(Bt)>ne&&(bn.current=null)}},Ms&&!v.jsx?_e.createElement("button",{"aria-label":le,"data-disabled":as,"data-close-button":!0,onClick:as||!mn?()=>{}:()=>{var Ze;qn(),(Ze=v.onDismiss)==null||Ze.call(v,v)},className:Z(G==null?void 0:G.closeButton,(s=v==null?void 0:v.classNames)==null?void 0:s.closeButton)},_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},_e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,v.jsx||_e.isValidElement(v.title)?v.jsx||v.title:_e.createElement(_e.Fragment,null,Lt||v.icon||v.promise?_e.createElement("div",{"data-icon":"",className:Z(G==null?void 0:G.icon,(a=v==null?void 0:v.classNames)==null?void 0:a.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||Us():null,v.type!=="loading"?v.icon||(oe==null?void 0:oe[Lt])||XO(Lt):null):null,_e.createElement("div",{"data-content":"",className:Z(G==null?void 0:G.content,(c=v==null?void 0:v.classNames)==null?void 0:c.content)},_e.createElement("div",{"data-title":"",className:Z(G==null?void 0:G.title,(u=v==null?void 0:v.classNames)==null?void 0:u.title)},v.title),v.description?_e.createElement("div",{"data-description":"",className:Z(M,is,G==null?void 0:G.description,(h=v==null?void 0:v.classNames)==null?void 0:h.description)},v.description):null),_e.isValidElement(v.cancel)?v.cancel:v.cancel&&jf(v.cancel)?_e.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||L,onClick:Ze=>{var Et,gt;jf(v.cancel)&&mn&&((gt=(Et=v.cancel).onClick)==null||gt.call(Et,Ze),qn())},className:Z(G==null?void 0:G.cancelButton,(f=v==null?void 0:v.classNames)==null?void 0:f.cancelButton)},v.cancel.label):null,_e.isValidElement(v.action)?v.action:v.action&&jf(v.action)?_e.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||D,onClick:Ze=>{var Et,gt;jf(v.action)&&(Ze.defaultPrevented||((gt=(Et=v.action).onClick)==null||gt.call(Et,Ze),qn()))},className:Z(G==null?void 0:G.actionButton,(g=v==null?void 0:v.classNames)==null?void 0:g.actionButton)},v.action.label):null))};function sb(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var wD=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:a,className:c,offset:u,theme:h="light",richColors:f,duration:g,style:y,visibleToasts:v=dD,toastOptions:w,dir:N=sb(),gap:x=mD,loadingIcon:_,icons:P,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:C,cn:F=vD}=t,[U,z]=_e.useState([]),k=_e.useMemo(()=>Array.from(new Set([n].concat(U.filter(B=>B.position).map(B=>B.position)))),[U,n]),[O,L]=_e.useState([]),[D,I]=_e.useState(!1),[M,R]=_e.useState(!1),[W,K]=_e.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),X=_e.useRef(null),ie=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),G=_e.useRef(null),oe=_e.useRef(!1),le=_e.useCallback(B=>{var Z;(Z=U.find(he=>he.id===B.id))!=null&&Z.delete||Fr.dismiss(B.id),z(he=>he.filter(({id:Ce})=>Ce!==B.id))},[U]);return _e.useEffect(()=>Fr.subscribe(B=>{if(B.dismiss){z(Z=>Z.map(he=>he.id===B.id?{...he,delete:!0}:he));return}setTimeout(()=>{Gp.flushSync(()=>{z(Z=>{let he=Z.findIndex(Ce=>Ce.id===B.id);return he!==-1?[...Z.slice(0,he),{...Z[he],...B},...Z.slice(he+1)]:[B,...Z]})})})}),[]),_e.useEffect(()=>{if(h!=="system"){K(h);return}h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?K("dark"):K("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:B})=>{K(B?"dark":"light")})},[h]),_e.useEffect(()=>{U.length<=1&&I(!1)},[U]),_e.useEffect(()=>{let B=Z=>{var he,Ce;r.every($e=>Z[$e]||Z.code===$e)&&(I(!0),(he=X.current)==null||he.focus()),Z.code==="Escape"&&(document.activeElement===X.current||(Ce=X.current)!=null&&Ce.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[r]),_e.useEffect(()=>{if(X.current)return()=>{G.current&&(G.current.focus({preventScroll:!0}),G.current=null,oe.current=!1)}},[X.current]),U.length?_e.createElement("section",{"aria-label":`${j} ${ie}`,tabIndex:-1},k.map((B,Z)=>{var he;let[Ce,$e]=B.split("-");return _e.createElement("ol",{key:B,dir:N==="auto"?sb():N,tabIndex:-1,ref:X,className:c,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":Ce,"data-x-position":$e,style:{"--front-toast-height":`${((he=O[0])==null?void 0:he.height)||0}px`,"--offset":typeof u=="number"?`${u}px`:u||hD,"--width":`${pD}px`,"--gap":`${x}px`,...y},onBlur:Ie=>{oe.current&&!Ie.currentTarget.contains(Ie.relatedTarget)&&(oe.current=!1,G.current&&(G.current.focus({preventScroll:!0}),G.current=null))},onFocus:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||oe.current||(oe.current=!0,G.current=Ie.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{M||I(!1)},onPointerDown:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||R(!0)},onPointerUp:()=>R(!1)},U.filter(Ie=>!Ie.position&&Z===0||Ie.position===B).map((Ie,we)=>{var Se,He;return _e.createElement(xD,{key:Ie.id,icons:P,index:we,toast:Ie,defaultRichColors:f,duration:(Se=w==null?void 0:w.duration)!=null?Se:g,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:e,visibleToasts:v,closeButton:(He=w==null?void 0:w.closeButton)!=null?He:a,interacting:M,position:B,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,removeToast:le,toasts:U.filter(Fe=>Fe.position==Ie.position),heights:O.filter(Fe=>Fe.position==Ie.position),setHeights:L,expandByDefault:s,gap:x,loadingIcon:_,expanded:D,pauseWhenPageIsHidden:C,cn:F})}))})):null};const _D=({...t})=>{const{theme:e="system"}=YO();return o.jsx(wD,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function ED(t,e=[]){let n=[];function r(a,c){const u=E.createContext(c),h=n.length;n=[...n,c];const f=y=>{var P;const{scope:v,children:w,...N}=y,x=((P=v==null?void 0:v[t])==null?void 0:P[h])||u,_=E.useMemo(()=>N,Object.values(N));return o.jsx(x.Provider,{value:_,children:w})};f.displayName=a+"Provider";function g(y,v){var x;const w=((x=v==null?void 0:v[t])==null?void 0:x[h])||u,N=E.useContext(w);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[f,g]}const s=()=>{const a=n.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[t])||a;return E.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[r,bD(s,...e)]}function bD(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const y=h(a)[`__scope${f}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var ND="DismissableLayer",vv="dismissableLayer.update",SD="dismissableLayer.pointerDownOutside",TD="dismissableLayer.focusOutside",ib,KS=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mx=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=t,f=E.useContext(KS),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=E.useState({}),N=jt(e,k=>y(k)),x=Array.from(f.layers),[_]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),P=x.indexOf(_),j=g?x.indexOf(g):-1,C=f.layersWithOutsidePointerEventsDisabled.size>0,F=j>=P,U=ID(k=>{const O=k.target,L=[...f.branches].some(D=>D.contains(O));!F||L||(s==null||s(k),c==null||c(k),k.defaultPrevented||u==null||u())},v),z=AD(k=>{const O=k.target;[...f.branches].some(D=>D.contains(O))||(a==null||a(k),c==null||c(k),k.defaultPrevented||u==null||u())},v);return Ax(k=>{j===f.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&u&&(k.preventDefault(),u()))},v),E.useEffect(()=>{if(g)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(ib=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),ob(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=ib)}},[g,v,n,f]),E.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),ob())},[g,f]),E.useEffect(()=>{const k=()=>w({});return document.addEventListener(vv,k),()=>document.removeEventListener(vv,k)},[]),o.jsx(Je.div,{...h,ref:N,style:{pointerEvents:C?F?"auto":"none":void 0,...t.style},onFocusCapture:qe(t.onFocusCapture,z.onFocusCapture),onBlurCapture:qe(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:qe(t.onPointerDownCapture,U.onPointerDownCapture)})});Mx.displayName=ND;var CD="DismissableLayerBranch",jD=E.forwardRef((t,e)=>{const n=E.useContext(KS),r=E.useRef(null),s=jt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(Je.div,{...t,ref:s})});jD.displayName=CD;function ID(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){GS(SD,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function AD(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=E.useRef(!1);return E.useEffect(()=>{const s=a=>{a.target&&!r.current&&GS(TD,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ob(){const t=new CustomEvent(vv);document.dispatchEvent(t)}function GS(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Qp(s,a):s.dispatchEvent(a)}var PD=tS.useId||(()=>{}),kD=0;function Ho(t){const[e,n]=E.useState(PD());return Zt(()=>{n(r=>r??String(kD++))},[t]),e?`radix-${e}`:""}const RD=["top","right","bottom","left"],ea=Math.min,Vr=Math.max,mp=Math.round,If=Math.floor,ta=t=>({x:t,y:t}),OD={left:"right",right:"left",bottom:"top",top:"bottom"},DD={start:"end",end:"start"};function xv(t,e,n){return Vr(t,ea(e,n))}function zi(t,e){return typeof t=="function"?t(e):t}function Bi(t){return t.split("-")[0]}function eu(t){return t.split("-")[1]}function Fx(t){return t==="x"?"y":"x"}function Vx(t){return t==="y"?"height":"width"}function na(t){return["top","bottom"].includes(Bi(t))?"y":"x"}function Ux(t){return Fx(na(t))}function LD(t,e,n){n===void 0&&(n=!1);const r=eu(t),s=Ux(t),a=Vx(s);let c=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=gp(c)),[c,gp(c)]}function MD(t){const e=gp(t);return[wv(t),e,wv(e)]}function wv(t){return t.replace(/start|end/g,e=>DD[e])}function FD(t,e,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],c=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?a:c;default:return[]}}function VD(t,e,n,r){const s=eu(t);let a=FD(Bi(t),n==="start",r);return s&&(a=a.map(c=>c+"-"+s),e&&(a=a.concat(a.map(wv)))),a}function gp(t){return t.replace(/left|right|bottom|top/g,e=>OD[e])}function UD(t){return{top:0,right:0,bottom:0,left:0,...t}}function QS(t){return typeof t!="number"?UD(t):{top:t,right:t,bottom:t,left:t}}function yp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function ab(t,e,n){let{reference:r,floating:s}=t;const a=na(e),c=Ux(e),u=Vx(c),h=Bi(e),f=a==="y",g=r.x+r.width/2-s.width/2,y=r.y+r.height/2-s.height/2,v=r[u]/2-s[u]/2;let w;switch(h){case"top":w={x:g,y:r.y-s.height};break;case"bottom":w={x:g,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y};break;case"left":w={x:r.x-s.width,y};break;default:w={x:r.x,y:r.y}}switch(eu(e)){case"start":w[c]-=v*(n&&f?-1:1);break;case"end":w[c]+=v*(n&&f?-1:1);break}return w}const $D=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:c}=n,u=a.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let f=await c.getElementRects({reference:t,floating:e,strategy:s}),{x:g,y}=ab(f,r,h),v=r,w={},N=0;for(let x=0;x<u.length;x++){const{name:_,fn:P}=u[x],{x:j,y:C,data:F,reset:U}=await P({x:g,y,initialPlacement:r,placement:v,strategy:s,middlewareData:w,rects:f,platform:c,elements:{reference:t,floating:e}});g=j??g,y=C??y,w={...w,[_]:{...w[_],...F}},U&&N<=50&&(N++,typeof U=="object"&&(U.placement&&(v=U.placement),U.rects&&(f=U.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:s}):U.rects),{x:g,y}=ab(f,v,h)),x=-1)}return{x:g,y,placement:v,strategy:s,middlewareData:w}};async function _d(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:c,elements:u,strategy:h}=t,{boundary:f="clippingAncestors",rootBoundary:g="viewport",elementContext:y="floating",altBoundary:v=!1,padding:w=0}=zi(e,t),N=QS(w),_=u[v?y==="floating"?"reference":"floating":y],P=yp(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(_)))==null||n?_:_.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:f,rootBoundary:g,strategy:h})),j=y==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),F=await(a.isElement==null?void 0:a.isElement(C))?await(a.getScale==null?void 0:a.getScale(C))||{x:1,y:1}:{x:1,y:1},U=yp(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:j,offsetParent:C,strategy:h}):j);return{top:(P.top-U.top+N.top)/F.y,bottom:(U.bottom-P.bottom+N.bottom)/F.y,left:(P.left-U.left+N.left)/F.x,right:(U.right-P.right+N.right)/F.x}}const zD=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:c,elements:u,middlewareData:h}=e,{element:f,padding:g=0}=zi(t,e)||{};if(f==null)return{};const y=QS(g),v={x:n,y:r},w=Ux(s),N=Vx(w),x=await c.getDimensions(f),_=w==="y",P=_?"top":"left",j=_?"bottom":"right",C=_?"clientHeight":"clientWidth",F=a.reference[N]+a.reference[w]-v[w]-a.floating[N],U=v[w]-a.reference[w],z=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f));let k=z?z[C]:0;(!k||!await(c.isElement==null?void 0:c.isElement(z)))&&(k=u.floating[C]||a.floating[N]);const O=F/2-U/2,L=k/2-x[N]/2-1,D=ea(y[P],L),I=ea(y[j],L),M=D,R=k-x[N]-I,W=k/2-x[N]/2+O,K=xv(M,W,R),X=!h.arrow&&eu(s)!=null&&W!==K&&a.reference[N]/2-(W<M?D:I)-x[N]/2<0,ie=X?W<M?W-M:W-R:0;return{[w]:v[w]+ie,data:{[w]:K,centerOffset:W-K-ie,...X&&{alignmentOffset:ie}},reset:X}}}),BD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:c,initialPlacement:u,platform:h,elements:f}=e,{mainAxis:g=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:x=!0,..._}=zi(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const P=Bi(s),j=na(u),C=Bi(u)===u,F=await(h.isRTL==null?void 0:h.isRTL(f.floating)),U=v||(C||!x?[gp(u)]:MD(u)),z=N!=="none";!v&&z&&U.push(...VD(u,x,N,F));const k=[u,...U],O=await _d(e,_),L=[];let D=((r=a.flip)==null?void 0:r.overflows)||[];if(g&&L.push(O[P]),y){const W=LD(s,c,F);L.push(O[W[0]],O[W[1]])}if(D=[...D,{placement:s,overflows:L}],!L.every(W=>W<=0)){var I,M;const W=(((I=a.flip)==null?void 0:I.index)||0)+1,K=k[W];if(K)return{data:{index:W,overflows:D},reset:{placement:K}};let X=(M=D.filter(ie=>ie.overflows[0]<=0).sort((ie,G)=>ie.overflows[1]-G.overflows[1])[0])==null?void 0:M.placement;if(!X)switch(w){case"bestFit":{var R;const ie=(R=D.filter(G=>{if(z){const oe=na(G.placement);return oe===j||oe==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(oe=>oe>0).reduce((oe,le)=>oe+le,0)]).sort((G,oe)=>G[1]-oe[1])[0])==null?void 0:R[0];ie&&(X=ie);break}case"initialPlacement":X=u;break}if(s!==X)return{reset:{placement:X}}}return{}}}};function lb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function cb(t){return RD.some(e=>t[e]>=0)}const qD=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=zi(t,e);switch(r){case"referenceHidden":{const a=await _d(e,{...s,elementContext:"reference"}),c=lb(a,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:cb(c)}}}case"escaped":{const a=await _d(e,{...s,altBoundary:!0}),c=lb(a,n.floating);return{data:{escapedOffsets:c,escaped:cb(c)}}}default:return{}}}}};async function WD(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=Bi(n),u=eu(n),h=na(n)==="y",f=["left","top"].includes(c)?-1:1,g=a&&h?-1:1,y=zi(e,t);let{mainAxis:v,crossAxis:w,alignmentAxis:N}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return u&&typeof N=="number"&&(w=u==="end"?N*-1:N),h?{x:w*g,y:v*f}:{x:v*f,y:w*g}}const HD=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:c,middlewareData:u}=e,h=await WD(e,t);return c===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+h.x,y:a+h.y,data:{...h,placement:c}}}}},KD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:u={fn:_=>{let{x:P,y:j}=_;return{x:P,y:j}}},...h}=zi(t,e),f={x:n,y:r},g=await _d(e,h),y=na(Bi(s)),v=Fx(y);let w=f[v],N=f[y];if(a){const _=v==="y"?"top":"left",P=v==="y"?"bottom":"right",j=w+g[_],C=w-g[P];w=xv(j,w,C)}if(c){const _=y==="y"?"top":"left",P=y==="y"?"bottom":"right",j=N+g[_],C=N-g[P];N=xv(j,N,C)}const x=u.fn({...e,[v]:w,[y]:N});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[v]:a,[y]:c}}}}}},GD=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:c}=e,{offset:u=0,mainAxis:h=!0,crossAxis:f=!0}=zi(t,e),g={x:n,y:r},y=na(s),v=Fx(y);let w=g[v],N=g[y];const x=zi(u,e),_=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(h){const C=v==="y"?"height":"width",F=a.reference[v]-a.floating[C]+_.mainAxis,U=a.reference[v]+a.reference[C]-_.mainAxis;w<F?w=F:w>U&&(w=U)}if(f){var P,j;const C=v==="y"?"width":"height",F=["top","left"].includes(Bi(s)),U=a.reference[y]-a.floating[C]+(F&&((P=c.offset)==null?void 0:P[y])||0)+(F?0:_.crossAxis),z=a.reference[y]+a.reference[C]+(F?0:((j=c.offset)==null?void 0:j[y])||0)-(F?_.crossAxis:0);N<U?N=U:N>z&&(N=z)}return{[v]:w,[y]:N}}}},QD=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:c,elements:u}=e,{apply:h=()=>{},...f}=zi(t,e),g=await _d(e,f),y=Bi(s),v=eu(s),w=na(s)==="y",{width:N,height:x}=a.floating;let _,P;y==="top"||y==="bottom"?(_=y,P=v===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(P=y,_=v==="end"?"top":"bottom");const j=x-g.top-g.bottom,C=N-g.left-g.right,F=ea(x-g[_],j),U=ea(N-g[P],C),z=!e.middlewareData.shift;let k=F,O=U;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(O=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=j),z&&!v){const D=Vr(g.left,0),I=Vr(g.right,0),M=Vr(g.top,0),R=Vr(g.bottom,0);w?O=N-2*(D!==0||I!==0?D+I:Vr(g.left,g.right)):k=x-2*(M!==0||R!==0?M+R:Vr(g.top,g.bottom))}await h({...e,availableWidth:O,availableHeight:k});const L=await c.getDimensions(u.floating);return N!==L.width||x!==L.height?{reset:{rects:!0}}:{}}}};function Jp(){return typeof window<"u"}function tu(t){return YS(t)?(t.nodeName||"").toLowerCase():"#document"}function $r(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function fi(t){var e;return(e=(YS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function YS(t){return Jp()?t instanceof Node||t instanceof $r(t).Node:!1}function Is(t){return Jp()?t instanceof Element||t instanceof $r(t).Element:!1}function ci(t){return Jp()?t instanceof HTMLElement||t instanceof $r(t).HTMLElement:!1}function ub(t){return!Jp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $r(t).ShadowRoot}function Kd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=As(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function YD(t){return["table","td","th"].includes(tu(t))}function Zp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function $x(t){const e=zx(),n=Is(t)?As(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function XD(t){let e=ra(t);for(;ci(e)&&!$c(e);){if($x(e))return e;if(Zp(e))return null;e=ra(e)}return null}function zx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $c(t){return["html","body","#document"].includes(tu(t))}function As(t){return $r(t).getComputedStyle(t)}function em(t){return Is(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ra(t){if(tu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ub(t)&&t.host||fi(t);return ub(e)?e.host:e}function XS(t){const e=ra(t);return $c(e)?t.ownerDocument?t.ownerDocument.body:t.body:ci(e)&&Kd(e)?e:XS(e)}function Ed(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=XS(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),c=$r(s);if(a){const u=_v(c);return e.concat(c,c.visualViewport||[],Kd(s)?s:[],u&&n?Ed(u):[])}return e.concat(s,Ed(s,[],n))}function _v(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function JS(t){const e=As(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ci(t),a=s?t.offsetWidth:n,c=s?t.offsetHeight:r,u=mp(n)!==a||mp(r)!==c;return u&&(n=a,r=c),{width:n,height:r,$:u}}function Bx(t){return Is(t)?t:t.contextElement}function vc(t){const e=Bx(t);if(!ci(e))return ta(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=JS(e);let c=(a?mp(n.width):n.width)/r,u=(a?mp(n.height):n.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const JD=ta(0);function ZS(t){const e=$r(t);return!zx()||!e.visualViewport?JD:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ZD(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==$r(t)?!1:e}function el(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=Bx(t);let c=ta(1);e&&(r?Is(r)&&(c=vc(r)):c=vc(t));const u=ZD(a,n,r)?ZS(a):ta(0);let h=(s.left+u.x)/c.x,f=(s.top+u.y)/c.y,g=s.width/c.x,y=s.height/c.y;if(a){const v=$r(a),w=r&&Is(r)?$r(r):r;let N=v,x=_v(N);for(;x&&r&&w!==N;){const _=vc(x),P=x.getBoundingClientRect(),j=As(x),C=P.left+(x.clientLeft+parseFloat(j.paddingLeft))*_.x,F=P.top+(x.clientTop+parseFloat(j.paddingTop))*_.y;h*=_.x,f*=_.y,g*=_.x,y*=_.y,h+=C,f+=F,N=$r(x),x=_v(N)}}return yp({width:g,height:y,x:h,y:f})}function eL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",c=fi(r),u=e?Zp(e.floating):!1;if(r===c||u&&a)return n;let h={scrollLeft:0,scrollTop:0},f=ta(1);const g=ta(0),y=ci(r);if((y||!y&&!a)&&((tu(r)!=="body"||Kd(c))&&(h=em(r)),ci(r))){const v=el(r);f=vc(r),g.x=v.x+r.clientLeft,g.y=v.y+r.clientTop}return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-h.scrollLeft*f.x+g.x,y:n.y*f.y-h.scrollTop*f.y+g.y}}function tL(t){return Array.from(t.getClientRects())}function Ev(t,e){const n=em(t).scrollLeft;return e?e.left+n:el(fi(t)).left+n}function nL(t){const e=fi(t),n=em(t),r=t.ownerDocument.body,s=Vr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Vr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-n.scrollLeft+Ev(t);const u=-n.scrollTop;return As(r).direction==="rtl"&&(c+=Vr(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:c,y:u}}function rL(t,e){const n=$r(t),r=fi(t),s=n.visualViewport;let a=r.clientWidth,c=r.clientHeight,u=0,h=0;if(s){a=s.width,c=s.height;const f=zx();(!f||f&&e==="fixed")&&(u=s.offsetLeft,h=s.offsetTop)}return{width:a,height:c,x:u,y:h}}function sL(t,e){const n=el(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=ci(t)?vc(t):ta(1),c=t.clientWidth*a.x,u=t.clientHeight*a.y,h=s*a.x,f=r*a.y;return{width:c,height:u,x:h,y:f}}function db(t,e,n){let r;if(e==="viewport")r=rL(t,n);else if(e==="document")r=nL(fi(t));else if(Is(e))r=sL(e,n);else{const s=ZS(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return yp(r)}function eT(t,e){const n=ra(t);return n===e||!Is(n)||$c(n)?!1:As(n).position==="fixed"||eT(n,e)}function iL(t,e){const n=e.get(t);if(n)return n;let r=Ed(t,[],!1).filter(u=>Is(u)&&tu(u)!=="body"),s=null;const a=As(t).position==="fixed";let c=a?ra(t):t;for(;Is(c)&&!$c(c);){const u=As(c),h=$x(c);!h&&u.position==="fixed"&&(s=null),(a?!h&&!s:!h&&u.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Kd(c)&&!h&&eT(t,c))?r=r.filter(g=>g!==c):s=u,c=ra(c)}return e.set(t,r),r}function oL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const c=[...n==="clippingAncestors"?Zp(e)?[]:iL(e,this._c):[].concat(n),r],u=c[0],h=c.reduce((f,g)=>{const y=db(e,g,s);return f.top=Vr(y.top,f.top),f.right=ea(y.right,f.right),f.bottom=ea(y.bottom,f.bottom),f.left=Vr(y.left,f.left),f},db(e,u,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function aL(t){const{width:e,height:n}=JS(t);return{width:e,height:n}}function lL(t,e,n){const r=ci(e),s=fi(e),a=n==="fixed",c=el(t,!0,a,e);let u={scrollLeft:0,scrollTop:0};const h=ta(0);if(r||!r&&!a)if((tu(e)!=="body"||Kd(s))&&(u=em(e)),r){const w=el(e,!0,a,e);h.x=w.x+e.clientLeft,h.y=w.y+e.clientTop}else s&&(h.x=Ev(s));let f=0,g=0;if(s&&!r&&!a){const w=s.getBoundingClientRect();g=w.top+u.scrollTop,f=w.left+u.scrollLeft-Ev(s,w)}const y=c.left+u.scrollLeft-h.x-f,v=c.top+u.scrollTop-h.y-g;return{x:y,y:v,width:c.width,height:c.height}}function Iy(t){return As(t).position==="static"}function hb(t,e){if(!ci(t)||As(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return fi(t)===n&&(n=n.ownerDocument.body),n}function tT(t,e){const n=$r(t);if(Zp(t))return n;if(!ci(t)){let s=ra(t);for(;s&&!$c(s);){if(Is(s)&&!Iy(s))return s;s=ra(s)}return n}let r=hb(t,e);for(;r&&YD(r)&&Iy(r);)r=hb(r,e);return r&&$c(r)&&Iy(r)&&!$x(r)?n:r||XD(t)||n}const cL=async function(t){const e=this.getOffsetParent||tT,n=this.getDimensions,r=await n(t.floating);return{reference:lL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function uL(t){return As(t).direction==="rtl"}const dL={convertOffsetParentRelativeRectToViewportRelativeRect:eL,getDocumentElement:fi,getClippingRect:oL,getOffsetParent:tT,getElementRects:cL,getClientRects:tL,getDimensions:aL,getScale:vc,isElement:Is,isRTL:uL};function hL(t,e){let n=null,r;const s=fi(t);function a(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function c(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),a();const{left:f,top:g,width:y,height:v}=t.getBoundingClientRect();if(u||e(),!y||!v)return;const w=If(g),N=If(s.clientWidth-(f+y)),x=If(s.clientHeight-(g+v)),_=If(f),j={rootMargin:-w+"px "+-N+"px "+-x+"px "+-_+"px",threshold:Vr(0,ea(1,h))||1};let C=!0;function F(U){const z=U[0].intersectionRatio;if(z!==h){if(!C)return c();z?c(!1,z):r=setTimeout(()=>{c(!1,1e-7)},1e3)}C=!1}try{n=new IntersectionObserver(F,{...j,root:s.ownerDocument})}catch{n=new IntersectionObserver(F,j)}n.observe(t)}return c(!0),a}function fL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,f=Bx(t),g=s||a?[...f?Ed(f):[],...Ed(e)]:[];g.forEach(P=>{s&&P.addEventListener("scroll",n,{passive:!0}),a&&P.addEventListener("resize",n)});const y=f&&u?hL(f,n):null;let v=-1,w=null;c&&(w=new ResizeObserver(P=>{let[j]=P;j&&j.target===f&&w&&(w.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var C;(C=w)==null||C.observe(e)})),n()}),f&&!h&&w.observe(f),w.observe(e));let N,x=h?el(t):null;h&&_();function _(){const P=el(t);x&&(P.x!==x.x||P.y!==x.y||P.width!==x.width||P.height!==x.height)&&n(),x=P,N=requestAnimationFrame(_)}return n(),()=>{var P;g.forEach(j=>{s&&j.removeEventListener("scroll",n),a&&j.removeEventListener("resize",n)}),y==null||y(),(P=w)==null||P.disconnect(),w=null,h&&cancelAnimationFrame(N)}}const pL=HD,mL=KD,gL=BD,yL=QD,vL=qD,fb=zD,xL=GD,wL=(t,e,n)=>{const r=new Map,s={platform:dL,...n},a={...s.platform,_c:r};return $D(t,e,{...s,platform:a})};var Gf=typeof document<"u"?E.useLayoutEffect:E.useEffect;function vp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!vp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!vp(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function nT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function pb(t,e){const n=nT(t);return Math.round(e*n)/n}function Ay(t){const e=E.useRef(t);return Gf(()=>{e.current=t}),e}function _L(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:c}={},transform:u=!0,whileElementsMounted:h,open:f}=t,[g,y]=E.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,w]=E.useState(r);vp(v,r)||w(r);const[N,x]=E.useState(null),[_,P]=E.useState(null),j=E.useCallback(G=>{G!==z.current&&(z.current=G,x(G))},[]),C=E.useCallback(G=>{G!==k.current&&(k.current=G,P(G))},[]),F=a||N,U=c||_,z=E.useRef(null),k=E.useRef(null),O=E.useRef(g),L=h!=null,D=Ay(h),I=Ay(s),M=Ay(f),R=E.useCallback(()=>{if(!z.current||!k.current)return;const G={placement:e,strategy:n,middleware:v};I.current&&(G.platform=I.current),wL(z.current,k.current,G).then(oe=>{const le={...oe,isPositioned:M.current!==!1};W.current&&!vp(O.current,le)&&(O.current=le,dl.flushSync(()=>{y(le)}))})},[v,e,n,I,M]);Gf(()=>{f===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,y(G=>({...G,isPositioned:!1})))},[f]);const W=E.useRef(!1);Gf(()=>(W.current=!0,()=>{W.current=!1}),[]),Gf(()=>{if(F&&(z.current=F),U&&(k.current=U),F&&U){if(D.current)return D.current(F,U,R);R()}},[F,U,R,D,L]);const K=E.useMemo(()=>({reference:z,floating:k,setReference:j,setFloating:C}),[j,C]),X=E.useMemo(()=>({reference:F,floating:U}),[F,U]),ie=E.useMemo(()=>{const G={position:n,left:0,top:0};if(!X.floating)return G;const oe=pb(X.floating,g.x),le=pb(X.floating,g.y);return u?{...G,transform:"translate("+oe+"px, "+le+"px)",...nT(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:oe,top:le}},[n,u,X.floating,g.x,g.y]);return E.useMemo(()=>({...g,update:R,refs:K,elements:X,floatingStyles:ie}),[g,R,K,X,ie])}const EL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?fb({element:r.current,padding:s}).fn(n):{}:r?fb({element:r,padding:s}).fn(n):{}}}},bL=(t,e)=>({...pL(t),options:[t,e]}),NL=(t,e)=>({...mL(t),options:[t,e]}),SL=(t,e)=>({...xL(t),options:[t,e]}),TL=(t,e)=>({...gL(t),options:[t,e]}),CL=(t,e)=>({...yL(t),options:[t,e]}),jL=(t,e)=>({...vL(t),options:[t,e]}),IL=(t,e)=>({...EL(t),options:[t,e]});var AL="Arrow",rT=E.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return o.jsx(Je.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});rT.displayName=AL;var PL=rT;function sT(t){const[e,n]=E.useState(void 0);return Zt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let c,u;if("borderBoxSize"in a){const h=a.borderBoxSize,f=Array.isArray(h)?h[0]:h;c=f.inlineSize,u=f.blockSize}else c=t.offsetWidth,u=t.offsetHeight;n({width:c,height:u})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var qx="Popper",[iT,tm]=Gi(qx),[kL,oT]=iT(qx),aT=t=>{const{__scopePopper:e,children:n}=t,[r,s]=E.useState(null);return o.jsx(kL,{scope:e,anchor:r,onAnchorChange:s,children:n})};aT.displayName=qx;var lT="PopperAnchor",cT=E.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=oT(lT,n),c=E.useRef(null),u=jt(e,c);return E.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:o.jsx(Je.div,{...s,ref:u})});cT.displayName=lT;var Wx="PopperContent",[RL,OL]=iT(Wx),uT=E.forwardRef((t,e)=>{var we,Se,He,Fe,st,it;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:f=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:w="optimized",onPlaced:N,...x}=t,_=oT(Wx,n),[P,j]=E.useState(null),C=jt(e,ve=>j(ve)),[F,U]=E.useState(null),z=sT(F),k=(z==null?void 0:z.width)??0,O=(z==null?void 0:z.height)??0,L=r+(a!=="center"?"-"+a:""),D=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},I=Array.isArray(f)?f:[f],M=I.length>0,R={padding:D,boundary:I.filter(LL),altBoundary:M},{refs:W,floatingStyles:K,placement:X,isPositioned:ie,middlewareData:G}=_L({strategy:"fixed",placement:L,whileElementsMounted:(...ve)=>fL(...ve,{animationFrame:w==="always"}),elements:{reference:_.anchor},middleware:[bL({mainAxis:s+O,alignmentAxis:c}),h&&NL({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?SL():void 0,...R}),h&&TL({...R}),CL({...R,apply:({elements:ve,rects:je,availableWidth:mt,availableHeight:an})=>{const{width:zn,height:jr}=je.reference,Lt=ve.floating.style;Lt.setProperty("--radix-popper-available-width",`${mt}px`),Lt.setProperty("--radix-popper-available-height",`${an}px`),Lt.setProperty("--radix-popper-anchor-width",`${zn}px`),Lt.setProperty("--radix-popper-anchor-height",`${jr}px`)}}),F&&IL({element:F,padding:u}),ML({arrowWidth:k,arrowHeight:O}),v&&jL({strategy:"referenceHidden",...R})]}),[oe,le]=fT(X),B=jn(N);Zt(()=>{ie&&(B==null||B())},[ie,B]);const Z=(we=G.arrow)==null?void 0:we.x,he=(Se=G.arrow)==null?void 0:Se.y,Ce=((He=G.arrow)==null?void 0:He.centerOffset)!==0,[$e,Ie]=E.useState();return Zt(()=>{P&&Ie(window.getComputedStyle(P).zIndex)},[P]),o.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:ie?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$e,"--radix-popper-transform-origin":[(Fe=G.transformOrigin)==null?void 0:Fe.x,(st=G.transformOrigin)==null?void 0:st.y].join(" "),...((it=G.hide)==null?void 0:it.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(RL,{scope:n,placedSide:oe,onArrowChange:U,arrowX:Z,arrowY:he,shouldHideArrow:Ce,children:o.jsx(Je.div,{"data-side":oe,"data-align":le,...x,ref:C,style:{...x.style,animation:ie?void 0:"none"}})})})});uT.displayName=Wx;var dT="PopperArrow",DL={top:"bottom",right:"left",bottom:"top",left:"right"},hT=E.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=OL(dT,r),c=DL[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(PL,{...s,ref:n,style:{...s.style,display:"block"}})})});hT.displayName=dT;function LL(t){return t!==null}var ML=t=>({name:"transformOrigin",options:t,fn(e){var _,P,j;const{placement:n,rects:r,middlewareData:s}=e,c=((_=s.arrow)==null?void 0:_.centerOffset)!==0,u=c?0:t.arrowWidth,h=c?0:t.arrowHeight,[f,g]=fT(n),y={start:"0%",center:"50%",end:"100%"}[g],v=(((P=s.arrow)==null?void 0:P.x)??0)+u/2,w=(((j=s.arrow)==null?void 0:j.y)??0)+h/2;let N="",x="";return f==="bottom"?(N=c?y:`${v}px`,x=`${-h}px`):f==="top"?(N=c?y:`${v}px`,x=`${r.floating.height+h}px`):f==="right"?(N=`${-h}px`,x=c?y:`${w}px`):f==="left"&&(N=`${r.floating.width+h}px`,x=c?y:`${w}px`),{data:{x:N,y:x}}}});function fT(t){const[e,n="center"]=t.split("-");return[e,n]}var FL=aT,pT=cT,mT=uT,gT=hT,VL="Portal",yT=E.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,a]=E.useState(!1);Zt(()=>a(!0),[]);const c=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Gp.createPortal(o.jsx(Je.div,{...r,ref:e}),c):null});yT.displayName=VL;function UL(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var vT=t=>{const{present:e,children:n}=t,r=$L(e),s=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),a=jt(r.ref,zL(s));return typeof n=="function"||r.isPresent?E.cloneElement(s,{ref:a}):null};vT.displayName="Presence";function $L(t){const[e,n]=E.useState(),r=E.useRef({}),s=E.useRef(t),a=E.useRef("none"),c=t?"mounted":"unmounted",[u,h]=UL(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const f=Af(r.current);a.current=u==="mounted"?f:"none"},[u]),Zt(()=>{const f=r.current,g=s.current;if(g!==t){const v=a.current,w=Af(f);t?h("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(g&&v!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),Zt(()=>{if(e){let f;const g=e.ownerDocument.defaultView??window,y=w=>{const x=Af(r.current).includes(w.animationName);if(w.target===e&&x&&(h("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",f=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},v=w=>{w.target===e&&(a.current=Af(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function Af(t){return(t==null?void 0:t.animationName)||"none"}function zL(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var[nm,eW]=ED("Tooltip",[tm]),Hx=tm(),xT="TooltipProvider",BL=700,mb="tooltip.open",[qL,wT]=nm(xT),_T=t=>{const{__scopeTooltip:e,delayDuration:n=BL,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=t,[c,u]=E.useState(!0),h=E.useRef(!1),f=E.useRef(0);return E.useEffect(()=>{const g=f.current;return()=>window.clearTimeout(g)},[]),o.jsx(qL,{scope:e,isOpenDelayed:c,delayDuration:n,onOpen:E.useCallback(()=>{window.clearTimeout(f.current),u(!1)},[]),onClose:E.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:h,onPointerInTransitChange:E.useCallback(g=>{h.current=g},[]),disableHoverableContent:s,children:a})};_T.displayName=xT;var ET="Tooltip",[tW,rm]=nm(ET),bv="TooltipTrigger",WL=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=rm(bv,n),a=wT(bv,n),c=Hx(n),u=E.useRef(null),h=jt(e,u,s.onTriggerChange),f=E.useRef(!1),g=E.useRef(!1),y=E.useCallback(()=>f.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),o.jsx(pT,{asChild:!0,...c,children:o.jsx(Je.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:h,onPointerMove:qe(t.onPointerMove,v=>{v.pointerType!=="touch"&&!g.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),g.current=!0)}),onPointerLeave:qe(t.onPointerLeave,()=>{s.onTriggerLeave(),g.current=!1}),onPointerDown:qe(t.onPointerDown,()=>{f.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:qe(t.onFocus,()=>{f.current||s.onOpen()}),onBlur:qe(t.onBlur,s.onClose),onClick:qe(t.onClick,s.onClose)})})});WL.displayName=bv;var HL="TooltipPortal",[nW,KL]=nm(HL,{forceMount:void 0}),zc="TooltipContent",bT=E.forwardRef((t,e)=>{const n=KL(zc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=t,c=rm(zc,t.__scopeTooltip);return o.jsx(vT,{present:r||c.open,children:c.disableHoverableContent?o.jsx(NT,{side:s,...a,ref:e}):o.jsx(GL,{side:s,...a,ref:e})})}),GL=E.forwardRef((t,e)=>{const n=rm(zc,t.__scopeTooltip),r=wT(zc,t.__scopeTooltip),s=E.useRef(null),a=jt(e,s),[c,u]=E.useState(null),{trigger:h,onClose:f}=n,g=s.current,{onPointerInTransitChange:y}=r,v=E.useCallback(()=>{u(null),y(!1)},[y]),w=E.useCallback((N,x)=>{const _=N.currentTarget,P={x:N.clientX,y:N.clientY},j=JL(P,_.getBoundingClientRect()),C=ZL(P,j),F=eM(x.getBoundingClientRect()),U=nM([...C,...F]);u(U),y(!0)},[y]);return E.useEffect(()=>()=>v(),[v]),E.useEffect(()=>{if(h&&g){const N=_=>w(_,g),x=_=>w(_,h);return h.addEventListener("pointerleave",N),g.addEventListener("pointerleave",x),()=>{h.removeEventListener("pointerleave",N),g.removeEventListener("pointerleave",x)}}},[h,g,w,v]),E.useEffect(()=>{if(c){const N=x=>{const _=x.target,P={x:x.clientX,y:x.clientY},j=(h==null?void 0:h.contains(_))||(g==null?void 0:g.contains(_)),C=!tM(P,c);j?v():C&&(v(),f())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[h,g,c,f,v]),o.jsx(NT,{...t,ref:a})}),[QL,YL]=nm(ET,{isInside:!1}),NT=E.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:c,...u}=t,h=rm(zc,n),f=Hx(n),{onClose:g}=h;return E.useEffect(()=>(document.addEventListener(mb,g),()=>document.removeEventListener(mb,g)),[g]),E.useEffect(()=>{if(h.trigger){const y=v=>{const w=v.target;w!=null&&w.contains(h.trigger)&&g()};return window.addEventListener("scroll",y,{capture:!0}),()=>window.removeEventListener("scroll",y,{capture:!0})}},[h.trigger,g]),o.jsx(Mx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:y=>y.preventDefault(),onDismiss:g,children:o.jsxs(mT,{"data-state":h.stateAttribute,...f,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(sS,{children:r}),o.jsx(QL,{scope:n,isInside:!0,children:o.jsx(x2,{id:h.contentId,role:"tooltip",children:s||r})})]})})});bT.displayName=zc;var ST="TooltipArrow",XL=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Hx(n);return YL(ST,n).isInside?null:o.jsx(gT,{...s,...r,ref:e})});XL.displayName=ST;function JL(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ZL(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function eM(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function tM(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const u=e[a].x,h=e[a].y,f=e[c].x,g=e[c].y;h>r!=g>r&&n<(f-u)*(r-h)/(g-h)+u&&(s=!s)}return s}function nM(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),rM(e)}function rM(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const a=e[e.length-1],c=e[e.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const a=n[n.length-1],c=n[n.length-2];if((a.x-c.x)*(s.y-c.y)>=(a.y-c.y)*(s.x-c.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var sM=_T,TT=bT;const iM=sM,oM=E.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(TT,{ref:r,sideOffset:e,className:Ge("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));oM.displayName=TT.displayName;var Gd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tl=typeof window>"u"||"Deno"in globalThis;function _r(){}function aM(t,e){return typeof t=="function"?t(e):t}function Nv(t){return typeof t=="number"&&t>=0&&t!==1/0}function CT(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ko(t,e){return typeof t=="function"?t(e):t}function bs(t,e){return typeof t=="function"?t(e):t}function gb(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:c,stale:u}=t;if(c){if(r){if(e.queryHash!==Kx(c,e.options))return!1}else if(!Nd(e.queryKey,c))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function yb(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(bd(e.options.mutationKey)!==bd(a))return!1}else if(!Nd(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Kx(t,e){return((e==null?void 0:e.queryKeyHashFn)||bd)(t)}function bd(t){return JSON.stringify(t,(e,n)=>Tv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Nd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Nd(t[n],e[n])):!1}function jT(t,e){if(t===e)return t;const n=vb(t)&&vb(e);if(n||Tv(t)&&Tv(e)){const r=n?t:Object.keys(t),s=r.length,a=n?e:Object.keys(e),c=a.length,u=n?[]:{},h=new Set(r);let f=0;for(let g=0;g<c;g++){const y=n?g:a[g];(!n&&h.has(y)||n)&&t[y]===void 0&&e[y]===void 0?(u[y]=void 0,f++):(u[y]=jT(t[y],e[y]),u[y]===t[y]&&t[y]!==void 0&&f++)}return s===c&&f===s?t:u}return e}function Sv(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function vb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Tv(t){if(!xb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!xb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function xb(t){return Object.prototype.toString.call(t)==="[object Object]"}function lM(t){return new Promise(e=>{setTimeout(e,t)})}function Cv(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?jT(t,e):e}function cM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function uM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Gx=Symbol();function IT(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Gx?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function dM(t,e){return typeof t=="function"?t(...e):!!t}var Va,Lo,Cc,W1,hM=(W1=class extends Gd{constructor(){super();nt(this,Va);nt(this,Lo);nt(this,Cc);De(this,Cc,e=>{if(!tl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Y(this,Lo)||this.setEventListener(Y(this,Cc))}onUnsubscribe(){var e;this.hasListeners()||((e=Y(this,Lo))==null||e.call(this),De(this,Lo,void 0))}setEventListener(e){var n;De(this,Cc,e),(n=Y(this,Lo))==null||n.call(this),De(this,Lo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Y(this,Va)!==e&&(De(this,Va,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Y(this,Va)=="boolean"?Y(this,Va):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Va=new WeakMap,Lo=new WeakMap,Cc=new WeakMap,W1),Qx=new hM,jc,Mo,Ic,H1,fM=(H1=class extends Gd{constructor(){super();nt(this,jc,!0);nt(this,Mo);nt(this,Ic);De(this,Ic,e=>{if(!tl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Y(this,Mo)||this.setEventListener(Y(this,Ic))}onUnsubscribe(){var e;this.hasListeners()||((e=Y(this,Mo))==null||e.call(this),De(this,Mo,void 0))}setEventListener(e){var n;De(this,Ic,e),(n=Y(this,Mo))==null||n.call(this),De(this,Mo,e(this.setOnline.bind(this)))}setOnline(e){Y(this,jc)!==e&&(De(this,jc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Y(this,jc)}},jc=new WeakMap,Mo=new WeakMap,Ic=new WeakMap,H1),xp=new fM;function jv(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function pM(t){return Math.min(1e3*2**t,3e4)}function AT(t){return(t??"online")==="online"?xp.isOnline():!0}var PT=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Py(t){return t instanceof PT}function kT(t){let e=!1,n=0,r=!1,s;const a=jv(),c=x=>{var _;r||(v(new PT(x)),(_=t.abort)==null||_.call(t))},u=()=>{e=!0},h=()=>{e=!1},f=()=>Qx.isFocused()&&(t.networkMode==="always"||xp.isOnline())&&t.canRun(),g=()=>AT(t.networkMode)&&t.canRun(),y=x=>{var _;r||(r=!0,(_=t.onSuccess)==null||_.call(t,x),s==null||s(),a.resolve(x))},v=x=>{var _;r||(r=!0,(_=t.onError)==null||_.call(t,x),s==null||s(),a.reject(x))},w=()=>new Promise(x=>{var _;s=P=>{(r||f())&&x(P)},(_=t.onPause)==null||_.call(t)}).then(()=>{var x;s=void 0,r||(x=t.onContinue)==null||x.call(t)}),N=()=>{if(r)return;let x;const _=n===0?t.initialPromise:void 0;try{x=_??t.fn()}catch(P){x=Promise.reject(P)}Promise.resolve(x).then(y).catch(P=>{var z;if(r)return;const j=t.retry??(tl?0:3),C=t.retryDelay??pM,F=typeof C=="function"?C(n,P):C,U=j===!0||typeof j=="number"&&n<j||typeof j=="function"&&j(n,P);if(e||!U){v(P);return}n++,(z=t.onFail)==null||z.call(t,n,P),lM(F).then(()=>f()?void 0:w()).then(()=>{e?v(P):N()})})};return{promise:a,cancel:c,continue:()=>(s==null||s(),a),cancelRetry:u,continueRetry:h,canStart:g,start:()=>(g()?N():w().then(N),a)}}var mM=t=>setTimeout(t,0);function gM(){let t=[],e=0,n=u=>{u()},r=u=>{u()},s=mM;const a=u=>{e?t.push(u):s(()=>{n(u)})},c=()=>{const u=t;t=[],u.length&&s(()=>{r(()=>{u.forEach(h=>{n(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||c()}return h},batchCalls:u=>(...h)=>{a(()=>{u(...h)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Vn=gM(),Ua,K1,RT=(K1=class{constructor(){nt(this,Ua)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Nv(this.gcTime)&&De(this,Ua,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(tl?1/0:5*60*1e3))}clearGcTimeout(){Y(this,Ua)&&(clearTimeout(Y(this,Ua)),De(this,Ua,void 0))}},Ua=new WeakMap,K1),Ac,$a,Jr,za,Yn,$d,Ba,_s,Ri,G1,yM=(G1=class extends RT{constructor(n){super();nt(this,_s);nt(this,Ac);nt(this,$a);nt(this,Jr);nt(this,za);nt(this,Yn);nt(this,$d);nt(this,Ba);De(this,Ba,!1),De(this,$d,n.defaultOptions),this.setOptions(n.options),this.observers=[],De(this,za,n.client),De(this,Jr,Y(this,za).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,De(this,Ac,vM(this.options)),this.state=n.state??Y(this,Ac),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Y(this,Yn))==null?void 0:n.promise}setOptions(n){this.options={...Y(this,$d),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Y(this,Jr).remove(this)}setData(n,r){const s=Cv(this.state.data,n,this.options);return xt(this,_s,Ri).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){xt(this,_s,Ri).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=Y(this,Yn))==null?void 0:s.promise;return(a=Y(this,Yn))==null||a.cancel(n),r?r.then(_r).catch(_r):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Y(this,Ac))}isActive(){return this.observers.some(n=>bs(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Ko(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!CT(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Y(this,Yn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Y(this,Yn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Y(this,Jr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Y(this,Yn)&&(Y(this,Ba)?Y(this,Yn).cancel({revert:!0}):Y(this,Yn).cancelRetry()),this.scheduleGc()),Y(this,Jr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xt(this,_s,Ri).call(this,{type:"invalidate"})}fetch(n,r){var g,y,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Y(this,Yn))return Y(this,Yn).continueRetry(),Y(this,Yn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const w=this.observers.find(N=>N.options.queryFn);w&&this.setOptions(w.options)}const s=new AbortController,a=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(De(this,Ba,!0),s.signal)})},c=()=>{const w=IT(this.options,r),x=(()=>{const _={client:Y(this,za),queryKey:this.queryKey,meta:this.meta};return a(_),_})();return De(this,Ba,!1),this.options.persister?this.options.persister(w,x,this):w(x)},h=(()=>{const w={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Y(this,za),state:this.state,fetchFn:c};return a(w),w})();(g=this.options.behavior)==null||g.onFetch(h,this),De(this,$a,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=h.fetchOptions)==null?void 0:y.meta))&&xt(this,_s,Ri).call(this,{type:"fetch",meta:(v=h.fetchOptions)==null?void 0:v.meta});const f=w=>{var N,x,_,P;Py(w)&&w.silent||xt(this,_s,Ri).call(this,{type:"error",error:w}),Py(w)||((x=(N=Y(this,Jr).config).onError)==null||x.call(N,w,this),(P=(_=Y(this,Jr).config).onSettled)==null||P.call(_,this.state.data,w,this)),this.scheduleGc()};return De(this,Yn,kT({initialPromise:r==null?void 0:r.initialPromise,fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:w=>{var N,x,_,P;if(w===void 0){f(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(w)}catch(j){f(j);return}(x=(N=Y(this,Jr).config).onSuccess)==null||x.call(N,w,this),(P=(_=Y(this,Jr).config).onSettled)==null||P.call(_,w,this.state.error,this),this.scheduleGc()},onError:f,onFail:(w,N)=>{xt(this,_s,Ri).call(this,{type:"failed",failureCount:w,error:N})},onPause:()=>{xt(this,_s,Ri).call(this,{type:"pause"})},onContinue:()=>{xt(this,_s,Ri).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0})),Y(this,Yn).start()}},Ac=new WeakMap,$a=new WeakMap,Jr=new WeakMap,za=new WeakMap,Yn=new WeakMap,$d=new WeakMap,Ba=new WeakMap,_s=new WeakSet,Ri=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...OT(s.data,this.options),fetchMeta:n.meta??null};case"success":return De(this,$a,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=n.error;return Py(a)&&a.revert&&Y(this,$a)?{...Y(this,$a),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Vn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Y(this,Jr).notify({query:this,type:"updated",action:n})})},G1);function OT(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:AT(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function vM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Zs,Q1,xM=(Q1=class extends Gd{constructor(e={}){super();nt(this,Zs);this.config=e,De(this,Zs,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??Kx(s,n);let c=this.get(a);return c||(c=new yM({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){Y(this,Zs).has(e.queryHash)||(Y(this,Zs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Y(this,Zs).get(e.queryHash);n&&(e.destroy(),n===e&&Y(this,Zs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Y(this,Zs).get(e)}getAll(){return[...Y(this,Zs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>gb(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>gb(e,r)):n}notify(e){Vn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Vn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Zs=new WeakMap,Q1),ei,ir,qa,ti,Io,Y1,wM=(Y1=class extends RT{constructor(n){super();nt(this,ti);nt(this,ei);nt(this,ir);nt(this,qa);this.mutationId=n.mutationId,De(this,ir,n.mutationCache),De(this,ei,[]),this.state=n.state||_M(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Y(this,ei).includes(n)||(Y(this,ei).push(n),this.clearGcTimeout(),Y(this,ir).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){De(this,ei,Y(this,ei).filter(r=>r!==n)),this.scheduleGc(),Y(this,ir).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Y(this,ei).length||(this.state.status==="pending"?this.scheduleGc():Y(this,ir).remove(this))}continue(){var n;return((n=Y(this,qa))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var c,u,h,f,g,y,v,w,N,x,_,P,j,C,F,U,z,k,O,L;const r=()=>{xt(this,ti,Io).call(this,{type:"continue"})};De(this,qa,kT({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(D,I)=>{xt(this,ti,Io).call(this,{type:"failed",failureCount:D,error:I})},onPause:()=>{xt(this,ti,Io).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Y(this,ir).canRun(this)}));const s=this.state.status==="pending",a=!Y(this,qa).canStart();try{if(s)r();else{xt(this,ti,Io).call(this,{type:"pending",variables:n,isPaused:a}),await((u=(c=Y(this,ir).config).onMutate)==null?void 0:u.call(c,n,this));const I=await((f=(h=this.options).onMutate)==null?void 0:f.call(h,n));I!==this.state.context&&xt(this,ti,Io).call(this,{type:"pending",context:I,variables:n,isPaused:a})}const D=await Y(this,qa).start();return await((y=(g=Y(this,ir).config).onSuccess)==null?void 0:y.call(g,D,n,this.state.context,this)),await((w=(v=this.options).onSuccess)==null?void 0:w.call(v,D,n,this.state.context)),await((x=(N=Y(this,ir).config).onSettled)==null?void 0:x.call(N,D,null,this.state.variables,this.state.context,this)),await((P=(_=this.options).onSettled)==null?void 0:P.call(_,D,null,n,this.state.context)),xt(this,ti,Io).call(this,{type:"success",data:D}),D}catch(D){try{throw await((C=(j=Y(this,ir).config).onError)==null?void 0:C.call(j,D,n,this.state.context,this)),await((U=(F=this.options).onError)==null?void 0:U.call(F,D,n,this.state.context)),await((k=(z=Y(this,ir).config).onSettled)==null?void 0:k.call(z,void 0,D,this.state.variables,this.state.context,this)),await((L=(O=this.options).onSettled)==null?void 0:L.call(O,void 0,D,n,this.state.context)),D}finally{xt(this,ti,Io).call(this,{type:"error",error:D})}}finally{Y(this,ir).runNext(this)}}},ei=new WeakMap,ir=new WeakMap,qa=new WeakMap,ti=new WeakSet,Io=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Vn.batch(()=>{Y(this,ei).forEach(s=>{s.onMutationUpdate(n)}),Y(this,ir).notify({mutation:this,type:"updated",action:n})})},Y1);function _M(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Li,Es,zd,X1,EM=(X1=class extends Gd{constructor(e={}){super();nt(this,Li);nt(this,Es);nt(this,zd);this.config=e,De(this,Li,new Set),De(this,Es,new Map),De(this,zd,0)}build(e,n,r){const s=new wM({mutationCache:this,mutationId:++Nf(this,zd)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Y(this,Li).add(e);const n=Pf(e);if(typeof n=="string"){const r=Y(this,Es).get(n);r?r.push(e):Y(this,Es).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Y(this,Li).delete(e)){const n=Pf(e);if(typeof n=="string"){const r=Y(this,Es).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Y(this,Es).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Pf(e);if(typeof n=="string"){const r=Y(this,Es).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Pf(e);if(typeof n=="string"){const s=(r=Y(this,Es).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Vn.batch(()=>{Y(this,Li).forEach(e=>{this.notify({type:"removed",mutation:e})}),Y(this,Li).clear(),Y(this,Es).clear()})}getAll(){return Array.from(Y(this,Li))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>yb(n,r))}findAll(e={}){return this.getAll().filter(n=>yb(e,n))}notify(e){Vn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Vn.batch(()=>Promise.all(e.map(n=>n.continue().catch(_r))))}},Li=new WeakMap,Es=new WeakMap,zd=new WeakMap,X1);function Pf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function wp(t){return{onFetch:(e,n)=>{var g,y,v,w,N;const r=e.options,s=(v=(y=(g=e.fetchOptions)==null?void 0:g.meta)==null?void 0:y.fetchMore)==null?void 0:v.direction,a=((w=e.state.data)==null?void 0:w.pages)||[],c=((N=e.state.data)==null?void 0:N.pageParams)||[];let u={pages:[],pageParams:[]},h=0;const f=async()=>{let x=!1;const _=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},P=IT(e.options,e.fetchOptions),j=async(C,F,U)=>{if(x)return Promise.reject();if(F==null&&C.pages.length)return Promise.resolve(C);const k=(()=>{const I={client:e.client,queryKey:e.queryKey,pageParam:F,direction:U?"backward":"forward",meta:e.options.meta};return _(I),I})(),O=await P(k),{maxPages:L}=e.options,D=U?uM:cM;return{pages:D(C.pages,O,L),pageParams:D(C.pageParams,F,L)}};if(s&&a.length){const C=s==="backward",F=C?DT:Iv,U={pages:a,pageParams:c},z=F(r,U);u=await j(U,z,C)}else{const C=t??a.length;do{const F=h===0?c[0]??r.initialPageParam:Iv(r,u);if(h>0&&F==null)break;u=await j(u,F),h++}while(h<C)}return u};e.options.persister?e.fetchFn=()=>{var x,_;return(_=(x=e.options).persister)==null?void 0:_.call(x,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=f}}}function Iv(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function DT(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}function bM(t,e){return e?Iv(t,e)!=null:!1}function NM(t,e){return!e||!t.getPreviousPageParam?!1:DT(t,e)!=null}var cn,Fo,Vo,Pc,kc,Uo,Rc,Oc,J1,SM=(J1=class{constructor(t={}){nt(this,cn);nt(this,Fo);nt(this,Vo);nt(this,Pc);nt(this,kc);nt(this,Uo);nt(this,Rc);nt(this,Oc);De(this,cn,t.queryCache||new xM),De(this,Fo,t.mutationCache||new EM),De(this,Vo,t.defaultOptions||{}),De(this,Pc,new Map),De(this,kc,new Map),De(this,Uo,0)}mount(){Nf(this,Uo)._++,Y(this,Uo)===1&&(De(this,Rc,Qx.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,cn).onFocus())})),De(this,Oc,xp.subscribe(async t=>{t&&(await this.resumePausedMutations(),Y(this,cn).onOnline())})))}unmount(){var t,e;Nf(this,Uo)._--,Y(this,Uo)===0&&((t=Y(this,Rc))==null||t.call(this),De(this,Rc,void 0),(e=Y(this,Oc))==null||e.call(this),De(this,Oc,void 0))}isFetching(t){return Y(this,cn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Y(this,Fo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Y(this,cn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Y(this,cn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ko(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Y(this,cn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Y(this,cn).get(r.queryHash),a=s==null?void 0:s.state.data,c=aM(e,a);if(c!==void 0)return Y(this,cn).build(this,r).setData(c,{...n,manual:!0})}setQueriesData(t,e,n){return Vn.batch(()=>Y(this,cn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Y(this,cn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Y(this,cn);Vn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Y(this,cn);return Vn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Vn.batch(()=>Y(this,cn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(_r).catch(_r)}invalidateQueries(t,e={}){return Vn.batch(()=>(Y(this,cn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Vn.batch(()=>Y(this,cn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(_r)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(_r)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Y(this,cn).build(this,e);return n.isStaleByTime(Ko(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(_r).catch(_r)}fetchInfiniteQuery(t){return t.behavior=wp(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(_r).catch(_r)}ensureInfiniteQueryData(t){return t.behavior=wp(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return xp.isOnline()?Y(this,Fo).resumePausedMutations():Promise.resolve()}getQueryCache(){return Y(this,cn)}getMutationCache(){return Y(this,Fo)}getDefaultOptions(){return Y(this,Vo)}setDefaultOptions(t){De(this,Vo,t)}setQueryDefaults(t,e){Y(this,Pc).set(bd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Y(this,Pc).values()],n={};return e.forEach(r=>{Nd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Y(this,kc).set(bd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Y(this,kc).values()],n={};return e.forEach(r=>{Nd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Y(this,Vo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Kx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Gx&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Y(this,Vo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Y(this,cn).clear(),Y(this,Fo).clear()}},cn=new WeakMap,Fo=new WeakMap,Vo=new WeakMap,Pc=new WeakMap,kc=new WeakMap,Uo=new WeakMap,Rc=new WeakMap,Oc=new WeakMap,J1),wr,wt,Bd,or,Wa,Dc,$o,zo,qd,Lc,Mc,Ha,Ka,Bo,Fc,Rt,Xu,Av,Pv,kv,Rv,Ov,Dv,Lv,MT,Z1,LT=(Z1=class extends Gd{constructor(e,n){super();nt(this,Rt);nt(this,wr);nt(this,wt);nt(this,Bd);nt(this,or);nt(this,Wa);nt(this,Dc);nt(this,$o);nt(this,zo);nt(this,qd);nt(this,Lc);nt(this,Mc);nt(this,Ha);nt(this,Ka);nt(this,Bo);nt(this,Fc,new Set);this.options=n,De(this,wr,e),De(this,zo,null),De(this,$o,jv()),this.options.experimental_prefetchInRender||Y(this,$o).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Y(this,wt).addObserver(this),wb(Y(this,wt),this.options)?xt(this,Rt,Xu).call(this):this.updateResult(),xt(this,Rt,Rv).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Mv(Y(this,wt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Mv(Y(this,wt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,xt(this,Rt,Ov).call(this),xt(this,Rt,Dv).call(this),Y(this,wt).removeObserver(this)}setOptions(e){const n=this.options,r=Y(this,wt);if(this.options=Y(this,wr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof bs(this.options.enabled,Y(this,wt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");xt(this,Rt,Lv).call(this),Y(this,wt).setOptions(this.options),n._defaulted&&!Sv(this.options,n)&&Y(this,wr).getQueryCache().notify({type:"observerOptionsUpdated",query:Y(this,wt),observer:this});const s=this.hasListeners();s&&_b(Y(this,wt),r,this.options,n)&&xt(this,Rt,Xu).call(this),this.updateResult(),s&&(Y(this,wt)!==r||bs(this.options.enabled,Y(this,wt))!==bs(n.enabled,Y(this,wt))||Ko(this.options.staleTime,Y(this,wt))!==Ko(n.staleTime,Y(this,wt)))&&xt(this,Rt,Av).call(this);const a=xt(this,Rt,Pv).call(this);s&&(Y(this,wt)!==r||bs(this.options.enabled,Y(this,wt))!==bs(n.enabled,Y(this,wt))||a!==Y(this,Bo))&&xt(this,Rt,kv).call(this,a)}getOptimisticResult(e){const n=Y(this,wr).getQueryCache().build(Y(this,wr),e),r=this.createResult(n,e);return CM(this,r)&&(De(this,or,r),De(this,Dc,this.options),De(this,Wa,Y(this,wt).state)),r}getCurrentResult(){return Y(this,or)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){Y(this,Fc).add(e)}getCurrentQuery(){return Y(this,wt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Y(this,wr).defaultQueryOptions(e),r=Y(this,wr).getQueryCache().build(Y(this,wr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return xt(this,Rt,Xu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Y(this,or)))}createResult(e,n){var L;const r=Y(this,wt),s=this.options,a=Y(this,or),c=Y(this,Wa),u=Y(this,Dc),f=e!==r?e.state:Y(this,Bd),{state:g}=e;let y={...g},v=!1,w;if(n._optimisticResults){const D=this.hasListeners(),I=!D&&wb(e,n),M=D&&_b(e,r,n,s);(I||M)&&(y={...y,...OT(g.data,e.options)}),n._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:N,errorUpdatedAt:x,status:_}=y;w=y.data;let P=!1;if(n.placeholderData!==void 0&&w===void 0&&_==="pending"){let D;a!=null&&a.isPlaceholderData&&n.placeholderData===(u==null?void 0:u.placeholderData)?(D=a.data,P=!0):D=typeof n.placeholderData=="function"?n.placeholderData((L=Y(this,Mc))==null?void 0:L.state.data,Y(this,Mc)):n.placeholderData,D!==void 0&&(_="success",w=Cv(a==null?void 0:a.data,D,n),v=!0)}if(n.select&&w!==void 0&&!P)if(a&&w===(c==null?void 0:c.data)&&n.select===Y(this,qd))w=Y(this,Lc);else try{De(this,qd,n.select),w=n.select(w),w=Cv(a==null?void 0:a.data,w,n),De(this,Lc,w),De(this,zo,null)}catch(D){De(this,zo,D)}Y(this,zo)&&(N=Y(this,zo),w=Y(this,Lc),x=Date.now(),_="error");const j=y.fetchStatus==="fetching",C=_==="pending",F=_==="error",U=C&&j,z=w!==void 0,O={status:_,fetchStatus:y.fetchStatus,isPending:C,isSuccess:_==="success",isError:F,isInitialLoading:U,isLoading:U,data:w,dataUpdatedAt:y.dataUpdatedAt,error:N,errorUpdatedAt:x,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>f.dataUpdateCount||y.errorUpdateCount>f.errorUpdateCount,isFetching:j,isRefetching:j&&!C,isLoadingError:F&&!z,isPaused:y.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:F&&z,isStale:Yx(e,n),refetch:this.refetch,promise:Y(this,$o)};if(this.options.experimental_prefetchInRender){const D=R=>{O.status==="error"?R.reject(O.error):O.data!==void 0&&R.resolve(O.data)},I=()=>{const R=De(this,$o,O.promise=jv());D(R)},M=Y(this,$o);switch(M.status){case"pending":e.queryHash===r.queryHash&&D(M);break;case"fulfilled":(O.status==="error"||O.data!==M.value)&&I();break;case"rejected":(O.status!=="error"||O.error!==M.reason)&&I();break}}return O}updateResult(){const e=Y(this,or),n=this.createResult(Y(this,wt),this.options);if(De(this,Wa,Y(this,wt).state),De(this,Dc,this.options),Y(this,Wa).data!==void 0&&De(this,Mc,Y(this,wt)),Sv(n,e))return;De(this,or,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!Y(this,Fc).size)return!0;const c=new Set(a??Y(this,Fc));return this.options.throwOnError&&c.add("error"),Object.keys(Y(this,or)).some(u=>{const h=u;return Y(this,or)[h]!==e[h]&&c.has(h)})};xt(this,Rt,MT).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&xt(this,Rt,Rv).call(this)}},wr=new WeakMap,wt=new WeakMap,Bd=new WeakMap,or=new WeakMap,Wa=new WeakMap,Dc=new WeakMap,$o=new WeakMap,zo=new WeakMap,qd=new WeakMap,Lc=new WeakMap,Mc=new WeakMap,Ha=new WeakMap,Ka=new WeakMap,Bo=new WeakMap,Fc=new WeakMap,Rt=new WeakSet,Xu=function(e){xt(this,Rt,Lv).call(this);let n=Y(this,wt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(_r)),n},Av=function(){xt(this,Rt,Ov).call(this);const e=Ko(this.options.staleTime,Y(this,wt));if(tl||Y(this,or).isStale||!Nv(e))return;const r=CT(Y(this,or).dataUpdatedAt,e)+1;De(this,Ha,setTimeout(()=>{Y(this,or).isStale||this.updateResult()},r))},Pv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Y(this,wt)):this.options.refetchInterval)??!1},kv=function(e){xt(this,Rt,Dv).call(this),De(this,Bo,e),!(tl||bs(this.options.enabled,Y(this,wt))===!1||!Nv(Y(this,Bo))||Y(this,Bo)===0)&&De(this,Ka,setInterval(()=>{(this.options.refetchIntervalInBackground||Qx.isFocused())&&xt(this,Rt,Xu).call(this)},Y(this,Bo)))},Rv=function(){xt(this,Rt,Av).call(this),xt(this,Rt,kv).call(this,xt(this,Rt,Pv).call(this))},Ov=function(){Y(this,Ha)&&(clearTimeout(Y(this,Ha)),De(this,Ha,void 0))},Dv=function(){Y(this,Ka)&&(clearInterval(Y(this,Ka)),De(this,Ka,void 0))},Lv=function(){const e=Y(this,wr).getQueryCache().build(Y(this,wr),this.options);if(e===Y(this,wt))return;const n=Y(this,wt);De(this,wt,e),De(this,Bd,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},MT=function(e){Vn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Y(this,or))}),Y(this,wr).getQueryCache().notify({query:Y(this,wt),type:"observerResultsUpdated"})})},Z1);function TM(t,e){return bs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function wb(t,e){return TM(t,e)||t.state.data!==void 0&&Mv(t,e,e.refetchOnMount)}function Mv(t,e,n){if(bs(e.enabled,t)!==!1&&Ko(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Yx(t,e)}return!1}function _b(t,e,n,r){return(t!==e||bs(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Yx(t,n)}function Yx(t,e){return bs(e.enabled,t)!==!1&&t.isStaleByTime(Ko(e.staleTime,t))}function CM(t,e){return!Sv(t.getCurrentResult(),e)}var jM=class extends LT{constructor(t,e){super(t,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions({...t,behavior:wp()})}getOptimisticResult(t){return t.behavior=wp(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,e){var N,x;const{state:n}=t,r=super.createResult(t,e),{isFetching:s,isRefetching:a,isError:c,isRefetchError:u}=r,h=(x=(N=n.fetchMeta)==null?void 0:N.fetchMore)==null?void 0:x.direction,f=c&&h==="forward",g=s&&h==="forward",y=c&&h==="backward",v=s&&h==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:bM(e,n.data),hasPreviousPage:NM(e,n.data),isFetchNextPageError:f,isFetchingNextPage:g,isFetchPreviousPageError:y,isFetchingPreviousPage:v,isRefetchError:u&&!f&&!y,isRefetching:a&&!g&&!v}}},FT=E.createContext(void 0),Xx=t=>{const e=E.useContext(FT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},IM=({client:t,children:e})=>(E.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(FT.Provider,{value:t,children:e})),VT=E.createContext(!1),AM=()=>E.useContext(VT);VT.Provider;function PM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var kM=E.createContext(PM()),RM=()=>E.useContext(kM),OM=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},DM=t=>{E.useEffect(()=>{t.clearReset()},[t])},LM=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||dM(n,[t.error,r])),MM=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},FM=(t,e)=>t.isLoading&&t.isFetching&&!e,VM=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Eb=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function UT(t,e,n){var y,v,w,N,x;const r=AM(),s=RM(),a=Xx(),c=a.defaultQueryOptions(t);(v=(y=a.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||v.call(y,c),c._optimisticResults=r?"isRestoring":"optimistic",MM(c),OM(c,s),DM(s);const u=!a.getQueryCache().get(c.queryHash),[h]=E.useState(()=>new e(a,c)),f=h.getOptimisticResult(c),g=!r&&t.subscribed!==!1;if(E.useSyncExternalStore(E.useCallback(_=>{const P=g?h.subscribe(Vn.batchCalls(_)):_r;return h.updateResult(),P},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),E.useEffect(()=>{h.setOptions(c)},[c,h]),VM(c,f))throw Eb(c,h,s);if(LM({result:f,errorResetBoundary:s,throwOnError:c.throwOnError,query:a.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw f.error;if((N=(w=a.getDefaultOptions().queries)==null?void 0:w._experimental_afterQuery)==null||N.call(w,c,f),c.experimental_prefetchInRender&&!tl&&FM(f,r)){const _=u?Eb(c,h,s):(x=a.getQueryCache().get(c.queryHash))==null?void 0:x.promise;_==null||_.catch(_r).finally(()=>{h.updateResult()})}return c.notifyOnChangeProps?f:h.trackResult(f)}function UM(t,e){return UT(t,LT)}function $M(t,e){return UT(t,jM)}/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sd(){return Sd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sd.apply(this,arguments)}var qo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qo||(qo={}));const bb="popstate";function zM(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:c,hash:u}=r.location;return Fv("",{pathname:a,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:_p(s)}return qM(e,n,null,t)}function sn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $T(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BM(){return Math.random().toString(36).substr(2,8)}function Nb(t,e){return{usr:t.state,key:t.key,idx:e}}function Fv(t,e,n,r){return n===void 0&&(n=null),Sd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?nu(e):e,{state:n,key:e&&e.key||r||BM()})}function _p(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function nu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function qM(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,u=qo.Pop,h=null,f=g();f==null&&(f=0,c.replaceState(Sd({},c.state,{idx:f}),""));function g(){return(c.state||{idx:null}).idx}function y(){u=qo.Pop;let _=g(),P=_==null?null:_-f;f=_,h&&h({action:u,location:x.location,delta:P})}function v(_,P){u=qo.Push;let j=Fv(x.location,_,P);f=g()+1;let C=Nb(j,f),F=x.createHref(j);try{c.pushState(C,"",F)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(F)}a&&h&&h({action:u,location:x.location,delta:1})}function w(_,P){u=qo.Replace;let j=Fv(x.location,_,P);f=g();let C=Nb(j,f),F=x.createHref(j);c.replaceState(C,"",F),a&&h&&h({action:u,location:x.location,delta:0})}function N(_){let P=s.location.origin!=="null"?s.location.origin:s.location.href,j=typeof _=="string"?_:_p(_);return j=j.replace(/ $/,"%20"),sn(P,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,P)}let x={get action(){return u},get location(){return t(s,c)},listen(_){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(bb,y),h=_,()=>{s.removeEventListener(bb,y),h=null}},createHref(_){return e(s,_)},createURL:N,encodeLocation(_){let P=N(_);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:v,replace:w,go(_){return c.go(_)}};return x}var Sb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Sb||(Sb={}));function WM(t,e,n){return n===void 0&&(n="/"),HM(t,e,n)}function HM(t,e,n,r){let s=typeof e=="string"?nu(e):e,a=Bc(s.pathname||"/",n);if(a==null)return null;let c=zT(t);KM(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=s4(a);u=n4(c[h],f)}return u}function zT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,c,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(sn(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=Go([r,h.relativePath]),g=n.concat(h);a.children&&a.children.length>0&&(sn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),zT(a.children,e,g,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:e4(f,a.index),routesMeta:g})};return t.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,c);else for(let h of BT(a.path))s(a,c,h)}),e}function BT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=BT(r.join("/")),u=[];return u.push(...c.map(h=>h===""?a:[a,h].join("/"))),s&&u.push(...c),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function KM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:t4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const GM=/^:[\w-]+$/,QM=3,YM=2,XM=1,JM=10,ZM=-2,Tb=t=>t==="*";function e4(t,e){let n=t.split("/"),r=n.length;return n.some(Tb)&&(r+=ZM),e&&(r+=YM),n.filter(s=>!Tb(s)).reduce((s,a)=>s+(GM.test(a)?QM:a===""?XM:JM),r)}function t4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function n4(t,e,n){let{routesMeta:r}=t,s={},a="/",c=[];for(let u=0;u<r.length;++u){let h=r[u],f=u===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=Vv({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),v=h.route;if(!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:Go([a,y.pathname]),pathnameBase:l4(Go([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=Go([a,y.pathnameBase]))}return c}function Vv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=r4(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,g,y)=>{let{paramName:v,isOptional:w}=g;if(v==="*"){let x=u[y]||"";c=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const N=u[y];return w&&!N?f[v]=void 0:f[v]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:t}}function r4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$T(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function s4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $T(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function i4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?nu(t):t;return{pathname:n?n.startsWith("/")?n:o4(n,e):e,search:c4(r),hash:u4(s)}}function o4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ky(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function a4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jx(t,e){let n=a4(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Zx(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=nu(t):(s=Sd({},t),sn(!s.pathname||!s.pathname.includes("?"),ky("?","pathname","search",s)),sn(!s.pathname||!s.pathname.includes("#"),ky("#","pathname","hash",s)),sn(!s.search||!s.search.includes("#"),ky("#","search","hash",s)));let a=t===""||s.pathname==="",c=a?"/":s.pathname,u;if(c==null)u=n;else{let y=e.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let h=i4(s,u),f=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}const Go=t=>t.join("/").replace(/\/\/+/g,"/"),l4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),c4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,u4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function d4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const qT=["post","put","patch","delete"];new Set(qT);const h4=["get",...qT];new Set(h4);/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Td(){return Td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Td.apply(this,arguments)}const sm=E.createContext(null),WT=E.createContext(null),Xi=E.createContext(null),im=E.createContext(null),pi=E.createContext({outlet:null,matches:[],isDataRoute:!1}),HT=E.createContext(null);function f4(t,e){let{relative:n}=e===void 0?{}:e;ru()||sn(!1);let{basename:r,navigator:s}=E.useContext(Xi),{hash:a,pathname:c,search:u}=om(t,{relative:n}),h=c;return r!=="/"&&(h=c==="/"?r:Go([r,c])),s.createHref({pathname:h,search:u,hash:a})}function ru(){return E.useContext(im)!=null}function Ji(){return ru()||sn(!1),E.useContext(im).location}function KT(t){E.useContext(Xi).static||E.useLayoutEffect(t)}function su(){let{isDataRoute:t}=E.useContext(pi);return t?j4():p4()}function p4(){ru()||sn(!1);let t=E.useContext(sm),{basename:e,future:n,navigator:r}=E.useContext(Xi),{matches:s}=E.useContext(pi),{pathname:a}=Ji(),c=JSON.stringify(Jx(s,n.v7_relativeSplatPath)),u=E.useRef(!1);return KT(()=>{u.current=!0}),E.useCallback(function(f,g){if(g===void 0&&(g={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let y=Zx(f,JSON.parse(c),a,g.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Go([e,y.pathname])),(g.replace?r.replace:r.push)(y,g.state,g)},[e,r,c,a,t])}const m4=E.createContext(null);function g4(t){let e=E.useContext(pi).outlet;return e&&E.createElement(m4.Provider,{value:t},e)}function GT(){let{matches:t}=E.useContext(pi),e=t[t.length-1];return e?e.params:{}}function om(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=E.useContext(Xi),{matches:s}=E.useContext(pi),{pathname:a}=Ji(),c=JSON.stringify(Jx(s,r.v7_relativeSplatPath));return E.useMemo(()=>Zx(t,JSON.parse(c),a,n==="path"),[t,c,a,n])}function y4(t,e){return v4(t,e)}function v4(t,e,n,r){ru()||sn(!1);let{navigator:s}=E.useContext(Xi),{matches:a}=E.useContext(pi),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=Ji(),g;if(e){var y;let _=typeof e=="string"?nu(e):e;h==="/"||(y=_.pathname)!=null&&y.startsWith(h)||sn(!1),g=_}else g=f;let v=g.pathname||"/",w=v;if(h!=="/"){let _=h.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let N=WM(t,{pathname:w}),x=b4(N&&N.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:Go([h,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:Go([h,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,n,r);return e&&x?E.createElement(im.Provider,{value:{location:Td({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:qo.Pop}},x):x}function x4(){let t=C4(),e=d4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:s},n):null,null)}const w4=E.createElement(x4,null);class _4 extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(pi.Provider,{value:this.props.routeContext},E.createElement(HT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function E4(t){let{routeContext:e,match:n,children:r}=t,s=E.useContext(sm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(pi.Provider,{value:e},r)}function b4(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let g=c.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);g>=0||sn(!1),c=c.slice(0,Math.min(c.length,g+1))}let h=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<c.length;g++){let y=c[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=g),y.route.id){let{loaderData:v,errors:w}=n,N=y.route.loader&&v[y.route.id]===void 0&&(!w||w[y.route.id]===void 0);if(y.route.lazy||N){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((g,y,v)=>{let w,N=!1,x=null,_=null;n&&(w=u&&y.route.id?u[y.route.id]:void 0,x=y.route.errorElement||w4,h&&(f<0&&v===0?(I4("route-fallback"),N=!0,_=null):f===v&&(N=!0,_=y.route.hydrateFallbackElement||null)));let P=e.concat(c.slice(0,v+1)),j=()=>{let C;return w?C=x:N?C=_:y.route.Component?C=E.createElement(y.route.Component,null):y.route.element?C=y.route.element:C=g,E.createElement(E4,{match:y,routeContext:{outlet:g,matches:P,isDataRoute:n!=null},children:C})};return n&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?E.createElement(_4,{location:n.location,revalidation:n.revalidation,component:x,error:w,children:j(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):j()},null)}var QT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(QT||{}),YT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(YT||{});function N4(t){let e=E.useContext(sm);return e||sn(!1),e}function S4(t){let e=E.useContext(WT);return e||sn(!1),e}function T4(t){let e=E.useContext(pi);return e||sn(!1),e}function XT(t){let e=T4(),n=e.matches[e.matches.length-1];return n.route.id||sn(!1),n.route.id}function C4(){var t;let e=E.useContext(HT),n=S4(),r=XT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function j4(){let{router:t}=N4(QT.UseNavigateStable),e=XT(YT.UseNavigateStable),n=E.useRef(!1);return KT(()=>{n.current=!0}),E.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Td({fromRouteId:e},a)))},[t,e])}const Cb={};function I4(t,e,n){Cb[t]||(Cb[t]=!0)}function Qf(t){let{to:e,replace:n,state:r,relative:s}=t;ru()||sn(!1);let{future:a,static:c}=E.useContext(Xi),{matches:u}=E.useContext(pi),{pathname:h}=Ji(),f=su(),g=Zx(e,Jx(u,a.v7_relativeSplatPath),h,s==="path"),y=JSON.stringify(g);return E.useEffect(()=>f(JSON.parse(y),{replace:n,state:r,relative:s}),[f,y,s,n,r]),null}function A4(t){return g4(t.context)}function $t(t){sn(!1)}function P4(t){let{basename:e="/",children:n=null,location:r,navigationType:s=qo.Pop,navigator:a,static:c=!1,future:u}=t;ru()&&sn(!1);let h=e.replace(/^\/*/,"/"),f=E.useMemo(()=>({basename:h,navigator:a,static:c,future:Td({v7_relativeSplatPath:!1},u)}),[h,u,a,c]);typeof r=="string"&&(r=nu(r));let{pathname:g="/",search:y="",hash:v="",state:w=null,key:N="default"}=r,x=E.useMemo(()=>{let _=Bc(g,h);return _==null?null:{location:{pathname:_,search:y,hash:v,state:w,key:N},navigationType:s}},[h,g,y,v,w,N,s]);return x==null?null:E.createElement(Xi.Provider,{value:f},E.createElement(im.Provider,{children:n,value:x}))}function k4(t){let{children:e,location:n}=t;return y4(Uv(e),n)}new Promise(()=>{});function Uv(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(r,s)=>{if(!E.isValidElement(r))return;let a=[...e,s];if(r.type===E.Fragment){n.push.apply(n,Uv(r.props.children,a));return}r.type!==$t&&sn(!1),!r.props.index||!r.props.children||sn(!1);let c={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Uv(r.props.children,a)),n.push(c)}),n}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ep(){return Ep=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ep.apply(this,arguments)}function JT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function R4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function O4(t,e){return t.button===0&&(!e||e==="_self")&&!R4(t)}function $v(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function D4(t,e){let n=$v(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const L4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],M4=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],F4="6";try{window.__reactRouterVersion=F4}catch{}const V4=E.createContext({isTransitioning:!1}),U4="startTransition",jb=tS[U4];function $4(t){let{basename:e,children:n,future:r,window:s}=t,a=E.useRef();a.current==null&&(a.current=zM({window:s,v5Compat:!0}));let c=a.current,[u,h]=E.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},g=E.useCallback(y=>{f&&jb?jb(()=>h(y)):h(y)},[h,f]);return E.useLayoutEffect(()=>c.listen(g),[c,g]),E.createElement(P4,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:r})}const z4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",B4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zn=E.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:c,state:u,target:h,to:f,preventScrollReset:g,unstable_viewTransition:y}=e,v=JT(e,L4),{basename:w}=E.useContext(Xi),N,x=!1;if(typeof f=="string"&&B4.test(f)&&(N=f,z4))try{let C=new URL(window.location.href),F=f.startsWith("//")?new URL(C.protocol+f):new URL(f),U=Bc(F.pathname,w);F.origin===C.origin&&U!=null?f=U+F.search+F.hash:x=!0}catch{}let _=f4(f,{relative:s}),P=W4(f,{replace:c,state:u,target:h,preventScrollReset:g,relative:s,unstable_viewTransition:y});function j(C){r&&r(C),C.defaultPrevented||P(C)}return E.createElement("a",Ep({},v,{href:N||_,onClick:x||a?r:j,ref:n,target:h}))}),Ib=E.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:c=!1,style:u,to:h,unstable_viewTransition:f,children:g}=e,y=JT(e,M4),v=om(h,{relative:y.relative}),w=Ji(),N=E.useContext(WT),{navigator:x,basename:_}=E.useContext(Xi),P=N!=null&&H4(v)&&f===!0,j=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,C=w.pathname,F=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;s||(C=C.toLowerCase(),F=F?F.toLowerCase():null,j=j.toLowerCase()),F&&_&&(F=Bc(F,_)||F);const U=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let z=C===j||!c&&C.startsWith(j)&&C.charAt(U)==="/",k=F!=null&&(F===j||!c&&F.startsWith(j)&&F.charAt(j.length)==="/"),O={isActive:z,isPending:k,isTransitioning:P},L=z?r:void 0,D;typeof a=="function"?D=a(O):D=[a,z?"active":null,k?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let I=typeof u=="function"?u(O):u;return E.createElement(Zn,Ep({},y,{"aria-current":L,className:D,ref:n,style:I,to:h,unstable_viewTransition:f}),typeof g=="function"?g(O):g)});var zv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(zv||(zv={}));var Ab;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ab||(Ab={}));function q4(t){let e=E.useContext(sm);return e||sn(!1),e}function W4(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u}=e===void 0?{}:e,h=su(),f=Ji(),g=om(t,{relative:c});return E.useCallback(y=>{if(O4(y,n)){y.preventDefault();let v=r!==void 0?r:_p(f)===_p(g);h(t,{replace:v,state:s,preventScrollReset:a,relative:c,unstable_viewTransition:u})}},[f,h,g,r,s,n,t,a,c,u])}function Qd(t){let e=E.useRef($v(t)),n=E.useRef(!1),r=Ji(),s=E.useMemo(()=>D4(r.search,n.current?null:e.current),[r.search]),a=su(),c=E.useCallback((u,h)=>{const f=$v(typeof u=="function"?u(s):u);n.current=!0,a("?"+f,h)},[a,s]);return[s,c]}function H4(t,e){e===void 0&&(e={});let n=E.useContext(V4);n==null&&sn(!1);let{basename:r}=q4(zv.useViewTransitionState),s=om(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Bc(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=Bc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Vv(s.pathname,c)!=null||Vv(s.pathname,a)!=null}const K4=()=>{};var Pb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},G4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],c=t[n++],u=t[n++],h=((s&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},eC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],c=s+1<t.length,u=c?t[s+1]:0,h=s+2<t.length,f=h?t[s+2]:0,g=a>>2,y=(a&3)<<4|u>>4;let v=(u&15)<<2|f>>6,w=f&63;h||(w=64,c||(v=64)),r.push(n[g],n[y],n[v],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):G4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||u==null||f==null||y==null)throw new Q4;const v=a<<2|u>>4;if(r.push(v),f!==64){const w=u<<4&240|f>>2;if(r.push(w),y!==64){const N=f<<6&192|y;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Q4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Y4=function(t){const e=ZT(t);return eC.encodeByteArray(e,!0)},bp=function(t){return Y4(t).replace(/\./g,"")},tC=function(t){try{return eC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=()=>X4().__FIREBASE_DEFAULTS__,Z4=()=>{if(typeof process>"u"||typeof Pb>"u")return;const t=Pb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tC(t[1]);return e&&JSON.parse(e)},am=()=>{try{return K4()||J4()||Z4()||eF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nC=t=>{var e,n;return(n=(e=am())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},tF=t=>{const e=nC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},rC=()=>{var t;return(t=am())===null||t===void 0?void 0:t.config},sC=t=>{var e;return(e=am())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ew(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bp(JSON.stringify(n)),bp(JSON.stringify(c)),""].join(".")}const ud={};function sF(){const t={prod:[],emulator:[]};for(const e of Object.keys(ud))ud[e]?t.emulator.push(e):t.prod.push(e);return t}function iF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let kb=!1;function iC(t,e){if(typeof window>"u"||typeof document>"u"||!fl(window.location.host)||ud[t]===e||ud[t]||kb)return;ud[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",a=sF().prod.length>0;function c(){const v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{kb=!0,c()},v}function g(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=iF(r),w=n("text"),N=document.getElementById(w)||document.createElement("span"),x=n("learnmore"),_=document.getElementById(x)||document.createElement("a"),P=n("preprendIcon"),j=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const C=v.element;u(C),g(_,x);const F=f();h(j,P),C.append(j,N,_,F),document.body.appendChild(C)}a?(N.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())}function aF(){var t;const e=(t=am())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dF(){const t=er();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hF(){return!aF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oC(){try{return typeof indexedDB=="object"}catch{return!1}}function aC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}function fF(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="FirebaseError";class Ds extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pF,Object.setPrototypeOf(this,Ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pl.prototype.create)}}class pl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?mF(a,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Ds(s,u,r)}}function mF(t,e){return t.replace(gF,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const gF=/\{\$([^}]+)}/g;function yF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],c=e[s];if(Rb(a)&&Rb(c)){if(!nl(a,c))return!1}else if(a!==c)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Rb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ju(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Zu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vF(t,e){const n=new xF(t,e);return n.subscribe.bind(n)}class xF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wF(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ry),s.error===void 0&&(s.error=Ry),s.complete===void 0&&(s.complete=Ry);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ry(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t){return t&&t._delegate?t._delegate:t}class ss{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new nF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bF(e))try{this.getOrInitializeService({instanceIdentifier:La})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=La){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=La){return this.instances.has(e)}getOptions(e=La){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=La){return this.component?this.component.multipleInstances?e:La:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EF(t){return t===La?void 0:t}function bF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _F(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ft||(ft={}));const SF={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},TF=ft.INFO,CF={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},jF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=CF[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tw{constructor(e){this.name=e,this._logLevel=TF,this._logHandler=jF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}const IF=(t,e)=>e.some(n=>t instanceof n);let Ob,Db;function AF(){return Ob||(Ob=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PF(){return Db||(Db=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lC=new WeakMap,Bv=new WeakMap,cC=new WeakMap,Oy=new WeakMap,nw=new WeakMap;function kF(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(Vi(t.result)),s()},c=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&lC.set(n,t)}).catch(()=>{}),nw.set(e,t),e}function RF(t){if(Bv.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),s()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});Bv.set(t,e)}let qv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OF(t){qv=t(qv)}function DF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dy(this),e,...n);return cC.set(r,e.sort?e.sort():[e]),Vi(r)}:PF().includes(t)?function(...e){return t.apply(Dy(this),e),Vi(lC.get(this))}:function(...e){return Vi(t.apply(Dy(this),e))}}function LF(t){return typeof t=="function"?DF(t):(t instanceof IDBTransaction&&RF(t),IF(t,AF())?new Proxy(t,qv):t)}function Vi(t){if(t instanceof IDBRequest)return kF(t);if(Oy.has(t))return Oy.get(t);const e=LF(t);return e!==t&&(Oy.set(t,e),nw.set(e,t)),e}const Dy=t=>nw.get(t);function lm(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const c=indexedDB.open(t,e),u=Vi(c);return r&&c.addEventListener("upgradeneeded",h=>{r(Vi(c.result),h.oldVersion,h.newVersion,Vi(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}function Ly(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Vi(n).then(()=>{})}const MF=["get","getKey","getAll","getAllKeys","count"],FF=["put","add","delete","clear"],My=new Map;function Lb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(My.get(e))return My.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=FF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||MF.includes(n)))return;const a=async function(c,...u){const h=this.transaction(c,s?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),s&&h.done]))[0]};return My.set(e,a),a}OF(t=>({...t,get:(e,n,r)=>Lb(e,n)||t.get(e,n,r),has:(e,n)=>!!Lb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UF(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function UF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wv="@firebase/app",Mb="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new tw("@firebase/app"),$F="@firebase/app-compat",zF="@firebase/analytics-compat",BF="@firebase/analytics",qF="@firebase/app-check-compat",WF="@firebase/app-check",HF="@firebase/auth",KF="@firebase/auth-compat",GF="@firebase/database",QF="@firebase/data-connect",YF="@firebase/database-compat",XF="@firebase/functions",JF="@firebase/functions-compat",ZF="@firebase/installations",eV="@firebase/installations-compat",tV="@firebase/messaging",nV="@firebase/messaging-compat",rV="@firebase/performance",sV="@firebase/performance-compat",iV="@firebase/remote-config",oV="@firebase/remote-config-compat",aV="@firebase/storage",lV="@firebase/storage-compat",cV="@firebase/firestore",uV="@firebase/ai",dV="@firebase/firestore-compat",hV="firebase",fV="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="[DEFAULT]",pV={[Wv]:"fire-core",[$F]:"fire-core-compat",[BF]:"fire-analytics",[zF]:"fire-analytics-compat",[WF]:"fire-app-check",[qF]:"fire-app-check-compat",[HF]:"fire-auth",[KF]:"fire-auth-compat",[GF]:"fire-rtdb",[QF]:"fire-data-connect",[YF]:"fire-rtdb-compat",[XF]:"fire-fn",[JF]:"fire-fn-compat",[ZF]:"fire-iid",[eV]:"fire-iid-compat",[tV]:"fire-fcm",[nV]:"fire-fcm-compat",[rV]:"fire-perf",[sV]:"fire-perf-compat",[iV]:"fire-rc",[oV]:"fire-rc-compat",[aV]:"fire-gcs",[lV]:"fire-gcs-compat",[cV]:"fire-fst",[dV]:"fire-fst-compat",[uV]:"fire-vertex","fire-js":"fire-js",[hV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=new Map,mV=new Map,Kv=new Map;function Fb(t,e){try{t.container.addComponent(e)}catch(n){qi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ps(t){const e=t.name;if(Kv.has(e))return qi.debug(`There were multiple attempts to register component ${e}.`),!1;Kv.set(e,t);for(const n of Np.values())Fb(n,t);for(const n of mV.values())Fb(n,t);return!0}function ml(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qo=new pl("app","Firebase",gV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=fV;function uC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hv,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Qo.create("bad-app-name",{appName:String(s)});if(n||(n=rC()),!n)throw Qo.create("no-options");const a=Np.get(s);if(a){if(nl(n,a.options)&&nl(r,a.config))return a;throw Qo.create("duplicate-app",{appName:s})}const c=new NF(s);for(const h of Kv.values())c.addComponent(h);const u=new yV(n,r,c);return Np.set(s,u),u}function rw(t=Hv){const e=Np.get(t);if(!e&&t===Hv&&rC())return uC();if(!e)throw Qo.create("no-app",{appName:t});return e}function Cr(t,e,n){var r;let s=(r=pV[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qi.warn(u.join(" "));return}Ps(new ss(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV="firebase-heartbeat-database",xV=1,Cd="firebase-heartbeat-store";let Fy=null;function dC(){return Fy||(Fy=lm(vV,xV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qo.create("idb-open",{originalErrorMessage:t.message})})),Fy}async function wV(t){try{const n=(await dC()).transaction(Cd),r=await n.objectStore(Cd).get(hC(t));return await n.done,r}catch(e){if(e instanceof Ds)qi.warn(e.message);else{const n=Qo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qi.warn(n.message)}}}async function Vb(t,e){try{const r=(await dC()).transaction(Cd,"readwrite");await r.objectStore(Cd).put(e,hC(t)),await r.done}catch(n){if(n instanceof Ds)qi.warn(n.message);else{const r=Qo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qi.warn(r.message)}}}function hC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=1024,EV=30;class bV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Ub();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>EV){const c=TV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ub(),{heartbeatsToSend:r,unsentEntries:s}=NV(this._heartbeatsCache.heartbeats),a=bp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return qi.warn(n),""}}}function Ub(){return new Date().toISOString().substring(0,10)}function NV(t,e=_V){const n=[];let r=t.slice();for(const s of t){const a=n.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),$b(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$b(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oC()?aC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $b(t){return bp(JSON.stringify({version:2,heartbeats:t})).length}function TV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(t){Ps(new ss("platform-logger",e=>new VF(e),"PRIVATE")),Ps(new ss("heartbeat",e=>new bV(e),"PRIVATE")),Cr(Wv,Mb,t),Cr(Wv,Mb,"esm2017"),Cr("fire-js","")}CV("");var Jn=function(){return Jn=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Jn.apply(this,arguments)};function iu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function fC(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function pC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jV=pC,mC=new pl("auth","Firebase",pC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=new tw("@firebase/auth");function IV(t,...e){Sp.logLevel<=ft.WARN&&Sp.warn(`Auth (${gl}): ${t}`,...e)}function Yf(t,...e){Sp.logLevel<=ft.ERROR&&Sp.error(`Auth (${gl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t,...e){throw sw(t,...e)}function ri(t,...e){return sw(t,...e)}function gC(t,e,n){const r=Object.assign(Object.assign({},jV()),{[e]:n});return new pl("auth","Firebase",r).create(e,{appName:t.name})}function Yo(t){return gC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mC.create(t,...e)}function et(t,e,...n){if(!t)throw sw(e,...n)}function Mi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yf(e),new Error(e)}function Wi(t,e){t||Mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function AV(){return zb()==="http:"||zb()==="https:"}function zb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AV()||cF()||"connection"in navigator)?navigator.onLine:!0}function kV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wi(n>e,"Short delay should be less than long delay!"),this.isMobile=oF()||uF()}get(){return PV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(t,e){Wi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DV=new Xd(3e4,6e4);function yl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ua(t,e,n,r,s={}){return vC(t,s,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=Yd(Object.assign({key:t.config.apiKey},c)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:h},a);return lF()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&fl(t.emulatorConfig.host)&&(f.credentials="include"),yC.fetch()(await xC(t,t.config.apiHost,n,u),f)})}async function vC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},RV),e);try{const s=new MV(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw kf(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw kf(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw kf(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw kf(t,"user-disabled",c);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw gC(t,g,f);ks(t,g)}}catch(s){if(s instanceof Ds)throw s;ks(t,"network-request-failed",{message:String(s)})}}async function cm(t,e,n,r,s={}){const a=await ua(t,e,n,r,s);return"mfaPendingCredential"in a&&ks(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function xC(t,e,n,r){const s=`${e}${n}?${r}`,a=t,c=a.config.emulator?iw(t.config,s):`${t.config.apiScheme}://${s}`;return OV.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function LV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class MV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ri(this.auth,"network-request-failed")),DV.get())})}}function kf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ri(t,e,r);return s.customData._tokenResponse=n,s}function Bb(t){return t!==void 0&&t.enterprise!==void 0}class FV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VV(t,e){return ua(t,"GET","/v2/recaptchaConfig",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UV(t,e){return ua(t,"POST","/v1/accounts:delete",e)}async function Tp(t,e){return ua(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $V(t,e=!1){const n=en(t),r=await n.getIdToken(e),s=ow(r);et(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:dd(Vy(s.auth_time)),issuedAtTime:dd(Vy(s.iat)),expirationTime:dd(Vy(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Vy(t){return Number(t)*1e3}function ow(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yf("JWT malformed, contained fewer than 3 sections"),null;try{const s=tC(n);return s?JSON.parse(s):(Yf("Failed to decode base64 JWT payload"),null)}catch(s){return Yf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function qb(t){const e=ow(t);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ds&&zV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function zV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dd(this.lastLoginAt),this.creationTime=dd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cp(t){var e;const n=t.auth,r=await t.getIdToken(),s=await jd(t,Tp(n,{idToken:r}));et(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?wC(a.providerUserInfo):[],u=WV(t.providerData,c),h=t.isAnonymous,f=!(t.email&&a.passwordHash)&&!(u!=null&&u.length),g=h?f:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Qv(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function qV(t){const e=en(t);await Cp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WV(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function wC(t){return t.map(e=>{var{providerId:n}=e,r=iu(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(t,e){const n=await vC(t,{},async()=>{const r=Yd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,c=await xC(t,s,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return t.emulatorConfig&&fl(t.emulatorConfig.host)&&(h.credentials="include"),yC.fetch()(c,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KV(t,e){return ua(t,"POST","/v2/accounts:revokeToken",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){et(e.length!==0,"internal-error");const n=qb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await HV(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,c=new xc;return r&&(et(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(et(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(et(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xc,this.toJSON())}_performRefresh(){return Mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t,e){et(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ss{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=iu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Qv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await jd(this,this.stsTokenManager.getToken(this.auth,e));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $V(this,e)}reload(){return qV(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Cp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zr(this.auth.app))return Promise.reject(Yo(this.auth));const e=await this.getIdToken();return await jd(this,UV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,c,u,h,f,g;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(s=n.email)!==null&&s!==void 0?s:void 0,w=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,N=(c=n.photoURL)!==null&&c!==void 0?c:void 0,x=(u=n.tenantId)!==null&&u!==void 0?u:void 0,_=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,P=(f=n.createdAt)!==null&&f!==void 0?f:void 0,j=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:C,emailVerified:F,isAnonymous:U,providerData:z,stsTokenManager:k}=n;et(C&&k,e,"internal-error");const O=xc.fromJSON(this.name,k);et(typeof C=="string",e,"internal-error"),jo(y,e.name),jo(v,e.name),et(typeof F=="boolean",e,"internal-error"),et(typeof U=="boolean",e,"internal-error"),jo(w,e.name),jo(N,e.name),jo(x,e.name),jo(_,e.name),jo(P,e.name),jo(j,e.name);const L=new Ss({uid:C,auth:e,email:v,emailVerified:F,displayName:y,isAnonymous:U,photoURL:N,phoneNumber:w,tenantId:x,stsTokenManager:O,createdAt:P,lastLoginAt:j});return z&&Array.isArray(z)&&(L.providerData=z.map(D=>Object.assign({},D))),_&&(L._redirectEventId=_),L}static async _fromIdTokenResponse(e,n,r=!1){const s=new xc;s.updateFromServerResponse(n);const a=new Ss({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Cp(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];et(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?wC(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),u=new xc;u.updateFromIdToken(r);const h=new Ss({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Qv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=new Map;function Fi(t){Wi(t instanceof Function,"Expected a class definition");let e=Wb.get(t);return e?(Wi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Wb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_C.type="NONE";const Hb=_C;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e,n){return`firebase:${t}:${e}:${n}`}class wc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Xf(this.userKey,s.apiKey,a),this.fullPersistenceKey=Xf("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Tp(this.auth,{idToken:e}).catch(()=>{});return n?Ss._fromGetAccountInfoResponse(this.auth,n,e):null}return Ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wc(Fi(Hb),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||Fi(Hb);const c=Xf(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const v=await Tp(e,{idToken:g}).catch(()=>{});if(!v)break;y=await Ss._fromGetAccountInfoResponse(e,v,g)}else y=Ss._fromJSON(e,g);f!==a&&(u=y),a=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new wc(a,e,r):(a=h[0],u&&await a._set(c,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(c)}catch{}})),new wc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CC(e))return"Blackberry";if(jC(e))return"Webos";if(bC(e))return"Safari";if((e.includes("chrome/")||NC(e))&&!e.includes("edge/"))return"Chrome";if(TC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EC(t=er()){return/firefox\//i.test(t)}function bC(t=er()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NC(t=er()){return/crios\//i.test(t)}function SC(t=er()){return/iemobile/i.test(t)}function TC(t=er()){return/android/i.test(t)}function CC(t=er()){return/blackberry/i.test(t)}function jC(t=er()){return/webos/i.test(t)}function aw(t=er()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function GV(t=er()){var e;return aw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QV(){return dF()&&document.documentMode===10}function IC(t=er()){return aw(t)||TC(t)||jC(t)||CC(t)||/windows phone/i.test(t)||SC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t,e=[]){let n;switch(t){case"Browser":n=Kb(er());break;case"Worker":n=`${Kb(er())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((c,u)=>{try{const h=e(a);c(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV(t,e={}){return ua(t,"GET","/v2/passwordPolicy",yl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=6;class ZV{constructor(e){var n,r,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:JV,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,c,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gb(this),this.idTokenSubscription=new Gb(this),this.beforeStateQueue=new YV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fi(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await wc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Tp(this,{idToken:e}),r=await Ss._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&(h!=null&&h.user)&&(s=h.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zr(this.app))return Promise.reject(Yo(this));const n=e?en(e):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zr(this.app)?Promise.reject(Yo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zr(this.app)?Promise.reject(Yo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XV(this),n=new ZV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await KV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fi(e)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await wc.create(this,[Fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,s);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&IV(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ou(t){return en(t)}class Gb{constructor(e){this.auth=e,this.observer=null,this.addObserver=vF(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t3(t){um=t}function PC(t){return um.loadJS(t)}function n3(){return um.recaptchaEnterpriseScript}function r3(){return um.gapiScript}function s3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class i3{constructor(){this.enterprise=new o3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class o3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const a3="recaptcha-enterprise",kC="NO_RECAPTCHA";class l3{constructor(e){this.type=a3,this.auth=ou(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{VV(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new FV(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,c(f.siteKey)}}).catch(h=>{u(h)})})}function s(a,c,u){const h=window.grecaptcha;Bb(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{c(f)}).catch(()=>{c(kC)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new i3().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!n&&Bb(window.grecaptcha))s(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=n3();h.length!==0&&(h+=u),PC(h).then(()=>{s(u,a,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function Qb(t,e,n,r=!1,s=!1){const a=new l3(t);let c;if(s)c=kC;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Yb(t,e,n,r,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Qb(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Qb(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t,e){const n=ml(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(nl(a,e??{}))return s;ks(s,"already-initialized")}return n.initialize({options:e})}function u3(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function d3(t,e,n){const r=ou(t);et(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=RC(e),{host:c,port:u}=h3(e),h=u===null?"":`:${u}`,f={url:`${a}//${c}${h}/`},g=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){et(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),et(nl(f,r.config.emulator)&&nl(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,fl(c)?(ew(`${a}//${c}${h}`),iC("Auth",!0)):f3()}function RC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function h3(t){const e=RC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Xb(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:Xb(c)}}}function Xb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function f3(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mi("not implemented")}_getIdTokenResponse(e){return Mi("not implemented")}_linkToIdToken(e,n){return Mi("not implemented")}_getReauthenticationResolver(e){return Mi("not implemented")}}async function p3(t,e){return ua(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m3(t,e){return cm(t,"POST","/v1/accounts:signInWithPassword",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3(t,e){return cm(t,"POST","/v1/accounts:signInWithEmailLink",yl(t,e))}async function y3(t,e){return cm(t,"POST","/v1/accounts:signInWithEmailLink",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends lw{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Id(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Id(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yb(e,n,"signInWithPassword",m3);case"emailLink":return g3(e,{email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yb(e,r,"signUpPassword",p3);case"emailLink":return y3(e,{idToken:n,email:this._email,oobCode:this._password});default:ks(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(t,e){return cm(t,"POST","/v1/accounts:signInWithIdp",yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3="http://localhost";class rl extends lw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new rl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ks("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=iu(n,["providerId","signInMethod"]);if(!r||!s)return null;const c=new rl(r,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return _c(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_c(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_c(e,n)}buildRequest(){const e={requestUri:v3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function w3(t){const e=Ju(Zu(t)).link,n=e?Ju(Zu(e)).deep_link_id:null,r=Ju(Zu(t)).deep_link_id;return(r?Ju(Zu(r)).link:null)||r||n||e||t}class cw{constructor(e){var n,r,s,a,c,u;const h=Ju(Zu(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,g=(r=h.oobCode)!==null&&r!==void 0?r:null,y=x3((s=h.mode)!==null&&s!==void 0?s:null);et(f&&g&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=g,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=w3(e);try{return new cw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(){this.providerId=au.PROVIDER_ID}static credential(e,n){return Id._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=cw.parseLink(n);return et(r,"argument-error"),Id._fromEmailAndCode(e,r.code,r.tenantId)}}au.PROVIDER_ID="password";au.EMAIL_PASSWORD_SIGN_IN_METHOD="password";au.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends OC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends Jd{constructor(){super("facebook.com")}static credential(e){return rl._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ko.credential(e.oauthAccessToken)}catch{return null}}}ko.FACEBOOK_SIGN_IN_METHOD="facebook.com";ko.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends Jd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return rl._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ro.credential(n,r)}catch{return null}}}Ro.GOOGLE_SIGN_IN_METHOD="google.com";Ro.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Jd{constructor(){super("github.com")}static credential(e){return rl._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oo.credential(e.oauthAccessToken)}catch{return null}}}Oo.GITHUB_SIGN_IN_METHOD="github.com";Oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Jd{constructor(){super("twitter.com")}static credential(e,n){return rl._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Do.credential(n,r)}catch{return null}}}Do.TWITTER_SIGN_IN_METHOD="twitter.com";Do.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Ss._fromIdTokenResponse(e,r,s),c=Jb(r);return new qc({user:a,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Jb(r);return new qc({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Jb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends Ds{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,jp.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new jp(e,n,r,s)}}function DC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?jp._fromErrorAndOperation(t,a,e,r):a})}async function _3(t,e,n=!1){const r=await jd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E3(t,e,n=!1){const{auth:r}=t;if(Zr(r.app))return Promise.reject(Yo(r));const s="reauthenticate";try{const a=await jd(t,DC(r,s,e,t),n);et(a.idToken,r,"internal-error");const c=ow(a.idToken);et(c,r,"internal-error");const{sub:u}=c;return et(t.uid===u,r,"user-mismatch"),qc._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ks(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(t,e,n=!1){if(Zr(t.app))return Promise.reject(Yo(t));const r="signIn",s=await DC(t,r,e),a=await qc._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function b3(t,e){return LC(ou(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N3(t){const e=ou(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function S3(t,e,n){return Zr(t.app)?Promise.reject(Yo(t)):b3(en(t),au.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&N3(t),r})}function T3(t,e,n,r){return en(t).onIdTokenChanged(e,n,r)}function C3(t,e,n){return en(t).beforeAuthStateChanged(e,n)}function j3(t,e,n,r){return en(t).onAuthStateChanged(e,n,r)}function I3(t){return en(t).signOut()}const Ip="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ip,"1"),this.storage.removeItem(Ip),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=1e3,P3=10;class FC extends MC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);QV()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,P3):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},A3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}FC.type="LOCAL";const k3=FC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC extends MC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VC.type="SESSION";const UC=VC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new dm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async f=>f(n.origin,a)),h=await R3(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((u,h)=>{const f=uw("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(v.data.response);break;default:clearTimeout(g),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return window}function D3(t){si().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){return typeof si().WorkerGlobalScope<"u"&&typeof si().importScripts=="function"}async function L3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function F3(){return $C()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="firebaseLocalStorageDb",V3=1,Ap="firebaseLocalStorage",BC="fbase_key";class Zd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hm(t,e){return t.transaction([Ap],e?"readwrite":"readonly").objectStore(Ap)}function U3(){const t=indexedDB.deleteDatabase(zC);return new Zd(t).toPromise()}function Yv(){const t=indexedDB.open(zC,V3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ap,{keyPath:BC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ap)?e(r):(r.close(),await U3(),e(await Yv()))})})}async function Zb(t,e,n){const r=hm(t,!0).put({[BC]:e,value:n});return new Zd(r).toPromise()}async function $3(t,e){const n=hm(t,!1).get(e),r=await new Zd(n).toPromise();return r===void 0?null:r.value}function eN(t,e){const n=hm(t,!0).delete(e);return new Zd(n).toPromise()}const z3=800,B3=3;class qC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>B3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $C()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dm._getInstance(F3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await L3(),!this.activeServiceWorker)return;this.sender=new O3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yv();return await Zb(e,Ip,"1"),await eN(e,Ip),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$3(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>eN(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=hm(s,!1).getAll();return new Zd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qC.type="LOCAL";const q3=qC;new Xd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(t,e){return e?Fi(e):(et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw extends lw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _c(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _c(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _c(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function H3(t){return LC(t.auth,new dw(t),t.bypassAuthState)}function K3(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),E3(n,new dw(t),t.bypassAuthState)}async function G3(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),_3(n,new dw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H3;case"linkViaPopup":case"linkViaRedirect":return G3;case"reauthViaPopup":case"reauthViaRedirect":return K3;default:ks(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=new Xd(2e3,1e4);class mc extends WC{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,mc.currentPopupAction&&mc.currentPopupAction.cancel(),mc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){Wi(this.filter.length===1,"Popup operations only handle one event");const e=uw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q3.get())};e()}}mc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3="pendingRedirect",Jf=new Map;class X3 extends WC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Jf.get(this.auth._key());if(!e){try{const r=await J3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Jf.set(this.auth._key(),e)}return this.bypassAuthState||Jf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J3(t,e){const n=tU(e),r=eU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Z3(t,e){Jf.set(t._key(),e)}function eU(t){return Fi(t._redirectPersistence)}function tU(t){return Xf(Y3,t.config.apiKey,t.name)}async function nU(t,e,n=!1){if(Zr(t.app))return Promise.reject(Yo(t));const r=ou(t),s=W3(r,e),c=await new X3(r,s,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU=10*60*1e3;class sU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!HC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ri(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rU&&this.cachedEventUids.clear(),this.cachedEventUids.has(tN(e))}saveEventToCache(e){this.cachedEventUids.add(tN(e)),this.lastProcessedEventTime=Date.now()}}function tN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oU(t,e={}){return ua(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lU=/^https?/;async function cU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oU(t);for(const n of e)try{if(uU(n))return}catch{}ks(t,"unauthorized-domain")}function uU(t){const e=Gv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!lU.test(n))return!1;if(aU.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU=new Xd(3e4,6e4);function nN(){const t=si().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hU(t){return new Promise((e,n)=>{var r,s,a;function c(){nN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nN(),n(ri(t,"network-request-failed"))},timeout:dU.get()})}if(!((s=(r=si().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=si().gapi)===null||a===void 0)&&a.load)c();else{const u=s3("iframefcb");return si()[u]=()=>{gapi.load?c():n(ri(t,"network-request-failed"))},PC(`${r3()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw Zf=null,e})}let Zf=null;function fU(t){return Zf=Zf||hU(t),Zf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=new Xd(5e3,15e3),mU="__/auth/iframe",gU="emulator/auth/iframe",yU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xU(t){const e=t.config;et(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?iw(e,gU):`https://${t.config.authDomain}/${mU}`,r={apiKey:e.apiKey,appName:t.name,v:gl},s=vU.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Yd(r).slice(1)}`}async function wU(t){const e=await fU(t),n=si().gapi;return et(n,t,"internal-error"),e.open({where:document.body,url:xU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yU,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const c=ri(t,"network-request-failed"),u=si().setTimeout(()=>{a(c)},pU.get());function h(){si().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EU=500,bU=600,NU="_blank",SU="http://localhost";class rN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TU(t,e,n,r=EU,s=bU){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},_U),{width:r.toString(),height:s.toString(),top:a,left:c}),f=er().toLowerCase();n&&(u=NC(f)?NU:n),EC(f)&&(e=e||SU,h.scrollbars="yes");const g=Object.entries(h).reduce((v,[w,N])=>`${v}${w}=${N},`,"");if(GV(f)&&u!=="_self")return CU(e||"",u),new rN(null);const y=window.open(e||"",u,g);et(y,t,"popup-blocked");try{y.focus()}catch{}return new rN(y)}function CU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU="__/auth/handler",IU="emulator/auth/handler",AU=encodeURIComponent("fac");async function sN(t,e,n,r,s,a){et(t.config.authDomain,t,"auth-domain-config-required"),et(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gl,eventId:s};if(e instanceof OC){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",yF(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof Jd){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await t._getAppCheckToken(),f=h?`#${AU}=${encodeURIComponent(h)}`:"";return`${PU(t)}?${Yd(u).slice(1)}${f}`}function PU({config:t}){return t.emulator?iw(t,IU):`https://${t.authDomain}/${jU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="webStorageSupport";class kU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UC,this._completeRedirectFn=nU,this._overrideRedirectResult=Z3}async _openPopup(e,n,r,s){var a;Wi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await sN(e,n,r,Gv(),s);return TU(e,c,uw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await sN(e,n,r,Gv(),s);return D3(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Wi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await wU(e),r=new sU(e);return n.register("authEvent",s=>(et(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Uy,{type:Uy},s=>{var a;const c=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Uy];c!==void 0&&n(!!c),ks(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IC()||bC()||aw()}}const RU=kU;var iN="@firebase/auth",oN="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LU(t){Ps(new ss("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;et(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AC(t)},f=new e3(r,s,a,h);return u3(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ps(new ss("auth-internal",e=>{const n=ou(e.getProvider("auth").getImmediate());return(r=>new OU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(iN,oN,DU(t)),Cr(iN,oN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU=5*60,FU=sC("authIdTokenMaxAge")||MU;let aN=null;const VU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>FU)return;const s=n==null?void 0:n.token;aN!==s&&(aN=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function UU(t=rw()){const e=ml(t,"auth");if(e.isInitialized())return e.getImmediate();const n=c3(t,{popupRedirectResolver:RU,persistence:[q3,k3,UC]}),r=sC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=VU(a.toString());C3(n,c,()=>c(n.currentUser)),T3(n,u=>c(u))}}const s=nC("auth");return s&&d3(n,`http://${s}`),n}function $U(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}t3({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=ri("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",$U().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LU("Browser");var zU="firebase",BU="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(zU,BU,"app");var lN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xo,KC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,O){function L(){}L.prototype=O.prototype,k.D=O.prototype,k.prototype=new L,k.prototype.constructor=k,k.C=function(D,I,M){for(var R=Array(arguments.length-2),W=2;W<arguments.length;W++)R[W-2]=arguments[W];return O.prototype[I].apply(D,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,O,L){L||(L=0);var D=Array(16);if(typeof O=="string")for(var I=0;16>I;++I)D[I]=O.charCodeAt(L++)|O.charCodeAt(L++)<<8|O.charCodeAt(L++)<<16|O.charCodeAt(L++)<<24;else for(I=0;16>I;++I)D[I]=O[L++]|O[L++]<<8|O[L++]<<16|O[L++]<<24;O=k.g[0],L=k.g[1],I=k.g[2];var M=k.g[3],R=O+(M^L&(I^M))+D[0]+3614090360&4294967295;O=L+(R<<7&4294967295|R>>>25),R=M+(I^O&(L^I))+D[1]+3905402710&4294967295,M=O+(R<<12&4294967295|R>>>20),R=I+(L^M&(O^L))+D[2]+606105819&4294967295,I=M+(R<<17&4294967295|R>>>15),R=L+(O^I&(M^O))+D[3]+3250441966&4294967295,L=I+(R<<22&4294967295|R>>>10),R=O+(M^L&(I^M))+D[4]+4118548399&4294967295,O=L+(R<<7&4294967295|R>>>25),R=M+(I^O&(L^I))+D[5]+1200080426&4294967295,M=O+(R<<12&4294967295|R>>>20),R=I+(L^M&(O^L))+D[6]+2821735955&4294967295,I=M+(R<<17&4294967295|R>>>15),R=L+(O^I&(M^O))+D[7]+4249261313&4294967295,L=I+(R<<22&4294967295|R>>>10),R=O+(M^L&(I^M))+D[8]+1770035416&4294967295,O=L+(R<<7&4294967295|R>>>25),R=M+(I^O&(L^I))+D[9]+2336552879&4294967295,M=O+(R<<12&4294967295|R>>>20),R=I+(L^M&(O^L))+D[10]+4294925233&4294967295,I=M+(R<<17&4294967295|R>>>15),R=L+(O^I&(M^O))+D[11]+2304563134&4294967295,L=I+(R<<22&4294967295|R>>>10),R=O+(M^L&(I^M))+D[12]+1804603682&4294967295,O=L+(R<<7&4294967295|R>>>25),R=M+(I^O&(L^I))+D[13]+4254626195&4294967295,M=O+(R<<12&4294967295|R>>>20),R=I+(L^M&(O^L))+D[14]+2792965006&4294967295,I=M+(R<<17&4294967295|R>>>15),R=L+(O^I&(M^O))+D[15]+1236535329&4294967295,L=I+(R<<22&4294967295|R>>>10),R=O+(I^M&(L^I))+D[1]+4129170786&4294967295,O=L+(R<<5&4294967295|R>>>27),R=M+(L^I&(O^L))+D[6]+3225465664&4294967295,M=O+(R<<9&4294967295|R>>>23),R=I+(O^L&(M^O))+D[11]+643717713&4294967295,I=M+(R<<14&4294967295|R>>>18),R=L+(M^O&(I^M))+D[0]+3921069994&4294967295,L=I+(R<<20&4294967295|R>>>12),R=O+(I^M&(L^I))+D[5]+3593408605&4294967295,O=L+(R<<5&4294967295|R>>>27),R=M+(L^I&(O^L))+D[10]+38016083&4294967295,M=O+(R<<9&4294967295|R>>>23),R=I+(O^L&(M^O))+D[15]+3634488961&4294967295,I=M+(R<<14&4294967295|R>>>18),R=L+(M^O&(I^M))+D[4]+3889429448&4294967295,L=I+(R<<20&4294967295|R>>>12),R=O+(I^M&(L^I))+D[9]+568446438&4294967295,O=L+(R<<5&4294967295|R>>>27),R=M+(L^I&(O^L))+D[14]+3275163606&4294967295,M=O+(R<<9&4294967295|R>>>23),R=I+(O^L&(M^O))+D[3]+4107603335&4294967295,I=M+(R<<14&4294967295|R>>>18),R=L+(M^O&(I^M))+D[8]+1163531501&4294967295,L=I+(R<<20&4294967295|R>>>12),R=O+(I^M&(L^I))+D[13]+2850285829&4294967295,O=L+(R<<5&4294967295|R>>>27),R=M+(L^I&(O^L))+D[2]+4243563512&4294967295,M=O+(R<<9&4294967295|R>>>23),R=I+(O^L&(M^O))+D[7]+1735328473&4294967295,I=M+(R<<14&4294967295|R>>>18),R=L+(M^O&(I^M))+D[12]+2368359562&4294967295,L=I+(R<<20&4294967295|R>>>12),R=O+(L^I^M)+D[5]+4294588738&4294967295,O=L+(R<<4&4294967295|R>>>28),R=M+(O^L^I)+D[8]+2272392833&4294967295,M=O+(R<<11&4294967295|R>>>21),R=I+(M^O^L)+D[11]+1839030562&4294967295,I=M+(R<<16&4294967295|R>>>16),R=L+(I^M^O)+D[14]+4259657740&4294967295,L=I+(R<<23&4294967295|R>>>9),R=O+(L^I^M)+D[1]+2763975236&4294967295,O=L+(R<<4&4294967295|R>>>28),R=M+(O^L^I)+D[4]+1272893353&4294967295,M=O+(R<<11&4294967295|R>>>21),R=I+(M^O^L)+D[7]+4139469664&4294967295,I=M+(R<<16&4294967295|R>>>16),R=L+(I^M^O)+D[10]+3200236656&4294967295,L=I+(R<<23&4294967295|R>>>9),R=O+(L^I^M)+D[13]+681279174&4294967295,O=L+(R<<4&4294967295|R>>>28),R=M+(O^L^I)+D[0]+3936430074&4294967295,M=O+(R<<11&4294967295|R>>>21),R=I+(M^O^L)+D[3]+3572445317&4294967295,I=M+(R<<16&4294967295|R>>>16),R=L+(I^M^O)+D[6]+76029189&4294967295,L=I+(R<<23&4294967295|R>>>9),R=O+(L^I^M)+D[9]+3654602809&4294967295,O=L+(R<<4&4294967295|R>>>28),R=M+(O^L^I)+D[12]+3873151461&4294967295,M=O+(R<<11&4294967295|R>>>21),R=I+(M^O^L)+D[15]+530742520&4294967295,I=M+(R<<16&4294967295|R>>>16),R=L+(I^M^O)+D[2]+3299628645&4294967295,L=I+(R<<23&4294967295|R>>>9),R=O+(I^(L|~M))+D[0]+4096336452&4294967295,O=L+(R<<6&4294967295|R>>>26),R=M+(L^(O|~I))+D[7]+1126891415&4294967295,M=O+(R<<10&4294967295|R>>>22),R=I+(O^(M|~L))+D[14]+2878612391&4294967295,I=M+(R<<15&4294967295|R>>>17),R=L+(M^(I|~O))+D[5]+4237533241&4294967295,L=I+(R<<21&4294967295|R>>>11),R=O+(I^(L|~M))+D[12]+1700485571&4294967295,O=L+(R<<6&4294967295|R>>>26),R=M+(L^(O|~I))+D[3]+2399980690&4294967295,M=O+(R<<10&4294967295|R>>>22),R=I+(O^(M|~L))+D[10]+4293915773&4294967295,I=M+(R<<15&4294967295|R>>>17),R=L+(M^(I|~O))+D[1]+2240044497&4294967295,L=I+(R<<21&4294967295|R>>>11),R=O+(I^(L|~M))+D[8]+1873313359&4294967295,O=L+(R<<6&4294967295|R>>>26),R=M+(L^(O|~I))+D[15]+4264355552&4294967295,M=O+(R<<10&4294967295|R>>>22),R=I+(O^(M|~L))+D[6]+2734768916&4294967295,I=M+(R<<15&4294967295|R>>>17),R=L+(M^(I|~O))+D[13]+1309151649&4294967295,L=I+(R<<21&4294967295|R>>>11),R=O+(I^(L|~M))+D[4]+4149444226&4294967295,O=L+(R<<6&4294967295|R>>>26),R=M+(L^(O|~I))+D[11]+3174756917&4294967295,M=O+(R<<10&4294967295|R>>>22),R=I+(O^(M|~L))+D[2]+718787259&4294967295,I=M+(R<<15&4294967295|R>>>17),R=L+(M^(I|~O))+D[9]+3951481745&4294967295,k.g[0]=k.g[0]+O&4294967295,k.g[1]=k.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+I&4294967295,k.g[3]=k.g[3]+M&4294967295}r.prototype.u=function(k,O){O===void 0&&(O=k.length);for(var L=O-this.blockSize,D=this.B,I=this.h,M=0;M<O;){if(I==0)for(;M<=L;)s(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<O;)if(D[I++]=k.charCodeAt(M++),I==this.blockSize){s(this,D),I=0;break}}else for(;M<O;)if(D[I++]=k[M++],I==this.blockSize){s(this,D),I=0;break}}this.h=I,this.o+=O},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var O=1;O<k.length-8;++O)k[O]=0;var L=8*this.o;for(O=k.length-8;O<k.length;++O)k[O]=L&255,L/=256;for(this.u(k),k=Array(16),O=L=0;4>O;++O)for(var D=0;32>D;D+=8)k[L++]=this.g[O]>>>D&255;return k};function a(k,O){var L=u;return Object.prototype.hasOwnProperty.call(L,k)?L[k]:L[k]=O(k)}function c(k,O){this.h=O;for(var L=[],D=!0,I=k.length-1;0<=I;I--){var M=k[I]|0;D&&M==O||(L[I]=M,D=!1)}this.g=L}var u={};function h(k){return-128<=k&&128>k?a(k,function(O){return new c([O|0],0>O?-1:0)}):new c([k|0],0>k?-1:0)}function f(k){if(isNaN(k)||!isFinite(k))return y;if(0>k)return _(f(-k));for(var O=[],L=1,D=0;k>=L;D++)O[D]=k/L|0,L*=4294967296;return new c(O,0)}function g(k,O){if(k.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(k.charAt(0)=="-")return _(g(k.substring(1),O));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=f(Math.pow(O,8)),D=y,I=0;I<k.length;I+=8){var M=Math.min(8,k.length-I),R=parseInt(k.substring(I,I+M),O);8>M?(M=f(Math.pow(O,M)),D=D.j(M).add(f(R))):(D=D.j(L),D=D.add(f(R)))}return D}var y=h(0),v=h(1),w=h(16777216);t=c.prototype,t.m=function(){if(x(this))return-_(this).m();for(var k=0,O=1,L=0;L<this.g.length;L++){var D=this.i(L);k+=(0<=D?D:4294967296+D)*O,O*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(x(this))return"-"+_(this).toString(k);for(var O=f(Math.pow(k,6)),L=this,D="";;){var I=F(L,O).g;L=P(L,I.j(O));var M=((0<L.g.length?L.g[0]:L.h)>>>0).toString(k);if(L=I,N(L))return M+D;for(;6>M.length;)M="0"+M;D=M+D}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(var O=0;O<k.g.length;O++)if(k.g[O]!=0)return!1;return!0}function x(k){return k.h==-1}t.l=function(k){return k=P(this,k),x(k)?-1:N(k)?0:1};function _(k){for(var O=k.g.length,L=[],D=0;D<O;D++)L[D]=~k.g[D];return new c(L,~k.h).add(v)}t.abs=function(){return x(this)?_(this):this},t.add=function(k){for(var O=Math.max(this.g.length,k.g.length),L=[],D=0,I=0;I<=O;I++){var M=D+(this.i(I)&65535)+(k.i(I)&65535),R=(M>>>16)+(this.i(I)>>>16)+(k.i(I)>>>16);D=R>>>16,M&=65535,R&=65535,L[I]=R<<16|M}return new c(L,L[L.length-1]&-2147483648?-1:0)};function P(k,O){return k.add(_(O))}t.j=function(k){if(N(this)||N(k))return y;if(x(this))return x(k)?_(this).j(_(k)):_(_(this).j(k));if(x(k))return _(this.j(_(k)));if(0>this.l(w)&&0>k.l(w))return f(this.m()*k.m());for(var O=this.g.length+k.g.length,L=[],D=0;D<2*O;D++)L[D]=0;for(D=0;D<this.g.length;D++)for(var I=0;I<k.g.length;I++){var M=this.i(D)>>>16,R=this.i(D)&65535,W=k.i(I)>>>16,K=k.i(I)&65535;L[2*D+2*I]+=R*K,j(L,2*D+2*I),L[2*D+2*I+1]+=M*K,j(L,2*D+2*I+1),L[2*D+2*I+1]+=R*W,j(L,2*D+2*I+1),L[2*D+2*I+2]+=M*W,j(L,2*D+2*I+2)}for(D=0;D<O;D++)L[D]=L[2*D+1]<<16|L[2*D];for(D=O;D<2*O;D++)L[D]=0;return new c(L,0)};function j(k,O){for(;(k[O]&65535)!=k[O];)k[O+1]+=k[O]>>>16,k[O]&=65535,O++}function C(k,O){this.g=k,this.h=O}function F(k,O){if(N(O))throw Error("division by zero");if(N(k))return new C(y,y);if(x(k))return O=F(_(k),O),new C(_(O.g),_(O.h));if(x(O))return O=F(k,_(O)),new C(_(O.g),O.h);if(30<k.g.length){if(x(k)||x(O))throw Error("slowDivide_ only works with positive integers.");for(var L=v,D=O;0>=D.l(k);)L=U(L),D=U(D);var I=z(L,1),M=z(D,1);for(D=z(D,2),L=z(L,2);!N(D);){var R=M.add(D);0>=R.l(k)&&(I=I.add(L),M=R),D=z(D,1),L=z(L,1)}return O=P(k,I.j(O)),new C(I,O)}for(I=y;0<=k.l(O);){for(L=Math.max(1,Math.floor(k.m()/O.m())),D=Math.ceil(Math.log(L)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),M=f(L),R=M.j(O);x(R)||0<R.l(k);)L-=D,M=f(L),R=M.j(O);N(M)&&(M=v),I=I.add(M),k=P(k,R)}return new C(I,k)}t.A=function(k){return F(this,k).h},t.and=function(k){for(var O=Math.max(this.g.length,k.g.length),L=[],D=0;D<O;D++)L[D]=this.i(D)&k.i(D);return new c(L,this.h&k.h)},t.or=function(k){for(var O=Math.max(this.g.length,k.g.length),L=[],D=0;D<O;D++)L[D]=this.i(D)|k.i(D);return new c(L,this.h|k.h)},t.xor=function(k){for(var O=Math.max(this.g.length,k.g.length),L=[],D=0;D<O;D++)L[D]=this.i(D)^k.i(D);return new c(L,this.h^k.h)};function U(k){for(var O=k.g.length+1,L=[],D=0;D<O;D++)L[D]=k.i(D)<<1|k.i(D-1)>>>31;return new c(L,k.h)}function z(k,O){var L=O>>5;O%=32;for(var D=k.g.length-L,I=[],M=0;M<D;M++)I[M]=0<O?k.i(M+L)>>>O|k.i(M+L+1)<<32-O:k.i(M+L);return new c(I,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,KC=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=g,Xo=c}).apply(typeof lN<"u"?lN:typeof self<"u"?self:typeof window<"u"?window:{});var Rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GC,ed,QC,ep,Xv,YC,XC,JC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,S,A){return p==Array.prototype||p==Object.prototype||(p[S]=A.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rf=="object"&&Rf];for(var S=0;S<p.length;++S){var A=p[S];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=n(this);function s(p,S){if(S)e:{var A=r;p=p.split(".");for(var $=0;$<p.length-1;$++){var ee=p[$];if(!(ee in A))break e;A=A[ee]}p=p[p.length-1],$=A[p],S=S($),S!=$&&S!=null&&e(A,p,{configurable:!0,writable:!0,value:S})}}function a(p,S){p instanceof String&&(p+="");var A=0,$=!1,ee={next:function(){if(!$&&A<p.length){var ae=A++;return{value:S(ae,p[ae]),done:!1}}return $=!0,{done:!0,value:void 0}}};return ee[Symbol.iterator]=function(){return ee},ee}s("Array.prototype.values",function(p){return p||function(){return a(this,function(S,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function h(p){var S=typeof p;return S=S!="object"?S:p?Array.isArray(p)?"array":S:"null",S=="array"||S=="object"&&typeof p.length=="number"}function f(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function g(p,S,A){return p.call.apply(p.bind,arguments)}function y(p,S,A){if(!p)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ee,$),p.apply(S,ee)}}return function(){return p.apply(S,arguments)}}function v(p,S,A){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,v.apply(null,arguments)}function w(p,S){var A=Array.prototype.slice.call(arguments,1);return function(){var $=A.slice();return $.push.apply($,arguments),p.apply(this,$)}}function N(p,S){function A(){}A.prototype=S.prototype,p.aa=S.prototype,p.prototype=new A,p.prototype.constructor=p,p.Qb=function($,ee,ae){for(var Ee=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)Ee[Dt-2]=arguments[Dt];return S.prototype[ee].apply($,Ee)}}function x(p){const S=p.length;if(0<S){const A=Array(S);for(let $=0;$<S;$++)A[$]=p[$];return A}return[]}function _(p,S){for(let A=1;A<arguments.length;A++){const $=arguments[A];if(h($)){const ee=p.length||0,ae=$.length||0;p.length=ee+ae;for(let Ee=0;Ee<ae;Ee++)p[ee+Ee]=$[Ee]}else p.push($)}}class P{constructor(S,A){this.i=S,this.j=A,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function j(p){return/^[\s\xa0]*$/.test(p)}function C(){var p=u.navigator;return p&&(p=p.userAgent)?p:""}function F(p){return F[" "](p),p}F[" "]=function(){};var U=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function z(p,S,A){for(const $ in p)S.call(A,p[$],$,p)}function k(p,S){for(const A in p)S.call(void 0,p[A],A,p)}function O(p){const S={};for(const A in p)S[A]=p[A];return S}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(p,S){let A,$;for(let ee=1;ee<arguments.length;ee++){$=arguments[ee];for(A in $)p[A]=$[A];for(let ae=0;ae<L.length;ae++)A=L[ae],Object.prototype.hasOwnProperty.call($,A)&&(p[A]=$[A])}}function I(p){var S=1;p=p.split(":");const A=[];for(;0<S&&p.length;)A.push(p.shift()),S--;return p.length&&A.push(p.join(":")),A}function M(p){u.setTimeout(()=>{throw p},0)}function R(){var p=oe;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class W{constructor(){this.h=this.g=null}add(S,A){const $=K.get();$.set(S,A),this.h?this.h.next=$:this.g=$,this.h=$}}var K=new P(()=>new X,p=>p.reset());class X{constructor(){this.next=this.g=this.h=null}set(S,A){this.h=S,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,G=!1,oe=new W,le=()=>{const p=u.Promise.resolve(void 0);ie=()=>{p.then(B)}};var B=()=>{for(var p;p=R();){try{p.h.call(p.g)}catch(A){M(A)}var S=K;S.j(p),100>S.h&&(S.h++,p.next=S.g,S.g=p)}G=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const A=()=>{};u.addEventListener("test",A,S),u.removeEventListener("test",A,S)}catch{}return p}();function $e(p,S){if(he.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var A=this.type=p.type,$=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget){if(U){e:{try{F(S.nodeName);var ee=!0;break e}catch{}ee=!1}ee||(S=null)}}else A=="mouseover"?S=p.fromElement:A=="mouseout"&&(S=p.toElement);this.relatedTarget=S,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Ie[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&$e.aa.h.call(this)}}N($e,he);var Ie={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),Se=0;function He(p,S,A,$,ee){this.listener=p,this.proxy=null,this.src=S,this.type=A,this.capture=!!$,this.ha=ee,this.key=++Se,this.da=this.fa=!1}function Fe(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function st(p){this.src=p,this.g={},this.h=0}st.prototype.add=function(p,S,A,$,ee){var ae=p.toString();p=this.g[ae],p||(p=this.g[ae]=[],this.h++);var Ee=ve(p,S,$,ee);return-1<Ee?(S=p[Ee],A||(S.fa=!1)):(S=new He(S,this.src,ae,!!$,ee),S.fa=A,p.push(S)),S};function it(p,S){var A=S.type;if(A in p.g){var $=p.g[A],ee=Array.prototype.indexOf.call($,S,void 0),ae;(ae=0<=ee)&&Array.prototype.splice.call($,ee,1),ae&&(Fe(S),p.g[A].length==0&&(delete p.g[A],p.h--))}}function ve(p,S,A,$){for(var ee=0;ee<p.length;++ee){var ae=p[ee];if(!ae.da&&ae.listener==S&&ae.capture==!!A&&ae.ha==$)return ee}return-1}var je="closure_lm_"+(1e6*Math.random()|0),mt={};function an(p,S,A,$,ee){if(Array.isArray(S)){for(var ae=0;ae<S.length;ae++)an(p,S[ae],A,$,ee);return null}return A=Fs(A),p&&p[we]?p.K(S,A,f($)?!!$.capture:!1,ee):zn(p,S,A,!1,$,ee)}function zn(p,S,A,$,ee,ae){if(!S)throw Error("Invalid event type");var Ee=f(ee)?!!ee.capture:!!ee,Dt=dn(p);if(Dt||(p[je]=Dt=new st(p)),A=Dt.add(S,A,$,Ee,ae),A.proxy)return A;if($=jr(),A.proxy=$,$.src=p,$.listener=A,p.addEventListener)Ce||(ee=Ee),ee===void 0&&(ee=!1),p.addEventListener(S.toString(),$,ee);else if(p.attachEvent)p.attachEvent(Ir(S.toString()),$);else if(p.addListener&&p.removeListener)p.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return A}function jr(){function p(A){return S.call(p.src,p.listener,A)}const S=is;return p}function Lt(p,S,A,$,ee){if(Array.isArray(S))for(var ae=0;ae<S.length;ae++)Lt(p,S[ae],A,$,ee);else $=f($)?!!$.capture:!!$,A=Fs(A),p&&p[we]?(p=p.i,S=String(S).toString(),S in p.g&&(ae=p.g[S],A=ve(ae,A,$,ee),-1<A&&(Fe(ae[A]),Array.prototype.splice.call(ae,A,1),ae.length==0&&(delete p.g[S],p.h--)))):p&&(p=dn(p))&&(S=p.g[S.toString()],p=-1,S&&(p=ve(S,A,$,ee)),(A=-1<p?S[p]:null)&&mn(A))}function mn(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[we])it(S.i,p);else{var A=p.type,$=p.proxy;S.removeEventListener?S.removeEventListener(A,$,p.capture):S.detachEvent?S.detachEvent(Ir(A),$):S.addListener&&S.removeListener&&S.removeListener($),(A=dn(S))?(it(A,p),A.h==0&&(A.src=null,S[je]=null)):Fe(p)}}}function Ir(p){return p in mt?mt[p]:mt[p]="on"+p}function is(p,S){if(p.da)p=!0;else{S=new $e(S,this);var A=p.listener,$=p.ha||p.src;p.fa&&mn(p),p=A.call($,S)}return p}function dn(p){return p=p[je],p instanceof st?p:null}var Ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fs(p){return typeof p=="function"?p:(p[Ms]||(p[Ms]=function(S){return p.handleEvent(S)}),p[Ms])}function zt(){Z.call(this),this.i=new st(this),this.M=this,this.F=null}N(zt,Z),zt.prototype[we]=!0,zt.prototype.removeEventListener=function(p,S,A,$){Lt(this,p,S,A,$)};function kt(p,S){var A,$=p.F;if($)for(A=[];$;$=$.F)A.push($);if(p=p.M,$=S.type||S,typeof S=="string")S=new he(S,p);else if(S instanceof he)S.target=S.target||p;else{var ee=S;S=new he($,p),D(S,ee)}if(ee=!0,A)for(var ae=A.length-1;0<=ae;ae--){var Ee=S.g=A[ae];ee=Bn(Ee,$,!0,S)&&ee}if(Ee=S.g=p,ee=Bn(Ee,$,!0,S)&&ee,ee=Bn(Ee,$,!1,S)&&ee,A)for(ae=0;ae<A.length;ae++)Ee=S.g=A[ae],ee=Bn(Ee,$,!1,S)&&ee}zt.prototype.N=function(){if(zt.aa.N.call(this),this.i){var p=this.i,S;for(S in p.g){for(var A=p.g[S],$=0;$<A.length;$++)Fe(A[$]);delete p.g[S],p.h--}}this.F=null},zt.prototype.K=function(p,S,A,$){return this.i.add(String(p),S,!1,A,$)},zt.prototype.L=function(p,S,A,$){return this.i.add(String(p),S,!0,A,$)};function Bn(p,S,A,$){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();for(var ee=!0,ae=0;ae<S.length;++ae){var Ee=S[ae];if(Ee&&!Ee.da&&Ee.capture==A){var Dt=Ee.listener,Nn=Ee.ha||Ee.src;Ee.fa&&it(p.i,Ee),ee=Dt.call(Nn,$)!==!1&&ee}}return ee&&!$.defaultPrevented}function bn(p,S,A){if(typeof p=="function")A&&(p=v(p,A));else if(p&&typeof p.handleEvent=="function")p=v(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:u.setTimeout(p,S||0)}function Ar(p){p.g=bn(()=>{p.g=null,p.i&&(p.i=!1,Ar(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class os extends Z{constructor(S,A){super(),this.m=S,this.l=A,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Ar(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zr(p){Z.call(this),this.h=p,this.g={}}N(zr,Z);var Vs=[];function gi(p){z(p.g,function(S,A){this.g.hasOwnProperty(A)&&mn(S)},p),p.g={}}zr.prototype.N=function(){zr.aa.N.call(this),gi(this)},zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var as=u.JSON.stringify,qn=u.JSON.parse,Us=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function Ze(){}Ze.prototype.h=null;function Et(p){return p.h||(p.h=p.i())}function gt(){}var Bt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gt(){he.call(this,"d")}N(Gt,he);function ne(){he.call(this,"c")}N(ne,he);var ye={},Ve=null;function Tt(){return Ve=Ve||new zt}ye.La="serverreachability";function lt(p){he.call(this,ye.La,p)}N(lt,he);function yt(p){const S=Tt();kt(S,new lt(S))}ye.STAT_EVENT="statevent";function Re(p,S){he.call(this,ye.STAT_EVENT,p),this.stat=S}N(Re,he);function Qt(p){const S=Tt();kt(S,new Re(S,p))}ye.Ma="timingevent";function yi(p,S){he.call(this,ye.Ma,p),this.size=S}N(yi,he);function ur(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},S)}function $s(){this.g=!0}$s.prototype.xa=function(){this.g=!1};function zs(p,S,A,$,ee,ae){p.info(function(){if(p.g)if(ae)for(var Ee="",Dt=ae.split("&"),Nn=0;Nn<Dt.length;Nn++){var bt=Dt[Nn].split("=");if(1<bt.length){var In=bt[0];bt=bt[1];var gn=In.split("_");Ee=2<=gn.length&&gn[1]=="type"?Ee+(In+"="+bt+"&"):Ee+(In+"=redacted&")}}else Ee=null;else Ee=ae;return"XMLHTTP REQ ("+$+") [attempt "+ee+"]: "+S+`
`+A+`
`+Ee})}function vi(p,S,A,$,ee,ae,Ee){p.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+ee+"]: "+S+`
`+A+`
`+ae+" "+Ee})}function dr(p,S,A,$){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+bl(p,A)+($?" "+$:"")})}function to(p,S){p.info(function(){return"TIMEOUT: "+S})}$s.prototype.info=function(){};function bl(p,S){if(!p.g)return S;if(!S)return null;try{var A=JSON.parse(S);if(A){for(p=0;p<A.length;p++)if(Array.isArray(A[p])){var $=A[p];if(!(2>$.length)){var ee=$[1];if(Array.isArray(ee)&&!(1>ee.length)){var ae=ee[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var Ee=1;Ee<ee.length;Ee++)ee[Ee]=""}}}}return as(A)}catch{return S}}var qt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ls;function ma(){}N(ma,Ze),ma.prototype.g=function(){return new XMLHttpRequest},ma.prototype.i=function(){return{}},ls=new ma;function cs(p,S,A,$){this.j=p,this.i=S,this.l=A,this.R=$||1,this.U=new zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uh}function uh(){this.i=null,this.g="",this.h=!1}var pu={},Sl={};function Tl(p,S,A){p.L=1,p.v=oo(kr(S)),p.m=A,p.P=!0,mu(p,null)}function mu(p,S){p.F=Date.now(),Vt(p),p.A=kr(p.v);var A=p.A,$=p.R;Array.isArray($)||($=[String($)]),lo(A.i,"t",$),p.C=0,A=p.j.J,p.h=new uh,p.g=jh(p.j,A?S:null,!p.m),0<p.O&&(p.M=new os(v(p.Y,p,p.g),p.O)),S=p.U,A=p.g,$=p.ca;var ee="readystatechange";Array.isArray(ee)||(ee&&(Vs[0]=ee.toString()),ee=Vs);for(var ae=0;ae<ee.length;ae++){var Ee=an(A,ee[ae],$||S.handleEvent,!1,S.h||S);if(!Ee)break;S.g[Ee.key]=Ee}S=p.H?O(p.H):{},p.m?(p.u||(p.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,S)):(p.u="GET",p.g.ea(p.A,p.u,null,S)),yt(),zs(p.i,p.u,p.A,p.l,p.R,p.m)}cs.prototype.ca=function(p){p=p.target;const S=this.M;S&&fr(p)==3?S.j():this.Y(p)},cs.prototype.Y=function(p){try{if(p==this.g)e:{const gn=fr(this.g);var S=this.g.Ba();const Wr=this.g.Z();if(!(3>gn)&&(gn!=3||this.g&&(this.h.h||this.g.oa()||_u(this.g)))){this.J||gn!=4||S==7||(S==8||0>=Wr?yt(3):yt(2)),ga(this);var A=this.g.Z();this.X=A;t:if(dh(this)){var $=_u(this.g);p="";var ee=$.length,ae=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Br(this),no(this);var Ee="";break t}this.h.i=new u.TextDecoder}for(S=0;S<ee;S++)this.h.h=!0,p+=this.h.i.decode($[S],{stream:!(ae&&S==ee-1)});$.length=0,this.h.g+=p,this.C=0,Ee=this.h.g}else Ee=this.g.oa();if(this.o=A==200,vi(this.i,this.u,this.A,this.l,this.R,gn,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Dt,Nn=this.g;if((Dt=Nn.g?Nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Dt)){var bt=Dt;break t}}bt=null}if(A=bt)dr(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gu(this,A);else{this.o=!1,this.s=3,Qt(12),Br(this),no(this);break e}}if(this.P){A=!0;let Or;for(;!this.J&&this.C<Ee.length;)if(Or=Km(this,Ee),Or==Sl){gn==4&&(this.s=4,Qt(14),A=!1),dr(this.i,this.l,null,"[Incomplete Response]");break}else if(Or==pu){this.s=4,Qt(15),dr(this.i,this.l,Ee,"[Invalid Chunk]"),A=!1;break}else dr(this.i,this.l,Or,null),gu(this,Or);if(dh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gn!=4||Ee.length!=0||this.h.h||(this.s=1,Qt(16),A=!1),this.o=this.o&&A,!A)dr(this.i,this.l,Ee,"[Invalid Chunked Response]"),Br(this),no(this);else if(0<Ee.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+Ee.length),bu(In),In.M=!0,Qt(11))}}else dr(this.i,this.l,Ee,null),gu(this,Ee);gn==4&&Br(this),this.o&&!this.J&&(gn==4?Ml(this.j,this):(this.o=!1,Vt(this)))}else kl(this.g),A==400&&0<Ee.indexOf("Unknown SID")?(this.s=3,Qt(12)):(this.s=0,Qt(13)),Br(this),no(this)}}}catch{}finally{}};function dh(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Km(p,S){var A=p.C,$=S.indexOf(`
`,A);return $==-1?Sl:(A=Number(S.substring(A,$)),isNaN(A)?pu:($+=1,$+A>S.length?Sl:(S=S.slice($,$+A),p.C=$+A,S)))}cs.prototype.cancel=function(){this.J=!0,Br(this)};function Vt(p){p.S=Date.now()+p.I,hh(p,p.I)}function hh(p,S){if(p.B!=null)throw Error("WatchDog timer not null");p.B=ur(v(p.ba,p),S)}function ga(p){p.B&&(u.clearTimeout(p.B),p.B=null)}cs.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(to(this.i,this.A),this.L!=2&&(yt(),Qt(17)),Br(this),this.s=2,no(this)):hh(this,this.S-p)};function no(p){p.j.G==0||p.J||Ml(p.j,p)}function Br(p){ga(p);var S=p.M;S&&typeof S.ma=="function"&&S.ma(),p.M=null,gi(p.U),p.g&&(S=p.g,p.g=null,S.abort(),S.ma())}function gu(p,S){try{var A=p.j;if(A.G!=0&&(A.g==p||tr(A.h,p))){if(!p.K&&tr(A.h,p)&&A.G==3){try{var $=A.Da.g.parse(S)}catch{$=null}if(Array.isArray($)&&$.length==3){var ee=$;if(ee[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<p.F)Ll(A),ps(A);else break e;Dl(A),Qt(18)}}else A.za=ee[1],0<A.za-A.T&&37500>ee[2]&&A.F&&A.v==0&&!A.C&&(A.C=ur(v(A.Za,A),6e3));if(1>=ph(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else bi(A,11)}else if((p.K||A.g==p)&&Ll(A),!j(S))for(ee=A.Da.g.parse(S),S=0;S<ee.length;S++){let bt=ee[S];if(A.T=bt[0],bt=bt[1],A.G==2)if(bt[0]=="c"){A.K=bt[1],A.ia=bt[2];const In=bt[3];In!=null&&(A.la=In,A.j.info("VER="+A.la));const gn=bt[4];gn!=null&&(A.Aa=gn,A.j.info("SVER="+A.Aa));const Wr=bt[5];Wr!=null&&typeof Wr=="number"&&0<Wr&&($=1.5*Wr,A.L=$,A.j.info("backChannelRequestTimeoutMs_="+$)),$=A;const Or=p.g;if(Or){const ba=Or.g?Or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var ae=$.h;ae.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(yu(ae,ae.h),ae.h=null))}if($.D){const Vl=Or.g?Or.g.getResponseHeader("X-HTTP-Session-Id"):null;Vl&&($.ya=Vl,Mt($.I,$.D,Vl))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-p.F,A.j.info("Handshake RTT: "+A.R+"ms")),$=A;var Ee=p;if($.qa=Ch($,$.J?$.ia:null,$.W),Ee.K){mh($.h,Ee);var Dt=Ee,Nn=$.L;Nn&&(Dt.I=Nn),Dt.B&&(ga(Dt),Vt(Dt)),$.g=Ee}else Ea($);0<A.i.length&&Hs(A)}else bt[0]!="stop"&&bt[0]!="close"||bi(A,7);else A.G==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?bi(A,7):Dn(A):bt[0]!="noop"&&A.l&&A.l.ta(bt),A.v=0)}}yt(4)}catch{}}var fh=class{constructor(p,S){this.g=p,this.map=S}};function ya(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pr(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function ph(p){return p.h?1:p.g?p.g.size:0}function tr(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function yu(p,S){p.g?p.g.add(S):p.h=S}function mh(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}ya.prototype.cancel=function(){if(this.i=gh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function gh(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const A of p.g.values())S=S.concat(A.D);return S}return x(p.i)}function Cl(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(h(p)){for(var S=[],A=p.length,$=0;$<A;$++)S.push(p[$]);return S}S=[],A=0;for($ in p)S[A++]=p[$];return S}function jl(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(h(p)||typeof p=="string"){var S=[];p=p.length;for(var A=0;A<p;A++)S.push(A);return S}S=[],A=0;for(const $ in p)S[A++]=$;return S}}}function ro(p,S){if(p.forEach&&typeof p.forEach=="function")p.forEach(S,void 0);else if(h(p)||typeof p=="string")Array.prototype.forEach.call(p,S,void 0);else for(var A=jl(p),$=Cl(p),ee=$.length,ae=0;ae<ee;ae++)S.call(void 0,$[ae],A&&A[ae],p)}var va=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gm(p,S){if(p){p=p.split("&");for(var A=0;A<p.length;A++){var $=p[A].indexOf("="),ee=null;if(0<=$){var ae=p[A].substring(0,$);ee=p[A].substring($+1)}else ae=p[A];S(ae,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function xi(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof xi){this.h=p.h,xa(this,p.j),this.o=p.o,this.g=p.g,so(this,p.s),this.l=p.l;var S=p.i,A=new Bs;A.i=S.i,S.g&&(A.g=new Map(S.g),A.h=S.h),io(this,A),this.m=p.m}else p&&(S=String(p).match(va))?(this.h=!1,xa(this,S[1]||"",!0),this.o=vt(S[2]||""),this.g=vt(S[3]||"",!0),so(this,S[4]),this.l=vt(S[5]||"",!0),io(this,S[6]||"",!0),this.m=vt(S[7]||"")):(this.h=!1,this.i=new Bs(null,this.h))}xi.prototype.toString=function(){var p=[],S=this.j;S&&p.push(ao(S,Il,!0),":");var A=this.g;return(A||S=="file")&&(p.push("//"),(S=this.o)&&p.push(ao(S,Il,!0),"@"),p.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&p.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&p.push("/"),p.push(ao(A,A.charAt(0)=="/"?xh:vh,!0))),(A=this.i.toString())&&p.push("?",A),(A=this.m)&&p.push("#",ao(A,vu)),p.join("")};function kr(p){return new xi(p)}function xa(p,S,A){p.j=A?vt(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function so(p,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);p.s=S}else p.s=null}function io(p,S,A){S instanceof Bs?(p.i=S,qs(p.i,p.h)):(A||(S=ao(S,wh)),p.i=new Bs(S,p.h))}function Mt(p,S,A){p.i.set(S,A)}function oo(p){return Mt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function vt(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ao(p,S,A){return typeof p=="string"?(p=encodeURI(p).replace(S,yh),A&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function yh(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Il=/[#\/\?@]/g,vh=/[#\?:]/g,xh=/[#\?]/g,wh=/[#\?@]/g,vu=/#/g;function Bs(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function On(p){p.g||(p.g=new Map,p.h=0,p.i&&Gm(p.i,function(S,A){p.add(decodeURIComponent(S.replace(/\+/g," ")),A)}))}t=Bs.prototype,t.add=function(p,S){On(this),this.i=null,p=qr(this,p);var A=this.g.get(p);return A||this.g.set(p,A=[]),A.push(S),this.h+=1,this};function us(p,S){On(p),S=qr(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function ds(p,S){return On(p),S=qr(p,S),p.g.has(S)}t.forEach=function(p,S){On(this),this.g.forEach(function(A,$){A.forEach(function(ee){p.call(S,ee,$,this)},this)},this)},t.na=function(){On(this);const p=Array.from(this.g.values()),S=Array.from(this.g.keys()),A=[];for(let $=0;$<S.length;$++){const ee=p[$];for(let ae=0;ae<ee.length;ae++)A.push(S[$])}return A},t.V=function(p){On(this);let S=[];if(typeof p=="string")ds(this,p)&&(S=S.concat(this.g.get(qr(this,p))));else{p=Array.from(this.g.values());for(let A=0;A<p.length;A++)S=S.concat(p[A])}return S},t.set=function(p,S){return On(this),this.i=null,p=qr(this,p),ds(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},t.get=function(p,S){return p?(p=this.V(p),0<p.length?String(p[0]):S):S};function lo(p,S,A){us(p,S),0<A.length&&(p.i=null,p.g.set(qr(p,S),x(A)),p.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(var A=0;A<S.length;A++){var $=S[A];const ae=encodeURIComponent(String($)),Ee=this.V($);for($=0;$<Ee.length;$++){var ee=ae;Ee[$]!==""&&(ee+="="+encodeURIComponent(String(Ee[$]))),p.push(ee)}}return this.i=p.join("&")};function qr(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function qs(p,S){S&&!p.j&&(On(p),p.i=null,p.g.forEach(function(A,$){var ee=$.toLowerCase();$!=ee&&(us(this,$),lo(this,ee,A))},p)),p.j=S}function Qm(p,S){const A=new $s;if(u.Image){const $=new Image;$.onload=w(hr,A,"TestLoadImage: loaded",!0,S,$),$.onerror=w(hr,A,"TestLoadImage: error",!1,S,$),$.onabort=w(hr,A,"TestLoadImage: abort",!1,S,$),$.ontimeout=w(hr,A,"TestLoadImage: timeout",!1,S,$),u.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=p}else S(!1)}function _h(p,S){const A=new $s,$=new AbortController,ee=setTimeout(()=>{$.abort(),hr(A,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:$.signal}).then(ae=>{clearTimeout(ee),ae.ok?hr(A,"TestPingServer: ok",!0,S):hr(A,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ee),hr(A,"TestPingServer: error",!1,S)})}function hr(p,S,A,$,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),$(A)}catch{}}function Ym(){this.g=new Us}function Eh(p,S,A){const $=A||"";try{ro(p,function(ee,ae){let Ee=ee;f(ee)&&(Ee=as(ee)),S.push($+ae+"="+encodeURIComponent(Ee))})}catch(ee){throw S.push($+"type="+encodeURIComponent("_badmap")),ee}}function wi(p){this.l=p.Ub||null,this.j=p.eb||!1}N(wi,Ze),wi.prototype.g=function(){return new wa(this.l,this.j)},wi.prototype.i=function(p){return function(){return p}}({});function wa(p,S){zt.call(this),this.D=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(wa,zt),t=wa.prototype,t.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=S,this.readyState=1,fs(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(S.body=p),(this.D||u).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hs(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,fs(this)),this.g&&(this.readyState=3,fs(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bh(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function bh(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?hs(this):fs(this),this.readyState==3&&bh(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,hs(this))},t.Qa=function(p){this.g&&(this.response=p,hs(this))},t.ga=function(){this.g&&hs(this)};function hs(p){p.readyState=4,p.l=null,p.j=null,p.v=null,fs(p)}t.setRequestHeader=function(p,S){this.u.append(p,S)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var A=S.next();!A.done;)A=A.value,p.push(A[0]+": "+A[1]),A=S.next();return p.join(`\r
`)};function fs(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function _i(p){let S="";return z(p,function(A,$){S+=$,S+=":",S+=A,S+=`\r
`}),S}function co(p,S,A){e:{for($ in A){var $=!1;break e}$=!0}$||(A=_i(A),typeof p=="string"?A!=null&&encodeURIComponent(String(A)):Mt(p,S,A))}function Yt(p){zt.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Yt,zt);var Xm=/^https?$/i,xu=["POST","PUT"];t=Yt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,S,A,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ls.g(),this.v=this.o?Et(this.o):Et(ls),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(ae){_a(this,ae);return}if(p=A||"",A=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var ee in $)A.set(ee,$[ee]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const ae of $.keys())A.set(ae,$.get(ae));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(A.keys()).find(ae=>ae.toLowerCase()=="content-type"),ee=u.FormData&&p instanceof u.FormData,!(0<=Array.prototype.indexOf.call(xu,S,void 0))||$||ee||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Ee]of A)this.g.setRequestHeader(ae,Ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pl(this),this.u=!0,this.g.send(p),this.u=!1}catch(ae){_a(this,ae)}};function _a(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.m=5,Al(p),Rr(p)}function Al(p){p.A||(p.A=!0,kt(p,"complete"),kt(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,kt(this,"complete"),kt(this,"abort"),Rr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rr(this,!0)),Yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wu(this):this.bb())},t.bb=function(){wu(this)};function wu(p){if(p.h&&typeof c<"u"&&(!p.v[1]||fr(p)!=4||p.Z()!=2)){if(p.u&&fr(p)==4)bn(p.Ea,0,p);else if(kt(p,"readystatechange"),fr(p)==4){p.h=!1;try{const Ee=p.Z();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var A;if(!(A=S)){var $;if($=Ee===0){var ee=String(p.D).match(va)[1]||null;!ee&&u.self&&u.self.location&&(ee=u.self.location.protocol.slice(0,-1)),$=!Xm.test(ee?ee.toLowerCase():"")}A=$}if(A)kt(p,"complete"),kt(p,"success");else{p.m=6;try{var ae=2<fr(p)?p.g.statusText:""}catch{ae=""}p.l=ae+" ["+p.Z()+"]",Al(p)}}finally{Rr(p)}}}}function Rr(p,S){if(p.g){Pl(p);const A=p.g,$=p.v[0]?()=>{}:null;p.g=null,p.v=null,S||kt(p,"ready");try{A.onreadystatechange=$}catch{}}}function Pl(p){p.I&&(u.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function fr(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),qn(S)}};function _u(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function kl(p){const S={};p=(p.g&&2<=fr(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<p.length;$++){if(j(p[$]))continue;var A=I(p[$]);const ee=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ae=S[ee]||[];S[ee]=ae,ae.push(A)}k(S,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ws(p,S,A){return A&&A.internalChannelParams&&A.internalChannelParams[p]||S}function Eu(p){this.Aa=0,this.i=[],this.j=new $s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ws("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ws("baseRetryDelayMs",5e3,p),this.cb=Ws("retryDelaySeedMs",1e4,p),this.Wa=Ws("forwardChannelMaxRetries",2,p),this.wa=Ws("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new ya(p&&p.concurrentRequestLimit),this.Da=new Ym,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Eu.prototype,t.la=8,t.G=1,t.connect=function(p,S,A,$){Qt(0),this.W=p,this.H=S||{},A&&$!==void 0&&(this.H.OSID=A,this.H.OAID=$),this.F=this.X,this.I=Ch(this,null,this.W),Hs(this)};function Dn(p){if(Rl(p),p.G==3){var S=p.U++,A=kr(p.I);if(Mt(A,"SID",p.K),Mt(A,"RID",S),Mt(A,"TYPE","terminate"),Ei(p,A),S=new cs(p,p.j,S),S.L=2,S.v=oo(kr(A)),A=!1,u.navigator&&u.navigator.sendBeacon)try{A=u.navigator.sendBeacon(S.v.toString(),"")}catch{}!A&&u.Image&&(new Image().src=S.v,A=!0),A||(S.g=jh(S.j,null),S.g.ea(S.v)),S.F=Date.now(),Vt(S)}Th(p)}function ps(p){p.g&&(bu(p),p.g.cancel(),p.g=null)}function Rl(p){ps(p),p.u&&(u.clearTimeout(p.u),p.u=null),Ll(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&u.clearTimeout(p.s),p.s=null)}function Hs(p){if(!Pr(p.h)&&!p.s){p.s=!0;var S=p.Ga;ie||le(),G||(ie(),G=!0),oe.add(S,p),p.B=0}}function Jm(p,S){return ph(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=S.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=ur(v(p.Ga,p,S),Sh(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ee=new cs(this,this.j,p);let ae=this.o;if(this.S&&(ae?(ae=O(ae),D(ae,this.S)):ae=this.S),this.m!==null||this.O||(ee.H=ae,ae=null),this.P)e:{for(var S=0,A=0;A<this.i.length;A++){t:{var $=this.i[A];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(S+=$,4096<S){S=A;break e}if(S===4096||A===this.i.length-1){S=A+1;break e}}S=1e3}else S=1e3;S=uo(this,ee,S),A=kr(this.I),Mt(A,"RID",p),Mt(A,"CVER",22),this.D&&Mt(A,"X-HTTP-Session-Id",this.D),Ei(this,A),ae&&(this.O?S="headers="+encodeURIComponent(String(_i(ae)))+"&"+S:this.m&&co(A,this.m,ae)),yu(this.h,ee),this.Ua&&Mt(A,"TYPE","init"),this.P?(Mt(A,"$req",S),Mt(A,"SID","null"),ee.T=!0,Tl(ee,A,null)):Tl(ee,A,S),this.G=2}}else this.G==3&&(p?Ol(this,p):this.i.length==0||Pr(this.h)||Ol(this))};function Ol(p,S){var A;S?A=S.l:A=p.U++;const $=kr(p.I);Mt($,"SID",p.K),Mt($,"RID",A),Mt($,"AID",p.T),Ei(p,$),p.m&&p.o&&co($,p.m,p.o),A=new cs(p,p.j,A,p.B+1),p.m===null&&(A.H=p.o),S&&(p.i=S.D.concat(p.i)),S=uo(p,A,1e3),A.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),yu(p.h,A),Tl(A,$,S)}function Ei(p,S){p.H&&z(p.H,function(A,$){Mt(S,$,A)}),p.l&&ro({},function(A,$){Mt(S,$,A)})}function uo(p,S,A){A=Math.min(p.i.length,A);var $=p.l?v(p.l.Na,p.l,p):null;e:{var ee=p.i;let ae=-1;for(;;){const Ee=["count="+A];ae==-1?0<A?(ae=ee[0].g,Ee.push("ofs="+ae)):ae=0:Ee.push("ofs="+ae);let Dt=!0;for(let Nn=0;Nn<A;Nn++){let bt=ee[Nn].g;const In=ee[Nn].map;if(bt-=ae,0>bt)ae=Math.max(0,ee[Nn].g-100),Dt=!1;else try{Eh(In,Ee,"req"+bt+"_")}catch{$&&$(In)}}if(Dt){$=Ee.join("&");break e}}}return p=p.i.splice(0,A),S.D=p,$}function Ea(p){if(!p.g&&!p.u){p.Y=1;var S=p.Fa;ie||le(),G||(ie(),G=!0),oe.add(S,p),p.v=0}}function Dl(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=ur(v(p.Fa,p),Sh(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,Nh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=ur(v(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qt(10),ps(this),Nh(this))};function bu(p){p.A!=null&&(u.clearTimeout(p.A),p.A=null)}function Nh(p){p.g=new cs(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var S=kr(p.qa);Mt(S,"RID","rpc"),Mt(S,"SID",p.K),Mt(S,"AID",p.T),Mt(S,"CI",p.F?"0":"1"),!p.F&&p.ja&&Mt(S,"TO",p.ja),Mt(S,"TYPE","xmlhttp"),Ei(p,S),p.m&&p.o&&co(S,p.m,p.o),p.L&&(p.g.I=p.L);var A=p.g;p=p.ia,A.L=1,A.v=oo(kr(S)),A.m=null,A.P=!0,mu(A,p)}t.Za=function(){this.C!=null&&(this.C=null,ps(this),Dl(this),Qt(19))};function Ll(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function Ml(p,S){var A=null;if(p.g==S){Ll(p),bu(p),p.g=null;var $=2}else if(tr(p.h,S))A=S.D,mh(p.h,S),$=1;else return;if(p.G!=0){if(S.o)if($==1){A=S.m?S.m.length:0,S=Date.now()-S.F;var ee=p.B;$=Tt(),kt($,new yi($,A)),Hs(p)}else Ea(p);else if(ee=S.s,ee==3||ee==0&&0<S.X||!($==1&&Jm(p,S)||$==2&&Dl(p)))switch(A&&0<A.length&&(S=p.h,S.i=S.i.concat(A)),ee){case 1:bi(p,5);break;case 4:bi(p,10);break;case 3:bi(p,6);break;default:bi(p,2)}}}function Sh(p,S){let A=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(A*=2),A*S}function bi(p,S){if(p.j.info("Error code "+S),S==2){var A=v(p.fb,p),$=p.Xa;const ee=!$;$=new xi($||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||xa($,"https"),oo($),ee?Qm($.toString(),A):_h($.toString(),A)}else Qt(2);p.G=0,p.l&&p.l.sa(S),Th(p),Rl(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Th(p){if(p.G=0,p.ka=[],p.l){const S=gh(p.h);(S.length!=0||p.i.length!=0)&&(_(p.ka,S),_(p.ka,p.i),p.h.i.length=0,x(p.i),p.i.length=0),p.l.ra()}}function Ch(p,S,A){var $=A instanceof xi?kr(A):new xi(A);if($.g!="")S&&($.g=S+"."+$.g),so($,$.s);else{var ee=u.location;$=ee.protocol,S=S?S+"."+ee.hostname:ee.hostname,ee=+ee.port;var ae=new xi(null);$&&xa(ae,$),S&&(ae.g=S),ee&&so(ae,ee),A&&(ae.l=A),$=ae}return A=p.D,S=p.ya,A&&S&&Mt($,A,S),Mt($,"VER",p.la),Ei(p,$),$}function jh(p,S,A){if(S&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Ca&&!p.pa?new Yt(new wi({eb:A})):new Yt(p.pa),S.Ha(p.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nu(){}t=Nu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fl(){}Fl.prototype.g=function(p,S){return new nr(p,S)};function nr(p,S){zt.call(this),this.g=new Eu(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(p?p["X-WebChannel-Client-Profile"]=S.va:p={"X-WebChannel-Client-Profile":S.va}),this.g.S=p,(p=S&&S.Sb)&&!j(p)&&(this.g.m=p),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!j(S)&&(this.g.D=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new Ks(this)}N(nr,zt),nr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nr.prototype.close=function(){Dn(this.g)},nr.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var A={};A.__data__=p,p=A}else this.u&&(A={},A.__data__=as(p),p=A);S.i.push(new fh(S.Ya++,p)),S.G==3&&Hs(S)},nr.prototype.N=function(){this.g.l=null,delete this.j,Dn(this.g),delete this.g,nr.aa.N.call(this)};function Ih(p){Gt.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const A in S){p=A;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}N(Ih,Gt);function Ah(){ne.call(this),this.status=1}N(Ah,ne);function Ks(p){this.g=p}N(Ks,Nu),Ks.prototype.ua=function(){kt(this.g,"a")},Ks.prototype.ta=function(p){kt(this.g,new Ih(p))},Ks.prototype.sa=function(p){kt(this.g,new Ah)},Ks.prototype.ra=function(){kt(this.g,"b")},Fl.prototype.createWebChannel=Fl.prototype.g,nr.prototype.send=nr.prototype.o,nr.prototype.open=nr.prototype.m,nr.prototype.close=nr.prototype.close,JC=function(){return new Fl},XC=function(){return Tt()},YC=ye,Xv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qt.NO_ERROR=0,qt.TIMEOUT=8,qt.HTTP_ERROR=6,ep=qt,Nl.COMPLETE="complete",QC=Nl,gt.EventType=Bt,Bt.OPEN="a",Bt.CLOSE="b",Bt.ERROR="c",Bt.MESSAGE="d",zt.prototype.listen=zt.prototype.K,ed=gt,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,GC=Yt}).apply(typeof Rf<"u"?Rf:typeof self<"u"?self:typeof window<"u"?window:{});const cN="@firebase/firestore",uN="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Er.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new tw("@firebase/firestore");function dc(){return sl.logLevel}function ke(t,...e){if(sl.logLevel<=ft.DEBUG){const n=e.map(hw);sl.debug(`Firestore (${lu}): ${t}`,...n)}}function Hi(t,...e){if(sl.logLevel<=ft.ERROR){const n=e.map(hw);sl.error(`Firestore (${lu}): ${t}`,...n)}}function il(t,...e){if(sl.logLevel<=ft.WARN){const n=e.map(hw);sl.warn(`Firestore (${lu}): ${t}`,...n)}}function hw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ZC(t,r,n)}function ZC(t,e,n){let r=`FIRESTORE (${lu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Hi(r),new Error(r)}function Ot(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ZC(e,s,r)}function at(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Ds{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Er.UNAUTHENTICATED))}shutdown(){}}class HU{constructor(e){this.t=e,this.currentUser=Er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ot(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let a=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ui,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},u=h=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ui)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ot(typeof r.accessToken=="string",31837,{l:r}),new qU(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ot(e===null||typeof e=="string",2055,{h:e}),new Er(e)}}class KU{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Er.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class GU{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new KU(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QU{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ot(this.o===void 0,3512);const r=a=>{a.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dN(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ot(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new dN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=YU(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function ut(t,e){return t<e?-1:t>e?1:0}function Jv(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ut(r,s);{const a=ej(),c=XU(a.encode(hN(t,n)),a.encode(hN(e,n)));return c!==0?c:ut(r,s)}}n+=r>65535?2:1}return ut(t.length,e.length)}function hN(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function XU(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ut(t[n],e[n]);return ut(t.length,e.length)}function Wc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="__name__";class Js{constructor(e,n,r){n===void 0?n=0:n>e.length&&tt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&tt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Js.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Js?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Js.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return ut(e.length,n.length)}static compareSegments(e,n){const r=Js.isNumericId(e),s=Js.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Js.extractNumericId(e).compare(Js.extractNumericId(n)):Jv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xo.fromString(e.substring(4,e.length-2))}}class Ft extends Js{construct(e,n,r){return new Ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ft(n)}static emptyPath(){return new Ft([])}}const JU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Un extends Js{construct(e,n,r){return new Un(e,n,r)}static isValidIdentifier(e){return JU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Un.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zv}static keyField(){return new Un([Zv])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new be(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new be(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new be(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(a(),s++)}if(a(),c)throw new be(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Un(n)}static emptyPath(){return new Un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.path=e}static fromPath(e){return new We(Ft.fromString(e))}static fromName(e){return new We(Ft.fromString(e).popFirst(5))}static empty(){return new We(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t,e,n){if(!n)throw new be(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZU(t,e,n,r){if(e===!0&&r===!0)throw new be(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fN(t){if(!We.isDocumentKey(t))throw new be(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pN(t){if(We.isDocumentKey(t))throw new be(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tj(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function fm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":tt(12329,{type:typeof t})}function ar(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new be(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fm(t);throw new be(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,e){const n={typeString:t};return e&&(n.value=e),n}function eh(t,e){if(!tj(t))throw new be(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const c=t[r];if(s&&typeof c!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&c!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new be(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=-62135596800,gN=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*gN);return new ht(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<mN)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gN}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(eh(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:_n("string",ht._jsonSchemaVersion),seconds:_n("number"),nanoseconds:_n("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{static fromTimestamp(e){return new ot(e)}static min(){return new ot(new ht(0,0))}static max(){return new ot(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=-1;function e6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ot.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new sa(s,We.empty(),e)}function t6(t){return new sa(t.readTime,t.key,Ad)}class sa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new sa(ot.min(),We.empty(),Ad)}static max(){return new sa(ot.max(),We.empty(),Ad)}}function n6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=We.comparator(t.documentKey,e.documentKey),n!==0?n:ut(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class s6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cu(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==r6)throw t;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ue.reject(n)}static resolve(e){return new ue((n,r)=>{n(e)})}static reject(e){return new ue((n,r)=>{r(e)})}static waitFor(e){return new ue((n,r)=>{let s=0,a=0,c=!1;e.forEach(u=>{++s,u.next(()=>{++a,c&&a===s&&n()},h=>r(h))}),c=!0,a===s&&n()})}static or(e){let n=ue.resolve(!1);for(const r of e)n=n.next(s=>s?ue.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new ue((r,s)=>{const a=e.length,c=new Array(a);let u=0;for(let h=0;h<a;h++){const f=h;n(e[f]).next(g=>{c[f]=g,++u,u===a&&r(c)},g=>s(g))}})}static doWhile(e,n){return new ue((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function i6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function uu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}pm.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=-1;function mm(t){return t==null}function Pp(t){return t===0&&1/t==-1/0}function o6(t){return typeof t=="number"&&Number.isInteger(t)&&!Pp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="";function a6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yN(e)),e=l6(t.get(n),e);return yN(e)}function l6(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case nj:n+="";break;default:n+=a}}return n}function yN(t){return t+nj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function da(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n){this.comparator=e,this.root=n||Fn.EMPTY}insert(e,n){return new on(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new on(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Of(this.root,e,this.comparator,!1)}getReverseIterator(){return new Of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Of(this.root,e,this.comparator,!0)}}class Of{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Fn.RED,this.left=s??Fn.EMPTY,this.right=a??Fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Fn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Fn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tt(27949);return e+(this.isRed()?0:1)}}Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new Fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.comparator=e,this.data=new on(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xN(this.data.getIterator())}getIteratorFrom(e){return new xN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Cn(this.comparator);return n.data=e,n}}class xN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.fields=e,e.sort(Un.comparator)}static empty(){return new Ur([])}unionWith(e){let n=new Cn(Un.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ur(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new sj("Invalid base64 string: "+a):a}}(e);return new $n(n)}static fromUint8Array(e){const n=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new $n(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$n.EMPTY_BYTE_STRING=new $n("");const c6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ia(t){if(Ot(!!t,39018),typeof t=="string"){let e=0;const n=c6.exec(t);if(Ot(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fn(t.seconds),nanos:fn(t.nanos)}}function fn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oa(t){return typeof t=="string"?$n.fromBase64String(t):$n.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij="server_timestamp",oj="__type__",aj="__previous_value__",lj="__local_write_time__";function gw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[oj])===null||n===void 0?void 0:n.stringValue)===ij}function gm(t){const e=t.mapValue.fields[aj];return gw(e)?gm(e):e}function Pd(t){const e=ia(t.mapValue.fields[lj].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,n,r,s,a,c,u,h,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const kp="(default)";class kd{constructor(e,n){this.projectId=e,this.database=n||kp}static empty(){return new kd("","")}get isDefaultDatabase(){return this.database===kp}isEqual(e){return e instanceof kd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj="__type__",d6="__max__",Df={mapValue:{}},uj="__vector__",Rp="value";function aa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gw(t)?4:f6(t)?9007199254740991:h6(t)?10:11:tt(28295,{value:t})}function ui(t,e){if(t===e)return!0;const n=aa(t);if(n!==aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pd(t).isEqual(Pd(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=ia(s.timestampValue),u=ia(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return oa(s.bytesValue).isEqual(oa(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return fn(s.geoPointValue.latitude)===fn(a.geoPointValue.latitude)&&fn(s.geoPointValue.longitude)===fn(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return fn(s.integerValue)===fn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=fn(s.doubleValue),u=fn(a.doubleValue);return c===u?Pp(c)===Pp(u):isNaN(c)&&isNaN(u)}return!1}(t,e);case 9:return Wc(t.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},u=a.mapValue.fields||{};if(vN(c)!==vN(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!ui(c[h],u[h])))return!1;return!0}(t,e);default:return tt(52216,{left:t})}}function Rd(t,e){return(t.values||[]).find(n=>ui(n,e))!==void 0}function Hc(t,e){if(t===e)return 0;const n=aa(t),r=aa(e);if(n!==r)return ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(t.booleanValue,e.booleanValue);case 2:return function(a,c){const u=fn(a.integerValue||a.doubleValue),h=fn(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return wN(t.timestampValue,e.timestampValue);case 4:return wN(Pd(t),Pd(e));case 5:return Jv(t.stringValue,e.stringValue);case 6:return function(a,c){const u=oa(a),h=oa(c);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const u=a.split("/"),h=c.split("/");for(let f=0;f<u.length&&f<h.length;f++){const g=ut(u[f],h[f]);if(g!==0)return g}return ut(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const u=ut(fn(a.latitude),fn(c.latitude));return u!==0?u:ut(fn(a.longitude),fn(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _N(t.arrayValue,e.arrayValue);case 10:return function(a,c){var u,h,f,g;const y=a.fields||{},v=c.fields||{},w=(u=y[Rp])===null||u===void 0?void 0:u.arrayValue,N=(h=v[Rp])===null||h===void 0?void 0:h.arrayValue,x=ut(((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0,((g=N==null?void 0:N.values)===null||g===void 0?void 0:g.length)||0);return x!==0?x:_N(w,N)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===Df.mapValue&&c===Df.mapValue)return 0;if(a===Df.mapValue)return 1;if(c===Df.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),f=c.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const v=Jv(h[y],g[y]);if(v!==0)return v;const w=Hc(u[h[y]],f[g[y]]);if(w!==0)return w}return ut(h.length,g.length)}(t.mapValue,e.mapValue);default:throw tt(23264,{le:n})}}function wN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ut(t,e);const n=ia(t),r=ia(e),s=ut(n.seconds,r.seconds);return s!==0?s:ut(n.nanos,r.nanos)}function _N(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Hc(n[s],r[s]);if(a)return a}return ut(n.length,r.length)}function Kc(t){return ex(t)}function ex(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ia(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return oa(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return We.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=ex(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${ex(n.fields[c])}`;return s+"}"}(t.mapValue):tt(61005,{value:t})}function tp(t){switch(aa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gm(t);return e?16+tp(e):16;case 5:return 2*t.stringValue.length;case 6:return oa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+tp(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return da(r.fields,(a,c)=>{s+=a.length+tp(c)}),s}(t.mapValue);default:throw tt(13486,{value:t})}}function EN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tx(t){return!!t&&"integerValue"in t}function yw(t){return!!t&&"arrayValue"in t}function bN(t){return!!t&&"nullValue"in t}function NN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function np(t){return!!t&&"mapValue"in t}function h6(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[cj])===null||n===void 0?void 0:n.stringValue)===uj}function hd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return da(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=hd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function f6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===d6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.value=e}static empty(){return new Nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!np(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hd(n)}setAll(e){let n=Un.emptyPath(),r={},s=[];e.forEach((c,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,s),r={},s=[],n=u.popLast()}c?r[u.lastSegment()]=hd(c):s.push(u.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());np(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];np(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){da(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Nr(hd(this.value))}}function dj(t){const e=[];return da(t.fields,(n,r)=>{const s=new Un([n]);if(np(r)){const a=dj(r.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new Ur(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n,r,s,a,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Xn(e,0,ot.min(),ot.min(),ot.min(),Nr.empty(),0)}static newFoundDocument(e,n,r,s){return new Xn(e,1,n,ot.min(),r,s,0)}static newNoDocument(e,n){return new Xn(e,2,n,ot.min(),ot.min(),Nr.empty(),0)}static newUnknownDocument(e,n){return new Xn(e,3,n,ot.min(),ot.min(),Nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n){this.position=e,this.inclusive=n}}function SN(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],c=t.position[s];if(a.field.isKeyField()?r=We.comparator(We.fromName(c.referenceValue),n.key):r=Hc(c,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function TN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ui(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n="asc"){this.field=e,this.dir=n}}function p6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{}class wn extends hj{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new g6(e,n,r):n==="array-contains"?new x6(e,r):n==="in"?new w6(e,r):n==="not-in"?new _6(e,r):n==="array-contains-any"?new E6(e,r):new wn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new y6(e,r):new v6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hc(n,this.value)):n!==null&&aa(this.value)===aa(n)&&this.matchesComparison(Hc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rs extends hj{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Rs(e,n)}matches(e){return fj(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function fj(t){return t.op==="and"}function pj(t){return m6(t)&&fj(t)}function m6(t){for(const e of t.filters)if(e instanceof Rs)return!1;return!0}function nx(t){if(t instanceof wn)return t.field.canonicalString()+t.op.toString()+Kc(t.value);if(pj(t))return t.filters.map(e=>nx(e)).join(",");{const e=t.filters.map(n=>nx(n)).join(",");return`${t.op}(${e})`}}function mj(t,e){return t instanceof wn?function(r,s){return s instanceof wn&&r.op===s.op&&r.field.isEqual(s.field)&&ui(r.value,s.value)}(t,e):t instanceof Rs?function(r,s){return s instanceof Rs&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,c,u)=>a&&mj(c,s.filters[u]),!0):!1}(t,e):void tt(19439)}function gj(t){return t instanceof wn?function(n){return`${n.field.canonicalString()} ${n.op} ${Kc(n.value)}`}(t):t instanceof Rs?function(n){return n.op.toString()+" {"+n.getFilters().map(gj).join(" ,")+"}"}(t):"Filter"}class g6 extends wn{constructor(e,n,r){super(e,n,r),this.key=We.fromName(r.referenceValue)}matches(e){const n=We.comparator(e.key,this.key);return this.matchesComparison(n)}}class y6 extends wn{constructor(e,n){super(e,"in",n),this.keys=yj("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class v6 extends wn{constructor(e,n){super(e,"not-in",n),this.keys=yj("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yj(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>We.fromName(r.referenceValue))}class x6 extends wn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yw(n)&&Rd(n.arrayValue,this.value)}}class w6 extends wn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Rd(this.value.arrayValue,n)}}class _6 extends wn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rd(this.value.arrayValue,n)}}class E6 extends wn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Rd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,n=null,r=[],s=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=u,this.Pe=null}}function CN(t,e=null,n=[],r=[],s=null,a=null,c=null){return new b6(t,e,n,r,s,a,c)}function vw(t){const e=at(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nx(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),mm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Kc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Kc(r)).join(",")),e.Pe=n}return e.Pe}function xw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!p6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TN(t.startAt,e.startAt)&&TN(t.endAt,e.endAt)}function rx(t){return We.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n=null,r=[],s=[],a=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function N6(t,e,n,r,s,a,c,u){return new vl(t,e,n,r,s,a,c,u)}function ym(t){return new vl(t)}function jN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vj(t){return t.collectionGroup!==null}function fd(t){const e=at(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Cn(Un.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Od(a,r))}),n.has(Un.keyField().canonicalString())||e.Te.push(new Od(Un.keyField(),r))}return e.Te}function ii(t){const e=at(t);return e.Ie||(e.Ie=S6(e,fd(t))),e.Ie}function S6(t,e){if(t.limitType==="F")return CN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Od(s.field,a)});const n=t.endAt?new Op(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Op(t.startAt.position,t.startAt.inclusive):null;return CN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sx(t,e){const n=t.filters.concat([e]);return new vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ix(t,e,n){return new vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vm(t,e){return xw(ii(t),ii(e))&&t.limitType===e.limitType}function xj(t){return`${vw(ii(t))}|lt:${t.limitType}`}function hc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>gj(s)).join(", ")}]`),mm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Kc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Kc(s)).join(",")),`Target(${r})`}(ii(t))}; limitType=${t.limitType})`}function xm(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):We.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of fd(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(c,u,h){const f=SN(c,u,h);return c.inclusive?f<=0:f<0}(r.startAt,fd(r),s)||r.endAt&&!function(c,u,h){const f=SN(c,u,h);return c.inclusive?f>=0:f>0}(r.endAt,fd(r),s))}(t,e)}function T6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wj(t){return(e,n)=>{let r=!1;for(const s of fd(t)){const a=C6(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function C6(t,e,n){const r=t.field.isKeyField()?We.comparator(e.key,n.key):function(a,c,u){const h=c.data.field(a),f=u.data.field(a);return h!==null&&f!==null?Hc(h,f):tt(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return rj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=new on(We.comparator);function Ki(){return j6}const _j=new on(We.comparator);function td(...t){let e=_j;for(const n of t)e=e.insert(n.key,n);return e}function Ej(t){let e=_j;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ma(){return pd()}function bj(){return pd()}function pd(){return new xl(t=>t.toString(),(t,e)=>t.isEqual(e))}const I6=new on(We.comparator),A6=new Cn(We.comparator);function pt(...t){let e=A6;for(const n of t)e=e.add(n);return e}const P6=new Cn(ut);function k6(){return P6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pp(e)?"-0":e}}function Nj(t){return{integerValue:""+t}}function R6(t,e){return o6(e)?Nj(e):ww(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this._=void 0}}function O6(t,e,n){return t instanceof Dd?function(s,a){const c={fields:{[oj]:{stringValue:ij},[lj]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&gw(a)&&(a=gm(a)),a&&(c.fields[aj]=a),{mapValue:c}}(n,e):t instanceof Ld?Tj(t,e):t instanceof Md?Cj(t,e):function(s,a){const c=Sj(s,a),u=IN(c)+IN(s.Ee);return tx(c)&&tx(s.Ee)?Nj(u):ww(s.serializer,u)}(t,e)}function D6(t,e,n){return t instanceof Ld?Tj(t,e):t instanceof Md?Cj(t,e):n}function Sj(t,e){return t instanceof Dp?function(r){return tx(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Dd extends wm{}class Ld extends wm{constructor(e){super(),this.elements=e}}function Tj(t,e){const n=jj(e);for(const r of t.elements)n.some(s=>ui(s,r))||n.push(r);return{arrayValue:{values:n}}}class Md extends wm{constructor(e){super(),this.elements=e}}function Cj(t,e){let n=jj(e);for(const r of t.elements)n=n.filter(s=>!ui(s,r));return{arrayValue:{values:n}}}class Dp extends wm{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function IN(t){return fn(t.integerValue||t.doubleValue)}function jj(t){return yw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n){this.field=e,this.transform=n}}function M6(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ld&&s instanceof Ld||r instanceof Md&&s instanceof Md?Wc(r.elements,s.elements,ui):r instanceof Dp&&s instanceof Dp?ui(r.Ee,s.Ee):r instanceof Dd&&s instanceof Dd}(t.transform,e.transform)}class F6{constructor(e,n){this.version=e,this.transformResults=n}}class lr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _m{}function Ij(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Em(t.key,lr.none()):new th(t.key,t.data,lr.none());{const n=t.data,r=Nr.empty();let s=new Cn(Un.comparator);for(let a of e.fields)if(!s.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?r.delete(a):r.set(a,c),s=s.add(a)}return new ha(t.key,r,new Ur(s.toArray()),lr.none())}}function V6(t,e,n){t instanceof th?function(s,a,c){const u=s.value.clone(),h=PN(s.fieldTransforms,a,c.transformResults);u.setAll(h),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ha?function(s,a,c){if(!rp(s.precondition,a))return void a.convertToUnknownDocument(c.version);const u=PN(s.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(Aj(s)),h.setAll(u),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(t,e,n):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function md(t,e,n,r){return t instanceof th?function(a,c,u,h){if(!rp(a.precondition,c))return u;const f=a.value.clone(),g=kN(a.fieldTransforms,h,c);return f.setAll(g),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof ha?function(a,c,u,h){if(!rp(a.precondition,c))return u;const f=kN(a.fieldTransforms,h,c),g=c.data;return g.setAll(Aj(a)),g.setAll(f),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(a,c,u){return rp(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(t,e,n)}function U6(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=Sj(r.transform,s||null);a!=null&&(n===null&&(n=Nr.empty()),n.set(r.field,a))}return n||null}function AN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Wc(r,s,(a,c)=>M6(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class th extends _m{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ha extends _m{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Aj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function PN(t,e,n){const r=new Map;Ot(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const a=t[s],c=a.transform,u=e.data.field(a.field);r.set(a.field,D6(c,u,n[s]))}return r}function kN(t,e,n){const r=new Map;for(const s of t){const a=s.transform,c=n.data.field(s.field);r.set(s.field,O6(a,c,e))}return r}class Em extends _m{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $6 extends _m{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&V6(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=md(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=md(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bj();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=n.has(s.key)?null:u;const h=Ij(c,u);h!==null&&r.set(s.key,h),c.isValidDocument()||c.convertToNoDocument(ot.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pt())}isEqual(e){return this.batchId===e.batchId&&Wc(this.mutations,e.mutations,(n,r)=>AN(n,r))&&Wc(this.baseMutations,e.baseMutations,(n,r)=>AN(n,r))}}class _w{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ot(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return I6}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new _w(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B6=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn,Nt;function W6(t){switch(t){case ce.OK:return tt(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return tt(15467,{code:t})}}function Pj(t){if(t===void 0)return Hi("GRPC error has no .code"),ce.UNKNOWN;switch(t){case vn.OK:return ce.OK;case vn.CANCELLED:return ce.CANCELLED;case vn.UNKNOWN:return ce.UNKNOWN;case vn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case vn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case vn.INTERNAL:return ce.INTERNAL;case vn.UNAVAILABLE:return ce.UNAVAILABLE;case vn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case vn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case vn.NOT_FOUND:return ce.NOT_FOUND;case vn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case vn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case vn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case vn.ABORTED:return ce.ABORTED;case vn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case vn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case vn.DATA_LOSS:return ce.DATA_LOSS;default:return tt(39323,{code:t})}}(Nt=vn||(vn={}))[Nt.OK=0]="OK",Nt[Nt.CANCELLED=1]="CANCELLED",Nt[Nt.UNKNOWN=2]="UNKNOWN",Nt[Nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nt[Nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nt[Nt.NOT_FOUND=5]="NOT_FOUND",Nt[Nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nt[Nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nt[Nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nt[Nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nt[Nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nt[Nt.ABORTED=10]="ABORTED",Nt[Nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nt[Nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nt[Nt.INTERNAL=13]="INTERNAL",Nt[Nt.UNAVAILABLE=14]="UNAVAILABLE",Nt[Nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6=new Xo([4294967295,4294967295],0);function RN(t){const e=ej().encode(t),n=new KC;return n.update(e),new Uint8Array(n.digest())}function ON(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Xo([n,r],0),new Xo([s,a],0)]}class Ew{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nd(`Invalid padding: ${n}`);if(r<0)throw new nd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new nd(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Xo.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Xo.fromNumber(r)));return s.compare(H6)===1&&(s=new Xo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=RN(e),[r,s]=ON(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);if(!this.ye(c))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new Ew(a,s,n);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const n=RN(e),[r,s]=ON(n);for(let a=0;a<this.hashCount;a++){const c=this.pe(r,s,a);this.we(c)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class nd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,nh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bm(ot.min(),s,new on(ut),Ki(),pt())}}class nh{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nh(r,n,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class kj{constructor(e,n){this.targetId=e,this.De=n}}class Rj{constructor(e,n,r=$n.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class DN{constructor(){this.ve=0,this.Ce=LN(),this.Fe=$n.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=pt(),n=pt(),r=pt();return this.Ce.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:tt(38017,{changeType:a})}}),new nh(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=LN()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ot(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class K6{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ki(),this.je=Lf(),this.Je=Lf(),this.He=new on(ut)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:tt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const a=s.target;if(rx(a))if(r===0){const c=new We(a.path);this.Xe(n,c,Xn.newNoDocument(c,ot.min()))}else Ot(r===1,20013,{expectedCount:r});else{const c=this.ot(n);if(c!==r){const u=this._t(e),h=u?this.ut(u,e,c):1;if(h!==0){this.rt(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let c,u;try{c=oa(r).toUint8Array()}catch(h){if(h instanceof sj)return il("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Ew(c,s,a)}catch(h){return il(h instanceof nd?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.fe===0?null:u}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.Xe(n,a,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((a,c)=>{const u=this.st(c);if(u){if(a.current&&rx(u.target)){const h=new We(u.target.path);this.Tt(h).has(c)||this.It(c,h)||this.Xe(c,h,Xn.newNoDocument(h,e))}a.Ne&&(n.set(c,a.Le()),a.ke())}});let r=pt();this.Je.forEach((a,c)=>{let u=!0;c.forEachWhile(h=>{const f=this.st(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const s=new bm(e,n,this.He,this.ze,r);return this.ze=Ki(),this.je=Lf(),this.Je=Lf(),this.He=new on(ut),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new DN,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Cn(ut),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Cn(ut),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new DN),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Lf(){return new on(We.comparator)}function LN(){return new on(We.comparator)}const G6={asc:"ASCENDING",desc:"DESCENDING"},Q6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y6={and:"AND",or:"OR"};class X6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ox(t,e){return t.useProto3Json||mm(e)?e:{value:e}}function Lp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Oj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function J6(t,e){return Lp(t,e.toTimestamp())}function oi(t){return Ot(!!t,49232),ot.fromTimestamp(function(n){const r=ia(n);return new ht(r.seconds,r.nanos)}(t))}function bw(t,e){return ax(t,e).canonicalString()}function ax(t,e){const n=function(s){return new Ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Dj(t){const e=Ft.fromString(t);return Ot(Uj(e),10190,{key:e.toString()}),e}function lx(t,e){return bw(t.databaseId,e.path)}function $y(t,e){const n=Dj(e);if(n.get(1)!==t.databaseId.projectId)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new be(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new We(Mj(n))}function Lj(t,e){return bw(t.databaseId,e)}function Z6(t){const e=Dj(t);return e.length===4?Ft.emptyPath():Mj(e)}function cx(t){return new Ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Mj(t){return Ot(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function MN(t,e,n){return{name:lx(t,e),fields:n.value.mapValue.fields}}function e5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:tt(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,g){return f.useProto3Json?(Ot(g===void 0||typeof g=="string",58123),$n.fromBase64String(g||"")):(Ot(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),$n.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(f){const g=f.code===void 0?ce.UNKNOWN:Pj(f.code);return new be(g,f.message||"")}(c);n=new Rj(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=$y(t,r.document.name),a=oi(r.document.updateTime),c=r.document.createTime?oi(r.document.createTime):ot.min(),u=new Nr({mapValue:{fields:r.document.fields}}),h=Xn.newFoundDocument(s,a,c,u),f=r.targetIds||[],g=r.removedTargetIds||[];n=new sp(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=$y(t,r.document),a=r.readTime?oi(r.readTime):ot.min(),c=Xn.newNoDocument(s,a),u=r.removedTargetIds||[];n=new sp([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=$y(t,r.document),a=r.removedTargetIds||[];n=new sp([],a,s,null)}else{if(!("filter"in e))return tt(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,c=new q6(s,a),u=r.targetId;n=new kj(u,c)}}return n}function t5(t,e){let n;if(e instanceof th)n={update:MN(t,e.key,e.value)};else if(e instanceof Em)n={delete:lx(t,e.key)};else if(e instanceof ha)n={update:MN(t,e.key,e.data),updateMask:u5(e.fieldMask)};else{if(!(e instanceof $6))return tt(16599,{Rt:e.type});n={verify:lx(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const u=c.transform;if(u instanceof Dd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ld)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Md)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Dp)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw tt(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:J6(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:tt(27497)}(t,e.precondition)),n}function n5(t,e){return t&&t.length>0?(Ot(e!==void 0,14353),t.map(n=>function(s,a){let c=s.updateTime?oi(s.updateTime):oi(a);return c.isEqual(ot.min())&&(c=oi(a)),new F6(c,s.transformResults||[])}(n,e))):[]}function r5(t,e){return{documents:[Lj(t,e.path)]}}function s5(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Lj(t,s);const a=function(f){if(f.length!==0)return Vj(Rs.create(f,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(f){if(f.length!==0)return f.map(g=>function(v){return{field:fc(v.field),direction:a5(v.dir)}}(g))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=ox(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:n,parent:s}}function i5(t){let e=Z6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ot(r===1,65062);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=function(y){const v=Fj(y);return v instanceof Rs&&pj(v)?v.getFilters():[v]}(n.where));let c=[];n.orderBy&&(c=function(y){return y.map(v=>function(N){return new Od(pc(N.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(y){let v;return v=typeof y=="object"?y.value:y,mm(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(y){const v=!!y.before,w=y.values||[];return new Op(w,v)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const v=!y.before,w=y.values||[];return new Op(w,v)}(n.endAt)),N6(e,s,c,a,u,"F",h,f)}function o5(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Fj(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=pc(n.unaryFilter.field);return wn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=pc(n.unaryFilter.field);return wn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=pc(n.unaryFilter.field);return wn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=pc(n.unaryFilter.field);return wn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}}(t):t.fieldFilter!==void 0?function(n){return wn.create(pc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Rs.create(n.compositeFilter.filters.map(r=>Fj(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return tt(1026)}}(n.compositeFilter.op))}(t):tt(30097,{filter:t})}function a5(t){return G6[t]}function l5(t){return Q6[t]}function c5(t){return Y6[t]}function fc(t){return{fieldPath:t.canonicalString()}}function pc(t){return Un.fromServerFormat(t.fieldPath)}function Vj(t){return t instanceof wn?function(n){if(n.op==="=="){if(NN(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NAN"}};if(bN(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(NN(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NOT_NAN"}};if(bN(n.value))return{unaryFilter:{field:fc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fc(n.field),op:l5(n.op),value:n.value}}}(t):t instanceof Rs?function(n){const r=n.getFilters().map(s=>Vj(s));return r.length===1?r[0]:{compositeFilter:{op:c5(n.op),filters:r}}}(t):tt(54877,{filter:t})}function u5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Uj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n,r,s,a=ot.min(),c=ot.min(),u=$n.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Wo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e){this.gt=e}}function h5(t){const e=i5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ix(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(){this.Dn=new p5}addToCollectionParentIndex(e,n){return this.Dn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(sa.min())}updateCollectionGroup(e,n,r){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class p5{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Cn(Ft.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Cn(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$j=41943040;class br{static withCacheSize(e){return new br(e,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br.DEFAULT_COLLECTION_PERCENTILE=10,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,br.DEFAULT=new br($j,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),br.DISABLED=new br(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Gc(0)}static ur(){return new Gc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="LruGarbageCollector",zj=1048576;function UN([t,e],[n,r]){const s=ut(t,n);return s===0?ut(e,r):s}class m5{constructor(e){this.Tr=e,this.buffer=new Cn(UN),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();UN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class g5{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ke(VN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){uu(n)?ke(VN,"Ignoring IndexedDB error during garbage collection: ",n):await cu(n)}await this.Rr(3e5)})}}class y5{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(pm.ue);const r=new m5(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(FN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FN):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,a,c,u,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,n))).next(y=>(a=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),dc()<=ft.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:y})))}}function v5(t,e){return new y5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(){this.changes=new xl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ue.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&md(r.mutation,s,Ur.empty(),ht.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pt()){const s=Ma();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let c=td();return a.forEach((u,h)=>{c=c.insert(u,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=Ma();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pt()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,u)=>{n.set(c,u)})})}computeViews(e,n,r,s){let a=Ki();const c=pd(),u=function(){return pd()}();return n.forEach((h,f)=>{const g=r.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof ha)?a=a.insert(f.key,f):g!==void 0?(c.set(f.key,g.mutation.getFieldMask()),md(g.mutation,f,g.mutation.getFieldMask(),ht.now())):c.set(f.key,Ur.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((f,g)=>c.set(f,g)),n.forEach((f,g)=>{var y;return u.set(f,new w5(g,(y=c.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const r=pd();let s=new on((c,u)=>c-u),a=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const u of c)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let g=r.get(h)||Ur.empty();g=u.applyToLocalView(f,g),r.set(h,g);const y=(s.get(u.batchId)||pt()).add(h);s=s.insert(u.batchId,y)})}).next(()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,g=h.value,y=bj();g.forEach(v=>{if(!a.has(v)){const w=Ij(n.get(v),r.get(v));w!==null&&y.set(v,w),a=a.add(v)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return ue.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(c){return We.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):ue.resolve(Ma());let u=Ad,h=a;return c.next(f=>ue.forEach(f,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),a.get(g)?ue.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{h=h.insert(g,v)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,h,f,pt())).next(g=>({batchId:u,changes:Ej(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new We(n)).next(r=>{let s=td();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let c=td();return this.indexManager.getCollectionParents(e,a).next(u=>ue.forEach(u,h=>{const f=function(y,v){return new vl(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(g=>{g.forEach((y,v)=>{c=c.insert(y,v)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(c=>{a.forEach((h,f)=>{const g=f.getKey();c.get(g)===null&&(c=c.insert(g,Xn.newInvalidDocument(g)))});let u=td();return c.forEach((h,f)=>{const g=a.get(h);g!==void 0&&md(g.mutation,f,Ur.empty(),ht.now()),xm(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:oi(s.createTime)}}(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:h5(s.bundledQuery),readTime:oi(s.readTime)}}(n)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this.overlays=new on(We.comparator),this.kr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ma();return ue.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.wt(e,n,a)}),ue.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),ue.resolve()}getOverlaysForCollection(e,n,r){const s=Ma(),a=n.length+1,c=new We(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>r&&s.set(h.getKey(),h)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new on((f,g)=>f-g);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let g=a.get(f.largestBatchId);g===null&&(g=Ma(),a=a.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=Ma(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=s)););return ue.resolve(u)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new B6(n,r));let a=this.kr.get(n);a===void 0&&(a=pt(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(){this.sessionToken=$n.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.qr=new Cn(Rn.Qr),this.$r=new Cn(Rn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Rn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Rn(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new We(new Ft([])),r=new Rn(n,e),s=new Rn(n,e+1),a=[];return this.$r.forEachInRange([r,s],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new We(new Ft([])),r=new Rn(n,e),s=new Rn(n,e+1);let a=pt();return this.$r.forEachInRange([r,s],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new Rn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return We.comparator(e.key,n.key)||ut(e.Hr,n.Hr)}static Ur(e,n){return ut(e.Hr,n.Hr)||We.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Cn(Rn.Qr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new z6(a,n,r,s);this.mutationQueue.push(c);for(const u of s)this.Yr=this.Yr.add(new Rn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,n){return ue.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),a=s<0?0:s;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?mw:this.er-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rn(n,0),s=new Rn(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],c=>{const u=this.Zr(c.Hr);a.push(u)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Cn(ut);return n.forEach(s=>{const a=new Rn(s,0),c=new Rn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],u=>{r=r.add(u.Hr)})}),ue.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const c=new Rn(new We(a),0);let u=new Cn(ut);return this.Yr.forEachWhile(h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(u=u.add(h.Hr)),!0)},c),ue.resolve(this.ei(u))}ei(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ot(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ue.forEach(n.mutations,s=>{const a=new Rn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Rn(n,0),s=this.Yr.firstAfterOrEqual(r);return ue.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e){this.ni=e,this.docs=function(){return new on(We.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,c=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ue.resolve(r?r.document.mutableCopy():Xn.newInvalidDocument(n))}getEntries(e,n){let r=Ki();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Xn.newInvalidDocument(s))}),ue.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Ki();const c=n.path,u=new We(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||n6(t6(g),r)<=0||(s.has(g.key)||xm(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,n,r,s){tt(9500)}ri(e,n){return ue.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new C5(this)}getSize(e){return ue.resolve(this.size)}}class C5 extends x5{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),ue.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e){this.persistence=e,this.ii=new xl(n=>vw(n),xw),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.si=0,this.oi=new Nw,this.targetCount=0,this._i=Gc.ar()}forEachTarget(e,n){return this.ii.forEach((r,s)=>n(s)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),ue.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Gc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.hr(n),ue.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),ue.waitFor(a).next(()=>s)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return ue.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),ue.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return ue.resolve(r)}containsKey(e,n){return ue.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n){this.ai={},this.overlays={},this.ui=new pm(0),this.ci=!1,this.ci=!0,this.li=new N5,this.referenceDelegate=e(this),this.hi=new j5(this),this.indexManager=new f5,this.remoteDocumentCache=function(s){return new T5(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new d5(n),this.Ti=new E5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new b5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new S5(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){ke("MemoryPersistence","Starting transaction:",e);const s=new I5(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,n){return ue.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class I5 extends s6{constructor(e){super(),this.currentSequenceNumber=e}}class Sw{constructor(e){this.persistence=e,this.Ai=new Nw,this.Ri=null}static Vi(e){return new Sw(e)}get mi(){if(this.Ri)return this.Ri;throw tt(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),ue.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.mi,r=>{const s=We.fromPath(r);return this.fi(e,s).next(a=>{a||n.removeEntry(s,ot.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return ue.or([()=>ue.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Mp{constructor(e,n){this.persistence=e,this.gi=new xl(r=>a6(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=v5(this,n)}static Vi(e,n){return new Mp(e,n)}Ii(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return ue.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(a=>a?ue.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,c=>this.Sr(e,c,n).next(u=>{u||(r++,a.removeEntry(c,ot.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ue.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=tp(e.data.value)),n}Sr(e,n,r){return ue.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return ue.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=pt(),s=pt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Tw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return hF()?8:i6(er())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ps(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,n,s,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new A5;return this.ws(e,n,c).next(u=>{if(a.result=u,this.Rs)return this.Ss(e,n,c,u.size)})}).next(()=>a.result)}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(dc()<=ft.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",hc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(dc()<=ft.DEBUG&&ke("QueryEngine","Query:",hc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(dc()<=ft.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",hc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ii(n))):ue.resolve())}ps(e,n){if(jN(n))return ue.resolve(null);let r=ii(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ix(n,null,"F"),r=ii(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=pt(...a);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const f=this.bs(n,u);return this.Ds(n,f,c,h.readTime)?this.ps(e,ix(n,null,"F")):this.vs(e,f,n,h)}))})))}ys(e,n,r,s){return jN(n)||s.isEqual(ot.min())?ue.resolve(null):this.gs.getDocuments(e,r).next(a=>{const c=this.bs(n,a);return this.Ds(n,c,r,s)?ue.resolve(null):(dc()<=ft.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hc(n)),this.vs(e,c,n,e6(s,Ad)).next(u=>u))})}bs(e,n){let r=new Cn(wj(e));return n.forEach((s,a)=>{xm(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,n,r){return dc()<=ft.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",hc(n)),this.gs.getDocumentsMatchingQuery(e,n,sa.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="LocalStore",k5=3e8;class R5{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new on(ut),this.Ms=new xl(a=>vw(a),xw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _5(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function O5(t,e,n,r){return new R5(t,e,n,r)}async function qj(t,e){const n=at(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],u=[];let h=pt();for(const f of s){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of a){u.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(r,h).next(f=>({Bs:f,removedBatchIds:c,addedBatchIds:u}))})})}function D5(t,e){const n=at(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,h,f,g){const y=f.batch,v=y.keys();let w=ue.resolve();return v.forEach(N=>{w=w.next(()=>g.getEntry(h,N)).next(x=>{const _=f.docVersions.get(N);Ot(_!==null,48541),x.version.compareTo(_)<0&&(y.applyToRemoteDocument(x,f),x.isValidDocument()&&(x.setReadTime(f.commitVersion),g.addEntry(x)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(h,y))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=pt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Wj(t){const e=at(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function L5(t,e){const n=at(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const u=[];e.targetChanges.forEach((g,y)=>{const v=s.get(y);if(!v)return;u.push(n.hi.removeMatchingKeys(a,g.removedDocuments,y).next(()=>n.hi.addMatchingKeys(a,g.addedDocuments,y)));let w=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken($n.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,r)),s=s.insert(y,w),function(x,_,P){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=k5?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(v,w,g)&&u.push(n.hi.updateTargetData(a,w))});let h=Ki(),f=pt();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))}),u.push(M5(a,c,e.documentUpdates).next(g=>{h=g.Ls,f=g.ks})),!r.isEqual(ot.min())){const g=n.hi.getLastRemoteSnapshotVersion(a).next(y=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(g)}return ue.waitFor(u).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,h,f)).next(()=>h)}).then(a=>(n.Fs=s,a))}function M5(t,e,n){let r=pt(),s=pt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let c=Ki();return n.forEach((u,h)=>{const f=a.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(ot.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):ke(Cw,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{Ls:c,ks:s}})}function F5(t,e){const n=at(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=mw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function V5(t,e){const n=at(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.hi.getTargetData(r,e).next(a=>a?(s=a,ue.resolve(s)):n.hi.allocateTargetId(r).next(c=>(s=new Wo(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function ux(t,e,n){const r=at(t),s=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!uu(c))throw c;ke(Cw,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function $N(t,e,n){const r=at(t);let s=ot.min(),a=pt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,f,g){const y=at(h),v=y.Ms.get(g);return v!==void 0?ue.resolve(y.Fs.get(v)):y.hi.getTargetData(f,g)}(r,c,ii(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(h=>{a=h})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,n?s:ot.min(),n?a:pt())).next(u=>(U5(r,T6(e),u),{documents:u,qs:a})))}function U5(t,e,n){let r=t.xs.get(e)||ot.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class zN{constructor(){this.activeTargetIds=k6()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $5{constructor(){this.Fo=new zN,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new zN,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="ConnectivityMonitor";class qN{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ke(BN,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ke(BN,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf=null;function dx(){return Mf===null?Mf=function(){return 268435456+Math.round(2147483648*Math.random())}():Mf++,"0x"+Mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="RestConnection",B5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class q5{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===kp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,a){const c=dx(),u=this.Go(e,n.toUriEncodedString());ke(zy,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,s,a);const{host:f}=new URL(u),g=fl(f);return this.jo(e,u,h,r,g).then(y=>(ke(zy,`Received RPC '${e}' ${c}: `,y),y),y=>{throw il(zy,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,n,r,s,a,c){return this.Wo(e,n,r,s,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Go(e,n){const r=B5[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection";class H5 extends q5{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,a){const c=dx();return new Promise((u,h)=>{const f=new GC;f.setWithCredentials(!0),f.listenOnce(QC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case ep.NO_ERROR:const y=f.getResponseJson();ke(Qn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case ep.TIMEOUT:ke(Qn,`RPC '${e}' ${c} timed out`),h(new be(ce.DEADLINE_EXCEEDED,"Request time out"));break;case ep.HTTP_ERROR:const v=f.getStatus();if(ke(Qn,`RPC '${e}' ${c} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const N=w==null?void 0:w.error;if(N&&N.status&&N.message){const x=function(P){const j=P.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(j)>=0?j:ce.UNKNOWN}(N.status);h(new be(x,N.message))}else h(new be(ce.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new be(ce.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{c_:e,streamId:c,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{ke(Qn,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(s);ke(Qn,`RPC '${e}' ${c} sending request:`,s),f.send(n,"POST",g,r,15)})}P_(e,n,r){const s=dx(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=JC(),u=XC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const g=a.join("");ke(Qn,`Creating RPC '${e}' stream ${s}: ${g}`,h);const y=c.createWebChannel(g,h);this.T_(y);let v=!1,w=!1;const N=new W5({Ho:_=>{w?ke(Qn,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(v||(ke(Qn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),ke(Qn,`RPC '${e}' stream ${s} sending:`,_),y.send(_))},Yo:()=>y.close()}),x=(_,P,j)=>{_.listen(P,C=>{try{j(C)}catch(F){setTimeout(()=>{throw F},0)}})};return x(y,ed.EventType.OPEN,()=>{w||(ke(Qn,`RPC '${e}' stream ${s} transport opened.`),N.s_())}),x(y,ed.EventType.CLOSE,()=>{w||(w=!0,ke(Qn,`RPC '${e}' stream ${s} transport closed`),N.__(),this.I_(y))}),x(y,ed.EventType.ERROR,_=>{w||(w=!0,il(Qn,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),N.__(new be(ce.UNAVAILABLE,"The operation could not be completed")))}),x(y,ed.EventType.MESSAGE,_=>{var P;if(!w){const j=_.data[0];Ot(!!j,16349);const C=j,F=(C==null?void 0:C.error)||((P=C[0])===null||P===void 0?void 0:P.error);if(F){ke(Qn,`RPC '${e}' stream ${s} received error:`,F);const U=F.status;let z=function(L){const D=vn[L];if(D!==void 0)return Pj(D)}(U),k=F.message;z===void 0&&(z=ce.INTERNAL,k="Unknown error status: "+U+" with message "+F.message),w=!0,N.__(new be(z,k)),y.close()}else ke(Qn,`RPC '${e}' stream ${s} received:`,j),N.a_(j)}}),x(u,YC.STAT_EVENT,_=>{_.stat===Xv.PROXY?ke(Qn,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Xv.NOPROXY&&ke(Qn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.o_()},0),N}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function By(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t){return new X6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="PersistentStream";class Kj{constructor(e,n,r,s,a,c,u,h){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Hj(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Hi(n.toString()),Hi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===n&&this.W_(r,s)},r=>{e(()=>{const s=new be(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ke(WN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ke(WN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class K5 extends Kj{constructor(e,n,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=e5(this.serializer,e),r=function(a){if(!("targetChange"in a))return ot.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?ot.min():c.readTime?oi(c.readTime):ot.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=cx(this.serializer),n.addTarget=function(a,c){let u;const h=c.target;if(u=rx(h)?{documents:r5(a,h)}:{query:s5(a,h).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=Oj(a,c.resumeToken);const f=ox(a,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(ot.min())>0){u.readTime=Lp(a,c.snapshotVersion.toTimestamp());const f=ox(a,c.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=o5(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=cx(this.serializer),n.removeTarget=e,this.k_(n)}}class G5 extends Kj{constructor(e,n,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=n5(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=cx(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>t5(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{}class Y5 extends Q5{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,ax(n,r),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(ce.UNKNOWN,a.toString())})}Jo(e,n,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,ax(n,r),s,c,u,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(ce.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class X5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Hi(n),this._a=!1):ke("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="RemoteStore";class J5{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{wl(this)&&(ke(ol,"Restarting streams for network reachability change."),await async function(h){const f=at(h);f.Ia.add(4),await rh(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Sm(f)}(this))})}),this.Aa=new X5(r,s)}}async function Sm(t){if(wl(t))for(const e of t.da)await e(!0)}async function rh(t){for(const e of t.da)await e(!1)}function Gj(t,e){const n=at(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Pw(n)?Aw(n):du(n).x_()&&Iw(n,e))}function jw(t,e){const n=at(t),r=du(n);n.Ta.delete(e),r.x_()&&Qj(n,e),n.Ta.size===0&&(r.x_()?r.B_():wl(n)&&n.Aa.set("Unknown"))}function Iw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ot.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}du(t).H_(e)}function Qj(t,e){t.Ra.$e(e),du(t).Y_(e)}function Aw(t){t.Ra=new K6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),du(t).start(),t.Aa.aa()}function Pw(t){return wl(t)&&!du(t).M_()&&t.Ta.size>0}function wl(t){return at(t).Ia.size===0}function Yj(t){t.Ra=void 0}async function Z5(t){t.Aa.set("Online")}async function e$(t){t.Ta.forEach((e,n)=>{Iw(t,e)})}async function t$(t,e){Yj(t),Pw(t)?(t.Aa.la(e),Aw(t)):t.Aa.set("Unknown")}async function n$(t,e,n){if(t.Aa.set("Online"),e instanceof Rj&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const u of a.targetIds)s.Ta.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ta.delete(u),s.Ra.removeTarget(u))}(t,e)}catch(r){ke(ol,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fp(t,r)}else if(e instanceof sp?t.Ra.Ye(e):e instanceof kj?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ot.min()))try{const r=await Wj(t.localStore);n.compareTo(r)>=0&&await function(a,c){const u=a.Ra.Pt(c);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=a.Ta.get(f);g&&a.Ta.set(f,g.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach((h,f)=>{const g=a.Ta.get(h);if(!g)return;a.Ta.set(h,g.withResumeToken($n.EMPTY_BYTE_STRING,g.snapshotVersion)),Qj(a,h);const y=new Wo(g.target,h,f,g.sequenceNumber);Iw(a,y)}),a.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){ke(ol,"Failed to raise snapshot:",r),await Fp(t,r)}}async function Fp(t,e,n){if(!uu(e))throw e;t.Ia.add(1),await rh(t),t.Aa.set("Offline"),n||(n=()=>Wj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ke(ol,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Sm(t)})}function Xj(t,e){return e().catch(n=>Fp(t,n,e))}async function Tm(t){const e=at(t),n=la(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:mw;for(;r$(e);)try{const s=await F5(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,s$(e,s)}catch(s){await Fp(e,s)}Jj(e)&&Zj(e)}function r$(t){return wl(t)&&t.Pa.length<10}function s$(t,e){t.Pa.push(e);const n=la(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function Jj(t){return wl(t)&&!la(t).M_()&&t.Pa.length>0}function Zj(t){la(t).start()}async function i$(t){la(t).na()}async function o$(t){const e=la(t);for(const n of t.Pa)e.X_(n.mutations)}async function a$(t,e,n){const r=t.Pa.shift(),s=_w.from(r,e,n);await Xj(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Tm(t)}async function l$(t,e){e&&la(t).Z_&&await async function(r,s){if(function(c){return W6(c)&&c!==ce.ABORTED}(s.code)){const a=r.Pa.shift();la(r).N_(),await Xj(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Tm(r)}}(t,e),Jj(t)&&Zj(t)}async function HN(t,e){const n=at(t);n.asyncQueue.verifyOperationInProgress(),ke(ol,"RemoteStore received new credentials");const r=wl(n);n.Ia.add(3),await rh(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Sm(n)}async function c$(t,e){const n=at(t);e?(n.Ia.delete(2),await Sm(n)):e||(n.Ia.add(2),await rh(n),n.Aa.set("Unknown"))}function du(t){return t.Va||(t.Va=function(n,r,s){const a=at(n);return a.ia(),new K5(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:Z5.bind(null,t),e_:e$.bind(null,t),n_:t$.bind(null,t),J_:n$.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Pw(t)?Aw(t):t.Aa.set("Unknown")):(await t.Va.stop(),Yj(t))})),t.Va}function la(t){return t.ma||(t.ma=function(n,r,s){const a=at(n);return a.ia(),new G5(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:i$.bind(null,t),n_:l$.bind(null,t),ea:o$.bind(null,t),ta:a$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Tm(t)):(await t.ma.stop(),t.Pa.length>0&&(ke(ol,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const c=Date.now()+r,u=new kw(e,n,c,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rw(t,e){if(Hi("AsyncQueue",`${e}: ${t}`),uu(t))return new be(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{static emptySet(e){return new Ec(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||We.comparator(n.key,r.key):(n,r)=>We.comparator(n.key,r.key),this.keyedMap=td(),this.sortedSet=new on(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ec)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ec;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.fa=new on(We.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):tt(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qc{constructor(e,n,r,s,a,c,u,h,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,a){const c=[];return n.forEach(u=>{c.push({type:0,doc:u})}),new Qc(e,n,Ec.emptySet(n),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class d${constructor(){this.queries=GN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=at(n),a=s.queries;s.queries=GN(),a.forEach((c,u)=>{for(const h of u.wa)h.onError(r)})})(this,new be(ce.ABORTED,"Firestore shutting down"))}}function GN(){return new xl(t=>xj(t),vm)}async function Ow(t,e){const n=at(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new u$,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(s,!0);break;case 1:a.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(c){const u=Rw(c,`Initialization of query '${hc(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&Lw(n)}async function Dw(t,e){const n=at(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function h$(t,e){const n=at(t);let r=!1;for(const s of e){const a=s.query,c=n.queries.get(a);if(c){for(const u of c.wa)u.Ca(s)&&(r=!0);c.ya=s}}r&&Lw(n)}function f$(t,e,n){const r=at(t),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(n);r.queries.delete(e)}function Lw(t){t.Da.forEach(e=>{e.next()})}var hx,QN;(QN=hx||(hx={})).Fa="default",QN.Cache="cache";class Mw{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Qc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==hx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.key=e}}class tI{constructor(e){this.key=e}}class p${constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=pt(),this.mutatedKeys=pt(),this.Xa=wj(e),this.eu=new Ec(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new KN,s=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,c=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,y)=>{const v=s.get(g),w=xm(this.query,y)?y:null,N=!!v&&this.mutatedKeys.has(v.key),x=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let _=!1;v&&w?v.data.isEqual(w.data)?N!==x&&(r.track({type:3,doc:w}),_=!0):this.iu(v,w)||(r.track({type:2,doc:w}),_=!0,(h&&this.Xa(w,h)>0||f&&this.Xa(w,f)<0)&&(u=!0)):!v&&w?(r.track({type:0,doc:w}),_=!0):v&&!w&&(r.track({type:1,doc:v}),_=!0,(h||f)&&(u=!0)),_&&(w?(c=c.add(w),a=x?a.add(g):a.delete(g)):(c=c.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:c,ru:r,Ds:u,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((g,y)=>function(w,N){const x=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{At:_})}};return x(w)-x(N)}(g.type,y.type)||this.Xa(g.doc,y.doc)),this.su(r),s=s!=null&&s;const u=n&&!s?this.ou():[],h=this.Za.size===0&&this.current&&!s?1:0,f=h!==this.Ya;return this.Ya=h,c.length!==0||f?{snapshot:new Qc(this.query,e.eu,a,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new KN,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=pt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new tI(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new eI(r))}),n}uu(e){this.Ha=e.qs,this.Za=pt();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Qc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Fw="SyncEngine";class m${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class g${constructor(e){this.key=e,this.lu=!1}}class y${constructor(e,n,r,s,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new xl(u=>xj(u),vm),this.Tu=new Map,this.Iu=new Set,this.du=new on(We.comparator),this.Eu=new Map,this.Au=new Nw,this.Ru={},this.Vu=new Map,this.mu=Gc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function v$(t,e,n=!0){const r=aI(t);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await nI(r,e,n,!0),s}async function x$(t,e){const n=aI(t);await nI(n,e,!0,!1)}async function nI(t,e,n,r){const s=await V5(t.localStore,ii(e)),a=s.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await w$(t,e,a,c==="current",s.resumeToken)),t.isPrimaryClient&&n&&Gj(t.remoteStore,s),u}async function w$(t,e,n,r,s){t.gu=(y,v,w)=>async function(x,_,P,j){let C=_.view.nu(P);C.Ds&&(C=await $N(x.localStore,_.query,!1).then(({documents:k})=>_.view.nu(k,C)));const F=j&&j.targetChanges.get(_.targetId),U=j&&j.targetMismatches.get(_.targetId)!=null,z=_.view.applyChanges(C,x.isPrimaryClient,F,U);return XN(x,_.targetId,z._u),z.snapshot}(t,y,v,w);const a=await $N(t.localStore,e,!0),c=new p$(e,a.qs),u=c.nu(a.documents),h=nh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=c.applyChanges(u,t.isPrimaryClient,h);XN(t,n,f._u);const g=new m$(e,n,c);return t.Pu.set(e,g),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function _$(t,e,n){const r=at(t),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter(c=>!vm(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ux(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&jw(r.remoteStore,s.targetId),fx(r,s.targetId)}).catch(cu)):(fx(r,s.targetId),await ux(r.localStore,s.targetId,!0))}async function E$(t,e){const n=at(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jw(n.remoteStore,r.targetId))}async function b$(t,e,n){const r=A$(t);try{const s=await function(c,u){const h=at(c),f=ht.now(),g=u.reduce((w,N)=>w.add(N.key),pt());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",w=>{let N=Ki(),x=pt();return h.Os.getEntries(w,g).next(_=>{N=_,N.forEach((P,j)=>{j.isValidDocument()||(x=x.add(P))})}).next(()=>h.localDocuments.getOverlayedDocuments(w,N)).next(_=>{y=_;const P=[];for(const j of u){const C=U6(j,y.get(j.key).overlayedDocument);C!=null&&P.push(new ha(j.key,C,dj(C.value.mapValue),lr.exists(!0)))}return h.mutationQueue.addMutationBatch(w,f,P,u)}).next(_=>{v=_;const P=_.applyToLocalDocumentSet(y,x);return h.documentOverlayCache.saveOverlays(w,_.batchId,P)})}).then(()=>({batchId:v.batchId,changes:Ej(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,h){let f=c.Ru[c.currentUser.toKey()];f||(f=new on(ut)),f=f.insert(u,h),c.Ru[c.currentUser.toKey()]=f}(r,s.batchId,n),await sh(r,s.changes),await Tm(r.remoteStore)}catch(s){const a=Rw(s,"Failed to persist write");n.reject(a)}}async function rI(t,e){const n=at(t);try{const r=await L5(n.localStore,e);e.targetChanges.forEach((s,a)=>{const c=n.Eu.get(a);c&&(Ot(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.lu=!0:s.modifiedDocuments.size>0?Ot(c.lu,14607):s.removedDocuments.size>0&&(Ot(c.lu,42227),c.lu=!1))}),await sh(n,r,e)}catch(r){await cu(r)}}function YN(t,e,n){const r=at(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach((a,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(c,u){const h=at(c);h.onlineState=u;let f=!1;h.queries.forEach((g,y)=>{for(const v of y.wa)v.va(u)&&(f=!0)}),f&&Lw(h)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function N$(t,e,n){const r=at(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),a=s&&s.key;if(a){let c=new on(We.comparator);c=c.insert(a,Xn.newNoDocument(a,ot.min()));const u=pt().add(a),h=new bm(ot.min(),new Map,new on(ut),c,u);await rI(r,h),r.du=r.du.remove(a),r.Eu.delete(e),Vw(r)}else await ux(r.localStore,e,!1).then(()=>fx(r,e,n)).catch(cu)}async function S$(t,e){const n=at(t),r=e.batch.batchId;try{const s=await D5(n.localStore,e);iI(n,r,null),sI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sh(n,s)}catch(s){await cu(s)}}async function T$(t,e,n){const r=at(t);try{const s=await function(c,u){const h=at(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return h.mutationQueue.lookupMutationBatch(f,u).next(y=>(Ot(y!==null,37113),g=y.keys(),h.mutationQueue.removeMutationBatch(f,y))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>h.localDocuments.getDocuments(f,g))})}(r.localStore,e);iI(r,e,n),sI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sh(r,s)}catch(s){await cu(s)}}function sI(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function iI(t,e,n){const r=at(t);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function fx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||oI(t,r)})}function oI(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(jw(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Vw(t))}function XN(t,e,n){for(const r of n)r instanceof eI?(t.Au.addReference(r.key,e),C$(t,r)):r instanceof tI?(ke(Fw,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||oI(t,r.key)):tt(19791,{yu:r})}function C$(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(ke(Fw,"New document in limbo: "+n),t.Iu.add(r),Vw(t))}function Vw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new We(Ft.fromString(e)),r=t.mu.next();t.Eu.set(r,new g$(n)),t.du=t.du.insert(n,r),Gj(t.remoteStore,new Wo(ii(ym(n.path)),r,"TargetPurposeLimboResolution",pm.ue))}}async function sh(t,e,n){const r=at(t),s=[],a=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,h)=>{c.push(r.gu(h,e,n).then(f=>{var g;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){s.push(f);const y=Tw.Es(h.targetId,f);a.push(y)}}))}),await Promise.all(c),r.hu.J_(s),await async function(h,f){const g=at(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ue.forEach(f,v=>ue.forEach(v.Is,w=>g.persistence.referenceDelegate.addReference(y,v.targetId,w)).next(()=>ue.forEach(v.ds,w=>g.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))}catch(y){if(!uu(y))throw y;ke(Cw,"Failed to update sequence numbers: "+y)}for(const y of f){const v=y.targetId;if(!y.fromCache){const w=g.Fs.get(v),N=w.snapshotVersion,x=w.withLastLimboFreeSnapshotVersion(N);g.Fs=g.Fs.insert(v,x)}}}(r.localStore,a))}async function j$(t,e){const n=at(t);if(!n.currentUser.isEqual(e)){ke(Fw,"User change. New user:",e.toKey());const r=await qj(n.localStore,e);n.currentUser=e,function(a,c){a.Vu.forEach(u=>{u.forEach(h=>{h.reject(new be(ce.CANCELLED,c))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sh(n,r.Bs)}}function I$(t,e){const n=at(t),r=n.Eu.get(e);if(r&&r.lu)return pt().add(r.key);{let s=pt();const a=n.Tu.get(e);if(!a)return s;for(const c of a){const u=n.Pu.get(c);s=s.unionWith(u.view.tu)}return s}}function aI(t){const e=at(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N$.bind(null,e),e.hu.J_=h$.bind(null,e.eventManager),e.hu.pu=f$.bind(null,e.eventManager),e}function A$(t){const e=at(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=T$.bind(null,e),e}class Vp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return O5(this.persistence,new P5,e.initialUser,this.serializer)}Du(e){return new Bj(Sw.Vi,this.serializer)}bu(e){return new $5}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vp.provider={build:()=>new Vp};class P$ extends Vp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ot(this.persistence.referenceDelegate instanceof Mp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new g5(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?br.withCacheSize(this.cacheSizeBytes):br.DEFAULT;return new Bj(r=>Mp.Vi(r,n),this.serializer)}}class px{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>YN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=j$.bind(null,this.syncEngine),await c$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new d$}()}createDatastore(e){const n=Nm(e.databaseInfo.databaseId),r=function(a){return new H5(a)}(e.databaseInfo);return function(a,c,u,h){return new Y5(a,c,u,h)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,c,u){return new J5(r,s,a,c,u)}(this.localStore,this.datastore,e.asyncQueue,n=>YN(this.syncEngine,n,0),function(){return qN.C()?new qN:new z5}())}createSyncEngine(e,n){return function(s,a,c,u,h,f,g){const y=new y$(s,a,c,u,h,f);return g&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=at(s);ke(ol,"RemoteStore shutting down."),a.Ia.add(5),await rh(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}px.provider={build:()=>new px};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Hi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="FirestoreClient";class k${constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Er.UNAUTHENTICATED,this.clientId=fw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{ke(ca,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(ke(ca,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Rw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qy(t,e){t.asyncQueue.verifyOperationInProgress(),ke(ca,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await qj(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{il("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ke("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{il("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function JN(t,e){t.asyncQueue.verifyOperationInProgress();const n=await R$(t);ke(ca,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>HN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>HN(e.remoteStore,s)),t._onlineComponents=e}async function R$(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ke(ca,"Using user provided OfflineComponentProvider");try{await qy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ce.FAILED_PRECONDITION||s.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;il("Error using user provided cache. Falling back to memory cache: "+n),await qy(t,new Vp)}}else ke(ca,"Using default OfflineComponentProvider"),await qy(t,new P$(void 0));return t._offlineComponents}async function lI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ke(ca,"Using user provided OnlineComponentProvider"),await JN(t,t._uninitializedComponentsProvider._online)):(ke(ca,"Using default OnlineComponentProvider"),await JN(t,new px))),t._onlineComponents}function O$(t){return lI(t).then(e=>e.syncEngine)}async function Up(t){const e=await lI(t),n=e.eventManager;return n.onListen=v$.bind(null,e.syncEngine),n.onUnlisten=_$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=E$.bind(null,e.syncEngine),n}function D$(t,e,n={}){const r=new Ui;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,f){const g=new Uw({next:v=>{g.Ou(),c.enqueueAndForget(()=>Dw(a,y));const w=v.docs.has(u);!w&&v.fromCache?f.reject(new be(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&h&&h.source==="server"?f.reject(new be(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new Mw(ym(u.path),g,{includeMetadataChanges:!0,ka:!0});return Ow(a,y)}(await Up(t),t.asyncQueue,e,n,r)),r.promise}function L$(t,e,n={}){const r=new Ui;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,f){const g=new Uw({next:v=>{g.Ou(),c.enqueueAndForget(()=>Dw(a,y)),v.fromCache&&h.source==="server"?f.reject(new be(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),y=new Mw(u,g,{includeMetadataChanges:!0,ka:!0});return Ow(a,y)}(await Up(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$="firestore.googleapis.com",e1=!0;class t1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new be(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=M$,this.ssl=e1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:e1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$j;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zj)throw new be(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WU;switch(r.type){case"firstParty":return new GU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ZN.get(n);r&&(ke("ComponentProvider","Removing Datastore"),ZN.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zi(this.firestore,e,this._query)}}class un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}toJSON(){return{type:un._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(eh(n,un._jsonSchema))return new un(e,r||null,new We(Ft.fromString(n.referencePath)))}}un._jsonSchemaVersion="firestore/documentReference/1.0",un._jsonSchema={type:_n("string",un._jsonSchemaVersion),referencePath:_n("string")};class Jo extends Zi{constructor(e,n,r){super(e,n,ym(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new We(e))}withConverter(e){return new Jo(this.firestore,e,this._path)}}function Qe(t,e,...n){if(t=en(t),pw("collection","path",e),t instanceof Cm){const r=Ft.fromString(e,...n);return pN(r),new Jo(t,null,r)}{if(!(t instanceof un||t instanceof Jo))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ft.fromString(e,...n));return pN(r),new Jo(t.firestore,null,r)}}function rs(t,e){if(t=ar(t,Cm),pw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new be(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zi(t,null,function(r){return new vl(Ft.emptyPath(),r)}(e))}function At(t,e,...n){if(t=en(t),arguments.length===1&&(e=fw.newId()),pw("doc","path",e),t instanceof Cm){const r=Ft.fromString(e,...n);return fN(r),new un(t,null,new We(r))}{if(!(t instanceof un||t instanceof Jo))throw new be(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ft.fromString(e,...n));return fN(r),new un(t.firestore,t instanceof Jo?t.converter:null,new We(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="AsyncQueue";class r1{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Hj(this,"async_queue_retry"),this.oc=()=>{const r=By();r&&ke(n1,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=By();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=By();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ui;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!uu(e))throw e;ke(n1,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Hi("INTERNAL UNHANDLED ERROR: ",s1(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=kw.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(s),s}ac(){this.tc&&tt(47125,{hc:s1(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function s1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class di extends Cm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new r1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r1(e),this._firestoreClient=void 0,await e}}}function F$(t,e,n){n||(n=kp);const r=ml(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),a=r.getOptions(n);if(nl(a,e))return s;throw new be(ce.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new be(ce.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zj)throw new be(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&fl(e.host)&&ew(e.host),r.initialize({options:e,instanceIdentifier:n})}function ih(t){if(t._terminated)throw new be(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||V$(t),t._firestoreClient}function V$(t){var e,n,r;const s=t._freezeSettings(),a=function(u,h,f,g){return new u6(u,h,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,cI(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new k$(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new es($n.fromBase64String(e))}catch(n){throw new be(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new es($n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:es._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(eh(e,es._jsonSchema))return es.fromBase64String(e.bytes)}}es._jsonSchemaVersion="firestore/bytes/1.0",es._jsonSchema={type:_n("string",es._jsonSchemaVersion),bytes:_n("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function U$(){return new hu(Zv)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ai._jsonSchemaVersion}}static fromJSON(e){if(eh(e,ai._jsonSchema))return new ai(e.latitude,e.longitude)}}ai._jsonSchemaVersion="firestore/geoPoint/1.0",ai._jsonSchema={type:_n("string",ai._jsonSchemaVersion),latitude:_n("number"),longitude:_n("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(eh(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new li(e.vectorValues);throw new be(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:_n("string",li._jsonSchemaVersion),vectorValues:_n("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$=/^__.*__$/;class z${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ha(e,this.data,this.fieldMask,n,this.fieldTransforms):new th(e,this.data,n,this.fieldTransforms)}}class uI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ha(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ec:t})}}class $w{constructor(e,n,r,s,a,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new $w(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return $p(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(dI(this.Ec)&&$$.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class B${constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nm(e)}Dc(e,n,r,s=!1){return new $w({Ec:e,methodName:n,bc:r,path:Un.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oh(t){const e=t._freezeSettings(),n=Nm(t._databaseId);return new B$(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zw(t,e,n,r,s,a={}){const c=t.Dc(a.merge||a.mergeFields?2:0,e,n,s);qw("Data must be an object, but it was:",c,r);const u=pI(r,c);let h,f;if(a.merge)h=new Ur(c.fieldMask),f=c.fieldTransforms;else if(a.mergeFields){const g=[];for(const y of a.mergeFields){const v=mx(e,y,n);if(!c.contains(v))throw new be(ce.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);gI(g,v)||g.push(v)}h=new Ur(g),f=c.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,f=c.fieldTransforms;return new z$(new Nr(u),h,f)}class Im extends jm{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Im}}class Bw extends jm{_toFieldTransform(e){return new L6(e.path,new Dd)}isEqual(e){return e instanceof Bw}}function hI(t,e,n,r){const s=t.Dc(1,e,n);qw("Data must be an object, but it was:",s,r);const a=[],c=Nr.empty();da(r,(h,f)=>{const g=Ww(e,h,n);f=en(f);const y=s.gc(g);if(f instanceof Im)a.push(g);else{const v=ah(f,y);v!=null&&(a.push(g),c.set(g,v))}});const u=new Ur(a);return new uI(c,u,s.fieldTransforms)}function fI(t,e,n,r,s,a){const c=t.Dc(1,e,n),u=[mx(e,r,n)],h=[s];if(a.length%2!=0)throw new be(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)u.push(mx(e,a[v])),h.push(a[v+1]);const f=[],g=Nr.empty();for(let v=u.length-1;v>=0;--v)if(!gI(f,u[v])){const w=u[v];let N=h[v];N=en(N);const x=c.gc(w);if(N instanceof Im)f.push(w);else{const _=ah(N,x);_!=null&&(f.push(w),g.set(w,_))}}const y=new Ur(f);return new uI(g,y,c.fieldTransforms)}function q$(t,e,n,r=!1){return ah(n,t.Dc(r?4:3,e))}function ah(t,e){if(mI(t=en(t)))return qw("Unsupported field value:",e,t),pI(t,e);if(t instanceof jm)return function(r,s){if(!dI(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const a=[];let c=0;for(const u of r){let h=ah(u,s.yc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return R6(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ht.fromDate(r);return{timestampValue:Lp(s.serializer,a)}}if(r instanceof ht){const a=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lp(s.serializer,a)}}if(r instanceof ai)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof es)return{bytesValue:Oj(s.serializer,r._byteString)};if(r instanceof un){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:bw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof li)return function(c,u){return{mapValue:{fields:{[cj]:{stringValue:uj},[Rp]:{arrayValue:{values:c.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return ww(u.serializer,f)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${fm(r)}`)}(t,e)}function pI(t,e){const n={};return rj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(t,(r,s)=>{const a=ah(s,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function mI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof ai||t instanceof es||t instanceof un||t instanceof jm||t instanceof li)}function qw(t,e,n){if(!mI(n)||!tj(n)){const r=fm(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function mx(t,e,n){if((e=en(e))instanceof hu)return e._internalPath;if(typeof e=="string")return Ww(t,e);throw $p("Field path arguments must be of type string or ",t,!1,void 0,n)}const W$=new RegExp("[~\\*/\\[\\]]");function Ww(t,e,n){if(e.search(W$)>=0)throw $p(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hu(...e.split("."))._internalPath}catch{throw $p(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $p(t,e,n,r,s){const a=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${s}`),h+=")"),new be(ce.INVALID_ARGUMENT,u+t+h)}function gI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new H$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Am("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H$ extends yI{data(){return super.data()}}function Am(t,e){return typeof e=="string"?Ww(t,e):e instanceof hu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new be(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hw{}class xI extends Hw{}function pn(t,e,...n){let r=[];e instanceof Hw&&r.push(e),r=r.concat(n),function(a){const c=a.filter(h=>h instanceof Kw).length,u=a.filter(h=>h instanceof Pm).length;if(c>1||c>0&&u>0)throw new be(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Pm extends xI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Pm(e,n,r)}_apply(e){const n=this._parse(e);return wI(e._query,n),new Zi(e.firestore,e.converter,sx(e._query,n))}_parse(e){const n=oh(e.firestore);return function(a,c,u,h,f,g,y){let v;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new be(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){a1(y,g);const N=[];for(const x of y)N.push(o1(h,a,x));v={arrayValue:{values:N}}}else v=o1(h,a,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||a1(y,g),v=q$(u,c,y,g==="in"||g==="not-in");return wn.create(f,g,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bc(t,e,n){const r=e,s=Am("where",t);return Pm._create(s,r,n)}class Kw extends Hw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Kw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Rs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let c=s;const u=a.getFlattenedFilters();for(const h of u)wI(c,h),c=sx(c,h)}(e._query,n),new Zi(e.firestore,e.converter,sx(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gw extends xI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gw(e,n)}_apply(e){const n=function(s,a,c){if(s.startAt!==null)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new be(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Od(a,c)}(e._query,this._field,this._direction);return new Zi(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new vl(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function _l(t,e="asc"){const n=e,r=Am("orderBy",t);return Gw._create(r,n)}function o1(t,e,n){if(typeof(n=en(n))=="string"){if(n==="")throw new be(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vj(e)&&n.indexOf("/")!==-1)throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ft.fromString(n));if(!We.isDocumentKey(r))throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return EN(t,new We(r))}if(n instanceof un)return EN(t,n._key);throw new be(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fm(n)}.`)}function a1(t,e){if(!Array.isArray(t)||t.length===0)throw new be(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wI(t,e){const n=function(s,a){for(const c of s)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new be(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class K${convertValue(e,n="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw tt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return da(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Rp].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>fn(c.doubleValue));return new li(a)}convertGeoPoint(e){return new ai(fn(e.latitude),fn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pd(e));default:return null}}convertTimestamp(e){const n=ia(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ft.fromString(e);Ot(Uj(r),9688,{name:e});const s=new kd(r.get(1),r.get(3)),a=new We(r.popFirst(5));return s.isEqual(n)||Hi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class rd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qa extends yI{constructor(e,n,r,s,a,c){super(e,n,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ip(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Am("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qa._jsonSchema={type:_n("string",Qa._jsonSchemaVersion),bundleSource:_n("string","DocumentSnapshot"),bundleName:_n("string"),bundle:_n("string")};class ip extends Qa{data(e={}){return super.data(e)}}class Ya{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new rd(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ip(this._firestore,this._userDataWriter,r.key,r,new rd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(u=>{const h=new ip(s._firestore,s._userDataWriter,u.doc.key,u.doc,new rd(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const h=new ip(s._firestore,s._userDataWriter,u.doc.key,u.doc,new rd(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:G$(u.type),doc:h,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ya._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function G$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(t){t=ar(t,un);const e=ar(t.firestore,di);return D$(ih(e),t._key).then(n=>_I(e,t,n))}Ya._jsonSchemaVersion="firestore/querySnapshot/1.0",Ya._jsonSchema={type:_n("string",Ya._jsonSchemaVersion),bundleSource:_n("string","QuerySnapshot"),bundleName:_n("string"),bundle:_n("string")};class Yw extends K${constructor(e){super(),this.firestore=e}convertBytes(e){return new es(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,n)}}function _t(t){t=ar(t,Zi);const e=ar(t.firestore,di),n=ih(e),r=new Yw(e);return vI(t._query),L$(n,t._query).then(s=>new Ya(e,r,t,s))}function Y$(t,e,n){t=ar(t,un);const r=ar(t.firestore,di),s=Qw(t.converter,e,n);return lh(r,[zw(oh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,lr.none())])}function rn(t,e,n,...r){t=ar(t,un);const s=ar(t.firestore,di),a=oh(s);let c;return c=typeof(e=en(e))=="string"||e instanceof hu?fI(a,"updateDoc",t._key,e,n,r):hI(a,"updateDoc",t._key,e),lh(s,[c.toMutation(t._key,lr.exists(!0))])}function Sr(t){return lh(ar(t.firestore,di),[new Em(t._key,lr.none())])}function xn(t,e){const n=ar(t.firestore,di),r=At(t),s=Qw(t.converter,e);return lh(n,[zw(oh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,lr.exists(!1))]).then(()=>r)}function eo(t,...e){var n,r,s;t=en(t);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||i1(e[c])||(a=e[c++]);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(i1(e[c])){const y=e[c];e[c]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[c+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[c+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let h,f,g;if(t instanceof un)f=ar(t.firestore,di),g=ym(t._key.path),h={next:y=>{e[c]&&e[c](_I(f,t,y))},error:e[c+1],complete:e[c+2]};else{const y=ar(t,Zi);f=ar(y.firestore,di),g=y._query;const v=new Yw(f);h={next:w=>{e[c]&&e[c](new Ya(f,v,y,w))},error:e[c+1],complete:e[c+2]},vI(t._query)}return function(v,w,N,x){const _=new Uw(x),P=new Mw(w,_,N);return v.asyncQueue.enqueueAndForget(async()=>Ow(await Up(v),P)),()=>{_.Ou(),v.asyncQueue.enqueueAndForget(async()=>Dw(await Up(v),P))}}(ih(f),g,u,h)}function lh(t,e){return function(r,s){const a=new Ui;return r.asyncQueue.enqueueAndForget(async()=>b$(await O$(r),s,a)),a.promise}(ih(t),e)}function _I(t,e,n){const r=n.docs.get(e._key),s=new Yw(t);return new Qa(t,s,e._key,r,new rd(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=oh(e)}set(e,n,r){this._verifyNotCommitted();const s=Wy(e,this._firestore),a=Qw(s.converter,n,r),c=zw(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(c.toMutation(s._key,lr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=Wy(e,this._firestore);let c;return c=typeof(n=en(n))=="string"||n instanceof hu?fI(this._dataReader,"WriteBatch.update",a._key,n,r,s):hI(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(c.toMutation(a._key,lr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Wy(e,this._firestore);return this._mutations=this._mutations.concat(new Em(n._key,lr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wy(t,e){if((t=en(t)).firestore!==e)throw new be(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function gx(){return new Bw("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J$(t){return ih(t=ar(t,di)),new X$(t,e=>lh(t,e))}(function(e,n=!0){(function(s){lu=s})(gl),Ps(new ss("firestore",(r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new di(new HU(r.getProvider("auth-internal")),new QU(c,r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new be(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kd(f.options.projectId,g)}(c,s),c);return a=Object.assign({useFetchStreams:n},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Cr(cN,uN,e),Cr(cN,uN,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="firebasestorage.googleapis.com",Z$="storageBucket",e9=2*60*1e3,t9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Ds{constructor(e,n,r=0){super(Hy(e),`Firebase Storage: ${n} (${Hy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hi||(hi={}));function Hy(t){return"storage/"+t}function n9(){const t="An unknown error occurred, please check the error payload for server response.";return new mi(hi.UNKNOWN,t)}function r9(){return new mi(hi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function s9(){return new mi(hi.CANCELED,"User canceled the upload/download.")}function i9(t){return new mi(hi.INVALID_URL,"Invalid URL '"+t+"'.")}function o9(t){return new mi(hi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function l1(t){return new mi(hi.INVALID_ARGUMENT,t)}function bI(){return new mi(hi.APP_DELETED,"The Firebase app was deleted.")}function a9(t){return new mi(hi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ts.makeFromUrl(e,n)}catch{return new Ts(e,"")}if(r.path==="")return r;throw o9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+s+c,"i"),h={bucket:1,path:3};function f(F){F.path_=decodeURIComponent(F.path)}const g="v[A-Za-z0-9_]+",y=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${y}/${g}/b/${s}/o${v}`,"i"),N={bucket:1,path:3},x=n===EI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",P=new RegExp(`^https?://${x}/${s}/${_}`,"i"),C=[{regex:u,indices:h,postModify:a},{regex:w,indices:N,postModify:f},{regex:P,indices:{bucket:1,path:2},postModify:f}];for(let F=0;F<C.length;F++){const U=C[F],z=U.regex.exec(e);if(z){const k=z[U.indices.bucket];let O=z[U.indices.path];O||(O=""),r=new Ts(k,O),U.postModify(r);break}}if(r==null)throw i9(e);return r}}class l9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t,e,n){let r=1,s=null,a=null,c=!1,u=0;function h(){return u===2}let f=!1;function g(..._){f||(f=!0,e.apply(null,_))}function y(_){s=setTimeout(()=>{s=null,t(w,h())},_)}function v(){a&&clearTimeout(a)}function w(_,...P){if(f){v();return}if(_){v(),g.call(null,_,...P);return}if(h()||c){v(),g.call(null,_,...P);return}r<64&&(r*=2);let C;u===1?(u=2,C=0):C=(r+Math.random())*1e3,y(C)}let N=!1;function x(_){N||(N=!0,v(),!f&&(s!==null?(_||(u=2),clearTimeout(s),y(0)):_||(u=1)))}return y(0),a=setTimeout(()=>{c=!0,x(!0)},n),x}function u9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d9(t){return t!==void 0}function c1(t,e,n,r){if(r<e)throw l1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw l1(`Invalid value for '${t}'. Expected ${n} or less.`)}function h9(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var zp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(zp||(zp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e,n,r,s,a,c,u,h,f,g,y,v=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,x)=>{this.resolve_=N,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ff(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const u=a.getErrorCode()===zp.NO_ERROR,h=a.getStatus();if(!u||f9(h,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===zp.ABORT;r(!1,new Ff(!1,null,g));return}const f=this.successCodes_.indexOf(h)!==-1;r(!0,new Ff(f,a))})},n=(r,s)=>{const a=this.resolve_,c=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());d9(h)?a(h):a()}catch(h){c(h)}else if(u!==null){const h=n9();h.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,h)):c(h)}else if(s.canceled){const h=this.appDelete_?bI():s9();c(h)}else{const h=r9();c(h)}};this.canceled_?n(!1,new Ff(!1,null,!0)):this.backoffId_=c9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&u9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ff{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function m9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function g9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function y9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function v9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function x9(t,e,n,r,s,a,c=!0,u=!1){const h=h9(t.urlParams),f=t.url+h,g=Object.assign({},t.headers);return y9(g,e),m9(g,n),g9(g,a),v9(g,r),new p9(f,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _9(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n){this._service=e,n instanceof Ts?this._location=n:this._location=Ts.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Bp(e,n)}get root(){const e=new Ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _9(this._location.path)}get storage(){return this._service}get parent(){const e=w9(this._location.path);if(e===null)return null;const n=new Ts(this._location.bucket,e);return new Bp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw a9(e)}}function u1(t,e){const n=e==null?void 0:e[Z$];return n==null?null:Ts.makeFromBucketSpec(n,t)}function E9(t,e,n,r={}){t.host=`${e}:${n}`;const s=fl(e);s&&(ew(`https://${t.host}/b`),iC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:rF(a,t.app.options.projectId))}class b9{constructor(e,n,r,s,a,c=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=EI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=e9,this._maxUploadRetryTime=t9,this._requests=new Set,s!=null?this._bucket=Ts.makeFromBucketSpec(s,this._host):this._bucket=u1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ts.makeFromBucketSpec(this._url,e):this._bucket=u1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){c1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){c1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bp(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new l9(bI());{const c=x9(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const d1="@firebase/storage",h1="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="storage";function N9(t=rw(),e){t=en(t);const r=ml(t,NI).getImmediate({identifier:e}),s=tF("storage");return s&&S9(r,...s),r}function S9(t,e,n,r={}){E9(t,e,n,r)}function T9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new b9(n,r,s,e,gl)}function C9(){Ps(new ss(NI,T9,"PUBLIC").setMultipleInstances(!0)),Cr(d1,h1,""),Cr(d1,h1,"esm2017")}C9();const SI="@firebase/installations",Xw="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=1e4,CI=`w:${Xw}`,jI="FIS_v2",j9="https://firebaseinstallations.googleapis.com/v1",I9=60*60*1e3,A9="installations",P9="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},al=new pl(A9,P9,k9);function II(t){return t instanceof Ds&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI({projectId:t}){return`${j9}/projects/${t}/installations`}function PI(t){return{token:t.token,requestStatus:2,expiresIn:O9(t.expiresIn),creationTime:Date.now()}}async function kI(t,e){const r=(await e.json()).error;return al.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function RI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function R9(t,{refreshToken:e}){const n=RI(t);return n.append("Authorization",D9(e)),n}async function OI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function O9(t){return Number(t.replace("s","000"))}function D9(t){return`${jI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=AI(t),s=RI(t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const c={fid:n,authVersion:jI,appId:t.appId,sdkVersion:CI},u={method:"POST",headers:s,body:JSON.stringify(c)},h=await OI(()=>fetch(r,u));if(h.ok){const f=await h.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:PI(f.authToken)}}else throw await kI("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9=/^[cdef][\w-]{21}$/,yx="";function V9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=U9(t);return F9.test(n)?n:yx}catch{return yx}}function U9(t){return M9(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new Map;function MI(t,e){const n=km(t);FI(n,e),$9(n,e)}function FI(t,e){const n=LI.get(t);if(n)for(const r of n)r(e)}function $9(t,e){const n=z9();n&&n.postMessage({key:t,fid:e}),B9()}let Fa=null;function z9(){return!Fa&&"BroadcastChannel"in self&&(Fa=new BroadcastChannel("[Firebase] FID Change"),Fa.onmessage=t=>{FI(t.data.key,t.data.fid)}),Fa}function B9(){LI.size===0&&Fa&&(Fa.close(),Fa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9="firebase-installations-database",W9=1,ll="firebase-installations-store";let Ky=null;function Jw(){return Ky||(Ky=lm(q9,W9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ll)}}})),Ky}async function qp(t,e){const n=km(t),s=(await Jw()).transaction(ll,"readwrite"),a=s.objectStore(ll),c=await a.get(n);return await a.put(e,n),await s.done,(!c||c.fid!==e.fid)&&MI(t,e.fid),e}async function VI(t){const e=km(t),r=(await Jw()).transaction(ll,"readwrite");await r.objectStore(ll).delete(e),await r.done}async function Rm(t,e){const n=km(t),s=(await Jw()).transaction(ll,"readwrite"),a=s.objectStore(ll),c=await a.get(n),u=e(c);return u===void 0?await a.delete(n):await a.put(u,n),await s.done,u&&(!c||c.fid!==u.fid)&&MI(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zw(t){let e;const n=await Rm(t.appConfig,r=>{const s=H9(r),a=K9(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===yx?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function H9(t){const e=t||{fid:V9(),registrationStatus:0};return UI(e)}function K9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(al.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=G9(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Q9(t)}:{installationEntry:e}}async function G9(t,e){try{const n=await L9(t,e);return qp(t.appConfig,n)}catch(n){throw II(n)&&n.customData.serverCode===409?await VI(t.appConfig):await qp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Q9(t){let e=await f1(t.appConfig);for(;e.registrationStatus===1;)await DI(100),e=await f1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Zw(t);return r||n}return e}function f1(t){return Rm(t,e=>{if(!e)throw al.create("installation-not-found");return UI(e)})}function UI(t){return Y9(t)?{fid:t.fid,registrationStatus:0}:t}function Y9(t){return t.registrationStatus===1&&t.registrationTime+TI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X9({appConfig:t,heartbeatServiceProvider:e},n){const r=J9(t,n),s=R9(t,n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}const c={installation:{sdkVersion:CI,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(c)},h=await OI(()=>fetch(r,u));if(h.ok){const f=await h.json();return PI(f)}else throw await kI("Generate Auth Token",h)}function J9(t,{fid:e}){return`${AI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e0(t,e=!1){let n;const r=await Rm(t.appConfig,a=>{if(!$I(a))throw al.create("not-registered");const c=a.authToken;if(!e&&tz(c))return a;if(c.requestStatus===1)return n=Z9(t,e),a;{if(!navigator.onLine)throw al.create("app-offline");const u=rz(a);return n=ez(t,u),u}});return n?await n:r.authToken}async function Z9(t,e){let n=await p1(t.appConfig);for(;n.authToken.requestStatus===1;)await DI(100),n=await p1(t.appConfig);const r=n.authToken;return r.requestStatus===0?e0(t,e):r}function p1(t){return Rm(t,e=>{if(!$I(e))throw al.create("not-registered");const n=e.authToken;return sz(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function ez(t,e){try{const n=await X9(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await qp(t.appConfig,r),n}catch(n){if(II(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await VI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await qp(t.appConfig,r)}throw n}}function $I(t){return t!==void 0&&t.registrationStatus===2}function tz(t){return t.requestStatus===2&&!nz(t)}function nz(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+I9}function rz(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function sz(t){return t.requestStatus===1&&t.requestTime+TI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iz(t){const e=t,{installationEntry:n,registrationPromise:r}=await Zw(e);return r?r.catch(console.error):e0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oz(t,e=!1){const n=t;return await az(n),(await e0(n,e)).token}async function az(t){const{registrationPromise:e}=await Zw(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lz(t){if(!t||!t.options)throw Gy("App Configuration");if(!t.name)throw Gy("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Gy(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Gy(t){return al.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="installations",cz="installations-internal",uz=t=>{const e=t.getProvider("app").getImmediate(),n=lz(e),r=ml(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},dz=t=>{const e=t.getProvider("app").getImmediate(),n=ml(e,zI).getImmediate();return{getId:()=>iz(n),getToken:s=>oz(n,s)}};function hz(){Ps(new ss(zI,uz,"PUBLIC")),Ps(new ss(cz,dz,"PRIVATE"))}hz();Cr(SI,Xw);Cr(SI,Xw,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz="/firebase-messaging-sw.js",pz="/firebase-cloud-messaging-push-scope",BI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mz="https://fcmregistrations.googleapis.com/v1",qI="google.c.a.c_id",gz="google.c.a.c_l",yz="google.c.a.ts",vz="google.c.a.e",m1=1e4;var g1;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(g1||(g1={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Fd;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Fd||(Fd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xz(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let a=0;a<r.length;++a)s[a]=r.charCodeAt(a);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="fcm_token_details_db",wz=5,y1="fcm_token_object_Store";async function _z(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(Qy))return null;let e=null;return(await lm(Qy,wz,{upgrade:async(r,s,a,c)=>{var u;if(s<2||!r.objectStoreNames.contains(y1))return;const h=c.objectStore(y1),f=await h.index("fcmSenderId").get(t);if(await h.clear(),!!f){if(s===2){const g=f;if(!g.auth||!g.p256dh||!g.endpoint)return;e={token:g.fcmToken,createTime:(u=g.createTime)!==null&&u!==void 0?u:Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:Oi(g.vapidKey)}}}else if(s===3){const g=f;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Oi(g.auth),p256dh:Oi(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Oi(g.vapidKey)}}}else if(s===4){const g=f;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:Oi(g.auth),p256dh:Oi(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:Oi(g.vapidKey)}}}}}})).close(),await Ly(Qy),await Ly("fcm_vapid_details_db"),await Ly("undefined"),Ez(e)?e:null}function Ez(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz="firebase-messaging-database",Nz=1,Vd="firebase-messaging-store";let Yy=null;function WI(){return Yy||(Yy=lm(bz,Nz,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Vd)}}})),Yy}async function Sz(t){const e=HI(t),r=await(await WI()).transaction(Vd).objectStore(Vd).get(e);if(r)return r;{const s=await _z(t.appConfig.senderId);if(s)return await t0(t,s),s}}async function t0(t,e){const n=HI(t),s=(await WI()).transaction(Vd,"readwrite");return await s.objectStore(Vd).put(e,n),await s.done,e}function HI({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tz={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},cr=new pl("messaging","Messaging",Tz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cz(t,e){const n=await r0(t),r=KI(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(n0(t.appConfig),s)).json()}catch(c){throw cr.create("token-subscribe-failed",{errorInfo:c==null?void 0:c.toString()})}if(a.error){const c=a.error.message;throw cr.create("token-subscribe-failed",{errorInfo:c})}if(!a.token)throw cr.create("token-subscribe-no-token");return a.token}async function jz(t,e){const n=await r0(t),r=KI(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(`${n0(t.appConfig)}/${e.token}`,s)).json()}catch(c){throw cr.create("token-update-failed",{errorInfo:c==null?void 0:c.toString()})}if(a.error){const c=a.error.message;throw cr.create("token-update-failed",{errorInfo:c})}if(!a.token)throw cr.create("token-update-no-token");return a.token}async function Iz(t,e){const r={method:"DELETE",headers:await r0(t)};try{const a=await(await fetch(`${n0(t.appConfig)}/${e}`,r)).json();if(a.error){const c=a.error.message;throw cr.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw cr.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function n0({projectId:t}){return`${mz}/projects/${t}/registrations`}async function r0({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function KI({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==BI&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az=7*24*60*60*1e3;async function Pz(t){const e=await Rz(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Oi(e.getKey("auth")),p256dh:Oi(e.getKey("p256dh"))},r=await Sz(t.firebaseDependencies);if(r){if(Oz(r.subscriptionOptions,n))return Date.now()>=r.createTime+Az?kz(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await Iz(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return v1(t.firebaseDependencies,n)}else return v1(t.firebaseDependencies,n)}async function kz(t,e){try{const n=await jz(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await t0(t.firebaseDependencies,r),n}catch(n){throw n}}async function v1(t,e){const r={token:await Cz(t,e),createTime:Date.now(),subscriptionOptions:e};return await t0(t,r),r.token}async function Rz(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:xz(e)})}function Oz(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,a=e.p256dh===t.p256dh;return n&&r&&s&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Dz(e,t),Lz(e,t),Mz(e,t),e}function Dz(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const a=e.notification.icon;a&&(t.notification.icon=a)}function Lz(t,e){e.data&&(t.data=e.data)}function Mz(t,e){var n,r,s,a,c;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const u=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(a=e.notification)===null||a===void 0?void 0:a.click_action;u&&(t.fcmOptions.link=u);const h=(c=e.fcmOptions)===null||c===void 0?void 0:c.analytics_label;h&&(t.fcmOptions.analyticsLabel=h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fz(t){return typeof t=="object"&&!!t&&qI in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(t){if(!t||!t.options)throw Xy("App Configuration Object");if(!t.name)throw Xy("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Xy(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Xy(t){return cr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=Vz(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $z(t){try{t.swRegistration=await navigator.serviceWorker.register(fz,{scope:pz}),t.swRegistration.update().catch(()=>{}),await zz(t.swRegistration)}catch(e){throw cr.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function zz(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${m1} ms`)),m1),s=t.installing||t.waiting;t.active?(clearTimeout(r),e()):s?s.onstatechange=a=>{var c;((c=a.target)===null||c===void 0?void 0:c.state)==="activated"&&(s.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bz(t,e){if(!e&&!t.swRegistration&&await $z(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw cr.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qz(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=BI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(t,e){if(!navigator)throw cr.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw cr.create("permission-blocked");return await qz(t,e==null?void 0:e.vapidKey),await Bz(t,e==null?void 0:e.serviceWorkerRegistration),Pz(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wz(t,e,n){const r=Hz(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[qI],message_name:n[gz],message_time:n[yz],message_device_time:Math.floor(Date.now()/1e3)})}function Hz(t){switch(t){case Fd.NOTIFICATION_CLICKED:return"notification_open";case Fd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kz(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Fd.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(x1(n)):t.onMessageHandler.next(x1(n)));const r=n.data;Fz(r)&&r[vz]==="1"&&await Wz(t,n.messageType,r)}const w1="@firebase/messaging",_1="0.12.22";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gz=t=>{const e=new Uz(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>Kz(e,n)),e},Qz=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>GI(e,r)}};function Yz(){Ps(new ss("messaging",Gz,"PUBLIC")),Ps(new ss("messaging-internal",Qz,"PRIVATE")),Cr(w1,_1),Cr(w1,_1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xz(){try{await aC()}catch{return!1}return typeof window<"u"&&oC()&&fF()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jz(t=rw()){return Xz().then(e=>{if(!e)throw cr.create("unsupported-browser")},e=>{throw cr.create("indexed-db-unsupported")}),ml(en(t),"messaging").getImmediate()}async function Zz(t,e){return t=en(t),GI(t,e)}Yz();const eB={apiKey:"AIzaSyDUR89i6kvh3bp51GCgBX0fTwh3bFt1Ksg",authDomain:"medjust-d26eb.firebaseapp.com",projectId:"medjust-d26eb",storageBucket:"medjust-d26eb.appspot.com",messagingSenderId:"631362355665",appId:"1:631362355665:web:4d7f8eadba1bca0969e0f0"},Om=uC(eB),op=UU(Om),Ae=F$(Om,{experimentalForceLongPolling:!0,useFetchStreams:!1});N9(Om);let vx=null;if(typeof window<"u"&&"serviceWorker"in navigator)try{vx=Jz(Om)}catch(t){console.warn("Firebase Messaging initialization failed:",t)}const QI=E.createContext(void 0);function Dm(){const t=E.useContext(QI);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function tB({children:t}){const[e,n]=E.useState(null),[r,s]=E.useState(!0),[a,c]=E.useState(null),u=y=>new Promise(v=>setTimeout(v,y)),h=async(y,v)=>{if(typeof navigator<"u"&&!navigator.onLine){const _=new Error("No network connection (navigator offline)");throw console.error("Login pre-check failed:",_),c("No network connection - please connect to the internet"),_}const w=3;let N=0,x=null;for(;N<w;){N+=1;try{await S3(op,y,v),c(null);return}catch(_){if(x=_,console.error(`Login attempt ${N} failed:`,_),!((_==null?void 0:_.code)==="auth/network-request-failed"||(_==null?void 0:_.message)&&_.message.toLowerCase().includes("fetch")))throw(_==null?void 0:_.code)==="auth/wrong-password"||(_==null?void 0:_.code)==="auth/user-not-found"?c("Invalid email or password"):c("Authentication error - see console for details"),_;if(c(`Network error (attempt ${N} of ${w}) - checking connection...`),N<w){const j=500*Math.pow(2,N-1);console.log(`Retrying login in ${j}ms...`),await u(j);continue}}}throw console.error("Login failed after retries:",x),c("Network error - unable to reach Firebase. Check your internet connection, disabling browser extensions (adblockers), or ensure your site domain is added to Firebase Authentication -> Authorized domains."),x},f=async()=>{try{await I3(op),c(null)}catch(y){console.error("Logout error:",y),n(null)}};E.useEffect(()=>{const y=setTimeout(()=>{r&&(console.log("ðŸ”„ Auth taking too long - continuing without authentication"),s(!1))},5e3),v=j3(op,w=>{clearTimeout(y),n(w),s(!1),c(null)},w=>{clearTimeout(y),console.error("Auth state change error:",w),c("Authentication error - working offline"),s(!1)});return()=>{clearTimeout(y),v()}},[]);const g={currentUser:e,login:h,logout:f,loading:r,authError:a};return o.jsx(QI.Provider,{value:g,children:!r&&t})}const YI=Hd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),J=E.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const c=r?Ja:"button";return o.jsx(c,{className:Ge(YI({variant:e,size:n,className:t})),ref:a,...s})});J.displayName="Button";const pe=E.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Ge("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));pe.displayName="Card";const Be=E.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Ge("flex flex-col space-y-1.5 p-6",t),...e}));Be.displayName="CardHeader";const Ke=E.forwardRef(({className:t,...e},n)=>o.jsx("h3",{ref:n,className:Ge("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ke.displayName="CardTitle";const St=E.forwardRef(({className:t,...e},n)=>o.jsx("p",{ref:n,className:Ge("text-sm text-muted-foreground",t),...e}));St.displayName="CardDescription";const me=E.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Ge("p-6 pt-0",t),...e}));me.displayName="CardContent";const nB=E.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Ge("flex items-center p-6 pt-0",t),...e}));nB.displayName="CardFooter";class rB extends _e.Component{constructor(n){super(n);DE(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),window.location.replace(window.location.href)});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),(n.message.includes("fetch")||n.message.includes("Firebase")||n.message.includes("Firestore"))&&console.log("ðŸ”„ Firebase error detected - this is a known connectivity issue"),this.setState({error:n,errorInfo:r})}render(){var n,r,s;if(this.state.hasError){const a=((n=this.state.error)==null?void 0:n.message.includes("fetch"))||((r=this.state.error)==null?void 0:r.message.includes("Firebase"))||((s=this.state.error)==null?void 0:s.message.includes("Firestore"));return o.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:o.jsxs(pe,{className:"max-w-md w-full",children:[o.jsx(Be,{children:o.jsxs(Ke,{className:"flex items-center gap-2 text-destructive",children:[o.jsx(iO,{className:"h-5 w-5"}),a?"Connection Error":"Application Error"]})}),o.jsxs(me,{className:"space-y-4",children:[o.jsx("p",{className:"text-muted-foreground",children:a?"There's a connectivity issue with Firebase services. The app will work in offline mode.":"Something went wrong. Please try refreshing the page."}),!1,o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(J,{onClick:this.handleRetry,className:"flex-1",children:[o.jsx(nO,{className:"h-4 w-4 mr-2"}),"Retry"]}),o.jsx(J,{variant:"outline",onClick:()=>window.location.href="/admin/years",className:"flex-1",children:"Go to Years"})]})]})]})})}return this.props.children}}var s0="Avatar",[sB,aW]=Gi(s0),[iB,XI]=sB(s0),JI=E.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,a]=E.useState("idle");return o.jsx(iB,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:o.jsx(Je.span,{...r,ref:e})})});JI.displayName=s0;var ZI="AvatarImage",eA=E.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=t,c=XI(ZI,n),u=oB(r),h=jn(f=>{s(f),c.onImageLoadingStatusChange(f)});return Zt(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?o.jsx(Je.img,{...a,ref:e,src:r}):null});eA.displayName=ZI;var tA="AvatarFallback",nA=E.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,a=XI(tA,n),[c,u]=E.useState(r===void 0);return E.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(h)}},[r]),c&&a.imageLoadingStatus!=="loaded"?o.jsx(Je.span,{...s,ref:e}):null});nA.displayName=tA;function oB(t){const[e,n]=E.useState("idle");return Zt(()=>{if(!t){n("error");return}let r=!0;const s=new window.Image,a=c=>()=>{r&&n(c)};return n("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=t,()=>{r=!1}},[t]),e}var rA=JI,sA=eA,iA=nA;const Yc=E.forwardRef(({className:t,...e},n)=>o.jsx(rA,{ref:n,className:Ge("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Yc.displayName=rA.displayName;const Ud=E.forwardRef(({className:t,...e},n)=>o.jsx(sA,{ref:n,className:Ge("aspect-square h-full w-full",t),...e}));Ud.displayName=sA.displayName;const Xc=E.forwardRef(({className:t,...e},n)=>o.jsx(iA,{ref:n,className:Ge("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Xc.displayName=iA.displayName;const aB=[{icon:X2,label:"Dashboard",path:"/admin"},{icon:pp,label:"News",path:"/admin/news"},{icon:Ga,label:"Notifications",path:"/admin/notifications"},{icon:Ns,label:"Years",path:"/admin/years"},{icon:Vc,label:"Users",path:"/admin/users"},{icon:Vc,label:"Professors",path:"/admin/professors"},{icon:Dx,label:"Store",path:"/admin/store"},{icon:Cs,label:"Orders",path:"/admin/orders"},{icon:$i,label:"Research",path:"/admin/research"},{icon:wd,label:"Maps",path:"/admin/maps"},{icon:LS,label:"Settings",path:"/admin/settings"}];function lB({isOpen:t}){return o.jsx("div",{className:Ge("fixed left-0 top-16 h-[calc(100vh-4rem)] bg-card border-r transition-all duration-300 z-40",t?"w-64":"w-16"),children:o.jsx("nav",{className:"p-4 space-y-2",children:aB.map(e=>o.jsxs("div",{children:[o.jsxs(Ib,{to:e.path,className:({isActive:n})=>Ge("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors","hover:bg-accent hover:text-accent-foreground",n&&"bg-primary text-primary-foreground hover:bg-primary/90",!t&&"justify-center"),children:[o.jsx(e.icon,{className:"h-5 w-5 flex-shrink-0"}),t&&o.jsx("span",{className:"font-medium",children:e.label})]}),e.children&&t&&o.jsx("div",{className:"ml-6 mt-2 space-y-1",children:e.children.map(n=>o.jsxs(Ib,{to:n.path,className:({isActive:r})=>Ge("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors text-sm","hover:bg-accent hover:text-accent-foreground",r&&"bg-primary text-primary-foreground hover:bg-primary/90"),children:[o.jsx(n.icon,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{children:n.label})]},n.path))})]},e.path))})})}function cB(){var a;const[t,e]=E.useState(!0),{currentUser:n,logout:r}=Dm(),s=async()=>{try{await r()}catch(c){console.error("Error logging out:",c)}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-card shadow-sm",children:o.jsxs("div",{className:"flex h-16 items-center px-4",children:[o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>e(!t),className:"mr-4",children:o.jsx(eO,{className:"h-5 w-5"})}),o.jsx("div",{className:"flex-1",children:o.jsx("h1",{className:"text-xl font-semibold text-primary",children:"MedJust Admin Dashboard"})}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yc,{className:"h-8 w-8",children:o.jsx(Xc,{children:o.jsx(ns,{className:"h-4 w-4"})})}),o.jsx("span",{className:"text-sm font-medium",children:((a=n==null?void 0:n.email)==null?void 0:a.split("@")[0])||"Admin"})]}),o.jsx(J,{variant:"ghost",size:"icon",onClick:s,className:"text-muted-foreground hover:text-destructive",children:o.jsx(Z2,{className:"h-4 w-4"})})]})]})}),o.jsxs("div",{className:"flex",children:[o.jsx(lB,{isOpen:t}),o.jsx("main",{className:`flex-1 transition-all duration-300 ${t?"ml-64":"ml-16"}`,children:o.jsx("div",{className:"p-6",children:o.jsx(A4,{})})})]})]})}const Ne=E.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:Ge("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Ne.displayName="Input";var uB="Label",oA=E.forwardRef((t,e)=>o.jsx(Je.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));oA.displayName=uB;var aA=oA;const dB=Hd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Te=E.forwardRef(({className:t,...e},n)=>o.jsx(aA,{ref:n,className:Ge(dB(),t),...e}));Te.displayName=aA.displayName;const hB=Hd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),lA=E.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:Ge(hB({variant:e}),t),...n}));lA.displayName="Alert";const fB=E.forwardRef(({className:t,...e},n)=>o.jsx("h5",{ref:n,className:Ge("mb-1 font-medium leading-none tracking-tight",t),...e}));fB.displayName="AlertTitle";const cA=E.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Ge("text-sm [&_p]:leading-relaxed",t),...e}));cA.displayName="AlertDescription";function pB(){const[t,e]=E.useState(""),[n,r]=E.useState(""),[s,a]=E.useState(""),[c,u]=E.useState(!1),{login:h,authError:f}=Dm(),g=su(),y=async v=>{if(v.preventDefault(),!t||!n){a("Please fill in all fields");return}try{if(typeof navigator<"u"&&!navigator.onLine){a("No network connection. Please connect to the internet and try again.");return}a(""),u(!0),await h(t,n),g("/admin")}catch(w){console.error("Login error:",w),f?a(f):(w==null?void 0:w.code)==="auth/network-request-failed"?a("Network error - check your connection and try again."):(w==null?void 0:w.code)==="auth/wrong-password"||(w==null?void 0:w.code)==="auth/user-not-found"?a("Invalid email or password."):a("Failed to log in. Please check your credentials.")}finally{u(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/20 flex items-center justify-center p-4",children:o.jsxs(pe,{className:"w-full max-w-md shadow-xl",children:[o.jsxs(Be,{className:"space-y-1 text-center",children:[o.jsx("div",{className:"mx-auto w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-4",children:o.jsx(ZE,{className:"h-6 w-6 text-primary-foreground"})}),o.jsx(Ke,{className:"text-2xl font-bold",children:"MedJust Admin"}),o.jsx(St,{children:"Sign in to access the admin dashboard"})]}),o.jsx(me,{children:o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s&&o.jsx(lA,{variant:"destructive",children:o.jsx(cA,{children:s})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"email",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(fp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{id:"email",type:"email",placeholder:"MedAdmin@gmail.com",value:t,onChange:v=>e(v.target.value),className:"pl-10",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"password",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(ZE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:n,onChange:v=>r(v.target.value),className:"pl-10",required:!0})]})]}),o.jsx(J,{type:"submit",className:"w-full",disabled:c,children:c?o.jsxs(o.Fragment,{children:[o.jsx(Qi,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})]})})}const mB=Hd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Pt({className:t,variant:e,...n}){return o.jsx("div",{className:Ge(mB({variant:e}),t),...n})}var gB={};const yB=gB.VITE_FIREBASE_VAPID_KEY||"YOUR_VAPID_KEY_HERE";async function uA(){if(!vx)return console.warn("Firebase Messaging is not available"),null;try{if(await Notification.requestPermission()==="granted"){console.log("Notification permission granted");const e=await Zz(vx,{vapidKey:yB});if(e){console.log("FCM Token:",e);const n=op.currentUser;return n&&await vB(n.uid,e),e}else return console.warn("No FCM token available"),null}else return console.warn("Notification permission denied"),null}catch(t){return console.error("Error requesting notification permission:",t),null}}async function vB(t,e){try{const n=At(Ae,"fcmTokens",t);await Y$(n,{token:e,userId:t,createdAt:new Date,updatedAt:new Date},{merge:!0}),console.log("âœ… FCM token saved for user:",t)}catch(n){console.error("Error saving FCM token:",n)}}async function xB(t){const e=new Map;try{for(let r=0;r<t.length;r+=10){const s=t.slice(r,r+10),a=Qe(Ae,"fcmTokens"),c=pn(a,bc("userId","in",s));(await _t(c)).forEach(h=>{const f=h.data();f.token&&f.userId&&e.set(f.userId,f.token)})}}catch(n){console.error("Error getting FCM tokens:",n)}return e}async function dA(t,e,n,r){try{if("Notification"in window)if(Notification.permission==="granted"){const s=new Notification(e,{body:n,icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:(r==null?void 0:r.newsId)||"notification",data:r||{},requireInteraction:!1});s.onclick=()=>{window.focus(),r!=null&&r.newsId&&(window.location.href="/admin/news"),s.close()},setTimeout(()=>{s.close()},5e3)}else Notification.permission==="default"&&await Notification.requestPermission()==="granted"&&await dA(t,e,n,r)}catch(s){console.error("Error sending push notification:",s)}}async function wB(){if(!("Notification"in window)){console.warn("This browser does not support notifications");return}if(!("serviceWorker"in navigator)){console.warn("This browser does not support service workers");return}try{const t=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registered:",t)}catch(t){console.error("Service Worker registration failed:",t)}await uA()}async function _B(t,e,n){if(!n){console.log("âš ï¸ No yearId provided, skipping notifications");return}try{let r=null;const s=rs(Ae,"years"),a=await _t(s);let c=null;if(a.forEach(w=>{w.id===n&&(c={id:w.id,...w.data()},r=c.batchId||c.batch_id||null)}),!c)try{const w=await Q$(At(Ae,"years",n));w.exists()&&(c={id:w.id,...w.data()},r=c.batchId||c.batch_id||null)}catch(w){console.warn("Could not fetch year directly:",w)}if(!r){console.log("âš ï¸ Could not find batchId for yearId:",n);return}console.log(`ðŸ“¬ Found batchId: ${r} for yearId: ${n}`);const u=[n];a.forEach(w=>{const N=w.data();(N.batchId||N.batch_id)===r&&w.id!==n&&u.push(w.id)});try{const w=pn(Qe(Ae,"years"),bc("batchId","==",r));(await _t(w)).forEach(x=>{u.includes(x.id)||u.push(x.id)})}catch{}console.log(`ðŸ“‹ Found ${u.length} years in batch ${r}:`,u);const h=pn(Qe(Ae,"users")),f=await _t(h),g=[];if(f.forEach(w=>{const N=w.data(),x=N.yearId||N.year||N.year_id;let _=x;typeof x=="string"&&x.includes(":")&&(_=x.split(":")[0]),_&&u.includes(_)&&g.push(w.id)}),console.log(`ðŸ‘¥ Found ${g.length} users to notify in batch ${r}`),g.length===0){console.log("âš ï¸ No users found for this batch, skipping notifications");return}const y=J$(Ae),v=Qe(Ae,"notifications");g.forEach(w=>{const N=At(v),x={userId:w,title:"New News Article",message:e,type:"news",relatedId:t,read:!1,createdAt:new Date,...r?{batchId:r}:{}},_={...x,createdAt:ht.fromDate(x.createdAt)};y.set(N,_)}),await y.commit(),console.log(`âœ… Created ${g.length} notifications for batch ${r}`);try{const w=await xB(g);if(console.log(`ðŸ“± Found ${w.size} FCM tokens for push notifications`),w.size>0){const N=Array.from(w.entries()).map(([x,_])=>dA(_,"New News Article",e,{newsId:t,type:"news",batchId:r||""}).catch(P=>{console.error(`Failed to send push to user ${x}:`,P)}));await Promise.allSettled(N),console.log(`âœ… Attempted to send ${w.size} push notifications`)}else console.log("â„¹ï¸ No FCM tokens found. Users need to enable notifications first.")}catch(w){console.error("âŒ Error sending push notifications:",w)}}catch(r){console.error("âŒ Error sending notifications:",r)}}function i0(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const f=pn(Qe(Ae,"news"),_l("updatedAt","desc")),g=eo(f,y=>{const v=[];y.forEach(w=>{var x,_;const N=w.data();v.push({id:w.id,title:N.title||"",content:N.content||"",imageUrl:N.imageUrl||"",videoUrl:N.videoUrl||"",createdAt:((x=N.createdAt)==null?void 0:x.toDate())||new Date,updatedAt:((_=N.updatedAt)==null?void 0:_.toDate())||new Date,authorName:N.authorName||"",authorId:N.newsId||w.id,tags:N.tags||[],isPinned:N.isPinned||!1,viewsCount:N.viewsCount||0,attachments:N.attachments||[],yearId:N.yearId||"",yearNumber:N.yearNumber||void 0})}),console.log(`âœ… Successfully loaded ${v.length} news articles from Firebase`),e(v),r(!1)},y=>{console.error("Error fetching news:",y),a(y.message||"Failed to fetch news from Firebase"),r(!1)});return()=>g()},[]),{news:t,loading:n,error:s,createNews:async f=>{try{console.log("ðŸ“ Creating news article:",f.title);const g={...f,createdAt:f.createdAt instanceof Date?ht.fromDate(f.createdAt):gx(),updatedAt:f.updatedAt instanceof Date?ht.fromDate(f.updatedAt):gx()};Object.keys(g).forEach(v=>{g[v]===void 0&&delete g[v]});const y=await xn(Qe(Ae,"news"),g);console.log("âœ… News article created successfully with ID:",y.id),f.yearId&&_B(y.id,f.title,f.yearId).catch(v=>{console.error("Failed to send notifications (non-critical):",v)})}catch(g){throw console.error("âŒ Error creating news:",g),console.error("Error details:",g.code,g.message),new Error(`Failed to create news article: ${g.message||"Check Firebase permissions"}`)}},updateNews:async(f,g)=>{try{const y={...g};g.createdAt instanceof Date&&(y.createdAt=ht.fromDate(g.createdAt)),g.updatedAt instanceof Date&&(y.updatedAt=ht.fromDate(g.updatedAt)),Object.keys(y).forEach(v=>{y[v]===void 0&&delete y[v]}),await rn(At(Ae,"news",f),y)}catch(y){throw console.error("Error updating news:",y),console.error("Error details:",y.code,y.message),new Error(`Failed to update news article: ${y.message||"Check Firebase permissions"}`)}},deleteNews:async f=>{try{await Sr(At(Ae,"news",f))}catch(g){throw console.error("Error deleting news:",g),console.error("Error details:",g.code,g.message),new Error(`Failed to delete news article: ${g.message||"Check Firebase permissions"}`)}}}}function hA(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1),h=[{id:"product1",productId:"product1",name:"Medical Textbook",description:"Comprehensive medical textbook for students",price:89.99,images:["https://example.com/book1.jpg"],categoryId:"books",createdAt:new Date},{id:"product2",productId:"product2",name:"Stethoscope",description:"Professional grade stethoscope",price:120,images:["https://example.com/stethoscope.jpg"],categoryId:"equipment",createdAt:new Date}];E.useEffect(()=>{(async()=>{const N=setTimeout(()=>{n&&!c&&(console.log("ðŸ”„ Firebase taking too long - switching to offline mode"),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h))},3e3);try{console.log("ðŸ”„ Fetching products from Firebase...");const x=await _t(Qe(Ae,"products")),_=[];x.forEach(P=>{var C;const j=P.data();_.push({id:P.id,productId:j.productId||P.id,name:j.name||"",description:j.description||"",price:j.price||0,types:j.types||(j.price?[{name:"Default",price:j.price}]:[]),images:j.images||[],categoryId:j.categoryId||"",createdAt:((C=j.createdAt)==null?void 0:C.toDate())||new Date})}),clearTimeout(N),e(_.sort((P,j)=>j.createdAt.getTime()-P.createdAt.getTime())),r(!1),a(null),console.log("âœ… Products loaded successfully:",_.length)}catch(x){clearTimeout(N),x.isFirebaseOfflineError?console.log("ðŸ”„ Firebase offline mode detected - using mock data"):console.error("Firebase error - switching to offline mode:",x.message),u(!0),r(!1),a("Working in offline mode - Firebase unavailable"),e(h)}})()},[]);const f=async w=>{var N,x;if(c){const _={id:`product_${Date.now()}`,productId:`product_${Date.now()}`,...w,createdAt:new Date};e(P=>[_,...P]),console.log("âœ… Added product to offline mode:",_.name);return}try{const _={name:w.name,description:w.description,price:w.price||((x=(N=w.types)==null?void 0:N[0])==null?void 0:x.price)||0,types:w.types||(w.price?[{name:"Default",price:w.price}]:[]),images:w.images,categoryId:w.categoryId||"",createdAt:new Date,productId:""};console.log("ðŸ“ Creating new product:",_);const P=await xn(Qe(Ae,"products"),_);await rn(P,{productId:P.id}),console.log("âœ… Created product with ID:",P.id),window.location.replace(window.location.href)}catch(_){console.error("Error creating product:",_),u(!0),await f(w)}};return{products:t,loading:n,error:s,isOfflineMode:c,createProduct:f,updateProduct:async(w,N)=>{var x;if(c){e(_=>_.map(P=>P.id===w?{...P,...N}:P)),console.log("âœ… Updated product in offline mode");return}try{const _=At(Ae,"products",w),P={...N};N.types&&(P.types=N.types,P.price=((x=N.types[0])==null?void 0:x.price)||N.price||0),await rn(_,P),console.log("âœ… Updated product in Firebase:",w),window.location.replace(window.location.href)}catch(_){console.error("Error updating product:",_)}},deleteProduct:async w=>{if(c){e(N=>N.filter(x=>x.id!==w)),console.log("âœ… Deleted product from offline mode");return}try{await Sr(At(Ae,"products",w)),console.log("âœ… Deleted product from Firebase:",w),window.location.replace(window.location.href)}catch(N){console.error("Error deleting product:",N)}},retryConnection:()=>{console.log("ðŸ”„ Retrying Firebase connection..."),r(!0),a(null),u(!1),window.location.replace(window.location.href)}}}const EB=[{id:"1",name:"Dr. Sarah Johnson",department:"Internal Medicine",email:"sarah.johnson@medjust.com",officeLocation:"Medical Building, Room 301",imageUrl:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?w=300&h=300&fit=crop&crop=face"},{id:"2",name:"Prof. Michael Chen",department:"Surgery",email:"michael.chen@medjust.com",officeLocation:"Surgical Wing, Room 205",imageUrl:"https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=300&h=300&fit=crop&crop=face"},{id:"3",name:"Dr. Emily Rodriguez",department:"Emergency Medicine",email:"emily.rodriguez@medjust.com",officeLocation:"Emergency Department, Office 12",imageUrl:"https://images.unsplash.com/photo-1594824928909-90ad1d93d7c3?w=300&h=300&fit=crop&crop=face"}];function fA(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1);E.useEffect(()=>{const y=async()=>{try{const w=pn(Qe(Ae,"professors"));await _t(w);const N=pn(Qe(Ae,"professors"),_l("name","asc"));return eo(N,_=>{const P=[];_.forEach(j=>{const C=j.data();P.push({id:j.id,name:C.name||"",title:C.title||"",department:C.department||"",email:C.email||"",phone:C.phone||"",officeLocation:C.officeLocation||"",bio:C.bio||"",researchAreas:C.researchAreas||[],website:C.website||"",linkedin:C.linkedin||"",imageUrl:C.imageUrl||""})}),e(P),r(!1)},_=>{console.error("Error in Firebase listener:",_),v()})}catch(w){return console.error("Firebase connection failed:",w),v(),null}},v=()=>{console.log("ðŸ”„ Switching to offline mode with mock data"),u(!0),e(EB),a(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(w=>[...w,v]),console.log("âœ… Added professor in offline mode:",v.name);return}try{await xn(Qe(Ae,"professors"),{...y,professorId:`prof_${Date.now()}`}),console.log("âœ… Added professor to Firebase:",y.name)}catch(v){console.error("Error creating professor:",v),u(!0),await h(y)}};return{professors:t,loading:n,error:s,createProfessor:h,updateProfessor:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(w=>w.map(N=>N.id===y?{...N,...v}:N)),console.log("âœ… Updated professor in offline mode");return}try{await rn(At(Ae,"professors",y),v),console.log("âœ… Updated professor in Firebase")}catch(w){console.error("Error updating professor:",w),e(N=>N.map(x=>x.id===y?{...x,...v}:x)),console.log("âœ… Updated professor locally (Firebase failed)")}},deleteProfessor:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(w=>w.id!==y)),console.log("âœ… Deleted professor in offline mode");return}try{await Sr(At(Ae,"professors",y)),console.log("âœ… Deleted professor from Firebase")}catch(v){console.error("Error deleting professor:",v),e(w=>w.filter(N=>N.id!==y)),console.log("âœ… Deleted professor locally (Firebase failed)")}},isOfflineMode:c}}async function bB(){return(await _t(Qe(Ae,"batches"))).docs.map(e=>{const n=e.data();return{id:e.id,batchName:n.batch_name||n.batchName||"",imageUrl:n.image_url||n.imageUrl||"",aca_supervisor:n.aca_supervisor||n.acadmic_supervisor||n.academic_supervisor||"",cr:n.cr||"",actor:n.actor||"",group_link:n.group_link||n.groupUrl||n.group_url||"",ref:e.ref}})}async function NB(t){const e=t.map(async r=>{try{return(await _t(Qe(r.ref,"years"))).docs.map(a=>{const c=a.data();let u=c.order||1;if(c.name){const h=String(c.name).match(/\d+/);h&&(u=parseInt(h[0]))}return{id:a.id,yearNumber:u,name:c.name||c.title||"",type:u<=3?"basic":"clinical",batchName:r.batchName,imageUrl:c.imageUrl||c.image_url||"",academicSupervisor:c.aca_supervisor||c.acadmic_supervisor||c.academic_supervisor||"",actor:c.actor||"",cr:c.cr||"",groupUrl:c.group_link||c.group_url||c.groupUrl||"",subjects:[],batchId:r.id}})}catch(s){return console.warn("Failed to fetch years for batch",r.id,s),[]}});return(await Promise.all(e)).flat()}async function SB(){return(await _t(Qe(Ae,"Subjects"))).docs}async function TB(t){const n=(await _t(Qe(t.ref,"lectures"))).docs.map(async s=>{var v;const a=s.data(),[c,u,h]=await Promise.all([_t(Qe(s.ref,"videos")),_t(Qe(s.ref,"files")),_t(Qe(s.ref,"quizzes"))]),f=[];c.forEach(w=>{var x;const N=w.data();f.push({id:w.id,title:N.title||N.name||"",url:N.url||N.youtubeUrl||"",thumbnailUrl:N.thumbnailUrl||"",description:N.description||"",uploadedAt:((x=N.uploadedAt)==null?void 0:x.toDate())||new Date,youtubeUrl:N.youtubeUrl||N.url||""})});const g=[];u.forEach(w=>{var x;const N=w.data();g.push({id:w.id,title:N.title||N.name||"",url:N.fileUrl||N.url||"",description:N.description||"",uploadedAt:((x=N.uploadedAt)==null?void 0:x.toDate())||new Date,fileUrl:N.fileUrl||N.url||""})});const y=[];return h.forEach(w=>{const N=w.data();y.push({id:w.id,title:N.title||N.name||"",description:N.description||"",duration:N.duration||30,passRate:N.passRate||70,questions:N.questions||[]})}),{id:s.id,name:a.name||a.title||"",description:a.description||"",subjectId:t.id,order:a.order||1,imageUrl:a.imageUrl||"",createdAt:((v=a.createdAt)==null?void 0:v.toDate())||new Date,uploadedBy:a.uploadedBy||"Unknown",videos:f,files:g,quizzes:y}});return(await Promise.all(n)).sort((s,a)=>s.order-a.order)}async function CB(){const t=await SB(),e=10,n=[];for(let r=0;r<t.length;r+=e){const a=t.slice(r,r+e).map(async u=>{const h=u.data(),f=await TB(u);return{id:u.id,name:h.name||"",subjectId:h.subjectId||u.id,yearId:h.yearId||"",imageUrl:h.imageUrl||"",lectures:f}}),c=await Promise.all(a);n.push(...c)}return n}async function jB(){if(!navigator.onLine)throw new Error("No internet connection");const t=await bB(),[e,n]=await Promise.all([NB(t),CB()]),r=e.map(a=>({...a,subjects:n.filter(c=>c.yearId===a.id).sort((c,u)=>c.name.localeCompare(u.name))})),s=t.map(a=>({id:a.id,batchName:a.batchName,imageUrl:a.imageUrl||"",aca_supervisor:a.aca_supervisor||"",cr:a.cr||"",actor:a.actor||"",group_link:a.group_link||""}));return{years:r.sort((a,c)=>a.yearNumber-c.yearNumber),batches:s,subjects:r.flatMap(a=>a.subjects)}}function El(){const t=Xx(),[e,n]=E.useState(!1),{data:r,isLoading:s,error:a,refetch:c}=UM({queryKey:["years-data"],queryFn:jB,staleTime:5*60*1e3,gcTime:30*60*1e3,retry:1,retryDelay:1e3,enabled:navigator.onLine&&!e}),u=(r==null?void 0:r.years)||[],h=(r==null?void 0:r.batches)||[],f=(r==null?void 0:r.subjects)||[],g=s,y=a?a.message:null;E.useEffect(()=>{navigator.onLine||n(!0)},[]),E.useEffect(()=>{const I=()=>{n(!1),t.invalidateQueries({queryKey:["years-data"]})},M=()=>{n(!0)};return window.addEventListener("online",I),window.addEventListener("offline",M),()=>{window.removeEventListener("online",I),window.removeEventListener("offline",M)}},[t]);const v=()=>{console.log("ï¿½ï¿½ï¿½ Retrying Firebase connection..."),setLoading(!0),setError(null),n(!1),setConnectionStatus("connecting"),setRetryCount(I=>I+1)},w=async(I,M)=>{if(I){if(e||!navigator.onLine){setYears(R=>R.map(W=>W.id===I?{...W,...M}:W));return}try{const R=rs(Ae,"years"),K=(await _t(R)).docs.find(X=>X.id===I);if(K){await rn(K.ref,{...M,updatedAt:new Date}),t.invalidateQueries({queryKey:["years-data"]});return}setYears(X=>X.map(ie=>ie.id===I?{...ie,...M}:ie))}catch(R){console.error("Error updating year:",R),setYears(W=>W.map(K=>K.id===I?{...K,...M}:K))}}},N=async(I,M)=>{if(I){if(e||!navigator.onLine){setBatches(R=>R.map(W=>W.id===I?{...W,...M}:W));return}try{const R=At(Ae,"batches",I);await rn(R,{...M,updatedAt:new Date}),t.invalidateQueries({queryKey:["years-data"]})}catch(R){console.error("Failed to update batch:",R),setBatches(W=>W.map(K=>K.id===I?{...K,...M}:K))}}},x=async(I,M=3)=>{for(let R=0;R<M;R++)try{return await I()}catch(W){if(console.log(`Attempt ${R+1} failed:`,W.message),R===M-1)throw W;await new Promise(K=>setTimeout(K,1e3*(R+1)))}},_=async I=>{if(e||!navigator.onLine){const M={id:`subject_${Date.now()}`,name:I.name,subjectId:`subject_${Date.now()}`,yearId:I.yearId,imageUrl:I.imageUrl||"",lectures:[]};setSubjects(R=>[...R,M]),setYears(R=>R.map(W=>W.id===I.yearId?{...W,subjects:[...W.subjects,M]}:W)),console.log("âœ… Added subject to offline mode:",M.name);return}try{console.log("ðŸ”„ Creating subject with data:",I),await x(async()=>{const M={name:I.name,imageUrl:I.imageUrl||"",hours:I.hours||3,yearId:I.yearId,createdAt:ht.fromDate(new Date),updatedAt:ht.fromDate(new Date)};Object.keys(M).forEach(ie=>{M[ie]===void 0&&delete M[ie]});const R=await xn(Qe(Ae,"Subjects"),M);await rn(R,{subjectId:R.id}),console.log("âœ… Created new subject document:",R.id);const W=R,K=Qe(W,"lectures");if((await _t(K)).empty){const G=await xn(K,{name:"Sample Lecture",title:"Sample Lecture",description:"",imageUrl:"",order:1,uploadedBy:"System",createdAt:new Date,lectureId:""});await rn(G,{lectureId:G.id});const oe=["videos","files","quizzes"];for(const le of oe){const B=Qe(G,le);let Z={};le==="videos"?Z={title:"Sample Video",description:"",thumbnailUrl:"",url:"",uploadedAt:new Date,videoId:""}:le==="files"?Z={title:"Sample File",description:"",url:"",uploadedAt:new Date,fileId:""}:le==="quizzes"&&(Z={title:"Sample Quiz",description:"",duration:30,passRate:70,questions:[],quizId:""});const he=await xn(B,Z),Ce=`${le.slice(0,-1)}Id`;await rn(he,{[Ce]:he.id})}console.log("âœ… Created complete lecture structure for subject:",W.id)}t.invalidateQueries({queryKey:["years-data"]})})}catch(M){console.error("Error creating subject:",M),n(!0),await _(I)}},P=async I=>{if(e){const M={id:`lecture_${Date.now()}`,...I};setSubjects(R=>R.map(W=>W.id===I.subjectId?{...W,lectures:[...W.lectures,M]}:W)),setYears(R=>R.map(W=>({...W,subjects:W.subjects.map(K=>K.id===I.subjectId?{...K,lectures:[...K.lectures,M]}:K)}))),console.log("âœ… Added lecture to offline mode:",M.name);return}try{await x(async()=>{const M=At(Ae,"Subjects",I.subjectId),R=Qe(M,"lectures"),W={title:I.name,description:I.description||"",imageUrl:I.imageUrl||"",order:I.order||1,uploadedBy:I.uploadedBy||"Current User",createdAt:new Date,lectureId:""};console.log("ðŸ“ Creating lecture in subcollection:",W);const K=await xn(R,W);await rn(K,{lectureId:K.id}),console.log("âœ… Created lecture document with ID:",K.id),console.log("ðŸ“ Path: /Subjects/"+I.subjectId+"/lectures/"+K.id),t.invalidateQueries({queryKey:["years-data"]})})}catch(M){console.error("Error creating lecture:",M),n(!0),await P(I)}},j=async(I,M)=>{if(e){setYears(R=>R.map(W=>({...W,subjects:W.subjects.map(K=>({...K,lectures:K.lectures.map(X=>X.id===I?{...X,...M}:X)}))}))),console.log("âœ… Updated lecture in offline mode");return}try{console.log("ðŸ”„ Updating lecture:",I,M),await x(async()=>{const R=pn(rs(Ae,"lectures")),W=await _t(R);let K=null;for(const ie of W.docs)if(ie.id===I){K=ie.ref;break}if(!K)throw new Error(`Lecture ${I} not found`);const X={...M};X.name&&(X.title=X.name,delete X.name),Object.keys(X).forEach(ie=>{X[ie]===void 0&&delete X[ie]}),X.createdAt instanceof Date&&(X.createdAt=ht.fromDate(X.createdAt)),X.updatedAt instanceof Date&&(X.updatedAt=ht.fromDate(X.updatedAt)),X.updatedAt||(X.updatedAt=ht.fromDate(new Date)),await rn(K,X),console.log("âœ… Updated lecture successfully:",I),t.invalidateQueries({queryKey:["years-data"]})})}catch(R){throw console.error("âŒ Error updating lecture:",R),console.error("Error details:",R.code,R.message),new Error(`Failed to update lecture: ${R.message||"Check Firebase permissions"}`)}},C=async(I,M)=>{if(e){setSubjects(R=>R.map(W=>W.id===I?{...W,lectures:W.lectures.filter(K=>K.id!==M)}:W)),setYears(R=>R.map(W=>({...W,subjects:W.subjects.map(K=>K.id===I?{...K,lectures:K.lectures.filter(X=>X.id!==M)}:K)}))),console.log("âœ… Deleted lecture from offline mode");return}try{const R=At(Ae,"Subjects",I),W=At(R,"lectures",M);await Sr(W),console.log("âœ… Deleted lecture from Firebase"),t.invalidateQueries({queryKey:["years-data"]})}catch(R){console.error("Error deleting lecture:",R)}},F=async I=>{if(I){if(e){setSubjects(M=>M.filter(R=>R.id!==I)),setYears(M=>M.map(R=>({...R,subjects:R.subjects.filter(W=>W.id!==I)}))),console.log("âœ… Deleted subject in offline mode");return}try{const M=At(Ae,"Subjects",I);await Sr(M),console.log("âœ… Deleted subject from Firebase"),t.invalidateQueries({queryKey:["years-data"]})}catch(M){console.error("Error deleting subject:",M)}}},U=async(I,M,R)=>{if(!(!I||!M)){if(e){setYears(W=>W.map(K=>({...K,subjects:K.subjects.map(X=>X.id===I?{...X,lectures:X.lectures.map(ie=>ie.id===M?{...ie,videos:[...ie.videos||[],{id:`video_${Date.now()}`,title:R.title,url:R.url,thumbnailUrl:R.thumbnailUrl||"",description:R.description||"",uploadedAt:new Date}]}:ie)}:X)})));return}try{const W=At(Ae,"Subjects",I,"lectures",M);await xn(Qe(W,"videos"),{title:R.title,description:R.description||"",url:R.url,duration:R.duration||"",thumbnailUrl:R.thumbnailUrl||"",platform:R.platform||"",uploadedAt:new Date,uploadedBy:"Current User"}),t.invalidateQueries({queryKey:["years-data"]})}catch(W){console.error("Error adding video:",W)}}},z=async(I,M,R)=>{if(!(!I||!M)){if(e){setYears(W=>W.map(K=>({...K,subjects:K.subjects.map(X=>X.id===I?{...X,lectures:X.lectures.map(ie=>ie.id===M?{...ie,files:[...ie.files||[],{id:`file_${Date.now()}`,title:R.title,fileUrl:R.fileUrl,url:R.fileUrl,description:R.description||"",uploadedAt:new Date}]}:ie)}:X)})));return}try{const W=At(Ae,"Subjects",I,"lectures",M),K={title:R.title,description:R.description||"",fileUrl:R.fileUrl,url:R.fileUrl,uploadedAt:ht.fromDate(new Date),uploadedBy:"Current User"};Object.keys(K).forEach(X=>{K[X]===void 0&&delete K[X]}),await xn(Qe(W,"files"),K),console.log("âœ… File added successfully:",R.title),t.invalidateQueries({queryKey:["years-data"]})}catch(W){throw console.error("âŒ Error adding file:",W),console.error("Error details:",W.code,W.message),new Error(`Failed to add file: ${W.message||"Check Firebase permissions"}`)}}},k=async(I,M,R)=>{if(!(!I||!M)){if(e){setYears(W=>W.map(K=>({...K,subjects:K.subjects.map(X=>X.id===I?{...X,lectures:X.lectures.map(ie=>ie.id===M?{...ie,quizzes:[...ie.quizzes||[],{id:`quiz_${Date.now()}`,title:R.title,description:R.description||"",duration:R.timeLimit||30,passRate:R.passingScore||70,questions:R.questions||[]}]}:ie)}:X)})));return}try{const W=At(Ae,"Subjects",I,"lectures",M);await xn(Qe(W,"quizzes"),{title:R.title,description:R.description||"",duration:R.timeLimit||30,passRate:R.passingScore||70,questions:R.questions||[],createdAt:new Date,uploadedBy:"Current User"}),t.invalidateQueries({queryKey:["years-data"]})}catch(W){console.error("Error adding quiz:",W)}}},O=async(I,M={})=>{const R=M.yearNumber||1,W=M.name||`Year ${R}`,K=M.type||(R<=3?"basic":"clinical");if(e||!navigator.onLine){const X={id:`year_${Date.now()}`,yearNumber:R,name:W,type:K,batchName:"",batchId:I||void 0,imageUrl:"",academicSupervisor:"",actor:"",cr:"",groupUrl:"",subjects:[]};setYears(ie=>[...ie,X]),I&&setBatches(ie=>ie.map(G=>G.id===I?{...G}:G)),console.log("âœ… Added year in offline mode:",X);return}try{await x(async()=>{if(I){const X=At(Ae,"batches",I),ie=Qe(X,"years"),G=await xn(ie,{name:W,order:R,imageUrl:"",batch_name:W,createdAt:new Date});try{await rn(G,{yearId:G.id})}catch{}}else{const X=Qe(Ae,"years"),ie=await xn(X,{name:W,order:R,imageUrl:"",batch_name:W,createdAt:new Date});try{await rn(ie,{yearId:ie.id})}catch{}}t.invalidateQueries({queryKey:["years-data"]})})}catch(X){console.error("Error creating year:",X),n(!0),await O(I,M)}};return{years:u,batches:h,subjects:f,loading:g,error:y,isOfflineMode:e,retryConnection:v,updateYear:w,updateBatch:N,createSubject:_,createLecture:P,updateLecture:j,createYear:O,createBatch:async(I={})=>{const M=I.batchName||"New Batch",R=I.imageUrl||"",W=I.cr||"",K=`batch_temp_${Date.now()}`,X={id:K,batchName:M,imageUrl:R,cr:W};if(setBatches(ie=>[X,...ie]),e||!navigator.onLine){console.log("âœ… Added batch in offline mode:",X);return}try{await x(async()=>{const ie=Qe(Ae,"batches"),G=await xn(ie,{batch_name:M,image_url:R,cr:W,createdAt:new Date});try{await rn(G,{batchId:G.id})}catch{}const oe={id:G.id,batchName:M,imageUrl:R,cr:W};setBatches(le=>[oe,...le.filter(B=>B.id!==K)]),t.invalidateQueries({queryKey:["years-data"]})})}catch(ie){console.error("Error creating batch:",ie),setBatches(oe=>oe.filter(le=>le.id!==K)),n(!0);const G={id:`batch_${Date.now()}`,batchName:M,imageUrl:R,cr:W};setBatches(oe=>[G,...oe])}},deleteBatch:async(I,M={deleteYears:!0})=>{if(!I)return;const R=h,W=u;if(setBatches(K=>K.filter(X=>X.id!==I)),setYears(K=>K.filter(X=>(X.batchId||X.batchName)!==I)),e||!navigator.onLine){console.log("âœ… Removed batch in offline mode:",I);return}try{await x(async()=>{const K=At(Ae,"batches",I);if(M.deleteYears)try{const X=Qe(K,"years"),ie=await _t(X);for(const G of ie.docs)await Sr(G.ref)}catch{const ie=rs(Ae,"years"),G=await _t(ie);for(const oe of G.docs){const le=oe.data();(le.batchId||le.batch_id)===I&&await Sr(oe.ref)}}else{const X=rs(Ae,"years"),ie=await _t(X);for(const G of ie.docs){const oe=G.data();if((oe.batchId||oe.batch_id)===I)try{await rn(G.ref,{batchId:null,batch_name:null})}catch{}}}await Sr(K),t.invalidateQueries({queryKey:["years-data"]})})}catch(K){throw console.error("Error deleting batch:",K),setBatches(R||[]),setYears(W||[]),K}},deleteLecture:C,deleteSubject:F,addVideo:U,addFile:z,addQuiz:k}}function IB(){const[t,e]=E.useState(null),[n,r]=E.useState(!1),{currentUser:s}=Dm();E.useEffect(()=>{"Notification"in window&&e(Notification.permission)},[]),E.useEffect(()=>{s&&t==="granted"&&wB().catch(c=>{console.error("Failed to initialize push notifications:",c)})},[s,t]);const a=async()=>{r(!0);try{const c=await uA();e(c?"granted":Notification.permission)}catch(c){console.error("Error requesting notification permission:",c),e(Notification.permission)}finally{r(!1)}};return"Notification"in window?t==="granted"?o.jsx(pe,{className:"border-green-500/50 bg-green-500/10",children:o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2 text-green-600",children:[o.jsx(dp,{className:"h-5 w-5"}),"Push Notifications Enabled"]}),o.jsx(St,{children:"You will receive notifications for new news articles and updates."})]})}):t==="denied"?o.jsx(pe,{className:"border-yellow-500/50 bg-yellow-500/10",children:o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2 text-yellow-600",children:[o.jsx($2,{className:"h-5 w-5"}),"Notifications Blocked"]}),o.jsx(St,{children:"Notifications are blocked. Please enable them in your browser settings to receive updates."})]})}):o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[o.jsx(Ga,{className:"h-5 w-5"}),"Enable Push Notifications"]}),o.jsx(St,{children:"Get notified when new news articles are published for your batch."})]}),o.jsx(me,{children:o.jsx(J,{onClick:a,disabled:n,className:"w-full",children:n?"Enabling...":"Enable Notifications"})})]}):null}const AB=[{id:1,type:"news",title:"New cardiology study published",time:"2 hours ago",author:"Dr. Smith"},{id:2,type:"video",title:"Anatomy lecture uploaded",time:"4 hours ago",author:"Prof. Johnson"},{id:3,type:"quiz",title:"Pharmacology quiz created",time:"6 hours ago",author:"Dr. Brown"},{id:4,type:"product",title:"New stethoscope added to store",time:"1 day ago",author:"Admin"}];function PB(){const{news:t,loading:e}=i0(),{products:n,loading:r}=hA(),{professors:s,loading:a}=fA(),{years:c,loading:u}=El(),h=t.length,f=s.length,g=n.reduce((w,N)=>w+(N.price||0),0);c.reduce((w,N)=>w+N.subjects.reduce((x,_)=>x+_.lectures.reduce((P,j)=>{var C;return P+(((C=j.videos)==null?void 0:C.length)||0)},0),0),0);const y=c.reduce((w,N)=>{var x;return w+(((x=N.subjects)==null?void 0:x.length)||0)},0),v=[{title:"Total News Articles",value:e?"...":String(h),change:"+12%",icon:pp,color:"text-blue-600"},{title:"Subjects",value:u?"...":String(y),change:"+5%",icon:Ns,color:"text-green-600"},{title:"Active Professors",value:a?"...":String(f),change:"+2%",icon:Vc,color:"text-purple-600"},{title:"Store Revenue",value:r?"...":`$${g.toLocaleString()}`,change:"+18%",icon:OS,color:"text-emerald-600"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Welcome to the MedJust Admin Dashboard"})]}),o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:v.map(w=>o.jsxs(pe,{children:[o.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ke,{className:"text-sm font-medium",children:w.title}),o.jsx(w.icon,{className:`h-4 w-4 ${w.color}`})]}),o.jsxs(me,{children:[o.jsx("div",{className:"text-2xl font-bold",children:w.value}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[o.jsxs(Pt,{variant:"secondary",className:"text-green-600",children:[o.jsx(sO,{className:"h-3 w-3 mr-1"}),w.change]}),o.jsx("span",{className:"text-muted-foreground",children:"from last month"})]})]})]},w.title))}),o.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Recent Activity"}),o.jsx(St,{children:"Latest updates across all modules"})]}),o.jsx(me,{children:o.jsx("div",{className:"space-y-4",children:AB.map(w=>o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium",children:w.title}),o.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[o.jsx("span",{children:w.author}),o.jsx("span",{children:"â€¢"}),o.jsx("span",{children:w.time})]})]})]},w.id))})})]}),o.jsx(IB,{}),o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Quick Actions"}),o.jsx(St,{children:"Common administrative tasks"})]}),o.jsx(me,{children:o.jsxs("div",{className:"grid gap-2",children:[o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(pp,{className:"h-5 w-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Create News Article"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Publish new content"})]})]}),o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(ni,{className:"h-5 w-5 text-green-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Upload Video"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Add learning resource"})]})]}),o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(Vc,{className:"h-5 w-5 text-purple-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Add Professor"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Register new faculty"})]})]}),o.jsxs("button",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-accent transition-colors text-left",children:[o.jsx(Dx,{className:"h-5 w-5 text-emerald-600"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Add Product"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Expand store catalog"})]})]})]})})]})]})]})}function kB(t,e){const n=E.createContext(e),r=a=>{const{children:c,...u}=a,h=E.useMemo(()=>u,Object.values(u));return o.jsx(n.Provider,{value:h,children:c})};r.displayName=t+"Provider";function s(a){const c=E.useContext(n);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function RB(t,e=[]){let n=[];function r(a,c){const u=E.createContext(c),h=n.length;n=[...n,c];const f=y=>{var P;const{scope:v,children:w,...N}=y,x=((P=v==null?void 0:v[t])==null?void 0:P[h])||u,_=E.useMemo(()=>N,Object.values(N));return o.jsx(x.Provider,{value:_,children:w})};f.displayName=a+"Provider";function g(y,v){var x;const w=((x=v==null?void 0:v[t])==null?void 0:x[h])||u,N=E.useContext(w);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${y}\` must be used within \`${a}\``)}return[f,g]}const s=()=>{const a=n.map(c=>E.createContext(c));return function(u){const h=(u==null?void 0:u[t])||a;return E.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return s.scopeName=t,[r,OB(s,...e)]}function OB(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const c=r.reduce((u,{useScope:h,scopeName:f})=>{const y=h(a)[`__scope${f}`];return{...u,...y}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var Jy="focusScope.autoFocusOnMount",Zy="focusScope.autoFocusOnUnmount",E1={bubbles:!1,cancelable:!0},DB="FocusScope",o0=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...c}=t,[u,h]=E.useState(null),f=jn(s),g=jn(a),y=E.useRef(null),v=jt(e,x=>h(x)),w=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let x=function(C){if(w.paused||!u)return;const F=C.target;u.contains(F)?y.current=F:Ao(y.current,{select:!0})},_=function(C){if(w.paused||!u)return;const F=C.relatedTarget;F!==null&&(u.contains(F)||Ao(y.current,{select:!0}))},P=function(C){if(document.activeElement===document.body)for(const U of C)U.removedNodes.length>0&&Ao(u)};document.addEventListener("focusin",x),document.addEventListener("focusout",_);const j=new MutationObserver(P);return u&&j.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",_),j.disconnect()}}},[r,u,w.paused]),E.useEffect(()=>{if(u){N1.add(w);const x=document.activeElement;if(!u.contains(x)){const P=new CustomEvent(Jy,E1);u.addEventListener(Jy,f),u.dispatchEvent(P),P.defaultPrevented||(LB($B(pA(u)),{select:!0}),document.activeElement===x&&Ao(u))}return()=>{u.removeEventListener(Jy,f),setTimeout(()=>{const P=new CustomEvent(Zy,E1);u.addEventListener(Zy,g),u.dispatchEvent(P),P.defaultPrevented||Ao(x??document.body,{select:!0}),u.removeEventListener(Zy,g),N1.remove(w)},0)}}},[u,f,g,w]);const N=E.useCallback(x=>{if(!n&&!r||w.paused)return;const _=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,P=document.activeElement;if(_&&P){const j=x.currentTarget,[C,F]=MB(j);C&&F?!x.shiftKey&&P===F?(x.preventDefault(),n&&Ao(C,{select:!0})):x.shiftKey&&P===C&&(x.preventDefault(),n&&Ao(F,{select:!0})):P===j&&x.preventDefault()}},[n,r,w.paused]);return o.jsx(Je.div,{tabIndex:-1,...c,ref:v,onKeyDown:N})});o0.displayName=DB;function LB(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ao(r,{select:e}),document.activeElement!==n)return}function MB(t){const e=pA(t),n=b1(e,t),r=b1(e.reverse(),t);return[n,r]}function pA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function b1(t,e){for(const n of t)if(!FB(n,{upTo:e}))return n}function FB(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function VB(t){return t instanceof HTMLInputElement&&"select"in t}function Ao(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&VB(t)&&e&&t.select()}}var N1=UB();function UB(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=S1(t,e),t.unshift(e)},remove(e){var n;t=S1(t,e),(n=t[0])==null||n.resume()}}}function S1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function $B(t){return t.filter(e=>e.tagName!=="A")}function zB(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var Lm=t=>{const{present:e,children:n}=t,r=BB(e),s=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),a=jt(r.ref,qB(s));return typeof n=="function"||r.isPresent?E.cloneElement(s,{ref:a}):null};Lm.displayName="Presence";function BB(t){const[e,n]=E.useState(),r=E.useRef({}),s=E.useRef(t),a=E.useRef("none"),c=t?"mounted":"unmounted",[u,h]=zB(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const f=Vf(r.current);a.current=u==="mounted"?f:"none"},[u]),Zt(()=>{const f=r.current,g=s.current;if(g!==t){const v=a.current,w=Vf(f);t?h("MOUNT"):w==="none"||(f==null?void 0:f.display)==="none"?h("UNMOUNT"):h(g&&v!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,h]),Zt(()=>{if(e){let f;const g=e.ownerDocument.defaultView??window,y=w=>{const x=Vf(r.current).includes(w.animationName);if(w.target===e&&x&&(h("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",f=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},v=w=>{w.target===e&&(a.current=Vf(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{g.clearTimeout(f),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:E.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function Vf(t){return(t==null?void 0:t.animationName)||"none"}function qB(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ev=0;function WB(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??T1()),document.body.insertAdjacentElement("beforeend",t[1]??T1()),ev++,()=>{ev===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ev--}},[])}function T1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var gd="right-scroll-bar-position",yd="width-before-scroll-bar",HB="with-scroll-bars-hidden",KB="--removed-body-scroll-bar-size";function tv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function GB(t,e){var n=E.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var QB=typeof window<"u"?E.useLayoutEffect:E.useEffect,C1=new WeakMap;function mA(t,e){var n=GB(null,function(r){return t.forEach(function(s){return tv(s,r)})});return QB(function(){var r=C1.get(n);if(r){var s=new Set(r),a=new Set(t),c=n.current;s.forEach(function(u){a.has(u)||tv(u,null)}),a.forEach(function(u){s.has(u)||tv(u,c)})}C1.set(n,t)},[t]),n}function YB(t){return t}function XB(t,e){e===void 0&&(e=YB);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var c=e(a,r);return n.push(c),function(){n=n.filter(function(u){return u!==c})}},assignSyncMedium:function(a){for(r=!0;n.length;){var c=n;n=[],c.forEach(a)}n={push:function(u){return a(u)},filter:function(){return n}}},assignMedium:function(a){r=!0;var c=[];if(n.length){var u=n;n=[],u.forEach(a),c=n}var h=function(){var g=c;c=[],g.forEach(a)},f=function(){return Promise.resolve().then(h)};f(),n={push:function(g){c.push(g),f()},filter:function(g){return c=c.filter(g),n}}}};return s}function gA(t){t===void 0&&(t={});var e=XB(null);return e.options=Jn({async:!0,ssr:!1},t),e}var yA=function(t){var e=t.sideCar,n=iu(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,Jn({},n))};yA.isSideCarExport=!0;function vA(t,e){return t.useMedium(e),yA}var xA=gA(),nv=function(){},Mm=E.forwardRef(function(t,e){var n=E.useRef(null),r=E.useState({onScrollCapture:nv,onWheelCapture:nv,onTouchMoveCapture:nv}),s=r[0],a=r[1],c=t.forwardProps,u=t.children,h=t.className,f=t.removeScrollBar,g=t.enabled,y=t.shards,v=t.sideCar,w=t.noIsolation,N=t.inert,x=t.allowPinchZoom,_=t.as,P=_===void 0?"div":_,j=t.gapMode,C=iu(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),F=v,U=mA([n,e]),z=Jn(Jn({},C),s);return E.createElement(E.Fragment,null,g&&E.createElement(F,{sideCar:xA,removeScrollBar:f,shards:y,noIsolation:w,inert:N,setCallbacks:a,allowPinchZoom:!!x,lockRef:n,gapMode:j}),c?E.cloneElement(E.Children.only(u),Jn(Jn({},z),{ref:U})):E.createElement(P,Jn({},z,{className:h,ref:U}),u))});Mm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Mm.classNames={fullWidth:yd,zeroRight:gd};var JB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ZB(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=JB();return e&&t.setAttribute("nonce",e),t}function e8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function t8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var n8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=ZB())&&(e8(e,n),t8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},r8=function(){var t=n8();return function(e,n){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},a0=function(){var t=r8(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},s8={left:0,top:0,right:0,gap:0},rv=function(t){return parseInt(t||"",10)||0},i8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[rv(n),rv(r),rv(s)]},o8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return s8;var e=i8(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},a8=a0(),Nc="data-scroll-locked",l8=function(t,e,n,r){var s=t.left,a=t.top,c=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(HB,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Nc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gd,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(yd,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(gd," .").concat(gd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(yd," .").concat(yd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Nc,`] {
    `).concat(KB,": ").concat(u,`px;
  }
`)},j1=function(){var t=parseInt(document.body.getAttribute(Nc)||"0",10);return isFinite(t)?t:0},c8=function(){E.useEffect(function(){return document.body.setAttribute(Nc,(j1()+1).toString()),function(){var t=j1()-1;t<=0?document.body.removeAttribute(Nc):document.body.setAttribute(Nc,t.toString())}},[])},wA=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;c8();var a=E.useMemo(function(){return o8(s)},[s]);return E.createElement(a8,{styles:l8(a,!e,s,n?"":"!important")})},xx=!1;if(typeof window<"u")try{var Uf=Object.defineProperty({},"passive",{get:function(){return xx=!0,!0}});window.addEventListener("test",Uf,Uf),window.removeEventListener("test",Uf,Uf)}catch{xx=!1}var oc=xx?{passive:!1}:!1,u8=function(t){return t.tagName==="TEXTAREA"},_A=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!u8(t)&&n[e]==="visible")},d8=function(t){return _A(t,"overflowY")},h8=function(t){return _A(t,"overflowX")},I1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=EA(t,r);if(s){var a=bA(t,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},f8=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},p8=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},EA=function(t,e){return t==="v"?d8(e):h8(e)},bA=function(t,e){return t==="v"?f8(e):p8(e)},m8=function(t,e){return t==="h"&&e==="rtl"?-1:1},g8=function(t,e,n,r,s){var a=m8(t,window.getComputedStyle(e).direction),c=a*r,u=n.target,h=e.contains(u),f=!1,g=c>0,y=0,v=0;do{var w=bA(t,u),N=w[0],x=w[1],_=w[2],P=x-_-a*N;(N||P)&&EA(t,u)&&(y+=P,v+=N),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(y)<1||!g&&Math.abs(v)<1)&&(f=!0),f},$f=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},A1=function(t){return[t.deltaX,t.deltaY]},P1=function(t){return t&&"current"in t?t.current:t},y8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},v8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},x8=0,ac=[];function w8(t){var e=E.useRef([]),n=E.useRef([0,0]),r=E.useRef(),s=E.useState(x8++)[0],a=E.useState(a0)[0],c=E.useRef(t);E.useEffect(function(){c.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=fC([t.lockRef.current],(t.shards||[]).map(P1),!0).filter(Boolean);return x.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=E.useCallback(function(x,_){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!c.current.allowPinchZoom;var P=$f(x),j=n.current,C="deltaX"in x?x.deltaX:j[0]-P[0],F="deltaY"in x?x.deltaY:j[1]-P[1],U,z=x.target,k=Math.abs(C)>Math.abs(F)?"h":"v";if("touches"in x&&k==="h"&&z.type==="range")return!1;var O=I1(k,z);if(!O)return!0;if(O?U=k:(U=k==="v"?"h":"v",O=I1(k,z)),!O)return!1;if(!r.current&&"changedTouches"in x&&(C||F)&&(r.current=U),!U)return!0;var L=r.current||U;return g8(L,_,x,L==="h"?C:F)},[]),h=E.useCallback(function(x){var _=x;if(!(!ac.length||ac[ac.length-1]!==a)){var P="deltaY"in _?A1(_):$f(_),j=e.current.filter(function(U){return U.name===_.type&&(U.target===_.target||_.target===U.shadowParent)&&y8(U.delta,P)})[0];if(j&&j.should){_.cancelable&&_.preventDefault();return}if(!j){var C=(c.current.shards||[]).map(P1).filter(Boolean).filter(function(U){return U.contains(_.target)}),F=C.length>0?u(_,C[0]):!c.current.noIsolation;F&&_.cancelable&&_.preventDefault()}}},[]),f=E.useCallback(function(x,_,P,j){var C={name:x,delta:_,target:P,should:j,shadowParent:_8(P)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(F){return F!==C})},1)},[]),g=E.useCallback(function(x){n.current=$f(x),r.current=void 0},[]),y=E.useCallback(function(x){f(x.type,A1(x),x.target,u(x,t.lockRef.current))},[]),v=E.useCallback(function(x){f(x.type,$f(x),x.target,u(x,t.lockRef.current))},[]);E.useEffect(function(){return ac.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,oc),document.addEventListener("touchmove",h,oc),document.addEventListener("touchstart",g,oc),function(){ac=ac.filter(function(x){return x!==a}),document.removeEventListener("wheel",h,oc),document.removeEventListener("touchmove",h,oc),document.removeEventListener("touchstart",g,oc)}},[]);var w=t.removeScrollBar,N=t.inert;return E.createElement(E.Fragment,null,N?E.createElement(a,{styles:v8(s)}):null,w?E.createElement(wA,{gapMode:t.gapMode}):null)}function _8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const E8=vA(xA,w8);var NA=E.forwardRef(function(t,e){return E.createElement(Mm,Jn({},t,{ref:e,sideCar:E8}))});NA.classNames=Mm.classNames;var b8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},lc=new WeakMap,zf=new WeakMap,Bf={},sv=0,SA=function(t){return t&&(t.host||SA(t.parentNode))},N8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=SA(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},S8=function(t,e,n,r){var s=N8(e,Array.isArray(t)?t:[t]);Bf[n]||(Bf[n]=new WeakMap);var a=Bf[n],c=[],u=new Set,h=new Set(s),f=function(y){!y||u.has(y)||(u.add(y),f(y.parentNode))};s.forEach(f);var g=function(y){!y||h.has(y)||Array.prototype.forEach.call(y.children,function(v){if(u.has(v))g(v);else try{var w=v.getAttribute(r),N=w!==null&&w!=="false",x=(lc.get(v)||0)+1,_=(a.get(v)||0)+1;lc.set(v,x),a.set(v,_),c.push(v),x===1&&N&&zf.set(v,!0),_===1&&v.setAttribute(n,"true"),N||v.setAttribute(r,"true")}catch(P){console.error("aria-hidden: cannot operate on ",v,P)}})};return g(e),u.clear(),sv++,function(){c.forEach(function(y){var v=lc.get(y)-1,w=a.get(y)-1;lc.set(y,v),a.set(y,w),v||(zf.has(y)||y.removeAttribute(r),zf.delete(y)),w||y.removeAttribute(n)}),sv--,sv||(lc=new WeakMap,lc=new WeakMap,zf=new WeakMap,Bf={})}},TA=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=b8(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),S8(r,s,n,"aria-hidden")):function(){return null}},l0="Dialog",[CA,lW]=RB(l0),[T8,Ls]=CA(l0),jA=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:c=!0}=t,u=E.useRef(null),h=E.useRef(null),[f=!1,g]=Za({prop:r,defaultProp:s,onChange:a});return o.jsx(T8,{scope:e,triggerRef:u,contentRef:h,contentId:Ho(),titleId:Ho(),descriptionId:Ho(),open:f,onOpenChange:g,onOpenToggle:E.useCallback(()=>g(y=>!y),[g]),modal:c,children:n})};jA.displayName=l0;var IA="DialogTrigger",AA=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ls(IA,n),a=jt(e,s.triggerRef);return o.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":d0(s.open),...r,ref:a,onClick:qe(t.onClick,s.onOpenToggle)})});AA.displayName=IA;var c0="DialogPortal",[C8,PA]=CA(c0,{forceMount:void 0}),kA=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=Ls(c0,e);return o.jsx(C8,{scope:e,forceMount:n,children:E.Children.map(r,c=>o.jsx(Lm,{present:n||a.open,children:o.jsx(yT,{asChild:!0,container:s,children:c})}))})};kA.displayName=c0;var Wp="DialogOverlay",RA=E.forwardRef((t,e)=>{const n=PA(Wp,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Ls(Wp,t.__scopeDialog);return a.modal?o.jsx(Lm,{present:r||a.open,children:o.jsx(j8,{...s,ref:e})}):null});RA.displayName=Wp;var j8=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ls(Wp,n);return o.jsx(NA,{as:Ja,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(Je.div,{"data-state":d0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),cl="DialogContent",OA=E.forwardRef((t,e)=>{const n=PA(cl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=Ls(cl,t.__scopeDialog);return o.jsx(Lm,{present:r||a.open,children:a.modal?o.jsx(I8,{...s,ref:e}):o.jsx(A8,{...s,ref:e})})});OA.displayName=cl;var I8=E.forwardRef((t,e)=>{const n=Ls(cl,t.__scopeDialog),r=E.useRef(null),s=jt(e,n.contentRef,r);return E.useEffect(()=>{const a=r.current;if(a)return TA(a)},[]),o.jsx(DA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qe(t.onCloseAutoFocus,a=>{var c;a.preventDefault(),(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:qe(t.onPointerDownOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&a.preventDefault()}),onFocusOutside:qe(t.onFocusOutside,a=>a.preventDefault())})}),A8=E.forwardRef((t,e)=>{const n=Ls(cl,t.__scopeDialog),r=E.useRef(!1),s=E.useRef(!1);return o.jsx(DA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,u;(c=t.onCloseAutoFocus)==null||c.call(t,a),a.defaultPrevented||(r.current||(u=n.triggerRef.current)==null||u.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var h,f;(h=t.onInteractOutside)==null||h.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=a.target;((f=n.triggerRef.current)==null?void 0:f.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),DA=E.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...c}=t,u=Ls(cl,n),h=E.useRef(null),f=jt(e,h);return WB(),o.jsxs(o.Fragment,{children:[o.jsx(o0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Mx,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":d0(u.open),...c,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(P8,{titleId:u.titleId}),o.jsx(R8,{contentRef:h,descriptionId:u.descriptionId})]})]})}),u0="DialogTitle",LA=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ls(u0,n);return o.jsx(Je.h2,{id:s.titleId,...r,ref:e})});LA.displayName=u0;var MA="DialogDescription",FA=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ls(MA,n);return o.jsx(Je.p,{id:s.descriptionId,...r,ref:e})});FA.displayName=MA;var VA="DialogClose",UA=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Ls(VA,n);return o.jsx(Je.button,{type:"button",...r,ref:e,onClick:qe(t.onClick,()=>s.onOpenChange(!1))})});UA.displayName=VA;function d0(t){return t?"open":"closed"}var $A="DialogTitleWarning",[cW,zA]=kB($A,{contentName:cl,titleName:u0,docsSlug:"dialog"}),P8=({titleId:t})=>{const e=zA($A),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},k8="DialogDescriptionWarning",R8=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${zA(k8).contentName}}.`;return E.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},O8=jA,D8=AA,L8=kA,BA=RA,qA=OA,WA=LA,HA=FA,KA=UA;const GA=O8,M8=D8,F8=L8,V8=KA,QA=E.forwardRef(({className:t,...e},n)=>o.jsx(BA,{ref:n,className:Ge("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));QA.displayName=BA.displayName;const h0=E.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(F8,{children:[o.jsx(QA,{}),o.jsxs(qA,{ref:r,className:Ge("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,o.jsxs(KA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Uc,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));h0.displayName=qA.displayName;const f0=({className:t,...e})=>o.jsx("div",{className:Ge("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});f0.displayName="DialogHeader";const YA=({className:t,...e})=>o.jsx("div",{className:Ge("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});YA.displayName="DialogFooter";const p0=E.forwardRef(({className:t,...e},n)=>o.jsx(WA,{ref:n,className:Ge("text-lg font-semibold leading-none tracking-tight",t),...e}));p0.displayName=WA.displayName;const m0=E.forwardRef(({className:t,...e},n)=>o.jsx(HA,{ref:n,className:Ge("text-sm text-muted-foreground",t),...e}));m0.displayName=HA.displayName;const js=E.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:Ge("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));js.displayName="Textarea";function XA(t){const e=E.useRef({value:t,previous:t});return E.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var g0="Switch",[U8,uW]=Gi(g0),[$8,z8]=U8(g0),JA=E.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:c,disabled:u,value:h="on",onCheckedChange:f,...g}=t,[y,v]=E.useState(null),w=jt(e,j=>v(j)),N=E.useRef(!1),x=y?!!y.closest("form"):!0,[_=!1,P]=Za({prop:s,defaultProp:a,onChange:f});return o.jsxs($8,{scope:n,checked:_,disabled:u,children:[o.jsx(Je.button,{type:"button",role:"switch","aria-checked":_,"aria-required":c,"data-state":tP(_),"data-disabled":u?"":void 0,disabled:u,value:h,...g,ref:w,onClick:qe(t.onClick,j=>{P(C=>!C),x&&(N.current=j.isPropagationStopped(),N.current||j.stopPropagation())})}),x&&o.jsx(B8,{control:y,bubbles:!N.current,name:r,value:h,checked:_,required:c,disabled:u,style:{transform:"translateX(-100%)"}})]})});JA.displayName=g0;var ZA="SwitchThumb",eP=E.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=z8(ZA,n);return o.jsx(Je.span,{"data-state":tP(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});eP.displayName=ZA;var B8=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,a=E.useRef(null),c=XA(n),u=sT(e);return E.useEffect(()=>{const h=a.current,f=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&y){const v=new Event("click",{bubbles:r});y.call(h,n),h.dispatchEvent(v)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...t.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function tP(t){return t?"checked":"unchecked"}var nP=JA,q8=eP;const rP=E.forwardRef(({className:t,...e},n)=>o.jsx(nP,{className:Ge("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:o.jsx(q8,{className:Ge("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));rP.displayName=nP.displayName;function W8({news:t,onClose:e,onSave:n}){var _,P,j;const{years:r}=El(),[s,a]=E.useState(null),[c,u]=E.useState({title:"",content:"",imageUrl:"",videoUrl:"",tags:[],isPinned:!1,attachments:[],yearId:"",subjectId:""}),[h,f]=E.useState(""),[g,y]=E.useState(!1);E.useEffect(()=>{t&&u({title:t.title||"",content:t.content||"",imageUrl:t.imageUrl||"",videoUrl:t.videoUrl||"",tags:t.tags||[],isPinned:t.isPinned||!1,attachments:t.attachments||[],yearId:t.yearId||"",subjectId:t.subjectId||""})},[t]),E.useEffect(()=>{let C=!0;return(async()=>{try{if(r&&r.length>0||s)return;const U=await _t(rs(Ae,"years")),z=[];U.forEach(k=>{const O=k.data();let L=O.order||1;if(O.name){const D=String(O.name).match(/\d+/);D&&(L=parseInt(D[0]))}z.push({id:k.id,yearNumber:L,type:L<=3?"basic":"clinical",subjects:O.subjects||[]})}),C&&z.length>0&&a(z)}catch{}})(),()=>{C=!1}},[r,s]);const v=async C=>{C.preventDefault(),y(!0);try{const F={...c,yearNumber:void 0,updatedAt:new Date,...t?{}:{createdAt:new Date,authorName:"Current User",authorId:"current-user-id",viewsCount:0}};if(c.yearId){const U=r.find(z=>z.id===c.yearId);U&&(F.yearNumber=U.yearNumber)}c.subjectId&&(F.subjectId=c.subjectId),n(F)}catch(F){console.error("Error saving news:",F)}finally{y(!1)}},w=()=>{h.trim()&&!c.tags.includes(h.trim())&&(u(C=>({...C,tags:[...C.tags,h.trim()]})),f(""))},N=C=>{u(F=>({...F,tags:F.tags.filter(U=>U!==C)}))},x=C=>{C.key==="Enter"&&(C.preventDefault(),w())};return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(J,{variant:"ghost",onClick:e,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Article":"Create Article"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update the news article details":"Create a new news article for medical students"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(rP,{id:"pinned",checked:c.isPinned,onCheckedChange:C=>u(F=>({...F,isPinned:C}))}),o.jsxs(Te,{htmlFor:"pinned",className:"flex items-center gap-2",children:[o.jsx(DS,{className:"h-4 w-4"}),"Pin Article"]})]})})]}),o.jsx("form",{onSubmit:v,className:"space-y-6",children:o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Article Content"}),o.jsx(St,{children:"Main article information and content"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"title",children:"Title *"}),o.jsx(Ne,{id:"title",placeholder:"Enter article title...",value:c.title,onChange:C=>u(F=>({...F,title:C.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"content",children:"Content *"}),o.jsx(js,{id:"content",placeholder:"Write your article content here...",value:c.content,onChange:C=>u(F=>({...F,content:C.target.value})),rows:12,required:!0})]})]})]}),o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Tags"}),o.jsx(St,{children:"Add relevant tags to help categorize this article"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ne,{placeholder:"Add a tag...",value:h,onChange:C=>f(C.target.value),onKeyPress:x}),o.jsxs(J,{type:"button",onClick:w,variant:"outline",children:[o.jsx(cd,{className:"h-4 w-4 mr-2"}),"Add"]})]}),c.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(C=>o.jsxs(Pt,{variant:"secondary",className:"flex items-center gap-1",children:[C,o.jsx("button",{type:"button",onClick:()=>N(C),className:"ml-1 hover:text-destructive",children:o.jsx(Uc,{className:"h-3 w-3"})})]},C))})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Media"}),o.jsx(St,{children:"Add images and videos to your article"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"imageUrl",children:"Featured Image URL"}),o.jsx(Ne,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:C=>u(F=>({...F,imageUrl:C.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"videoUrl",children:"Video URL"}),o.jsx(Ne,{id:"videoUrl",placeholder:"https://youtube.com/watch?v=...",value:c.videoUrl,onChange:C=>u(F=>({...F,videoUrl:C.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"yearId",children:"Related Year"}),o.jsxs("select",{id:"yearId",value:c.yearId,onChange:C=>u(F=>({...F,yearId:C.target.value,subjectId:""})),className:"w-full border rounded px-3 py-2",children:[o.jsx("option",{value:"",children:"-- Not related to a specific year --"}),(s&&s.length>0?s:r)&&(s&&s.length>0?s:r).length>0?(s&&s.length>0?s:r).map(C=>o.jsx("option",{value:C.id,children:`Year ${C.yearNumber}`},C.id)):o.jsx("option",{value:"",children:"No years available"})]})]}),c.yearId&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Te,{htmlFor:"subjectId",children:"Related Subject"}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected year: ",(_=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))!=null&&_.yearNumber?`Year ${(P=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:P.yearNumber}`:""]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{id:"subjectId",value:c.subjectId,onChange:C=>u(F=>({...F,subjectId:C.target.value})),className:"flex-1 border rounded px-3 py-2",children:[o.jsx("option",{value:"",children:"-- Not related to a specific subject --"}),(((j=(s&&s.length>0?s:r).find(C=>C.id===c.yearId))==null?void 0:j.subjects)||[]).map(C=>o.jsx("option",{value:C.id,children:C.name},C.id))]}),o.jsx(J,{type:"button",variant:"outline",size:"sm",onClick:()=>{var C;(C=navigator.clipboard)==null||C.writeText(c.yearId||""),alert("Year id copied")},children:"Copy ID"})]})]}),c.imageUrl&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{children:"Preview"}),o.jsx("img",{src:c.imageUrl,alt:"Preview",className:"w-full h-32 object-cover rounded-lg border",onError:C=>{C.currentTarget.style.display="none"}})]})]})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsx(Ke,{children:"Actions"})}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs(J,{type:"submit",className:"w-full",disabled:g,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),g?"Saving...":t?"Update Article":"Create Article"]}),o.jsx(J,{type:"button",variant:"outline",className:"w-full",onClick:e,children:"Cancel"})]})]})]})]})})]})}function sP(t){const[e,n]=E.useState([]),[r,s]=E.useState(!0),[a,c]=E.useState(null);E.useEffect(()=>{let w;w=pn(Qe(Ae,"notifications"),_l("createdAt","desc"));const N=eo(w,x=>{const _=[];x.forEach(P=>{var C;const j=P.data();_.push({id:P.id,userId:j.userId||"",title:j.title||"",message:j.message||"",type:j.type||"system",relatedId:j.relatedId||void 0,read:j.read||!1,createdAt:((C=j.createdAt)==null?void 0:C.toDate())||new Date,batchId:j.batchId||void 0})}),n(_),s(!1)},x=>{console.error("Error fetching notifications:",x),c(x.message||"Failed to fetch notifications"),s(!1)});return()=>N()},[t]);const u=async w=>{try{const N={...w,createdAt:w.createdAt instanceof Date?ht.fromDate(w.createdAt):gx()};Object.keys(N).forEach(_=>{N[_]===void 0&&delete N[_]});const x=await xn(Qe(Ae,"notifications"),N);return console.log("âœ… Notification created successfully with ID:",x.id),x.id}catch(N){throw console.error("âŒ Error creating notification:",N),new Error(`Failed to create notification: ${N.message||"Check Firebase permissions"}`)}},h=async(w,N)=>{try{const x={...N};N.createdAt instanceof Date&&(x.createdAt=ht.fromDate(N.createdAt)),Object.keys(x).forEach(_=>{x[_]===void 0&&delete x[_]}),await rn(At(Ae,"notifications",w),x)}catch(x){throw console.error("Error updating notification:",x),new Error(`Failed to update notification: ${x.message||"Check Firebase permissions"}`)}},f=async w=>{try{await rn(At(Ae,"notifications",w),{read:!0})}catch(N){throw console.error("Error marking notification as read:",N),new Error(`Failed to mark notification as read: ${N.message||"Check Firebase permissions"}`)}},g=async w=>{try{const N=w?pn(Qe(Ae,"notifications"),bc("userId","==",w),bc("read","==",!1)):pn(Qe(Ae,"notifications"),bc("read","==",!1)),_=(await _t(N)).docs.map(P=>rn(P.ref,{read:!0}));await Promise.all(_)}catch(N){throw console.error("Error marking all notifications as read:",N),new Error(`Failed to mark all notifications as read: ${N.message||"Check Firebase permissions"}`)}},y=async w=>{try{await Sr(At(Ae,"notifications",w))}catch(N){throw console.error("Error deleting notification:",N),new Error(`Failed to delete notification: ${N.message||"Check Firebase permissions"}`)}},v=e.filter(w=>!w.read).length;return{notifications:e,loading:r,error:a,createNotification:u,updateNotification:h,markAsRead:f,markAllAsRead:g,deleteNotification:y,unreadCount:v}}const H8=[{id:"user_1",displayName:"Ali Ahmed",email:"ali.ahmed@example.com",role:"student",photoURL:"",createdAt:new Date},{id:"user_2",displayName:"Mona Hassan",email:"mona.hassan@example.com",role:"staff",photoURL:"",createdAt:new Date(Date.now()-1e3*60*60*24)}];function Fm(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1),{years:h}=El();return E.useEffect(()=>{const y=async()=>{try{const w=pn(Qe(Ae,"users"));await _t(w);const N=pn(Qe(Ae,"users"),_l("createdAt","desc")),x=eo(N,_=>{const P=[];_.forEach(C=>{var O,L;const F=C.data(),U=F.yearId||F.year||F.year_id||F.yearId||null;let z=U,k="-";if(typeof U=="string"&&U.includes(":")){const[D,I]=U.split(":",2);z=D||null,I&&I.trim()&&(k=I.trim())}if(z&&k==="-"){const D=h.find(I=>I.id===z);D&&(D.batchName?k=D.batchName:k=`Year ${{1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[D.yearNumber]||String(D.yearNumber)}`)}P.push({id:C.id,displayName:F.displayName||F.name||"",email:F.email||"",role:F.role||"student",photoURL:F.photoURL||F.avatar||"",createdAt:((L=(O=F.createdAt)==null?void 0:O.toDate)==null?void 0:L.call(O))||void 0,yearId:z||void 0,yearLabel:k})}),e(P);const j=Array.from(new Set(P.map(C=>C.yearId).filter(Boolean).filter(C=>!h.find(F=>F.id===C))));j.length>0&&Promise.all(j.map(async C=>{try{const U=(await _t(rs(Ae,"years"))).docs.find(L=>L.id===C);if(!U)return null;const z=U.data(),k=z.yearNumber||z.order||(()=>{const L=(z.name||"").match(/\d+/);return L?parseInt(L[0]):void 0})(),O=z.batchName||(k?`Year ${k}`:void 0)||void 0;return{id:C,label:O}}catch{return null}})).then(C=>{const F={};C.forEach(U=>{U&&U.id&&U.label&&(F[U.id]=U.label)}),Object.keys(F).length>0&&e(U=>U.map(z=>z.yearId&&F[z.yearId]?{...z,yearLabel:F[z.yearId]}:z))}),r(!1)},_=>{console.error("Failed to listen to users:",_),v()});return()=>x()}catch(w){console.error("Failed to load users, entering offline mode:",w),v()}},v=()=>{u(!0),e(H8),r(!1),a(null)};y()},[]),E.useEffect(()=>{!h||h.length===0||e(y=>y.map(v=>{if(!v)return v;const w=v.yearId||null;if(!w)return v;const N=h.find(j=>j.id===w);if(!N)return v;const _={1:"One",2:"Two",3:"Three",4:"Four",5:"Five",6:"Six"}[N.yearNumber]||String(N.yearNumber),P=N.batchName?N.batchName:`Year ${_}`;return{...v,yearLabel:P}}))},[h]),{users:t,loading:n,error:s,updateUser:async(y,v)=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(w=>w.map(N=>N.id===y?{...N,...v}:N));return}try{await rn(At(Ae,"users",y),v)}catch(w){console.error("Failed to update user:",w),e(N=>N.map(x=>x.id===y?{...x,...v}:x))}},deleteUser:async y=>{if(c||y.startsWith("mock_")||y.startsWith("offline_")){e(v=>v.filter(w=>w.id!==y));return}try{await Sr(At(Ae,"users",y))}catch(v){console.error("Failed to delete user:",v),e(w=>w.filter(N=>N.id!==y))}},isOfflineMode:c}}function K8(){var D;const[t,e]=E.useState(""),[n,r]=E.useState(null),[s,a]=E.useState(!1),[c,u]=E.useState("all"),[h,f]=E.useState(null),{news:g,loading:y,error:v,createNews:w,updateNews:N,deleteNews:x}=i0(),{notifications:_}=sP(),{users:P}=Fm(),j=g.filter(I=>I.title.toLowerCase().includes(t.toLowerCase())||I.tags.some(M=>M.toLowerCase().includes(t.toLowerCase()))),C=I=>I?_.filter(M=>M.relatedId===I):[],F=E.useMemo(()=>j.map(I=>({...I,notificationCount:C(I.id).length,notifications:C(I.id)})),[j,_]),U=I=>{const M=P.find(R=>R.id===I);return(M==null?void 0:M.displayName)||(M==null?void 0:M.email)||I},z=I=>{f(I)},k=I=>{r(I),a(!0)},O=async I=>{if(window.confirm("Are you sure you want to delete this article?"))try{await x(I)}catch(M){console.error("Error deleting news:",M),alert("Failed to delete article. Please try again.")}},L=()=>{r(null),a(!0)};return s?o.jsx(W8,{news:n,onClose:()=>{a(!1),r(null)},onSave:async I=>{try{n?await N(n.id,I):await w(I),a(!1),r(null)}catch(M){console.error("Error saving news:",M),alert("Failed to save article. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"News Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Create and manage news articles for medical students"})]}),o.jsxs(J,{onClick:L,className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Create Article"]})]}),o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:o.jsxs("div",{className:"relative flex-1",children:[o.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search articles by title or tags...",value:t,onChange:I=>e(I.target.value),className:"pl-10"})]})})})}),y&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Qi,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading news articles..."})]})}),v&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading news"}),o.jsx("p",{className:"text-muted-foreground",children:v})]})}),!y&&!v&&o.jsx("div",{className:"space-y-4",children:F.map(I=>o.jsx(pe,{className:"hover:shadow-md transition-shadow",children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"flex gap-4",children:[I.imageUrl&&o.jsx("img",{src:I.imageUrl,alt:I.title,className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:I.title}),I.isPinned&&o.jsx(DS,{className:"h-4 w-4 text-yellow-500"})]}),o.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-3",children:I.content}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:I.tags.map(M=>o.jsxs(Pt,{variant:"secondary",className:"text-xs",children:[o.jsx(cd,{className:"h-3 w-3 mr-1"}),M]},M))}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ns,{className:"h-3 w-3"}),I.authorName]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(gc,{className:"h-3 w-3"}),I.createdAt.toLocaleDateString()]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Q2,{className:"h-3 w-3"}),I.viewsCount," views"]}),I.notificationCount>0&&o.jsxs("button",{onClick:()=>z(I.id),className:"flex items-center gap-1 hover:text-primary transition-colors cursor-pointer",children:[o.jsx(Ga,{className:"h-3 w-3"}),I.notificationCount," notification",I.notificationCount>1?"s":""]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[I.notificationCount>0&&o.jsxs(J,{variant:"ghost",size:"icon",onClick:()=>z(I.id),className:"relative",title:`View ${I.notificationCount} notification${I.notificationCount>1?"s":""}`,children:[o.jsx(kS,{className:"h-4 w-4"}),o.jsx(Pt,{variant:"default",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:I.notificationCount})]}),o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>k(I),children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>O(I.id),className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})})]})})},I.id))}),!y&&!v&&j.length===0&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(pp,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No articles found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"No articles match your search criteria.":"Start by creating your first news article."}),o.jsxs(J,{onClick:L,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Create Article"]})]})}),o.jsx(GA,{open:h!==null,onOpenChange:I=>!I&&f(null),children:o.jsxs(h0,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[o.jsxs(f0,{children:[o.jsxs(p0,{className:"flex items-center gap-2",children:[o.jsx(Ga,{className:"h-5 w-5"}),"Notifications for News Article"]}),o.jsx(m0,{children:h&&((D=g.find(I=>I.id===h))==null?void 0:D.title)})]}),h&&o.jsx("div",{className:"space-y-3 mt-4",children:C(h).length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(Ga,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No notifications found for this article"})]}):C(h).map(I=>o.jsx(pe,{className:I.read?"opacity-75":"border-primary/50",children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[!I.read&&o.jsx(Pt,{variant:"default",className:"h-2 w-2 p-0 rounded-full"}),o.jsx("h3",{className:"font-semibold",children:I.title}),o.jsx(Pt,{variant:"outline",children:I.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:I.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ns,{className:"h-3 w-3"}),U(I.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(gc,{className:"h-3 w-3"}),I.createdAt.toLocaleDateString()]}),I.batchId&&o.jsxs(Pt,{variant:"secondary",className:"text-xs",children:["Batch: ",I.batchId.slice(0,8),"..."]})]})]}),!I.read&&o.jsx(Pt,{variant:"default",className:"text-xs",children:"Unread"})]})})},I.id))})]})})]})}function y0({quiz:t,onClose:e,onSave:n}){const[r,s]=E.useState({title:"",description:"",timeLimit:30,passingScore:70,questions:[],type:"multiple_choice"}),[a,c]=E.useState({question:"",options:["","","",""],correctAnswer:0,explanation:"",imageUrl:"",weight:1}),[u,h]=E.useState(!1);E.useEffect(()=>{t&&s({title:t.title||"",description:t.description||"",timeLimit:t.timeLimit||30,passingScore:t.passingScore||70,questions:t.questions||[],type:t.type||"multiple_choice"})},[t]);const f=async x=>{x.preventDefault(),h(!0);try{const _={...r,...t?{}:{createdAt:new Date,createdBy:"Current User"}};_.type||(_.type="multiple_choice"),n(_)}catch(_){console.error("Error saving quiz:",_)}finally{h(!1)}},g=()=>{var P;const x=r.type==="flashcard",_=a.question.trim();if(x){const j=a.options&&String(a.options[0]).trim()||a.answer;if(_&&j){const C={...a,options:[String(((P=a.options)==null?void 0:P[0])||a.answer||"").trim()],correctAnswer:0};s(F=>({...F,questions:[...F.questions,C]})),c({question:"",options:[""],correctAnswer:0,explanation:"",imageUrl:"",weight:1})}return}_&&Array.isArray(a.options)&&a.options.filter(j=>String(j).trim()).length>=2&&typeof a.correctAnswer=="number"&&String(a.options[a.correctAnswer]||"").trim()&&(s(j=>({...j,questions:[...j.questions,{...a}]})),c({question:"",options:["","","",""],correctAnswer:0,explanation:"",imageUrl:"",weight:1}))},y=x=>{s(_=>({..._,questions:_.questions.filter((P,j)=>j!==x)}))},v=(x,_)=>{const P=[...a.options||[]];P[x]=_,c(j=>({...j,options:P}))},w=()=>{c(x=>({...x,options:[...x.options||[],""]}))},N=x=>{c(_=>{const P=[..._.options||[]];P.splice(x,1);let j=_.correctAnswer;return j>=P.length&&(j=Math.max(0,P.length-1)),{..._,options:P,correctAnswer:j}})};return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(J,{variant:"ghost",onClick:e,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Quiz":"Create Quiz"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update the quiz details and questions":"Create a new quiz for students"})]})]})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[o.jsx($i,{className:"h-5 w-5"}),"Quiz Information"]}),o.jsx(St,{children:"Basic information about the quiz"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"title",children:"Quiz Title *"}),o.jsx(Ne,{id:"title",placeholder:"Enter quiz title...",value:r.title,onChange:x=>s(_=>({..._,title:x.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"description",children:"Description"}),o.jsx(js,{id:"description",placeholder:"Describe what this quiz covers...",value:r.description,onChange:x=>s(_=>({..._,description:x.target.value})),rows:3})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Te,{htmlFor:"timeLimit",className:"flex items-center gap-2",children:[o.jsx(hp,{className:"h-4 w-4"}),"Time Limit (minutes)"]}),o.jsx(Ne,{id:"timeLimit",type:"number",min:"1",value:r.timeLimit,onChange:x=>s(_=>({..._,timeLimit:parseInt(x.target.value)||30}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Te,{htmlFor:"passingScore",className:"flex items-center gap-2",children:[o.jsx(rO,{className:"h-4 w-4"}),"Passing Score (%)"]}),o.jsx(Ne,{id:"passingScore",type:"number",min:"0",max:"100",value:r.passingScore,onChange:x=>s(_=>({..._,passingScore:parseInt(x.target.value)||70}))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"quizType",children:"Quiz Type"}),o.jsxs("select",{id:"quizType",value:r.type||"multiple_choice",onChange:x=>s(_=>({..._,type:x.target.value})),className:"w-full border rounded px-3 py-2",children:[o.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),o.jsx("option",{value:"flashcard",children:"Flashcard"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how this quiz will be presented to students."})]})]})]}),o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Add Question"}),o.jsx(St,{children:"Create multiple choice questions for the quiz"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"question",children:"Question"}),o.jsx(js,{id:"question",placeholder:"Enter your question...",value:a.question,onChange:x=>c(_=>({..._,question:x.target.value})),rows:3})]}),o.jsx("div",{className:"space-y-2",children:r.type==="flashcard"?o.jsxs(o.Fragment,{children:[o.jsx(Te,{children:"Correct Answer"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ne,{placeholder:"Correct answer",value:a.options[0]??a.answer??"",onChange:x=>{c(_=>({..._,options:[x.target.value]}))}}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"For flashcards enter the correct answer (single). Use [[answer]] in the question to create blanks."})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Te,{children:"Answer Options"}),o.jsxs("div",{className:"space-y-2",children:[a.options.map((x,_)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx(Te,{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-sm",children:String.fromCharCode(65+_)}),o.jsx(Ne,{placeholder:`Option ${String.fromCharCode(65+_)}`,value:x,onChange:P=>v(_,P.target.value),className:a.correctAnswer===_?"ring-2 ring-green-500":""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(J,{type:"button",variant:a.correctAnswer===_?"default":"outline",size:"sm",onClick:()=>c(P=>({...P,correctAnswer:_})),children:a.correctAnswer===_?"Correct":"Mark Correct"}),a.options.length>2&&o.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(_),children:"Remove"})]})]},_)),o.jsx("div",{children:o.jsx(J,{type:"button",variant:"outline",onClick:w,className:"mt-2",children:"Add Option"})})]})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"explanation",children:"Explanation (Optional)"}),o.jsx(js,{id:"explanation",placeholder:"Explain why this is the correct answer...",value:a.explanation||"",onChange:x=>c(_=>({..._,explanation:x.target.value})),rows:3}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"This explanation will be shown to students after they answer the question"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),o.jsx(Ne,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:a.imageUrl,onChange:x=>c(_=>({..._,imageUrl:x.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"weight",children:"Question Weight"}),o.jsx(Ne,{id:"weight",type:"number",min:1,value:a.weight,onChange:x=>c(_=>({..._,weight:parseFloat(x.target.value)||1}))})]}),o.jsxs(J,{type:"button",onClick:g,className:"w-full",children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),r.questions.length>0&&o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["Quiz Questions (",r.questions.length,")"]})}),o.jsx(me,{children:o.jsx("div",{className:"space-y-4",children:r.questions.map((x,_)=>o.jsx("div",{className:"p-4 border rounded-lg space-y-3",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("p",{className:"font-medium",children:[_+1,". ",x.question]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Te,{className:"text-sm",children:"Weight"}),o.jsx(Ne,{type:"number",min:1,value:x.weight||1,onChange:P=>{const j=parseFloat(P.target.value)||1;s(C=>({...C,questions:C.questions.map((F,U)=>U===_?{...F,weight:j}:F)}))},className:"w-20 text-sm"})]})]}),o.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:x.options.map((P,j)=>o.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${x.correctAnswer===j?"bg-green-100 text-green-800":"bg-secondary/50"}`,children:[o.jsx("span",{className:"w-6 h-6 rounded-full bg-white flex items-center justify-center text-sm font-medium",children:String.fromCharCode(65+j)}),o.jsx("span",{className:"text-sm",children:P}),x.correctAnswer===j&&o.jsx(Pt,{variant:"outline",className:"ml-auto text-xs bg-green-200",children:"Correct"})]},j))}),x.explanation&&o.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:o.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[o.jsx("span",{className:"font-semibold",children:"Explanation:"})," ",x.explanation]})})]}),o.jsx("div",{className:"flex flex-col items-end gap-2",children:o.jsx(J,{type:"button",variant:"ghost",size:"icon",onClick:()=>y(_),className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})})]})},_))})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(J,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsxs(J,{type:"submit",disabled:u||r.questions.length===0,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),u?"Saving...":t?"Update Quiz":"Create Quiz"]})]})]})]})}function iP({year:t,yearType:e,onClose:n,onSave:r}){const[s,a]=E.useState({name:"",imageUrl:"",hours:3}),[c,u]=E.useState(!1),h=async f=>{f.preventDefault(),u(!0);try{const g={name:s.name,imageUrl:s.imageUrl||"",hours:s.hours||3,createdAt:new Date};r(g)}catch(g){console.error("Error saving subject:",g)}finally{u(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(J,{variant:"ghost",onClick:n,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Add Subject to Year ",t]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e==="basic"?o.jsx(ad,{className:"h-4 w-4 text-blue-600"}):o.jsx(ld,{className:"h-4 w-4 text-red-600"}),o.jsxs("p",{className:"text-muted-foreground",children:["Adding to ",e==="basic"?"Basic":"Clinical"," Years â€¢ Year ",t]})]})]})]})}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsx(pe,{className:`border-l-4 ${e==="basic"?"border-l-blue-500 bg-blue-50/50":"border-l-red-500 bg-red-50/50"}`,children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[e==="basic"?o.jsx(ad,{className:"h-8 w-8 text-blue-600"}):o.jsx(ld,{className:"h-8 w-8 text-red-600"}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold text-lg",children:["Year ",t]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:e==="basic"?"Basic Years":"Clinical Years"})]})]})})}),o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[e==="basic"?o.jsx(ad,{className:"h-5 w-5 text-blue-600"}):o.jsx(ld,{className:"h-5 w-5 text-red-600"}),"Subject Information"]}),o.jsx(St,{children:"Basic information about the subject"})]}),o.jsx(me,{className:"space-y-4",children:o.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"year",children:"Year"}),o.jsx(Ne,{id:"year",value:`Year ${t} (${e==="basic"?"Basic":"Clinical"})`,disabled:!0,className:"bg-muted"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"name",children:"Subject Name *"}),o.jsx(Ne,{id:"name",placeholder:"e.g., Anatomy & Physiology",value:s.name,onChange:f=>a(g=>({...g,name:f.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"hours",children:"Credit Hours"}),o.jsx(Ne,{id:"hours",type:"number",placeholder:"3",value:s.hours,onChange:f=>a(g=>({...g,hours:parseInt(f.target.value)||3})),min:"1",max:"12"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),o.jsx(Ne,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:s.imageUrl,onChange:f=>a(g=>({...g,imageUrl:f.target.value}))})]})]})})]}),s.name&&o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Preview"}),o.jsxs(St,{children:["How the subject will appear in Year ",t]})]}),o.jsx(me,{children:o.jsxs("div",{className:"p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.imageUrl?o.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-8 h-8 object-cover rounded",onError:f=>{f.currentTarget.style.display="none"}}):o.jsx(Ns,{className:"h-5 w-5 text-primary"}),o.jsx("h3",{className:"font-semibold text-lg",children:s.name})]}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Year ",t," â€¢ ",e," years"]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(J,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),o.jsxs(J,{type:"submit",disabled:c,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Subject"]})]})]})]})}function v0({file:t,lectureId:e,onClose:n,onSave:r}){const[s,a]=E.useState({title:(t==null?void 0:t.title)||"",description:(t==null?void 0:t.description)||"",fileUrl:(t==null?void 0:t.fileUrl)||(t==null?void 0:t.url)||"",imageUrl:(t==null?void 0:t.imageUrl)||(t==null?void 0:t.thumbnailUrl)||""}),[c,u]=E.useState(!1),h=async f=>{f.preventDefault(),u(!0);try{const g={...s,id:`file_${Date.now()}`,lectureId:e,uploadedAt:new Date,uploadedBy:"Current User"};r(g)}catch(g){console.error("Error saving file:",g)}finally{u(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(J,{variant:"ghost",onClick:n,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Add File"}),o.jsx("p",{className:"text-muted-foreground",children:"Add a file resource to the lecture"})]})]})}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[o.jsx(Cs,{className:"h-5 w-5 text-blue-600"}),"File Information"]}),o.jsx(St,{children:"Upload or link to educational files"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"title",children:"File Title *"}),o.jsx(Ne,{id:"title",placeholder:"e.g., Anatomy Reference Guide",value:s.title,onChange:f=>a(g=>({...g,title:f.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"description",children:"Description"}),o.jsx(js,{id:"description",placeholder:"Describe the file content...",value:s.description,onChange:f=>a(g=>({...g,description:f.target.value})),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"fileUrl",children:"File URL *"}),o.jsx(Ne,{id:"fileUrl",placeholder:"https://example.com/file.pdf or /uploads/file.pdf",value:s.fileUrl,onChange:f=>a(g=>({...g,fileUrl:f.target.value})),required:!0}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"You can upload to Firebase Storage or use external links"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"imageUrl",children:"Preview Image URL"}),o.jsx(Ne,{id:"imageUrl",placeholder:"https://example.com/preview.jpg",value:s.imageUrl,onChange:f=>a(g=>({...g,imageUrl:f.target.value}))}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: Add a preview/thumbnail image for the file"})]})]})]}),s.title&&o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Preview"}),o.jsx(St,{children:"How the file will appear in the lecture"})]}),o.jsx(me,{children:o.jsx("div",{className:"p-4 border rounded-lg",children:o.jsxs("div",{className:"flex items-center gap-3",children:[s.imageUrl?o.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-16 h-12 object-cover rounded"}):o.jsx("div",{className:"w-16 h-12 bg-blue-100 rounded flex items-center justify-center",children:o.jsx(Cs,{className:"h-8 w-8 text-blue-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium",children:s.title}),s.description&&o.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(J,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),o.jsxs(J,{type:"submit",disabled:c,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add File"]})]})]})]})}function x0({video:t,lectureId:e,onClose:n,onSave:r}){const[s,a]=E.useState({title:(t==null?void 0:t.title)||"",description:(t==null?void 0:t.description)||"",url:(t==null?void 0:t.url)||(t==null?void 0:t.youtubeUrl)||"",duration:(t==null?void 0:t.duration)||"",thumbnailUrl:(t==null?void 0:t.thumbnailUrl)||"",platform:(t==null?void 0:t.platform)||"YouTube"}),[c,u]=E.useState(!1),h=async v=>{v.preventDefault(),u(!0);try{const w={...s,id:`video_${Date.now()}`,lectureId:e,uploadedAt:new Date,uploadedBy:"Current User"};r(w)}catch(w){console.error("Error saving video:",w)}finally{u(!1)}},f=v=>{const w=v.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return w?w[1]:null},g=v=>{const w=f(v);return w?`https://img.youtube.com/vi/${w}/maxresdefault.jpg`:""},y=v=>{a(w=>({...w,url:v,thumbnailUrl:g(v)}))};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(J,{variant:"ghost",onClick:n,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Add Video"}),o.jsx("p",{className:"text-muted-foreground",children:"Add a video resource to the lecture"})]})]})}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[o.jsx(ni,{className:"h-5 w-5 text-green-600"}),"Video Information"]}),o.jsx(St,{children:"Add YouTube videos or other video links"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"title",children:"Video Title *"}),o.jsx(Ne,{id:"title",placeholder:"e.g., Introduction to Human Anatomy",value:s.title,onChange:v=>a(w=>({...w,title:v.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"description",children:"Description"}),o.jsx(js,{id:"description",placeholder:"Describe the video content...",value:s.description,onChange:v=>a(w=>({...w,description:v.target.value})),rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"url",children:"Video URL *"}),o.jsx(Ne,{id:"url",placeholder:"https://youtube.com/watch?v=... or https://vimeo.com/...",value:s.url,onChange:v=>y(v.target.value),required:!0}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Supports YouTube, Vimeo, and direct video links"})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"duration",children:"Duration"}),o.jsx(Ne,{id:"duration",placeholder:"e.g., 45:30",value:s.duration,onChange:v=>a(w=>({...w,duration:v.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"platform",children:"Platform"}),o.jsx(Ne,{id:"platform",value:s.platform,onChange:v=>a(w=>({...w,platform:v.target.value})),disabled:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"thumbnailUrl",children:"Thumbnail URL"}),o.jsx(Ne,{id:"thumbnailUrl",placeholder:"Auto-generated for YouTube videos",value:s.thumbnailUrl,onChange:v=>a(w=>({...w,thumbnailUrl:v.target.value}))})]})]})]}),s.title&&o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Preview"}),o.jsx(St,{children:"How the video will appear in the lecture"})]}),o.jsx(me,{children:o.jsx("div",{className:"p-4 border rounded-lg",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"relative",children:[s.thumbnailUrl?o.jsx("img",{src:s.thumbnailUrl,alt:s.title,className:"w-24 h-16 object-cover rounded"}):o.jsx("div",{className:"w-24 h-16 bg-gray-200 rounded flex items-center justify-center",children:o.jsx(mv,{className:"h-6 w-6 text-gray-400"})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(ni,{className:"h-8 w-8 text-white opacity-80"})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium",children:s.title}),s.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.duration&&o.jsxs(Pt,{variant:"secondary",className:"text-xs",children:[o.jsx(hp,{className:"h-3 w-3 mr-1"}),s.duration]}),o.jsxs(Pt,{variant:"outline",className:"text-xs",children:[o.jsx(J2,{className:"h-3 w-3 mr-1"}),s.platform]})]})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(J,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),o.jsxs(J,{type:"submit",disabled:c,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),c?"Adding...":"Add Video"]})]})]})]})}function Vm({lecture:t,subjectId:e,subjectName:n,yearType:r,onClose:s,onSave:a}){const[c,u]=E.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",order:(t==null?void 0:t.order)||1,imageUrl:(t==null?void 0:t.imageUrl)||""}),[h,f]=E.useState(!1),g=async y=>{y.preventDefault(),f(!0);try{const v={...c,subjectId:e,createdAt:new Date,uploadedBy:"Current User"};a(v)}catch(v){console.error("Error saving lecture:",v)}finally{f(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(J,{variant:"ghost",onClick:s,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Add Lecture"}),o.jsxs("p",{className:"text-muted-foreground",children:["Add a new lecture to ",n]})]})]})}),o.jsxs("form",{onSubmit:g,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[r==="basic"?o.jsx(ad,{className:"h-5 w-5 text-blue-600"}):o.jsx(ld,{className:"h-5 w-5 text-red-600"}),"Lecture Information"]}),o.jsx(St,{children:"Basic information about the lecture"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"name",children:"Lecture Name *"}),o.jsx(Ne,{id:"name",placeholder:"e.g., Introduction to Cell Biology",value:c.name,onChange:y=>u(v=>({...v,name:y.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"description",children:"Description"}),o.jsx(js,{id:"description",placeholder:"Describe what this lecture covers...",value:c.description,onChange:y=>u(v=>({...v,description:y.target.value})),rows:4})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"order",children:"Order"}),o.jsx(Ne,{id:"order",type:"number",min:"1",value:c.order,onChange:y=>u(v=>({...v,order:parseInt(y.target.value)||1}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),o.jsx(Ne,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:c.imageUrl,onChange:y=>u(v=>({...v,imageUrl:y.target.value}))})]})]})]})]}),c.name&&o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Preview"}),o.jsxs(St,{children:["How the lecture will appear in ",n]})]}),o.jsx(me,{children:o.jsx("div",{className:"p-4 border rounded-lg bg-secondary/20",children:o.jsxs("div",{className:"flex items-start gap-3",children:[c.imageUrl?o.jsx("img",{src:c.imageUrl,alt:c.name,className:"w-16 h-16 object-cover rounded",onError:y=>{y.currentTarget.style.display="none"}}):o.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center",children:o.jsx(Ns,{className:"h-6 w-6 text-gray-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:c.name}),c.description&&o.jsx("p",{className:"text-sm text-muted-foreground",children:c.description}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Lecture ",c.order," â€¢ ",n]})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(J,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),o.jsxs(J,{type:"submit",disabled:h,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add Lecture"]})]})]})]})}async function Tr(t){let e="dflp2vxn2",n="Med_just";const r="".replace(/\/$/,"");try{const j=await fetch(`${r}/api/cloudinary/config`);if(j.ok)try{const C=await j.json();e=C.cloudName||e,n=C.uploadPreset||C.upload_preset||n}catch{const C=j.headers.get("x-cloudinary-cloudname"),F=j.headers.get("x-cloudinary-upload-preset");C&&(e=e||C),F&&(n=n||F)}}catch{}if(!e)try{const j=localStorage.getItem("cloudinary.cloudName"),C=localStorage.getItem("cloudinary.uploadPreset");j&&(e=j,n=n||C||n)}catch{}if(!e)throw new Error("Cloudinary cloud name is not configured. Set VITE_CLOUDINARY_CLOUD_NAME in your environment or provide server config.");const s=`https://api.cloudinary.com/v1_1/${e}/upload`;try{const j=await k1(t);if(j&&typeof j=="string"&&j.startsWith("http"))return j}catch(j){const C=String((j==null?void 0:j.message)||j||"");console.warn("Server upload failed, falling back to client upload:",C)}async function a(j){if(j.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.");try{const C=j.clone();try{return{json:await C.json(),text:null}}catch{}}catch{if(j.bodyUsed)throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}try{const C=await j.text();try{return{json:JSON.parse(C),text:C}}catch{return{json:null,text:C}}}catch(C){throw new Error("Could not read response body: "+String(C))}}async function c(j,C){const F=async(z,k)=>{const O=await fetch(z,k),L=await a(O).catch(D=>{throw D});return{res:O,body:L}},U=typeof j=="string"?j:j.url;try{return await F(U,C)}catch(z){const k=String((z==null?void 0:z.message)||z||"").toLowerCase();if(k.includes("response body already read")||k.includes("body already read")){const O=U+(U.includes("?")?`&_retry=${Date.now()}`:`?_retry=${Date.now()}`);try{return await F(O,C)}catch{}}if(k.includes("failed to fetch")||k.includes("networkerror")||k.includes("network request failed")||k.includes("script error")||k.includes("response body already read")||k.includes("body already read"))try{return await(async()=>await new Promise((O,L)=>{const D=new XMLHttpRequest;let I=C&&C.method||"GET",M=!1;try{if(D.open(I,U,!0),C&&C.headers){const R=C.headers;Object.keys(R).forEach(W=>{try{D.setRequestHeader(W,R[W])}catch{}})}if(D.onreadystatechange=()=>{if(D.readyState!==4)return;const R=D.status||0,W={};(D.getAllResponseHeaders()||"").split(`\r
`).forEach(le=>{const B=le.indexOf(":");if(B>0){const Z=le.substring(0,B).trim().toLowerCase(),he=le.substring(B+1).trim();W[Z]=he}});const X={ok:R>=200&&R<400,status:R,headers:{get:le=>W[le.toLowerCase()]||null}},ie=D.responseText;let G=null;try{G=ie?JSON.parse(ie):null}catch{G=null}O({res:X,body:{json:G,text:ie}})},D.onerror=()=>L(new Error("XHR network error")),D.ontimeout=()=>L(new Error("XHR timeout")),C&&C.body)try{if(C.body instanceof FormData)M=!0,D.send(C.body);else if(typeof C.body=="string")D.send(C.body);else try{D.send(JSON.stringify(C.body))}catch{D.send(String(C.body))}}catch(R){L(R)}else D.send()}catch(R){L(R)}}))()}catch{}throw z}}if(n){const j=new FormData;j.append("file",t),j.append("upload_preset",n);const{res:C,body:F}=await c(s,{method:"POST",body:j});if(!C.ok){const U=F!=null&&F.json?JSON.stringify(F.json):(F==null?void 0:F.text)||"";throw new Error(`Cloudinary upload failed: ${C.status} ${U}`)}if(F.json&&(F.json.secure_url||F.json.url))return F.json.secure_url||F.json.url;if(F.text&&typeof F.text=="string"&&F.text.startsWith("http"))return F.text;throw new Error("Cloudinary upload returned unexpected response.")}const u="686641252611351";let h,f;try{const j=await c(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})});h=j.res,f=j.body}catch(j){const C=String((j==null?void 0:j.message)||j||"");if(C.toLowerCase().includes("response body already read")||C.toLowerCase().includes("body already read")){try{const F=await fetch(`${r}/api/cloudinary/sign`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u})}),U=F.headers.get("x-cloudinary-signature"),z=F.headers.get("x-cloudinary-timestamp"),k=F.headers.get("x-cloudinary-apikey"),O=F.headers.get("x-cloudinary-cloudname"),L=F.headers.get("x-cloudinary-upload-preset");if(U&&z){const D=k||u||null,I=U,M=Number(z);O&&(e=e||O);const R=new FormData;R.append("file",t),D&&R.append("api_key",D),R.append("timestamp",String(M)),R.append("signature",I);const{res:W,body:K}=await c(s,{method:"POST",body:R});if(!W.ok){const X=K!=null&&K.json?JSON.stringify(K.json):(K==null?void 0:K.text)||"",ie=(X||"").toLowerCase();if(ie.includes("missing required parameter - api_key")||ie.includes("missing required parameter - api key")||ie.includes("missing required parameter 'api_key'")){const G=u||(()=>{try{return localStorage.getItem("cloudinary.apiKey")}catch{return null}})();if(G){const oe=new FormData;oe.append("file",t),oe.append("api_key",G),oe.append("timestamp",String(M)),oe.append("signature",I);const{res:le,body:B}=await c(s,{method:"POST",body:oe});if(!le.ok){const Z=B!=null&&B.json?JSON.stringify(B.json):(B==null?void 0:B.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${le.status} ${Z}`)}if(B.json&&(B.json.secure_url||B.json.url))return B.json.secure_url||B.json.url;if(B.text&&typeof B.text=="string"&&B.text.startsWith("http"))return B.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}if(n){const oe=new FormData;oe.append("file",t),oe.append("upload_preset",n);const le=await fetch(s,{method:"POST",body:oe});if(!le.ok){const he=await le.text().catch(()=>"");throw new Error(`Cloudinary unsigned fallback failed: ${le.status} ${he}`)}const B=await le.json().catch(()=>null);if(B&&(B.secure_url||B.url))return B.secure_url||B.url;const Z=await le.text().catch(()=>"");if(Z&&Z.startsWith("http"))return Z;throw new Error("Cloudinary unsigned fallback returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${W.status} ${X}`)}if(K.json&&(K.json.secure_url||K.json.url))return K.json.secure_url||K.json.url;if(K.text&&typeof K.text=="string"&&K.text.startsWith("http"))return K.text;throw new Error("Cloudinary signed upload returned unexpected response.")}if(L){const D=new FormData;D.append("file",t),D.append("upload_preset",L);const I=await fetch(s,{method:"POST",body:D});if(!I.ok){const W=await I.text().catch(()=>"");throw new Error(`Cloudinary upload fallback failed: ${I.status} ${W}`)}const M=await I.json().catch(()=>null);if(M&&(M.secure_url||M.url))return M.secure_url||M.url;const R=await I.text().catch(()=>"");if(R&&R.startsWith("http"))return R;throw new Error("Cloudinary fallback upload returned unexpected response.")}}catch{}try{const F=await k1(t);if(F&&typeof F=="string"&&F.startsWith("http"))return F}catch{}throw new Error("Response body already read (possibly by a browser extension). Disable extensions that inspect network requests and try again.")}throw j}if(!h.ok){const j=f!=null&&f.json?JSON.stringify(f.json):(f==null?void 0:f.text)||"";throw new Error(`Cloudinary signing failed: ${h.status} ${j}`)}const g=f.json||{},{signature:y,apiKey:v,timestamp:w}=g,N=v||u;if(!y||!w)throw new Error("Cloudinary signing endpoint returned invalid data.");const x=new FormData;x.append("file",t),x.append("api_key",N),x.append("timestamp",String(w)),x.append("signature",y);const{res:_,body:P}=await c(s,{method:"POST",body:x});if(!_.ok){const j=P!=null&&P.json?JSON.stringify(P.json):(P==null?void 0:P.text)||"",C=(j||"").toLowerCase();if(C.includes("missing required parameter - api_key")||C.includes("missing required parameter - api key")||C.includes("missing required parameter 'api_key'")){const F=u;{const U=new FormData;U.append("file",t),U.append("api_key",F),U.append("timestamp",String(w)),U.append("signature",y);const{res:z,body:k}=await c(s,{method:"POST",body:U});if(!z.ok){const O=k!=null&&k.json?JSON.stringify(k.json):(k==null?void 0:k.text)||"";throw new Error(`Cloudinary signed upload retry failed: ${z.status} ${O}`)}if(k.json&&(k.json.secure_url||k.json.url))return k.json.secure_url||k.json.url;if(k.text&&typeof k.text=="string"&&k.text.startsWith("http"))return k.text;throw new Error("Cloudinary signed upload retry returned unexpected response.")}}throw new Error(`Cloudinary signed upload failed: ${_.status} ${j}`)}if(P.json&&(P.json.secure_url||P.json.url))return P.json.secure_url||P.json.url;if(P.text&&typeof P.text=="string"&&P.text.startsWith("http"))return P.text;throw new Error("Cloudinary signed upload returned unexpected response.")}async function k1(t){const e=await new Promise((n,r)=>{const s=new FileReader;s.onload=()=>n(s.result),s.onerror=()=>r(new Error("Failed to read file")),s.readAsDataURL(t)});return await new Promise((n,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?n(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:e,filename:t.name}))}catch(s){r(s)}}).catch(async n=>{try{const r=String((n==null?void 0:n.message)||"").toLowerCase();if(r.includes("cloudinary not configured")||r.includes("404")||r.includes("server upload failed"))return await new Promise((s,a)=>{try{const c=new XMLHttpRequest;c.open("POST",`${API_BASE}/api/imagekit/upload`,!0),c.setRequestHeader("Content-Type","application/json"),c.onreadystatechange=()=>{if(c.readyState!==4)return;const u=c.status||0,h=c.responseText||"";if(u<200||u>=400){let f=h;try{const g=h?JSON.parse(h):null;g&&g.error&&(f=g.error)}catch{}return a(new Error(`ImageKit server upload failed: ${u} ${f}`))}try{const f=h?JSON.parse(h):{};return f&&(f.url||f.filePath)?s(f.url||f.filePath):a(new Error("ImageKit server upload returned unexpected response"))}catch{return a(new Error("ImageKit server upload returned non-JSON response"))}},c.onerror=()=>a(new Error("ImageKit server upload XHR error")),c.send(JSON.stringify({file:e,filename:t.name}))}catch(c){a(c)}})}catch{}throw n})}function Xa(t,e,n){try{t&&localStorage.setItem("cloudinary.cloudName",t),e&&localStorage.setItem("cloudinary.uploadPreset",e),n&&localStorage.setItem("cloudinary.apiKey",n)}catch(r){console.warn("Could not persist Cloudinary config to localStorage",r)}}async function R1(t,e){if(!t)throw new Error("No URL provided");return await new Promise((n,r)=>{try{const s=new XMLHttpRequest;s.open("POST",`${API_BASE}/api/cloudinary/upload`,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(s.readyState!==4)return;const a=s.status||0,c=s.responseText||"";if(a<200||a>=400){let u=c;try{const h=c?JSON.parse(c):null;h&&h.error&&(u=h.error)}catch{}return r(new Error(`Server upload failed: ${a} ${u}`))}try{const u=c?JSON.parse(c):{};return u&&(u.secure_url||u.url)?n(u.secure_url||u.url):r(new Error("Server upload returned unexpected response"))}catch{return r(new Error("Server upload returned non-JSON response"))}},s.onerror=()=>r(new Error("Server upload XHR error")),s.send(JSON.stringify({file:t,filename:e||"remote"}))}catch(s){r(new Error("Failed to call server upload endpoint: "+String(s)))}})}const G8="".replace(/\/$/,"");async function Q8(t,e){const n=await fetch(t,e);let r=null,s="";try{r=await n.json()}catch{try{s=await n.text()}catch{}}return{res:n,json:r,text:s}}async function Zo(t,e){let n;typeof t=="string"?n=t:n=await new Promise((u,h)=>{const f=new FileReader;f.onload=()=>u(f.result),f.onerror=()=>h(new Error("Failed to read file")),f.readAsDataURL(t)});const r=`${G8}/api/imagekit/upload`,{res:s,json:a,text:c}=await Q8(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:n,filename:e})});if(!s.ok){const u=a?JSON.stringify(a):c||"";throw new Error(`ImageKit server upload failed: ${s.status} ${u}`)}if(a&&(a.url||a.filePath||a.name))return a.url||a.filePath||a.name;throw new Error("ImageKit server upload returned unexpected response.")}function Y8(){var Gt;const[t,e]=E.useState(""),[n,r]=E.useState(null),[s,a]=E.useState(!1),[c,u]=E.useState(!1),[h,f]=E.useState(!1),[g,y]=E.useState(!1),[v,w]=E.useState(!1),[N,x]=E.useState(null),[_,P]=E.useState(null),[j,C]=E.useState(null),[F,U]=E.useState("basic"),[z,k]=E.useState({}),[O,L]=E.useState(null),[D,I]=E.useState(""),[M,R]=E.useState(""),[W,K]=E.useState(""),[X,ie]=E.useState(""),[G,oe]=E.useState(""),[le,B]=E.useState(""),[Z,he]=E.useState(""),[Ce,$e]=E.useState(""),[Ie,we]=E.useState(""),[Se,He]=E.useState(""),[Fe,st]=E.useState(""),[it,ve]=E.useState(null),je=su(),mt=Ji();_e.useEffect(()=>{const ye=new URLSearchParams(mt.search).get("batch");ve(ye)},[mt.search]);const an=(ne,ye)=>{k(Ve=>{var Tt;return{...Ve,[ne]:{videos:!1,files:!1,quizzes:!1,...Ve[ne]||{},[ye]:!((Tt=Ve[ne])!=null&&Tt[ye])}}})},{years:zn,batches:jr,loading:Lt,error:mn,retryConnection:Ir,updateYear:is,updateBatch:dn,createSubject:Ms,createLecture:Fs,updateLecture:zt,createYear:kt,createBatch:Bn,deleteBatch:bn,deleteLecture:Ar,deleteSubject:os,addVideo:zr,addFile:Vs,addQuiz:gi}=El(),{news:as}=i0(),qn=(ne,ye)=>{C(ne),P(ye),r(null),a(!0)},Us=(ne,ye)=>{console.log("ðŸ”„ Opening subject form for year:",ne.yearNumber,"type:",ye),x({id:ne.id,number:ne.yearNumber}),U(ye),u(!0)},Ze=(ne,ye)=>{C(ne),U(ye),w(!0)},Et=(ne,ye)=>{C(ne),P(ye),f(!0)},gt=(ne,ye)=>{C(ne),P(ye),y(!0)};if(s)return o.jsx(y0,{quiz:n,onClose:()=>{a(!1),r(null),P(null)},onSave:async ne=>{j!=null&&j.id&&_&&await gi(j.id,_,{title:ne.title,description:ne.description,questions:ne.questions||[],timeLimit:ne.timeLimit,passingScore:ne.passingScore}),a(!1),r(null),P(null)}});if(console.log("ðŸ” Render check - isSubjectFormOpen:",c,"selectedYear:",N),c)return console.log("ðŸ“ Rendering SubjectForm"),o.jsx(iP,{year:N==null?void 0:N.number,yearType:F,onClose:()=>{u(!1),x(null)},onSave:async ne=>{try{await Ms({...ne,yearId:(N==null?void 0:N.id)||"",order:1}),u(!1),x(null)}catch(ye){console.error("Error saving subject:",ye),alert("Failed to save subject. Please try again.")}}});if(v){const ne=_?(Gt=j==null?void 0:j.lectures)==null?void 0:Gt.find(ye=>ye.id===_):null;return o.jsx(Vm,{lecture:ne,subjectId:j==null?void 0:j.id,subjectName:j==null?void 0:j.name,yearType:F,onClose:()=>{w(!1),C(null),P(null)},onSave:async ye=>{try{ne?await zt(ne.id,ye):await Fs(ye),w(!1),C(null),P(null)}catch(Ve){console.error("Error saving lecture:",Ve),alert("Failed to save lecture. Please try again.")}}})}if(h)return o.jsx(v0,{lectureId:_,onClose:()=>{f(!1),P(null)},onSave:async ne=>{j!=null&&j.id&&_&&await Vs(j.id,_,ne),f(!1),P(null)}});if(g)return o.jsx(x0,{lectureId:_,onClose:()=>{y(!1),P(null)},onSave:async ne=>{j!=null&&j.id&&_&&await zr(j.id,_,ne),y(!1),P(null)}});const Bt=(ne,ye)=>{var Ve,Tt;return o.jsxs(pe,{className:`border-l-4 ${ye==="basic"?"border-l-blue-500":"border-l-red-500"}`,children:[o.jsx(Be,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[ne.imageUrl?o.jsx("img",{src:ne.imageUrl,alt:`Year ${ne.yearNumber}`,className:"w-24 h-24 object-cover rounded-md flex-shrink-0",onError:lt=>{lt.currentTarget.style.display="none"}}):o.jsx("div",{className:"w-24 h-24 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:ye==="basic"?o.jsx(ad,{className:"h-6 w-6 text-blue-600"}):o.jsx(ld,{className:"h-6 w-6 text-red-600"})}),o.jsx(Ke,{className:"flex flex-col",children:O===ne.id?o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(Ne,{value:D,onChange:lt=>I(lt.target.value),className:"w-48",placeholder:"Batch name"}),o.jsx(J,{size:"sm",onClick:async()=>{try{await(is==null?void 0:is(ne.id,{batchName:D,batch_name:D})),L(null),I("")}catch(lt){console.error(lt),alert("Failed to save batch name")}},children:"Save"}),o.jsx(J,{variant:"ghost",size:"sm",onClick:()=>{L(null),I("")},children:"Cancel"})]}):o.jsx(o.Fragment,{children:ne.batchName?o.jsxs(o.Fragment,{children:[o.jsx(Zn,{to:`/admin/years/${ne.id}`,className:"text-lg font-bold text-foreground hover:underline",children:ne.batchName}),o.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[o.jsxs("span",{className:"text-sm text-muted",children:["Year ",ne.yearNumber]}),ne.name&&o.jsxs("span",{className:"ml-2",children:["â€¢ ",ne.name]}),ne.academicSupervisor&&o.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ne.academicSupervisor]}),ne.cr&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ne.cr]}),ne.actor&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ne.actor]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs(Zn,{to:`/admin/years/${ne.id}`,className:"text-lg font-medium text-blue-600 hover:underline",children:["Year ",ne.yearNumber]}),o.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[ne.name?o.jsx("span",{className:"mr-2",children:ne.name}):o.jsx("span",{className:"italic",children:"No batch name"}),ne.academicSupervisor&&o.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Academic Supervisor: ",ne.academicSupervisor]}),ne.cr&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["CR: ",ne.cr]}),ne.actor&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Actor: ",ne.actor]})]})]})})})]}),o.jsx("div",{className:"flex items-center gap-2"})]})}),o.jsx(me,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ns,{className:"h-4 w-4 text-blue-600"}),o.jsx("span",{className:"font-semibold",children:"Subjects"}),o.jsxs(Pt,{variant:"secondary",children:[((Ve=ne.subjects)==null?void 0:Ve.length)||0," subjects"]}),o.jsxs(Pt,{variant:"outline",children:[(as||[]).filter(lt=>lt.yearId===ne.id).length," ","news"]})]}),o.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>Us(ne,ye),className:"flex items-center gap-1",children:[o.jsx(Jt,{className:"h-3 w-3"}),"Add Subject"]})]}),!ne.subjects||ne.subjects.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Ns,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No subjects added yet"}),o.jsx(J,{variant:"outline",size:"sm",onClick:()=>Us(ne,ye),children:"Add first subject"})]}):o.jsx("div",{className:"grid gap-4",children:(Tt=ne.subjects)==null?void 0:Tt.map(lt=>{var yt;return o.jsxs(pe,{className:"bg-secondary/10",children:[o.jsx(Be,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[lt.imageUrl?o.jsx("img",{src:lt.imageUrl,alt:lt.name,className:"w-8 h-8 object-cover rounded",onError:Re=>{Re.currentTarget.style.display="none"}}):o.jsx(Ns,{className:"h-5 w-5 text-blue-600"}),o.jsx(Zn,{to:`/admin/subjects/${lt.id}`,className:"font-medium text-lg text-blue-600 hover:underline",children:lt.name}),o.jsxs(Pt,{variant:"outline",className:"text-xs",children:[((yt=lt.lectures)==null?void 0:yt.length)||0," lectures"]})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>Ze(lt,ye),className:"h-8 px-3 text-xs",children:[o.jsx(Jt,{className:"h-3 w-3 mr-1"}),"Add Lecture"]}),o.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:async()=>{if(confirm(`Delete subject "${lt.name}"? This will remove its lectures.`))try{await os(lt.id)}catch(Re){console.error(Re),alert("Failed to delete subject")}},children:o.jsx(En,{className:"h-3 w-3"})})]})]})}),lt.lectures&&lt.lectures.length>0&&o.jsx(me,{className:"pt-0",children:o.jsxs("div",{className:"grid gap-3",children:[lt.lectures.slice(0,3).map(Re=>{var Qt,yi,ur,$s,zs,vi,dr,to,bl;return o.jsx(pe,{className:"bg-background border",children:o.jsx(me,{className:"p-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:Re.imageUrl?o.jsx("img",{src:Re.imageUrl,alt:Re.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(ni,{className:"h-6 w-6 text-muted-foreground"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:Re.name}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:Re.description||"No description available"}),o.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[o.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>an(Re.id,"videos"),className:`h-6 px-2 text-xs ${(Qt=z[Re.id])!=null&&Qt.videos?"bg-accent":""}`,children:[o.jsx(mv,{className:"h-3 w-3 mr-1"}),"Videos (",((yi=Re.videos)==null?void 0:yi.length)||0,")"]}),o.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>an(Re.id,"files"),className:`h-6 px-2 text-xs ${(ur=z[Re.id])!=null&&ur.files?"bg-accent":""}`,children:[o.jsx(Cs,{className:"h-3 w-3 mr-1"}),"Files (",(($s=Re.files)==null?void 0:$s.length)||0,")"]}),o.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>an(Re.id,"quizzes"),className:`h-6 px-2 text-xs ${(zs=z[Re.id])!=null&&zs.quizzes?"bg-accent":""}`,children:[o.jsx($i,{className:"h-3 w-3 mr-1"}),"Quizzes (",((vi=Re.quizzes)==null?void 0:vi.length)||0,")"]}),o.jsx(J,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{P(Re.id),C(lt),w(!0)},title:"Edit Lecture",children:o.jsx(ts,{className:"h-3 w-3"})}),o.jsx(J,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${Re.name}"?`))try{await Ar(lt.id,Re.id)}catch(qt){console.error(qt),alert("Failed to delete lecture")}},children:o.jsx(En,{className:"h-3 w-3"})})]}),((dr=z[Re.id])==null?void 0:dr.videos)&&o.jsxs("div",{className:"mb-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Videos:"}),o.jsxs(J,{variant:"ghost",size:"xs",onClick:()=>gt(lt,Re.id),className:"h-6 px-2 text-xs",children:[o.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),o.jsxs("div",{className:"space-y-1",children:[Re.videos&&Re.videos.length>0?Re.videos.slice(0,4).map(qt=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(mv,{className:"h-3 w-3 text-blue-600"}),o.jsx("a",{href:qt.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline truncate",children:qt.title||qt.name||"Untitled Video"})]},qt.id)):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"}),Re.videos&&Re.videos.length>4&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Re.videos.length-4," more videos"]})]})]}),((to=z[Re.id])==null?void 0:to.files)&&o.jsxs("div",{className:"mb-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Files:"}),o.jsxs(J,{variant:"ghost",size:"xs",onClick:()=>Et(lt,Re.id),className:"h-6 px-2 text-xs",children:[o.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),o.jsxs("div",{className:"space-y-1",children:[Re.files&&Re.files.length>0?Re.files.slice(0,4).map(qt=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Cs,{className:"h-3 w-3 text-green-600"}),o.jsx("a",{href:qt.fileUrl||qt.url||"#",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 hover:underline truncate",onClick:Nl=>{!qt.fileUrl&&!qt.url&&(Nl.preventDefault(),alert("No file URL available"))},children:qt.title||qt.name||"Untitled File"})]},qt.id)):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"}),Re.files&&Re.files.length>4&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Re.files.length-4," more files"]})]})]}),((bl=z[Re.id])==null?void 0:bl.quizzes)&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Quizzes:"}),o.jsxs(J,{variant:"ghost",size:"xs",onClick:()=>qn(lt,Re.id),className:"h-6 px-2 text-xs",children:[o.jsx(Jt,{className:"h-3 w-3 mr-1"})," Add"]})]}),o.jsxs("div",{className:"space-y-1",children:[Re.quizzes&&Re.quizzes.length>0?Re.quizzes.slice(0,4).map(qt=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($i,{className:"h-3 w-3 text-purple-600"}),o.jsx("span",{className:"text-xs text-purple-600",children:qt.title||qt.name||"Untitled Quiz"})]},qt.id)):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"}),Re.quizzes&&Re.quizzes.length>4&&o.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",Re.quizzes.length-4," more quizzes"]})]})]})]})]})})},Re.id)}),lt.lectures.length>3&&o.jsxs("div",{className:"text-center text-muted-foreground text-xs pt-2",children:["+",lt.lectures.length-3," more lectures"]})]})})]},lt.id)})})]})})]},ne.yearNumber)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Academic Years Management"}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("p",{className:"text-muted-foreground",children:"Manage curriculum by academic years, subjects, and lectures"})})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(GA,{children:[o.jsx(M8,{asChild:!0,children:o.jsxs(J,{children:[o.jsx(Y2,{className:"h-4 w-4 mr-2"})," Add Batch"]})}),o.jsxs(h0,{children:[o.jsxs(f0,{children:[o.jsx(p0,{children:"Add Batch"}),o.jsx(m0,{children:"Create a new batch for grouping years"})]}),o.jsxs("div",{className:"space-y-3 mt-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Batch name"}),o.jsx(Ne,{value:Z,onChange:ne=>he(ne.target.value),placeholder:"e.g., Batch A"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"CR (optional)"}),o.jsx(Ne,{value:Ce,onChange:ne=>$e(ne.target.value),placeholder:"Class representative"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Group Link (optional)"}),o.jsx(Ne,{value:Ie,onChange:ne=>we(ne.target.value),placeholder:"WhatsApp/Telegram group link"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Graduate Date (optional)"}),o.jsx(Ne,{value:Se,onChange:ne=>He(ne.target.value),placeholder:"e.g., 2025-06-15",type:"date"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Academic Supervisor (optional)"}),o.jsx(Ne,{value:Fe,onChange:ne=>st(ne.target.value),placeholder:"e.g., Dr. Ahmed Hassan"})]})]}),o.jsxs(YA,{className:"mt-4",children:[o.jsx(J,{onClick:async()=>{try{if(!Z||!Z.trim()){alert("Please provide a batch name");return}await(Bn==null?void 0:Bn({batchName:Z.trim(),cr:Ce==null?void 0:Ce.trim(),groupLink:Ie==null?void 0:Ie.trim(),group_link:Ie==null?void 0:Ie.trim(),graduateDate:Se==null?void 0:Se.trim(),graduate_date:Se==null?void 0:Se.trim(),academicSupervisor:Fe==null?void 0:Fe.trim(),academic_supervisor:Fe==null?void 0:Fe.trim()})),he(""),$e(""),we(""),He(""),st("");const ne=document.querySelector("[data-dialog-close]");ne&&ne.click(),alert("Batch created")}catch(ne){console.error(ne),alert("Failed to create batch")}},children:"Create"}),o.jsx(V8,{asChild:!0,children:o.jsx(J,{variant:"ghost",className:"ml-2","data-dialog-close":!0,children:"Cancel"})})]})]})]})})]}),Lt&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Qi,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading academic years..."})]})}),mn&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading years"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:mn}),o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx(J,{onClick:Ir,variant:"outline",children:"Retry Connection"}),o.jsx(J,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!Lt&&!mn&&o.jsxs(o.Fragment,{children:[o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search lectures, subjects, or content...",value:t,onChange:ne=>e(ne.target.value),className:"pl-10"})]})})}),o.jsx("div",{className:"space-y-6",children:!jr||jr.length===0?o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Ns,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No batches found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a batch to start adding academic years."})]})}):it?(()=>{const ne=(jr||[]).find(Ve=>Ve.id===it)||null,ye=(zn||[]).filter(Ve=>(Ve.batchId||Ve.batch_name)===it);return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[ne!=null&&ne.imageUrl?o.jsx("img",{src:ne.imageUrl,alt:ne.batchName,className:"w-40 h-40 object-cover rounded-md flex-shrink-0"}):o.jsx("div",{className:"w-40 h-40 rounded-md flex-shrink-0 bg-muted flex items-center justify-center",children:o.jsx(Ns,{className:"h-6 w-6 text-muted-foreground"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold",children:(ne==null?void 0:ne.batchName)||"Batch"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:ne!=null&&ne.cr?`CR: ${ne.cr}`:""})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(J,{onClick:()=>{ve(null),je("/admin/years")},children:"Back to Batches"}),o.jsx(J,{size:"sm",variant:"ghost",onClick:async()=>{try{const Ve=document.createElement("input");Ve.type="file",Ve.accept="image/*",Ve.onchange=async()=>{var lt;const Tt=(lt=Ve.files)==null?void 0:lt[0];if(Tt)try{let yt=null;try{yt=await Tr(Tt)}catch(Re){console.warn("Cloudinary upload failed, trying ImageKit",(Re==null?void 0:Re.message)||Re),yt=await Zo(Tt,Tt.name)}if(!yt){alert("Upload failed");return}await(dn==null?void 0:dn(ne==null?void 0:ne.id,{image_url:yt,imageUrl:yt})),alert("Image updated")}catch(yt){console.error(yt),alert("Failed to upload image")}},Ve.click()}catch(Ve){console.error(Ve),alert("Could not open file dialog")}},children:"Change Image"}),o.jsxs(J,{onClick:async()=>{try{const Ve=window.prompt("Enter year number for this batch:");if(!Ve)return;const Tt=parseInt(Ve,10);if(isNaN(Tt)){alert("Invalid");return}await(kt==null?void 0:kt((ne==null?void 0:ne.id)||null,{yearNumber:Tt})),alert("Year created")}catch(Ve){console.error(Ve),alert("Failed")}},children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"})," Add Year"]}),o.jsxs(J,{variant:"destructive",onClick:async()=>{try{if(!confirm("Delete this batch and all its years?"))return;await(bn==null?void 0:bn(ne==null?void 0:ne.id)),ve(null),je("/admin/years"),alert("Batch deleted")}catch(Ve){console.error(Ve),alert("Failed to delete batch")}},children:[o.jsx(En,{className:"h-4 w-4"})," Delete"]})]})]}),o.jsx("div",{className:"mt-4 space-y-4",children:ye.length===0?o.jsx(pe,{children:o.jsx(me,{className:"p-6 text-center",children:"No years in this batch yet."})}):ye.sort((Ve,Tt)=>Ve.yearNumber-Tt.yearNumber).map(Ve=>o.jsx("div",{children:Bt(Ve,Ve.type)},Ve.id))})]})})():o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:(jr||[]).map(ne=>o.jsxs(pe,{className:"cursor-pointer flex flex-col overflow-hidden",onClick:()=>{je(`/admin/years?batch=${ne.id}`),ve(ne.id)},children:[o.jsx(Be,{className:"flex-1",onClick:ye=>O===ne.id&&ye.stopPropagation(),children:o.jsxs("div",{className:"flex items-start gap-4",children:[ne.imageUrl?o.jsx("img",{src:ne.imageUrl,alt:ne.batchName,className:"w-56 h-56 object-cover rounded-md flex-shrink-0"}):o.jsx("div",{className:"w-56 h-56 rounded-md flex-shrink-0 bg-muted"}),o.jsx("div",{className:"flex-1 min-w-0",children:O===ne.id?o.jsxs("div",{className:"flex flex-col gap-2 w-full",onClick:ye=>ye.stopPropagation(),children:[o.jsx(Ne,{value:D,onChange:ye=>I(ye.target.value),placeholder:"Batch name",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Ne,{value:M||"",onChange:ye=>R(ye.target.value),placeholder:"CR",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Ne,{value:W,onChange:ye=>K(ye.target.value),placeholder:"Image URL (or upload)",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Ne,{value:X||"",onChange:ye=>ie(ye.target.value),placeholder:"Group Link",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Ne,{value:G||"",onChange:ye=>oe(ye.target.value),placeholder:"Graduate Date (e.g., 2025-06-15)",type:"date",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsx(Ne,{value:le||"",onChange:ye=>B(ye.target.value),placeholder:"Academic Supervisor",className:"w-full",onClick:ye=>ye.stopPropagation()}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(J,{size:"sm",onClick:ye=>{ye.stopPropagation();try{const Ve=document.createElement("input");Ve.type="file",Ve.accept="image/*",Ve.onchange=async()=>{var lt;const Tt=(lt=Ve.files)==null?void 0:lt[0];if(Tt)try{let yt=null;try{yt=await Tr(Tt)}catch(Re){console.warn("Cloudinary upload failed, trying ImageKit",(Re==null?void 0:Re.message)||Re),yt=await Zo(Tt,Tt.name)}if(!yt){alert("Upload failed");return}K(yt)}catch(yt){console.error(yt),alert("Upload failed")}},Ve.click()}catch(Ve){console.error(Ve),alert("Could not open file dialog")}},children:"Upload"}),o.jsx(J,{size:"sm",onClick:async ye=>{ye.stopPropagation();try{await(dn==null?void 0:dn(ne.id,{batch_name:D,batchName:D,cr:M,image_url:W,imageUrl:W,group_link:X,groupLink:X,graduate_date:G,graduateDate:G,academic_supervisor:le,academicSupervisor:le})),L(null),I(""),R(""),K(""),ie(""),oe(""),B(""),alert("Saved")}catch(Ve){console.error(Ve),alert("Failed to save")}},children:"Save"}),o.jsx(J,{size:"sm",variant:"ghost",onClick:ye=>{ye.stopPropagation(),L(null),I(""),R(""),K(""),ie(""),oe(""),B("")},children:"Cancel"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ke,{className:"text-lg",children:ne.batchName||"Batch"}),o.jsxs(St,{className:"text-sm text-muted-foreground space-y-1",children:[ne.cr&&o.jsxs("div",{children:["CR: ",ne.cr]}),(ne.academicSupervisor||ne.academic_supervisor)&&o.jsxs("div",{children:["Supervisor: ",ne.academicSupervisor||ne.academic_supervisor]}),ne.graduateDate&&o.jsxs("div",{children:["Graduate: ",ne.graduateDate]}),ne.groupLink&&o.jsx("a",{href:ne.groupLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",onClick:ye=>ye.stopPropagation(),children:"ðŸ“± Group Link"})]})]})})]})}),o.jsx(me,{className:"mt-auto",onClick:ye=>O===ne.id&&ye.stopPropagation(),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Years:"," ",(zn||[]).filter(ye=>(ye.batchId||ye.batch_name)===ne.id).length]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(J,{size:"sm",variant:"outline",onClick:ye=>{ye.stopPropagation(),je(`/admin/years?batch=${ne.id}`),ve(ne.id)},children:"View Years"}),o.jsx(J,{size:"sm",variant:"ghost",onClick:ye=>{ye.stopPropagation(),L(ne.id),I(ne.batchName||""),R(ne.cr||""),K(ne.imageUrl||""),ie(ne.groupLink||ne.group_link||""),oe(ne.graduateDate||ne.graduate_date||""),B(ne.academicSupervisor||ne.academic_supervisor||"")},children:"Edit"}),o.jsx(J,{size:"sm",variant:"ghost",onClick:async ye=>{ye.stopPropagation();try{const Ve=document.createElement("input");Ve.type="file",Ve.accept="image/*",Ve.onchange=async()=>{var lt;const Tt=(lt=Ve.files)==null?void 0:lt[0];if(Tt)try{let yt=null;try{yt=await Tr(Tt)}catch(Re){console.warn("Cloudinary upload failed, trying ImageKit",(Re==null?void 0:Re.message)||Re),yt=await Zo(Tt,Tt.name)}if(!yt){alert("Upload failed");return}await(dn==null?void 0:dn(ne.id,{image_url:yt,imageUrl:yt})),alert("Image updated")}catch(yt){console.error(yt),alert("Failed to upload image")}},Ve.click()}catch(Ve){console.error(Ve),alert("Could not open file dialog")}},children:"Change Image"}),o.jsx(J,{size:"sm",variant:"destructive",onClick:async ye=>{ye.stopPropagation();try{if(!confirm("Delete this batch and all its years? This cannot be undone."))return;await(bn==null?void 0:bn(ne.id)),alert("Batch deleted")}catch(Ve){console.error(Ve),alert("Failed to delete batch")}},children:"Delete"})]})]})})]},ne.id))})})]})]})}function X8(){var U;const{id:t}=GT(),[e,n]=E.useState(!1),[r,s]=E.useState(!1),[a,c]=E.useState(null),[u,h]=E.useState(null),[f,g]=E.useState(""),{years:y,loading:v,updateYear:w,createSubject:N,createLecture:x,deleteSubject:_,deleteLecture:P}=El(),j=y.find(z=>z.id===t);if(v)return o.jsx(pe,{children:o.jsx(me,{className:"text-center py-12",children:"Loading..."})});if(!j)return o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:"Year not found"}),o.jsx("div",{className:"flex gap-2 justify-center",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(J,{variant:"outline",children:"Back to Years"})})})]})});const C=async z=>{try{await N({...z,yearId:j.id}),n(!1)}catch(k){console.error(k),alert("Failed to add subject")}},F=async z=>{try{await x(z),s(!1),c(null)}catch(k){console.error(k),alert("Failed to add lecture")}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Zn,{to:"/admin/years",children:o.jsxs(J,{variant:"ghost",children:[o.jsx(Os,{className:"h-4 w-4 mr-2"})," Back"]})}),o.jsxs("div",{children:[j.batchName?o.jsxs(o.Fragment,{children:[o.jsx("h1",{className:"text-2xl font-bold",children:j.batchName}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Year ",j.yearNumber]})]}):o.jsxs("h1",{className:"text-2xl font-bold",children:["Year ",j.yearNumber]}),o.jsx("p",{className:"text-muted-foreground",children:"Manage subjects and lectures for this year"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:!window.__yearEditing&&o.jsxs(o.Fragment,{children:[o.jsxs(J,{variant:"ghost",onClick:async()=>{try{const z=document.createElement("input");z.type="file",z.accept="image/*",z.onchange=async()=>{var O;const k=(O=z.files)==null?void 0:O[0];if(k)try{let L=null;try{L=await Tr(k)}catch(D){console.warn("Cloudinary upload failed, attempting ImageKit fallback:",(D==null?void 0:D.message)||D);try{L=await Zo(k,k.name)}catch(I){throw console.error("ImageKit upload also failed:",I),D}}if(!L||typeof L!="string"||!L.startsWith("http")){console.error("Invalid upload response:",L),alert("Image upload failed: unexpected response from upload provider"),window.__yearEditing=!1;return}await(w==null?void 0:w(j.id,{imageUrl:L,image_url:L})),window.__yearEditing=!1}catch(L){console.error(L);const I=((L==null?void 0:L.message)||String(L)||"").toLowerCase();if(I.includes("cloudinary cloud name is not configured")){const M=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!M){alert("No cloud name provided. Upload cancelled."),window.__yearEditing=!1;return}const R=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),W=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{Xa(M,R||null,W||null);const K=await Tr(k);if(console.log("Cloudinary upload result after config:",K),!K||typeof K!="string"||!K.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(w==null?void 0:w(j.id,{imageUrl:K,image_url:K}))}catch(K){console.error(K),alert("Image upload failed after configuring Cloudinary: "+(K.message||K))}window.__yearEditing=!1;return}else if(I.includes("cloudinary signing did not return an api key")||I.includes("missing required parameter - api_key")||I.includes("missing required parameter 'api_key'")){const M=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(M&&M.trim())try{Xa(null,null,M.trim());const R=await Tr(k);if(!R||typeof R!="string"||!R.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary"),window.__yearEditing=!1;return}await(w==null?void 0:w(j.id,{imageUrl:R,image_url:R})),window.__yearEditing=!1;return}catch(R){console.error(R),alert("Image upload failed after setting API key: "+(R.message||R)),window.__yearEditing=!1;return}}alert("Image upload failed: "+(L.message||L))}},z.click()}catch(z){console.error(z),alert("Could not open file dialog")}},children:[o.jsx(oO,{className:"h-4 w-4 mr-2"})," ",j.imageUrl?"Change Image":"Add Image"]}),o.jsx(J,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("academicSupervisor"),g(j.academicSupervisor||j.acadmic_supervisor||"")},children:"Academic Supervisor"}),o.jsx(J,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("actor"),g(j.actor||"")},children:"Actor"}),o.jsx(J,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("groupUrl"),g(j.groupUrl||j.group_url||"")},children:"Group URL"}),o.jsx(J,{variant:"ghost",onClick:()=>{window.__yearEditing=!0,h("batchName"),g(j.batchName||j.batch_name||"")},children:"Batch Name"}),j.imageUrl&&o.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm("Remove year image?"))try{await(w==null?void 0:w(j.id,{imageUrl:""}))}catch(z){console.error(z),alert("Failed to remove year image")}},children:o.jsx(En,{className:"h-3 w-3"})})]})})]}),u&&o.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[o.jsx(Ne,{placeholder:u==="image"?"Image URL":u==="groupUrl"?"Group URL":u==="academicSupervisor"?"Academic Supervisor":"Actor",value:f,onChange:z=>g(z.target.value),className:"w-full max-w-2xl"}),o.jsx(J,{onClick:async()=>{try{const z={};u==="image"?z.imageUrl=f:u==="academicSupervisor"?(z.academicSupervisor=f,z.acadmic_supervisor=f):u==="actor"?z.actor=f:u==="groupUrl"?(z.groupUrl=f,z.group_url=f):u==="batchName"&&(z.batchName=f,z.batch_name=f),await(w==null?void 0:w(j.id,z)),h(null),g(""),window.__yearEditing=!1}catch(z){console.error(z),alert("Failed to save field")}},children:"Save"}),o.jsx(J,{variant:"ghost",onClick:()=>{h(null),g(""),window.__yearEditing=!1},children:"Cancel"})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{className:"flex items-center gap-2",children:["Subjects",o.jsxs(Pt,{variant:"secondary",children:[((U=j.subjects)==null?void 0:U.length)||0," subjects"]})]})}),o.jsxs(me,{children:[o.jsx("div",{className:"flex justify-end mb-4",children:o.jsxs(J,{onClick:()=>n(!0),className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-3 w-3"})," Add Subject"]})}),!j.subjects||j.subjects.length===0?o.jsx("div",{className:"text-center py-8",children:"No subjects added yet."}):o.jsx("div",{className:"grid gap-4",children:j.subjects.map(z=>o.jsxs(pe,{className:"bg-secondary/10",children:[o.jsx(Be,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[z.imageUrl?o.jsx("img",{src:z.imageUrl,alt:z.name,className:"w-8 h-8 object-cover rounded"}):o.jsx("div",{className:"w-8 h-8 bg-muted rounded"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-lg",children:z.name}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:[(z.lectures||[]).length," lectures"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(J,{onClick:()=>{c(z),s(!0)},variant:"ghost",size:"sm",children:"Add Lecture"}),o.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete subject "${z.name}"?`))try{await _(z.id)}catch(k){console.error(k),alert("Failed to delete subject")}},children:o.jsx(En,{className:"h-3 w-3"})})]})]})}),z.lectures&&z.lectures.length>0&&o.jsx(me,{children:o.jsx("div",{className:"grid gap-3",children:z.lectures.map(k=>o.jsx(pe,{className:"bg-background border",children:o.jsx(me,{className:"p-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"relative w-20 h-14 rounded-md overflow-hidden bg-muted flex-shrink-0",children:k.imageUrl?o.jsx("img",{src:k.imageUrl,alt:k.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"No image"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm mb-1 truncate",children:k.name}),o.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:k.description||"No description available"})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:async()=>{if(confirm(`Delete lecture "${k.name}"?`))try{await P(z.id,k.id)}catch(O){console.error(O),alert("Failed to delete lecture")}},children:o.jsx(En,{className:"h-3 w-3"})})})]})})},k.id))})})]},z.id))})]})]}),e&&o.jsx(iP,{year:j.yearNumber,yearType:j.type,onClose:()=>n(!1),onSave:C}),r&&a&&o.jsx(Vm,{subjectId:a.id,subjectName:a.name,yearType:j.type,onClose:()=>{s(!1),c(null)},onSave:F})]})}function J8({queryKey:t,queryFn:e,pageSize:n=10,enabled:r=!0,staleTime:s=5*60*1e3,gcTime:a=30*60*1e3}){var k,O;const c=Xx(),{data:u,fetchNextPage:h,hasNextPage:f,isFetchingNextPage:g,isLoading:y,error:v,refetch:w}=$M({queryKey:[...t,n],queryFn:({pageParam:L=0})=>e(L,n),getNextPageParam:(L,D)=>{if(L.hasMore)return D.length},initialPageParam:0,enabled:r,staleTime:s,gcTime:a,refetchOnWindowFocus:!1,refetchOnMount:!1}),N=(u==null?void 0:u.pages.flatMap(L=>L.data))??[],x=u!=null&&u.pages.length?u.pages.length-1:0,_=((k=u==null?void 0:u.pages[x])==null?void 0:k.data)??[],P=((O=u==null?void 0:u.pages[0])==null?void 0:O.total)??0,j=L=>{var D;return((D=u==null?void 0:u.pages[L])==null?void 0:D.data)??[]},C=L=>((u==null?void 0:u.pages.length)??0)>L,F=()=>{f&&!g&&h()},U=L=>{c.setQueryData([...t,n],D=>{if(!D)return D;const I=[...D.pages];return I[L]&&I.splice(L,1),{...D,pages:I}})},z=()=>{c.invalidateQueries({queryKey:t})};return{data:_,allData:N,currentPage:x,totalPages:Math.ceil(P/n),totalCount:P,hasNextPage:f??!1,isLoading:y,isFetchingNextPage:g,error:v,loadNextPage:h,prefetchNextPage:F,getPage:j,isPageCached:C,invalidatePage:U,clearCache:z,refetch:w}}const Z8=10;async function e7(t,e,n){var r;try{const s=pn(rs(Ae,"lectures"),_l("order","asc")),a=await _t(s),c=[];for(const y of a.docs.slice(0,100)){const v=y.data(),w=y.id,N=y.ref,[x,_,P]=await Promise.all([_t(Qe(N,"files")),_t(Qe(N,"quizzes")),_t(Qe(N,"videos"))]),j=x.docs.map(U=>{var k;const z=U.data();return{id:U.id,title:z.title||"",fileUrl:z.url||z.fileUrl||"",description:z.description||"",uploadedAt:((k=z.uploadedAt)==null?void 0:k.toDate())||new Date,uploadedBy:z.uploadedBy||"",imageUrl:z.imageUrl||z.thumbnailUrl||"",thumbnailUrl:z.thumbnailUrl||z.imageUrl||""}}),C=_.docs.map(U=>{var k;const z=U.data();return{id:U.id,title:z.title||"",description:z.description||"",questions:z.questions||[],timeLimit:z.duration||30,passingScore:z.passRate||70,createdAt:((k=z.createdAt)==null?void 0:k.toDate())||new Date,createdBy:z.uploadedBy||""}}),F=P.docs.map(U=>{var k,O;const z=U.data();return{id:U.id,title:z.title||z.name||"",youtubeUrl:z.url||z.youtubeUrl||"",thumbnailUrl:z.thumbnailUrl||z.thumbnail||"",duration:z.duration||z.time||"",description:z.description||"",uploadedAt:((O=(k=z.uploadedAt)==null?void 0:k.toDate)==null?void 0:O.call(k))||new Date,uploadedBy:z.uploadedBy||z.uploader||"",imageUrl:z.thumbnailUrl||""}});c.push({id:w,title:v.title||"",description:v.description||"",subject:v.subjectId||"Unknown",order:v.order||1,createdAt:((r=v.createdAt)==null?void 0:r.toDate())||new Date,createdBy:v.uploadedBy||"",videos:F,files:j,quizzes:C})}c.sort((y,v)=>(y.order||0)-(v.order||0));const u=t*e,h=u+e,f=c.slice(u,h),g=h<c.length;return{data:f,total:c.length,hasMore:g}}catch(s){throw console.error("Error fetching lectures page:",s),s}}function t7(t=Z8){return J8({queryKey:["lectures-paginated"],queryFn:e7,pageSize:t,staleTime:5*60*1e3,gcTime:30*60*1e3})}function Um(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const f=pn(rs(Ae,"lectures")),g=eo(f,async y=>{var w;const v=[];for(const N of y.docs){const x=N.data(),_=N.id,P=N.ref,j=await _t(Qe(P,"files")),C=[];j.forEach(O=>{var D;const L=O.data();C.push({id:O.id,title:L.title||"",fileUrl:L.url||L.fileUrl||"",description:L.description||"",uploadedAt:((D=L.uploadedAt)==null?void 0:D.toDate())||new Date,uploadedBy:L.uploadedBy||"",imageUrl:L.imageUrl||L.thumbnailUrl||"",thumbnailUrl:L.thumbnailUrl||L.imageUrl||""})});const F=await _t(Qe(P,"quizzes")),U=[];F.forEach(O=>{var D;const L=O.data();U.push({id:O.id,title:L.title||"",description:L.description||"",questions:L.questions||[],timeLimit:L.duration||30,passingScore:L.passRate||70,createdAt:((D=L.createdAt)==null?void 0:D.toDate())||new Date,createdBy:L.uploadedBy||""})});const z=await _t(Qe(P,"videos")),k=[];z.empty?(x.videos||[]).forEach(L=>{var D,I;k.push({id:L.id||L.videoId||"",title:L.title||L.name||"",youtubeUrl:L.url||L.youtubeUrl||"",thumbnailUrl:L.thumbnailUrl||L.thumbnail||"",duration:L.duration||L.time||"",description:L.description||"",uploadedAt:((I=(D=L.uploadedAt)==null?void 0:D.toDate)==null?void 0:I.call(D))||new Date,uploadedBy:L.uploadedBy||L.uploader||"",imageUrl:L.thumbnailUrl||""})}):z.forEach(O=>{var D,I;const L=O.data();k.push({id:O.id,title:L.title||L.name||"",youtubeUrl:L.url||L.youtubeUrl||"",thumbnailUrl:L.thumbnailUrl||L.thumbnail||"",duration:L.duration||L.time||"",description:L.description||"",uploadedAt:((I=(D=L.uploadedAt)==null?void 0:D.toDate)==null?void 0:I.call(D))||new Date,uploadedBy:L.uploadedBy||L.uploader||"",imageUrl:L.thumbnailUrl||""})}),v.push({id:_,title:x.title||"",description:x.description||"",subject:x.subjectId||"Unknown",order:x.order||1,createdAt:((w=x.createdAt)==null?void 0:w.toDate())||new Date,createdBy:x.uploadedBy||"",videos:k,files:C,quizzes:U})}v.sort((N,x)=>(N.order||0)-(x.order||0)),e(v),r(!1)},y=>{console.error("Error fetching lectures:",y),a("Failed to fetch lectures"),r(!1)});return()=>g()},[]),{lectures:t,loading:n,error:s,createLecture:async(f,g)=>{try{const y=At(Ae,"Subjects",g),v=Qe(y,"lectures"),{videos:w,files:N,quizzes:x,..._}=f,P=await xn(v,{..._,videos:w,subjectId:g});if(N&&N.length>0){const j=Qe(P,"files");for(const C of N)await xn(j,C)}if(x&&x.length>0){const j=Qe(P,"quizzes");for(const C of x)await xn(j,C)}}catch(y){throw console.error("Error creating lecture:",y),y}},updateLecture:async(f,g)=>{try{const y=pn(rs(Ae,"lectures")),v=await _t(y);for(const w of v.docs)if(w.id===f){await rn(w.ref,g);break}}catch(y){throw console.error("Error updating lecture:",y),y}},deleteLecture:async f=>{try{const g=pn(rs(Ae,"lectures")),y=await _t(g);for(const v of y.docs)if(v.id===f){await Sr(v.ref);break}}catch(g){throw console.error("Error deleting lecture:",g),g}}}}const oP=({className:t,...e})=>o.jsx("nav",{role:"navigation","aria-label":"pagination",className:Ge("mx-auto flex w-full justify-center",t),...e});oP.displayName="Pagination";const aP=E.forwardRef(({className:t,...e},n)=>o.jsx("ul",{ref:n,className:Ge("flex flex-row items-center gap-1",t),...e}));aP.displayName="PaginationContent";const ap=E.forwardRef(({className:t,...e},n)=>o.jsx("li",{ref:n,className:Ge("",t),...e}));ap.displayName="PaginationItem";const $m=({className:t,isActive:e,size:n="icon",...r})=>o.jsx("a",{"aria-current":e?"page":void 0,className:Ge(YI({variant:e?"outline":"ghost",size:n}),t),...r});$m.displayName="PaginationLink";const lP=({className:t,...e})=>o.jsxs($m,{"aria-label":"Go to previous page",size:"default",className:Ge("gap-1 pl-2.5",t),...e,children:[o.jsx(q2,{className:"h-4 w-4"}),o.jsx("span",{children:"Previous"})]});lP.displayName="PaginationPrevious";const cP=({className:t,...e})=>o.jsxs($m,{"aria-label":"Go to next page",size:"default",className:Ge("gap-1 pr-2.5",t),...e,children:[o.jsx("span",{children:"Next"}),o.jsx(W2,{className:"h-4 w-4"})]});cP.displayName="PaginationNext";const uP=({className:t,...e})=>o.jsxs("span",{"aria-hidden":!0,className:Ge("flex h-9 w-9 items-center justify-center",t),...e,children:[o.jsx(G2,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"More pages"})]});uP.displayName="PaginationEllipsis";function O1(t,[e,n]){return Math.min(n,Math.max(e,t))}var n7=E.createContext(void 0);function w0(t){const e=E.useContext(n7);return t||e||"ltr"}var r7="DismissableLayer",wx="dismissableLayer.update",s7="dismissableLayer.pointerDownOutside",i7="dismissableLayer.focusOutside",D1,dP=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hP=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:u,...h}=t,f=E.useContext(dP),[g,y]=E.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=E.useState({}),N=jt(e,k=>y(k)),x=Array.from(f.layers),[_]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),P=x.indexOf(_),j=g?x.indexOf(g):-1,C=f.layersWithOutsidePointerEventsDisabled.size>0,F=j>=P,U=l7(k=>{const O=k.target,L=[...f.branches].some(D=>D.contains(O));!F||L||(s==null||s(k),c==null||c(k),k.defaultPrevented||u==null||u())},v),z=c7(k=>{const O=k.target;[...f.branches].some(D=>D.contains(O))||(a==null||a(k),c==null||c(k),k.defaultPrevented||u==null||u())},v);return Ax(k=>{j===f.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&u&&(k.preventDefault(),u()))},v),E.useEffect(()=>{if(g)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(D1=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),L1(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=D1)}},[g,v,n,f]),E.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),L1())},[g,f]),E.useEffect(()=>{const k=()=>w({});return document.addEventListener(wx,k),()=>document.removeEventListener(wx,k)},[]),o.jsx(Je.div,{...h,ref:N,style:{pointerEvents:C?F?"auto":"none":void 0,...t.style},onFocusCapture:qe(t.onFocusCapture,z.onFocusCapture),onBlurCapture:qe(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:qe(t.onPointerDownCapture,U.onPointerDownCapture)})});hP.displayName=r7;var o7="DismissableLayerBranch",a7=E.forwardRef((t,e)=>{const n=E.useContext(dP),r=E.useRef(null),s=jt(e,r);return E.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(Je.div,{...t,ref:s})});a7.displayName=o7;function l7(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=E.useRef(!1),s=E.useRef(()=>{});return E.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){fP(s7,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function c7(t,e=globalThis==null?void 0:globalThis.document){const n=jn(t),r=E.useRef(!1);return E.useEffect(()=>{const s=a=>{a.target&&!r.current&&fP(i7,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function L1(){const t=new CustomEvent(wx);document.dispatchEvent(t)}function fP(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Qp(s,a):s.dispatchEvent(a)}var iv=0;function u7(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??M1()),document.body.insertAdjacentElement("beforeend",t[1]??M1()),iv++,()=>{iv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),iv--}},[])}function M1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var d7="Portal",pP=E.forwardRef((t,e)=>{var u;const{container:n,...r}=t,[s,a]=E.useState(!1);Zt(()=>a(!0),[]);const c=n||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?Gp.createPortal(o.jsx(Je.div,{...r,ref:e}),c):null});pP.displayName=d7;var mP=gA(),ov=function(){},zm=E.forwardRef(function(t,e){var n=E.useRef(null),r=E.useState({onScrollCapture:ov,onWheelCapture:ov,onTouchMoveCapture:ov}),s=r[0],a=r[1],c=t.forwardProps,u=t.children,h=t.className,f=t.removeScrollBar,g=t.enabled,y=t.shards,v=t.sideCar,w=t.noIsolation,N=t.inert,x=t.allowPinchZoom,_=t.as,P=_===void 0?"div":_,j=t.gapMode,C=iu(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),F=v,U=mA([n,e]),z=Jn(Jn({},C),s);return E.createElement(E.Fragment,null,g&&E.createElement(F,{sideCar:mP,removeScrollBar:f,shards:y,noIsolation:w,inert:N,setCallbacks:a,allowPinchZoom:!!x,lockRef:n,gapMode:j}),c?E.cloneElement(E.Children.only(u),Jn(Jn({},z),{ref:U})):E.createElement(P,Jn({},z,{className:h,ref:U}),u))});zm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zm.classNames={fullWidth:yd,zeroRight:gd};var _x=!1;if(typeof window<"u")try{var qf=Object.defineProperty({},"passive",{get:function(){return _x=!0,!0}});window.addEventListener("test",qf,qf),window.removeEventListener("test",qf,qf)}catch{_x=!1}var cc=_x?{passive:!1}:!1,h7=function(t){return t.tagName==="TEXTAREA"},gP=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!h7(t)&&n[e]==="visible")},f7=function(t){return gP(t,"overflowY")},p7=function(t){return gP(t,"overflowX")},F1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=yP(t,r);if(s){var a=vP(t,r),c=a[1],u=a[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},m7=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},g7=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},yP=function(t,e){return t==="v"?f7(e):p7(e)},vP=function(t,e){return t==="v"?m7(e):g7(e)},y7=function(t,e){return t==="h"&&e==="rtl"?-1:1},v7=function(t,e,n,r,s){var a=y7(t,window.getComputedStyle(e).direction),c=a*r,u=n.target,h=e.contains(u),f=!1,g=c>0,y=0,v=0;do{var w=vP(t,u),N=w[0],x=w[1],_=w[2],P=x-_-a*N;(N||P)&&yP(t,u)&&(y+=P,v+=N),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(y)<1||!g&&Math.abs(v)<1)&&(f=!0),f},Wf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},V1=function(t){return[t.deltaX,t.deltaY]},U1=function(t){return t&&"current"in t?t.current:t},x7=function(t,e){return t[0]===e[0]&&t[1]===e[1]},w7=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},_7=0,uc=[];function E7(t){var e=E.useRef([]),n=E.useRef([0,0]),r=E.useRef(),s=E.useState(_7++)[0],a=E.useState(a0)[0],c=E.useRef(t);E.useEffect(function(){c.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=fC([t.lockRef.current],(t.shards||[]).map(U1),!0).filter(Boolean);return x.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var u=E.useCallback(function(x,_){if("touches"in x&&x.touches.length===2)return!c.current.allowPinchZoom;var P=Wf(x),j=n.current,C="deltaX"in x?x.deltaX:j[0]-P[0],F="deltaY"in x?x.deltaY:j[1]-P[1],U,z=x.target,k=Math.abs(C)>Math.abs(F)?"h":"v";if("touches"in x&&k==="h"&&z.type==="range")return!1;var O=F1(k,z);if(!O)return!0;if(O?U=k:(U=k==="v"?"h":"v",O=F1(k,z)),!O)return!1;if(!r.current&&"changedTouches"in x&&(C||F)&&(r.current=U),!U)return!0;var L=r.current||U;return v7(L,_,x,L==="h"?C:F)},[]),h=E.useCallback(function(x){var _=x;if(!(!uc.length||uc[uc.length-1]!==a)){var P="deltaY"in _?V1(_):Wf(_),j=e.current.filter(function(U){return U.name===_.type&&(U.target===_.target||_.target===U.shadowParent)&&x7(U.delta,P)})[0];if(j&&j.should){_.cancelable&&_.preventDefault();return}if(!j){var C=(c.current.shards||[]).map(U1).filter(Boolean).filter(function(U){return U.contains(_.target)}),F=C.length>0?u(_,C[0]):!c.current.noIsolation;F&&_.cancelable&&_.preventDefault()}}},[]),f=E.useCallback(function(x,_,P,j){var C={name:x,delta:_,target:P,should:j,shadowParent:b7(P)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(F){return F!==C})},1)},[]),g=E.useCallback(function(x){n.current=Wf(x),r.current=void 0},[]),y=E.useCallback(function(x){f(x.type,V1(x),x.target,u(x,t.lockRef.current))},[]),v=E.useCallback(function(x){f(x.type,Wf(x),x.target,u(x,t.lockRef.current))},[]);E.useEffect(function(){return uc.push(a),t.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",h,cc),document.addEventListener("touchmove",h,cc),document.addEventListener("touchstart",g,cc),function(){uc=uc.filter(function(x){return x!==a}),document.removeEventListener("wheel",h,cc),document.removeEventListener("touchmove",h,cc),document.removeEventListener("touchstart",g,cc)}},[]);var w=t.removeScrollBar,N=t.inert;return E.createElement(E.Fragment,null,N?E.createElement(a,{styles:w7(s)}):null,w?E.createElement(wA,{gapMode:t.gapMode}):null)}function b7(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const N7=vA(mP,E7);var xP=E.forwardRef(function(t,e){return E.createElement(zm,Jn({},t,{ref:e,sideCar:N7}))});xP.classNames=zm.classNames;var S7=[" ","Enter","ArrowUp","ArrowDown"],T7=[" ","Enter"],ch="Select",[Bm,qm,C7]=Ix(ch),[fu,dW]=Gi(ch,[C7,tm]),Wm=tm(),[j7,fa]=fu(ch),[I7,A7]=fu(ch),wP=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:c,defaultValue:u,onValueChange:h,dir:f,name:g,autoComplete:y,disabled:v,required:w}=t,N=Wm(e),[x,_]=E.useState(null),[P,j]=E.useState(null),[C,F]=E.useState(!1),U=w0(f),[z=!1,k]=Za({prop:r,defaultProp:s,onChange:a}),[O,L]=Za({prop:c,defaultProp:u,onChange:h}),D=E.useRef(null),I=x?!!x.closest("form"):!0,[M,R]=E.useState(new Set),W=Array.from(M).map(K=>K.props.value).join(";");return o.jsx(FL,{...N,children:o.jsxs(j7,{required:w,scope:e,trigger:x,onTriggerChange:_,valueNode:P,onValueNodeChange:j,valueNodeHasChildren:C,onValueNodeHasChildrenChange:F,contentId:Ho(),value:O,onValueChange:L,open:z,onOpenChange:k,dir:U,triggerPointerDownPosRef:D,disabled:v,children:[o.jsx(Bm.Provider,{scope:e,children:o.jsx(I7,{scope:t.__scopeSelect,onNativeOptionAdd:E.useCallback(K=>{R(X=>new Set(X).add(K))},[]),onNativeOptionRemove:E.useCallback(K=>{R(X=>{const ie=new Set(X);return ie.delete(K),ie})},[]),children:n})}),I?o.jsxs(WP,{"aria-hidden":!0,required:w,tabIndex:-1,name:g,autoComplete:y,value:O,onChange:K=>L(K.target.value),disabled:v,children:[O===void 0?o.jsx("option",{value:""}):null,Array.from(M)]},W):null]})})};wP.displayName=ch;var _P="SelectTrigger",EP=E.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=Wm(n),c=fa(_P,n),u=c.disabled||r,h=jt(e,c.onTriggerChange),f=qm(n),[g,y,v]=HP(N=>{const x=f().filter(j=>!j.disabled),_=x.find(j=>j.value===c.value),P=KP(x,N,_);P!==void 0&&c.onValueChange(P.value)}),w=()=>{u||(c.onOpenChange(!0),v())};return o.jsx(pT,{asChild:!0,...a,children:o.jsx(Je.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":qP(c.value)?"":void 0,...s,ref:h,onClick:qe(s.onClick,N=>{N.currentTarget.focus()}),onPointerDown:qe(s.onPointerDown,N=>{const x=N.target;x.hasPointerCapture(N.pointerId)&&x.releasePointerCapture(N.pointerId),N.button===0&&N.ctrlKey===!1&&(w(),c.triggerPointerDownPosRef.current={x:Math.round(N.pageX),y:Math.round(N.pageY)},N.preventDefault())}),onKeyDown:qe(s.onKeyDown,N=>{const x=g.current!=="";!(N.ctrlKey||N.altKey||N.metaKey)&&N.key.length===1&&y(N.key),!(x&&N.key===" ")&&S7.includes(N.key)&&(w(),N.preventDefault())})})})});EP.displayName=_P;var bP="SelectValue",NP=E.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:c="",...u}=t,h=fa(bP,n),{onValueNodeHasChildrenChange:f}=h,g=a!==void 0,y=jt(e,h.onValueNodeChange);return Zt(()=>{f(g)},[f,g]),o.jsx(Je.span,{...u,ref:y,style:{pointerEvents:"none"},children:qP(h.value)?o.jsx(o.Fragment,{children:c}):a})});NP.displayName=bP;var P7="SelectIcon",SP=E.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(Je.span,{"aria-hidden":!0,...s,ref:e,children:r||"â–¼"})});SP.displayName=P7;var k7="SelectPortal",TP=t=>o.jsx(pP,{asChild:!0,...t});TP.displayName=k7;var ul="SelectContent",CP=E.forwardRef((t,e)=>{const n=fa(ul,t.__scopeSelect),[r,s]=E.useState();if(Zt(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?dl.createPortal(o.jsx(jP,{scope:t.__scopeSelect,children:o.jsx(Bm.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),a):null}return o.jsx(IP,{...t,ref:e})});CP.displayName=ul;var Di=10,[jP,pa]=fu(ul),R7="SelectContentImpl",IP=E.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:c,side:u,sideOffset:h,align:f,alignOffset:g,arrowPadding:y,collisionBoundary:v,collisionPadding:w,sticky:N,hideWhenDetached:x,avoidCollisions:_,...P}=t,j=fa(ul,n),[C,F]=E.useState(null),[U,z]=E.useState(null),k=jt(e,we=>F(we)),[O,L]=E.useState(null),[D,I]=E.useState(null),M=qm(n),[R,W]=E.useState(!1),K=E.useRef(!1);E.useEffect(()=>{if(C)return TA(C)},[C]),u7();const X=E.useCallback(we=>{const[Se,...He]=M().map(it=>it.ref.current),[Fe]=He.slice(-1),st=document.activeElement;for(const it of we)if(it===st||(it==null||it.scrollIntoView({block:"nearest"}),it===Se&&U&&(U.scrollTop=0),it===Fe&&U&&(U.scrollTop=U.scrollHeight),it==null||it.focus(),document.activeElement!==st))return},[M,U]),ie=E.useCallback(()=>X([O,C]),[X,O,C]);E.useEffect(()=>{R&&ie()},[R,ie]);const{onOpenChange:G,triggerPointerDownPosRef:oe}=j;E.useEffect(()=>{if(C){let we={x:0,y:0};const Se=Fe=>{var st,it;we={x:Math.abs(Math.round(Fe.pageX)-(((st=oe.current)==null?void 0:st.x)??0)),y:Math.abs(Math.round(Fe.pageY)-(((it=oe.current)==null?void 0:it.y)??0))}},He=Fe=>{we.x<=10&&we.y<=10?Fe.preventDefault():C.contains(Fe.target)||G(!1),document.removeEventListener("pointermove",Se),oe.current=null};return oe.current!==null&&(document.addEventListener("pointermove",Se),document.addEventListener("pointerup",He,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Se),document.removeEventListener("pointerup",He,{capture:!0})}}},[C,G,oe]),E.useEffect(()=>{const we=()=>G(!1);return window.addEventListener("blur",we),window.addEventListener("resize",we),()=>{window.removeEventListener("blur",we),window.removeEventListener("resize",we)}},[G]);const[le,B]=HP(we=>{const Se=M().filter(st=>!st.disabled),He=Se.find(st=>st.ref.current===document.activeElement),Fe=KP(Se,we,He);Fe&&setTimeout(()=>Fe.ref.current.focus())}),Z=E.useCallback((we,Se,He)=>{const Fe=!K.current&&!He;(j.value!==void 0&&j.value===Se||Fe)&&(L(we),Fe&&(K.current=!0))},[j.value]),he=E.useCallback(()=>C==null?void 0:C.focus(),[C]),Ce=E.useCallback((we,Se,He)=>{const Fe=!K.current&&!He;(j.value!==void 0&&j.value===Se||Fe)&&I(we)},[j.value]),$e=r==="popper"?Ex:AP,Ie=$e===Ex?{side:u,sideOffset:h,align:f,alignOffset:g,arrowPadding:y,collisionBoundary:v,collisionPadding:w,sticky:N,hideWhenDetached:x,avoidCollisions:_}:{};return o.jsx(jP,{scope:n,content:C,viewport:U,onViewportChange:z,itemRefCallback:Z,selectedItem:O,onItemLeave:he,itemTextRefCallback:Ce,focusSelectedItem:ie,selectedItemText:D,position:r,isPositioned:R,searchRef:le,children:o.jsx(xP,{as:Ja,allowPinchZoom:!0,children:o.jsx(o0,{asChild:!0,trapped:j.open,onMountAutoFocus:we=>{we.preventDefault()},onUnmountAutoFocus:qe(s,we=>{var Se;(Se=j.trigger)==null||Se.focus({preventScroll:!0}),we.preventDefault()}),children:o.jsx(hP,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:we=>we.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:o.jsx($e,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:we=>we.preventDefault(),...P,...Ie,onPlaced:()=>W(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...P.style},onKeyDown:qe(P.onKeyDown,we=>{const Se=we.ctrlKey||we.altKey||we.metaKey;if(we.key==="Tab"&&we.preventDefault(),!Se&&we.key.length===1&&B(we.key),["ArrowUp","ArrowDown","Home","End"].includes(we.key)){let Fe=M().filter(st=>!st.disabled).map(st=>st.ref.current);if(["ArrowUp","End"].includes(we.key)&&(Fe=Fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(we.key)){const st=we.target,it=Fe.indexOf(st);Fe=Fe.slice(it+1)}setTimeout(()=>X(Fe)),we.preventDefault()}})})})})})})});IP.displayName=R7;var O7="SelectItemAlignedPosition",AP=E.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=fa(ul,n),c=pa(ul,n),[u,h]=E.useState(null),[f,g]=E.useState(null),y=jt(e,k=>g(k)),v=qm(n),w=E.useRef(!1),N=E.useRef(!0),{viewport:x,selectedItem:_,selectedItemText:P,focusSelectedItem:j}=c,C=E.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&f&&x&&_&&P){const k=a.trigger.getBoundingClientRect(),O=f.getBoundingClientRect(),L=a.valueNode.getBoundingClientRect(),D=P.getBoundingClientRect();if(a.dir!=="rtl"){const st=D.left-O.left,it=L.left-st,ve=k.left-it,je=k.width+ve,mt=Math.max(je,O.width),an=window.innerWidth-Di,zn=O1(it,[Di,an-mt]);u.style.minWidth=je+"px",u.style.left=zn+"px"}else{const st=O.right-D.right,it=window.innerWidth-L.right-st,ve=window.innerWidth-k.right-it,je=k.width+ve,mt=Math.max(je,O.width),an=window.innerWidth-Di,zn=O1(it,[Di,an-mt]);u.style.minWidth=je+"px",u.style.right=zn+"px"}const I=v(),M=window.innerHeight-Di*2,R=x.scrollHeight,W=window.getComputedStyle(f),K=parseInt(W.borderTopWidth,10),X=parseInt(W.paddingTop,10),ie=parseInt(W.borderBottomWidth,10),G=parseInt(W.paddingBottom,10),oe=K+X+R+G+ie,le=Math.min(_.offsetHeight*5,oe),B=window.getComputedStyle(x),Z=parseInt(B.paddingTop,10),he=parseInt(B.paddingBottom,10),Ce=k.top+k.height/2-Di,$e=M-Ce,Ie=_.offsetHeight/2,we=_.offsetTop+Ie,Se=K+X+we,He=oe-Se;if(Se<=Ce){const st=_===I[I.length-1].ref.current;u.style.bottom="0px";const it=f.clientHeight-x.offsetTop-x.offsetHeight,ve=Math.max($e,Ie+(st?he:0)+it+ie),je=Se+ve;u.style.height=je+"px"}else{const st=_===I[0].ref.current;u.style.top="0px";const ve=Math.max(Ce,K+x.offsetTop+(st?Z:0)+Ie)+He;u.style.height=ve+"px",x.scrollTop=Se-Ce+x.offsetTop}u.style.margin=`${Di}px 0`,u.style.minHeight=le+"px",u.style.maxHeight=M+"px",r==null||r(),requestAnimationFrame(()=>w.current=!0)}},[v,a.trigger,a.valueNode,u,f,x,_,P,a.dir,r]);Zt(()=>C(),[C]);const[F,U]=E.useState();Zt(()=>{f&&U(window.getComputedStyle(f).zIndex)},[f]);const z=E.useCallback(k=>{k&&N.current===!0&&(C(),j==null||j(),N.current=!1)},[C,j]);return o.jsx(L7,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:w,onScrollButtonChange:z,children:o.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:F},children:o.jsx(Je.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});AP.displayName=O7;var D7="SelectPopperPosition",Ex=E.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Di,...a}=t,c=Wm(n);return o.jsx(mT,{...c,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ex.displayName=D7;var[L7,_0]=fu(ul,{}),bx="SelectViewport",PP=E.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=pa(bx,n),c=_0(bx,n),u=jt(e,a.onViewportChange),h=E.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(Bm.Slot,{scope:n,children:o.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"auto",...s.style},onScroll:qe(s.onScroll,f=>{const g=f.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:v}=c;if(v!=null&&v.current&&y){const w=Math.abs(h.current-g.scrollTop);if(w>0){const N=window.innerHeight-Di*2,x=parseFloat(y.style.minHeight),_=parseFloat(y.style.height),P=Math.max(x,_);if(P<N){const j=P+w,C=Math.min(N,j),F=j-C;y.style.height=C+"px",y.style.bottom==="0px"&&(g.scrollTop=F>0?F:0,y.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});PP.displayName=bx;var kP="SelectGroup",[M7,F7]=fu(kP),V7=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ho();return o.jsx(M7,{scope:n,id:s,children:o.jsx(Je.div,{role:"group","aria-labelledby":s,...r,ref:e})})});V7.displayName=kP;var RP="SelectLabel",OP=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=F7(RP,n);return o.jsx(Je.div,{id:s.id,...r,ref:e})});OP.displayName=RP;var Hp="SelectItem",[U7,DP]=fu(Hp),LP=E.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...c}=t,u=fa(Hp,n),h=pa(Hp,n),f=u.value===r,[g,y]=E.useState(a??""),[v,w]=E.useState(!1),N=jt(e,P=>{var j;return(j=h.itemRefCallback)==null?void 0:j.call(h,P,r,s)}),x=Ho(),_=()=>{s||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(U7,{scope:n,value:r,disabled:s,textId:x,isSelected:f,onItemTextChange:E.useCallback(P=>{y(j=>j||((P==null?void 0:P.textContent)??"").trim())},[]),children:o.jsx(Bm.ItemSlot,{scope:n,value:r,disabled:s,textValue:g,children:o.jsx(Je.div,{role:"option","aria-labelledby":x,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:N,onFocus:qe(c.onFocus,()=>w(!0)),onBlur:qe(c.onBlur,()=>w(!1)),onPointerUp:qe(c.onPointerUp,_),onPointerMove:qe(c.onPointerMove,P=>{var j;s?(j=h.onItemLeave)==null||j.call(h):P.currentTarget.focus({preventScroll:!0})}),onPointerLeave:qe(c.onPointerLeave,P=>{var j;P.currentTarget===document.activeElement&&((j=h.onItemLeave)==null||j.call(h))}),onKeyDown:qe(c.onKeyDown,P=>{var C;((C=h.searchRef)==null?void 0:C.current)!==""&&P.key===" "||(T7.includes(P.key)&&_(),P.key===" "&&P.preventDefault())})})})})});LP.displayName=Hp;var sd="SelectItemText",MP=E.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,c=fa(sd,n),u=pa(sd,n),h=DP(sd,n),f=A7(sd,n),[g,y]=E.useState(null),v=jt(e,P=>y(P),h.onItemTextChange,P=>{var j;return(j=u.itemTextRefCallback)==null?void 0:j.call(u,P,h.value,h.disabled)}),w=g==null?void 0:g.textContent,N=E.useMemo(()=>o.jsx("option",{value:h.value,disabled:h.disabled,children:w},h.value),[h.disabled,h.value,w]),{onNativeOptionAdd:x,onNativeOptionRemove:_}=f;return Zt(()=>(x(N),()=>_(N)),[x,_,N]),o.jsxs(o.Fragment,{children:[o.jsx(Je.span,{id:h.textId,...a,ref:v}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?dl.createPortal(a.children,c.valueNode):null]})});MP.displayName=sd;var FP="SelectItemIndicator",VP=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return DP(FP,n).isSelected?o.jsx(Je.span,{"aria-hidden":!0,...r,ref:e}):null});VP.displayName=FP;var Nx="SelectScrollUpButton",UP=E.forwardRef((t,e)=>{const n=pa(Nx,t.__scopeSelect),r=_0(Nx,t.__scopeSelect),[s,a]=E.useState(!1),c=jt(e,r.onScrollButtonChange);return Zt(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=h.scrollTop>0;a(f)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?o.jsx(zP,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});UP.displayName=Nx;var Sx="SelectScrollDownButton",$P=E.forwardRef((t,e)=>{const n=pa(Sx,t.__scopeSelect),r=_0(Sx,t.__scopeSelect),[s,a]=E.useState(!1),c=jt(e,r.onScrollButtonChange);return Zt(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<f;a(g)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),s?o.jsx(zP,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});$P.displayName=Sx;var zP=E.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=pa("SelectScrollButton",n),c=E.useRef(null),u=qm(n),h=E.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return E.useEffect(()=>()=>h(),[h]),Zt(()=>{var g;const f=u().find(y=>y.ref.current===document.activeElement);(g=f==null?void 0:f.ref.current)==null||g.scrollIntoView({block:"nearest"})},[u]),o.jsx(Je.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:qe(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:qe(s.onPointerMove,()=>{var f;(f=a.onItemLeave)==null||f.call(a),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:qe(s.onPointerLeave,()=>{h()})})}),$7="SelectSeparator",BP=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(Je.div,{"aria-hidden":!0,...r,ref:e})});BP.displayName=$7;var Tx="SelectArrow",z7=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Wm(n),a=fa(Tx,n),c=pa(Tx,n);return a.open&&c.position==="popper"?o.jsx(gT,{...s,...r,ref:e}):null});z7.displayName=Tx;function qP(t){return t===""||t===void 0}var WP=E.forwardRef((t,e)=>{const{value:n,...r}=t,s=E.useRef(null),a=jt(e,s),c=XA(n);return E.useEffect(()=>{const u=s.current,h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==n&&g){const y=new Event("change",{bubbles:!0});g.call(u,n),u.dispatchEvent(y)}},[c,n]),o.jsx(Wd,{asChild:!0,children:o.jsx("select",{...r,ref:a,defaultValue:n})})});WP.displayName="BubbleSelect";function HP(t){const e=jn(t),n=E.useRef(""),r=E.useRef(0),s=E.useCallback(c=>{const u=n.current+c;e(u),function h(f){n.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>h(""),1e3))}(u)},[e]),a=E.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function KP(t,e,n){const s=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let c=B7(t,Math.max(a,0));s.length===1&&(c=c.filter(f=>f!==n));const h=c.find(f=>f.textValue.toLowerCase().startsWith(s.toLowerCase()));return h!==n?h:void 0}function B7(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var q7=wP,GP=EP,W7=NP,H7=SP,K7=TP,QP=CP,G7=PP,YP=OP,XP=LP,Q7=MP,Y7=VP,JP=UP,ZP=$P,ek=BP;const lp=q7,cp=W7,vd=E.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(GP,{ref:r,className:Ge("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(H7,{asChild:!0,children:o.jsx(RS,{className:"h-4 w-4 opacity-50"})})]}));vd.displayName=GP.displayName;const tk=E.forwardRef(({className:t,...e},n)=>o.jsx(JP,{ref:n,className:Ge("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(H2,{className:"h-4 w-4"})}));tk.displayName=JP.displayName;const nk=E.forwardRef(({className:t,...e},n)=>o.jsx(ZP,{ref:n,className:Ge("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(RS,{className:"h-4 w-4"})}));nk.displayName=ZP.displayName;const xd=E.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(K7,{children:o.jsxs(QP,{ref:s,className:Ge("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(tk,{}),o.jsx(G7,{className:Ge("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(nk,{})]})}));xd.displayName=QP.displayName;const X7=E.forwardRef(({className:t,...e},n)=>o.jsx(YP,{ref:n,className:Ge("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));X7.displayName=YP.displayName;const Po=E.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(XP,{ref:r,className:Ge("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Y7,{children:o.jsx(dp,{className:"h-4 w-4"})})}),o.jsx(Q7,{children:e})]}));Po.displayName=XP.displayName;const J7=E.forwardRef(({className:t,...e},n)=>o.jsx(ek,{ref:n,className:Ge("-mx-1 my-1 h-px bg-muted",t),...e}));J7.displayName=ek.displayName;function Z7({currentPage:t,totalPages:e,totalCount:n,pageSize:r,hasNextPage:s,isLoading:a,isFetchingNextPage:c,cachedPages:u,onPageChange:h,onPageSizeChange:f,onLoadNext:g,pageSizeOptions:y=[5,10,20,50]}){const v=()=>{const w=[];if(e<=7)for(let x=0;x<e;x++)w.push(x);else if(t<3){for(let x=0;x<5;x++)w.push(x);w.push("ellipsis"),w.push(e-1)}else if(t>e-4){w.push(0),w.push("ellipsis");for(let x=e-5;x<e;x++)w.push(x)}else{w.push(0),w.push("ellipsis");for(let x=t-1;x<=t+1;x++)w.push(x);w.push("ellipsis"),w.push(e-1)}return w};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Cy,{className:"h-4 w-4"}),o.jsxs("span",{children:["Showing page ",t+1," of ",e," (",n," total)"]})]}),u.length>0&&o.jsxs(Pt,{variant:"secondary",className:"gap-1",children:[o.jsx(Cy,{className:"h-3 w-3"}),u.length," page",u.length!==1?"s":""," cached"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Items per page:"}),o.jsxs(lp,{value:r.toString(),onValueChange:w=>f(Number(w)),children:[o.jsx(vd,{className:"w-20",children:o.jsx(cp,{})}),o.jsx(xd,{children:y.map(w=>o.jsx(Po,{value:w.toString(),children:w},w))})]})]})]}),o.jsx(oP,{children:o.jsxs(aP,{children:[o.jsx(ap,{children:o.jsx(lP,{onClick:()=>t>0&&h(t-1),className:t===0?"pointer-events-none opacity-50":"cursor-pointer"})}),v().map((w,N)=>o.jsx(ap,{children:w==="ellipsis"?o.jsx(uP,{}):o.jsxs($m,{onClick:()=>h(w),isActive:w===t,className:"cursor-pointer",children:[w+1,u.includes(w)&&o.jsx(Cy,{className:"h-3 w-3 ml-1 text-primary"})]})},N)),o.jsx(ap,{children:o.jsx(cP,{onClick:()=>{s&&(g(),h(t+1))},className:s?"cursor-pointer":"pointer-events-none opacity-50"})})]})}),c&&o.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[o.jsx(Qi,{className:"h-4 w-4 animate-spin"}),o.jsx("span",{children:"Loading next page..."})]})]})}function $1(){const[t,e]=E.useState(""),[n,r]=E.useState(null),[s,a]=E.useState(!1),[c,u]=E.useState(10),[h,f]=E.useState(0),[g,y]=E.useState(!1),[v,w]=E.useState(!1),[N,x]=E.useState(!1),[_,P]=E.useState(null),[j,C]=E.useState(null),[F,U]=E.useState(null),{data:z,allData:k,currentPage:O,totalPages:L,totalCount:D,hasNextPage:I,isLoading:M,isFetchingNextPage:R,error:W,loadNextPage:K,isPageCached:X,prefetchNextPage:ie}=t7(c),{createLecture:G,updateLecture:oe}=Um(),le=W?W.message:null,[B]=Qd(),Z=B.get("lecture");B.get("tab");let Ce=t?k.filter(ve=>ve.title.toLowerCase().includes(t.toLowerCase())||ve.subject.toLowerCase().includes(t.toLowerCase())):z;Z&&(Ce=k.filter(ve=>ve.id===Z));const $e=[];for(let ve=0;ve<=O;ve++)X(ve)&&$e.push(ve);const Ie=ve=>{f(ve),!X(ve)&&ve>O&&K()},we=ve=>{u(ve),f(0)};_e.useEffect(()=>{if(I&&!R){const ve=setTimeout(()=>{ie()},1e3);return()=>clearTimeout(ve)}},[I,R,ie]);const Se=()=>{r(null),a(!0)},He=ve=>{r(ve),a(!0)},Fe=ve=>{P(ve),y(!0)},st=ve=>{C(ve),w(!0)},it=ve=>{U(ve),x(!0)};return g?o.jsx(x0,{video:_,onClose:()=>{y(!1),P(null)},onSave:async ve=>{try{_&&(console.log("âœ… Video updated successfully"),alert("Video updated! The page will reload to show changes."),window.location.reload()),y(!1),P(null)}catch(je){console.error("Error saving video:",je),alert("Failed to save video")}}}):v?o.jsx(v0,{file:j,onClose:()=>{w(!1),C(null)},onSave:async ve=>{try{j&&(console.log("âœ… File updated successfully"),alert("File updated! The page will reload to show changes."),window.location.reload()),w(!1),C(null)}catch(je){console.error("Error saving file:",je),alert("Failed to save file")}}}):N?o.jsx(y0,{quiz:F,onClose:()=>{x(!1),U(null)},onSave:async ve=>{try{F&&(console.log("âœ… Quiz updated successfully"),alert("Quiz updated! The page will reload to show changes."),window.location.reload()),x(!1),U(null)}catch(je){console.error("Error saving quiz:",je),alert("Failed to save quiz")}}}):s?o.jsx(Vm,{lecture:n,onClose:()=>{a(!1),r(null)},onSave:async ve=>{try{n?await oe(n.id,ve):await G(ve,"default-subject"),a(!1),r(null)}catch(je){console.error("Error saving lecture:",je)}}}):(Z&&z.find(ve=>ve.id===Z),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Resources Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Organize educational content by lectures with videos, files, and quizzes"})]}),o.jsxs(J,{onClick:Se,className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Create Lecture"]})]}),o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search lectures by title or subject...",value:t,onChange:ve=>e(ve.target.value),className:"pl-10"})]})})}),M&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Qi,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading lectures..."})]})}),le&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading lectures"}),o.jsx("p",{className:"text-muted-foreground",children:le})]})}),!M&&!le&&o.jsx("div",{className:"space-y-6",children:Ce.map(ve=>o.jsxs(pe,{className:`hover:shadow-lg transition-all duration-200 border-l-4 ${Z===ve.id?"border-l-primary bg-primary/5":"border-l-primary/20 hover:border-l-primary"}`,children:[o.jsx(Be,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx(Ns,{className:"h-5 w-5 text-primary"}),o.jsx(Ke,{className:"text-xl",children:ve.title}),o.jsx(Pt,{variant:"secondary",children:ve.subject})]}),o.jsx(St,{className:"text-base",children:ve.description}),o.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Vc,{className:"h-3 w-3"}),ve.createdBy]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(gc,{className:"h-3 w-3"}),ve.createdAt.toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>He(ve),children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(J,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})}),o.jsx(me,{children:o.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx(ni,{className:"h-4 w-4 text-green-600"}),"Videos (",ve.videos.length,")"]}),ve.videos.length>0&&o.jsx(J,{variant:"ghost",size:"sm",onClick:()=>{ve.videos.forEach(je=>window.open(je.youtubeUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Play All"})]}),ve.videos.length>0?o.jsx("div",{className:"space-y-2",children:ve.videos.map(je=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{const mt=je.youtubeUrl||je.url;mt&&mt!==""&&mt!=="#"?window.open(mt,"_blank"):alert("No URL available for this video. Click the edit button to add a URL.")},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"relative",children:[je.thumbnailUrl&&o.jsx("img",{src:je.thumbnailUrl,alt:je.title,className:"w-16 h-12 object-cover rounded"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(ni,{className:"h-6 w-6 text-white"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:je.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(hp,{className:"h-3 w-3"}),je.duration]})]})]})}),o.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:mt=>{mt.stopPropagation(),Fe(je)},title:"Edit Video",children:o.jsx(ts,{className:"h-4 w-4"})})]},je.id))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No videos yet"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx(Cs,{className:"h-4 w-4 text-blue-600"}),"Files (",ve.files.length,")"]}),ve.files.length>0&&o.jsx(J,{variant:"ghost",size:"sm",onClick:()=>{ve.files.forEach(je=>window.open(je.fileUrl,"_blank"))},className:"h-6 px-2 text-xs",children:"Download All"})]}),ve.files.length>0?o.jsx("div",{className:"space-y-2",children:ve.files.map(je=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{console.log("ðŸ” File clicked:",je),console.log("ðŸ”— File URL:",je.fileUrl),console.log("ðŸ”— Fallback URL:",je.url);const mt=je.fileUrl||je.url;console.log("ðŸš€ Opening URL:",mt),mt&&mt!==""&&mt!=="#"?window.open(mt,"_blank"):(console.error("âŒ No valid URL found"),alert(`No URL available for this file.
fileUrl: ${je.fileUrl}
url: ${je.url}`))},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"relative",children:[je.imageUrl||je.thumbnailUrl?o.jsx("img",{src:je.imageUrl||je.thumbnailUrl,alt:je.title,className:"w-16 h-12 object-cover rounded"}):o.jsx("div",{className:"w-16 h-12 bg-blue-100 rounded flex items-center justify-center",children:o.jsx(Cs,{className:"h-6 w-6 text-blue-600"})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Cs,{className:"h-4 w-4 text-white"})})]}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:je.title})})]})}),o.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:mt=>{mt.stopPropagation(),st(je)},title:"Edit File",children:o.jsx(ts,{className:"h-4 w-4"})})]},je.id))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files yet"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx($i,{className:"h-4 w-4 text-purple-600"}),"Quizzes (",ve.quizzes.length,")"]}),ve.quizzes.length>0&&o.jsx(J,{variant:"ghost",size:"sm",onClick:()=>{alert(`Starting all ${ve.quizzes.length} quizzes for: ${ve.title}`)},className:"h-6 px-2 text-xs",children:"Start All"})]}),ve.quizzes.length>0?o.jsx("div",{className:"space-y-2",children:ve.quizzes.map(je=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{alert(`Starting quiz: ${je.title}
Time limit: ${je.timeLimit} minutes
Passing score: ${je.passingScore}%`)},className:"flex-1 p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors text-left group",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx($i,{className:"h-4 w-4 text-purple-600 mt-1 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-sm line-clamp-1 group-hover:text-primary transition-colors",children:je.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(hp,{className:"h-3 w-3"}),je.timeLimit,"min",o.jsx("span",{children:"â€¢"}),o.jsxs("span",{children:[je.passingScore,"% pass"]})]})]})]})}),o.jsx(J,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:mt=>{mt.stopPropagation(),it(je)},title:"Edit Quiz",children:o.jsx(ts,{className:"h-4 w-4"})})]},je.id))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No quizzes yet"})]})]})})]},ve.id))}),!M&&!le&&Ce.length===0&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Ns,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No lectures found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"No lectures match your search criteria.":"Start by creating your first lecture with videos, files, and quizzes."}),o.jsxs(J,{onClick:Se,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Create Lecture"]})]})}),!M&&!le&&!t&&o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsx(Z7,{currentPage:O,totalPages:L,totalCount:D,pageSize:c,hasNextPage:I,isLoading:M,isFetchingNextPage:R,cachedPages:$e,onPageChange:Ie,onPageSizeChange:we,onLoadNext:K})})})]}))}function eq({professor:t,onClose:e,onSave:n}){const[r,s]=E.useState({name:"",title:"",department:"",email:"",others:"",officeLocation:"",researchAreas:"",imageUrl:""}),[a,c]=E.useState(!1);E.useEffect(()=>{t&&s({name:t.name||"",title:t.title||"",department:t.department||"",email:t.email||"",others:t.others||"",officeLocation:t.officeLocation||"",researchAreas:(t.researchAreas||[]).join(", "),imageUrl:t.imageUrl||""})},[t]);const u=async h=>{h.preventDefault(),c(!0);try{const f={...r,researchAreas:r.researchAreas?r.researchAreas.split(",").map(g=>g.trim()).filter(Boolean):[]};n(f)}catch(f){console.error("Error saving professor:",f)}finally{c(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(J,{variant:"ghost",onClick:e,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Professor":"Add Professor"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update professor information":"Add a new professor to the faculty"})]})]})}),o.jsxs("form",{onSubmit:u,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[o.jsx(ns,{className:"h-5 w-5"}),"Professor Information"]}),o.jsx(St,{children:"Basic information about the professor"})]}),o.jsxs(me,{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs(Yc,{className:"w-20 h-20",children:[o.jsx(Ud,{src:r.imageUrl,alt:r.name}),o.jsx(Xc,{children:o.jsx(ns,{className:"w-8 h-8"})})]}),o.jsxs("div",{className:"space-y-2 flex-1",children:[o.jsx(Te,{htmlFor:"imageUrl",children:"Profile Image URL"}),o.jsx(Ne,{id:"imageUrl",placeholder:"https://example.com/profile.jpg",value:r.imageUrl,onChange:h=>s(f=>({...f,imageUrl:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"name",children:"Full Name *"}),o.jsx(Ne,{id:"name",placeholder:"Dr. John Smith",value:r.name,onChange:h=>s(f=>({...f,name:h.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"title",children:"Title"}),o.jsx(Ne,{id:"title",placeholder:"e.g., Associate Professor",value:r.title,onChange:h=>s(f=>({...f,title:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Te,{htmlFor:"department",className:"flex items-center gap-2",children:[o.jsx(z2,{className:"h-4 w-4"}),"Department"]}),o.jsx(Ne,{id:"department",placeholder:"Internal Medicine",value:r.department,onChange:h=>s(f=>({...f,department:h.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"others",children:"Others"}),o.jsx(Ne,{id:"others",placeholder:"Other contact or notes",value:r.others,onChange:h=>s(f=>({...f,others:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Te,{htmlFor:"email",className:"flex items-center gap-2",children:[o.jsx(fp,{className:"h-4 w-4"}),"Email Address"]}),o.jsx(Ne,{id:"email",type:"email",placeholder:"john.smith@university.edu",value:r.email,onChange:h=>s(f=>({...f,email:h.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(Te,{htmlFor:"officeLocation",className:"flex items-center gap-2",children:[o.jsx(wd,{className:"h-4 w-4"}),"Office Location"]}),o.jsx(Ne,{id:"officeLocation",placeholder:"Medical Building, Room 301",value:r.officeLocation,onChange:h=>s(f=>({...f,officeLocation:h.target.value}))})]})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"researchAreas",children:"Research Areas"}),o.jsx(Ne,{id:"researchAreas",placeholder:"e.g., Cardiology, Epidemiology",value:r.researchAreas,onChange:h=>s(f=>({...f,researchAreas:h.target.value}))})]}),o.jsx("div",{className:"space-y-2",children:o.jsx("div",{})})]})]})]}),r.name&&o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Preview"}),o.jsx(St,{children:"How the professor will appear in the system"})]}),o.jsx(me,{children:o.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[o.jsxs(Yc,{className:"h-12 w-12",children:[o.jsx(Ud,{src:r.imageUrl,alt:r.name}),o.jsx(Xc,{children:o.jsx(ns,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold",children:r.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r.department}),o.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm text-muted-foreground",children:[r.email&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fp,{className:"h-3 w-3"}),o.jsx("span",{children:r.email})]}),r.officeLocation&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wd,{className:"h-3 w-3"}),o.jsx("span",{children:r.officeLocation})]}),r.others&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ns,{className:"h-3 w-3"}),o.jsx("span",{children:r.others})]})]})]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(J,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsxs(J,{type:"submit",disabled:a,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),a?"Saving...":t?"Update Professor":"Add Professor"]})]})]})]})}function tq(){const[t,e]=E.useState(""),[n,r]=E.useState(null),[s,a]=E.useState(!1),{professors:c,loading:u,error:h,createProfessor:f,updateProfessor:g,deleteProfessor:y,isOfflineMode:v}=fA(),w=c.filter(x=>x.name.toLowerCase().includes(t.toLowerCase())||x.department.toLowerCase().includes(t.toLowerCase())||x.email.toLowerCase().includes(t.toLowerCase())),N=async x=>{if(window.confirm("Are you sure you want to delete this professor?"))try{await y(x)}catch(_){console.error("Error deleting professor:",_),alert("Failed to delete professor. Please try again.")}};return s?o.jsx(eq,{professor:n,onClose:()=>{a(!1),r(null)},onSave:async x=>{try{n?await g(n.id,x):await f(x),a(!1),r(null)}catch(_){console.error("Error saving professor:",_),alert("Failed to save professor. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Professors Management"}),o.jsxs("p",{className:"text-muted-foreground",children:["Manage faculty information and profiles",v&&o.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:"â€¢ Working in offline mode"})]})]}),o.jsxs(J,{onClick:()=>a(!0),children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]}),o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search professors by name, department, or email...",value:t,onChange:x=>e(x.target.value),className:"pl-10"})]})})}),u&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Qi,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading professors..."})]})}),h&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading professors"}),o.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&o.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:w.map(x=>o.jsxs(pe,{className:"hover:shadow-md transition-shadow",children:[o.jsx(Be,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(Yc,{className:"h-12 w-12",children:[o.jsx(Ud,{src:x.imageUrl,alt:x.name}),o.jsx(Xc,{children:o.jsx(ns,{className:"h-6 w-6"})})]}),o.jsxs("div",{children:[o.jsx(Ke,{className:"text-lg",children:x.name}),o.jsx(Pt,{variant:"secondary",className:"text-xs",children:x.department})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>{r(x),a(!0)},children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>N(x.id),className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})}),o.jsx(me,{children:o.jsxs("div",{className:"space-y-3 text-sm",children:[o.jsxs("div",{className:"",children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:x.title}),o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[o.jsx(fp,{className:"h-4 w-4"}),o.jsx("span",{children:x.email})]})]}),x.phone&&o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(ns,{className:"h-4 w-4"}),o.jsx("span",{children:x.phone})]}),x.officeLocation&&o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(wd,{className:"h-4 w-4"}),o.jsx("span",{children:x.officeLocation})]}),x.bio&&o.jsx("div",{className:"text-sm text-muted-foreground line-clamp-3",children:x.bio}),x.researchAreas&&x.researchAreas.length>0&&o.jsx("div",{className:"flex gap-2 flex-wrap",children:x.researchAreas.map(_=>o.jsx(Pt,{children:_},_))}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.website&&o.jsx("a",{href:x.website,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Website"}),x.linkedin&&o.jsx("a",{href:x.linkedin,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline",children:"LinkedIn"})]})]})})]},x.id))}),!u&&!h&&w.length===0&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Vc,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No professors found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"No professors match your search criteria.":"Start by adding your first professor."}),o.jsxs(J,{onClick:()=>a(!0),children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Professor"]})]})})]})}function nq(){const{users:t,loading:e,error:n,updateUser:r,deleteUser:s}=Fm(),a=async u=>{const h=u.role==="admin"?"user":"admin";await r(u.id,{role:h})},c=(u,h)=>{if(!u)return"-";const f=u.match(/(19|20)\d{2}/);if(f)return f[0];if(h)try{const g=new Date(h);if(!isNaN(g.getTime()))return String(g.getFullYear())}catch{}return"-"};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(aO,{className:"h-6 w-6 text-blue-600"}),o.jsx("h1",{className:"text-3xl font-bold",children:"Users"})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["All Users (",t.length,")"]})}),o.jsx(me,{children:e?o.jsx("div",{children:"Loading..."}):n?o.jsx("div",{className:"text-destructive",children:n}):t.length===0?o.jsx("div",{className:"text-muted-foreground",children:"No users found."}):(()=>{const u={};t.forEach(f=>{const g=f.yearLabel&&String(f.yearLabel).trim()!==""?String(f.yearLabel):"Unassigned";u[g]||(u[g]=[]),u[g].push(f)});const h=Object.keys(u).sort((f,g)=>{const y=f.match(/Year\s*(\d+)/i),v=g.match(/Year\s*(\d+)/i);return y&&v?parseInt(y[1],10)-parseInt(v[1],10):y?-1:v||f==="Unassigned"?1:g==="Unassigned"?-1:f.localeCompare(g)});return o.jsx("div",{className:"space-y-6",children:h.map(f=>o.jsxs("div",{children:[o.jsx("div",{className:"flex items-center justify-between mb-2",children:o.jsxs("h3",{className:"text-lg font-semibold",children:[f," ",o.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",u[f].length,")"]})]})}),o.jsx("div",{className:"space-y-2",children:u[f].map(g=>{var y;return o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[o.jsx(Yc,{className:"h-12 w-12",children:g.photoURL?o.jsx(Ud,{src:g.photoURL,alt:g.displayName}):o.jsx(Xc,{children:((y=g.displayName)==null?void 0:y[0])||"U"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:g.displayName}),o.jsx("div",{className:"text-xs text-muted-foreground truncate",children:g.email}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",g.createdAt?new Date(g.createdAt).toLocaleString():"-",o.jsxs("span",{className:"ml-3",children:["Year: ",g.yearLabel||c(g.id,g.createdAt)]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pt,{children:g.role||"user"}),o.jsx(J,{size:"sm",variant:"outline",onClick:()=>a(g),children:g.role==="admin"?"Demote":"Make Admin"}),o.jsx(J,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>s(g.id),children:o.jsx(En,{className:"h-4 w-4"})})]})]},g.id)})})]},f))})})()})]})]})}function rq(t){if(!t)return 0;if(typeof t=="number")return t;const e=String(t).trim();if(/^\d+$/.test(e))return parseInt(e,10);const n=e.split(":").map(r=>parseInt(r,10));return n.length===3?n[0]*3600+(n[1]||0)*60+(n[2]||0):n.length===2?(n[0]||0)*60+(n[1]||0):0}function sq(t){if(!t||t<=0)return"0:00";const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60;return e>0?`${e}:${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${n}:${String(r).padStart(2,"0")}`}function iq(){var L;const{id:t}=GT(),e=su(),{years:n,subjects:r,loading:s,createLecture:a,deleteLecture:c,deleteSubject:u,addVideo:h,addFile:f,addQuiz:g}=El(),[y,v]=E.useState(null),[w,N]=E.useState(!1),[x,_]=E.useState(!1),[P,j]=E.useState(!1),[C,F]=E.useState(!1),U=r.find(D=>D.id===t),z=D=>{v(D||null),N(!0)},k=D=>{v(D||null),_(!0)},O=D=>{v(D||null),j(!0)};return w&&y?o.jsx(x0,{lectureId:y,onClose:()=>{N(!1),v(null)},onSave:async D=>{U!=null&&U.id&&y&&await h(U.id,y,D),N(!1),v(null)}}):x&&y?o.jsx(v0,{lectureId:y,onClose:()=>{_(!1),v(null)},onSave:async D=>{U!=null&&U.id&&y&&await f(U.id,y,D),_(!1),v(null)}}):P&&y?o.jsx(y0,{lectureId:y,onClose:()=>{j(!1),v(null)},onSave:async D=>{U!=null&&U.id&&y&&await g(U.id,y,D),j(!1),v(null)}}):C?o.jsx(Vm,{subjectId:(U==null?void 0:U.id)||null,subjectName:U==null?void 0:U.name,yearType:(L=n.find(D=>D.id===(U==null?void 0:U.yearId)))==null?void 0:L.type,onClose:()=>F(!1),onSave:async D=>{U!=null&&U.id&&await a(D),F(!1)}}):s?o.jsx("div",{children:"Loading..."}):U?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:U.name}),o.jsx("p",{className:"text-muted-foreground",children:"Subject details and lectures"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(J,{variant:"outline",size:"sm",onClick:()=>F(!0),className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Add Lecture"]}),o.jsx(J,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(U&&confirm(`Delete subject "${U.name}"? This will remove all lectures.`))try{await u(U.id),e("/admin/years")}catch(D){console.error(D),alert("Failed to delete subject")}},children:o.jsx(En,{className:"h-4 w-4"})}),o.jsx(Zn,{to:"/admin/years",children:o.jsx(J,{variant:"ghost",children:"Back"})})]})]}),o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Lectures"}),o.jsx(St,{children:"All lectures for this subject"})]}),o.jsx(me,{children:o.jsx("div",{className:"grid gap-4",children:U.lectures&&U.lectures.length>0?U.lectures.map(D=>{var M,R;const I=D.imageUrl||D.videos&&D.videos[0]&&D.videos[0].thumbnailUrl||"";return o.jsxs("div",{className:"p-3 border rounded-md flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[I?o.jsx("img",{src:I,alt:D.name,width:1280,height:720,style:{width:160,height:90,objectFit:"cover"},className:"rounded"}):o.jsx("div",{className:"w-40 h-24 bg-muted rounded flex items-center justify-center text-xs",children:"No image"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:D.name}),o.jsx("div",{className:"text-sm text-muted-foreground",children:D.description})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>z(D.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Video",children:[o.jsx(ni,{className:"h-3 w-3 text-blue-600"}),o.jsx("span",{children:"Add Video"})]}),o.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>k(D.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add File",children:[o.jsx(Cs,{className:"h-3 w-3 text-green-600"}),o.jsx("span",{children:"Add File"})]}),o.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>O(D.id),className:"flex items-center gap-1 px-2 py-1 text-xs",title:"Add Quiz",children:[o.jsx($i,{className:"h-3 w-3 text-purple-600"}),o.jsx("span",{children:"Add Quiz"})]}),o.jsx(J,{variant:"ghost",size:"icon",className:"text-destructive",onClick:async()=>{if(U&&confirm(`Delete lecture "${D.name}"?`))try{await c(U.id,D.id)}catch(W){console.error(W),alert("Failed to delete lecture")}},children:o.jsx(En,{className:"h-3 w-3"})}),o.jsxs("div",{className:"flex items-center gap-2",children:[D.videos&&D.videos.length>0?(()=>{const W=(D.videos||[]).reduce((K,X)=>K+rq(X.duration||X.time||X.durationSeconds||X.length),0);return o.jsxs("button",{onClick:()=>e(`/admin/videos?lecture=${D.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:[o.jsx(ni,{className:"h-4 w-4"}),o.jsxs("span",{children:["(",D.videos.length,")"]}),o.jsx("span",{className:"text-muted-foreground",children:sq(W)})]})})():o.jsx("button",{onClick:()=>e(`/admin/videos?lecture=${D.id}`),className:"text-xs text-blue-600 flex items-center gap-1 px-2",title:"Videos",children:o.jsx(ni,{className:"h-4 w-4"})}),o.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${D.id}&tab=files`),className:"text-xs text-green-600 flex items-center gap-1 px-2",title:"Files",children:[o.jsx(Cs,{className:"h-4 w-4"}),o.jsxs("span",{children:["(",((M=D.files)==null?void 0:M.length)||0,")"]})]}),o.jsxs("button",{onClick:()=>e(`/admin/resources?lecture=${D.id}&tab=quizzes`),className:"text-xs text-purple-600 flex items-center gap-1 px-2",title:"Quizzes",children:[o.jsx($i,{className:"h-4 w-4"}),o.jsxs("span",{children:["(",((R=D.quizzes)==null?void 0:R.length)||0,")"]})]})]})]})]},D.id)}):o.jsx("div",{className:"text-muted-foreground",children:"No lectures yet for this subject."})})})]})]}):o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Subject not found"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"The subject you requested does not exist."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(J,{children:"Back to Years"})})})]})})}var av="rovingFocusGroup.onEntryFocus",oq={bubbles:!1,cancelable:!0},Hm="RovingFocusGroup",[Cx,rk,aq]=Ix(Hm),[lq,sk]=Gi(Hm,[aq]),[cq,uq]=lq(Hm),ik=E.forwardRef((t,e)=>o.jsx(Cx.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Cx.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(dq,{...t,ref:e})})}));ik.displayName=Hm;var dq=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:f,preventScrollOnEntryFocus:g=!1,...y}=t,v=E.useRef(null),w=jt(e,v),N=w0(a),[x=null,_]=Za({prop:c,defaultProp:u,onChange:h}),[P,j]=E.useState(!1),C=jn(f),F=rk(n),U=E.useRef(!1),[z,k]=E.useState(0);return E.useEffect(()=>{const O=v.current;if(O)return O.addEventListener(av,C),()=>O.removeEventListener(av,C)},[C]),o.jsx(cq,{scope:n,orientation:r,dir:N,loop:s,currentTabStopId:x,onItemFocus:E.useCallback(O=>_(O),[_]),onItemShiftTab:E.useCallback(()=>j(!0),[]),onFocusableItemAdd:E.useCallback(()=>k(O=>O+1),[]),onFocusableItemRemove:E.useCallback(()=>k(O=>O-1),[]),children:o.jsx(Je.div,{tabIndex:P||z===0?-1:0,"data-orientation":r,...y,ref:w,style:{outline:"none",...t.style},onMouseDown:qe(t.onMouseDown,()=>{U.current=!0}),onFocus:qe(t.onFocus,O=>{const L=!U.current;if(O.target===O.currentTarget&&L&&!P){const D=new CustomEvent(av,oq);if(O.currentTarget.dispatchEvent(D),!D.defaultPrevented){const I=F().filter(X=>X.focusable),M=I.find(X=>X.active),R=I.find(X=>X.id===x),K=[M,R,...I].filter(Boolean).map(X=>X.ref.current);lk(K,g)}}U.current=!1}),onBlur:qe(t.onBlur,()=>j(!1))})})}),ok="RovingFocusGroupItem",ak=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,...c}=t,u=Ho(),h=a||u,f=uq(ok,n),g=f.currentTabStopId===h,y=rk(n),{onFocusableItemAdd:v,onFocusableItemRemove:w}=f;return E.useEffect(()=>{if(r)return v(),()=>w()},[r,v,w]),o.jsx(Cx.ItemSlot,{scope:n,id:h,focusable:r,active:s,children:o.jsx(Je.span,{tabIndex:g?0:-1,"data-orientation":f.orientation,...c,ref:e,onMouseDown:qe(t.onMouseDown,N=>{r?f.onItemFocus(h):N.preventDefault()}),onFocus:qe(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:qe(t.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){f.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const x=pq(N,f.orientation,f.dir);if(x!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let P=y().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")P.reverse();else if(x==="prev"||x==="next"){x==="prev"&&P.reverse();const j=P.indexOf(N.currentTarget);P=f.loop?mq(P,j+1):P.slice(j+1)}setTimeout(()=>lk(P))}})})})});ak.displayName=ok;var hq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function pq(t,e,n){const r=fq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return hq[r]}function lk(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function mq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var gq=ik,yq=ak,E0="Tabs",[vq,hW]=Gi(E0,[sk]),ck=sk(),[xq,b0]=vq(E0),uk=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:c="horizontal",dir:u,activationMode:h="automatic",...f}=t,g=w0(u),[y,v]=Za({prop:r,onChange:s,defaultProp:a});return o.jsx(xq,{scope:n,baseId:Ho(),value:y,onValueChange:v,orientation:c,dir:g,activationMode:h,children:o.jsx(Je.div,{dir:g,"data-orientation":c,...f,ref:e})})});uk.displayName=E0;var dk="TabsList",hk=E.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=b0(dk,n),c=ck(n);return o.jsx(gq,{asChild:!0,...c,orientation:a.orientation,dir:a.dir,loop:r,children:o.jsx(Je.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});hk.displayName=dk;var fk="TabsTrigger",pk=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,c=b0(fk,n),u=ck(n),h=yk(c.baseId,r),f=vk(c.baseId,r),g=r===c.value;return o.jsx(yq,{asChild:!0,...u,focusable:!s,active:g,children:o.jsx(Je.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":f,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:h,...a,ref:e,onMouseDown:qe(t.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?c.onValueChange(r):y.preventDefault()}),onKeyDown:qe(t.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&c.onValueChange(r)}),onFocus:qe(t.onFocus,()=>{const y=c.activationMode!=="manual";!g&&!s&&y&&c.onValueChange(r)})})})});pk.displayName=fk;var mk="TabsContent",gk=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...c}=t,u=b0(mk,n),h=yk(u.baseId,r),f=vk(u.baseId,r),g=r===u.value,y=E.useRef(g);return E.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),o.jsx(Px,{present:s||g,children:({present:v})=>o.jsx(Je.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!v,id:f,tabIndex:0,...c,ref:e,style:{...t.style,animationDuration:y.current?"0s":void 0},children:v&&a})})});gk.displayName=mk;function yk(t,e){return`${t}-trigger-${e}`}function vk(t,e){return`${t}-content-${e}`}var wq=uk,xk=hk,wk=pk,_k=gk;const Ek=wq,N0=E.forwardRef(({className:t,...e},n)=>o.jsx(xk,{ref:n,className:Ge("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));N0.displayName=xk.displayName;const Sc=E.forwardRef(({className:t,...e},n)=>o.jsx(wk,{ref:n,className:Ge("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Sc.displayName=wk.displayName;const Tc=E.forwardRef(({className:t,...e},n)=>o.jsx(_k,{ref:n,className:Ge("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Tc.displayName=_k.displayName;function _q({product:t,onClose:e,onSave:n}){const[r,s]=E.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",price:(t==null?void 0:t.price)||0,types:(t==null?void 0:t.types)||(t!=null&&t.price?[{name:"Default",price:t.price}]:[]),images:(t==null?void 0:t.images)||[""],categoryId:(t==null?void 0:t.categoryId)||""}),[a,c]=E.useState(!1),[u,h]=E.useState(null),f=async w=>{w.preventDefault(),c(!0);try{const N={...r,images:r.images.filter(x=>x.trim()!=="")};N.types&&N.types.length>0?(N.types=N.types.map(x=>({name:String(x.name||"").trim(),price:parseFloat(x.price)||0})),N.price=N.types[0].price||0):N.types=[],n(N)}catch(N){console.error("Error saving product:",N)}finally{c(!1)}},g=()=>{s(w=>({...w,images:[...w.images,""]}))},y=(w,N)=>{s(x=>({...x,images:x.images.map((_,P)=>P===w?N:_)}))},v=w=>{s(N=>({...N,images:N.images.filter((x,_)=>_!==w)}))};return o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(J,{variant:"ghost",onClick:e,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Product":"Add Product"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update product details":"Create a new product"})]})]})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsxs(Ke,{className:"flex items-center gap-2",children:[o.jsx(pv,{className:"h-5 w-5 text-blue-600"}),"Product Information"]}),o.jsx(St,{children:"Basic information about the product"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"name",children:"Product Name *"}),o.jsx(Ne,{id:"name",placeholder:"e.g., Medical Textbook",value:r.name,onChange:w=>s(N=>({...N,name:w.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{children:"Types & Prices"}),o.jsxs("div",{className:"space-y-2",children:[r.types&&r.types.length>0?r.types.map((w,N)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ne,{placeholder:"Type name (e.g., Pen)",value:w.name,onChange:x=>s(_=>({..._,types:_.types.map((P,j)=>j===N?{...P,name:x.target.value}:P)})),required:!0}),o.jsx(Ne,{type:"number",step:"0.01",placeholder:"0.00",value:w.price,onChange:x=>s(_=>({..._,types:_.types.map((P,j)=>j===N?{...P,price:parseFloat(x.target.value)||0}:P)})),required:!0,className:"w-32"}),o.jsx(J,{type:"button",variant:"ghost",onClick:()=>s(x=>({...x,types:x.types.filter((_,P)=>P!==N)})),children:"Remove"})]},N)):o.jsx("div",{className:"text-muted-foreground",children:"No types defined."}),o.jsx("div",{children:o.jsxs(J,{type:"button",variant:"outline",onClick:()=>s(w=>({...w,types:[...w.types||[],{name:"Default",price:0}]})),children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"})," Add Type"]})})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"description",children:"Description"}),o.jsx(js,{id:"description",placeholder:"Describe the product...",value:r.description,onChange:w=>s(N=>({...N,description:w.target.value})),rows:4})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"categoryId",children:"Category ID (Optional)"}),o.jsx(Ne,{id:"categoryId",placeholder:"e.g., books, equipment",value:r.categoryId,onChange:w=>s(N=>({...N,categoryId:w.target.value}))})]})]})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Ke,{children:"Product Images"}),o.jsx(St,{children:"Add image URLs for the product"})]}),o.jsxs(J,{type:"button",variant:"outline",onClick:g,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Image"]})]})}),o.jsx(me,{className:"space-y-4",children:r.images.map((w,N)=>o.jsxs("div",{className:`flex gap-2 items-center ${u===N?"border-2 border-dashed p-2 rounded":""}`,onDragOver:x=>{x.preventDefault(),h(N)},onDragEnter:x=>{x.preventDefault(),h(N)},onDragLeave:()=>{h(null)},onDrop:async x=>{x.preventDefault(),h(null);try{const _=x.dataTransfer;if(!_)return;if(_.files&&_.files.length>0){const j=_.files[0];try{let C=null;try{C=await Tr(j)}catch(F){console.warn("Cloudinary upload failed, trying ImageKit fallback",(F==null?void 0:F.message)||F),C=await Zo(j,j.name)}C&&typeof C=="string"&&C.startsWith("http")?y(N,C):alert("Upload failed: unexpected response from upload provider")}catch(C){console.error("Drop upload error:",C);const U=((C==null?void 0:C.message)||String(C)||"").toLowerCase();if(U.includes("cloudinary signing did not return an api key")||U.includes("missing required parameter - api_key")||U.includes("missing required parameter 'api_key'")){const z=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(z&&z.trim())try{Xa(null,null,z.trim());const k=await Tr(j);if(k&&typeof k=="string"&&k.startsWith("http")){y(N,k);return}}catch(k){console.error("Retry after API key failed:",k)}}alert("Upload failed: "+((C==null?void 0:C.message)||C))}return}const P=_.getData("text/uri-list")||_.getData("text/plain");if(P&&P.startsWith("http")){if(!window.confirm(`Upload the dragged URL to Cloudinary and replace it?
`+P))return;const C=await R1(P);C&&typeof C=="string"&&C.startsWith("http")?y(N,C):alert("Upload failed: unexpected response from server")}}catch(_){console.error("Drop upload error:",_),alert("Image upload failed: "+((_==null?void 0:_.message)||_))}},children:[o.jsx(Ne,{placeholder:"https://example.com/image.jpg",value:w,onChange:x=>y(N,x.target.value)}),o.jsx(J,{type:"button",variant:"ghost",size:"icon",onClick:async()=>{var x;try{const _=(x=r.images[N])==null?void 0:x.trim();if(_&&(_.startsWith("http://")||_.startsWith("https://"))){try{if(!window.confirm(`Upload the current URL to Cloudinary/ImageKit and replace it?
`+_))return;try{const C=await R1(_);if(C&&typeof C=="string"&&C.startsWith("http")){y(N,C);return}}catch(C){console.warn("uploadUrlToServer failed, will try ImageKit:",(C==null?void 0:C.message)||C)}try{const C=await Zo(_);if(C&&typeof C=="string"&&C.startsWith("http")){y(N,C);return}else alert("Upload failed: unexpected response from ImageKit")}catch(C){console.error("ImageKit URL upload error:",C),alert("URL upload failed: "+((C==null?void 0:C.message)||C))}}catch(j){console.error("URL upload error:",j),alert("URL upload failed: "+((j==null?void 0:j.message)||j))}return}const P=document.createElement("input");P.type="file",P.accept="image/*",P.onchange=async()=>{var C;const j=(C=P.files)==null?void 0:C[0];if(j)try{let F=null;try{F=await Tr(j)}catch(U){console.warn("Cloudinary upload failed, trying ImageKit fallback",(U==null?void 0:U.message)||U);try{F=await Zo(j,j.name)}catch(z){throw console.error("ImageKit upload failed:",z),U}}if(!F||typeof F!="string"||!F.startsWith("http")){alert("Upload failed: unexpected response from upload provider");return}y(N,F)}catch(F){const U=(F==null?void 0:F.message)||String(F);console.error("Upload error:",F);const z=(U||"").toLowerCase();if(z.includes("cloudinary cloud name is not configured")){const k=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!k){alert("No cloud name provided.");return}const O=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),L=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");Xa(k,O||null,L||null);try{const D=await Tr(j);if(!D||typeof D!="string"||!D.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(N,D)}catch(D){console.error("Retry upload error:",D),alert("Upload failed after configuring Cloudinary: "+(D.message||D))}}else if(z.includes("cloudinary signing did not return an api key")||z.includes("missing required parameter - api_key")||z.includes("missing required parameter 'api_key'")){const k=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(k&&k.trim())try{Xa(null,null,k.trim());const O=await Tr(j);if(!O||typeof O!="string"||!O.startsWith("http")){alert("Upload failed: unexpected response from Cloudinary");return}y(N,O);return}catch(O){console.error("Retry upload error:",O),alert("Upload failed after setting API key: "+(O.message||O));return}}else alert("Image upload failed: "+(F.message||F))}},P.click()}catch(_){console.error(_),alert("Could not open file dialog")}},children:o.jsx(fv,{className:"h-4 w-4"})}),r.images.length>1&&o.jsx(J,{type:"button",variant:"outline",size:"icon",onClick:()=>v(N),children:o.jsx(Uc,{className:"h-4 w-4"})})]},N))})]}),r.name&&o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Preview"}),o.jsx(St,{children:"How the product will appear"})]}),o.jsx(me,{children:o.jsx("div",{className:"p-4 border rounded-lg",children:o.jsxs("div",{className:"flex items-start gap-4",children:[r.images[0]&&r.images[0].trim()&&(()=>{const w=UO(r.images[0]);return o.jsx("img",{src:w||void 0,alt:r.name,className:"w-20 h-20 object-cover rounded",onError:N=>{N.currentTarget.style.display="none",console.warn("Product preview image failed to load:",w||r.images[0])}})})(),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:r.name}),o.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["$",r.price.toFixed(2)]}),r.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.description}),r.categoryId&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Category: ",r.categoryId]})]})]})})})]}),o.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[o.jsx(J,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsxs(J,{type:"submit",disabled:a,children:[o.jsx(Yi,{className:"h-4 w-4 mr-2"}),a?"Saving...":t?"Update Product":"Add Product"]})]})]})]})}function bk(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const f=pn(Qe(Ae,"orders"),_l("orderDate","desc")),g=eo(f,async y=>{try{const v=await _t(Qe(Ae,"products")),w={};v.forEach(x=>{const _=x.data();w[x.id]={id:x.id,name:_.name||_.title||"",price:_.price||0}});const N=[];y.forEach(x=>{var z,k;const _=x.data();let P=[];_.items&&Array.isArray(_.items)&&_.items.length>0?P=_.items:_.productsIds&&Array.isArray(_.productsIds)&&(P=_.productsIds.map(O=>{var L,D;return{productId:O,name:((L=w[O])==null?void 0:L.name)||O,quantity:1,price:((D=w[O])==null?void 0:D.price)||0}}));const j=_.total||_.totalAmount||_.totalPrice||0,C=_.address||_.shippingaddress||_.shippingAddress||"",F=_.userPhone||_.user_phone||_.phone||"";let U=new Date;_.createdAt&&typeof _.createdAt.toDate=="function"?U=_.createdAt.toDate():_.orderDate&&typeof _.orderDate.toDate=="function"?U=_.orderDate.toDate():_.orderDate&&(U=new Date(_.orderDate)),N.push({id:x.id,userId:_.userId||_.user_id||"",username:_.username||_.userName||_.user_name||_.customerName||"",userName:_.userName||_.user_name||_.customerName||"",userEmail:_.userEmail||_.email||"",userPhone:F,address:C,items:P,total:j,iscompleted:_.iscompleted===!0||_.isCompleted===!0||!1,status:_.status||(_.iscompleted===!0?"completed":"pending"),createdAt:U,updatedAt:(k=(z=_.updatedAt)==null?void 0:z.toDate)==null?void 0:k.call(z)})}),e(N),r(!1)}catch(v){console.error("Error processing orders:",v),a("Failed to load orders"),r(!1)}},y=>{console.error("Failed to load orders:",y),a("Failed to load orders"),r(!1)});return()=>g()},[]),{orders:t,loading:n,error:s,createOrder:async f=>{try{await xn(Qe(Ae,"orders"),{...f,createdAt:new Date})}catch(g){console.error("Error creating order:",g)}},updateOrder:async(f,g)=>{try{const y={...g,updatedAt:new Date};(g.status==="completed"||g.isCompleted)&&(y.isCompleted=!0,y.iscompleted=!0,y.completedAt=new Date,y.status="completed"),await rn(At(Ae,"orders",f),y)}catch(y){console.error("Error updating order:",y)}},deleteOrder:async f=>{try{await Sr(At(Ae,"orders",f))}catch(g){console.error("Error deleting order:",g)}}}}function Eq(){const[t,e]=E.useState(""),[n,r]=E.useState(!1),[s,a]=E.useState(null),{products:c,loading:u,error:h,isOfflineMode:f,createProduct:g,updateProduct:y,deleteProduct:v,retryConnection:w}=hA(),{createOrder:N}=bk(),x=()=>{a(null),r(!0)},_=C=>{a(C),r(!0)},P=async(C,F)=>{confirm(`Are you sure you want to delete "${F}"?`)&&await v(C)};if(n)return o.jsx(_q,{product:s,onClose:()=>{r(!1),a(null)},onSave:async C=>{try{s?await y(s.id,C):await g(C),r(!1),a(null)}catch(F){console.error("Error saving product:",F),alert("Failed to save product. Please try again.")}}});const j=c.filter(C=>C.name.toLowerCase().includes(t.toLowerCase())||C.description.toLowerCase().includes(t.toLowerCase()));return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex justify-between items-center",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Store Management"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"text-muted-foreground",children:"Manage store products and categories"}),f&&o.jsxs("span",{className:"flex items-center gap-1 text-orange-600 font-medium text-sm",children:[o.jsx("div",{className:"h-2 w-2 bg-orange-600 rounded-full"}),"Offline Mode"]})]})]})}),u&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Qi,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading products..."})]})}),h&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading products"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:h}),o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx(J,{onClick:w,variant:"outline",children:"Retry Connection"}),o.jsx(J,{onClick:()=>window.location.replace(window.location.href),variant:"ghost",children:"Refresh Page"})]})]})}),!u&&!h&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsxs(pe,{children:[o.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ke,{className:"text-sm font-medium",children:"Total Products"}),o.jsx(pv,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(me,{children:o.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),o.jsxs(pe,{children:[o.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ke,{className:"text-sm font-medium",children:"Average Price"}),o.jsx(OS,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(me,{children:o.jsxs("div",{className:"text-2xl font-bold",children:["$",c.length>0?(c.reduce((C,F)=>{const U=F.types&&F.types.length>0?F.types[0].price:F.price||0;return C+U},0)/c.length).toFixed(2):"0.00"]})})]}),o.jsxs(pe,{children:[o.jsxs(Be,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Ke,{className:"text-sm font-medium",children:"Categories"}),o.jsx(cd,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(me,{children:o.jsx("div",{className:"text-2xl font-bold",children:new Set(c.map(C=>C.categoryId).filter(C=>C&&C.trim())).size})})]})]}),o.jsxs(Ek,{defaultValue:"products",className:"space-y-6",children:[o.jsxs(N0,{className:"grid w-full grid-cols-2",children:[o.jsxs(Sc,{value:"products",className:"flex items-center gap-2",children:[o.jsx(Dx,{className:"h-4 w-4"}),"Products (",c.length,")"]}),o.jsxs(Sc,{value:"categories",className:"flex items-center gap-2",children:[o.jsx(cd,{className:"h-4 w-4"}),"Categories"]})]}),o.jsxs(Tc,{value:"products",className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"relative flex-1 max-w-sm",children:[o.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search products...",value:t,onChange:C=>e(C.target.value),className:"pl-10"})]}),o.jsxs(J,{onClick:x,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),j.length===0?o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(pv,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:t?"No products found":"No products yet"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:t?"Try adjusting your search terms":"Add your first product to get started"}),!t&&o.jsxs(J,{onClick:x,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add First Product"]})]})}):o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:j.map(C=>o.jsxs(pe,{className:"overflow-hidden",children:[o.jsxs("div",{className:"aspect-video bg-muted relative",children:[C.images&&C.images[0]?o.jsx("img",{src:C.images[0],alt:C.name,className:"w-full h-full object-cover",onError:F=>{F.currentTarget.style.display="none";const U=F.currentTarget.nextElementSibling;U&&(U.style.display="flex")}}):null,o.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:C.images&&C.images[0]?"none":"flex"},children:o.jsx(fv,{className:"h-12 w-12 text-muted-foreground"})})]}),o.jsxs(Be,{className:"pb-2",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx(Ke,{className:"text-lg line-clamp-1",children:C.name}),C.types&&C.types.length>1&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[C.types.length," options available"]})]}),o.jsx("div",{className:"mt-2",children:C.types&&C.types.length>0?o.jsx("div",{className:"flex gap-2 flex-wrap",children:C.types.map((F,U)=>o.jsxs(Pt,{variant:"secondary",className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium",children:F.name}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["$",F.price.toFixed(2)]})]},U))}):o.jsxs("div",{className:"text-xl font-bold",children:["$",(C.price||0).toFixed(2)]})}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>_(C),className:"h-8 w-8",children:o.jsx(ts,{className:"h-3 w-3"})}),o.jsx(J,{variant:"ghost",size:"icon",onClick:async()=>{try{const F=document.createElement("input");F.type="file",F.accept="image/*",F.onchange=async()=>{var z;const U=(z=F.files)==null?void 0:z[0];if(U)try{let k=null;try{k=await Tr(U)}catch(O){console.warn("Cloudinary upload failed, trying ImageKit fallback",(O==null?void 0:O.message)||O);try{k=await Zo(U,U.name)}catch(L){throw console.error("ImageKit upload failed:",L),O}}if(!k||typeof k!="string"||!k.startsWith("http")){console.error("Invalid upload response:",k),alert("Image upload failed: unexpected response from upload provider");return}await y(C.id,{images:[k]})}catch(k){console.error(k);const L=((k==null?void 0:k.message)||String(k)||"").toLowerCase();if(L.includes("cloudinary cloud name is not configured")){const D=window.prompt("Cloudinary cloud name (e.g. dflp2vxn2):");if(!D){alert("No cloud name provided. Upload cancelled.");return}const I=window.prompt("Unsigned upload preset (leave empty to use signed server flow):",""),M=window.prompt("Public Cloudinary API key (optional, e.g. 686641252611351):","");try{Xa(D,I||null,M||null);const R=await Tr(U);if(console.log("Cloudinary upload result after config:",R),!R||typeof R!="string"||!R.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(C.id,{images:[R]})}catch(R){console.error(R),alert("Image upload failed after configuring Cloudinary: "+(R.message||R))}return}else if(L.includes("cloudinary signing did not return an api key")||L.includes("missing required parameter - api_key")||L.includes("missing required parameter 'api_key'")){const D=window.prompt("Public Cloudinary API key (e.g. 686641252611351):","");if(D&&D.trim())try{Xa(null,null,D.trim());const I=await Tr(U);if(!I||typeof I!="string"||!I.startsWith("http")){alert("Image upload failed: unexpected response from Cloudinary");return}await y(C.id,{images:[I]});return}catch(I){console.error(I),alert("Image upload failed after setting API key: "+(I.message||I));return}}alert("Image upload failed: "+(k.message||k))}},F.click()}catch(F){console.error(F),alert("Could not open file dialog")}},className:"h-8 w-8",children:o.jsx(fv,{className:"h-3 w-3"})}),o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>P(C.id,C.name),className:"h-8 w-8 text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-3 w-3"})}),o.jsx(J,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:async()=>{try{let F,U;if(C.types&&C.types.length>0)if(C.types.length===1)F=C.types[0].name,U=C.types[0].price;else{const R=C.types.map((X,ie)=>`${ie+1}. ${X.name} - $${X.price.toFixed(2)}`).join(`
`),W=window.prompt(`Select a type for "${C.name}":

${R}

Enter the number (1-${C.types.length}):`,"1");if(!W)return;const K=parseInt(W)-1;if(K<0||K>=C.types.length){alert("Invalid selection. Please try again.");return}F=C.types[K].name,U=C.types[K].price}else U=C.price||0;const z=window.prompt("Your full name:");if(!z)return;const k=window.prompt("Your email:");if(!k)return;const O=window.prompt("Quantity:","1")||"1",L=parseInt(O)||1,D=window.prompt("Phone (optional):","")||"",I=window.prompt("Address (optional):","")||"",M=F?`${C.name} (${F})`:C.name;await N({username:z,userName:z,userEmail:k,userPhone:D,address:I,items:[{productId:C.id,name:M,quantity:L,price:U,selectedType:F}],total:U*L,status:"pending",createdAt:new Date}),alert(`Order placed successfully!

Product: ${M}
Quantity: ${L}
Total: $${(U*L).toFixed(2)}`)}catch(F){console.error(F),alert("Failed to place order")}},children:C.types&&C.types.length>1?"Select & Buy":"Buy Now"})]})]}),o.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",(C.types&&C.types.length>0?C.types[0].price:C.price||0).toFixed(2)]})]}),o.jsxs(me,{className:"pt-0",children:[C.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:C.description}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[o.jsx("span",{children:C.createdAt.toLocaleDateString()}),C.categoryId&&o.jsx(Pt,{variant:"secondary",className:"text-xs",children:C.categoryId})]})]})]},C.id))})]}),o.jsxs(Tc,{value:"categories",className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Categories"}),o.jsxs(J,{disabled:!0,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(cd,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Category Management"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Category management will be implemented in the future."}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"For now, you can specify category IDs when creating products."})]})})]})]})]})]})}function bq({order:t,onChangeStatus:e,onDelete:n}){var r,s;return o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ke,{children:["Order for ",t.username||t.userName,o.jsx("div",{className:"text-xs text-muted-foreground",children:(s=(r=t.createdAt)==null?void 0:r.toLocaleString)==null?void 0:s.call(r)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(Pt,{variant:t.status==="completed"||t.iscompleted?"default":"secondary",children:[t.status,t.iscompleted?" â€¢ completed":""]}),o.jsxs(J,{variant:"ghost",size:"sm",onClick:()=>e(t.id,"completed"),children:[o.jsx(JE,{className:"h-4 w-4 mr-1"})," Complete"]}),o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>n(t.id),className:"text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})}),o.jsxs(me,{children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact"}),o.jsx("div",{className:"font-medium",children:t.username||t.userName}),o.jsx("div",{className:"text-sm",children:t.userEmail}),t.userPhone&&o.jsx("div",{className:"text-sm",children:t.userPhone}),t.address&&o.jsx("div",{className:"text-sm",children:t.address})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm text-muted-foreground",children:"Items"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[t.items&&t.items.length>0?t.items.map((a,c)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm",children:[a.name," x",a.quantity]}),o.jsxs("div",{className:"font-medium",children:["$",(a.price*a.quantity).toFixed(2)]})]},c)):o.jsx("div",{className:"text-sm text-muted-foreground",children:"No item details. Products IDs may be attached in the raw order."}),t.productsIds&&t.productsIds.length>0&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Product IDs: ",(t.productsIds||[]).join(", ")]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t mt-2",children:[o.jsx("div",{className:"font-medium",children:"Total"}),o.jsxs("div",{className:"font-bold",children:["$",(t.total||0).toFixed(2)]})]})]})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsxs(J,{onClick:()=>e(t.id,"paid"),children:[o.jsx(JE,{className:"h-4 w-4 mr-2"})," Mark Paid"]}),o.jsxs(J,{variant:"outline",onClick:()=>e(t.id,"cancelled"),children:[o.jsx(K2,{className:"h-4 w-4 mr-2"})," Cancel"]})]})]})]},t.id)}function Nq(){const{orders:t,loading:e,error:n,updateOrder:r,deleteOrder:s}=bk(),a=async(u,h)=>{u&&await r(u,{status:h})},c=async u=>{u&&confirm("Delete this order?")&&await s(u)};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Orders"}),o.jsx("p",{className:"text-muted-foreground",children:"View and manage store orders"})]})}),e&&o.jsx("div",{children:"Loading..."}),n&&o.jsx("div",{className:"text-destructive",children:n}),!e&&!n&&o.jsx("div",{className:"grid gap-4",children:t.map(u=>o.jsx(bq,{order:u,onChangeStatus:a,onDelete:c},u.id))})]})}function S0(t,e){const[n,r]=E.useState([]),[s,a]=E.useState(!0),[c,u]=E.useState(null);return E.useEffect(()=>{let h=null,f=!0;return(async()=>{if(!t){r([]),a(!1);return}try{const y=pn(rs(Ae,"lectures"),bc(U$(),"==",t)),v=await _t(y);if(v.empty){f&&(r([]),a(!1));return}const w=v.docs[0],N=Qe(w.ref,e);h=eo(N,x=>{if(!f)return;const _=[];x.forEach(P=>{const j=P.data();_.push({id:P.id,...j})}),r(_),a(!1)},x=>{console.error(`Failed to subscribe to ${e}:`,x),u(`Failed to load ${e}`),a(!1)})}catch(y){console.error(`Error resolving lecture for ${e}:`,y),f&&(u(y.message||String(y)),a(!1))}})(),()=>{f=!1,h&&h()}},[t,e]),{items:n,loading:s,error:c}}function Sq(t){return S0(t,"videos")}function Tq(t){return S0(t,"files")}function Nk(t){return S0(t,"quizzes")}function Cq(){var f;const[t]=Qd(),e=t.get("lecture"),{lectures:n,loading:r,error:s}=Um(),{items:a,loading:c,error:u}=Sq(e);if(c||r)return o.jsx("div",{children:"Loading..."});if(u||s)return o.jsx("div",{className:"text-destructive",children:u||s});const h=n.find(g=>g.id===e);return h?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Videos for ",h.title||h.id]}),o.jsx("p",{className:"text-muted-foreground",children:h.description})]}),o.jsx("div",{children:o.jsx(Zn,{to:"/admin/resources",children:o.jsx(J,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["Videos (",((f=h.videos)==null?void 0:f.length)||0,")"]})}),o.jsx(me,{children:a&&a.length>0?o.jsx("div",{className:"space-y-3",children:a.map(g=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[g.thumbnailUrl?o.jsx("img",{src:g.thumbnailUrl,alt:g.title,className:"w-32 h-18 object-cover rounded"}):o.jsx("div",{className:"w-32 h-18 bg-muted rounded"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:g.title||"Untitled"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),o.jsx("div",{children:o.jsxs(J,{onClick:()=>window.open(g.url||g.youtubeUrl||"","_blank"),children:[" ",o.jsx(ni,{className:"h-4 w-4 mr-2"})," Play "]})})]},g.id))}):o.jsx("p",{className:"text-muted-foreground",children:"No videos available for this lecture."})})]})]}):o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its videos."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(J,{children:"Back to Years"})})})]})})}function jq(){var f;const[t]=Qd(),e=t.get("lecture"),{lectures:n,loading:r,error:s}=Um(),{items:a,loading:c,error:u}=Tq(e);if(c||r)return o.jsx("div",{children:"Loading..."});if(u||s)return o.jsx("div",{className:"text-destructive",children:u||s});const h=n.find(g=>g.id===e);return h?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Files for ",h.title||h.id]}),o.jsx("p",{className:"text-muted-foreground",children:h.description})]}),o.jsx("div",{children:o.jsx(Zn,{to:"/admin/resources",children:o.jsx(J,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["Files (",((f=h.files)==null?void 0:f.length)||0,")"]})}),o.jsx(me,{children:a&&a.length>0?o.jsx("div",{className:"space-y-3",children:a.map(g=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Cs,{className:"h-6 w-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:g.title||g.name||"Untitled File"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:g.description})]})]}),o.jsx("div",{children:o.jsx(J,{onClick:()=>window.open(g.fileUrl||g.url||"_blank"),children:"Download"})})]},g.id))}):o.jsx("p",{className:"text-muted-foreground",children:"No files available for this lecture."})})]})]}):o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its files."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(J,{children:"Back to Years"})})})]})})}function Iq(){var f;const[t]=Qd(),e=t.get("lecture"),{lectures:n,loading:r,error:s}=Um(),{items:a,loading:c,error:u}=Nk(e);if(c||r)return o.jsx("div",{children:"Loading..."});if(u||s)return o.jsx("div",{className:"text-destructive",children:u||s});const h=n.find(g=>g.id===e);return h?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Quizzes for ",h.title||h.id]}),o.jsx("p",{className:"text-muted-foreground",children:h.description})]}),o.jsx("div",{children:o.jsx(Zn,{to:"/admin/resources",children:o.jsx(J,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["Quizzes (",((f=h.quizzes)==null?void 0:f.length)||0,")"]})}),o.jsx(me,{children:a&&a.length>0?o.jsx("div",{className:"space-y-3",children:a.map(g=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx($i,{className:"h-6 w-6 text-purple-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:g.title||"Untitled Quiz"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:g.description}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",o.jsx("strong",{children:g.type||"multiple_choice"})]})]})]}),o.jsx("div",{children:(g.type||"multiple_choice")==="flashcard"?o.jsx(J,{onClick:()=>window.location.href=`/admin/flashcards?lecture=${e}&quiz=${g.id}`,children:"Flashcards"}):o.jsx(J,{onClick:()=>alert("Multiple choice runner not implemented. Use Flashcards or implement MCQ runner."),children:"Start"})})]},g.id))}):o.jsx("p",{className:"text-muted-foreground",children:"No quizzes available for this lecture."})})]})]}):o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No lecture selected"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a lecture to view its quizzes."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/years",children:o.jsx(J,{children:"Back to Years"})})})]})})}var T0="Progress",C0=100,[Aq,fW]=Gi(T0),[Pq,kq]=Aq(T0),Sk=E.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=Rq,...c}=t;(s||s===0)&&!z1(s)&&console.error(Oq(`${s}`,"Progress"));const u=z1(s)?s:C0;r!==null&&!B1(r,u)&&console.error(Dq(`${r}`,"Progress"));const h=B1(r,u)?r:null,f=Kp(h)?a(h,u):void 0;return o.jsx(Pq,{scope:n,value:h,max:u,children:o.jsx(Je.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":Kp(h)?h:void 0,"aria-valuetext":f,role:"progressbar","data-state":jk(h,u),"data-value":h??void 0,"data-max":u,...c,ref:e})})});Sk.displayName=T0;var Tk="ProgressIndicator",Ck=E.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=kq(Tk,n);return o.jsx(Je.div,{"data-state":jk(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});Ck.displayName=Tk;function Rq(t,e){return`${Math.round(t/e*100)}%`}function jk(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Kp(t){return typeof t=="number"}function z1(t){return Kp(t)&&!isNaN(t)&&t>0}function B1(t,e){return Kp(t)&&!isNaN(t)&&t<=e&&t>=0}function Oq(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${C0}\`.`}function Dq(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${C0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ik=Sk,Lq=Ck;const Ak=E.forwardRef(({className:t,value:e,...n},r)=>o.jsx(Ik,{ref:r,className:Ge("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:o.jsx(Lq,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Ak.displayName=Ik.displayName;function Mq(){const[t]=Qd(),e=t.get("lecture"),n=t.get("quiz"),{items:r,loading:s,error:a}=Nk(e),c=r.find(M=>M.id===n),[u,h]=E.useState(0),[f,g]=E.useState([]);if(s)return o.jsx("div",{children:"Loading..."});if(a)return o.jsx("div",{className:"text-destructive",children:a});if(!c)return o.jsx(pe,{children:o.jsxs(me,{className:"p-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Quiz not found"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Select a quiz to start flashcards."}),o.jsx("div",{className:"mt-4",children:o.jsx(Zn,{to:"/admin/quizzes",children:o.jsx(J,{children:"Back"})})})]})});const y=c.questions||[],v=y.reduce((M,R)=>M+(R.weight&&Number(R.weight)||1),0),w=y[u],N=w&&(w.weight||1)||1,x=f[u]??0,[_,P]=E.useState(!1),[j,C]=E.useState([]),[F,U]=E.useState(null);E.useEffect(()=>{P(!1),C([]),U(null)},[u]);const z=(M,R)=>{const W=[...f];W[M]=R,g(W)},k=f.reduce((M,R,W)=>M+(R||0),0),O=Math.round(k/v*100),L=M=>{if(!M)return[{type:"text",value:""}];const R=[],W=/\[\[(.+?)\]\]/g;let K=0,X;for(;(X=W.exec(M))!==null;)X.index>K&&R.push({type:"text",value:M.slice(K,X.index)}),R.push({type:"blank",value:X[1]}),K=W.lastIndex;return K<M.length&&R.push({type:"text",value:M.slice(K)}),R},D=()=>{const M=(w==null?void 0:w.question)||"",W=L(M).filter(K=>K.type==="blank");W.length>0?C(W.map(()=>"")):C([""]),U(null),P(!0)},I=()=>{const M=(w==null?void 0:w.question)||"",W=L(M).filter(G=>G.type==="blank").map(G=>G.value);let K=[];W.length>0?K=W:w&&Array.isArray(w.options)&&typeof w.correctAnswer=="number"?K=[w.options[w.correctAnswer]||""]:w&&(w.answer||w.correct)&&(K=[String(w.answer||w.correct)]);const ie=j.map((G,oe)=>{const le=(K[oe]??K[0]??"").toString().trim().toLowerCase();return G.toString().trim().toLowerCase()===le&&le!==""}).every(Boolean);U(ie?"Correct":"Incorrect"),ie&&z(u,N)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold",children:["Flashcards: ",c.title]}),o.jsx("p",{className:"text-muted-foreground",children:"Fill marks per question. Total progress shows weighted score."})]}),o.jsx("div",{children:o.jsx(Zn,{to:"/admin/quizzes",children:o.jsx(J,{variant:"ghost",children:"Back"})})})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsx(Ke,{children:"Progress"})}),o.jsxs(me,{children:[o.jsxs("div",{className:"mb-2 text-sm",children:["Total: ",v," points â€” Current: ",k," points"]}),o.jsx(Ak,{value:O}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[O,"%"]})]})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["Question ",u+1," / ",y.length]})}),o.jsx(me,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"font-medium",children:_?o.jsxs("div",{className:"space-y-2",children:[(()=>{const M=L(w.question||"");let R=0;return o.jsxs("div",{children:[M.map((W,K)=>{if(W.type==="text")return o.jsx("span",{children:W.value},K);const X=R++;return o.jsx("input",{value:j[X]??"",onChange:ie=>C(G=>{const oe=[...G];return oe[X]=ie.target.value,oe}),placeholder:"Fill the blank",className:"border-b-2 border-gray-300 px-1 mx-1"},K)}),M.length===1&&M[0].type==="text"&&o.jsx("div",{children:o.jsx("input",{value:j[0]??"",onChange:W=>C(K=>{const X=[...K];return X[0]=W.target.value,X}),placeholder:"Answer",className:"border-b-2 border-gray-300 px-1"})})]})})(),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx(J,{onClick:I,children:"Check"}),o.jsx(J,{variant:"outline",onClick:()=>{P(!1),U(null)},children:"Cancel"}),F&&o.jsx("div",{className:"ml-2 text-sm",children:F})]})]}):o.jsx("span",{role:"button",tabIndex:0,onClick:D,onKeyDown:M=>{M.key==="Enter"&&D()},children:w.question})}),w.imageUrl&&o.jsx("img",{src:w.imageUrl,alt:"question",className:"w-full max-w-md object-contain"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Weight: ",N]}),o.jsxs("label",{className:"text-sm",children:["Mark (0 - ",N,")"]}),o.jsx("input",{type:"number",min:0,max:N,value:x,onChange:M=>z(u,Math.max(0,Math.min(N,Number(M.target.value)||0))),className:"border rounded px-2 py-1 w-24"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(J,{disabled:u===0,onClick:()=>h(M=>Math.max(0,M-1)),children:"Previous"}),o.jsx(J,{disabled:u===y.length-1,onClick:()=>h(M=>Math.min(y.length-1,M+1)),children:"Next"}),o.jsx(J,{variant:"outline",onClick:()=>{g([]),h(0)},children:"Reset"})]}),o.jsx("div",{className:"mt-4",children:o.jsx(J,{onClick:()=>alert(`Final score: ${k}/${v} (${O}%)`),children:"Finish"})})]})})]})]})}function Fq(){return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Configure application settings and preferences"})]}),o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(LS,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Application Settings"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"This section will provide configuration options for the admin panel."}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Features: User management, system configuration, backup settings, security options."})]})})]})}function Vq(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null);return E.useEffect(()=>{const f=pn(Qe(Ae,"maps")),g=eo(f,y=>{const v=[];y.forEach(w=>{var x,_;const N=w.data();v.push({id:w.id,name:N.name||"",location:N.location||"",description:N.description||N.desc||"",type:N.type||N.mapType||"",video_url:N.video_url||N.videoUrl||"",createdAt:((_=(x=N.createdAt)==null?void 0:x.toDate)==null?void 0:_.call(x))||void 0})}),e(v),r(!1)},y=>{console.error("Failed to load maps:",y),a("Failed to load maps"),r(!1)});return()=>g()},[]),{maps:t,loading:n,error:s,createMap:async f=>{const g={...f,createdAt:new Date};g.type&&!g.mapType&&(g.mapType=g.type),g.mapType&&!g.type&&(g.type=g.mapType),["name","location","description","video_url","type","mapType"].forEach(y=>{typeof g[y]=="string"&&(g[y]=g[y].trim())}),await xn(Qe(Ae,"maps"),g)},updateMap:async(f,g)=>{const y={...g};y.type&&!y.mapType&&(y.mapType=y.type),y.mapType&&!y.type&&(y.type=y.mapType),["name","location","description","video_url","type","mapType"].forEach(v=>{typeof y[v]=="string"&&(y[v]=y[v].trim())}),await rn(At(Ae,"maps",f),y)},deleteMap:async f=>{await Sr(At(Ae,"maps",f))}}}function Uq(){const{maps:t,loading:e,error:n,createMap:r,updateMap:s,deleteMap:a}=Vq(),[c,u]=E.useState({name:"",location:"",description:"",video_url:"",type:""}),[h,f]=E.useState(!1),[g,y]=E.useState(null),v=()=>u({name:"",location:"",description:"",video_url:"",type:""}),w=async N=>{if(N.preventDefault(),!!c.name.trim()){f(!0);try{g?await s(g,c):await r(c),v(),y(null)}catch(x){console.error("Error saving map:",x),alert("Failed to save map")}finally{f(!1)}}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wd,{className:"h-6 w-6 text-blue-600"}),o.jsx("h1",{className:"text-3xl font-bold",children:"Maps"})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsx(Ke,{children:"Add Map"})}),o.jsx(me,{children:o.jsxs("form",{onSubmit:w,className:"grid md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{children:"Name"}),o.jsx(Ne,{value:c.name,onChange:N=>u(x=>({...x,name:N.target.value})),placeholder:"Map name",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{children:"Location"}),o.jsx(Ne,{value:c.location,onChange:N=>u(x=>({...x,location:N.target.value})),placeholder:"Location"})]}),o.jsxs("div",{className:"space-y-2 md:col-span-3",children:[o.jsx(Te,{children:"Description"}),o.jsx("textarea",{value:c.description,onChange:N=>u(x=>({...x,description:N.target.value})),placeholder:"Short description",className:"w-full border rounded px-3 py-2",rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{children:"Type"}),o.jsxs("select",{className:"w-full border rounded px-3 py-2",value:c.type,onChange:N=>u(x=>({...x,type:N.target.value})),children:[o.jsx("option",{value:"",children:"Select type"}),o.jsx("option",{value:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©",children:"Ù‚Ø§Ø¹Ø© Ø¯Ø±Ø§Ø³ÙŠØ©"}),o.jsx("option",{value:"Ù„Ø§Ø¨Ø§Øª",children:"Ù„Ø§Ø¨Ø§Øª"}),o.jsx("option",{value:"Ù…Ø¯Ø±Ø¬",children:"Ù…Ø¯Ø±Ø¬"}),o.jsx("option",{value:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª",children:"Ù‚Ø§Ø¹Ø§Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª"}),o.jsx("option",{value:"Ù…Ø·Ø¹Ù…",children:"Ù…Ø·Ø¹Ù…"}),o.jsx("option",{value:"Ù…ØµÙ„Ù‰",children:"Ù…ØµÙ„Ù‰"}),o.jsx("option",{value:"Ø£Ø®Ø±Ù‰",children:"Ø£Ø®Ø±Ù‰"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{children:"Video URL"}),o.jsx(Ne,{value:c.video_url,onChange:N=>u(x=>({...x,video_url:N.target.value})),placeholder:"https://..."})]}),o.jsx("div",{className:"md:col-span-3 flex justify-end space-x-2",children:g?o.jsxs(o.Fragment,{children:[o.jsx(J,{type:"button",variant:"outline",onClick:()=>{y(null),v()},children:"Cancel"}),o.jsxs(J,{type:"submit",disabled:h,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),h?"Saving...":"Save"]})]}):o.jsxs(J,{type:"submit",disabled:h,children:[o.jsx(Jt,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add"]})})]})})]}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs(Ke,{children:["All Maps (",t.length,")"]})}),o.jsx(me,{children:e?o.jsx("div",{children:"Loading..."}):n?o.jsx("div",{className:"text-destructive",children:n}):t.length===0?o.jsx("div",{className:"text-muted-foreground",children:"No maps yet."}):o.jsx("div",{className:"grid gap-3",children:t.map(N=>o.jsxs("div",{className:"p-3 border rounded flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-medium truncate",children:N.name}),o.jsx("div",{className:"text-xs text-muted-foreground truncate",children:N.location}),N.type&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Type: ",o.jsx("span",{className:"font-medium",children:N.type})]}),N.description&&o.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:N.description}),N.video_url&&o.jsx("a",{className:"text-xs text-blue-600 hover:underline",href:N.video_url,target:"_blank",rel:"noreferrer",children:N.video_url})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(J,{variant:"ghost",size:"sm",onClick:()=>{y(N.id),u({name:N.name||"",location:N.location||"",description:N.description||"",video_url:N.video_url||"",type:N.type||""}),window.scrollTo({top:0,behavior:"smooth"})},className:"",children:"Edit"}),o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>a(N.id),className:"text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]},N.id))})})]})]})}function $q({research:t,onClose:e,onSave:n}){const[r,s]=E.useState({projectTitle:"",abstract:"",fieldOfResearch:[],contactPerson:[],authorshipPosition:[],projectDuration:"",requiredSkills:[],supervisor:""}),[a,c]=E.useState(""),[u,h]=E.useState("");E.useEffect(()=>{t&&s({projectTitle:t.projectTitle||"",abstract:t.abstract||"",fieldOfResearch:t.fieldOfResearch||[],contactPerson:t.contactPerson||[],authorshipPosition:t.authorshipPosition||[],projectDuration:t.projectDuration||"",requiredSkills:t.requiredSkills||[],supervisor:t.supervisor||""})},[t]);const f=()=>{const N=a.trim();N&&(r.fieldOfResearch.includes(N)||s(x=>({...x,fieldOfResearch:[...x.fieldOfResearch,N]})),c(""))},g=()=>{const N=u.trim();N&&(r.requiredSkills.includes(N)||s(x=>({...x,requiredSkills:[...x.requiredSkills,N]})),h(""))},y=N=>s(x=>({...x,fieldOfResearch:x.fieldOfResearch.filter(_=>_!==N)})),v=N=>s(x=>({...x,requiredSkills:x.requiredSkills.filter(_=>_!==N)})),w=N=>{N.preventDefault();const x={projectTitle:r.projectTitle,abstract:r.abstract,fieldOfResearch:r.fieldOfResearch,contactPerson:r.contactPerson,authorshipPosition:r.authorshipPosition,projectDuration:r.projectDuration,requiredSkills:r.requiredSkills,supervisor:r.supervisor,updatedAt:new Date,...t?{}:{createdAt:new Date}};n(x)};return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(J,{variant:"ghost",onClick:e,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Research":"Create Research"}),o.jsx("p",{className:"text-muted-foreground",children:"Add or update research project details"})]})]})}),o.jsx("form",{onSubmit:w,className:"space-y-6",children:o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Project Details"}),o.jsx(St,{children:"Title and abstract"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"title",children:"Project Title *"}),o.jsx(Ne,{id:"title",placeholder:"Enter project title...",value:r.projectTitle,onChange:N=>s(x=>({...x,projectTitle:N.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"abstract",children:"Abstract"}),o.jsx(js,{id:"abstract",placeholder:"Write a brief abstract...",value:r.abstract,onChange:N=>s(x=>({...x,abstract:N.target.value})),rows:8})]})]})]}),o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Fields & Skills"}),o.jsx(St,{children:"Fields of research and required skills"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(Te,{children:"Field of Research"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx(Ne,{placeholder:"Add field e.g., Oncology",value:a,onChange:N=>c(N.target.value),onKeyDown:N=>{N.key==="Enter"&&(N.preventDefault(),f())}}),o.jsx(J,{type:"button",onClick:f,variant:"outline",children:"Add"})]}),o.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.fieldOfResearch.map(N=>o.jsxs(Pt,{variant:"secondary",className:"flex items-center gap-2",children:[N,o.jsx("button",{type:"button",onClick:()=>y(N),className:"ml-1 hover:text-destructive",children:o.jsx(Uc,{className:"h-3 w-3"})})]},N))})]}),o.jsxs("div",{children:[o.jsx(Te,{children:"Required Skills"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx(Ne,{placeholder:"Add skill e.g., Data analysis",value:u,onChange:N=>h(N.target.value),onKeyDown:N=>{N.key==="Enter"&&(N.preventDefault(),g())}}),o.jsx(J,{type:"button",onClick:g,variant:"outline",children:"Add"})]}),o.jsx("div",{className:"flex gap-2 flex-wrap mt-3",children:r.requiredSkills.map(N=>o.jsxs(Pt,{variant:"secondary",className:"flex items-center gap-2",children:[N,o.jsx("button",{type:"button",onClick:()=>v(N),className:"ml-1 hover:text-destructive",children:o.jsx(Uc,{className:"h-3 w-3"})})]},N))})]})]})]})]}),o.jsx("div",{className:"space-y-6",children:o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Meta"}),o.jsx(St,{children:"Contact, supervisor and duration"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{children:"Contact Person(s)"}),o.jsx(Ne,{placeholder:"Comma separated names",value:r.contactPerson.join(", "),onChange:N=>s(x=>({...x,contactPerson:N.target.value.split(",").map(_=>_.trim()).filter(Boolean)}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{children:"Authorship Positions"}),o.jsx(Ne,{placeholder:"Comma separated positions",value:r.authorshipPosition.join(", "),onChange:N=>s(x=>({...x,authorshipPosition:N.target.value.split(",").map(_=>_.trim()).filter(Boolean)}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{children:"Supervisor"}),o.jsx(Ne,{placeholder:"Supervisor name",value:r.supervisor,onChange:N=>s(x=>({...x,supervisor:N.target.value}))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{children:"Project Duration"}),o.jsx(Ne,{placeholder:"e.g., 6 months",value:r.projectDuration,onChange:N=>s(x=>({...x,projectDuration:N.target.value}))})]}),o.jsxs("div",{className:"flex justify-end",children:[o.jsx(J,{variant:"ghost",onClick:e,className:"mr-2",children:"Cancel"}),o.jsx(J,{type:"submit",children:"Save"})]})]})]})})]})})]})}const zq=[{id:"r1",projectTitle:"Impact of Early Clinical Exposure on Medical Students",abstract:"A study investigating how early clinical exposure affects students' clinical reasoning and confidence.",fieldOfResearch:["Medical Education","Clinical Skills"],contactPerson:["Dr. Sarah Johnson"],authorshipPosition:["Lead","Co-author"],projectDuration:"6 months",requiredSkills:["Clinical observation","Data analysis"],supervisor:"Prof. Michael Chen",createdAt:new Date,updatedAt:new Date}];function Bq(){const[t,e]=E.useState([]),[n,r]=E.useState(!0),[s,a]=E.useState(null),[c,u]=E.useState(!1);E.useEffect(()=>{const y=async()=>{try{const w=pn(Qe(Ae,"research"));await _t(w);const N=pn(Qe(Ae,"research"),_l("createdAt","desc"));return eo(N,_=>{const P=[];_.forEach(j=>{var F,U;const C=j.data();P.push({id:j.id,projectTitle:C.projectTitle||C.title||"",abstract:C.abstract||"",fieldOfResearch:C.fieldOfResearch||[],contactPerson:C.contactPerson||[],authorshipPosition:C.authorshipPosition||[],projectDuration:C.projectDuration||"",requiredSkills:C.requiredSkills||[],supervisor:C.supervisor||"",createdAt:(F=C.createdAt)!=null&&F.toDate?C.createdAt.toDate():C.createdAt||new Date,updatedAt:(U=C.updatedAt)!=null&&U.toDate?C.updatedAt.toDate():C.updatedAt||new Date})}),e(P),r(!1)},_=>{console.error("Error in research listener:",_),v()})}catch(w){return console.error("Firebase connection failed for research:",w),v(),null}},v=()=>{u(!0),e(zq),a(null),r(!1)};y()},[]);const h=async y=>{if(c){const v={id:`offline_${Date.now()}`,...y};e(w=>[v,...w]);return}try{await xn(Qe(Ae,"research"),y)}catch(v){console.error("Error creating research:",v),u(!0),await h(y)}};return{research:t,loading:n,error:s,createResearch:h,updateResearch:async(y,v)=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(w=>w.map(N=>N.id===y?{...N,...v}:N));return}try{await rn(At(Ae,"research",y),v)}catch(w){console.error("Error updating research:",w),e(N=>N.map(x=>x.id===y?{...x,...v}:x))}},deleteResearch:async y=>{if(c||y.startsWith("offline_")||y.startsWith("mock_")){e(v=>v.filter(w=>w.id!==y));return}try{await Sr(At(Ae,"research",y))}catch(v){console.error("Error deleting research:",v),e(w=>w.filter(N=>N.id!==y))}},isOfflineMode:c}}function qq(){const[t,e]=E.useState(""),[n,r]=E.useState(null),[s,a]=E.useState(!1),{research:c,loading:u,error:h,createResearch:f,updateResearch:g,deleteResearch:y}=Bq(),v=c.filter(_=>_.projectTitle.toLowerCase().includes(t.toLowerCase())),w=()=>{r(null),a(!0)},N=_=>{r(_),a(!0)},x=async _=>{window.confirm("Are you sure you want to delete this research entry?")&&await y(_)};return s?o.jsx($q,{research:n,onClose:()=>{a(!1),r(null)},onSave:async _=>{try{n?await g(n.id,_):await f(_),a(!1),r(null)}catch(P){console.error(P),alert("Failed to save. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Research"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage research projects and student/faculty submissions"})]}),o.jsxs(J,{onClick:w,className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Create Research"]})]}),o.jsx(pe,{children:o.jsx(me,{className:"pt-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search by project title...",value:t,onChange:_=>e(_.target.value),className:"pl-10"})]})})}),u&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx(Qi,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-muted-foreground",children:"Loading research entries..."})]})}),h&&o.jsx(pe,{children:o.jsxs(me,{className:"text-center py-12",children:[o.jsx("div",{className:"text-destructive mb-4",children:"âš ï¸ Error loading research"}),o.jsx("p",{className:"text-muted-foreground",children:h})]})}),!u&&!h&&o.jsx("div",{className:"space-y-4",children:v.map(_=>o.jsx(pe,{className:"hover:shadow-md transition-shadow",children:o.jsx(me,{className:"pt-6",children:o.jsx("div",{className:"flex gap-4",children:o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold line-clamp-1",children:_.projectTitle}),o.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 mt-2",children:_.abstract}),o.jsx("div",{className:"flex gap-2 flex-wrap mt-3 text-xs text-muted-foreground",children:(_.fieldOfResearch||[]).map(P=>o.jsx("span",{className:"bg-muted px-2 py-1 rounded text-xs",children:P},P))})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o.jsx(J,{variant:"ghost",onClick:()=>N(_),children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(J,{variant:"ghost",onClick:()=>x(_.id),children:o.jsx(En,{className:"h-4 w-4"})})]})]})})})})},_.id))})]})}function Wq({notification:t,onClose:e,onSave:n}){const{users:r}=Fm(),{years:s}=El(),[a,c]=E.useState({userId:"",title:"",message:"",type:"news",relatedId:"",batchId:"",yearId:""}),[u,h]=E.useState(!1);E.useEffect(()=>{t&&c({userId:t.userId||"",title:t.title||"",message:t.message||"",type:t.type||"news",relatedId:t.relatedId||"",batchId:t.batchId||"",yearId:""})},[t]),E.useEffect(()=>{if(a.yearId){const g=s.find(y=>y.id===a.yearId);g!=null&&g.batchId&&c(y=>({...y,batchId:g.batchId||""}))}},[a.yearId,s]);const f=async g=>{g.preventDefault(),h(!0);try{const y={userId:a.userId,title:a.title,message:a.message,type:a.type,relatedId:a.relatedId||void 0,read:!1,createdAt:new Date,batchId:a.batchId||void 0};n(y)}catch(y){console.error("Error saving notification:",y)}finally{h(!1)}};return Array.from(new Set(s.map(g=>({id:g.batchId,name:g.batchName})).filter(g=>g.id).map(g=>JSON.stringify(g)))).map(g=>JSON.parse(g)),o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(J,{variant:"ghost",onClick:e,children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),"Back"]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Notification":"Create Notification"}),o.jsx("p",{className:"text-muted-foreground",children:t?"Update the notification details":"Create a new notification for users"})]})]})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[o.jsx("div",{className:"lg:col-span-2 space-y-6",children:o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Notification Content"}),o.jsx(St,{children:"Main notification information"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"title",children:"Title *"}),o.jsx(Ne,{id:"title",placeholder:"Enter notification title...",value:a.title,onChange:g=>c(y=>({...y,title:g.target.value})),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"message",children:"Message *"}),o.jsx(js,{id:"message",placeholder:"Write your notification message here...",value:a.message,onChange:g=>c(y=>({...y,message:g.target.value})),rows:8,required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"type",children:"Type *"}),o.jsxs(lp,{value:a.type,onValueChange:g=>c(y=>({...y,type:g})),children:[o.jsx(vd,{children:o.jsx(cp,{placeholder:"Select notification type"})}),o.jsxs(xd,{children:[o.jsx(Po,{value:"news",children:"News"}),o.jsx(Po,{value:"announcement",children:"Announcement"}),o.jsx(Po,{value:"system",children:"System"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"relatedId",children:"Related ID (Optional)"}),o.jsx(Ne,{id:"relatedId",placeholder:"e.g., news article ID",value:a.relatedId,onChange:g=>c(y=>({...y,relatedId:g.target.value}))}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: ID of related item (e.g., news article ID)"})]})]})]})}),o.jsx("div",{className:"space-y-6",children:o.jsxs(pe,{children:[o.jsxs(Be,{children:[o.jsx(Ke,{children:"Target Audience"}),o.jsx(St,{children:"Select who should receive this notification"})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"userId",children:"User ID *"}),o.jsxs(lp,{value:a.userId,onValueChange:g=>c(y=>({...y,userId:g})),children:[o.jsx(vd,{children:o.jsx(cp,{placeholder:"Select a user"})}),o.jsx(xd,{children:r.map(g=>o.jsx(Po,{value:g.id||"",children:g.displayName||g.email||g.id},g.id))})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a specific user to notify"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"yearId",children:"Year (Optional)"}),o.jsxs(lp,{value:a.yearId,onValueChange:g=>c(y=>({...y,yearId:g})),children:[o.jsx(vd,{children:o.jsx(cp,{placeholder:"Select a year"})}),o.jsxs(xd,{children:[o.jsx(Po,{value:"",children:"All Years"}),s.map(g=>o.jsx(Po,{value:g.id||"",children:g.batchName?`${g.batchName} - Year ${g.yearNumber}`:`Year ${g.yearNumber}`},g.id))]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Selecting a year will automatically set the batch"})]}),a.batchId&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(Te,{htmlFor:"batchId",children:"Batch ID"}),o.jsx(Ne,{id:"batchId",value:a.batchId,readOnly:!0,className:"bg-muted"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically set from selected year"})]})]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(J,{type:"button",variant:"outline",onClick:e,children:"Cancel"}),o.jsx(J,{type:"submit",disabled:u,children:u?o.jsxs(o.Fragment,{children:[o.jsx(Yi,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Ga,{className:"h-4 w-4 mr-2"}),t?"Update Notification":"Create Notification"]})})]})]})]})}function Hq(){const[t,e]=E.useState(""),[n,r]=E.useState(null),[s,a]=E.useState(!1),[c,u]=E.useState("all"),{notifications:h,loading:f,error:g,createNotification:y,updateNotification:v,markAsRead:w,markAllAsRead:N,deleteNotification:x,unreadCount:_}=sP(),{users:P}=Fm(),j=I=>{const M=P.find(R=>R.id===I);return(M==null?void 0:M.displayName)||(M==null?void 0:M.email)||I},C=h.filter(I=>I.title.toLowerCase().includes(t.toLowerCase())||I.message.toLowerCase().includes(t.toLowerCase())||j(I.userId).toLowerCase().includes(t.toLowerCase())),F=C.filter(I=>!I.read),U=C.filter(I=>I.read),z=I=>{r(I),a(!0)},k=async I=>{if(window.confirm("Are you sure you want to delete this notification?"))try{await x(I)}catch(M){console.error("Error deleting notification:",M),alert("Failed to delete notification. Please try again.")}},O=async I=>{try{await w(I)}catch(M){console.error("Error marking notification as read:",M),alert("Failed to mark notification as read. Please try again.")}},L=async()=>{if(window.confirm("Mark all notifications as read?"))try{await N()}catch(I){console.error("Error marking all notifications as read:",I),alert("Failed to mark all notifications as read. Please try again.")}},D=()=>{r(null),a(!0)};return s?o.jsx(Wq,{notification:n,onClose:()=>{a(!1),r(null)},onSave:async I=>{try{n?await v(n.id,I):await y(I),a(!1),r(null)}catch(M){console.error("Error saving notification:",M),alert("Failed to save notification. Please try again.")}}}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Notifications Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Create and manage notifications for users"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[_>0&&o.jsxs(J,{variant:"outline",onClick:L,className:"flex items-center gap-2",children:[o.jsx(B2,{className:"h-4 w-4"}),"Mark All Read"]}),o.jsxs(J,{onClick:D,className:"flex items-center gap-2",children:[o.jsx(Jt,{className:"h-4 w-4"}),"Create Notification"]})]})]}),g&&o.jsx(pe,{className:"border-destructive",children:o.jsx(me,{className:"pt-6",children:o.jsx("p",{className:"text-destructive",children:g})})}),o.jsxs(pe,{children:[o.jsx(Be,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Ke,{children:"Notifications"}),o.jsx(St,{children:f?"Loading...":`${C.length} total notifications`})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"relative",children:[o.jsx(hl,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),o.jsx(Ne,{placeholder:"Search notifications...",value:t,onChange:I=>e(I.target.value),className:"pl-8 w-64"})]})})]})}),o.jsx(me,{children:f?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(Qi,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):o.jsxs(Ek,{value:c,onValueChange:u,children:[o.jsxs(N0,{children:[o.jsxs(Sc,{value:"all",children:["All (",C.length,")"]}),o.jsxs(Sc,{value:"unread",children:["Unread (",F.length,")"]}),o.jsxs(Sc,{value:"read",children:["Read (",U.length,")"]})]}),o.jsx(Tc,{value:"all",className:"mt-4",children:C.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(Ga,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No notifications found"})]}):o.jsx("div",{className:"space-y-3",children:C.map(I=>o.jsx(pe,{className:I.read?"opacity-75":"border-primary/50",children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[!I.read&&o.jsx(Pt,{variant:"default",className:"h-2 w-2 p-0 rounded-full"}),o.jsx("h3",{className:"font-semibold text-lg",children:I.title}),o.jsx(Pt,{variant:"outline",children:I.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:I.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ns,{className:"h-3 w-3"}),j(I.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(gc,{className:"h-3 w-3"}),I.createdAt.toLocaleDateString()]}),I.batchId&&o.jsxs(Pt,{variant:"secondary",className:"text-xs",children:["Batch: ",I.batchId.slice(0,8),"..."]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[!I.read&&o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>O(I.id),title:"Mark as read",children:o.jsx(dp,{className:"h-4 w-4"})}),o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>z(I),title:"Edit",children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>k(I.id),title:"Delete",className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})})},I.id))})}),o.jsx(Tc,{value:"unread",className:"mt-4",children:F.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(kS,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No unread notifications"})]}):o.jsx("div",{className:"space-y-3",children:F.map(I=>o.jsx(pe,{className:"border-primary/50",children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pt,{variant:"default",className:"h-2 w-2 p-0 rounded-full"}),o.jsx("h3",{className:"font-semibold text-lg",children:I.title}),o.jsx(Pt,{variant:"outline",children:I.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:I.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ns,{className:"h-3 w-3"}),j(I.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(gc,{className:"h-3 w-3"}),I.createdAt.toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>O(I.id),title:"Mark as read",children:o.jsx(dp,{className:"h-4 w-4"})}),o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>z(I),title:"Edit",children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>k(I.id),title:"Delete",className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})})},I.id))})}),o.jsx(Tc,{value:"read",className:"mt-4",children:U.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(tO,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No read notifications"})]}):o.jsx("div",{className:"space-y-3",children:U.map(I=>o.jsx(pe,{className:"opacity-75",children:o.jsx(me,{className:"pt-4",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"font-semibold text-lg",children:I.title}),o.jsx(Pt,{variant:"outline",children:I.type})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:I.message}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ns,{className:"h-3 w-3"}),j(I.userId)]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(gc,{className:"h-3 w-3"}),I.createdAt.toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>z(I),title:"Edit",children:o.jsx(ts,{className:"h-4 w-4"})}),o.jsx(J,{variant:"ghost",size:"icon",onClick:()=>k(I.id),title:"Delete",className:"text-destructive hover:text-destructive",children:o.jsx(En,{className:"h-4 w-4"})})]})]})})},I.id))})})]})})]})]})}const Kq=()=>{const t=Ji();return E.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Gq=new SM({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!1,retry:1}}});function Qq({children:t}){const{currentUser:e}=Dm();return e?o.jsx(o.Fragment,{children:t}):o.jsx(Qf,{to:"/login"})}const q1=()=>o.jsx(rB,{children:o.jsx(IM,{client:Gq,children:o.jsxs(iM,{children:[o.jsx(qO,{}),o.jsx(_D,{}),o.jsx($4,{basename:"/builder-stellar-world/",children:o.jsx(tB,{children:o.jsxs(k4,{children:[o.jsx($t,{path:"/login",element:o.jsx(pB,{})}),o.jsxs($t,{path:"/admin",element:o.jsx(Qq,{children:o.jsx(cB,{})}),children:[o.jsx($t,{index:!0,element:o.jsx(PB,{})}),o.jsx($t,{path:"news",element:o.jsx(K8,{})}),o.jsx($t,{path:"years",element:o.jsx(Y8,{})}),o.jsx($t,{path:"years/:id",element:o.jsx(X8,{})}),o.jsx($t,{path:"subjects/:id",element:o.jsx(iq,{})}),o.jsx($t,{path:"resources",element:o.jsx($1,{})}),o.jsx($t,{path:"resources/*",element:o.jsx($1,{})}),o.jsx($t,{path:"VIDEOS",element:o.jsx(Qf,{to:"/admin/years",replace:!0})}),o.jsx($t,{path:"VIDEOS/*",element:o.jsx(Qf,{to:"/admin/years",replace:!0})}),o.jsx($t,{path:"professors",element:o.jsx(tq,{})}),o.jsx($t,{path:"users",element:o.jsx(nq,{})}),o.jsx($t,{path:"store",element:o.jsx(Eq,{})}),o.jsx($t,{path:"orders",element:o.jsx(Nq,{})}),o.jsx($t,{path:"videos",element:o.jsx(Cq,{})}),o.jsx($t,{path:"files",element:o.jsx(jq,{})}),o.jsx($t,{path:"quizzes",element:o.jsx(Iq,{})}),o.jsx($t,{path:"flashcards",element:o.jsx(Mq,{})}),o.jsx($t,{path:"research",element:o.jsx(qq,{})}),o.jsx($t,{path:"maps",element:o.jsx(Uq,{})}),o.jsx($t,{path:"notifications",element:o.jsx(Hq,{})}),o.jsx($t,{path:"settings",element:o.jsx(Fq,{})})]}),o.jsx($t,{path:"/",element:o.jsx(Qf,{to:"/admin"})}),o.jsx($t,{path:"*",element:o.jsx(Kq,{})})]})})})]})})}),Yq=document.getElementById("root");if(window.__appRoot)window.__appRoot.render(o.jsx(q1,{}));else{const t=HO.createRoot(Yq);window.__appRoot=t,t.render(o.jsx(q1,{}))}
